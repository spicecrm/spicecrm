/*!
 * 
 *                     aacService
 *
 *                     release: 2022.02.001
 *
 *                     date: 2022-09-03 11:05:02
 *
 *                     build: 2022.02.001.1662195902704
 *
 */
"use strict";(self.webpackChunkcore=self.webpackChunkcore||[]).push([["src_admincomponents_admincomponents_module_ts"],{9876:(e,t,s)=>{s.r(t),s.d(t,{AdminComponentsModule:()=>Zo});var i=s(6895),n=s(433),l=s(2563),o=s(4357),a=s(5478),d=s(4518),r=s(3121),c=s(1571),g=s(1135),u=s(4505),m=s(3369),p=s(5329);let h=(()=>{class administration{constructor(e,t,s){this.backend=e,this.broadcast=t,this.language=s,this.loading=!1,this.adminNavigation=[],this.opened_itemid={},this.admincomponent={component:"AdministrationHomeScreen",componentconfig:{}},this.itemfilter="",this.admincomponent$=new g.X(this.admincomponent),this.loadNavigation(),this.broadcastsubscription=this.broadcast.message$.subscribe((e=>{this.handleMessage(e)}))}ngOnDestroy(){this.broadcastsubscription.unsubscribe()}handleMessage(e){if("loader.reloaded"===e.messagetype)this.loadNavigation()}loadNavigation(){this.loading=!0,this.backend.getRequest("system/spiceui/admin/navigation").subscribe((e=>{this.adminNavigation=e,this.loading=!1}))}navigateHome(){this.opened_itemid=null,this.admincomponent={component:"AdministrationHomeScreen",componentconfig:{}},this.admincomponent$.next(this.admincomponent)}getItemLabel(e){let t;return this.adminNavigation.some((s=>{if(t=s.groupcomponents.find((t=>t.id==e)),t)return!0})),t.admin_label}navigateto(e){let t;this.adminNavigation.some((s=>{if(t=s.groupcomponents.find((t=>t.id==e)),t)return!0})),t.component&&(this.admincomponent=t,this.admincomponent.componentconfig.label||(this.admincomponent.componentconfig.label=this.admincomponent.admin_label),this.admincomponent$.next(this.admincomponent),this.opened_itemid=e)}get navigationGroups(){if(""==this.itemfilter)return this.adminNavigation;let e=[];for(let t of this.adminNavigation)if(t.label&&this.language.getLabel(t.label).toLowerCase().indexOf(this.itemfilter.toLowerCase())>=0||t.label&&this.language.getLabel(t.label,"","long").toLowerCase().indexOf(this.itemfilter.toLowerCase())>=0)e.push(t);else{let s=[];for(let e of t.groupcomponents)(e.adminaction.toLowerCase().indexOf(this.itemfilter.toLowerCase())>=0||e.admin_label&&this.language.getLabel(e.admin_label).toLowerCase().indexOf(this.itemfilter.toLowerCase())>=0||e.admin_label&&this.language.getLabel(e.admin_label,"","long").toLowerCase().indexOf(this.itemfilter.toLowerCase())>=0)&&s.push(e);s.length>0&&e.push({id:t.id,name:t.name,label:t.label,groupcomponents:s})}return e}}return administration.ɵfac=function(e){return new(e||administration)(c.LFG(u.y),c.LFG(m.f),c.LFG(p.d))},administration.ɵprov=c.Yz7({token:administration,factory:administration.ɵfac}),administration})();var b=s(4154),f=s(2032),Z=s(7017),A=s(1058),y=s(3194),v=s(4021),x=s(2656),L=s(4561),T=s(3463),M=s(8859);function J(e,t){1&e&&c._UZ(0,"system-utility-icon",12),2&e&&c.Q6J("icon","search")("addclasses","slds-input__icon slds-input__icon--left")}function q(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",13)(1,"button",14),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw();return c.KtG(t.administration.itemfilter="")})),c._UZ(2,"system-button-icon",15),c.qZA()()}2&e&&(c.xp6(2),c.Q6J("icon","clear"))}const E=function(e){return{"slds-theme_inverse":e}};function C(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"li",19)(1,"a",20),c.NdJ("click",(function(){const t=c.CHM(e).$implicit,s=c.oxw(2);return c.KtG(s.openContent(t.id))})),c.TgZ(2,"div",21),c._UZ(3,"system-icon",22)(4,"system-label",17),c.qZA()()()}if(2&e){const e=t.$implicit,s=c.oxw(2);c.Q6J("title",s.language.getLabel(e.admin_label,"","long")),c.xp6(1),c.Q6J("ngClass",c.VKq(4,E,e.id==s.administration.opened_itemid)),c.xp6(2),c.Q6J("icon",e.icon?e.icon:"empty"),c.xp6(1),c.Q6J("label",e.admin_label)}}function U(e,t){if(1&e&&(c.ynx(0),c.TgZ(1,"h2",16),c._UZ(2,"system-label",17),c.qZA(),c.TgZ(3,"ul"),c.YNc(4,C,5,6,"li",18),c.qZA(),c.BQk()),2&e){const e=t.$implicit,s=c.oxw();c.xp6(2),c.Q6J("label",e.label),c.xp6(2),c.Q6J("ngForOf",e.groupcomponents)("ngForTrackBy",s.trackbyfn)}}let N=(()=>{class AdministrationMenu{constructor(e,t,s){this.language=e,this.navigationtab=t,this.administration=s}trackbyfn(e,t){return t.id}openContent(e){if(this.administration.opened_itemid==e)return!0;let t=this.administration.getItemLabel(e);this.navigationtab.setTabInfo({displayname:this.language.getLabel(t||"LBL_ADMINISTRATION"),displayicon:"settings"}),this.administration.navigateto(e)}}return AdministrationMenu.ɵfac=function(e){return new(e||AdministrationMenu)(c.Y36(p.d),c.Y36(Z.d),c.Y36(h))},AdministrationMenu.ɵcmp=c.Xpm({type:AdministrationMenu,selectors:[["administration-menu"]],decls:12,vars:6,consts:[[1,"slds-grid","slds-grid--vertical","slds-navigation-list--vertical","slds-navigation-list--vertical-inverse","slds-border--right"],[1,"slds-p-horizontal--xx-small","slds-p-vertical--small","slds-border--bottom","slds-grid","slds-grid--vertical-align-center"],[1,"slds-p-horizontal--x-small"],["tabindex","-1",1,"slds-button","slds-button_icon",3,"click"],["icon","home"],[1,"slds-grow","slds-form-element__control","slds-input-has-icon","slds-input-has-icon_right","slds-input-has-icon_group-right","slds-m-vertical--xx-small"],["type","text",1,"slds-input",3,"placeholder","ngModel","ngModelChange"],[3,"icon","addclasses",4,"ngIf"],["class","slds-input__icon-group slds-input__icon-group_right","style","margin-top: initial;",4,"ngIf"],["system-to-bottom",""],[1,"slds-p-bottom--medium"],[4,"ngFor","ngForOf","ngForTrackBy"],[3,"icon","addclasses"],[1,"slds-input__icon-group","slds-input__icon-group_right",2,"margin-top","initial"],["tabindex","-1",1,"slds-input__icon","slds-input__icon_right","slds-button","slds-button_icon",3,"click"],[3,"icon"],[1,"slds-text-title--caps","slds-p-around--medium"],[3,"label"],[3,"title",4,"ngFor","ngForOf","ngForTrackBy"],[3,"title"],["href","javascript:void(0);",1,"slds-navigation-list--vertical__action","slds-p-vertical--xxx-small","slds-text-link--reset",3,"ngClass","click"],[1,"slds-grid","slds-grid--vertical-align-center","slds-truncate"],["size","x-small",3,"icon"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),c.NdJ("click",(function(){return t.administration.navigateHome()})),c._UZ(4,"system-button-icon",4),c.qZA()(),c.TgZ(5,"div",5)(6,"input",6),c.NdJ("ngModelChange",(function(e){return t.administration.itemfilter=e})),c.qZA(),c.YNc(7,J,1,2,"system-utility-icon",7),c.YNc(8,q,3,1,"div",8),c.qZA()(),c.TgZ(9,"div",9)(10,"div",10),c.YNc(11,U,5,3,"ng-container",11),c.qZA()()()),2&e&&(c.xp6(6),c.Q6J("placeholder",t.language.getLabel("LBL_SEARCH"))("ngModel",t.administration.itemfilter),c.xp6(1),c.Q6J("ngIf",""==t.administration.itemfilter),c.xp6(1),c.Q6J("ngIf",""!=t.administration.itemfilter),c.xp6(3),c.Q6J("ngForOf",t.administration.navigationGroups)("ngForTrackBy",t.trackbyfn))},dependencies:[i.mk,i.sg,i.O5,n.Fj,n.JJ,n.On,x.J,L.f,T._,M.r,A.H],encapsulation:2}),AdministrationMenu})();const k=["admincontentcontainer"];let S=(()=>{class AdministrationMain{constructor(e,t,s,i,n){this.administration=e,this.metadata=t,this.language=s,this.navigation=i,this.navigationtab=n,this.admincontentObject=null,this.navigationtab.setTabInfo({displayname:this.language.getLabel("LBL_ADMINISTRATION"),displayicon:"settings"})}ngAfterViewInit(){this.administration.admincomponent$.subscribe((e=>{this.openContent(e)}))}openContent(e){this.admincontentObject&&this.admincontentObject.destroy(),this.metadata.addComponent(e.component,this.admincontentcontainer).subscribe((t=>{t.instance.componentconfig=e.componentconfig,this.admincontentObject=t}))}}return AdministrationMain.ɵfac=function(e){return new(e||AdministrationMain)(c.Y36(h),c.Y36(b.Pu),c.Y36(p.d),c.Y36(f.G),c.Y36(Z.d))},AdministrationMain.ɵcmp=c.Xpm({type:AdministrationMain,selectors:[["ng-component"]],viewQuery:function(e,t){if(1&e&&c.Gf(k,7,c.s_b),2&e){let e;c.iGM(e=c.CRH())&&(t.admincontentcontainer=e.first)}},features:[c._Bn([h])],decls:6,vars:1,consts:[["system-to-bottom-noscroll","",1,"slds-grid",3,"system-overlay-loading-spinner"],[1,"slds-large-size--1-of-8","slds-medium-size--1-of-6",2,"min-width","220px"],["system-to-bottom","",1,"slds-grow"],["admincontentcontainer",""]],template:function(e,t){1&e&&(c.TgZ(0,"div",0)(1,"div",1),c._UZ(2,"administration-menu"),c.qZA(),c.TgZ(3,"div",2),c._UZ(4,"div",null,3),c.qZA()()),2&e&&c.Q6J("system-overlay-loading-spinner",t.administration.loading)},dependencies:[A.H,y.t,v._,N],encapsulation:2}),AdministrationMain})();var F=s(7774);let R=(()=>{class AdministrationMenuRouteItem{constructor(e){this.router=e,this.componentconfig={},this.self={}}ngOnInit(){this.componentconfig.route&&this.router.navigate([this.componentconfig.route])}}return AdministrationMenuRouteItem.ɵfac=function(e){return new(e||AdministrationMenuRouteItem)(c.Y36(F.F0))},AdministrationMenuRouteItem.ɵcmp=c.Xpm({type:AdministrationMenuRouteItem,selectors:[["ng-component"]],decls:0,vars:0,template:function(e,t){},encapsulation:2}),AdministrationMenuRouteItem})();var I=s(6163);let w=(()=>{class administrationconfigurator{constructor(e,t){this.backend=e,this.modelutilities=t,this.dictionary="",this.entries=[],this.sorting={field:"",direction:""},this.fielddefobj={}}loadEntries(e=[]){this.backend.getRequest("configuration/configurator/entries/"+this.dictionary).subscribe((t=>{this.fielddefobj={};for(let t of e)this.fielddefobj[t.name]=t.type?t.type:"";for(let e of t)this.entries.push({id:e.id,mode:"",data:this.mapData(e)})}))}mapData(e){for(let t in this.fielddefobj)switch(this.fielddefobj[t]){case"bool":case"boolean":e[t]="1"==e[t]}return e}remapData(e){let t={};for(let s in this.fielddefobj)switch(this.fielddefobj[s]){case"bool":case"boolean":t[s]=1==e[s]?"1":"0";break;default:t[s]=e[s]}return t}addEntry(){let e=this.modelutilities.generateGuid();this.entries.unshift({id:e,mode:"new",data:{id:e}})}saveEntry(e){this.entries.some((t=>{if(t.id===e)return delete t.backup,this.backend.postRequest("configuration/configurator/"+this.dictionary+"/"+e,{},{config:this.remapData(t.data)}).subscribe((e=>{t.mode=""})),!0}))}deleteEntry(e){this.entries.some(((t,s)=>{if(t.id===e)return delete t.backup,this.backend.deleteRequest("configuration/configurator/"+this.dictionary+"/"+e).subscribe((e=>{this.entries.splice(s,1)})),!0}))}setEditMode(e){this.entries.some((t=>{if(t.id===e)return t.mode="edit",t.backup=JSON.parse(JSON.stringify(t.data)),!0}))}cancelEditMode(e){this.entries.some(((t,s)=>{if(t.id===e)return"new"===t.mode?this.entries.splice(s,1):(t.data=JSON.parse(JSON.stringify(t.backup)),delete t.backup,t.mode=""),!0}))}isEditMode(e){let t=!1;return this.entries.some((s=>{if(s.id===e)return t="edit"===s.mode||"new"===s.mode,!0})),t}copy(e){this.entries.some((t=>{if(t.id===e){let e={};return e.data=JSON.parse(JSON.stringify(t.data)),e.mode="new",e.id=this.modelutilities.generateGuid(),e.data.id=e.id,this.entries.unshift(e),!0}}))}sort(e){this.sorting.field===e?this.sorting.direction="asc"==this.sorting.direction?"dsc":"asc":(this.sorting.field=e,this.sorting.direction="asc"),this.entries.sort(((e,t)=>e.data[this.sorting.field]==t.data[this.sorting.field]?0:"asc"==this.sorting.direction?e.data[this.sorting.field]<t.data[this.sorting.field]?-1:1:e.data[this.sorting.field]<t.data[this.sorting.field]?1:-1))}}return administrationconfigurator.ɵfac=function(e){return new(e||administrationconfigurator)(c.LFG(u.y),c.LFG(I.A))},administrationconfigurator.ɵprov=c.Yz7({token:administrationconfigurator,factory:administrationconfigurator.ɵfac}),administrationconfigurator})();var D=s(3441),O=s(7514),B=s(3497);function Q(e,t){if(1&e&&(c.TgZ(0,"div")(1,"div",2),c._uU(2),c.qZA()()),2&e){const e=c.oxw();c.xp6(2),c.Oqu(e.rolename)}}function Y(e,t){if(1&e&&(c.TgZ(0,"option",9),c._uU(1),c.qZA()),2&e){const e=t.$implicit;c.Q6J("value",e.id),c.xp6(1),c.Oqu(e.name)}}function z(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",3)(1,"div",4)(2,"div",5)(3,"select",6),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.roleValue=t)})),c.TgZ(4,"option",7),c._uU(5,"*"),c.qZA(),c.YNc(6,Y,2,2,"option",8),c.qZA()()()()}if(2&e){const e=c.oxw();c.xp6(3),c.Q6J("ngModel",e.roleValue),c.xp6(3),c.Q6J("ngForOf",e.roles)}}let P=(()=>{class AdministrationConfiguratorItemRole{constructor(e){this.metadata=e,this.editmode=!1,this.fieldvalue={},this.fieldvalueChange=new c.vpe,this.roles=[]}loadRoles(){let e=this.metadata.getRoles();e.sort(((e,t)=>e.name>t.name?1:-1));for(let t of e)this.roles.push(t)}ngOnInit(){(this.editmode||"*"!=this.fieldvalue)&&this.loadRoles()}get roleValue(){return this.fieldvalue}set roleValue(e){this.fieldvalue=e,this.fieldvalueChange.emit(e)}get rolename(){for(let e of this.roles)if(e.id==this.fieldvalue)return e.name;return this.fieldvalue}}return AdministrationConfiguratorItemRole.ɵfac=function(e){return new(e||AdministrationConfiguratorItemRole)(c.Y36(b.Pu))},AdministrationConfiguratorItemRole.ɵcmp=c.Xpm({type:AdministrationConfiguratorItemRole,selectors:[["administration-configurator-item-role"]],inputs:{editmode:"editmode",fieldvalue:"fieldvalue"},outputs:{fieldvalueChange:"fieldvalueChange"},decls:2,vars:2,consts:[[4,"ngIf"],["class","slds-form-element",4,"ngIf"],[1,"slds-truncate"],[1,"slds-form-element"],[1,"slds-form-element__control"],[1,"slds-select_container","slds-m-vertical--xx-small"],[1,"slds-select",3,"ngModel","ngModelChange"],["value","*"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){1&e&&(c.YNc(0,Q,3,1,"div",0),c.YNc(1,z,7,2,"div",1)),2&e&&(c.Q6J("ngIf",!t.editmode),c.xp6(1),c.Q6J("ngIf",t.editmode))},dependencies:[i.sg,i.O5,n.YN,n.Kr,n.EJ,n.JJ,n.On],encapsulation:2}),AdministrationConfiguratorItemRole})();const G=["administration-configurator-item",""];function H(e,t){if(1&e&&(c.TgZ(0,"span")(1,"pre",10),c._uU(2),c.qZA()()),2&e){const e=c.oxw(2).$implicit,t=c.oxw();c.xp6(2),c.Oqu(t.getJSON(t.entry.data[e.name]))}}function K(e,t){if(1&e&&(c.TgZ(0,"span",11),c._uU(1),c.qZA()),2&e){const e=c.oxw(2).$implicit,t=c.oxw();c.xp6(1),c.Oqu(t.entry.data[e.name])}}function j(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"system-checkbox",12),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw(2).$implicit,i=c.oxw();return c.KtG(i.entry.data[s.name]=t)})),c.qZA()}if(2&e){const e=c.oxw(2).$implicit,t=c.oxw();c.Q6J("disabled",!0)("ngModel",t.entry.data[e.name])}}function $(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"system-checkbox",12),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw(2).$implicit,i=c.oxw();return c.KtG(i.entry.data[s.name]=t)})),c.qZA()}if(2&e){const e=c.oxw(2).$implicit,t=c.oxw();c.Q6J("disabled",!0)("ngModel",t.entry.data[e.name])}}function X(e,t){if(1&e&&c._UZ(0,"administration-configurator-item-role",13),2&e){const e=c.oxw(2).$implicit,t=c.oxw();c.Q6J("editmode",!1)("fieldvalue",t.entry.data[e.name])}}function V(e,t){if(1&e&&(c.TgZ(0,"span"),c._uU(1),c.qZA()),2&e){const e=c.oxw(2).$implicit,t=c.oxw();c.xp6(1),c.Oqu(t.entry.data[e.name])}}function W(e,t){if(1&e&&(c.TgZ(0,"div",4),c.YNc(1,H,3,1,"span",5),c.YNc(2,K,2,1,"span",6),c.YNc(3,j,1,2,"system-checkbox",7),c.YNc(4,$,1,2,"system-checkbox",7),c.YNc(5,X,1,2,"administration-configurator-item-role",8),c.YNc(6,V,2,1,"span",9),c.qZA()),2&e){const e=c.oxw().$implicit;c.Q6J("ngSwitch",e.type),c.xp6(1),c.Q6J("ngSwitchCase","json"),c.xp6(1),c.Q6J("ngSwitchCase","text"),c.xp6(1),c.Q6J("ngSwitchCase","bool"),c.xp6(1),c.Q6J("ngSwitchCase","boolean"),c.xp6(1),c.Q6J("ngSwitchCase","role")}}function ee(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"textarea",21),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw(2).$implicit,i=c.oxw();return c.KtG(i.entry.data[s.name]=t)})),c.qZA()}if(2&e){const e=c.oxw(2).$implicit,t=c.oxw();c.Q6J("ngModel",t.entry.data[e.name])}}function te(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"textarea",21),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw(2).$implicit,i=c.oxw();return c.KtG(i.entry.data[s.name]=t)})),c.qZA()}if(2&e){const e=c.oxw(2).$implicit,t=c.oxw();c.Q6J("ngModel",t.entry.data[e.name])}}function se(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"system-input-label",22),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw(2).$implicit,i=c.oxw();return c.KtG(i.entry.data[s.name]=t)})),c.qZA()}if(2&e){const e=c.oxw(2).$implicit,t=c.oxw();c.Q6J("ngModel",t.entry.data[e.name])}}function ie(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"system-checkbox",23),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw(2).$implicit,i=c.oxw();return c.KtG(i.entry.data[s.name]=t)})),c.qZA()}if(2&e){const e=c.oxw(2).$implicit,t=c.oxw();c.Q6J("ngModel",t.entry.data[e.name])}}function ne(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"system-checkbox",23),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw(2).$implicit,i=c.oxw();return c.KtG(i.entry.data[s.name]=t)})),c.qZA()}if(2&e){const e=c.oxw(2).$implicit,t=c.oxw();c.Q6J("ngModel",t.entry.data[e.name])}}function le(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"administration-configurator-item-role",24),c.NdJ("fieldvalueChange",(function(t){c.CHM(e);const s=c.oxw(2).$implicit,i=c.oxw();return c.KtG(i.entry.data[s.name]=t)})),c.qZA()}if(2&e){const e=c.oxw(2).$implicit,t=c.oxw();c.Q6J("editmode",!0)("fieldvalue",t.entry.data[e.name])}}function oe(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"input",25),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw(2).$implicit,i=c.oxw();return c.KtG(i.entry.data[s.name]=t)})),c.qZA()}if(2&e){const e=c.oxw(2).$implicit,t=c.oxw();c.Q6J("ngModel",t.entry.data[e.name])}}function ae(e,t){if(1&e&&(c.TgZ(0,"div",14)(1,"div",15),c.YNc(2,ee,1,1,"textarea",16),c.YNc(3,te,1,1,"textarea",16),c.YNc(4,se,1,1,"system-input-label",17),c.YNc(5,ie,1,1,"system-checkbox",18),c.YNc(6,ne,1,1,"system-checkbox",18),c.YNc(7,le,1,2,"administration-configurator-item-role",19),c.YNc(8,oe,1,1,"input",20),c.qZA()()),2&e){const e=c.oxw().$implicit;c.xp6(1),c.Q6J("ngSwitch",e.type),c.xp6(1),c.Q6J("ngSwitchCase","json"),c.xp6(1),c.Q6J("ngSwitchCase","text"),c.xp6(1),c.Q6J("ngSwitchCase","label"),c.xp6(1),c.Q6J("ngSwitchCase","bool"),c.xp6(1),c.Q6J("ngSwitchCase","boolean"),c.xp6(1),c.Q6J("ngSwitchCase","role")}}function de(e,t){if(1&e&&(c.TgZ(0,"td"),c.YNc(1,W,7,6,"div",2),c.YNc(2,ae,9,7,"ng-template",null,3,c.W1O),c.qZA()),2&e){const e=t.$implicit,s=c.MAs(3),i=c.oxw();c.xp6(1),c.Q6J("ngIf",!i.isEditMode(e))("ngIfElse",s)}}function re(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",26)(1,"button",27),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw();return c.KtG(t.setEditMode())})),c._UZ(2,"system-button-icon",28),c.qZA(),c.TgZ(3,"button",27),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw();return c.KtG(t.copy(t.entry.id))})),c._UZ(4,"system-button-icon",28),c.qZA(),c.TgZ(5,"button",27),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw();return c.KtG(t.delete())})),c._UZ(6,"system-button-icon",28),c.qZA()()}2&e&&(c.xp6(2),c.Q6J("icon","edit")("size","small"),c.xp6(2),c.Q6J("icon","copy")("size","small"),c.xp6(2),c.Q6J("icon","delete")("size","small"))}function ce(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",26)(1,"button",27),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw();return c.KtG(t.setViewMode())})),c._UZ(2,"system-button-icon",28),c.qZA(),c.TgZ(3,"button",27),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw();return c.KtG(t.save())})),c._UZ(4,"system-button-icon",28),c.qZA()()}2&e&&(c.xp6(2),c.Q6J("icon","close")("size","small"),c.xp6(2),c.Q6J("icon","check")("size","small"))}let ge=(()=>{class AdministrationConfiguratorItem{constructor(e,t,s){this.administrationconfigurator=e,this.language=t,this.helper=s,this.fields=[],this.entry={}}setEditMode(){this.administrationconfigurator.setEditMode(this.entry.id)}isEditMode(e=null){return e?!e.readonly&&this.administrationconfigurator.isEditMode(this.entry.id):this.administrationconfigurator.isEditMode(this.entry.id)}setViewMode(){this.administrationconfigurator.cancelEditMode(this.entry.id)}save(){this.administrationconfigurator.saveEntry(this.entry.id)}delete(){this.helper.confirm(this.language.getLabel("MSG_DELETE_RECORD"),this.language.getLabel("MSG_DELETE_RECORD","long")).subscribe((e=>{e&&this.administrationconfigurator.deleteEntry(this.entry.id)}))}copy(e){this.administrationconfigurator.copy(e)}getJSON(e){try{let t=JSON.parse(e);return JSON.stringify(t,null,2)}catch(t){return e}}}return AdministrationConfiguratorItem.ɵfac=function(e){return new(e||AdministrationConfiguratorItem)(c.Y36(w),c.Y36(p.d),c.Y36(D._))},AdministrationConfiguratorItem.ɵcmp=c.Xpm({type:AdministrationConfiguratorItem,selectors:[["","administration-configurator-item",""]],inputs:{fields:"fields",entry:"entry"},attrs:G,decls:4,vars:3,consts:[[4,"ngFor","ngForOf"],["class","slds-button-group slds-float--right","role","group",4,"ngIf"],["class","slds-truncate slds-p-horizontal--small","style","max-width: 200px;",3,"ngSwitch",4,"ngIf","ngIfElse"],["editfield",""],[1,"slds-truncate","slds-p-horizontal--small",2,"max-width","200px",3,"ngSwitch"],[4,"ngSwitchCase"],["class","slds-truncate_container_25","style","max-width: 200px;",4,"ngSwitchCase"],[3,"disabled","ngModel","ngModelChange",4,"ngSwitchCase"],[3,"editmode","fieldvalue",4,"ngSwitchCase"],[4,"ngSwitchDefault"],[1,"slds-m-vertical--none"],[1,"slds-truncate_container_25",2,"max-width","200px"],[3,"disabled","ngModel","ngModelChange"],[3,"editmode","fieldvalue"],[1,"slds-form-element"],[1,"slds-form-element__control",3,"ngSwitch"],["class","slds-textarea slds-scrollable--y slds-m-vertical--xx-small",3,"ngModel","ngModelChange",4,"ngSwitchCase"],[3,"ngModel","ngModelChange",4,"ngSwitchCase"],["class","slds-m-horizontal--small","style","display: block",3,"ngModel","ngModelChange",4,"ngSwitchCase"],[3,"editmode","fieldvalue","fieldvalueChange",4,"ngSwitchCase"],["type","text","class","slds-input",3,"ngModel","ngModelChange",4,"ngSwitchDefault"],[1,"slds-textarea","slds-scrollable--y","slds-m-vertical--xx-small",3,"ngModel","ngModelChange"],[3,"ngModel","ngModelChange"],[1,"slds-m-horizontal--small",2,"display","block",3,"ngModel","ngModelChange"],[3,"editmode","fieldvalue","fieldvalueChange"],["type","text",1,"slds-input",3,"ngModel","ngModelChange"],["role","group",1,"slds-button-group","slds-float--right"],[1,"slds-button","slds-button--icon-border",3,"click"],[3,"icon","size"]],template:function(e,t){1&e&&(c.YNc(0,de,4,2,"td",0),c.TgZ(1,"td"),c.YNc(2,re,7,6,"div",1),c.YNc(3,ce,5,4,"div",1),c.qZA()),2&e&&(c.Q6J("ngForOf",t.fields),c.xp6(2),c.Q6J("ngIf",!t.isEditMode()),c.xp6(1),c.Q6J("ngIf",t.isEditMode()))},dependencies:[i.sg,i.O5,i.RF,i.n9,i.ED,n.Fj,n.JJ,n.On,x.J,O.U,B.$,P],encapsulation:2}),AdministrationConfiguratorItem})();function ue(e,t){1&e&&c._UZ(0,"system-utility-icon",12),2&e&&c.Q6J("icon","arrowup")("size","x-small")}function me(e,t){1&e&&c._UZ(0,"system-utility-icon",12),2&e&&c.Q6J("icon","arrowdown")("size","x-small")}function pe(e,t){if(1&e&&(c.ynx(0),c.YNc(1,ue,1,2,"system-utility-icon",18),c.YNc(2,me,1,2,"system-utility-icon",18),c.BQk()),2&e){const e=c.oxw(2);c.xp6(1),c.Q6J("ngIf","asc"==e.administrationconfigurator.sorting.direction),c.xp6(1),c.Q6J("ngIf","dsc"==e.administrationconfigurator.sorting.direction)}}function he(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"th",15),c.NdJ("click",(function(){const t=c.CHM(e).$implicit,s=c.oxw();return c.KtG(s.sort(t.name))})),c.TgZ(1,"div",16),c._uU(2),c.YNc(3,pe,3,2,"ng-container",17),c.qZA()()}if(2&e){const e=t.$implicit,s=c.oxw();c.xp6(2),c.hij(" ",e.name," "),c.xp6(1),c.Q6J("ngIf",s.administrationconfigurator.sorting.field==e.name)}}function be(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"td")(1,"div",21)(2,"div",22)(3,"input",23),c.NdJ("ngModelChange",(function(t){const s=c.CHM(e).$implicit,i=c.oxw(2);return c.KtG(i.filters[s.name]=t)})),c.qZA()()()()}if(2&e){const e=t.$implicit,s=c.oxw(2);c.xp6(3),c.Q6J("ngModel",s.filters[e.name])}}function fe(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"tr",19),c.YNc(1,be,4,1,"td",20),c.TgZ(2,"td")(3,"div",10)(4,"button",11),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw();return c.KtG(t.clearFilter())})),c._UZ(5,"system-button-icon",12),c.qZA(),c.TgZ(6,"button",11),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw();return c.KtG(t.toggleFilter())})),c._UZ(7,"system-button-icon",12),c.qZA()()()()}if(2&e){const e=c.oxw();c.xp6(1),c.Q6J("ngForOf",e.getFields()),c.xp6(4),c.Q6J("icon","clear")("size","small"),c.xp6(2),c.Q6J("icon","chevronup")("size","small")}}function _e(e,t){if(1&e&&c._UZ(0,"tr",24),2&e){const e=t.$implicit,s=c.oxw();c.Q6J("entry",e)("fields",s.getFields())}}let Ze=(()=>{class AdministrationConfigurator{constructor(e,t,s){this.metadata=e,this.administrationconfigurator=t,this.language=s,this.componentconfig={},this.displayFilters=!1,this.filters={}}ngOnInit(){this.administrationconfigurator.dictionary=this.componentconfig.dictionary,this.administrationconfigurator.loadEntries(this.componentconfig.fields)}get count(){return this.administrationconfigurator.entries.length}trackByFn(e,t){return t.id}getEntries(){let e=[];for(let t of this.administrationconfigurator.entries){let s=!1;if(this.displayFilters)for(let e in this.filters)!this.administrationconfigurator.isEditMode(t.id)&&this.filters[e]&&t.data[e]&&-1==t.data[e].toUpperCase().indexOf(this.filters[e].toUpperCase())&&(s=!0);s||e.push(t)}return e}getFields(){let e=[];for(let t of this.componentconfig.fields)!0!==t.hidden&&e.push(t);return e}addEntry(){this.administrationconfigurator.addEntry()}sort(e){this.administrationconfigurator.sort(e)}toggleFilter(){this.displayFilters=!this.displayFilters}clearFilter(){this.filters={}}}return AdministrationConfigurator.ɵfac=function(e){return new(e||AdministrationConfigurator)(c.Y36(b.Pu),c.Y36(w),c.Y36(p.d))},AdministrationConfigurator.ɵcmp=c.Xpm({type:AdministrationConfigurator,selectors:[["administration-configurator"]],features:[c._Bn([w])],decls:19,vars:8,consts:[[1,"slds-grid","slds-grid--align-spread","slds-p-around--medium"],[1,"slds-text-heading--medium"],["label","LBL_DICTIONARY_ITEM"],["label","LBL_RECORDS"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_ADD"],[1,"slds-table","slds-table--bordered","slds-table--cell-buffer"],[1,"slds-text-title--caps"],["scope","col",3,"click",4,"ngFor","ngForOf"],["scope","col",2,"width","2rem"],["role","group",1,"slds-button-group","slds-float--right"],[1,"slds-button","slds-button--icon-border",3,"click"],[3,"icon","size"],["class","slds-theme--shade",4,"ngIf"],["style","vertical-align: middle","class","slds-align-top","administration-configurator-item","",3,"entry","fields",4,"ngFor","ngForOf","ngForTrackBy"],["scope","col",3,"click"],[1,"slds-truncate","slds-p-horizontal--small"],[4,"ngIf"],[3,"icon","size",4,"ngIf"],[1,"slds-theme--shade"],[4,"ngFor","ngForOf"],[1,"slds-form-element"],[1,"slds-form-element__control"],["type","text",1,"slds-input",3,"ngModel","ngModelChange"],["administration-configurator-item","",1,"slds-align-top",2,"vertical-align","middle",3,"entry","fields"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0)(1,"h2",1),c._UZ(2,"system-label",2),c._uU(3),c._UZ(4,"system-label",3),c._uU(5,")"),c.qZA(),c.TgZ(6,"button",4),c.NdJ("click",(function(){return t.addEntry()})),c._UZ(7,"system-label",5),c.qZA()(),c.TgZ(8,"table",6)(9,"thead")(10,"tr",7),c.YNc(11,he,4,2,"th",8),c.TgZ(12,"th",9)(13,"div",10)(14,"button",11),c.NdJ("click",(function(){return t.toggleFilter()})),c._UZ(15,"system-button-icon",12),c.qZA()()()(),c.YNc(16,fe,8,5,"tr",13),c.qZA(),c.TgZ(17,"tbody"),c.YNc(18,_e,1,2,"tr",14),c.qZA()()),2&e&&(c.xp6(3),c.AsE(": ",t.componentconfig.dictionary," (",t.count," "),c.xp6(8),c.Q6J("ngForOf",t.getFields()),c.xp6(4),c.Q6J("icon","filterList")("size","small"),c.xp6(1),c.Q6J("ngIf",t.displayFilters),c.xp6(2),c.Q6J("ngForOf",t.getEntries())("ngForTrackBy",t.trackByFn))},dependencies:[i.sg,i.O5,n.Fj,n.JJ,n.On,x.J,T._,M.r,ge],encapsulation:2}),AdministrationConfigurator})();var Ae=s(7579);let ye=(()=>{class AdministrationQuotaManagerField{constructor(e){this.backend=e,this.userid="",this.monthindex=0,this.year=0,this.data=[]}get value(){for(let e of this.data)if(e&&e.assigned_user_id===this.userid&&e.period===""+(this.monthindex+1))return""+Math.round(e.sales_quota);return""}set value(e){let t=0,s=+e;for(let i of this.data)i&&i.assigned_user_id===this.userid&&i.period===""+(this.monthindex+1)&&(s>0?this.data[t].sales_quota=e:delete this.data[t]),t++;s>0?this.backend.postRequest("module/QuotaManager/quota/"+this.userid+"/"+this.year+"/"+(this.monthindex+1)+"/"+e).subscribe((e=>{})):this.backend.deleteRequest("module/QuotaManager/quota/"+this.userid+"/"+this.year+"/"+(this.monthindex+1))}changeValue(e){}}return AdministrationQuotaManagerField.ɵfac=function(e){return new(e||AdministrationQuotaManagerField)(c.Y36(u.y))},AdministrationQuotaManagerField.ɵcmp=c.Xpm({type:AdministrationQuotaManagerField,selectors:[["administration-quotamanager-field"]],inputs:{userid:"userid",monthindex:"monthindex",year:"year",data:"data"},decls:1,vars:1,consts:[[2,"width","80px",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(c.TgZ(0,"input",0),c.NdJ("ngModelChange",(function(e){return t.value=e}))("ngModelChange",(function(e){return t.changeValue(e)})),c.qZA()),2&e&&c.Q6J("ngModel",t.value)},dependencies:[n.Fj,n.JJ,n.On],encapsulation:2}),AdministrationQuotaManagerField})();function ve(e,t){if(1&e&&(c.TgZ(0,"option"),c._uU(1),c.qZA()),2&e){const e=t.$implicit;c.xp6(1),c.Oqu(e)}}function xe(e,t){if(1&e&&(c.TgZ(0,"th",12),c._uU(1),c.qZA()),2&e){const e=t.$implicit;c.xp6(1),c.Oqu(e)}}function Le(e,t){if(1&e&&(c.TgZ(0,"td"),c._UZ(1,"administration-quotamanager-field",15),c.qZA()),2&e){const e=t.index,s=c.oxw().$implicit,i=c.oxw();c.xp6(1),c.Q6J("userid",s.data.id)("data",i.quotas)("monthindex",e)("year",i.year)}}function Te(e,t){if(1&e&&(c.TgZ(0,"tr",11)(1,"td"),c._uU(2),c.qZA(),c.TgZ(3,"td"),c._uU(4),c.qZA(),c.YNc(5,Le,2,4,"td",8),c.qZA()),2&e){const e=t.$implicit,s=c.oxw();c.xp6(2),c.lnq("",e.data.last_name," ",e.data.first_name," (",e.data.user_name,")"),c.xp6(2),c.Oqu(s.yearlyQuotas[e.data.id]),c.xp6(1),c.Q6J("ngForOf",s.monthlyQuotas[e.data.id])}}let Me=(()=>{class AdministrationQuotaManager{constructor(e){this.backend=e,this.users=[],this.monthlyQuotas={},this.quotas=[],this.yearlyQuotas={},this.year=(new Date).getFullYear(),this.monthNamesList=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],this.yearsList=[]}ngOnInit(){this.getYears(),this.getQuotaUsers()}getYears(){let e=(new Date).getFullYear();for(let t=e-2;t<e+7;t++)this.yearsList.push(t)}getQuotaUsers(){this.backend.getRequest("module/QuotaManager/users").subscribe((e=>{for(let t of e)this.users.push({id:t.id,mode:"",data:t});this.getQuotas().subscribe()}))}getQuotas(){let e=new Ae.x;return this.backend.getRequest("module/QuotaManager/quotas/"+this.year).subscribe((t=>{this.quotas=t,this.monthlyQuotas={},this.yearlyQuotas={};for(let e of t){let t=e.assigned_user_id,s=Math.round(e.sales_quota),i=e.period-1;this.monthlyQuotas[t]||(this.monthlyQuotas[t]=new Array(12)),this.monthlyQuotas[t][i]=s,this.yearlyQuotas[t]||(this.yearlyQuotas[t]=0),this.yearlyQuotas[t]+=s}e.next(this.users),e.complete();for(let e of this.users){let t=e.data.id;this.monthlyQuotas[t]||(this.monthlyQuotas[t]=new Array(12)),this.yearlyQuotas[t]||(this.yearlyQuotas[t]=0)}})),e.asObservable()}updateQuota(e,t,s){let i=e.target.value?+e.target.value:0,n=this.monthlyQuotas[t][s];n=n||0,this.yearlyQuotas[t]-=n-i,i>0?(this.monthlyQuotas[t][s]=i,this.backend.postRequest("module/QuotaManager/quota/"+t+"/"+this.year+"/"+(s+1)+"/"+i)):(delete this.monthlyQuotas[t][s],this.backend.deleteRequest("module/QuotaManager/quota/"+t+"/"+this.year+"/"+(s+1)))}}return AdministrationQuotaManager.ɵfac=function(e){return new(e||AdministrationQuotaManager)(c.Y36(u.y))},AdministrationQuotaManager.ɵcmp=c.Xpm({type:AdministrationQuotaManager,selectors:[["administration-quotamanager"]],decls:22,vars:4,consts:[[1,"slds-page-header"],[1,"slds-grid","slds-grid_vertical-align-center","slds-grid--align-spread"],[1,"slds-media"],[1,"slds-media__body"],[1,"slds-page-header__title","slds-truncate","slds-align-middle"],[1,"slds-p-top--small"],["for","year-select"],["id","year-select",3,"ngModel","ngModelChange","change"],[4,"ngFor","ngForOf"],[1,"slds-scrollable--x"],[1,"slds-table","slds-table_bordered","slds-table_cell-buffer"],[1,"slds-text-title_caps"],["scope","col"],["scope","col",4,"ngFor","ngForOf"],["class","slds-text-title_caps",4,"ngFor","ngForOf"],[3,"userid","data","monthindex","year"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),c._uU(5,"Quota Manager"),c.qZA()()(),c.TgZ(6,"div",5)(7,"label",6),c._uU(8,"Year"),c.qZA(),c.TgZ(9,"select",7),c.NdJ("ngModelChange",(function(e){return t.year=e}))("change",(function(){return t.getQuotas()})),c.YNc(10,ve,2,1,"option",8),c.qZA()()()(),c.TgZ(11,"div",9)(12,"table",10)(13,"thead")(14,"tr",11)(15,"th",12),c._uU(16,"Name"),c.qZA(),c.TgZ(17,"th",12),c._uU(18,"Total"),c.qZA(),c.YNc(19,xe,2,1,"th",13),c.qZA()(),c.TgZ(20,"tbody"),c.YNc(21,Te,6,5,"tr",14),c.qZA()()()),2&e&&(c.xp6(9),c.Q6J("ngModel",t.year),c.xp6(1),c.Q6J("ngForOf",t.yearsList),c.xp6(9),c.Q6J("ngForOf",t.monthNamesList),c.xp6(2),c.Q6J("ngForOf",t.users))},dependencies:[i.sg,n.YN,n.Kr,n.EJ,n.JJ,n.On,ye],encapsulation:2}),AdministrationQuotaManager})();var Je=s(4044),qe=s(3278);let Ee=(()=>{class ftsconfiguration{constructor(e,t,s,i,n){this.backend=e,this.metadata=t,this.language=s,this.modal=i,this.toast=n,this.module="",this.module$=new c.vpe,this.moduleFtsFields=[],this.moduleFtsSettings={},this.indexing=!1,this.modules=[],this.analyzers=[],this.backend.getRequest("configuration/elastic/core/modules").subscribe((e=>this.modules=e)),this.backend.getRequest("configuration/elastic/core/analyzers").subscribe((e=>this.analyzers=e.sort(((e,t)=>e.value>t.value?1:-1))))}setModule(e){this.module=e,this.modules.indexOf(e)>=0?(this.getModuleFtsFields(),this.getModuleSettings()):this.module?(this.modules.push(e),this.moduleFtsFields=[],this.moduleFtsSettings=[]):(this.moduleFtsFields=[],this.moduleFtsSettings=[]),this.module$.emit(e)}getModuleFtsFields(){this.moduleFtsFields=[],this.backend.getRequest("configuration/elastic/"+this.module+"/fields").subscribe((e=>{this.moduleFtsFields=e}))}getModuleSettings(){this.moduleFtsSettings=[],this.backend.getRequest("configuration/elastic/"+this.module+"/settings").subscribe((e=>{this.moduleFtsSettings=e}))}getFieldDetails(e){let t={};return this.moduleFtsFields.some((s=>{if(s.id===e)return t=s,!0})),t}deleteModule(e){this.backend.deleteRequest(`configuration/elastic/${this.module}`).subscribe((t=>{this.modules.splice(this.modules.indexOf(e),1),this.module=""}))}save(e=!0){let t=new Ae.x,s={fields:this.moduleFtsFields,settings:this.moduleFtsSettings};return this.backend.postRequest("configuration/elastic/"+this.module,{},s).subscribe((s=>{t.next(s),e&&(s?this.toast.sendToast(this.language.getLabel("LBL_DATA_SAVED"),"success"):this.toast.sendToast(this.language.getLabel("ERR_NETWORK"),"error"))}),(e=>t.error(e))),t}searchPath(e){let t=!1;return this.moduleFtsFields.some((s=>{if(s.path===e)return t=!0,!0})),t}executeAction(e,t){let s="",i="";switch(e){case"bulk":s=`configuration/elastic/${this.module}/index`,i="LBL_INDEX";break;case"init":s="configuration/elastic/core/initialize",i="LBL_INITIALIZE";break;case"reset":s=`configuration/elastic/${this.module}/index/reset`,i="LBL_RESET"}this.modal.openModal("SystemLoadingModal").subscribe((n=>{n.instance.messagelabel=this.language.getLabel("LBL_EXECUTING")+": "+this.language.getLabel(i),"reset"==e?this.save(!1).subscribe((e=>{this.backend.postRequest(s,t).subscribe((e=>{if(e&&e.message&&"string"==typeof e.message&&e.message.length>0){let t=e.type&&e.type.length>0?e.type:this.language.getLabel("LBL_INFORMATION");this.modal.info(e.message,t,e.status)}else"error"!=e.status&&this.toast.sendToast(this.language.getLabel("MSG_SUCCESSFULLY_EXECUTED"),"success");n.instance.self.destroy()}),(e=>n.instance.self.destroy()))}),(e=>n.instance.self.destroy())):this.backend.postRequest(s,t).subscribe((e=>{if(e&&e.message&&"string"==typeof e.message&&e.message.length>0){let t=e.type&&e.type.length>0?e.type:this.language.getLabel("LBL_INFORMATION");this.modal.info(e.message,t,e.status)}else"error"!=e.status&&this.toast.sendToast(this.language.getLabel("MSG_SUCCESSFULLY_EXECUTED"),"success");n.instance.self.destroy()}),(e=>n.instance.self.destroy()))}))}}return ftsconfiguration.ɵfac=function(e){return new(e||ftsconfiguration)(c.LFG(u.y),c.LFG(b.Pu),c.LFG(p.d),c.LFG(Je.o),c.LFG(qe.A))},ftsconfiguration.ɵprov=c.Yz7({token:ftsconfiguration,factory:ftsconfiguration.ɵfac}),ftsconfiguration})();var Ce=s(4270);const Ue=["administration-ftsstatus",""];function Ne(e,t){1&e&&c._UZ(0,"system-utility-icon",30)}function ke(e,t){1&e&&c._UZ(0,"system-utility-icon",31)}function Se(e,t){if(1&e&&(c.TgZ(0,"tr")(1,"td")(2,"div",16),c._uU(3),c.qZA()(),c.TgZ(4,"td")(5,"div",16),c._UZ(6,"system-display-number",18),c._uU(7,"/"),c._UZ(8,"system-display-number",18),c.qZA()(),c.TgZ(9,"td")(10,"div",16),c._uU(11),c.qZA()(),c.TgZ(12,"td")(13,"div",16),c._uU(14),c.qZA()(),c.TgZ(15,"td")(16,"div",16),c._uU(17),c.qZA()(),c.TgZ(18,"td"),c.YNc(19,Ne,1,0,"system-utility-icon",28),c.YNc(20,ke,1,0,"system-utility-icon",29),c.qZA()()),2&e){const e=t.$implicit;c.xp6(3),c.Oqu(e.name),c.xp6(3),c.Q6J("number",e.pdocs),c.xp6(2),c.Q6J("number",e.tdocs),c.xp6(3),c.Oqu(e.stored),c.xp6(3),c.Oqu(e.unindexed),c.xp6(3),c.AsE("",e.psize,"/",e.tsize,""),c.xp6(2),c.Q6J("ngIf",e.blocked),c.xp6(1),c.Q6J("ngIf",!e.blocked)}}function Fe(e,t){if(1&e&&(c.TgZ(0,"div")(1,"table",10)(2,"thead")(3,"tr",11)(4,"th",12),c._UZ(5,"system-label",13),c.qZA(),c.TgZ(6,"th",12),c._UZ(7,"system-label",14),c.qZA()()(),c.TgZ(8,"tbody")(9,"tr")(10,"td"),c._UZ(11,"system-label",15),c.qZA(),c.TgZ(12,"td")(13,"div",16),c._uU(14),c.qZA()()(),c.TgZ(15,"tr")(16,"td"),c._UZ(17,"system-label",17),c.qZA(),c.TgZ(18,"td")(19,"div",16),c._UZ(20,"system-display-number",18),c._uU(21,"/"),c._UZ(22,"system-display-number",18),c.qZA()()(),c.TgZ(23,"tr")(24,"td"),c._UZ(25,"system-label",19),c.qZA(),c.TgZ(26,"td")(27,"div",16),c._uU(28),c.qZA()()()()(),c.TgZ(29,"h2",20),c._uU(30,"Index Details"),c.qZA(),c.TgZ(31,"div",21)(32,"table",22)(33,"thead")(34,"tr",11)(35,"th",12)(36,"div",16),c._UZ(37,"system-label",23),c.qZA()(),c.TgZ(38,"th",12)(39,"div",16),c._UZ(40,"system-label",17),c.qZA()(),c.TgZ(41,"th",12)(42,"div",16),c._UZ(43,"system-label",24),c.qZA()(),c.TgZ(44,"th",12)(45,"div",16),c._UZ(46,"system-label",25),c.qZA()(),c.TgZ(47,"th",12)(48,"div",16),c._UZ(49,"system-label",19),c.qZA()(),c.TgZ(50,"th",12)(51,"div",16),c._UZ(52,"system-label",26),c.qZA()()()(),c.TgZ(53,"tbody"),c.YNc(54,Se,21,9,"tr",27),c.qZA()()()()),2&e){const e=c.oxw();c.xp6(14),c.Oqu(null==e.version||null==e.version.version?null:e.version.version.number),c.xp6(6),c.Q6J("number",e.stats.pdocs),c.xp6(2),c.Q6J("number",e.stats.tdocs),c.xp6(6),c.AsE("",e.stats.psize,"/",e.stats.tsize,""),c.xp6(26),c.Q6J("ngForOf",e.indices)}}let Re=(()=>{class AdministrationFTSStatus{constructor(e,t,s,i,n,l,o,a){this.metadata=e,this.language=t,this.modal=s,this.backend=i,this.helper=n,this.toast=l,this.ftsconfiguration=o,this.injector=a,this.version={},this.stats={docs:0,size:0},this.loading=!1,this.indices=[],this.loadstatus()}loadstatus(){this.loading=!0,this.indices=[],this.backend.getRequest("admin/elastic/status").subscribe((e=>{this.version=e.version,this.stats.tdocs=0,this.stats.pdocs=0,this.stats.tsize=0,this.stats.psize=0,e.stats?._all&&(e.stats._all.total.docs&&e.stats._all.total.docs.count&&(this.stats.tdocs=e.stats._all.total.docs.count,this.stats.pdocs=e.stats._all.primaries.docs.count),e.stats._all.total?.store&&e.stats._all.total.store.size_in_bytes&&(this.stats.tsize=this.helper.humanFileSize(e.stats._all.total.store.size_in_bytes),this.stats.psize=this.helper.humanFileSize(e.stats._all.primaries.store.size_in_bytes)));for(let t in e.stats.indices)this.indices.push({name:t,pdocs:e.stats.indices[t].primaries.docs.count,psize:this.helper.humanFileSize(e.stats.indices[t].primaries.store.size_in_bytes),tdocs:e.stats.indices[t].total.docs.count,tsize:this.helper.humanFileSize(e.stats.indices[t].total.store.size_in_bytes),stored:e.stats.indexed[t].count,unindexed:e.stats.indexed[t].unindexed,blocked:!!(e.settings&&e.settings[t]&&e.settings[t].settings.index.blocks?.read_only_allow_delete)});this.indices.sort(((e,t)=>e.name>t.name?1:-1)),this.loading=!1}),(e=>{this.loading=!1,this.toast.sendToast("Error loading Status","error")}))}unlock(){this.backend.putRequest("admin/elastic/unblock").subscribe((e=>{this.loadstatus()}))}get hasLocks(){return!!this.indices.find((e=>e.blocked))}initialize(){this.modal.confirm("Are you sure you want to initialize your FTS? It recreates new indices, so indexed data will be lost and have to be rebuild!","Initialize").subscribe((e=>{e&&this.ftsconfiguration.executeAction("init")}))}}return AdministrationFTSStatus.ɵfac=function(e){return new(e||AdministrationFTSStatus)(c.Y36(b.Pu),c.Y36(p.d),c.Y36(Je.o),c.Y36(u.y),c.Y36(D._),c.Y36(qe.A),c.Y36(Ee),c.Y36(c.zs3))},AdministrationFTSStatus.ɵcmp=c.Xpm({type:AdministrationFTSStatus,selectors:[["","administration-ftsstatus",""]],features:[c._Bn([Ee])],attrs:Ue,decls:11,vars:4,consts:[[1,"slds-grid","slds-grid_vertical-align-center","slds-grid--align-spread","slds-p-around--small"],[1,"slds-text-heading_medium","slds-col--bump-right"],["label","LBL_FTS_STATUS"],["type","button",1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_INITIALIZE"],[1,"slds-button","slds-button_icon","slds-button_icon-border-filled",3,"disabled","click"],["icon","unlock"],["icon","refresh"],["system-to-bottom-noscroll","",3,"system-overlay-loading-spinner"],[4,"ngIf"],[1,"slds-table","slds-table_bordered","slds-table_cell-buffer","slds-m-bottom--medium"],[1,"slds-text-title_caps"],["scope","col"],["label","LBL_ATTRIBUTE"],["label","LBL_VALUE"],["label","LBL_VERSION"],[1,"slds-truncate"],["label","LBL_DOCS"],["system-display-number-nodigits","",3,"number"],["label","LBL_SIZE"],[1,"slds-p-around--small"],["system-to-bottom","",1,"slds-border--top"],[1,"slds-table","slds-table_bordered","slds-table_cell-buffer","slds-table--header-fixed"],["label","LBL_INDEX"],["label","LBL_STORED"],["label","LBL_UNINDEXED"],["label","LBL_BLOCKED"],[4,"ngFor","ngForOf"],["icon","lock","size","x-small","colorclass","slds-icon-text-error",4,"ngIf"],["icon","unlock","size","x-small","colorclass","slds-icon-text-success",4,"ngIf"],["icon","lock","size","x-small","colorclass","slds-icon-text-error"],["icon","unlock","size","x-small","colorclass","slds-icon-text-success"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0)(1,"h2",1),c._UZ(2,"system-label",2),c.qZA(),c.TgZ(3,"button",3),c.NdJ("click",(function(){return t.initialize()})),c._UZ(4,"system-label",4),c.qZA(),c.TgZ(5,"button",5),c.NdJ("click",(function(){return t.unlock()})),c._UZ(6,"system-button-icon",6),c.qZA(),c.TgZ(7,"button",5),c.NdJ("click",(function(){return t.loadstatus()})),c._UZ(8,"system-button-icon",7),c.qZA()(),c.TgZ(9,"div",8),c.YNc(10,Fe,55,6,"div",9),c.qZA()),2&e&&(c.xp6(5),c.Q6J("disabled",t.loading||!t.hasLocks),c.xp6(2),c.Q6J("disabled",t.loading),c.xp6(2),c.Q6J("system-overlay-loading-spinner",t.loading),c.xp6(1),c.Q6J("ngIf",!t.loading))},dependencies:[i.sg,i.O5,x.J,Ce.G,T._,M.r,A.H,y.t,v._],encapsulation:2}),AdministrationFTSStatus})();var Ie=s(8973),we=s(8594);const De=["dropList"];function Oe(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"tr",11),c.NdJ("click",(function(){const t=c.CHM(e).$implicit,s=c.oxw();return c.KtG(s.handleSelection(t.id))})),c.TgZ(1,"td",12),c._UZ(2,"system-utility-icon",13),c.qZA(),c.TgZ(3,"td")(4,"div",5),c._uU(5),c.qZA()(),c.TgZ(6,"td",14)(7,"div",5),c._uU(8),c.qZA()(),c.TgZ(9,"td",14)(10,"div",5),c._UZ(11,"system-label",15),c.qZA()(),c.TgZ(12,"td",4)(13,"button",16),c.NdJ("click",(function(){const t=c.CHM(e).index,s=c.oxw();return c.KtG(s.deleteField(t))})),c._UZ(14,"system-button-icon",17),c.qZA()()()}if(2&e){const e=t.$implicit,s=c.oxw();c.ekj("slds-theme--shade",s.isSelected(e.id)),c.Q6J("cdkDragData",e),c.xp6(5),c.Oqu(e.path),c.xp6(3),c.Oqu(e.fieldname),c.xp6(3),c.Q6J("label",e.name)}}const Be=function(e){return[e]};let Qe=(()=>{class AdministrationFTSManagerFieldsList{constructor(e,t,s,i,n,l){this.metadata=e,this.language=t,this.ftsconfiguration=s,this.backend=i,this.modal=n,this.modelutilities=l,this.links=[],this.self={},this.fields=[],this.nodePath="",this.selectedField="",this.selectListField=new c.vpe}ngAfterViewInit(){window.setTimeout((()=>this.ftsconfiguration.fieldsDropList=this.dropList),100)}rightDrop(e){if(this.removePlaceHolderElement(e.previousContainer.element.nativeElement),e.previousContainer===e.container)(0,l.bA)(e.container.data,e.previousIndex,e.currentIndex);else{let t=e.item.data,s=this.modelutilities.generateGuid(),i={id:s,fieldid:s,fieldname:t.name,indexfieldname:t.name,name:t.label,path:this.nodePath+"::"+t.id};this.ftsconfiguration.moduleFtsFields.splice(e.currentIndex,0,i)}}removePlaceHolderElement(e){this.dragPlaceHolderNode&&(e.removeChild(this.dragPlaceHolderNode),this.dragPlaceHolderNode=void 0)}trackByFn(e,t){return t.id}deleteField(e){this.modal.confirmDeleteRecord().subscribe((t=>{t&&this.ftsconfiguration.moduleFtsFields.splice(e,1)}))}handleSelection(e){this.selectListField.emit(e)}isSelected(e){return this.selectedField==e}}return AdministrationFTSManagerFieldsList.ɵfac=function(e){return new(e||AdministrationFTSManagerFieldsList)(c.Y36(b.Pu),c.Y36(p.d),c.Y36(Ee),c.Y36(u.y),c.Y36(Je.o),c.Y36(I.A))},AdministrationFTSManagerFieldsList.ɵcmp=c.Xpm({type:AdministrationFTSManagerFieldsList,selectors:[["administration-ftsmanager-fields-list"]],viewQuery:function(e,t){if(1&e&&c.Gf(De,5),2&e){let e;c.iGM(e=c.CRH())&&(t.dropList=e.first)}},inputs:{dragList:"dragList",dragPlaceHolderNode:"dragPlaceHolderNode",nodePath:"nodePath",selectedField:"selectedField"},outputs:{selectListField:"selectListField"},decls:18,vars:6,consts:[["cdkDropList","",1,"slds-size--1-of-1","slds-border--left",2,"height","100%",3,"cdkDropListData","cdkDropListConnectedTo","cdkDropListDropped"],["dropList","cdkDropList"],[1,"slds-table","slds-table--cell-buffer","spice-table_header-fixed","slds-table--fixed-layout"],[1,"slds-text-title--caps","slds-theme--shade"],[1,"slds-cell-shrink"],[1,"slds-truncate"],["label","LBL_PATH"],["scope","col"],["label","LBL_FIELD"],["label","LBL_NAME"],["cdkDrag","","cdkDragBoundary","#administration-fts-manager-field-add-drop-table","class","slds-border--bottom slds-drag--preview",3,"cdkDragData","slds-theme--shade","click",4,"ngFor","ngForOf","ngForTrackBy"],["cdkDrag","","cdkDragBoundary","#administration-fts-manager-field-add-drop-table",1,"slds-border--bottom","slds-drag--preview",3,"cdkDragData","click"],[1,"slds-p-around--none"],["cdkDragHandle","","icon","drag_and_drop","size","x-small",1,"slds-p-horizontal--x-small",2,"cursor","move"],["data-label","Account Name"],[3,"label"],[1,"slds-button","slds-button--icon",3,"click"],["icon","close"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0,1),c.NdJ("cdkDropListDropped",(function(e){return t.rightDrop(e)})),c.TgZ(2,"table",2)(3,"thead")(4,"tr",3),c._UZ(5,"th",4),c.TgZ(6,"th")(7,"div",5),c._UZ(8,"system-label",6),c.qZA()(),c.TgZ(9,"th",7)(10,"div",5),c._UZ(11,"system-label",8),c.qZA()(),c.TgZ(12,"th",7)(13,"div",5),c._UZ(14,"system-label",9),c.qZA()(),c._UZ(15,"th",4),c.qZA()(),c.TgZ(16,"tbody"),c.YNc(17,Oe,15,6,"tr",10),c.qZA()()()),2&e&&(c.Q6J("cdkDropListData",t.ftsconfiguration.moduleFtsFields)("cdkDropListConnectedTo",c.VKq(4,Be,t.dragList)),c.xp6(17),c.Q6J("ngForOf",t.ftsconfiguration.moduleFtsFields)("ngForTrackBy",t.trackByFn))},dependencies:[i.sg,x.J,T._,M.r,l.Wj,l.Zt,l.Bh],encapsulation:2}),AdministrationFTSManagerFieldsList})();function Ye(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",16)(1,"label",17),c._UZ(2,"system-label",84),c.qZA(),c._UZ(3,"system-icon-help-text",23),c.TgZ(4,"div",15)(5,"textarea",85),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw(2);return c.KtG(s.aggregateaddparams=t)})),c.qZA()()()}if(2&e){const e=c.oxw(2);c.xp6(3),c.Q6J("helpText",e.language.getLabel("HLP_FTS_AGGREGATE_PARAMS")),c.xp6(2),c.Q6J("ngModel",e.aggregateaddparams)}}function ze(e,t){if(1&e&&(c.TgZ(0,"option",86),c._uU(1),c.qZA()),2&e){const e=t.$implicit;c.Q6J("value",e.value),c.xp6(1),c.Oqu(e.text)}}function Pe(e,t){if(1&e&&(c.TgZ(0,"option",86),c._uU(1),c.qZA()),2&e){const e=t.$implicit;c.Q6J("value",e.value),c.xp6(1),c.Oqu(e.text)}}function Ge(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div")(1,"h2",10),c._UZ(2,"system-label",11),c._uU(3),c.qZA(),c.TgZ(4,"fieldset",12)(5,"legend",13),c._UZ(6,"system-label",14),c.qZA(),c.TgZ(7,"div",15)(8,"div",16)(9,"label",17),c._UZ(10,"system-label",18),c.qZA(),c.TgZ(11,"div",15)(12,"input",19),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.fieldDetails.indexfieldname=t)})),c.qZA()()(),c.TgZ(13,"div",16)(14,"label",17),c._UZ(15,"system-label",20),c.qZA(),c.TgZ(16,"system-input-label",21),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.fieldDetails.name=t)})),c.qZA()(),c.TgZ(17,"div",16)(18,"label",17),c._UZ(19,"system-label",22),c.qZA(),c._UZ(20,"system-icon-help-text",23),c.TgZ(21,"div",15)(22,"div",24)(23,"select",25),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.fieldDetails.indextype=t)})),c._UZ(24,"option",26),c.TgZ(25,"option",27),c._uU(26,"text"),c.qZA(),c.TgZ(27,"option",28),c._uU(28,"keyword"),c.qZA(),c.TgZ(29,"option",29),c._uU(30,"date"),c.qZA(),c.TgZ(31,"option",30),c._uU(32,"double"),c.qZA()()()()()(),c.TgZ(33,"div",31)(34,"div",32)(35,"label",17),c._UZ(36,"system-label",33),c.qZA(),c._UZ(37,"system-icon-help-text",23),c.TgZ(38,"div",15)(39,"input",19),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.fieldDetails.boost=t)})),c.qZA()()(),c.TgZ(40,"div",16)(41,"div",15)(42,"system-checkbox",21),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.fieldDetails.enablesort=t)})),c._UZ(43,"system-label",34)(44,"system-icon-help-text",23),c.qZA()()(),c.TgZ(45,"div",16)(46,"div",15)(47,"system-checkbox",21),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.fieldDetails.search=t)})),c._UZ(48,"system-label",35)(49,"system-icon-help-text",23),c.qZA()()()(),c.TgZ(50,"div",31)(51,"div",36)(52,"label",17),c._UZ(53,"system-label",37),c.qZA(),c._UZ(54,"system-icon-help-text",23),c.TgZ(55,"div",15)(56,"system-input-backend-method",21),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.fieldDetails.function=t)})),c.qZA()()()()(),c.TgZ(57,"fieldset",38)(58,"legend",13),c._UZ(59,"system-label",39),c.qZA(),c.TgZ(60,"div",15)(61,"div",16)(62,"label",17),c._UZ(63,"system-label",39),c.qZA(),c._UZ(64,"system-icon-help-text",23),c.TgZ(65,"div",15)(66,"div",24)(67,"select",25),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.fieldDetails.aggregate=t)})),c._UZ(68,"option",26),c.TgZ(69,"option",40),c._uU(70,"Term"),c.qZA(),c.TgZ(71,"option",41),c._uU(72,"Range"),c.qZA(),c.TgZ(73,"option",42),c._uU(74,"Date Week"),c.qZA(),c.TgZ(75,"option",43),c._uU(76,"Date Month"),c.qZA(),c.TgZ(77,"option",44),c._uU(78,"Date Quarter"),c.qZA(),c.TgZ(79,"option",45),c._uU(80,"Date Year"),c.qZA()()()()(),c.TgZ(81,"div",46)(82,"div",47)(83,"system-checkbox",48),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.fieldDetails.aggregatecollapsed=t)})),c._UZ(84,"system-label",49),c.qZA()(),c.TgZ(85,"div",47)(86,"system-checkbox",48),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.fieldDetails.aggregateempty=t)})),c._UZ(87,"system-label",50),c.qZA()(),c.TgZ(88,"div",47)(89,"system-checkbox",48),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.fieldDetails.aggregatesystem=t)})),c._UZ(90,"system-label",51),c.qZA()()(),c.YNc(91,Ye,6,2,"div",52),c.TgZ(92,"div",0)(93,"div",32)(94,"label",17),c._UZ(95,"system-label",53),c.qZA(),c._UZ(96,"system-icon-help-text",23),c.TgZ(97,"div",15)(98,"input",19),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.fieldDetails.aggregatesize=t)})),c.qZA()()(),c.TgZ(99,"div",32)(100,"label",17),c._UZ(101,"system-label",54),c.qZA(),c.TgZ(102,"div",15)(103,"input",19),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.fieldDetails.aggregatepriority=t)})),c.qZA()()()(),c.TgZ(104,"div",0)(105,"div",32)(106,"label",17),c._UZ(107,"system-label",55),c.qZA(),c._UZ(108,"system-icon-help-text",23),c.TgZ(109,"div",15)(110,"div",24)(111,"select",25),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.fieldDetails.aggregatesortby=t)})),c._UZ(112,"option",26),c.TgZ(113,"option",56),c._uU(114,"Count (default)"),c.qZA(),c.TgZ(115,"option",57),c._uU(116,"Key"),c.qZA()()()()(),c.TgZ(117,"div",32)(118,"label",17),c._UZ(119,"system-label",58),c.qZA(),c._UZ(120,"system-icon-help-text",23),c.TgZ(121,"div",15)(122,"select",25),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.fieldDetails.aggregatesort=t)})),c._UZ(123,"option",26),c.TgZ(124,"option",59),c._uU(125,"asc"),c.qZA(),c.TgZ(126,"option",60),c._uU(127,"desc (default)"),c.qZA()()()()()()(),c.TgZ(128,"fieldset",12)(129,"legend",13),c._UZ(130,"system-label",61),c.qZA(),c.TgZ(131,"div",15)(132,"div",0)(133,"div",32)(134,"label",17),c._UZ(135,"system-label",61),c.qZA(),c._UZ(136,"system-icon-help-text",23),c.TgZ(137,"div",15)(138,"div",24)(139,"select",25),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.fieldDetails.analyzer=t)})),c.TgZ(140,"option",62),c._uU(141,"standard"),c.qZA(),c.YNc(142,ze,2,2,"option",63),c.qZA()()()(),c.TgZ(143,"div",32)(144,"label",17),c._UZ(145,"system-label",64),c.qZA(),c._UZ(146,"system-icon-help-text",23),c.TgZ(147,"div",15)(148,"div",24)(149,"select",25),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.fieldDetails.search_analyzer=t)})),c.TgZ(150,"option",62),c._uU(151,"standard"),c.qZA(),c.YNc(152,Pe,2,2,"option",63),c.qZA()()()()()()(),c.TgZ(153,"fieldset",12)(154,"legend",13),c._UZ(155,"system-label",65),c.qZA(),c.TgZ(156,"div",15)(157,"div",16)(158,"div",15)(159,"system-checkbox",21),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.fieldDetails.duplicatecheck=t)})),c._UZ(160,"system-label",66)(161,"system-icon-help-text",23),c.qZA()()(),c.TgZ(162,"div",67)(163,"div",68)(164,"label",17),c._UZ(165,"system-label",69),c.qZA(),c._UZ(166,"system-icon-help-text",23),c.TgZ(167,"div",15)(168,"div",24)(169,"select",70),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.fieldDetails.duplicatequery=t)})),c.TgZ(170,"option",62),c._uU(171,"match (or)"),c.qZA(),c.TgZ(172,"option",71),c._uU(173,"match (and)"),c.qZA(),c.TgZ(174,"option",40),c._uU(175,"term"),c.qZA()()()()(),c.TgZ(176,"div",68)(177,"label",17),c._UZ(178,"system-label",72),c.qZA(),c._UZ(179,"system-icon-help-text",23),c.TgZ(180,"div",15)(181,"input",73),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.fieldDetails.duplicatefuzz=t)})),c.qZA()()()()()(),c.TgZ(182,"fieldset",12)(183,"legend",13),c._UZ(184,"system-label",74),c.qZA(),c.TgZ(185,"div",75)(186,"system-checkbox",21),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.fieldDetails.email=t)})),c._UZ(187,"system-label",76)(188,"system-icon-help-text",23),c.qZA()(),c.TgZ(189,"div",75)(190,"system-checkbox",21),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.fieldDetails.phonesearch=t)})),c._UZ(191,"system-label",77)(192,"system-icon-help-text",23),c.qZA()()(),c.TgZ(193,"fieldset",12)(194,"legend",13),c._UZ(195,"system-label",78),c.qZA(),c.TgZ(196,"div",15)(197,"div",16)(198,"label",17),c._UZ(199,"system-label",22),c.qZA(),c.TgZ(200,"div",15)(201,"div",24)(202,"select",25),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.fieldDetails.activitytype=t)})),c.TgZ(203,"option",62),c._uU(204,"---"),c.qZA(),c.TgZ(205,"option",79),c._uU(206,"activityparentid"),c.qZA(),c.TgZ(207,"option",80),c._uU(208,"activitydate"),c.qZA(),c.TgZ(209,"option",81),c._uU(210,"activityenddate"),c.qZA(),c.TgZ(211,"option",82),c._uU(212,"activityparticipant"),c.qZA(),c.TgZ(213,"option",83),c._uU(214,"activitystatus"),c.qZA()()()()()()()()}if(2&e){const e=c.oxw();c.xp6(3),c.AsE(": ",e.fieldDetails.displaypath,"->",e.fieldDetails.fieldname,""),c.xp6(9),c.Q6J("ngModel",e.fieldDetails.indexfieldname),c.xp6(4),c.Q6J("ngModel",e.fieldDetails.name),c.xp6(4),c.Q6J("helpText",e.language.getLabel("HLP_FTS_DATATYPE")),c.xp6(3),c.Q6J("ngModel",e.fieldDetails.indextype),c.xp6(1),c.Q6J("ngValue",null),c.xp6(13),c.Q6J("helpText",e.language.getLabel("HLP_FTS_BOOST")),c.xp6(2),c.Q6J("ngModel",e.fieldDetails.boost),c.xp6(3),c.Q6J("ngModel",e.fieldDetails.enablesort),c.xp6(2),c.Q6J("helpText",e.language.getLabel("HLP_FTS_ENABLE_SORT")),c.xp6(3),c.Q6J("ngModel",e.fieldDetails.search),c.xp6(2),c.Q6J("helpText",e.language.getLabel("HLP_FTS_ENABLE_SEARCH")),c.xp6(5),c.Q6J("helpText",e.language.getLabel("HLP_FTS_FIELD_FUNCTION")),c.xp6(2),c.Q6J("ngModel",e.fieldDetails.function),c.xp6(8),c.Q6J("helpText",e.language.getLabel("HLP_FTS_AGGREGATE")),c.xp6(3),c.Q6J("ngModel",e.fieldDetails.aggregate),c.xp6(1),c.Q6J("ngValue",null),c.xp6(15),c.Q6J("disabled",!e.fieldDetails.aggregate)("ngModel",e.fieldDetails.aggregatecollapsed),c.xp6(3),c.Q6J("disabled","term"!=e.fieldDetails.aggregate)("ngModel",e.fieldDetails.aggregateempty),c.xp6(3),c.Q6J("disabled","term"!=e.fieldDetails.aggregate)("ngModel",e.fieldDetails.aggregatesystem),c.xp6(2),c.Q6J("ngIf",e.fieldDetails.aggregate),c.xp6(5),c.Q6J("helpText",e.language.getLabel("HLP_FTS_AGGREGATE_SIZE")),c.xp6(2),c.Q6J("ngModel",e.fieldDetails.aggregatesize),c.xp6(5),c.Q6J("ngModel",e.fieldDetails.aggregatepriority),c.xp6(5),c.Q6J("helpText",e.language.getLabel("HLP_FTS_AGGREGATE_SORTBY")),c.xp6(3),c.Q6J("ngModel",e.fieldDetails.aggregatesortby),c.xp6(1),c.Q6J("ngValue",null),c.xp6(8),c.Q6J("helpText",e.language.getLabel("HLP_FTS_AGGREGATE_SORT")),c.xp6(2),c.Q6J("ngModel",e.fieldDetails.aggregatesort),c.xp6(1),c.Q6J("ngValue",null),c.xp6(13),c.Q6J("helpText",e.language.getLabel("HLP_FTS_ANALYZER")+"\n"+e.language.getLabel("HLP_FTS_ANALYZER_STANDARD")+"\n"+e.language.getLabel("HLP_FTS_ANALYZER_NGRAM")+"\n"+e.language.getLabel("HLP_FTS_ANALYZER_HTML")+"\n"+e.language.getLabel("HLP_FTS_ANALYZER_EDGENGRAM")+"\n"+e.language.getLabel("HLP_FTS_ANALYZER_EMAIL")),c.xp6(3),c.Q6J("ngModel",e.fieldDetails.analyzer),c.xp6(3),c.Q6J("ngForOf",e.ftsconfiguration.analyzers),c.xp6(4),c.Q6J("helpText",e.language.getLabel("HLP_FTS_SEARCHANALYZER")+"\n"+e.language.getLabel("HLP_FTS_ANALYZER_STANDARD")+"\n"+e.language.getLabel("HLP_FTS_ANALYZER_NGRAM")+"\n"+e.language.getLabel("HLP_FTS_ANALYZER_HTML")+"\n"+e.language.getLabel("HLP_FTS_ANALYZER_EDGENGRAM")+"\n"+e.language.getLabel("HLP_FTS_ANALYZER_EMAIL")),c.xp6(3),c.Q6J("ngModel",e.fieldDetails.search_analyzer),c.xp6(3),c.Q6J("ngForOf",e.ftsconfiguration.analyzers),c.xp6(7),c.Q6J("ngModel",e.fieldDetails.duplicatecheck),c.xp6(2),c.Q6J("helpText",e.language.getLabel("HLP_FTS_DUPLICATE_CHECK")),c.xp6(5),c.Q6J("helpText",e.language.getLabel("HLP_FTS_DUPLICATE_QUERY")),c.xp6(3),c.Q6J("disabled",!e.fieldDetails.duplicatecheck)("ngModel",e.fieldDetails.duplicatequery),c.xp6(10),c.Q6J("helpText",e.language.getLabel("HLP_FTS_DUPLICATE_FUZZINESS")),c.xp6(2),c.Q6J("disabled",!e.fieldDetails.duplicatecheck)("ngModel",e.fieldDetails.duplicatefuzz),c.xp6(5),c.Q6J("ngModel",e.fieldDetails.email),c.xp6(2),c.Q6J("helpText",e.language.getLabel("HLP_FTS_ENABLE_EMAIL")),c.xp6(2),c.Q6J("ngModel",e.fieldDetails.phonesearch),c.xp6(2),c.Q6J("helpText",e.language.getLabel("HLP_FTS_ENABLE_PHONE")),c.xp6(10),c.Q6J("ngModel",e.fieldDetails.activitytype)}}function He(e,t){1&e&&(c.TgZ(0,"div",87),c._uU(1,"select a field"),c.qZA())}let Ke=(()=>{class AdministrationFTSManagerFields{constructor(e,t,s,i,n){this.metadata=e,this.language=t,this.modal=s,this.injector=i,this.ftsconfiguration=n,this.currentfield="",this.fieldDetails={},this.displayAddFieldModal=!1,this.ftsconfiguration.module$.subscribe((e=>{this.currentfield=""}))}get moduleFtsFields(){return this.ftsconfiguration.moduleFtsFields}get aggregateaddparams(){return this.fieldDetails.aggregateaddparams?atob(this.fieldDetails.aggregateaddparams):""}set aggregateaddparams(e){this.fieldDetails.aggregateaddparams=e?btoa(e):""}selectField(e){this.currentfield=e,this.fieldDetails=this.ftsconfiguration.getFieldDetails(e)}showAddFields(){this.modal.openModal("AdministrationFTSManagerFieldsAdd",!0,this.injector)}closeAddFields(e){this.displayAddFieldModal=!1}}return AdministrationFTSManagerFields.ɵfac=function(e){return new(e||AdministrationFTSManagerFields)(c.Y36(b.Pu),c.Y36(p.d),c.Y36(Je.o),c.Y36(c.zs3),c.Y36(Ee))},AdministrationFTSManagerFields.ɵcmp=c.Xpm({type:AdministrationFTSManagerFields,selectors:[["administration-ftsmanager-fields"]],decls:11,vars:3,consts:[[1,"slds-grid"],["system-to-bottom","",1,"slds-size--1-of-2","slds-grid","slds-grid--vertical"],[1,"slds-grow","slds-scrollable--y",2,"height","100%"],[2,"display","block","height","100%",3,"selectedField","selectListField"],[1,"slds-p-around--small","slds-text-align--center"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_ADD_FIELD"],["system-to-bottom","",1,"slds-size--1-of-2","slds-border--left","slds-p-left--x-small"],[4,"ngIf","ngIfElse"],["selectfield",""],[1,"slds-text-heading--small","slds-p-vertical--x-small"],["label","LBL_FIELD_DETAILS"],[1,"slds-form-element","slds-form-element_compound","slds-p-vertical--x-small"],[1,"slds-form-element__legend","slds-form-element__label"],["label","LBL_INDEX_PARAMETERS"],[1,"slds-form-element__control"],[1,"slds-form-element"],[1,"slds-form-element__label"],["label","LBL_INDEX_FIELD_NAME"],["type","text",1,"slds-input",3,"ngModel","ngModelChange"],["label","LBL_NAME"],[3,"ngModel","ngModelChange"],["label","LBL_TYPE"],[3,"helpText"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],[3,"ngValue"],["value","text"],["value","keyword"],["value","date"],["value","double"],[1,"slds-grid","slds-grid_vertical-align-center","slds-m-top--x-small"],[1,"slds-form-element","slds-size--1-of-2"],["label","LBL_BOOST"],["label","LBL_SORTABLE"],["label","LBL_SEARCH"],[1,"slds-form-element","slds-size--1-of-1"],["label","LBL_FUNCTION"],[1,"slds-form-element","slds-form-element_compound","slds-p-vertical--x-small","slds-p-right--x-small"],["label","LBL_AGGREGATE"],["value","term"],["value","range"],["value","datew"],["value","datem"],["value","dateq"],["value","datey"],[1,"slds-form-element","slds-p-vertical--x-small","slds-grid"],[1,"slds-form-element__control","slds-size--1-of-3"],[3,"disabled","ngModel","ngModelChange"],["label","LBL_COLLAPSED"],["label","LBL_AGGREGATEEMPTYVALUES"],["label","LBL_SYSTEMAGGREGATE"],["class","slds-form-element",4,"ngIf"],["label","LBL_AGGREGATE_SIZE"],["label","LBL_AGGREGATE_PRIORITY"],["label","LBL_AGGREGATE_SORTBY"],["value","_count"],["value","_key"],["label","LBL_AGGREGATE_SORT"],["value","asc"],["value","desc"],["label","LBL_ANALYZER"],["value",""],[3,"value",4,"ngFor","ngForOf"],["label","LBL_SEARCH_ANALYZER"],["label","LBL_DUPLICATECHECK_SETTINGS"],["label","LBL_DUPLICATE_CHECK"],[1,"slds-grid","slds-grid_vertical-align-center"],[1,"slds-col","slds-size--1-of-2","slds-form-element"],["label","LBL_QUERY"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],["value","match_and"],["label","LBL_FUZZINESS"],["type","text",1,"slds-input",3,"disabled","ngModel","ngModelChange"],["label","LBL_EMAIL_PHONE_SETTINGS"],[1,"slds-form-element__control","slds-size--1-of-2"],["label","LBL_EMAIL_SEARCH"],["label","LBL_PHONE_SEARCH"],["label","LBL_FTS_ACTIVITY_PARAMS"],["value","activityparentid"],["value","activitydate"],["value","activityenddate"],["value","activityparticipant"],["value","activitystatus"],["label","LBL_PARAMETERS"],[1,"slds-textarea",3,"ngModel","ngModelChange"],[3,"value"],[1,"slds-p-around--small","slds-align--absolute-center","slds-height_full"]],template:function(e,t){if(1&e&&(c.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"administration-ftsmanager-fields-list",3),c.NdJ("selectListField",(function(e){return t.selectField(e)})),c.qZA()(),c.TgZ(4,"div",4)(5,"button",5),c.NdJ("click",(function(){return t.showAddFields()})),c._UZ(6,"system-label",6),c.qZA()()(),c.TgZ(7,"div",7),c.YNc(8,Ge,215,53,"div",8),c.YNc(9,He,2,0,"ng-template",null,9,c.W1O),c.qZA()()),2&e){const e=c.MAs(10);c.xp6(3),c.Q6J("selectedField",t.currentfield),c.xp6(5),c.Q6J("ngIf",t.currentfield)("ngIfElse",e)}},dependencies:[i.sg,i.O5,n.YN,n.Kr,n.Fj,n.EJ,n.JJ,n.On,O.U,B.$,Ie.N,T._,we.h,A.H,Qe],encapsulation:2}),AdministrationFTSManagerFields})();var je=s(3673),$e=s(4375);function Xe(e,t){if(1&e&&(c.TgZ(0,"option",55),c._uU(1),c.qZA()),2&e){const e=t.$implicit;c.Q6J("value",e.value),c.xp6(1),c.Oqu(e.text)}}let Ve=(()=>{class AdministrationFTSManagerDetails{constructor(e,t,s){this.metadata=e,this.language=t,this.ftsconfiguration=s}}return AdministrationFTSManagerDetails.ɵfac=function(e){return new(e||AdministrationFTSManagerDetails)(c.Y36(b.Pu),c.Y36(p.d),c.Y36(Ee))},AdministrationFTSManagerDetails.ɵcmp=c.Xpm({type:AdministrationFTSManagerDetails,selectors:[["administration-ftsmanager-details"]],decls:127,vars:27,consts:[["system-to-bottom","",1,"slds-p-top--x-small","slds-p-horizontal--x-small"],[1,"slds-form-element","slds-form-element_compound","slds-p-vertical--x-small"],[1,"slds-form-element__legend","slds-form-element__label"],["label","LBL_INDEX_PARAMETERS"],[1,"slds-form-element__control"],[1,"slds-form-element"],[1,"slds-form-element__label"],["label","LBL_INDEX_PRIORITY"],["type","text",1,"slds-input",3,"ngModel","ngModelChange"],["label","LBL_FTS_MULTIMATCH_TYPE"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],["value",""],["value","best_fields"],["value","most_fields"],["value","phrase"],["value","phrase_prefix"],["value","cross_fields"],[1,"slds-form-element","slds-p-vertical--x-small"],[3,"ngModel","ngModelChange"],["label","LBL_SYNCRONOUS"],["label","LBL_SEARCH_PARAMETERS"],[1,"slds-grid"],[1,"slds-form-element","slds-size--1-of-2"],["label","LBL_OPERATOR"],["value","and"],["label","LBL_AND"],["value","or"],["label","LBL_OR"],["label","LBL_SEARCH_ANALYZER"],[3,"helpText"],[3,"value",4,"ngFor","ngForOf"],[1,"slds-grid","slds-p-vertical--x-small"],["label","LBL_GLOBAL_SEARCH"],["label","LBL_EMAIL_SEARCH"],["label","LBL_PHONE_SEARCH"],["label","LBL_FTS_DUPLICATE_PARAMS"],[1,"slds-form-element","slds-grid","slds-grid--vertical-align-center","slds-gutters_direct-small"],[1,"slds-col","slds-size--1-of-1","slds-grid","slds-grid--vertical-align-center"],["label","LBL_FILTER"],[1,"slds-grow",3,"ngModel","ngModelChange"],["label","LBL_GEO_SEARCH_PARAMETERS"],["label","LBL_GEO_SEARCH"],[1,"slds-form-element__control","slds-grid"],["label","LBL_LATITUDE"],[3,"disabled","ngModel","module","ngModelChange"],["label","LBL_LONGITUDE"],["label","LBL_FTS_ACTIVITY_PARAMS"],[1,"slds-form-element__control","slds-col","slds-size--1-of-3"],["label","LBL_FTS_IN_ACTIVITIES"],[1,"slds-col","slds-size--2-of-3","slds-grid","slds-grid--vertical-align-center"],["label","LBL_FTS_IN_HISTORY"],["label","LBL_FTS_IN_ASSISTANT"],["label","LBL_FTS_IN_CALENDAR"],["label","LBL_FTS_IN_TIMELINE"],[3,"value"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0)(1,"fieldset",1)(2,"legend",2),c._UZ(3,"system-label",3),c.qZA(),c.TgZ(4,"div",4)(5,"div",5)(6,"label",6),c._UZ(7,"system-label",7),c.qZA(),c.TgZ(8,"div",4)(9,"input",8),c.NdJ("ngModelChange",(function(e){return t.ftsconfiguration.moduleFtsSettings.index_priority=e})),c.qZA()()(),c.TgZ(10,"div",5)(11,"label",6),c._UZ(12,"system-label",9),c.qZA(),c.TgZ(13,"div",4)(14,"div",10)(15,"select",11),c.NdJ("ngModelChange",(function(e){return t.ftsconfiguration.moduleFtsSettings.multimatch_type=e})),c.TgZ(16,"option",12),c._uU(17,"default"),c.qZA(),c.TgZ(18,"option",13),c._uU(19,"Best Fields"),c.qZA(),c.TgZ(20,"option",14),c._uU(21,"Most Fields"),c.qZA(),c.TgZ(22,"option",15),c._uU(23,"Phrase"),c.qZA(),c.TgZ(24,"option",16),c._uU(25,"Phrase Prefix"),c.qZA(),c.TgZ(26,"option",17),c._uU(27,"Cross Fields"),c.qZA()()()()(),c.TgZ(28,"div",18)(29,"system-checkbox",19),c.NdJ("ngModelChange",(function(e){return t.ftsconfiguration.moduleFtsSettings.waitfor=e})),c._UZ(30,"system-label",20),c.qZA()()()(),c.TgZ(31,"fieldset",1)(32,"legend",2),c._UZ(33,"system-label",21),c.qZA(),c.TgZ(34,"div",4)(35,"div",22)(36,"div",23)(37,"label",6),c._UZ(38,"system-label",24),c.qZA(),c.TgZ(39,"div",4)(40,"div",10)(41,"select",11),c.NdJ("ngModelChange",(function(e){return t.ftsconfiguration.moduleFtsSettings.operator=e})),c.TgZ(42,"option",25),c._UZ(43,"system-label",26),c.qZA(),c.TgZ(44,"option",27),c._UZ(45,"system-label",28),c.qZA()()()()(),c.TgZ(46,"div",23)(47,"label",6),c._UZ(48,"system-label",29),c.qZA(),c._UZ(49,"system-icon-help-text",30),c.TgZ(50,"div",4)(51,"div",10)(52,"select",11),c.NdJ("ngModelChange",(function(e){return t.ftsconfiguration.moduleFtsSettings.search_analyzer=e})),c.TgZ(53,"option",12),c._uU(54,"standard"),c.qZA(),c.YNc(55,Xe,2,2,"option",31),c.qZA()()()()(),c.TgZ(56,"div",32)(57,"system-checkbox",19),c.NdJ("ngModelChange",(function(e){return t.ftsconfiguration.moduleFtsSettings.globalsearch=e})),c._UZ(58,"system-label",33),c.qZA(),c.TgZ(59,"system-checkbox",19),c.NdJ("ngModelChange",(function(e){return t.ftsconfiguration.moduleFtsSettings.emailsearch=e})),c._UZ(60,"system-label",34),c.qZA(),c.TgZ(61,"system-checkbox",19),c.NdJ("ngModelChange",(function(e){return t.ftsconfiguration.moduleFtsSettings.phonesearch=e})),c._UZ(62,"system-label",35),c.qZA()()()(),c.TgZ(63,"fieldset",1)(64,"legend",2),c._UZ(65,"system-label",36),c.qZA(),c.TgZ(66,"div",4)(67,"div",37)(68,"div",38)(69,"label",6),c._UZ(70,"system-label",39),c.qZA(),c.TgZ(71,"system-input-module-filter",40),c.NdJ("ngModelChange",(function(e){return t.ftsconfiguration.moduleFtsSettings.duplicatefilter=e})),c.qZA()()()()(),c.TgZ(72,"fieldset",1)(73,"legend",2),c._UZ(74,"system-label",41),c.qZA(),c.TgZ(75,"div",4)(76,"system-checkbox",19),c.NdJ("ngModelChange",(function(e){return t.ftsconfiguration.moduleFtsSettings.geosearch=e})),c._UZ(77,"system-label",42),c.qZA()(),c.TgZ(78,"div",43)(79,"div",23)(80,"label",6),c._UZ(81,"system-label",44),c.qZA(),c.TgZ(82,"system-input-module-field",45),c.NdJ("ngModelChange",(function(e){return t.ftsconfiguration.moduleFtsSettings.geolat=e})),c.qZA()(),c.TgZ(83,"div",23)(84,"label",6),c._UZ(85,"system-label",46),c.qZA(),c.TgZ(86,"system-input-module-field",45),c.NdJ("ngModelChange",(function(e){return t.ftsconfiguration.moduleFtsSettings.geolng=e})),c.qZA()()()(),c.TgZ(87,"fieldset",1)(88,"legend",2),c._UZ(89,"system-label",47),c.qZA(),c.TgZ(90,"div",4)(91,"div",37)(92,"div",48)(93,"system-checkbox",19),c.NdJ("ngModelChange",(function(e){return t.ftsconfiguration.moduleFtsSettings.activitiessearch=e})),c._UZ(94,"system-label",49),c.qZA()(),c.TgZ(95,"div",50)(96,"label",6),c._UZ(97,"system-label",39),c.qZA(),c.TgZ(98,"system-input-module-filter",40),c.NdJ("ngModelChange",(function(e){return t.ftsconfiguration.moduleFtsSettings.activitiesfilter=e})),c.qZA()()(),c.TgZ(99,"div",37)(100,"div",48)(101,"system-checkbox",19),c.NdJ("ngModelChange",(function(e){return t.ftsconfiguration.moduleFtsSettings.historysearch=e})),c._UZ(102,"system-label",51),c.qZA()(),c.TgZ(103,"div",50)(104,"label",6),c._UZ(105,"system-label",39),c.qZA(),c.TgZ(106,"system-input-module-filter",40),c.NdJ("ngModelChange",(function(e){return t.ftsconfiguration.moduleFtsSettings.historyfilter=e})),c.qZA()()(),c.TgZ(107,"div",37)(108,"div",48)(109,"system-checkbox",19),c.NdJ("ngModelChange",(function(e){return t.ftsconfiguration.moduleFtsSettings.assistantsearch=e})),c._UZ(110,"system-label",52),c.qZA()(),c.TgZ(111,"div",50)(112,"label",6),c._UZ(113,"system-label",39),c.qZA(),c.TgZ(114,"system-input-module-filter",40),c.NdJ("ngModelChange",(function(e){return t.ftsconfiguration.moduleFtsSettings.assistantfilter=e})),c.qZA()()(),c.TgZ(115,"div",37)(116,"div",48)(117,"system-checkbox",19),c.NdJ("ngModelChange",(function(e){return t.ftsconfiguration.moduleFtsSettings.calendarsearch=e})),c._UZ(118,"system-label",53),c.qZA()(),c.TgZ(119,"div",50)(120,"label",6),c._UZ(121,"system-label",39),c.qZA(),c.TgZ(122,"system-input-module-filter",40),c.NdJ("ngModelChange",(function(e){return t.ftsconfiguration.moduleFtsSettings.calendarfilter=e})),c.qZA()()(),c.TgZ(123,"div",37)(124,"div",48)(125,"system-checkbox",19),c.NdJ("ngModelChange",(function(e){return t.ftsconfiguration.moduleFtsSettings.timelinesearch=e})),c._UZ(126,"system-label",54),c.qZA()()()()()()),2&e&&(c.xp6(9),c.Q6J("ngModel",t.ftsconfiguration.moduleFtsSettings.index_priority),c.xp6(6),c.Q6J("ngModel",t.ftsconfiguration.moduleFtsSettings.multimatch_type),c.xp6(14),c.Q6J("ngModel",t.ftsconfiguration.moduleFtsSettings.waitfor),c.xp6(12),c.Q6J("ngModel",t.ftsconfiguration.moduleFtsSettings.operator),c.xp6(8),c.Q6J("helpText",t.language.getLabel("HLP_FTS_SEARCHANALYZER")+"\n"+t.language.getLabel("HLP_FTS_ANALYZER_STANDARD")+"\n"+t.language.getLabel("HLP_FTS_ANALYZER_NGRAM")+"\n"+t.language.getLabel("HLP_FTS_ANALYZER_HTML")+"\n"+t.language.getLabel("HLP_FTS_ANALYZER_EDGENGRAM")+"\n"+t.language.getLabel("HLP_FTS_ANALYZER_EMAIL")),c.xp6(3),c.Q6J("ngModel",t.ftsconfiguration.moduleFtsSettings.search_analyzer),c.xp6(3),c.Q6J("ngForOf",t.ftsconfiguration.analyzers),c.xp6(2),c.Q6J("ngModel",t.ftsconfiguration.moduleFtsSettings.globalsearch),c.xp6(2),c.Q6J("ngModel",t.ftsconfiguration.moduleFtsSettings.emailsearch),c.xp6(2),c.Q6J("ngModel",t.ftsconfiguration.moduleFtsSettings.phonesearch),c.xp6(10),c.Q6J("ngModel",t.ftsconfiguration.moduleFtsSettings.duplicatefilter),c.xp6(5),c.Q6J("ngModel",t.ftsconfiguration.moduleFtsSettings.geosearch),c.xp6(6),c.Q6J("disabled",!t.ftsconfiguration.moduleFtsSettings.geosearch)("ngModel",t.ftsconfiguration.moduleFtsSettings.geolat)("module",t.ftsconfiguration.module),c.xp6(4),c.Q6J("disabled",!t.ftsconfiguration.moduleFtsSettings.geosearch)("ngModel",t.ftsconfiguration.moduleFtsSettings.geolng)("module",t.ftsconfiguration.module),c.xp6(7),c.Q6J("ngModel",t.ftsconfiguration.moduleFtsSettings.activitiessearch),c.xp6(5),c.Q6J("ngModel",t.ftsconfiguration.moduleFtsSettings.activitiesfilter),c.xp6(3),c.Q6J("ngModel",t.ftsconfiguration.moduleFtsSettings.historysearch),c.xp6(5),c.Q6J("ngModel",t.ftsconfiguration.moduleFtsSettings.historyfilter),c.xp6(3),c.Q6J("ngModel",t.ftsconfiguration.moduleFtsSettings.assistantsearch),c.xp6(5),c.Q6J("ngModel",t.ftsconfiguration.moduleFtsSettings.assistantfilter),c.xp6(3),c.Q6J("ngModel",t.ftsconfiguration.moduleFtsSettings.calendarsearch),c.xp6(5),c.Q6J("ngModel",t.ftsconfiguration.moduleFtsSettings.calendarfilter),c.xp6(3),c.Q6J("ngModel",t.ftsconfiguration.moduleFtsSettings.timelinesearch))},dependencies:[i.sg,n.YN,n.Kr,n.Fj,n.EJ,n.JJ,n.On,O.U,je.l,$e.s,T._,we.h,A.H],encapsulation:2}),AdministrationFTSManagerDetails})();const We=["administration-ftsmanager",""];function et(e,t){if(1&e&&(c.TgZ(0,"option",19),c._uU(1),c.qZA()),2&e){const e=t.$implicit;c.Q6J("value",e),c.xp6(1),c.Oqu(e)}}function tt(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",9)(1,"button",12),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw();return c.KtG(t.save())})),c._UZ(2,"system-label",20),c.qZA(),c.TgZ(3,"button",12),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw();return c.KtG(t.resetModule())})),c._UZ(4,"system-label",21),c.qZA(),c.TgZ(5,"button",12),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw();return c.KtG(t.indexModule())})),c._UZ(6,"system-label",22),c.qZA()()}if(2&e){const e=c.oxw();c.xp6(1),c.Q6J("disabled",!e.module),c.xp6(2),c.Q6J("disabled",!e.module),c.xp6(2),c.Q6J("disabled",!e.module)}}function st(e,t){1&e&&c._UZ(0,"administration-ftsmanager-fields")}function it(e,t){1&e&&c._UZ(0,"administration-ftsmanager-details")}const nt=function(e){return{"slds-active":e}};function lt(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div")(1,"ul",23)(2,"li",24),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw();return c.KtG(t.setActiveTab("fields"))})),c.TgZ(3,"a",25),c._UZ(4,"system-label",26),c.qZA()(),c.TgZ(5,"li",24),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw();return c.KtG(t.setActiveTab("details"))})),c.TgZ(6,"a",25),c._UZ(7,"system-label",27),c.qZA()()(),c.YNc(8,st,1,0,"administration-ftsmanager-fields",28),c.YNc(9,it,1,0,"administration-ftsmanager-details",28),c.qZA()}if(2&e){const e=c.oxw();c.xp6(2),c.Q6J("ngClass",c.VKq(4,nt,"fields"===e.activeTab)),c.xp6(3),c.Q6J("ngClass",c.VKq(6,nt,"details"===e.activeTab)),c.xp6(3),c.Q6J("ngIf","fields"===e.activeTab),c.xp6(1),c.Q6J("ngIf","details"===e.activeTab)}}function ot(e,t){1&e&&(c.TgZ(0,"div",29),c._UZ(1,"system-label",30),c.qZA())}let at=(()=>{class AdministrationFTSManager{constructor(e,t,s,i,n){this.metadata=e,this.language=t,this.modal=s,this.ftsconfiguration=i,this.injector=n,this.activeTab="fields"}get modules(){return this.ftsconfiguration.modules.sort()}get module(){return this.ftsconfiguration.module}set module(e){this.ftsconfiguration.setModule(e)}add(){this.modal.openModal("AdministrationFTSManagerModuleAdd",!0,this.injector).subscribe((e=>{e.instance.module$.subscribe((e=>{e&&(this.module=e)}))}))}delete(){this.modal.confirmDeleteRecord().subscribe((e=>{e&&(this.ftsconfiguration.deleteModule(this.module),this.module="")}))}setActiveTab(e){this.activeTab=e}save(){this.ftsconfiguration.save()}indexModule(){this.modal.openModal("AdministrationFtsManagerIndexModal").subscribe((e=>{e.instance.response.subscribe((e=>{e&&this.ftsconfiguration.executeAction("bulk",e)}))}))}resetModule(){this.ftsconfiguration.executeAction("reset")}}return AdministrationFTSManager.ɵfac=function(e){return new(e||AdministrationFTSManager)(c.Y36(b.Pu),c.Y36(p.d),c.Y36(Je.o),c.Y36(Ee),c.Y36(c.zs3))},AdministrationFTSManager.ɵcmp=c.Xpm({type:AdministrationFTSManager,selectors:[["","administration-ftsmanager",""]],features:[c._Bn([Ee])],attrs:We,decls:20,vars:7,consts:[[1,"slds-grid","slds-form--inline","slds-p-around--small","slds-border--bottom"],[1,"slds-form-element"],[1,"slds-form-element__label"],["label","LBL_MODULE"],[1,"slds-form-element__control"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","disabled","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],["role","group",1,"slds-button-group"],["type","button",1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_ADD"],["type","button",1,"slds-button","slds-button--neutral",3,"disabled","click"],["label","LBL_DELETE"],[1,"slds-form-element","slds-col--bump-left"],["class","slds-button-group","role","group",4,"ngIf"],[1,"slds-tabs--default","slds-p-top--xx-small"],[4,"ngIf","ngIfElse"],["selectmodule",""],[3,"value"],["label","LBL_SAVE"],["label","LBL_RESET"],["label","LBL_INDEX"],["role","tablist",1,"slds-tabs--default__nav"],["role","presentation",1,"slds-tabs--default__item","slds-text-title--caps",3,"ngClass","click"],["href","javascript:void(0);","role","tab","aria-selected","false",1,"slds-tabs--default__link"],["label","LBL_FIELDS"],["label","LBL_INDEX_PARAMETERS"],[4,"ngIf"],["system-to-bottom","",1,"slds-p-around--small","slds-align--absolute-center"],["label","LBL_SELECT_A_MODULE"]],template:function(e,t){if(1&e&&(c.TgZ(0,"div",0)(1,"div",1)(2,"label",2),c._UZ(3,"system-label",3),c.qZA(),c.TgZ(4,"div",4)(5,"div",5)(6,"select",6),c.NdJ("ngModelChange",(function(e){return t.module=e})),c._UZ(7,"option",7),c.YNc(8,et,2,2,"option",8),c.qZA()()()(),c.TgZ(9,"div",9)(10,"button",10),c.NdJ("click",(function(){return t.add()})),c._UZ(11,"system-label",11),c.qZA(),c.TgZ(12,"button",12),c.NdJ("click",(function(){return t.delete()})),c._UZ(13,"system-label",13),c.qZA()(),c.TgZ(14,"div",14),c.YNc(15,tt,7,3,"div",15),c.qZA()(),c.TgZ(16,"div",16),c.YNc(17,lt,10,8,"div",17),c.YNc(18,ot,2,0,"ng-template",null,18,c.W1O),c.qZA()),2&e){const e=c.MAs(19);c.xp6(6),c.Q6J("ngModel",t.module)("disabled",0==t.modules.length),c.xp6(2),c.Q6J("ngForOf",t.modules),c.xp6(4),c.Q6J("disabled",!t.module),c.xp6(3),c.Q6J("ngIf",!t.ftsconfiguration.indexing),c.xp6(2),c.Q6J("ngIf",t.module)("ngIfElse",e)}},dependencies:[i.mk,i.sg,i.O5,n.YN,n.Kr,n.EJ,n.JJ,n.On,T._,A.H,Ke,Ve],encapsulation:2}),AdministrationFTSManager})();var dt=s(9621),rt=s(3499),ct=s(5767),gt=s(1916);function ut(e,t){if(1&e&&(c.TgZ(0,"option",13),c._uU(1),c.qZA()),2&e){const e=t.$implicit,s=c.oxw();c.Q6J("value",e),c.xp6(1),c.AsE("",e," (",s.language.getModuleName(e),")")}}let mt=(()=>{class AdministrationFTSManagerModuleAdd{constructor(e,t,s){this.metadata=e,this.language=t,this.ftsconfiguration=s,this.modules=[],this.module="",this.module$=new c.vpe}ngOnInit(){let e=this.ftsconfiguration.modules,t=this.metadata.getModules();for(let s of t)-1==e.indexOf(s)&&this.modules.push(s);this.modules.sort()}add(){this.module$.emit(this.module),this.self.destroy()}close(){this.module$.emit(!1),this.self.destroy()}}return AdministrationFTSManagerModuleAdd.ɵfac=function(e){return new(e||AdministrationFTSManagerModuleAdd)(c.Y36(b.Pu),c.Y36(p.d),c.Y36(Ee))},AdministrationFTSManagerModuleAdd.ɵcmp=c.Xpm({type:AdministrationFTSManagerModuleAdd,selectors:[["ng-component"]],decls:16,vars:2,consts:[[3,"close"],["label","LBL_ADD_MODULE"],[1,"slds-form-element"],[1,"slds-form-element__label"],["label","LBL_MODULE"],[1,"slds-form-element__control"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_ADD"],[3,"value"]],template:function(e,t){1&e&&(c.TgZ(0,"system-modal")(1,"system-modal-header",0),c.NdJ("close",(function(){return t.close()})),c._UZ(2,"system-label",1),c.qZA(),c.TgZ(3,"system-modal-content")(4,"div",2)(5,"label",3),c._UZ(6,"system-label",4),c.qZA(),c.TgZ(7,"div",5)(8,"div",6)(9,"select",7),c.NdJ("ngModelChange",(function(e){return t.module=e})),c.YNc(10,ut,2,3,"option",8),c.qZA()()()()(),c.TgZ(11,"system-modal-footer")(12,"button",9),c.NdJ("click",(function(){return t.close()})),c._UZ(13,"system-label",10),c.qZA(),c.TgZ(14,"button",11),c.NdJ("click",(function(){return t.add()})),c._UZ(15,"system-label",12),c.qZA()()()),2&e&&(c.xp6(9),c.Q6J("ngModel",t.module),c.xp6(1),c.Q6J("ngForOf",t.modules))},dependencies:[i.sg,n.YN,n.Kr,n.EJ,n.JJ,n.On,T._,dt.j,rt.x,ct.p,gt.y],encapsulation:2}),AdministrationFTSManagerModuleAdd})();var pt=s(4947);function ht(e,t){if(1&e&&(c.TgZ(0,"tr",25)(1,"td",26),c._UZ(2,"system-utility-icon",27),c.qZA(),c.TgZ(3,"td",28)(4,"div",15),c._uU(5),c.qZA()(),c.TgZ(6,"td")(7,"div",15),c._UZ(8,"system-label",29),c.qZA()()()),2&e){const e=t.$implicit;c.Q6J("cdkDragData",e),c.xp6(5),c.Oqu(e.name),c.xp6(3),c.Q6J("label",e.label)}}const bt=function(e){return[e]};let ft=(()=>{class AdministrationFTSManagerFieldsAdd{constructor(e,t,s,i){this.metadata=e,this.language=t,this.ftsconfiguration=s,this.backend=i,this.links=[],this.self={},this.fields=[],this.nodefields=[],this.path=[],this.nodePath=""}get filteredNodeFields(){return this.filterKey?this.nodefields.filter((e=>e.name.toLowerCase().includes(this.filterKey.toLowerCase())||e.label&&e.label.toLowerCase().includes(this.filterKey.toLowerCase()))):this.nodefields}get fieldsDropList(){return this.ftsconfiguration.fieldsDropList||""}close(){this.self.destroy()}itemSelected(e){window.setTimeout((()=>this.nodePath=e.path)),this.getModuleFields(e.module)}getModuleFields(e){this.nodefields=[],this.backend.getRequest("dictionary/browser/"+e+"/fields").subscribe((e=>{this.nodefields=e}))}dropExited(e){let t=document.createElement("tr"),s=document.createElement("td");s.colSpan=10,s.innerHTML="&nbsp;",s.style.background="#fff",t.appendChild(s),this.dragPlaceHolderNode=t;let i=e.container.data.findIndex((t=>t.id==e.item.data.id));i>-1&&e.container.element.nativeElement.insertBefore(t,e.container.element.nativeElement.children[i])}dropEntered(e){this.removePlaceHolderElement(e.container.element.nativeElement)}removePlaceHolderElement(e){this.dragPlaceHolderNode&&(e.removeChild(this.dragPlaceHolderNode),this.dragPlaceHolderNode=void 0)}trackByFn(e,t){return t.id}}return AdministrationFTSManagerFieldsAdd.ɵfac=function(e){return new(e||AdministrationFTSManagerFieldsAdd)(c.Y36(b.Pu),c.Y36(p.d),c.Y36(Ee),c.Y36(u.y))},AdministrationFTSManagerFieldsAdd.ɵcmp=c.Xpm({type:AdministrationFTSManagerFieldsAdd,selectors:[["administration-ftsmanager-fields-add"]],decls:30,vars:13,consts:[["size","large"],[3,"close"],["margin","none",3,"grow"],[1,"slds-grid","administration-fts-manager-field-add-modal",2,"height","100%"],[1,"slds-size--1-of-3","slds-grid--vertical",2,"height","100%"],[1,"slds-scrollable--y","slds-border--bottom",2,"height","50%"],[3,"module","itemSelected"],[1,"slds-scrollable",2,"height","50%"],["role","none",1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon_left"],["icon","search","addclasses","slds-input__icon slds-input__icon--left"],["type","search",1,"slds-input","slds-combobox__input",3,"placeholder","ngModel","ngModelChange"],[1,"slds-table","slds-table_cell-buffer","slds-table_bordered"],[1,"slds-line-height_reset"],[1,"slds-cell-shrink"],["scope","col"],[1,"slds-truncate"],["label","LBL_FIELD"],["label","LBL_NAME"],["cdkDropList","","cdkDropListSortingDisabled","",3,"cdkDropListData","cdkDropListConnectedTo","cdkDropListExited","cdkDropListEntered"],["dragList","cdkDropList"],["cdkDrag","","cdkDragBoundary",".administration-fts-manager-field-add-modal","class","slds-hint-parent slds-drag--preview",3,"cdkDragData",4,"ngFor","ngForOf","ngForTrackBy"],[1,"slds-size--2-of-3",2,"height","100%"],[1,"slds-scrollable--y",2,"display","block","height","100%",3,"dragPlaceHolderNode","nodePath","dragList"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_OK"],["cdkDrag","","cdkDragBoundary",".administration-fts-manager-field-add-modal",1,"slds-hint-parent","slds-drag--preview",3,"cdkDragData"],[1,"slds-p-around--none","slds-cell-shrink"],["cdkDragHandle","","icon","drag_and_drop","size","x-small",1,"slds-p-horizontal--x-small",2,"cursor","move"],["data-label","Account Name"],[3,"label"]],template:function(e,t){if(1&e&&(c.TgZ(0,"system-modal",0)(1,"system-modal-header",1),c.NdJ("close",(function(){return t.close()})),c._uU(2,"Add Field"),c.qZA(),c.TgZ(3,"system-modal-content",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"system-module-tree",6),c.NdJ("itemSelected",(function(e){return t.itemSelected(e)})),c.qZA()(),c.TgZ(8,"div",7)(9,"div",8),c._UZ(10,"system-utility-icon",9),c.TgZ(11,"input",10),c.NdJ("ngModelChange",(function(e){return t.filterKey=e})),c.qZA()(),c.TgZ(12,"table",11)(13,"thead")(14,"tr",12),c._UZ(15,"th",13),c.TgZ(16,"th",14)(17,"div",15),c._UZ(18,"system-label",16),c.qZA()(),c.TgZ(19,"th",14)(20,"div",15),c._UZ(21,"system-label",17),c.qZA()()()(),c.TgZ(22,"tbody",18,19),c.NdJ("cdkDropListExited",(function(e){return t.dropExited(e)}))("cdkDropListEntered",(function(e){return t.dropEntered(e)})),c.YNc(24,ht,9,3,"tr",20),c.qZA()()()(),c.TgZ(25,"div",21),c._UZ(26,"administration-ftsmanager-fields-list",22),c.qZA()()(),c.TgZ(27,"system-modal-footer")(28,"button",23),c.NdJ("click",(function(){return t.close()})),c._UZ(29,"system-label",24),c.qZA()()()),2&e){const e=c.MAs(23);c.xp6(3),c.Q6J("grow",!0),c.xp6(4),c.Q6J("module",t.ftsconfiguration.module),c.xp6(4),c.Q6J("placeholder",t.language.getLabel("LBL_SEARCH"))("ngModel",t.filterKey),c.xp6(11),c.Q6J("cdkDropListData",t.nodefields)("cdkDropListConnectedTo",c.VKq(11,bt,t.fieldsDropList)),c.xp6(2),c.Q6J("ngForOf",t.filteredNodeFields)("ngForTrackBy",t.trackByFn),c.xp6(2),c.Q6J("dragPlaceHolderNode",t.dragPlaceHolderNode)("nodePath",t.nodePath)("dragList",e)}},dependencies:[i.sg,n.Fj,n.JJ,n.On,T._,dt.j,rt.x,ct.p,gt.y,M.r,pt.w,l.Wj,l.Zt,l.Bh,Qe],encapsulation:2}),AdministrationFTSManagerFieldsAdd})();function _t(e,t){if(1&e&&(c.TgZ(0,"tr")(1,"td")(2,"div",4),c._uU(3),c.qZA()(),c.TgZ(4,"td")(5,"div",4),c._uU(6),c.qZA()(),c.TgZ(7,"td")(8,"div",4),c._uU(9),c.qZA()(),c.TgZ(10,"td")(11,"div",4),c._uU(12),c.qZA()(),c.TgZ(13,"td")(14,"div",4),c._uU(15),c.qZA()()()),2&e){const e=t.$implicit;c.xp6(3),c.Oqu(e.name),c.xp6(3),c.Oqu(e.size),c.xp6(3),c.Oqu(e.documents),c.xp6(3),c.Oqu(e.stored),c.xp6(3),c.Oqu(e.unindexed)}}let Zt=(()=>{class AdministrationFTSStats{constructor(e,t,s){this.metadata=e,this.language=t,this.backend=s,this.stats={},this.indices=[],this.backend.getRequest("admin/elastic/stats").subscribe((e=>{this.stats=e;for(let t in e.indices)this.indices.push({name:t,size:e.indices[t].total.store.size_in_bytes,documents:e.indices[t].total.docs.count,stored:e.indexed[t].count,unindexed:e.indexed[t].unindexed});this.indices.sort(((e,t)=>e.name>t.name?1:-1))}))}}return AdministrationFTSStats.ɵfac=function(e){return new(e||AdministrationFTSStats)(c.Y36(b.Pu),c.Y36(p.d),c.Y36(u.y))},AdministrationFTSStats.ɵcmp=c.Xpm({type:AdministrationFTSStats,selectors:[["ng-component"]],decls:22,vars:1,consts:[[1,"slds-text-heading_medium","slds-p-around--small"],[1,"slds-table","slds-table_bordered","slds-table_cell-buffer"],[1,"slds-text-title_caps"],["scope","col"],[1,"slds-truncate"],[4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(c.TgZ(0,"h2",0),c._uU(1,"FTS Stats"),c.qZA(),c.TgZ(2,"table",1)(3,"thead")(4,"tr",2)(5,"th",3)(6,"div",4),c._uU(7,"Name"),c.qZA()(),c.TgZ(8,"th",3)(9,"div",4),c._uU(10,"Size"),c.qZA()(),c.TgZ(11,"th",3)(12,"div",4),c._uU(13,"Documents"),c.qZA()(),c.TgZ(14,"th",3)(15,"div",4),c._uU(16,"stored"),c.qZA()(),c.TgZ(17,"th",3)(18,"div",4),c._uU(19,"unindexed"),c.qZA()()()(),c.TgZ(20,"tbody"),c.YNc(21,_t,16,5,"tr",5),c.qZA()()),2&e&&(c.xp6(21),c.Q6J("ngForOf",t.indices))},dependencies:[i.sg],encapsulation:2}),AdministrationFTSStats})();var At=s(9901);let yt=(()=>{class AdministrationFtsManagerIndexModal{constructor(e){this.language=e,this.settings={},this.self={},this.responseSubject=new Ae.x,this.response=this.responseSubject.asObservable(),this.settings.bulkAmount=-1}cancel(){this.responseSubject.next(!1),this.responseSubject.complete(),this.self.destroy()}start(){this.responseSubject.next(this.settings),this.responseSubject.complete(),this.self.destroy()}}return AdministrationFtsManagerIndexModal.ɵfac=function(e){return new(e||AdministrationFtsManagerIndexModal)(c.Y36(p.d))},AdministrationFtsManagerIndexModal.ɵcmp=c.Xpm({type:AdministrationFtsManagerIndexModal,selectors:[["ng-component"]],decls:27,vars:5,consts:[[3,"close"],["label","LBL_INDEX"],[1,"slds-p-bottom--xx-small"],["label","LBL_RESET_INDEX_DATE","length","long"],[1,"slds-m-bottom--medium"],[3,"ngModel","ngModelChange"],["label","LBL_RESET_INDEX_DATE"],["label","LBL_BULK_INDEX"],["name","ftsmanagerbulk","value","0",2,"display","block",3,"ngModel","ngModelChange"],["label","LBL_NONE"],["name","ftsmanagerbulk","value","100",2,"display","block",3,"ngModel","ngModelChange"],["label","LBL_RECORDS"],["name","ftsmanagerbulk","value","1000",2,"display","block",3,"ngModel","ngModelChange"],["name","ftsmanagerbulk","value","-1",2,"display","block",3,"ngModel","ngModelChange"],["label","LBL_SYSTEM_DEFAULT"],["type","button",1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],["type","button",1,"slds-button","slds-button--brand",3,"click"],["label","LBL_START"]],template:function(e,t){1&e&&(c.TgZ(0,"system-modal")(1,"system-modal-header",0),c.NdJ("close",(function(){return t.cancel()})),c._UZ(2,"system-label",1),c.qZA(),c.TgZ(3,"system-modal-content")(4,"div",2),c._UZ(5,"system-label",3),c.qZA(),c.TgZ(6,"div",4)(7,"system-checkbox",5),c.NdJ("ngModelChange",(function(e){return t.settings.resetIndexDates=e})),c._UZ(8,"system-label",6),c.qZA()(),c.TgZ(9,"div",2),c._UZ(10,"system-label",7),c.qZA(),c.TgZ(11,"div")(12,"system-input-radio",8),c.NdJ("ngModelChange",(function(){return t.settings.bulkAmount=0})),c._UZ(13,"system-label",9),c.qZA(),c.TgZ(14,"system-input-radio",10),c.NdJ("ngModelChange",(function(){return t.settings.bulkAmount=100})),c._uU(15," 100 "),c._UZ(16,"system-label",11),c.qZA(),c.TgZ(17,"system-input-radio",12),c.NdJ("ngModelChange",(function(){return t.settings.bulkAmount=1e3})),c._uU(18," 1000 "),c._UZ(19,"system-label",11),c.qZA(),c.TgZ(20,"system-input-radio",13),c.NdJ("ngModelChange",(function(){return t.settings.bulkAmount=-1})),c._UZ(21,"system-label",14),c.qZA()()(),c.TgZ(22,"system-modal-footer")(23,"button",15),c.NdJ("click",(function(){return t.cancel()})),c._UZ(24,"system-label",16),c.qZA(),c.TgZ(25,"button",17),c.NdJ("click",(function(){return t.start()})),c._UZ(26,"system-label",18),c.qZA()()()),2&e&&(c.xp6(7),c.Q6J("ngModel",t.settings.resetIndexDates),c.xp6(5),c.Q6J("ngModel",t.settings.bulkAmount),c.xp6(2),c.Q6J("ngModel",t.settings.bulkAmount),c.xp6(3),c.Q6J("ngModel",t.settings.bulkAmount),c.xp6(3),c.Q6J("ngModel",t.settings.bulkAmount))},dependencies:[n.JJ,n.On,O.U,At.A,T._,dt.j,rt.x,ct.p,gt.y],encapsulation:2}),AdministrationFtsManagerIndexModal})();const vt=["administration-card-item",""];let xt=(()=>{class AdministrationHomeScreenCardItem{constructor(e,t,s,i,n){this.router=e,this.metadata=t,this.language=s,this.administration=i,this.navigationtab=n,this.adminNavigationItem={},this.adminNavigationBlock=""}openContent(){let e=this.administration.getItemLabel(this.adminNavigationItem.id);this.navigationtab.setTabInfo({displayname:this.language.getLabel(e||"LBL_ADMINISTRATION"),displayicon:"settings"}),this.administration.navigateto(this.adminNavigationItem.id)}get icon(){return this.adminNavigationItem.icon?this.adminNavigationItem.icon:"empty"}}return AdministrationHomeScreenCardItem.ɵfac=function(e){return new(e||AdministrationHomeScreenCardItem)(c.Y36(F.F0),c.Y36(b.Pu),c.Y36(p.d),c.Y36(h),c.Y36(Z.d))},AdministrationHomeScreenCardItem.ɵcmp=c.Xpm({type:AdministrationHomeScreenCardItem,selectors:[["","administration-card-item",""]],inputs:{adminNavigationItem:"adminNavigationItem",adminNavigationBlock:"adminNavigationBlock"},attrs:vt,decls:11,vars:3,consts:[["href","javascript:void(0);",1,"slds-text-link_reset",3,"click"],[1,"slds-tile","slds-media","slds-card__tile","slds-hint-parent"],[1,"slds-media__figure"],["size","large",3,"icon"],[1,"slds-media__body"],[1,"slds-grid","slds-grid_align-spread"],[1,"slds-tile__title","slds-text-heading_small"],[3,"label"],[1,"slds-text-body_small"],["length","long",3,"label"]],template:function(e,t){1&e&&(c.TgZ(0,"a",0),c.NdJ("click",(function(){return t.openContent()})),c.TgZ(1,"article",1)(2,"div",2),c._UZ(3,"system-icon",3),c.qZA(),c.TgZ(4,"div",4)(5,"div",5)(6,"h3",6)(7,"p"),c._UZ(8,"system-label",7),c.qZA(),c.TgZ(9,"p",8),c._UZ(10,"system-label",9),c.qZA()()()()()()),2&e&&(c.xp6(3),c.Q6J("icon",t.icon),c.xp6(5),c.Q6J("label",t.adminNavigationItem.admin_label),c.xp6(2),c.Q6J("label",t.adminNavigationItem.admin_label))},dependencies:[L.f,T._],encapsulation:2}),AdministrationHomeScreenCardItem})();function Lt(e,t){if(1&e&&c._UZ(0,"li",13),2&e){const e=t.$implicit;c.Q6J("adminNavigationItem",e)}}let Tt=(()=>{class AdministrationHomeScreenCard{constructor(e,t,s,i){this.router=e,this.metadata=t,this.language=s,this.administration=i}trackbyfn(e,t){return t.id}}return AdministrationHomeScreenCard.ɵfac=function(e){return new(e||AdministrationHomeScreenCard)(c.Y36(F.F0),c.Y36(b.Pu),c.Y36(p.d),c.Y36(h))},AdministrationHomeScreenCard.ɵcmp=c.Xpm({type:AdministrationHomeScreenCard,selectors:[["administration-card"]],inputs:{adminNavigationBlock:"adminNavigationBlock"},decls:13,vars:4,consts:[[1,"slds-p-around--medium"],[1,"slds-card","slds-p-around--small"],[1,"slds-card__header","slds-grid"],[1,"slds-media","slds-media_center","slds-has-flexi-truncate"],[1,"slds-media__body"],[1,"slds-card__header-title","slds-text-heading_medium","slds-grid--vertical"],[1,"slds-card__header-link","slds-truncate"],[3,"label"],[1,"slds-text-body_small","slds-p-top_small"],["length","long",3,"label"],[1,"slds-card__body","slds-card__body_inner"],[1,"slds-grid","slds-wrap","slds-grid_pull-padded"],["class","slds-p-horizontal_small slds-size_1-of-1 slds-medium-size_1-of-3","administration-card-item","",3,"adminNavigationItem",4,"ngFor","ngForOf","ngForTrackBy"],["administration-card-item","",1,"slds-p-horizontal_small","slds-size_1-of-1","slds-medium-size_1-of-3",3,"adminNavigationItem"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0)(1,"article",1)(2,"div",2)(3,"header",3)(4,"div",4)(5,"h2",5)(6,"p",6),c._UZ(7,"system-label",7),c.qZA(),c.TgZ(8,"p",8),c._UZ(9,"system-label",9),c.qZA()()()()(),c.TgZ(10,"div",10)(11,"ul",11),c.YNc(12,Lt,1,1,"li",12),c.qZA()()()()),2&e&&(c.xp6(7),c.Q6J("label",t.adminNavigationBlock.label),c.xp6(2),c.Q6J("label",t.adminNavigationBlock.label),c.xp6(3),c.Q6J("ngForOf",t.adminNavigationBlock.groupcomponents)("ngForTrackBy",t.trackbyfn))},dependencies:[i.sg,T._,xt],encapsulation:2}),AdministrationHomeScreenCard})();function Mt(e,t){if(1&e&&c._UZ(0,"administration-card",1),2&e){const e=t.$implicit;c.Q6J("adminNavigationBlock",e)}}let Jt=(()=>{class AdministrationHomeScreen{constructor(e,t,s,i){this.router=e,this.metadata=t,this.language=s,this.administration=i}trackbyfn(e,t){return t.id}}return AdministrationHomeScreen.ɵfac=function(e){return new(e||AdministrationHomeScreen)(c.Y36(F.F0),c.Y36(b.Pu),c.Y36(p.d),c.Y36(h))},AdministrationHomeScreen.ɵcmp=c.Xpm({type:AdministrationHomeScreen,selectors:[["ng-component"]],decls:1,vars:2,consts:[[3,"adminNavigationBlock",4,"ngFor","ngForOf","ngForTrackBy"],[3,"adminNavigationBlock"]],template:function(e,t){1&e&&c.YNc(0,Mt,1,1,"administration-card",0),2&e&&c.Q6J("ngForOf",t.administration.navigationGroups)("ngForTrackBy",t.trackbyfn)},dependencies:[i.sg,Tt],encapsulation:2}),AdministrationHomeScreen})();var qt=s(4664);function Et(e,t){if(1&e&&(c.ynx(0),c._UZ(1,"system-display-number",12),c._uU(2," / "),c._UZ(3,"system-display-number",12),c.BQk()),2&e){const e=c.oxw().$implicit,t=c.oxw(2);c.xp6(1),c.Q6J("number",t.ftsDocumentCount(e.name,"primaries")),c.xp6(2),c.Q6J("number",t.ftsDocumentCount(e.name,"total"))}}function Ct(e,t){if(1&e&&(c.ynx(0),c._uU(1),c.BQk()),2&e){const e=c.oxw().$implicit,t=c.oxw(2);c.xp6(1),c.AsE("",t.ftsIndexSize(e.name,"primaries")," / ",t.ftsIndexSize(e.name,"total"),"")}}function Ut(e,t){if(1&e&&(c.TgZ(0,"tr")(1,"td")(2,"div",10),c._uU(3),c.qZA()(),c.TgZ(4,"td")(5,"div",11),c._UZ(6,"system-display-number",12),c.qZA()(),c.TgZ(7,"td")(8,"div",10),c._uU(9),c.qZA()(),c.TgZ(10,"td")(11,"div",11),c.YNc(12,Et,4,2,"ng-container",21),c.qZA()(),c.TgZ(13,"td")(14,"div",10),c.YNc(15,Ct,2,2,"ng-container",21),c.qZA()()()),2&e){const e=t.$implicit,s=c.oxw(2);c.xp6(3),c.Oqu(e.name),c.xp6(3),c.Q6J("number",e.records),c.xp6(3),c.Oqu(s.humanReadableSize(e.size)),c.xp6(3),c.Q6J("ngIf",s.ftsDocumentCount(e.name,"primaries")),c.xp6(3),c.Q6J("ngIf",s.ftsIndexSize(e.name,"primaries"))}}function Nt(e,t){if(1&e){const e=c.EpF();c.ynx(0),c.TgZ(1,"div",2)(2,"h2",3),c._uU(3,"System and Storage Statistics Summary"),c.qZA(),c.TgZ(4,"button",4),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw();return c.KtG(t.refresh())})),c._UZ(5,"system-button-icon",5),c.qZA()(),c.TgZ(6,"table",6)(7,"thead")(8,"tr",7)(9,"th",8),c._uU(10," Object "),c.qZA(),c.TgZ(11,"th",9),c._uU(12," Records "),c.qZA(),c.TgZ(13,"th",8),c._uU(14," Size "),c.qZA()()(),c.TgZ(15,"tbody")(16,"tr")(17,"td")(18,"div",10),c._uU(19,"Database"),c.qZA()(),c.TgZ(20,"td")(21,"div",11),c._UZ(22,"system-display-number",12),c.qZA()(),c.TgZ(23,"td")(24,"div",10),c._uU(25),c.qZA()()(),c.TgZ(26,"tr")(27,"td")(28,"div",10),c._uU(29,"Elasticsearch"),c.qZA()(),c.TgZ(30,"td")(31,"div",11),c._UZ(32,"system-display-number",12),c._uU(33," / "),c._UZ(34,"system-display-number",12),c.qZA()(),c.TgZ(35,"td")(36,"div",10),c._uU(37),c.qZA()()(),c.TgZ(38,"tr")(39,"td")(40,"div",10),c._uU(41,"Uploadfiles"),c.qZA()(),c.TgZ(42,"td")(43,"div",11),c._UZ(44,"system-display-number",12),c.qZA()(),c.TgZ(45,"td")(46,"div",10),c._uU(47),c.qZA()()()(),c.TgZ(48,"tfoot")(49,"tr",13)(50,"th")(51,"div",10),c._uU(52,"total"),c.qZA()(),c.TgZ(53,"th"),c._UZ(54,"div",10),c.qZA(),c.TgZ(55,"th")(56,"div",10),c._uU(57),c.qZA()()()()(),c.TgZ(58,"h2",14),c._uU(59,"System and Storage Statistics Details"),c.qZA(),c.TgZ(60,"div",15)(61,"table",16)(62,"thead")(63,"tr",7)(64,"th",8)(65,"div",17),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw();return c.KtG(t.sortby("name",!1))})),c._uU(66,"Table"),c.qZA()(),c.TgZ(67,"th",8)(68,"div",18),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw();return c.KtG(t.sortby("records"))})),c._uU(69,"Records"),c.qZA()(),c.TgZ(70,"th",8)(71,"div",17),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw();return c.KtG(t.sortby("size"))})),c._uU(72,"Size"),c.qZA()(),c.TgZ(73,"th",8)(74,"div",19),c._uU(75,"indexed Records"),c.qZA()(),c.TgZ(76,"th",8)(77,"div",10),c._uU(78,"Index Size"),c.qZA()()()(),c.TgZ(79,"tbody"),c.YNc(80,Ut,16,5,"tr",20),c.qZA()()(),c.BQk()}if(2&e){const e=c.oxw();c.xp6(22),c.Q6J("number",e.totaldbrecords),c.xp6(3),c.Oqu(e.humanReadableSize(e.totaldbsize)),c.xp6(7),c.Q6J("number",e.totalelasticrecords("primaries")),c.xp6(2),c.Q6J("number",e.totalelasticrecords("total")),c.xp6(3),c.AsE("",e.humanReadableSize(e.totalelasticsize("primaries"))," / ",e.humanReadableSize(e.totalelasticsize("total")),""),c.xp6(7),c.Q6J("number",e.uploadcount),c.xp6(3),c.Oqu(e.humanReadableSize(e.uploadsize)),c.xp6(10),c.Oqu(e.humanReadableSize(e.totalsize)),c.xp6(23),c.Q6J("ngForOf",e.stats.database)}}function kt(e,t){1&e&&(c.TgZ(0,"div",22),c._UZ(1,"system-spinner"),c.qZA())}let St=(()=>{class AdministrationSystemStats{constructor(e,t,s,i){this.metadata=e,this.language=t,this.backend=s,this.helper=i,this.loaded=!1,this.stats={},this.totaldbrecords=0,this.totaldbsize=0,this.loadStats()}loadStats(){this.loaded=!1,this.backend.getRequest("configuration/systemstats").subscribe((e=>{this.stats=e,this.calculateTotalsDB(),this.loaded=!0}))}refresh(){this.loadStats()}totalelasticrecords(e){try{return this.stats.elastic._all[e].docs.count}catch(e){return 0}}totalelasticsize(e){try{return this.stats.elastic._all[e].store.size_in_bytes}catch(e){return 0}}get uploadcount(){try{return this.stats.uploadfiles.count}catch(e){return 0}}get uploadsize(){try{return this.stats.uploadfiles.size}catch(e){return 0}}get totalsize(){return this.totaldbsize+this.totalelasticsize("total")+this.uploadsize}sortby(e,t=!0){this.stats.database.sort(((s,i)=>s[e]>i[e]?t?-1:1:t?1:-1))}calculateTotalsDB(){this.totaldbrecords=0,this.totaldbsize=0;for(let e of this.stats.database)this.totaldbrecords+=parseInt(e.records,10),this.totaldbsize+=parseInt(e.size,10)}humanReadableSize(e){return this.helper.humanFileSize(e)}ftsDocumentCount(e,t){try{return this.stats.elastic.indices[this.stats.elastic._prefix+e][t].docs.count}catch(e){return""}}ftsIndexSize(e,t){try{return this.humanReadableSize(this.stats.elastic.indices[this.stats.elastic._prefix+e][t].store.size_in_bytes)}catch(e){return""}}}return AdministrationSystemStats.ɵfac=function(e){return new(e||AdministrationSystemStats)(c.Y36(b.Pu),c.Y36(p.d),c.Y36(u.y),c.Y36(D._))},AdministrationSystemStats.ɵcmp=c.Xpm({type:AdministrationSystemStats,selectors:[["ng-component"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["loading",""],[1,"slds-grid","slds-grid_vertical-align-center","slds-grid--align-spread","slds-p-around--small"],[1,"slds-text-heading_medium"],[1,"slds-button","slds-button_icon","slds-button_icon-border-filled",3,"click"],["icon","refresh"],[1,"slds-table","slds-table_bordered","slds-table_cell-buffer","slds-m-bottom--medium"],[1,"slds-text-title_caps"],["scope","col"],["scope","col",1,"slds-text-align--right","slds-p-horizontal--xx-small"],[1,"slds-truncate"],[1,"slds-truncate","slds-text-align--right"],["system-display-number-nodigits","",3,"number"],[1,"slds-theme--shade","slds-text-title_caps"],[1,"slds-p-around--small"],["system-to-bottom","",1,"slds-border--top"],[1,"slds-table","slds-table_bordered","slds-table_cell-buffer","slds-table--header-fixed"],[1,"slds-truncate",3,"click"],[1,"slds-truncate","slds-p-horizontal--xx-small","slds-text-align--right",3,"click"],[1,"slds-truncate","slds-p-horizontal--xx-small","slds-text-align--right"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"slds-align--absolute-center","slds-height_full","slds-size--1-of-1"]],template:function(e,t){if(1&e&&(c.YNc(0,Nt,81,10,"ng-container",0),c.YNc(1,kt,2,0,"ng-template",null,1,c.W1O)),2&e){const e=c.MAs(2);c.Q6J("ngIf",t.loaded)("ngIfElse",e)}},dependencies:[i.sg,i.O5,x.J,Ce.G,qt.W,A.H],encapsulation:2}),AdministrationSystemStats})();var Ft=s(529);function Rt(e,t){if(1&e&&(c.TgZ(0,"tr")(1,"td")(2,"div",10),c._uU(3),c.qZA()(),c.TgZ(4,"td")(5,"div",10),c._uU(6),c.qZA()(),c.TgZ(7,"td")(8,"div",10),c._uU(9),c.qZA()(),c.TgZ(10,"td")(11,"div",10),c._uU(12),c.qZA()()()),2&e){const e=t.$implicit;c.xp6(3),c.Oqu(e.name),c.xp6(3),c.Oqu(e.date),c.xp6(3),c.Oqu(e.build),c.xp6(3),c.Oqu(e.release)}}function It(e,t){if(1&e&&(c.TgZ(0,"tr")(1,"td")(2,"div",10),c._uU(3),c.qZA()(),c.TgZ(4,"td")(5,"div",10),c._uU(6),c.qZA()()()),2&e){const e=t.$implicit;c.xp6(3),c.Oqu(e.name),c.xp6(3),c.Oqu(e.version)}}function wt(e,t){if(1&e&&(c.TgZ(0,"div")(1,"div",5)(2,"h3"),c._uU(3),c.qZA()(),c.TgZ(4,"table",7)(5,"thead")(6,"tr",8)(7,"th",18)(8,"div",10),c._UZ(9,"system-label",11),c.qZA()(),c.TgZ(10,"th",15)(11,"div",10),c._UZ(12,"system-label",19),c.qZA()()()(),c.TgZ(13,"tbody"),c.YNc(14,It,7,2,"tr",17),c.qZA()()()),2&e){const e=t.$implicit;c.xp6(3),c.Oqu(e.vendorpackage),c.xp6(11),c.Q6J("ngForOf",e.files)}}function Dt(e,t){if(1&e&&(c.ynx(0),c.TgZ(1,"div",2)(2,"h2",3),c._uU(3,"Libraries Versions"),c.qZA()(),c.TgZ(4,"div",4)(5,"div",5)(6,"h3"),c._UZ(7,"system-label",6),c.qZA()(),c.TgZ(8,"table",7)(9,"thead")(10,"tr",8)(11,"th",9)(12,"div",10),c._UZ(13,"system-label",11),c.qZA()(),c.TgZ(14,"th",12)(15,"div",10),c._UZ(16,"system-label",13),c.qZA()(),c.TgZ(17,"th",12)(18,"div",10),c._UZ(19,"system-label",14),c.qZA()(),c.TgZ(20,"th",15)(21,"div",10),c._UZ(22,"system-label",16),c.qZA()()()(),c.TgZ(23,"tbody"),c.YNc(24,Rt,13,4,"tr",17),c.qZA()(),c.YNc(25,wt,15,2,"div",17),c.qZA(),c.BQk()),2&e){const e=c.oxw();c.xp6(24),c.Q6J("ngForOf",e.versions.app),c.xp6(1),c.Q6J("ngForOf",e.vendorpackages)}}function Ot(e,t){1&e&&(c.TgZ(0,"div",20),c._UZ(1,"system-spinner"),c.qZA())}let Bt=(()=>{class AdministrationSystemVersions{constructor(e,t,s){this.http=e,this.language=t,this.backend=s,this.loaded=!1,this.versions={},this.vendorpackages=[],this.loadVersions()}loadVersions(){this.loaded=!1,this.http.get("config/systemdetails/").subscribe((e=>{this.versions=e,this.vendorpackages=[];for(let e in this.versions.vendor)this.vendorpackages.push({vendorpackage:e,files:this.versions.vendor[e]});this.loaded=!0}))}}return AdministrationSystemVersions.ɵfac=function(e){return new(e||AdministrationSystemVersions)(c.Y36(Ft.eN),c.Y36(p.d),c.Y36(u.y))},AdministrationSystemVersions.ɵcmp=c.Xpm({type:AdministrationSystemVersions,selectors:[["ng-component"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["loading",""],[1,"slds-grid","slds-grid_vertical-align-center","slds-grid--align-spread","slds-p-around--small"],[1,"slds-text-heading_medium"],["system-to-bottom","",1,"slds-border--top"],[1,"slds-p-around--small","slds-text-heading_small"],["label","LBL_MODULES"],[1,"slds-table","slds-table_bordered","slds-table_cell-buffer"],[1,"slds-text-title_caps"],["scope","col","width","45%"],[1,"slds-truncate"],["label","LBL_NAME"],["scope","col","width","20%"],["label","LBL_DATE"],["label","LBL_BUILD"],["scope","col","width","15%"],["label","LBL_RELEASE"],[4,"ngFor","ngForOf"],["scope","col","width","85%"],["label","LBL_VERSION"],[1,"slds-align--absolute-center","slds-height_full","slds-size--1-of-1"]],template:function(e,t){if(1&e&&(c.YNc(0,Dt,26,2,"ng-container",0),c.YNc(1,Ot,2,0,"ng-template",null,1,c.W1O)),2&e){const e=c.MAs(2);c.Q6J("ngIf",t.loaded)("ngIfElse",e)}},dependencies:[i.sg,i.O5,T._,qt.W,A.H],encapsulation:2}),AdministrationSystemVersions})(),Qt=(()=>{class administrationapiinspectorService{constructor(e,t,s,i){this.backend=e,this.toast=t,this.injector=s,this.modelutilities=i,this.loading=!1,this.apiEndpoints=[],this.finalArray={},this.flattendArray=[],this.apiTree=[],this.apiMethods=[],this._apiSubMethods=!0,this._apiFilterUnauthorized=!1,this._apiFilterAdminOnly=!1,this._apiFilterValidatedOnly=!1,this.loadEndpoints()}get apiFilter(){return this._apiFilter}set apiFilter(e){this._apiFilter=e,this.buildTree()}get apiFilterUnauthorized(){return this._apiFilterUnauthorized}set apiFilterUnauthorized(e){this._apiFilterUnauthorized=e,this._apiFilterUnauthorized&&(this._apiFilterAdminOnly=!1),this.buildTree()}get apiFilterAdminOnly(){return this._apiFilterAdminOnly}set apiFilterAdminOnly(e){this._apiFilterAdminOnly=e,this._apiFilterAdminOnly&&(this._apiFilterUnauthorized=!1),this.buildTree()}get apiFilterValidatedOnly(){return this._apiFilterValidatedOnly}set apiFilterValidatedOnly(e){this._apiFilterValidatedOnly=e,this.buildTree()}loadEndpoints(){this.loading=!0,this.backend.getRequest("admin/routes").subscribe((e=>{this.apiEndpoints=e,this.apiEndpoints.sort(((e,t)=>e.route.replace("{","").localeCompare(t.route.replace("{","")))),this.buildTree(),this.loading=!1}),(e=>{this.toast.sendToast("Error Loading Routes","error"),this.loading=!1}))}buildTree(){this.apiMethods=[],this.apiTree=[],this.loading=!0;for(let e of this.apiEndpoints.filter((e=>(!this._apiFilterUnauthorized||!0===e.options.noAuth)&&((!this._apiFilterAdminOnly||!0===e.options.adminOnly)&&((!this._apiFilterValidatedOnly||!0!==e.options.validate)&&(!this._apiFilter||e.route.toLowerCase().indexOf(this._apiFilter.toLowerCase())>=0))))))e.route&&(this.apiTree.find((t=>t.route==e.route))||this.addRouteToTree(e.route));this.loading=!1}addRouteToTree(e){let t=this.getPartentId(e),s=this.getRouteId(e);return this.apiTree.push({id:s,name:"/"!=e?e.split("/").pop():e,route:e,parent_id:t,parent_sequence:this.apiTree.filter((e=>e.parent_id==t)).length,clickable:!0}),s}getPartentId(e){let t=e.substring(1).split("/");if(t.pop(),0==t.length)return;let s="/"+t.join("/"),i=this.apiTree.find((e=>e.route==s));return i?i.id:this.addRouteToTree(s)}getRouteId(e){return this.apiTree.find((t=>t.route==e))?this.apiTree.find((t=>t.route==e)).id:this.modelutilities.generateGuid()}selectAPI(e){this.selectedAPI=this.apiTree.find((t=>t.id==e)),this.filterMethods()}get apiSubMethods(){return this._apiSubMethods}set apiSubMethods(e){this._apiSubMethods=e,this.filterMethods()}filterMethods(){this.apiMethods=this.apiEndpoints.filter((e=>this._apiSubMethods?0==e.route.indexOf(this.selectedAPI.route):e.route==this.selectedAPI.route))}getMethodParameters(e,t,s){let i=[],n=this.apiEndpoints.find((s=>s.route==e&&s.method==t));if(!n.parameters)return[];for(let e in n.parameters){let t={...n.parameters[e]};t.in==s&&(t.name=e,i.push(t))}return i.sort(((e,t)=>e.name.localeCompare(t.name)))}getMethodResponses(e,t){let s=[],i=this.apiEndpoints.find((s=>s.route==e&&s.method==t));if(!i.responses)return[];for(let e in i.responses){let t={...i.responses[e]};t.name=e,s.push(t)}return s.sort(((e,t)=>e.name.localeCompare(t.name)))}getMethodRequests(e,t,s){let i=this.apiEndpoints.find((s=>s.route==e&&s.method==t));if(!i.requestBody)return[];for(let e in i.requestBody){i.requestBody[e]}return[].sort(((e,t)=>e.name.localeCompare(t.name)))}getMethodStyle(e){let t="inherit";switch(e){case"get":t="#05628a";break;case"post":t="#f38303";break;case"put":t="#41b658";break;case"delete":t="#d83a00"}return{width:"100px",color:"#ffffff",background:t}}}return administrationapiinspectorService.ɵfac=function(e){return new(e||administrationapiinspectorService)(c.LFG(u.y),c.LFG(qe.A),c.LFG(c.zs3),c.LFG(I.A))},administrationapiinspectorService.ɵprov=c.Yz7({token:administrationapiinspectorService,factory:administrationapiinspectorService.ɵfac}),administrationapiinspectorService})();var Yt=s(2646),zt=s(8574),Pt=s(3398);function Gt(e,t){1&e&&(c.TgZ(0,"th",14)(1,"div",6),c._UZ(2,"system-label",11),c.qZA()())}function Ht(e,t){1&e&&(c.TgZ(0,"abbr",17),c._uU(1,"* "),c.qZA())}function Kt(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"td")(1,"input",18),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw().$implicit,i=c.oxw(2);return c.KtG(i.parameterCollector[s.name]=t)})),c.qZA()()}if(2&e){const e=c.oxw().$implicit,t=c.oxw(2);c.xp6(1),c.Q6J("ngModel",t.parameterCollector[e.name])}}function jt(e,t){if(1&e&&(c.TgZ(0,"tr",15)(1,"td")(2,"div",6),c._uU(3),c.YNc(4,Ht,2,0,"abbr",16),c.qZA()(),c.TgZ(5,"td")(6,"div",6),c._uU(7),c.qZA()(),c.TgZ(8,"td")(9,"div",6),c._uU(10),c.qZA()(),c.YNc(11,Kt,2,1,"td",0),c.qZA()),2&e){const e=t.$implicit,s=c.oxw(2);c.xp6(3),c.Oqu(e.name),c.xp6(1),c.Q6J("ngIf",e.required),c.xp6(3),c.Oqu(e.description),c.xp6(3),c.Oqu(e.type),c.xp6(1),c.Q6J("ngIf",s.parameterCollector)}}function $t(e,t){if(1&e&&(c.ynx(0),c.TgZ(1,"div",1),c._UZ(2,"system-label",2),c.qZA(),c.TgZ(3,"table",3)(4,"thead")(5,"tr",4)(6,"th",5)(7,"div",6),c._UZ(8,"system-label",7),c.qZA()(),c.TgZ(9,"th",8)(10,"div",6),c._UZ(11,"system-label",9),c.qZA()(),c.TgZ(12,"th",10)(13,"div",6),c._UZ(14,"system-label",11),c.qZA()(),c.YNc(15,Gt,3,0,"th",12),c.qZA()(),c.TgZ(16,"tbody"),c.YNc(17,jt,12,5,"tr",13),c.qZA()(),c.BQk()),2&e){const e=c.oxw();c.xp6(2),c.Q6J("label","LBL_"+e.in.toUpperCase()+"_PARAMETERS"),c.xp6(13),c.Q6J("ngIf",e.parameterCollector),c.xp6(2),c.Q6J("ngForOf",e.parameters)}}let Xt=(()=>{class AdministrationApiInspectorMethodParameters{constructor(e){this.apiinspector=e}ngOnChanges(){this.parameters=this.apiinspector.getMethodParameters(this.apimethod.route,this.apimethod.method,this.in)}}return AdministrationApiInspectorMethodParameters.ɵfac=function(e){return new(e||AdministrationApiInspectorMethodParameters)(c.Y36(Qt))},AdministrationApiInspectorMethodParameters.ɵcmp=c.Xpm({type:AdministrationApiInspectorMethodParameters,selectors:[["administration-api-inspector-method-parameters"]],inputs:{apimethod:"apimethod",in:"in",parameterCollector:"parameterCollector"},features:[c.TTD],decls:1,vars:1,consts:[[4,"ngIf"],[1,"slds-p-around--small","slds-text-heading--label"],[3,"label"],[1,"slds-table","slds-table--fixed-layout","slds-table_cell-buffer","slds-table_bordered"],[1,"slds-line-height_reset"],["scope","col",2,"width","120px"],[1,"slds-truncate"],["label","LBL_NAME"],["scope","col"],["label","LBL_DESCRIPTION"],["scope","col",2,"width","100px"],["label","LBL_TYPE"],["class","","scope","col",4,"ngIf"],["class","slds-hint-parent",4,"ngFor","ngForOf"],["scope","col",1,""],[1,"slds-hint-parent"],["class","slds-required",4,"ngIf"],[1,"slds-required"],[1,"slds-input",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&c.YNc(0,$t,18,3,"ng-container",0),2&e&&c.Q6J("ngIf",t.parameters.length>0)},dependencies:[i.sg,i.O5,n.Fj,n.JJ,n.On,T._],encapsulation:2}),AdministrationApiInspectorMethodParameters})();function Vt(e,t){if(1&e&&(c.TgZ(0,"tr",11)(1,"td")(2,"div",6),c._uU(3),c.qZA()(),c.TgZ(4,"td")(5,"div",6),c._uU(6),c.qZA()()()),2&e){const e=t.$implicit;c.xp6(3),c.Oqu(e.name),c.xp6(3),c.Oqu(e.description)}}function Wt(e,t){if(1&e&&(c.ynx(0),c.TgZ(1,"div",1),c._UZ(2,"system-label",2),c.qZA(),c.TgZ(3,"table",3)(4,"thead")(5,"tr",4)(6,"th",5)(7,"div",6),c._UZ(8,"system-label",7),c.qZA()(),c.TgZ(9,"th",8)(10,"div",6),c._UZ(11,"system-label",9),c.qZA()()()(),c.TgZ(12,"tbody"),c.YNc(13,Vt,7,2,"tr",10),c.qZA()(),c.BQk()),2&e){const e=c.oxw();c.xp6(13),c.Q6J("ngForOf",e.response)}}let es=(()=>{class AdministrationapiinspectorMethodResponses{constructor(e){this.apiinspector=e}ngOnChanges(){this.response=this.apiinspector.getMethodResponses(this.apimethod.route,this.apimethod.method)}}return AdministrationapiinspectorMethodResponses.ɵfac=function(e){return new(e||AdministrationapiinspectorMethodResponses)(c.Y36(Qt))},AdministrationapiinspectorMethodResponses.ɵcmp=c.Xpm({type:AdministrationapiinspectorMethodResponses,selectors:[["administration-api-inspector-method-responses"]],inputs:{apimethod:"apimethod"},features:[c.TTD],decls:1,vars:1,consts:[[4,"ngIf"],[1,"slds-p-around--small","slds-text-heading--label"],["label","LBL_API_RESPONSES"],[1,"slds-table","slds-table--fixed-layout","slds-table_cell-buffer","slds-table_bordered"],[1,"slds-line-height_reset"],["scope","col",2,"width","100px"],[1,"slds-truncate"],["label","LBL_NAME"],["scope","col",1,""],["label","LBL_DESCRIPTION"],["class","slds-hint-parent",4,"ngFor","ngForOf"],[1,"slds-hint-parent"]],template:function(e,t){1&e&&c.YNc(0,Wt,14,1,"ng-container",0),2&e&&c.Q6J("ngIf",t.response.length>0)},dependencies:[i.sg,i.O5,T._],encapsulation:2}),AdministrationapiinspectorMethodResponses})();function ts(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4),c._uU(4),c.qZA()(),c.TgZ(5,"div",5),c._uU(6),c.qZA(),c._UZ(7,"system-utility-icon",6)(8,"system-utility-icon",7)(9,"system-utility-icon",8),c.TgZ(10,"system-utility-icon",9),c.NdJ("click",(function(t){const s=c.CHM(e).$implicit,i=c.oxw();return c.KtG(i.test(s,t))})),c.qZA()(),c.TgZ(11,"div",10)(12,"div",11),c._UZ(13,"system-label",12),c.qZA(),c.TgZ(14,"div"),c._uU(15),c.qZA()(),c._UZ(16,"administration-api-inspector-method-parameters",13)(17,"administration-api-inspector-method-parameters",14)(18,"administration-api-inspector-method-parameters",15)(19,"administration-api-inspector-method-responses",16),c.qZA()}if(2&e){const e=t.$implicit,s=c.oxw();c.xp6(2),c.Q6J("ngStyle",s.apiinspector.getMethodStyle(e.method)),c.xp6(2),c.Oqu(e.method),c.xp6(2),c.Oqu(e.route),c.xp6(1),c.Q6J("colorclass",e.options.validate?"slds-icon-text-success":"slds-icon-text-light"),c.xp6(1),c.Q6J("colorclass",e.options.noAuth?"slds-icon-text-error":"slds-icon-text-light"),c.xp6(1),c.Q6J("colorclass",e.options.adminOnly?"slds-icon-text-error":"slds-icon-text-light"),c.xp6(6),c.Oqu(e.description),c.xp6(1),c.Q6J("apimethod",e),c.xp6(1),c.Q6J("apimethod",e),c.xp6(1),c.Q6J("apimethod",e),c.xp6(1),c.Q6J("apimethod",e)}}let ss=(()=>{class AdministrationApiInspectorMethods{constructor(e,t,s){this.modal=e,this.injector=t,this.apiinspector=s}test(e,t){t.preventDefault(),t.stopPropagation(),this.modal.openModal("AdministrationApiInspectorMethodTest",!0,this.injector).subscribe((t=>{t.instance.apiMethod=e}))}}return AdministrationApiInspectorMethods.ɵfac=function(e){return new(e||AdministrationApiInspectorMethods)(c.Y36(Je.o),c.Y36(c.zs3),c.Y36(Qt))},AdministrationApiInspectorMethods.ɵcmp=c.Xpm({type:AdministrationApiInspectorMethods,selectors:[["administration-api-inspector-methods"]],decls:1,vars:1,consts:[["class","slds-m-around--x-small slds-p-around--none slds-box",4,"ngFor","ngForOf"],[1,"slds-m-around--x-small","slds-p-around--none","slds-box"],[1,"slds-p-around--small","slds-grid","slds-grid--vertical-align-center","slds-p-bottom--small","slds-border--bottom"],[1,"slds-badge","slds-m-right--x-small",3,"ngStyle"],[1,"slds-size--1-of-1","slds-text-align--center"],[1,"slds-truncate","slds-text-heading--small","slds-grow"],["icon","ribbon","size","x-small",1,"slds-p-left--xx-small",3,"colorclass"],["icon","unlock","size","x-small",1,"slds-p-left--xx-small",3,"colorclass"],["icon","user_role","size","x-small",1,"slds-p-left--xx-small",3,"colorclass"],["icon","play","size","x-small",1,"slds-p-left--xx-small","slds-text-link--reset",3,"click"],[1,"slds-p-around--small"],[1,"slds-p-bottom--small","slds-text-heading--small"],["label","LBL_SUMMARY"],["in","path",3,"apimethod"],["in","query",3,"apimethod"],["in","body",3,"apimethod"],[3,"apimethod"]],template:function(e,t){1&e&&c.YNc(0,ts,20,11,"div",0),2&e&&c.Q6J("ngForOf",t.apiinspector.apiMethods)},dependencies:[i.sg,i.PC,T._,M.r,Xt,es],encapsulation:2}),AdministrationApiInspectorMethods})();const is=["administration-api-inspector",""];function ns(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"system-tree",22),c.NdJ("selectedItemChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.selectNode(t))})),c.qZA()}if(2&e){const e=c.oxw();c.Q6J("sourceList",e.apiinspector.apiTree)}}function ls(e,t){1&e&&(c.TgZ(0,"div",23)(1,"div",24),c._UZ(2,"system-spinner")(3,"system-label",25),c.qZA()())}function os(e,t){1&e&&c._UZ(0,"administration-api-inspector-methods")}function as(e,t){1&e&&(c.TgZ(0,"div",23)(1,"system-illustration-no-data"),c._UZ(2,"system-label",26),c.qZA()())}let ds=(()=>{class AdministrationAPIInspector{constructor(e,t,s,i){this.toast=e,this.modal=t,this.injector=s,this.apiinspector=i,this.toggleClassSub=[]}toggleUnauthorized(e){e.preventDefault(),e.stopPropagation(),this.apiinspector.apiFilterUnauthorized=!this.apiinspector.apiFilterUnauthorized}toggleAdminOnly(e){e.preventDefault(),e.stopPropagation(),this.apiinspector.apiFilterAdminOnly=!this.apiinspector.apiFilterAdminOnly}toggleValidatedOnly(e){e.preventDefault(),e.stopPropagation(),this.apiinspector.apiFilterValidatedOnly=!this.apiinspector.apiFilterValidatedOnly}selectNode(e){this.apiinspector.selectAPI(e)}}return AdministrationAPIInspector.ɵfac=function(e){return new(e||AdministrationAPIInspector)(c.Y36(qe.A),c.Y36(Je.o),c.Y36(c.zs3),c.Y36(Qt))},AdministrationAPIInspector.ɵcmp=c.Xpm({type:AdministrationAPIInspector,selectors:[["","administration-api-inspector",""]],features:[c._Bn([Qt])],attrs:is,decls:27,vars:13,consts:[[1,"slds-grid","slds-grid_vertical-align-center","slds-p-around--small","slds-border--bottom"],["icon","apex_plugin"],[1,"slds-text-heading_medium"],["label","LBL_API_INSPECTOR"],[1,"slds-theme--default","slds-grid",3,"system-overlay-loading-spinner"],[1,"slds-size--1-of-3","slds-border--right"],[1,"slds-p-around--x-small","slds-border--bottom"],[1,"slds-grid","slds-grid--vertical-align-center"],["system-placeholder","LBL_FILTER",1,"slds-input",3,"ngModel","ngModelChange"],["icon","unlock","size","x-small",1,"slds-p-left--xx-small",3,"colorclass","click"],["icon","user_role","size","x-small",1,"slds-p-left--xx-small",3,"colorclass","click"],["icon","ribbon","size","x-small",1,"slds-p-left--xx-small",3,"colorclass","click"],["system-to-bottom",""],[3,"sourceList","selectedItemChange",4,"ngIf","ngIfElse"],["treeLoadingSpinner",""],[1,"slds-size--2-of-3"],[1,"slds-p-around--x-small","slds-border--bottom","slds-grid","slds-grid--align-spread","slds-grid--vertical-align-center",2,"min-height","49px"],[1,"slds-text-heading--medium"],[3,"ngModel","ngModelChange"],["label","LBL_INCLUDE_SUBROUTES"],[4,"ngIf","ngIfElse"],["noMethodsAvailable",""],[3,"sourceList","selectedItemChange"],[1,"slds-height_full","slds-align--absolute-center"],[1,"slds-grid","slds-grid--vertical"],["label","LBL_LOADING_ENDPOINTS",1,"slds-p-vertical--small"],["label","LBL_NO_METHODS_FOR_ENDPOINT"]],template:function(e,t){if(1&e&&(c.TgZ(0,"div",0),c._UZ(1,"system-icon",1),c.TgZ(2,"h2",2),c._UZ(3,"system-label",3),c._uU(4),c.qZA()(),c.TgZ(5,"div",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"input",8),c.NdJ("ngModelChange",(function(e){return t.apiinspector.apiFilter=e})),c.qZA(),c.TgZ(10,"system-utility-icon",9),c.NdJ("click",(function(e){return t.toggleUnauthorized(e)})),c.qZA(),c.TgZ(11,"system-utility-icon",10),c.NdJ("click",(function(e){return t.toggleAdminOnly(e)})),c.qZA(),c.TgZ(12,"system-utility-icon",11),c.NdJ("click",(function(e){return t.toggleValidatedOnly(e)})),c.qZA()()(),c.TgZ(13,"div",12),c.YNc(14,ns,1,1,"system-tree",13),c.YNc(15,ls,4,0,"ng-template",null,14,c.W1O),c.qZA()(),c.TgZ(17,"div",15)(18,"div",16)(19,"span",17),c._uU(20),c.qZA(),c.TgZ(21,"system-checkbox",18),c.NdJ("ngModelChange",(function(e){return t.apiinspector.apiSubMethods=e})),c._UZ(22,"system-label",19),c.qZA()(),c.TgZ(23,"div",12),c.YNc(24,os,1,0,"administration-api-inspector-methods",20),c.YNc(25,as,3,0,"ng-template",null,21,c.W1O),c.qZA()()()),2&e){const e=c.MAs(16),s=c.MAs(26);c.xp6(4),c.hij(" (",t.apiinspector.apiEndpoints.length,")"),c.xp6(1),c.Q6J("system-overlay-loading-spinner",t.apiinspector.loading),c.xp6(4),c.Q6J("ngModel",t.apiinspector.apiFilter),c.xp6(1),c.Q6J("colorclass",t.apiinspector.apiFilterUnauthorized?"slds-icon-text-warning":"slds-icon-text-light"),c.xp6(1),c.Q6J("colorclass",t.apiinspector.apiFilterAdminOnly?"slds-icon-text-warning":"slds-icon-text-light"),c.xp6(1),c.Q6J("colorclass",t.apiinspector.apiFilterValidatedOnly?"slds-icon-text-warning":"slds-icon-text-light"),c.xp6(2),c.Q6J("ngIf",!t.apiinspector.loading)("ngIfElse",e),c.xp6(6),c.AsE("",null==t.apiinspector.selectedAPI?null:t.apiinspector.selectedAPI.route," (",t.apiinspector.apiMethods.length,")"),c.xp6(1),c.Q6J("ngModel",t.apiinspector.apiSubMethods),c.xp6(3),c.Q6J("ngIf",t.apiinspector.apiMethods.length>0)("ngIfElse",s)}},dependencies:[i.O5,n.Fj,n.JJ,n.On,O.U,L.f,Yt.t,T._,qt.W,zt.O,M.r,A.H,v._,Pt.A,ss],encapsulation:2}),AdministrationAPIInspector})(),rs=(()=>{class AdministrationAPIInspectorDetails{constructor(){this.endpoint={}}close(){this.self.destroy()}}return AdministrationAPIInspectorDetails.ɵfac=function(e){return new(e||AdministrationAPIInspectorDetails)},AdministrationAPIInspectorDetails.ɵcmp=c.Xpm({type:AdministrationAPIInspectorDetails,selectors:[["administration-api-inspector-details"]],features:[c._Bn([Qt])],decls:8,vars:2,consts:[[3,"close"],["label","LBL_API_ENDPOINT"],[3,"grow"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CLOSE"]],template:function(e,t){1&e&&(c.TgZ(0,"system-modal")(1,"system-modal-header",0),c.NdJ("close",(function(){return t.close()})),c._UZ(2,"system-label",1),c.qZA(),c.TgZ(3,"system-modal-content",2),c._uU(4),c.qZA(),c.TgZ(5,"system-modal-footer")(6,"button",3),c.NdJ("click",(function(){return t.close()})),c._UZ(7,"system-label",4),c.qZA()()()),2&e&&(c.xp6(3),c.Q6J("grow",!0),c.xp6(1),c.hij(" ",t.endpoint.method," "))},dependencies:[T._,dt.j,rt.x,ct.p,gt.y],encapsulation:2}),AdministrationAPIInspectorDetails})();var cs=s(2067),gs=s(1604);const us=["modalcontent"],ms=["tabcontent"],ps=function(e){return{"slds-is-active":e}},hs=function(e){return{"slds-hide":e}};let bs=(()=>{class AdministrationApiInspectorMethodTest{constructor(e,t,s){this.backend=e,this.libloader=t,this.apiInspector=s,this.activetab="parameters",this.executing=!1,this.parameterCollector={},this.libloader.loadLib("jsonbeautify")}ngAfterViewInit(){let e=this.modalcontent.element.nativeElement.getBoundingClientRect(),t=this.tabcontent.element.nativeElement.getBoundingClientRect();this.tabHeigth=e.height-t.top+e.top}get tabStyle(){return{height:this.tabHeigth+"px"}}test(){switch(this.executing=!0,this.response=void 0,this.activetab="response",this.apiMethod.method){case"get":this.backend.getRequest(this.buildRoute(),this.buildParams()).subscribe((e=>{this.response=js_beautify(JSON.stringify(e)),this.executing=!1}),(e=>{this.response=js_beautify(JSON.stringify(e))}));break;case"post":this.backend.postRequest(this.buildRoute(),this.buildParams(),this.buildBody()).subscribe((e=>{this.response=js_beautify(JSON.stringify(e)),this.executing=!1}),(e=>{this.response=js_beautify(JSON.stringify(e))}))}}checkParameters(){return!0}buildRoute(){let e=this.apiMethod.route.substring(1),t=this.apiInspector.getMethodParameters(this.apiMethod.route,this.apiMethod.method,"path");for(let s of t)e=e.replace(`{${s.name}}`,this.parameterCollector[s.name]);return e}buildParams(){let e={},t=this.apiInspector.getMethodParameters(this.apiMethod.route,this.apiMethod.method,"query");for(let s of t)e[s.name]=this.parameterCollector[s.name];return e}buildBody(){let e={},t=this.apiInspector.getMethodParameters(this.apiMethod.route,this.apiMethod.method,"body");for(let s of t)e[s.name]=this.parameterCollector[s.name];return e}close(){this.self.destroy()}}return AdministrationApiInspectorMethodTest.ɵfac=function(e){return new(e||AdministrationApiInspectorMethodTest)(c.Y36(u.y),c.Y36(cs.$),c.Y36(Qt))},AdministrationApiInspectorMethodTest.ɵcmp=c.Xpm({type:AdministrationApiInspectorMethodTest,selectors:[["administration-api-inspector-method-test"]],viewQuery:function(e,t){if(1&e&&(c.Gf(us,7,c.s_b),c.Gf(ms,7,c.s_b)),2&e){let e;c.iGM(e=c.CRH())&&(t.modalcontent=e.first),c.iGM(e=c.CRH())&&(t.tabcontent=e.first)}},decls:31,vars:24,consts:[[3,"close"],[1,"slds-badge",3,"ngStyle"],[1,"slds-size--1-of-1","slds-text-align--center"],["margin","none",3,"grow"],["modalcontent",""],[1,"slds-tabs_default"],["role","tablist",1,"slds-tabs_default__nav"],["role","presentation",1,"slds-tabs_default__item",3,"ngClass"],["role","tab",1,"slds-tabs_default__link",3,"click"],["label","LBL_PARAMETERS"],["title","Item Three","role","presentation",1,"slds-tabs_default__item",3,"ngClass"],["label","LBL_RESPONSE"],[1,"slds-scrollable",3,"ngStyle"],["tabcontent",""],["role","tabpanel",1,"slds-tabs_default__content",3,"ngClass"],["in","path",3,"apimethod","parameterCollector"],["in","query",3,"apimethod","parameterCollector"],["in","body",3,"apimethod","parameterCollector"],[1,"slds-p-horizontal--x-small",2,"white-space","pre-wrap"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CLOSE"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_TEST"]],template:function(e,t){1&e&&(c.TgZ(0,"system-modal")(1,"system-modal-header",0),c.NdJ("close",(function(){return t.close()})),c._uU(2),c.TgZ(3,"system-modal-header-right")(4,"div",1)(5,"div",2),c._uU(6),c.qZA()()()(),c.TgZ(7,"system-modal-content",3,4)(9,"div",5)(10,"ul",6)(11,"li",7)(12,"a",8),c.NdJ("click",(function(){return t.activetab="parameters"})),c._UZ(13,"system-label",9),c.qZA()(),c.TgZ(14,"li",10)(15,"a",8),c.NdJ("click",(function(){return t.activetab="response"})),c._UZ(16,"system-label",11),c.qZA()()(),c.TgZ(17,"div",12,13)(19,"div",14),c._UZ(20,"administration-api-inspector-method-parameters",15)(21,"administration-api-inspector-method-parameters",16)(22,"administration-api-inspector-method-parameters",17),c.qZA(),c.TgZ(23,"div",14)(24,"pre",18),c._uU(25),c.qZA()()()()(),c.TgZ(26,"system-modal-footer")(27,"button",19),c.NdJ("click",(function(){return t.close()})),c._UZ(28,"system-label",20),c.qZA(),c.TgZ(29,"button",21),c.NdJ("click",(function(){return t.test()})),c._UZ(30,"system-label",22),c.qZA()()()),2&e&&(c.xp6(2),c.hij(" ",t.apiMethod.route," "),c.xp6(2),c.Q6J("ngStyle",t.apiInspector.getMethodStyle(t.apiMethod.method)),c.xp6(2),c.Oqu(t.apiMethod.method),c.xp6(1),c.Q6J("grow",!0),c.xp6(4),c.Q6J("ngClass",c.VKq(16,ps,"parameters"==t.activetab)),c.xp6(3),c.Q6J("ngClass",c.VKq(18,ps,"response"==t.activetab)),c.xp6(3),c.Q6J("ngStyle",t.tabStyle),c.xp6(2),c.Q6J("ngClass",c.VKq(20,hs,"parameters"!=t.activetab)),c.xp6(1),c.Q6J("apimethod",t.apiMethod)("parameterCollector",t.parameterCollector),c.xp6(1),c.Q6J("apimethod",t.apiMethod)("parameterCollector",t.parameterCollector),c.xp6(1),c.Q6J("apimethod",t.apiMethod)("parameterCollector",t.parameterCollector),c.xp6(1),c.Q6J("ngClass",c.VKq(22,hs,"response"!=t.activetab)),c.xp6(2),c.Oqu(t.response))},dependencies:[i.mk,i.PC,T._,dt.j,rt.x,ct.p,gt.y,gs.O,Xt],encapsulation:2}),AdministrationApiInspectorMethodTest})();var fs=s(2422),_s=s(3917),Zs=s(4994),As=s(4846),ys=s(3333),vs=s(5982),xs=s(151);function Ls(e,t){if(1&e&&(c.TgZ(0,"option",44),c._UZ(1,"system-label-modulename",45),c.qZA()),2&e){const e=t.$implicit;c.Q6J("value",e),c.xp6(1),c.Q6J("module",e)}}function Ts(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"tr")(1,"td",46),c._UZ(2,"system-icon",47),c.qZA(),c.TgZ(3,"td",48)(4,"div",49),c._uU(5),c.qZA()(),c.TgZ(6,"td")(7,"div",49),c._uU(8),c.qZA()(),c.TgZ(9,"td")(10,"div",49),c._uU(11),c.qZA()(),c.TgZ(12,"td")(13,"div",49),c._uU(14),c.qZA()(),c.TgZ(15,"td",50)(16,"button",51),c.NdJ("click",(function(){const t=c.CHM(e).$implicit,s=c.oxw();return c.KtG(s.recoverRecord(t))})),c._UZ(17,"system-button-icon",52),c.qZA()()()}if(2&e){const e=t.$implicit;c.xp6(2),c.Q6J("module",e.recordmodule),c.xp6(3),c.Oqu(e.recordmodule),c.xp6(3),c.Oqu(e.recordname),c.xp6(3),c.Oqu(e.date_deleted),c.xp6(3),c.Oqu(e.user_name),c.xp6(3),c.Q6J("icon","undelete")}}function Ms(e,t){1&e&&(c.TgZ(0,"div",53),c._UZ(1,"system-spinner"),c.qZA())}function Js(e,t){1&e&&(c.TgZ(0,"div",53)(1,"h2",54),c._UZ(2,"system-label",55),c.qZA()())}let qs=(()=>{class AdministrationSysTrashcanManager{constructor(e,t,s,i,n,l){this.metadata=e,this.modal=t,this.backend=s,this.language=i,this.userpreferences=n,this.footer=l,this.totalCount=0,this.records=[],this.loading=!1}set searchTerm(e){this._searchTerm=e,window.clearTimeout(this.searchTimeout),this.searchTimeout=window.setTimeout((()=>this.reload()),600)}get searchTerm(){return this._searchTerm}set searchModule(e){this._searchModule=e,this.reload()}get searchModule(){return this._searchModule}set filterUser(e){const t=e?.split("::");this.user=t?{id:t[0],name:t[1]}:void 0,this.reload()}get filterUser(){return this.user?this.user.id+"::"+this.user.name:void 0}ngOnInit(){this.getEntries(),this.modules=this.metadata.getModules().sort(((e,t)=>this.language.getModuleName(e).localeCompare(this.language.getModuleName(t))))}getEntries(){this.loading=!0;const e={limit:50,offset:this.records.length,module:this.searchModule,searchTerm:this.searchTerm,user:this.user?.id};this.backend.getRequest("admin/systrashcan",e).subscribe((e=>{e&&(e.records.forEach((e=>e.date_deleted=this.userpreferences.formatDateTime(moment(e.date_deleted)))),this.totalCount=e.count,this.records=this.records.concat(e.records),this.loadDate=this.userpreferences.formatDateTime(moment()),this.loading=!1)}))}reload(){this.records=[],this.getEntries()}recoverRecord(e){const t=this.modal.await(this.language.getLabel("LBL_LOADING"));this.backend.getRequest("admin/systrashcan/related/"+e.transactionid+"/"+e.recordid).subscribe((s=>{t.next(!0),t.complete(),this.modal.openModal("AdministrationSysTrashcanRecover").subscribe((t=>{t.instance.record=e,t.instance.relatedRecords=s,t.instance.hasRelated=s.length>0,t.instance.recovered.subscribe((t=>{t&&(this.records=this.records.filter((t=>t.id!=e.id)))}))}))}))}loadMore(){this.loading||this.records.length>=this.totalCount||this.getEntries()}clearSearchTerm(){this.searchTerm=void 0,this.reload()}}return AdministrationSysTrashcanManager.ɵfac=function(e){return new(e||AdministrationSysTrashcanManager)(c.Y36(b.Pu),c.Y36(Je.o),c.Y36(u.y),c.Y36(p.d),c.Y36(fs.z),c.Y36(_s.M))},AdministrationSysTrashcanManager.ɵcmp=c.Xpm({type:AdministrationSysTrashcanManager,selectors:[["administration-systrashcan-manager"]],decls:57,vars:11,consts:[[1,"slds-grid","slds-grid--vertical-align-end","slds-page-header"],[1,"slds-media","slds-m-right--medium"],[1,"slds-p-horizontal--x-small"],["icon","recall"],[1,"slds-media__body"],[1,"slds-page-header__title","slds-truncate","slds-align-middle"],["label","LBL_TRASHCAN_MANAGER"],[1,"slds-text-body_small","slds-line-height_reset","slds-p-vertical--xx-small"],[1,"slds-m-right--xx-small"],["label","LBL_FROM"],[1,"slds-form-element","slds-p-right--x-small","slds-grow"],[1,"slds-form-element__control","slds-input-has-icon","slds-input-has-icon--left-right"],["icon","search","size","x-small","addclasses","slds-icon slds-input__icon slds-input__icon_left"],["system-autofocus","","type","search","system-placeholder","LBL_SEARCH",1,"slds-input","slds-lookup__search-input","slds-size--1-of-1",3,"ngModel","ngModelChange","keyup.enter"],[1,"slds-button","slds-button_icon","slds-input__icon","slds-input__icon_right",3,"disabled","click"],["icon","clear"],[1,"slds-form-element","slds-m-right--x-small"],["for","moduleselect",1,"slds-form-element__label"],["label","LBL_MODULE"],[1,"slds-form-element__control","slds-col"],[1,"slds-select_container"],["id","moduleselect",1,"slds-select",3,"ngModel","ngModelChange"],["value","","selected",""],["label","LBL_SELECT"],[3,"value",4,"ngFor","ngForOf"],[1,"slds-m-right--small","slds-size--1-of-8"],[1,"slds-form-element__label"],["label","LBL_USER"],["module","Users","nameField","user_name",3,"ngModel","ngModelChange"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_REFRESH"],[3,"system-to-bottom"],[1,"slds-table","slds-table_bordered","slds-table--header-fixed","slds-table--fixed-layout"],[1,"slds-text-title_caps"],[1,"slds-cell-shrink"],["scope","col"],[1,"slds-truncate","slds-p-vertical--x-small"],["label","LBL_OBJECT"],["label","LBL_NAME"],["label","LBL_DATE_DELETED"],["label","LBL_DELETED_BY"],["scope","col",1,"slds-cell-shrink"],[4,"ngFor","ngForOf"],["class","slds-p-around--medium slds-align--absolute-center",4,"ngIf"],[3,"value"],[3,"module"],["role","gridcell",1,"slds-cell-shrink"],["size","small",3,"module"],["scope","row"],[1,"slds-truncate"],["role","gridcell"],["system-title","LBL_RESTORE",1,"slds-button","slds-button_icon","slds-button_icon-border-filled","slds-button_icon-x-small",3,"click"],[3,"icon"],[1,"slds-p-around--medium","slds-align--absolute-center"],[1,"slds-text-heading--small"],["label","LBL_NO_RECORDS_FOUND"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0)(1,"div",1)(2,"div",2),c._UZ(3,"system-action-icon",3),c.qZA(),c.TgZ(4,"div",4)(5,"h1",5),c._UZ(6,"system-label",6),c.qZA(),c.TgZ(7,"div",7)(8,"span",8),c._uU(9),c._UZ(10,"system-label",9),c._uU(11),c.qZA(),c._uU(12),c.qZA()()(),c.TgZ(13,"div",10)(14,"div",11),c._UZ(15,"system-utility-icon",12),c.TgZ(16,"input",13),c.NdJ("ngModelChange",(function(e){return t.searchTerm=e}))("keyup.enter",(function(){return t.reload()})),c.qZA(),c.TgZ(17,"button",14),c.NdJ("click",(function(){return t.clearSearchTerm()})),c._UZ(18,"system-button-icon",15),c.qZA()()(),c.TgZ(19,"div",16)(20,"label",17),c._UZ(21,"system-label",18),c.qZA(),c.TgZ(22,"div",19)(23,"div",20)(24,"select",21),c.NdJ("ngModelChange",(function(e){return t.searchModule=e})),c.TgZ(25,"option",22),c._UZ(26,"system-label",23),c.qZA(),c.YNc(27,Ls,2,2,"option",24),c.qZA()()()(),c.TgZ(28,"div",25)(29,"label",26),c._UZ(30,"system-label",27),c.qZA(),c.TgZ(31,"system-input-relate",28),c.NdJ("ngModelChange",(function(e){return t.filterUser=e})),c.qZA()(),c.TgZ(32,"div")(33,"button",29),c.NdJ("click",(function(){return t.reload()})),c._UZ(34,"system-label",30),c.qZA()()(),c.TgZ(35,"div",31),c.NdJ("system-to-bottom",(function(){return t.loadMore()})),c.TgZ(36,"table",32)(37,"thead")(38,"tr",33),c._UZ(39,"th",34),c.TgZ(40,"th",35)(41,"div",36),c._UZ(42,"system-label",37),c.qZA()(),c.TgZ(43,"th",35)(44,"div",36),c._UZ(45,"system-label",38),c.qZA()(),c.TgZ(46,"th",35)(47,"div",36),c._UZ(48,"system-label",39),c.qZA()(),c.TgZ(49,"th",35)(50,"div",36),c._UZ(51,"system-label",40),c.qZA()(),c._UZ(52,"th",41),c.qZA()(),c.TgZ(53,"tbody"),c.YNc(54,Ts,18,6,"tr",42),c.qZA()(),c.YNc(55,Ms,2,0,"div",43),c.YNc(56,Js,3,0,"div",43),c.qZA()),2&e&&(c.xp6(9),c.hij("",t.records.length," "),c.xp6(2),c.hij(" ",t.totalCount,""),c.xp6(1),c.hij(" ",t.loadDate," "),c.xp6(4),c.Q6J("ngModel",t.searchTerm),c.xp6(1),c.Q6J("disabled",!t.searchTerm),c.xp6(7),c.Q6J("ngModel",t.searchModule),c.xp6(3),c.Q6J("ngForOf",t.modules),c.xp6(4),c.Q6J("ngModel",t.filterUser),c.xp6(23),c.Q6J("ngForOf",t.records),c.xp6(1),c.Q6J("ngIf",t.loading),c.xp6(1),c.Q6J("ngIf",!t.loading&&0==t.records.length))},dependencies:[i.sg,i.O5,n.YN,n.Kr,n.Fj,n.EJ,n.JJ,n.On,Zs.g,x.J,L.f,As.z,T._,ys.M,qt.W,M.r,vs.m,A.H,Pt.A,xs.S],encapsulation:2}),AdministrationSysTrashcanManager})();function Es(e,t){if(1&e&&(c.TgZ(0,"tr")(1,"td",19),c._UZ(2,"system-icon",20),c.qZA(),c.TgZ(3,"td",21)(4,"div",16),c._uU(5),c.qZA()(),c.TgZ(6,"td")(7,"div",16),c._uU(8),c.qZA()(),c.TgZ(9,"td")(10,"div",16),c._uU(11),c.qZA()()()),2&e){const e=t.$implicit,s=c.oxw(2);c.xp6(2),c.Q6J("module",s.getModule(e.linkmodule)),c.xp6(3),c.Oqu(e.linkmodule),c.xp6(3),c.Oqu(e.recordname),c.xp6(3),c.Oqu(e.linkname)}}function Cs(e,t){if(1&e&&(c.TgZ(0,"table",13)(1,"thead")(2,"tr",14)(3,"th",15)(4,"div",16),c._uU(5,"Object"),c.qZA()(),c.TgZ(6,"th",17)(7,"div",16),c._uU(8,"Name"),c.qZA()(),c.TgZ(9,"th",17)(10,"div",16),c._uU(11,"link"),c.qZA()()()(),c.TgZ(12,"tbody"),c.YNc(13,Es,12,4,"tr",18),c.qZA()()),2&e){const e=c.oxw();c.xp6(13),c.Q6J("ngForOf",e.relatedRecords)}}function Us(e,t){1&e&&(c.TgZ(0,"div",22)(1,"h2",23),c._uU(2,"no related records found"),c.qZA()())}const Ns=function(e){return{"slds-hide":e}};let ks=(()=>{class AdministrationSysTrashcanRecover{constructor(e,t,s,i){this.metadata=e,this.backend=t,this.language=s,this.toast=i,this.record={},this.self={},this.relatedRecords=[],this.loading=!0,this.recoverrelated=!1,this.recovering=!1,this.recovered=new c.vpe}ngOnInit(){this.backend.getRequest("admin/systrashcan/related/"+this.record.transactionid+"/"+this.record.recordid).subscribe((e=>{this.relatedRecords=e,this.relatedRecords.length>0&&(this.recoverrelated=!0),this.loading=!1}),(e=>{this.loading=!1}))}close(){this.recovered.emit(!1),this.self.destroy()}getModule(e){return this.metadata.getModuleFromSingular(e)}get recorverDisabled(){return 0==this.relatedRecords.length}doRecover(){this.recovering=!0,this.backend.postRequest("admin/systrashcan/recover/"+this.record.id,{recoverrelated:this.recoverrelated}).subscribe((e=>{this.toast.sendToast("record "+this.record.recordname+" recovered"),this.recovered.emit(!0),this.self.destroy()}))}}return AdministrationSysTrashcanRecover.ɵfac=function(e){return new(e||AdministrationSysTrashcanRecover)(c.Y36(b.Pu),c.Y36(u.y),c.Y36(p.d),c.Y36(qe.A))},AdministrationSysTrashcanRecover.ɵcmp=c.Xpm({type:AdministrationSysTrashcanRecover,selectors:[["ng-component"]],inputs:{record:"record"},decls:22,vars:9,consts:[[3,"close"],["margin","none"],["class","slds-table slds-table_bordered slds-table_cell-buffer",4,"ngIf","ngIfElse"],["norelatedrecords",""],[1,"slds-grid","slds-grid--vertical-align-center","slds-grid--align-spread"],[1,"slds-form-element__control",3,"ngClass"],[1,"slds-checkbox"],["type","checkbox","id","recoverrelated",3,"ngModel","ngModelChange"],["for","recoverrelated",1,"slds-checkbox__label"],[1,"slds-checkbox_faux"],[1,"slds-form-element__label"],[1,"slds-button","slds-button--neutral",3,"click"],[1,"slds-button","slds-button--brand",3,"disabled","click"],[1,"slds-table","slds-table_bordered","slds-table_cell-buffer"],[1,"slds-text-title_caps"],["scope","col","colspan","2"],[1,"slds-truncate"],["scope","col"],[4,"ngFor","ngForOf"],["role","gridcell",1,"slds-cell-shrink"],["size","small",3,"module"],["scope","row"],[1,"slds-p-around--medium","slds-align--absolute-center",2,"height","100%"],[1,"slds-text-heading--small"]],template:function(e,t){if(1&e&&(c.TgZ(0,"system-modal")(1,"system-modal-header",0),c.NdJ("close",(function(){return t.close()})),c._uU(2),c.qZA(),c.TgZ(3,"system-modal-content",1),c.YNc(4,Cs,14,1,"table",2),c.YNc(5,Us,3,0,"ng-template",null,3,c.W1O),c.qZA(),c.TgZ(7,"system-modal-footer")(8,"div",4)(9,"div")(10,"div",5)(11,"span",6)(12,"input",7),c.NdJ("ngModelChange",(function(e){return t.recoverrelated=e})),c.qZA(),c.TgZ(13,"label",8),c._UZ(14,"span",9),c.TgZ(15,"span",10),c._uU(16,"recover Related"),c.qZA()()()()(),c.TgZ(17,"div")(18,"button",11),c.NdJ("click",(function(){return t.close()})),c._uU(19,"Cancel"),c.qZA(),c.TgZ(20,"button",12),c.NdJ("click",(function(){return t.doRecover()})),c._uU(21,"Recover "),c.qZA()()()()()),2&e){const e=c.MAs(6);c.xp6(2),c.AsE("Recover ",t.record.recordmodule," ",t.record.recordname,""),c.xp6(2),c.Q6J("ngIf",t.relatedRecords.length>0)("ngIfElse",e),c.xp6(6),c.Q6J("ngClass",c.VKq(7,Ns,t.recorverDisabled)),c.xp6(2),c.Q6J("ngModel",t.recoverrelated),c.xp6(8),c.Q6J("disabled",t.loading)}},dependencies:[i.mk,i.sg,i.O5,n.Wl,n.JJ,n.On,L.f,dt.j,rt.x,ct.p,gt.y],encapsulation:2}),AdministrationSysTrashcanRecover})(),Ss=(()=>{class AdministrationDictRepairItem{constructor(e,t,s,i,n){this.backend=e,this.toast=t,this.language=s,this.modal=i,this.injector=n,this.sql=[]}executeDB(){let e=this.modal.await(this.language.getLabel("LBL_LOADING"));this.backend.getRequest("admin/repair/sql").subscribe((t=>{e.emit(!0),this.sql=t.sql,this.wholeSQL=t.wholeSQL,t&&this.modal.openModal("AdministrationDictRepairModal",!0,this.injector).subscribe((e=>{e.instance.sql=this.sql,e.instance.wholeSQL=this.wholeSQL}))}))}}return AdministrationDictRepairItem.ɵfac=function(e){return new(e||AdministrationDictRepairItem)(c.Y36(u.y),c.Y36(qe.A),c.Y36(p.d),c.Y36(Je.o),c.Y36(c.zs3))},AdministrationDictRepairItem.ɵcmp=c.Xpm({type:AdministrationDictRepairItem,selectors:[["administration-dict-repair-item"]],decls:6,vars:0,consts:[[1,"slds-grid","slds-grid--vertical-align-center","slds-grid--align-spread","slds-p-vertical--xx-small","slds-border--bottom"],["icon","custom_apps","size","x-small"],["label","LBL_REPAIR_DATABASE",1,"slds-p-horizontal--x-small"],["label","LBL_REPAIR_DATABASE","length","long",1,"slds-grow"],[1,"slds-button","slds-button--neutral","slds-button--small",3,"click"],["label","LBL_EXECUTE"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c._UZ(1,"system-utility-icon",1)(2,"system-label",2)(3,"system-label",3),c.TgZ(4,"button",4),c.NdJ("click",(function(){return t.executeDB()})),c._UZ(5,"system-label",5),c.qZA()())},dependencies:[T._,M.r],encapsulation:2}),AdministrationDictRepairItem})(),Fs=(()=>{class AdministrationDictRepairLanguage{constructor(e,t,s,i){this.backend=e,this.toast=t,this.language=s,this.modal=i,this.loaderHandler=new Ae.x}executeLG(){let e=this.modal.await(this.language.getLabel("LBL_LOADING"));this.backend.getRequest("admin/repair/language").subscribe((t=>{e.emit(!0),t.response?(this.language.getLanguage(this.loaderHandler),this.toast.sendToast(this.language.getLabel("LBL_LANGUAGES_REPAIRED"),"success")):this.toast.sendToast(this.language.getLabel("LBL_ERROR"),"error")}))}}return AdministrationDictRepairLanguage.ɵfac=function(e){return new(e||AdministrationDictRepairLanguage)(c.Y36(u.y),c.Y36(qe.A),c.Y36(p.d),c.Y36(Je.o))},AdministrationDictRepairLanguage.ɵcmp=c.Xpm({type:AdministrationDictRepairLanguage,selectors:[["administration-dict-repair-language"]],decls:6,vars:0,consts:[[1,"slds-grid","slds-grid--vertical-align-center","slds-grid--align-spread","slds-p-vertical--xx-small","slds-border--bottom"],["icon","custom_apps","size","x-small"],["label","LBL_REPAIR_LANGUAGE",1,"slds-p-horizontal--x-small"],["label","LBL_REPAIR_LANGUAGE","length","long",1,"slds-grow"],[1,"slds-button","slds-button--neutral","slds-button--small",3,"click"],["label","LBL_EXECUTE"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c._UZ(1,"system-utility-icon",1)(2,"system-label",2)(3,"system-label",3),c.TgZ(4,"button",4),c.NdJ("click",(function(){return t.executeLG()})),c._UZ(5,"system-label",5),c.qZA()())},dependencies:[T._,M.r],encapsulation:2}),AdministrationDictRepairLanguage})(),Rs=(()=>{class AdministrationDictRepairCache{constructor(e,t,s,i){this.backend=e,this.toast=t,this.language=s,this.modal=i}executeRepairCache(){let e=this.modal.await(this.language.getLabel("LBL_LOADING"));this.backend.getRequest("admin/repair/cache").subscribe((t=>{e.emit(!0),t?this.toast.sendToast(this.language.getLabel("LBL_CACHE_REPAIRED"),"success"):this.toast.sendToast(this.language.getLabel("LBL_ERROR"),"error")}))}executeRepairCacheDb(){let e=this.modal.await(this.language.getLabel("LBL_LOADING"));this.backend.getRequest("admin/repair/cachedb").subscribe((t=>{e.emit(!0),t?this.toast.sendToast(this.language.getLabel("LBL_CACHE_REPAIRED"),"success"):this.toast.sendToast(this.language.getLabel("LBL_ERROR"),"error")}))}}return AdministrationDictRepairCache.ɵfac=function(e){return new(e||AdministrationDictRepairCache)(c.Y36(u.y),c.Y36(qe.A),c.Y36(p.d),c.Y36(Je.o))},AdministrationDictRepairCache.ɵcmp=c.Xpm({type:AdministrationDictRepairCache,selectors:[["administration-dict-repair-cache"]],decls:6,vars:0,consts:[[1,"slds-grid","slds-grid--vertical-align-center","slds-grid--align-spread","slds-p-vertical--xx-small","slds-border--bottom"],["icon","custom_apps","size","x-small"],["label","LBL_REPAIR_CACHE",1,"slds-p-horizontal--x-small"],["label","LBL_REPAIR_CACHE","length","long",1,"slds-grow"],[1,"slds-button","slds-button--neutral","slds-button--small",3,"click"],["label","LBL_EXECUTE"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c._UZ(1,"system-utility-icon",1)(2,"system-label",2)(3,"system-label",3),c.TgZ(4,"button",4),c.NdJ("click",(function(){return t.executeRepairCacheDb()})),c._UZ(5,"system-label",5),c.qZA()())},dependencies:[T._,M.r],encapsulation:2}),AdministrationDictRepairCache})(),Is=(()=>{class AdministrationDictRepairResetCache{constructor(e,t,s,i){this.backend=e,this.toast=t,this.language=s,this.modal=i}executeRepairResetCache(){let e=this.modal.await(this.language.getLabel("LBL_LOADING"));this.backend.deleteRequest("system/cache").subscribe((t=>{e.emit(!0),t?this.toast.sendToast(this.language.getLabel("LBL_CACHE_RESET"),"success"):this.toast.sendToast(this.language.getLabel("LBL_ERROR"),"error")}))}}return AdministrationDictRepairResetCache.ɵfac=function(e){return new(e||AdministrationDictRepairResetCache)(c.Y36(u.y),c.Y36(qe.A),c.Y36(p.d),c.Y36(Je.o))},AdministrationDictRepairResetCache.ɵcmp=c.Xpm({type:AdministrationDictRepairResetCache,selectors:[["administration-dict-repairreset-cache"]],decls:6,vars:0,consts:[[1,"slds-grid","slds-grid--vertical-align-center","slds-grid--align-spread","slds-p-vertical--xx-small","slds-border--bottom"],["icon","custom_apps","size","x-small"],["label","LBL_RESET_CACHE",1,"slds-p-horizontal--x-small"],["label","LBL_RESET_CACHE","length","long",1,"slds-grow"],[1,"slds-button","slds-button--neutral","slds-button--small",3,"click"],["label","LBL_EXECUTE"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c._UZ(1,"system-utility-icon",1)(2,"system-label",2)(3,"system-label",3),c.TgZ(4,"button",4),c.NdJ("click",(function(){return t.executeRepairResetCache()})),c._UZ(5,"system-label",5),c.qZA()())},dependencies:[T._,M.r],encapsulation:2}),AdministrationDictRepairResetCache})(),ws=(()=>{class AdministrationDictRepairDbColumns{constructor(e,t,s,i,n){this.backend=e,this.toast=t,this.language=s,this.modal=i,this.injector=n}executeRepairDbColumns(){this.modal.openModal("AdministrationDictRepairDbColumnsModal",!0,this.injector)}}return AdministrationDictRepairDbColumns.ɵfac=function(e){return new(e||AdministrationDictRepairDbColumns)(c.Y36(u.y),c.Y36(qe.A),c.Y36(p.d),c.Y36(Je.o),c.Y36(c.zs3))},AdministrationDictRepairDbColumns.ɵcmp=c.Xpm({type:AdministrationDictRepairDbColumns,selectors:[["administration-dict-repair-db-columns"]],decls:6,vars:0,consts:[[1,"slds-grid","slds-grid--vertical-align-center","slds-grid--align-spread","slds-p-vertical--xx-small","slds-border--bottom"],["icon","custom_apps","size","x-small"],["label","LBL_REPAIR_DBCOLUMNS",1,"slds-p-horizontal--x-small"],["label","LBL_REPAIR_DBCOLUMNS_DESC","length","long",1,"slds-grow"],[1,"slds-button","slds-button--neutral","slds-button--small",3,"click"],["label","LBL_EXECUTE"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c._UZ(1,"system-utility-icon",1)(2,"system-label",2)(3,"system-label",3),c.TgZ(4,"button",4),c.NdJ("click",(function(){return t.executeRepairDbColumns()})),c._UZ(5,"system-label",5),c.qZA()())},dependencies:[T._,M.r],encapsulation:2}),AdministrationDictRepairDbColumns})(),Ds=(()=>{class AdministrationDictRepairConvertDBCharset{constructor(e,t){this.modal=e,this.injector=t}openModal(){this.modal.openModal("AdministrationDictRepairConvertDBCharsetModal",!0,this.injector)}}return AdministrationDictRepairConvertDBCharset.ɵfac=function(e){return new(e||AdministrationDictRepairConvertDBCharset)(c.Y36(Je.o),c.Y36(c.zs3))},AdministrationDictRepairConvertDBCharset.ɵcmp=c.Xpm({type:AdministrationDictRepairConvertDBCharset,selectors:[["administration-dict-repair-convert-db-charset"]],decls:6,vars:0,consts:[[1,"slds-grid","slds-grid--vertical-align-center","slds-grid--align-spread","slds-p-vertical--xx-small","slds-border--bottom"],["icon","custom_apps","size","x-small"],["label","LBL_CONVERT_DB_CHARSET",1,"slds-p-horizontal--x-small"],["label","LBL_CONVERT_DB_CHARSET","length","long",1,"slds-grow"],[1,"slds-button","slds-button--neutral","slds-button--small",3,"click"],["label","LBL_EXECUTE"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c._UZ(1,"system-utility-icon",1)(2,"system-label",2)(3,"system-label",3),c.TgZ(4,"button",4),c.NdJ("click",(function(){return t.openModal()})),c._UZ(5,"system-label",5),c.qZA()())},dependencies:[T._,M.r],encapsulation:2}),AdministrationDictRepairConvertDBCharset})(),Os=(()=>{class AdministrationDictRepairCustomEnum{constructor(e,t,s,i){this.backend=e,this.toast=t,this.language=s,this.modal=i}repair(){let e=this.modal.await(this.language.getLabel("LBL_LOADING"));this.backend.postRequest("admin/repair/custom/enum").subscribe((t=>{e.emit(!0),t?this.toast.sendToast(this.language.getLabel("LBL_CACHE_REPAIRED"),"success"):this.toast.sendToast(this.language.getLabel("LBL_ERROR"),"error")}))}}return AdministrationDictRepairCustomEnum.ɵfac=function(e){return new(e||AdministrationDictRepairCustomEnum)(c.Y36(u.y),c.Y36(qe.A),c.Y36(p.d),c.Y36(Je.o))},AdministrationDictRepairCustomEnum.ɵcmp=c.Xpm({type:AdministrationDictRepairCustomEnum,selectors:[["administration-dict-repair-custom-enum"]],decls:6,vars:0,consts:[[1,"slds-grid","slds-grid--vertical-align-center","slds-grid--align-spread","slds-p-vertical--xx-small","slds-border--bottom"],["icon","custom_apps","size","x-small"],["label","LBL_REPAIR_CUSTOM_CACHE",1,"slds-p-horizontal--x-small"],["label","LBL_REPAIR_CUSTOM_CACHE","length","long",1,"slds-grow"],[1,"slds-button","slds-button--neutral","slds-button--small",3,"click"],["label","LBL_EXECUTE"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c._UZ(1,"system-utility-icon",1)(2,"system-label",2)(3,"system-label",3),c.TgZ(4,"button",4),c.NdJ("click",(function(){return t.repair()})),c._UZ(5,"system-label",5),c.qZA()())},dependencies:[T._,M.r],encapsulation:2}),AdministrationDictRepairCustomEnum})(),Bs=(()=>{class AdministrationDictRepair{constructor(e,t,s){this.backend=e,this.toast=t,this.language=s}}return AdministrationDictRepair.ɵfac=function(e){return new(e||AdministrationDictRepair)(c.Y36(u.y),c.Y36(qe.A),c.Y36(p.d))},AdministrationDictRepair.ɵcmp=c.Xpm({type:AdministrationDictRepair,selectors:[["administration-dict-repair"]],decls:11,vars:0,consts:[[1,"slds-grid","slds-grid--align-spread","slds-p-around--medium"],[1,"slds-text-heading--medium"],["label","LBL_REPAIR_DICTIONARY"],["system-to-bottom","",1,"slds-p-around--small","slds-theme--default"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0)(1,"h2",1),c._UZ(2,"system-label",2),c.qZA()(),c.TgZ(3,"div",3),c._UZ(4,"administration-dict-repair-item")(5,"administration-dict-repair-language")(6,"administration-dict-repair-cache")(7,"administration-dict-repair-custom-enum")(8,"administration-dict-repairreset-cache")(9,"administration-dict-repair-db-columns")(10,"administration-dict-repair-convert-db-charset"),c.qZA())},dependencies:[T._,A.H,Ss,Fs,Rs,Is,ws,Ds,Os],encapsulation:2}),AdministrationDictRepair})();var Qs=s(1061);function Ys(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"tr")(1,"td",12)(2,"div",13)(3,"system-checkbox",14),c.NdJ("ngModelChange",(function(t){const s=c.CHM(e).$implicit;return c.KtG(s.selected=t)})),c.qZA(),c.TgZ(4,"div")(5,"p"),c._uU(6),c.qZA(),c.TgZ(7,"p"),c._uU(8),c.qZA()()()()()}if(2&e){const e=t.$implicit;c.xp6(3),c.Q6J("ngModel",e.selected),c.xp6(3),c.Oqu(e.comment),c.xp6(2),c.Oqu(e.statement)}}function zs(e,t){if(1&e&&c._UZ(0,"textarea",19),2&e){const e=t.$implicit;c.Q6J("value",e)}}function Ps(e,t){if(1&e&&(c.TgZ(0,"div",15),c._UZ(1,"system-label",16),c.TgZ(2,"div",17),c.YNc(3,zs,1,1,"textarea",18),c.qZA()()),2&e){const e=c.oxw();c.xp6(3),c.Q6J("ngForOf",e.dbErrors)}}function Gs(e,t){1&e&&(c.TgZ(0,"div",17),c._UZ(1,"system-label",20),c.qZA())}function Hs(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"button",7),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw();return c.KtG(t.copy2clipboard())})),c._UZ(1,"system-label",21),c.qZA()}if(2&e){const e=c.oxw();c.Q6J("disabled",e.wholeSQL.length<=0)}}let Ks=(()=>{class AdministrationDictRepairModal{constructor(e,t,s,i){this.backend=e,this.toast=t,this.language=s,this.modal=i,this.synced=!1,this.sql=[],this.dbErrors=[],this.self={}}close(){this.self.destroy()}get hidden(){return null==typeof navigator.clipboard}doRepair(){this.modal.openModal("SystemLoadingModal").subscribe((e=>{const t=this.sql.filter((e=>e.selected));this.backend.postRequest("admin/repair/database",{},{selectedqueries:t}).subscribe((t=>{t.response?t.synced?(this.toast.sendToast(this.language.getLabel("LBL_REPAIR_DATABASE_ALREADY_SYNCED"),"success"),this.close()):(this.toast.sendToast(this.language.getLabel("LBL_REPAIR_DATABASE_SYNCED"),"success"),this.close()):this.dbErrors=t.errors,e.instance.self.destroy()}),(t=>{if(500===t.status)this.toast.sendAlert(t.message,"error"),this.close(),e.instance.self.destroy()}))}))}copy2clipboard(){const e=this.sql.filter((e=>e.selected)).map((e=>e.statement)).toString().replace(/;,/g,";\n");navigator.clipboard.writeText(e).then((e=>{this.toast.sendToast(this.language.getLabel("LBL_COPIED_TO_CLIPBOARD"),"info")}))}selectAll(){this.sql.forEach((e=>{e.selected=!0}))}}return AdministrationDictRepairModal.ɵfac=function(e){return new(e||AdministrationDictRepairModal)(c.Y36(u.y),c.Y36(qe.A),c.Y36(p.d),c.Y36(Je.o))},AdministrationDictRepairModal.ɵcmp=c.Xpm({type:AdministrationDictRepairModal,selectors:[["administration-dict-repair-modal"]],decls:15,vars:7,consts:[[3,"close"],["label","LBL_REPAIR_DICTIONARY"],[3,"margin"],["system-multi-select-checkboxes","",1,"slds-table","slds-table_bordered","slds-table_cell-buffer"],[4,"ngFor","ngForOf"],["class","slds-form-element",4,"ngIf"],["class","slds-form-element__control",4,"ngIf"],[1,"slds-button","slds-button--neutral",3,"disabled","click"],["label","LBL_SELECT_ALL"],["class","slds-button slds-button--neutral",3,"disabled","click",4,"ngIf"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_EXECUTE"],[2,"white-space","normal"],[1,"slds-grid","slds-grid--vertical-align-center","slds-p-around--xx-small"],[3,"ngModel","ngModelChange"],[1,"slds-form-element"],["label","LBL_LAST_DB_ERROR"],[1,"slds-form-element__control"],["disabled","","class","slds-textarea","style","min-height: 400px;",3,"value",4,"ngFor","ngForOf"],["disabled","",1,"slds-textarea",2,"min-height","400px",3,"value"],["label","LBL_REPAIR_DATABASE_ALREADY_SYNCED"],["label","LBL_COPY_TO_CLIPBOARD"]],template:function(e,t){1&e&&(c.TgZ(0,"system-modal")(1,"system-modal-header",0),c.NdJ("close",(function(){return t.close()})),c._UZ(2,"system-label",1),c.qZA(),c.TgZ(3,"system-modal-content",2)(4,"table",3)(5,"tbody"),c.YNc(6,Ys,9,3,"tr",4),c.qZA()(),c.YNc(7,Ps,4,1,"div",5),c.YNc(8,Gs,2,0,"div",6),c.qZA(),c.TgZ(9,"system-modal-footer")(10,"button",7),c.NdJ("click",(function(){return t.selectAll()})),c._UZ(11,"system-label",8),c.qZA(),c.YNc(12,Hs,2,1,"button",9),c.TgZ(13,"button",10),c.NdJ("click",(function(){return t.doRepair()})),c._UZ(14,"system-label",11),c.qZA()()()),2&e&&(c.xp6(3),c.Q6J("margin","none"),c.xp6(3),c.Q6J("ngForOf",t.sql),c.xp6(1),c.Q6J("ngIf",t.dbErrors.length>0),c.xp6(1),c.Q6J("ngIf",""==t.sql),c.xp6(2),c.Q6J("disabled",t.sql.length<=0),c.xp6(2),c.Q6J("ngIf",!t.hidden),c.xp6(1),c.Q6J("disabled",t.sql.length<=0))},dependencies:[i.sg,i.O5,n.JJ,n.On,O.U,T._,dt.j,rt.x,ct.p,gt.y,Qs.Q],encapsulation:2}),AdministrationDictRepairModal})(),js=(()=>{class AdministrationDictRepairACLRoles{constructor(e,t,s,i){this.backend=e,this.toast=t,this.language=s,this.modal=i}executeRepairRoles(){let e=this.modal.await(this.language.getLabel("LBL_LOADING"));this.backend.getRequest("admin/repair/aclroles").subscribe((t=>{e.emit(!0),t?this.toast.sendToast(this.language.getLabel("LBL_ROLES_REPAIRED"),"success"):this.toast.sendToast(this.language.getLabel("LBL_ERROR"),"error")}))}}return AdministrationDictRepairACLRoles.ɵfac=function(e){return new(e||AdministrationDictRepairACLRoles)(c.Y36(u.y),c.Y36(qe.A),c.Y36(p.d),c.Y36(Je.o))},AdministrationDictRepairACLRoles.ɵcmp=c.Xpm({type:AdministrationDictRepairACLRoles,selectors:[["administration-dict-repair-acl-roles"]],decls:6,vars:0,consts:[[1,"slds-grid","slds-grid--vertical-align-center","slds-grid--align-spread","slds-p-vertical--xx-small","slds-border--bottom"],["icon","custom_apps","size","x-small"],["label","LBL_REPAIR_ACL_ROLES",1,"slds-p-horizontal--x-small"],["label","LBL_REPAIR_ACL_ROLES","length","long",1,"slds-grow"],[1,"slds-button","slds-button--neutral","slds-button--small",3,"click"],["label","LBL_EXECUTE"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c._UZ(1,"system-utility-icon",1)(2,"system-label",2)(3,"system-label",3),c.TgZ(4,"button",4),c.NdJ("click",(function(){return t.executeRepairRoles()})),c._UZ(5,"system-label",5),c.qZA()())},dependencies:[T._,M.r],encapsulation:2}),AdministrationDictRepairACLRoles})();function $s(e,t){if(1&e&&(c.TgZ(0,"option",18),c._uU(1),c.qZA()),2&e){const e=t.$implicit;c.Q6J("value",e),c.xp6(1),c.Oqu(e)}}function Xs(e,t){if(1&e&&(c.TgZ(0,"div"),c._uU(1),c.qZA()),2&e){const e=c.oxw().$implicit;c.xp6(1),c.hij(" ",e.value.name," ")}}function Vs(e,t){1&e&&(c.TgZ(0,"div"),c._UZ(1,"system-icon",25),c.qZA())}function Ws(e,t){if(1&e&&(c.TgZ(0,"div"),c._uU(1),c.qZA()),2&e){const e=c.oxw().$implicit;c.xp6(1),c.hij(" ",e.value.name," ")}}function ei(e,t){1&e&&(c.TgZ(0,"div"),c._UZ(1,"system-icon",25),c.qZA())}function ti(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div")(1,"system-checkbox",26),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw().$implicit;return c.KtG(s.value.todelete=t)})),c.qZA()()}if(2&e){const e=c.oxw().$implicit;c.xp6(1),c.Q6J("ngModel",e.value.todelete)("disabled",!e.value.db_available)}}const si=function(){return{"background-color":"#C7D6A9"}},ii=function(){return{"background-color":"#EDD0AB"}};function ni(e,t){if(1&e&&(c.TgZ(0,"tr",23)(1,"td"),c.YNc(2,Xs,2,1,"div",13),c.YNc(3,Vs,2,0,"div",13),c.qZA(),c.TgZ(4,"td",24),c.YNc(5,Ws,2,1,"div",13),c.YNc(6,ei,2,0,"div",13),c.qZA(),c.TgZ(7,"td"),c.YNc(8,ti,2,2,"div",13),c.qZA()()),2&e){const e=t.$implicit;c.Q6J("ngStyle",e.value.vardef_available&&e.value.db_available?c.DdM(6,si):c.DdM(7,ii)),c.xp6(2),c.Q6J("ngIf",e.value.vardef_available),c.xp6(1),c.Q6J("ngIf",!e.value.vardef_available),c.xp6(2),c.Q6J("ngIf",e.value.db_available),c.xp6(1),c.Q6J("ngIf",!e.value.db_available),c.xp6(2),c.Q6J("ngIf",e.value.db_available&&!e.value.vardef_available)}}function li(e,t){if(1&e&&(c.TgZ(0,"div")(1,"table",19)(2,"thead")(3,"tr",20)(4,"th",21),c._uU(5,"Vardef"),c.qZA(),c.TgZ(6,"th",21),c._uU(7,"Database column"),c.qZA(),c._UZ(8,"th",21),c.qZA()(),c.TgZ(9,"tbody"),c.YNc(10,ni,9,8,"tr",22),c.ALo(11,"keyvalue"),c.qZA()()()),2&e){const e=c.oxw();c.xp6(10),c.Q6J("ngForOf",c.lcZ(11,1,e.allFields))}}let oi=(()=>{class AdministrationDictRepairDbColumnsModal{constructor(e,t,s,i,n,l){this.backend=e,this.toast=t,this.language=s,this.modal=i,this.metadata=n,this.helper=l,this.self={},this._module="",this.allFields=[],this.modules=this.metadata.getModules(),this.modules.sort()}get module(){return this._module}set module(e){e!=this._module&&(this._module=e,this.mergeColumns())}mergeColumns(){this.allFields=[],this.backend.getRequest("dictionary/browser/"+this.module+"/dbcolumns").subscribe((e=>{const t=this.metadata.getModuleFields(this.module);for(let e in t)"non-db"!=t[e].source&&this.allFields.unshift({name:t[e].name,vardef_available:!0});for(let t in e){let s=e[t].name,i=!1;for(let e in this.allFields)this.allFields[e].name==s&&(this.allFields[e].db_available=!0,this.allFields.push(this.allFields[e]),this.allFields.splice(e,1),i=!0);i||this.allFields.unshift({name:s,db_available:!0})}}))}selectAll(){for(let e of this.allFields.filter((e=>e.db_available&&!e.vardef_available)))e.todelete=!0}get canSelectAll(){return this.allFields&&this.allFields.filter((e=>e.db_available&&!e.vardef_available&&!e.todelete)).length>0}get canDelete(){return this.allFields&&this.allFields.filter((e=>e.todelete)).length>0}close(){this.self.destroy()}doRepair(){let e="";for(let t of this.allFields.filter((e=>e.todelete)))e+="- "+t.name+"\r\n";this.helper.confirm(this.language.getLabel("LBL_CLEAN_DB_COLUMNS"),this.language.getLabel("MSG_DELETE_COLUMNS","long")+"\r\n\r\n"+e).subscribe((e=>{e&&this.delete()}))}delete(){this.modal.openModal("SystemLoadingModal").subscribe((e=>{let t={dbcolumns:this.allFields.filter((e=>e.todelete)),module:this.module};this.backend.postRequest("admin/repair/dbcolumns",{},t).subscribe((t=>{t?(this.toast.sendToast(this.language.getLabel("MSG_SUCCESSFULLY_EXECUTED"),"success"),this.mergeColumns()):(this.toast.sendToast(this.language.getLabel("LBL_ERROR"),"error"),this.mergeColumns()),e.instance.self.destroy()}))}))}}return AdministrationDictRepairDbColumnsModal.ɵfac=function(e){return new(e||AdministrationDictRepairDbColumnsModal)(c.Y36(u.y),c.Y36(qe.A),c.Y36(p.d),c.Y36(Je.o),c.Y36(b.Pu),c.Y36(D._))},AdministrationDictRepairDbColumnsModal.ɵcmp=c.Xpm({type:AdministrationDictRepairDbColumnsModal,selectors:[["administration-dict-repair-db-columns-modal"]],decls:20,vars:6,consts:[[3,"close"],["label","LBL_CLEAN_DB_COLUMNS"],["margin","none",3,"grow"],[1,"slds-p-around--x-small","slds-border--bottom"],[1,"slds-form-element","slds-grid","slds-grid--vertical-align-center"],["for","moduleselect",1,"slds-form-element__label"],["label","LBL_MODULE"],[1,"slds-form-element__control","slds-col"],[1,"slds-select_container"],["id","moduleselect",1,"slds-select",3,"ngModel","ngModelChange"],["value",""],["label","LBL_SELECT"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"slds-button","slds-button--neutral",3,"disabled","click"],["label","LBL_SELECT_ALL"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_DELETE_IRREVOCABLY"],[3,"value"],[1,"slds-table","slds-table--bordered","slds-table--cell-buffer"],[1,"slds-text-title--caps"],["scope","col"],[3,"ngStyle",4,"ngFor","ngForOf"],[3,"ngStyle"],[1,"slds-truncate"],["icon","first_non_empty","size","x-small"],[3,"ngModel","disabled","ngModelChange"]],template:function(e,t){1&e&&(c.TgZ(0,"system-modal")(1,"system-modal-header",0),c.NdJ("close",(function(){return t.close()})),c._UZ(2,"system-label",1),c.qZA(),c.TgZ(3,"system-modal-content",2)(4,"div",3)(5,"div",4)(6,"label",5),c._UZ(7,"system-label",6),c.qZA(),c.TgZ(8,"div",7)(9,"div",8)(10,"select",9),c.NdJ("ngModelChange",(function(e){return t.module=e})),c.TgZ(11,"option",10),c._UZ(12,"system-label",11),c.qZA(),c.YNc(13,$s,2,2,"option",12),c.qZA()()()()(),c.YNc(14,li,12,3,"div",13),c.qZA(),c.TgZ(15,"system-modal-footer")(16,"button",14),c.NdJ("click",(function(){return t.selectAll()})),c._UZ(17,"system-label",15),c.qZA(),c.TgZ(18,"button",16),c.NdJ("click",(function(){return t.doRepair()})),c._UZ(19,"system-label",17),c.qZA()()()),2&e&&(c.xp6(3),c.Q6J("grow",!0),c.xp6(7),c.Q6J("ngModel",t.module),c.xp6(3),c.Q6J("ngForOf",t.modules),c.xp6(1),c.Q6J("ngIf",t.module),c.xp6(2),c.Q6J("disabled",!t.canSelectAll),c.xp6(2),c.Q6J("disabled",!t.canDelete))},dependencies:[i.sg,i.O5,i.PC,n.YN,n.Kr,n.EJ,n.JJ,n.On,O.U,L.f,T._,dt.j,rt.x,ct.p,gt.y,i.Nd],encapsulation:2}),AdministrationDictRepairDbColumnsModal})();var ai=s(2803);function di(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"tr",40)(1,"td",41)(2,"system-checkbox",42),c.NdJ("ngModelChange",(function(t){const s=c.CHM(e).$implicit;return c.KtG(s.selected=t)}))("ngModelChange",(function(t){const s=c.CHM(e).$implicit,i=c.oxw();return c.KtG(i.selectTable(t,s.table_name))})),c.qZA()(),c.TgZ(3,"td")(4,"div",30),c._uU(5),c.qZA()(),c.TgZ(6,"td")(7,"div",30),c._uU(8),c.qZA()(),c.TgZ(9,"td")(10,"div",30),c._uU(11),c.qZA()()()}if(2&e){const e=t.$implicit;c.xp6(2),c.Q6J("ngModel",e.selected),c.xp6(3),c.hij(" ",e.table_name," "),c.xp6(3),c.hij(" ",e.character_set_name," "),c.xp6(3),c.hij(" ",e.collation_name," ")}}function ri(e,t){1&e&&(c.TgZ(0,"tbody")(1,"tr",40)(2,"td"),c._UZ(3,"system-stencil"),c.qZA(),c.TgZ(4,"td"),c._UZ(5,"system-stencil"),c.qZA(),c.TgZ(6,"td"),c._UZ(7,"system-stencil"),c.qZA(),c.TgZ(8,"td"),c._UZ(9,"system-stencil"),c.qZA()(),c.TgZ(10,"tr",40)(11,"td"),c._UZ(12,"system-stencil"),c.qZA(),c.TgZ(13,"td"),c._UZ(14,"system-stencil"),c.qZA(),c.TgZ(15,"td"),c._UZ(16,"system-stencil"),c.qZA(),c.TgZ(17,"td"),c._UZ(18,"system-stencil"),c.qZA()(),c.TgZ(19,"tr",40)(20,"td"),c._UZ(21,"system-stencil"),c.qZA(),c.TgZ(22,"td"),c._UZ(23,"system-stencil"),c.qZA(),c.TgZ(24,"td"),c._UZ(25,"system-stencil"),c.qZA(),c.TgZ(26,"td"),c._UZ(27,"system-stencil"),c.qZA()()())}let ci=(()=>{class AdministrationDictRepairConvertDBCharsetModal{constructor(e,t,s){this.backend=e,this.toast=t,this.language=s,this.tables=[],this.filteredTables=[],this.selectedTables=[]}get listFilterTerm(){return this._listFilterTerm}set listFilterTerm(e){this._listFilterTerm=e,this.filteredTables=this.tables.filter((t=>t.table_name.indexOf(e)>-1))}ngOnInit(){this.loadDBTables()}close(){this.self.destroy()}convertTables(){this.close();const e={tables:this.filteredTables.filter((e=>!!e.selected)).map((e=>e.table_name)),charset:this.convertToCharset};this.backend.postRequest("admin/convert/tables",{},e).subscribe((e=>{e?this.toast.sendToast(this.language.getLabel("MSG_SUCCESSFULLY_EXECUTED"),"success"):this.toast.sendToast(this.language.getLabel("ERR_FAILED_TO_EXECUTE"),"error")}))}convertDatabase(){this.close();const e={charset:this.convertToCharset};this.backend.postRequest("admin/convert/database",{},e).subscribe((e=>{e?this.toast.sendToast(this.language.getLabel("MSG_SUCCESSFULLY_EXECUTED"),"success"):this.toast.sendToast(this.language.getLabel("ERR_FAILED_TO_EXECUTE"),"error")}))}toggleSelectAll(e){this.selectedTables=e?this.filteredTables.map((e=>e.table_name)):[],this.filteredTables.forEach((t=>t.selected=e))}selectTable(e,t){e&&!this.selectedTables.some((e=>e==t))?this.selectedTables.push(t):e||(this.selectedTables=this.selectedTables.filter((e=>e!=t)))}loadDBTables(){this.backend.getRequest("admin/charset/database").subscribe((e=>{this.tables=e.tables,this.filteredTables=this.tables,this.databaseData=e.database}))}}return AdministrationDictRepairConvertDBCharsetModal.ɵfac=function(e){return new(e||AdministrationDictRepairConvertDBCharsetModal)(c.Y36(u.y),c.Y36(qe.A),c.Y36(p.d))},AdministrationDictRepairConvertDBCharsetModal.ɵcmp=c.Xpm({type:AdministrationDictRepairConvertDBCharsetModal,selectors:[["administration-dict-repair-convert-db-charset-modal"]],decls:58,vars:12,consts:[[3,"close"],["label","LBL_CONVERT_DATABASE_CHARSET"],["margin","none",3,"grow"],[1,"slds-grid","slds-grid--vertical","slds-height_full"],[1,"slds-grid","slds-p-around--x-small"],[1,"slds-grow"],[1,"slds-grid","slds-grid--vertical-align-center"],["label","LBL_DATABASE",1,"slds-m-right--x-small","slds-text-title--caps"],["label","LBL_CHARSET",1,"slds-m-right--x-small","slds-text-title--caps"],["label","LBL_COLLATION",1,"slds-m-right--x-small","slds-text-title--caps"],[1,"slds-grid","slds-grid--vertical-align-end"],[1,"slds-form-element","slds-m-right--x-small"],[1,"slds-form-element__label"],["label","LBL_CONVERT_TO_CHARSET"],[1,"slds-form-element__control"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],["value","utf8mb4"],["value","utf8"],[1,"slds-button","slds-button--brand",2,"margin-bottom","1px",3,"disabled","click"],["label","LBL_CONVERT_DATABASE"],[1,"slds-grid","slds-grid--vertical-align-center","slds-border--bottom","slds-p-around--x-small"],["type","text","system-placeholder","LBL_SEARCH",1,"slds-input","slds-m-right--x-small",3,"ngModel","ngModelChange"],["icon","filterList","size","x-small"],[1,"slds-scrollable--y","slds-grow",2,"min-height","0"],["role","grid",1,"slds-table","slds-table_bordered","slds-table_fixed-layout","slds-table--header-fixed"],[1,"slds-line-height_reset"],[1,"slds-cell-shrink"],[3,"indeterminate","ngModel","ngModelChange"],["scope","col"],[1,"slds-truncate"],["label","LBL_NAME"],["label","LBL_CHARSET"],["label","LBL_COLLATION"],["class","slds-hint-parent",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_CONVERT_TABLES"],[1,"slds-hint-parent"],["role","gridcell",1,"slds-text-align_right"],[3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(c.TgZ(0,"system-modal")(1,"system-modal-header",0),c.NdJ("close",(function(){return t.close()})),c._UZ(2,"system-label",1),c.qZA(),c.TgZ(3,"system-modal-content",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6),c._UZ(8,"system-label",7),c.TgZ(9,"span"),c._uU(10),c.qZA()(),c.TgZ(11,"div",6),c._UZ(12,"system-label",8),c.TgZ(13,"span"),c._uU(14),c.qZA()(),c.TgZ(15,"div",6),c._UZ(16,"system-label",9),c.TgZ(17,"span"),c._uU(18),c.qZA()()(),c.TgZ(19,"div",10)(20,"div",11)(21,"label",12),c._UZ(22,"system-label",13),c.qZA(),c.TgZ(23,"div",14)(24,"div",15)(25,"select",16),c.NdJ("ngModelChange",(function(e){return t.convertToCharset=e})),c.TgZ(26,"option",17),c._uU(27," UTF8 Multibyte 4 "),c.qZA(),c.TgZ(28,"option",18),c._uU(29," utf8 "),c.qZA()()()()(),c.TgZ(30,"button",19),c.NdJ("click",(function(){return t.convertDatabase()})),c._UZ(31,"system-label",20),c.qZA()()(),c.TgZ(32,"div",21)(33,"input",22),c.NdJ("ngModelChange",(function(e){return t.listFilterTerm=e})),c.qZA(),c._UZ(34,"system-utility-icon",23),c.qZA(),c.TgZ(35,"div",24)(36,"table",25)(37,"thead")(38,"tr",26)(39,"th",27)(40,"system-checkbox",28),c.NdJ("ngModelChange",(function(e){return t.toggleSelectAll(e)})),c.qZA()(),c.TgZ(41,"th",29)(42,"div",30),c._UZ(43,"system-label",31),c.qZA()(),c.TgZ(44,"th",29)(45,"div",30),c._UZ(46,"system-label",32),c.qZA()(),c.TgZ(47,"th",29)(48,"div",30),c._UZ(49,"system-label",33),c.qZA()()()(),c.TgZ(50,"tbody"),c.YNc(51,di,12,4,"tr",34),c.qZA(),c.YNc(52,ri,28,0,"tbody",35),c.qZA()()()(),c.TgZ(53,"system-modal-footer")(54,"button",36),c.NdJ("click",(function(){return t.close()})),c._UZ(55,"system-label",37),c.qZA(),c.TgZ(56,"button",38),c.NdJ("click",(function(){return t.convertTables()})),c._UZ(57,"system-label",39),c.qZA()()()),2&e&&(c.xp6(3),c.Q6J("grow",!0),c.xp6(7),c.hij(" ",null==t.databaseData?null:t.databaseData.database," "),c.xp6(4),c.hij(" ",null==t.databaseData?null:t.databaseData.charset," "),c.xp6(4),c.hij(" ",null==t.databaseData?null:t.databaseData.collation," "),c.xp6(7),c.Q6J("ngModel",t.convertToCharset),c.xp6(5),c.Q6J("disabled",!t.convertToCharset),c.xp6(3),c.Q6J("ngModel",t.listFilterTerm),c.xp6(7),c.Q6J("indeterminate",t.selectedTables.length>0&&t.selectedTables.length<t.filteredTables.length)("ngModel",t.selectedTables.length==t.filteredTables.length),c.xp6(11),c.Q6J("ngForOf",t.filteredTables),c.xp6(1),c.Q6J("ngIf",0===t.tables.length),c.xp6(4),c.Q6J("disabled",0==t.selectedTables.length||!t.convertToCharset))},dependencies:[i.sg,i.O5,n.YN,n.Kr,n.Fj,n.EJ,n.JJ,n.On,O.U,T._,dt.j,rt.x,ct.p,gt.y,ai.B,M.r,Pt.A],encapsulation:2}),AdministrationDictRepairConvertDBCharsetModal})();function gi(e,t){if(1&e){const e=c.EpF();c.ynx(0),c.TgZ(1,"button",12),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw();return c.KtG(t.copyData())})),c._UZ(2,"system-button-icon",13),c.qZA(),c.TgZ(3,"button",14),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw();return c.KtG(t.pasteData())})),c._UZ(4,"system-button-icon",15),c.qZA(),c.BQk()}if(2&e){const e=c.oxw();c.xp6(1),c.Q6J("disabled",e.loading),c.xp6(2),c.Q6J("disabled",e.loading)}}function ui(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"system-checkbox",20),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw().$implicit,i=c.oxw();return c.KtG(i.configvalues[s.name]=t)})),c.qZA()}if(2&e){const e=c.oxw().$implicit,t=c.oxw();c.Q6J("ngModel",t.configvalues[e.name])}}function mi(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",21)(1,"input",22),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw().$implicit,i=c.oxw();return c.KtG(i.configvalues[s.name]=t)})),c.qZA()()}if(2&e){const e=c.oxw().$implicit,t=c.oxw();c.xp6(1),c.Q6J("disabled",t.loading)("ngModel",t.configvalues[e.name])}}function pi(e,t){if(1&e&&(c.TgZ(0,"tr",16)(1,"td"),c._uU(2),c.qZA(),c.TgZ(3,"td"),c.ynx(4,17),c.YNc(5,ui,1,1,"system-checkbox",18),c.YNc(6,mi,2,2,"div",19),c.BQk(),c.qZA()()),2&e){const e=t.$implicit;c.xp6(2),c.Oqu(e.name),c.xp6(2),c.Q6J("ngSwitch",e.type),c.xp6(1),c.Q6J("ngSwitchCase","bool")}}let hi=(()=>{class AdministrationConfigEditor{constructor(e,t,s,i,n){this.metadata=e,this.language=t,this.backend=s,this.modal=i,this.toast=n,this.componentconfig={},this.configvalues={},this.loading=!0}ngOnInit(){this.modal.openModal("SystemLoadingModal").subscribe((e=>{this.backend.getRequest("configuration/configurator/editor/"+this.componentconfig.category).subscribe((t=>{this.configvalues=t,this.loading=!1,e.instance.self.destroy()}))}))}get items(){let e=[];for(let t of this.componentconfig.items)!0!==t.hidden&&e.push(t);return e}save(){this.loading=!0,this.modal.openModal("SystemLoadingModal").subscribe((e=>{e.instance.messagelabel="LBL_SAVING_DATA",this.backend.postRequest("configuration/configurator/editor/"+this.componentconfig.category,[],{config:this.configvalues}).subscribe((t=>{this.loading=!1,e.instance.self.destroy()}))}))}get canCopyPaste(){return!!navigator.clipboard.readText}copyData(){let e=document.createElement("textarea");e.style.position="fixed",e.style.left="0",e.style.top="0",e.style.opacity="0";let t={};for(let e of this.componentconfig.items)t[e.name]=this.configvalues.hasOwnProperty(e.name)?this.configvalues[e.name]:null;e.value=JSON.stringify(t),document.body.appendChild(e),e.focus(),e.select(),document.execCommand("copy"),document.body.removeChild(e),this.toast.sendToast("Data of all fields copied to clipboard.","success")}pasteData(){navigator.clipboard.readText().then((e=>{let t,s=0,i=0;try{t=JSON.parse(e)}catch(e){return void this.toast.sendToast("No valid configuration data found in clipboard.","error")}for(let e of this.componentconfig.items)t.hasOwnProperty(e.name)?(this.configvalues[e.name]=t[e.name],s++):(this.configvalues[e.name]=null,i++);let n=Object.keys(t).length-s,l="";l+=n?n+" unknown values ignored. ":"",l+=i?i+" fields emptied, because no data definied. ":"",this.toast.sendToast("Data pasted from clipboard successfully. "+l+"Don´t forget to save data.","success",null,25)}))}get label(){return this.componentconfig.label?this.componentconfig.label:"LBL_EDITOR"}}return AdministrationConfigEditor.ɵfac=function(e){return new(e||AdministrationConfigEditor)(c.Y36(b.Pu),c.Y36(p.d),c.Y36(u.y),c.Y36(Je.o),c.Y36(qe.A))},AdministrationConfigEditor.ɵcmp=c.Xpm({type:AdministrationConfigEditor,selectors:[["administration-configeditor"]],decls:15,vars:3,consts:[[1,"slds-grid","slds-grid--align-spread","slds-p-around--medium"],[1,"slds-text-heading--medium"],[3,"label"],[4,"ngIf"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_SAVE"],[1,"slds-table","slds-table--bordered","slds-table--cell-buffer"],[1,"slds-text-title--caps"],["scope","col"],["label","LBL_NAME"],["label","LBL_VALUE"],["style","vertical-align: middle","class","slds-align-top",4,"ngFor","ngForOf"],[1,"slds-button","slds-button--icon-border","slds-button--neutral","slds-col_bump-left",3,"disabled","click"],["icon","copy","size","medium"],[1,"slds-button","slds-button--icon-border","slds-button--neutral","slds-m-right--medium",3,"disabled","click"],["icon","paste","size","medium"],[1,"slds-align-top",2,"vertical-align","middle"],[3,"ngSwitch"],[3,"ngModel","ngModelChange",4,"ngSwitchCase"],["class","slds-form-element__control",4,"ngSwitchDefault"],[3,"ngModel","ngModelChange"],[1,"slds-form-element__control"],["type","text",1,"slds-input",3,"disabled","ngModel","ngModelChange"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0)(1,"h2",1),c._UZ(2,"system-label",2),c.qZA(),c.YNc(3,gi,5,2,"ng-container",3),c.TgZ(4,"button",4),c.NdJ("click",(function(){return t.save()})),c._UZ(5,"system-label",5),c.qZA()(),c.TgZ(6,"table",6)(7,"thead")(8,"tr",7)(9,"th",8),c._UZ(10,"system-label",9),c.qZA(),c.TgZ(11,"th",8),c._UZ(12,"system-label",10),c.qZA()()(),c.TgZ(13,"tbody"),c.YNc(14,pi,7,3,"tr",11),c.qZA()()),2&e&&(c.xp6(2),c.Q6J("label",t.label),c.xp6(1),c.Q6J("ngIf",t.canCopyPaste),c.xp6(11),c.Q6J("ngForOf",t.items))},dependencies:[i.sg,i.O5,i.RF,i.n9,i.ED,n.Fj,n.JJ,n.On,x.J,O.U,T._],encapsulation:2}),AdministrationConfigEditor})();var bi=s(5710),fi=s(2294),_i=s(2868),Zi=s(3543);function Ai(e,t){1&e&&c._UZ(0,"system-stencil")}function yi(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",5)(1,"div",6),c._UZ(2,"system-label",7),c.qZA(),c.TgZ(3,"div",8)(4,"div",9),c._uU(5),c.qZA(),c.TgZ(6,"button",10),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw(2);return c.KtG(t.view.setEditMode())})),c._UZ(7,"system-button-icon",11),c.qZA()()()}if(2&e){const e=c.oxw(2);c.xp6(5),c.hij(" ",e.model.data.method," "),c.xp6(2),c.Q6J("icon","edit")}}function vi(e,t){1&e&&c._UZ(0,"system-stencil")}function xi(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",5)(1,"div",6),c._UZ(2,"system-label",12),c.qZA(),c.TgZ(3,"div",8)(4,"div",9),c._uU(5),c.qZA(),c.TgZ(6,"button",10),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw(2);return c.KtG(t.view.setEditMode())})),c._UZ(7,"system-button-icon",11),c.qZA()()()}if(2&e){const e=c.oxw(2);c.xp6(5),c.hij(" ",e.model.data.method_params," "),c.xp6(2),c.Q6J("icon","edit")}}function Li(e,t){if(1&e&&(c.TgZ(0,"div",3)(1,"div"),c.YNc(2,Ai,1,0,"system-stencil",2),c.YNc(3,yi,8,2,"div",4),c.qZA(),c.TgZ(4,"div"),c.YNc(5,vi,1,0,"system-stencil",2),c.YNc(6,xi,8,2,"div",4),c.qZA()()),2&e){const e=c.oxw();c.xp6(2),c.Q6J("ngIf",e.model.isLoading),c.xp6(1),c.Q6J("ngIf",!e.model.isLoading),c.xp6(2),c.Q6J("ngIf",e.model.isLoading),c.xp6(1),c.Q6J("ngIf",!e.model.isLoading)}}function Ti(e,t){if(1&e&&(c.TgZ(0,"option",24),c._uU(1),c.qZA()),2&e){const e=t.$implicit;c.Q6J("value",e),c.xp6(1),c.Oqu(e)}}function Mi(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div")(1,"div",13)(2,"div",14)(3,"label",15)(4,"abbr",16),c._uU(5,"*"),c.qZA(),c._UZ(6,"system-label",7),c.qZA(),c.TgZ(7,"div",17)(8,"system-select",18),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.className=t)}))("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.setClassname(t))})),c.qZA(),c.TgZ(9,"div",19)(10,"select",20),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.methodName=t)})),c.YNc(11,Ti,2,2,"option",21),c.qZA()()()()(),c.TgZ(12,"div",13)(13,"div",14)(14,"label",15),c._UZ(15,"system-label",12),c.qZA(),c.TgZ(16,"div",22)(17,"textarea",23),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.model.data.method_params=t)})),c.qZA()()()()()}if(2&e){const e=c.oxw();c.xp6(8),c.Q6J("selectList",e.availableClasses)("ngModel",e.className),c.xp6(2),c.Q6J("disabled",!e.classExists||0==e._methods.length)("ngModel",e.methodName),c.xp6(1),c.Q6J("ngForOf",e._methods),c.xp6(6),c.Q6J("ngModel",e.model.data.method_params)}}let Ji=(()=>{class AdministrationJobMethods{constructor(e,t,s,i){this.model=e,this.view=t,this.cdRef=s,this.backend=i,this._methods=[],this.availableClasses=[],this._class="",this._method="",this.classExists=!1}setClassname(e){this.className=e,this._class=e.name,""!=this._class?this.validateNamespace():(this._method="",this._methods=[],this.classExists=!1),this.joinValue()}get methodName(){return this._method}set methodName(e){this._method=e,this.joinValue()}ngOnInit(){this.loadAvailableClasses(),this.subscribeToFieldChanges(),this.subscribeToView()}subscribeToView(){this.view.mode$.subscribe((()=>this.cdRef.detectChanges()))}loadAvailableClasses(){this.backend.getRequest("module/SchedulerJobTasks/classes").subscribe((e=>{this.availableClasses=e.map((e=>({id:e,name:e}))).sort()}))}subscribeToFieldChanges(){this.model.observeFieldChanges("method").subscribe((()=>this.splitValue()))}validateNamespace(){this.backend.getRequest("system/checkclass/"+btoa(this._class)).subscribe((e=>{this.classExists=e.classexists,this._methods=e.methods,this.cdRef.detectChanges()}))}splitValue(){if(this._value){let e=this._value.split("->");this._class=e[0],this.className={id:this._class,name:this._class},this._method=e[1],this.validateNamespace()}}joinValue(){""!=this._class?this._value=this._class+"->"+this._method:this._value="",this.model.setField("method",this._value)}}return AdministrationJobMethods.ɵfac=function(e){return new(e||AdministrationJobMethods)(c.Y36(bi.o),c.Y36(fi.e),c.Y36(c.sBO),c.Y36(u.y))},AdministrationJobMethods.ɵcmp=c.Xpm({type:AdministrationJobMethods,selectors:[["administration-job-methods"]],decls:3,vars:2,consts:[["titlelabel","LBL_METHOD"],["class","slds-p-around--xx-small",4,"ngIf"],[4,"ngIf"],[1,"slds-p-around--xx-small"],["class","slds-has-divider--bottom slds-p-vertical--x-small",4,"ngIf"],[1,"slds-has-divider--bottom","slds-p-vertical--x-small"],[1,"slds-form-element__label","slds-truncate"],["label","LBL_METHOD"],[1,"slds-grid","slds-grid--vertical-align-center","slds-grid--align-spread"],[1,"slds-truncate","slds-grow"],[1,"slds-button","slds-button--icon","slds-m-left--xx-small",2,"float","right",3,"click"],[3,"icon"],["label","LBL_PARAMS"],[1,"slds-grid","slds-p-around--xx-small"],[1,"slds-form-element","slds-p-horizontal--xx-small","slds-size--1-of-1"],[1,"slds-form-element__label"],[1,"slds-required","ng-star-inserted"],[1,"slds-grid","slds-grid--vertical-align-center","slds-gutters_direct-xx-small"],[1,"slds-grow",3,"selectList","ngModel","ngModelChange"],[1,"slds-col","slds-size--1-of-3","slds-select_container"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"slds-form-element__control"],[1,"slds-textarea",3,"ngModel","ngModelChange"],[3,"value"]],template:function(e,t){1&e&&(c.TgZ(0,"system-section",0),c.YNc(1,Li,7,4,"div",1),c.YNc(2,Mi,18,6,"div",2),c.qZA()),2&e&&(c.xp6(1),c.Q6J("ngIf",!t.view.isEditMode()),c.xp6(1),c.Q6J("ngIf",t.view.isEditMode()))},dependencies:[i.sg,i.O5,n.YN,n.Kr,n.Fj,n.EJ,n.JJ,n.On,x.J,T._,_i.P,Zi.R,ai.B],encapsulation:2,changeDetection:0}),AdministrationJobMethods})();var qi=s(727),Ei=s(7340),Ci=s(1790),Ui=s(7763);const Ni=function(e,t){return{module:e,id:t,data:null}},ki=function(e){return{opacity:e}};function Si(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"tr",28)(1,"td",29)(2,"div",20),c._uU(3),c.qZA()(),c.TgZ(4,"td")(5,"div",20),c._uU(6),c.qZA()(),c.TgZ(7,"td")(8,"div",30),c._uU(9),c.qZA()(),c.TgZ(10,"td")(11,"div",31),c._uU(12),c.qZA()(),c.TgZ(13,"td",32)(14,"button",33),c.NdJ("click",(function(){const t=c.CHM(e).$implicit,s=c.oxw(2);return c.KtG(s.openMessageInModal(t.message,t.resolution))})),c._UZ(15,"system-button-icon",34),c.qZA()()()}if(2&e){const e=t.$implicit,s=c.oxw(2);c.Q6J("system-model-provider",c.WLB(10,Ni,e.rel_module,e.rel_id))("ngStyle",c.VKq(13,ki,s.isLoading?.33:1)),c.xp6(1),c.Q6J("system-model-popover",!!e.rel_id)("enablelink",!!e.rel_id),c.xp6(2),c.Oqu(e.name),c.xp6(3),c.Oqu(e.executed_on),c.xp6(2),c.Q6J("ngClass",e.resolutionClass),c.xp6(1),c.Oqu(e.resolution),c.xp6(2),c.Q6J("title",e.message),c.xp6(1),c.hij("",e.message," ")}}function Fi(e,t){1&e&&(c.TgZ(0,"div",35),c._UZ(1,"system-label",36),c.qZA())}function Ri(e,t){1&e&&(c.TgZ(0,"div",35),c._UZ(1,"system-spinner"),c.qZA())}function Ii(e,t){if(1&e&&(c.TgZ(0,"div")(1,"div",16)(2,"table",17)(3,"thead")(4,"tr",18)(5,"th",19)(6,"div",20),c._UZ(7,"system-label",21),c.qZA()(),c.TgZ(8,"th",19)(9,"div",20),c._UZ(10,"system-label",22),c.qZA()(),c.TgZ(11,"th",19)(12,"div",20),c._UZ(13,"system-label",23),c.qZA()(),c.TgZ(14,"th",19)(15,"div",20),c._UZ(16,"system-label",24),c.qZA()(),c._UZ(17,"th",25),c.qZA()(),c.TgZ(18,"tbody"),c.YNc(19,Si,16,15,"tr",26),c.qZA()(),c.YNc(20,Fi,2,0,"div",27),c.YNc(21,Ri,2,0,"div",27),c.qZA()()),2&e){const e=c.oxw();c.Q6J("@displaycard",void 0),c.xp6(7),c.Q6J("label","SchedulerJobs"==e.model.module?"LBL_TASK":"LBL_SCHEDULERJOB"),c.xp6(12),c.Q6J("ngForOf",e.jobLogs)("ngForTrackBy",e.trackByFn),c.xp6(1),c.Q6J("ngIf",!e.isLoading&&!e.isReloading&&0==e.jobLogs.length),c.xp6(1),c.Q6J("ngIf",e.isLoading||e.isReloading)}}function wi(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"button",37),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw();return c.KtG(t.getMoreData())})),c._UZ(1,"system-label",38),c.qZA()}if(2&e){const e=c.oxw();c.Q6J("disabled",e.isLoading||e.jobLogs.length==e.totalLines)}}let Di=(()=>{class AdministrationJobLog{constructor(e,t,s,i,n,l,o,a){this.model=e,this.language=t,this.metadata=s,this.broadcast=i,this.elementRef=n,this.modal=l,this.userpreferences=o,this.backend=a,this.jobLogs=[],this.isLoading=!1,this.isReloading=!1,this.subscription=new qi.w0,this.totalLimit=10,this.expanded=!0}ngOnInit(){this.getData(),this.subscribeToJobActions()}ngOnDestroy(){this.subscription.unsubscribe()}openMessageInModal(e,t){const s="failed"==t?"error":"success";this.modal.info(e,this.language.getLabel("LBL_MESSAGE"),s)}trackByFn(e,t){return t.id}subscribeToJobActions(){this.subscription=this.broadcast.message$.subscribe((e=>{"job.run"==e.messagetype&&this.reloadData()}))}getData(){this.totalLimit=10,this.isLoading=!0,this.backend.getRequest(`module/${this.model.module}/${this.model.id}/log`,{offset:0,limit:10}).subscribe((e=>{this.jobLogs=this.mapList(e.list),this.totalLines=e.count,this.isLoading=!1}),(e=>this.isLoading=!1))}getMoreData(){let e={sort:{sortfield:"executed_on",sortdirection:"DESC"},offset:this.jobLogs.length,limit:10,getcount:!0};this.totalLimit+=10,this.isLoading=!0,this.backend.getRequest(`module/${this.model.module}/${this.model.id}/log`,e).subscribe((e=>{this.jobLogs=[...this.jobLogs,...this.mapList(e.list)],this.totalLines=e.count,this.isLoading=!1}),(e=>this.isLoading=!1))}reloadData(){if(this.isLoading)return;this.jobLogs=[];let e={offset:0,limit:this.totalLimit};this.isLoading=this.isReloading=!0,this.backend.getRequest(`module/${this.model.module}/${this.model.id}/log`,e).subscribe((e=>{this.jobLogs=this.mapList(e.list),this.totalLines=e.count,this.isLoading=this.isReloading=!1}),(e=>this.isLoading=this.isReloading=!1))}mapList(e){return e.map((e=>(e.executed_on=moment(moment.utc(e.executed_on)).tz(this.userpreferences.toUse.timezone).format(this.userpreferences.getDateFormat()+" "+this.userpreferences.getTimeFormat()),e.resolutionClass="slds-text-color_"+("failed"==e.resolution?"error":"success"),e)))}toggleExpand(e){e.stopPropagation(),this.expanded=!this.expanded}}return AdministrationJobLog.ɵfac=function(e){return new(e||AdministrationJobLog)(c.Y36(bi.o),c.Y36(p.d),c.Y36(b.Pu),c.Y36(m.f),c.Y36(c.SBq),c.Y36(Je.o),c.Y36(fs.z),c.Y36(u.y))},AdministrationJobLog.ɵcmp=c.Xpm({type:AdministrationJobLog,selectors:[["administration-job-log"]],decls:19,vars:6,consts:[[1,"slds-card","slds-card_boundary","slds-m-bottom--medium"],[1,"slds-card__header","slds-grid","slds-grid--vertical-align-center"],[1,"slds-media","slds-media--center","slds-has-flexi-truncate"],["icon","recent","size","small"],[1,"slds-media__body","slds-truncate","slds-grid","slds-grid--vertical-align-center"],["href","javascript:void(0);",1,"slds-text-link--reset"],[1,"slds-text-heading--small"],["label","LBL_LOG_ENTRIES"],["label","LBL_OF"],["icon","up","size","x-small",1,"slds-m-horizontal--xx-small",3,"click"],[1,"slds-button","slds-button--icon",3,"disabled","click"],["icon","refresh",1,"slds-p-horizontal--xxx-small"],[4,"ngIf"],[1,"slds-card__footer","slds-p-around--xx-small"],[1,"slds-grid","slds-grid--align-center",2,"min-height","32px"],["class","slds-button",3,"disabled","click",4,"ngIf"],[1,"slds-card__body","slds-size--1-of-1","slds-scrollable--y",2,"max-height","350px"],["role","grid",1,"slds-table","slds-table--bordered","slds-table--cell-buffer","slds-table--fixed-layout"],[1,"slds-line-height_reset"],["scope","col"],[1,"slds-truncate"],[3,"label"],["label","LBL_EXECUTE_TIME"],["label","LBL_RESOLUTION"],["label","LBL_MESSAGE"],["scope","col",1,"slds-cell-shrink"],["class","slds-hint-parent",3,"system-model-provider","ngStyle",4,"ngFor","ngForOf","ngForTrackBy"],["class","slds-align_absolute-center slds-p-around--medium",4,"ngIf"],[1,"slds-hint-parent",3,"system-model-provider","ngStyle"],[3,"system-model-popover","enablelink"],[1,"slds-truncate",3,"ngClass"],[1,"slds-truncate",3,"title"],[1,"slds-cell-shrink"],[1,"slds-button","slds-button--icon",3,"click"],["icon","info"],[1,"slds-align_absolute-center","slds-p-around--medium"],["label","LBL_NO_ENTRIES"],[1,"slds-button",3,"disabled","click"],["label","LBL_MORE"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0)(1,"div",1)(2,"header",2),c._UZ(3,"system-icon",3),c.TgZ(4,"div",4)(5,"h2")(6,"a",5)(7,"span",6),c._UZ(8,"system-label",7),c._uU(9),c._UZ(10,"system-label",8),c._uU(11),c.qZA()()(),c.TgZ(12,"system-utility-icon",9),c.NdJ("click",(function(e){return t.toggleExpand(e)})),c.qZA()()(),c.TgZ(13,"button",10),c.NdJ("click",(function(){return t.reloadData()})),c._UZ(14,"system-button-icon",11),c.qZA()(),c.YNc(15,Ii,22,6,"div",12),c.TgZ(16,"footer",13)(17,"div",14),c.YNc(18,wi,2,1,"button",15),c.qZA()()()),2&e&&(c.xp6(9),c.hij(" (",t.jobLogs.length," "),c.xp6(2),c.hij(" ",t.totalLines,") "),c.xp6(1),c.Q6J("@animateicon",t.expanded?"open":"closed"),c.xp6(1),c.Q6J("disabled",!t.expanded),c.xp6(2),c.Q6J("ngIf",t.expanded),c.xp6(3),c.Q6J("ngIf",t.expanded))},dependencies:[i.mk,i.sg,i.O5,i.PC,x.J,L.f,T._,qt.W,M.r,Ci.g,Ui.u],encapsulation:2,data:{animation:[(0,Ei.X$)("animateicon",[(0,Ei.SB)("open",(0,Ei.oB)({transform:"scale(1, 1)"})),(0,Ei.SB)("closed",(0,Ei.oB)({transform:"scale(1, -1)"})),(0,Ei.eR)("open => closed",[(0,Ei.jt)(".5s")]),(0,Ei.eR)("closed => open",[(0,Ei.jt)(".5s")])]),(0,Ei.X$)("displaycard",[(0,Ei.eR)(":enter",[(0,Ei.oB)({opacity:0,height:"0px",overflow:"hidden"}),(0,Ei.jt)(".5s",(0,Ei.oB)({height:"*",opacity:1})),(0,Ei.oB)({overflow:"unset"})]),(0,Ei.eR)(":leave",[(0,Ei.oB)({overflow:"hidden"}),(0,Ei.jt)(".5s",(0,Ei.oB)({height:"0px",opacity:0}))])])]}}),AdministrationJobLog})(),Oi=(()=>{class AdministrationJobRunButton{constructor(e,t,s,i,n,l,o){this.model=e,this.language=t,this.metadata=s,this.broadcast=i,this.toast=n,this.modal=l,this.backend=o}execute(){this.modal.openModal("SystemLoadingModal",!1).subscribe((e=>{this.backend.postRequest("module/SchedulerJobs/"+this.model.id+"/run").subscribe((t=>{e.instance.self.destroy(),this.model.getData(),t?this.toast.sendToast(this.language.getLabel("MSG_SUCCESSFULLY_EXECUTED"),"success"):this.toast.sendToast(this.language.getLabel("ERR_FAILED_TO_EXECUTE"),"error"),this.broadcast.broadcastMessage("job.run")}),(t=>{e.instance.self.destroy(),this.toast.sendToast(this.language.getLabel("ERR_FAILED_TO_EXECUTE"),"error"),this.broadcast.broadcastMessage("job.run")}))}))}}return AdministrationJobRunButton.ɵfac=function(e){return new(e||AdministrationJobRunButton)(c.Y36(bi.o),c.Y36(p.d),c.Y36(b.Pu),c.Y36(m.f),c.Y36(qe.A),c.Y36(Je.o),c.Y36(u.y))},AdministrationJobRunButton.ɵcmp=c.Xpm({type:AdministrationJobRunButton,selectors:[["administration-job-run-button"]],decls:2,vars:0,consts:[["label","LBL_RUN_NOW"]],template:function(e,t){1&e&&(c.TgZ(0,"span"),c._UZ(1,"system-label",0),c.qZA())},dependencies:[T._],encapsulation:2}),AdministrationJobRunButton})(),Bi=(()=>{class AdministrationJobScheduleButton{constructor(e,t,s,i,n,l,o){this.model=e,this.language=t,this.metadata=s,this.broadcast=i,this.toast=n,this.modal=l,this.backend=o}execute(){this.modal.openModal("SystemLoadingModal",!1).subscribe((e=>{this.backend.postRequest("module/SchedulerJobs/"+this.model.id+"/schedule").subscribe((t=>{e.instance.self.destroy(),this.model.getData(),t?this.toast.sendToast(this.language.getLabel("MSG_SUCCESSFULLY_EXECUTED"),"success"):this.toast.sendToast(this.language.getLabel("ERR_FAILED_TO_EXECUTE"),"error"),this.broadcast.broadcastMessage("job.run")}),(t=>{e.instance.self.destroy(),this.toast.sendToast(this.language.getLabel("ERR_FAILED_TO_EXECUTE"),"error"),this.broadcast.broadcastMessage("job.run")}))}))}}return AdministrationJobScheduleButton.ɵfac=function(e){return new(e||AdministrationJobScheduleButton)(c.Y36(bi.o),c.Y36(p.d),c.Y36(b.Pu),c.Y36(m.f),c.Y36(qe.A),c.Y36(Je.o),c.Y36(u.y))},AdministrationJobScheduleButton.ɵcmp=c.Xpm({type:AdministrationJobScheduleButton,selectors:[["administration-job-schedule-button"]],decls:2,vars:0,consts:[["label","LBL_SCHEDULE_NOW"]],template:function(e,t){1&e&&(c.TgZ(0,"span"),c._UZ(1,"system-label",0),c.qZA())},dependencies:[T._],encapsulation:2}),AdministrationJobScheduleButton})(),Qi=(()=>{class AdministrationJobKillButton{constructor(e,t,s,i){this.model=e,this.toast=t,this.language=s,this.backend=i}get disabled(){return!this.model.getField("process_id")}execute(){this.backend.postRequest(`module/SchedulerJobs/${this.model.id}/kill`).subscribe((e=>{const t=e?"MSG_SUCCESSFULLY_EXECUTED":"ERR_FAILED_TO_EXECUTE",s=e?"success":"error";this.toast.sendToast(this.language.getLabel(t),s)}))}}return AdministrationJobKillButton.ɵfac=function(e){return new(e||AdministrationJobKillButton)(c.Y36(bi.o),c.Y36(qe.A),c.Y36(p.d),c.Y36(u.y))},AdministrationJobKillButton.ɵcmp=c.Xpm({type:AdministrationJobKillButton,selectors:[["administration-job-kill-button"]],decls:2,vars:0,consts:[["label","LBL_KILL"]],template:function(e,t){1&e&&(c.TgZ(0,"span"),c._UZ(1,"system-label",0),c.qZA())},dependencies:[T._],encapsulation:2}),AdministrationJobKillButton})(),Yi=(()=>{class AdministrationJobTaskRunButton{constructor(e,t,s,i,n,l,o){this.model=e,this.language=t,this.metadata=s,this.broadcast=i,this.toast=n,this.modal=l,this.backend=o}execute(){this.modal.openModal("SystemLoadingModal",!1).subscribe((e=>{this.backend.postRequest("module/SchedulerJobTasks/"+this.model.id+"/run").subscribe((t=>{e.instance.self.destroy(),t?this.toast.sendToast(this.language.getLabel("MSG_SUCCESSFULLY_EXECUTED"),"success"):this.toast.sendToast(this.language.getLabel("ERR_FAILED_TO_EXECUTE"),"error"),this.broadcast.broadcastMessage("job.run")}),(t=>{e.instance.self.destroy(),this.toast.sendToast(this.language.getLabel("ERR_FAILED_TO_EXECUTE"),"error"),this.broadcast.broadcastMessage("job.run")}))}))}}return AdministrationJobTaskRunButton.ɵfac=function(e){return new(e||AdministrationJobTaskRunButton)(c.Y36(bi.o),c.Y36(p.d),c.Y36(b.Pu),c.Y36(m.f),c.Y36(qe.A),c.Y36(Je.o),c.Y36(u.y))},AdministrationJobTaskRunButton.ɵcmp=c.Xpm({type:AdministrationJobTaskRunButton,selectors:[["administration-job-task-run-button"]],decls:2,vars:0,consts:[["label","LBL_RUN_NOW"]],template:function(e,t){1&e&&(c.TgZ(0,"span"),c._UZ(1,"system-label",0),c.qZA())},dependencies:[T._],encapsulation:2}),AdministrationJobTaskRunButton})();var zi=s(3814),Pi=s(3634);const Gi=function(e,t){return{module:"SchedulerJobs",id:e,data:t}},Hi=function(){return{link:!0}},Ki=function(){return{fieldtype:"croninterval"}};function ji(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"tr",30)(1,"td"),c._UZ(2,"field-container",31),c.qZA(),c.TgZ(3,"td"),c._UZ(4,"field-container",32),c.qZA(),c.TgZ(5,"td"),c._UZ(6,"field-container",33),c.qZA(),c.TgZ(7,"td",34)(8,"button",35),c.NdJ("click",(function(){const t=c.CHM(e).$implicit,s=c.oxw(2);return c.KtG(s.killJob(t))})),c._UZ(9,"system-button-icon",36),c.qZA()()()}if(2&e){const e=t.$implicit;c.Q6J("system-model-provider",c.WLB(6,Gi,e.id,e)),c.xp6(2),c.Q6J("fieldconfig",c.DdM(9,Hi))("fielddisplayclass","slds-truncate slds-p-horizontal--x-small"),c.xp6(2),c.Q6J("fielddisplayclass","slds-truncate slds-p-horizontal--x-small"),c.xp6(2),c.Q6J("fieldconfig",c.DdM(10,Ki))("fielddisplayclass","slds-truncate slds-p-horizontal--x-small")}}const $i=function(){return{displayLabels:!1,editable:!1}};function Xi(e,t){if(1&e&&(c.TgZ(0,"table",20)(1,"thead")(2,"tr",21)(3,"th",22)(4,"div",23),c._UZ(5,"system-label",24),c.qZA()(),c.TgZ(6,"th",22)(7,"div",23),c._UZ(8,"system-label",25),c.qZA()(),c.TgZ(9,"th",22)(10,"div",23),c._UZ(11,"system-label",26),c.qZA()(),c._UZ(12,"th",27),c.qZA()(),c.TgZ(13,"tbody",28),c.YNc(14,ji,10,11,"tr",29),c.qZA()()),2&e){const e=c.oxw();c.xp6(13),c.Q6J("system-view-provider",c.DdM(3,$i)),c.xp6(1),c.Q6J("ngForOf",e.runningJobs.list)("ngForTrackBy",e.trackByFn)}}function Vi(e,t){1&e&&(c.TgZ(0,"div",37),c._UZ(1,"system-label",38),c.qZA())}function Wi(e,t){1&e&&(c.TgZ(0,"div",37),c._UZ(1,"system-label",39),c.qZA())}function en(e,t){1&e&&(c.TgZ(0,"div",40),c._UZ(1,"system-spinner",41),c.qZA())}const tn=function(){return{border:0,"box-shadow":"none"}};let sn=(()=>{class AdministrationJobRunningList{constructor(e,t,s,i,n){this.metadata=e,this.toast=t,this.modal=s,this.language=i,this.backend=n,this.hasBoxClass=!1,this.runningJobs={list:[],total:0,isLoading:!1}}ngOnInit(){this.reloadList()}reloadList(){this.runningJobs.list=[],this.runningJobs.total=0,this.runningJobs.hasError=!1;const e=this.metadata.getComponentConfig("AdministrationJobRunningList","SchedulerJobs");if(!e.moduleFilter)return this.runningJobs.hasError=!0,console.error("Mssing module filter for component AdministrationJobRunningList");this.runningJobs.isLoading=!0;const t={modulefilter:e.moduleFilter,start:0,limit:20};this.backend.getList("SchedulerJobs",[{sortfield:"last_run_date",sortdirection:"DESC"}],t).subscribe((e=>{this.runningJobs.list=e.list,this.runningJobs.total=e.totalcount,this.runningJobs.isLoading=!1}),(e=>{this.runningJobs.hasError=!0,this.runningJobs.isLoading=!1}))}loadMore(){if(this.runningJobs.isLoading||this.runningJobs.list.length>=this.runningJobs.total)return!1;const e=this.metadata.getComponentConfig("AdministrationJobRunningList","SchedulerJobs");if(!e.moduleFilter)return this.runningJobs.hasError=!0,console.error("Mssing module filter for component AdministrationJobRunningList");this.runningJobs.isLoading=!0;const t={modulefilter:e.moduleFilter,start:this.runningJobs.list.length,limit:20};this.backend.getList("SchedulerJobs",[{sortfield:"last_run_date",sortdirection:"DESC"}],t).subscribe((e=>{this.runningJobs.list=e.list,this.runningJobs.total=e.totalcount,this.runningJobs.isLoading=!1}),(e=>{this.runningJobs.hasError=!0,this.runningJobs.isLoading=!1}))}killJob(e){this.modal.confirm("MSG_CONFIRM_KILL",this.language.getLabel("LBL_KILL")).subscribe((t=>{t&&this.backend.postRequest(`module/SchedulerJobs/${e.id}/kill`).subscribe((e=>{const t=e?"MSG_SUCCESSFULLY_EXECUTED":"ERR_FAILED_TO_EXECUTE",s=e?"success":"error";e&&this.reloadList(),this.toast.sendToast(this.language.getLabel(t),s)}))}))}trackByFn(e,t){return t.id}}return AdministrationJobRunningList.ɵfac=function(e){return new(e||AdministrationJobRunningList)(c.Y36(b.Pu),c.Y36(qe.A),c.Y36(Je.o),c.Y36(p.d),c.Y36(u.y))},AdministrationJobRunningList.ɵcmp=c.Xpm({type:AdministrationJobRunningList,selectors:[["administration-job-running-list"]],inputs:{hasBoxClass:"hasBoxClass"},decls:24,vars:9,consts:[[1,"slds-card","slds-card_boundary","slds-grid","slds-grid--vertical","slds-grow","slds-height_full",2,"min-height","0",3,"ngStyle"],[1,"slds-card__header","slds-grid","slds-grid--vertical-align-center"],[1,"slds-media","slds-media--center","slds-has-flexi-truncate"],["icon","custom6","sprite","custom","divClass"," ",1,"slds-m-right--small",2,"transform","rotate(90deg)"],[1,"slds-media__body","slds-truncate","slds-grid","slds-grid--vertical-align-center"],["href","javascript:void(0);",1,"slds-text-link--reset"],[1,"slds-text-heading--small"],["label","LBL_RUNNING_JOBS"],["label","LBL_OF"],[1,"slds-button","slds-button--icon",3,"click"],["icon","refresh",1,"slds-p-horizontal--xxx-small"],[1,"slds-grow","slds-grid","slds-grid--vertical",2,"min-height","0"],[1,"slds-card__body","slds-size--1-of-1","slds-grid","slds-grid--vertical","slds-grow","slds-scrollable--y",2,"min-height","0","flex","initial"],["class","slds-table slds-table--bordered slds-table--cell-buffer slds-table--fixed-layout slds-table--header-fixed","role","grid",4,"ngIf"],["class","slds-align_absolute-center slds-height_full slds-has-divider--top-space slds-size--1-of-1",4,"ngIf"],["class","slds-align_absolute-center slds-p-bottom--small slds-height_full slds-has-divider--top-space slds-size--1-of-1",4,"ngIf"],[1,"slds-card__footer","slds-p-around--xx-small"],[1,"slds-grid","slds-grid--align-center",2,"min-height","32px"],[1,"slds-button",3,"disabled","click"],["label","LBL_MORE"],["role","grid",1,"slds-table","slds-table--bordered","slds-table--cell-buffer","slds-table--fixed-layout","slds-table--header-fixed"],[1,"slds-line-height_reset"],["scope","col"],[1,"slds-truncate"],["label","LBL_NAME"],["label","LBL_RUNNING_SINCE"],["label","LBL_INTERVAL"],["scope","col",1,"slds-cell-shrink"],[3,"system-view-provider"],["class","slds-hint-parent",3,"system-model-provider",4,"ngFor","ngForOf","ngForTrackBy"],[1,"slds-hint-parent",3,"system-model-provider"],["field","name",3,"fieldconfig","fielddisplayclass"],["field","last_run_date",3,"fielddisplayclass"],["field","job_interval",3,"fieldconfig","fielddisplayclass"],[1,"slds-cell-shrink"],["system-title","LBL_KILL",1,"slds-button","slds-button--icon",3,"click"],["icon","stop"],[1,"slds-align_absolute-center","slds-height_full","slds-has-divider--top-space","slds-size--1-of-1"],["label","MSG_NO_RECORDS_FOUND",1,"slds-p-top--small"],["label","ERR_LOADING_RECORDS",1,"slds-p-top--small"],[1,"slds-align_absolute-center","slds-p-bottom--small","slds-height_full","slds-has-divider--top-space","slds-size--1-of-1"],[1,"slds-p-top--small"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0)(1,"div",1)(2,"header",2),c._UZ(3,"system-icon",3),c.TgZ(4,"div",4)(5,"h2")(6,"a",5)(7,"span",6),c._UZ(8,"system-label",7),c._uU(9),c._UZ(10,"system-label",8),c._uU(11),c.qZA()()()()(),c.TgZ(12,"button",9),c.NdJ("click",(function(){return t.reloadList()})),c._UZ(13,"system-button-icon",10),c.qZA()(),c.TgZ(14,"div",11)(15,"div",12),c.YNc(16,Xi,15,4,"table",13),c.YNc(17,Vi,2,0,"div",14),c.YNc(18,Wi,2,0,"div",14),c.YNc(19,en,2,0,"div",15),c.qZA()(),c.TgZ(20,"footer",16)(21,"div",17)(22,"button",18),c.NdJ("click",(function(){return t.loadMore()})),c._UZ(23,"system-label",19),c.qZA()()()()),2&e&&(c.Q6J("ngStyle",t.hasBoxClass?void 0:c.DdM(8,tn)),c.xp6(9),c.hij(" (",t.runningJobs.list.length," "),c.xp6(2),c.hij(" ",t.runningJobs.total,") "),c.xp6(5),c.Q6J("ngIf",t.runningJobs.list.length>0),c.xp6(1),c.Q6J("ngIf",!t.runningJobs.hasError&&!t.runningJobs.isLoading&&0==t.runningJobs.list.length),c.xp6(1),c.Q6J("ngIf",!t.runningJobs.isLoading&&t.runningJobs.hasError),c.xp6(1),c.Q6J("ngIf",t.runningJobs.isLoading),c.xp6(3),c.Q6J("disabled",t.runningJobs.hasError||t.runningJobs.isLoading||t.runningJobs.list.length==t.runningJobs.total))},dependencies:[i.sg,i.O5,i.PC,x.J,L.f,T._,qt.W,Ui.u,zi.V,xs.S,Pi.j],encapsulation:2}),AdministrationJobRunningList})();const nn=function(e,t){return{module:"SchedulerJobs",id:e,data:t}},ln=function(){return{link:!0}},on=function(){return{truncate:!0}};function an(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"tr",30)(1,"td"),c._UZ(2,"field-container",31),c.qZA(),c.TgZ(3,"td"),c._UZ(4,"field-container",32),c.qZA(),c.TgZ(5,"td"),c._UZ(6,"field-container",33),c.qZA(),c.TgZ(7,"td",34)(8,"button",35),c.NdJ("click",(function(){const t=c.CHM(e).$implicit,s=c.oxw(2);return c.KtG(s.openMessageInModal(t.last_run_message,t.resolution))})),c._UZ(9,"system-button-icon",36),c.qZA()()()}if(2&e){const e=t.$implicit;c.Q6J("system-model-provider",c.WLB(6,nn,e.id,e)),c.xp6(2),c.Q6J("fieldconfig",c.DdM(9,ln))("fielddisplayclass","slds-truncate slds-p-horizontal--x-small"),c.xp6(2),c.Q6J("fielddisplayclass","slds-truncate slds-p-horizontal--x-small"),c.xp6(2),c.Q6J("fieldconfig",c.DdM(10,on))("fielddisplayclass","slds-truncate slds-p-horizontal--x-small")}}const dn=function(){return{displayLabels:!1,editable:!1}};function rn(e,t){if(1&e&&(c.TgZ(0,"table",20)(1,"thead")(2,"tr",21)(3,"th",22)(4,"div",23),c._UZ(5,"system-label",24),c.qZA()(),c.TgZ(6,"th",22)(7,"div",23),c._UZ(8,"system-label",25),c.qZA()(),c.TgZ(9,"th",22)(10,"div",23),c._UZ(11,"system-label",26),c.qZA()(),c._UZ(12,"th",27),c.qZA()(),c.TgZ(13,"tbody",28),c.YNc(14,an,10,11,"tr",29),c.qZA()()),2&e){const e=c.oxw();c.xp6(13),c.Q6J("system-view-provider",c.DdM(3,dn)),c.xp6(1),c.Q6J("ngForOf",e.failedJobs.list)("ngForTrackBy",e.trackByFn)}}function cn(e,t){1&e&&(c.TgZ(0,"div",37),c._UZ(1,"system-label",38),c.qZA())}function gn(e,t){1&e&&(c.TgZ(0,"div",37),c._UZ(1,"system-label",39),c.qZA())}function un(e,t){1&e&&(c.TgZ(0,"div",40),c._UZ(1,"system-spinner",41),c.qZA())}const mn=function(){return{border:0,"box-shadow":"none"}};let pn=(()=>{class AdministrationJobFailedList{constructor(e,t,s,i){this.language=e,this.modal=t,this.metadata=s,this.backend=i,this.hasBoxClass=!1,this.failedJobs={list:[],total:0,isLoading:!1}}ngOnInit(){this.reloadList()}reloadList(){this.failedJobs.list=[],this.failedJobs.total=0,this.failedJobs.hasError=!1;const e=this.metadata.getComponentConfig("AdministrationJobFailedList","SchedulerJobs");if(!e.moduleFilter)return this.failedJobs.hasError=!0,console.error("Mssing module filter for component AdministrationJobFailedList");this.failedJobs.isLoading=!0;const t={modulefilter:e.moduleFilter,start:0,limit:20};this.backend.getList("SchedulerJobs",[{sortfield:"last_run_date",sortdirection:"DESC"}],t).subscribe((e=>{this.failedJobs.list=e.list,this.failedJobs.total=e.totalcount,this.failedJobs.isLoading=!1}),(e=>{this.failedJobs.isLoading=!1,this.failedJobs.hasError=!0}))}loadMore(){if(this.failedJobs.isLoading||this.failedJobs.list.length>=this.failedJobs.total)return!1;const e=this.metadata.getComponentConfig("AdministrationJobFailedList","SchedulerJobs");if(!e.moduleFilter)return this.failedJobs.hasError=!0,console.error("Mssing module filter for component AdministrationJobFailedList");this.failedJobs.isLoading=!0;const t={modulefilter:e.moduleFilter,start:this.failedJobs.list.length,limit:20};this.backend.getList("SchedulerJobs",[{sortfield:"last_run_date",sortdirection:"DESC"}],t).subscribe((e=>{this.failedJobs.list=e.list,this.failedJobs.total=e.totalcount,this.failedJobs.isLoading=!1}),(e=>{this.failedJobs.isLoading=!1,this.failedJobs.hasError=!0}))}openMessageInModal(e,t){const s="failed"==t?"error":"success";this.modal.info(e,this.language.getLabel("LBL_MESSAGE"),s)}trackByFn(e,t){return t.id}}return AdministrationJobFailedList.ɵfac=function(e){return new(e||AdministrationJobFailedList)(c.Y36(p.d),c.Y36(Je.o),c.Y36(b.Pu),c.Y36(u.y))},AdministrationJobFailedList.ɵcmp=c.Xpm({type:AdministrationJobFailedList,selectors:[["administration-job-failed-list"]],inputs:{hasBoxClass:"hasBoxClass"},decls:24,vars:9,consts:[[1,"slds-card","slds-card_boundary","slds-grid","slds-grid--vertical","slds-grow","slds-height_full",2,"min-height","0",3,"ngStyle"],[1,"slds-card__header","slds-grid","slds-grid--vertical-align-center"],[1,"slds-media","slds-media--center","slds-has-flexi-truncate"],["icon","custom82","sprite","custom"],[1,"slds-media__body","slds-truncate","slds-grid","slds-grid--vertical-align-center"],["href","javascript:void(0);",1,"slds-text-link--reset"],[1,"slds-text-heading--small"],["label","LBL_FAILED_JOBS"],["label","LBL_OF"],[1,"slds-button","slds-button--icon",3,"click"],["icon","refresh",1,"slds-p-horizontal--xxx-small"],[1,"slds-grow","slds-grid","slds-grid--vertical",2,"min-height","0"],[1,"slds-card__body","slds-size--1-of-1","slds-grid","slds-grid--vertical","slds-grow","slds-scrollable--y",2,"min-height","0","flex","initial"],["class","slds-table slds-table--bordered slds-table--cell-buffer slds-table--fixed-layout slds-table--header-fixed","role","grid",4,"ngIf"],["class","slds-align_absolute-center slds-height_full slds-has-divider--top-space slds-size--1-of-1",4,"ngIf"],["class","slds-align_absolute-center slds-p-bottom--small slds-height_full slds-has-divider--top-space slds-size--1-of-1",4,"ngIf"],[1,"slds-card__footer","slds-p-around--xx-small"],[1,"slds-grid","slds-grid--align-center",2,"min-height","32px"],[1,"slds-button",3,"disabled","click"],["label","LBL_MORE"],["role","grid",1,"slds-table","slds-table--bordered","slds-table--cell-buffer","slds-table--fixed-layout","slds-table--header-fixed"],[1,"slds-line-height_reset"],["scope","col"],[1,"slds-truncate"],["label","LBL_NAME"],["label","LBL_LAST_RUN"],["label","LBL_LAST_MESSAGE"],["scope","col",1,"slds-cell-shrink"],[3,"system-view-provider"],["class","slds-hint-parent",3,"system-model-provider",4,"ngFor","ngForOf","ngForTrackBy"],[1,"slds-hint-parent",3,"system-model-provider"],["field","name",3,"fieldconfig","fielddisplayclass"],["field","last_run_date",3,"fielddisplayclass"],["field","last_run_message",3,"fieldconfig","fielddisplayclass"],[1,"slds-cell-shrink"],["system-title","LBL_LAST_MESSAGE",1,"slds-button","slds-button--icon",3,"click"],["icon","info"],[1,"slds-align_absolute-center","slds-height_full","slds-has-divider--top-space","slds-size--1-of-1"],["label","MSG_NO_RECORDS_FOUND",1,"slds-p-top--small"],["label","ERR_LOADING_RECORDS",1,"slds-p-top--small"],[1,"slds-align_absolute-center","slds-p-bottom--small","slds-height_full","slds-has-divider--top-space","slds-size--1-of-1"],[1,"slds-p-top--small"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0)(1,"div",1)(2,"header",2),c._UZ(3,"system-icon",3),c.TgZ(4,"div",4)(5,"h2")(6,"a",5)(7,"span",6),c._UZ(8,"system-label",7),c._uU(9),c._UZ(10,"system-label",8),c._uU(11),c.qZA()()()()(),c.TgZ(12,"button",9),c.NdJ("click",(function(){return t.reloadList()})),c._UZ(13,"system-button-icon",10),c.qZA()(),c.TgZ(14,"div",11)(15,"div",12),c.YNc(16,rn,15,4,"table",13),c.YNc(17,cn,2,0,"div",14),c.YNc(18,gn,2,0,"div",14),c.YNc(19,un,2,0,"div",15),c.qZA()(),c.TgZ(20,"footer",16)(21,"div",17)(22,"button",18),c.NdJ("click",(function(){return t.loadMore()})),c._UZ(23,"system-label",19),c.qZA()()()()),2&e&&(c.Q6J("ngStyle",t.hasBoxClass?void 0:c.DdM(8,mn)),c.xp6(9),c.hij(" (",t.failedJobs.list.length," "),c.xp6(2),c.hij(" ",t.failedJobs.total,") "),c.xp6(5),c.Q6J("ngIf",t.failedJobs.list.length>0),c.xp6(1),c.Q6J("ngIf",!t.failedJobs.hasError&&!t.failedJobs.isLoading&&0==t.failedJobs.list.length),c.xp6(1),c.Q6J("ngIf",!t.failedJobs.isLoading&&t.failedJobs.hasError),c.xp6(1),c.Q6J("ngIf",t.failedJobs.isLoading),c.xp6(3),c.Q6J("disabled",t.failedJobs.isLoading||t.failedJobs.list.length==t.failedJobs.total))},dependencies:[i.sg,i.O5,i.PC,x.J,L.f,T._,qt.W,Ui.u,zi.V,xs.S,Pi.j],encapsulation:2}),AdministrationJobFailedList})();var hn=s(2644),bn=s(7228),fn=s(7954);function _n(e,t){if(1&e&&(c.TgZ(0,"div",12),c._UZ(1,"object-listview-aggregate",13),c.qZA()),2&e){const e=t.$implicit;c.xp6(1),c.Q6J("aggregate",e)}}const Zn=function(e){return{module:e}};function An(e,t){if(1&e&&(c.TgZ(0,"div",9)(1,"div",10),c.YNc(2,_n,2,1,"div",11),c.qZA()()),2&e){const e=c.oxw();c.Q6J("@animatepanel",void 0)("system-model-provider",c.VKq(3,Zn,e.modelList.module)),c.xp6(2),c.Q6J("ngForOf",e.modelList.moduleAggregates)}}let yn=(()=>{class AdministrationJobCockpit{constructor(e,t){this.model=e,this.modelList=t}}return AdministrationJobCockpit.ɵfac=function(e){return new(e||AdministrationJobCockpit)(c.Y36(bi.o),c.Y36(hn.t))},AdministrationJobCockpit.ɵcmp=c.Xpm({type:AdministrationJobCockpit,selectors:[["administration-job-cockpit"]],decls:10,vars:3,consts:[[1,"slds-grid","slds-height_full"],[1,"slds-height_full","slds-size--1-of-2","slds-border--right","slds-p-around--medium"],[1,"slds-p-bottom--small","slds-grid","slds-grid--vertical",2,"max-height","50%"],[1,"slds-grid","slds-grid--vertical","slds-grow",2,"min-height","0",3,"hasBoxClass"],[1,"slds-p-top--small","slds-grid","slds-grid--vertical",2,"max-height","50%"],[1,"slds-size--1-of-2","slds-height_full","slds-grid","slds-grid--vertical"],[1,"slds-grow","slds-is-relative",2,"display","block","width","100%","min-height","0"],[1,"slds-grow","slds-height_full","slds-size--1-of-1",2,"display","block"],["class","slds-is-absolute slds-panel slds-panel--filters slds-filters__body slds-nowrap  slds-scrollable--y","style","width: 320px; height: 100%; top:0; right: 0;z-index: 99;",3,"system-model-provider",4,"ngIf"],[1,"slds-is-absolute","slds-panel","slds-panel--filters","slds-filters__body","slds-nowrap","slds-scrollable--y",2,"width","320px","height","100%","top","0","right","0","z-index","99",3,"system-model-provider"],[1,"slds-filters__body","slds-grid_vertical"],["class","slds-m-vertical--xx-small",4,"ngFor","ngForOf"],[1,"slds-m-vertical--xx-small"],[3,"aggregate"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0)(1,"div",1)(2,"div",2),c._UZ(3,"administration-job-running-list",3),c.qZA(),c.TgZ(4,"div",4),c._UZ(5,"administration-job-failed-list",3),c.qZA()(),c.TgZ(6,"div",5)(7,"div",6),c._UZ(8,"object-list",7),c.YNc(9,An,3,5,"div",8),c.qZA()()()),2&e&&(c.xp6(3),c.Q6J("hasBoxClass",!0),c.xp6(2),c.Q6J("hasBoxClass",!0),c.xp6(4),c.Q6J("ngIf",t.modelList.displayAggregates))},dependencies:[i.sg,i.O5,Ui.u,bn.s,fn.i,sn,pn],encapsulation:2}),AdministrationJobCockpit})();var vn=s(6625),xn=s(5920);let Ln=(()=>{class dictionary{constructor(e,t,s,i){this.http=e,this.configurationService=t,this.session=s,this.metadata=i,this.data=[],this.dictionaryitem="",this.dictionaryfields=[]}load(e){let t=new Ae.x;return this.dictionaryitem=e,this.http.get(this.configurationService.getBackendUrl()+"/dictionary/list/"+e+"?sessionid="+this.session.authData.sessionId).subscribe((e=>{this.data=e.items,this.dictionaryfields=e.fields,t.next(e),t.complete()})),t.asObservable()}getFields(){let e=[];for(let t of this.dictionaryfields)"id"!==t&&e.push(t);return e}}return dictionary.ɵfac=function(e){return new(e||dictionary)(c.LFG(Ft.eN),c.LFG(vn.C),c.LFG(xn.n),c.LFG(b.Pu))},dictionary.ɵprov=c.Yz7({token:dictionary,factory:dictionary.ɵfac}),dictionary})();const Tn=["administration-dictionarymanager-item-field",""];function Mn(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"p",2)(1,"span"),c._uU(2),c.qZA(),c.TgZ(3,"button",3),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw();return c.KtG(t.setEditMode())})),c.O4$(),c.TgZ(4,"svg",4),c._UZ(5,"use",5),c.qZA()()()}if(2&e){const e=c.oxw();c.xp6(2),c.Oqu(e.fieldvalue)}}function Jn(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",6)(1,"input",7),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.fieldvalue=t)})),c.qZA()()}if(2&e){const e=c.oxw();c.xp6(1),c.Q6J("ngModel",e.fieldvalue)}}function qn(e,t){if(1&e&&(c.TgZ(0,"th",12)(1,"a",13)(2,"span",14),c._uU(3),c.qZA()()()),2&e){const e=t.$implicit;c.xp6(3),c.Oqu(e)}}function En(e,t){if(1&e&&c._UZ(0,"tr",15),2&e){const e=t.$implicit;c.Q6J("item",e)}}function Cn(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"footer",16)(1,"ul",17)(2,"li",18)(3,"button",19),c._uU(4,"Save"),c.qZA()(),c.TgZ(5,"li",18)(6,"button",20),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw();return c.KtG(t.closeEditMode())})),c._uU(7,"Cancel"),c.qZA()()()()}}const Un=["administration-dictionarymanager-item",""];function Nn(e,t){if(1&e&&(c.TgZ(0,"td",1),c._UZ(1,"div",2),c.qZA()),2&e){const e=t.$implicit,s=c.oxw();c.xp6(1),c.Q6J("field",e)("id",s.item.id)("inputvalue",s.item[e])}}let kn=(()=>{class AdministrationDictionaryManagerItemField{constructor(e){this.dictionary=e,this.field="",this.id="",this.inputvalue="",this.editMode=!1}get fieldvalue(){return this.inputvalue}set fieldvalue(e){}isEditMode(){return this.editMode}setEditMode(){this.editMode=!0}closeEdit(){this.editMode=!1}ngAfterViewInit(){}ngOnInit(){}}return AdministrationDictionaryManagerItemField.ɵfac=function(e){return new(e||AdministrationDictionaryManagerItemField)(c.Y36(Ln))},AdministrationDictionaryManagerItemField.ɵcmp=c.Xpm({type:AdministrationDictionaryManagerItemField,selectors:[["","administration-dictionarymanager-item-field",""]],inputs:{field:"field",id:"id",inputvalue:"inputvalue"},attrs:Tn,decls:2,vars:2,consts:[["class","slds-text-body--regular slds-truncate spice-fieldbody",4,"ngIf"],["class","slds-form-element__control",4,"ngIf"],[1,"slds-text-body--regular","slds-truncate","spice-fieldbody"],[1,"slds-button","slds-button--icon",2,"float","right",3,"click"],["aria-hidden","true",1,"slds-button__icon"],[0,"xlink","href","./vendor/sldassets/icons/utility-sprite/svg/symbols.svg#edit"],[1,"slds-form-element__control"],["type","text",1,"slds-input",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(c.YNc(0,Mn,6,1,"p",0),c.YNc(1,Jn,2,1,"div",1)),2&e&&(c.Q6J("ngIf",!t.isEditMode()),c.xp6(1),c.Q6J("ngIf",t.isEditMode()))},dependencies:[i.O5,n.Fj,n.JJ,n.On],encapsulation:2}),AdministrationDictionaryManagerItemField})(),Sn=(()=>{class AdministrationDictionaryManager{constructor(e){this.dictionary=e,this.dictionaryitem=""}ngAfterViewInit(){this.dictionary.load(this.dictionaryitem).subscribe((e=>{}))}isEditMode(){}closeEditMode(){}}return AdministrationDictionaryManager.ɵfac=function(e){return new(e||AdministrationDictionaryManager)(c.Y36(Ln))},AdministrationDictionaryManager.ɵcmp=c.Xpm({type:AdministrationDictionaryManager,selectors:[["administration-dictionarymanager"]],inputs:{dictionaryitem:"dictionaryitem"},features:[c._Bn([Ln])],decls:16,vars:5,consts:[["role","banner",1,"slds-page-header"],[1,"slds-grid"],[1,"slds-col","slds-has-flexi-truncate"],[1,"slds-media","slds-no-space","slds-grow"],[1,"slds-media__body"],[1,"slds-page-header__title","slds-m-right--small","slds-align-middle","slds-truncate"],[1,"slds-text-title--caps","slds-line-height--reset"],["role","grid",1,"slds-table","slds-table--bordered","slds-table--fixed-layout"],[1,"slds-text-title--caps"],["class","slds-is-sortable slds-is-resizable","scope","col",4,"ngFor","ngForOf"],["administration-dictionarymanager-item","","class","slds-hint-parent",3,"item",4,"ngFor","ngForOf"],["class","slds-utility-bar_container","role","footer",4,"ngIf"],["scope","col",1,"slds-is-sortable","slds-is-resizable"],["href","javascript:void(0);",1,"slds-th__action","slds-text-link--reset"],[1,"slds-truncate"],["administration-dictionarymanager-item","",1,"slds-hint-parent",3,"item"],["role","footer",1,"slds-utility-bar_container"],[1,"slds-utility-bar"],[1,"slds-utility-bar__item"],[1,"slds-button","slds-utility-bar__action","slds-button--brand"],[1,"slds-button","slds-utility-bar__action","slds-button--brand",3,"click"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h1",5),c._uU(6),c.qZA(),c.TgZ(7,"p",6),c._uU(8),c.qZA()()()()()(),c.TgZ(9,"table",7)(10,"thead")(11,"tr",8),c.YNc(12,qn,4,1,"th",9),c.qZA()(),c.TgZ(13,"tbody"),c.YNc(14,En,1,1,"tr",10),c.qZA()(),c.YNc(15,Cn,8,0,"footer",11)),2&e&&(c.xp6(6),c.hij("Dictionary ",t.dictionaryitem,""),c.xp6(2),c.hij("",t.dictionary.data.length," Items"),c.xp6(4),c.Q6J("ngForOf",t.dictionary.getFields()),c.xp6(2),c.Q6J("ngForOf",t.dictionary.data),c.xp6(1),c.Q6J("ngIf",t.isEditMode()))},dependencies:function(){return[i.sg,i.O5,Fn]},encapsulation:2}),AdministrationDictionaryManager})(),Fn=(()=>{class AdministrationDictionaryManagerItem{constructor(e){this.dictionary=e,this.item={},this.editMode=!1}isEditMode(){return this.editMode}setEditMode(){this.editMode=!0}closeEdit(){this.editMode=!1}ngAfterViewInit(){}ngOnInit(){}}return AdministrationDictionaryManagerItem.ɵfac=function(e){return new(e||AdministrationDictionaryManagerItem)(c.Y36(Ln))},AdministrationDictionaryManagerItem.ɵcmp=c.Xpm({type:AdministrationDictionaryManagerItem,selectors:[["","administration-dictionarymanager-item",""]],inputs:{item:"item"},attrs:Un,decls:1,vars:1,consts:[["scope","row",4,"ngFor","ngForOf"],["scope","row"],["administration-dictionarymanager-item-field","",1,"slds-truncate",3,"field","id","inputvalue"]],template:function(e,t){1&e&&c.YNc(0,Nn,2,3,"td",0),2&e&&c.Q6J("ngForOf",t.dictionary.getFields())},dependencies:[i.sg,kn],encapsulation:2}),AdministrationDictionaryManagerItem})();var Rn=s(5547),In=s(9503),wn=s(8658),Dn=s(3772),On=s(638);const Bn=["*"];let Qn=(()=>{class AdministrationGeneralSettings{constructor(e,t,s,i,n,l){this.metadata=e,this.language=t,this.backend=s,this.modal=i,this.toast=n,this.currency=l,this.settings={system:{name:"",site_url:"",unique_key:""},advanced:{developerMode:0,stack_trace_errors:!1,dump_slow_queries:!1,slow_query_time_msec:0,upload_maxsize:0},logger:{level:"",file:{name:"spicecrm",ext:"",maxLogs:10,maxSize:"10MB",suffix:""}}},this.options=[],this.currencies=[],this.loading=!0,this._loglevels=[]}ngOnInit(){this.modal.openModal("SystemLoadingModal").subscribe((e=>{this.backend.getRequest("configuration/settings").subscribe((t=>{switch(t.logger.file||(t.logger.file={}),this.settings=t,this.settings.advanced.developerMode){case!0:this.settings.advanced.developerMode="1";break;case!1:this.settings.advanced.developerMode="0"}this._loglevels=this.settings.logger.level.split(","),this.loading=!1,e.instance.self.destroy()}))}))}save(){this.modal.openModal("SystemLoadingModal").subscribe((e=>{this.backend.postRequest("configuration/settings",{},this.settings).subscribe((e=>{e.status?this.toast.sendToast(this.language.getLabel("LBL_SUCCESS"),"success"):this.toast.sendToast(this.language.getLabel("LBL_ERROR"),"error")})),e.instance.self.destroy()}))}get loglevels(){return this._loglevels}set loglevels(e){this._loglevels=e,this.settings.logger.level=e.join(",")}get loggerMaxSize(){return(this.settings.logger.file.maxSize??"").replace("MB","")}set loggerMaxSize(e){this.settings.logger.file.maxSize=e+"MB"}}return AdministrationGeneralSettings.ɵfac=function(e){return new(e||AdministrationGeneralSettings)(c.Y36(b.Pu),c.Y36(p.d),c.Y36(u.y),c.Y36(Je.o),c.Y36(qe.A),c.Y36(Rn.A))},AdministrationGeneralSettings.ɵcmp=c.Xpm({type:AdministrationGeneralSettings,selectors:[["administration-general-setting"]],ngContentSelectors:Bn,decls:113,vars:16,consts:[[1,"slds-p-around--medium","slds-theme--shade"],[1,"slds-page-header__row"],[1,"slds-page-header__col-title"],[1,"slds-media"],["icon","settings"],[1,"slds-media__body"],[1,"slds-page-header__name"],[1,"slds-page-header__name-title"],[1,"slds-page-header__title","slds-truncate"],["label","LBL_GENERAL_SETTINGS"],[1,"slds-page-header__name-meta"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_SAVE"],[1,"slds-theme--default","slds-p-around--xx-small"],[1,"slds-section","slds-is-open"],[1,"slds-section__title"],["aria-expanded","true",1,"slds-button","slds-section__title-action"],[1,"slds-truncate"],[1,"slds-section__content"],[1,"slds-grid","slds-m-vertical--xx-small","slds-grid--align-spread"],[1,"slds-form-element__control","slds-size--1-of-1","slds-p-around--x-small"],["label","LBL_NAME"],["autocomplete","off",3,"ngModel","ngModelChange"],["label","LBL_SITE_URL"],["label","LBL_UNIQUE_KEY"],["autocomplete","off",3,"disabled","ngModel","ngModelChange"],["label","LBL_ADVANCED_SETTINGS"],[1,"slds-p-around--x-small"],[1,"slds-form-element"],[1,"slds-form-element__label"],["label","LBL_DEVELOPER_MODE"],[1,"slds-form-element__control"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],["value","0"],["value","1"],["value","2"],[1,"slds-form-element__control","slds-size--1-of-6","slds-truncate","slds-p-around--x-small"],["label","LBL_STACKTRACE"],[1,"slds-p-vertical--xx-small"],[3,"ngModel","ngModelChange"],["label","LBL_LOG_SLOW_QUERIES"],[1,"slds-form-element__control","slds-size--1-of-2","slds-p-around--x-small"],["label","LBL_SLOW_QUERYTIME_TRESHHOLD"],["label","LBL_MAXIMUM_UPLOAD_SIZE"],["label","LBL_EXPORT_LINES"],[3,"disabled","ngModel","ngModelChange"],["label","LBL_LOGGER_SETTINGS"],[1,"slds-grid","slds-m-vertical--xx-small"],[1,"slds-size--1-of-2"],["label","LBL_LOGFILE_NAME"],[1,"slds-grid","slds-p-around--x-small"],[1,"slds-form-element__control","slds-size--5-of-6","slds-p-right--x-small"],[1,"slds-form-element__control","slds-size--1-of-6","slds-p-left--x-small"],[1,"slds-grid"],["label","LBL_LOGFILE_MAX_SIZE"],[1,"slds-grid","slds-grid--vertical-align-center"],["autocomplete","off",1,"slds-grow",3,"ngModel","ngModelChange"],[1,"slds-p-left--x-small"],["label","LBL_LOGFILE_MAX_NUMBER"],[1,"slds-size--1-of-2","slds-grid","slds-grid--vertical"],["label","LBL_LOGFILE_LEVEL"],[1,"slds-grid","slds-wrap",3,"ngModel","ngModelChange"],["value","debug",1,"slds-size--1-of-2","slds-p-vertical--xxx-small"],["label","LBL_LOGLEVEL_DEBUG"],["value","info",1,"slds-size--1-of-2","slds-p-vertical--xxx-small"],["label","LBL_LOGLEVEL_INFO"],["value","error",1,"slds-size--1-of-2","slds-p-vertical--xxx-small"],["label","LBL_LOGLEVEL_ERROR"],["value","warn",1,"slds-size--1-of-2","slds-p-vertical--xxx-small"],["label","LBL_LOGLEVEL_WARN"],["value","security",1,"slds-size--1-of-2","slds-p-vertical--xxx-small"],["label","LBL_LOGLEVEL_SECURITY"],["value","fatal",1,"slds-size--1-of-2","slds-p-vertical--xxx-small"],["label","LBL_LOGLEVEL_FATAL"]],template:function(e,t){1&e&&(c.F$t(),c.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),c._UZ(4,"system-icon",4),c.TgZ(5,"div",5)(6,"div",6)(7,"div",7)(8,"h1")(9,"span",8),c._UZ(10,"system-label",9),c.qZA()()()(),c.TgZ(11,"p",10),c.Hsn(12),c.qZA()()()(),c.TgZ(13,"button",11),c.NdJ("click",(function(){return t.save()})),c._UZ(14,"system-label",12),c.qZA()()(),c.TgZ(15,"div",13)(16,"div",14)(17,"h3",15)(18,"button",16)(19,"span",17),c._UZ(20,"system-label",9),c.qZA()()(),c.TgZ(21,"div",18)(22,"div",19)(23,"div",20),c._UZ(24,"system-label",21),c.TgZ(25,"system-input-text",22),c.NdJ("ngModelChange",(function(e){return t.settings.system.name=e})),c.qZA()()(),c.TgZ(26,"div",19)(27,"div",20),c._UZ(28,"system-label",23),c.TgZ(29,"system-input-text",22),c.NdJ("ngModelChange",(function(e){return t.settings.system.site_url=e})),c.qZA()()(),c.TgZ(30,"div",19)(31,"div",20),c._UZ(32,"system-label",24),c.TgZ(33,"system-input-text",25),c.NdJ("ngModelChange",(function(e){return t.settings.system.unique_key=e})),c.qZA()()()()(),c.TgZ(34,"div",14)(35,"h3",15)(36,"button",16)(37,"span",17),c._UZ(38,"system-label",26),c.qZA()()(),c.TgZ(39,"div",18)(40,"div",19)(41,"div",27)(42,"div",28)(43,"label",29),c._UZ(44,"system-label",30),c.qZA(),c.TgZ(45,"div",31)(46,"div",32)(47,"select",33),c.NdJ("ngModelChange",(function(e){return t.settings.advanced.developerMode=e})),c.TgZ(48,"option",34),c._uU(49,"off"),c.qZA(),c.TgZ(50,"option",35),c._uU(51,"on"),c.qZA(),c.TgZ(52,"option",36),c._uU(53,"on Request"),c.qZA()()()()()(),c.TgZ(54,"div",37),c._UZ(55,"system-label",38),c.TgZ(56,"div",39)(57,"system-checkbox",40),c.NdJ("ngModelChange",(function(e){return t.settings.advanced.stack_trace_errors=e})),c.qZA()()(),c.TgZ(58,"div",37),c._UZ(59,"system-label",41),c.TgZ(60,"div",39)(61,"system-checkbox",40),c.NdJ("ngModelChange",(function(e){return t.settings.advanced.dump_slow_queries=e})),c.qZA()()(),c.TgZ(62,"div",42),c._UZ(63,"system-label",43),c.TgZ(64,"system-input-integer",40),c.NdJ("ngModelChange",(function(e){return t.settings.advanced.slow_query_time_msec=e})),c.qZA()()(),c.TgZ(65,"div",19)(66,"div",42),c._UZ(67,"system-label",44),c.TgZ(68,"system-input-integer",40),c.NdJ("ngModelChange",(function(e){return t.settings.advanced.upload_maxsize=e})),c.qZA()(),c.TgZ(69,"div",42),c._UZ(70,"system-label",45),c.TgZ(71,"system-input-integer",46),c.NdJ("ngModelChange",(function(e){return t.settings.advanced.maximum_export_lines=e})),c.qZA()()()()(),c.TgZ(72,"div",14)(73,"h3",15)(74,"button",16)(75,"span",17),c._UZ(76,"system-label",47),c.qZA()()(),c.TgZ(77,"div",18)(78,"div",48)(79,"div",49)(80,"div"),c._UZ(81,"system-label",50),c.TgZ(82,"div",51)(83,"div",52)(84,"system-input-text",22),c.NdJ("ngModelChange",(function(e){return t.settings.logger.file.name=e})),c.qZA()(),c.TgZ(85,"div",53)(86,"system-input-text",22),c.NdJ("ngModelChange",(function(e){return t.settings.logger.file.ext=e})),c.qZA()()()(),c.TgZ(87,"div",54)(88,"div",42),c._UZ(89,"system-label",55),c.TgZ(90,"div",56)(91,"system-input-integer",57),c.NdJ("ngModelChange",(function(e){return t.loggerMaxSize=e})),c.qZA(),c.TgZ(92,"div",58),c._uU(93,"MB"),c.qZA()()(),c.TgZ(94,"div",42),c._UZ(95,"system-label",59),c.TgZ(96,"system-input-integer",22),c.NdJ("ngModelChange",(function(e){return t.settings.logger.file.maxLogs=e})),c.qZA()()()(),c.TgZ(97,"div",60)(98,"div",20),c._UZ(99,"system-label",61),c.TgZ(100,"system-checkbox-group",62),c.NdJ("ngModelChange",(function(e){return t.loglevels=e})),c.TgZ(101,"system-checkbox-group-checkbox",63),c._UZ(102,"system-label",64),c.qZA(),c.TgZ(103,"system-checkbox-group-checkbox",65),c._UZ(104,"system-label",66),c.qZA(),c.TgZ(105,"system-checkbox-group-checkbox",67),c._UZ(106,"system-label",68),c.qZA(),c.TgZ(107,"system-checkbox-group-checkbox",69),c._UZ(108,"system-label",70),c.qZA(),c.TgZ(109,"system-checkbox-group-checkbox",71),c._UZ(110,"system-label",72),c.qZA(),c.TgZ(111,"system-checkbox-group-checkbox",73),c._UZ(112,"system-label",74),c.qZA()()()()()()()()),2&e&&(c.xp6(25),c.Q6J("ngModel",t.settings.system.name),c.xp6(4),c.Q6J("ngModel",t.settings.system.site_url),c.xp6(4),c.Q6J("disabled",!0)("ngModel",t.settings.system.unique_key),c.xp6(14),c.Q6J("ngModel",t.settings.advanced.developerMode),c.xp6(10),c.Q6J("ngModel",t.settings.advanced.stack_trace_errors),c.xp6(4),c.Q6J("ngModel",t.settings.advanced.dump_slow_queries),c.xp6(3),c.Q6J("ngModel",t.settings.advanced.slow_query_time_msec),c.xp6(4),c.Q6J("ngModel",t.settings.advanced.upload_maxsize),c.xp6(3),c.Q6J("disabled",!0)("ngModel",t.settings.advanced.maximum_export_lines),c.xp6(13),c.Q6J("ngModel",t.settings.logger.file.name),c.xp6(2),c.Q6J("ngModel",t.settings.logger.file.ext),c.xp6(5),c.Q6J("ngModel",t.loggerMaxSize),c.xp6(5),c.Q6J("ngModel",t.settings.logger.file.maxLogs),c.xp6(4),c.Q6J("ngModel",t.loglevels))},dependencies:[n.YN,n.Kr,n.EJ,n.JJ,n.On,O.U,In.L,wn.m,L.f,Dn.Z,On.n,T._],encapsulation:2}),AdministrationGeneralSettings})();function Yn(e,t){1&e&&c._UZ(0,"system-spinner",15)}function zn(e,t){1&e&&c._UZ(0,"div",16)}function Pn(e,t){if(1&e&&(c.TgZ(0,"div",4)(1,"div",5)(2,"div",6)(3,"header",7),c._UZ(4,"system-icon",8),c.TgZ(5,"div",9)(6,"h2",10)(7,"div",11),c._uU(8),c.qZA()()(),c.TgZ(9,"div",12),c.YNc(10,Yn,1,0,"system-spinner",13),c.YNc(11,zn,1,0,"div",14),c.qZA()()()()()),2&e){const e=t.$implicit,s=c.oxw();c.xp6(7),c.Q6J("title",e.language_name),c.xp6(1),c.hij(" ",e.language_name," "),c.xp6(2),c.Q6J("ngIf",s.loading),c.xp6(1),c.Q6J("ngIf",!s.loading)}}let Gn=(()=>{class AdministrationLanguages{constructor(e,t,s,i,n){this.metadata=e,this.language=t,this.backend=s,this.modal=i,this.toast=n,this.languages=[],this.loading=!0}ngOnInit(){this.modal.openModal("SystemLoadingModal").subscribe((e=>{this.backend.getRequest("packages").subscribe((t=>{t.versions?this.languages=t.languages:this.toast.sendToast(this.language.getLabel("LBL_ERROR"),"error"),this.loading=!1,e.instance.self.destroy()}))}))}}return AdministrationLanguages.ɵfac=function(e){return new(e||AdministrationLanguages)(c.Y36(b.Pu),c.Y36(p.d),c.Y36(u.y),c.Y36(Je.o),c.Y36(qe.A))},AdministrationLanguages.ɵcmp=c.Xpm({type:AdministrationLanguages,selectors:[["administration-languages"]],decls:5,vars:1,consts:[[1,"slds-grid","slds-grid--align-spread","slds-p-around--medium"],[1,"slds-text-heading--medium"],[1,"slds-grid","slds-wrap"],["class","slds-size--1-of-2 slds-p-around--xx-small",4,"ngFor","ngForOf"],[1,"slds-size--1-of-2","slds-p-around--xx-small"],[1,"slds-card"],[1,"slds-card__header","slds-grid"],[1,"slds-media","slds-media_center","slds-has-flexi-truncate"],["size","small","icon","custom68","sprite","custom",1,"slds-p-right--xx-small"],[1,"slds-media__body"],[1,"slds-card__header-title"],[1,"slds-card__header-link","slds-truncate",3,"title"],[1,"slds-no-flex"],["size","12",4,"ngIf"],["class","slds-grid slds-grid_vertical-align-center",4,"ngIf"],["size","12"],[1,"slds-grid","slds-grid_vertical-align-center"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0)(1,"h2",1),c._uU(2,"Languages"),c.qZA()(),c.TgZ(3,"div",2),c.YNc(4,Pn,12,4,"div",3),c.qZA()),2&e&&(c.xp6(4),c.Q6J("ngForOf",t.languages))},dependencies:[i.sg,i.O5,L.f,qt.W],encapsulation:2}),AdministrationLanguages})();var Hn=s(1553),Kn=s(1819),jn=s(4211),$n=s(6268),Xn=s(4845);function Vn(e,t){if(1&e){const e=c.EpF();c.ynx(0),c.TgZ(1,"button",22),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw();return c.KtG(t.view.setViewMode())})),c._UZ(2,"system-label",23),c.qZA(),c.TgZ(3,"button",24),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw();return c.KtG(t.save())})),c._UZ(4,"system-label",25),c.qZA(),c.BQk()}}function Wn(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"button",26),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw();return c.KtG(t.view.setEditMode())})),c._UZ(1,"system-label",27),c.qZA()}}let el=(()=>{class AdministrationDefaultPreferences{constructor(e,t,s,i,n,l){this.backend=e,this.toast=t,this.language=s,this.configuration=i,this.view=n,this.modal=l,this.preferences={}}ngOnInit(){this.loadPreferences()}loadPreferences(){const e=this.modal.await("LBL_LOADING");this.backend.getRequest("configuration/configurator/editor/default_preferences").subscribe((t=>{this.preferences=t,e.emit(),e.complete()}))}save(){const e=this.modal.await("LBL_SAVING_DATA");this.backend.postRequest("configuration/configurator/editor/default_preferences",[],{config:this.preferences}).subscribe((t=>{this.configuration.setData("defaultuserpreferences",this.preferences),this.toast.sendToast(this.language.getLabel("LBL_DATA_SAVED"),"success"),this.view.setViewMode(),e.emit(),e.complete()}))}}return AdministrationDefaultPreferences.ɵfac=function(e){return new(e||AdministrationDefaultPreferences)(c.Y36(u.y),c.Y36(qe.A),c.Y36(p.d),c.Y36(vn.C),c.Y36(fi.e),c.Y36(Je.o))},AdministrationDefaultPreferences.ɵcmp=c.Xpm({type:AdministrationDefaultPreferences,selectors:[["administration-default-preferences"]],features:[c._Bn([fi.e])],decls:30,vars:6,consts:[[1,"slds-page-header"],[1,"slds-page-header__row"],[1,"slds-page-header__col-title"],[1,"slds-grid","slds-grid--vertical-align-center"],["icon","custom67","sprite","custom","addclasses","slds-page-header__icon"],[1,"slds-media__body"],[1,"slds-page-header__name"],[1,"slds-page-header__name-title"],["system-title","LBL_DEFAULT_PREFERENCES",1,"slds-page-header__title","slds-truncate"],["label","LBL_DEFAULT_PREFERENCES"],[1,"slds-grid"],[4,"ngIf","ngIfElse"],["editButtonContainer",""],[1,"spice-display-block","slds-p-around--xx-small",3,"preferences"],["tabtitle","LBL_HOME_PREFERENCES",3,"collapsible"],["itemlabel","LBL_HOME_ASSISTANT",1,"slds-size--1-of-3"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],["value","visible"],["label","LBL_VISIBLE"],["value","hidden"],["label","LBL_HIDDEN"],[1,"slds-button","slds-button--neutral","slds-m-horizontal--xx-small",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_SAVE"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_EDIT"]],template:function(e,t){if(1&e&&(c.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div"),c._UZ(5,"system-icon",4),c.qZA(),c.TgZ(6,"div",5)(7,"div",6)(8,"div",7)(9,"h1")(10,"span",8),c._UZ(11,"system-label",9),c.qZA()()()()()()(),c.TgZ(12,"div",10),c.YNc(13,Vn,5,0,"ng-container",11),c.YNc(14,Wn,2,0,"ng-template",null,12,c.W1O),c.qZA()()(),c._UZ(16,"system-preferences-panel",13),c.TgZ(17,"system-collapsable-tab",14)(18,"div",10)(19,"system-preferences-panel-item",15)(20,"system-preferences-panel-item-display"),c._uU(21),c.qZA(),c.TgZ(22,"system-preferences-panel-item-edit")(23,"div",16)(24,"select",17),c.NdJ("ngModelChange",(function(e){return t.preferences.home_assistant=e})),c._UZ(25,"option"),c.TgZ(26,"option",18),c._UZ(27,"system-label",19),c.qZA(),c.TgZ(28,"option",20),c._UZ(29,"system-label",21),c.qZA()()()()()()()),2&e){const e=c.MAs(15);c.xp6(13),c.Q6J("ngIf",t.view.isEditMode())("ngIfElse",e),c.xp6(3),c.Q6J("preferences",t.preferences),c.xp6(1),c.Q6J("collapsible",!1),c.xp6(4),c.hij(" ",t.preferences.home_assistant," "),c.xp6(3),c.Q6J("ngModel",t.preferences.home_assistant)}},dependencies:[i.O5,n.YN,n.Kr,n.EJ,n.JJ,n.On,Hn.z,L.f,T._,Kn.W,jn.w,$n.f,Xn.z,xs.S],encapsulation:2}),AdministrationDefaultPreferences})();var tl=s(6538),sl=s(4730),il=s(6822),nl=s(2006),ll=s(8280);const ol=function(e){return{"slds-theme--error":e}};function al(e,t){if(1&e&&(c.TgZ(0,"tr",46)(1,"td"),c._UZ(2,"system-display-datetime",47),c.qZA(),c.TgZ(3,"td")(4,"div",48),c._uU(5),c.qZA()(),c.TgZ(6,"td")(7,"div",48),c._uU(8),c.qZA()(),c.TgZ(9,"td",49),c._uU(10),c.qZA()()),2&e){const e=t.$implicit;c.Q6J("ngClass",c.VKq(5,ol,"loginfail"==e.action)),c.xp6(2),c.Q6J("date",e.date_entered),c.xp6(3),c.Oqu(e.login_name),c.xp6(3),c.Oqu(e.ipaddress),c.xp6(2),c.Oqu(e.action)}}function dl(e,t){1&e&&(c.TgZ(0,"div",50)(1,"system-illustration-no-records"),c._UZ(2,"system-label",51),c.qZA()())}function rl(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",52)(1,"button",12),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw();return c.KtG(t.loadMore())})),c._UZ(2,"system-label",53),c.qZA()()}}let cl=(()=>{class AdministrationUserAccessLogViewer{constructor(e,t,s){this.backend=e,this.modal=t,this.toast=s,this.limit="250",this.filter="",this.isLoading=!1,this.failedOnly=!1,this.entries=[]}setNow(){this.dateEnd=new moment}loadData(){if(!this.isLoading){this.isLoading=!0;let e={limit:this.limit};this.filter&&(e.filter=this.filter),this.failedOnly&&(e.failedonly=this.failedOnly),this.dateEnd&&(e.date_end=this.dateEnd.format("YYYY-MM-DD HH:mm:ss")),this.backend.getRequest("admin/useraccesslog",e).subscribe((e=>{this.entries=e,this.isLoading=!1}),(e=>{this.toast.sendToast("Error loading log data!","error"),this.isLoading=!1}))}}loadMore(){if(!this.isLoading){this.isLoading=!0;let e={limit:this.limit,date_end:this.entries[this.entries.length-1].date_entered};this.filter&&(e.filter=this.filter),this.failedOnly&&(e.failedonly=this.failedOnly),this.backend.getRequest("admin/useraccesslog",e).subscribe((e=>{this.entries=this.entries.concat(e),this.isLoading=!1}),(e=>{this.toast.sendToast("Error loading log data!","error"),this.isLoading=!1}))}}buttonLoad(){this.loadData()}}return AdministrationUserAccessLogViewer.ɵfac=function(e){return new(e||AdministrationUserAccessLogViewer)(c.Y36(u.y),c.Y36(Je.o),c.Y36(qe.A))},AdministrationUserAccessLogViewer.ɵcmp=c.Xpm({type:AdministrationUserAccessLogViewer,selectors:[["ng-component"]],decls:63,vars:9,consts:[[1,"slds-p-around--medium","slds-theme--shade"],[1,"slds-page-header__row"],[1,"slds-page-header__col-title"],[1,"slds-media"],["icon","lightning_usage"],[1,"slds-media__body"],[1,"slds-page-header__name"],[1,"slds-page-header__name-title"],[1,"slds-page-header__title","slds-truncate"],["label","LBL_USERACCESSLOG"],[1,"slds-page-header__name-meta"],["label","LBL_RECORDS"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_LOAD"],[1,"slds-section","slds-is-open","slds-p-around--xx-small"],[1,"slds-grid","slds-grid--vertical-align-end","slds-gutters_direct-xxx-small"],[1,"slds-col","slds-size--1-of-2"],[1,"slds-form-element__label"],["label","LBL_FILTER"],[1,"slds-grid","slds-grid--vertical-align-center"],[1,"slds-grow","slds-form-element__control","slds-input-has-icon","slds-input-has-icon_right"],["type","text","system-trim-input","",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-button","slds-button_icon","slds-input__icon","slds-input__icon_right",3,"click"],["icon","clear","addclasses","slds-icon-text-light"],[3,"ngModel","ngModelChange"],["label","LBL_FAILEDONLY"],[1,"slds-col","slds-size--1-of-4"],["label","LBL_END"],[1,"slds-grow",3,"ngModel","ngModelChange"],[1,"slds-grow","slds-p-horizontal--xx-small",3,"ngModel","ngModelChange"],["system-title","LBL_NOW","icon","clock","size","x-small",3,"click"],["label","LBL_ROWS"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],["system-to-bottom","",1,"slds-border--top"],[1,"slds-table","slds-table--bordered","slds-table--fixed-layout","slds-table--col-bordered","slds-no-row-hover","slds-table_header-fixed"],[2,"width","8rem"],["label","LBL_DATE",1,"slds-th__action"],[1,"slds-resizable"],["label","LBL_USER",1,"slds-th__action"],["label","LBL_IP_ADDRESS",1,"slds-th__action"],["label","LBL_ACTION",1,"slds-th__action"],["tbody",""],[3,"ngClass",4,"ngFor","ngForOf"],["class","slds-height_full slds-align--absolute-center",4,"ngIf"],["class","slds-p-around--small slds-align--absolute-center",4,"ngIf"],[3,"ngClass"],[3,"date"],[1,"slds-truncate"],[1,"slds-text-align--center"],[1,"slds-height_full","slds-align--absolute-center"],["label","LBL_NO_RECORDS_FOUND"],[1,"slds-p-around--small","slds-align--absolute-center"],["label","LBL_LOAD_MORE"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),c._UZ(4,"system-icon",4),c.TgZ(5,"div",5)(6,"div",6)(7,"div",7)(8,"h1")(9,"span",8),c._UZ(10,"system-label",9),c.qZA()()()(),c.TgZ(11,"p",10),c._uU(12),c._UZ(13,"system-label",11),c.qZA()()()(),c.TgZ(14,"button",12),c.NdJ("click",(function(){return t.loadData()})),c._UZ(15,"system-label",13),c.qZA()()(),c.TgZ(16,"div",14)(17,"div",15)(18,"div",16)(19,"label",17),c._UZ(20,"system-label",18),c.qZA(),c.TgZ(21,"div",19)(22,"div",20)(23,"input",21),c.NdJ("ngModelChange",(function(e){return t.filter=e})),c.qZA(),c.TgZ(24,"button",22),c.NdJ("click",(function(){return t.filter=""})),c._UZ(25,"system-button-icon",23),c.qZA()(),c.TgZ(26,"system-checkbox",24),c.NdJ("ngModelChange",(function(e){return t.failedOnly=e})),c._UZ(27,"system-label",25),c.qZA()()(),c.TgZ(28,"div",26)(29,"label",17),c._UZ(30,"system-label",27),c.qZA(),c.TgZ(31,"div",19)(32,"system-input-date",28),c.NdJ("ngModelChange",(function(e){return t.dateEnd=e})),c.qZA(),c.TgZ(33,"system-input-time",29),c.NdJ("ngModelChange",(function(e){return t.dateEnd=e})),c.qZA(),c.TgZ(34,"system-utility-icon",30),c.NdJ("click",(function(){return t.setNow()})),c.qZA()()(),c.TgZ(35,"div",26)(36,"label",17),c._UZ(37,"system-label",31),c.qZA(),c.TgZ(38,"div",32)(39,"select",33),c.NdJ("ngModelChange",(function(e){return t.limit=e})),c.TgZ(40,"option"),c._uU(41,"250"),c.qZA(),c.TgZ(42,"option"),c._uU(43,"500"),c.qZA(),c.TgZ(44,"option"),c._uU(45,"1000"),c.qZA()()()()()(),c.TgZ(46,"div",34)(47,"table",35)(48,"thead")(49,"tr")(50,"th",36),c._UZ(51,"system-label",37),c.qZA(),c.TgZ(52,"th",38),c._UZ(53,"system-label",39),c.qZA(),c.TgZ(54,"th",36),c._UZ(55,"system-label",40),c.qZA(),c.TgZ(56,"th",36),c._UZ(57,"system-label",41),c.qZA()()(),c.TgZ(58,"tbody",null,42),c.YNc(60,al,11,7,"tr",43),c.qZA()(),c.YNc(61,dl,3,0,"div",44),c.YNc(62,rl,3,0,"div",45),c.qZA()),2&e&&(c.xp6(12),c.hij("",t.entries.length," "),c.xp6(11),c.Q6J("ngModel",t.filter),c.xp6(3),c.Q6J("ngModel",t.failedOnly),c.xp6(6),c.Q6J("ngModel",t.dateEnd),c.xp6(1),c.Q6J("ngModel",t.dateEnd),c.xp6(6),c.Q6J("ngModel",t.limit),c.xp6(21),c.Q6J("ngForOf",t.entries),c.xp6(1),c.Q6J("ngIf",0==t.entries.length),c.xp6(1),c.Q6J("ngIf",t.entries.length>0))},dependencies:[i.mk,i.sg,i.O5,n.YN,n.Kr,n.Fj,n.EJ,n.JJ,n.On,x.J,O.U,tl.a,L.f,sl.C,il.z,nl.H,T._,M.r,A.H,ll.t,xs.S],encapsulation:2}),AdministrationUserAccessLogViewer})();var gl=s(5698),ul=s(528),ml=s(5621);const pl=function(e){return{"slds-has-error":e}};let hl=(()=>{class AdministrationLoginRestriction{constructor(e,t){this.backend=e,this.toast=t,this.isLoading=!0,this.restrictions={user:{enabled:!1,number_attempts:0,monitored_period:0,blocking_duration:0,blocking_type:"permanent"},ip:{enabled:!1,number_attempts:0,monitored_period:0}}}ngOnInit(){this.loadConfig()}isDirty(){return!_.isEqual(this.restrictions,this.restrictionsBackup)}cancelEditing(){this.restrictions=JSON.parse(JSON.stringify(this.restrictionsBackup))}saveConfig(){let e={ip_enabled:this.restrictions.ip.enabled?1:0,ip_number_attempts:this.restrictions.ip.number_attempts,ip_monitored_period:this.restrictions.ip.monitored_period,user_enabled:this.restrictions.user.enabled?1:0,user_number_attempts:this.restrictions.user.number_attempts,user_monitored_period:this.restrictions.user.monitored_period,user_blocking_duration:"time"===this.restrictions.user.blocking_type?this.restrictions.user.blocking_duration:"0"};this.isLoading=!0,this.backend.postRequest("configuration/configurator/editor/login_attempt_restriction",null,{config:e}).pipe((0,gl.q)(1)).subscribe((e=>{this.restrictionsBackup=JSON.parse(JSON.stringify(this.restrictions)),this.toast.sendToast("Login Restriction Configuration successfully saved.","success"),this.isLoading=!1}))}loadConfig(){this.isLoading=!0,this.backend.getRequest("configuration/configurator/editor/login_attempt_restriction").pipe((0,gl.q)(1)).subscribe((e=>{this.restrictions.ip.enabled="1"===e.ip_enabled||!1,this.restrictions.ip.number_attempts=1*e.ip_number_attempts||0,this.restrictions.ip.monitored_period=1*e.ip_monitored_period||0,this.restrictions.user.enabled="1"===e.user_enabled||!1,this.restrictions.user.number_attempts=1*e.user_number_attempts||0,this.restrictions.user.monitored_period=1*e.user_monitored_period||0,this.restrictions.user.blocking_duration=1*e.user_blocking_duration||0,this.restrictions.user.blocking_type=this.restrictions.user.blocking_duration?"time":"permanent",this.restrictionsBackup=JSON.parse(JSON.stringify(this.restrictions)),this.isLoading=!1}),(e=>{this.toast.sendToast("Error loading Login Restriction Config.","error"),this.isLoading=!1}))}}return AdministrationLoginRestriction.ɵfac=function(e){return new(e||AdministrationLoginRestriction)(c.Y36(u.y),c.Y36(qe.A))},AdministrationLoginRestriction.ɵcmp=c.Xpm({type:AdministrationLoginRestriction,selectors:[["administration-login-restriction"]],decls:78,vars:37,consts:[[1,"slds-grid",3,"system-overlay-loading-spinner"],[1,"slds-p-around--medium",2,"width","100%"],[1,"slds-grid","slds-grid--align-spread"],[1,"slds-text-heading_small"],["label","LBL_USER_RESTRICTION"],["label","LBL_ACTIVE",1,"slds-m-bottom--xx-small","spice-display-block",3,"ngModel","ngModelChange"],[1,"slds-grid"],[1,"slds-form-element"],["for","user-number-attempts",1,"slds-form-element__label"],["title","required",1,"slds-required"],["label","LBL_MAX_LOGIN_ATTEMPTS"],[1,"slds-form-element__control"],["id","user-number-attempts",3,"disabled","ngModel","onlyField","precision","asNumber","ngModelChange"],[1,"slds-form-element","slds-m-left--medium"],["for","user-monitored-period",1,"slds-form-element__label"],["label","LBL_MONITORED_PERIOD"],["label","LBL_MINUTES","length","short",2,"display","inline-block"],["id","user-monitored-period",3,"disabled","ngModel","onlyField","precision","asNumber","ngModelChange"],[1,"slds-form-element__legend","slds-form-element__label",2,"font-weight","normal"],["label","LBL_LOCK_TYPE"],[1,"slds-radio"],["type","radio","id","user-lock-type-time","value","time",3,"ngModel","disabled","ngModelChange"],["for","user-lock-type-time",1,"slds-radio__label"],[1,"slds-radio_faux"],[1,"slds-form-element__label"],["label","LBL_TIME"],["type","radio","id","user-lock-type-perm","value","permanent",3,"ngModel","disabled","ngModelChange"],["for","user-lock-type-perm",1,"slds-radio__label"],["label","LBL_PERMANENT"],[1,"slds-form-element","slds-m-left--x-small"],["for","user-blocking-duration",1,"slds-form-element__label"],["label","LBL_BLOCKING_DURATION"],[1,"slds-form-element__control",3,"ngClass"],["id","user-blocking-duration",3,"disabled","ngModel","onlyField","precision","asNumber","ngModelChange"],[1,"slds-border--left","slds-p-around--medium","slds-border--right",2,"width","100%"],["label","LBL_IP_RESTRICTION"],["for","ip-number-attempts",1,"slds-form-element__label"],["id","ip-number-attempts",3,"disabled","ngModel","onlyField","precision","asNumber","ngModelChange"],["for","ip-monitored-period",1,"slds-form-element__label"],["id","ip-monitored-period",3,"disabled","ngModel","onlyField","precision","asNumber","ngModelChange"],[1,"slds-p-around--medium","slds-align-bottom",2,"white-space","nowrap"],[1,"slds-button","slds-button--icon","slds-button_neutral","slds-button--icon-border",3,"disabled","click"],["icon","close"],[1,"slds-button","slds-button--icon","slds-button_brand","slds-button--icon-border","slds-m-left--small",3,"disabled","click"],["icon","check"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),c._UZ(4,"system-label",4),c.qZA(),c.TgZ(5,"system-checkbox-toggle",5),c.NdJ("ngModelChange",(function(e){return t.restrictions.user.enabled=e})),c.qZA()(),c.TgZ(6,"div",6)(7,"div",7)(8,"label",8)(9,"abbr",9),c._uU(10,"* "),c.qZA(),c._UZ(11,"system-label",10),c.qZA(),c.TgZ(12,"div",11)(13,"system-input-number",12),c.NdJ("ngModelChange",(function(e){return t.restrictions.user.number_attempts=e})),c.qZA()()(),c.TgZ(14,"div",13)(15,"label",14)(16,"abbr",9),c._uU(17,"* "),c.qZA(),c._UZ(18,"system-label",15),c._uU(19," ("),c._UZ(20,"system-label",16),c._uU(21,")"),c.qZA(),c.TgZ(22,"div",11)(23,"system-input-number",17),c.NdJ("ngModelChange",(function(e){return t.restrictions.user.monitored_period=e})),c.qZA()()(),c.TgZ(24,"fieldset",13)(25,"legend",18),c._UZ(26,"system-label",19),c.qZA(),c.TgZ(27,"div",11)(28,"span",20)(29,"input",21),c.NdJ("ngModelChange",(function(e){return t.restrictions.user.blocking_type=e})),c.qZA(),c.TgZ(30,"label",22),c._UZ(31,"span",23),c.TgZ(32,"span",24),c._UZ(33,"system-label",25),c.qZA()()(),c.TgZ(34,"span",20)(35,"input",26),c.NdJ("ngModelChange",(function(e){return t.restrictions.user.blocking_type=e})),c.qZA(),c.TgZ(36,"label",27),c._UZ(37,"span",23),c.TgZ(38,"span",24),c._UZ(39,"system-label",28),c.qZA()()()()(),c.TgZ(40,"div",29)(41,"label",30)(42,"abbr",9),c._uU(43,"* "),c.qZA(),c._UZ(44,"system-label",31),c._uU(45," ("),c._UZ(46,"system-label",16),c._uU(47,")"),c.qZA(),c.TgZ(48,"div",32)(49,"system-input-number",33),c.NdJ("ngModelChange",(function(e){return t.restrictions.user.blocking_duration=e}))("ngModelChange",(function(){return t.restrictions.user.blocking_type=0===t.restrictions.user.blocking_duration?"permanent":"time"})),c.qZA()()()()(),c.TgZ(50,"div",34)(51,"div",2)(52,"div",3),c._UZ(53,"system-label",35),c.qZA(),c.TgZ(54,"system-checkbox-toggle",5),c.NdJ("ngModelChange",(function(e){return t.restrictions.ip.enabled=e})),c.qZA()(),c.TgZ(55,"div",6)(56,"div",7)(57,"label",36)(58,"abbr",9),c._uU(59,"* "),c.qZA(),c._UZ(60,"system-label",10),c.qZA(),c.TgZ(61,"div",11)(62,"system-input-number",37),c.NdJ("ngModelChange",(function(e){return t.restrictions.ip.number_attempts=e})),c.qZA()()(),c.TgZ(63,"div",13)(64,"label",38)(65,"abbr",9),c._uU(66,"* "),c.qZA(),c._UZ(67,"system-label",15),c._uU(68," ("),c._UZ(69,"system-label",16),c._uU(70,")"),c.qZA(),c.TgZ(71,"div",11)(72,"system-input-number",39),c.NdJ("ngModelChange",(function(e){return t.restrictions.ip.monitored_period=e})),c.qZA()()()()(),c.TgZ(73,"div",40)(74,"button",41),c.NdJ("click",(function(){return t.cancelEditing()})),c._UZ(75,"system-button-icon",42),c.qZA(),c.TgZ(76,"button",43),c.NdJ("click",(function(){return t.saveConfig()})),c._UZ(77,"system-button-icon",44),c.qZA()()()),2&e&&(c.Q6J("system-overlay-loading-spinner",t.isLoading),c.xp6(5),c.Q6J("ngModel",t.restrictions.user.enabled),c.xp6(8),c.Q6J("disabled",!t.restrictions.user.enabled)("ngModel",t.restrictions.user.number_attempts)("onlyField",!0)("precision",0)("asNumber",!0),c.xp6(10),c.Q6J("disabled",!t.restrictions.user.enabled)("ngModel",t.restrictions.user.monitored_period)("onlyField",!0)("precision",0)("asNumber",!0),c.xp6(6),c.Q6J("ngModel",t.restrictions.user.blocking_type)("disabled",!t.restrictions.user.enabled),c.xp6(6),c.Q6J("ngModel",t.restrictions.user.blocking_type)("disabled",!t.restrictions.user.enabled),c.xp6(13),c.Q6J("ngClass",c.VKq(35,pl,"time"===t.restrictions.user.blocking_type&&0===t.restrictions.user.blocking_duration)),c.xp6(1),c.Q6J("disabled",!t.restrictions.user.enabled||"permanent"===t.restrictions.user.blocking_type)("ngModel",t.restrictions.user.blocking_duration)("onlyField",!0)("precision",0)("asNumber",!0),c.xp6(5),c.Q6J("ngModel",t.restrictions.ip.enabled),c.xp6(8),c.Q6J("disabled",!t.restrictions.ip.enabled)("ngModel",t.restrictions.ip.number_attempts)("onlyField",!0)("precision",0)("asNumber",!0),c.xp6(10),c.Q6J("disabled",!t.restrictions.ip.enabled)("ngModel",t.restrictions.ip.monitored_period)("onlyField",!0)("precision",0)("asNumber",!0),c.xp6(2),c.Q6J("disabled",t.isLoading),c.xp6(2),c.Q6J("disabled",t.isLoading))},dependencies:[i.mk,n.Fj,n._,n.JJ,n.On,x.J,ul.v,ml.i,T._,v._],encapsulation:2}),AdministrationLoginRestriction})();const bl=["administration-login-restriction-ip-addresses-row",""];function fl(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",7)(1,"div",8),c._uU(2),c.qZA(),c.TgZ(3,"button",9),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw();return c.KtG(t.editDescription())})),c._UZ(4,"system-button-icon",10),c.qZA()()}if(2&e){const e=c.oxw();c.xp6(2),c.Oqu(e.ipAddress.description),c.xp6(1),c.Q6J("disabled",e.otherEditing)}}function _l(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",7)(1,"div",11)(2,"input",12),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.ipAddress.description=t)})),c.qZA()(),c.TgZ(3,"button",13),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw();return c.KtG(t.cancel())})),c._UZ(4,"system-button-icon",14),c.qZA(),c.TgZ(5,"button",15),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw();return c.KtG(t.save())})),c._UZ(6,"system-button-icon",14),c.qZA()()}if(2&e){const e=c.oxw();c.xp6(2),c.Q6J("ngModel",e.ipAddress.description)("placeholder",e.language.getLabel("LBL_DESCRIPTION")),c.xp6(2),c.Q6J("icon","close"),c.xp6(2),c.Q6J("icon","check")}}let Zl=(()=>{class AdministrationLoginRestrictionIpAddressesRow{constructor(e,t,s){this.backend=e,this.toast=t,this.language=s,this.editing=new c.vpe,this.isEditing=!1}editDescription(){this.backup=this.ipAddress.description,this.isEditing=!0,this.editing.emit(!0)}save(){this.isEditing=!1,this.backend.putRequest("authentication/ipAddress/"+this.ipAddress.address,null,{description:this.ipAddress.description}).pipe((0,gl.q)(1)).subscribe((e=>{this.isEditing=!1,this.editing.emit(!1)}),(e=>{this.ipAddress.description=this.backup,this.isEditing=!1,this.editing.emit(!1),this.toast.sendToast("Error saving Description of IP Address.","error")}))}cancel(){this.isEditing=!1,this.editing.emit(!1),this.ipAddress.description=this.backup}}return AdministrationLoginRestrictionIpAddressesRow.ɵfac=function(e){return new(e||AdministrationLoginRestrictionIpAddressesRow)(c.Y36(u.y),c.Y36(qe.A),c.Y36(p.d))},AdministrationLoginRestrictionIpAddressesRow.ɵcmp=c.Xpm({type:AdministrationLoginRestrictionIpAddressesRow,selectors:[["","administration-login-restriction-ip-addresses-row",""]],inputs:{ipAddress:"ipAddress",otherEditing:"otherEditing"},outputs:{editing:"editing"},attrs:bl,decls:14,vars:7,consts:[[1,"slds-p-right--none"],[3,"ngModel","disabled","ngModelChange"],[1,"slds-p-right--x-small"],[1,"slds-truncate"],["class","slds-grid",4,"ngIf"],[3,"date"],[1,"slds-p-right--x-small",2,"width","100%"],[1,"slds-grid"],[1,"slds-truncate","slds-col--bump-right"],["system-title","LBL_RELOAD",1,"slds-button","slds-button--icon","slds-m-left--xx-small",3,"disabled","click"],["icon","edit"],[2,"width","100%"],[1,"slds-input",3,"ngModel","placeholder","ngModelChange"],[1,"slds-button","slds-button--icon-border","slds-m-left--xx-small",3,"click"],["size","small",3,"icon"],[1,"slds-button","slds-button--icon-border","slds-button--brand",3,"click"]],template:function(e,t){1&e&&(c.TgZ(0,"td",0)(1,"system-checkbox",1),c.NdJ("ngModelChange",(function(e){return t.ipAddress.selected=e})),c.qZA()(),c.TgZ(2,"td",2)(3,"div",3),c._uU(4),c.qZA()(),c.TgZ(5,"td",2),c.YNc(6,fl,5,2,"div",4),c.YNc(7,_l,7,4,"div",4),c.qZA(),c.TgZ(8,"td",2)(9,"div",3),c._UZ(10,"system-display-datetime",5),c.qZA()(),c.TgZ(11,"td",6)(12,"div",3),c._uU(13),c.qZA()()),2&e&&(c.xp6(1),c.Q6J("ngModel",t.ipAddress.selected)("disabled",t.otherEditing),c.xp6(3),c.Oqu(t.ipAddress.address),c.xp6(2),c.Q6J("ngIf",!t.isEditing),c.xp6(1),c.Q6J("ngIf",t.isEditing),c.xp6(3),c.Q6J("date",t.ipAddress.date_entered),c.xp6(3),c.Oqu(t.ipAddress.created_by_name))},dependencies:[i.O5,n.Fj,n.JJ,n.On,x.J,O.U,tl.a,xs.S],encapsulation:2}),AdministrationLoginRestrictionIpAddressesRow})();const Al=["table"];function yl(e,t){1&e&&c._UZ(0,"system-label",23)}function vl(e,t){1&e&&c._UZ(0,"system-label",24)}function xl(e,t){if(1&e){const e=c.EpF();c.ynx(0),c.TgZ(1,"button",25),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw();return c.KtG(t.moveIpAddresses())})),c._uU(2),c.qZA(),c.TgZ(3,"button",26),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw();return c.KtG(t.deleteIpAddresses())})),c._UZ(4,"system-button-icon",27),c.qZA(),c.BQk()}if(2&e){const e=c.oxw();c.xp6(1),c.Q6J("disabled",e.isEditing),c.xp6(1),c.hij("➔",e.altColor.toUpperCase(),""),c.xp6(1),c.Q6J("disabled",e.isEditing)}}const Ll=function(e){return{"slds-has-error":e}};function Tl(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"tr")(1,"td",28)(2,"div",29)(3,"div",30)(4,"input",31),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.newAddress=t)}))("change",(function(){c.CHM(e);const t=c.oxw();return c.KtG(t.checkAddressInput())})),c.qZA()(),c.TgZ(5,"div",32),c._uU(6),c.qZA()()(),c.TgZ(7,"td",33)(8,"input",34),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.newDescription=t)})),c.qZA()(),c.TgZ(9,"td",28)(10,"button",35),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw();return c.KtG(t.cancelNewAddress())})),c._UZ(11,"system-button-icon",36),c.qZA(),c.TgZ(12,"button",37),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw();return c.KtG(t.saveNewAddress())})),c._UZ(13,"system-button-icon",36),c.qZA()()()}if(2&e){const e=c.oxw();c.xp6(2),c.Q6J("ngClass",c.VKq(10,Ll,e.addressError)),c.xp6(2),c.Q6J("ngModel",e.newAddress)("placeholder",e.language.getLabel("LBL_IPADDRESS")),c.xp6(2),c.Oqu(e.addressError),c.xp6(2),c.Q6J("ngModel",e.newDescription)("placeholder",e.language.getLabel("LBL_DESCRIPTION")),c.xp6(3),c.Q6J("icon","close")("size","small"),c.xp6(2),c.Q6J("icon","check")("size","small")}}function Ml(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"tr",38),c.NdJ("editing",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.isAltering=t)})),c.qZA()}if(2&e){const e=t.$implicit,s=c.oxw();c.Q6J("ipAddress",e)("otherEditing",s.isEditing)}}function Jl(e,t){1&e&&(c.TgZ(0,"div",39)(1,"div",40)(2,"div",41)(3,"h3",42),c._UZ(4,"system-label",43),c.qZA()()()())}const ql=function(e){return{"slds-grow":e}},El=function(e){return{borderBottom:e}};let Cl=(()=>{class AdministrationLoginRestrictionIpAddresses{constructor(e,t,s,i,n){this.backend=e,this.modal=t,this.toast=s,this.metadata=i,this.language=n,this.ipAddresses=[],this.isLoading=!1,this.isAltering=!1,this.isAdding=!1,this.newAddress="",this.newDescription="",this.addressError=""}get isEditing(){return this.isAltering||this.isAdding}ngOnInit(){this.altColor="black"===this.color?"white":"black",this.loadIpAddresses()}loadIpAddresses(){this.isLoading=!0,this.backend.getRequest("authentication/ipAddresses/"+this.color).pipe((0,gl.q)(1)).subscribe((e=>{this.ipAddresses=e,this.sortIpAddresses(),this.isLoading=!1}),(e=>{this.toast.sendToast("Error loading "+this.color+" listed IP Addresses.",e.error.error.message,"error")}))}sortIpAddresses(){this.ipAddresses=this.ipAddresses.sort(((e,t)=>this.compareIpAddresses(e,t))),this.ipAddresses=this.ipAddresses.sort(((e,t)=>this.compareIpAddresses(e,t)))}compareIpAddresses(e,t){return Number(e.address.split(".").map((e=>`000${e}`.slice(-3))).join(""))-Number(t.address.split(".").map((e=>`000${e}`.slice(-3))).join(""))}deleteIpAddresses(){let e=[],t=[];this.ipAddresses.forEach(((t,s)=>{t.selected&&e.push(s)})),e.length&&this.modal.confirm("Remove "+e.length+" IP Addresses? This can not be undone.","Remove IP Addresses?",null).pipe((0,gl.q)(1)).subscribe((s=>{if(s){this.isLoading=!0;let s=e.length;e.forEach((e=>{this.backend.deleteRequest("authentication/ipAddress/"+this.ipAddresses[e].address).pipe((0,gl.q)(1)).subscribe((i=>{!0===i.success&&t.push(e),s--,s<=0&&(this._removeFromList(t),this.isLoading=!1)}),(i=>()=>{s--,s<=0&&(this._removeFromList(t),this.isLoading=!1),this.toast.sendToast("Error deleting IP Address "+this.ipAddresses[e].address+".",i.error.error.message,"error")}))}))}else this.isLoading=!1}))}moveIpAddresses(){let e=[],t=[];this.ipAddresses.forEach(((t,s)=>{t.selected&&e.push(s)})),e.length&&this.modal.confirm("Move "+e.length+" IP Addresses to "+this.altColor+" list?","Move IP Addresses?",null).pipe((0,gl.q)(1)).subscribe((s=>{let i="black"===this.color?"white":"black";this.isLoading=this.siblingComponent.isLoading=!0;let n=e.length;e.forEach((e=>{this.backend.putRequest("authentication/ipAddress/"+this.ipAddresses[e].address+"/move/"+i).pipe((0,gl.q)(1)).subscribe((s=>{!0===s.success&&(this.siblingComponent.ipAddresses.push(this.ipAddresses[e]),this.ipAddresses[e].selected=!1,t.push(e),this.siblingComponent.sortIpAddresses()),n--,n<=0&&(this._removeFromList(t),this.isLoading=this.siblingComponent.isLoading=!1)}),(s=>()=>{n--,n<=0&&(this._removeFromList(t),this.isLoading=this.siblingComponent.isLoading=!1),this.toast.sendToast("Error moving IP Address "+this.ipAddresses[e].address+".",s.error.error.message,"error")}))}))}))}_removeFromList(e){for(let t=(e=e.sort(((e,t)=>e-t))).length-1;t>=0;t--)this.ipAddresses.splice(e[t],1)}get checkboxesUsed(){for(let e of this.ipAddresses)if(e?.selected)return!0;return!1}saveNewAddress(){this.checkAddressInput(),this.addressError||(this.isLoading=!0,this.backend.postRequest("authentication/ipAddress/"+this.newAddress,null,{color:this.color[0],description:this.newDescription}).pipe((0,gl.q)(1)).subscribe((e=>{this.isLoading=!1,this.ipAddresses.push(e.data),this.sortIpAddresses(),this.toast.sendToast("IP Address "+this.newAddress+" added ("+this.color+" listed).","success"),this.newAddress="",this.newDescription="",this.isAdding=!1}),(e=>{this.toast.sendToast("Error saving IP Address.","error",e.error.error.message),this.isLoading=!1,this.isAdding=!1})))}checkAddressInput(){this.newAddress.length?(this.newAddress=this.sanitizeIpAddress(this.newAddress),this.checkIpAddress(this.newAddress)?this.ipAddressIsListed(this.newAddress)?this.addressError="Already listed.":this.addressError="":this.addressError="Invalid."):this.addressError="Missing."}sanitizeIpAddress(e){let t=(e=e.replace(/\s+/g,"")).split(".");return t.forEach(((e,s)=>{t[s]=e.replace(/^0+(?!$)/,"")})),t.join(".")}checkIpAddress(e){let t=e.split(".");return 4===t.length&&!t.some((e=>!e.match(/\d+/)||parseInt(e,10)>255))}ipAddressIsListed(e){return!0===this.ipAddresses.some((t=>{if(t.address===e)return!0}))||!0===this.siblingComponent.ipAddresses.some((t=>{if(t.address===e)return!0}))}startAdding(){this.isAdding=!0,this.addressError="",this.table.nativeElement.scrollTop=0}cancelNewAddress(){this.isAdding=!1,this.newAddress="",this.newDescription=""}}return AdministrationLoginRestrictionIpAddresses.ɵfac=function(e){return new(e||AdministrationLoginRestrictionIpAddresses)(c.Y36(u.y),c.Y36(Je.o),c.Y36(qe.A),c.Y36(b.Pu),c.Y36(p.d))},AdministrationLoginRestrictionIpAddresses.ɵcmp=c.Xpm({type:AdministrationLoginRestrictionIpAddresses,selectors:[["administration-login-restriction-ip-addresses"]],viewQuery:function(e,t){if(1&e&&c.Gf(Al,7),2&e){let e;c.iGM(e=c.CRH())&&(t.table=e.first)}},inputs:{color:"color",siblingComponent:"siblingComponent"},decls:32,vars:15,consts:[[1,"slds-grid","slds-grid--vertical","slds-p-around--medium",2,"height","100%",3,"system-overlay-loading-spinner"],[1,"slds-grid","slds-grid--align-spread","slds-m-bottom--x-small"],[1,"slds-text-heading_small","slds-col--bump-right"],["label","LBL_WHITE_LISTED_IPADDRESSES",4,"ngIf"],["label","LBL_BLACK_LISTED_IPADDRESSES",4,"ngIf"],[4,"ngIf"],["system-title","LBL_ADD",1,"slds-button","slds-button--icon","slds-m-left--xx-small",3,"disabled","click"],["icon","new"],["system-title","LBL_RELOAD",1,"slds-button","slds-button--icon","slds-m-left--xx-small",3,"disabled","click"],["icon","refresh"],[1,"slds-scrollable--y",3,"ngClass"],[1,"slds-table","slds-table_bordered","slds-table--header-fixed",3,"ngStyle"],["table",""],[1,"slds-text-title--caps"],[1,"slds-truncate","slds-p-horizontal--x-small"],["label","LBL_ADDRESS"],[2,"width","100%"],["label","LBL_DESCRIPTION"],["label","LBL_DATE_ENTERED"],["label","LBL_CREATED_BY"],["system-multi-select-checkboxes",""],["administration-login-restriction-ip-addresses-row","",3,"ipAddress","otherEditing","editing",4,"ngFor","ngForOf"],["class","slds-grow slds-align--absolute-center",4,"ngIf"],["label","LBL_WHITE_LISTED_IPADDRESSES"],["label","LBL_BLACK_LISTED_IPADDRESSES"],[1,"slds-button","slds-button--neutral",2,"padding","0.25rem","line-height","0","font-weight","bold",3,"disabled","click"],["system-title","LBL_DELETE",1,"slds-button","slds-button--icon",3,"disabled","click"],["icon","delete"],["colspan","2",2,"vertical-align","top"],[1,"slds-form-element",3,"ngClass"],[1,"slds-form-element__control"],["system-autofocus","","type","text",1,"slds-input",2,"min-width","8.8rem",3,"ngModel","placeholder","ngModelChange","change"],["id","error-message-unique-id",1,"slds-form-element__help"],[2,"vertical-align","top"],[1,"slds-input",3,"ngModel","placeholder","ngModelChange"],[1,"slds-button","slds-button--icon-border",3,"click"],[3,"icon","size"],[1,"slds-button","slds-button--icon-border","slds-button--brand",3,"click"],["administration-login-restriction-ip-addresses-row","",3,"ipAddress","otherEditing","editing"],[1,"slds-grow","slds-align--absolute-center"],[1,"slds-illustration","slds-illustration_small"],[1,"slds-text-longform"],[1,"slds-text-heading_medium"],["label","MSG_NO_IP_ADDRESSES_LISTED"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0)(1,"div",1)(2,"div",2),c.YNc(3,yl,1,0,"system-label",3),c.YNc(4,vl,1,0,"system-label",4),c.qZA(),c.YNc(5,xl,5,3,"ng-container",5),c.TgZ(6,"button",6),c.NdJ("click",(function(){return t.startAdding()})),c._UZ(7,"system-button-icon",7),c.qZA(),c.TgZ(8,"button",8),c.NdJ("click",(function(){return t.loadIpAddresses()})),c._UZ(9,"system-button-icon",9),c.qZA()(),c.TgZ(10,"div",10)(11,"table",11,12)(13,"thead")(14,"tr",13),c._UZ(15,"th"),c.TgZ(16,"th")(17,"div",14),c._UZ(18,"system-label",15),c.qZA()(),c.TgZ(19,"th",16)(20,"div",14),c._UZ(21,"system-label",17),c.qZA()(),c.TgZ(22,"th")(23,"div",14),c._UZ(24,"system-label",18),c.qZA()(),c.TgZ(25,"th")(26,"div",14),c._UZ(27,"system-label",19),c.qZA()()()(),c.TgZ(28,"tbody",20),c.YNc(29,Tl,14,12,"tr",5),c.YNc(30,Ml,1,2,"tr",21),c.qZA()()(),c.YNc(31,Jl,5,0,"div",22),c.qZA()),2&e&&(c.Q6J("system-overlay-loading-spinner",t.isLoading),c.xp6(3),c.Q6J("ngIf","white"===t.color),c.xp6(1),c.Q6J("ngIf","black"===t.color),c.xp6(1),c.Q6J("ngIf",t.checkboxesUsed),c.xp6(1),c.Q6J("disabled",t.isEditing),c.xp6(2),c.Q6J("disabled",t.isEditing),c.xp6(2),c.Q6J("ngClass",c.VKq(11,ql,0!==t.ipAddresses.length)),c.xp6(1),c.Q6J("ngStyle",c.VKq(13,El,0===t.ipAddresses.length?"none":"auto")),c.xp6(18),c.Q6J("ngIf",t.isAdding),c.xp6(1),c.Q6J("ngForOf",t.ipAddresses),c.xp6(1),c.Q6J("ngIf",!t.isAdding&&!t.isLoading&&0===t.ipAddresses.length))},dependencies:[i.mk,i.sg,i.O5,i.PC,n.Fj,n.JJ,n.On,x.J,T._,vs.m,v._,xs.S,Qs.Q,Zl],encapsulation:2}),AdministrationLoginRestrictionIpAddresses})(),Ul=(()=>{class AdministrationPasswordConfig{constructor(e,t,s,i){this.backend=e,this.modal=t,this.toast=s,this.language=i,this.isLoading=!0,this.config={minpwdlength:6,oneupper:!0,onelower:!0,onenumber:!0,onespecial:!0,pwdvaliditydays:0}}configIsDirty(){return!_.isEqual(this.config,this.configBackup)}cancel(){this.config=JSON.parse(JSON.stringify(this.configBackup))}save(){let e={minpwdlength:this.config.minpwdlength,oneupper:this.config.oneupper?"1":"0",onelower:this.config.onelower?"1":"0",onenumber:this.config.onenumber?"1":"0",onespecial:this.config.onespecial?"1":"0",pwdvaliditydays:this.config.pwdvaliditydays};this.isLoading=!0,this.backend.postRequest("configuration/configurator/editor/passwordsetting",null,{config:e}).pipe((0,gl.q)(1)).subscribe((e=>{this.configBackup=JSON.parse(JSON.stringify(this.config)),this.toast.sendToast("Password Configuration successfully saved.","success"),this.isLoading=!1}))}ngOnInit(){this.loadConfig()}loadConfig(){this.isLoading=!0,this.backend.getRequest("configuration/configurator/editor/passwordsetting").pipe((0,gl.q)(1)).subscribe((e=>{this.config.oneupper=!0===e.oneupper||1===e.oneupper||"1"===e.oneupper||!1,this.config.onelower=!0===e.onelower||1===e.onelower||"1"===e.onelower||!1,this.config.onenumber=!0===e.onenumber||1===e.onenumber||"1"===e.onenumber||!1,this.config.onespecial=!0===e.onespecial||1===e.onespecial||"1"===e.onespecial||!1,this.config.minpwdlength=parseInt(e.minpwdlength,10)||0,this.config.pwdvaliditydays=parseInt(e.pwdvaliditydays,10)||0,this.configBackup=JSON.parse(JSON.stringify(this.config)),this.isLoading=!1}))}}return AdministrationPasswordConfig.ɵfac=function(e){return new(e||AdministrationPasswordConfig)(c.Y36(u.y),c.Y36(Je.o),c.Y36(qe.A),c.Y36(p.d))},AdministrationPasswordConfig.ɵcmp=c.Xpm({type:AdministrationPasswordConfig,selectors:[["administration-password-config"]],decls:38,vars:15,consts:[[1,"slds-p-around--medium",3,"system-overlay-loading-spinner"],[1,"slds-grid","slds-grid--align-spread"],[1,"slds-text-heading_small"],["label","LBL_PASSWORD_CONFIGURATION"],[1,"slds-p-bottom--x-small",2,"white-space","nowrap"],[1,"slds-button","slds-button--icon","slds-button_neutral","slds-button--icon-border",3,"disabled","click"],["icon","close"],[1,"slds-button","slds-button--icon","slds-button_brand","slds-button--icon-border","slds-m-left--small",3,"disabled","click"],["icon","check"],[1,"slds-grid","slds-grid--vertical-align-start"],[1,"slds-form-element"],["for","password-config-minpwdlength",1,"slds-form-element__label"],["label","LBL_MIN_LENGTH"],[1,"slds-form-element__control"],["id","password-config-minpwdlength","size","3",3,"ngModel","onlyField","precision","asNumber","ngModelChange"],[1,"slds-form-element","slds-p-left--medium"],["for","password-config-pwdvaliditydays",1,"slds-form-element__label"],["label","LBL_EXPIRATION"],["label","LBL_DAYS",2,"display","inline-block"],["label","LBL_OFF",2,"display","inline-block"],["id","password-config-pwdvaliditydays","size","4",3,"ngModel","onlyField","precision","asNumber","ngModelChange"],["system-multi-select-checkboxes","",1,"slds-p-left--medium"],[3,"ngModel","ngModelChange"],["label","LBL_ONE_UPPERCASE"],["label","LBL_ONE_LOWERCASE"],["label","LBL_ONE_DIGIT"],["label","LBL_ONE_SPECIALCHAR"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0)(1,"div",1)(2,"div",2),c._UZ(3,"system-label",3),c.qZA(),c.TgZ(4,"div",4)(5,"button",5),c.NdJ("click",(function(){return t.cancel()})),c._UZ(6,"system-button-icon",6),c.qZA(),c.TgZ(7,"button",7),c.NdJ("click",(function(){return t.save()})),c._UZ(8,"system-button-icon",8),c.qZA()()(),c.TgZ(9,"div",9)(10,"div",10)(11,"label",11),c._UZ(12,"system-label",12),c.qZA(),c.TgZ(13,"div",13)(14,"system-input-number",14),c.NdJ("ngModelChange",(function(e){return t.config.minpwdlength=e})),c.qZA()()(),c.TgZ(15,"div",15)(16,"label",16),c._UZ(17,"system-label",17),c._uU(18," ("),c._UZ(19,"system-label",18),c._uU(20,", 0="),c._UZ(21,"system-label",19),c._uU(22,") "),c.qZA(),c.TgZ(23,"div",13)(24,"system-input-number",20),c.NdJ("ngModelChange",(function(e){return t.config.pwdvaliditydays=e})),c.qZA()()(),c.TgZ(25,"div",21)(26,"div")(27,"system-checkbox",22),c.NdJ("ngModelChange",(function(e){return t.config.oneupper=e})),c._UZ(28,"system-label",23),c.qZA()(),c.TgZ(29,"div")(30,"system-checkbox",22),c.NdJ("ngModelChange",(function(e){return t.config.onelower=e})),c._UZ(31,"system-label",24),c.qZA()(),c.TgZ(32,"div")(33,"system-checkbox",22),c.NdJ("ngModelChange",(function(e){return t.config.onenumber=e})),c._UZ(34,"system-label",25),c.qZA()(),c.TgZ(35,"div")(36,"system-checkbox",22),c.NdJ("ngModelChange",(function(e){return t.config.onespecial=e})),c._UZ(37,"system-label",26),c.qZA()()()()()),2&e&&(c.Q6J("system-overlay-loading-spinner",t.isLoading),c.xp6(5),c.Q6J("disabled",t.isLoading),c.xp6(2),c.Q6J("disabled",t.isLoading),c.xp6(7),c.Q6J("ngModel",t.config.minpwdlength)("onlyField",!0)("precision",0)("asNumber",!0),c.xp6(10),c.Q6J("ngModel",t.config.pwdvaliditydays)("onlyField",!0)("precision",0)("asNumber",!0),c.xp6(3),c.Q6J("ngModel",t.config.oneupper),c.xp6(3),c.Q6J("ngModel",t.config.onelower),c.xp6(3),c.Q6J("ngModel",t.config.onenumber),c.xp6(3),c.Q6J("ngModel",t.config.onespecial))},dependencies:[n.JJ,n.On,x.J,O.U,ml.i,T._,v._,Qs.Q],encapsulation:2}),AdministrationPasswordConfig})();function Nl(e,t){1&e&&(c.ynx(0),c._uU(1,"permanent"),c.BQk())}function kl(e,t){if(1&e&&(c.ynx(0),c._UZ(1,"system-display-datetime",21),c.BQk()),2&e){const e=c.oxw().$implicit;c.xp6(1),c.Q6J("date",e.login_blocked_until)}}function Sl(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"button",22),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw().$implicit,s=c.oxw();return c.KtG(s.unBlockUser(t.id,t.user_name))})),c._UZ(1,"system-button-icon",23),c.qZA()}}function Fl(e,t){1&e&&c._UZ(0,"system-button-icon",24)}function Rl(e,t){if(1&e&&(c.TgZ(0,"tr")(1,"td",16)(2,"div",17),c._uU(3),c.qZA()(),c.TgZ(4,"td",16)(5,"div",17),c.YNc(6,Nl,2,0,"ng-container",18),c.YNc(7,kl,2,1,"ng-container",18),c.qZA()(),c.TgZ(8,"td"),c.YNc(9,Sl,2,0,"button",19),c.YNc(10,Fl,1,0,"system-button-icon",20),c.qZA()()),2&e){const e=t.$implicit,s=c.oxw();c.xp6(3),c.Oqu(e.user_name),c.xp6(3),c.Q6J("ngIf",e.login_blocked),c.xp6(1),c.Q6J("ngIf",!e.login_blocked&&e.login_blocked_until),c.xp6(2),c.Q6J("ngIf",!s.isUnblocking[e.id]),c.xp6(1),c.Q6J("ngIf",s.isUnblocking[e.id])}}function Il(e,t){1&e&&(c.TgZ(0,"div",25)(1,"div",26)(2,"div",27)(3,"h3",28),c._UZ(4,"system-label",29),c.qZA()()()())}const wl=function(e){return{"slds-border-bottom":e}},Dl=function(e){return{"slds-grow":e}},Ol=function(e){return{borderBottom:e}};let Bl=(()=>{class AdministrationBlockedUsers{constructor(e,t,s,i){this.backend=e,this.modal=t,this.toast=s,this.metadata=i,this.blockedUsers=[],this.isLoading=!1,this.isUnblocking={}}ngOnInit(){this.loadBlockedUsers()}loadBlockedUsers(){this.isLoading=!0;let e=this.metadata.getComponentConfig("LoginRestriction");e&&e.modulefilter&&e.modulefilter;this.backend.getList("Users",[{sortfield:"user_name",sortdirection:"ASC"}],{modulefilter:"7cf2fab0-b845-5a96-6045-2cef7c7f91d9",limit:-99,source:"db",fields:["id","user_name","login_blocked","login_blocked_until"]}).pipe((0,gl.q)(1)).subscribe((e=>{this.blockedUsers=e.list,this.blockedUsers=this.blockedUsers.sort(((e,t)=>e.user_name.localeCompare(t.user_name))),this.isLoading=!1}))}unBlockUser(e,t){this.isUnblocking[e]=!0,this.backend.postRequest("module/Users/"+e,null,{login_blocked:"0",login_blocked_until:""}).pipe((0,gl.q)(1)).subscribe((t=>{this.isUnblocking[e]=!1,"0"===t.login_blocked&&""===t.login_blocked_until&&(this.toast.sendToast("User "+t.user_name+" successfully un-blocked.","success",null),this.blockedUsers.some(((t,s)=>{if(t.id===e)return this.blockedUsers.splice(s,1),!0})))}),(s=>{this.isUnblocking[e]=!1,this.toast.sendToast("Error un-blocking User "+t+".","error",s.error.error.message)}))}}return AdministrationBlockedUsers.ɵfac=function(e){return new(e||AdministrationBlockedUsers)(c.Y36(u.y),c.Y36(Je.o),c.Y36(qe.A),c.Y36(b.Pu))},AdministrationBlockedUsers.ɵcmp=c.Xpm({type:AdministrationBlockedUsers,selectors:[["administration-blocked-users"]],decls:22,vars:12,consts:[[1,"slds-grid","slds-grid--vertical","slds-p-around--medium",2,"height","100%",3,"system-overlay-loading-spinner"],[1,"slds-grid","slds-grid--align-spread",3,"ngClass"],[1,"slds-text-heading_small","slds-m-bottom--x-small"],["label","LBL_BLOCKED_USERS"],["system-title","LBL_RELOAD",1,"slds-button","slds-button--icon","slds-m-left--xx-small",3,"click"],["icon","refresh"],[1,"slds-scrollable--y",3,"ngClass"],[1,"slds-table","slds-table_bordered","slds-table--header-fixed",3,"ngStyle"],[1,"slds-text-title--caps"],[1,"slds-truncate","slds-p-horizontal--x-small"],["label","LBL_USER_NAME"],[2,"width","100%"],["label","LBL_PERMANENT",2,"display","inline-block"],["label","LBL_UNTIL",2,"display","inline-block"],[4,"ngFor","ngForOf"],["class","slds-grow slds-align--absolute-center",4,"ngIf"],[1,"slds-p-right--x-small"],[1,"slds-truncate"],[4,"ngIf"],["class","slds-button slds-button--icon","system-title","LBL_DELETE",3,"click",4,"ngIf"],["icon","spinner",4,"ngIf"],[3,"date"],["system-title","LBL_DELETE",1,"slds-button","slds-button--icon",3,"click"],["icon","delete"],["icon","spinner"],[1,"slds-grow","slds-align--absolute-center"],[1,"slds-illustration","slds-illustration_small"],[1,"slds-text-longform"],[1,"slds-text-heading_medium"],["label","MSG_NO_USERS_BLOCKED"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0)(1,"div",1)(2,"div",2),c._UZ(3,"system-label",3),c.qZA(),c.TgZ(4,"button",4),c.NdJ("click",(function(){return t.loadBlockedUsers()})),c._UZ(5,"system-button-icon",5),c.qZA()(),c.TgZ(6,"div",6)(7,"table",7)(8,"thead")(9,"tr",8)(10,"th")(11,"div",9),c._UZ(12,"system-label",10),c.qZA()(),c.TgZ(13,"th",11)(14,"div",9),c._UZ(15,"system-label",12),c._uU(16,"/"),c._UZ(17,"system-label",13),c.qZA()(),c._UZ(18,"th"),c.qZA()(),c.TgZ(19,"tbody"),c.YNc(20,Rl,11,5,"tr",14),c.qZA()()(),c.YNc(21,Il,5,0,"div",15),c.qZA()),2&e&&(c.Q6J("system-overlay-loading-spinner",t.isLoading),c.xp6(1),c.Q6J("ngClass",c.VKq(6,wl,0===t.blockedUsers.length)),c.xp6(5),c.Q6J("ngClass",c.VKq(8,Dl,0!==t.blockedUsers.length)),c.xp6(1),c.Q6J("ngStyle",c.VKq(10,Ol,0===t.blockedUsers.length?"none":"auto")),c.xp6(13),c.Q6J("ngForOf",t.blockedUsers),c.xp6(1),c.Q6J("ngIf",!t.isLoading&&0===t.blockedUsers.length))},dependencies:[i.mk,i.sg,i.O5,i.PC,x.J,tl.a,T._,v._,xs.S],encapsulation:2}),AdministrationBlockedUsers})(),Ql=(()=>{class AdministrationLoginMethods{constructor(e,t,s,i){this.backend=e,this.modal=t,this.toast=s,this.language=i,this.isLoading=!0,this.config={totpAuthenticationRequired:!1}}configIsDirty(){return!_.isEqual(this.config,this.configBackup)}cancel(){this.config=JSON.parse(JSON.stringify(this.configBackup))}save(){let e={totp_authentication_required:this.config.totpAuthenticationRequired};this.isLoading=!0,this.backend.postRequest("configuration/configurator/editor/login_methods",null,{config:e}).pipe((0,gl.q)(1)).subscribe((e=>{this.configBackup=JSON.parse(JSON.stringify(this.config)),this.toast.sendToast("Login Method Configuration successfully saved.","success"),this.isLoading=!1}))}ngOnInit(){this.loadConfig()}loadConfig(){this.isLoading=!0,this.backend.getRequest("configuration/configurator/editor/login_methods").pipe((0,gl.q)(1)).subscribe((e=>{this.config.totpAuthenticationRequired=!0===e.totp_authentication_required||1===e.totp_authentication_required||"1"===e.totp_authentication_required||!1,this.configBackup=JSON.parse(JSON.stringify(this.config)),this.isLoading=!1}))}}return AdministrationLoginMethods.ɵfac=function(e){return new(e||AdministrationLoginMethods)(c.Y36(u.y),c.Y36(Je.o),c.Y36(qe.A),c.Y36(p.d))},AdministrationLoginMethods.ɵcmp=c.Xpm({type:AdministrationLoginMethods,selectors:[["administration-login-methods"]],decls:13,vars:4,consts:[[1,"slds-p-around--medium",3,"system-overlay-loading-spinner"],[1,"slds-grid","slds-grid--align-spread"],[1,"slds-text-heading_small"],["label","LBL_LOGIN_METHODS"],[1,"slds-p-bottom--x-small",2,"white-space","nowrap"],[1,"slds-button","slds-button--icon","slds-button_neutral","slds-button--icon-border",3,"disabled","click"],["icon","close"],[1,"slds-button","slds-button--icon","slds-button_brand","slds-button--icon-border","slds-m-left--small",3,"disabled","click"],["icon","check"],[1,"slds-grid","slds-grid--vertical-align-start"],[3,"ngModel","ngModelChange"],["label","LBL_TOTP_AUTHENTICATION_REQUIRED"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0)(1,"div",1)(2,"div",2),c._UZ(3,"system-label",3),c.qZA(),c.TgZ(4,"div",4)(5,"button",5),c.NdJ("click",(function(){return t.cancel()})),c._UZ(6,"system-button-icon",6),c.qZA(),c.TgZ(7,"button",7),c.NdJ("click",(function(){return t.save()})),c._UZ(8,"system-button-icon",8),c.qZA()()(),c.TgZ(9,"div",9)(10,"div")(11,"system-checkbox",10),c.NdJ("ngModelChange",(function(e){return t.config.totpAuthenticationRequired=e})),c._UZ(12,"system-label",11),c.qZA()()()()),2&e&&(c.Q6J("system-overlay-loading-spinner",t.isLoading),c.xp6(5),c.Q6J("disabled",t.isLoading),c.xp6(2),c.Q6J("disabled",t.isLoading),c.xp6(4),c.Q6J("ngModel",t.config.totpAuthenticationRequired))},dependencies:[n.JJ,n.On,x.J,O.U,T._,v._],encapsulation:2}),AdministrationLoginMethods})();const Yl=["whiteList"],zl=["blackList"];let Pl=(()=>{class AdministrationLoginManagement{constructor(e){this.cdref=e}ngOnInit(){this.cdref.detectChanges()}}return AdministrationLoginManagement.ɵfac=function(e){return new(e||AdministrationLoginManagement)(c.Y36(c.sBO))},AdministrationLoginManagement.ɵcmp=c.Xpm({type:AdministrationLoginManagement,selectors:[["ng-component"]],viewQuery:function(e,t){if(1&e&&(c.Gf(Yl,5),c.Gf(zl,5)),2&e){let e;c.iGM(e=c.CRH())&&(t.whiteListComponent=e.first),c.iGM(e=c.CRH())&&(t.blackListComponent=e.first)}},decls:22,vars:2,consts:[[1,"slds-grid","slds-grid_vertical-align-center","slds-p-around--small","slds-border--bottom"],["icon","custom:custom62"],[1,"slds-text-heading_medium"],["label","LBL_LOGIN_MANAGEMENT"],[1,"slds-box","slds-m-horizontal--medium","slds-m-bottom--medium","slds-m-top--medium",2,"padding","0"],["system-to-bottom",""],[1,"slds-p-bottom--medium","slds-p-horizontal--medium",2,"height","50%"],[1,"slds-box","slds-grid",2,"height","100%","padding","0"],[1,"slds-size--1-of-2",2,"height","100%"],["color","white",2,"display","block","height","100%",3,"siblingComponent"],["whiteList",""],[1,"slds-size--1-of-2","slds-border--left",2,"height","100%"],["color","black",2,"display","block","height","100%",3,"siblingComponent"],["blackList",""],[1,"slds-p-bottom--medium",2,"height","50%"],[1,"slds-grid","slds-m-horizontal--medium","slds-grid--vertical-align-start",2,"height","100%"],[1,"slds-size--1-of-2"],[1,"slds-box","slds-m-right--x-small","slds-m-bottom--medium",2,"padding","0","display","block"],[1,"slds-box","slds-m-right--x-small",2,"padding","0","display","block"],[1,"slds-box","slds-m-left--x-small",2,"padding","0","display","block","height","100%"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c._UZ(1,"system-icon",1),c.TgZ(2,"h2",2),c._UZ(3,"system-label",3),c.qZA()(),c.TgZ(4,"div",4),c._UZ(5,"administration-login-restriction"),c.qZA(),c.TgZ(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8),c._UZ(10,"administration-login-restriction-ip-addresses",9,10),c.qZA(),c.TgZ(12,"div",11),c._UZ(13,"administration-login-restriction-ip-addresses",12,13),c.qZA()()(),c.TgZ(15,"div",14)(16,"div",15)(17,"div",16),c._UZ(18,"administration-password-config",17)(19,"administration-login-methods",18),c.qZA(),c.TgZ(20,"div",8),c._UZ(21,"administration-blocked-users",19),c.qZA()()()()),2&e&&(c.xp6(10),c.Q6J("siblingComponent",t.blackListComponent),c.xp6(3),c.Q6J("siblingComponent",t.whiteListComponent))},dependencies:[L.f,T._,A.H,hl,Cl,Ul,Bl,Ql],encapsulation:2}),AdministrationLoginManagement})();var Gl=s(2161);const Hl=["administration-gdpr-retention-manager",""];function Kl(e,t){1&e&&c._UZ(0,"system-utility-icon",19)}function jl(e,t){if(1&e&&c._UZ(0,"system-utility-icon",20),2&e){const e=c.oxw().$implicit;c.Q6J("colorclass",e.id?"slds-icon-text-warning":"")}}const $l=function(e){return{"slds-theme--shade":e}};function Xl(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",12),c.NdJ("click",(function(){const t=c.CHM(e).index,s=c.oxw();return c.KtG(s.selectPolicyByIndex(t))})),c.TgZ(1,"div",13),c.NdJ("dblclick",(function(){const t=c.CHM(e).$implicit,s=c.oxw();return c.KtG(s.toggleStatus(t))})),c.YNc(2,Kl,1,0,"system-utility-icon",14),c.YNc(3,jl,1,1,"system-utility-icon",15),c.qZA(),c.TgZ(4,"div",16),c._uU(5),c.qZA(),c.TgZ(6,"button",17),c.NdJ("click",(function(){const t=c.CHM(e).index,s=c.oxw();return c.KtG(s.deleteByIndex(t))})),c._UZ(7,"system-button-icon",18),c.qZA()()}if(2&e){const e=t.$implicit,s=t.index,i=c.oxw();c.Q6J("ngClass",c.VKq(6,$l,s==i.selectedPolicyIndex)),c.xp6(1),c.Q6J("ngSwitch",e.active),c.xp6(1),c.Q6J("ngSwitchCase",1),c.xp6(1),c.Q6J("ngSwitchCase",0),c.xp6(2),c.Oqu(e.name),c.xp6(1),c.Q6J("disabled",i.isloading)}}function Vl(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"button",17),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw();return c.KtG(t.addPolicy())})),c._UZ(1,"system-button-icon",21),c.qZA()}if(2&e){const e=c.oxw();c.Q6J("disabled",e.isloading)}}function Wl(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"tr",60)(1,"td")(2,"a",61),c.NdJ("click",(function(t){const s=c.CHM(e).$implicit,i=c.oxw(4);return c.KtG(i.openRecord(s.id,t))})),c._uU(3),c.qZA()(),c.TgZ(4,"td"),c._uU(5),c.qZA()()}if(2&e){const e=t.$implicit;c.xp6(3),c.Oqu(e.id),c.xp6(2),c.Oqu(e.name)}}function eo(e,t){if(1&e&&(c.TgZ(0,"tbody"),c.YNc(1,Wl,6,2,"tr",59),c.qZA()),2&e){const e=c.oxw(3);c.xp6(1),c.Q6J("ngForOf",e.results.list)}}function to(e,t){1&e&&c._UZ(0,"tbody",62),2&e&&c.Q6J("rows",20)}function so(e,t){1&e&&(c.TgZ(0,"div",63)(1,"system-illustration-no-records"),c._UZ(2,"system-label",64),c.qZA()())}function io(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",51),c.NdJ("system-to-bottom",(function(){c.CHM(e);const t=c.oxw(2);return c.KtG(t.loadmore())})),c.TgZ(1,"table",52)(2,"thead")(3,"tr",53)(4,"th"),c._UZ(5,"system-label",54),c.qZA(),c.TgZ(6,"th"),c._UZ(7,"system-label",55),c.qZA()()(),c.YNc(8,eo,2,1,"tbody",56),c.YNc(9,to,1,1,"tbody",57),c.qZA(),c.YNc(10,so,3,0,"div",58),c.qZA()}if(2&e){const e=c.oxw(2);c.xp6(8),c.Q6J("ngIf",e.results),c.xp6(1),c.Q6J("ngIf",e.isloading),c.xp6(1),c.Q6J("ngIf",!e.isloading&&0==e.results.total)}}function no(e,t){if(1&e){const e=c.EpF();c.ynx(0),c.TgZ(1,"div",22)(2,"div",23)(3,"div",24)(4,"label",25),c._UZ(5,"system-label",26),c.qZA(),c.TgZ(6,"div",27)(7,"system-input-text",28),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.selectedPolicy.name=t)})),c.qZA()()(),c.TgZ(8,"div",29)(9,"label",25),c._UZ(10,"system-label",30),c.qZA(),c.TgZ(11,"div",27)(12,"div",31)(13,"select",32),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.selectedPolicy.retention_type=t)})),c.TgZ(14,"option",33),c._UZ(15,"system-label",34),c.qZA(),c.TgZ(16,"option",35),c._UZ(17,"system-label",36),c.qZA(),c.TgZ(18,"option",37),c._UZ(19,"system-label",38),c.qZA()()()()()(),c.TgZ(20,"div",39)(21,"label",25),c._UZ(22,"system-label",40),c.qZA(),c.TgZ(23,"div",27)(24,"system-input-module-filter",28),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.selectedPolicy.sysmodulefilter_id=t)})),c.qZA()()(),c.TgZ(25,"div",39)(26,"label",25),c._UZ(27,"system-label",41),c.qZA(),c.TgZ(28,"div",27)(29,"system-input-text",28),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.selectedPolicy.delete_related=t)})),c.qZA()()(),c.TgZ(30,"div",39)(31,"label",25),c._UZ(32,"system-label",42),c.qZA(),c.TgZ(33,"div",27)(34,"textarea",43),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw();return c.KtG(s.selectedPolicy.description=t)})),c.qZA()()(),c.TgZ(35,"div",44)(36,"div"),c._UZ(37,"system-label",45),c._uU(38),c.qZA(),c.TgZ(39,"button",46),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw();return c.KtG(t.getResults())})),c._UZ(40,"system-label",47),c.qZA(),c.TgZ(41,"button",48),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw();return c.KtG(t.save())})),c._UZ(42,"system-label",49),c.qZA()()(),c.YNc(43,io,11,3,"div",50),c.BQk()}if(2&e){const e=c.oxw();c.xp6(7),c.Q6J("ngModel",e.selectedPolicy.name),c.xp6(6),c.Q6J("ngModel",e.selectedPolicy.retention_type),c.xp6(11),c.Q6J("ngModel",e.selectedPolicy.sysmodulefilter_id),c.xp6(5),c.Q6J("ngModel",e.selectedPolicy.delete_related),c.xp6(5),c.Q6J("ngModel",e.selectedPolicy.description),c.xp6(4),c.hij(" ",e.results.total,""),c.xp6(1),c.Q6J("disabled",!e.selectedPolicy.id),c.xp6(2),c.Q6J("disabled",e.isloading),c.xp6(2),c.Q6J("ngIf",e.selectedPolicy.id)}}function lo(e,t){1&e&&(c.TgZ(0,"div",65),c._UZ(1,"system-label",66),c.qZA())}let oo=(()=>{class AdministrationGDPRRetentionManager{constructor(e,t,s,i,n,l){this.toast=e,this.modal=t,this.modelutilities=s,this.backend=i,this.router=n,this.injector=l,this.policies=[],this.isloading=!1,this.initialized=!1,this.initializeResults()}ngOnInit(){this.loadPolicies()}selectPolicyByIndex(e){this.isloading||this.selectedPolicyIndex==e||(this.selectedPolicyIndex=e,this.initializeResults())}get selectedPolicy(){return this.selectedPolicyIndex>=0?this.policies[this.selectedPolicyIndex]:void 0}initializeResults(){this.results={list:[],module:"",total:0}}loadPolicies(){this.backend.getRequest("admin/gdprmanager/retentionpolicies").subscribe((e=>{this.policies=e,this.initialized=!0}))}toggleStatus(e){e.id&&(e.active=!e.active,this.backend.postRequest(`admin/gdprmanager/retentionpolicies/${e.id}/activate/${e.active?1:0}`))}save(){let e=this.modelutilities.generateGuid(),t=this.modal.await("LBL_SAVING");this.backend.postRequest(`admin/gdprmanager/retentionpolicies/${this.selectedPolicy.id?this.selectedPolicy.id:e}`,{},this.selectedPolicy).subscribe((()=>{this.selectedPolicy.id||(this.selectedPolicy.id=e),t.emit(!0)}),(()=>{t.emit(!0)}))}getResults(){this.isloading=!0,this.results.list=[],this.backend.getRequest(`admin/gdprmanager/retentionpolicies/${this.selectedPolicy.id}/results`).subscribe((e=>{this.results=e,this.isloading=!1}),(()=>{this.isloading=!1}))}loadmore(){!this.isloading&&this.results.total>this.results.list.length&&(this.isloading=!0,this.backend.getRequest(`admin/gdprmanager/retentionpolicies/${this.selectedPolicy.id}/results`,{start:this.results.list.length}).subscribe((e=>{this.results.list=this.results.list.concat(e.list),this.isloading=!1}),(()=>{this.isloading=!1})))}openRecord(e,t){t.preventDefault(),t.stopPropagation(),this.router.navigate([`module/${this.results.module}/${e}`])}deleteByIndex(e){this.modal.confirm("LBL_DELETE_RECORD","LBL_DELETE_RECORD").subscribe((t=>{if(t)if(this.selectedPolicy.id){let t=this.modal.await("LBL_DELETING");this.backend.deleteRequest(`admin/gdprmanager/retentionpolicies/${this.selectedPolicy.id}`).subscribe((s=>{this.deletePolicy(e),t.emit(!0)}),(()=>{t.emit(!0)}))}else this.deletePolicy(e)}))}deletePolicy(e){this.selectedPolicyIndex==e&&(this.selectedPolicyIndex=void 0),this.policies.splice(e,1)}addPolicy(){this.modal.input("LBL_POLICY_NAME","LBL_POLICY_NAME").subscribe((e=>{if(e){let t={id:"",name:e,deleted:!1,retention_type:"I",active:!1,description:""};this.policies.push(t),this.selectedPolicyIndex=this.policies.length-1}}))}}return AdministrationGDPRRetentionManager.ɵfac=function(e){return new(e||AdministrationGDPRRetentionManager)(c.Y36(qe.A),c.Y36(Je.o),c.Y36(I.A),c.Y36(u.y),c.Y36(F.F0),c.Y36(c.zs3))},AdministrationGDPRRetentionManager.ɵcmp=c.Xpm({type:AdministrationGDPRRetentionManager,selectors:[["","administration-gdpr-retention-manager",""]],attrs:Hl,decls:13,vars:5,consts:[[1,"slds-grid","slds-grid_vertical-align-center","slds-p-around--small","slds-border--bottom"],["icon","apex_plugin"],[1,"slds-text-heading_medium"],["label","LBL_GDPR_RETENTION_MANAGER"],[1,"slds-theme--default","slds-grid",3,"system-overlay-loading-spinner"],["system-to-bottom","",1,"slds-size--1-of-3","slds-border--right"],["class","slds-grid slds-grid--align-spread slds-grid_vertical-align-center slds-p-around--small slds-border--bottom",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"slds-p-around--x-small","slds-text-align--center"],["class","slds-button slds-button--icon",3,"disabled","click",4,"ngIf"],[1,"slds-size--2-of-3"],[4,"ngIf","ngIfElse"],["selectpolicy",""],[1,"slds-grid","slds-grid--align-spread","slds-grid_vertical-align-center","slds-p-around--small","slds-border--bottom",3,"ngClass","click"],[3,"ngSwitch","dblclick"],["icon","success","colorclass","slds-icon-text-success","size","x-small",4,"ngSwitchCase"],["icon","clear","size","x-small",3,"colorclass",4,"ngSwitchCase"],[1,"slds-grow","slds-p-left--x-small","slds-truncate","slds-text-link--reset"],[1,"slds-button","slds-button--icon",3,"disabled","click"],["icon","delete"],["icon","success","colorclass","slds-icon-text-success","size","x-small"],["icon","clear","size","x-small",3,"colorclass"],["icon","new"],[1,"slds-grid_vertical","slds-p-around--x-small"],[1,"slds-grid","slds-grid_vertical-align-center","slds-p-right--xx-small"],[1,"slds-size--3-of-4","slds-form-element"],[1,"slds-form-element__label"],["label","LBL_NAME"],[1,"slds-form-element__control"],[3,"ngModel","ngModelChange"],[1,"slds-size--1-of-4","slds-form-element","slds-p-left--xx-small"],["label","LBL_TYPE"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],["value","I"],["label","LBL_SET_INACTIVE"],["value","D"],["label","LBL_MARK_DELETED"],["value","P"],["label","LBL_PURGE"],[1,"slds-form-element"],["label","LBL_MODULE_FILTER"],["label","LBL_DELETE_RELATED"],["label","LBL_DESCRIPTION"],[1,"slds-textarea",3,"ngModel","ngModelChange"],[1,"slds-grid","slds-p-vertical--x-small","slds-grid_vertical-align-center"],["label","LBL_TOTAL"],[1,"slds-col--bump-left","slds-button","slds-button_neutral",3,"disabled","click"],["label","LBL_TEST"],[1,"slds-button","slds-button_brand",3,"disabled","click"],["label","LBL_SAVE"],[3,"system-to-bottom",4,"ngIf"],[3,"system-to-bottom"],["role","grid",1,"slds-table","slds-table--fixed-layout","slds-max-medium-table--stacked-horizontal","slds-table--header-fixed"],[1,"slds-text-title--caps"],["label","LBL_ID",1,"slds-th__action"],["label","LBL_SUMMARY",1,"slds-th__action"],[4,"ngIf"],["system-table-stencils","","columns","2",3,"rows",4,"ngIf"],["class","slds-height_full slds-align--absolute-center",4,"ngIf"],["class","slds-hint-parent",4,"ngFor","ngForOf"],[1,"slds-hint-parent"],["href","#",1,"slds-text-link_reset",3,"click"],["system-table-stencils","","columns","2",3,"rows"],[1,"slds-height_full","slds-align--absolute-center"],["label","LBL_NO_RECORDS"],["system-to-bottom-noscroll","",1,"slds-align--absolute-center"],["label","LBL_SELECT_POLICY"]],template:function(e,t){if(1&e&&(c.TgZ(0,"div",0),c._UZ(1,"system-icon",1),c.TgZ(2,"h2",2),c._UZ(3,"system-label",3),c.qZA()(),c.TgZ(4,"div",4)(5,"div",5),c.YNc(6,Xl,8,8,"div",6),c.TgZ(7,"div",7),c.YNc(8,Vl,2,1,"button",8),c.qZA()(),c.TgZ(9,"div",9),c.YNc(10,no,44,9,"ng-container",10),c.YNc(11,lo,2,0,"ng-template",null,11,c.W1O),c.qZA()()),2&e){const e=c.MAs(12);c.xp6(4),c.Q6J("system-overlay-loading-spinner",!t.initialized),c.xp6(2),c.Q6J("ngForOf",t.policies),c.xp6(2),c.Q6J("ngIf",t.initialized),c.xp6(2),c.Q6J("ngIf",t.selectedPolicyIndex>=0)("ngIfElse",e)}},dependencies:[i.mk,i.sg,i.O5,i.RF,i.n9,n.YN,n.Kr,n.Fj,n.EJ,n.JJ,n.On,x.J,L.f,sl.C,Dn.Z,je.l,T._,Gl.x,M.r,A.H,y.t,v._],encapsulation:2}),AdministrationGDPRRetentionManager})();var ao=s(2391);function ro(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",21)(1,"button",22),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw();return c.KtG(t.addAsset("loginimage"))})),c._UZ(2,"system-button-icon",23),c.qZA()()}}function co(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",24),c._UZ(1,"img",25),c.TgZ(2,"div",26),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw();return c.KtG(t.assets.loginimage=void 0)})),c.TgZ(3,"div",27),c._UZ(4,"system-utility-icon",28),c.qZA()()()}if(2&e){const e=c.oxw();c.xp6(1),c.Q6J("src",e.assets.loginimage,c.LSH)}}function go(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",21)(1,"button",22),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw();return c.KtG(t.addAsset("headerimage"))})),c._UZ(2,"system-button-icon",23),c.qZA()()}}function uo(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",24),c._UZ(1,"img",25),c.TgZ(2,"div",26),c.NdJ("click",(function(){c.CHM(e);const t=c.oxw();return c.KtG(t.assets.headerimage=void 0)})),c.TgZ(3,"div",27),c._UZ(4,"system-utility-icon",28),c.qZA()()()}if(2&e){const e=c.oxw();c.xp6(1),c.Q6J("src",e.assets.headerimage,c.LSH)}}function mo(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"system-input-color",31),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw().$implicit;return c.KtG(s.value=t)})),c.qZA()}if(2&e){const e=c.oxw().$implicit;c.Q6J("isedited",e.value!=e.originalvalue)("ngModel",e.value)}}const po=function(e){return{"slds-is-edited":e}};function ho(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"input",32),c.NdJ("ngModelChange",(function(t){c.CHM(e);const s=c.oxw().$implicit;return c.KtG(s.value=t)})),c.qZA()}if(2&e){const e=c.oxw().$implicit;c.Q6J("ngClass",c.VKq(2,po,e.value!=e.originalvalue))("ngModel",e.value)}}function bo(e,t){if(1&e&&(c.TgZ(0,"div",10)(1,"div",11),c._uU(2),c.qZA(),c.TgZ(3,"div",13),c.YNc(4,mo,1,2,"system-input-color",29),c.YNc(5,ho,1,4,"input",30),c.qZA()()),2&e){const e=t.$implicit;c.xp6(2),c.hij(" ",e.name," "),c.xp6(2),c.Q6J("ngIf","color"==e.csstype),c.xp6(1),c.Q6J("ngIf","string"==e.csstype)}}let fo=(()=>{class AdministrationAssetManager{constructor(e,t,s,i,n,l){this.toast=e,this.modal=t,this.backend=s,this.configuration=i,this.modelutilities=n,this.injector=l,this.assets={loginimage:null,headerimage:null},this.cssvars=[{value:"",csstype:"color",name:"color-white"},{value:"",csstype:"color",name:"color-grey-3"},{value:"",csstype:"color",name:"color-grey-9"},{value:"",csstype:"color",name:"color-grey-13"},{value:"",csstype:"color",name:"brand-background-primary"},{value:"",csstype:"color",name:"brand-primary"},{value:"",csstype:"color",name:"brand-primary-active"},{value:"",csstype:"color",name:"brand-accessible"},{value:"",csstype:"color",name:"brand-accessible-active"},{value:"",csstype:"color",name:"brand-header-contrast-cool"},{value:"",csstype:"color",name:"brand-text-link"},{value:"",csstype:"color",name:"color-background-inverse"},{value:"",csstype:"color",name:"color-border-inverse"},{value:"",csstype:"color",name:"color-background-success"},{value:"",csstype:"color",name:"color-background-success-dark"},{value:"",csstype:"color",name:"color-text-link-active"},{value:"",csstype:"color",name:"color-progressbar_item-completed"},{value:"",csstype:"color",name:"brand-primary-transparent"},{value:"",csstype:"color",name:"color-background-alt-inverse"},{value:"",csstype:"color",name:"color-border-brand"},{value:"",csstype:"color",name:"sds-c-button-brand-color-background"},{value:"",csstype:"color",name:"sds-c-button-neutral-color-background-hover"},{value:"",csstype:"color",name:"sds-c-button-brand-color-border-hover"},{value:"",csstype:"color",name:"sds-c-button-brand-color-background-active"},{value:"",csstype:"color",name:"sds-c-button-brand-color-border-active"},{value:"",csstype:"color",name:"sds-c-button-brand-color-background-hover"},{value:"",csstype:"string",name:"sds-c-input-shadow-focus"},{value:"",csstype:"string",name:"sds-c-textarea-shadow-focus"},{value:"",csstype:"string",name:"sds-c-select-shadow-focus"},{value:"",csstype:"color",name:"sds-c-button-text-color-hover"},{value:"",csstype:"color",name:"sds-c-icon-color-foreground"}],this.assetdimensions={loginimage:{cropheight:300,cropwidth:300,croptype:"square",cropresize:!1},headerimage:{cropheight:50,cropwidth:300,croptype:"square",cropresize:!1}}}ngOnInit(){for(let e of this.cssvars)e.value=getComputedStyle(document.documentElement).getPropertyValue("--"+e.name),e.originalvalue=getComputedStyle(document.documentElement).getPropertyValue("--"+e.name);this.loadSystemAssets()}loadSystemAssets(){this.backend.getRequest("system/spiceui/admin/assets").subscribe((e=>{this.loadedassets=e;let t=e.find((e=>"loginimage"==e.assetkey));t&&(this.assets.loginimage=t.assetvalue);let s=e.find((e=>"headerimage"==e.assetkey));s&&(this.assets.headerimage=s.assetvalue);let i=e.find((e=>"colors"==e.assetkey));if(i){let e=JSON.parse(i.assetvalue);for(let t in e){let s=this.cssvars.find((e=>t));s&&(s.loadedvalue=e[t])}}}))}addAsset(e){this.modal.openModal("SystemUploadImage").subscribe((t=>{t.instance.cropheight=this.assetdimensions[e].cropheight,t.instance.cropwidth=this.assetdimensions[e].cropwidth,t.instance.croptype=this.assetdimensions[e].croptype,t.instance.cropresize=this.assetdimensions[e].cropresize,t.instance.imagedata.subscribe((t=>{this.assets[e]=t}))}))}colorLabel(e){return"LBL_TC_"+e.toUpperCase().replace(new RegExp("-","g"),"_")}assetBoxStyle(e){return{width:this.assetdimensions[e].cropwidth,height:this.assetdimensions[e].cropheight}}save(){let e=[],t=this.loadedassets.find((e=>"loginimage"==e.assetkey));e.push({id:t?t.id:this.modelutilities.generateGuid(),assetkey:"loginimage",assetvalue:this.assets.loginimage});let s=this.loadedassets.find((e=>"headerimage"==e.assetkey));e.push({id:s?s.id:this.modelutilities.generateGuid(),assetkey:"headerimage",assetvalue:this.assets.headerimage});let i={};for(let e of this.cssvars)(e.value!=e.originalvalue||e.loadedvalue)&&(i[e.name]=e.value,document.documentElement.style.setProperty("--"+e.name,e.value),e.originalvalue=e.value);let n=this.loadedassets.find((e=>"colors"==e.assetkey));e.push({id:n?n.id:this.modelutilities.generateGuid(),assetkey:"colors",assetvalue:JSON.stringify(i)}),this.backend.postRequest("system/spiceui/admin/assets",{},e).subscribe((e=>{this.configuration.setAssets(e,!0)}))}}return AdministrationAssetManager.ɵfac=function(e){return new(e||AdministrationAssetManager)(c.Y36(qe.A),c.Y36(Je.o),c.Y36(u.y),c.Y36(vn.C),c.Y36(I.A),c.Y36(c.zs3))},AdministrationAssetManager.ɵcmp=c.Xpm({type:AdministrationAssetManager,selectors:[["administration-asset-manager"]],decls:28,vars:7,consts:[[1,"slds-grid","slds-grid_vertical-align-center","slds-p-around--small","slds-border--bottom"],["icon","apex_plugin"],[1,"slds-text-heading_medium"],["label","LBL_CI_MANAGEMENT"],[1,"slds-button","slds-button--neutral","slds-col--bump-left",3,"click"],["label","LBL_SAVE"],["system-to-bottom","",1,"slds-theme--default","slds-p-around--small"],[1,"slds-text-heading--medium","slds-p-vertical--x-small","slds-border--bottom"],["label","LBL_IMAGES"],[1,"slds-grid","slds-grid--vertical"],[1,"slds-grid","slds-p-vertical--small","slds-grid--vertical-align-center"],[1,"slds-size--1-of-3"],["label","LBL_LOGIN_IMAGE"],[1,"slds-grow"],[1,"slds-box--border",3,"ngStyle"],["class","slds-size--1-of-1 slds-height_full slds-align--absolute-center",4,"ngIf"],["class","slds-is-relative",4,"ngIf"],["label","LBL_HEADER_IMAGE"],[1,"slds-text-heading--medium","slds-p-vertical--x-small","slds-border--top","slds-border--bottom"],["label","LBL_COLORS"],["class","slds-grid slds-p-vertical--small slds-grid--vertical-align-center",4,"ngFor","ngForOf"],[1,"slds-size--1-of-1","slds-height_full","slds-align--absolute-center"],[1,"slds-button","slds-button--icon",3,"click"],["icon","new"],[1,"slds-is-relative"],[3,"src"],[1,"slds-is-absolute",2,"height","40px","width","40px","top","calc(50% - 20px)","left","calc(50% - 20px)",3,"click"],[1,"slds-align--absolute-center",2,"background","white","height","40px","width","40px","border-radius","20px"],["icon","delete","size","x-small",2,"z-index","1"],[3,"isedited","ngModel","ngModelChange",4,"ngIf"],["class","slds-input",3,"ngClass","ngModel","ngModelChange",4,"ngIf"],[3,"isedited","ngModel","ngModelChange"],[1,"slds-input",3,"ngClass","ngModel","ngModelChange"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c._UZ(1,"system-icon",1),c.TgZ(2,"h2",2),c._UZ(3,"system-label",3),c.qZA(),c.TgZ(4,"button",4),c.NdJ("click",(function(){return t.save()})),c._UZ(5,"system-label",5),c.qZA()(),c.TgZ(6,"div",6)(7,"h2",7),c._UZ(8,"system-label",8),c.qZA(),c.TgZ(9,"div",9)(10,"div",10)(11,"div",11),c._UZ(12,"system-label",12),c.qZA(),c.TgZ(13,"div",13)(14,"div",14),c.YNc(15,ro,3,0,"div",15),c.YNc(16,co,5,1,"div",16),c.qZA()()(),c.TgZ(17,"div",10)(18,"div",11),c._UZ(19,"system-label",17),c.qZA(),c.TgZ(20,"div",13)(21,"div",14),c.YNc(22,go,3,0,"div",15),c.YNc(23,uo,5,1,"div",16),c.qZA()()()(),c.TgZ(24,"h2",18),c._UZ(25,"system-label",19),c.qZA(),c.TgZ(26,"div",9),c.YNc(27,bo,6,3,"div",20),c.qZA()()),2&e&&(c.xp6(14),c.Q6J("ngStyle",t.assetBoxStyle("loginimage")),c.xp6(1),c.Q6J("ngIf",!t.assets.loginimage),c.xp6(1),c.Q6J("ngIf",t.assets.loginimage),c.xp6(5),c.Q6J("ngStyle",t.assetBoxStyle("headerimage")),c.xp6(1),c.Q6J("ngIf",!t.assets.headerimage),c.xp6(1),c.Q6J("ngIf",t.assets.headerimage),c.xp6(4),c.Q6J("ngForOf",t.cssvars))},dependencies:[i.mk,i.sg,i.O5,i.PC,n.Fj,n.JJ,n.On,x.J,L.f,T._,M.r,ao.K,A.H],encapsulation:2}),AdministrationAssetManager})(),_o=(()=>{class AdministrationMigrateLegacyDoms{constructor(e,t,s,i){this.backend=e,this.toast=t,this.language=s,this.modal=i}executeMigrate(){let e=this.modal.await(this.language.getLabel("LBL_LOADING"));this.backend.postRequest("admin/migrate/legacydoms").subscribe((t=>{e.emit(!0),t?this.toast.sendToast(this.language.getLabel("LBL_MIGRATED"),"success"):this.toast.sendToast(this.language.getLabel("LBL_ERROR"),"error")}))}}return AdministrationMigrateLegacyDoms.ɵfac=function(e){return new(e||AdministrationMigrateLegacyDoms)(c.Y36(u.y),c.Y36(qe.A),c.Y36(p.d),c.Y36(Je.o))},AdministrationMigrateLegacyDoms.ɵcmp=c.Xpm({type:AdministrationMigrateLegacyDoms,selectors:[["administration-migrate-legacy-doms"]],decls:6,vars:0,consts:[[1,"slds-grid","slds-grid--vertical-align-center","slds-grid--align-spread","slds-p-vertical--xx-small","slds-border--bottom","slds-disabled-text"],["icon","custom_apps","size","x-small"],["label","LBL_MIGRATE_LEGACY_DOMS",1,"slds-p-horizontal--x-small"],["label","LBL_MIGRATE_LEGACY_DOMS","length","long",1,"slds-grow"],["disabled","",1,"slds-button","slds-button--neutral","slds-button--small",3,"click"],["label","LBL_EXECUTE"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c._UZ(1,"system-utility-icon",1)(2,"system-label",2)(3,"system-label",3),c.TgZ(4,"button",4),c.NdJ("click",(function(){return t.executeMigrate()})),c._UZ(5,"system-label",5),c.qZA()())},dependencies:[T._,M.r],encapsulation:2}),AdministrationMigrateLegacyDoms})(),Zo=(()=>{class AdminComponentsModule{}return AdminComponentsModule.ɵfac=function(e){return new(e||AdminComponentsModule)},AdminComponentsModule.ɵmod=c.oAB({type:AdminComponentsModule}),AdminComponentsModule.ɵinj=c.cJS({imports:[i.ez,n.u5,a.SystemComponents,o.o,l._t,d.ObjectComponents,r.ObjectFields]}),AdminComponentsModule})();("undefined"==typeof ngJitMode||ngJitMode)&&c.kYT(Zo,{declarations:[ds,ss,Xt,rs,es,bs,oo,S,N,R,Ze,ge,P,Me,ye,Re,at,mt,Ke,Qe,Ve,ft,Zt,Sn,Fn,kn,qs,ks,Bs,Ss,Fs,Ks,js,Rs,Is,ws,oi,hi,Ji,Di,Oi,Bi,Qi,Yi,sn,pn,yn,St,Bt,yt,Jt,Tt,xt,Qn,Gn,_o,el,cl,Ds,ci,hl,Cl,Zl,Ul,Bl,Pl,fo,Ql,Os],imports:[i.ez,n.u5,a.SystemComponents,o.o,l._t,d.ObjectComponents,r.ObjectFields]})}}]);