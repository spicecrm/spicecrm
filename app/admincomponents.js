/*!
 * 
 *                     aacService
 *
 *                     release: 2023.02.001
 *
 *                     date: 2023-08-15 08:39:15
 *
 *                     build: 2023.02.001.1692081555935
 *
 */
"use strict";(self.webpackChunkcore=self.webpackChunkcore||[]).push([["src_admincomponents_admincomponents_module_ts"],{4093:(e,t,s)=>{s.r(t),s.d(t,{AdminComponentsModule:()=>Ro});var i=s(1180),n=s(4755),l=s(5030),o=s(3418),a=s(4357),d=s(3735),r=s(6490),c=s(3190),g=s(2242),u=s(1135),m=s(4505),h=s(3369),p=s(5329);let b=(()=>{var e;class administration{constructor(e,t,s){(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"broadcast",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"loading",!1),(0,i.Z)(this,"adminNavigation",[]),(0,i.Z)(this,"opened_itemid",{}),(0,i.Z)(this,"opened_block",void 0),(0,i.Z)(this,"broadcastsubscription",void 0),(0,i.Z)(this,"minimized",!1),(0,i.Z)(this,"admincomponent",{component:"AdministrationHomeScreen",componentconfig:{}}),(0,i.Z)(this,"admincomponent$",void 0),(0,i.Z)(this,"loaded$",void 0),(0,i.Z)(this,"itemfilter",""),this.backend=e,this.broadcast=t,this.language=s,this.admincomponent$=new u.X(this.admincomponent),this.loaded$=new u.X(!1),this.loadNavigation(),this.broadcastsubscription=this.broadcast.message$.subscribe((e=>{this.handleMessage(e)}))}ngOnDestroy(){this.broadcastsubscription.unsubscribe()}handleMessage(e){if("loader.reloaded"===e.messagetype)this.loadNavigation()}loadNavigation(){this.loading=!0,this.backend.getRequest("system/spiceui/admin/navigation").subscribe((e=>{this.adminNavigation=e,this.loading=!1,this.loaded$.next(!0)}))}toggleMinimized(){this.minimized=!this.minimized}navigateHome(){this.opened_itemid=null,this.admincomponent={component:"AdministrationHomeScreen",componentconfig:{}},this.admincomponent$.next(this.admincomponent)}getItemLabel(e){let t;return this.opened_block=void 0,this.adminNavigation.some((s=>{if(t=s.groupcomponents.find((t=>t.id==e)),t)return this.opened_block=s,!0})),t.admin_label}navigateto(e){let t;this.adminNavigation.some((s=>{if(t=s.groupcomponents.find((t=>t.id==e)),t)return!0})),t.component&&(this.admincomponent=t,this.admincomponent.componentconfig.label||(this.admincomponent.componentconfig.label=this.admincomponent.admin_label),this.admincomponent$.next(this.admincomponent),this.opened_itemid=e)}get navigationGroups(){if(""==this.itemfilter||this.minimized)return this.adminNavigation;let e=[];for(let t of this.adminNavigation)if(t.label&&this.language.getLabel(t.label).toLowerCase().indexOf(this.itemfilter.toLowerCase())>=0||t.label&&this.language.getLabel(t.label,"","long").toLowerCase().indexOf(this.itemfilter.toLowerCase())>=0)e.push(t);else{let s=[];for(let e of t.groupcomponents)(e.adminaction.toLowerCase().indexOf(this.itemfilter.toLowerCase())>=0||e.admin_label&&this.language.getLabel(e.admin_label).toLowerCase().indexOf(this.itemfilter.toLowerCase())>=0||e.admin_label&&this.language.getLabel(e.admin_label,"","long").toLowerCase().indexOf(this.itemfilter.toLowerCase())>=0)&&s.push(e);s.length>0&&e.push({id:t.id,name:t.name,label:t.label,groupcomponents:s})}return e}}return e=administration,(0,i.Z)(administration,"ɵfac",(function(t){return new(t||e)(g.LFG(m.y),g.LFG(h.f),g.LFG(p.d))})),(0,i.Z)(administration,"ɵprov",g.Yz7({token:e,factory:e.ɵfac})),administration})();var f=s(4154),Z=s(2032),v=s(7017),A=s(1058),y=s(3194),x=s(4021),T=s(2656),L=s(4561),M=s(3463),J=s(8859),q=s(151);function E(e,t){1&e&&g._UZ(0,"system-utility-icon",15),2&e&&g.Q6J("icon","search")("addclasses","slds-input__icon slds-input__icon--left")}function U(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",16)(1,"button",17),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw(2);return g.KtG(t.administration.itemfilter="")})),g._UZ(2,"system-button-icon",18),g.qZA()()}2&e&&(g.xp6(2),g.Q6J("icon","clear"))}const C=function(e){return{"slds-theme_inverse":e}};function k(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"li",22)(1,"a",23),g.NdJ("click",(function(){const t=g.CHM(e).$implicit,s=g.oxw(3);return g.KtG(s.openContent(t.id))})),g.TgZ(2,"div",24),g._UZ(3,"system-icon",25)(4,"system-label",20),g.qZA()()()}if(2&e){const e=t.$implicit,s=g.oxw(3);g.Q6J("title",s.language.getLabel(e.admin_label,"","long")),g.xp6(1),g.Q6J("ngClass",g.VKq(4,C,e.id==s.administration.opened_itemid)),g.xp6(2),g.Q6J("icon",e.icon?e.icon:"empty"),g.xp6(1),g.Q6J("label",e.admin_label)}}function N(e,t){if(1&e&&(g.ynx(0),g.TgZ(1,"h2",19),g._UZ(2,"system-label",20),g.qZA(),g.TgZ(3,"ul"),g.YNc(4,k,5,6,"li",21),g.qZA(),g.BQk()),2&e){const e=t.$implicit,s=g.oxw(2);g.xp6(2),g.Q6J("label",e.label),g.xp6(2),g.Q6J("ngForOf",e.groupcomponents)("ngForTrackBy",s.trackbyfn)}}function S(e,t){if(1&e){const e=g.EpF();g.ynx(0),g.TgZ(1,"div",2)(2,"div",3)(3,"button",4),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw();return g.KtG(t.administration.navigateHome())})),g._UZ(4,"system-button-icon",5),g.qZA()(),g.TgZ(5,"div",6)(6,"input",7),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.administration.itemfilter=t)})),g.qZA(),g.YNc(7,E,1,2,"system-utility-icon",8),g.YNc(8,U,3,1,"div",9),g.qZA(),g.TgZ(9,"div",3)(10,"button",10),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw();return g.KtG(t.administration.toggleMinimized())})),g._UZ(11,"system-button-icon",11),g.qZA()()(),g.TgZ(12,"div",12)(13,"div",13),g.YNc(14,N,5,3,"ng-container",14),g.qZA()(),g.BQk()}if(2&e){const e=g.oxw();g.xp6(6),g.Q6J("placeholder",e.language.getLabel("LBL_SEARCH"))("ngModel",e.administration.itemfilter),g.xp6(1),g.Q6J("ngIf",""==e.administration.itemfilter),g.xp6(1),g.Q6J("ngIf",""!=e.administration.itemfilter),g.xp6(2),g.Q6J("disabled",!e.administration.opened_block),g.xp6(4),g.Q6J("ngForOf",e.administration.navigationGroups)("ngForTrackBy",e.trackbyfn)}}function F(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",30),g.NdJ("click",(function(){const t=g.CHM(e).$implicit,s=g.oxw(4);return g.KtG(s.openContent(t.id))})),g._UZ(1,"system-icon",25),g.qZA()}if(2&e){const e=t.$implicit;g.Q6J("system-title",e.admin_label),g.xp6(1),g.Q6J("icon",e.icon?e.icon:"empty")}}function w(e,t){if(1&e&&(g.ynx(0),g.YNc(1,F,2,2,"div",29),g.BQk()),2&e){const e=g.oxw().$implicit,t=g.oxw(2);g.xp6(1),g.Q6J("ngForOf",e.groupcomponents)("ngForTrackBy",t.trackbyfn)}}function I(e,t){if(1&e&&(g.ynx(0),g.YNc(1,w,2,2,"ng-container",1),g.BQk()),2&e){const e=t.$implicit,s=g.oxw(2);g.xp6(1),g.Q6J("ngIf",e.id==s.administration.opened_block.id)}}function O(e,t){if(1&e){const e=g.EpF();g.ynx(0),g.TgZ(1,"div",26)(2,"button",4),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw();return g.KtG(t.administration.toggleMinimized())})),g._UZ(3,"system-button-icon",27),g.qZA()(),g.TgZ(4,"div",12)(5,"div",28),g.YNc(6,I,2,1,"ng-container",14),g.qZA()(),g.BQk()}if(2&e){const e=g.oxw();g.xp6(6),g.Q6J("ngForOf",e.administration.navigationGroups)("ngForTrackBy",e.trackbyfn)}}let R=(()=>{var e;class AdministrationMenu{constructor(e,t,s){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"navigationtab",void 0),(0,i.Z)(this,"administration",void 0),this.language=e,this.navigationtab=t,this.administration=s}ngAfterViewInit(){this.navigationtab.tabdata&&this.navigationtab.tabdata.itemid&&this.administration.loaded$.subscribe({next:e=>{e&&this.openContent(this.navigationtab.tabdata.itemid,!1)}})}trackbyfn(e,t){return t.id}openContent(e,t=!0){if(this.administration.opened_itemid==e)return!0;let s=this.administration.getItemLabel(e);this.navigationtab.setTabInfo({displayname:this.language.getLabel(s||"LBL_ADMINISTRATION"),displayicon:"settings"}),this.administration.navigateto(e),t&&(this.navigationtab.tabdata={itemid:e})}}return e=AdministrationMenu,(0,i.Z)(AdministrationMenu,"ɵfac",(function(t){return new(t||e)(g.Y36(p.d),g.Y36(v.d),g.Y36(b))})),(0,i.Z)(AdministrationMenu,"ɵcmp",g.Xpm({type:e,selectors:[["administration-menu"]],decls:3,vars:2,consts:[[1,"slds-grid","slds-grid--vertical","slds-navigation-list--vertical","slds-navigation-list--vertical-inverse","slds-border--right"],[4,"ngIf"],[1,"slds-p-horizontal--xx-small","slds-p-vertical--small","slds-border--bottom","slds-grid","slds-grid--vertical-align-center"],[1,"slds-p-horizontal--xx-small"],["tabindex","-1",1,"slds-button","slds-button_icon",3,"click"],["icon","home"],[1,"slds-grow","slds-form-element__control","slds-input-has-icon","slds-input-has-icon_right","slds-input-has-icon_group-right","slds-m-vertical--xx-small"],["type","text",1,"slds-input",3,"placeholder","ngModel","ngModelChange"],[3,"icon","addclasses",4,"ngIf"],["class","slds-input__icon-group slds-input__icon-group_right","style","margin-top: initial;",4,"ngIf"],["tabindex","-1",1,"slds-button","slds-button_icon",3,"disabled","click"],["icon","left"],["system-to-bottom",""],[1,"slds-p-bottom--medium"],[4,"ngFor","ngForOf","ngForTrackBy"],[3,"icon","addclasses"],[1,"slds-input__icon-group","slds-input__icon-group_right",2,"margin-top","initial"],["tabindex","-1",1,"slds-input__icon","slds-input__icon_right","slds-button","slds-button_icon",3,"click"],[3,"icon"],[1,"slds-text-title--caps","slds-p-around--medium"],[3,"label"],[3,"title",4,"ngFor","ngForOf","ngForTrackBy"],[3,"title"],["href","javascript:void(0);",1,"slds-navigation-list--vertical__action","slds-p-vertical--xxx-small","slds-text-link--reset",3,"ngClass","click"],[1,"slds-grid","slds-grid--vertical-align-center","slds-truncate"],["size","x-small",3,"icon"],[1,"slds-p-horizontal--xx-small","slds-p-vertical--xx-small","slds-border--bottom","slds-grid","slds-grid--vertical"],["icon","right"],[1,"slds-p-bottom--medium","slds-grid","slds-grid--vertical"],["class","slds-align-bottom slds-p-vertical--xx-small",3,"system-title","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"slds-align-bottom","slds-p-vertical--xx-small",3,"system-title","click"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0),g.YNc(1,S,15,7,"ng-container",1),g.YNc(2,O,7,2,"ng-container",1),g.qZA()),2&e&&(g.xp6(1),g.Q6J("ngIf",!t.administration.minimized),g.xp6(1),g.Q6J("ngIf",t.administration.minimized))},dependencies:[n.mk,n.sg,n.O5,l.Fj,l.JJ,l.On,T.J,L.f,M._,J.r,A.H,q.S],encapsulation:2})),AdministrationMenu})();const D=["admincontentcontainer"];let Q=(()=>{var e;class AdministrationMain{constructor(e,t,s,n,l){(0,i.Z)(this,"administration",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"navigation",void 0),(0,i.Z)(this,"navigationtab",void 0),(0,i.Z)(this,"admincontentcontainer",void 0),(0,i.Z)(this,"admincontentObject",null),this.administration=e,this.metadata=t,this.language=s,this.navigation=n,this.navigationtab=l,this.navigationtab.setTabInfo({displayname:this.language.getLabel("LBL_ADMINISTRATION"),displayicon:"settings"})}ngAfterViewInit(){this.administration.admincomponent$.subscribe((e=>{this.openContent(e)}))}get menuWidth(){return{width:this.administration.minimized?"40px":"220px","min-width":this.administration.minimized?"40px":"220px"}}openContent(e){this.admincontentObject&&this.admincontentObject.destroy(),this.metadata.addComponent(e.component,this.admincontentcontainer).subscribe((t=>{t.instance.componentconfig=e.componentconfig,this.admincontentObject=t}))}}return e=AdministrationMain,(0,i.Z)(AdministrationMain,"ɵfac",(function(t){return new(t||e)(g.Y36(b),g.Y36(f.Pu),g.Y36(p.d),g.Y36(Z.G),g.Y36(v.d))})),(0,i.Z)(AdministrationMain,"ɵcmp",g.Xpm({type:e,selectors:[["ng-component"]],viewQuery:function(e,t){if(1&e&&g.Gf(D,7,g.s_b),2&e){let e;g.iGM(e=g.CRH())&&(t.admincontentcontainer=e.first)}},features:[g._Bn([b])],decls:6,vars:2,consts:[["system-to-bottom-noscroll","",1,"slds-grid",3,"system-overlay-loading-spinner"],[3,"ngStyle"],["system-to-bottom","",1,"slds-grow"],["admincontentcontainer",""]],template:function(e,t){1&e&&(g.TgZ(0,"div",0)(1,"div",1),g._UZ(2,"administration-menu"),g.qZA(),g.TgZ(3,"div",2),g._UZ(4,"div",null,3),g.qZA()()),2&e&&(g.Q6J("system-overlay-loading-spinner",t.administration.loading),g.xp6(1),g.Q6J("ngStyle",t.menuWidth))},dependencies:[n.PC,A.H,y.t,x._,R],encapsulation:2})),AdministrationMain})();var B=s(3348);let Y=(()=>{var e;class AdministrationMenuRouteItem{constructor(e){(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"componentconfig",{}),(0,i.Z)(this,"self",{}),this.router=e}ngOnInit(){this.componentconfig.route&&this.router.navigate([this.componentconfig.route])}}return e=AdministrationMenuRouteItem,(0,i.Z)(AdministrationMenuRouteItem,"ɵfac",(function(t){return new(t||e)(g.Y36(B.F0))})),(0,i.Z)(AdministrationMenuRouteItem,"ɵcmp",g.Xpm({type:e,selectors:[["ng-component"]],decls:0,vars:0,template:function(e,t){},encapsulation:2})),AdministrationMenuRouteItem})();var z=s(6163);let G=(()=>{var e;class administrationconfigurator{constructor(e,t){(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"modelutilities",void 0),(0,i.Z)(this,"dictionary",""),(0,i.Z)(this,"entries",[]),(0,i.Z)(this,"sorting",{field:"",direction:""}),(0,i.Z)(this,"fielddefobj",{}),this.backend=e,this.modelutilities=t}loadEntries(e=[]){this.backend.getRequest("configuration/configurator/entries/"+this.dictionary).subscribe((t=>{this.fielddefobj={};for(let t of e)this.fielddefobj[t.name]=t.type?t.type:"";for(let e of t)this.entries.push({id:e.id,mode:"",data:this.mapData(e)})}))}mapData(e){for(let t in this.fielddefobj)switch(this.fielddefobj[t]){case"bool":case"boolean":e[t]="1"==e[t]}return e}remapData(e){let t={};for(let s in this.fielddefobj)switch(this.fielddefobj[s]){case"bool":case"boolean":t[s]=1==e[s]?"1":"0";break;default:t[s]=e[s]}return t}addEntry(){let e=this.modelutilities.generateGuid();this.entries.unshift({id:e,mode:"new",data:{id:e}})}saveEntry(e){this.entries.some((t=>{if(t.id===e)return delete t.backup,this.backend.postRequest("configuration/configurator/"+this.dictionary+"/"+e,{},{config:this.remapData(t.data)}).subscribe((e=>{t.mode=""})),!0}))}deleteEntry(e){this.entries.some(((t,s)=>{if(t.id===e)return delete t.backup,this.backend.deleteRequest("configuration/configurator/"+this.dictionary+"/"+e).subscribe((e=>{this.entries.splice(s,1)})),!0}))}setEditMode(e){this.entries.some((t=>{if(t.id===e)return t.mode="edit",t.backup=JSON.parse(JSON.stringify(t.data)),!0}))}cancelEditMode(e){this.entries.some(((t,s)=>{if(t.id===e)return"new"===t.mode?this.entries.splice(s,1):(t.data=JSON.parse(JSON.stringify(t.backup)),delete t.backup,t.mode=""),!0}))}isEditMode(e){let t=!1;return this.entries.some((s=>{if(s.id===e)return t="edit"===s.mode||"new"===s.mode,!0})),t}copy(e){this.entries.some((t=>{if(t.id===e){let e={};return e.data=JSON.parse(JSON.stringify(t.data)),e.mode="new",e.id=this.modelutilities.generateGuid(),e.data.id=e.id,this.entries.unshift(e),!0}}))}sort(e){this.sorting.field===e?this.sorting.direction="asc"==this.sorting.direction?"desc":"asc":(this.sorting.field=e,this.sorting.direction="asc"),this.entries.sort(((e,t)=>e.data[this.sorting.field]==t.data[this.sorting.field]?0:"asc"==this.sorting.direction?e.data[this.sorting.field]<t.data[this.sorting.field]?-1:1:e.data[this.sorting.field]<t.data[this.sorting.field]?1:-1))}}return e=administrationconfigurator,(0,i.Z)(administrationconfigurator,"ɵfac",(function(t){return new(t||e)(g.LFG(m.y),g.LFG(z.A))})),(0,i.Z)(administrationconfigurator,"ɵprov",g.Yz7({token:e,factory:e.ɵfac})),administrationconfigurator})();var P=s(3441),H=s(7514),K=s(3497);function j(e,t){if(1&e&&(g.TgZ(0,"div")(1,"div",2),g._uU(2),g.qZA()()),2&e){const e=g.oxw();g.xp6(2),g.Oqu(e.rolename)}}function $(e,t){if(1&e&&(g.TgZ(0,"option",9),g._uU(1),g.qZA()),2&e){const e=t.$implicit;g.Q6J("value",e.id),g.xp6(1),g.Oqu(e.name)}}function V(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",3)(1,"div",4)(2,"div",5)(3,"select",6),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.roleValue=t)})),g.TgZ(4,"option",7),g._uU(5,"*"),g.qZA(),g.YNc(6,$,2,2,"option",8),g.qZA()()()()}if(2&e){const e=g.oxw();g.xp6(3),g.Q6J("ngModel",e.roleValue),g.xp6(3),g.Q6J("ngForOf",e.roles)}}let X=(()=>{var e;class AdministrationConfiguratorItemRole{constructor(e){(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"editmode",!1),(0,i.Z)(this,"fieldvalue",{}),(0,i.Z)(this,"fieldvalueChange",new g.vpe),(0,i.Z)(this,"roles",[]),this.metadata=e}loadRoles(){let e=this.metadata.getRoles();e.sort(((e,t)=>e.name>t.name?1:-1));for(let t of e)this.roles.push(t)}ngOnInit(){(this.editmode||"*"!=this.fieldvalue)&&this.loadRoles()}get roleValue(){return this.fieldvalue}set roleValue(e){this.fieldvalue=e,this.fieldvalueChange.emit(e)}get rolename(){for(let e of this.roles)if(e.id==this.fieldvalue)return e.name;return this.fieldvalue}}return e=AdministrationConfiguratorItemRole,(0,i.Z)(AdministrationConfiguratorItemRole,"ɵfac",(function(t){return new(t||e)(g.Y36(f.Pu))})),(0,i.Z)(AdministrationConfiguratorItemRole,"ɵcmp",g.Xpm({type:e,selectors:[["administration-configurator-item-role"]],inputs:{editmode:"editmode",fieldvalue:"fieldvalue"},outputs:{fieldvalueChange:"fieldvalueChange"},decls:2,vars:2,consts:[[4,"ngIf"],["class","slds-form-element",4,"ngIf"],[1,"slds-truncate"],[1,"slds-form-element"],[1,"slds-form-element__control"],[1,"slds-select_container","slds-m-vertical--xx-small"],[1,"slds-select",3,"ngModel","ngModelChange"],["value","*"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){1&e&&(g.YNc(0,j,3,1,"div",0),g.YNc(1,V,7,2,"div",1)),2&e&&(g.Q6J("ngIf",!t.editmode),g.xp6(1),g.Q6J("ngIf",t.editmode))},dependencies:[n.sg,n.O5,l.YN,l.Kr,l.EJ,l.JJ,l.On],encapsulation:2})),AdministrationConfiguratorItemRole})();const W=["administration-configurator-item",""];function ee(e,t){if(1&e&&(g.TgZ(0,"span")(1,"pre",11),g._uU(2),g.qZA()()),2&e){const e=g.oxw(2).$implicit,t=g.oxw();g.xp6(2),g.Oqu(t.getJSON(t.entry.data[e.name]))}}function te(e,t){if(1&e&&(g.TgZ(0,"span",12),g._uU(1),g.qZA()),2&e){const e=g.oxw(2).$implicit,t=g.oxw();g.xp6(1),g.Oqu(t.entry.data[e.name])}}function se(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"system-checkbox",13),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw(2).$implicit,i=g.oxw();return g.KtG(i.entry.data[s.name]=t)})),g.qZA()}if(2&e){const e=g.oxw(2).$implicit,t=g.oxw();g.Q6J("disabled",!0)("ngModel",t.entry.data[e.name])}}function ie(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"system-checkbox",13),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw(2).$implicit,i=g.oxw();return g.KtG(i.entry.data[s.name]=t)})),g.qZA()}if(2&e){const e=g.oxw(2).$implicit,t=g.oxw();g.Q6J("disabled",!0)("ngModel",t.entry.data[e.name])}}function ne(e,t){if(1&e&&g._UZ(0,"administration-configurator-item-role",14),2&e){const e=g.oxw(2).$implicit,t=g.oxw();g.Q6J("editmode",!1)("fieldvalue",t.entry.data[e.name])}}function le(e,t){if(1&e&&(g.TgZ(0,"span"),g._uU(1),g.qZA()),2&e){const e=g.oxw(2).$implicit,t=g.oxw();g.xp6(1),g.Oqu(t.entry.data[e.name])}}function oe(e,t){if(1&e&&(g.TgZ(0,"div",5),g.YNc(1,ee,3,1,"span",6),g.YNc(2,te,2,1,"span",7),g.YNc(3,se,1,2,"system-checkbox",8),g.YNc(4,ie,1,2,"system-checkbox",8),g.YNc(5,ne,1,2,"administration-configurator-item-role",9),g.YNc(6,le,2,1,"span",10),g.qZA()),2&e){const e=g.oxw().$implicit;g.Q6J("ngSwitch",e.type),g.xp6(1),g.Q6J("ngSwitchCase","json"),g.xp6(1),g.Q6J("ngSwitchCase","text"),g.xp6(1),g.Q6J("ngSwitchCase","bool"),g.xp6(1),g.Q6J("ngSwitchCase","boolean"),g.xp6(1),g.Q6J("ngSwitchCase","role")}}function ae(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"textarea",22),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw(2).$implicit,i=g.oxw();return g.KtG(i.entry.data[s.name]=t)})),g.qZA()}if(2&e){const e=g.oxw(2).$implicit,t=g.oxw();g.Q6J("ngModel",t.entry.data[e.name])}}function de(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"textarea",22),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw(2).$implicit,i=g.oxw();return g.KtG(i.entry.data[s.name]=t)})),g.qZA()}if(2&e){const e=g.oxw(2).$implicit,t=g.oxw();g.Q6J("ngModel",t.entry.data[e.name])}}function re(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"system-input-label",23),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw(2).$implicit,i=g.oxw();return g.KtG(i.entry.data[s.name]=t)})),g.qZA()}if(2&e){const e=g.oxw(2).$implicit,t=g.oxw();g.Q6J("ngModel",t.entry.data[e.name])}}function ce(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"system-checkbox",24),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw(2).$implicit,i=g.oxw();return g.KtG(i.entry.data[s.name]=t)})),g.qZA()}if(2&e){const e=g.oxw(2).$implicit,t=g.oxw();g.Q6J("ngModel",t.entry.data[e.name])}}function ge(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"system-checkbox",24),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw(2).$implicit,i=g.oxw();return g.KtG(i.entry.data[s.name]=t)})),g.qZA()}if(2&e){const e=g.oxw(2).$implicit,t=g.oxw();g.Q6J("ngModel",t.entry.data[e.name])}}function ue(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"administration-configurator-item-role",25),g.NdJ("fieldvalueChange",(function(t){g.CHM(e);const s=g.oxw(2).$implicit,i=g.oxw();return g.KtG(i.entry.data[s.name]=t)})),g.qZA()}if(2&e){const e=g.oxw(2).$implicit,t=g.oxw();g.Q6J("editmode",!0)("fieldvalue",t.entry.data[e.name])}}function me(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"input",26),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw(2).$implicit,i=g.oxw();return g.KtG(i.entry.data[s.name]=t)})),g.qZA()}if(2&e){const e=g.oxw(2).$implicit,t=g.oxw();g.Q6J("ngModel",t.entry.data[e.name])}}function he(e,t){if(1&e&&(g.TgZ(0,"div",15)(1,"div",16),g.YNc(2,ae,1,1,"textarea",17),g.YNc(3,de,1,1,"textarea",17),g.YNc(4,re,1,1,"system-input-label",18),g.YNc(5,ce,1,1,"system-checkbox",19),g.YNc(6,ge,1,1,"system-checkbox",19),g.YNc(7,ue,1,2,"administration-configurator-item-role",20),g.YNc(8,me,1,1,"input",21),g.qZA()()),2&e){const e=g.oxw().$implicit;g.xp6(1),g.Q6J("ngSwitch",e.type),g.xp6(1),g.Q6J("ngSwitchCase","json"),g.xp6(1),g.Q6J("ngSwitchCase","text"),g.xp6(1),g.Q6J("ngSwitchCase","label"),g.xp6(1),g.Q6J("ngSwitchCase","bool"),g.xp6(1),g.Q6J("ngSwitchCase","boolean"),g.xp6(1),g.Q6J("ngSwitchCase","role")}}function pe(e,t){if(1&e&&(g.TgZ(0,"td"),g.YNc(1,oe,7,6,"div",3),g.YNc(2,he,9,7,"ng-template",null,4,g.W1O),g.qZA()),2&e){const e=t.$implicit,s=g.MAs(3),i=g.oxw();g.xp6(1),g.Q6J("ngIf",!i.isEditMode(e))("ngIfElse",s)}}function be(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",27)(1,"button",28),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw();return g.KtG(t.setEditMode())})),g._UZ(2,"system-button-icon",29),g.qZA(),g.TgZ(3,"button",28),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw();return g.KtG(t.copy(t.entry.id))})),g._UZ(4,"system-button-icon",29),g.qZA(),g.TgZ(5,"button",28),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw();return g.KtG(t.delete())})),g._UZ(6,"system-button-icon",29),g.qZA()()}2&e&&(g.xp6(2),g.Q6J("icon","edit")("size","small"),g.xp6(2),g.Q6J("icon","copy")("size","small"),g.xp6(2),g.Q6J("icon","delete")("size","small"))}function fe(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",27)(1,"button",28),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw();return g.KtG(t.setViewMode())})),g._UZ(2,"system-button-icon",29),g.qZA(),g.TgZ(3,"button",28),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw();return g.KtG(t.save())})),g._UZ(4,"system-button-icon",29),g.qZA()()}2&e&&(g.xp6(2),g.Q6J("icon","close")("size","small"),g.xp6(2),g.Q6J("icon","check")("size","small"))}let Ze=(()=>{var e;class AdministrationConfiguratorItem{constructor(e,t,s){(0,i.Z)(this,"administrationconfigurator",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"helper",void 0),(0,i.Z)(this,"fields",[]),(0,i.Z)(this,"entry",{}),this.administrationconfigurator=e,this.language=t,this.helper=s}setEditMode(){this.administrationconfigurator.setEditMode(this.entry.id)}isEditMode(e=null){return e?!e.readonly&&this.administrationconfigurator.isEditMode(this.entry.id):this.administrationconfigurator.isEditMode(this.entry.id)}setViewMode(){this.administrationconfigurator.cancelEditMode(this.entry.id)}save(){this.administrationconfigurator.saveEntry(this.entry.id)}delete(){this.helper.confirm(this.language.getLabel("MSG_DELETE_RECORD"),this.language.getLabel("MSG_DELETE_RECORD","long")).subscribe((e=>{e&&this.administrationconfigurator.deleteEntry(this.entry.id)}))}copy(e){this.administrationconfigurator.copy(e)}getJSON(e){try{let t=JSON.parse(e);return JSON.stringify(t,null,2)}catch(t){return e}}}return e=AdministrationConfiguratorItem,(0,i.Z)(AdministrationConfiguratorItem,"ɵfac",(function(t){return new(t||e)(g.Y36(G),g.Y36(p.d),g.Y36(P._))})),(0,i.Z)(AdministrationConfiguratorItem,"ɵcmp",g.Xpm({type:e,selectors:[["","administration-configurator-item",""]],inputs:{fields:"fields",entry:"entry"},attrs:W,decls:4,vars:3,consts:[[4,"ngFor","ngForOf"],[1,"slds-theme--default",2,"position","sticky","right","0","z-index","1"],["class","slds-button-group slds-float--right","role","group",4,"ngIf"],["class","slds-truncate slds-p-horizontal--small","style","max-width: 200px;",3,"ngSwitch",4,"ngIf","ngIfElse"],["editfield",""],[1,"slds-truncate","slds-p-horizontal--small",2,"max-width","200px",3,"ngSwitch"],[4,"ngSwitchCase"],["class","slds-truncate_container_25","style","max-width: 200px;",4,"ngSwitchCase"],[3,"disabled","ngModel","ngModelChange",4,"ngSwitchCase"],[3,"editmode","fieldvalue",4,"ngSwitchCase"],[4,"ngSwitchDefault"],[1,"slds-m-vertical--none"],[1,"slds-truncate_container_25",2,"max-width","200px"],[3,"disabled","ngModel","ngModelChange"],[3,"editmode","fieldvalue"],[1,"slds-form-element"],[1,"slds-form-element__control",3,"ngSwitch"],["class","slds-textarea slds-scrollable--y slds-m-vertical--xx-small",3,"ngModel","ngModelChange",4,"ngSwitchCase"],[3,"ngModel","ngModelChange",4,"ngSwitchCase"],["class","slds-m-horizontal--small","style","display: block",3,"ngModel","ngModelChange",4,"ngSwitchCase"],[3,"editmode","fieldvalue","fieldvalueChange",4,"ngSwitchCase"],["type","text","class","slds-input",3,"ngModel","ngModelChange",4,"ngSwitchDefault"],[1,"slds-textarea","slds-scrollable--y","slds-m-vertical--xx-small",3,"ngModel","ngModelChange"],[3,"ngModel","ngModelChange"],[1,"slds-m-horizontal--small",2,"display","block",3,"ngModel","ngModelChange"],[3,"editmode","fieldvalue","fieldvalueChange"],["type","text",1,"slds-input",3,"ngModel","ngModelChange"],["role","group",1,"slds-button-group","slds-float--right"],[1,"slds-button","slds-button--icon-border",3,"click"],[3,"icon","size"]],template:function(e,t){1&e&&(g.YNc(0,pe,4,2,"td",0),g.TgZ(1,"td",1),g.YNc(2,be,7,6,"div",2),g.YNc(3,fe,5,4,"div",2),g.qZA()),2&e&&(g.Q6J("ngForOf",t.fields),g.xp6(2),g.Q6J("ngIf",!t.isEditMode()),g.xp6(1),g.Q6J("ngIf",t.isEditMode()))},dependencies:[n.sg,n.O5,n.RF,n.n9,n.ED,l.Fj,l.JJ,l.On,T.J,H.U,K.$,X],encapsulation:2})),AdministrationConfiguratorItem})();function _e(e,t){1&e&&g._UZ(0,"system-utility-icon",15),2&e&&g.Q6J("icon","arrowup")("size","x-small")}function ve(e,t){1&e&&g._UZ(0,"system-utility-icon",15),2&e&&g.Q6J("icon","arrowdown")("size","x-small")}function Ae(e,t){if(1&e&&(g.ynx(0),g.YNc(1,_e,1,2,"system-utility-icon",21),g.YNc(2,ve,1,2,"system-utility-icon",21),g.BQk()),2&e){const e=g.oxw(2);g.xp6(1),g.Q6J("ngIf","asc"==e.administrationconfigurator.sorting.direction),g.xp6(1),g.Q6J("ngIf","dsc"==e.administrationconfigurator.sorting.direction)}}function ye(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"th",18),g.NdJ("click",(function(){const t=g.CHM(e).$implicit,s=g.oxw();return g.KtG(s.sort(t.name))})),g.TgZ(1,"div",19),g._uU(2),g.YNc(3,Ae,3,2,"ng-container",20),g.qZA()()}if(2&e){const e=t.$implicit,s=g.oxw();g.xp6(2),g.hij(" ",e.name," "),g.xp6(1),g.Q6J("ngIf",s.administrationconfigurator.sorting.field==e.name)}}function xe(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"td")(1,"div",25)(2,"div",26)(3,"input",27),g.NdJ("ngModelChange",(function(t){const s=g.CHM(e).$implicit,i=g.oxw(2);return g.KtG(i.filters[s.name]=t)})),g.qZA()()()()}if(2&e){const e=t.$implicit,s=g.oxw(2);g.xp6(3),g.Q6J("ngModel",s.filters[e.name])}}function Te(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"tr",22),g.YNc(1,xe,4,1,"td",23),g.TgZ(2,"td",24)(3,"div",13)(4,"button",14),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw();return g.KtG(t.clearFilter())})),g._UZ(5,"system-button-icon",15),g.qZA(),g.TgZ(6,"button",14),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw();return g.KtG(t.toggleFilter())})),g._UZ(7,"system-button-icon",15),g.qZA()()()()}if(2&e){const e=g.oxw();g.xp6(1),g.Q6J("ngForOf",e.getFields()),g.xp6(4),g.Q6J("icon","clear")("size","small"),g.xp6(2),g.Q6J("icon","chevronup")("size","small")}}function Le(e,t){if(1&e&&g._UZ(0,"tr",28),2&e){const e=t.$implicit,s=g.oxw();g.Q6J("entry",e)("fields",s.getFields())}}let Me=(()=>{var e;class AdministrationConfigurator{constructor(e,t,s){(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"administrationconfigurator",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"componentconfig",{}),(0,i.Z)(this,"displayFilters",!1),(0,i.Z)(this,"filters",{}),this.metadata=e,this.administrationconfigurator=t,this.language=s}ngOnInit(){this.administrationconfigurator.dictionary=this.componentconfig.dictionary,this.administrationconfigurator.loadEntries(this.componentconfig.fields)}get count(){return this.administrationconfigurator.entries.length}trackByFn(e,t){return t.id}getEntries(){let e=[];for(let t of this.administrationconfigurator.entries){let s=!1;if(this.displayFilters)for(let e in this.filters)!this.administrationconfigurator.isEditMode(t.id)&&this.filters[e]&&t.data[e]&&-1==t.data[e].toUpperCase().indexOf(this.filters[e].toUpperCase())&&(s=!0);s||e.push(t)}return e}getFields(){let e=[];for(let t of this.componentconfig.fields)!0!==t.hidden&&e.push(t);return e}addEntry(){this.administrationconfigurator.addEntry()}sort(e){this.administrationconfigurator.sort(e)}toggleFilter(){this.displayFilters=!this.displayFilters}clearFilter(){this.filters={}}}return e=AdministrationConfigurator,(0,i.Z)(AdministrationConfigurator,"ɵfac",(function(t){return new(t||e)(g.Y36(f.Pu),g.Y36(G),g.Y36(p.d))})),(0,i.Z)(AdministrationConfigurator,"ɵcmp",g.Xpm({type:e,selectors:[["administration-configurator"]],features:[g._Bn([G])],decls:21,vars:8,consts:[[1,"slds-grid","slds-grid--vertical","slds-height_full"],[1,"slds-grid","slds-grid--align-spread","slds-p-around--medium"],[1,"slds-text-heading--medium"],["label","LBL_DICTIONARY_ITEM"],["label","LBL_RECORDS"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_ADD"],[1,"slds-scrollable","slds-grow",2,"min-height","0"],[1,"slds-table","slds-table--bordered","slds-table--cell-buffer"],[1,"slds-theme--shade",2,"position","sticky","top","0","z-index","2"],[1,"slds-text-title--caps"],["scope","col",3,"click",4,"ngFor","ngForOf"],["scope","col",2,"width","2rem","position","sticky","right","0"],["role","group",1,"slds-button-group","slds-float--right"],[1,"slds-button","slds-button--icon-border",3,"click"],[3,"icon","size"],["class","slds-theme--shade",4,"ngIf"],["class","slds-align-top slds-theme--default","administration-configurator-item","",3,"entry","fields",4,"ngFor","ngForOf","ngForTrackBy"],["scope","col",3,"click"],[1,"slds-truncate","slds-p-horizontal--small"],[4,"ngIf"],[3,"icon","size",4,"ngIf"],[1,"slds-theme--shade"],[4,"ngFor","ngForOf"],[1,"slds-theme--shade",2,"position","sticky","right","0"],[1,"slds-form-element"],[1,"slds-form-element__control"],["type","text",1,"slds-input",3,"ngModel","ngModelChange"],["administration-configurator-item","",1,"slds-align-top","slds-theme--default",3,"entry","fields"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0)(1,"div",1)(2,"h2",2),g._UZ(3,"system-label",3),g._uU(4),g._UZ(5,"system-label",4),g._uU(6,")"),g.qZA(),g.TgZ(7,"button",5),g.NdJ("click",(function(){return t.addEntry()})),g._UZ(8,"system-label",6),g.qZA()(),g.TgZ(9,"div",7)(10,"table",8)(11,"thead",9)(12,"tr",10),g.YNc(13,ye,4,2,"th",11),g.TgZ(14,"th",12)(15,"div",13)(16,"button",14),g.NdJ("click",(function(){return t.toggleFilter()})),g._UZ(17,"system-button-icon",15),g.qZA()()()(),g.YNc(18,Te,8,5,"tr",16),g.qZA(),g.TgZ(19,"tbody"),g.YNc(20,Le,1,2,"tr",17),g.qZA()()()()),2&e&&(g.xp6(4),g.AsE(": ",t.componentconfig.dictionary," (",t.count," "),g.xp6(9),g.Q6J("ngForOf",t.getFields()),g.xp6(4),g.Q6J("icon","filterList")("size","small"),g.xp6(1),g.Q6J("ngIf",t.displayFilters),g.xp6(2),g.Q6J("ngForOf",t.getEntries())("ngForTrackBy",t.trackByFn))},dependencies:[n.sg,n.O5,l.Fj,l.JJ,l.On,T.J,M._,J.r,Ze],encapsulation:2})),AdministrationConfigurator})();var Je=s(7579);let qe=(()=>{var e;class AdministrationQuotaManagerField{constructor(e){(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"userid",""),(0,i.Z)(this,"monthindex",0),(0,i.Z)(this,"year",0),(0,i.Z)(this,"data",[]),this.backend=e}get value(){for(let e of this.data)if(e&&e.assigned_user_id===this.userid&&e.period===""+(this.monthindex+1))return""+Math.round(e.sales_quota);return""}set value(e){let t=0,s=+e;for(let i of this.data)i&&i.assigned_user_id===this.userid&&i.period===""+(this.monthindex+1)&&(s>0?this.data[t].sales_quota=e:delete this.data[t]),t++;s>0?this.backend.postRequest("module/QuotaManager/quota/"+this.userid+"/"+this.year+"/"+(this.monthindex+1)+"/"+e).subscribe((e=>{})):this.backend.deleteRequest("module/QuotaManager/quota/"+this.userid+"/"+this.year+"/"+(this.monthindex+1))}changeValue(e){}}return e=AdministrationQuotaManagerField,(0,i.Z)(AdministrationQuotaManagerField,"ɵfac",(function(t){return new(t||e)(g.Y36(m.y))})),(0,i.Z)(AdministrationQuotaManagerField,"ɵcmp",g.Xpm({type:e,selectors:[["administration-quotamanager-field"]],inputs:{userid:"userid",monthindex:"monthindex",year:"year",data:"data"},decls:1,vars:1,consts:[[2,"width","80px",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(g.TgZ(0,"input",0),g.NdJ("ngModelChange",(function(e){return t.value=e}))("ngModelChange",(function(e){return t.changeValue(e)})),g.qZA()),2&e&&g.Q6J("ngModel",t.value)},dependencies:[l.Fj,l.JJ,l.On],encapsulation:2})),AdministrationQuotaManagerField})();function Ee(e,t){if(1&e&&(g.TgZ(0,"option"),g._uU(1),g.qZA()),2&e){const e=t.$implicit;g.xp6(1),g.Oqu(e)}}function Ue(e,t){if(1&e&&(g.TgZ(0,"th",12),g._uU(1),g.qZA()),2&e){const e=t.$implicit;g.xp6(1),g.Oqu(e)}}function Ce(e,t){if(1&e&&(g.TgZ(0,"td"),g._UZ(1,"administration-quotamanager-field",15),g.qZA()),2&e){const e=t.index,s=g.oxw().$implicit,i=g.oxw();g.xp6(1),g.Q6J("userid",s.data.id)("data",i.quotas)("monthindex",e)("year",i.year)}}function ke(e,t){if(1&e&&(g.TgZ(0,"tr",11)(1,"td"),g._uU(2),g.qZA(),g.TgZ(3,"td"),g._uU(4),g.qZA(),g.YNc(5,Ce,2,4,"td",8),g.qZA()),2&e){const e=t.$implicit,s=g.oxw();g.xp6(2),g.lnq("",e.data.last_name," ",e.data.first_name," (",e.data.user_name,")"),g.xp6(2),g.Oqu(s.yearlyQuotas[e.data.id]),g.xp6(1),g.Q6J("ngForOf",s.monthlyQuotas[e.data.id])}}let Ne=(()=>{var e;class AdministrationQuotaManager{constructor(e){(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"users",[]),(0,i.Z)(this,"monthlyQuotas",{}),(0,i.Z)(this,"quotas",[]),(0,i.Z)(this,"yearlyQuotas",{}),(0,i.Z)(this,"year",(new Date).getFullYear()),(0,i.Z)(this,"monthNamesList",["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]),(0,i.Z)(this,"yearsList",[]),this.backend=e}ngOnInit(){this.getYears(),this.getQuotaUsers()}getYears(){let e=(new Date).getFullYear();for(let t=e-2;t<e+7;t++)this.yearsList.push(t)}getQuotaUsers(){this.backend.getRequest("module/QuotaManager/users").subscribe((e=>{for(let t of e)this.users.push({id:t.id,mode:"",data:t});this.getQuotas().subscribe()}))}getQuotas(){let e=new Je.x;return this.backend.getRequest("module/QuotaManager/quotas/"+this.year).subscribe((t=>{this.quotas=t,this.monthlyQuotas={},this.yearlyQuotas={};for(let e of t){let t=e.assigned_user_id,s=Math.round(e.sales_quota),i=e.period-1;this.monthlyQuotas[t]||(this.monthlyQuotas[t]=new Array(12)),this.monthlyQuotas[t][i]=s,this.yearlyQuotas[t]||(this.yearlyQuotas[t]=0),this.yearlyQuotas[t]+=s}e.next(this.users),e.complete();for(let e of this.users){let t=e.data.id;this.monthlyQuotas[t]||(this.monthlyQuotas[t]=new Array(12)),this.yearlyQuotas[t]||(this.yearlyQuotas[t]=0)}})),e.asObservable()}updateQuota(e,t,s){let i=e.target.value?+e.target.value:0,n=this.monthlyQuotas[t][s];n=n||0,this.yearlyQuotas[t]-=n-i,i>0?(this.monthlyQuotas[t][s]=i,this.backend.postRequest("module/QuotaManager/quota/"+t+"/"+this.year+"/"+(s+1)+"/"+i)):(delete this.monthlyQuotas[t][s],this.backend.deleteRequest("module/QuotaManager/quota/"+t+"/"+this.year+"/"+(s+1)))}}return e=AdministrationQuotaManager,(0,i.Z)(AdministrationQuotaManager,"ɵfac",(function(t){return new(t||e)(g.Y36(m.y))})),(0,i.Z)(AdministrationQuotaManager,"ɵcmp",g.Xpm({type:e,selectors:[["administration-quotamanager"]],decls:22,vars:4,consts:[[1,"slds-page-header"],[1,"slds-grid","slds-grid_vertical-align-center","slds-grid--align-spread"],[1,"slds-media"],[1,"slds-media__body"],[1,"slds-page-header__title","slds-truncate","slds-align-middle"],[1,"slds-p-top--small"],["for","year-select"],["id","year-select",3,"ngModel","ngModelChange","change"],[4,"ngFor","ngForOf"],[1,"slds-scrollable--x"],[1,"slds-table","slds-table_bordered","slds-table_cell-buffer"],[1,"slds-text-title_caps"],["scope","col"],["scope","col",4,"ngFor","ngForOf"],["class","slds-text-title_caps",4,"ngFor","ngForOf"],[3,"userid","data","monthindex","year"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),g._uU(5,"Quota Manager"),g.qZA()()(),g.TgZ(6,"div",5)(7,"label",6),g._uU(8,"Year"),g.qZA(),g.TgZ(9,"select",7),g.NdJ("ngModelChange",(function(e){return t.year=e}))("change",(function(){return t.getQuotas()})),g.YNc(10,Ee,2,1,"option",8),g.qZA()()()(),g.TgZ(11,"div",9)(12,"table",10)(13,"thead")(14,"tr",11)(15,"th",12),g._uU(16,"Name"),g.qZA(),g.TgZ(17,"th",12),g._uU(18,"Total"),g.qZA(),g.YNc(19,Ue,2,1,"th",13),g.qZA()(),g.TgZ(20,"tbody"),g.YNc(21,ke,6,5,"tr",14),g.qZA()()()),2&e&&(g.xp6(9),g.Q6J("ngModel",t.year),g.xp6(1),g.Q6J("ngForOf",t.yearsList),g.xp6(9),g.Q6J("ngForOf",t.monthNamesList),g.xp6(2),g.Q6J("ngForOf",t.users))},dependencies:[n.sg,l.YN,l.Kr,l.EJ,l.JJ,l.On,qe],encapsulation:2})),AdministrationQuotaManager})();var Se=s(4044),Fe=s(3278);let we=(()=>{var e;class ftsconfiguration{constructor(e,t,s,n,l){(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"toast",void 0),(0,i.Z)(this,"module",""),(0,i.Z)(this,"module$",new g.vpe),(0,i.Z)(this,"moduleFtsFields",[]),(0,i.Z)(this,"moduleFtsSettings",{}),(0,i.Z)(this,"indexing",!1),(0,i.Z)(this,"fieldsDropList",void 0),(0,i.Z)(this,"modules",[]),(0,i.Z)(this,"analyzers",[]),this.backend=e,this.metadata=t,this.language=s,this.modal=n,this.toast=l,this.backend.getRequest("configuration/elastic/core/modules").subscribe((e=>this.modules=e)),this.backend.getRequest("configuration/elastic/core/analyzers").subscribe((e=>this.analyzers=e.sort(((e,t)=>e.value>t.value?1:-1))))}setModule(e){this.module=e,this.modules.indexOf(e)>=0?(this.getModuleFtsFields(),this.getModuleSettings()):this.module?(this.modules.push(e),this.moduleFtsFields=[],this.moduleFtsSettings=[]):(this.moduleFtsFields=[],this.moduleFtsSettings=[]),this.module$.emit(e)}getModuleFtsFields(){this.moduleFtsFields=[],this.backend.getRequest("configuration/elastic/"+this.module+"/fields").subscribe((e=>{this.moduleFtsFields=e}))}getModuleSettings(){this.moduleFtsSettings=[],this.backend.getRequest("configuration/elastic/"+this.module+"/settings").subscribe((e=>{this.moduleFtsSettings=e}))}getFieldDetails(e){let t={};return this.moduleFtsFields.some((s=>{if(s.id===e)return t=s,!0})),t}deleteModule(e){this.backend.deleteRequest(`configuration/elastic/${this.module}`).subscribe((t=>{this.modules.splice(this.modules.indexOf(e),1),this.module=""}))}save(e=!0){let t=new Je.x,s={fields:this.moduleFtsFields,settings:this.moduleFtsSettings};return this.backend.postRequest("configuration/elastic/"+this.module,{},s).subscribe((s=>{t.next(s),e&&(s?this.toast.sendToast(this.language.getLabel("LBL_DATA_SAVED"),"success"):this.toast.sendToast(this.language.getLabel("ERR_NETWORK"),"error"))}),(e=>t.error(e))),t}searchPath(e){let t=!1;return this.moduleFtsFields.some((s=>{if(s.path===e)return t=!0,!0})),t}executeAction(e,t){let s="",i="";switch(e){case"bulk":s=`configuration/elastic/${this.module}/index`,i="LBL_INDEX";break;case"init":s="configuration/elastic/core/initialize",i="LBL_INITIALIZE";break;case"reset":s=`configuration/elastic/${this.module}/index/reset`,i="LBL_RESET"}this.modal.openModal("SystemLoadingModal").subscribe((n=>{n.instance.messagelabel=this.language.getLabel("LBL_EXECUTING")+": "+this.language.getLabel(i),"reset"==e?this.save(!1).subscribe((e=>{this.backend.postRequest(s,t).subscribe((e=>{if(e&&e.message&&"string"==typeof e.message&&e.message.length>0){let t=e.type&&e.type.length>0?e.type:this.language.getLabel("LBL_INFORMATION");this.modal.info(e.message,t,e.status)}else"error"!=e.status&&this.toast.sendToast(this.language.getLabel("MSG_SUCCESSFULLY_EXECUTED"),"success");n.instance.self.destroy()}),(e=>n.instance.self.destroy()))}),(e=>n.instance.self.destroy())):this.backend.postRequest(s,t).subscribe((e=>{if(e&&e.message&&"string"==typeof e.message&&e.message.length>0){let t=e.type&&e.type.length>0?e.type:this.language.getLabel("LBL_INFORMATION");this.modal.info(e.message,t,e.status)}else"error"!=e.status&&this.toast.sendToast(this.language.getLabel("MSG_SUCCESSFULLY_EXECUTED"),"success");n.instance.self.destroy()}),(e=>n.instance.self.destroy()))}))}}return e=ftsconfiguration,(0,i.Z)(ftsconfiguration,"ɵfac",(function(t){return new(t||e)(g.LFG(m.y),g.LFG(f.Pu),g.LFG(p.d),g.LFG(Se.o),g.LFG(Fe.A))})),(0,i.Z)(ftsconfiguration,"ɵprov",g.Yz7({token:e,factory:e.ɵfac})),ftsconfiguration})();var Ie=s(4270);const Oe=["administration-ftsstatus",""];function Re(e,t){1&e&&g._UZ(0,"system-utility-icon",30)}function De(e,t){1&e&&g._UZ(0,"system-utility-icon",31)}function Qe(e,t){if(1&e&&(g.TgZ(0,"tr")(1,"td")(2,"div",16),g._uU(3),g.qZA()(),g.TgZ(4,"td")(5,"div",16),g._UZ(6,"system-display-number",18),g._uU(7,"/"),g._UZ(8,"system-display-number",18),g.qZA()(),g.TgZ(9,"td")(10,"div",16),g._uU(11),g.qZA()(),g.TgZ(12,"td")(13,"div",16),g._uU(14),g.qZA()(),g.TgZ(15,"td")(16,"div",16),g._uU(17),g.qZA()(),g.TgZ(18,"td"),g.YNc(19,Re,1,0,"system-utility-icon",28),g.YNc(20,De,1,0,"system-utility-icon",29),g.qZA()()),2&e){const e=t.$implicit;g.xp6(3),g.Oqu(e.name),g.xp6(3),g.Q6J("number",e.pdocs),g.xp6(2),g.Q6J("number",e.tdocs),g.xp6(3),g.Oqu(e.stored),g.xp6(3),g.Oqu(e.unindexed),g.xp6(3),g.AsE("",e.psize,"/",e.tsize,""),g.xp6(2),g.Q6J("ngIf",e.blocked),g.xp6(1),g.Q6J("ngIf",!e.blocked)}}function Be(e,t){if(1&e&&(g.TgZ(0,"div")(1,"table",10)(2,"thead")(3,"tr",11)(4,"th",12),g._UZ(5,"system-label",13),g.qZA(),g.TgZ(6,"th",12),g._UZ(7,"system-label",14),g.qZA()()(),g.TgZ(8,"tbody")(9,"tr")(10,"td"),g._UZ(11,"system-label",15),g.qZA(),g.TgZ(12,"td")(13,"div",16),g._uU(14),g.qZA()()(),g.TgZ(15,"tr")(16,"td"),g._UZ(17,"system-label",17),g.qZA(),g.TgZ(18,"td")(19,"div",16),g._UZ(20,"system-display-number",18),g._uU(21,"/"),g._UZ(22,"system-display-number",18),g.qZA()()(),g.TgZ(23,"tr")(24,"td"),g._UZ(25,"system-label",19),g.qZA(),g.TgZ(26,"td")(27,"div",16),g._uU(28),g.qZA()()()()(),g.TgZ(29,"h2",20),g._uU(30,"Index Details"),g.qZA(),g.TgZ(31,"div",21)(32,"table",22)(33,"thead")(34,"tr",11)(35,"th",12)(36,"div",16),g._UZ(37,"system-label",23),g.qZA()(),g.TgZ(38,"th",12)(39,"div",16),g._UZ(40,"system-label",17),g.qZA()(),g.TgZ(41,"th",12)(42,"div",16),g._UZ(43,"system-label",24),g.qZA()(),g.TgZ(44,"th",12)(45,"div",16),g._UZ(46,"system-label",25),g.qZA()(),g.TgZ(47,"th",12)(48,"div",16),g._UZ(49,"system-label",19),g.qZA()(),g.TgZ(50,"th",12)(51,"div",16),g._UZ(52,"system-label",26),g.qZA()()()(),g.TgZ(53,"tbody"),g.YNc(54,Qe,21,9,"tr",27),g.qZA()()()()),2&e){const e=g.oxw();g.xp6(14),g.Oqu(null==e.version||null==e.version.version?null:e.version.version.number),g.xp6(6),g.Q6J("number",e.stats.pdocs),g.xp6(2),g.Q6J("number",e.stats.tdocs),g.xp6(6),g.AsE("",e.stats.psize,"/",e.stats.tsize,""),g.xp6(26),g.Q6J("ngForOf",e.indices)}}let Ye=(()=>{var e;class AdministrationFTSStatus{constructor(e,t,s,n,l,o,a,d){(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"helper",void 0),(0,i.Z)(this,"toast",void 0),(0,i.Z)(this,"ftsconfiguration",void 0),(0,i.Z)(this,"injector",void 0),(0,i.Z)(this,"version",{}),(0,i.Z)(this,"stats",{docs:0,size:0}),(0,i.Z)(this,"loading",!1),(0,i.Z)(this,"indices",[]),this.metadata=e,this.language=t,this.modal=s,this.backend=n,this.helper=l,this.toast=o,this.ftsconfiguration=a,this.injector=d,this.loadstatus()}loadstatus(){this.loading=!0,this.indices=[],this.backend.getRequest("admin/elastic/status").subscribe((e=>{this.version=e.version,this.stats.tdocs=0,this.stats.pdocs=0,this.stats.tsize=0,this.stats.psize=0,e.stats?._all&&(e.stats._all.total.docs&&e.stats._all.total.docs.count&&(this.stats.tdocs=e.stats._all.total.docs.count,this.stats.pdocs=e.stats._all.primaries.docs.count),e.stats._all.total?.store&&e.stats._all.total.store.size_in_bytes&&(this.stats.tsize=this.helper.humanFileSize(e.stats._all.total.store.size_in_bytes),this.stats.psize=this.helper.humanFileSize(e.stats._all.primaries.store.size_in_bytes)));for(let t in e.stats.indices)this.indices.push({name:t,pdocs:e.stats.indices[t].primaries.docs.count,psize:this.helper.humanFileSize(e.stats.indices[t].primaries.store.size_in_bytes),tdocs:e.stats.indices[t].total.docs.count,tsize:this.helper.humanFileSize(e.stats.indices[t].total.store.size_in_bytes),stored:e.stats.indexed[t].count,unindexed:e.stats.indexed[t].unindexed,blocked:!!(e.settings&&e.settings[t]&&e.settings[t].settings.index.blocks?.read_only_allow_delete)});this.indices.sort(((e,t)=>e.name>t.name?1:-1)),this.loading=!1}),(e=>{this.loading=!1,this.toast.sendToast("Error loading Status","error")}))}unlock(){this.backend.putRequest("admin/elastic/unblock").subscribe((e=>{this.loadstatus()}))}get hasLocks(){return!!this.indices.find((e=>e.blocked))}initialize(){this.modal.confirm("Are you sure you want to initialize your FTS? It recreates new indices, so indexed data will be lost and have to be rebuild!","Initialize").subscribe((e=>{e&&this.ftsconfiguration.executeAction("init")}))}}return e=AdministrationFTSStatus,(0,i.Z)(AdministrationFTSStatus,"ɵfac",(function(t){return new(t||e)(g.Y36(f.Pu),g.Y36(p.d),g.Y36(Se.o),g.Y36(m.y),g.Y36(P._),g.Y36(Fe.A),g.Y36(we),g.Y36(g.zs3))})),(0,i.Z)(AdministrationFTSStatus,"ɵcmp",g.Xpm({type:e,selectors:[["","administration-ftsstatus",""]],features:[g._Bn([we])],attrs:Oe,decls:11,vars:4,consts:[[1,"slds-grid","slds-grid_vertical-align-center","slds-grid--align-spread","slds-p-around--small"],[1,"slds-text-heading_medium","slds-col--bump-right"],["label","LBL_FTS_STATUS"],["type","button",1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_INITIALIZE"],[1,"slds-button","slds-button_icon","slds-button_icon-border-filled",3,"disabled","click"],["icon","unlock"],["icon","refresh"],["system-to-bottom-noscroll","",3,"system-overlay-loading-spinner"],[4,"ngIf"],[1,"slds-table","slds-table_bordered","slds-table_cell-buffer","slds-m-bottom--medium"],[1,"slds-text-title_caps"],["scope","col"],["label","LBL_ATTRIBUTE"],["label","LBL_VALUE"],["label","LBL_VERSION"],[1,"slds-truncate"],["label","LBL_DOCS"],["system-display-number-nodigits","",3,"number"],["label","LBL_SIZE"],[1,"slds-p-around--small"],["system-to-bottom","",1,"slds-border--top"],[1,"slds-table","slds-table_bordered","slds-table_cell-buffer","slds-table--header-fixed"],["label","LBL_INDEX"],["label","LBL_STORED"],["label","LBL_UNINDEXED"],["label","LBL_BLOCKED"],[4,"ngFor","ngForOf"],["icon","lock","size","x-small","colorclass","slds-icon-text-error",4,"ngIf"],["icon","unlock","size","x-small","colorclass","slds-icon-text-success",4,"ngIf"],["icon","lock","size","x-small","colorclass","slds-icon-text-error"],["icon","unlock","size","x-small","colorclass","slds-icon-text-success"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0)(1,"h2",1),g._UZ(2,"system-label",2),g.qZA(),g.TgZ(3,"button",3),g.NdJ("click",(function(){return t.initialize()})),g._UZ(4,"system-label",4),g.qZA(),g.TgZ(5,"button",5),g.NdJ("click",(function(){return t.unlock()})),g._UZ(6,"system-button-icon",6),g.qZA(),g.TgZ(7,"button",5),g.NdJ("click",(function(){return t.loadstatus()})),g._UZ(8,"system-button-icon",7),g.qZA()(),g.TgZ(9,"div",8),g.YNc(10,Be,55,6,"div",9),g.qZA()),2&e&&(g.xp6(5),g.Q6J("disabled",t.loading||!t.hasLocks),g.xp6(2),g.Q6J("disabled",t.loading),g.xp6(2),g.Q6J("system-overlay-loading-spinner",t.loading),g.xp6(1),g.Q6J("ngIf",!t.loading))},dependencies:[n.sg,n.O5,T.J,Ie.G,M._,J.r,A.H,y.t,x._],encapsulation:2})),AdministrationFTSStatus})();var ze=s(8973),Ge=s(8594);const Pe=["dropList"];function He(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"tr",11),g.NdJ("click",(function(){const t=g.CHM(e).$implicit,s=g.oxw();return g.KtG(s.handleSelection(t.id))})),g.TgZ(1,"td",12),g._UZ(2,"system-utility-icon",13),g.qZA(),g.TgZ(3,"td")(4,"div",5),g._uU(5),g.qZA()(),g.TgZ(6,"td",14)(7,"div",5),g._uU(8),g.qZA()(),g.TgZ(9,"td",14)(10,"div",5),g._UZ(11,"system-label",15),g.qZA()(),g.TgZ(12,"td",4)(13,"button",16),g.NdJ("click",(function(){const t=g.CHM(e).index,s=g.oxw();return g.KtG(s.deleteField(t))})),g._UZ(14,"system-button-icon",17),g.qZA()()()}if(2&e){const e=t.$implicit,s=g.oxw();g.ekj("slds-theme--shade",s.isSelected(e.id)),g.Q6J("cdkDragData",e),g.xp6(5),g.Oqu(e.path),g.xp6(3),g.Oqu(e.fieldname),g.xp6(3),g.Q6J("label",e.name)}}const Ke=function(e){return[e]};let je=(()=>{var e;class AdministrationFTSManagerFieldsList{constructor(e,t,s,n,l,o){(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"ftsconfiguration",void 0),(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"modelutilities",void 0),(0,i.Z)(this,"links",[]),(0,i.Z)(this,"self",{}),(0,i.Z)(this,"fields",[]),(0,i.Z)(this,"dragList",void 0),(0,i.Z)(this,"dragPlaceHolderNode",void 0),(0,i.Z)(this,"nodePath",""),(0,i.Z)(this,"selectedField",""),(0,i.Z)(this,"selectListField",new g.vpe),(0,i.Z)(this,"dropList",void 0),this.metadata=e,this.language=t,this.ftsconfiguration=s,this.backend=n,this.modal=l,this.modelutilities=o}ngAfterViewInit(){window.setTimeout((()=>this.ftsconfiguration.fieldsDropList=this.dropList),100)}rightDrop(e){if(this.removePlaceHolderElement(e.previousContainer.element.nativeElement),e.previousContainer===e.container)(0,o.bA)(e.container.data,e.previousIndex,e.currentIndex);else{let t=e.item.data,s=this.modelutilities.generateGuid(),i={id:s,fieldid:s,fieldname:t.name,indexfieldname:t.name,name:t.label,path:this.nodePath+"::"+t.id};this.ftsconfiguration.moduleFtsFields.splice(e.currentIndex,0,i)}}removePlaceHolderElement(e){this.dragPlaceHolderNode&&(e.removeChild(this.dragPlaceHolderNode),this.dragPlaceHolderNode=void 0)}trackByFn(e,t){return t.id}deleteField(e){this.modal.confirmDeleteRecord().subscribe((t=>{t&&this.ftsconfiguration.moduleFtsFields.splice(e,1)}))}handleSelection(e){this.selectListField.emit(e)}isSelected(e){return this.selectedField==e}}return e=AdministrationFTSManagerFieldsList,(0,i.Z)(AdministrationFTSManagerFieldsList,"ɵfac",(function(t){return new(t||e)(g.Y36(f.Pu),g.Y36(p.d),g.Y36(we),g.Y36(m.y),g.Y36(Se.o),g.Y36(z.A))})),(0,i.Z)(AdministrationFTSManagerFieldsList,"ɵcmp",g.Xpm({type:e,selectors:[["administration-ftsmanager-fields-list"]],viewQuery:function(e,t){if(1&e&&g.Gf(Pe,5),2&e){let e;g.iGM(e=g.CRH())&&(t.dropList=e.first)}},inputs:{dragList:"dragList",dragPlaceHolderNode:"dragPlaceHolderNode",nodePath:"nodePath",selectedField:"selectedField"},outputs:{selectListField:"selectListField"},decls:18,vars:6,consts:[["cdkDropList","",1,"slds-size--1-of-1","slds-border--left",2,"height","100%",3,"cdkDropListData","cdkDropListConnectedTo","cdkDropListDropped"],["dropList","cdkDropList"],[1,"slds-table","slds-table--cell-buffer","spice-table_header-fixed","slds-table--fixed-layout"],[1,"slds-text-title--caps","slds-theme--shade"],[1,"slds-cell-shrink"],[1,"slds-truncate"],["label","LBL_PATH"],["scope","col"],["label","LBL_FIELD"],["label","LBL_NAME"],["cdkDrag","","cdkDragBoundary","#administration-fts-manager-field-add-drop-table","class","slds-border--bottom slds-drag--preview",3,"cdkDragData","slds-theme--shade","click",4,"ngFor","ngForOf","ngForTrackBy"],["cdkDrag","","cdkDragBoundary","#administration-fts-manager-field-add-drop-table",1,"slds-border--bottom","slds-drag--preview",3,"cdkDragData","click"],[1,"slds-p-around--none"],["cdkDragHandle","","icon","drag_and_drop","size","x-small",1,"slds-p-horizontal--x-small",2,"cursor","move"],["data-label","Account Name"],[3,"label"],[1,"slds-button","slds-button--icon",3,"click"],["icon","close"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0,1),g.NdJ("cdkDropListDropped",(function(e){return t.rightDrop(e)})),g.TgZ(2,"table",2)(3,"thead")(4,"tr",3),g._UZ(5,"th",4),g.TgZ(6,"th")(7,"div",5),g._UZ(8,"system-label",6),g.qZA()(),g.TgZ(9,"th",7)(10,"div",5),g._UZ(11,"system-label",8),g.qZA()(),g.TgZ(12,"th",7)(13,"div",5),g._UZ(14,"system-label",9),g.qZA()(),g._UZ(15,"th",4),g.qZA()(),g.TgZ(16,"tbody"),g.YNc(17,He,15,6,"tr",10),g.qZA()()()),2&e&&(g.Q6J("cdkDropListData",t.ftsconfiguration.moduleFtsFields)("cdkDropListConnectedTo",g.VKq(4,Ke,t.dragList)),g.xp6(17),g.Q6J("ngForOf",t.ftsconfiguration.moduleFtsFields)("ngForTrackBy",t.trackByFn))},dependencies:[n.sg,T.J,M._,J.r,o.Wj,o.Zt,o.Bh],encapsulation:2})),AdministrationFTSManagerFieldsList})();function $e(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",16)(1,"label",17),g._UZ(2,"system-label",84),g.qZA(),g._UZ(3,"system-icon-help-text",23),g.TgZ(4,"div",15)(5,"textarea",85),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw(2);return g.KtG(s.aggregateaddparams=t)})),g.qZA()()()}if(2&e){const e=g.oxw(2);g.xp6(3),g.Q6J("helpText",e.language.getLabel("HLP_FTS_AGGREGATE_PARAMS")),g.xp6(2),g.Q6J("ngModel",e.aggregateaddparams)}}function Ve(e,t){if(1&e&&(g.TgZ(0,"option",86),g._uU(1),g.qZA()),2&e){const e=t.$implicit;g.Q6J("value",e.value),g.xp6(1),g.Oqu(e.text)}}function Xe(e,t){if(1&e&&(g.TgZ(0,"option",86),g._uU(1),g.qZA()),2&e){const e=t.$implicit;g.Q6J("value",e.value),g.xp6(1),g.Oqu(e.text)}}function We(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div")(1,"h2",10),g._UZ(2,"system-label",11),g._uU(3),g.qZA(),g.TgZ(4,"fieldset",12)(5,"legend",13),g._UZ(6,"system-label",14),g.qZA(),g.TgZ(7,"div",15)(8,"div",16)(9,"label",17),g._UZ(10,"system-label",18),g.qZA(),g.TgZ(11,"div",15)(12,"input",19),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.fieldDetails.indexfieldname=t)})),g.qZA()()(),g.TgZ(13,"div",16)(14,"label",17),g._UZ(15,"system-label",20),g.qZA(),g.TgZ(16,"system-input-label",21),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.fieldDetails.name=t)})),g.qZA()(),g.TgZ(17,"div",16)(18,"label",17),g._UZ(19,"system-label",22),g.qZA(),g._UZ(20,"system-icon-help-text",23),g.TgZ(21,"div",15)(22,"div",24)(23,"select",25),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.fieldDetails.indextype=t)})),g._UZ(24,"option",26),g.TgZ(25,"option",27),g._uU(26,"text"),g.qZA(),g.TgZ(27,"option",28),g._uU(28,"keyword"),g.qZA(),g.TgZ(29,"option",29),g._uU(30,"date"),g.qZA(),g.TgZ(31,"option",30),g._uU(32,"double"),g.qZA()()()()()(),g.TgZ(33,"div",31)(34,"div",32)(35,"label",17),g._UZ(36,"system-label",33),g.qZA(),g._UZ(37,"system-icon-help-text",23),g.TgZ(38,"div",15)(39,"input",19),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.fieldDetails.boost=t)})),g.qZA()()(),g.TgZ(40,"div",16)(41,"div",15)(42,"system-checkbox",21),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.fieldDetails.enablesort=t)})),g._UZ(43,"system-label",34)(44,"system-icon-help-text",23),g.qZA()()(),g.TgZ(45,"div",16)(46,"div",15)(47,"system-checkbox",21),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.fieldDetails.search=t)})),g._UZ(48,"system-label",35)(49,"system-icon-help-text",23),g.qZA()()()(),g.TgZ(50,"div",31)(51,"div",36)(52,"label",17),g._UZ(53,"system-label",37),g.qZA(),g._UZ(54,"system-icon-help-text",23),g.TgZ(55,"div",15)(56,"system-input-backend-method",21),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.fieldDetails.function=t)})),g.qZA()()()()(),g.TgZ(57,"fieldset",38)(58,"legend",13),g._UZ(59,"system-label",39),g.qZA(),g.TgZ(60,"div",15)(61,"div",16)(62,"label",17),g._UZ(63,"system-label",39),g.qZA(),g._UZ(64,"system-icon-help-text",23),g.TgZ(65,"div",15)(66,"div",24)(67,"select",25),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.fieldDetails.aggregate=t)})),g._UZ(68,"option",26),g.TgZ(69,"option",40),g._uU(70,"Term"),g.qZA(),g.TgZ(71,"option",41),g._uU(72,"Range"),g.qZA(),g.TgZ(73,"option",42),g._uU(74,"Date Week"),g.qZA(),g.TgZ(75,"option",43),g._uU(76,"Date Month"),g.qZA(),g.TgZ(77,"option",44),g._uU(78,"Date Quarter"),g.qZA(),g.TgZ(79,"option",45),g._uU(80,"Date Year"),g.qZA()()()()(),g.TgZ(81,"div",46)(82,"div",47)(83,"system-checkbox",48),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.fieldDetails.aggregatecollapsed=t)})),g._UZ(84,"system-label",49),g.qZA()(),g.TgZ(85,"div",47)(86,"system-checkbox",48),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.fieldDetails.aggregateempty=t)})),g._UZ(87,"system-label",50),g.qZA()(),g.TgZ(88,"div",47)(89,"system-checkbox",48),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.fieldDetails.aggregatesystem=t)})),g._UZ(90,"system-label",51),g.qZA()()(),g.YNc(91,$e,6,2,"div",52),g.TgZ(92,"div",0)(93,"div",32)(94,"label",17),g._UZ(95,"system-label",53),g.qZA(),g._UZ(96,"system-icon-help-text",23),g.TgZ(97,"div",15)(98,"input",19),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.fieldDetails.aggregatesize=t)})),g.qZA()()(),g.TgZ(99,"div",32)(100,"label",17),g._UZ(101,"system-label",54),g.qZA(),g.TgZ(102,"div",15)(103,"input",19),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.fieldDetails.aggregatepriority=t)})),g.qZA()()()(),g.TgZ(104,"div",0)(105,"div",32)(106,"label",17),g._UZ(107,"system-label",55),g.qZA(),g._UZ(108,"system-icon-help-text",23),g.TgZ(109,"div",15)(110,"div",24)(111,"select",25),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.fieldDetails.aggregatesortby=t)})),g._UZ(112,"option",26),g.TgZ(113,"option",56),g._uU(114,"Count (default)"),g.qZA(),g.TgZ(115,"option",57),g._uU(116,"Key"),g.qZA()()()()(),g.TgZ(117,"div",32)(118,"label",17),g._UZ(119,"system-label",58),g.qZA(),g._UZ(120,"system-icon-help-text",23),g.TgZ(121,"div",15)(122,"select",25),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.fieldDetails.aggregatesort=t)})),g._UZ(123,"option",26),g.TgZ(124,"option",59),g._uU(125,"asc"),g.qZA(),g.TgZ(126,"option",60),g._uU(127,"desc (default)"),g.qZA()()()()()()(),g.TgZ(128,"fieldset",12)(129,"legend",13),g._UZ(130,"system-label",61),g.qZA(),g.TgZ(131,"div",15)(132,"div",0)(133,"div",32)(134,"label",17),g._UZ(135,"system-label",61),g.qZA(),g._UZ(136,"system-icon-help-text",23),g.TgZ(137,"div",15)(138,"div",24)(139,"select",25),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.fieldDetails.analyzer=t)})),g.TgZ(140,"option",62),g._uU(141,"standard"),g.qZA(),g.YNc(142,Ve,2,2,"option",63),g.qZA()()()(),g.TgZ(143,"div",32)(144,"label",17),g._UZ(145,"system-label",64),g.qZA(),g._UZ(146,"system-icon-help-text",23),g.TgZ(147,"div",15)(148,"div",24)(149,"select",25),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.fieldDetails.search_analyzer=t)})),g.TgZ(150,"option",62),g._uU(151,"standard"),g.qZA(),g.YNc(152,Xe,2,2,"option",63),g.qZA()()()()()()(),g.TgZ(153,"fieldset",12)(154,"legend",13),g._UZ(155,"system-label",65),g.qZA(),g.TgZ(156,"div",15)(157,"div",16)(158,"div",15)(159,"system-checkbox",21),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.fieldDetails.duplicatecheck=t)})),g._UZ(160,"system-label",66)(161,"system-icon-help-text",23),g.qZA()()(),g.TgZ(162,"div",67)(163,"div",68)(164,"label",17),g._UZ(165,"system-label",69),g.qZA(),g._UZ(166,"system-icon-help-text",23),g.TgZ(167,"div",15)(168,"div",24)(169,"select",70),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.fieldDetails.duplicatequery=t)})),g.TgZ(170,"option",62),g._uU(171,"match (or)"),g.qZA(),g.TgZ(172,"option",71),g._uU(173,"match (and)"),g.qZA(),g.TgZ(174,"option",40),g._uU(175,"term"),g.qZA()()()()(),g.TgZ(176,"div",68)(177,"label",17),g._UZ(178,"system-label",72),g.qZA(),g._UZ(179,"system-icon-help-text",23),g.TgZ(180,"div",15)(181,"input",73),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.fieldDetails.duplicatefuzz=t)})),g.qZA()()()()()(),g.TgZ(182,"fieldset",12)(183,"legend",13),g._UZ(184,"system-label",74),g.qZA(),g.TgZ(185,"div",75)(186,"system-checkbox",21),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.fieldDetails.email=t)})),g._UZ(187,"system-label",76)(188,"system-icon-help-text",23),g.qZA()(),g.TgZ(189,"div",75)(190,"system-checkbox",21),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.fieldDetails.phonesearch=t)})),g._UZ(191,"system-label",77)(192,"system-icon-help-text",23),g.qZA()()(),g.TgZ(193,"fieldset",12)(194,"legend",13),g._UZ(195,"system-label",78),g.qZA(),g.TgZ(196,"div",15)(197,"div",16)(198,"label",17),g._UZ(199,"system-label",22),g.qZA(),g.TgZ(200,"div",15)(201,"div",24)(202,"select",25),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.fieldDetails.activitytype=t)})),g.TgZ(203,"option",62),g._uU(204,"---"),g.qZA(),g.TgZ(205,"option",79),g._uU(206,"activityparentid"),g.qZA(),g.TgZ(207,"option",80),g._uU(208,"activitydate"),g.qZA(),g.TgZ(209,"option",81),g._uU(210,"activityenddate"),g.qZA(),g.TgZ(211,"option",82),g._uU(212,"activityparticipant"),g.qZA(),g.TgZ(213,"option",83),g._uU(214,"activitystatus"),g.qZA()()()()()()()()}if(2&e){const e=g.oxw();g.xp6(3),g.AsE(": ",e.fieldDetails.displaypath,"->",e.fieldDetails.fieldname,""),g.xp6(9),g.Q6J("ngModel",e.fieldDetails.indexfieldname),g.xp6(4),g.Q6J("ngModel",e.fieldDetails.name),g.xp6(4),g.Q6J("helpText",e.language.getLabel("HLP_FTS_DATATYPE")),g.xp6(3),g.Q6J("ngModel",e.fieldDetails.indextype),g.xp6(1),g.Q6J("ngValue",null),g.xp6(13),g.Q6J("helpText",e.language.getLabel("HLP_FTS_BOOST")),g.xp6(2),g.Q6J("ngModel",e.fieldDetails.boost),g.xp6(3),g.Q6J("ngModel",e.fieldDetails.enablesort),g.xp6(2),g.Q6J("helpText",e.language.getLabel("HLP_FTS_ENABLE_SORT")),g.xp6(3),g.Q6J("ngModel",e.fieldDetails.search),g.xp6(2),g.Q6J("helpText",e.language.getLabel("HLP_FTS_ENABLE_SEARCH")),g.xp6(5),g.Q6J("helpText",e.language.getLabel("HLP_FTS_FIELD_FUNCTION")),g.xp6(2),g.Q6J("ngModel",e.fieldDetails.function),g.xp6(8),g.Q6J("helpText",e.language.getLabel("HLP_FTS_AGGREGATE")),g.xp6(3),g.Q6J("ngModel",e.fieldDetails.aggregate),g.xp6(1),g.Q6J("ngValue",null),g.xp6(15),g.Q6J("disabled",!e.fieldDetails.aggregate)("ngModel",e.fieldDetails.aggregatecollapsed),g.xp6(3),g.Q6J("disabled","term"!=e.fieldDetails.aggregate)("ngModel",e.fieldDetails.aggregateempty),g.xp6(3),g.Q6J("disabled","term"!=e.fieldDetails.aggregate)("ngModel",e.fieldDetails.aggregatesystem),g.xp6(2),g.Q6J("ngIf",e.fieldDetails.aggregate),g.xp6(5),g.Q6J("helpText",e.language.getLabel("HLP_FTS_AGGREGATE_SIZE")),g.xp6(2),g.Q6J("ngModel",e.fieldDetails.aggregatesize),g.xp6(5),g.Q6J("ngModel",e.fieldDetails.aggregatepriority),g.xp6(5),g.Q6J("helpText",e.language.getLabel("HLP_FTS_AGGREGATE_SORTBY")),g.xp6(3),g.Q6J("ngModel",e.fieldDetails.aggregatesortby),g.xp6(1),g.Q6J("ngValue",null),g.xp6(8),g.Q6J("helpText",e.language.getLabel("HLP_FTS_AGGREGATE_SORT")),g.xp6(2),g.Q6J("ngModel",e.fieldDetails.aggregatesort),g.xp6(1),g.Q6J("ngValue",null),g.xp6(13),g.Q6J("helpText",e.language.getLabel("HLP_FTS_ANALYZER")+"\n"+e.language.getLabel("HLP_FTS_ANALYZER_STANDARD")+"\n"+e.language.getLabel("HLP_FTS_ANALYZER_NGRAM")+"\n"+e.language.getLabel("HLP_FTS_ANALYZER_HTML")+"\n"+e.language.getLabel("HLP_FTS_ANALYZER_EDGENGRAM")+"\n"+e.language.getLabel("HLP_FTS_ANALYZER_EMAIL")),g.xp6(3),g.Q6J("ngModel",e.fieldDetails.analyzer),g.xp6(3),g.Q6J("ngForOf",e.ftsconfiguration.analyzers),g.xp6(4),g.Q6J("helpText",e.language.getLabel("HLP_FTS_SEARCHANALYZER")+"\n"+e.language.getLabel("HLP_FTS_ANALYZER_STANDARD")+"\n"+e.language.getLabel("HLP_FTS_ANALYZER_NGRAM")+"\n"+e.language.getLabel("HLP_FTS_ANALYZER_HTML")+"\n"+e.language.getLabel("HLP_FTS_ANALYZER_EDGENGRAM")+"\n"+e.language.getLabel("HLP_FTS_ANALYZER_EMAIL")),g.xp6(3),g.Q6J("ngModel",e.fieldDetails.search_analyzer),g.xp6(3),g.Q6J("ngForOf",e.ftsconfiguration.analyzers),g.xp6(7),g.Q6J("ngModel",e.fieldDetails.duplicatecheck),g.xp6(2),g.Q6J("helpText",e.language.getLabel("HLP_FTS_DUPLICATE_CHECK")),g.xp6(5),g.Q6J("helpText",e.language.getLabel("HLP_FTS_DUPLICATE_QUERY")),g.xp6(3),g.Q6J("disabled",!e.fieldDetails.duplicatecheck)("ngModel",e.fieldDetails.duplicatequery),g.xp6(10),g.Q6J("helpText",e.language.getLabel("HLP_FTS_DUPLICATE_FUZZINESS")),g.xp6(2),g.Q6J("disabled",!e.fieldDetails.duplicatecheck)("ngModel",e.fieldDetails.duplicatefuzz),g.xp6(5),g.Q6J("ngModel",e.fieldDetails.email),g.xp6(2),g.Q6J("helpText",e.language.getLabel("HLP_FTS_ENABLE_EMAIL")),g.xp6(2),g.Q6J("ngModel",e.fieldDetails.phonesearch),g.xp6(2),g.Q6J("helpText",e.language.getLabel("HLP_FTS_ENABLE_PHONE")),g.xp6(10),g.Q6J("ngModel",e.fieldDetails.activitytype)}}function et(e,t){1&e&&(g.TgZ(0,"div",87),g._uU(1,"select a field"),g.qZA())}let tt=(()=>{var e;class AdministrationFTSManagerFields{constructor(e,t,s,n,l){(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"injector",void 0),(0,i.Z)(this,"ftsconfiguration",void 0),(0,i.Z)(this,"currentfield",""),(0,i.Z)(this,"fieldDetails",{}),(0,i.Z)(this,"displayAddFieldModal",!1),this.metadata=e,this.language=t,this.modal=s,this.injector=n,this.ftsconfiguration=l,this.ftsconfiguration.module$.subscribe((e=>{this.currentfield=""}))}get moduleFtsFields(){return this.ftsconfiguration.moduleFtsFields}get aggregateaddparams(){return this.fieldDetails.aggregateaddparams?atob(this.fieldDetails.aggregateaddparams):""}set aggregateaddparams(e){this.fieldDetails.aggregateaddparams=e?btoa(e):""}selectField(e){this.currentfield=e,this.fieldDetails=this.ftsconfiguration.getFieldDetails(e)}showAddFields(){this.modal.openModal("AdministrationFTSManagerFieldsAdd",!0,this.injector)}closeAddFields(e){this.displayAddFieldModal=!1}}return e=AdministrationFTSManagerFields,(0,i.Z)(AdministrationFTSManagerFields,"ɵfac",(function(t){return new(t||e)(g.Y36(f.Pu),g.Y36(p.d),g.Y36(Se.o),g.Y36(g.zs3),g.Y36(we))})),(0,i.Z)(AdministrationFTSManagerFields,"ɵcmp",g.Xpm({type:e,selectors:[["administration-ftsmanager-fields"]],decls:11,vars:3,consts:[[1,"slds-grid"],["system-to-bottom","",1,"slds-size--1-of-2","slds-grid","slds-grid--vertical"],[1,"slds-grow","slds-scrollable--y",2,"height","100%"],[2,"display","block","height","100%",3,"selectedField","selectListField"],[1,"slds-p-around--small","slds-text-align--center"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_ADD_FIELD"],["system-to-bottom","",1,"slds-size--1-of-2","slds-border--left","slds-p-left--x-small"],[4,"ngIf","ngIfElse"],["selectfield",""],[1,"slds-text-heading--small","slds-p-vertical--x-small"],["label","LBL_FIELD_DETAILS"],[1,"slds-form-element","slds-form-element_compound","slds-p-vertical--x-small"],[1,"slds-form-element__legend","slds-form-element__label"],["label","LBL_INDEX_PARAMETERS"],[1,"slds-form-element__control"],[1,"slds-form-element"],[1,"slds-form-element__label"],["label","LBL_INDEX_FIELD_NAME"],["type","text",1,"slds-input",3,"ngModel","ngModelChange"],["label","LBL_NAME"],[3,"ngModel","ngModelChange"],["label","LBL_TYPE"],[3,"helpText"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],[3,"ngValue"],["value","text"],["value","keyword"],["value","date"],["value","double"],[1,"slds-grid","slds-grid_vertical-align-center","slds-m-top--x-small"],[1,"slds-form-element","slds-size--1-of-2"],["label","LBL_BOOST"],["label","LBL_SORTABLE"],["label","LBL_SEARCH"],[1,"slds-form-element","slds-size--1-of-1"],["label","LBL_FUNCTION"],[1,"slds-form-element","slds-form-element_compound","slds-p-vertical--x-small","slds-p-right--x-small"],["label","LBL_AGGREGATE"],["value","term"],["value","range"],["value","datew"],["value","datem"],["value","dateq"],["value","datey"],[1,"slds-form-element","slds-p-vertical--x-small","slds-grid"],[1,"slds-form-element__control","slds-size--1-of-3"],[3,"disabled","ngModel","ngModelChange"],["label","LBL_COLLAPSED"],["label","LBL_AGGREGATEEMPTYVALUES"],["label","LBL_SYSTEMAGGREGATE"],["class","slds-form-element",4,"ngIf"],["label","LBL_AGGREGATE_SIZE"],["label","LBL_AGGREGATE_PRIORITY"],["label","LBL_AGGREGATE_SORTBY"],["value","_count"],["value","_key"],["label","LBL_AGGREGATE_SORT"],["value","asc"],["value","desc"],["label","LBL_ANALYZER"],["value",""],[3,"value",4,"ngFor","ngForOf"],["label","LBL_SEARCH_ANALYZER"],["label","LBL_DUPLICATECHECK_SETTINGS"],["label","LBL_DUPLICATE_CHECK"],[1,"slds-grid","slds-grid_vertical-align-center"],[1,"slds-col","slds-size--1-of-2","slds-form-element"],["label","LBL_QUERY"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],["value","match_and"],["label","LBL_FUZZINESS"],["type","text",1,"slds-input",3,"disabled","ngModel","ngModelChange"],["label","LBL_EMAIL_PHONE_SETTINGS"],[1,"slds-form-element__control","slds-size--1-of-2"],["label","LBL_EMAIL_SEARCH"],["label","LBL_PHONE_SEARCH"],["label","LBL_FTS_ACTIVITY_PARAMS"],["value","activityparentid"],["value","activitydate"],["value","activityenddate"],["value","activityparticipant"],["value","activitystatus"],["label","LBL_PARAMETERS"],[1,"slds-textarea",3,"ngModel","ngModelChange"],[3,"value"],[1,"slds-p-around--small","slds-align--absolute-center","slds-height_full"]],template:function(e,t){if(1&e&&(g.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"administration-ftsmanager-fields-list",3),g.NdJ("selectListField",(function(e){return t.selectField(e)})),g.qZA()(),g.TgZ(4,"div",4)(5,"button",5),g.NdJ("click",(function(){return t.showAddFields()})),g._UZ(6,"system-label",6),g.qZA()()(),g.TgZ(7,"div",7),g.YNc(8,We,215,53,"div",8),g.YNc(9,et,2,0,"ng-template",null,9,g.W1O),g.qZA()()),2&e){const e=g.MAs(10);g.xp6(3),g.Q6J("selectedField",t.currentfield),g.xp6(5),g.Q6J("ngIf",t.currentfield)("ngIfElse",e)}},dependencies:[n.sg,n.O5,l.YN,l.Kr,l.Fj,l.EJ,l.JJ,l.On,H.U,K.$,ze.N,M._,Ge.h,A.H,je],encapsulation:2})),AdministrationFTSManagerFields})();var st=s(3673),it=s(4375);function nt(e,t){if(1&e&&(g.TgZ(0,"option",57),g._uU(1),g.qZA()),2&e){const e=t.$implicit;g.Q6J("value",e.value),g.xp6(1),g.Oqu(e.text)}}let lt=(()=>{var e;class AdministrationFTSManagerDetails{constructor(e,t,s){(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"ftsconfiguration",void 0),this.metadata=e,this.language=t,this.ftsconfiguration=s}}return e=AdministrationFTSManagerDetails,(0,i.Z)(AdministrationFTSManagerDetails,"ɵfac",(function(t){return new(t||e)(g.Y36(f.Pu),g.Y36(p.d),g.Y36(we))})),(0,i.Z)(AdministrationFTSManagerDetails,"ɵcmp",g.Xpm({type:e,selectors:[["administration-ftsmanager-details"]],decls:137,vars:29,consts:[["system-to-bottom","",1,"slds-p-top--x-small","slds-p-horizontal--x-small"],[1,"slds-form-element","slds-form-element_compound","slds-p-vertical--x-small"],[1,"slds-form-element__legend","slds-form-element__label"],["label","LBL_INDEX_PARAMETERS"],[1,"slds-form-element__control"],[1,"slds-form-element"],[1,"slds-form-element__label"],["label","LBL_INDEX_PRIORITY"],["type","text",1,"slds-input",3,"ngModel","ngModelChange"],["label","LBL_FTS_MULTIMATCH_TYPE"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],["value",""],["value","best_fields"],["value","most_fields"],["value","phrase"],["value","phrase_prefix"],["value","cross_fields"],[1,"slds-form-element","slds-p-vertical--x-small"],[3,"ngModel","ngModelChange"],["label","LBL_SYNCRONOUS"],["label","LBL_SEARCH_PARAMETERS"],[1,"slds-grid"],[1,"slds-form-element","slds-size--1-of-2"],["label","LBL_OPERATOR"],["value","and"],["label","LBL_AND"],["value","or"],["label","LBL_OR"],["label","LBL_SEARCH_ANALYZER"],[3,"helpText"],[3,"value",4,"ngFor","ngForOf"],[1,"slds-grid","slds-p-vertical--x-small"],["label","LBL_GLOBAL_SEARCH"],["label","LBL_EMAIL_SEARCH"],["label","LBL_PHONE_SEARCH"],["label","LBL_FTS_DUPLICATE_PARAMS"],[1,"slds-form-element","slds-grid","slds-grid--vertical-align-center","slds-gutters_direct-small"],[1,"slds-col","slds-size--1-of-1","slds-grid","slds-grid--vertical-align-center"],["label","LBL_FILTER"],[1,"slds-grow",3,"ngModel","ngModelChange"],["label","LBL_FTS_GLOBALFILTER"],["label","LBL_ GLOBALFILTER"],["label","LBL_GEO_SEARCH_PARAMETERS"],["label","LBL_GEO_SEARCH"],[1,"slds-form-element__control","slds-grid"],["label","LBL_LATITUDE"],[3,"disabled","ngModel","module","ngModelChange"],["label","LBL_LONGITUDE"],["label","LBL_FTS_ACTIVITY_PARAMS"],[1,"slds-form-element__control","slds-col","slds-size--1-of-3"],["label","LBL_FTS_IN_ACTIVITIES"],[1,"slds-col","slds-size--2-of-3","slds-grid","slds-grid--vertical-align-center"],["label","LBL_FTS_IN_HISTORY"],["label","LBL_FTS_IN_ASSISTANT"],["label","LBL_FTS_IN_CALENDAR"],["label","LBL_FTS_IN_TIMELINE"],[3,"value"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0)(1,"fieldset",1)(2,"legend",2),g._UZ(3,"system-label",3),g.qZA(),g.TgZ(4,"div",4)(5,"div",5)(6,"label",6),g._UZ(7,"system-label",7),g.qZA(),g.TgZ(8,"div",4)(9,"input",8),g.NdJ("ngModelChange",(function(e){return t.ftsconfiguration.moduleFtsSettings.index_priority=e})),g.qZA()()(),g.TgZ(10,"div",5)(11,"label",6),g._UZ(12,"system-label",9),g.qZA(),g.TgZ(13,"div",4)(14,"div",10)(15,"select",11),g.NdJ("ngModelChange",(function(e){return t.ftsconfiguration.moduleFtsSettings.multimatch_type=e})),g.TgZ(16,"option",12),g._uU(17,"default"),g.qZA(),g.TgZ(18,"option",13),g._uU(19,"Best Fields"),g.qZA(),g.TgZ(20,"option",14),g._uU(21,"Most Fields"),g.qZA(),g.TgZ(22,"option",15),g._uU(23,"Phrase"),g.qZA(),g.TgZ(24,"option",16),g._uU(25,"Phrase Prefix"),g.qZA(),g.TgZ(26,"option",17),g._uU(27,"Cross Fields"),g.qZA()()()()(),g.TgZ(28,"div",18)(29,"system-checkbox",19),g.NdJ("ngModelChange",(function(e){return t.ftsconfiguration.moduleFtsSettings.waitfor=e})),g._UZ(30,"system-label",20),g.qZA()()()(),g.TgZ(31,"fieldset",1)(32,"legend",2),g._UZ(33,"system-label",21),g.qZA(),g.TgZ(34,"div",4)(35,"div",22)(36,"div",23)(37,"label",6),g._UZ(38,"system-label",24),g.qZA(),g.TgZ(39,"div",4)(40,"div",10)(41,"select",11),g.NdJ("ngModelChange",(function(e){return t.ftsconfiguration.moduleFtsSettings.operator=e})),g.TgZ(42,"option",25),g._UZ(43,"system-label",26),g.qZA(),g.TgZ(44,"option",27),g._UZ(45,"system-label",28),g.qZA()()()()(),g.TgZ(46,"div",23)(47,"label",6),g._UZ(48,"system-label",29),g.qZA(),g._UZ(49,"system-icon-help-text",30),g.TgZ(50,"div",4)(51,"div",10)(52,"select",11),g.NdJ("ngModelChange",(function(e){return t.ftsconfiguration.moduleFtsSettings.search_analyzer=e})),g.TgZ(53,"option",12),g._uU(54,"standard"),g.qZA(),g.YNc(55,nt,2,2,"option",31),g.qZA()()()()(),g.TgZ(56,"div",32)(57,"system-checkbox",19),g.NdJ("ngModelChange",(function(e){return t.ftsconfiguration.moduleFtsSettings.globalsearch=e})),g._UZ(58,"system-label",33),g.qZA(),g.TgZ(59,"system-checkbox",19),g.NdJ("ngModelChange",(function(e){return t.ftsconfiguration.moduleFtsSettings.emailsearch=e})),g._UZ(60,"system-label",34),g.qZA(),g.TgZ(61,"system-checkbox",19),g.NdJ("ngModelChange",(function(e){return t.ftsconfiguration.moduleFtsSettings.phonesearch=e})),g._UZ(62,"system-label",35),g.qZA()()()(),g.TgZ(63,"fieldset",1)(64,"legend",2),g._UZ(65,"system-label",36),g.qZA(),g.TgZ(66,"div",4)(67,"div",37)(68,"div",38)(69,"label",6),g._UZ(70,"system-label",39),g.qZA(),g.TgZ(71,"system-input-module-filter",40),g.NdJ("ngModelChange",(function(e){return t.ftsconfiguration.moduleFtsSettings.duplicatefilter=e})),g.qZA()()()()(),g.TgZ(72,"fieldset",1)(73,"legend",2),g._UZ(74,"system-label",41),g.qZA(),g._UZ(75,"system-icon-help-text",30),g.TgZ(76,"div",4)(77,"div",37)(78,"div",38)(79,"label",6),g._UZ(80,"system-label",42),g.qZA(),g.TgZ(81,"system-input-module-filter",40),g.NdJ("ngModelChange",(function(e){return t.ftsconfiguration.moduleFtsSettings.globalfilter=e})),g.qZA()()()()(),g.TgZ(82,"fieldset",1)(83,"legend",2),g._UZ(84,"system-label",43),g.qZA(),g.TgZ(85,"div",4)(86,"system-checkbox",19),g.NdJ("ngModelChange",(function(e){return t.ftsconfiguration.moduleFtsSettings.geosearch=e})),g._UZ(87,"system-label",44),g.qZA()(),g.TgZ(88,"div",45)(89,"div",23)(90,"label",6),g._UZ(91,"system-label",46),g.qZA(),g.TgZ(92,"system-input-module-field",47),g.NdJ("ngModelChange",(function(e){return t.ftsconfiguration.moduleFtsSettings.geolat=e})),g.qZA()(),g.TgZ(93,"div",23)(94,"label",6),g._UZ(95,"system-label",48),g.qZA(),g.TgZ(96,"system-input-module-field",47),g.NdJ("ngModelChange",(function(e){return t.ftsconfiguration.moduleFtsSettings.geolng=e})),g.qZA()()()(),g.TgZ(97,"fieldset",1)(98,"legend",2),g._UZ(99,"system-label",49),g.qZA(),g.TgZ(100,"div",4)(101,"div",37)(102,"div",50)(103,"system-checkbox",19),g.NdJ("ngModelChange",(function(e){return t.ftsconfiguration.moduleFtsSettings.activitiessearch=e})),g._UZ(104,"system-label",51),g.qZA()(),g.TgZ(105,"div",52)(106,"label",6),g._UZ(107,"system-label",39),g.qZA(),g.TgZ(108,"system-input-module-filter",40),g.NdJ("ngModelChange",(function(e){return t.ftsconfiguration.moduleFtsSettings.activitiesfilter=e})),g.qZA()()(),g.TgZ(109,"div",37)(110,"div",50)(111,"system-checkbox",19),g.NdJ("ngModelChange",(function(e){return t.ftsconfiguration.moduleFtsSettings.historysearch=e})),g._UZ(112,"system-label",53),g.qZA()(),g.TgZ(113,"div",52)(114,"label",6),g._UZ(115,"system-label",39),g.qZA(),g.TgZ(116,"system-input-module-filter",40),g.NdJ("ngModelChange",(function(e){return t.ftsconfiguration.moduleFtsSettings.historyfilter=e})),g.qZA()()(),g.TgZ(117,"div",37)(118,"div",50)(119,"system-checkbox",19),g.NdJ("ngModelChange",(function(e){return t.ftsconfiguration.moduleFtsSettings.assistantsearch=e})),g._UZ(120,"system-label",54),g.qZA()(),g.TgZ(121,"div",52)(122,"label",6),g._UZ(123,"system-label",39),g.qZA(),g.TgZ(124,"system-input-module-filter",40),g.NdJ("ngModelChange",(function(e){return t.ftsconfiguration.moduleFtsSettings.assistantfilter=e})),g.qZA()()(),g.TgZ(125,"div",37)(126,"div",50)(127,"system-checkbox",19),g.NdJ("ngModelChange",(function(e){return t.ftsconfiguration.moduleFtsSettings.calendarsearch=e})),g._UZ(128,"system-label",55),g.qZA()(),g.TgZ(129,"div",52)(130,"label",6),g._UZ(131,"system-label",39),g.qZA(),g.TgZ(132,"system-input-module-filter",40),g.NdJ("ngModelChange",(function(e){return t.ftsconfiguration.moduleFtsSettings.calendarfilter=e})),g.qZA()()(),g.TgZ(133,"div",37)(134,"div",50)(135,"system-checkbox",19),g.NdJ("ngModelChange",(function(e){return t.ftsconfiguration.moduleFtsSettings.timelinesearch=e})),g._UZ(136,"system-label",56),g.qZA()()()()()()),2&e&&(g.xp6(9),g.Q6J("ngModel",t.ftsconfiguration.moduleFtsSettings.index_priority),g.xp6(6),g.Q6J("ngModel",t.ftsconfiguration.moduleFtsSettings.multimatch_type),g.xp6(14),g.Q6J("ngModel",t.ftsconfiguration.moduleFtsSettings.waitfor),g.xp6(12),g.Q6J("ngModel",t.ftsconfiguration.moduleFtsSettings.operator),g.xp6(8),g.Q6J("helpText",t.language.getLabel("HLP_FTS_SEARCHANALYZER")+"\n"+t.language.getLabel("HLP_FTS_ANALYZER_STANDARD")+"\n"+t.language.getLabel("HLP_FTS_ANALYZER_NGRAM")+"\n"+t.language.getLabel("HLP_FTS_ANALYZER_HTML")+"\n"+t.language.getLabel("HLP_FTS_ANALYZER_EDGENGRAM")+"\n"+t.language.getLabel("HLP_FTS_ANALYZER_EMAIL")),g.xp6(3),g.Q6J("ngModel",t.ftsconfiguration.moduleFtsSettings.search_analyzer),g.xp6(3),g.Q6J("ngForOf",t.ftsconfiguration.analyzers),g.xp6(2),g.Q6J("ngModel",t.ftsconfiguration.moduleFtsSettings.globalsearch),g.xp6(2),g.Q6J("ngModel",t.ftsconfiguration.moduleFtsSettings.emailsearch),g.xp6(2),g.Q6J("ngModel",t.ftsconfiguration.moduleFtsSettings.phonesearch),g.xp6(10),g.Q6J("ngModel",t.ftsconfiguration.moduleFtsSettings.duplicatefilter),g.xp6(4),g.Q6J("helpText",t.language.getLabel("HLP_FTS_GLOBALFILTER")),g.xp6(6),g.Q6J("ngModel",t.ftsconfiguration.moduleFtsSettings.globalfilter),g.xp6(5),g.Q6J("ngModel",t.ftsconfiguration.moduleFtsSettings.geosearch),g.xp6(6),g.Q6J("disabled",!t.ftsconfiguration.moduleFtsSettings.geosearch)("ngModel",t.ftsconfiguration.moduleFtsSettings.geolat)("module",t.ftsconfiguration.module),g.xp6(4),g.Q6J("disabled",!t.ftsconfiguration.moduleFtsSettings.geosearch)("ngModel",t.ftsconfiguration.moduleFtsSettings.geolng)("module",t.ftsconfiguration.module),g.xp6(7),g.Q6J("ngModel",t.ftsconfiguration.moduleFtsSettings.activitiessearch),g.xp6(5),g.Q6J("ngModel",t.ftsconfiguration.moduleFtsSettings.activitiesfilter),g.xp6(3),g.Q6J("ngModel",t.ftsconfiguration.moduleFtsSettings.historysearch),g.xp6(5),g.Q6J("ngModel",t.ftsconfiguration.moduleFtsSettings.historyfilter),g.xp6(3),g.Q6J("ngModel",t.ftsconfiguration.moduleFtsSettings.assistantsearch),g.xp6(5),g.Q6J("ngModel",t.ftsconfiguration.moduleFtsSettings.assistantfilter),g.xp6(3),g.Q6J("ngModel",t.ftsconfiguration.moduleFtsSettings.calendarsearch),g.xp6(5),g.Q6J("ngModel",t.ftsconfiguration.moduleFtsSettings.calendarfilter),g.xp6(3),g.Q6J("ngModel",t.ftsconfiguration.moduleFtsSettings.timelinesearch))},dependencies:[n.sg,l.YN,l.Kr,l.Fj,l.EJ,l.JJ,l.On,H.U,st.l,it.s,M._,Ge.h,A.H],encapsulation:2})),AdministrationFTSManagerDetails})();const ot=["administration-ftsmanager",""];function at(e,t){if(1&e&&(g.TgZ(0,"option",19),g._uU(1),g.qZA()),2&e){const e=t.$implicit;g.Q6J("value",e),g.xp6(1),g.Oqu(e)}}function dt(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",9)(1,"button",12),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw();return g.KtG(t.save())})),g._UZ(2,"system-label",20),g.qZA(),g.TgZ(3,"button",12),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw();return g.KtG(t.resetModule())})),g._UZ(4,"system-label",21),g.qZA(),g.TgZ(5,"button",12),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw();return g.KtG(t.indexModule())})),g._UZ(6,"system-label",22),g.qZA()()}if(2&e){const e=g.oxw();g.xp6(1),g.Q6J("disabled",!e.module),g.xp6(2),g.Q6J("disabled",!e.module),g.xp6(2),g.Q6J("disabled",!e.module)}}function rt(e,t){1&e&&g._UZ(0,"administration-ftsmanager-fields")}function ct(e,t){1&e&&g._UZ(0,"administration-ftsmanager-details")}const gt=function(e){return{"slds-active":e}};function ut(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div")(1,"ul",23)(2,"li",24),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw();return g.KtG(t.setActiveTab("fields"))})),g.TgZ(3,"a",25),g._UZ(4,"system-label",26),g.qZA()(),g.TgZ(5,"li",24),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw();return g.KtG(t.setActiveTab("details"))})),g.TgZ(6,"a",25),g._UZ(7,"system-label",27),g.qZA()()(),g.YNc(8,rt,1,0,"administration-ftsmanager-fields",28),g.YNc(9,ct,1,0,"administration-ftsmanager-details",28),g.qZA()}if(2&e){const e=g.oxw();g.xp6(2),g.Q6J("ngClass",g.VKq(4,gt,"fields"===e.activeTab)),g.xp6(3),g.Q6J("ngClass",g.VKq(6,gt,"details"===e.activeTab)),g.xp6(3),g.Q6J("ngIf","fields"===e.activeTab),g.xp6(1),g.Q6J("ngIf","details"===e.activeTab)}}function mt(e,t){1&e&&(g.TgZ(0,"div",29),g._UZ(1,"system-label",30),g.qZA())}let ht=(()=>{var e;class AdministrationFTSManager{constructor(e,t,s,n,l){(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"ftsconfiguration",void 0),(0,i.Z)(this,"injector",void 0),(0,i.Z)(this,"activeTab","fields"),(0,i.Z)(this,"selected_module",void 0),this.metadata=e,this.language=t,this.modal=s,this.ftsconfiguration=n,this.injector=l}get modules(){return this.ftsconfiguration.modules.sort()}get module(){return this.ftsconfiguration.module}set module(e){this.ftsconfiguration.setModule(e)}add(){this.modal.openModal("AdministrationFTSManagerModuleAdd",!0,this.injector).subscribe((e=>{e.instance.module$.subscribe((e=>{e&&(this.module=e)}))}))}delete(){this.modal.confirmDeleteRecord().subscribe((e=>{e&&(this.ftsconfiguration.deleteModule(this.module),this.module="")}))}setActiveTab(e){this.activeTab=e}save(){this.ftsconfiguration.save()}indexModule(){this.modal.openModal("AdministrationFtsManagerIndexModal").subscribe((e=>{e.instance.response.subscribe((e=>{e&&this.ftsconfiguration.executeAction("bulk",e)}))}))}resetModule(){this.ftsconfiguration.executeAction("reset")}}return e=AdministrationFTSManager,(0,i.Z)(AdministrationFTSManager,"ɵfac",(function(t){return new(t||e)(g.Y36(f.Pu),g.Y36(p.d),g.Y36(Se.o),g.Y36(we),g.Y36(g.zs3))})),(0,i.Z)(AdministrationFTSManager,"ɵcmp",g.Xpm({type:e,selectors:[["","administration-ftsmanager",""]],features:[g._Bn([we])],attrs:ot,decls:20,vars:7,consts:[[1,"slds-grid","slds-form--inline","slds-p-around--small","slds-border--bottom"],[1,"slds-form-element"],[1,"slds-form-element__label"],["label","LBL_MODULE"],[1,"slds-form-element__control"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","disabled","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],["role","group",1,"slds-button-group"],["type","button",1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_ADD"],["type","button",1,"slds-button","slds-button--neutral",3,"disabled","click"],["label","LBL_DELETE"],[1,"slds-form-element","slds-col--bump-left"],["class","slds-button-group","role","group",4,"ngIf"],[1,"slds-tabs--default","slds-p-top--xx-small"],[4,"ngIf","ngIfElse"],["selectmodule",""],[3,"value"],["label","LBL_SAVE"],["label","LBL_RESET"],["label","LBL_INDEX"],["role","tablist",1,"slds-tabs--default__nav"],["role","presentation",1,"slds-tabs--default__item","slds-text-title--caps",3,"ngClass","click"],["href","javascript:void(0);","role","tab","aria-selected","false",1,"slds-tabs--default__link"],["label","LBL_FIELDS"],["label","LBL_INDEX_PARAMETERS"],[4,"ngIf"],["system-to-bottom","",1,"slds-p-around--small","slds-align--absolute-center"],["label","LBL_SELECT_A_MODULE"]],template:function(e,t){if(1&e&&(g.TgZ(0,"div",0)(1,"div",1)(2,"label",2),g._UZ(3,"system-label",3),g.qZA(),g.TgZ(4,"div",4)(5,"div",5)(6,"select",6),g.NdJ("ngModelChange",(function(e){return t.module=e})),g._UZ(7,"option",7),g.YNc(8,at,2,2,"option",8),g.qZA()()()(),g.TgZ(9,"div",9)(10,"button",10),g.NdJ("click",(function(){return t.add()})),g._UZ(11,"system-label",11),g.qZA(),g.TgZ(12,"button",12),g.NdJ("click",(function(){return t.delete()})),g._UZ(13,"system-label",13),g.qZA()(),g.TgZ(14,"div",14),g.YNc(15,dt,7,3,"div",15),g.qZA()(),g.TgZ(16,"div",16),g.YNc(17,ut,10,8,"div",17),g.YNc(18,mt,2,0,"ng-template",null,18,g.W1O),g.qZA()),2&e){const e=g.MAs(19);g.xp6(6),g.Q6J("ngModel",t.module)("disabled",0==t.modules.length),g.xp6(2),g.Q6J("ngForOf",t.modules),g.xp6(4),g.Q6J("disabled",!t.module),g.xp6(3),g.Q6J("ngIf",!t.ftsconfiguration.indexing),g.xp6(2),g.Q6J("ngIf",t.module)("ngIfElse",e)}},dependencies:[n.mk,n.sg,n.O5,l.YN,l.Kr,l.EJ,l.JJ,l.On,M._,A.H,tt,lt],encapsulation:2})),AdministrationFTSManager})();var pt=s(9621),bt=s(3499),ft=s(5767),Zt=s(1916);function _t(e,t){if(1&e&&(g.TgZ(0,"option",13),g._uU(1),g.qZA()),2&e){const e=t.$implicit,s=g.oxw();g.Q6J("value",e),g.xp6(1),g.AsE("",e," (",s.language.getModuleName(e),")")}}let vt=(()=>{var e;class AdministrationFTSManagerModuleAdd{constructor(e,t,s){(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"ftsconfiguration",void 0),(0,i.Z)(this,"self",void 0),(0,i.Z)(this,"modules",[]),(0,i.Z)(this,"module",""),(0,i.Z)(this,"module$",new g.vpe),this.metadata=e,this.language=t,this.ftsconfiguration=s}ngOnInit(){let e=this.ftsconfiguration.modules,t=this.metadata.getModules();for(let s of t)-1==e.indexOf(s)&&this.modules.push(s);this.modules.sort()}add(){this.module$.emit(this.module),this.self.destroy()}close(){this.module$.emit(!1),this.self.destroy()}}return e=AdministrationFTSManagerModuleAdd,(0,i.Z)(AdministrationFTSManagerModuleAdd,"ɵfac",(function(t){return new(t||e)(g.Y36(f.Pu),g.Y36(p.d),g.Y36(we))})),(0,i.Z)(AdministrationFTSManagerModuleAdd,"ɵcmp",g.Xpm({type:e,selectors:[["ng-component"]],decls:16,vars:2,consts:[[3,"close"],["label","LBL_ADD_MODULE"],[1,"slds-form-element"],[1,"slds-form-element__label"],["label","LBL_MODULE"],[1,"slds-form-element__control"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_ADD"],[3,"value"]],template:function(e,t){1&e&&(g.TgZ(0,"system-modal")(1,"system-modal-header",0),g.NdJ("close",(function(){return t.close()})),g._UZ(2,"system-label",1),g.qZA(),g.TgZ(3,"system-modal-content")(4,"div",2)(5,"label",3),g._UZ(6,"system-label",4),g.qZA(),g.TgZ(7,"div",5)(8,"div",6)(9,"select",7),g.NdJ("ngModelChange",(function(e){return t.module=e})),g.YNc(10,_t,2,3,"option",8),g.qZA()()()()(),g.TgZ(11,"system-modal-footer")(12,"button",9),g.NdJ("click",(function(){return t.close()})),g._UZ(13,"system-label",10),g.qZA(),g.TgZ(14,"button",11),g.NdJ("click",(function(){return t.add()})),g._UZ(15,"system-label",12),g.qZA()()()),2&e&&(g.xp6(9),g.Q6J("ngModel",t.module),g.xp6(1),g.Q6J("ngForOf",t.modules))},dependencies:[n.sg,l.YN,l.Kr,l.EJ,l.JJ,l.On,M._,pt.j,bt.x,ft.p,Zt.y],encapsulation:2})),AdministrationFTSManagerModuleAdd})();var At=s(4947);function yt(e,t){if(1&e&&(g.TgZ(0,"tr",25)(1,"td",26),g._UZ(2,"system-utility-icon",27),g.qZA(),g.TgZ(3,"td",28)(4,"div",15),g._uU(5),g.qZA()(),g.TgZ(6,"td")(7,"div",15),g._UZ(8,"system-label",29),g.qZA()()()),2&e){const e=t.$implicit;g.Q6J("cdkDragData",e),g.xp6(5),g.Oqu(e.name),g.xp6(3),g.Q6J("label",e.label)}}const xt=function(e){return[e]};let Tt=(()=>{var e;class AdministrationFTSManagerFieldsAdd{constructor(e,t,s,n){(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"ftsconfiguration",void 0),(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"links",[]),(0,i.Z)(this,"self",{}),(0,i.Z)(this,"fields",[]),(0,i.Z)(this,"dragPlaceHolderNode",void 0),(0,i.Z)(this,"filterKey",void 0),(0,i.Z)(this,"nodefields",[]),(0,i.Z)(this,"path",[]),(0,i.Z)(this,"nodePath",""),this.metadata=e,this.language=t,this.ftsconfiguration=s,this.backend=n}get filteredNodeFields(){return this.filterKey?this.nodefields.filter((e=>e.name.toLowerCase().includes(this.filterKey.toLowerCase())||e.label&&e.label.toLowerCase().includes(this.filterKey.toLowerCase()))):this.nodefields}get fieldsDropList(){return this.ftsconfiguration.fieldsDropList||""}close(){this.self.destroy()}itemSelected(e){window.setTimeout((()=>this.nodePath=e.path)),this.getModuleFields(e.module)}getModuleFields(e){this.nodefields=[],this.backend.getRequest("dictionary/browser/"+e+"/fields").subscribe((e=>{this.nodefields=e}))}dropExited(e){let t=document.createElement("tr"),s=document.createElement("td");s.colSpan=10,s.innerHTML="&nbsp;",s.style.background="#fff",t.appendChild(s),this.dragPlaceHolderNode=t;let i=e.container.data.findIndex((t=>t.id==e.item.data.id));i>-1&&e.container.element.nativeElement.insertBefore(t,e.container.element.nativeElement.children[i])}dropEntered(e){this.removePlaceHolderElement(e.container.element.nativeElement)}removePlaceHolderElement(e){this.dragPlaceHolderNode&&(e.removeChild(this.dragPlaceHolderNode),this.dragPlaceHolderNode=void 0)}trackByFn(e,t){return t.id}}return e=AdministrationFTSManagerFieldsAdd,(0,i.Z)(AdministrationFTSManagerFieldsAdd,"ɵfac",(function(t){return new(t||e)(g.Y36(f.Pu),g.Y36(p.d),g.Y36(we),g.Y36(m.y))})),(0,i.Z)(AdministrationFTSManagerFieldsAdd,"ɵcmp",g.Xpm({type:e,selectors:[["administration-ftsmanager-fields-add"]],decls:30,vars:13,consts:[["size","large"],[3,"close"],["margin","none",3,"grow"],[1,"slds-grid","administration-fts-manager-field-add-modal",2,"height","100%"],[1,"slds-size--1-of-3","slds-grid--vertical",2,"height","100%"],[1,"slds-scrollable--y","slds-border--bottom",2,"height","50%"],[3,"module","itemSelected"],[1,"slds-scrollable",2,"height","50%"],["role","none",1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon_left"],["icon","search","addclasses","slds-input__icon slds-input__icon--left"],["type","search",1,"slds-input","slds-combobox__input",3,"placeholder","ngModel","ngModelChange"],[1,"slds-table","slds-table_cell-buffer","slds-table_bordered"],[1,"slds-line-height_reset"],[1,"slds-cell-shrink"],["scope","col"],[1,"slds-truncate"],["label","LBL_FIELD"],["label","LBL_NAME"],["cdkDropList","","cdkDropListSortingDisabled","",3,"cdkDropListData","cdkDropListConnectedTo","cdkDropListExited","cdkDropListEntered"],["dragList","cdkDropList"],["cdkDrag","","cdkDragBoundary",".administration-fts-manager-field-add-modal","class","slds-hint-parent slds-drag--preview",3,"cdkDragData",4,"ngFor","ngForOf","ngForTrackBy"],[1,"slds-size--2-of-3",2,"height","100%"],[1,"slds-scrollable--y",2,"display","block","height","100%",3,"dragPlaceHolderNode","nodePath","dragList"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_OK"],["cdkDrag","","cdkDragBoundary",".administration-fts-manager-field-add-modal",1,"slds-hint-parent","slds-drag--preview",3,"cdkDragData"],[1,"slds-p-around--none","slds-cell-shrink"],["cdkDragHandle","","icon","drag_and_drop","size","x-small",1,"slds-p-horizontal--x-small",2,"cursor","move"],["data-label","Account Name"],[3,"label"]],template:function(e,t){if(1&e&&(g.TgZ(0,"system-modal",0)(1,"system-modal-header",1),g.NdJ("close",(function(){return t.close()})),g._uU(2,"Add Field"),g.qZA(),g.TgZ(3,"system-modal-content",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"system-module-tree",6),g.NdJ("itemSelected",(function(e){return t.itemSelected(e)})),g.qZA()(),g.TgZ(8,"div",7)(9,"div",8),g._UZ(10,"system-utility-icon",9),g.TgZ(11,"input",10),g.NdJ("ngModelChange",(function(e){return t.filterKey=e})),g.qZA()(),g.TgZ(12,"table",11)(13,"thead")(14,"tr",12),g._UZ(15,"th",13),g.TgZ(16,"th",14)(17,"div",15),g._UZ(18,"system-label",16),g.qZA()(),g.TgZ(19,"th",14)(20,"div",15),g._UZ(21,"system-label",17),g.qZA()()()(),g.TgZ(22,"tbody",18,19),g.NdJ("cdkDropListExited",(function(e){return t.dropExited(e)}))("cdkDropListEntered",(function(e){return t.dropEntered(e)})),g.YNc(24,yt,9,3,"tr",20),g.qZA()()()(),g.TgZ(25,"div",21),g._UZ(26,"administration-ftsmanager-fields-list",22),g.qZA()()(),g.TgZ(27,"system-modal-footer")(28,"button",23),g.NdJ("click",(function(){return t.close()})),g._UZ(29,"system-label",24),g.qZA()()()),2&e){const e=g.MAs(23);g.xp6(3),g.Q6J("grow",!0),g.xp6(4),g.Q6J("module",t.ftsconfiguration.module),g.xp6(4),g.Q6J("placeholder",t.language.getLabel("LBL_SEARCH"))("ngModel",t.filterKey),g.xp6(11),g.Q6J("cdkDropListData",t.nodefields)("cdkDropListConnectedTo",g.VKq(11,xt,t.fieldsDropList)),g.xp6(2),g.Q6J("ngForOf",t.filteredNodeFields)("ngForTrackBy",t.trackByFn),g.xp6(2),g.Q6J("dragPlaceHolderNode",t.dragPlaceHolderNode)("nodePath",t.nodePath)("dragList",e)}},dependencies:[n.sg,l.Fj,l.JJ,l.On,M._,pt.j,bt.x,ft.p,Zt.y,J.r,At.w,o.Wj,o.Zt,o.Bh,je],encapsulation:2})),AdministrationFTSManagerFieldsAdd})();function Lt(e,t){if(1&e&&(g.TgZ(0,"tr")(1,"td")(2,"div",4),g._uU(3),g.qZA()(),g.TgZ(4,"td")(5,"div",4),g._uU(6),g.qZA()(),g.TgZ(7,"td")(8,"div",4),g._uU(9),g.qZA()(),g.TgZ(10,"td")(11,"div",4),g._uU(12),g.qZA()(),g.TgZ(13,"td")(14,"div",4),g._uU(15),g.qZA()()()),2&e){const e=t.$implicit;g.xp6(3),g.Oqu(e.name),g.xp6(3),g.Oqu(e.size),g.xp6(3),g.Oqu(e.documents),g.xp6(3),g.Oqu(e.stored),g.xp6(3),g.Oqu(e.unindexed)}}let Mt=(()=>{var e;class AdministrationFTSStats{constructor(e,t,s){(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"stats",{}),(0,i.Z)(this,"indices",[]),this.metadata=e,this.language=t,this.backend=s,this.backend.getRequest("admin/elastic/stats").subscribe((e=>{this.stats=e;for(let t in e.indices)this.indices.push({name:t,size:e.indices[t].total.store.size_in_bytes,documents:e.indices[t].total.docs.count,stored:e.indexed[t].count,unindexed:e.indexed[t].unindexed});this.indices.sort(((e,t)=>e.name>t.name?1:-1))}))}}return e=AdministrationFTSStats,(0,i.Z)(AdministrationFTSStats,"ɵfac",(function(t){return new(t||e)(g.Y36(f.Pu),g.Y36(p.d),g.Y36(m.y))})),(0,i.Z)(AdministrationFTSStats,"ɵcmp",g.Xpm({type:e,selectors:[["ng-component"]],decls:22,vars:1,consts:[[1,"slds-text-heading_medium","slds-p-around--small"],[1,"slds-table","slds-table_bordered","slds-table_cell-buffer"],[1,"slds-text-title_caps"],["scope","col"],[1,"slds-truncate"],[4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(g.TgZ(0,"h2",0),g._uU(1,"FTS Stats"),g.qZA(),g.TgZ(2,"table",1)(3,"thead")(4,"tr",2)(5,"th",3)(6,"div",4),g._uU(7,"Name"),g.qZA()(),g.TgZ(8,"th",3)(9,"div",4),g._uU(10,"Size"),g.qZA()(),g.TgZ(11,"th",3)(12,"div",4),g._uU(13,"Documents"),g.qZA()(),g.TgZ(14,"th",3)(15,"div",4),g._uU(16,"stored"),g.qZA()(),g.TgZ(17,"th",3)(18,"div",4),g._uU(19,"unindexed"),g.qZA()()()(),g.TgZ(20,"tbody"),g.YNc(21,Lt,16,5,"tr",5),g.qZA()()),2&e&&(g.xp6(21),g.Q6J("ngForOf",t.indices))},dependencies:[n.sg],encapsulation:2})),AdministrationFTSStats})();var Jt=s(9901);let qt=(()=>{var e;class AdministrationFtsManagerIndexModal{constructor(e){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"response",void 0),(0,i.Z)(this,"responseSubject",void 0),(0,i.Z)(this,"settings",{}),(0,i.Z)(this,"self",{}),this.language=e,this.responseSubject=new Je.x,this.response=this.responseSubject.asObservable(),this.settings.bulkAmount=-1}cancel(){this.responseSubject.next(!1),this.responseSubject.complete(),this.self.destroy()}start(){this.responseSubject.next(this.settings),this.responseSubject.complete(),this.self.destroy()}}return e=AdministrationFtsManagerIndexModal,(0,i.Z)(AdministrationFtsManagerIndexModal,"ɵfac",(function(t){return new(t||e)(g.Y36(p.d))})),(0,i.Z)(AdministrationFtsManagerIndexModal,"ɵcmp",g.Xpm({type:e,selectors:[["ng-component"]],decls:27,vars:5,consts:[[3,"close"],["label","LBL_INDEX"],[1,"slds-p-bottom--xx-small"],["label","LBL_RESET_INDEX_DATE","length","long"],[1,"slds-m-bottom--medium"],[3,"ngModel","ngModelChange"],["label","LBL_RESET_INDEX_DATE"],["label","LBL_BULK_INDEX"],["name","ftsmanagerbulk","value","0",2,"display","block",3,"ngModel","ngModelChange"],["label","LBL_NONE"],["name","ftsmanagerbulk","value","100",2,"display","block",3,"ngModel","ngModelChange"],["label","LBL_RECORDS"],["name","ftsmanagerbulk","value","1000",2,"display","block",3,"ngModel","ngModelChange"],["name","ftsmanagerbulk","value","-1",2,"display","block",3,"ngModel","ngModelChange"],["label","LBL_SYSTEM_DEFAULT"],["type","button",1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],["type","button",1,"slds-button","slds-button--brand",3,"click"],["label","LBL_START"]],template:function(e,t){1&e&&(g.TgZ(0,"system-modal")(1,"system-modal-header",0),g.NdJ("close",(function(){return t.cancel()})),g._UZ(2,"system-label",1),g.qZA(),g.TgZ(3,"system-modal-content")(4,"div",2),g._UZ(5,"system-label",3),g.qZA(),g.TgZ(6,"div",4)(7,"system-checkbox",5),g.NdJ("ngModelChange",(function(e){return t.settings.resetIndexDates=e})),g._UZ(8,"system-label",6),g.qZA()(),g.TgZ(9,"div",2),g._UZ(10,"system-label",7),g.qZA(),g.TgZ(11,"div")(12,"system-input-radio",8),g.NdJ("ngModelChange",(function(){return t.settings.bulkAmount=0})),g._UZ(13,"system-label",9),g.qZA(),g.TgZ(14,"system-input-radio",10),g.NdJ("ngModelChange",(function(){return t.settings.bulkAmount=100})),g._uU(15," 100 "),g._UZ(16,"system-label",11),g.qZA(),g.TgZ(17,"system-input-radio",12),g.NdJ("ngModelChange",(function(){return t.settings.bulkAmount=1e3})),g._uU(18," 1000 "),g._UZ(19,"system-label",11),g.qZA(),g.TgZ(20,"system-input-radio",13),g.NdJ("ngModelChange",(function(){return t.settings.bulkAmount=-1})),g._UZ(21,"system-label",14),g.qZA()()(),g.TgZ(22,"system-modal-footer")(23,"button",15),g.NdJ("click",(function(){return t.cancel()})),g._UZ(24,"system-label",16),g.qZA(),g.TgZ(25,"button",17),g.NdJ("click",(function(){return t.start()})),g._UZ(26,"system-label",18),g.qZA()()()),2&e&&(g.xp6(7),g.Q6J("ngModel",t.settings.resetIndexDates),g.xp6(5),g.Q6J("ngModel",t.settings.bulkAmount),g.xp6(2),g.Q6J("ngModel",t.settings.bulkAmount),g.xp6(3),g.Q6J("ngModel",t.settings.bulkAmount),g.xp6(3),g.Q6J("ngModel",t.settings.bulkAmount))},dependencies:[l.JJ,l.On,H.U,Jt.A,M._,pt.j,bt.x,ft.p,Zt.y],encapsulation:2})),AdministrationFtsManagerIndexModal})();const Et=["administration-card-item",""];let Ut=(()=>{var e;class AdministrationHomeScreenCardItem{constructor(e,t,s,n,l){(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"administration",void 0),(0,i.Z)(this,"navigationtab",void 0),(0,i.Z)(this,"adminNavigationItem",{}),(0,i.Z)(this,"adminNavigationBlock",""),this.router=e,this.metadata=t,this.language=s,this.administration=n,this.navigationtab=l}openContent(){let e=this.administration.getItemLabel(this.adminNavigationItem.id);this.navigationtab.setTabInfo({displayname:this.language.getLabel(e||"LBL_ADMINISTRATION"),displayicon:"settings"}),this.administration.navigateto(this.adminNavigationItem.id)}get icon(){return this.adminNavigationItem.icon?this.adminNavigationItem.icon:"empty"}}return e=AdministrationHomeScreenCardItem,(0,i.Z)(AdministrationHomeScreenCardItem,"ɵfac",(function(t){return new(t||e)(g.Y36(B.F0),g.Y36(f.Pu),g.Y36(p.d),g.Y36(b),g.Y36(v.d))})),(0,i.Z)(AdministrationHomeScreenCardItem,"ɵcmp",g.Xpm({type:e,selectors:[["","administration-card-item",""]],inputs:{adminNavigationItem:"adminNavigationItem",adminNavigationBlock:"adminNavigationBlock"},attrs:Et,decls:11,vars:3,consts:[["href","javascript:void(0);",1,"slds-text-link_reset",3,"click"],[1,"slds-tile","slds-media","slds-card__tile","slds-hint-parent"],[1,"slds-media__figure"],["size","large",3,"icon"],[1,"slds-media__body"],[1,"slds-grid","slds-grid_align-spread"],[1,"slds-tile__title","slds-text-heading_small"],[3,"label"],[1,"slds-text-body_small"],["length","long",3,"label"]],template:function(e,t){1&e&&(g.TgZ(0,"a",0),g.NdJ("click",(function(){return t.openContent()})),g.TgZ(1,"article",1)(2,"div",2),g._UZ(3,"system-icon",3),g.qZA(),g.TgZ(4,"div",4)(5,"div",5)(6,"h3",6)(7,"p"),g._UZ(8,"system-label",7),g.qZA(),g.TgZ(9,"p",8),g._UZ(10,"system-label",9),g.qZA()()()()()()),2&e&&(g.xp6(3),g.Q6J("icon",t.icon),g.xp6(5),g.Q6J("label",t.adminNavigationItem.admin_label),g.xp6(2),g.Q6J("label",t.adminNavigationItem.admin_label))},dependencies:[L.f,M._],encapsulation:2})),AdministrationHomeScreenCardItem})();function Ct(e,t){if(1&e&&g._UZ(0,"li",13),2&e){const e=t.$implicit;g.Q6J("adminNavigationItem",e)}}let kt=(()=>{var e;class AdministrationHomeScreenCard{constructor(e,t,s,n){(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"administration",void 0),(0,i.Z)(this,"adminNavigationBlock",void 0),this.router=e,this.metadata=t,this.language=s,this.administration=n}trackbyfn(e,t){return t.id}}return e=AdministrationHomeScreenCard,(0,i.Z)(AdministrationHomeScreenCard,"ɵfac",(function(t){return new(t||e)(g.Y36(B.F0),g.Y36(f.Pu),g.Y36(p.d),g.Y36(b))})),(0,i.Z)(AdministrationHomeScreenCard,"ɵcmp",g.Xpm({type:e,selectors:[["administration-card"]],inputs:{adminNavigationBlock:"adminNavigationBlock"},decls:13,vars:4,consts:[[1,"slds-p-around--medium"],[1,"slds-card","slds-p-around--small"],[1,"slds-card__header","slds-grid"],[1,"slds-media","slds-media_center","slds-has-flexi-truncate"],[1,"slds-media__body"],[1,"slds-card__header-title","slds-text-heading_medium","slds-grid--vertical"],[1,"slds-card__header-link","slds-truncate"],[3,"label"],[1,"slds-text-body_small","slds-p-top_small"],["length","long",3,"label"],[1,"slds-card__body","slds-card__body_inner"],[1,"slds-grid","slds-wrap","slds-grid_pull-padded"],["class","slds-p-horizontal_small slds-size_1-of-1 slds-medium-size_1-of-3","administration-card-item","",3,"adminNavigationItem",4,"ngFor","ngForOf","ngForTrackBy"],["administration-card-item","",1,"slds-p-horizontal_small","slds-size_1-of-1","slds-medium-size_1-of-3",3,"adminNavigationItem"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0)(1,"article",1)(2,"div",2)(3,"header",3)(4,"div",4)(5,"h2",5)(6,"p",6),g._UZ(7,"system-label",7),g.qZA(),g.TgZ(8,"p",8),g._UZ(9,"system-label",9),g.qZA()()()()(),g.TgZ(10,"div",10)(11,"ul",11),g.YNc(12,Ct,1,1,"li",12),g.qZA()()()()),2&e&&(g.xp6(7),g.Q6J("label",t.adminNavigationBlock.label),g.xp6(2),g.Q6J("label",t.adminNavigationBlock.label),g.xp6(3),g.Q6J("ngForOf",t.adminNavigationBlock.groupcomponents)("ngForTrackBy",t.trackbyfn))},dependencies:[n.sg,M._,Ut],encapsulation:2})),AdministrationHomeScreenCard})();function Nt(e,t){if(1&e&&g._UZ(0,"administration-card",1),2&e){const e=t.$implicit;g.Q6J("adminNavigationBlock",e)}}let St=(()=>{var e;class AdministrationHomeScreen{constructor(e,t,s,n){(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"administration",void 0),this.router=e,this.metadata=t,this.language=s,this.administration=n}trackbyfn(e,t){return t.id}}return e=AdministrationHomeScreen,(0,i.Z)(AdministrationHomeScreen,"ɵfac",(function(t){return new(t||e)(g.Y36(B.F0),g.Y36(f.Pu),g.Y36(p.d),g.Y36(b))})),(0,i.Z)(AdministrationHomeScreen,"ɵcmp",g.Xpm({type:e,selectors:[["ng-component"]],decls:1,vars:2,consts:[[3,"adminNavigationBlock",4,"ngFor","ngForOf","ngForTrackBy"],[3,"adminNavigationBlock"]],template:function(e,t){1&e&&g.YNc(0,Nt,1,1,"administration-card",0),2&e&&g.Q6J("ngForOf",t.administration.navigationGroups)("ngForTrackBy",t.trackbyfn)},dependencies:[n.sg,kt],encapsulation:2})),AdministrationHomeScreen})();var Ft=s(4664);function wt(e,t){if(1&e&&(g.ynx(0),g._UZ(1,"system-display-number",12),g._uU(2," / "),g._UZ(3,"system-display-number",12),g.BQk()),2&e){const e=g.oxw().$implicit,t=g.oxw(2);g.xp6(1),g.Q6J("number",t.ftsDocumentCount(e.name,"primaries")),g.xp6(2),g.Q6J("number",t.ftsDocumentCount(e.name,"total"))}}function It(e,t){if(1&e&&(g.ynx(0),g._uU(1),g.BQk()),2&e){const e=g.oxw().$implicit,t=g.oxw(2);g.xp6(1),g.AsE("",t.ftsIndexSize(e.name,"primaries")," / ",t.ftsIndexSize(e.name,"total"),"")}}function Ot(e,t){if(1&e&&(g.TgZ(0,"tr")(1,"td")(2,"div",10),g._uU(3),g.qZA()(),g.TgZ(4,"td")(5,"div",11),g._UZ(6,"system-display-number",12),g.qZA()(),g.TgZ(7,"td")(8,"div",10),g._uU(9),g.qZA()(),g.TgZ(10,"td")(11,"div",11),g.YNc(12,wt,4,2,"ng-container",21),g.qZA()(),g.TgZ(13,"td")(14,"div",10),g.YNc(15,It,2,2,"ng-container",21),g.qZA()()()),2&e){const e=t.$implicit,s=g.oxw(2);g.xp6(3),g.Oqu(e.name),g.xp6(3),g.Q6J("number",e.records),g.xp6(3),g.Oqu(s.humanReadableSize(e.size)),g.xp6(3),g.Q6J("ngIf",s.ftsDocumentCount(e.name,"primaries")),g.xp6(3),g.Q6J("ngIf",s.ftsIndexSize(e.name,"primaries"))}}function Rt(e,t){if(1&e){const e=g.EpF();g.ynx(0),g.TgZ(1,"div",2)(2,"h2",3),g._uU(3,"System and Storage Statistics Summary"),g.qZA(),g.TgZ(4,"button",4),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw();return g.KtG(t.refresh())})),g._UZ(5,"system-button-icon",5),g.qZA()(),g.TgZ(6,"table",6)(7,"thead")(8,"tr",7)(9,"th",8),g._uU(10," Object "),g.qZA(),g.TgZ(11,"th",9),g._uU(12," Records "),g.qZA(),g.TgZ(13,"th",8),g._uU(14," Size "),g.qZA()()(),g.TgZ(15,"tbody")(16,"tr")(17,"td")(18,"div",10),g._uU(19,"Database"),g.qZA()(),g.TgZ(20,"td")(21,"div",11),g._UZ(22,"system-display-number",12),g.qZA()(),g.TgZ(23,"td")(24,"div",10),g._uU(25),g.qZA()()(),g.TgZ(26,"tr")(27,"td")(28,"div",10),g._uU(29,"Elasticsearch"),g.qZA()(),g.TgZ(30,"td")(31,"div",11),g._UZ(32,"system-display-number",12),g._uU(33," / "),g._UZ(34,"system-display-number",12),g.qZA()(),g.TgZ(35,"td")(36,"div",10),g._uU(37),g.qZA()()(),g.TgZ(38,"tr")(39,"td")(40,"div",10),g._uU(41,"Uploadfiles"),g.qZA()(),g.TgZ(42,"td")(43,"div",11),g._UZ(44,"system-display-number",12),g.qZA()(),g.TgZ(45,"td")(46,"div",10),g._uU(47),g.qZA()()()(),g.TgZ(48,"tfoot")(49,"tr",13)(50,"th")(51,"div",10),g._uU(52,"total"),g.qZA()(),g.TgZ(53,"th"),g._UZ(54,"div",10),g.qZA(),g.TgZ(55,"th")(56,"div",10),g._uU(57),g.qZA()()()()(),g.TgZ(58,"h2",14),g._uU(59,"System and Storage Statistics Details"),g.qZA(),g.TgZ(60,"div",15)(61,"table",16)(62,"thead")(63,"tr",7)(64,"th",8)(65,"div",17),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw();return g.KtG(t.sortby("name",!1))})),g._uU(66,"Table"),g.qZA()(),g.TgZ(67,"th",8)(68,"div",18),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw();return g.KtG(t.sortby("records"))})),g._uU(69,"Records"),g.qZA()(),g.TgZ(70,"th",8)(71,"div",17),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw();return g.KtG(t.sortby("size"))})),g._uU(72,"Size"),g.qZA()(),g.TgZ(73,"th",8)(74,"div",19),g._uU(75,"indexed Records"),g.qZA()(),g.TgZ(76,"th",8)(77,"div",10),g._uU(78,"Index Size"),g.qZA()()()(),g.TgZ(79,"tbody"),g.YNc(80,Ot,16,5,"tr",20),g.qZA()()(),g.BQk()}if(2&e){const e=g.oxw();g.xp6(22),g.Q6J("number",e.totaldbrecords),g.xp6(3),g.Oqu(e.humanReadableSize(e.totaldbsize)),g.xp6(7),g.Q6J("number",e.totalelasticrecords("primaries")),g.xp6(2),g.Q6J("number",e.totalelasticrecords("total")),g.xp6(3),g.AsE("",e.humanReadableSize(e.totalelasticsize("primaries"))," / ",e.humanReadableSize(e.totalelasticsize("total")),""),g.xp6(7),g.Q6J("number",e.uploadcount),g.xp6(3),g.Oqu(e.humanReadableSize(e.uploadsize)),g.xp6(10),g.Oqu(e.humanReadableSize(e.totalsize)),g.xp6(23),g.Q6J("ngForOf",e.stats.database)}}function Dt(e,t){1&e&&(g.TgZ(0,"div",22),g._UZ(1,"system-spinner"),g.qZA())}let Qt=(()=>{var e;class AdministrationSystemStats{constructor(e,t,s,n){(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"helper",void 0),(0,i.Z)(this,"loaded",!1),(0,i.Z)(this,"stats",{}),(0,i.Z)(this,"totaldbrecords",0),(0,i.Z)(this,"totaldbsize",0),this.metadata=e,this.language=t,this.backend=s,this.helper=n,this.loadStats()}loadStats(){this.loaded=!1,this.backend.getRequest("configuration/systemstats").subscribe((e=>{this.stats=e,this.calculateTotalsDB(),this.loaded=!0}))}refresh(){this.loadStats()}totalelasticrecords(e){try{return this.stats.elastic._all[e].docs.count}catch(e){return 0}}totalelasticsize(e){try{return this.stats.elastic._all[e].store.size_in_bytes}catch(e){return 0}}get uploadcount(){try{return this.stats.uploadfiles.count}catch(e){return 0}}get uploadsize(){try{return this.stats.uploadfiles.size}catch(e){return 0}}get totalsize(){return this.totaldbsize+this.totalelasticsize("total")+this.uploadsize}sortby(e,t=!0){this.stats.database.sort(((s,i)=>s[e]>i[e]?t?-1:1:t?1:-1))}calculateTotalsDB(){this.totaldbrecords=0,this.totaldbsize=0;for(let e of this.stats.database)this.totaldbrecords+=parseInt(e.records,10),this.totaldbsize+=parseInt(e.size,10)}humanReadableSize(e){return this.helper.humanFileSize(e)}ftsDocumentCount(e,t){try{return this.stats.elastic.indices[this.stats.elastic._prefix+e][t].docs.count}catch(e){return""}}ftsIndexSize(e,t){try{return this.humanReadableSize(this.stats.elastic.indices[this.stats.elastic._prefix+e][t].store.size_in_bytes)}catch(e){return""}}}return e=AdministrationSystemStats,(0,i.Z)(AdministrationSystemStats,"ɵfac",(function(t){return new(t||e)(g.Y36(f.Pu),g.Y36(p.d),g.Y36(m.y),g.Y36(P._))})),(0,i.Z)(AdministrationSystemStats,"ɵcmp",g.Xpm({type:e,selectors:[["ng-component"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["loading",""],[1,"slds-grid","slds-grid_vertical-align-center","slds-grid--align-spread","slds-p-around--small"],[1,"slds-text-heading_medium"],[1,"slds-button","slds-button_icon","slds-button_icon-border-filled",3,"click"],["icon","refresh"],[1,"slds-table","slds-table_bordered","slds-table_cell-buffer","slds-m-bottom--medium"],[1,"slds-text-title_caps"],["scope","col"],["scope","col",1,"slds-text-align--right","slds-p-horizontal--xx-small"],[1,"slds-truncate"],[1,"slds-truncate","slds-text-align--right"],["system-display-number-nodigits","",3,"number"],[1,"slds-theme--shade","slds-text-title_caps"],[1,"slds-p-around--small"],["system-to-bottom","",1,"slds-border--top"],[1,"slds-table","slds-table_bordered","slds-table_cell-buffer","slds-table--header-fixed"],[1,"slds-truncate",3,"click"],[1,"slds-truncate","slds-p-horizontal--xx-small","slds-text-align--right",3,"click"],[1,"slds-truncate","slds-p-horizontal--xx-small","slds-text-align--right"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"slds-align--absolute-center","slds-height_full","slds-size--1-of-1"]],template:function(e,t){if(1&e&&(g.YNc(0,Rt,81,10,"ng-container",0),g.YNc(1,Dt,2,0,"ng-template",null,1,g.W1O)),2&e){const e=g.MAs(2);g.Q6J("ngIf",t.loaded)("ngIfElse",e)}},dependencies:[n.sg,n.O5,T.J,Ie.G,Ft.W,A.H],encapsulation:2})),AdministrationSystemStats})();function Bt(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"tr")(1,"td")(2,"div",13),g._uU(3),g.qZA()(),g.TgZ(4,"td")(5,"div",13),g._uU(6),g.qZA()(),g.TgZ(7,"td")(8,"div",13),g._uU(9),g.qZA()(),g.TgZ(10,"td")(11,"button",17),g.NdJ("click",(function(){const t=g.CHM(e).$implicit,s=g.oxw(2);return g.KtG(s.getKey(t.key))})),g._UZ(12,"system-button-icon",18),g.qZA(),g.TgZ(13,"button",17),g.NdJ("click",(function(){const t=g.CHM(e).$implicit,s=g.oxw(2);return g.KtG(s.deleteKey(t.key))})),g._UZ(14,"system-button-icon",19),g.qZA()()()}if(2&e){const e=t.$implicit;g.xp6(3),g.Oqu(e.key),g.xp6(3),g.Oqu(e.size),g.xp6(3),g.Oqu(e.date)}}function Yt(e,t){if(1&e){const e=g.EpF();g.ynx(0),g.TgZ(1,"div",2)(2,"h2",3),g._UZ(3,"system-label",4),g.qZA(),g.TgZ(4,"button",5),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw();return g.KtG(t.reset())})),g._UZ(5,"system-label",6),g.qZA(),g.TgZ(6,"button",7),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw();return g.KtG(t.refresh())})),g._UZ(7,"system-button-icon",8),g.qZA()(),g.TgZ(8,"div",9)(9,"table",10)(10,"thead")(11,"tr",11)(12,"th",12)(13,"div",13),g._uU(14,"Key"),g.qZA()(),g.TgZ(15,"th",12)(16,"div",14),g._uU(17,"size"),g.qZA()(),g.TgZ(18,"th",12)(19,"div",14),g._uU(20,"date"),g.qZA()(),g._UZ(21,"th",15),g.qZA()(),g.TgZ(22,"tbody"),g.YNc(23,Bt,15,3,"tr",16),g.qZA()()(),g.BQk()}if(2&e){const e=g.oxw();g.xp6(23),g.Q6J("ngForOf",e.stats)}}function zt(e,t){1&e&&(g.TgZ(0,"div",20),g._UZ(1,"system-spinner"),g.qZA())}let Gt=(()=>{var e;class AdministrationSystemCacheViewer{constructor(e,t,s,n,l){(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"toast",void 0),(0,i.Z)(this,"loaded",!1),(0,i.Z)(this,"stats",{}),(0,i.Z)(this,"totaldbrecords",0),(0,i.Z)(this,"totaldbsize",0),this.metadata=e,this.language=t,this.backend=s,this.modal=n,this.toast=l,this.loadStats()}loadStats(){this.loaded=!1,this.backend.getRequest("admin/spicecache/keys").subscribe((e=>{this.stats=e,this.loaded=!0}))}refresh(){this.loadStats()}reset(){this.modal.confirm("MSG_RESET_CACHE","MSG_RESET_CACHE").subscribe({next:e=>{if(e){let e=this.modal.await("LBL_LOADING");this.backend.deleteRequest("system/cache").subscribe((t=>{e.emit(!0),t?(this.toast.sendToast("LBL_CACHE_RESET","success"),this.stats=[]):this.toast.sendToast("LBL_ERROR","error")}))}}})}getKey(e){let t=this.modal.await("LBL_LOADING");this.backend.getRequest(`admin/spicecache/key/${e}`).subscribe({next:s=>{t.emit(!0),this.modal.openModal("AdministrationSystemCacheViewerDetails").subscribe({next:t=>{t.instance.cachedKey=e,t.instance.cachedData=s.content,t.instance.deleteitem.subscribe({next:t=>{t&&this.deleteKey(e)}})},error:()=>{t.emit(!0)}})}})}deleteKey(e){this.modal.confirm("MSG_DELETE_RECORD","MSG_DELETE_RECORD").subscribe({next:t=>{t&&this.backend.deleteRequest(`admin/spicecache/key/${e}`).subscribe({next:t=>{let s=this.stats.findIndex((t=>t.key==e));s>=0&&this.stats.splice(s,1)}})}})}}return e=AdministrationSystemCacheViewer,(0,i.Z)(AdministrationSystemCacheViewer,"ɵfac",(function(t){return new(t||e)(g.Y36(f.Pu),g.Y36(p.d),g.Y36(m.y),g.Y36(Se.o),g.Y36(Fe.A))})),(0,i.Z)(AdministrationSystemCacheViewer,"ɵcmp",g.Xpm({type:e,selectors:[["ng-component"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["loading",""],[1,"slds-grid","slds-grid_vertical-align-center","slds-grid--align-spread","slds-p-around--small"],[1,"slds-text-heading_medium","slds-col--bump-right"],["label","LBL_CACHE_VIEWER"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_RESET_CACHE"],[1,"slds-button","slds-button_icon","slds-button_icon-border-filled",3,"click"],["icon","refresh"],["system-to-bottom","",1,"slds-border--top"],[1,"slds-table","slds-table_bordered","slds-table_cell-buffer","slds-table--header-fixed"],[1,"slds-text-title_caps"],["scope","col"],[1,"slds-truncate"],[1,"slds-truncate","slds-p-horizontal--xx-small","slds-text-align--right"],["scope","col",2,"width","1rem"],[4,"ngFor","ngForOf"],[1,"slds-button","slds-button--icon",3,"click"],["icon","search"],["icon","delete"],[1,"slds-align--absolute-center","slds-height_full","slds-size--1-of-1"]],template:function(e,t){if(1&e&&(g.YNc(0,Yt,24,1,"ng-container",0),g.YNc(1,zt,2,0,"ng-template",null,1,g.W1O)),2&e){const e=g.MAs(2);g.Q6J("ngIf",t.loaded)("ngIfElse",e)}},dependencies:[n.sg,n.O5,T.J,M._,Ft.W,A.H],encapsulation:2})),AdministrationSystemCacheViewer})(),Pt=(()=>{var e;class AdministrationSystemCacheViewerDetails{constructor(){(0,i.Z)(this,"self",void 0),(0,i.Z)(this,"cachedKey",void 0),(0,i.Z)(this,"cachedData",void 0),(0,i.Z)(this,"deleteitem",new g.vpe)}get displayData(){return this.cachedData?JSON.stringify(this.cachedData,null,"\t"):""}delete(){this.deleteitem.emit(!0),this.close()}close(){this.self.destroy()}}return e=AdministrationSystemCacheViewerDetails,(0,i.Z)(AdministrationSystemCacheViewerDetails,"ɵfac",(function(t){return new(t||e)})),(0,i.Z)(AdministrationSystemCacheViewerDetails,"ɵcmp",g.Xpm({type:e,selectors:[["administration-system-cacheviewer-details"]],outputs:{deleteitem:"deleteitem"},decls:11,vars:3,consts:[["size","large"],[3,"close"],[3,"grow"],[1,"slds-text-font_monospace",2,"overflow-wrap","break-word","white-space","pre-wrap"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_DELETE"],["label","LBL_CLOSE"]],template:function(e,t){1&e&&(g.TgZ(0,"system-modal",0)(1,"system-modal-header",1),g.NdJ("close",(function(){return t.close()})),g._uU(2),g.qZA(),g.TgZ(3,"system-modal-content",2)(4,"pre",3),g._uU(5),g.qZA()(),g.TgZ(6,"system-modal-footer")(7,"button",4),g.NdJ("click",(function(){return t.delete()})),g._UZ(8,"system-label",5),g.qZA(),g.TgZ(9,"button",4),g.NdJ("click",(function(){return t.close()})),g._UZ(10,"system-label",6),g.qZA()()()),2&e&&(g.xp6(2),g.Oqu(t.cachedKey),g.xp6(1),g.Q6J("grow",!0),g.xp6(2),g.Oqu(t.displayData))},dependencies:[M._,pt.j,bt.x,ft.p,Zt.y],encapsulation:2})),AdministrationSystemCacheViewerDetails})();var Ht=s(3144);function Kt(e,t){if(1&e&&(g.TgZ(0,"tr")(1,"td")(2,"div",10),g._uU(3),g.qZA()(),g.TgZ(4,"td")(5,"div",10),g._uU(6),g.qZA()(),g.TgZ(7,"td")(8,"div",10),g._uU(9),g.qZA()(),g.TgZ(10,"td")(11,"div",10),g._uU(12),g.qZA()()()),2&e){const e=t.$implicit;g.xp6(3),g.Oqu(e.name),g.xp6(3),g.Oqu(e.date),g.xp6(3),g.Oqu(e.build),g.xp6(3),g.Oqu(e.release)}}function jt(e,t){if(1&e&&(g.TgZ(0,"tr")(1,"td")(2,"div",10),g._uU(3),g.qZA()(),g.TgZ(4,"td")(5,"div",10),g._uU(6),g.qZA()()()),2&e){const e=t.$implicit;g.xp6(3),g.Oqu(e.name),g.xp6(3),g.Oqu(e.version)}}function $t(e,t){if(1&e&&(g.TgZ(0,"div")(1,"div",5)(2,"h3"),g._uU(3),g.qZA()(),g.TgZ(4,"table",7)(5,"thead")(6,"tr",8)(7,"th",18)(8,"div",10),g._UZ(9,"system-label",11),g.qZA()(),g.TgZ(10,"th",15)(11,"div",10),g._UZ(12,"system-label",19),g.qZA()()()(),g.TgZ(13,"tbody"),g.YNc(14,jt,7,2,"tr",17),g.qZA()()()),2&e){const e=t.$implicit;g.xp6(3),g.Oqu(e.vendorpackage),g.xp6(11),g.Q6J("ngForOf",e.files)}}function Vt(e,t){if(1&e&&(g.ynx(0),g.TgZ(1,"div",2)(2,"h2",3),g._uU(3,"Libraries Versions"),g.qZA()(),g.TgZ(4,"div",4)(5,"div",5)(6,"h3"),g._UZ(7,"system-label",6),g.qZA()(),g.TgZ(8,"table",7)(9,"thead")(10,"tr",8)(11,"th",9)(12,"div",10),g._UZ(13,"system-label",11),g.qZA()(),g.TgZ(14,"th",12)(15,"div",10),g._UZ(16,"system-label",13),g.qZA()(),g.TgZ(17,"th",12)(18,"div",10),g._UZ(19,"system-label",14),g.qZA()(),g.TgZ(20,"th",15)(21,"div",10),g._UZ(22,"system-label",16),g.qZA()()()(),g.TgZ(23,"tbody"),g.YNc(24,Kt,13,4,"tr",17),g.qZA()(),g.YNc(25,$t,15,2,"div",17),g.qZA(),g.BQk()),2&e){const e=g.oxw();g.xp6(24),g.Q6J("ngForOf",e.versions.app),g.xp6(1),g.Q6J("ngForOf",e.vendorpackages)}}function Xt(e,t){1&e&&(g.TgZ(0,"div",20),g._UZ(1,"system-spinner"),g.qZA())}let Wt=(()=>{var e;class AdministrationSystemVersions{constructor(e,t,s){(0,i.Z)(this,"http",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"loaded",!1),(0,i.Z)(this,"versions",{}),(0,i.Z)(this,"vendorpackages",[]),this.http=e,this.language=t,this.backend=s,this.loadVersions()}loadVersions(){this.loaded=!1,this.http.get("config/systemdetails/").subscribe((e=>{this.versions=e,this.vendorpackages=[];for(let e in this.versions.vendor)this.vendorpackages.push({vendorpackage:e,files:this.versions.vendor[e]});this.loaded=!0}))}}return e=AdministrationSystemVersions,(0,i.Z)(AdministrationSystemVersions,"ɵfac",(function(t){return new(t||e)(g.Y36(Ht.eN),g.Y36(p.d),g.Y36(m.y))})),(0,i.Z)(AdministrationSystemVersions,"ɵcmp",g.Xpm({type:e,selectors:[["ng-component"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["loading",""],[1,"slds-grid","slds-grid_vertical-align-center","slds-grid--align-spread","slds-p-around--small"],[1,"slds-text-heading_medium"],["system-to-bottom","",1,"slds-border--top"],[1,"slds-p-around--small","slds-text-heading_small"],["label","LBL_MODULES"],[1,"slds-table","slds-table_bordered","slds-table_cell-buffer"],[1,"slds-text-title_caps"],["scope","col","width","45%"],[1,"slds-truncate"],["label","LBL_NAME"],["scope","col","width","20%"],["label","LBL_DATE"],["label","LBL_BUILD"],["scope","col","width","15%"],["label","LBL_RELEASE"],[4,"ngFor","ngForOf"],["scope","col","width","85%"],["label","LBL_VERSION"],[1,"slds-align--absolute-center","slds-height_full","slds-size--1-of-1"]],template:function(e,t){if(1&e&&(g.YNc(0,Vt,26,2,"ng-container",0),g.YNc(1,Xt,2,0,"ng-template",null,1,g.W1O)),2&e){const e=g.MAs(2);g.Q6J("ngIf",t.loaded)("ngIfElse",e)}},dependencies:[n.sg,n.O5,M._,Ft.W,A.H],encapsulation:2})),AdministrationSystemVersions})(),es=(()=>{var e;class administrationapiinspectorService{constructor(e,t,s,n){(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"toast",void 0),(0,i.Z)(this,"injector",void 0),(0,i.Z)(this,"modelutilities",void 0),(0,i.Z)(this,"loading",!1),(0,i.Z)(this,"apiEndpoints",[]),(0,i.Z)(this,"finalArray",{}),(0,i.Z)(this,"flattendArray",[]),(0,i.Z)(this,"apiTree",[]),(0,i.Z)(this,"selectedApi",void 0),(0,i.Z)(this,"apiMethods",[]),(0,i.Z)(this,"_apiSubMethods",!0),(0,i.Z)(this,"_apiFilter",void 0),(0,i.Z)(this,"_apiFilterUnauthorized",!1),(0,i.Z)(this,"_apiFilterAdminOnly",!1),(0,i.Z)(this,"_apiFilterValidatedOnly",!1),(0,i.Z)(this,"selectedAPI",void 0),this.backend=e,this.toast=t,this.injector=s,this.modelutilities=n,this.loadEndpoints()}get apiFilter(){return this._apiFilter}set apiFilter(e){this._apiFilter=e,this.buildTree()}get apiFilterUnauthorized(){return this._apiFilterUnauthorized}set apiFilterUnauthorized(e){this._apiFilterUnauthorized=e,this._apiFilterUnauthorized&&(this._apiFilterAdminOnly=!1),this.buildTree()}get apiFilterAdminOnly(){return this._apiFilterAdminOnly}set apiFilterAdminOnly(e){this._apiFilterAdminOnly=e,this._apiFilterAdminOnly&&(this._apiFilterUnauthorized=!1),this.buildTree()}get apiFilterValidatedOnly(){return this._apiFilterValidatedOnly}set apiFilterValidatedOnly(e){this._apiFilterValidatedOnly=e,this.buildTree()}loadEndpoints(){this.loading=!0,this.backend.getRequest("admin/routes").subscribe((e=>{this.apiEndpoints=e,this.apiEndpoints.sort(((e,t)=>e.route.replace("{","").localeCompare(t.route.replace("{","")))),this.buildTree(),this.loading=!1}),(e=>{this.toast.sendToast("Error Loading Routes","error"),this.loading=!1}))}buildTree(){this.apiMethods=[],this.apiTree=[],this.loading=!0;for(let e of this.apiEndpoints.filter((e=>(!this._apiFilterUnauthorized||!0===e.options.noAuth)&&((!this._apiFilterAdminOnly||!0===e.options.adminOnly)&&((!this._apiFilterValidatedOnly||!0!==e.options.validate)&&(!this._apiFilter||e.route.toLowerCase().indexOf(this._apiFilter.toLowerCase())>=0))))))e.route&&(this.apiTree.find((t=>t.route==e.route))||this.addRouteToTree(e.route));this.loading=!1}addRouteToTree(e){let t=this.getPartentId(e),s=this.getRouteId(e);return this.apiTree.push({id:s,name:"/"!=e?e.split("/").pop():e,route:e,parent_id:t,parent_sequence:this.apiTree.filter((e=>e.parent_id==t)).length}),s}getPartentId(e){let t=e.substring(1).split("/");if(t.pop(),0==t.length)return;let s="/"+t.join("/"),i=this.apiTree.find((e=>e.route==s));return i?i.id:this.addRouteToTree(s)}getRouteId(e){return this.apiTree.find((t=>t.route==e))?this.apiTree.find((t=>t.route==e)).id:this.modelutilities.generateGuid()}selectAPI(e){this.selectedAPI=this.apiTree.find((t=>t.id==e)),this.filterMethods()}get apiSubMethods(){return this._apiSubMethods}set apiSubMethods(e){this._apiSubMethods=e,this.filterMethods()}filterMethods(){this.apiMethods=this.apiEndpoints.filter((e=>this._apiSubMethods?0==e.route.indexOf(this.selectedAPI.route):e.route==this.selectedAPI.route))}getMethodParameters(e,t,s){let i=[],n=this.apiEndpoints.find((s=>s.route==e&&s.method==t));if(!n.parameters)return[];for(let e in n.parameters){let t={...n.parameters[e]};t.in==s&&(t.name=e,i.push(t))}return i.sort(((e,t)=>e.name.localeCompare(t.name)))}getMethodResponses(e,t){let s=[],i=this.apiEndpoints.find((s=>s.route==e&&s.method==t));if(!i.responses)return[];for(let e in i.responses){let t={...i.responses[e]};t.name=e,s.push(t)}return s.sort(((e,t)=>e.name.localeCompare(t.name)))}getMethodRequests(e,t,s){let i=this.apiEndpoints.find((s=>s.route==e&&s.method==t));if(!i.requestBody)return[];for(let e in i.requestBody){i.requestBody[e]}return[].sort(((e,t)=>e.name.localeCompare(t.name)))}getMethodStyle(e){let t="inherit";switch(e){case"get":t="#05628a";break;case"post":t="#f38303";break;case"put":t="#41b658";break;case"delete":t="#d83a00"}return{width:"100px",color:"#ffffff",background:t}}}return e=administrationapiinspectorService,(0,i.Z)(administrationapiinspectorService,"ɵfac",(function(t){return new(t||e)(g.LFG(m.y),g.LFG(Fe.A),g.LFG(g.zs3),g.LFG(z.A))})),(0,i.Z)(administrationapiinspectorService,"ɵprov",g.Yz7({token:e,factory:e.ɵfac})),administrationapiinspectorService})();var ts=s(2646),ss=s(8574),is=s(3398);function ns(e,t){1&e&&(g.TgZ(0,"th",14)(1,"div",6),g._UZ(2,"system-label",11),g.qZA()())}function ls(e,t){1&e&&(g.TgZ(0,"abbr",17),g._uU(1,"* "),g.qZA())}function os(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"td")(1,"input",18),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw().$implicit,i=g.oxw(2);return g.KtG(i.parameterCollector[s.name]=t)})),g.qZA()()}if(2&e){const e=g.oxw().$implicit,t=g.oxw(2);g.xp6(1),g.Q6J("ngModel",t.parameterCollector[e.name])}}function as(e,t){if(1&e&&(g.TgZ(0,"tr",15)(1,"td")(2,"div",6),g._uU(3),g.YNc(4,ls,2,0,"abbr",16),g.qZA()(),g.TgZ(5,"td")(6,"div",6),g._uU(7),g.qZA()(),g.TgZ(8,"td")(9,"div",6),g._uU(10),g.qZA()(),g.YNc(11,os,2,1,"td",0),g.qZA()),2&e){const e=t.$implicit,s=g.oxw(2);g.xp6(3),g.Oqu(e.name),g.xp6(1),g.Q6J("ngIf",e.required),g.xp6(3),g.Oqu(e.description),g.xp6(3),g.Oqu(e.type),g.xp6(1),g.Q6J("ngIf",s.parameterCollector)}}function ds(e,t){if(1&e&&(g.ynx(0),g.TgZ(1,"div",1),g._UZ(2,"system-label",2),g.qZA(),g.TgZ(3,"table",3)(4,"thead")(5,"tr",4)(6,"th",5)(7,"div",6),g._UZ(8,"system-label",7),g.qZA()(),g.TgZ(9,"th",8)(10,"div",6),g._UZ(11,"system-label",9),g.qZA()(),g.TgZ(12,"th",10)(13,"div",6),g._UZ(14,"system-label",11),g.qZA()(),g.YNc(15,ns,3,0,"th",12),g.qZA()(),g.TgZ(16,"tbody"),g.YNc(17,as,12,5,"tr",13),g.qZA()(),g.BQk()),2&e){const e=g.oxw();g.xp6(2),g.Q6J("label","LBL_"+e.in.toUpperCase()+"_PARAMETERS"),g.xp6(13),g.Q6J("ngIf",e.parameterCollector),g.xp6(2),g.Q6J("ngForOf",e.parameters)}}let rs=(()=>{var e;class AdministrationApiInspectorMethodParameters{constructor(e){(0,i.Z)(this,"apiinspector",void 0),(0,i.Z)(this,"parameters",void 0),(0,i.Z)(this,"apimethod",void 0),(0,i.Z)(this,"in",void 0),(0,i.Z)(this,"parameterCollector",void 0),this.apiinspector=e}ngOnChanges(){this.parameters=this.apiinspector.getMethodParameters(this.apimethod.route,this.apimethod.method,this.in)}}return e=AdministrationApiInspectorMethodParameters,(0,i.Z)(AdministrationApiInspectorMethodParameters,"ɵfac",(function(t){return new(t||e)(g.Y36(es))})),(0,i.Z)(AdministrationApiInspectorMethodParameters,"ɵcmp",g.Xpm({type:e,selectors:[["administration-api-inspector-method-parameters"]],inputs:{apimethod:"apimethod",in:"in",parameterCollector:"parameterCollector"},features:[g.TTD],decls:1,vars:1,consts:[[4,"ngIf"],[1,"slds-p-around--small","slds-text-heading--label"],[3,"label"],[1,"slds-table","slds-table--fixed-layout","slds-table_cell-buffer","slds-table_bordered"],[1,"slds-line-height_reset"],["scope","col",2,"width","120px"],[1,"slds-truncate"],["label","LBL_NAME"],["scope","col"],["label","LBL_DESCRIPTION"],["scope","col",2,"width","100px"],["label","LBL_TYPE"],["class","","scope","col",4,"ngIf"],["class","slds-hint-parent",4,"ngFor","ngForOf"],["scope","col",1,""],[1,"slds-hint-parent"],["class","slds-required",4,"ngIf"],[1,"slds-required"],[1,"slds-input",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&g.YNc(0,ds,18,3,"ng-container",0),2&e&&g.Q6J("ngIf",t.parameters.length>0)},dependencies:[n.sg,n.O5,l.Fj,l.JJ,l.On,M._],encapsulation:2})),AdministrationApiInspectorMethodParameters})();function cs(e,t){if(1&e&&(g.TgZ(0,"tr",11)(1,"td")(2,"div",6),g._uU(3),g.qZA()(),g.TgZ(4,"td")(5,"div",6),g._uU(6),g.qZA()()()),2&e){const e=t.$implicit;g.xp6(3),g.Oqu(e.name),g.xp6(3),g.Oqu(e.description)}}function gs(e,t){if(1&e&&(g.ynx(0),g.TgZ(1,"div",1),g._UZ(2,"system-label",2),g.qZA(),g.TgZ(3,"table",3)(4,"thead")(5,"tr",4)(6,"th",5)(7,"div",6),g._UZ(8,"system-label",7),g.qZA()(),g.TgZ(9,"th",8)(10,"div",6),g._UZ(11,"system-label",9),g.qZA()()()(),g.TgZ(12,"tbody"),g.YNc(13,cs,7,2,"tr",10),g.qZA()(),g.BQk()),2&e){const e=g.oxw();g.xp6(13),g.Q6J("ngForOf",e.response)}}let us=(()=>{var e;class AdministrationapiinspectorMethodResponses{constructor(e){(0,i.Z)(this,"apiinspector",void 0),(0,i.Z)(this,"response",void 0),(0,i.Z)(this,"apimethod",void 0),this.apiinspector=e}ngOnChanges(){this.response=this.apiinspector.getMethodResponses(this.apimethod.route,this.apimethod.method)}}return e=AdministrationapiinspectorMethodResponses,(0,i.Z)(AdministrationapiinspectorMethodResponses,"ɵfac",(function(t){return new(t||e)(g.Y36(es))})),(0,i.Z)(AdministrationapiinspectorMethodResponses,"ɵcmp",g.Xpm({type:e,selectors:[["administration-api-inspector-method-responses"]],inputs:{apimethod:"apimethod"},features:[g.TTD],decls:1,vars:1,consts:[[4,"ngIf"],[1,"slds-p-around--small","slds-text-heading--label"],["label","LBL_API_RESPONSES"],[1,"slds-table","slds-table--fixed-layout","slds-table_cell-buffer","slds-table_bordered"],[1,"slds-line-height_reset"],["scope","col",2,"width","100px"],[1,"slds-truncate"],["label","LBL_NAME"],["scope","col",1,""],["label","LBL_DESCRIPTION"],["class","slds-hint-parent",4,"ngFor","ngForOf"],[1,"slds-hint-parent"]],template:function(e,t){1&e&&g.YNc(0,gs,14,1,"ng-container",0),2&e&&g.Q6J("ngIf",t.response.length>0)},dependencies:[n.sg,n.O5,M._],encapsulation:2})),AdministrationapiinspectorMethodResponses})();function ms(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4),g._uU(4),g.qZA()(),g.TgZ(5,"div",5),g._uU(6),g.qZA(),g._UZ(7,"system-utility-icon",6)(8,"system-utility-icon",7)(9,"system-utility-icon",8),g.TgZ(10,"system-utility-icon",9),g.NdJ("click",(function(t){const s=g.CHM(e).$implicit,i=g.oxw();return g.KtG(i.test(s,t))})),g.qZA()(),g.TgZ(11,"div",10)(12,"div",11),g._UZ(13,"system-label",12),g.qZA(),g.TgZ(14,"div"),g._uU(15),g.qZA()(),g._UZ(16,"administration-api-inspector-method-parameters",13)(17,"administration-api-inspector-method-parameters",14)(18,"administration-api-inspector-method-parameters",15)(19,"administration-api-inspector-method-responses",16),g.qZA()}if(2&e){const e=t.$implicit,s=g.oxw();g.xp6(2),g.Q6J("ngStyle",s.apiinspector.getMethodStyle(e.method)),g.xp6(2),g.Oqu(e.method),g.xp6(2),g.Oqu(e.route),g.xp6(1),g.Q6J("colorclass",e.options.validate?"slds-icon-text-success":"slds-icon-text-light"),g.xp6(1),g.Q6J("colorclass",e.options.noAuth?"slds-icon-text-error":"slds-icon-text-light"),g.xp6(1),g.Q6J("colorclass",e.options.adminOnly?"slds-icon-text-error":"slds-icon-text-light"),g.xp6(6),g.Oqu(e.description),g.xp6(1),g.Q6J("apimethod",e),g.xp6(1),g.Q6J("apimethod",e),g.xp6(1),g.Q6J("apimethod",e),g.xp6(1),g.Q6J("apimethod",e)}}let hs=(()=>{var e;class AdministrationApiInspectorMethods{constructor(e,t,s){(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"injector",void 0),(0,i.Z)(this,"apiinspector",void 0),this.modal=e,this.injector=t,this.apiinspector=s}test(e,t){t.preventDefault(),t.stopPropagation(),this.modal.openModal("AdministrationApiInspectorMethodTest",!0,this.injector).subscribe((t=>{t.instance.apiMethod=e}))}}return e=AdministrationApiInspectorMethods,(0,i.Z)(AdministrationApiInspectorMethods,"ɵfac",(function(t){return new(t||e)(g.Y36(Se.o),g.Y36(g.zs3),g.Y36(es))})),(0,i.Z)(AdministrationApiInspectorMethods,"ɵcmp",g.Xpm({type:e,selectors:[["administration-api-inspector-methods"]],decls:1,vars:1,consts:[["class","slds-m-around--x-small slds-p-around--none slds-box",4,"ngFor","ngForOf"],[1,"slds-m-around--x-small","slds-p-around--none","slds-box"],[1,"slds-p-around--small","slds-grid","slds-grid--vertical-align-center","slds-p-bottom--small","slds-border--bottom"],[1,"slds-badge","slds-m-right--x-small",3,"ngStyle"],[1,"slds-size--1-of-1","slds-text-align--center"],[1,"slds-truncate","slds-text-heading--small","slds-grow"],["icon","ribbon","size","x-small",1,"slds-p-left--xx-small",3,"colorclass"],["icon","unlock","size","x-small",1,"slds-p-left--xx-small",3,"colorclass"],["icon","user_role","size","x-small",1,"slds-p-left--xx-small",3,"colorclass"],["icon","play","size","x-small",1,"slds-p-left--xx-small","slds-text-link--reset",3,"click"],[1,"slds-p-around--small"],[1,"slds-p-bottom--small","slds-text-heading--small"],["label","LBL_SUMMARY"],["in","path",3,"apimethod"],["in","query",3,"apimethod"],["in","body",3,"apimethod"],[3,"apimethod"]],template:function(e,t){1&e&&g.YNc(0,ms,20,11,"div",0),2&e&&g.Q6J("ngForOf",t.apiinspector.apiMethods)},dependencies:[n.sg,n.PC,M._,J.r,rs,us],encapsulation:2})),AdministrationApiInspectorMethods})();const ps=["administration-api-inspector",""];function bs(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"system-tree",22),g.NdJ("selectedItemChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.selectNode(t))})),g.qZA()}if(2&e){const e=g.oxw();g.Q6J("sourceList",e.apiinspector.apiTree)}}function fs(e,t){1&e&&(g.TgZ(0,"div",23)(1,"div",24),g._UZ(2,"system-spinner")(3,"system-label",25),g.qZA()())}function Zs(e,t){1&e&&g._UZ(0,"administration-api-inspector-methods")}function _s(e,t){1&e&&(g.TgZ(0,"div",23)(1,"system-illustration-no-data"),g._UZ(2,"system-label",26),g.qZA()())}let vs=(()=>{var e;class AdministrationAPIInspector{constructor(e,t,s,n){(0,i.Z)(this,"toast",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"injector",void 0),(0,i.Z)(this,"apiinspector",void 0),(0,i.Z)(this,"toggleClassSub",[]),this.toast=e,this.modal=t,this.injector=s,this.apiinspector=n}toggleUnauthorized(e){e.preventDefault(),e.stopPropagation(),this.apiinspector.apiFilterUnauthorized=!this.apiinspector.apiFilterUnauthorized}toggleAdminOnly(e){e.preventDefault(),e.stopPropagation(),this.apiinspector.apiFilterAdminOnly=!this.apiinspector.apiFilterAdminOnly}toggleValidatedOnly(e){e.preventDefault(),e.stopPropagation(),this.apiinspector.apiFilterValidatedOnly=!this.apiinspector.apiFilterValidatedOnly}selectNode(e){this.apiinspector.selectAPI(e)}}return e=AdministrationAPIInspector,(0,i.Z)(AdministrationAPIInspector,"ɵfac",(function(t){return new(t||e)(g.Y36(Fe.A),g.Y36(Se.o),g.Y36(g.zs3),g.Y36(es))})),(0,i.Z)(AdministrationAPIInspector,"ɵcmp",g.Xpm({type:e,selectors:[["","administration-api-inspector",""]],features:[g._Bn([es])],attrs:ps,decls:27,vars:13,consts:[[1,"slds-grid","slds-grid_vertical-align-center","slds-p-around--small","slds-border--bottom"],["icon","apex_plugin"],[1,"slds-text-heading_medium"],["label","LBL_API_INSPECTOR"],[1,"slds-theme--default","slds-grid",3,"system-overlay-loading-spinner"],[1,"slds-size--1-of-3","slds-border--right"],[1,"slds-p-around--x-small","slds-border--bottom"],[1,"slds-grid","slds-grid--vertical-align-center"],["system-placeholder","LBL_FILTER",1,"slds-input",3,"ngModel","ngModelChange"],["icon","unlock","size","x-small",1,"slds-p-left--xx-small",3,"colorclass","click"],["icon","user_role","size","x-small",1,"slds-p-left--xx-small",3,"colorclass","click"],["icon","ribbon","size","x-small",1,"slds-p-left--xx-small",3,"colorclass","click"],["system-to-bottom",""],[3,"sourceList","selectedItemChange",4,"ngIf","ngIfElse"],["treeLoadingSpinner",""],[1,"slds-size--2-of-3"],[1,"slds-p-around--x-small","slds-border--bottom","slds-grid","slds-grid--align-spread","slds-grid--vertical-align-center",2,"min-height","49px"],[1,"slds-text-heading--medium"],[3,"ngModel","ngModelChange"],["label","LBL_INCLUDE_SUBROUTES"],[4,"ngIf","ngIfElse"],["noMethodsAvailable",""],[3,"sourceList","selectedItemChange"],[1,"slds-height_full","slds-align--absolute-center"],[1,"slds-grid","slds-grid--vertical"],["label","LBL_LOADING_ENDPOINTS",1,"slds-p-vertical--small"],["label","LBL_NO_METHODS_FOR_ENDPOINT"]],template:function(e,t){if(1&e&&(g.TgZ(0,"div",0),g._UZ(1,"system-icon",1),g.TgZ(2,"h2",2),g._UZ(3,"system-label",3),g._uU(4),g.qZA()(),g.TgZ(5,"div",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"input",8),g.NdJ("ngModelChange",(function(e){return t.apiinspector.apiFilter=e})),g.qZA(),g.TgZ(10,"system-utility-icon",9),g.NdJ("click",(function(e){return t.toggleUnauthorized(e)})),g.qZA(),g.TgZ(11,"system-utility-icon",10),g.NdJ("click",(function(e){return t.toggleAdminOnly(e)})),g.qZA(),g.TgZ(12,"system-utility-icon",11),g.NdJ("click",(function(e){return t.toggleValidatedOnly(e)})),g.qZA()()(),g.TgZ(13,"div",12),g.YNc(14,bs,1,1,"system-tree",13),g.YNc(15,fs,4,0,"ng-template",null,14,g.W1O),g.qZA()(),g.TgZ(17,"div",15)(18,"div",16)(19,"span",17),g._uU(20),g.qZA(),g.TgZ(21,"system-checkbox",18),g.NdJ("ngModelChange",(function(e){return t.apiinspector.apiSubMethods=e})),g._UZ(22,"system-label",19),g.qZA()(),g.TgZ(23,"div",12),g.YNc(24,Zs,1,0,"administration-api-inspector-methods",20),g.YNc(25,_s,3,0,"ng-template",null,21,g.W1O),g.qZA()()()),2&e){const e=g.MAs(16),s=g.MAs(26);g.xp6(4),g.hij(" (",t.apiinspector.apiEndpoints.length,")"),g.xp6(1),g.Q6J("system-overlay-loading-spinner",t.apiinspector.loading),g.xp6(4),g.Q6J("ngModel",t.apiinspector.apiFilter),g.xp6(1),g.Q6J("colorclass",t.apiinspector.apiFilterUnauthorized?"slds-icon-text-warning":"slds-icon-text-light"),g.xp6(1),g.Q6J("colorclass",t.apiinspector.apiFilterAdminOnly?"slds-icon-text-warning":"slds-icon-text-light"),g.xp6(1),g.Q6J("colorclass",t.apiinspector.apiFilterValidatedOnly?"slds-icon-text-warning":"slds-icon-text-light"),g.xp6(2),g.Q6J("ngIf",!t.apiinspector.loading)("ngIfElse",e),g.xp6(6),g.AsE("",null==t.apiinspector.selectedAPI?null:t.apiinspector.selectedAPI.route," (",t.apiinspector.apiMethods.length,")"),g.xp6(1),g.Q6J("ngModel",t.apiinspector.apiSubMethods),g.xp6(3),g.Q6J("ngIf",t.apiinspector.apiMethods.length>0)("ngIfElse",s)}},dependencies:[n.O5,l.Fj,l.JJ,l.On,H.U,L.f,ts.t,M._,Ft.W,ss.O,J.r,A.H,x._,is.A,hs],encapsulation:2})),AdministrationAPIInspector})(),As=(()=>{var e;class AdministrationAPIInspectorDetails{constructor(){(0,i.Z)(this,"self",void 0),(0,i.Z)(this,"endpoint",{})}close(){this.self.destroy()}}return e=AdministrationAPIInspectorDetails,(0,i.Z)(AdministrationAPIInspectorDetails,"ɵfac",(function(t){return new(t||e)})),(0,i.Z)(AdministrationAPIInspectorDetails,"ɵcmp",g.Xpm({type:e,selectors:[["administration-api-inspector-details"]],features:[g._Bn([es])],decls:8,vars:2,consts:[[3,"close"],["label","LBL_API_ENDPOINT"],[3,"grow"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CLOSE"]],template:function(e,t){1&e&&(g.TgZ(0,"system-modal")(1,"system-modal-header",0),g.NdJ("close",(function(){return t.close()})),g._UZ(2,"system-label",1),g.qZA(),g.TgZ(3,"system-modal-content",2),g._uU(4),g.qZA(),g.TgZ(5,"system-modal-footer")(6,"button",3),g.NdJ("click",(function(){return t.close()})),g._UZ(7,"system-label",4),g.qZA()()()),2&e&&(g.xp6(3),g.Q6J("grow",!0),g.xp6(1),g.hij(" ",t.endpoint.method," "))},dependencies:[M._,pt.j,bt.x,ft.p,Zt.y],encapsulation:2})),AdministrationAPIInspectorDetails})();var ys=s(2067),xs=s(1604);const Ts=["modalcontent"],Ls=["tabcontent"],Ms=function(e){return{"slds-is-active":e}},Js=function(e){return{"slds-hide":e}};let qs=(()=>{var e;class AdministrationApiInspectorMethodTest{constructor(e,t,s){(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"libloader",void 0),(0,i.Z)(this,"apiInspector",void 0),(0,i.Z)(this,"modalcontent",void 0),(0,i.Z)(this,"tabcontent",void 0),(0,i.Z)(this,"self",void 0),(0,i.Z)(this,"apiMethod",void 0),(0,i.Z)(this,"activetab","parameters"),(0,i.Z)(this,"executing",!1),(0,i.Z)(this,"tabHeigth",void 0),(0,i.Z)(this,"response",void 0),(0,i.Z)(this,"parameterCollector",{}),this.backend=e,this.libloader=t,this.apiInspector=s,this.libloader.loadLib("jsonbeautify")}ngAfterViewInit(){let e=this.modalcontent.element.nativeElement.getBoundingClientRect(),t=this.tabcontent.element.nativeElement.getBoundingClientRect();this.tabHeigth=e.height-t.top+e.top}get tabStyle(){return{height:this.tabHeigth+"px"}}test(){switch(this.executing=!0,this.response=void 0,this.activetab="response",this.apiMethod.method){case"get":this.backend.getRequest(this.buildRoute(),this.buildParams()).subscribe((e=>{this.response=js_beautify(JSON.stringify(e)),this.executing=!1}),(e=>{this.response=js_beautify(JSON.stringify(e))}));break;case"post":this.backend.postRequest(this.buildRoute(),this.buildParams(),this.buildBody()).subscribe((e=>{this.response=js_beautify(JSON.stringify(e)),this.executing=!1}),(e=>{this.response=js_beautify(JSON.stringify(e))}))}}checkParameters(){return!0}buildRoute(){let e=this.apiMethod.route.substring(1),t=this.apiInspector.getMethodParameters(this.apiMethod.route,this.apiMethod.method,"path");for(let s of t)e=e.replace(`{${s.name}}`,this.parameterCollector[s.name]);return e}buildParams(){let e={},t=this.apiInspector.getMethodParameters(this.apiMethod.route,this.apiMethod.method,"query");for(let s of t)e[s.name]=this.parameterCollector[s.name];return e}buildBody(){let e={},t=this.apiInspector.getMethodParameters(this.apiMethod.route,this.apiMethod.method,"body");for(let s of t)e[s.name]=this.parameterCollector[s.name];return e}close(){this.self.destroy()}}return e=AdministrationApiInspectorMethodTest,(0,i.Z)(AdministrationApiInspectorMethodTest,"ɵfac",(function(t){return new(t||e)(g.Y36(m.y),g.Y36(ys.$),g.Y36(es))})),(0,i.Z)(AdministrationApiInspectorMethodTest,"ɵcmp",g.Xpm({type:e,selectors:[["administration-api-inspector-method-test"]],viewQuery:function(e,t){if(1&e&&(g.Gf(Ts,7,g.s_b),g.Gf(Ls,7,g.s_b)),2&e){let e;g.iGM(e=g.CRH())&&(t.modalcontent=e.first),g.iGM(e=g.CRH())&&(t.tabcontent=e.first)}},decls:31,vars:24,consts:[[3,"close"],[1,"slds-badge",3,"ngStyle"],[1,"slds-size--1-of-1","slds-text-align--center"],["margin","none",3,"grow"],["modalcontent",""],[1,"slds-tabs_default"],["role","tablist",1,"slds-tabs_default__nav"],["role","presentation",1,"slds-tabs_default__item",3,"ngClass"],["role","tab",1,"slds-tabs_default__link",3,"click"],["label","LBL_PARAMETERS"],["title","Item Three","role","presentation",1,"slds-tabs_default__item",3,"ngClass"],["label","LBL_RESPONSE"],[1,"slds-scrollable",3,"ngStyle"],["tabcontent",""],["role","tabpanel",1,"slds-tabs_default__content",3,"ngClass"],["in","path",3,"apimethod","parameterCollector"],["in","query",3,"apimethod","parameterCollector"],["in","body",3,"apimethod","parameterCollector"],[1,"slds-p-horizontal--x-small",2,"white-space","pre-wrap"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CLOSE"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_TEST"]],template:function(e,t){1&e&&(g.TgZ(0,"system-modal")(1,"system-modal-header",0),g.NdJ("close",(function(){return t.close()})),g._uU(2),g.TgZ(3,"system-modal-header-right")(4,"div",1)(5,"div",2),g._uU(6),g.qZA()()()(),g.TgZ(7,"system-modal-content",3,4)(9,"div",5)(10,"ul",6)(11,"li",7)(12,"a",8),g.NdJ("click",(function(){return t.activetab="parameters"})),g._UZ(13,"system-label",9),g.qZA()(),g.TgZ(14,"li",10)(15,"a",8),g.NdJ("click",(function(){return t.activetab="response"})),g._UZ(16,"system-label",11),g.qZA()()(),g.TgZ(17,"div",12,13)(19,"div",14),g._UZ(20,"administration-api-inspector-method-parameters",15)(21,"administration-api-inspector-method-parameters",16)(22,"administration-api-inspector-method-parameters",17),g.qZA(),g.TgZ(23,"div",14)(24,"pre",18),g._uU(25),g.qZA()()()()(),g.TgZ(26,"system-modal-footer")(27,"button",19),g.NdJ("click",(function(){return t.close()})),g._UZ(28,"system-label",20),g.qZA(),g.TgZ(29,"button",21),g.NdJ("click",(function(){return t.test()})),g._UZ(30,"system-label",22),g.qZA()()()),2&e&&(g.xp6(2),g.hij(" ",t.apiMethod.route," "),g.xp6(2),g.Q6J("ngStyle",t.apiInspector.getMethodStyle(t.apiMethod.method)),g.xp6(2),g.Oqu(t.apiMethod.method),g.xp6(1),g.Q6J("grow",!0),g.xp6(4),g.Q6J("ngClass",g.VKq(16,Ms,"parameters"==t.activetab)),g.xp6(3),g.Q6J("ngClass",g.VKq(18,Ms,"response"==t.activetab)),g.xp6(3),g.Q6J("ngStyle",t.tabStyle),g.xp6(2),g.Q6J("ngClass",g.VKq(20,Js,"parameters"!=t.activetab)),g.xp6(1),g.Q6J("apimethod",t.apiMethod)("parameterCollector",t.parameterCollector),g.xp6(1),g.Q6J("apimethod",t.apiMethod)("parameterCollector",t.parameterCollector),g.xp6(1),g.Q6J("apimethod",t.apiMethod)("parameterCollector",t.parameterCollector),g.xp6(1),g.Q6J("ngClass",g.VKq(22,Js,"response"!=t.activetab)),g.xp6(2),g.Oqu(t.response))},dependencies:[n.mk,n.PC,M._,pt.j,bt.x,ft.p,Zt.y,xs.O,rs],encapsulation:2})),AdministrationApiInspectorMethodTest})();var Es=s(2422),Us=s(3917),Cs=s(4994),ks=s(4846),Ns=s(3333),Ss=s(5982);function Fs(e,t){if(1&e&&(g.TgZ(0,"option",44),g._UZ(1,"system-label-modulename",45),g.qZA()),2&e){const e=t.$implicit;g.Q6J("value",e),g.xp6(1),g.Q6J("module",e)}}function ws(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"tr")(1,"td",46),g._UZ(2,"system-icon",47),g.qZA(),g.TgZ(3,"td",48)(4,"div",49),g._uU(5),g.qZA()(),g.TgZ(6,"td")(7,"div",49),g._uU(8),g.qZA()(),g.TgZ(9,"td")(10,"div",49),g._uU(11),g.qZA()(),g.TgZ(12,"td")(13,"div",49),g._uU(14),g.qZA()(),g.TgZ(15,"td",50)(16,"button",51),g.NdJ("click",(function(){const t=g.CHM(e).$implicit,s=g.oxw();return g.KtG(s.recoverRecord(t))})),g._UZ(17,"system-button-icon",52),g.qZA()()()}if(2&e){const e=t.$implicit;g.xp6(2),g.Q6J("module",e.recordmodule),g.xp6(3),g.Oqu(e.recordmodule),g.xp6(3),g.Oqu(e.recordname),g.xp6(3),g.Oqu(e.date_deleted),g.xp6(3),g.Oqu(e.user_name),g.xp6(3),g.Q6J("icon","undelete")}}function Is(e,t){1&e&&(g.TgZ(0,"div",53),g._UZ(1,"system-spinner"),g.qZA())}function Os(e,t){1&e&&(g.TgZ(0,"div",53)(1,"h2",54),g._UZ(2,"system-label",55),g.qZA()())}let Rs=(()=>{var e;class AdministrationSysTrashcanManager{constructor(e,t,s,n,l,o){(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"userpreferences",void 0),(0,i.Z)(this,"footer",void 0),(0,i.Z)(this,"totalCount",0),(0,i.Z)(this,"records",[]),(0,i.Z)(this,"loadDate",void 0),(0,i.Z)(this,"loading",!1),(0,i.Z)(this,"_searchTerm",void 0),(0,i.Z)(this,"searchTimeout",void 0),(0,i.Z)(this,"_searchModule",void 0),(0,i.Z)(this,"user",void 0),(0,i.Z)(this,"modules",void 0),this.metadata=e,this.modal=t,this.backend=s,this.language=n,this.userpreferences=l,this.footer=o}set searchTerm(e){this._searchTerm=e,window.clearTimeout(this.searchTimeout),this.searchTimeout=window.setTimeout((()=>this.reload()),600)}get searchTerm(){return this._searchTerm}set searchModule(e){this._searchModule=e,this.reload()}get searchModule(){return this._searchModule}set filterUser(e){const t=e?.split("::");this.user=t?{id:t[0],name:t[1]}:void 0,this.reload()}get filterUser(){return this.user?this.user.id+"::"+this.user.name:void 0}ngOnInit(){this.getEntries(),this.modules=this.metadata.getModules().sort(((e,t)=>this.language.getModuleName(e).localeCompare(this.language.getModuleName(t))))}getEntries(){this.loading=!0;const e={limit:50,offset:this.records.length,module:this.searchModule,searchTerm:this.searchTerm,user:this.user?.id};this.backend.getRequest("admin/systrashcan",e).subscribe((e=>{e&&(e.records.forEach((e=>e.date_deleted=this.userpreferences.formatDateTime(moment(e.date_deleted)))),this.totalCount=e.count,this.records=this.records.concat(e.records),this.loadDate=this.userpreferences.formatDateTime(moment()),this.loading=!1)}))}reload(){this.records=[],this.getEntries()}recoverRecord(e){const t=this.modal.await(this.language.getLabel("LBL_LOADING"));this.backend.getRequest("admin/systrashcan/related/"+e.transactionid+"/"+e.recordid).subscribe((s=>{t.next(!0),t.complete(),this.modal.openModal("AdministrationSysTrashcanRecover").subscribe((t=>{t.instance.record=e,t.instance.relatedRecords=s,t.instance.hasRelated=s.length>0,t.instance.recovered.subscribe((t=>{t&&(this.records=this.records.filter((t=>t.id!=e.id)))}))}))}))}loadMore(){this.loading||this.records.length>=this.totalCount||this.getEntries()}clearSearchTerm(){this.searchTerm=void 0,this.reload()}}return e=AdministrationSysTrashcanManager,(0,i.Z)(AdministrationSysTrashcanManager,"ɵfac",(function(t){return new(t||e)(g.Y36(f.Pu),g.Y36(Se.o),g.Y36(m.y),g.Y36(p.d),g.Y36(Es.z),g.Y36(Us.M))})),(0,i.Z)(AdministrationSysTrashcanManager,"ɵcmp",g.Xpm({type:e,selectors:[["administration-systrashcan-manager"]],decls:57,vars:11,consts:[[1,"slds-grid","slds-grid--vertical-align-end","slds-page-header"],[1,"slds-media","slds-m-right--medium"],[1,"slds-p-horizontal--x-small"],["icon","recall"],[1,"slds-media__body"],[1,"slds-page-header__title","slds-truncate","slds-align-middle"],["label","LBL_TRASHCAN_MANAGER"],[1,"slds-text-body_small","slds-line-height_reset","slds-p-vertical--xx-small"],[1,"slds-m-right--xx-small"],["label","LBL_FROM"],[1,"slds-form-element","slds-p-right--x-small","slds-grow"],[1,"slds-form-element__control","slds-input-has-icon","slds-input-has-icon--left-right"],["icon","search","size","x-small","addclasses","slds-icon slds-input__icon slds-input__icon_left"],["system-autofocus","","type","search","system-placeholder","LBL_SEARCH",1,"slds-input","slds-lookup__search-input","slds-size--1-of-1",3,"ngModel","ngModelChange","keyup.enter"],[1,"slds-button","slds-button_icon","slds-input__icon","slds-input__icon_right",3,"disabled","click"],["icon","clear"],[1,"slds-form-element","slds-m-right--x-small"],["for","moduleselect",1,"slds-form-element__label"],["label","LBL_MODULE"],[1,"slds-form-element__control","slds-col"],[1,"slds-select_container"],["id","moduleselect",1,"slds-select",3,"ngModel","ngModelChange"],["value","","selected",""],["label","LBL_SELECT"],[3,"value",4,"ngFor","ngForOf"],[1,"slds-m-right--small","slds-size--1-of-8"],[1,"slds-form-element__label"],["label","LBL_USER"],["module","Users","nameField","user_name",3,"ngModel","ngModelChange"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_REFRESH"],[3,"system-to-bottom"],[1,"slds-table","slds-table_bordered","slds-table--header-fixed","slds-table--fixed-layout"],[1,"slds-text-title_caps"],[1,"slds-cell-shrink"],["scope","col"],[1,"slds-truncate","slds-p-vertical--x-small"],["label","LBL_OBJECT"],["label","LBL_NAME"],["label","LBL_DATE_DELETED"],["label","LBL_DELETED_BY"],["scope","col",1,"slds-cell-shrink"],[4,"ngFor","ngForOf"],["class","slds-p-around--medium slds-align--absolute-center",4,"ngIf"],[3,"value"],[3,"module"],["role","gridcell",1,"slds-cell-shrink"],["size","small",3,"module"],["scope","row"],[1,"slds-truncate"],["role","gridcell"],["system-title","LBL_RESTORE",1,"slds-button","slds-button_icon","slds-button_icon-border-filled","slds-button_icon-x-small",3,"click"],[3,"icon"],[1,"slds-p-around--medium","slds-align--absolute-center"],[1,"slds-text-heading--small"],["label","LBL_NO_RECORDS_FOUND"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0)(1,"div",1)(2,"div",2),g._UZ(3,"system-action-icon",3),g.qZA(),g.TgZ(4,"div",4)(5,"h1",5),g._UZ(6,"system-label",6),g.qZA(),g.TgZ(7,"div",7)(8,"span",8),g._uU(9),g._UZ(10,"system-label",9),g._uU(11),g.qZA(),g._uU(12),g.qZA()()(),g.TgZ(13,"div",10)(14,"div",11),g._UZ(15,"system-utility-icon",12),g.TgZ(16,"input",13),g.NdJ("ngModelChange",(function(e){return t.searchTerm=e}))("keyup.enter",(function(){return t.reload()})),g.qZA(),g.TgZ(17,"button",14),g.NdJ("click",(function(){return t.clearSearchTerm()})),g._UZ(18,"system-button-icon",15),g.qZA()()(),g.TgZ(19,"div",16)(20,"label",17),g._UZ(21,"system-label",18),g.qZA(),g.TgZ(22,"div",19)(23,"div",20)(24,"select",21),g.NdJ("ngModelChange",(function(e){return t.searchModule=e})),g.TgZ(25,"option",22),g._UZ(26,"system-label",23),g.qZA(),g.YNc(27,Fs,2,2,"option",24),g.qZA()()()(),g.TgZ(28,"div",25)(29,"label",26),g._UZ(30,"system-label",27),g.qZA(),g.TgZ(31,"system-input-relate",28),g.NdJ("ngModelChange",(function(e){return t.filterUser=e})),g.qZA()(),g.TgZ(32,"div")(33,"button",29),g.NdJ("click",(function(){return t.reload()})),g._UZ(34,"system-label",30),g.qZA()()(),g.TgZ(35,"div",31),g.NdJ("system-to-bottom",(function(){return t.loadMore()})),g.TgZ(36,"table",32)(37,"thead")(38,"tr",33),g._UZ(39,"th",34),g.TgZ(40,"th",35)(41,"div",36),g._UZ(42,"system-label",37),g.qZA()(),g.TgZ(43,"th",35)(44,"div",36),g._UZ(45,"system-label",38),g.qZA()(),g.TgZ(46,"th",35)(47,"div",36),g._UZ(48,"system-label",39),g.qZA()(),g.TgZ(49,"th",35)(50,"div",36),g._UZ(51,"system-label",40),g.qZA()(),g._UZ(52,"th",41),g.qZA()(),g.TgZ(53,"tbody"),g.YNc(54,ws,18,6,"tr",42),g.qZA()(),g.YNc(55,Is,2,0,"div",43),g.YNc(56,Os,3,0,"div",43),g.qZA()),2&e&&(g.xp6(9),g.hij("",t.records.length," "),g.xp6(2),g.hij(" ",t.totalCount,""),g.xp6(1),g.hij(" ",t.loadDate," "),g.xp6(4),g.Q6J("ngModel",t.searchTerm),g.xp6(1),g.Q6J("disabled",!t.searchTerm),g.xp6(7),g.Q6J("ngModel",t.searchModule),g.xp6(3),g.Q6J("ngForOf",t.modules),g.xp6(4),g.Q6J("ngModel",t.filterUser),g.xp6(23),g.Q6J("ngForOf",t.records),g.xp6(1),g.Q6J("ngIf",t.loading),g.xp6(1),g.Q6J("ngIf",!t.loading&&0==t.records.length))},dependencies:[n.sg,n.O5,l.YN,l.Kr,l.Fj,l.EJ,l.JJ,l.On,Cs.g,T.J,L.f,ks.z,M._,Ns.M,Ft.W,J.r,Ss.m,A.H,is.A,q.S],encapsulation:2})),AdministrationSysTrashcanManager})();function Ds(e,t){if(1&e&&(g.TgZ(0,"tr")(1,"td",19),g._UZ(2,"system-icon",20),g.qZA(),g.TgZ(3,"td",21)(4,"div",16),g._uU(5),g.qZA()(),g.TgZ(6,"td")(7,"div",16),g._uU(8),g.qZA()(),g.TgZ(9,"td")(10,"div",16),g._uU(11),g.qZA()()()),2&e){const e=t.$implicit,s=g.oxw(2);g.xp6(2),g.Q6J("module",s.getModule(e.linkmodule)),g.xp6(3),g.Oqu(e.linkmodule),g.xp6(3),g.Oqu(e.recordname),g.xp6(3),g.Oqu(e.linkname)}}function Qs(e,t){if(1&e&&(g.TgZ(0,"table",13)(1,"thead")(2,"tr",14)(3,"th",15)(4,"div",16),g._uU(5,"Object"),g.qZA()(),g.TgZ(6,"th",17)(7,"div",16),g._uU(8,"Name"),g.qZA()(),g.TgZ(9,"th",17)(10,"div",16),g._uU(11,"link"),g.qZA()()()(),g.TgZ(12,"tbody"),g.YNc(13,Ds,12,4,"tr",18),g.qZA()()),2&e){const e=g.oxw();g.xp6(13),g.Q6J("ngForOf",e.relatedRecords)}}function Bs(e,t){1&e&&(g.TgZ(0,"div",22)(1,"h2",23),g._uU(2,"no related records found"),g.qZA()())}const Ys=function(e){return{"slds-hide":e}};let zs=(()=>{var e;class AdministrationSysTrashcanRecover{constructor(e,t,s,n){(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"toast",void 0),(0,i.Z)(this,"record",{}),(0,i.Z)(this,"self",{}),(0,i.Z)(this,"relatedRecords",[]),(0,i.Z)(this,"loading",!0),(0,i.Z)(this,"recoverrelated",!1),(0,i.Z)(this,"recovering",!1),(0,i.Z)(this,"recovered",new g.vpe),this.metadata=e,this.backend=t,this.language=s,this.toast=n}ngOnInit(){this.backend.getRequest("admin/systrashcan/related/"+this.record.transactionid+"/"+this.record.recordid).subscribe((e=>{this.relatedRecords=e,this.relatedRecords.length>0&&(this.recoverrelated=!0),this.loading=!1}),(e=>{this.loading=!1}))}close(){this.recovered.emit(!1),this.self.destroy()}getModule(e){return this.metadata.getModuleFromSingular(e)}get recorverDisabled(){return 0==this.relatedRecords.length}doRecover(){this.recovering=!0,this.backend.postRequest("admin/systrashcan/recover/"+this.record.id,{recoverrelated:this.recoverrelated}).subscribe((e=>{this.toast.sendToast("record "+this.record.recordname+" recovered"),this.recovered.emit(!0),this.self.destroy()}))}}return e=AdministrationSysTrashcanRecover,(0,i.Z)(AdministrationSysTrashcanRecover,"ɵfac",(function(t){return new(t||e)(g.Y36(f.Pu),g.Y36(m.y),g.Y36(p.d),g.Y36(Fe.A))})),(0,i.Z)(AdministrationSysTrashcanRecover,"ɵcmp",g.Xpm({type:e,selectors:[["ng-component"]],inputs:{record:"record"},decls:22,vars:9,consts:[[3,"close"],["margin","none"],["class","slds-table slds-table_bordered slds-table_cell-buffer",4,"ngIf","ngIfElse"],["norelatedrecords",""],[1,"slds-grid","slds-grid--vertical-align-center","slds-grid--align-spread"],[1,"slds-form-element__control",3,"ngClass"],[1,"slds-checkbox"],["type","checkbox","id","recoverrelated",3,"ngModel","ngModelChange"],["for","recoverrelated",1,"slds-checkbox__label"],[1,"slds-checkbox_faux"],[1,"slds-form-element__label"],[1,"slds-button","slds-button--neutral",3,"click"],[1,"slds-button","slds-button--brand",3,"disabled","click"],[1,"slds-table","slds-table_bordered","slds-table_cell-buffer"],[1,"slds-text-title_caps"],["scope","col","colspan","2"],[1,"slds-truncate"],["scope","col"],[4,"ngFor","ngForOf"],["role","gridcell",1,"slds-cell-shrink"],["size","small",3,"module"],["scope","row"],[1,"slds-p-around--medium","slds-align--absolute-center",2,"height","100%"],[1,"slds-text-heading--small"]],template:function(e,t){if(1&e&&(g.TgZ(0,"system-modal")(1,"system-modal-header",0),g.NdJ("close",(function(){return t.close()})),g._uU(2),g.qZA(),g.TgZ(3,"system-modal-content",1),g.YNc(4,Qs,14,1,"table",2),g.YNc(5,Bs,3,0,"ng-template",null,3,g.W1O),g.qZA(),g.TgZ(7,"system-modal-footer")(8,"div",4)(9,"div")(10,"div",5)(11,"span",6)(12,"input",7),g.NdJ("ngModelChange",(function(e){return t.recoverrelated=e})),g.qZA(),g.TgZ(13,"label",8),g._UZ(14,"span",9),g.TgZ(15,"span",10),g._uU(16,"recover Related"),g.qZA()()()()(),g.TgZ(17,"div")(18,"button",11),g.NdJ("click",(function(){return t.close()})),g._uU(19,"Cancel"),g.qZA(),g.TgZ(20,"button",12),g.NdJ("click",(function(){return t.doRecover()})),g._uU(21,"Recover "),g.qZA()()()()()),2&e){const e=g.MAs(6);g.xp6(2),g.AsE("Recover ",t.record.recordmodule," ",t.record.recordname,""),g.xp6(2),g.Q6J("ngIf",t.relatedRecords.length>0)("ngIfElse",e),g.xp6(6),g.Q6J("ngClass",g.VKq(7,Ys,t.recorverDisabled)),g.xp6(2),g.Q6J("ngModel",t.recoverrelated),g.xp6(8),g.Q6J("disabled",t.loading)}},dependencies:[n.mk,n.sg,n.O5,l.Wl,l.JJ,l.On,L.f,pt.j,bt.x,ft.p,Zt.y],encapsulation:2})),AdministrationSysTrashcanRecover})(),Gs=(()=>{var e;class AdministrationDictRepair{constructor(e,t,s,n){(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"toast",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"injector",void 0),this.backend=e,this.toast=t,this.modal=s,this.injector=n}}return e=AdministrationDictRepair,(0,i.Z)(AdministrationDictRepair,"ɵfac",(function(t){return new(t||e)(g.Y36(m.y),g.Y36(Fe.A),g.Y36(Se.o),g.Y36(g.zs3))})),(0,i.Z)(AdministrationDictRepair,"ɵcmp",g.Xpm({type:e,selectors:[["administration-dict-repair"]],decls:97,vars:0,consts:[[1,"slds-p-around--medium","slds-theme--shade"],[1,"slds-page-header__row"],[1,"slds-page-header__col-title"],[1,"slds-media"],["icon","custom94","sprite","custom"],[1,"slds-media__body"],[1,"slds-page-header__name"],[1,"slds-page-header__name-title"],[1,"slds-page-header__title","slds-truncate"],["label","LBL_REPAIR_DATABASE_DEPRECATED"],[1,"slds-grid--vertical"],["addclasses","slds-icon slds-icon-text-warning","divClass","","icon","warning","sprite","utility","size","large"],["label","LBL_REPAIR_DATABASE_DEPRECATED","length","long"],[1,"slds-table","slds-table_cell-buffer","slds-table_bordered","slds-table_striped","slds-size--1-of-1"],["label","LBL_DEPRECATED"],["label","LBL_NEW"],["label","LBL_REPAIR_DATABASE"],["label","LBL_DICTIONARY_MANAGER"],["label","LBL_REPAIR_CACHE"],["label","LBL_REPAIR_CUSTOM_CACHE"],["label","LBL_DOMAIN_MANAGER"],["label","LBL_RESET_CACHE"],["label","LBL_CACHE_VIEWER"],["label","LBL_CONVERT_DB_CHARSET"],["label","LBL_CLEAN_DB_COLUMNS"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),g._UZ(4,"system-icon",4),g.TgZ(5,"div",5)(6,"div",6)(7,"div",7)(8,"h1")(9,"span",8),g._UZ(10,"system-label",9),g.qZA()()()()()()()()(),g.TgZ(11,"div",10)(12,"div"),g._UZ(13,"system-icon",11),g.TgZ(14,"div")(15,"span",8),g._UZ(16,"system-label",12),g.qZA()()(),g._UZ(17,"div"),g.qZA(),g.TgZ(18,"div",10),g._UZ(19,"div"),g.TgZ(20,"div")(21,"table",13)(22,"thead")(23,"tr")(24,"th"),g._UZ(25,"system-label",14),g.qZA(),g.TgZ(26,"th"),g._UZ(27,"system-label",15),g.qZA(),g._UZ(28,"th")(29,"th"),g.qZA()(),g.TgZ(30,"tbody")(31,"tr")(32,"td"),g._UZ(33,"system-label",16),g.qZA(),g.TgZ(34,"td"),g._UZ(35,"system-label",17),g.qZA(),g.TgZ(36,"td"),g._uU(37,">"),g.qZA(),g.TgZ(38,"td"),g._uU(39,'"'),g._UZ(40,"system-label",16),g._uU(41,'"'),g.qZA()(),g.TgZ(42,"tr")(43,"td"),g._UZ(44,"system-label",18),g.qZA(),g.TgZ(45,"td"),g._UZ(46,"system-label",17),g.qZA(),g.TgZ(47,"td"),g._uU(48,">"),g.qZA(),g.TgZ(49,"td"),g._uU(50,'"'),g._UZ(51,"system-label",18),g._uU(52,'"'),g.qZA()(),g.TgZ(53,"tr")(54,"td"),g._UZ(55,"system-label",19),g.qZA(),g.TgZ(56,"td"),g._UZ(57,"system-label",20),g.qZA(),g.TgZ(58,"td"),g._uU(59,">"),g.qZA(),g.TgZ(60,"td"),g._uU(61,'"'),g._UZ(62,"system-label",19),g._uU(63,'"'),g.qZA()(),g.TgZ(64,"tr")(65,"td"),g._UZ(66,"system-label",21),g.qZA(),g.TgZ(67,"td"),g._UZ(68,"system-label",22),g.qZA(),g.TgZ(69,"td"),g._uU(70,">"),g.qZA(),g.TgZ(71,"td"),g._uU(72,'"'),g._UZ(73,"system-label",21),g._uU(74,'"'),g.qZA()(),g.TgZ(75,"tr")(76,"td"),g._UZ(77,"system-label",23),g.qZA(),g.TgZ(78,"td"),g._UZ(79,"system-label",17),g.qZA(),g.TgZ(80,"td"),g._uU(81,">"),g.qZA(),g.TgZ(82,"td"),g._uU(83,'"'),g._UZ(84,"system-label",23),g._uU(85,'"'),g.qZA()(),g.TgZ(86,"tr")(87,"td"),g._UZ(88,"system-label",24),g.qZA(),g.TgZ(89,"td"),g._UZ(90,"system-label",17),g.qZA(),g.TgZ(91,"td"),g._uU(92,">"),g.qZA(),g.TgZ(93,"td"),g._uU(94,'"'),g._UZ(95,"system-label",24),g._uU(96,'"'),g.qZA()()()()()())},dependencies:[L.f,M._],encapsulation:2})),AdministrationDictRepair})(),Ps=(()=>{var e;class AdministrationDictRepairItem{constructor(e,t,s,n,l){(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"toast",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"injector",void 0),(0,i.Z)(this,"itemlabel",void 0),(0,i.Z)(this,"execute",new g.vpe),this.backend=e,this.toast=t,this.language=s,this.modal=n,this.injector=l}}return e=AdministrationDictRepairItem,(0,i.Z)(AdministrationDictRepairItem,"ɵfac",(function(t){return new(t||e)(g.Y36(m.y),g.Y36(Fe.A),g.Y36(p.d),g.Y36(Se.o),g.Y36(g.zs3))})),(0,i.Z)(AdministrationDictRepairItem,"ɵcmp",g.Xpm({type:e,selectors:[["administration-dict-repair-item"]],inputs:{itemlabel:"itemlabel"},outputs:{execute:"execute"},decls:8,vars:2,consts:[[1,"slds-box","slds-box_xx-small","slds-m-bottom--xx-small"],[1,"slds-grid","slds-grid--vertical-align-center","slds-grid--align-spread"],[1,"slds-text-heading--small"],[1,"slds-p-horizontal--x-small",3,"label"],[1,"slds-button","slds-button--icon","slds-button--icon-border",3,"click"],["icon","custom_apps"],[1,"slds-p-around--x-small"],["length","long",1,"slds-grow",3,"label"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0)(1,"div",1)(2,"div",2),g._UZ(3,"system-label",3),g.qZA(),g.TgZ(4,"button",4),g.NdJ("click",(function(){return t.execute.emit(!0)})),g._UZ(5,"system-button-icon",5),g.qZA()(),g.TgZ(6,"div",6),g._UZ(7,"system-label",7),g.qZA()()),2&e&&(g.xp6(3),g.Q6J("label",t.itemlabel),g.xp6(4),g.Q6J("label",t.itemlabel))},dependencies:[T.J,M._],encapsulation:2})),AdministrationDictRepairItem})();var Hs=s(1061);function Ks(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"tr")(1,"td",12)(2,"div",13)(3,"system-checkbox",14),g.NdJ("ngModelChange",(function(t){const s=g.CHM(e).$implicit;return g.KtG(s.selected=t)})),g.qZA(),g.TgZ(4,"div")(5,"p"),g._uU(6),g.qZA(),g.TgZ(7,"p"),g._uU(8),g.qZA()()()()()}if(2&e){const e=t.$implicit;g.xp6(3),g.Q6J("ngModel",e.selected),g.xp6(3),g.Oqu(e.comment),g.xp6(2),g.Oqu(e.statement)}}function js(e,t){if(1&e&&g._UZ(0,"textarea",19),2&e){const e=t.$implicit;g.Q6J("value",e)}}function $s(e,t){if(1&e&&(g.TgZ(0,"div",15),g._UZ(1,"system-label",16),g.TgZ(2,"div",17),g.YNc(3,js,1,1,"textarea",18),g.qZA()()),2&e){const e=g.oxw();g.xp6(3),g.Q6J("ngForOf",e.dbErrors)}}function Vs(e,t){1&e&&(g.TgZ(0,"div",17),g._UZ(1,"system-label",20),g.qZA())}function Xs(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"button",7),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw();return g.KtG(t.copy2clipboard())})),g._UZ(1,"system-label",21),g.qZA()}if(2&e){const e=g.oxw();g.Q6J("disabled",e.wholeSQL.length<=0)}}let Ws=(()=>{var e;class AdministrationDictRepairModal{constructor(e,t,s,n){(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"toast",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"synced",!1),(0,i.Z)(this,"sql",[]),(0,i.Z)(this,"wholeSQL",void 0),(0,i.Z)(this,"dbErrors",[]),(0,i.Z)(this,"self",{}),this.backend=e,this.toast=t,this.language=s,this.modal=n}close(){this.self.destroy()}get hidden(){return null==typeof navigator.clipboard}doRepair(){this.modal.openModal("SystemLoadingModal").subscribe((e=>{const t=this.sql.filter((e=>e.selected));this.backend.postRequest("admin/repair/database",{},{selectedqueries:t}).subscribe((t=>{t.response?t.synced?(this.toast.sendToast(this.language.getLabel("LBL_REPAIR_DATABASE_ALREADY_SYNCED"),"success"),this.close()):(this.toast.sendToast(this.language.getLabel("LBL_REPAIR_DATABASE_SYNCED"),"success"),this.close()):this.dbErrors=t.errors,e.instance.self.destroy()}),(t=>{if(500===t.status)this.toast.sendAlert(t.message,"error"),this.close(),e.instance.self.destroy()}))}))}copy2clipboard(){const e=this.sql.filter((e=>e.selected)).map((e=>e.statement)).toString().replace(/;,/g,";\n");navigator.clipboard.writeText(e).then((e=>{this.toast.sendToast(this.language.getLabel("LBL_COPIED_TO_CLIPBOARD"),"info")}))}selectAll(){this.sql.forEach((e=>{e.selected=!0}))}}return e=AdministrationDictRepairModal,(0,i.Z)(AdministrationDictRepairModal,"ɵfac",(function(t){return new(t||e)(g.Y36(m.y),g.Y36(Fe.A),g.Y36(p.d),g.Y36(Se.o))})),(0,i.Z)(AdministrationDictRepairModal,"ɵcmp",g.Xpm({type:e,selectors:[["administration-dict-repair-modal"]],decls:15,vars:7,consts:[[3,"close"],["label","LBL_REPAIR_DICTIONARY"],[3,"margin"],["system-multi-select-checkboxes","",1,"slds-table","slds-table_bordered","slds-table_cell-buffer"],[4,"ngFor","ngForOf"],["class","slds-form-element",4,"ngIf"],["class","slds-form-element__control",4,"ngIf"],[1,"slds-button","slds-button--neutral",3,"disabled","click"],["label","LBL_SELECT_ALL"],["class","slds-button slds-button--neutral",3,"disabled","click",4,"ngIf"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_EXECUTE"],[2,"white-space","normal"],[1,"slds-grid","slds-grid--vertical-align-center","slds-p-around--xx-small"],[3,"ngModel","ngModelChange"],[1,"slds-form-element"],["label","LBL_LAST_DB_ERROR"],[1,"slds-form-element__control"],["disabled","","class","slds-textarea","style","min-height: 400px;",3,"value",4,"ngFor","ngForOf"],["disabled","",1,"slds-textarea",2,"min-height","400px",3,"value"],["label","LBL_REPAIR_DATABASE_ALREADY_SYNCED"],["label","LBL_COPY_TO_CLIPBOARD"]],template:function(e,t){1&e&&(g.TgZ(0,"system-modal")(1,"system-modal-header",0),g.NdJ("close",(function(){return t.close()})),g._UZ(2,"system-label",1),g.qZA(),g.TgZ(3,"system-modal-content",2)(4,"table",3)(5,"tbody"),g.YNc(6,Ks,9,3,"tr",4),g.qZA()(),g.YNc(7,$s,4,1,"div",5),g.YNc(8,Vs,2,0,"div",6),g.qZA(),g.TgZ(9,"system-modal-footer")(10,"button",7),g.NdJ("click",(function(){return t.selectAll()})),g._UZ(11,"system-label",8),g.qZA(),g.YNc(12,Xs,2,1,"button",9),g.TgZ(13,"button",10),g.NdJ("click",(function(){return t.doRepair()})),g._UZ(14,"system-label",11),g.qZA()()()),2&e&&(g.xp6(3),g.Q6J("margin","none"),g.xp6(3),g.Q6J("ngForOf",t.sql),g.xp6(1),g.Q6J("ngIf",t.dbErrors.length>0),g.xp6(1),g.Q6J("ngIf",""==t.sql),g.xp6(2),g.Q6J("disabled",t.sql.length<=0),g.xp6(2),g.Q6J("ngIf",!t.hidden),g.xp6(1),g.Q6J("disabled",t.sql.length<=0))},dependencies:[n.sg,n.O5,l.JJ,l.On,H.U,M._,pt.j,bt.x,ft.p,Zt.y,Hs.Q],encapsulation:2})),AdministrationDictRepairModal})(),ei=(()=>{var e;class AdministrationDictRepairACLRoles{constructor(e,t,s,n){(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"toast",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"modal",void 0),this.backend=e,this.toast=t,this.language=s,this.modal=n}executeRepairRoles(){let e=this.modal.await(this.language.getLabel("LBL_LOADING"));this.backend.getRequest("admin/repair/aclroles").subscribe((t=>{e.emit(!0),t?this.toast.sendToast(this.language.getLabel("LBL_ROLES_REPAIRED"),"success"):this.toast.sendToast(this.language.getLabel("LBL_ERROR"),"error")}))}}return e=AdministrationDictRepairACLRoles,(0,i.Z)(AdministrationDictRepairACLRoles,"ɵfac",(function(t){return new(t||e)(g.Y36(m.y),g.Y36(Fe.A),g.Y36(p.d),g.Y36(Se.o))})),(0,i.Z)(AdministrationDictRepairACLRoles,"ɵcmp",g.Xpm({type:e,selectors:[["administration-dict-repair-acl-roles"]],decls:6,vars:0,consts:[[1,"slds-grid","slds-grid--vertical-align-center","slds-grid--align-spread","slds-p-vertical--xx-small","slds-border--bottom"],["icon","custom_apps","size","x-small"],["label","LBL_REPAIR_ACL_ROLES",1,"slds-p-horizontal--x-small"],["label","LBL_REPAIR_ACL_ROLES","length","long",1,"slds-grow"],[1,"slds-button","slds-button--neutral","slds-button--small",3,"click"],["label","LBL_EXECUTE"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0),g._UZ(1,"system-utility-icon",1)(2,"system-label",2)(3,"system-label",3),g.TgZ(4,"button",4),g.NdJ("click",(function(){return t.executeRepairRoles()})),g._UZ(5,"system-label",5),g.qZA()())},dependencies:[M._,J.r],encapsulation:2})),AdministrationDictRepairACLRoles})();function ti(e,t){if(1&e&&(g.TgZ(0,"option",18),g._uU(1),g.qZA()),2&e){const e=t.$implicit;g.Q6J("value",e),g.xp6(1),g.Oqu(e)}}function si(e,t){if(1&e&&(g.TgZ(0,"div"),g._uU(1),g.qZA()),2&e){const e=g.oxw().$implicit;g.xp6(1),g.hij(" ",e.value.name," ")}}function ii(e,t){1&e&&(g.TgZ(0,"div"),g._UZ(1,"system-icon",25),g.qZA())}function ni(e,t){if(1&e&&(g.TgZ(0,"div"),g._uU(1),g.qZA()),2&e){const e=g.oxw().$implicit;g.xp6(1),g.hij(" ",e.value.name," ")}}function li(e,t){1&e&&(g.TgZ(0,"div"),g._UZ(1,"system-icon",25),g.qZA())}function oi(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div")(1,"system-checkbox",26),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw().$implicit;return g.KtG(s.value.todelete=t)})),g.qZA()()}if(2&e){const e=g.oxw().$implicit;g.xp6(1),g.Q6J("ngModel",e.value.todelete)("disabled",!e.value.db_available)}}const ai=function(){return{"background-color":"#C7D6A9"}},di=function(){return{"background-color":"#EDD0AB"}};function ri(e,t){if(1&e&&(g.TgZ(0,"tr",23)(1,"td"),g.YNc(2,si,2,1,"div",13),g.YNc(3,ii,2,0,"div",13),g.qZA(),g.TgZ(4,"td",24),g.YNc(5,ni,2,1,"div",13),g.YNc(6,li,2,0,"div",13),g.qZA(),g.TgZ(7,"td"),g.YNc(8,oi,2,2,"div",13),g.qZA()()),2&e){const e=t.$implicit;g.Q6J("ngStyle",e.value.vardef_available&&e.value.db_available?g.DdM(6,ai):g.DdM(7,di)),g.xp6(2),g.Q6J("ngIf",e.value.vardef_available),g.xp6(1),g.Q6J("ngIf",!e.value.vardef_available),g.xp6(2),g.Q6J("ngIf",e.value.db_available),g.xp6(1),g.Q6J("ngIf",!e.value.db_available),g.xp6(2),g.Q6J("ngIf",e.value.db_available&&!e.value.vardef_available)}}function ci(e,t){if(1&e&&(g.TgZ(0,"div")(1,"table",19)(2,"thead")(3,"tr",20)(4,"th",21),g._uU(5,"Vardef"),g.qZA(),g.TgZ(6,"th",21),g._uU(7,"Database column"),g.qZA(),g._UZ(8,"th",21),g.qZA()(),g.TgZ(9,"tbody"),g.YNc(10,ri,9,8,"tr",22),g.ALo(11,"keyvalue"),g.qZA()()()),2&e){const e=g.oxw();g.xp6(10),g.Q6J("ngForOf",g.lcZ(11,1,e.allFields))}}let gi=(()=>{var e;class AdministrationDictRepairDbColumnsModal{constructor(e,t,s,n,l,o){(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"toast",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"helper",void 0),(0,i.Z)(this,"self",{}),(0,i.Z)(this,"_module",""),(0,i.Z)(this,"modules",void 0),(0,i.Z)(this,"allFields",[]),this.backend=e,this.toast=t,this.language=s,this.modal=n,this.metadata=l,this.helper=o,this.modules=this.metadata.getModules(),this.modules.sort()}get module(){return this._module}set module(e){e!=this._module&&(this._module=e,this.mergeColumns())}mergeColumns(){this.allFields=[],this.backend.getRequest("dictionary/browser/"+this.module+"/dbcolumns").subscribe((e=>{const t=this.metadata.getModuleFields(this.module);for(let e in t)"non-db"!=t[e].source&&this.allFields.unshift({name:t[e].name,vardef_available:!0});for(let t in e){let s=e[t].name,i=!1;for(let e in this.allFields)this.allFields[e].name==s&&(this.allFields[e].db_available=!0,this.allFields.push(this.allFields[e]),this.allFields.splice(e,1),i=!0);i||this.allFields.unshift({name:s,db_available:!0})}}))}selectAll(){for(let e of this.allFields.filter((e=>e.db_available&&!e.vardef_available)))e.todelete=!0}get canSelectAll(){return this.allFields&&this.allFields.filter((e=>e.db_available&&!e.vardef_available&&!e.todelete)).length>0}get canDelete(){return this.allFields&&this.allFields.filter((e=>e.todelete)).length>0}close(){this.self.destroy()}doRepair(){let e="";for(let t of this.allFields.filter((e=>e.todelete)))e+="- "+t.name+"\r\n";this.helper.confirm(this.language.getLabel("LBL_CLEAN_DB_COLUMNS"),this.language.getLabel("MSG_DELETE_COLUMNS","long")+"\r\n\r\n"+e).subscribe((e=>{e&&this.delete()}))}delete(){this.modal.openModal("SystemLoadingModal").subscribe((e=>{let t={dbcolumns:this.allFields.filter((e=>e.todelete)),module:this.module};this.backend.postRequest("admin/repair/dbcolumns",{},t).subscribe((t=>{t?(this.toast.sendToast(this.language.getLabel("MSG_SUCCESSFULLY_EXECUTED"),"success"),this.mergeColumns()):(this.toast.sendToast(this.language.getLabel("LBL_ERROR"),"error"),this.mergeColumns()),e.instance.self.destroy()}))}))}}return e=AdministrationDictRepairDbColumnsModal,(0,i.Z)(AdministrationDictRepairDbColumnsModal,"ɵfac",(function(t){return new(t||e)(g.Y36(m.y),g.Y36(Fe.A),g.Y36(p.d),g.Y36(Se.o),g.Y36(f.Pu),g.Y36(P._))})),(0,i.Z)(AdministrationDictRepairDbColumnsModal,"ɵcmp",g.Xpm({type:e,selectors:[["administration-dict-repair-db-columns-modal"]],decls:20,vars:6,consts:[[3,"close"],["label","LBL_CLEAN_DB_COLUMNS"],["margin","none",3,"grow"],[1,"slds-p-around--x-small","slds-border--bottom"],[1,"slds-form-element","slds-grid","slds-grid--vertical-align-center"],["for","moduleselect",1,"slds-form-element__label"],["label","LBL_MODULE"],[1,"slds-form-element__control","slds-col"],[1,"slds-select_container"],["id","moduleselect",1,"slds-select",3,"ngModel","ngModelChange"],["value",""],["label","LBL_SELECT"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"slds-button","slds-button--neutral",3,"disabled","click"],["label","LBL_SELECT_ALL"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_DELETE_IRREVOCABLY"],[3,"value"],[1,"slds-table","slds-table--bordered","slds-table--cell-buffer"],[1,"slds-text-title--caps"],["scope","col"],[3,"ngStyle",4,"ngFor","ngForOf"],[3,"ngStyle"],[1,"slds-truncate"],["icon","first_non_empty","size","x-small"],[3,"ngModel","disabled","ngModelChange"]],template:function(e,t){1&e&&(g.TgZ(0,"system-modal")(1,"system-modal-header",0),g.NdJ("close",(function(){return t.close()})),g._UZ(2,"system-label",1),g.qZA(),g.TgZ(3,"system-modal-content",2)(4,"div",3)(5,"div",4)(6,"label",5),g._UZ(7,"system-label",6),g.qZA(),g.TgZ(8,"div",7)(9,"div",8)(10,"select",9),g.NdJ("ngModelChange",(function(e){return t.module=e})),g.TgZ(11,"option",10),g._UZ(12,"system-label",11),g.qZA(),g.YNc(13,ti,2,2,"option",12),g.qZA()()()()(),g.YNc(14,ci,12,3,"div",13),g.qZA(),g.TgZ(15,"system-modal-footer")(16,"button",14),g.NdJ("click",(function(){return t.selectAll()})),g._UZ(17,"system-label",15),g.qZA(),g.TgZ(18,"button",16),g.NdJ("click",(function(){return t.doRepair()})),g._UZ(19,"system-label",17),g.qZA()()()),2&e&&(g.xp6(3),g.Q6J("grow",!0),g.xp6(7),g.Q6J("ngModel",t.module),g.xp6(3),g.Q6J("ngForOf",t.modules),g.xp6(1),g.Q6J("ngIf",t.module),g.xp6(2),g.Q6J("disabled",!t.canSelectAll),g.xp6(2),g.Q6J("disabled",!t.canDelete))},dependencies:[n.sg,n.O5,n.PC,l.YN,l.Kr,l.EJ,l.JJ,l.On,H.U,L.f,M._,pt.j,bt.x,ft.p,Zt.y,n.Nd],encapsulation:2})),AdministrationDictRepairDbColumnsModal})();var ui=s(2803);function mi(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"tr",40)(1,"td",41)(2,"system-checkbox",42),g.NdJ("ngModelChange",(function(t){const s=g.CHM(e).$implicit;return g.KtG(s.selected=t)}))("ngModelChange",(function(t){const s=g.CHM(e).$implicit,i=g.oxw();return g.KtG(i.selectTable(t,s.table_name))})),g.qZA()(),g.TgZ(3,"td")(4,"div",30),g._uU(5),g.qZA()(),g.TgZ(6,"td")(7,"div",30),g._uU(8),g.qZA()(),g.TgZ(9,"td")(10,"div",30),g._uU(11),g.qZA()()()}if(2&e){const e=t.$implicit;g.xp6(2),g.Q6J("ngModel",e.selected),g.xp6(3),g.hij(" ",e.table_name," "),g.xp6(3),g.hij(" ",e.character_set_name," "),g.xp6(3),g.hij(" ",e.collation_name," ")}}function hi(e,t){1&e&&(g.TgZ(0,"tbody")(1,"tr",40)(2,"td"),g._UZ(3,"system-stencil"),g.qZA(),g.TgZ(4,"td"),g._UZ(5,"system-stencil"),g.qZA(),g.TgZ(6,"td"),g._UZ(7,"system-stencil"),g.qZA(),g.TgZ(8,"td"),g._UZ(9,"system-stencil"),g.qZA()(),g.TgZ(10,"tr",40)(11,"td"),g._UZ(12,"system-stencil"),g.qZA(),g.TgZ(13,"td"),g._UZ(14,"system-stencil"),g.qZA(),g.TgZ(15,"td"),g._UZ(16,"system-stencil"),g.qZA(),g.TgZ(17,"td"),g._UZ(18,"system-stencil"),g.qZA()(),g.TgZ(19,"tr",40)(20,"td"),g._UZ(21,"system-stencil"),g.qZA(),g.TgZ(22,"td"),g._UZ(23,"system-stencil"),g.qZA(),g.TgZ(24,"td"),g._UZ(25,"system-stencil"),g.qZA(),g.TgZ(26,"td"),g._UZ(27,"system-stencil"),g.qZA()()())}let pi=(()=>{var e;class AdministrationDictRepairConvertDBCharsetModal{constructor(e,t,s){(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"toast",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"convertToCharset",void 0),(0,i.Z)(this,"databaseData",void 0),(0,i.Z)(this,"tables",[]),(0,i.Z)(this,"filteredTables",[]),(0,i.Z)(this,"selectedTables",[]),(0,i.Z)(this,"self",void 0),(0,i.Z)(this,"_listFilterTerm",void 0),this.backend=e,this.toast=t,this.language=s}get listFilterTerm(){return this._listFilterTerm}set listFilterTerm(e){this._listFilterTerm=e,this.filteredTables=this.tables.filter((t=>t.table_name.indexOf(e)>-1))}ngOnInit(){this.loadDBTables()}close(){this.self.destroy()}convertTables(){this.close();const e={tables:this.filteredTables.filter((e=>!!e.selected)).map((e=>e.table_name)),charset:this.convertToCharset};this.backend.postRequest("admin/convert/tables",{},e).subscribe((e=>{e?this.toast.sendToast(this.language.getLabel("MSG_SUCCESSFULLY_EXECUTED"),"success"):this.toast.sendToast(this.language.getLabel("ERR_FAILED_TO_EXECUTE"),"error")}))}convertDatabase(){this.close();const e={charset:this.convertToCharset};this.backend.postRequest("admin/convert/database",{},e).subscribe((e=>{e?this.toast.sendToast(this.language.getLabel("MSG_SUCCESSFULLY_EXECUTED"),"success"):this.toast.sendToast(this.language.getLabel("ERR_FAILED_TO_EXECUTE"),"error")}))}toggleSelectAll(e){this.selectedTables=e?this.filteredTables.map((e=>e.table_name)):[],this.filteredTables.forEach((t=>t.selected=e))}selectTable(e,t){e&&!this.selectedTables.some((e=>e==t))?this.selectedTables.push(t):e||(this.selectedTables=this.selectedTables.filter((e=>e!=t)))}loadDBTables(){this.backend.getRequest("admin/charset/database").subscribe((e=>{this.tables=e.tables,this.filteredTables=this.tables,this.databaseData=e.database}))}}return e=AdministrationDictRepairConvertDBCharsetModal,(0,i.Z)(AdministrationDictRepairConvertDBCharsetModal,"ɵfac",(function(t){return new(t||e)(g.Y36(m.y),g.Y36(Fe.A),g.Y36(p.d))})),(0,i.Z)(AdministrationDictRepairConvertDBCharsetModal,"ɵcmp",g.Xpm({type:e,selectors:[["administration-dict-repair-convert-db-charset-modal"]],decls:58,vars:12,consts:[[3,"close"],["label","LBL_CONVERT_DATABASE_CHARSET"],["margin","none",3,"grow"],[1,"slds-grid","slds-grid--vertical","slds-height_full"],[1,"slds-grid","slds-p-around--x-small"],[1,"slds-grow"],[1,"slds-grid","slds-grid--vertical-align-center"],["label","LBL_DATABASE",1,"slds-m-right--x-small","slds-text-title--caps"],["label","LBL_CHARSET",1,"slds-m-right--x-small","slds-text-title--caps"],["label","LBL_COLLATION",1,"slds-m-right--x-small","slds-text-title--caps"],[1,"slds-grid","slds-grid--vertical-align-end"],[1,"slds-form-element","slds-m-right--x-small"],[1,"slds-form-element__label"],["label","LBL_CONVERT_TO_CHARSET"],[1,"slds-form-element__control"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],["value","utf8mb4"],["value","utf8"],[1,"slds-button","slds-button--brand",2,"margin-bottom","1px",3,"disabled","click"],["label","LBL_CONVERT_DATABASE"],[1,"slds-grid","slds-grid--vertical-align-center","slds-border--bottom","slds-p-around--x-small"],["type","text","system-placeholder","LBL_SEARCH",1,"slds-input","slds-m-right--x-small",3,"ngModel","ngModelChange"],["icon","filterList","size","x-small"],[1,"slds-scrollable--y","slds-grow",2,"min-height","0"],["role","grid",1,"slds-table","slds-table_bordered","slds-table_fixed-layout","slds-table--header-fixed"],[1,"slds-line-height_reset"],[1,"slds-cell-shrink"],[3,"indeterminate","ngModel","ngModelChange"],["scope","col"],[1,"slds-truncate"],["label","LBL_NAME"],["label","LBL_CHARSET"],["label","LBL_COLLATION"],["class","slds-hint-parent",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_CONVERT_TABLES"],[1,"slds-hint-parent"],["role","gridcell",1,"slds-text-align_right"],[3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(g.TgZ(0,"system-modal")(1,"system-modal-header",0),g.NdJ("close",(function(){return t.close()})),g._UZ(2,"system-label",1),g.qZA(),g.TgZ(3,"system-modal-content",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6),g._UZ(8,"system-label",7),g.TgZ(9,"span"),g._uU(10),g.qZA()(),g.TgZ(11,"div",6),g._UZ(12,"system-label",8),g.TgZ(13,"span"),g._uU(14),g.qZA()(),g.TgZ(15,"div",6),g._UZ(16,"system-label",9),g.TgZ(17,"span"),g._uU(18),g.qZA()()(),g.TgZ(19,"div",10)(20,"div",11)(21,"label",12),g._UZ(22,"system-label",13),g.qZA(),g.TgZ(23,"div",14)(24,"div",15)(25,"select",16),g.NdJ("ngModelChange",(function(e){return t.convertToCharset=e})),g.TgZ(26,"option",17),g._uU(27," UTF8 Multibyte 4 "),g.qZA(),g.TgZ(28,"option",18),g._uU(29," utf8 "),g.qZA()()()()(),g.TgZ(30,"button",19),g.NdJ("click",(function(){return t.convertDatabase()})),g._UZ(31,"system-label",20),g.qZA()()(),g.TgZ(32,"div",21)(33,"input",22),g.NdJ("ngModelChange",(function(e){return t.listFilterTerm=e})),g.qZA(),g._UZ(34,"system-utility-icon",23),g.qZA(),g.TgZ(35,"div",24)(36,"table",25)(37,"thead")(38,"tr",26)(39,"th",27)(40,"system-checkbox",28),g.NdJ("ngModelChange",(function(e){return t.toggleSelectAll(e)})),g.qZA()(),g.TgZ(41,"th",29)(42,"div",30),g._UZ(43,"system-label",31),g.qZA()(),g.TgZ(44,"th",29)(45,"div",30),g._UZ(46,"system-label",32),g.qZA()(),g.TgZ(47,"th",29)(48,"div",30),g._UZ(49,"system-label",33),g.qZA()()()(),g.TgZ(50,"tbody"),g.YNc(51,mi,12,4,"tr",34),g.qZA(),g.YNc(52,hi,28,0,"tbody",35),g.qZA()()()(),g.TgZ(53,"system-modal-footer")(54,"button",36),g.NdJ("click",(function(){return t.close()})),g._UZ(55,"system-label",37),g.qZA(),g.TgZ(56,"button",38),g.NdJ("click",(function(){return t.convertTables()})),g._UZ(57,"system-label",39),g.qZA()()()),2&e&&(g.xp6(3),g.Q6J("grow",!0),g.xp6(7),g.hij(" ",null==t.databaseData?null:t.databaseData.database," "),g.xp6(4),g.hij(" ",null==t.databaseData?null:t.databaseData.charset," "),g.xp6(4),g.hij(" ",null==t.databaseData?null:t.databaseData.collation," "),g.xp6(7),g.Q6J("ngModel",t.convertToCharset),g.xp6(5),g.Q6J("disabled",!t.convertToCharset),g.xp6(3),g.Q6J("ngModel",t.listFilterTerm),g.xp6(7),g.Q6J("indeterminate",t.selectedTables.length>0&&t.selectedTables.length<t.filteredTables.length)("ngModel",t.selectedTables.length==t.filteredTables.length),g.xp6(11),g.Q6J("ngForOf",t.filteredTables),g.xp6(1),g.Q6J("ngIf",0===t.tables.length),g.xp6(4),g.Q6J("disabled",0==t.selectedTables.length||!t.convertToCharset))},dependencies:[n.sg,n.O5,l.YN,l.Kr,l.Fj,l.EJ,l.JJ,l.On,H.U,M._,pt.j,bt.x,ft.p,Zt.y,ui.B,J.r,is.A],encapsulation:2})),AdministrationDictRepairConvertDBCharsetModal})();var bi=s(3385);function fi(e,t){if(1&e&&(g.TgZ(0,"option",3),g._UZ(1,"system-label",4),g.qZA()),2&e){const e=t.$implicit;g.Q6J("ngValue",e.value),g.xp6(1),g.Q6J("label",e.label)}}let Zi=(()=>{var e;class AdministrationConfigEditorEnum{set _value(e){this.value=e,this._newValue.emit(e)}get _value(){return"number"==typeof this.value?this.value.toString():this.value}constructor(e,t,s,n,l){(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"toast",void 0),(0,i.Z)(this,"options",[]),(0,i.Z)(this,"value",void 0),(0,i.Z)(this,"_newValue",new g.vpe),this.metadata=e,this.language=t,this.backend=s,this.modal=n,this.toast=l}}return e=AdministrationConfigEditorEnum,(0,i.Z)(AdministrationConfigEditorEnum,"ɵfac",(function(t){return new(t||e)(g.Y36(f.Pu),g.Y36(p.d),g.Y36(m.y),g.Y36(Se.o),g.Y36(Fe.A))})),(0,i.Z)(AdministrationConfigEditorEnum,"ɵcmp",g.Xpm({type:e,selectors:[["administration-configeditor-enum"]],inputs:{options:"options",value:"value"},outputs:{_newValue:"newvalue"},decls:3,vars:2,consts:[[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"],[3,"label"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0)(1,"select",1),g.NdJ("ngModelChange",(function(e){return t._value=e})),g.YNc(2,fi,2,2,"option",2),g.qZA()()),2&e&&(g.xp6(1),g.Q6J("ngModel",t._value),g.xp6(1),g.Q6J("ngForOf",t.options))},dependencies:[n.sg,l.YN,l.Kr,l.EJ,l.JJ,l.On,M._],encapsulation:2})),AdministrationConfigEditorEnum})();function _i(e,t){if(1&e){const e=g.EpF();g.ynx(0),g.TgZ(1,"button",12),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw();return g.KtG(t.copyData())})),g._UZ(2,"system-button-icon",13),g.qZA(),g.TgZ(3,"button",14),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw();return g.KtG(t.pasteData())})),g._UZ(4,"system-button-icon",15),g.qZA(),g.BQk()}if(2&e){const e=g.oxw();g.xp6(1),g.Q6J("disabled",e.loading),g.xp6(2),g.Q6J("disabled",e.loading)}}function vi(e,t){if(1&e&&(g.TgZ(0,"div"),g._UZ(1,"workbench-config-label",21),g.qZA()),2&e){const e=g.oxw().$implicit,t=g.oxw();g.xp6(1),g.Q6J("option",e.label)("description",t.language.getLabel("LBL_TECHNICAL_NAME","")+": "+e.name+"\n"+t.language.getLabel(e.label,"","long"))}}function Ai(e,t){if(1&e&&(g.TgZ(0,"div"),g._uU(1),g.qZA()),2&e){const e=g.oxw().$implicit;g.xp6(1),g.Oqu(e.name)}}function yi(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"system-checkbox",22),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw().$implicit,i=g.oxw();return g.KtG(i.configvalues[s.name]=t)})),g.qZA()}if(2&e){const e=g.oxw().$implicit,t=g.oxw();g.Q6J("ngModel",t.configvalues[e.name])}}function xi(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"administration-configeditor-enum",23),g.NdJ("newvalue",(function(t){g.CHM(e);const s=g.oxw().$implicit,i=g.oxw();return g.KtG(i.configvalues[s.name]=t)})),g.qZA()}if(2&e){const e=g.oxw().$implicit,t=g.oxw();g.Q6J("value",t.configvalues[e.name])("options",e.options)}}function Ti(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",24)(1,"input",25),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw().$implicit,i=g.oxw();return g.KtG(i.configvalues[s.name]=t)})),g.qZA()()}if(2&e){const e=g.oxw().$implicit,t=g.oxw();g.xp6(1),g.Q6J("disabled",t.loading)("ngModel",t.configvalues[e.name])}}function Li(e,t){if(1&e&&(g.TgZ(0,"tr",16)(1,"td"),g.YNc(2,vi,2,2,"div",3),g.YNc(3,Ai,2,1,"div",3),g.qZA(),g.TgZ(4,"td"),g.ynx(5,17),g.YNc(6,yi,1,1,"system-checkbox",18),g.YNc(7,xi,1,2,"administration-configeditor-enum",19),g.YNc(8,Ti,2,2,"div",20),g.BQk(),g.qZA()()),2&e){const e=t.$implicit;g.xp6(2),g.Q6J("ngIf",e.label),g.xp6(1),g.Q6J("ngIf",!e.label),g.xp6(2),g.Q6J("ngSwitch",e.type),g.xp6(1),g.Q6J("ngSwitchCase","bool"),g.xp6(1),g.Q6J("ngSwitchCase","enum")}}let Mi=(()=>{var e;class AdministrationConfigEditor{constructor(e,t,s,n,l){(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"toast",void 0),(0,i.Z)(this,"componentconfig",{}),(0,i.Z)(this,"configvalues",{}),(0,i.Z)(this,"loading",!0),this.metadata=e,this.language=t,this.backend=s,this.modal=n,this.toast=l}ngOnInit(){this.modal.openModal("SystemLoadingModal").subscribe((e=>{this.backend.getRequest("configuration/configurator/editor/"+this.componentconfig.category).subscribe((t=>{this.configvalues=t,this.loading=!1,e.instance.self.destroy()}))}))}get items(){let e=[];for(let t of this.componentconfig.items)!0!==t.hidden&&e.push(t);return e}save(){this.loading=!0,this.modal.openModal("SystemLoadingModal").subscribe((e=>{e.instance.messagelabel="LBL_SAVING_DATA",this.backend.postRequest("configuration/configurator/editor/"+this.componentconfig.category,[],{config:this.configvalues}).subscribe((t=>{this.loading=!1,e.instance.self.destroy()}))}))}get canCopyPaste(){return!!navigator.clipboard?.readText}copyData(){let e=document.createElement("textarea");e.style.position="fixed",e.style.left="0",e.style.top="0",e.style.opacity="0";let t={};for(let e of this.componentconfig.items)t[e.name]=this.configvalues.hasOwnProperty(e.name)?this.configvalues[e.name]:null;e.value=JSON.stringify(t),document.body.appendChild(e),e.focus(),e.select(),document.execCommand("copy"),document.body.removeChild(e),this.toast.sendToast("Data of all fields copied to clipboard.","success")}pasteData(){navigator.clipboard.readText().then((e=>{let t,s=0,i=0;try{t=JSON.parse(e)}catch(e){return void this.toast.sendToast("No valid configuration data found in clipboard.","error")}for(let e of this.componentconfig.items)t.hasOwnProperty(e.name)?(this.configvalues[e.name]=t[e.name],s++):(this.configvalues[e.name]=null,i++);let n=Object.keys(t).length-s,l="";l+=n?n+" unknown values ignored. ":"",l+=i?i+" fields emptied, because no data definied. ":"",this.toast.sendToast("Data pasted from clipboard successfully. "+l+"Don´t forget to save data.","success",null,25)}))}get label(){return this.componentconfig.label?this.componentconfig.label:"LBL_EDITOR"}}return e=AdministrationConfigEditor,(0,i.Z)(AdministrationConfigEditor,"ɵfac",(function(t){return new(t||e)(g.Y36(f.Pu),g.Y36(p.d),g.Y36(m.y),g.Y36(Se.o),g.Y36(Fe.A))})),(0,i.Z)(AdministrationConfigEditor,"ɵcmp",g.Xpm({type:e,selectors:[["administration-configeditor"]],decls:15,vars:3,consts:[[1,"slds-grid","slds-grid--align-spread","slds-p-around--medium"],[1,"slds-text-heading--medium"],[3,"label"],[4,"ngIf"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_SAVE"],[1,"slds-table","slds-table--bordered","slds-table--cell-buffer"],[1,"slds-text-title--caps"],["scope","col"],["label","LBL_NAME"],["label","LBL_VALUE"],["style","height: 41px; vertical-align: middle","class","slds-align-middle",4,"ngFor","ngForOf"],[1,"slds-button","slds-button--icon-border","slds-button--neutral","slds-col_bump-left",3,"disabled","click"],["icon","copy","size","medium"],[1,"slds-button","slds-button--icon-border","slds-button--neutral","slds-m-right--medium",3,"disabled","click"],["icon","paste","size","medium"],[1,"slds-align-middle",2,"height","41px","vertical-align","middle"],[3,"ngSwitch"],[3,"ngModel","ngModelChange",4,"ngSwitchCase"],[3,"value","options","newvalue",4,"ngSwitchCase"],["class","slds-form-element__control",4,"ngSwitchDefault"],[3,"option","description"],[3,"ngModel","ngModelChange"],[3,"value","options","newvalue"],[1,"slds-form-element__control"],["type","text",1,"slds-input",3,"disabled","ngModel","ngModelChange"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0)(1,"h2",1),g._UZ(2,"system-label",2),g.qZA(),g.YNc(3,_i,5,2,"ng-container",3),g.TgZ(4,"button",4),g.NdJ("click",(function(){return t.save()})),g._UZ(5,"system-label",5),g.qZA()(),g.TgZ(6,"table",6)(7,"thead")(8,"tr",7)(9,"th",8),g._UZ(10,"system-label",9),g.qZA(),g.TgZ(11,"th",8),g._UZ(12,"system-label",10),g.qZA()()(),g.TgZ(13,"tbody"),g.YNc(14,Li,9,5,"tr",11),g.qZA()()),2&e&&(g.xp6(2),g.Q6J("label",t.label),g.xp6(1),g.Q6J("ngIf",t.canCopyPaste),g.xp6(11),g.Q6J("ngForOf",t.items))},dependencies:[n.sg,n.O5,n.RF,n.n9,n.ED,l.Fj,l.JJ,l.On,T.J,H.U,M._,bi.R,Zi],encapsulation:2})),AdministrationConfigEditor})();var Ji=s(5710),qi=s(2294),Ei=s(2868),Ui=s(3543);function Ci(e,t){1&e&&g._UZ(0,"system-stencil")}function ki(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",5)(1,"div",6),g._UZ(2,"system-label",7),g.qZA(),g.TgZ(3,"div",8)(4,"div",9),g._uU(5),g.qZA(),g.TgZ(6,"button",10),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw(2);return g.KtG(t.view.setEditMode())})),g._UZ(7,"system-button-icon",11),g.qZA()()()}if(2&e){const e=g.oxw(2);g.xp6(5),g.hij(" ",e.model.data.method," "),g.xp6(2),g.Q6J("icon","edit")}}function Ni(e,t){1&e&&g._UZ(0,"system-stencil")}function Si(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",5)(1,"div",6),g._UZ(2,"system-label",12),g.qZA(),g.TgZ(3,"div",8)(4,"div",9),g._uU(5),g.qZA(),g.TgZ(6,"button",10),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw(2);return g.KtG(t.view.setEditMode())})),g._UZ(7,"system-button-icon",11),g.qZA()()()}if(2&e){const e=g.oxw(2);g.xp6(5),g.hij(" ",e.model.data.method_params," "),g.xp6(2),g.Q6J("icon","edit")}}function Fi(e,t){if(1&e&&(g.TgZ(0,"div",3)(1,"div"),g.YNc(2,Ci,1,0,"system-stencil",2),g.YNc(3,ki,8,2,"div",4),g.qZA(),g.TgZ(4,"div"),g.YNc(5,Ni,1,0,"system-stencil",2),g.YNc(6,Si,8,2,"div",4),g.qZA()()),2&e){const e=g.oxw();g.xp6(2),g.Q6J("ngIf",e.model.isLoading),g.xp6(1),g.Q6J("ngIf",!e.model.isLoading),g.xp6(2),g.Q6J("ngIf",e.model.isLoading),g.xp6(1),g.Q6J("ngIf",!e.model.isLoading)}}function wi(e,t){if(1&e&&(g.TgZ(0,"option",24),g._uU(1),g.qZA()),2&e){const e=t.$implicit;g.Q6J("value",e),g.xp6(1),g.Oqu(e)}}function Ii(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div")(1,"div",13)(2,"div",14)(3,"label",15)(4,"abbr",16),g._uU(5,"*"),g.qZA(),g._UZ(6,"system-label",7),g.qZA(),g.TgZ(7,"div",17)(8,"system-select",18),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.className=t)}))("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.setClassname(t))})),g.qZA(),g.TgZ(9,"div",19)(10,"select",20),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.methodName=t)})),g.YNc(11,wi,2,2,"option",21),g.qZA()()()()(),g.TgZ(12,"div",13)(13,"div",14)(14,"label",15),g._UZ(15,"system-label",12),g.qZA(),g.TgZ(16,"div",22)(17,"textarea",23),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.model.data.method_params=t)})),g.qZA()()()()()}if(2&e){const e=g.oxw();g.xp6(8),g.Q6J("selectList",e.availableClasses)("ngModel",e.className),g.xp6(2),g.Q6J("disabled",!e.classExists||0==e._methods.length)("ngModel",e.methodName),g.xp6(1),g.Q6J("ngForOf",e._methods),g.xp6(6),g.Q6J("ngModel",e.model.data.method_params)}}let Oi=(()=>{var e;class AdministrationJobMethods{constructor(e,t,s,n){(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"cdRef",void 0),(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"_methods",[]),(0,i.Z)(this,"availableClasses",[]),(0,i.Z)(this,"_value",void 0),(0,i.Z)(this,"_class",""),(0,i.Z)(this,"_method",""),(0,i.Z)(this,"className",void 0),(0,i.Z)(this,"classExists",!1),this.model=e,this.view=t,this.cdRef=s,this.backend=n}setClassname(e){this.className=e,this._class=e.name,""!=this._class?this.validateNamespace():(this._method="",this._methods=[],this.classExists=!1),this.joinValue()}get methodName(){return this._method}set methodName(e){this._method=e,this.joinValue()}ngOnInit(){this.loadAvailableClasses(),this.subscribeToFieldChanges(),this.subscribeToView()}subscribeToView(){this.view.mode$.subscribe((()=>this.cdRef.detectChanges()))}loadAvailableClasses(){this.backend.getRequest("module/SchedulerJobTasks/classes").subscribe((e=>{this.availableClasses=e.map((e=>({id:e,name:e}))).sort()}))}subscribeToFieldChanges(){this.model.observeFieldChanges("method").subscribe((()=>this.splitValue()))}validateNamespace(){this.backend.getRequest("system/checkclass/"+btoa(this._class)).subscribe((e=>{this.classExists=e.classexists,this._methods=e.methods,this.cdRef.detectChanges()}))}splitValue(){if(this._value||(this._value=this.model.getField("method")),this._value){let e=this._value.split("->");this._class=e[0],this.className={id:this._class,name:this._class},this._method=e[1],this.validateNamespace()}}joinValue(){""!=this._class?this._value=this._class+"->"+this._method:this._value="",this.model.setField("method",this._value)}}return e=AdministrationJobMethods,(0,i.Z)(AdministrationJobMethods,"ɵfac",(function(t){return new(t||e)(g.Y36(Ji.o),g.Y36(qi.e),g.Y36(g.sBO),g.Y36(m.y))})),(0,i.Z)(AdministrationJobMethods,"ɵcmp",g.Xpm({type:e,selectors:[["administration-job-methods"]],decls:3,vars:2,consts:[["titlelabel","LBL_METHOD"],["class","slds-p-around--xx-small",4,"ngIf"],[4,"ngIf"],[1,"slds-p-around--xx-small"],["class","slds-has-divider--bottom slds-p-vertical--x-small",4,"ngIf"],[1,"slds-has-divider--bottom","slds-p-vertical--x-small"],[1,"slds-form-element__label","slds-truncate"],["label","LBL_METHOD"],[1,"slds-grid","slds-grid--vertical-align-center","slds-grid--align-spread"],[1,"slds-truncate","slds-grow"],[1,"slds-button","slds-button--icon","slds-m-left--xx-small",2,"float","right",3,"click"],[3,"icon"],["label","LBL_PARAMS"],[1,"slds-grid","slds-p-around--xx-small"],[1,"slds-form-element","slds-p-horizontal--xx-small","slds-size--1-of-1"],[1,"slds-form-element__label"],[1,"slds-required","ng-star-inserted"],[1,"slds-grid","slds-grid--vertical-align-center","slds-gutters_direct-xx-small"],[1,"slds-grow",3,"selectList","ngModel","ngModelChange"],[1,"slds-col","slds-size--1-of-3","slds-select_container"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"slds-form-element__control"],[1,"slds-textarea",3,"ngModel","ngModelChange"],[3,"value"]],template:function(e,t){1&e&&(g.TgZ(0,"system-section",0),g.YNc(1,Fi,7,4,"div",1),g.YNc(2,Ii,18,6,"div",2),g.qZA()),2&e&&(g.xp6(1),g.Q6J("ngIf",!t.view.isEditMode()),g.xp6(1),g.Q6J("ngIf",t.view.isEditMode()))},dependencies:[n.sg,n.O5,l.YN,l.Kr,l.Fj,l.EJ,l.JJ,l.On,T.J,M._,Ei.P,Ui.R,ui.B],encapsulation:2,changeDetection:0})),AdministrationJobMethods})();var Ri=s(727),Di=s(1591),Qi=s(528),Bi=s(6822),Yi=s(2006),zi=s(1790),Gi=s(7763);const Pi=function(e){return{summary_text:e}},Hi=function(e,t,s){return{module:e,id:t,data:s}},Ki=function(e){return{opacity:e}};function ji(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"tr",34)(1,"td",35)(2,"div",23),g._uU(3),g.qZA()(),g.TgZ(4,"td")(5,"div",23),g._uU(6),g.qZA()(),g.TgZ(7,"td")(8,"div",36),g._uU(9),g.qZA()(),g.TgZ(10,"td")(11,"div",37),g._uU(12),g.qZA()(),g.TgZ(13,"td",38)(14,"button",27),g.NdJ("click",(function(){const t=g.CHM(e).$implicit,s=g.oxw(2);return g.KtG(s.openMessageInModal(t.message,t.resolution))})),g._UZ(15,"system-button-icon",39),g.qZA()()()}if(2&e){const e=t.$implicit,s=g.oxw(2);g.Q6J("system-model-provider",g.kEZ(12,Hi,e.rel_module,e.rel_id,g.VKq(10,Pi,e.name)))("ngStyle",g.VKq(16,Ki,s.isLoading?.33:1)),g.xp6(1),g.Q6J("system-model-popover",!!e.rel_id)("enablelink",!!e.rel_id),g.xp6(2),g.Oqu(e.name),g.xp6(3),g.Oqu(e.executed_on),g.xp6(2),g.Q6J("ngClass",e.resolutionClass),g.xp6(1),g.Oqu(e.resolution),g.xp6(2),g.Q6J("title",e.message),g.xp6(1),g.hij("",e.message," ")}}function $i(e,t){1&e&&(g.TgZ(0,"div",40),g._UZ(1,"system-label",41),g.qZA())}function Vi(e,t){1&e&&(g.TgZ(0,"div",40),g._UZ(1,"system-spinner"),g.qZA())}function Xi(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div")(1,"div",19)(2,"table",20)(3,"thead")(4,"tr",21)(5,"th",22)(6,"div",23),g._UZ(7,"system-label",24),g.qZA()(),g.TgZ(8,"th",25)(9,"div",23),g._UZ(10,"system-label",26),g.qZA(),g.TgZ(11,"button",27),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw();return g.KtG(t.toggleSort())})),g._UZ(12,"system-button-icon",28),g.qZA()(),g.TgZ(13,"th",22)(14,"div",23),g._UZ(15,"system-label",29),g.qZA()(),g.TgZ(16,"th",22)(17,"div",23),g._UZ(18,"system-label",30),g.qZA()(),g._UZ(19,"th",31),g.qZA()(),g.TgZ(20,"tbody"),g.YNc(21,ji,16,18,"tr",32),g.qZA()(),g.YNc(22,$i,2,0,"div",33),g.YNc(23,Vi,2,0,"div",33),g.qZA()()}if(2&e){const e=g.oxw();g.Q6J("@displaycard",void 0),g.xp6(7),g.Q6J("label","SchedulerJobs"==e.model.module?"LBL_TASK":"LBL_SCHEDULERJOB"),g.xp6(5),g.Q6J("icon","DESC"!=e.sortDirection?"arrowdown":"arrowup"),g.xp6(9),g.Q6J("ngForOf",e.jobLogs)("ngForTrackBy",e.trackByFn),g.xp6(1),g.Q6J("ngIf",!e.isLoading&&!e.isReloading&&0==e.jobLogs.length),g.xp6(1),g.Q6J("ngIf",e.isLoading||e.isReloading)}}function Wi(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"button",42),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw();return g.KtG(t.getMoreData())})),g._UZ(1,"system-label",43),g.qZA()}if(2&e){const e=g.oxw();g.Q6J("disabled",e.isLoading||e.jobLogs.length==e.totalLines)}}let en=(()=>{var e;class AdministrationJobLog{constructor(e,t,s,n,l,o,a,d){(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"broadcast",void 0),(0,i.Z)(this,"elementRef",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"userpreferences",void 0),(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"jobLogs",[]),(0,i.Z)(this,"isLoading",!1),(0,i.Z)(this,"isReloading",!1),(0,i.Z)(this,"subscription",new Ri.w0),(0,i.Z)(this,"totalLimit",10),(0,i.Z)(this,"totalLines",void 0),(0,i.Z)(this,"expanded",!0),(0,i.Z)(this,"failedOnly",!1),(0,i.Z)(this,"fromDateTime",void 0),(0,i.Z)(this,"sortDirection","DESC"),this.model=e,this.language=t,this.metadata=s,this.broadcast=n,this.elementRef=l,this.modal=o,this.userpreferences=a,this.backend=d}ngOnInit(){this.getData(),this.subscribeToJobActions()}ngOnDestroy(){this.subscription.unsubscribe()}openMessageInModal(e,t){const s="failed"==t?"error":"success";this.modal.info(e,this.language.getLabel("LBL_MESSAGE"),s)}trackByFn(e,t){return t.id}subscribeToJobActions(){this.subscription=this.broadcast.message$.subscribe((e=>{"job.run"==e.messagetype&&this.reloadData()}))}getData(){let e={offset:0,limit:10,failedOnly:this.failedOnly,sortDirection:this.sortDirection};this.totalLimit=10,this.isLoading=!0,this.backend.getRequest(`module/${this.model.module}/${this.model.id}/log`,e).subscribe((e=>{this.jobLogs=this.mapList(e.list),this.totalLines=e.count,this.isLoading=!1}),(e=>this.isLoading=!1))}getMoreData(){let e={offset:this.jobLogs.length,limit:10,failedOnly:this.failedOnly,sortDirection:this.sortDirection,fromDateTime:this.fromDateTime?moment(this.fromDateTime).utc().format("YYYY-MM-DD HH:mm:ss"):null};this.totalLimit+=10,this.isLoading=!0,this.backend.getRequest(`module/${this.model.module}/${this.model.id}/log`,e).subscribe((e=>{this.jobLogs=[...this.jobLogs,...this.mapList(e.list)],this.totalLines=e.count,this.isLoading=!1}),(e=>this.isLoading=!1))}reloadData(){if(this.isLoading)return;this.jobLogs=[];let e={offset:0,limit:this.totalLimit,failedOnly:this.failedOnly,sortDirection:this.sortDirection,fromDateTime:this.fromDateTime?moment(this.fromDateTime).utc().format("YYYY-MM-DD HH:mm:ss"):null};this.isLoading=this.isReloading=!0,this.backend.getRequest(`module/${this.model.module}/${this.model.id}/log`,e).subscribe((e=>{this.jobLogs=this.mapList(e.list),this.totalLines=e.count,this.isLoading=this.isReloading=!1}),(e=>this.isLoading=this.isReloading=!1))}mapList(e){return e.map((e=>(e.executed_on=moment(moment.utc(e.executed_on)).tz(this.userpreferences.toUse.timezone).format(this.userpreferences.getDateFormat()+" "+this.userpreferences.getTimeFormat()),e.resolutionClass="slds-text-color_"+("failed"==e.resolution?"error":"success"),e)))}toggleExpand(e){e.stopPropagation(),this.expanded=!this.expanded}toggleSort(){this.sortDirection="DESC"==this.sortDirection?"ASC":"DESC",this.reloadData()}}return e=AdministrationJobLog,(0,i.Z)(AdministrationJobLog,"ɵfac",(function(t){return new(t||e)(g.Y36(Ji.o),g.Y36(p.d),g.Y36(f.Pu),g.Y36(h.f),g.Y36(g.SBq),g.Y36(Se.o),g.Y36(Es.z),g.Y36(m.y))})),(0,i.Z)(AdministrationJobLog,"ɵcmp",g.Xpm({type:e,selectors:[["administration-job-log"]],decls:23,vars:9,consts:[[1,"slds-card","slds-card_boundary","slds-m-bottom--medium"],[1,"slds-card__header","slds-grid","slds-grid--vertical-align-center"],[1,"slds-media","slds-media--center","slds-has-flexi-truncate"],["icon","recent","size","small"],[1,"slds-media__body","slds-truncate","slds-grid","slds-grid--vertical-align-center"],["href","javascript:void(0);",1,"slds-text-link--reset"],[1,"slds-text-heading--small"],["label","LBL_LOG_ENTRIES"],["label","LBL_OF"],["icon","up","size","x-small",1,"slds-m-horizontal--xx-small",3,"click"],["label","LBL_FROM",1,"slds-m-right--xx-small"],[1,"slds-m-right--xx-small",3,"ngModel","ngModelChange"],["label","LBL_FAILED",1,"slds-m-right--xx-small",3,"ngModel","ngModelChange"],[1,"slds-button","slds-button--icon",3,"disabled","click"],["icon","refresh",1,"slds-p-horizontal--xxx-small"],[4,"ngIf"],[1,"slds-card__footer","slds-p-around--xx-small"],[1,"slds-grid","slds-grid--align-center",2,"min-height","32px"],["class","slds-button",3,"disabled","click",4,"ngIf"],[1,"slds-card__body","slds-size--1-of-1","slds-scrollable--y",2,"max-height","350px"],["role","grid",1,"slds-table","slds-table--bordered","slds-table--cell-buffer","slds-table--fixed-layout"],[1,"slds-line-height_reset"],["scope","col"],[1,"slds-truncate"],[3,"label"],["scope","col",1,"slds-is-sortable","slds-is-sorted","slds-grid"],["label","LBL_EXECUTE_TIME"],[1,"slds-button","slds-button--icon",3,"click"],["addclasses","slds-is-sortable__icon",3,"icon"],["label","LBL_RESOLUTION"],["label","LBL_MESSAGE"],["scope","col",1,"slds-cell-shrink"],["class","slds-hint-parent",3,"system-model-provider","ngStyle",4,"ngFor","ngForOf","ngForTrackBy"],["class","slds-align_absolute-center slds-p-around--medium",4,"ngIf"],[1,"slds-hint-parent",3,"system-model-provider","ngStyle"],[3,"system-model-popover","enablelink"],[1,"slds-truncate",3,"ngClass"],[1,"slds-truncate",3,"title"],[1,"slds-cell-shrink"],["icon","info"],[1,"slds-align_absolute-center","slds-p-around--medium"],["label","LBL_NO_ENTRIES"],[1,"slds-button",3,"disabled","click"],["label","LBL_MORE"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0)(1,"div",1)(2,"header",2),g._UZ(3,"system-icon",3),g.TgZ(4,"div",4)(5,"h2")(6,"a",5)(7,"span",6),g._UZ(8,"system-label",7),g._uU(9),g._UZ(10,"system-label",8),g._uU(11),g.qZA()()(),g.TgZ(12,"system-utility-icon",9),g.NdJ("click",(function(e){return t.toggleExpand(e)})),g.qZA()()(),g._UZ(13,"system-label",10),g.TgZ(14,"system-input-date",11),g.NdJ("ngModelChange",(function(e){return t.fromDateTime=e}))("ngModelChange",(function(){return t.reloadData()})),g.qZA(),g.TgZ(15,"system-input-time",11),g.NdJ("ngModelChange",(function(e){return t.fromDateTime=e}))("ngModelChange",(function(){return t.reloadData()})),g.qZA(),g.TgZ(16,"system-checkbox-toggle",12),g.NdJ("ngModelChange",(function(e){return t.failedOnly=e}))("ngModelChange",(function(){return t.reloadData()})),g.qZA(),g.TgZ(17,"button",13),g.NdJ("click",(function(){return t.reloadData()})),g._UZ(18,"system-button-icon",14),g.qZA()(),g.YNc(19,Xi,24,7,"div",15),g.TgZ(20,"footer",16)(21,"div",17),g.YNc(22,Wi,2,1,"button",18),g.qZA()()()),2&e&&(g.xp6(9),g.hij(" (",t.jobLogs.length," "),g.xp6(2),g.hij(" ",t.totalLines,") "),g.xp6(1),g.Q6J("@animateicon",t.expanded?"open":"closed"),g.xp6(2),g.Q6J("ngModel",t.fromDateTime),g.xp6(1),g.Q6J("ngModel",t.fromDateTime),g.xp6(1),g.Q6J("ngModel",t.failedOnly),g.xp6(1),g.Q6J("disabled",!t.expanded),g.xp6(2),g.Q6J("ngIf",t.expanded),g.xp6(3),g.Q6J("ngIf",t.expanded))},dependencies:[n.mk,n.sg,n.O5,n.PC,l.JJ,l.On,T.J,Qi.v,L.f,Bi.z,Yi.H,M._,Ft.W,J.r,zi.g,Gi.u],encapsulation:2,data:{animation:[(0,Di.X$)("animateicon",[(0,Di.SB)("open",(0,Di.oB)({transform:"scale(1, 1)"})),(0,Di.SB)("closed",(0,Di.oB)({transform:"scale(1, -1)"})),(0,Di.eR)("open => closed",[(0,Di.jt)(".5s")]),(0,Di.eR)("closed => open",[(0,Di.jt)(".5s")])]),(0,Di.X$)("displaycard",[(0,Di.eR)(":enter",[(0,Di.oB)({opacity:0,height:"0px",overflow:"hidden"}),(0,Di.jt)(".5s",(0,Di.oB)({height:"*",opacity:1})),(0,Di.oB)({overflow:"unset"})]),(0,Di.eR)(":leave",[(0,Di.oB)({overflow:"hidden"}),(0,Di.jt)(".5s",(0,Di.oB)({height:"0px",opacity:0}))])])]}})),AdministrationJobLog})(),tn=(()=>{var e;class AdministrationJobRunButton{constructor(e,t,s,n,l,o,a){(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"broadcast",void 0),(0,i.Z)(this,"toast",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"backend",void 0),this.model=e,this.language=t,this.metadata=s,this.broadcast=n,this.toast=l,this.modal=o,this.backend=a}execute(){this.modal.openModal("SystemLoadingModal",!1).subscribe((e=>{this.backend.postRequest("module/SchedulerJobs/"+this.model.id+"/run").subscribe((t=>{e.instance.self.destroy(),this.model.getData(),t?this.toast.sendToast(this.language.getLabel("MSG_SUCCESSFULLY_EXECUTED"),"success"):this.toast.sendToast(this.language.getLabel("ERR_FAILED_TO_EXECUTE"),"error"),this.broadcast.broadcastMessage("job.run")}),(t=>{e.instance.self.destroy(),this.toast.sendToast(this.language.getLabel("ERR_FAILED_TO_EXECUTE"),"error"),this.broadcast.broadcastMessage("job.run")}))}))}}return e=AdministrationJobRunButton,(0,i.Z)(AdministrationJobRunButton,"ɵfac",(function(t){return new(t||e)(g.Y36(Ji.o),g.Y36(p.d),g.Y36(f.Pu),g.Y36(h.f),g.Y36(Fe.A),g.Y36(Se.o),g.Y36(m.y))})),(0,i.Z)(AdministrationJobRunButton,"ɵcmp",g.Xpm({type:e,selectors:[["administration-job-run-button"]],decls:2,vars:0,consts:[["label","LBL_RUN_NOW"]],template:function(e,t){1&e&&(g.TgZ(0,"span"),g._UZ(1,"system-label",0),g.qZA())},dependencies:[M._],encapsulation:2})),AdministrationJobRunButton})(),sn=(()=>{var e;class AdministrationJobScheduleButton{constructor(e,t,s,n,l,o,a){(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"broadcast",void 0),(0,i.Z)(this,"toast",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"backend",void 0),this.model=e,this.language=t,this.metadata=s,this.broadcast=n,this.toast=l,this.modal=o,this.backend=a}execute(){this.modal.openModal("SystemLoadingModal",!1).subscribe((e=>{this.backend.postRequest("module/SchedulerJobs/"+this.model.id+"/schedule").subscribe((t=>{e.instance.self.destroy(),this.model.getData(),t?this.toast.sendToast(this.language.getLabel("MSG_SUCCESSFULLY_EXECUTED"),"success"):this.toast.sendToast(this.language.getLabel("ERR_FAILED_TO_EXECUTE"),"error"),this.broadcast.broadcastMessage("job.run")}),(t=>{e.instance.self.destroy(),this.toast.sendToast(this.language.getLabel("ERR_FAILED_TO_EXECUTE"),"error"),this.broadcast.broadcastMessage("job.run")}))}))}}return e=AdministrationJobScheduleButton,(0,i.Z)(AdministrationJobScheduleButton,"ɵfac",(function(t){return new(t||e)(g.Y36(Ji.o),g.Y36(p.d),g.Y36(f.Pu),g.Y36(h.f),g.Y36(Fe.A),g.Y36(Se.o),g.Y36(m.y))})),(0,i.Z)(AdministrationJobScheduleButton,"ɵcmp",g.Xpm({type:e,selectors:[["administration-job-schedule-button"]],decls:2,vars:0,consts:[["label","LBL_SCHEDULE_NOW"]],template:function(e,t){1&e&&(g.TgZ(0,"span"),g._UZ(1,"system-label",0),g.qZA())},dependencies:[M._],encapsulation:2})),AdministrationJobScheduleButton})(),nn=(()=>{var e;class AdministrationJobKillButton{constructor(e,t,s,n){(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"toast",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"backend",void 0),this.model=e,this.toast=t,this.language=s,this.backend=n}get disabled(){return!this.model.getField("process_id")}execute(){this.backend.postRequest(`module/SchedulerJobs/${this.model.id}/kill`).subscribe((e=>{const t=e?"MSG_SUCCESSFULLY_EXECUTED":"ERR_FAILED_TO_EXECUTE",s=e?"success":"error";this.toast.sendToast(this.language.getLabel(t),s)}))}}return e=AdministrationJobKillButton,(0,i.Z)(AdministrationJobKillButton,"ɵfac",(function(t){return new(t||e)(g.Y36(Ji.o),g.Y36(Fe.A),g.Y36(p.d),g.Y36(m.y))})),(0,i.Z)(AdministrationJobKillButton,"ɵcmp",g.Xpm({type:e,selectors:[["administration-job-kill-button"]],decls:2,vars:0,consts:[["label","LBL_KILL"]],template:function(e,t){1&e&&(g.TgZ(0,"span"),g._UZ(1,"system-label",0),g.qZA())},dependencies:[M._],encapsulation:2})),AdministrationJobKillButton})(),ln=(()=>{var e;class AdministrationJobTaskRunButton{constructor(e,t,s,n,l,o,a){(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"broadcast",void 0),(0,i.Z)(this,"toast",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"backend",void 0),this.model=e,this.language=t,this.metadata=s,this.broadcast=n,this.toast=l,this.modal=o,this.backend=a}execute(){this.modal.openModal("SystemLoadingModal",!1).subscribe((e=>{this.backend.postRequest("module/SchedulerJobTasks/"+this.model.id+"/run").subscribe((t=>{e.instance.self.destroy(),t?this.toast.sendToast(this.language.getLabel("MSG_SUCCESSFULLY_EXECUTED"),"success"):this.toast.sendToast(this.language.getLabel("ERR_FAILED_TO_EXECUTE"),"error"),this.broadcast.broadcastMessage("job.run")}),(t=>{e.instance.self.destroy(),this.toast.sendToast(this.language.getLabel("ERR_FAILED_TO_EXECUTE"),"error"),this.broadcast.broadcastMessage("job.run")}))}))}}return e=AdministrationJobTaskRunButton,(0,i.Z)(AdministrationJobTaskRunButton,"ɵfac",(function(t){return new(t||e)(g.Y36(Ji.o),g.Y36(p.d),g.Y36(f.Pu),g.Y36(h.f),g.Y36(Fe.A),g.Y36(Se.o),g.Y36(m.y))})),(0,i.Z)(AdministrationJobTaskRunButton,"ɵcmp",g.Xpm({type:e,selectors:[["administration-job-task-run-button"]],decls:2,vars:0,consts:[["label","LBL_RUN_NOW"]],template:function(e,t){1&e&&(g.TgZ(0,"span"),g._UZ(1,"system-label",0),g.qZA())},dependencies:[M._],encapsulation:2})),AdministrationJobTaskRunButton})();var on=s(3814),an=s(3634);const dn=function(e,t){return{module:"SchedulerJobs",id:e,data:t}},rn=function(){return{link:!0}},cn=function(){return{fieldtype:"croninterval"}};function gn(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"tr",30)(1,"td"),g._UZ(2,"field-container",31),g.qZA(),g.TgZ(3,"td"),g._UZ(4,"field-container",32),g.qZA(),g.TgZ(5,"td"),g._UZ(6,"field-container",33),g.qZA(),g.TgZ(7,"td",34)(8,"button",35),g.NdJ("click",(function(){const t=g.CHM(e).$implicit,s=g.oxw(2);return g.KtG(s.killJob(t))})),g._UZ(9,"system-button-icon",36),g.qZA()()()}if(2&e){const e=t.$implicit;g.Q6J("system-model-provider",g.WLB(6,dn,e.id,e)),g.xp6(2),g.Q6J("fieldconfig",g.DdM(9,rn))("fielddisplayclass","slds-truncate slds-p-horizontal--x-small"),g.xp6(2),g.Q6J("fielddisplayclass","slds-truncate slds-p-horizontal--x-small"),g.xp6(2),g.Q6J("fieldconfig",g.DdM(10,cn))("fielddisplayclass","slds-truncate slds-p-horizontal--x-small")}}const un=function(){return{displayLabels:!1,editable:!1}};function mn(e,t){if(1&e&&(g.TgZ(0,"table",20)(1,"thead")(2,"tr",21)(3,"th",22)(4,"div",23),g._UZ(5,"system-label",24),g.qZA()(),g.TgZ(6,"th",22)(7,"div",23),g._UZ(8,"system-label",25),g.qZA()(),g.TgZ(9,"th",22)(10,"div",23),g._UZ(11,"system-label",26),g.qZA()(),g._UZ(12,"th",27),g.qZA()(),g.TgZ(13,"tbody",28),g.YNc(14,gn,10,11,"tr",29),g.qZA()()),2&e){const e=g.oxw();g.xp6(13),g.Q6J("system-view-provider",g.DdM(3,un)),g.xp6(1),g.Q6J("ngForOf",e.runningJobs.list)("ngForTrackBy",e.trackByFn)}}function hn(e,t){1&e&&(g.TgZ(0,"div",37),g._UZ(1,"system-label",38),g.qZA())}function pn(e,t){1&e&&(g.TgZ(0,"div",37),g._UZ(1,"system-label",39),g.qZA())}function bn(e,t){1&e&&(g.TgZ(0,"div",40),g._UZ(1,"system-spinner",41),g.qZA())}const fn=function(){return{border:0,"box-shadow":"none"}};let Zn=(()=>{var e;class AdministrationJobRunningList{constructor(e,t,s,n,l){(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"toast",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"hasBoxClass",!1),(0,i.Z)(this,"runningJobs",{list:[],total:0,isLoading:!1}),this.metadata=e,this.toast=t,this.modal=s,this.language=n,this.backend=l}ngOnInit(){this.reloadList()}reloadList(){this.runningJobs.list=[],this.runningJobs.total=0,this.runningJobs.hasError=!1;const e=this.metadata.getComponentConfig("AdministrationJobRunningList","SchedulerJobs");if(!e.moduleFilter)return this.runningJobs.hasError=!0,console.error("Mssing module filter for component AdministrationJobRunningList");this.runningJobs.isLoading=!0;const t={modulefilter:e.moduleFilter,start:0,limit:20};this.backend.getList("SchedulerJobs",[{sortfield:"last_run_date",sortdirection:"DESC"}],t).subscribe((e=>{this.runningJobs.list=e.list,this.runningJobs.total=e.totalcount,this.runningJobs.isLoading=!1}),(e=>{this.runningJobs.hasError=!0,this.runningJobs.isLoading=!1}))}loadMore(){if(this.runningJobs.isLoading||this.runningJobs.list.length>=this.runningJobs.total)return!1;const e=this.metadata.getComponentConfig("AdministrationJobRunningList","SchedulerJobs");if(!e.moduleFilter)return this.runningJobs.hasError=!0,console.error("Mssing module filter for component AdministrationJobRunningList");this.runningJobs.isLoading=!0;const t={modulefilter:e.moduleFilter,start:this.runningJobs.list.length,limit:20};this.backend.getList("SchedulerJobs",[{sortfield:"last_run_date",sortdirection:"DESC"}],t).subscribe((e=>{this.runningJobs.list=e.list,this.runningJobs.total=e.totalcount,this.runningJobs.isLoading=!1}),(e=>{this.runningJobs.hasError=!0,this.runningJobs.isLoading=!1}))}killJob(e){this.modal.confirm("MSG_CONFIRM_KILL",this.language.getLabel("LBL_KILL")).subscribe((t=>{t&&this.backend.postRequest(`module/SchedulerJobs/${e.id}/kill`).subscribe((e=>{const t=e?"MSG_SUCCESSFULLY_EXECUTED":"ERR_FAILED_TO_EXECUTE",s=e?"success":"error";e&&this.reloadList(),this.toast.sendToast(this.language.getLabel(t),s)}))}))}trackByFn(e,t){return t.id}}return e=AdministrationJobRunningList,(0,i.Z)(AdministrationJobRunningList,"ɵfac",(function(t){return new(t||e)(g.Y36(f.Pu),g.Y36(Fe.A),g.Y36(Se.o),g.Y36(p.d),g.Y36(m.y))})),(0,i.Z)(AdministrationJobRunningList,"ɵcmp",g.Xpm({type:e,selectors:[["administration-job-running-list"]],inputs:{hasBoxClass:"hasBoxClass"},decls:24,vars:9,consts:[[1,"slds-card","slds-card_boundary","slds-grid","slds-grid--vertical","slds-grow","slds-height_full",2,"min-height","0",3,"ngStyle"],[1,"slds-card__header","slds-grid","slds-grid--vertical-align-center"],[1,"slds-media","slds-media--center","slds-has-flexi-truncate"],["icon","custom6","sprite","custom","divClass"," ",1,"slds-m-right--small",2,"transform","rotate(90deg)"],[1,"slds-media__body","slds-truncate","slds-grid","slds-grid--vertical-align-center"],["href","javascript:void(0);",1,"slds-text-link--reset"],[1,"slds-text-heading--small"],["label","LBL_RUNNING_JOBS"],["label","LBL_OF"],[1,"slds-button","slds-button--icon",3,"click"],["icon","refresh",1,"slds-p-horizontal--xxx-small"],[1,"slds-grow","slds-grid","slds-grid--vertical",2,"min-height","0"],[1,"slds-card__body","slds-size--1-of-1","slds-grid","slds-grid--vertical","slds-grow","slds-scrollable--y",2,"min-height","0","flex","initial"],["class","slds-table slds-table--bordered slds-table--cell-buffer slds-table--fixed-layout slds-table--header-fixed","role","grid",4,"ngIf"],["class","slds-align_absolute-center slds-height_full slds-has-divider--top-space slds-size--1-of-1",4,"ngIf"],["class","slds-align_absolute-center slds-p-bottom--small slds-height_full slds-has-divider--top-space slds-size--1-of-1",4,"ngIf"],[1,"slds-card__footer","slds-p-around--xx-small"],[1,"slds-grid","slds-grid--align-center",2,"min-height","32px"],[1,"slds-button",3,"disabled","click"],["label","LBL_MORE"],["role","grid",1,"slds-table","slds-table--bordered","slds-table--cell-buffer","slds-table--fixed-layout","slds-table--header-fixed"],[1,"slds-line-height_reset"],["scope","col"],[1,"slds-truncate"],["label","LBL_NAME"],["label","LBL_RUNNING_SINCE"],["label","LBL_INTERVAL"],["scope","col",1,"slds-cell-shrink"],[3,"system-view-provider"],["class","slds-hint-parent",3,"system-model-provider",4,"ngFor","ngForOf","ngForTrackBy"],[1,"slds-hint-parent",3,"system-model-provider"],["field","name",3,"fieldconfig","fielddisplayclass"],["field","last_run_date",3,"fielddisplayclass"],["field","job_interval",3,"fieldconfig","fielddisplayclass"],[1,"slds-cell-shrink"],["system-title","LBL_KILL",1,"slds-button","slds-button--icon",3,"click"],["icon","stop"],[1,"slds-align_absolute-center","slds-height_full","slds-has-divider--top-space","slds-size--1-of-1"],["label","MSG_NO_RECORDS_FOUND",1,"slds-p-top--small"],["label","ERR_LOADING_RECORDS",1,"slds-p-top--small"],[1,"slds-align_absolute-center","slds-p-bottom--small","slds-height_full","slds-has-divider--top-space","slds-size--1-of-1"],[1,"slds-p-top--small"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0)(1,"div",1)(2,"header",2),g._UZ(3,"system-icon",3),g.TgZ(4,"div",4)(5,"h2")(6,"a",5)(7,"span",6),g._UZ(8,"system-label",7),g._uU(9),g._UZ(10,"system-label",8),g._uU(11),g.qZA()()()()(),g.TgZ(12,"button",9),g.NdJ("click",(function(){return t.reloadList()})),g._UZ(13,"system-button-icon",10),g.qZA()(),g.TgZ(14,"div",11)(15,"div",12),g.YNc(16,mn,15,4,"table",13),g.YNc(17,hn,2,0,"div",14),g.YNc(18,pn,2,0,"div",14),g.YNc(19,bn,2,0,"div",15),g.qZA()(),g.TgZ(20,"footer",16)(21,"div",17)(22,"button",18),g.NdJ("click",(function(){return t.loadMore()})),g._UZ(23,"system-label",19),g.qZA()()()()),2&e&&(g.Q6J("ngStyle",t.hasBoxClass?void 0:g.DdM(8,fn)),g.xp6(9),g.hij(" (",t.runningJobs.list.length," "),g.xp6(2),g.hij(" ",t.runningJobs.total,") "),g.xp6(5),g.Q6J("ngIf",t.runningJobs.list.length>0),g.xp6(1),g.Q6J("ngIf",!t.runningJobs.hasError&&!t.runningJobs.isLoading&&0==t.runningJobs.list.length),g.xp6(1),g.Q6J("ngIf",!t.runningJobs.isLoading&&t.runningJobs.hasError),g.xp6(1),g.Q6J("ngIf",t.runningJobs.isLoading),g.xp6(3),g.Q6J("disabled",t.runningJobs.hasError||t.runningJobs.isLoading||t.runningJobs.list.length==t.runningJobs.total))},dependencies:[n.sg,n.O5,n.PC,T.J,L.f,M._,Ft.W,Gi.u,on.V,q.S,an.j],encapsulation:2})),AdministrationJobRunningList})();const _n=function(e,t){return{module:"SchedulerJobs",id:e,data:t}},vn=function(){return{link:!0}},An=function(){return{truncate:!0}};function yn(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"tr",30)(1,"td"),g._UZ(2,"field-container",31),g.qZA(),g.TgZ(3,"td"),g._UZ(4,"field-container",32),g.qZA(),g.TgZ(5,"td"),g._UZ(6,"field-container",33),g.qZA(),g.TgZ(7,"td",34)(8,"button",35),g.NdJ("click",(function(){const t=g.CHM(e).$implicit,s=g.oxw(2);return g.KtG(s.openMessageInModal(t.last_run_message,t.resolution))})),g._UZ(9,"system-button-icon",36),g.qZA()()()}if(2&e){const e=t.$implicit;g.Q6J("system-model-provider",g.WLB(6,_n,e.id,e)),g.xp6(2),g.Q6J("fieldconfig",g.DdM(9,vn))("fielddisplayclass","slds-truncate slds-p-horizontal--x-small"),g.xp6(2),g.Q6J("fielddisplayclass","slds-truncate slds-p-horizontal--x-small"),g.xp6(2),g.Q6J("fieldconfig",g.DdM(10,An))("fielddisplayclass","slds-truncate slds-p-horizontal--x-small")}}const xn=function(){return{displayLabels:!1,editable:!1}};function Tn(e,t){if(1&e&&(g.TgZ(0,"table",20)(1,"thead")(2,"tr",21)(3,"th",22)(4,"div",23),g._UZ(5,"system-label",24),g.qZA()(),g.TgZ(6,"th",22)(7,"div",23),g._UZ(8,"system-label",25),g.qZA()(),g.TgZ(9,"th",22)(10,"div",23),g._UZ(11,"system-label",26),g.qZA()(),g._UZ(12,"th",27),g.qZA()(),g.TgZ(13,"tbody",28),g.YNc(14,yn,10,11,"tr",29),g.qZA()()),2&e){const e=g.oxw();g.xp6(13),g.Q6J("system-view-provider",g.DdM(3,xn)),g.xp6(1),g.Q6J("ngForOf",e.failedJobs.list)("ngForTrackBy",e.trackByFn)}}function Ln(e,t){1&e&&(g.TgZ(0,"div",37),g._UZ(1,"system-label",38),g.qZA())}function Mn(e,t){1&e&&(g.TgZ(0,"div",37),g._UZ(1,"system-label",39),g.qZA())}function Jn(e,t){1&e&&(g.TgZ(0,"div",40),g._UZ(1,"system-spinner",41),g.qZA())}const qn=function(){return{border:0,"box-shadow":"none"}};let En=(()=>{var e;class AdministrationJobFailedList{constructor(e,t,s,n){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"hasBoxClass",!1),(0,i.Z)(this,"failedJobs",{list:[],total:0,isLoading:!1}),this.language=e,this.modal=t,this.metadata=s,this.backend=n}ngOnInit(){this.reloadList()}reloadList(){this.failedJobs.list=[],this.failedJobs.total=0,this.failedJobs.hasError=!1;const e=this.metadata.getComponentConfig("AdministrationJobFailedList","SchedulerJobs");if(!e.moduleFilter)return this.failedJobs.hasError=!0,console.error("Mssing module filter for component AdministrationJobFailedList");this.failedJobs.isLoading=!0;const t={modulefilter:e.moduleFilter,start:0,limit:20};this.backend.getList("SchedulerJobs",[{sortfield:"last_run_date",sortdirection:"DESC"}],t).subscribe((e=>{this.failedJobs.list=e.list,this.failedJobs.total=e.totalcount,this.failedJobs.isLoading=!1}),(e=>{this.failedJobs.isLoading=!1,this.failedJobs.hasError=!0}))}loadMore(){if(this.failedJobs.isLoading||this.failedJobs.list.length>=this.failedJobs.total)return!1;const e=this.metadata.getComponentConfig("AdministrationJobFailedList","SchedulerJobs");if(!e.moduleFilter)return this.failedJobs.hasError=!0,console.error("Mssing module filter for component AdministrationJobFailedList");this.failedJobs.isLoading=!0;const t={modulefilter:e.moduleFilter,start:this.failedJobs.list.length,limit:20};this.backend.getList("SchedulerJobs",[{sortfield:"last_run_date",sortdirection:"DESC"}],t).subscribe((e=>{this.failedJobs.list=e.list,this.failedJobs.total=e.totalcount,this.failedJobs.isLoading=!1}),(e=>{this.failedJobs.isLoading=!1,this.failedJobs.hasError=!0}))}openMessageInModal(e,t){const s="failed"==t?"error":"success";this.modal.info(e,this.language.getLabel("LBL_MESSAGE"),s)}trackByFn(e,t){return t.id}}return e=AdministrationJobFailedList,(0,i.Z)(AdministrationJobFailedList,"ɵfac",(function(t){return new(t||e)(g.Y36(p.d),g.Y36(Se.o),g.Y36(f.Pu),g.Y36(m.y))})),(0,i.Z)(AdministrationJobFailedList,"ɵcmp",g.Xpm({type:e,selectors:[["administration-job-failed-list"]],inputs:{hasBoxClass:"hasBoxClass"},decls:24,vars:9,consts:[[1,"slds-card","slds-card_boundary","slds-grid","slds-grid--vertical","slds-grow","slds-height_full",2,"min-height","0",3,"ngStyle"],[1,"slds-card__header","slds-grid","slds-grid--vertical-align-center"],[1,"slds-media","slds-media--center","slds-has-flexi-truncate"],["icon","custom82","sprite","custom"],[1,"slds-media__body","slds-truncate","slds-grid","slds-grid--vertical-align-center"],["href","javascript:void(0);",1,"slds-text-link--reset"],[1,"slds-text-heading--small"],["label","LBL_FAILED_JOBS"],["label","LBL_OF"],[1,"slds-button","slds-button--icon",3,"click"],["icon","refresh",1,"slds-p-horizontal--xxx-small"],[1,"slds-grow","slds-grid","slds-grid--vertical",2,"min-height","0"],[1,"slds-card__body","slds-size--1-of-1","slds-grid","slds-grid--vertical","slds-grow","slds-scrollable--y",2,"min-height","0","flex","initial"],["class","slds-table slds-table--bordered slds-table--cell-buffer slds-table--fixed-layout slds-table--header-fixed","role","grid",4,"ngIf"],["class","slds-align_absolute-center slds-height_full slds-has-divider--top-space slds-size--1-of-1",4,"ngIf"],["class","slds-align_absolute-center slds-p-bottom--small slds-height_full slds-has-divider--top-space slds-size--1-of-1",4,"ngIf"],[1,"slds-card__footer","slds-p-around--xx-small"],[1,"slds-grid","slds-grid--align-center",2,"min-height","32px"],[1,"slds-button",3,"disabled","click"],["label","LBL_MORE"],["role","grid",1,"slds-table","slds-table--bordered","slds-table--cell-buffer","slds-table--fixed-layout","slds-table--header-fixed"],[1,"slds-line-height_reset"],["scope","col"],[1,"slds-truncate"],["label","LBL_NAME"],["label","LBL_LAST_RUN"],["label","LBL_LAST_MESSAGE"],["scope","col",1,"slds-cell-shrink"],[3,"system-view-provider"],["class","slds-hint-parent",3,"system-model-provider",4,"ngFor","ngForOf","ngForTrackBy"],[1,"slds-hint-parent",3,"system-model-provider"],["field","name",3,"fieldconfig","fielddisplayclass"],["field","last_run_date",3,"fielddisplayclass"],["field","last_run_message",3,"fieldconfig","fielddisplayclass"],[1,"slds-cell-shrink"],["system-title","LBL_LAST_MESSAGE",1,"slds-button","slds-button--icon",3,"click"],["icon","info"],[1,"slds-align_absolute-center","slds-height_full","slds-has-divider--top-space","slds-size--1-of-1"],["label","MSG_NO_RECORDS_FOUND",1,"slds-p-top--small"],["label","ERR_LOADING_RECORDS",1,"slds-p-top--small"],[1,"slds-align_absolute-center","slds-p-bottom--small","slds-height_full","slds-has-divider--top-space","slds-size--1-of-1"],[1,"slds-p-top--small"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0)(1,"div",1)(2,"header",2),g._UZ(3,"system-icon",3),g.TgZ(4,"div",4)(5,"h2")(6,"a",5)(7,"span",6),g._UZ(8,"system-label",7),g._uU(9),g._UZ(10,"system-label",8),g._uU(11),g.qZA()()()()(),g.TgZ(12,"button",9),g.NdJ("click",(function(){return t.reloadList()})),g._UZ(13,"system-button-icon",10),g.qZA()(),g.TgZ(14,"div",11)(15,"div",12),g.YNc(16,Tn,15,4,"table",13),g.YNc(17,Ln,2,0,"div",14),g.YNc(18,Mn,2,0,"div",14),g.YNc(19,Jn,2,0,"div",15),g.qZA()(),g.TgZ(20,"footer",16)(21,"div",17)(22,"button",18),g.NdJ("click",(function(){return t.loadMore()})),g._UZ(23,"system-label",19),g.qZA()()()()),2&e&&(g.Q6J("ngStyle",t.hasBoxClass?void 0:g.DdM(8,qn)),g.xp6(9),g.hij(" (",t.failedJobs.list.length," "),g.xp6(2),g.hij(" ",t.failedJobs.total,") "),g.xp6(5),g.Q6J("ngIf",t.failedJobs.list.length>0),g.xp6(1),g.Q6J("ngIf",!t.failedJobs.hasError&&!t.failedJobs.isLoading&&0==t.failedJobs.list.length),g.xp6(1),g.Q6J("ngIf",!t.failedJobs.isLoading&&t.failedJobs.hasError),g.xp6(1),g.Q6J("ngIf",t.failedJobs.isLoading),g.xp6(3),g.Q6J("disabled",t.failedJobs.isLoading||t.failedJobs.list.length==t.failedJobs.total))},dependencies:[n.sg,n.O5,n.PC,T.J,L.f,M._,Ft.W,Gi.u,on.V,q.S,an.j],encapsulation:2})),AdministrationJobFailedList})();var Un=s(2644),Cn=s(7228),kn=s(7954);function Nn(e,t){if(1&e&&(g.TgZ(0,"div",12),g._UZ(1,"object-listview-aggregate",13),g.qZA()),2&e){const e=t.$implicit;g.xp6(1),g.Q6J("aggregate",e)}}const Sn=function(e){return{module:e}};function Fn(e,t){if(1&e&&(g.TgZ(0,"div",9)(1,"div",10),g.YNc(2,Nn,2,1,"div",11),g.qZA()()),2&e){const e=g.oxw();g.Q6J("@animatepanel",void 0)("system-model-provider",g.VKq(3,Sn,e.modelList.module)),g.xp6(2),g.Q6J("ngForOf",e.modelList.moduleAggregates)}}let wn=(()=>{var e;class AdministrationJobCockpit{constructor(e,t){(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"modelList",void 0),this.model=e,this.modelList=t}}return e=AdministrationJobCockpit,(0,i.Z)(AdministrationJobCockpit,"ɵfac",(function(t){return new(t||e)(g.Y36(Ji.o),g.Y36(Un.t))})),(0,i.Z)(AdministrationJobCockpit,"ɵcmp",g.Xpm({type:e,selectors:[["administration-job-cockpit"]],decls:10,vars:3,consts:[[1,"slds-grid","slds-height_full"],[1,"slds-height_full","slds-size--1-of-2","slds-border--right","slds-p-around--medium"],[1,"slds-p-bottom--small","slds-grid","slds-grid--vertical",2,"max-height","50%"],[1,"slds-grid","slds-grid--vertical","slds-grow",2,"min-height","0",3,"hasBoxClass"],[1,"slds-p-top--small","slds-grid","slds-grid--vertical",2,"max-height","50%"],[1,"slds-size--1-of-2","slds-height_full","slds-grid","slds-grid--vertical"],[1,"slds-grow","slds-is-relative",2,"display","block","width","100%","min-height","0"],[1,"slds-grow","slds-height_full","slds-size--1-of-1",2,"display","block"],["class","slds-is-absolute slds-panel slds-panel--filters slds-filters__body slds-nowrap  slds-scrollable--y","style","width: 320px; height: 100%; top:0; right: 0;z-index: 99;",3,"system-model-provider",4,"ngIf"],[1,"slds-is-absolute","slds-panel","slds-panel--filters","slds-filters__body","slds-nowrap","slds-scrollable--y",2,"width","320px","height","100%","top","0","right","0","z-index","99",3,"system-model-provider"],[1,"slds-filters__body","slds-grid_vertical"],["class","slds-m-vertical--xx-small",4,"ngFor","ngForOf"],[1,"slds-m-vertical--xx-small"],[3,"aggregate"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0)(1,"div",1)(2,"div",2),g._UZ(3,"administration-job-running-list",3),g.qZA(),g.TgZ(4,"div",4),g._UZ(5,"administration-job-failed-list",3),g.qZA()(),g.TgZ(6,"div",5)(7,"div",6),g._UZ(8,"object-list",7),g.YNc(9,Fn,3,5,"div",8),g.qZA()()()),2&e&&(g.xp6(3),g.Q6J("hasBoxClass",!0),g.xp6(2),g.Q6J("hasBoxClass",!0),g.xp6(4),g.Q6J("ngIf",t.modelList.displayAggregates))},dependencies:[n.sg,n.O5,Gi.u,Cn.s,kn.i,Zn,En],encapsulation:2})),AdministrationJobCockpit})();var In=s(6625),On=s(5920);let Rn=(()=>{var e;class dictionary{constructor(e,t,s,n){(0,i.Z)(this,"http",void 0),(0,i.Z)(this,"configurationService",void 0),(0,i.Z)(this,"session",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"data",[]),(0,i.Z)(this,"dictionaryitem",""),(0,i.Z)(this,"dictionaryfields",[]),this.http=e,this.configurationService=t,this.session=s,this.metadata=n}load(e){let t=new Je.x;return this.dictionaryitem=e,this.http.get(this.configurationService.getBackendUrl()+"/dictionary/list/"+e+"?sessionid="+this.session.authData.sessionId).subscribe((e=>{this.data=e.items,this.dictionaryfields=e.fields,t.next(e),t.complete()})),t.asObservable()}getFields(){let e=[];for(let t of this.dictionaryfields)"id"!==t&&e.push(t);return e}}return e=dictionary,(0,i.Z)(dictionary,"ɵfac",(function(t){return new(t||e)(g.LFG(Ht.eN),g.LFG(In.C),g.LFG(On.n),g.LFG(f.Pu))})),(0,i.Z)(dictionary,"ɵprov",g.Yz7({token:e,factory:e.ɵfac})),dictionary})();const Dn=["administration-dictionarymanager-item-field",""];function Qn(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"p",2)(1,"span"),g._uU(2),g.qZA(),g.TgZ(3,"button",3),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw();return g.KtG(t.setEditMode())})),g.O4$(),g.TgZ(4,"svg",4),g._UZ(5,"use",5),g.qZA()()()}if(2&e){const e=g.oxw();g.xp6(2),g.Oqu(e.fieldvalue)}}function Bn(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",6)(1,"input",7),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.fieldvalue=t)})),g.qZA()()}if(2&e){const e=g.oxw();g.xp6(1),g.Q6J("ngModel",e.fieldvalue)}}function Yn(e,t){if(1&e&&(g.TgZ(0,"th",12)(1,"a",13)(2,"span",14),g._uU(3),g.qZA()()()),2&e){const e=t.$implicit;g.xp6(3),g.Oqu(e)}}function zn(e,t){if(1&e&&g._UZ(0,"tr",15),2&e){const e=t.$implicit;g.Q6J("item",e)}}function Gn(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"footer",16)(1,"ul",17)(2,"li",18)(3,"button",19),g._uU(4,"Save"),g.qZA()(),g.TgZ(5,"li",18)(6,"button",20),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw();return g.KtG(t.closeEditMode())})),g._uU(7,"Cancel"),g.qZA()()()()}}const Pn=["administration-dictionarymanager-item",""];function Hn(e,t){if(1&e&&(g.TgZ(0,"td",1),g._UZ(1,"div",2),g.qZA()),2&e){const e=t.$implicit,s=g.oxw();g.xp6(1),g.Q6J("field",e)("id",s.item.id)("inputvalue",s.item[e])}}let Kn=(()=>{var e;class AdministrationDictionaryManagerItemField{constructor(e){(0,i.Z)(this,"dictionary",void 0),(0,i.Z)(this,"field",""),(0,i.Z)(this,"id",""),(0,i.Z)(this,"inputvalue",""),(0,i.Z)(this,"editMode",!1),this.dictionary=e}get fieldvalue(){return this.inputvalue}set fieldvalue(e){}isEditMode(){return this.editMode}setEditMode(){this.editMode=!0}closeEdit(){this.editMode=!1}ngAfterViewInit(){}ngOnInit(){}}return e=AdministrationDictionaryManagerItemField,(0,i.Z)(AdministrationDictionaryManagerItemField,"ɵfac",(function(t){return new(t||e)(g.Y36(Rn))})),(0,i.Z)(AdministrationDictionaryManagerItemField,"ɵcmp",g.Xpm({type:e,selectors:[["","administration-dictionarymanager-item-field",""]],inputs:{field:"field",id:"id",inputvalue:"inputvalue"},attrs:Dn,decls:2,vars:2,consts:[["class","slds-text-body--regular slds-truncate spice-fieldbody",4,"ngIf"],["class","slds-form-element__control",4,"ngIf"],[1,"slds-text-body--regular","slds-truncate","spice-fieldbody"],[1,"slds-button","slds-button--icon",2,"float","right",3,"click"],["aria-hidden","true",1,"slds-button__icon"],[0,"xlink","href","./vendor/sldassets/icons/utility-sprite/svg/symbols.svg#edit"],[1,"slds-form-element__control"],["type","text",1,"slds-input",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(g.YNc(0,Qn,6,1,"p",0),g.YNc(1,Bn,2,1,"div",1)),2&e&&(g.Q6J("ngIf",!t.isEditMode()),g.xp6(1),g.Q6J("ngIf",t.isEditMode()))},dependencies:[n.O5,l.Fj,l.JJ,l.On],encapsulation:2})),AdministrationDictionaryManagerItemField})(),jn=(()=>{var e;class AdministrationDictionaryManager{constructor(e){(0,i.Z)(this,"dictionary",void 0),(0,i.Z)(this,"dictionaryitem",""),this.dictionary=e}ngAfterViewInit(){this.dictionary.load(this.dictionaryitem).subscribe((e=>{}))}isEditMode(){}closeEditMode(){}}return e=AdministrationDictionaryManager,(0,i.Z)(AdministrationDictionaryManager,"ɵfac",(function(t){return new(t||e)(g.Y36(Rn))})),(0,i.Z)(AdministrationDictionaryManager,"ɵcmp",g.Xpm({type:e,selectors:[["administration-dictionarymanager"]],inputs:{dictionaryitem:"dictionaryitem"},features:[g._Bn([Rn])],decls:16,vars:5,consts:[["role","banner",1,"slds-page-header"],[1,"slds-grid"],[1,"slds-col","slds-has-flexi-truncate"],[1,"slds-media","slds-no-space","slds-grow"],[1,"slds-media__body"],[1,"slds-page-header__title","slds-m-right--small","slds-align-middle","slds-truncate"],[1,"slds-text-title--caps","slds-line-height--reset"],["role","grid",1,"slds-table","slds-table--bordered","slds-table--fixed-layout"],[1,"slds-text-title--caps"],["class","slds-is-sortable slds-is-resizable","scope","col",4,"ngFor","ngForOf"],["administration-dictionarymanager-item","","class","slds-hint-parent",3,"item",4,"ngFor","ngForOf"],["class","slds-utility-bar_container","role","footer",4,"ngIf"],["scope","col",1,"slds-is-sortable","slds-is-resizable"],["href","javascript:void(0);",1,"slds-th__action","slds-text-link--reset"],[1,"slds-truncate"],["administration-dictionarymanager-item","",1,"slds-hint-parent",3,"item"],["role","footer",1,"slds-utility-bar_container"],[1,"slds-utility-bar"],[1,"slds-utility-bar__item"],[1,"slds-button","slds-utility-bar__action","slds-button--brand"],[1,"slds-button","slds-utility-bar__action","slds-button--brand",3,"click"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h1",5),g._uU(6),g.qZA(),g.TgZ(7,"p",6),g._uU(8),g.qZA()()()()()(),g.TgZ(9,"table",7)(10,"thead")(11,"tr",8),g.YNc(12,Yn,4,1,"th",9),g.qZA()(),g.TgZ(13,"tbody"),g.YNc(14,zn,1,1,"tr",10),g.qZA()(),g.YNc(15,Gn,8,0,"footer",11)),2&e&&(g.xp6(6),g.hij("Dictionary ",t.dictionaryitem,""),g.xp6(2),g.hij("",t.dictionary.data.length," Items"),g.xp6(4),g.Q6J("ngForOf",t.dictionary.getFields()),g.xp6(2),g.Q6J("ngForOf",t.dictionary.data),g.xp6(1),g.Q6J("ngIf",t.isEditMode()))},dependencies:function(){return[n.sg,n.O5,$n]},encapsulation:2})),AdministrationDictionaryManager})(),$n=(()=>{var e;class AdministrationDictionaryManagerItem{constructor(e){(0,i.Z)(this,"dictionary",void 0),(0,i.Z)(this,"item",{}),(0,i.Z)(this,"editMode",!1),this.dictionary=e}isEditMode(){return this.editMode}setEditMode(){this.editMode=!0}closeEdit(){this.editMode=!1}ngAfterViewInit(){}ngOnInit(){}}return e=AdministrationDictionaryManagerItem,(0,i.Z)(AdministrationDictionaryManagerItem,"ɵfac",(function(t){return new(t||e)(g.Y36(Rn))})),(0,i.Z)(AdministrationDictionaryManagerItem,"ɵcmp",g.Xpm({type:e,selectors:[["","administration-dictionarymanager-item",""]],inputs:{item:"item"},attrs:Pn,decls:1,vars:1,consts:[["scope","row",4,"ngFor","ngForOf"],["scope","row"],["administration-dictionarymanager-item-field","",1,"slds-truncate",3,"field","id","inputvalue"]],template:function(e,t){1&e&&g.YNc(0,Hn,2,3,"td",0),2&e&&g.Q6J("ngForOf",t.dictionary.getFields())},dependencies:[n.sg,Kn],encapsulation:2})),AdministrationDictionaryManagerItem})();var Vn=s(5547),Xn=s(9503),Wn=s(8658),el=s(3772),tl=s(638);function sl(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",19)(1,"div",27),g._UZ(2,"system-label",92),g.TgZ(3,"div",31)(4,"div",32)(5,"select",33),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.settings.cache.file_location=t)})),g.TgZ(6,"option",93),g._uU(7,"./cache"),g.qZA(),g.TgZ(8,"option",94),g._uU(9,"System Temp Dir"),g.qZA()()()()(),g.TgZ(10,"div",27)(11,"div",45),g._UZ(12,"system-label",95),g.TgZ(13,"system-checkbox",47),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.settings.cache.file_transparentnames=t)})),g._UZ(14,"system-label",96),g.qZA()()()()}if(2&e){const e=g.oxw();g.xp6(5),g.Q6J("ngModel",e.settings.cache.file_location),g.xp6(8),g.Q6J("ngModel",e.settings.cache.file_transparentnames)}}function il(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",19)(1,"div",27),g._UZ(2,"system-label",97),g.TgZ(3,"system-input-text",22),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.settings.cache.redis_host=t)})),g.qZA()(),g.TgZ(4,"div",27),g._UZ(5,"system-label",98),g.TgZ(6,"system-input-integer",22),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.settings.cache.redis_port=t)})),g.qZA()()()}if(2&e){const e=g.oxw();g.xp6(3),g.Q6J("ngModel",e.settings.cache.redis_host),g.xp6(3),g.Q6J("ngModel",e.settings.cache.redis_port)}}function nl(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",19)(1,"div",27),g._UZ(2,"system-label",99),g.TgZ(3,"system-input-text",22),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.settings.cache.memcached_host=t)})),g.qZA()(),g.TgZ(4,"div",27),g._UZ(5,"system-label",100),g.TgZ(6,"system-input-integer",22),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.settings.cache.memcached_port=t)})),g.qZA()()()}if(2&e){const e=g.oxw();g.xp6(3),g.Q6J("ngModel",e.settings.cache.memcached_host),g.xp6(3),g.Q6J("ngModel",e.settings.cache.memcached_port)}}const ll=["*"];let ol=(()=>{var e;class AdministrationGeneralSettings{constructor(e,t,s,n,l,o){(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"toast",void 0),(0,i.Z)(this,"currency",void 0),(0,i.Z)(this,"settings",{system:{name:"",site_url:"",unique_key:""},advanced:{developerMode:0,stack_trace_errors:!1,dump_slow_queries:!1,slow_query_time_msec:0,upload_maxsize:0,international_email_addresses:0},cache:{class:"SpiceCacheFile",external_cache_disabled:!1,redis_host:"localhost",redis_port:6379,memcached_host:"localhost",memcached_port:11211},logger:{level:"",file_name:"spicecrm",file_ext:"",file_maxlogs:10,file_maxsize:"10MB",file_suffix:""}}),(0,i.Z)(this,"options",[]),(0,i.Z)(this,"currencies",[]),(0,i.Z)(this,"loading",!0),(0,i.Z)(this,"_loglevels",[]),this.metadata=e,this.language=t,this.backend=s,this.modal=n,this.toast=l,this.currency=o}ngOnInit(){this.modal.openModal("SystemLoadingModal").subscribe((e=>{this.backend.getRequest("configuration/settings").subscribe((t=>{switch(this.settings=t,this.settings.advanced.developerMode){case!0:this.settings.advanced.developerMode="1";break;case!1:this.settings.advanced.developerMode="0"}switch(this.settings.advanced.international_email_addresses){case!0:this.settings.advanced.developerMode="1";break;case!1:this.settings.advanced.developerMode="0"}this._loglevels=this.settings.logger.level.split(","),this.loading=!1,e.instance.self.destroy()}))}))}save(){this.modal.openModal("SystemLoadingModal").subscribe((e=>{this.backend.postRequest("configuration/settings",{},this.settings).subscribe((e=>{e.status?this.toast.sendToast(this.language.getLabel("LBL_SUCCESS"),"success"):this.toast.sendToast(this.language.getLabel("LBL_ERROR"),"error")})),e.instance.self.destroy()}))}get loglevels(){return this._loglevels}set loglevels(e){this._loglevels=e,this.settings.logger.level=e.join(",")}get loggerMaxSize(){return(this.settings.logger.file_maxsize??"").replace("MB","")}set loggerMaxSize(e){this.settings.logger.file_maxsize=e+"MB"}}return e=AdministrationGeneralSettings,(0,i.Z)(AdministrationGeneralSettings,"ɵfac",(function(t){return new(t||e)(g.Y36(f.Pu),g.Y36(p.d),g.Y36(m.y),g.Y36(Se.o),g.Y36(Fe.A),g.Y36(Vn.A))})),(0,i.Z)(AdministrationGeneralSettings,"ɵcmp",g.Xpm({type:e,selectors:[["administration-general-setting"]],ngContentSelectors:ll,decls:150,vars:21,consts:[[1,"slds-p-around--medium","slds-theme--shade"],[1,"slds-page-header__row"],[1,"slds-page-header__col-title"],[1,"slds-media"],["icon","settings"],[1,"slds-media__body"],[1,"slds-page-header__name"],[1,"slds-page-header__name-title"],[1,"slds-page-header__title","slds-truncate"],["label","LBL_GENERAL_SETTINGS"],[1,"slds-page-header__name-meta"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_SAVE"],[1,"slds-theme--default","slds-p-around--xx-small"],[1,"slds-section","slds-is-open"],[1,"slds-section__title"],["aria-expanded","true",1,"slds-button","slds-section__title-action"],[1,"slds-truncate"],[1,"slds-section__content"],[1,"slds-grid","slds-m-vertical--xx-small","slds-grid--align-spread"],[1,"slds-form-element__control","slds-size--1-of-1","slds-p-around--x-small"],["label","LBL_NAME"],["autocomplete","off",3,"ngModel","ngModelChange"],["label","LBL_SITE_URL"],["label","LBL_UNIQUE_KEY"],["autocomplete","off",3,"disabled","ngModel","ngModelChange"],["label","LBL_ADVANCED_SETTINGS"],[1,"slds-p-around--x-small","slds-size--1-of-2"],[1,"slds-form-element"],[1,"slds-form-element__label"],["label","LBL_DEVELOPER_MODE"],[1,"slds-form-element__control"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],["value","0"],["value","1"],["value","2"],[1,"slds-form-element__control","slds-size--1-of-2","slds-truncate","slds-p-around--x-small"],["label","LBL_STACKTRACE"],[1,"slds-p-vertical--xx-small"],[3,"ngModel","ngModelChange"],[1,"slds-form-element__control","slds-size--1-of-2","slds-p-around--x-small"],["label","LBL_MAXIMUM_UPLOAD_SIZE"],["label","LBL_EXPORT_LINES"],[3,"disabled","ngModel","ngModelChange"],[1,"slds-grid","slds-grid_vertical"],["label","LBL_INTERNATIONAL_EMAIL_ADDRESSES"],[1,"slds-p-vertical--xx-small",3,"ngModel","ngModelChange"],["label","LBL_CACHE"],["label","LBL_CACHE_TYPE"],["value","SpiceCacheFile"],["value","SpiceCacheRedis"],["value","SpiceCacheMemcached"],["value","SpiceCacheMemory"],["label","LBL_DISABLE_EXTERNAL_CACHE"],["label","LBL_CACHE_DISABLED"],["class","slds-grid slds-m-vertical--xx-small slds-grid--align-spread",4,"ngIf"],["label","LBL_LOGGER_SETTINGS"],[1,"slds-grid","slds-m-vertical--xx-small"],[1,"slds-size--1-of-2"],["label","LBL_LOGFILE_NAME"],[1,"slds-grid","slds-p-around--x-small"],[1,"slds-form-element__control","slds-size--5-of-6","slds-p-right--x-small"],[1,"slds-form-element__control","slds-size--1-of-6","slds-p-left--x-small"],[1,"slds-grid"],["label","LBL_LOGFILE_MAX_SIZE"],[1,"slds-grid","slds-grid--vertical-align-center"],["autocomplete","off",1,"slds-grow",3,"ngModel","ngModelChange"],[1,"slds-p-left--x-small"],["label","LBL_LOGFILE_MAX_NUMBER"],["label","LBL_SLOW_QUERYTIME_TRESHHOLD"],[1,"slds-size--1-of-2","slds-grid","slds-grid--vertical"],["label","LBL_LOGFILE_LEVEL"],[1,"slds-grid","slds-wrap",3,"ngModel","ngModelChange"],["value","debug",1,"slds-size--1-of-2","slds-p-vertical--xxx-small"],["label","LBL_LOGLEVEL_DEBUG"],["value","info",1,"slds-size--1-of-2","slds-p-vertical--xxx-small"],["label","LBL_LOGLEVEL_INFO"],["value","error",1,"slds-size--1-of-2","slds-p-vertical--xxx-small"],["label","LBL_LOGLEVEL_ERROR"],["value","warn",1,"slds-size--1-of-2","slds-p-vertical--xxx-small"],["label","LBL_LOGLEVEL_WARN"],["value","security",1,"slds-size--1-of-2","slds-p-vertical--xxx-small"],["label","LBL_LOGLEVEL_SECURITY"],["value","fatal",1,"slds-size--1-of-2","slds-p-vertical--xxx-small"],["label","LBL_LOGLEVEL_FATAL"],["value","sql",1,"slds-size--1-of-2","slds-p-vertical--xxx-small"],["label","LBL_LOGLEVEL_SQL"],["value","slowsql",1,"slds-size--1-of-2","slds-p-vertical--xxx-small"],["label","LBL_LOGLEVEL_SLOWSQL"],["value","developer",1,"slds-size--1-of-2","slds-p-vertical--xxx-small"],["label","LBL_LOGLEVEL_DEVELOPER"],["label","LBL_FILE_LOCTATION"],["value","cache"],["value","systemdir"],["label","LBL_FILE_NAME"],["label","LBL_TRANSPARENT_FILENAMES"],["label","LBL_REDIS_HOST"],["label","LBL_REDIS_PORT"],["label","LBL_MEMCACHED_HOST"],["label","LBL_MEMCACHED_PORT"]],template:function(e,t){1&e&&(g.F$t(),g.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),g._UZ(4,"system-icon",4),g.TgZ(5,"div",5)(6,"div",6)(7,"div",7)(8,"h1")(9,"span",8),g._UZ(10,"system-label",9),g.qZA()()()(),g.TgZ(11,"p",10),g.Hsn(12),g.qZA()()()(),g.TgZ(13,"button",11),g.NdJ("click",(function(){return t.save()})),g._UZ(14,"system-label",12),g.qZA()()(),g.TgZ(15,"div",13)(16,"div",14)(17,"h3",15)(18,"button",16)(19,"span",17),g._UZ(20,"system-label",9),g.qZA()()(),g.TgZ(21,"div",18)(22,"div",19)(23,"div",20),g._UZ(24,"system-label",21),g.TgZ(25,"system-input-text",22),g.NdJ("ngModelChange",(function(e){return t.settings.system.name=e})),g.qZA()()(),g.TgZ(26,"div",19)(27,"div",20),g._UZ(28,"system-label",23),g.TgZ(29,"system-input-text",22),g.NdJ("ngModelChange",(function(e){return t.settings.system.site_url=e})),g.qZA()()(),g.TgZ(30,"div",19)(31,"div",20),g._UZ(32,"system-label",24),g.TgZ(33,"system-input-text",25),g.NdJ("ngModelChange",(function(e){return t.settings.system.unique_key=e})),g.qZA()()()()(),g.TgZ(34,"div",14)(35,"h3",15)(36,"button",16)(37,"span",17),g._UZ(38,"system-label",26),g.qZA()()(),g.TgZ(39,"div",18)(40,"div",19)(41,"div",27)(42,"div",28)(43,"label",29),g._UZ(44,"system-label",30),g.qZA(),g.TgZ(45,"div",31)(46,"div",32)(47,"select",33),g.NdJ("ngModelChange",(function(e){return t.settings.advanced.developerMode=e})),g.TgZ(48,"option",34),g._uU(49,"off"),g.qZA(),g.TgZ(50,"option",35),g._uU(51,"on"),g.qZA(),g.TgZ(52,"option",36),g._uU(53,"on Request"),g.qZA()()()()()(),g.TgZ(54,"div",37),g._UZ(55,"system-label",38),g.TgZ(56,"div",39)(57,"system-checkbox",40),g.NdJ("ngModelChange",(function(e){return t.settings.advanced.stack_trace_errors=e})),g.qZA()()()(),g.TgZ(58,"div",19)(59,"div",41),g._UZ(60,"system-label",42),g.TgZ(61,"system-input-integer",40),g.NdJ("ngModelChange",(function(e){return t.settings.advanced.upload_maxsize=e})),g.qZA()(),g.TgZ(62,"div",41),g._UZ(63,"system-label",43),g.TgZ(64,"system-input-integer",44),g.NdJ("ngModelChange",(function(e){return t.settings.advanced.maximum_export_lines=e})),g.qZA()()(),g.TgZ(65,"div",19)(66,"div",27)(67,"div",45),g._UZ(68,"system-label",46),g.TgZ(69,"system-checkbox",47),g.NdJ("ngModelChange",(function(e){return t.settings.advanced.international_email_addresses=e})),g.qZA()()()()()(),g.TgZ(70,"div",14)(71,"h3",15)(72,"button",16)(73,"span",17),g._UZ(74,"system-label",48),g.qZA()()(),g.TgZ(75,"div",18)(76,"div",19)(77,"div",27)(78,"div",28)(79,"label",29),g._UZ(80,"system-label",49),g.qZA(),g.TgZ(81,"div",31)(82,"div",32)(83,"select",33),g.NdJ("ngModelChange",(function(e){return t.settings.cache.class=e})),g.TgZ(84,"option",50),g._uU(85,"File"),g.qZA(),g.TgZ(86,"option",51),g._uU(87,"Redis"),g.qZA(),g.TgZ(88,"option",52),g._uU(89,"Memcached"),g.qZA(),g.TgZ(90,"option",53),g._uU(91,"Memoryt"),g.qZA()()()()()(),g.TgZ(92,"div",37),g._UZ(93,"system-label",54),g.TgZ(94,"div",39)(95,"system-checkbox",40),g.NdJ("ngModelChange",(function(e){return t.settings.cache.external_cache_disabled=e})),g._UZ(96,"system-label",55),g.qZA()()()(),g.YNc(97,sl,15,2,"div",56),g.YNc(98,il,7,2,"div",56),g.YNc(99,nl,7,2,"div",56),g.qZA()(),g.TgZ(100,"div",14)(101,"h3",15)(102,"button",16)(103,"span",17),g._UZ(104,"system-label",57),g.qZA()()(),g.TgZ(105,"div",18)(106,"div",58)(107,"div",59)(108,"div"),g._UZ(109,"system-label",60),g.TgZ(110,"div",61)(111,"div",62)(112,"system-input-text",22),g.NdJ("ngModelChange",(function(e){return t.settings.logger.file_name=e})),g.qZA()(),g.TgZ(113,"div",63)(114,"system-input-text",22),g.NdJ("ngModelChange",(function(e){return t.settings.logger.file_ext=e})),g.qZA()()()(),g.TgZ(115,"div",64)(116,"div",41),g._UZ(117,"system-label",65),g.TgZ(118,"div",66)(119,"system-input-integer",67),g.NdJ("ngModelChange",(function(e){return t.loggerMaxSize=e})),g.qZA(),g.TgZ(120,"div",68),g._uU(121,"MB"),g.qZA()()(),g.TgZ(122,"div",41),g._UZ(123,"system-label",69),g.TgZ(124,"system-input-integer",22),g.NdJ("ngModelChange",(function(e){return t.settings.logger.file_maxlogs=e})),g.qZA()()(),g.TgZ(125,"div",20),g._UZ(126,"system-label",70),g.TgZ(127,"system-input-integer",40),g.NdJ("ngModelChange",(function(e){return t.settings.advanced.slow_query_time_msec=e})),g.qZA()()(),g.TgZ(128,"div",71)(129,"div",20),g._UZ(130,"system-label",72),g.TgZ(131,"system-checkbox-group",73),g.NdJ("ngModelChange",(function(e){return t.loglevels=e})),g.TgZ(132,"system-checkbox-group-checkbox",74),g._UZ(133,"system-label",75),g.qZA(),g.TgZ(134,"system-checkbox-group-checkbox",76),g._UZ(135,"system-label",77),g.qZA(),g.TgZ(136,"system-checkbox-group-checkbox",78),g._UZ(137,"system-label",79),g.qZA(),g.TgZ(138,"system-checkbox-group-checkbox",80),g._UZ(139,"system-label",81),g.qZA(),g.TgZ(140,"system-checkbox-group-checkbox",82),g._UZ(141,"system-label",83),g.qZA(),g.TgZ(142,"system-checkbox-group-checkbox",84),g._UZ(143,"system-label",85),g.qZA(),g.TgZ(144,"system-checkbox-group-checkbox",86),g._UZ(145,"system-label",87),g.qZA(),g.TgZ(146,"system-checkbox-group-checkbox",88),g._UZ(147,"system-label",89),g.qZA(),g.TgZ(148,"system-checkbox-group-checkbox",90),g._UZ(149,"system-label",91),g.qZA()()()()()()()()),2&e&&(g.xp6(25),g.Q6J("ngModel",t.settings.system.name),g.xp6(4),g.Q6J("ngModel",t.settings.system.site_url),g.xp6(4),g.Q6J("disabled",!0)("ngModel",t.settings.system.unique_key),g.xp6(14),g.Q6J("ngModel",t.settings.advanced.developerMode),g.xp6(10),g.Q6J("ngModel",t.settings.advanced.stack_trace_errors),g.xp6(4),g.Q6J("ngModel",t.settings.advanced.upload_maxsize),g.xp6(3),g.Q6J("disabled",!0)("ngModel",t.settings.advanced.maximum_export_lines),g.xp6(5),g.Q6J("ngModel",t.settings.advanced.international_email_addresses),g.xp6(14),g.Q6J("ngModel",t.settings.cache.class),g.xp6(12),g.Q6J("ngModel",t.settings.cache.external_cache_disabled),g.xp6(2),g.Q6J("ngIf","SpiceCacheFile"==t.settings.cache.class),g.xp6(1),g.Q6J("ngIf","SpiceCacheRedis"==t.settings.cache.class),g.xp6(1),g.Q6J("ngIf","SpiceCacheMemcached"==t.settings.cache.class),g.xp6(13),g.Q6J("ngModel",t.settings.logger.file_name),g.xp6(2),g.Q6J("ngModel",t.settings.logger.file_ext),g.xp6(5),g.Q6J("ngModel",t.loggerMaxSize),g.xp6(5),g.Q6J("ngModel",t.settings.logger.file_maxlogs),g.xp6(3),g.Q6J("ngModel",t.settings.advanced.slow_query_time_msec),g.xp6(4),g.Q6J("ngModel",t.loglevels))},dependencies:[n.O5,l.YN,l.Kr,l.EJ,l.JJ,l.On,H.U,Xn.L,Wn.m,L.f,el.Z,tl.n,M._],encapsulation:2})),AdministrationGeneralSettings})();function al(e,t){1&e&&g._UZ(0,"system-spinner",15)}function dl(e,t){1&e&&g._UZ(0,"div",16)}function rl(e,t){if(1&e&&(g.TgZ(0,"div",4)(1,"div",5)(2,"div",6)(3,"header",7),g._UZ(4,"system-icon",8),g.TgZ(5,"div",9)(6,"h2",10)(7,"div",11),g._uU(8),g.qZA()()(),g.TgZ(9,"div",12),g.YNc(10,al,1,0,"system-spinner",13),g.YNc(11,dl,1,0,"div",14),g.qZA()()()()()),2&e){const e=t.$implicit,s=g.oxw();g.xp6(7),g.Q6J("title",e.language_name),g.xp6(1),g.hij(" ",e.language_name," "),g.xp6(2),g.Q6J("ngIf",s.loading),g.xp6(1),g.Q6J("ngIf",!s.loading)}}let cl=(()=>{var e;class AdministrationLanguages{constructor(e,t,s,n,l){(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"toast",void 0),(0,i.Z)(this,"languages",[]),(0,i.Z)(this,"loading",!0),this.metadata=e,this.language=t,this.backend=s,this.modal=n,this.toast=l}ngOnInit(){this.modal.openModal("SystemLoadingModal").subscribe((e=>{this.backend.getRequest("packages").subscribe((t=>{t.versions?this.languages=t.languages:this.toast.sendToast(this.language.getLabel("LBL_ERROR"),"error"),this.loading=!1,e.instance.self.destroy()}))}))}}return e=AdministrationLanguages,(0,i.Z)(AdministrationLanguages,"ɵfac",(function(t){return new(t||e)(g.Y36(f.Pu),g.Y36(p.d),g.Y36(m.y),g.Y36(Se.o),g.Y36(Fe.A))})),(0,i.Z)(AdministrationLanguages,"ɵcmp",g.Xpm({type:e,selectors:[["administration-languages"]],decls:5,vars:1,consts:[[1,"slds-grid","slds-grid--align-spread","slds-p-around--medium"],[1,"slds-text-heading--medium"],[1,"slds-grid","slds-wrap"],["class","slds-size--1-of-2 slds-p-around--xx-small",4,"ngFor","ngForOf"],[1,"slds-size--1-of-2","slds-p-around--xx-small"],[1,"slds-card"],[1,"slds-card__header","slds-grid"],[1,"slds-media","slds-media_center","slds-has-flexi-truncate"],["size","small","icon","custom68","sprite","custom",1,"slds-p-right--xx-small"],[1,"slds-media__body"],[1,"slds-card__header-title"],[1,"slds-card__header-link","slds-truncate",3,"title"],[1,"slds-no-flex"],["size","12",4,"ngIf"],["class","slds-grid slds-grid_vertical-align-center",4,"ngIf"],["size","12"],[1,"slds-grid","slds-grid_vertical-align-center"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0)(1,"h2",1),g._uU(2,"Languages"),g.qZA()(),g.TgZ(3,"div",2),g.YNc(4,rl,12,4,"div",3),g.qZA()),2&e&&(g.xp6(4),g.Q6J("ngForOf",t.languages))},dependencies:[n.sg,n.O5,L.f,Ft.W],encapsulation:2})),AdministrationLanguages})();var gl=s(1553),ul=s(1819),ml=s(4211),hl=s(6268),pl=s(4845);function bl(e,t){if(1&e){const e=g.EpF();g.ynx(0),g.TgZ(1,"button",22),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw();return g.KtG(t.view.setViewMode())})),g._UZ(2,"system-label",23),g.qZA(),g.TgZ(3,"button",24),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw();return g.KtG(t.save())})),g._UZ(4,"system-label",25),g.qZA(),g.BQk()}}function fl(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"button",26),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw();return g.KtG(t.view.setEditMode())})),g._UZ(1,"system-label",27),g.qZA()}}let Zl=(()=>{var e;class AdministrationDefaultPreferences{constructor(e,t,s,n,l,o){(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"toast",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"configuration",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"preferences",{}),this.backend=e,this.toast=t,this.language=s,this.configuration=n,this.view=l,this.modal=o}ngOnInit(){this.loadPreferences()}loadPreferences(){const e=this.modal.await("LBL_LOADING");this.backend.getRequest("configuration/configurator/editor/default_preferences").subscribe((t=>{this.preferences=t,e.emit(),e.complete()}))}save(){const e=this.modal.await("LBL_SAVING_DATA");this.backend.postRequest("configuration/configurator/editor/default_preferences",[],{config:this.preferences}).subscribe((t=>{this.configuration.setData("defaultuserpreferences",this.preferences),this.toast.sendToast(this.language.getLabel("LBL_DATA_SAVED"),"success"),this.view.setViewMode(),e.emit(),e.complete()}))}}return e=AdministrationDefaultPreferences,(0,i.Z)(AdministrationDefaultPreferences,"ɵfac",(function(t){return new(t||e)(g.Y36(m.y),g.Y36(Fe.A),g.Y36(p.d),g.Y36(In.C),g.Y36(qi.e),g.Y36(Se.o))})),(0,i.Z)(AdministrationDefaultPreferences,"ɵcmp",g.Xpm({type:e,selectors:[["administration-default-preferences"]],features:[g._Bn([qi.e])],decls:30,vars:6,consts:[[1,"slds-page-header"],[1,"slds-page-header__row"],[1,"slds-page-header__col-title"],[1,"slds-grid","slds-grid--vertical-align-center"],["icon","custom67","sprite","custom","addclasses","slds-page-header__icon"],[1,"slds-media__body"],[1,"slds-page-header__name"],[1,"slds-page-header__name-title"],["system-title","LBL_DEFAULT_PREFERENCES",1,"slds-page-header__title","slds-truncate"],["label","LBL_DEFAULT_PREFERENCES"],[1,"slds-grid"],[4,"ngIf","ngIfElse"],["editButtonContainer",""],[1,"spice-display-block","slds-p-around--xx-small",3,"preferences"],["tabtitle","LBL_HOME_PREFERENCES",3,"collapsible"],["itemlabel","LBL_HOME_ASSISTANT",1,"slds-size--1-of-3"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],["value","visible"],["label","LBL_VISIBLE"],["value","hidden"],["label","LBL_HIDDEN"],[1,"slds-button","slds-button--neutral","slds-m-horizontal--xx-small",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_SAVE"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_EDIT"]],template:function(e,t){if(1&e&&(g.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div"),g._UZ(5,"system-icon",4),g.qZA(),g.TgZ(6,"div",5)(7,"div",6)(8,"div",7)(9,"h1")(10,"span",8),g._UZ(11,"system-label",9),g.qZA()()()()()()(),g.TgZ(12,"div",10),g.YNc(13,bl,5,0,"ng-container",11),g.YNc(14,fl,2,0,"ng-template",null,12,g.W1O),g.qZA()()(),g._UZ(16,"system-preferences-panel",13),g.TgZ(17,"system-collapsable-tab",14)(18,"div",10)(19,"system-preferences-panel-item",15)(20,"system-preferences-panel-item-display"),g._uU(21),g.qZA(),g.TgZ(22,"system-preferences-panel-item-edit")(23,"div",16)(24,"select",17),g.NdJ("ngModelChange",(function(e){return t.preferences.home_assistant=e})),g._UZ(25,"option"),g.TgZ(26,"option",18),g._UZ(27,"system-label",19),g.qZA(),g.TgZ(28,"option",20),g._UZ(29,"system-label",21),g.qZA()()()()()()()),2&e){const e=g.MAs(15);g.xp6(13),g.Q6J("ngIf",t.view.isEditMode())("ngIfElse",e),g.xp6(3),g.Q6J("preferences",t.preferences),g.xp6(1),g.Q6J("collapsible",!1),g.xp6(4),g.hij(" ",t.preferences.home_assistant," "),g.xp6(3),g.Q6J("ngModel",t.preferences.home_assistant)}},dependencies:[n.O5,l.YN,l.Kr,l.EJ,l.JJ,l.On,gl.z,L.f,M._,ul.W,ml.w,hl.f,pl.z,q.S],encapsulation:2})),AdministrationDefaultPreferences})();var _l=s(6538),vl=s(4730),Al=s(8280);const yl=function(e){return{"slds-theme--error":e}};function xl(e,t){if(1&e&&(g.TgZ(0,"tr",46)(1,"td"),g._UZ(2,"system-display-datetime",47),g.qZA(),g.TgZ(3,"td")(4,"div",48),g._uU(5),g.qZA()(),g.TgZ(6,"td")(7,"div",48),g._uU(8),g.qZA()(),g.TgZ(9,"td",49),g._uU(10),g.qZA()()),2&e){const e=t.$implicit;g.Q6J("ngClass",g.VKq(5,yl,"loginfail"==e.action)),g.xp6(2),g.Q6J("date",e.date_entered),g.xp6(3),g.Oqu(e.login_name),g.xp6(3),g.Oqu(e.ipaddress),g.xp6(2),g.Oqu(e.action)}}function Tl(e,t){1&e&&(g.TgZ(0,"div",50)(1,"system-illustration-no-records"),g._UZ(2,"system-label",51),g.qZA()())}function Ll(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",52)(1,"button",12),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw();return g.KtG(t.loadMore())})),g._UZ(2,"system-label",53),g.qZA()()}}let Ml=(()=>{var e;class AdministrationUserAccessLogViewer{constructor(e,t,s){(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"toast",void 0),(0,i.Z)(this,"limit","250"),(0,i.Z)(this,"filter",""),(0,i.Z)(this,"dateEnd",void 0),(0,i.Z)(this,"isLoading",!1),(0,i.Z)(this,"failedOnly",!1),(0,i.Z)(this,"entries",[]),this.backend=e,this.modal=t,this.toast=s}setNow(){this.dateEnd=new moment}loadData(){if(!this.isLoading){this.isLoading=!0;let e={limit:this.limit};this.filter&&(e.filter=this.filter),this.failedOnly&&(e.failedonly=this.failedOnly),this.dateEnd&&(e.date_end=this.dateEnd.format("YYYY-MM-DD HH:mm:ss")),this.backend.getRequest("admin/useraccesslog",e).subscribe((e=>{this.entries=e,this.isLoading=!1}),(e=>{this.toast.sendToast("Error loading log data!","error"),this.isLoading=!1}))}}loadMore(){if(!this.isLoading){this.isLoading=!0;let e={limit:this.limit,date_end:this.entries[this.entries.length-1].date_entered};this.filter&&(e.filter=this.filter),this.failedOnly&&(e.failedonly=this.failedOnly),this.backend.getRequest("admin/useraccesslog",e).subscribe((e=>{this.entries=this.entries.concat(e),this.isLoading=!1}),(e=>{this.toast.sendToast("Error loading log data!","error"),this.isLoading=!1}))}}buttonLoad(){this.loadData()}}return e=AdministrationUserAccessLogViewer,(0,i.Z)(AdministrationUserAccessLogViewer,"ɵfac",(function(t){return new(t||e)(g.Y36(m.y),g.Y36(Se.o),g.Y36(Fe.A))})),(0,i.Z)(AdministrationUserAccessLogViewer,"ɵcmp",g.Xpm({type:e,selectors:[["ng-component"]],decls:63,vars:9,consts:[[1,"slds-p-around--medium","slds-theme--shade"],[1,"slds-page-header__row"],[1,"slds-page-header__col-title"],[1,"slds-media"],["icon","lightning_usage"],[1,"slds-media__body"],[1,"slds-page-header__name"],[1,"slds-page-header__name-title"],[1,"slds-page-header__title","slds-truncate"],["label","LBL_USERACCESSLOG"],[1,"slds-page-header__name-meta"],["label","LBL_RECORDS"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_LOAD"],[1,"slds-section","slds-is-open","slds-p-around--xx-small"],[1,"slds-grid","slds-grid--vertical-align-end","slds-gutters_direct-xxx-small"],[1,"slds-col","slds-size--1-of-2"],[1,"slds-form-element__label"],["label","LBL_FILTER"],[1,"slds-grid","slds-grid--vertical-align-center"],[1,"slds-grow","slds-form-element__control","slds-input-has-icon","slds-input-has-icon_right"],["type","text","system-trim-input","",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-button","slds-button_icon","slds-input__icon","slds-input__icon_right",3,"click"],["icon","clear","addclasses","slds-icon-text-light"],[3,"ngModel","ngModelChange"],["label","LBL_FAILEDONLY"],[1,"slds-col","slds-size--1-of-4"],["label","LBL_END"],[1,"slds-grow",3,"ngModel","ngModelChange"],[1,"slds-grow","slds-p-horizontal--xx-small",3,"ngModel","ngModelChange"],["system-title","LBL_NOW","icon","clock","size","x-small",3,"click"],["label","LBL_ROWS"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],["system-to-bottom","",1,"slds-border--top"],[1,"slds-table","slds-table--bordered","slds-table--fixed-layout","slds-table--col-bordered","slds-no-row-hover","slds-table_header-fixed"],[2,"width","8rem"],["label","LBL_DATE",1,"slds-th__action"],[1,"slds-resizable"],["label","LBL_USER",1,"slds-th__action"],["label","LBL_IP_ADDRESS",1,"slds-th__action"],["label","LBL_ACTION",1,"slds-th__action"],["tbody",""],[3,"ngClass",4,"ngFor","ngForOf"],["class","slds-height_full slds-align--absolute-center",4,"ngIf"],["class","slds-p-around--small slds-align--absolute-center",4,"ngIf"],[3,"ngClass"],[3,"date"],[1,"slds-truncate"],[1,"slds-text-align--center"],[1,"slds-height_full","slds-align--absolute-center"],["label","LBL_NO_RECORDS_FOUND"],[1,"slds-p-around--small","slds-align--absolute-center"],["label","LBL_LOAD_MORE"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),g._UZ(4,"system-icon",4),g.TgZ(5,"div",5)(6,"div",6)(7,"div",7)(8,"h1")(9,"span",8),g._UZ(10,"system-label",9),g.qZA()()()(),g.TgZ(11,"p",10),g._uU(12),g._UZ(13,"system-label",11),g.qZA()()()(),g.TgZ(14,"button",12),g.NdJ("click",(function(){return t.loadData()})),g._UZ(15,"system-label",13),g.qZA()()(),g.TgZ(16,"div",14)(17,"div",15)(18,"div",16)(19,"label",17),g._UZ(20,"system-label",18),g.qZA(),g.TgZ(21,"div",19)(22,"div",20)(23,"input",21),g.NdJ("ngModelChange",(function(e){return t.filter=e})),g.qZA(),g.TgZ(24,"button",22),g.NdJ("click",(function(){return t.filter=""})),g._UZ(25,"system-button-icon",23),g.qZA()(),g.TgZ(26,"system-checkbox",24),g.NdJ("ngModelChange",(function(e){return t.failedOnly=e})),g._UZ(27,"system-label",25),g.qZA()()(),g.TgZ(28,"div",26)(29,"label",17),g._UZ(30,"system-label",27),g.qZA(),g.TgZ(31,"div",19)(32,"system-input-date",28),g.NdJ("ngModelChange",(function(e){return t.dateEnd=e})),g.qZA(),g.TgZ(33,"system-input-time",29),g.NdJ("ngModelChange",(function(e){return t.dateEnd=e})),g.qZA(),g.TgZ(34,"system-utility-icon",30),g.NdJ("click",(function(){return t.setNow()})),g.qZA()()(),g.TgZ(35,"div",26)(36,"label",17),g._UZ(37,"system-label",31),g.qZA(),g.TgZ(38,"div",32)(39,"select",33),g.NdJ("ngModelChange",(function(e){return t.limit=e})),g.TgZ(40,"option"),g._uU(41,"250"),g.qZA(),g.TgZ(42,"option"),g._uU(43,"500"),g.qZA(),g.TgZ(44,"option"),g._uU(45,"1000"),g.qZA()()()()()(),g.TgZ(46,"div",34)(47,"table",35)(48,"thead")(49,"tr")(50,"th",36),g._UZ(51,"system-label",37),g.qZA(),g.TgZ(52,"th",38),g._UZ(53,"system-label",39),g.qZA(),g.TgZ(54,"th",36),g._UZ(55,"system-label",40),g.qZA(),g.TgZ(56,"th",36),g._UZ(57,"system-label",41),g.qZA()()(),g.TgZ(58,"tbody",null,42),g.YNc(60,xl,11,7,"tr",43),g.qZA()(),g.YNc(61,Tl,3,0,"div",44),g.YNc(62,Ll,3,0,"div",45),g.qZA()),2&e&&(g.xp6(12),g.hij("",t.entries.length," "),g.xp6(11),g.Q6J("ngModel",t.filter),g.xp6(3),g.Q6J("ngModel",t.failedOnly),g.xp6(6),g.Q6J("ngModel",t.dateEnd),g.xp6(1),g.Q6J("ngModel",t.dateEnd),g.xp6(6),g.Q6J("ngModel",t.limit),g.xp6(21),g.Q6J("ngForOf",t.entries),g.xp6(1),g.Q6J("ngIf",0==t.entries.length),g.xp6(1),g.Q6J("ngIf",t.entries.length>0))},dependencies:[n.mk,n.sg,n.O5,l.YN,l.Kr,l.Fj,l.EJ,l.JJ,l.On,T.J,H.U,_l.a,L.f,vl.C,Bi.z,Yi.H,M._,J.r,A.H,Al.t,q.S],encapsulation:2})),AdministrationUserAccessLogViewer})();var Jl=s(5698),ql=s(5621);const El=function(e){return{"slds-has-error":e}};let Ul=(()=>{var e;class AdministrationLoginRestriction{constructor(e,t){(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"toast",void 0),(0,i.Z)(this,"isLoading",!0),(0,i.Z)(this,"restrictions",{user:{enabled:!1,number_attempts:0,monitored_period:0,blocking_duration:0,blocking_type:"permanent"},ip:{enabled:!1,number_attempts:0,monitored_period:0}}),(0,i.Z)(this,"restrictionsBackup",void 0),this.backend=e,this.toast=t}ngOnInit(){this.loadConfig()}isDirty(){return!_.isEqual(this.restrictions,this.restrictionsBackup)}cancelEditing(){this.restrictions=JSON.parse(JSON.stringify(this.restrictionsBackup))}saveConfig(){let e={ip_enabled:this.restrictions.ip.enabled?1:0,ip_number_attempts:this.restrictions.ip.number_attempts,ip_monitored_period:this.restrictions.ip.monitored_period,user_enabled:this.restrictions.user.enabled?1:0,user_number_attempts:this.restrictions.user.number_attempts,user_monitored_period:this.restrictions.user.monitored_period,user_blocking_duration:"time"===this.restrictions.user.blocking_type?this.restrictions.user.blocking_duration:"0"};this.isLoading=!0,this.backend.postRequest("configuration/configurator/editor/login_attempt_restriction",null,{config:e}).pipe((0,Jl.q)(1)).subscribe((e=>{this.restrictionsBackup=JSON.parse(JSON.stringify(this.restrictions)),this.toast.sendToast("Login Restriction Configuration successfully saved.","success"),this.isLoading=!1}))}loadConfig(){this.isLoading=!0,this.backend.getRequest("configuration/configurator/editor/login_attempt_restriction").pipe((0,Jl.q)(1)).subscribe({next:e=>{this.restrictions.ip.enabled="1"===e.ip_enabled||!1,this.restrictions.ip.number_attempts=1*e.ip_number_attempts||0,this.restrictions.ip.monitored_period=1*e.ip_monitored_period||0,this.restrictions.user.enabled="1"===e.user_enabled||!1,this.restrictions.user.number_attempts=1*e.user_number_attempts||0,this.restrictions.user.monitored_period=1*e.user_monitored_period||0,this.restrictions.user.blocking_duration=1*e.user_blocking_duration||0,this.restrictions.user.blocking_type=this.restrictions.user.blocking_duration?"time":"permanent",this.restrictionsBackup=JSON.parse(JSON.stringify(this.restrictions)),this.isLoading=!1},error:e=>{this.toast.sendToast("Error loading Login Restriction Config.","error"),this.isLoading=!1}})}}return e=AdministrationLoginRestriction,(0,i.Z)(AdministrationLoginRestriction,"ɵfac",(function(t){return new(t||e)(g.Y36(m.y),g.Y36(Fe.A))})),(0,i.Z)(AdministrationLoginRestriction,"ɵcmp",g.Xpm({type:e,selectors:[["administration-login-restriction"]],decls:78,vars:37,consts:[[1,"slds-grid",3,"system-overlay-loading-spinner"],[1,"slds-p-around--medium",2,"width","100%"],[1,"slds-grid","slds-grid--align-spread"],[1,"slds-text-heading_small"],["label","LBL_USER_RESTRICTION"],["label","LBL_ACTIVE",1,"slds-m-bottom--xx-small","spice-display-block",3,"ngModel","ngModelChange"],[1,"slds-grid"],[1,"slds-form-element"],["for","user-number-attempts",1,"slds-form-element__label"],["title","required",1,"slds-required"],["label","LBL_MAX_LOGIN_ATTEMPTS"],[1,"slds-form-element__control"],["id","user-number-attempts",3,"disabled","ngModel","onlyField","precision","asNumber","ngModelChange"],[1,"slds-form-element","slds-m-left--medium"],["for","user-monitored-period",1,"slds-form-element__label"],["label","LBL_MONITORED_PERIOD"],["label","LBL_MINUTES","length","short",2,"display","inline-block"],["id","user-monitored-period",3,"disabled","ngModel","onlyField","precision","asNumber","ngModelChange"],[1,"slds-form-element__legend","slds-form-element__label",2,"font-weight","normal"],["label","LBL_LOCK_TYPE"],[1,"slds-radio"],["type","radio","id","user-lock-type-time","value","time",3,"ngModel","disabled","ngModelChange"],["for","user-lock-type-time",1,"slds-radio__label"],[1,"slds-radio_faux"],[1,"slds-form-element__label"],["label","LBL_TIME"],["type","radio","id","user-lock-type-perm","value","permanent",3,"ngModel","disabled","ngModelChange"],["for","user-lock-type-perm",1,"slds-radio__label"],["label","LBL_PERMANENT"],[1,"slds-form-element","slds-m-left--x-small"],["for","user-blocking-duration",1,"slds-form-element__label"],["label","LBL_BLOCKING_DURATION"],[1,"slds-form-element__control",3,"ngClass"],["id","user-blocking-duration",3,"disabled","ngModel","onlyField","precision","asNumber","ngModelChange"],[1,"slds-border--left","slds-p-around--medium","slds-border--right",2,"width","100%"],["label","LBL_IP_RESTRICTION"],["for","ip-number-attempts",1,"slds-form-element__label"],["id","ip-number-attempts",3,"disabled","ngModel","onlyField","precision","asNumber","ngModelChange"],["for","ip-monitored-period",1,"slds-form-element__label"],["id","ip-monitored-period",3,"disabled","ngModel","onlyField","precision","asNumber","ngModelChange"],[1,"slds-p-around--medium","slds-align-bottom",2,"white-space","nowrap"],[1,"slds-button","slds-button--icon","slds-button_neutral","slds-button--icon-border",3,"disabled","click"],["icon","close"],[1,"slds-button","slds-button--icon","slds-button_brand","slds-button--icon-border","slds-m-left--small",3,"disabled","click"],["icon","check"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),g._UZ(4,"system-label",4),g.qZA(),g.TgZ(5,"system-checkbox-toggle",5),g.NdJ("ngModelChange",(function(e){return t.restrictions.user.enabled=e})),g.qZA()(),g.TgZ(6,"div",6)(7,"div",7)(8,"label",8)(9,"abbr",9),g._uU(10,"* "),g.qZA(),g._UZ(11,"system-label",10),g.qZA(),g.TgZ(12,"div",11)(13,"system-input-number",12),g.NdJ("ngModelChange",(function(e){return t.restrictions.user.number_attempts=e})),g.qZA()()(),g.TgZ(14,"div",13)(15,"label",14)(16,"abbr",9),g._uU(17,"* "),g.qZA(),g._UZ(18,"system-label",15),g._uU(19," ("),g._UZ(20,"system-label",16),g._uU(21,")"),g.qZA(),g.TgZ(22,"div",11)(23,"system-input-number",17),g.NdJ("ngModelChange",(function(e){return t.restrictions.user.monitored_period=e})),g.qZA()()(),g.TgZ(24,"fieldset",13)(25,"legend",18),g._UZ(26,"system-label",19),g.qZA(),g.TgZ(27,"div",11)(28,"span",20)(29,"input",21),g.NdJ("ngModelChange",(function(e){return t.restrictions.user.blocking_type=e})),g.qZA(),g.TgZ(30,"label",22),g._UZ(31,"span",23),g.TgZ(32,"span",24),g._UZ(33,"system-label",25),g.qZA()()(),g.TgZ(34,"span",20)(35,"input",26),g.NdJ("ngModelChange",(function(e){return t.restrictions.user.blocking_type=e})),g.qZA(),g.TgZ(36,"label",27),g._UZ(37,"span",23),g.TgZ(38,"span",24),g._UZ(39,"system-label",28),g.qZA()()()()(),g.TgZ(40,"div",29)(41,"label",30)(42,"abbr",9),g._uU(43,"* "),g.qZA(),g._UZ(44,"system-label",31),g._uU(45," ("),g._UZ(46,"system-label",16),g._uU(47,")"),g.qZA(),g.TgZ(48,"div",32)(49,"system-input-number",33),g.NdJ("ngModelChange",(function(e){return t.restrictions.user.blocking_duration=e}))("ngModelChange",(function(){return t.restrictions.user.blocking_type=0===t.restrictions.user.blocking_duration?"permanent":"time"})),g.qZA()()()()(),g.TgZ(50,"div",34)(51,"div",2)(52,"div",3),g._UZ(53,"system-label",35),g.qZA(),g.TgZ(54,"system-checkbox-toggle",5),g.NdJ("ngModelChange",(function(e){return t.restrictions.ip.enabled=e})),g.qZA()(),g.TgZ(55,"div",6)(56,"div",7)(57,"label",36)(58,"abbr",9),g._uU(59,"* "),g.qZA(),g._UZ(60,"system-label",10),g.qZA(),g.TgZ(61,"div",11)(62,"system-input-number",37),g.NdJ("ngModelChange",(function(e){return t.restrictions.ip.number_attempts=e})),g.qZA()()(),g.TgZ(63,"div",13)(64,"label",38)(65,"abbr",9),g._uU(66,"* "),g.qZA(),g._UZ(67,"system-label",15),g._uU(68," ("),g._UZ(69,"system-label",16),g._uU(70,")"),g.qZA(),g.TgZ(71,"div",11)(72,"system-input-number",39),g.NdJ("ngModelChange",(function(e){return t.restrictions.ip.monitored_period=e})),g.qZA()()()()(),g.TgZ(73,"div",40)(74,"button",41),g.NdJ("click",(function(){return t.cancelEditing()})),g._UZ(75,"system-button-icon",42),g.qZA(),g.TgZ(76,"button",43),g.NdJ("click",(function(){return t.saveConfig()})),g._UZ(77,"system-button-icon",44),g.qZA()()()),2&e&&(g.Q6J("system-overlay-loading-spinner",t.isLoading),g.xp6(5),g.Q6J("ngModel",t.restrictions.user.enabled),g.xp6(8),g.Q6J("disabled",!t.restrictions.user.enabled)("ngModel",t.restrictions.user.number_attempts)("onlyField",!0)("precision",0)("asNumber",!0),g.xp6(10),g.Q6J("disabled",!t.restrictions.user.enabled)("ngModel",t.restrictions.user.monitored_period)("onlyField",!0)("precision",0)("asNumber",!0),g.xp6(6),g.Q6J("ngModel",t.restrictions.user.blocking_type)("disabled",!t.restrictions.user.enabled),g.xp6(6),g.Q6J("ngModel",t.restrictions.user.blocking_type)("disabled",!t.restrictions.user.enabled),g.xp6(13),g.Q6J("ngClass",g.VKq(35,El,"time"===t.restrictions.user.blocking_type&&0===t.restrictions.user.blocking_duration)),g.xp6(1),g.Q6J("disabled",!t.restrictions.user.enabled||"permanent"===t.restrictions.user.blocking_type)("ngModel",t.restrictions.user.blocking_duration)("onlyField",!0)("precision",0)("asNumber",!0),g.xp6(5),g.Q6J("ngModel",t.restrictions.ip.enabled),g.xp6(8),g.Q6J("disabled",!t.restrictions.ip.enabled)("ngModel",t.restrictions.ip.number_attempts)("onlyField",!0)("precision",0)("asNumber",!0),g.xp6(10),g.Q6J("disabled",!t.restrictions.ip.enabled)("ngModel",t.restrictions.ip.monitored_period)("onlyField",!0)("precision",0)("asNumber",!0),g.xp6(2),g.Q6J("disabled",t.isLoading),g.xp6(2),g.Q6J("disabled",t.isLoading))},dependencies:[n.mk,l.Fj,l._,l.JJ,l.On,T.J,Qi.v,ql.i,M._,x._],encapsulation:2})),AdministrationLoginRestriction})();const Cl=["administration-login-restriction-ip-addresses-row",""];function kl(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",7)(1,"div",8),g._uU(2),g.qZA(),g.TgZ(3,"button",9),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw();return g.KtG(t.editDescription())})),g._UZ(4,"system-button-icon",10),g.qZA()()}if(2&e){const e=g.oxw();g.xp6(2),g.Oqu(e.ipAddress.description),g.xp6(1),g.Q6J("disabled",e.otherEditing)}}function Nl(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",7)(1,"div",11)(2,"input",12),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.ipAddress.description=t)})),g.qZA()(),g.TgZ(3,"button",13),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw();return g.KtG(t.cancel())})),g._UZ(4,"system-button-icon",14),g.qZA(),g.TgZ(5,"button",15),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw();return g.KtG(t.save())})),g._UZ(6,"system-button-icon",14),g.qZA()()}if(2&e){const e=g.oxw();g.xp6(2),g.Q6J("ngModel",e.ipAddress.description)("placeholder",e.language.getLabel("LBL_DESCRIPTION")),g.xp6(2),g.Q6J("icon","close"),g.xp6(2),g.Q6J("icon","check")}}let Sl=(()=>{var e;class AdministrationLoginRestrictionIpAddressesRow{constructor(e,t,s){(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"toast",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"ipAddress",void 0),(0,i.Z)(this,"editing",new g.vpe),(0,i.Z)(this,"otherEditing",void 0),(0,i.Z)(this,"isEditing",!1),(0,i.Z)(this,"backup",void 0),this.backend=e,this.toast=t,this.language=s}editDescription(){this.backup=this.ipAddress.description,this.isEditing=!0,this.editing.emit(!0)}save(){this.isEditing=!1,this.backend.putRequest("authentication/ipAddress/"+this.ipAddress.address,null,{description:this.ipAddress.description}).pipe((0,Jl.q)(1)).subscribe((e=>{this.isEditing=!1,this.editing.emit(!1)}),(e=>{this.ipAddress.description=this.backup,this.isEditing=!1,this.editing.emit(!1),this.toast.sendToast("Error saving Description of IP Address.","error")}))}cancel(){this.isEditing=!1,this.editing.emit(!1),this.ipAddress.description=this.backup}}return e=AdministrationLoginRestrictionIpAddressesRow,(0,i.Z)(AdministrationLoginRestrictionIpAddressesRow,"ɵfac",(function(t){return new(t||e)(g.Y36(m.y),g.Y36(Fe.A),g.Y36(p.d))})),(0,i.Z)(AdministrationLoginRestrictionIpAddressesRow,"ɵcmp",g.Xpm({type:e,selectors:[["","administration-login-restriction-ip-addresses-row",""]],inputs:{ipAddress:"ipAddress",otherEditing:"otherEditing"},outputs:{editing:"editing"},attrs:Cl,decls:14,vars:7,consts:[[1,"slds-p-right--none"],[3,"ngModel","disabled","ngModelChange"],[1,"slds-p-right--x-small"],[1,"slds-truncate"],["class","slds-grid",4,"ngIf"],[3,"date"],[1,"slds-p-right--x-small",2,"width","100%"],[1,"slds-grid"],[1,"slds-truncate","slds-col--bump-right"],["system-title","LBL_RELOAD",1,"slds-button","slds-button--icon","slds-m-left--xx-small",3,"disabled","click"],["icon","edit"],[2,"width","100%"],[1,"slds-input",3,"ngModel","placeholder","ngModelChange"],[1,"slds-button","slds-button--icon-border","slds-m-left--xx-small",3,"click"],["size","small",3,"icon"],[1,"slds-button","slds-button--icon-border","slds-button--brand",3,"click"]],template:function(e,t){1&e&&(g.TgZ(0,"td",0)(1,"system-checkbox",1),g.NdJ("ngModelChange",(function(e){return t.ipAddress.selected=e})),g.qZA()(),g.TgZ(2,"td",2)(3,"div",3),g._uU(4),g.qZA()(),g.TgZ(5,"td",2),g.YNc(6,kl,5,2,"div",4),g.YNc(7,Nl,7,4,"div",4),g.qZA(),g.TgZ(8,"td",2)(9,"div",3),g._UZ(10,"system-display-datetime",5),g.qZA()(),g.TgZ(11,"td",6)(12,"div",3),g._uU(13),g.qZA()()),2&e&&(g.xp6(1),g.Q6J("ngModel",t.ipAddress.selected)("disabled",t.otherEditing),g.xp6(3),g.Oqu(t.ipAddress.address),g.xp6(2),g.Q6J("ngIf",!t.isEditing),g.xp6(1),g.Q6J("ngIf",t.isEditing),g.xp6(3),g.Q6J("date",t.ipAddress.date_entered),g.xp6(3),g.Oqu(t.ipAddress.created_by_name))},dependencies:[n.O5,l.Fj,l.JJ,l.On,T.J,H.U,_l.a,q.S],encapsulation:2})),AdministrationLoginRestrictionIpAddressesRow})();const Fl=["table"];function wl(e,t){1&e&&g._UZ(0,"system-label",23)}function Il(e,t){1&e&&g._UZ(0,"system-label",24)}function Ol(e,t){if(1&e){const e=g.EpF();g.ynx(0),g.TgZ(1,"button",25),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw();return g.KtG(t.moveIpAddresses())})),g._uU(2),g.qZA(),g.TgZ(3,"button",26),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw();return g.KtG(t.deleteIpAddresses())})),g._UZ(4,"system-button-icon",27),g.qZA(),g.BQk()}if(2&e){const e=g.oxw();g.xp6(1),g.Q6J("disabled",e.isEditing),g.xp6(1),g.hij("➔",e.altColor.toUpperCase(),""),g.xp6(1),g.Q6J("disabled",e.isEditing)}}const Rl=function(e){return{"slds-has-error":e}};function Dl(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"tr")(1,"td",28)(2,"div",29)(3,"div",30)(4,"input",31),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.newAddress=t)}))("change",(function(){g.CHM(e);const t=g.oxw();return g.KtG(t.checkAddressInput())})),g.qZA()(),g.TgZ(5,"div",32),g._uU(6),g.qZA()()(),g.TgZ(7,"td",33)(8,"input",34),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.newDescription=t)})),g.qZA()(),g.TgZ(9,"td",28)(10,"button",35),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw();return g.KtG(t.cancelNewAddress())})),g._UZ(11,"system-button-icon",36),g.qZA(),g.TgZ(12,"button",37),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw();return g.KtG(t.saveNewAddress())})),g._UZ(13,"system-button-icon",36),g.qZA()()()}if(2&e){const e=g.oxw();g.xp6(2),g.Q6J("ngClass",g.VKq(10,Rl,e.addressError)),g.xp6(2),g.Q6J("ngModel",e.newAddress)("placeholder",e.language.getLabel("LBL_IPADDRESS")),g.xp6(2),g.Oqu(e.addressError),g.xp6(2),g.Q6J("ngModel",e.newDescription)("placeholder",e.language.getLabel("LBL_DESCRIPTION")),g.xp6(3),g.Q6J("icon","close")("size","small"),g.xp6(2),g.Q6J("icon","check")("size","small")}}function Ql(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"tr",38),g.NdJ("editing",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.isAltering=t)})),g.qZA()}if(2&e){const e=t.$implicit,s=g.oxw();g.Q6J("ipAddress",e)("otherEditing",s.isEditing)}}function Bl(e,t){1&e&&(g.TgZ(0,"div",39)(1,"div",40)(2,"div",41)(3,"h3",42),g._UZ(4,"system-label",43),g.qZA()()()())}const Yl=function(e){return{"slds-grow":e}},zl=function(e){return{borderBottom:e}};let Gl=(()=>{var e;class AdministrationLoginRestrictionIpAddresses{constructor(e,t,s,n,l){(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"toast",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"color",void 0),(0,i.Z)(this,"siblingComponent",void 0),(0,i.Z)(this,"table",void 0),(0,i.Z)(this,"altColor",void 0),(0,i.Z)(this,"ipAddresses",[]),(0,i.Z)(this,"isLoading",!1),(0,i.Z)(this,"isAltering",!1),(0,i.Z)(this,"isAdding",!1),(0,i.Z)(this,"newAddress",""),(0,i.Z)(this,"newDescription",""),(0,i.Z)(this,"addressError",""),this.backend=e,this.modal=t,this.toast=s,this.metadata=n,this.language=l}get isEditing(){return this.isAltering||this.isAdding}ngOnInit(){this.altColor="black"===this.color?"white":"black",this.loadIpAddresses()}loadIpAddresses(){this.isLoading=!0,this.backend.getRequest("authentication/ipAddresses/"+this.color).pipe((0,Jl.q)(1)).subscribe({next:e=>{this.ipAddresses=e,this.sortIpAddresses(),this.isLoading=!1},error:e=>{this.toast.sendToast("Error loading "+this.color+" listed IP Addresses.",e.error.error.message,"error")}})}sortIpAddresses(){this.ipAddresses=this.ipAddresses.sort(((e,t)=>this.compareIpAddresses(e,t))),this.ipAddresses=this.ipAddresses.sort(((e,t)=>this.compareIpAddresses(e,t)))}compareIpAddresses(e,t){return Number(e.address.split(".").map((e=>`000${e}`.slice(-3))).join(""))-Number(t.address.split(".").map((e=>`000${e}`.slice(-3))).join(""))}deleteIpAddresses(){let e=[],t=[];this.ipAddresses.forEach(((t,s)=>{t.selected&&e.push(s)})),e.length&&this.modal.confirm("Remove "+e.length+" IP Addresses? This can not be undone.","Remove IP Addresses?",null).pipe((0,Jl.q)(1)).subscribe({next:s=>{if(s){this.isLoading=!0;let s=e.length;e.forEach((e=>{this.backend.deleteRequest("authentication/ipAddress/"+this.ipAddresses[e].address).pipe((0,Jl.q)(1)).subscribe({next:i=>{!0===i.success&&t.push(e),s--,s<=0&&(this._removeFromList(t),this.isLoading=!1)},error:i=>{s--,s<=0&&(this._removeFromList(t),this.isLoading=!1),this.toast.sendToast("Error deleting IP Address "+this.ipAddresses[e].address+".",i.error.error.message,"error")}})}))}else this.isLoading=!1}})}moveIpAddresses(){let e=[],t=[];this.ipAddresses.forEach(((t,s)=>{t.selected&&e.push(s)})),e.length&&this.modal.confirm("Move "+e.length+" IP Addresses to "+this.altColor+" list?","Move IP Addresses?",null).pipe((0,Jl.q)(1)).subscribe((s=>{let i="black"===this.color?"white":"black";this.isLoading=this.siblingComponent.isLoading=!0;let n=e.length;e.forEach((e=>{this.backend.putRequest("authentication/ipAddress/"+this.ipAddresses[e].address+"/move/"+i).pipe((0,Jl.q)(1)).subscribe({next:s=>{!0===s.success&&(this.siblingComponent.ipAddresses.push(this.ipAddresses[e]),this.ipAddresses[e].selected=!1,t.push(e),this.siblingComponent.sortIpAddresses()),n--,n<=0&&(this._removeFromList(t),this.isLoading=this.siblingComponent.isLoading=!1)},error:s=>{n--,n<=0&&(this._removeFromList(t),this.isLoading=this.siblingComponent.isLoading=!1),this.toast.sendToast("Error moving IP Address "+this.ipAddresses[e].address+".",s.error.error.message,"error")}})}))}))}_removeFromList(e){for(let t=(e=e.sort(((e,t)=>e-t))).length-1;t>=0;t--)this.ipAddresses.splice(e[t],1)}get checkboxesUsed(){for(let e of this.ipAddresses)if(e?.selected)return!0;return!1}saveNewAddress(){this.checkAddressInput(),this.addressError||(this.isLoading=!0,this.backend.postRequest("authentication/ipAddress/"+this.newAddress,null,{color:this.color[0],description:this.newDescription}).pipe((0,Jl.q)(1)).subscribe({next:e=>{this.isLoading=!1,this.ipAddresses.push(e.data),this.sortIpAddresses(),this.toast.sendToast("IP Address "+this.newAddress+" added ("+this.color+" listed).","success"),this.newAddress="",this.newDescription="",this.isAdding=!1},error:e=>{this.toast.sendToast("Error saving IP Address.","error",e.error.error.message),this.isLoading=!1,this.isAdding=!1}}))}checkAddressInput(){this.newAddress.length?(this.newAddress=this.sanitizeIpAddress(this.newAddress),this.checkIpAddress(this.newAddress)?this.ipAddressIsListed(this.newAddress)?this.addressError="Already listed.":this.addressError="":this.addressError="Invalid."):this.addressError="Missing."}sanitizeIpAddress(e){let t=(e=e.replace(/\s+/g,"")).split(".");return t.forEach(((e,s)=>{t[s]=e.replace(/^0+(?!$)/,"")})),t.join(".")}checkIpAddress(e){let t=e.split(".");return 4===t.length&&!t.some((e=>!e.match(/\d+/)||parseInt(e,10)>255))}ipAddressIsListed(e){return!0===this.ipAddresses.some((t=>{if(t.address===e)return!0}))||!0===this.siblingComponent.ipAddresses.some((t=>{if(t.address===e)return!0}))}startAdding(){this.isAdding=!0,this.addressError="",this.table.nativeElement.scrollTop=0}cancelNewAddress(){this.isAdding=!1,this.newAddress="",this.newDescription=""}}return e=AdministrationLoginRestrictionIpAddresses,(0,i.Z)(AdministrationLoginRestrictionIpAddresses,"ɵfac",(function(t){return new(t||e)(g.Y36(m.y),g.Y36(Se.o),g.Y36(Fe.A),g.Y36(f.Pu),g.Y36(p.d))})),(0,i.Z)(AdministrationLoginRestrictionIpAddresses,"ɵcmp",g.Xpm({type:e,selectors:[["administration-login-restriction-ip-addresses"]],viewQuery:function(e,t){if(1&e&&g.Gf(Fl,7),2&e){let e;g.iGM(e=g.CRH())&&(t.table=e.first)}},inputs:{color:"color",siblingComponent:"siblingComponent"},decls:32,vars:15,consts:[[1,"slds-grid","slds-grid--vertical","slds-p-around--medium",2,"height","100%",3,"system-overlay-loading-spinner"],[1,"slds-grid","slds-grid--align-spread","slds-m-bottom--x-small"],[1,"slds-text-heading_small","slds-col--bump-right"],["label","LBL_WHITE_LISTED_IPADDRESSES",4,"ngIf"],["label","LBL_BLACK_LISTED_IPADDRESSES",4,"ngIf"],[4,"ngIf"],["system-title","LBL_ADD",1,"slds-button","slds-button--icon","slds-m-left--xx-small",3,"disabled","click"],["icon","new"],["system-title","LBL_RELOAD",1,"slds-button","slds-button--icon","slds-m-left--xx-small",3,"disabled","click"],["icon","refresh"],[1,"slds-scrollable--y",3,"ngClass"],[1,"slds-table","slds-table_bordered","slds-table--header-fixed",3,"ngStyle"],["table",""],[1,"slds-text-title--caps"],[1,"slds-truncate","slds-p-horizontal--x-small"],["label","LBL_ADDRESS"],[2,"width","100%"],["label","LBL_DESCRIPTION"],["label","LBL_DATE_ENTERED"],["label","LBL_CREATED_BY"],["system-multi-select-checkboxes",""],["administration-login-restriction-ip-addresses-row","",3,"ipAddress","otherEditing","editing",4,"ngFor","ngForOf"],["class","slds-grow slds-align--absolute-center",4,"ngIf"],["label","LBL_WHITE_LISTED_IPADDRESSES"],["label","LBL_BLACK_LISTED_IPADDRESSES"],[1,"slds-button","slds-button--neutral",2,"padding","0.25rem","line-height","0","font-weight","bold",3,"disabled","click"],["system-title","LBL_DELETE",1,"slds-button","slds-button--icon",3,"disabled","click"],["icon","delete"],["colspan","2",2,"vertical-align","top"],[1,"slds-form-element",3,"ngClass"],[1,"slds-form-element__control"],["system-autofocus","","type","text",1,"slds-input",2,"min-width","8.8rem",3,"ngModel","placeholder","ngModelChange","change"],["id","error-message-unique-id",1,"slds-form-element__help"],[2,"vertical-align","top"],[1,"slds-input",3,"ngModel","placeholder","ngModelChange"],[1,"slds-button","slds-button--icon-border",3,"click"],[3,"icon","size"],[1,"slds-button","slds-button--icon-border","slds-button--brand",3,"click"],["administration-login-restriction-ip-addresses-row","",3,"ipAddress","otherEditing","editing"],[1,"slds-grow","slds-align--absolute-center"],[1,"slds-illustration","slds-illustration_small"],[1,"slds-text-longform"],[1,"slds-text-heading_medium"],["label","MSG_NO_IP_ADDRESSES_LISTED"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0)(1,"div",1)(2,"div",2),g.YNc(3,wl,1,0,"system-label",3),g.YNc(4,Il,1,0,"system-label",4),g.qZA(),g.YNc(5,Ol,5,3,"ng-container",5),g.TgZ(6,"button",6),g.NdJ("click",(function(){return t.startAdding()})),g._UZ(7,"system-button-icon",7),g.qZA(),g.TgZ(8,"button",8),g.NdJ("click",(function(){return t.loadIpAddresses()})),g._UZ(9,"system-button-icon",9),g.qZA()(),g.TgZ(10,"div",10)(11,"table",11,12)(13,"thead")(14,"tr",13),g._UZ(15,"th"),g.TgZ(16,"th")(17,"div",14),g._UZ(18,"system-label",15),g.qZA()(),g.TgZ(19,"th",16)(20,"div",14),g._UZ(21,"system-label",17),g.qZA()(),g.TgZ(22,"th")(23,"div",14),g._UZ(24,"system-label",18),g.qZA()(),g.TgZ(25,"th")(26,"div",14),g._UZ(27,"system-label",19),g.qZA()()()(),g.TgZ(28,"tbody",20),g.YNc(29,Dl,14,12,"tr",5),g.YNc(30,Ql,1,2,"tr",21),g.qZA()()(),g.YNc(31,Bl,5,0,"div",22),g.qZA()),2&e&&(g.Q6J("system-overlay-loading-spinner",t.isLoading),g.xp6(3),g.Q6J("ngIf","white"===t.color),g.xp6(1),g.Q6J("ngIf","black"===t.color),g.xp6(1),g.Q6J("ngIf",t.checkboxesUsed),g.xp6(1),g.Q6J("disabled",t.isEditing),g.xp6(2),g.Q6J("disabled",t.isEditing),g.xp6(2),g.Q6J("ngClass",g.VKq(11,Yl,0!==t.ipAddresses.length)),g.xp6(1),g.Q6J("ngStyle",g.VKq(13,zl,0===t.ipAddresses.length?"none":"auto")),g.xp6(18),g.Q6J("ngIf",t.isAdding),g.xp6(1),g.Q6J("ngForOf",t.ipAddresses),g.xp6(1),g.Q6J("ngIf",!t.isAdding&&!t.isLoading&&0===t.ipAddresses.length))},dependencies:[n.mk,n.sg,n.O5,n.PC,l.Fj,l.JJ,l.On,T.J,M._,Ss.m,x._,q.S,Hs.Q,Sl],encapsulation:2})),AdministrationLoginRestrictionIpAddresses})(),Pl=(()=>{var e;class AdministrationPasswordConfig{constructor(e,t,s,n){(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"toast",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"isLoading",!0),(0,i.Z)(this,"config",{minpwdlength:6,oneupper:!0,onelower:!0,onenumber:!0,onespecial:!0,pwdvaliditydays:0}),(0,i.Z)(this,"configBackup",void 0),this.backend=e,this.modal=t,this.toast=s,this.language=n}configIsDirty(){return!_.isEqual(this.config,this.configBackup)}cancel(){this.config=JSON.parse(JSON.stringify(this.configBackup))}save(){let e={minpwdlength:this.config.minpwdlength,oneupper:this.config.oneupper?"1":"0",onelower:this.config.onelower?"1":"0",onenumber:this.config.onenumber?"1":"0",onespecial:this.config.onespecial?"1":"0",pwdvaliditydays:this.config.pwdvaliditydays};this.isLoading=!0,this.backend.postRequest("configuration/configurator/editor/passwordsetting",null,{config:e}).pipe((0,Jl.q)(1)).subscribe((e=>{this.configBackup=JSON.parse(JSON.stringify(this.config)),this.toast.sendToast("Password Configuration successfully saved.","success"),this.isLoading=!1}))}ngOnInit(){this.loadConfig()}loadConfig(){this.isLoading=!0,this.backend.getRequest("configuration/configurator/editor/passwordsetting").pipe((0,Jl.q)(1)).subscribe((e=>{this.config.oneupper=!0===e.oneupper||1===e.oneupper||"1"===e.oneupper||!1,this.config.onelower=!0===e.onelower||1===e.onelower||"1"===e.onelower||!1,this.config.onenumber=!0===e.onenumber||1===e.onenumber||"1"===e.onenumber||!1,this.config.onespecial=!0===e.onespecial||1===e.onespecial||"1"===e.onespecial||!1,this.config.minpwdlength=parseInt(e.minpwdlength,10)||0,this.config.pwdvaliditydays=parseInt(e.pwdvaliditydays,10)||0,this.configBackup=JSON.parse(JSON.stringify(this.config)),this.isLoading=!1}))}}return e=AdministrationPasswordConfig,(0,i.Z)(AdministrationPasswordConfig,"ɵfac",(function(t){return new(t||e)(g.Y36(m.y),g.Y36(Se.o),g.Y36(Fe.A),g.Y36(p.d))})),(0,i.Z)(AdministrationPasswordConfig,"ɵcmp",g.Xpm({type:e,selectors:[["administration-password-config"]],decls:38,vars:15,consts:[[1,"slds-p-around--medium",3,"system-overlay-loading-spinner"],[1,"slds-grid","slds-grid--align-spread"],[1,"slds-text-heading_small"],["label","LBL_PASSWORD_CONFIGURATION"],[1,"slds-p-bottom--x-small",2,"white-space","nowrap"],[1,"slds-button","slds-button--icon","slds-button_neutral","slds-button--icon-border",3,"disabled","click"],["icon","close"],[1,"slds-button","slds-button--icon","slds-button_brand","slds-button--icon-border","slds-m-left--small",3,"disabled","click"],["icon","check"],[1,"slds-grid","slds-grid--vertical-align-start"],[1,"slds-form-element"],["for","password-config-minpwdlength",1,"slds-form-element__label"],["label","LBL_MIN_LENGTH"],[1,"slds-form-element__control"],["id","password-config-minpwdlength","size","3",3,"ngModel","onlyField","precision","asNumber","ngModelChange"],[1,"slds-form-element","slds-p-left--medium"],["for","password-config-pwdvaliditydays",1,"slds-form-element__label"],["label","LBL_EXPIRATION"],["label","LBL_DAYS",2,"display","inline-block"],["label","LBL_OFF",2,"display","inline-block"],["id","password-config-pwdvaliditydays","size","4",3,"ngModel","onlyField","precision","asNumber","ngModelChange"],["system-multi-select-checkboxes","",1,"slds-p-left--medium"],[3,"ngModel","ngModelChange"],["label","LBL_ONE_UPPERCASE"],["label","LBL_ONE_LOWERCASE"],["label","LBL_ONE_DIGIT"],["label","LBL_ONE_SPECIALCHAR"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0)(1,"div",1)(2,"div",2),g._UZ(3,"system-label",3),g.qZA(),g.TgZ(4,"div",4)(5,"button",5),g.NdJ("click",(function(){return t.cancel()})),g._UZ(6,"system-button-icon",6),g.qZA(),g.TgZ(7,"button",7),g.NdJ("click",(function(){return t.save()})),g._UZ(8,"system-button-icon",8),g.qZA()()(),g.TgZ(9,"div",9)(10,"div",10)(11,"label",11),g._UZ(12,"system-label",12),g.qZA(),g.TgZ(13,"div",13)(14,"system-input-number",14),g.NdJ("ngModelChange",(function(e){return t.config.minpwdlength=e})),g.qZA()()(),g.TgZ(15,"div",15)(16,"label",16),g._UZ(17,"system-label",17),g._uU(18," ("),g._UZ(19,"system-label",18),g._uU(20,", 0="),g._UZ(21,"system-label",19),g._uU(22,") "),g.qZA(),g.TgZ(23,"div",13)(24,"system-input-number",20),g.NdJ("ngModelChange",(function(e){return t.config.pwdvaliditydays=e})),g.qZA()()(),g.TgZ(25,"div",21)(26,"div")(27,"system-checkbox",22),g.NdJ("ngModelChange",(function(e){return t.config.oneupper=e})),g._UZ(28,"system-label",23),g.qZA()(),g.TgZ(29,"div")(30,"system-checkbox",22),g.NdJ("ngModelChange",(function(e){return t.config.onelower=e})),g._UZ(31,"system-label",24),g.qZA()(),g.TgZ(32,"div")(33,"system-checkbox",22),g.NdJ("ngModelChange",(function(e){return t.config.onenumber=e})),g._UZ(34,"system-label",25),g.qZA()(),g.TgZ(35,"div")(36,"system-checkbox",22),g.NdJ("ngModelChange",(function(e){return t.config.onespecial=e})),g._UZ(37,"system-label",26),g.qZA()()()()()),2&e&&(g.Q6J("system-overlay-loading-spinner",t.isLoading),g.xp6(5),g.Q6J("disabled",t.isLoading),g.xp6(2),g.Q6J("disabled",t.isLoading),g.xp6(7),g.Q6J("ngModel",t.config.minpwdlength)("onlyField",!0)("precision",0)("asNumber",!0),g.xp6(10),g.Q6J("ngModel",t.config.pwdvaliditydays)("onlyField",!0)("precision",0)("asNumber",!0),g.xp6(3),g.Q6J("ngModel",t.config.oneupper),g.xp6(3),g.Q6J("ngModel",t.config.onelower),g.xp6(3),g.Q6J("ngModel",t.config.onenumber),g.xp6(3),g.Q6J("ngModel",t.config.onespecial))},dependencies:[l.JJ,l.On,T.J,H.U,ql.i,M._,x._,Hs.Q],encapsulation:2})),AdministrationPasswordConfig})();function Hl(e,t){1&e&&(g.ynx(0),g._uU(1,"permanent"),g.BQk())}function Kl(e,t){if(1&e&&(g.ynx(0),g._UZ(1,"system-display-datetime",21),g.BQk()),2&e){const e=g.oxw().$implicit;g.xp6(1),g.Q6J("date",e.login_blocked_until)}}function jl(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"button",22),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw().$implicit,s=g.oxw();return g.KtG(s.unBlockUser(t.id,t.user_name))})),g._UZ(1,"system-button-icon",23),g.qZA()}}function $l(e,t){1&e&&g._UZ(0,"system-button-icon",24)}function Vl(e,t){if(1&e&&(g.TgZ(0,"tr")(1,"td",16)(2,"div",17),g._uU(3),g.qZA()(),g.TgZ(4,"td",16)(5,"div",17),g.YNc(6,Hl,2,0,"ng-container",18),g.YNc(7,Kl,2,1,"ng-container",18),g.qZA()(),g.TgZ(8,"td"),g.YNc(9,jl,2,0,"button",19),g.YNc(10,$l,1,0,"system-button-icon",20),g.qZA()()),2&e){const e=t.$implicit,s=g.oxw();g.xp6(3),g.Oqu(e.user_name),g.xp6(3),g.Q6J("ngIf",e.login_blocked),g.xp6(1),g.Q6J("ngIf",!e.login_blocked&&e.login_blocked_until),g.xp6(2),g.Q6J("ngIf",!s.isUnblocking[e.id]),g.xp6(1),g.Q6J("ngIf",s.isUnblocking[e.id])}}function Xl(e,t){1&e&&(g.TgZ(0,"div",25)(1,"div",26)(2,"div",27)(3,"h3",28),g._UZ(4,"system-label",29),g.qZA()()()())}const Wl=function(e){return{"slds-border-bottom":e}},eo=function(e){return{"slds-grow":e}},to=function(e){return{borderBottom:e}};let so=(()=>{var e;class AdministrationBlockedUsers{constructor(e,t,s,n){(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"toast",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"blockedUsers",[]),(0,i.Z)(this,"isLoading",!1),(0,i.Z)(this,"isUnblocking",{}),this.backend=e,this.modal=t,this.toast=s,this.metadata=n}ngOnInit(){this.loadBlockedUsers()}loadBlockedUsers(){this.isLoading=!0;let e=this.metadata.getComponentConfig("LoginRestriction");e&&e.modulefilter&&e.modulefilter;this.backend.getList("Users",[{sortfield:"user_name",sortdirection:"ASC"}],{modulefilter:"7cf2fab0-b845-5a96-6045-2cef7c7f91d9",limit:-99,source:"db",fields:["id","user_name","login_blocked","login_blocked_until"]}).pipe((0,Jl.q)(1)).subscribe((e=>{this.blockedUsers=e.list,this.blockedUsers=this.blockedUsers.sort(((e,t)=>e.user_name.localeCompare(t.user_name))),this.isLoading=!1}))}unBlockUser(e,t){this.isUnblocking[e]=!0,this.backend.postRequest("module/Users/"+e,null,{login_blocked:"0",login_blocked_until:""}).pipe((0,Jl.q)(1)).subscribe((t=>{this.isUnblocking[e]=!1,"0"===t.login_blocked&&""===t.login_blocked_until&&(this.toast.sendToast("User "+t.user_name+" successfully un-blocked.","success",null),this.blockedUsers.some(((t,s)=>{if(t.id===e)return this.blockedUsers.splice(s,1),!0})))}),(s=>{this.isUnblocking[e]=!1,this.toast.sendToast("Error un-blocking User "+t+".","error",s.error.error.message)}))}}return e=AdministrationBlockedUsers,(0,i.Z)(AdministrationBlockedUsers,"ɵfac",(function(t){return new(t||e)(g.Y36(m.y),g.Y36(Se.o),g.Y36(Fe.A),g.Y36(f.Pu))})),(0,i.Z)(AdministrationBlockedUsers,"ɵcmp",g.Xpm({type:e,selectors:[["administration-blocked-users"]],decls:22,vars:12,consts:[[1,"slds-grid","slds-grid--vertical","slds-p-around--medium",2,"height","100%",3,"system-overlay-loading-spinner"],[1,"slds-grid","slds-grid--align-spread",3,"ngClass"],[1,"slds-text-heading_small","slds-m-bottom--x-small"],["label","LBL_BLOCKED_USERS"],["system-title","LBL_RELOAD",1,"slds-button","slds-button--icon","slds-m-left--xx-small",3,"click"],["icon","refresh"],[1,"slds-scrollable--y",3,"ngClass"],[1,"slds-table","slds-table_bordered","slds-table--header-fixed",3,"ngStyle"],[1,"slds-text-title--caps"],[1,"slds-truncate","slds-p-horizontal--x-small"],["label","LBL_USER_NAME"],[2,"width","100%"],["label","LBL_PERMANENT",2,"display","inline-block"],["label","LBL_UNTIL",2,"display","inline-block"],[4,"ngFor","ngForOf"],["class","slds-grow slds-align--absolute-center",4,"ngIf"],[1,"slds-p-right--x-small"],[1,"slds-truncate"],[4,"ngIf"],["class","slds-button slds-button--icon","system-title","LBL_DELETE",3,"click",4,"ngIf"],["icon","spinner",4,"ngIf"],[3,"date"],["system-title","LBL_DELETE",1,"slds-button","slds-button--icon",3,"click"],["icon","delete"],["icon","spinner"],[1,"slds-grow","slds-align--absolute-center"],[1,"slds-illustration","slds-illustration_small"],[1,"slds-text-longform"],[1,"slds-text-heading_medium"],["label","MSG_NO_USERS_BLOCKED"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0)(1,"div",1)(2,"div",2),g._UZ(3,"system-label",3),g.qZA(),g.TgZ(4,"button",4),g.NdJ("click",(function(){return t.loadBlockedUsers()})),g._UZ(5,"system-button-icon",5),g.qZA()(),g.TgZ(6,"div",6)(7,"table",7)(8,"thead")(9,"tr",8)(10,"th")(11,"div",9),g._UZ(12,"system-label",10),g.qZA()(),g.TgZ(13,"th",11)(14,"div",9),g._UZ(15,"system-label",12),g._uU(16,"/"),g._UZ(17,"system-label",13),g.qZA()(),g._UZ(18,"th"),g.qZA()(),g.TgZ(19,"tbody"),g.YNc(20,Vl,11,5,"tr",14),g.qZA()()(),g.YNc(21,Xl,5,0,"div",15),g.qZA()),2&e&&(g.Q6J("system-overlay-loading-spinner",t.isLoading),g.xp6(1),g.Q6J("ngClass",g.VKq(6,Wl,0===t.blockedUsers.length)),g.xp6(5),g.Q6J("ngClass",g.VKq(8,eo,0!==t.blockedUsers.length)),g.xp6(1),g.Q6J("ngStyle",g.VKq(10,to,0===t.blockedUsers.length?"none":"auto")),g.xp6(13),g.Q6J("ngForOf",t.blockedUsers),g.xp6(1),g.Q6J("ngIf",!t.isLoading&&0===t.blockedUsers.length))},dependencies:[n.mk,n.sg,n.O5,n.PC,T.J,_l.a,M._,x._,q.S],encapsulation:2})),AdministrationBlockedUsers})();function io(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",28)(1,"label",11),g._UZ(2,"system-label",30),g.qZA(),g.TgZ(3,"div",13)(4,"div",14)(5,"select",15),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.config.twoFactorAuthMethod=t)})),g.TgZ(6,"option",31),g._UZ(7,"system-label",32),g.qZA(),g.TgZ(8,"option",33),g._UZ(9,"system-label",25),g.qZA(),g.TgZ(10,"option",34),g._UZ(11,"system-label",29),g.qZA()()()()()}if(2&e){const e=g.oxw();g.xp6(5),g.Q6J("ngModel",e.config.twoFactorAuthMethod)}}function no(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",28)(1,"label",11),g._UZ(2,"system-label",35),g.qZA(),g.TgZ(3,"div",13)(4,"input",36),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.config.trustDeviceDays=t)})),g.qZA()()()}if(2&e){const e=g.oxw();g.xp6(4),g.Q6J("ngModel",e.config.trustDeviceDays)}}function lo(e,t){if(1&e&&(g.TgZ(0,"option",37),g._uU(1),g.qZA()),2&e){const e=t.$implicit;g.Q6J("value",e.id),g.xp6(1),g.hij(" ",e.name," ")}}function oo(e,t){if(1&e&&(g.TgZ(0,"option",37),g._uU(1),g.qZA()),2&e){const e=t.$implicit;g.Q6J("value",e.id),g.xp6(1),g.hij(" ",e.name," ")}}let ao=(()=>{var e;class AdministrationLoginMethods{constructor(e,t){(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"toast",void 0),(0,i.Z)(this,"isLoading",!0),(0,i.Z)(this,"mailboxes",[]),(0,i.Z)(this,"config",{twoFactorAuthMethod:"one_time_password",smsMailboxId:void 0,emailMailboxId:void 0,requireOn:"",trustDeviceDays:"90"}),(0,i.Z)(this,"configBackup",void 0),this.backend=e,this.toast=t}cancel(){this.config=JSON.parse(JSON.stringify(this.configBackup))}save(){if(["sms","email"].indexOf(this.config.twoFactorAuthMethod)>-1&&!this.config[`${this.config.twoFactorAuthMethod}MailboxId`])return void this.toast.sendToast("LBL_MAILBOX_REQUIRED","error");Number(this.config.trustDeviceDays)>365&&(this.config.trustDeviceDays="365"),Number(this.config.trustDeviceDays)<1&&(this.config.trustDeviceDays="1");const e={method:this.config.twoFactorAuthMethod,sms_mailbox_id:this.config.smsMailboxId,email_mailbox_id:this.config.emailMailboxId,trust_device_days:this.config.trustDeviceDays,require_on:this.config.requireOn};this.isLoading=!0,this.backend.postRequest("configuration/configurator/editor/user_login_2fa",null,{config:e}).subscribe((()=>{this.configBackup=JSON.parse(JSON.stringify(this.config)),this.toast.sendToast("Login Method Configuration successfully saved.","success"),this.isLoading=!1}))}ngOnInit(){this.loadConfig(),this.loadMailboxes()}loadConfig(){this.isLoading=!0,this.backend.getRequest("configuration/configurator/editor/user_login_2fa").subscribe((e=>{this.config.twoFactorAuthMethod=e.method,this.config.requireOn=e.require_on??"",this.config.smsMailboxId=e.sms_mailbox_id,this.config.emailMailboxId=e.email_mailbox_id,this.config.trustDeviceDays=e.trust_device_days,this.configBackup=JSON.parse(JSON.stringify(this.config)),this.isLoading=!1}))}loadMailboxes(){this.isLoading=!0,this.backend.getRequest("module/Mailboxes").subscribe((e=>{this.mailboxes=e.list.sort(((e,t)=>e.name.localeCompare(t.name))),this.isLoading=!1}))}handleRequireOnChange(){this.config.twoFactorAuthMethod="one_time_password",this.config.trustDeviceDays="90"}}return e=AdministrationLoginMethods,(0,i.Z)(AdministrationLoginMethods,"ɵfac",(function(t){return new(t||e)(g.Y36(m.y),g.Y36(Fe.A))})),(0,i.Z)(AdministrationLoginMethods,"ɵcmp",g.Xpm({type:e,selectors:[["administration-login-methods"]],decls:47,vars:12,consts:[[1,"slds-p-around--medium",3,"system-overlay-loading-spinner"],[1,"slds-grid","slds-grid--align-spread"],[1,"slds-text-heading_small"],["label","LBL_2FA_CONFIGURATION"],[1,"slds-p-bottom--x-small",2,"white-space","nowrap"],[1,"slds-button","slds-button--icon","slds-button_neutral","slds-button--icon-border",3,"disabled","click"],["icon","close"],[1,"slds-button","slds-button--icon","slds-button_brand","slds-button--icon-border","slds-m-left--small",3,"disabled","click"],["icon","check"],[1,"slds-grid","slds-m-bottom--small"],[1,"slds-form-element","slds-size--1-of-3","slds-p-right--xx-small"],[1,"slds-form-element__label"],["label","LBL_REQUIRE_ON"],[1,"slds-form-element__control"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],["value",""],["label","LBL_NEVER"],["value","always"],["label","LBL_ALWAYS"],["value","device_change"],["label","LBL_DEVICE_CHANGE"],["class","slds-form-element slds-size--1-of-3 slds-p-left--xx-small slds-p-right--xx-small",4,"ngIf"],[1,"slds-grid"],["label","LBL_MAILBOX"],["label","LBL_SMS"],[1,"slds-select",3,"ngModel","disabled","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"slds-form-element","slds-size--1-of-3","slds-p-left--xx-small","slds-p-right--xx-small"],["label","LBL_EMAIL"],["label","LBL_METHOD"],["value","one_time_password"],["label","LBL_TOTP_AUTHENTICATION"],["value","sms"],["value","email"],["label","LBL_TRUST_DEVICE_DURATION_DAYS"],["type","text","size","3",1,"slds-input","slds-text-align--right",2,"width","auto",3,"ngModel","ngModelChange"],[3,"value"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0)(1,"div",1)(2,"div",2),g._UZ(3,"system-label",3),g.qZA(),g.TgZ(4,"div",4)(5,"button",5),g.NdJ("click",(function(){return t.cancel()})),g._UZ(6,"system-button-icon",6),g.qZA(),g.TgZ(7,"button",7),g.NdJ("click",(function(){return t.save()})),g._UZ(8,"system-button-icon",8),g.qZA()()(),g.TgZ(9,"div",9)(10,"div",10)(11,"label",11),g._UZ(12,"system-label",12),g.qZA(),g.TgZ(13,"div",13)(14,"div",14)(15,"select",15),g.NdJ("ngModelChange",(function(e){return t.config.requireOn=e}))("ngModelChange",(function(){return t.handleRequireOnChange()})),g.TgZ(16,"option",16),g._UZ(17,"system-label",17),g.qZA(),g.TgZ(18,"option",18),g._UZ(19,"system-label",19),g.qZA(),g.TgZ(20,"option",20),g._UZ(21,"system-label",21),g.qZA()()()()(),g.YNc(22,io,12,1,"div",22),g.YNc(23,no,5,1,"div",22),g.qZA(),g.TgZ(24,"div",23)(25,"div",10)(26,"label",11),g._UZ(27,"system-label",24),g._uU(28," ( "),g._UZ(29,"system-label",25),g._uU(30," ) "),g.qZA(),g.TgZ(31,"div",13)(32,"div",14)(33,"select",26),g.NdJ("ngModelChange",(function(e){return t.config.smsMailboxId=e})),g._UZ(34,"option",16),g.YNc(35,lo,2,2,"option",27),g.qZA()()()(),g.TgZ(36,"div",28)(37,"label",11),g._UZ(38,"system-label",24),g._uU(39," ( "),g._UZ(40,"system-label",29),g._uU(41," ) "),g.qZA(),g.TgZ(42,"div",13)(43,"div",14)(44,"select",26),g.NdJ("ngModelChange",(function(e){return t.config.emailMailboxId=e})),g._UZ(45,"option",16),g.YNc(46,oo,2,2,"option",27),g.qZA()()()()()()),2&e&&(g.Q6J("system-overlay-loading-spinner",t.isLoading),g.xp6(5),g.Q6J("disabled",t.isLoading),g.xp6(2),g.Q6J("disabled",t.isLoading),g.xp6(8),g.Q6J("ngModel",t.config.requireOn),g.xp6(7),g.Q6J("ngIf",!!t.config.requireOn),g.xp6(1),g.Q6J("ngIf","device_change"==t.config.requireOn),g.xp6(10),g.Q6J("ngModel",t.config.smsMailboxId)("disabled",t.isLoading),g.xp6(2),g.Q6J("ngForOf",t.mailboxes),g.xp6(9),g.Q6J("ngModel",t.config.emailMailboxId)("disabled",t.isLoading),g.xp6(2),g.Q6J("ngForOf",t.mailboxes))},dependencies:[n.sg,n.O5,l.YN,l.Kr,l.Fj,l.EJ,l.JJ,l.On,T.J,M._,x._],encapsulation:2})),AdministrationLoginMethods})();const ro=["whiteList"],co=["blackList"];let go=(()=>{var e;class AdministrationLoginManagement{constructor(e){(0,i.Z)(this,"cdref",void 0),(0,i.Z)(this,"whiteListComponent",void 0),(0,i.Z)(this,"blackListComponent",void 0),this.cdref=e}ngOnInit(){this.cdref.detectChanges()}}return e=AdministrationLoginManagement,(0,i.Z)(AdministrationLoginManagement,"ɵfac",(function(t){return new(t||e)(g.Y36(g.sBO))})),(0,i.Z)(AdministrationLoginManagement,"ɵcmp",g.Xpm({type:e,selectors:[["ng-component"]],viewQuery:function(e,t){if(1&e&&(g.Gf(ro,5),g.Gf(co,5)),2&e){let e;g.iGM(e=g.CRH())&&(t.whiteListComponent=e.first),g.iGM(e=g.CRH())&&(t.blackListComponent=e.first)}},decls:22,vars:2,consts:[[1,"slds-grid","slds-grid_vertical-align-center","slds-p-around--small","slds-border--bottom"],["icon","custom:custom62"],[1,"slds-text-heading_medium"],["label","LBL_LOGIN_MANAGEMENT"],[1,"slds-box","slds-m-horizontal--medium","slds-m-bottom--medium","slds-m-top--medium",2,"padding","0"],["system-to-bottom",""],[1,"slds-p-bottom--medium","slds-p-horizontal--medium",2,"height","50%"],[1,"slds-box","slds-grid",2,"height","100%","padding","0"],[1,"slds-size--1-of-2",2,"height","100%"],["color","white",2,"display","block","height","100%",3,"siblingComponent"],["whiteList",""],[1,"slds-size--1-of-2","slds-border--left",2,"height","100%"],["color","black",2,"display","block","height","100%",3,"siblingComponent"],["blackList",""],[1,"slds-p-bottom--medium",2,"height","50%"],[1,"slds-grid","slds-m-horizontal--medium","slds-grid--vertical-align-start",2,"height","100%"],[1,"slds-size--1-of-2"],[1,"slds-box","slds-m-right--x-small","slds-m-bottom--medium",2,"padding","0","display","block"],[1,"slds-box","slds-m-right--x-small",2,"padding","0","display","block"],[1,"slds-box","slds-m-left--x-small",2,"padding","0","display","block","height","100%"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0),g._UZ(1,"system-icon",1),g.TgZ(2,"h2",2),g._UZ(3,"system-label",3),g.qZA()(),g.TgZ(4,"div",4),g._UZ(5,"administration-login-restriction"),g.qZA(),g.TgZ(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8),g._UZ(10,"administration-login-restriction-ip-addresses",9,10),g.qZA(),g.TgZ(12,"div",11),g._UZ(13,"administration-login-restriction-ip-addresses",12,13),g.qZA()()(),g.TgZ(15,"div",14)(16,"div",15)(17,"div",16),g._UZ(18,"administration-password-config",17)(19,"administration-login-methods",18),g.qZA(),g.TgZ(20,"div",8),g._UZ(21,"administration-blocked-users",19),g.qZA()()()()),2&e&&(g.xp6(10),g.Q6J("siblingComponent",t.blackListComponent),g.xp6(3),g.Q6J("siblingComponent",t.whiteListComponent))},dependencies:[L.f,M._,A.H,Ul,Gl,Pl,so,ao],encapsulation:2})),AdministrationLoginManagement})();var uo=s(2161);const mo=["administration-gdpr-retention-manager",""];function ho(e,t){1&e&&g._UZ(0,"system-utility-icon",19)}function po(e,t){if(1&e&&g._UZ(0,"system-utility-icon",20),2&e){const e=g.oxw().$implicit;g.Q6J("colorclass",e.id?"slds-icon-text-warning":"")}}const bo=function(e){return{"slds-theme--shade":e}};function fo(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",12),g.NdJ("click",(function(){const t=g.CHM(e).index,s=g.oxw();return g.KtG(s.selectPolicyByIndex(t))})),g.TgZ(1,"div",13),g.NdJ("dblclick",(function(){const t=g.CHM(e).$implicit,s=g.oxw();return g.KtG(s.toggleStatus(t))})),g.YNc(2,ho,1,0,"system-utility-icon",14),g.YNc(3,po,1,1,"system-utility-icon",15),g.qZA(),g.TgZ(4,"div",16),g._uU(5),g.qZA(),g.TgZ(6,"button",17),g.NdJ("click",(function(){const t=g.CHM(e).index,s=g.oxw();return g.KtG(s.deleteByIndex(t))})),g._UZ(7,"system-button-icon",18),g.qZA()()}if(2&e){const e=t.$implicit,s=t.index,i=g.oxw();g.Q6J("ngClass",g.VKq(6,bo,s==i.selectedPolicyIndex)),g.xp6(1),g.Q6J("ngSwitch",e.active),g.xp6(1),g.Q6J("ngSwitchCase",1),g.xp6(1),g.Q6J("ngSwitchCase",0),g.xp6(2),g.Oqu(e.name),g.xp6(1),g.Q6J("disabled",i.isloading)}}function Zo(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"button",17),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw();return g.KtG(t.addPolicy())})),g._UZ(1,"system-button-icon",21),g.qZA()}if(2&e){const e=g.oxw();g.Q6J("disabled",e.isloading)}}function _o(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"tr",60)(1,"td")(2,"a",61),g.NdJ("click",(function(t){const s=g.CHM(e).$implicit,i=g.oxw(4);return g.KtG(i.openRecord(s.id,t))})),g._uU(3),g.qZA()(),g.TgZ(4,"td"),g._uU(5),g.qZA()()}if(2&e){const e=t.$implicit;g.xp6(3),g.Oqu(e.id),g.xp6(2),g.Oqu(e.name)}}function vo(e,t){if(1&e&&(g.TgZ(0,"tbody"),g.YNc(1,_o,6,2,"tr",59),g.qZA()),2&e){const e=g.oxw(3);g.xp6(1),g.Q6J("ngForOf",e.results.list)}}function Ao(e,t){1&e&&g._UZ(0,"tbody",62),2&e&&g.Q6J("rows",20)}function yo(e,t){1&e&&(g.TgZ(0,"div",63)(1,"system-illustration-no-records"),g._UZ(2,"system-label",64),g.qZA()())}function xo(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",51),g.NdJ("system-to-bottom",(function(){g.CHM(e);const t=g.oxw(2);return g.KtG(t.loadmore())})),g.TgZ(1,"table",52)(2,"thead")(3,"tr",53)(4,"th"),g._UZ(5,"system-label",54),g.qZA(),g.TgZ(6,"th"),g._UZ(7,"system-label",55),g.qZA()()(),g.YNc(8,vo,2,1,"tbody",56),g.YNc(9,Ao,1,1,"tbody",57),g.qZA(),g.YNc(10,yo,3,0,"div",58),g.qZA()}if(2&e){const e=g.oxw(2);g.xp6(8),g.Q6J("ngIf",e.results),g.xp6(1),g.Q6J("ngIf",e.isloading),g.xp6(1),g.Q6J("ngIf",!e.isloading&&0==e.results.total)}}function To(e,t){if(1&e){const e=g.EpF();g.ynx(0),g.TgZ(1,"div",22)(2,"div",23)(3,"div",24)(4,"label",25),g._UZ(5,"system-label",26),g.qZA(),g.TgZ(6,"div",27)(7,"system-input-text",28),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.selectedPolicy.name=t)})),g.qZA()()(),g.TgZ(8,"div",29)(9,"label",25),g._UZ(10,"system-label",30),g.qZA(),g.TgZ(11,"div",27)(12,"div",31)(13,"select",32),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.selectedPolicy.retention_type=t)})),g.TgZ(14,"option",33),g._UZ(15,"system-label",34),g.qZA(),g.TgZ(16,"option",35),g._UZ(17,"system-label",36),g.qZA(),g.TgZ(18,"option",37),g._UZ(19,"system-label",38),g.qZA()()()()()(),g.TgZ(20,"div",39)(21,"label",25),g._UZ(22,"system-label",40),g.qZA(),g.TgZ(23,"div",27)(24,"system-input-module-filter",28),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.selectedPolicy.sysmodulefilter_id=t)})),g.qZA()()(),g.TgZ(25,"div",39)(26,"label",25),g._UZ(27,"system-label",41),g.qZA(),g.TgZ(28,"div",27)(29,"system-input-text",28),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.selectedPolicy.delete_related=t)})),g.qZA()()(),g.TgZ(30,"div",39)(31,"label",25),g._UZ(32,"system-label",42),g.qZA(),g.TgZ(33,"div",27)(34,"textarea",43),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.selectedPolicy.description=t)})),g.qZA()()(),g.TgZ(35,"div",44)(36,"div"),g._UZ(37,"system-label",45),g._uU(38),g.qZA(),g.TgZ(39,"button",46),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw();return g.KtG(t.getResults())})),g._UZ(40,"system-label",47),g.qZA(),g.TgZ(41,"button",48),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw();return g.KtG(t.save())})),g._UZ(42,"system-label",49),g.qZA()()(),g.YNc(43,xo,11,3,"div",50),g.BQk()}if(2&e){const e=g.oxw();g.xp6(7),g.Q6J("ngModel",e.selectedPolicy.name),g.xp6(6),g.Q6J("ngModel",e.selectedPolicy.retention_type),g.xp6(11),g.Q6J("ngModel",e.selectedPolicy.sysmodulefilter_id),g.xp6(5),g.Q6J("ngModel",e.selectedPolicy.delete_related),g.xp6(5),g.Q6J("ngModel",e.selectedPolicy.description),g.xp6(4),g.hij(" ",e.results.total,""),g.xp6(1),g.Q6J("disabled",!e.selectedPolicy.id),g.xp6(2),g.Q6J("disabled",e.isloading),g.xp6(2),g.Q6J("ngIf",e.selectedPolicy.id)}}function Lo(e,t){1&e&&(g.TgZ(0,"div",65),g._UZ(1,"system-label",66),g.qZA())}let Mo=(()=>{var e;class AdministrationGDPRRetentionManager{constructor(e,t,s,n,l,o){(0,i.Z)(this,"toast",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"modelutilities",void 0),(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"injector",void 0),(0,i.Z)(this,"policies",[]),(0,i.Z)(this,"selectedPolicyIndex",void 0),(0,i.Z)(this,"isloading",!1),(0,i.Z)(this,"results",void 0),(0,i.Z)(this,"initialized",!1),this.toast=e,this.modal=t,this.modelutilities=s,this.backend=n,this.router=l,this.injector=o,this.initializeResults()}ngOnInit(){this.loadPolicies()}selectPolicyByIndex(e){this.isloading||this.selectedPolicyIndex==e||(this.selectedPolicyIndex=e,this.initializeResults())}get selectedPolicy(){return this.selectedPolicyIndex>=0?this.policies[this.selectedPolicyIndex]:void 0}initializeResults(){this.results={list:[],module:"",total:0}}loadPolicies(){this.backend.getRequest("admin/gdprmanager/retentionpolicies").subscribe((e=>{this.policies=e,this.initialized=!0}))}toggleStatus(e){e.id&&(e.active=!e.active,this.backend.postRequest(`admin/gdprmanager/retentionpolicies/${e.id}/activate/${e.active?1:0}`))}save(){let e=this.modelutilities.generateGuid(),t=this.modal.await("LBL_SAVING");this.backend.postRequest(`admin/gdprmanager/retentionpolicies/${this.selectedPolicy.id?this.selectedPolicy.id:e}`,{},this.selectedPolicy).subscribe((()=>{this.selectedPolicy.id||(this.selectedPolicy.id=e),t.emit(!0)}),(()=>{t.emit(!0)}))}getResults(){this.isloading=!0,this.results.list=[],this.backend.getRequest(`admin/gdprmanager/retentionpolicies/${this.selectedPolicy.id}/results`).subscribe((e=>{this.results=e,this.isloading=!1}),(()=>{this.isloading=!1}))}loadmore(){!this.isloading&&this.results.total>this.results.list.length&&(this.isloading=!0,this.backend.getRequest(`admin/gdprmanager/retentionpolicies/${this.selectedPolicy.id}/results`,{start:this.results.list.length}).subscribe((e=>{this.results.list=this.results.list.concat(e.list),this.isloading=!1}),(()=>{this.isloading=!1})))}openRecord(e,t){t.preventDefault(),t.stopPropagation(),this.router.navigate([`module/${this.results.module}/${e}`])}deleteByIndex(e){this.modal.confirm("LBL_DELETE_RECORD","LBL_DELETE_RECORD").subscribe((t=>{if(t)if(this.selectedPolicy.id){let t=this.modal.await("LBL_DELETING");this.backend.deleteRequest(`admin/gdprmanager/retentionpolicies/${this.selectedPolicy.id}`).subscribe((s=>{this.deletePolicy(e),t.emit(!0)}),(()=>{t.emit(!0)}))}else this.deletePolicy(e)}))}deletePolicy(e){this.selectedPolicyIndex==e&&(this.selectedPolicyIndex=void 0),this.policies.splice(e,1)}addPolicy(){this.modal.input("LBL_POLICY_NAME","LBL_POLICY_NAME").subscribe((e=>{if(e){let t={id:"",name:e,deleted:!1,retention_type:"I",active:!1,description:""};this.policies.push(t),this.selectedPolicyIndex=this.policies.length-1}}))}}return e=AdministrationGDPRRetentionManager,(0,i.Z)(AdministrationGDPRRetentionManager,"ɵfac",(function(t){return new(t||e)(g.Y36(Fe.A),g.Y36(Se.o),g.Y36(z.A),g.Y36(m.y),g.Y36(B.F0),g.Y36(g.zs3))})),(0,i.Z)(AdministrationGDPRRetentionManager,"ɵcmp",g.Xpm({type:e,selectors:[["","administration-gdpr-retention-manager",""]],attrs:mo,decls:13,vars:5,consts:[[1,"slds-grid","slds-grid_vertical-align-center","slds-p-around--small","slds-border--bottom"],["icon","apex_plugin"],[1,"slds-text-heading_medium"],["label","LBL_GDPR_RETENTION_MANAGER"],[1,"slds-theme--default","slds-grid",3,"system-overlay-loading-spinner"],["system-to-bottom","",1,"slds-size--1-of-3","slds-border--right"],["class","slds-grid slds-grid--align-spread slds-grid_vertical-align-center slds-p-around--small slds-border--bottom",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"slds-p-around--x-small","slds-text-align--center"],["class","slds-button slds-button--icon",3,"disabled","click",4,"ngIf"],[1,"slds-size--2-of-3"],[4,"ngIf","ngIfElse"],["selectpolicy",""],[1,"slds-grid","slds-grid--align-spread","slds-grid_vertical-align-center","slds-p-around--small","slds-border--bottom",3,"ngClass","click"],[3,"ngSwitch","dblclick"],["icon","success","colorclass","slds-icon-text-success","size","x-small",4,"ngSwitchCase"],["icon","clear","size","x-small",3,"colorclass",4,"ngSwitchCase"],[1,"slds-grow","slds-p-left--x-small","slds-truncate","slds-text-link--reset"],[1,"slds-button","slds-button--icon",3,"disabled","click"],["icon","delete"],["icon","success","colorclass","slds-icon-text-success","size","x-small"],["icon","clear","size","x-small",3,"colorclass"],["icon","new"],[1,"slds-grid_vertical","slds-p-around--x-small"],[1,"slds-grid","slds-grid_vertical-align-center","slds-p-right--xx-small"],[1,"slds-size--3-of-4","slds-form-element"],[1,"slds-form-element__label"],["label","LBL_NAME"],[1,"slds-form-element__control"],[3,"ngModel","ngModelChange"],[1,"slds-size--1-of-4","slds-form-element","slds-p-left--xx-small"],["label","LBL_TYPE"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],["value","I"],["label","LBL_SET_INACTIVE"],["value","D"],["label","LBL_MARK_DELETED"],["value","P"],["label","LBL_PURGE"],[1,"slds-form-element"],["label","LBL_MODULE_FILTER"],["label","LBL_DELETE_RELATED"],["label","LBL_DESCRIPTION"],[1,"slds-textarea",3,"ngModel","ngModelChange"],[1,"slds-grid","slds-p-vertical--x-small","slds-grid_vertical-align-center"],["label","LBL_TOTAL"],[1,"slds-col--bump-left","slds-button","slds-button_neutral",3,"disabled","click"],["label","LBL_TEST"],[1,"slds-button","slds-button_brand",3,"disabled","click"],["label","LBL_SAVE"],[3,"system-to-bottom",4,"ngIf"],[3,"system-to-bottom"],["role","grid",1,"slds-table","slds-table--fixed-layout","slds-max-medium-table--stacked-horizontal","slds-table--header-fixed"],[1,"slds-text-title--caps"],["label","LBL_ID",1,"slds-th__action"],["label","LBL_SUMMARY",1,"slds-th__action"],[4,"ngIf"],["system-table-stencils","","columns","2",3,"rows",4,"ngIf"],["class","slds-height_full slds-align--absolute-center",4,"ngIf"],["class","slds-hint-parent",4,"ngFor","ngForOf"],[1,"slds-hint-parent"],["href","#",1,"slds-text-link_reset",3,"click"],["system-table-stencils","","columns","2",3,"rows"],[1,"slds-height_full","slds-align--absolute-center"],["label","LBL_NO_RECORDS"],["system-to-bottom-noscroll","",1,"slds-align--absolute-center"],["label","LBL_SELECT_POLICY"]],template:function(e,t){if(1&e&&(g.TgZ(0,"div",0),g._UZ(1,"system-icon",1),g.TgZ(2,"h2",2),g._UZ(3,"system-label",3),g.qZA()(),g.TgZ(4,"div",4)(5,"div",5),g.YNc(6,fo,8,8,"div",6),g.TgZ(7,"div",7),g.YNc(8,Zo,2,1,"button",8),g.qZA()(),g.TgZ(9,"div",9),g.YNc(10,To,44,9,"ng-container",10),g.YNc(11,Lo,2,0,"ng-template",null,11,g.W1O),g.qZA()()),2&e){const e=g.MAs(12);g.xp6(4),g.Q6J("system-overlay-loading-spinner",!t.initialized),g.xp6(2),g.Q6J("ngForOf",t.policies),g.xp6(2),g.Q6J("ngIf",t.initialized),g.xp6(2),g.Q6J("ngIf",t.selectedPolicyIndex>=0)("ngIfElse",e)}},dependencies:[n.mk,n.sg,n.O5,n.RF,n.n9,l.YN,l.Kr,l.Fj,l.EJ,l.JJ,l.On,T.J,L.f,vl.C,el.Z,st.l,M._,uo.x,J.r,A.H,y.t,x._],encapsulation:2})),AdministrationGDPRRetentionManager})();var Jo=s(2391);function qo(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",22)(1,"button",23),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw();return g.KtG(t.addAsset("loginimage"))})),g._UZ(2,"system-button-icon",24),g.qZA()()}}function Eo(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",25),g._UZ(1,"img",26),g.TgZ(2,"div",27),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw();return g.KtG(t.assets.loginimage=void 0)})),g.TgZ(3,"div",28),g._UZ(4,"system-utility-icon",29),g.qZA()()()}if(2&e){const e=g.oxw();g.xp6(1),g.Q6J("src",e.assets.loginimage,g.LSH)}}function Uo(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",22)(1,"button",23),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw();return g.KtG(t.addAsset("headerimage"))})),g._UZ(2,"system-button-icon",24),g.qZA()()}}function Co(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",25),g._UZ(1,"img",26),g.TgZ(2,"div",27),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw();return g.KtG(t.assets.headerimage=void 0)})),g.TgZ(3,"div",28),g._UZ(4,"system-utility-icon",29),g.qZA()()()}if(2&e){const e=g.oxw();g.xp6(1),g.Q6J("src",e.assets.headerimage,g.LSH)}}function ko(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"system-input-color",32),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw().$implicit;return g.KtG(s.value=t)})),g.qZA()}if(2&e){const e=g.oxw().$implicit;g.Q6J("isedited",e.value!=e.originalvalue)("ngModel",e.value)}}const No=function(e){return{"slds-is-edited":e}};function So(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"input",33),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw().$implicit;return g.KtG(s.value=t)})),g.qZA()}if(2&e){const e=g.oxw().$implicit;g.Q6J("ngClass",g.VKq(2,No,e.value!=e.originalvalue))("ngModel",e.value)}}function Fo(e,t){if(1&e&&(g.TgZ(0,"div",11)(1,"div",12),g._uU(2),g.qZA(),g.TgZ(3,"div",14),g.YNc(4,ko,1,2,"system-input-color",30),g.YNc(5,So,1,4,"input",31),g.qZA()()),2&e){const e=t.$implicit;g.xp6(2),g.hij(" ",e.name," "),g.xp6(2),g.Q6J("ngIf","color"==e.csstype),g.xp6(1),g.Q6J("ngIf","string"==e.csstype)}}let wo=(()=>{var e;class AdministrationAssetManager{constructor(e,t,s,n,l,o){(0,i.Z)(this,"toast",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"configuration",void 0),(0,i.Z)(this,"modelutilities",void 0),(0,i.Z)(this,"injector",void 0),(0,i.Z)(this,"assets",{loginimage:null,headerimage:null}),(0,i.Z)(this,"loadedassets",void 0),(0,i.Z)(this,"cssvars",[{value:"",csstype:"color",name:"color-white"},{value:"",csstype:"color",name:"color-grey-3"},{value:"",csstype:"color",name:"color-grey-9"},{value:"",csstype:"color",name:"color-grey-13"},{value:"",csstype:"color",name:"brand-background-primary"},{value:"",csstype:"color",name:"brand-primary"},{value:"",csstype:"color",name:"brand-primary-active"},{value:"",csstype:"color",name:"brand-accessible"},{value:"",csstype:"color",name:"brand-accessible-active"},{value:"",csstype:"color",name:"brand-header-contrast-cool"},{value:"",csstype:"color",name:"brand-text-link"},{value:"",csstype:"color",name:"color-background-inverse"},{value:"",csstype:"color",name:"color-border-inverse"},{value:"",csstype:"color",name:"color-background-success"},{value:"",csstype:"color",name:"color-background-success-dark"},{value:"",csstype:"color",name:"color-text-link-active"},{value:"",csstype:"color",name:"color-progressbar_item-completed"},{value:"",csstype:"color",name:"brand-primary-transparent"},{value:"",csstype:"color",name:"color-background-alt-inverse"},{value:"",csstype:"color",name:"color-border-brand"},{value:"",csstype:"color",name:"sds-c-button-brand-color-background"},{value:"",csstype:"color",name:"sds-c-button-neutral-color-background-hover"},{value:"",csstype:"color",name:"sds-c-button-brand-color-border-hover"},{value:"",csstype:"color",name:"sds-c-button-brand-color-background-active"},{value:"",csstype:"color",name:"sds-c-button-brand-color-border-active"},{value:"",csstype:"color",name:"sds-c-button-brand-color-background-hover"},{value:"",csstype:"string",name:"sds-c-input-shadow-focus"},{value:"",csstype:"string",name:"sds-c-textarea-shadow-focus"},{value:"",csstype:"string",name:"sds-c-select-shadow-focus"},{value:"",csstype:"color",name:"sds-c-button-text-color-hover"},{value:"",csstype:"color",name:"sds-c-icon-color-foreground"}]),(0,i.Z)(this,"assetdimensions",{loginimage:{cropheight:300,cropwidth:300,croptype:"square",cropresize:!1},headerimage:{cropheight:50,cropwidth:300,croptype:"square",cropresize:!1}}),this.toast=e,this.modal=t,this.backend=s,this.configuration=n,this.modelutilities=l,this.injector=o}ngOnInit(){for(let e of this.cssvars)e.value=getComputedStyle(document.documentElement).getPropertyValue("--"+e.name),e.originalvalue=getComputedStyle(document.documentElement).getPropertyValue("--"+e.name);this.loadSystemAssets()}loadSystemAssets(){this.backend.getRequest("system/spiceui/admin/assets").subscribe((e=>{this.loadedassets=e;let t=e.find((e=>"loginimage"==e.assetkey));t&&(this.assets.loginimage=t.assetvalue);let s=e.find((e=>"headerimage"==e.assetkey));s&&(this.assets.headerimage=s.assetvalue);let i=e.find((e=>"colors"==e.assetkey));if(i){let e=JSON.parse(i.assetvalue);for(let t in e){let s=this.cssvars.find((e=>t));s&&(s.loadedvalue=e[t])}}}))}addAsset(e){this.modal.openModal("SystemUploadImage").subscribe((t=>{t.instance.cropheight=this.assetdimensions[e].cropheight,t.instance.cropwidth=this.assetdimensions[e].cropwidth,t.instance.croptype=this.assetdimensions[e].croptype,t.instance.cropresize=this.assetdimensions[e].cropresize,t.instance.imagedata.subscribe((t=>{this.assets[e]=t}))}))}colorLabel(e){return"LBL_TC_"+e.toUpperCase().replace(new RegExp("-","g"),"_")}assetBoxStyle(e){return{width:this.assetdimensions[e].cropwidth,height:this.assetdimensions[e].cropheight}}save(){let e=[],t=this.loadedassets.find((e=>"loginimage"==e.assetkey));e.push({id:t?t.id:this.modelutilities.generateGuid(),assetkey:"loginimage",assetvalue:this.assets.loginimage});let s=this.loadedassets.find((e=>"headerimage"==e.assetkey));e.push({id:s?s.id:this.modelutilities.generateGuid(),assetkey:"headerimage",assetvalue:this.assets.headerimage});let i={};for(let e of this.cssvars)e.value!=e.loadedvalue&&(i[e.name]=e.value,document.documentElement.style.setProperty("--"+e.name,e.value));let n=this.loadedassets.find((e=>"colors"==e.assetkey));e.push({id:n?n.id:this.modelutilities.generateGuid(),assetkey:"colors",assetvalue:JSON.stringify(i)}),this.backend.postRequest("system/spiceui/admin/assets",{},e).subscribe((e=>{this.configuration.setAssets(e,!0)}))}reset(){let e=[];const t=window._.object(this.cssvars.map((e=>e.name)),Array.from({length:this.cssvars.length},(()=>"")));let s=this.loadedassets.find((e=>"colors"==e.assetkey));e.push({id:s?s.id:this.modelutilities.generateGuid(),assetkey:"colors",assetvalue:JSON.stringify(t)}),this.backend.postRequest("system/spiceui/admin/assets",{},e).subscribe((e=>{this.assets=e,this.configuration.setAssets(e,!0)}));for(let e of this.cssvars)e.value=e.originalvalue}}return e=AdministrationAssetManager,(0,i.Z)(AdministrationAssetManager,"ɵfac",(function(t){return new(t||e)(g.Y36(Fe.A),g.Y36(Se.o),g.Y36(m.y),g.Y36(In.C),g.Y36(z.A),g.Y36(g.zs3))})),(0,i.Z)(AdministrationAssetManager,"ɵcmp",g.Xpm({type:e,selectors:[["administration-asset-manager"]],decls:30,vars:7,consts:[[1,"slds-grid","slds-grid_vertical-align-center","slds-p-around--small","slds-border--bottom"],["icon","apex_plugin"],[1,"slds-text-heading_medium"],["label","LBL_CI_MANAGEMENT"],[1,"slds-button","slds-button--neutral","slds-col--bump-left",3,"click"],["label","LBL_RESET"],["label","LBL_SAVE"],["system-to-bottom","",1,"slds-theme--default","slds-p-around--small"],[1,"slds-text-heading--medium","slds-p-vertical--x-small","slds-border--bottom"],["label","LBL_IMAGES"],[1,"slds-grid","slds-grid--vertical"],[1,"slds-grid","slds-p-vertical--small","slds-grid--vertical-align-center"],[1,"slds-size--1-of-3"],["label","LBL_LOGIN_IMAGE"],[1,"slds-grow"],[1,"slds-box--border",3,"ngStyle"],["class","slds-size--1-of-1 slds-height_full slds-align--absolute-center",4,"ngIf"],["class","slds-is-relative",4,"ngIf"],["label","LBL_HEADER_IMAGE"],[1,"slds-text-heading--medium","slds-p-vertical--x-small","slds-border--top","slds-border--bottom"],["label","LBL_COLORS"],["class","slds-grid slds-p-vertical--small slds-grid--vertical-align-center",4,"ngFor","ngForOf"],[1,"slds-size--1-of-1","slds-height_full","slds-align--absolute-center"],[1,"slds-button","slds-button--icon",3,"click"],["icon","new"],[1,"slds-is-relative"],[3,"src"],[1,"slds-is-absolute",2,"height","40px","width","40px","top","calc(50% - 20px)","left","calc(50% - 20px)",3,"click"],[1,"slds-align--absolute-center",2,"background","white","height","40px","width","40px","border-radius","20px"],["icon","delete","size","x-small",2,"z-index","1"],[3,"isedited","ngModel","ngModelChange",4,"ngIf"],["class","slds-input",3,"ngClass","ngModel","ngModelChange",4,"ngIf"],[3,"isedited","ngModel","ngModelChange"],[1,"slds-input",3,"ngClass","ngModel","ngModelChange"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0),g._UZ(1,"system-icon",1),g.TgZ(2,"h2",2),g._UZ(3,"system-label",3),g.qZA(),g.TgZ(4,"button",4),g.NdJ("click",(function(){return t.reset()})),g._UZ(5,"system-label",5),g.qZA(),g.TgZ(6,"button",4),g.NdJ("click",(function(){return t.save()})),g._UZ(7,"system-label",6),g.qZA()(),g.TgZ(8,"div",7)(9,"h2",8),g._UZ(10,"system-label",9),g.qZA(),g.TgZ(11,"div",10)(12,"div",11)(13,"div",12),g._UZ(14,"system-label",13),g.qZA(),g.TgZ(15,"div",14)(16,"div",15),g.YNc(17,qo,3,0,"div",16),g.YNc(18,Eo,5,1,"div",17),g.qZA()()(),g.TgZ(19,"div",11)(20,"div",12),g._UZ(21,"system-label",18),g.qZA(),g.TgZ(22,"div",14)(23,"div",15),g.YNc(24,Uo,3,0,"div",16),g.YNc(25,Co,5,1,"div",17),g.qZA()()()(),g.TgZ(26,"h2",19),g._UZ(27,"system-label",20),g.qZA(),g.TgZ(28,"div",10),g.YNc(29,Fo,6,3,"div",21),g.qZA()()),2&e&&(g.xp6(16),g.Q6J("ngStyle",t.assetBoxStyle("loginimage")),g.xp6(1),g.Q6J("ngIf",!t.assets.loginimage),g.xp6(1),g.Q6J("ngIf",t.assets.loginimage),g.xp6(5),g.Q6J("ngStyle",t.assetBoxStyle("headerimage")),g.xp6(1),g.Q6J("ngIf",!t.assets.headerimage),g.xp6(1),g.Q6J("ngIf",t.assets.headerimage),g.xp6(4),g.Q6J("ngForOf",t.cssvars))},dependencies:[n.mk,n.sg,n.O5,n.PC,l.Fj,l.JJ,l.On,T.J,L.f,M._,J.r,Jo.K,A.H],encapsulation:2})),AdministrationAssetManager})(),Io=(()=>{var e;class AdministrationMigrateLegacyDoms{constructor(e,t,s,n){(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"toast",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"modal",void 0),this.backend=e,this.toast=t,this.language=s,this.modal=n}executeMigrate(){let e=this.modal.await(this.language.getLabel("LBL_LOADING"));this.backend.postRequest("admin/migrate/legacydoms").subscribe((t=>{e.emit(!0),t?this.toast.sendToast(this.language.getLabel("LBL_MIGRATED"),"success"):this.toast.sendToast(this.language.getLabel("LBL_ERROR"),"error")}))}}return e=AdministrationMigrateLegacyDoms,(0,i.Z)(AdministrationMigrateLegacyDoms,"ɵfac",(function(t){return new(t||e)(g.Y36(m.y),g.Y36(Fe.A),g.Y36(p.d),g.Y36(Se.o))})),(0,i.Z)(AdministrationMigrateLegacyDoms,"ɵcmp",g.Xpm({type:e,selectors:[["administration-migrate-legacy-doms"]],decls:6,vars:0,consts:[[1,"slds-grid","slds-grid--vertical-align-center","slds-grid--align-spread","slds-p-vertical--xx-small","slds-border--bottom","slds-disabled-text"],["icon","custom_apps","size","x-small"],["label","LBL_MIGRATE_LEGACY_DOMS",1,"slds-p-horizontal--x-small"],["label","LBL_MIGRATE_LEGACY_DOMS","length","long",1,"slds-grow"],["disabled","",1,"slds-button","slds-button--neutral","slds-button--small",3,"click"],["label","LBL_EXECUTE"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0),g._UZ(1,"system-utility-icon",1)(2,"system-label",2)(3,"system-label",3),g.TgZ(4,"button",4),g.NdJ("click",(function(){return t.executeMigrate()})),g._UZ(5,"system-label",5),g.qZA()())},dependencies:[M._,J.r],encapsulation:2})),AdministrationMigrateLegacyDoms})();var Oo=s(7388);let Ro=(()=>{var e;class AdminComponentsModule{}return e=AdminComponentsModule,(0,i.Z)(AdminComponentsModule,"ɵfac",(function(t){return new(t||e)})),(0,i.Z)(AdminComponentsModule,"ɵmod",g.oAB({type:e})),(0,i.Z)(AdminComponentsModule,"ɵinj",g.cJS({imports:[n.ez,l.u5,d.SystemComponents,a.o,o._t,r.ObjectComponents,c.ObjectFields,Oo.WorkbenchModule]})),AdminComponentsModule})();("undefined"==typeof ngJitMode||ngJitMode)&&g.kYT(Ro,{declarations:[vs,hs,rs,As,us,qs,Mo,Q,R,Y,Me,Ze,X,Ne,qe,Ye,ht,vt,tt,je,lt,Tt,Mt,jn,$n,Kn,Rs,zs,Gs,Ps,Ws,ei,gi,Mi,Zi,Oi,en,tn,sn,nn,ln,Zn,En,wn,Qt,Gt,Pt,Wt,qt,St,kt,Ut,ol,cl,Io,Zl,Ml,pi,Ul,Gl,Sl,Pl,so,go,wo,ao],imports:[n.ez,l.u5,d.SystemComponents,a.o,o._t,r.ObjectComponents,c.ObjectFields,Oo.WorkbenchModule]})}}]);