/*!
 * 
 *                     aacService
 *
 *                     release: 2023.02.001
 *
 *                     date: 2023-08-15 08:39:15
 *
 *                     build: 2023.02.001.1692081555935
 *
 */
"use strict";(self.webpackChunkcore=self.webpackChunkcore||[]).push([["src_modules_prospectlists_moduleprospectlists_ts"],{3768:(e,t,s)=>{s.r(t),s.d(t,{ModuleProspectLists:()=>N});var l=s(1180),o=s(4755),i=s(5030),d=s(4357),a=s(3190),n=s(4826),r=s(6490),c=s(3735),m=s(5710),u=s(6349),p=s(2242),g=s(5329),h=s(4044),b=s(4505),L=s(3348),Z=s(3278),_=s(7514),M=s(4561),f=s(3463),v=s(3333),T=s(9621),A=s(3499),C=s(5767),P=s(1916);function y(e,t){if(1&e){const e=p.EpF();p.TgZ(0,"div",24)(1,"div",25)(2,"div")(3,"system-checkbox",26),p.NdJ("ngModelChange",(function(t){const s=p.CHM(e).$implicit;return p.KtG(s.selected=t)})),p.qZA()(),p.TgZ(4,"div"),p._UZ(5,"system-icon",27),p.qZA(),p.TgZ(6,"div",28),p._UZ(7,"system-label-modulename",29),p.qZA(),p.TgZ(8,"div",28),p._uU(9),p.qZA()(),p.TgZ(10,"div",13)(11,"div",30)(12,"system-checkbox",26),p.NdJ("ngModelChange",(function(t){const s=p.CHM(e).$implicit;return p.KtG(s.inclRejGDPR=t)})),p.qZA()()(),p.TgZ(13,"div",13)(14,"div",30)(15,"system-checkbox",26),p.NdJ("ngModelChange",(function(t){const s=p.CHM(e).$implicit;return p.KtG(s.inclInactive=t)})),p.qZA()()()()}if(2&e){const e=t.$implicit;p.Q6J("ngClass",0==e.bean_count?"slds-text-color--inverse-weak":"slds-text-color_default"),p.xp6(3),p.Q6J("ngModel",e.selected)("disabled",0==e.bean_count),p.xp6(2),p.Q6J("module",e.module),p.xp6(2),p.Q6J("module",e.module),p.xp6(2),p.hij("(",e.bean_count,")"),p.xp6(3),p.Q6J("ngModel",e.inclRejGDPR)("disabled",0==e.bean_count||!e.selected),p.xp6(3),p.Q6J("ngModel",e.inclInactive)("disabled",0==e.bean_count||!e.selected)}}let E=(()=>{var e;class ProspectListsCreateTargetListFromModuleModal{constructor(e,t,s,o,i,d){(0,l.Z)(this,"language",void 0),(0,l.Z)(this,"model",void 0),(0,l.Z)(this,"modal",void 0),(0,l.Z)(this,"backend",void 0),(0,l.Z)(this,"router",void 0),(0,l.Z)(this,"toast",void 0),(0,l.Z)(this,"prospectListName",""),(0,l.Z)(this,"self",{}),(0,l.Z)(this,"result",{}),(0,l.Z)(this,"parentBeanId",void 0),(0,l.Z)(this,"parentModule",void 0),(0,l.Z)(this,"beans",[]),(0,l.Z)(this,"checkedCount",0),this.language=e,this.model=t,this.modal=s,this.backend=o,this.router=i,this.toast=d,this.model.initialize()}ngOnInit(){this.beans=u.ZP.toArray(this.result.modules),this.beans.sort(((e,t)=>e.sort_order&&t.sort_order?e.sort_order>t.sort_order?1:-1:e.module>t.module?1:-1))}closeModal(){this.self.destroy()}get canAdd(){return this.beans.filter((e=>e.selected)).length>0}add(e=!1){if(this.prospectListName){const t=this.modal.await("LBL_SAVING_DATA");let s=this.beans.filter((e=>e.selected)).map((e=>({module:e.module,link_names:e.link_names,inclRejGDPR:e.inclRejGDPR,inclInactive:e.inclInactive})));this.backend.postRequest("module/ProspectLists/fromModule",{},{prospectListName:this.prospectListName,data:s,parentBeanId:this.parentBeanId,parentModule:this.parentModule}).subscribe({next:s=>{e?this.router.navigate(["/module/ProspectLists/"+s.prospectlistid]):this.toast.sendToast(this.language.getLabel("LBL_DATA_SAVED"),"success"),t.emit(!0),t.complete()},error:()=>{t.emit(!0),this.toast.sendToast(this.language.getLabel("ERR_FAILED_TO_EXECUTE"),"error")}}),this.closeModal()}else this.toast.sendToast(this.language.getLabel("LBL_ENTER_NAME"),"error")}}return e=ProspectListsCreateTargetListFromModuleModal,(0,l.Z)(ProspectListsCreateTargetListFromModuleModal,"ɵfac",(function(t){return new(t||e)(p.Y36(g.d),p.Y36(m.o),p.Y36(h.o),p.Y36(b.y),p.Y36(L.F0),p.Y36(Z.A))})),(0,l.Z)(ProspectListsCreateTargetListFromModuleModal,"ɵcmp",p.Xpm({type:e,selectors:[["object-create-targetlist-from-module-modal"]],inputs:{prospectListName:"prospectListName"},features:[p._Bn([m.o])],decls:32,vars:4,consts:[["size","medium"],[3,"close"],["label","LBL_SELECT_MODULE"],[1,"slds-form-element"],[1,"slds-form-element","slds-p-bottom--small-small","slds-p-vertical"],[1,"slds-form-element__label"],["title","required",1,"slds-required"],["label","LBL_PROSPECTLIST"],[1,"slds-form-element__control"],["type","text","required","required",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-grid","slds-p-top--small","slds-form-element"],[1,"slds-form-element","slds-p-horizontal--small","slds-size_4-of-6"],["label","LBL_MODULE"],[1,"slds-form-element","slds-p-horizontal--small","slds-size_1-of-6"],["label","LBL_SELECT_GDPR_REJECTED"],["label","LBL_SELECT_INACTIVE"],[1,"slds-form-element","slds-p-horizontal"],["class","slds-grid slds-p-vertical--small",3,"ngClass",4,"ngFor","ngForOf"],[1,"slds-grid","slds-grid--vertical-align-center"],[1,"slds-col--bump-left","slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-col--bump-left","slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_SAVE"],["label","LBL_SAVE_AND_GO_TO_RECORD"],[1,"slds-grid","slds-p-vertical--small",3,"ngClass"],[1,"slds-grid","slds-form-element","slds-p-horizontal--small","slds-size_4-of-6"],[3,"ngModel","disabled","ngModelChange"],["size","x-small",3,"module"],[1,"slds-p-right--small"],[3,"module"],[1,"slds-size--1-of-2","slds-form-element__control"]],template:function(e,t){1&e&&(p.TgZ(0,"system-modal",0)(1,"system-modal-header",1),p.NdJ("close",(function(){return t.closeModal()})),p._UZ(2,"system-label",2),p.qZA(),p.TgZ(3,"system-modal-content")(4,"div",3)(5,"div",4)(6,"label",5)(7,"abbr",6),p._uU(8,"* "),p.qZA(),p._UZ(9,"system-label",7),p.qZA(),p.TgZ(10,"div",8)(11,"input",9),p.NdJ("ngModelChange",(function(e){return t.prospectListName=e})),p.qZA()()(),p.TgZ(12,"div",10)(13,"div",11)(14,"label",5),p._UZ(15,"system-label",12),p.qZA()(),p.TgZ(16,"div",13)(17,"label",5),p._UZ(18,"system-label",14),p.qZA()(),p.TgZ(19,"div",13)(20,"label",5),p._UZ(21,"system-label",15),p.qZA()()(),p.TgZ(22,"div",16),p.YNc(23,y,16,10,"div",17),p.qZA()()(),p.TgZ(24,"system-modal-footer")(25,"div",18)(26,"button",19),p.NdJ("click",(function(){return t.closeModal()})),p._UZ(27,"system-label",20),p.qZA(),p.TgZ(28,"button",21),p.NdJ("click",(function(){return t.add()})),p._UZ(29,"system-label",22),p.qZA(),p.TgZ(30,"button",21),p.NdJ("click",(function(){return t.add(!0)})),p._UZ(31,"system-label",23),p.qZA()()()()),2&e&&(p.xp6(11),p.Q6J("ngModel",t.prospectListName),p.xp6(12),p.Q6J("ngForOf",t.beans),p.xp6(5),p.Q6J("disabled",!t.canAdd),p.xp6(2),p.Q6J("disabled",!t.canAdd))},dependencies:[o.mk,o.sg,i.Fj,i.JJ,i.Q7,i.On,_.U,M.f,f._,v.M,T.j,A.x,C.p,P.y],encapsulation:2})),ProspectListsCreateTargetListFromModuleModal})();var k=s(4154);let B=(()=>{var e;class ProspectListsCreateTargetListFromModuleButton{constructor(e,t,s,o,i,d,a){(0,l.Z)(this,"language",void 0),(0,l.Z)(this,"metadata",void 0),(0,l.Z)(this,"model",void 0),(0,l.Z)(this,"modal",void 0),(0,l.Z)(this,"backend",void 0),(0,l.Z)(this,"injector",void 0),(0,l.Z)(this,"toast",void 0),(0,l.Z)(this,"actionconfig",{}),(0,l.Z)(this,"beans",[]),(0,l.Z)(this,"loading",!0),(0,l.Z)(this,"disabled",!0),this.language=e,this.metadata=t,this.model=s,this.modal=o,this.backend=i,this.injector=d,this.toast=a}ngOnInit(){this.model.module&&this.metadata.checkModuleAcl("ProspectLists","create")&&(this.disabled=!1)}execute(){const e=this.modal.await(this.language.getLabel("LBL_LOADING"));this.backend.getRequest("module/ProspectLists/getrelated/"+this.model.module+"/"+this.model.id,{modules:this.actionconfig.modules}).subscribe({next:t=>{e.emit(!0),this.beans=t,this.modal.openModal("ProspectListsCreateTargetListFromModuleModal",!0,this.injector).subscribe((e=>{e.instance.result=this.beans,e.instance.parentBeanId=this.model.id,e.instance.parentModule=this.model.module}))},error:()=>{e.emit(!0),this.toast.sendToast(this.language.getLabel("LBL_ERROR_LOADING_DATA"),"error")}})}}return e=ProspectListsCreateTargetListFromModuleButton,(0,l.Z)(ProspectListsCreateTargetListFromModuleButton,"ɵfac",(function(t){return new(t||e)(p.Y36(g.d),p.Y36(k.Pu),p.Y36(m.o),p.Y36(h.o),p.Y36(b.y),p.Y36(p.zs3),p.Y36(Z.A))})),(0,l.Z)(ProspectListsCreateTargetListFromModuleButton,"ɵcmp",p.Xpm({type:e,selectors:[["prospectlists-create-targetlist-from-module-button"]],decls:2,vars:0,consts:[["label","LBL_TARGETLIST_FROM_MODULE"]],template:function(e,t){1&e&&(p.TgZ(0,"span"),p._UZ(1,"system-label",0),p.qZA())},dependencies:[f._],encapsulation:2})),ProspectListsCreateTargetListFromModuleButton})(),N=(()=>{var e;class ModuleProspectLists{}return e=ModuleProspectLists,(0,l.Z)(ModuleProspectLists,"ɵfac",(function(t){return new(t||e)})),(0,l.Z)(ModuleProspectLists,"ɵmod",p.oAB({type:e})),(0,l.Z)(ModuleProspectLists,"ɵinj",p.cJS({imports:[o.ez,i.u5,a.ObjectFields,n.GlobalComponents,r.ObjectComponents,c.SystemComponents,d.o]})),ModuleProspectLists})();("undefined"==typeof ngJitMode||ngJitMode)&&p.kYT(N,{declarations:[E,B],imports:[o.ez,i.u5,a.ObjectFields,n.GlobalComponents,r.ObjectComponents,c.SystemComponents,d.o]})}}]);