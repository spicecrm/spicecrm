/*
SpiceUI 2018.10.001

Copyright (c) 2016-present, aac services.k.s - All rights reserved.
Redistribution and use in source and binary forms, without modification, are permitted provided that the following conditions are met:
- Redistributions of source code must retain this copyright and license notice, this list of conditions and the following disclaimer.
- Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.
- If used the SpiceCRM Logo needs to be displayed in the upper left corner of the screen in a minimum dimension of 31x31 pixels and be clearly visible, the icon needs to provide a link to http://www.spicecrm.io
THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.

*/

/** 
 * Â© 2015 - 2021 aac services k.s. All rights reserved.
 * release: 2021.02.001
 * date: 2021-06-24 11:36:53
 * build: 2021.02.001.1624527413323
 **/
"use strict";var __extends=this&&this.__extends||function(){var l=function(e,t){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])})(e,t)};return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function s(){this.constructor=e}l(e,t),e.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),__assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var t,s=1,l=arguments.length;s<l;s++)for(var i in t=arguments[s])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},__decorate=this&&this.__decorate||function(e,t,s,l){var i,o=arguments.length,n=o<3?t:null===l?l=Object.getOwnPropertyDescriptor(t,s):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,s,l);else for(var r=e.length-1;0<=r;r--)(i=e[r])&&(n=(o<3?i(n):3<o?i(t,s,n):i(t,s))||n);return 3<o&&n&&Object.defineProperty(t,s,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__param=this&&this.__param||function(s,l){return function(e,t){l(e,t,s)}},__spreadArray=this&&this.__spreadArray||function(e,t){for(var s=0,l=t.length,i=e.length;s<l;s++,i++)e[i]=t[s];return e};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ModuleReportsDesigner=exports.ReportsDesignerSelectModuleModal=exports.ReportsDesignerCondition=exports.ReportsDesignerConditionGroupExpansion=exports.ReportsDesignerConditionGroup=exports.ReportsDesignerFilter=exports.ReportsDesignerIntegrateItemTargetList=exports.ReportsDesignerIntegrateItem=exports.ReportsDesignerIntegrate=exports.ReportsDesignerVisualizeItemGoogleCharts=exports.ReportsDesignerVisualizeItemChartDataPanelMultipleSeries=exports.ReportsDesignerVisualizeItemChartDataPanelSingleSeries=exports.ReportsDesignerVisualizeItemChartDataPanel=exports.ReportsDesignerVisualizeItemChartTypePanel=exports.ReportsDesignerVisualizeItem=exports.ReportsDesignerVisualize=exports.ReportsDesignerPresentItemStandard=exports.ReportsDesignerPresentItemTable=exports.ReportsDesignerPresentItem=exports.ReportsDesignerPresent=exports.ReportsDesignerManipulateTableRowExpansion=exports.ReportsDesignerManipulateUnionTableRow=exports.ReportsDesignerManipulateTableRow=exports.ReportsDesignerManipulateUnion=exports.ReportsDesignerManipulate=exports.ReportsDesignerDetails=exports.ReportsDesignerTree=exports.ReportsDesigner=exports.ReportsDesignerService=void 0;var common_1=require("@angular/common"),core_1=require("@angular/core"),forms_1=require("@angular/forms"),objectfields_1=require("../../objectfields/objectfields"),objectcomponents_1=require("../../objectcomponents/objectcomponents"),systemcomponents_1=require("../../systemcomponents/systemcomponents"),directives_1=require("../../directives/directives"),drag_drop_1=require("@angular/cdk/drag-drop"),modulereports_1=require("../../modules/reports/modulereports"),services_1=require("../../services/services"),router_1=require("@angular/router"),rxjs_1=require("rxjs"),ReportsDesignerService=function(){function e(e,t,s,l,i,o,n){this.configurationService=e,this.backend=t,this.cdr=s,this.model=l,this.language=i,this.metadata=o,this.modelUtils=n,this.currentPath={},this.activeModule={},this.operatorCount={},this.operatorTypes={},this.operatorAssignments={},this.expertMode=!0,this.manipulateExpandedItemId="",this.visualizeActiveLayoutItem="",this.visualizeColorTheme=[],this.loadReporterConfig()}var t;return Object.defineProperty(e.prototype,"listFields",{get:function(){return this.model.getField("listfields")},set:function(e){this.model.setField("listfields",e)},enumerable:!1,configurable:!0}),e.prototype.loadPlugins=function(e){var t=this,s=this.metadata.getComponentConfig(e,"KReports");if(s.componentset&&0<s.componentset.length){var l=this.metadata.getComponentSetObjects(s.componentset);if(!l||0==l.length)return;return l.filter(function(e){return!!e.componentconfig}).map(function(e){return{name:t.language.getLabel(e.componentconfig.name),id:e.componentconfig.plugin,component:e.componentconfig.component,sequence:e.sequence}}).sort(function(e,t){return isNaN(parseInt(e.sequence,10))||isNaN(parseInt(t.sequence,10))?0:+e.sequence>+t.sequence?1:-1})}},e.prototype.setCurrentPath=function(e,t){return this.currentPath[e]=t},e.prototype.getCurrentPath=function(e){return e?this.currentPath[e]:this.activeModule?this.currentPath[this.activeModule.module]:void 0},e.prototype.loadReporterConfig=function(){var t=this,e=this.configurationService.getData("reporterConfig");e?this.setConfigs(e):this.backend.getRequest("module/KReports/core/whereoperators/all").subscribe(function(e){t.configurationService.setData("reporterConfig",e),t.setConfigs(e)})},e.prototype.loadVisualizationColors=function(){var t=this;this.backend.getRequest("module/KReports/core/vizcolors").subscribe(function(e){e&&(t.visualizeColorTheme=e.map(function(e){return e.colors=e.colors.split("*"),e}))})},e.prototype.setConfigs=function(e){this.operatorCount=e.operatorCount,this.operatorTypes=e.operatorTypes,this.operatorAssignments=e.operatorAssignments},e.prototype.removePlaceHolderElement=function(e){this.dragPlaceHolderNode&&e.contains(this.dragPlaceHolderNode)&&(e.removeChild(this.dragPlaceHolderNode),this.dragPlaceHolderNode=void 0)},e.prototype.generateGuid=function(){return"k"+this.modelUtils.generateGuid().replace(/-/g,"")},e=__decorate([core_1.Injectable(),__metadata("design:paramtypes",[services_1.configurationService,services_1.backend,"function"==typeof(t=void 0!==core_1.ChangeDetectorRef&&core_1.ChangeDetectorRef)?t:Object,services_1.model,services_1.language,services_1.metadata,services_1.modelutilities])],e)}();exports.ReportsDesignerService=ReportsDesignerService;var ReportsDesigner=function(){function ReportsDesigner(e,t,s,l,i,o,n,r,a,d,c){this.language=e,this.cdr=t,this.view=s,this.router=l,this.model=i,this.modal=o,this.metadata=n,this.navigationtab=r,this.activatedRoute=a,this.injector=d,this.reportsDesignerService=c,this.subscriptions=new rxjs_1.Subscription,this.currentUnionListFields=[],this.activeTab="manipulate",this.model.module="KReports",this.subscribeToActivatedRoute()}var e,t,s,l;return ReportsDesigner.prototype.ngAfterViewInit=function(){this.view.setEditMode(),this.view.isEditable=!0,this.cdr.detectChanges()},ReportsDesigner.prototype.ngOnDestroy=function(){this.subscriptions.unsubscribe()},ReportsDesigner.prototype.setInitialValues=function(e){var t=this.metadata.getFieldDefs(this.model.module,"report_status");this.model.setFields({report_module:e.module,listfields:[],report_status:t.default||"1",whereconditions:[],listtype:"standard",presentation_params:{plugin:"standard",pluginData:{standardViewProperties:{processCount:"Synchronous",listEntries:25}}}})},ReportsDesigner.prototype.subscribeToActivatedRoute=function(){var s=this;this.subscriptions.add(this.navigationtab.activeRoute$.subscribe(function(e){var t=e.params;t.id&&0!=t.id.length&&("new"==t.id?s.openSelectModuleModal():(s.model.id=t.id,s.model.getData().subscribe(function(e){if(e.report_module&&0!=e.report_module.length){var t=s.model.getField("report_module");s.reportsDesignerService.setCurrentPath(t,t),s.reportsDesignerService.activeModule={unionid:"root",module:e.report_module}}else s.openSelectModuleModal(),s.activeTab="details";e.listfields||s.model.setField("listfields",[]),e.whereconditions||s.model.setField("whereconditions",[]),s.navigationtab.setTabInfo({displayname:s.model.getField("name"),displaymodule:s.model.module})})))}))},ReportsDesigner.prototype.setActiveTab=function(e){"details"==this.activeTab&&!this.model.validate()||("present"==e||"visualize"==e)&&0==this.reportsDesignerService.listFields.length||(this.activeTab=e)},ReportsDesigner.prototype.goToModule=function(){this.router.navigate(["/module/KReports"])},ReportsDesigner.prototype.cancel=function(){this.model.isNew&&this.navigationtab.closeTab(),this.model.cancelEdit(),this.view.setViewMode(),this.navigationtab.closeTab(),this.router.navigate(["/module/KReports/"+(this.model.isNew?"":this.model.id)])},ReportsDesigner.prototype.save=function(){var e=this;this.model.validate()&&this.model.save(!0).subscribe(function(){e.view.setViewMode(),e.navigationtab.closeTab(),e.router.navigate(["/module/KReports/"+e.model.id])})},ReportsDesigner.prototype.openSelectModuleModal=function(){var t=this;this.model.initialize(),this.modal.openModal("ReportsDesignerSelectModuleModal",!0,this.injector).subscribe(function(e){e.instance.createmode=!0,e.instance.response.subscribe(function(e){e?(t.setInitialValues(e),t.reportsDesignerService.setCurrentPath(e.module,e.module),t.reportsDesignerService.activeModule={unionid:"root",module:e.module},t.navigationtab.setTabInfo({displayname:t.model.getField("name"),displaymodule:t.model.module})):(t.navigationtab.closeTab(),t.cancel())})})},ReportsDesigner.prototype.handleUnionDelete=function(e){this.cleanWhereGroups(e),this.cleanUnionListFields(e)},ReportsDesigner.prototype.handleUnionAdd=function(e){this.currentUnionListFields=e},ReportsDesigner.prototype.cleanWhereGroups=function(t){var e=this.model.getField("wheregroups");e&&e.length&&(e=e.filter(function(e){return e.unionid!=t}),this.model.setField("wheregroups",e),this.cleanWhereConditions(e))},ReportsDesigner.prototype.cleanWhereConditions=function(e){var t=this.model.getField("whereconditions");t&&t.length&&(t=t.filter(function(t){return e.some(function(e){return e.id==t.groupid})}),this.model.setField("whereconditions",t))},ReportsDesigner.prototype.cleanUnionListFields=function(t){var e=this.model.getField("unionlistfields");e&&e.length&&(e=e.filter(function(e){return e.joinid!=t}),this.model.setField("unionlistfields",e))},ReportsDesigner=__decorate([core_1.Component({selector:"reports-designer",providers:[ReportsDesignerService,modulereports_1.reporterconfig,services_1.view,services_1.model],template:'<div class="slds-page-header"><div class="slds-grid"><div class="slds-col slds-has-flexi-truncate"><div class="slds-media slds-no-space slds-grow"><div class="slds-media__figure" (click)="goToModule()"><system-icon [module]="model.module"></system-icon></div><div class="slds-media__body"><a (click)="goToModule()" href="javascript:void(0);" class="slds-text-title--caps slds-line-height--reset"><system-label-modulename [module]="model.module"></system-label-modulename></a><h1 class="slds-page-header__title slds-m-right--small slds-align-middle slds-truncate">{{model.getField(\'name\')}}</h1></div></div></div><div class="slds-align-top slds-col slds-grid slds-no-flex slds-p-top--x-small"><button [disabled]="model.isLoading" class="slds-button slds-m-left--x-small slds-button--neutral" (click)="cancel()"><system-label label="LBL_CANCEL"></system-label></button> <button [disabled]="model.isLoading" class="slds-button slds-m-horizontal--x-small slds-button--brand" (click)="save()"><system-label label="LBL_SAVE"></system-label></button></div></div></div><div class="slds-grid" system-to-bottom cdkDropListGroup><div class="slds-size--1-of-3 slds-border--right slds-grid--vertical" style="height: 100%;"><reports-designer-tree (onUnionDelete)="handleUnionDelete($event)" (onUnionAdd)="handleUnionAdd($event)"></reports-designer-tree></div><div class="slds-size--2-of-3" style="height: 100%"><div *ngIf="!model.isLoading && !!reportsDesignerService.activeModule?.module" class="slds-tabs--default"><ul class="slds-tabs--default__nav" role="tablist"><li (click)="setActiveTab(\'details\')" [class.slds-active]="activeTab == \'details\'" class="slds-tabs--default__item slds-text-title--caps" role="presentation"><a class="slds-tabs--default__link" href="javascript:void(0);" role="tab" aria-selected="false"><span class="slds-tabs__left-icon"><system-utility-icon icon="summarydetail" size="x-small"></system-utility-icon></span> <system-label label="LBL_DETAILS"></system-label></a></li><li (click)="setActiveTab(\'manipulate\')" [class.slds-active]="activeTab == \'manipulate\'" class="slds-tabs--default__item slds-text-title--caps" role="presentation"><a class="slds-tabs--default__link" href="javascript:void(0);" role="tab" aria-selected="false"><span class="slds-tabs__left-icon"><system-utility-icon icon="database" size="x-small"></system-utility-icon></span> <system-label label="LBL_MANIPULATE"></system-label></a></li><li (click)="setActiveTab(\'filter\')" [class.slds-active]="activeTab == \'filter\'" class="slds-tabs--default__item slds-text-title--caps" role="presentation"><a class="slds-tabs--default__link" href="javascript:void(0);" role="tab" aria-selected="false"><span class="slds-tabs__left-icon"><system-utility-icon icon="filterList" size="x-small"></system-utility-icon></span> <system-label label="LBL_FILTER"></system-label></a></li><li (click)="setActiveTab(\'present\')" [class.slds-active]="activeTab == \'present\'" [class.slds-text-color--inverse-weak]="reportsDesignerService.listFields?.length == 0" class="slds-tabs--default__item slds-text-title--caps" role="presentation"><a class="slds-tabs--default__link" href="javascript:void(0);" role="tab" aria-selected="false"><span class="slds-tabs__left-icon"><system-utility-icon icon="screen" size="x-small" [colorclass]="reportsDesignerService.listFields?.length == 0 ? \'slds-icon-text-light\' : \'slds-icon-text-default\'"></system-utility-icon></span> <system-label label="LBL_PRESENT"></system-label></a></li><li (click)="setActiveTab(\'visualize\')" [class.slds-active]="activeTab == \'visualize\'" [class.slds-text-color--inverse-weak]="reportsDesignerService.listFields?.length == 0" class="slds-tabs--default__item slds-text-title--caps" role="presentation"><a class="slds-tabs--default__link" href="javascript:void(0);" role="tab" aria-selected="false"><span class="slds-tabs__left-icon"><system-utility-icon icon="chart" size="x-small" [colorclass]="reportsDesignerService.listFields?.length == 0 ? \'slds-icon-text-light\' : \'slds-icon-text-default\'"></system-utility-icon></span> <system-label label="LBL_VISUALIZE"></system-label></a></li><li (click)="setActiveTab(\'integrate\')" [class.slds-active]="activeTab == \'integrate\'" class="slds-tabs--default__item slds-text-title--caps" role="presentation"><a class="slds-tabs--default__link" href="javascript:void(0);" role="tab" aria-selected="false"><span class="slds-tabs__left-icon"><system-utility-icon icon="settings" size="x-small"></system-utility-icon></span> <system-label label="LBL_INTEGRATE"></system-label></a></li><li class="slds-grid slds-grid--vertical-align-center slds-text-title--caps slds-col--bump-left slds-p-vertical--x-small" role="presentation"><system-checkbox [(ngModel)]="reportsDesignerService.expertMode"><system-label label="LBL_EXPERT_MODE"></system-label></system-checkbox></li></ul><div [ngSwitch]="activeTab" system-to-bottom><ng-container *ngIf="reportsDesignerService.activeModule?.unionid"><reports-designer-details *ngSwitchCase="\'details\'"></reports-designer-details><ng-container *ngSwitchCase="\'manipulate\'"><reports-designer-manipulate [class.slds-hide]="reportsDesignerService.activeModule.unionid != \'root\'"></reports-designer-manipulate><reports-designer-manipulate-union [class.slds-hide]="reportsDesignerService.activeModule.unionid == \'root\'" [module]="reportsDesignerService.activeModule" [currentUnionListFields]="currentUnionListFields"></reports-designer-manipulate-union></ng-container><reports-designer-filter *ngSwitchCase="\'filter\'" [module]="reportsDesignerService.activeModule"></reports-designer-filter><reports-designer-present *ngSwitchCase="\'present\'"></reports-designer-present><reports-designer-visualize *ngSwitchCase="\'visualize\'"></reports-designer-visualize><reports-designer-integrate *ngSwitchCase="\'integrate\'"></reports-designer-integrate></ng-container></div></div><div *ngIf="model.isLoading" class="slds-align--absolute-center" style="height: 100%"><system-spinner></system-spinner></div><div *ngIf="!model.isLoading && !reportsDesignerService.activeModule?.module" class="slds-p-around--small slds-align--absolute-center" style="height: 100%"><system-label label="LBL_MAKE_SELECTION"></system-label></div></div></div>'}),__metadata("design:paramtypes",[services_1.language,"function"==typeof(e=void 0!==core_1.ChangeDetectorRef&&core_1.ChangeDetectorRef)?e:Object,services_1.view,"function"==typeof(t=void 0!==router_1.Router&&router_1.Router)?t:Object,services_1.model,services_1.modal,services_1.metadata,services_1.navigationtab,"function"==typeof(s=void 0!==router_1.ActivatedRoute&&router_1.ActivatedRoute)?s:Object,"function"==typeof(l=void 0!==core_1.Injector&&core_1.Injector)?l:Object,ReportsDesignerService])],ReportsDesigner)}();exports.ReportsDesigner=ReportsDesigner;var ReportsDesignerTree=function(){function e(e,t,s,l,i,o,n,r){this.language=e,this.backend=t,this.model=s,this.modal=l,this.metadata=i,this.cdr=o,this.injector=n,this.reportsDesignerService=r,this.modules=[],this.filterKey="",this.isLoadingModuleFields=!1,this.reportModuleFields={},this.onUnionDelete=new core_1.EventEmitter,this.onUnionAdd=new core_1.EventEmitter}var t,s,l,i;return Object.defineProperty(e.prototype,"canAdd",{get:function(){var e=this.model.getField("listfields");return e&&e.length&&0<e.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"activeModule",{get:function(){return this.reportsDesignerService.activeModule},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"allModules",{get:function(){return __spreadArray([{module:this.model.getField("report_module"),unionid:"root"}],this.unionModules)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"unionModules",{get:function(){var e=this.model.getField("union_modules");return e&&e.length?e:[]},enumerable:!1,configurable:!0}),e.prototype.onItemSelection=function(e,t){this.reportsDesignerService.setCurrentPath(t,e.path),this.getModuleFields(e.module,t)},e.prototype.getFilteredReportFields=function(e){var t=this;return this.filterKey?e.filter(function(e){return e.name.toLowerCase().includes(t.filterKey.toLowerCase())||e.label&&t.language.getLabel(e.label).toLowerCase().includes(t.filterKey.toLowerCase())}):e},e.prototype.addUnionModule=function(){var l=this;this.modal.openModal("ReportsDesignerSelectModuleModal",!0,this.injector).subscribe(function(e){e.instance.response.subscribe(function(e){if(e){var t=l.model.getField("union_modules");t&&t.length||(t=[]);var s={unionid:l.reportsDesignerService.generateGuid(),module:e.module};t.push(s),l.model.setField("union_modules",t),l.initializeUnionListFields(s.unionid),l.setActiveModule(s)}})})},e.prototype.deleteUnionModule=function(l){var i=this;this.modal.confirmDeleteRecord().subscribe(function(e){if(e){var t=i.model.getField("union_modules");t=t.filter(function(e){return e.unionid!=l}),i.model.setField("union_modules",t);var s=0<t.length?t[t.length-1]:{unionid:"root",module:i.model.getField("report_module")};i.setActiveModule(s),i.onUnionDelete.emit(l)}})},e.prototype.initializeUnionListFields=function(t){var e=this.model.getField("unionlistfields"),s=this.model.getField("listfields").slice().map(function(e){return e={fieldid:e.fieldid,joinid:t,path:e.path,displaypath:"",unionfieldpath:"",unionfielddisplaypath:"",unionfieldname:"",unionfielddisplayname:"",name:e.name,fixedvalue:"",id:e.fieldid}});e&&e.length&&0<e.length&&(s=__spreadArray(__spreadArray([],e),s)),this.model.setField("unionlistfields",s)},e.prototype.getModuleFields=function(e,t){var s=this;this.reportModuleFields[t]=[],this.isLoadingModuleFields=!0,this.cdr.detectChanges(),this.backend.getRequest("dictionary/browser/"+e+"/fields").subscribe(function(e){s.reportModuleFields[t]=e.filter(function(e){return"relate"!=e.type&&"non-db"!=e.source}),s.isLoadingModuleFields=!1})},e.prototype.dropExited=function(t){var e=document.createElement("tr"),s=document.createElement("td");s.colSpan=10,s.innerHTML="&nbsp;",s.style.background="#fff",e.appendChild(s),this.reportsDesignerService.dragPlaceHolderNode=e;var l=t.container.data.findIndex(function(e){return e.id==t.item.data.id});-1<l&&t.container.element.nativeElement.insertBefore(e,t.container.element.nativeElement.children[l])},e.prototype.dropEntered=function(e){this.reportsDesignerService.removePlaceHolderElement(e.container.element.nativeElement)},e.prototype.setActiveModule=function(e){this.reportsDesignerService.activeModule=e,this.reportsDesignerService.getCurrentPath(e.module)||this.reportsDesignerService.setCurrentPath(e.module,e.module),this.setCurrentUnionListFields(e.unionid)},e.prototype.setCurrentUnionListFields=function(t){var e=this.model.getField("unionlistfields");e=e&&e.length?e:[],this.onUnionAdd.emit(e.filter(function(e){return e.joinid==t}))},e.prototype.trackByFn=function(e,t){return e},__decorate([core_1.Output(),__metadata("design:type","function"==typeof(t=void 0!==core_1.EventEmitter&&core_1.EventEmitter)?t:Object)],e.prototype,"onUnionDelete",void 0),__decorate([core_1.Output(),__metadata("design:type","function"==typeof(s=void 0!==core_1.EventEmitter&&core_1.EventEmitter)?s:Object)],e.prototype,"onUnionAdd",void 0),e=__decorate([core_1.Component({selector:"reports-designer-tree",template:'<div class="slds-border--bottom" style="height: 50%"><div class="slds-tabs--default slds-grid slds-grid--vertical" style="height: 100%"><div class="slds-grid"><ul class="slds-tabs--default__nav slds-scrollable--x slds-grow" role="tablist"><li *ngFor="let module of allModules; trackBy: trackByFn" (click)="setActiveModule(module)" [class.slds-active]="module.unionid == activeModule.unionid" class="slds-tabs--default__item slds-grid slds-grid_vertical-align-center" role="presentation"><a class="slds-tabs--default__link slds-grid" href="javascript:void(0);" role="tab" aria-selected="false"><system-icon [module]="module.module" size="small" divClass="slds-m-right--x-small"></system-icon><span class="slds-truncate"><system-label-modulename [module]="module.module"></system-label-modulename></span></a><div *ngIf="module.unionid != \'root\'" class="slds-col_bump-left slds-p-left_none slds-p-right_none"><button (click)="deleteUnionModule(module.unionid)" class="slds-button slds-button_icon slds-button_icon-container slds-button_icon-x-small"><system-button-icon icon="close"></system-button-icon></button></div></li></ul><div class="slds-p-around--x-small slds-border--left slds-border--bottom"><button (click)="addUnionModule()" [disabled]="!canAdd" class="slds-button slds-button_icon"><system-button-icon icon="add"></system-button-icon></button></div></div><div class="slds-grow" style="height: 0" *ngIf="!!activeModule.unionid"><div *ngFor="let module of allModules; trackBy: trackByFn" [class.slds-hide]="activeModule.unionid != module.unionid" class="slds-scrollable--y" style="height: 100%"><system-module-tree [module]="module.module" (itemSelected)="onItemSelection($event, module.module)"></system-module-tree></div></div></div></div><div class="slds-grid slds-grid--vertical" style="height: 50%"><div class="slds-input-has-icon slds-input-has-icon_left" role="none"><system-utility-icon icon="search" addclasses="slds-input__icon slds-input__icon--left"></system-utility-icon><input class="slds-input" type="search" [placeholder]="language.getLabel(\'LBL_SEARCH\')" [(ngModel)]="filterKey"></div><div class="slds-grow slds-scrollable--y"><table class="slds-table slds-table_cell-buffer slds-table_bordered"><thead><tr class="slds-line-height_reset"><th class="slds-cell-shrink"></th><th scope="col"><div class="slds-truncate"><system-label label="LBL_FIELD"></system-label></div></th><th scope="col"><div class="slds-truncate"><system-label label="LBL_NAME"></system-label></div></th></tr></thead><tbody *ngFor="let module of allModules; trackBy: trackByFn" [class.slds-hide]="isLoadingModuleFields || activeModule.unionid != module.unionid" cdkDropList [id]="module.unionid" (cdkDropListExited)="dropExited($event)" (cdkDropListEntered)="dropEntered($event)" cdkDropListSortingDisabled [cdkDropListData]="reportModuleFields[module.module]"><tr cdkDrag [cdkDragData]="reportField" *ngFor="let reportField of getFilteredReportFields(reportModuleFields[module.module]); trackBy: trackByFn" class="slds-hint-parent slds-drag--preview"><td class="slds-p-around--none slds-cell-shrink"><system-utility-icon class="slds-p-horizontal--x-small" cdkDragHandle style="cursor: move" icon="drag_and_drop" size="x-small"></system-utility-icon></td><td data-label="Account Name"><div class="slds-truncate" [title]="reportField.name">{{reportField.name}}</div></td><td><div class="slds-truncate" [title]="language.getLabel(reportField.label)"><system-label [label]="reportField.label"></system-label></div></td></tr></tbody><tbody system-table-stencils *ngIf="isLoadingModuleFields" [columns]="2" [rows]="5" [select]="true"></tbody></table></div></div>'}),__metadata("design:paramtypes",[services_1.language,services_1.backend,services_1.model,services_1.modal,services_1.metadata,"function"==typeof(l=void 0!==core_1.ChangeDetectorRef&&core_1.ChangeDetectorRef)?l:Object,"function"==typeof(i=void 0!==core_1.Injector&&core_1.Injector)?i:Object,ReportsDesignerService])],e)}();exports.ReportsDesignerTree=ReportsDesignerTree;var ReportsDesignerDetails=function(){function ReportsDesignerDetails(e,t,s,l){this.language=e,this.model=t,this.backend=s,this.metadata=l}return ReportsDesignerDetails.prototype.ngOnInit=function(){var e=this.metadata.getComponentConfig("ReportsDesignerDetails",this.model.module);this.fieldset=e.fieldset,this.model.getField("reportoptions")||this.model.setField("reportoptions",{})},Object.defineProperty(ReportsDesignerDetails.prototype,"reportOptions",{get:function(){return this.model.getField("reportoptions")},enumerable:!1,configurable:!0}),ReportsDesignerDetails=__decorate([core_1.Component({selector:"reports-designer-details",template:'<div class="slds-p-around--x-small"><system-collapsable-tab [collapsible]="false" tabtitle="LBL_DETAILS"><object-record-fieldset [fieldset]="fieldset" direction="vertical"></object-record-fieldset></system-collapsable-tab><system-collapsable-tab [collapsible]="false" tabtitle="LBL_OPTIONS"><div class="slds-grid"><fieldset class="slds-form-element slds-m-vertical--xxx-small slds-size--1-of-2"><legend class="slds-form-element__legend slds-form-element__label"><system-label label="LBL_SHOW_DELETED"></system-label></legend><div class="slds-form-element__control"><system-checkbox [(ngModel)]="reportOptions.showDeleted"><system-label label="LBL_SHOW_DELETED"></system-label></system-checkbox></div></fieldset><fieldset class="slds-form-element slds-m-vertical--xxx-small slds-size--1-of-2"><legend class="slds-form-element__legend slds-form-element__label"><system-label label="LBL_AUTHORIZATION_CHECK"></system-label></legend><div class="slds-form-element__control"><system-input-radio name="reportOptionsAuthCheck" value="full" [(ngModel)]="reportOptions.authCheck"><system-label label="LBL_ON_ALL_NODES"></system-label></system-input-radio><system-input-radio name="reportOptionsAuthCheck" value="top" [(ngModel)]="reportOptions.authCheck"><system-label label="LBL_TOP_NODE_ONLY"></system-label></system-input-radio><system-input-radio name="reportOptionsAuthCheck" value="none" [(ngModel)]="reportOptions.authCheck"><system-label label="LBL_DISABLED"></system-label></system-input-radio></div></fieldset></div></system-collapsable-tab><system-dynamic-component component="ObjectRecordAdministrationTab" [componentconfig]="{name: \'LBL_ADMIN_DATA\'}"></system-dynamic-component></div>'}),__metadata("design:paramtypes",[services_1.language,services_1.model,services_1.backend,services_1.metadata])],ReportsDesignerDetails)}();exports.ReportsDesignerDetails=ReportsDesignerDetails;var ReportsDesignerManipulate=function(){function e(e,t,s,l,i){this.language=e,this.modelUtilities=t,this.modal=s,this.model=l,this.reportsDesignerService=i}return Object.defineProperty(e.prototype,"listFields",{get:function(){return this.reportsDesignerService.listFields},set:function(e){this.reportsDesignerService.listFields=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dragList",{get:function(){return this.reportsDesignerService.treeCDKDragList},enumerable:!1,configurable:!0}),e.prototype.trackByFn=function(e,t){return t.fieldid},e.prototype.onDrop=function(e){if(this.reportsDesignerService.removePlaceHolderElement(e.previousContainer.element.nativeElement),e.previousContainer===e.container)drag_drop_1.moveItemInArray(e.container.data,e.previousIndex,e.currentIndex);else{var t=e.item.data,s=this.generateNewItem(t,e.container.data.length+1);e.container.data.splice(e.currentIndex,0,s),this.addListItemToUnionFields(s)}e.container.data=e.container.data.map(function(e,t){return e.sequence=t,e}),this.listFields=e.container.data},e.prototype.addListItemToUnionFields=function(s){var e=this.model.getField("union_modules");if(e&&e.length&&0!=e.length){var l=this.model.getField("unionlistfields");l&&l.length&&0!=l.length||(l=[]),e.forEach(function(e){var t={fieldid:s.fieldid,joinid:e.unionid,path:s.path,displaypath:"",unionfieldpath:"",unionfielddisplaypath:"",unionfieldname:"",unionfielddisplayname:"",name:s.name,fixedvalue:"",id:s.fieldid};l.push(t)}),this.model.setField("unionlistfields",l)}},e.prototype.deleteListItemToUnionFields=function(t){var e=this.model.getField("unionlistfields");e&&e.length&&0!=e.length&&(e=e.filter(function(e){return e.fieldid!=t}),this.model.setField("unionlistfields",e))},e.prototype.generateNewItem=function(e,t){void 0===e&&(e=null);var s=this.reportsDesignerService.generateGuid();return{fieldid:s,path:e?this.reportsDesignerService.getCurrentPath()+"::"+e.id:"",displaypath:e?this.reportsDesignerService.getCurrentPath():"",fieldname:e?e.name:"",name:e?e.label:"new fixed field",display:"yes",sequence:t,width:"100",sort:"-",sortpriority:"",jointype:"optional",sqlfunction:"-",summaryfunction:"",groupby:"no",link:"no",fixedvalue:"",formulasequence:"",id:s}},e.prototype.deleteField=function(s){var l=this;this.modal.confirmDeleteRecord().subscribe(function(e){if(e){var t=l.listFields.slice();t=t.filter(function(e){return e.fieldid!=s}),l.listFields=t,l.deleteListItemToUnionFields(s)}})},e.prototype.addFixed=function(){var e=this.listFields.slice(),t=this.generateNewItem(null,e.length+1);e.push(t),this.listFields=e,this.addListItemToUnionFields(t),this.reportsDesignerService.manipulateExpandedItemId=t.fieldid},e=__decorate([core_1.Component({selector:"reports-designer-manipulate",template:'<div class="slds-grid slds-grid--vertical" style="height: 100%"><div class="slds-border--bottom slds-p-around--x-small"><button (click)="addFixed()" [disabled]="!reportsDesignerService.expertMode" class="slds-button slds-button_neutral slds-m-right--small slds-p-horizontal--x-small slds-text-title--caps" style="height: 100%; line-height: 22px"><system-label label="LBL_ADD_FIXED"></system-label></button></div><div cdkDropList [cdkDropListData]="listFields" (cdkDropListDropped)="onDrop($event)" class="slds-grow slds-scrollable--y" style="height: 100%"><table class="slds-table slds-table--cell-buffer spice-table_header-fixed slds-table--fixed-layout slds-no-row-hover reports-designer-manipulate-table"><thead><tr class="slds-text-title--caps slds-theme--shade"><th class="slds-cell-shrink"></th><th scope="col" class="slds-resizable"><div class="slds-truncate"><system-label label="LBL_PATH"></system-label></div></th><th scope="col" class="slds-resizable"><div class="slds-truncate"><system-label label="LBL_NAME"></system-label></div></th><th scope="col" class="slds-resizable"><div class="slds-truncate"><system-label label="LBL_FUNCTION"></system-label></div></th><th scope="col" class="slds-text-align--center slds-cell-shrink"><system-utility-icon icon="summary" size="x-small" [title]="language.getLabel(\'LBL_GROUP_BY\')"></system-utility-icon></th><th scope="col" class="slds-text-align--center slds-cell-shrink"><system-utility-icon icon="link" size="x-small" [title]="language.getLabel(\'LBL_REQUIRED\')"></system-utility-icon></th><th class="slds-cell-shrink"></th></tr></thead><tbody><ng-container *ngFor="let listItem of listFields; trackBy: trackByFn"><tr reports-designer-manipulate-table-row [listItem]="listItem" (onDelete)="deleteField(listItem.fieldid)" cdkDrag [cdkDragData]="listItem" cdkDragBoundary=".reports-designer-manipulate-table" class="slds-border--bottom slds-drag--preview"></tr><tr reports-designer-manipulate-table-row-expansion [listItem]="listItem" class="slds-theme--shade slds-box_border"></tr></ng-container><tr *ngIf="listFields?.length == 0"><td colspan="7"><div class="slds-align--absolute-center slds-p-around--large"><system-label label="MSG_DROP_FIELD_HERE"></system-label></div></td></tr></tbody></table></div></div>'}),__metadata("design:paramtypes",[services_1.language,services_1.modelutilities,services_1.modal,services_1.model,ReportsDesignerService])],e)}();exports.ReportsDesignerManipulate=ReportsDesignerManipulate;var ReportsDesignerManipulateUnion=function(){function e(e,t,s,l,i){this.language=e,this.modelUtilities=t,this.modal=s,this.model=l,this.reportsDesignerService=i,this.module={},this.currentUnionListFields=[]}return Object.defineProperty(e.prototype,"dragList",{get:function(){return this.reportsDesignerService.treeCDKDragList},enumerable:!1,configurable:!0}),e.prototype.trackByFn=function(e,t){return t.fieldid},e.prototype.onDrop=function(e){this.reportsDesignerService.removePlaceHolderElement(e.previousContainer.element.nativeElement),e.previousContainer!==e.container&&this.linkUnionField(e.container.data,e.item.data)},e.prototype.linkUnionField=function(e,t){var s=this.reportsDesignerService.getCurrentPath().indexOf("link")<0?"unionroot::":"",l=this.reportsDesignerService.getCurrentPath().replace("root:","");e.unionfieldname=t.name,e.unionfielddisplayname=t.label,e.unionfielddisplaypath=this.reportsDesignerService.getCurrentPath(),e.unionfieldpath=s+"union"+this.module.unionid+":"+l+"::"+t.id,e.displaypath=this.reportsDesignerService.getCurrentPath(),e.joinid=this.module.unionid},e.prototype.resetUnionField=function(e){e.unionfieldname="",e.unionfielddisplayname="",e.unionfielddisplaypath="",e.unionfieldpath="",e.displaypath=""},e.prototype.unlinkField=function(t){var s=this;this.modal.confirm(this.language.getLabel("LBL_UNLINK"),this.language.getLabel("LBL_UNLINK")).subscribe(function(e){e&&s.currentUnionListFields.some(function(e){if(e.fieldid==t)return s.resetUnionField(e),!0})})},e.prototype.onDropEntered=function(e){var t=e.item.getPlaceholderElement();e.container.element.nativeElement.removeChild(t),t.style.display="block",t.style.height=0,t.style.width=0,t.style.overflow="hidden";var s=e.container.element.nativeElement.querySelectorAll("td[data-cdk-drag-placholder-container]");s[0]&&s[0].insertBefore(t,s[0].firstChild)},__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"module",void 0),__decorate([core_1.Input(),__metadata("design:type",Array)],e.prototype,"currentUnionListFields",void 0),e=__decorate([core_1.Component({selector:"reports-designer-manipulate-union",template:'<div class="slds-grid" style="height: 100%"><div class="slds-size--1-of-1" style="height: 100%"><table class="slds-table slds-table--cell-buffer spice-table_header-fixed slds-table--fixed-layout slds-no-row-hover reports-designer-manipulate-table"><thead><tr class="slds-text-title--caps slds-theme--shade"><th class="slds-cell-shrink"></th><th scope="col" class="slds-resizable"><div class="slds-truncate"><system-label label="LBL_PATH"></system-label></div></th><th scope="col" class="slds-resizable"><div class="slds-truncate"><system-label label="LBL_NAME"></system-label></div></th><th scope="col" class="slds-resizable"><div class="slds-truncate"><system-label label="LBL_UNION_FIELD_PATH"></system-label></div></th><th scope="col" class="slds-resizable"><div class="slds-truncate"><system-label label="LBL_UNION_PATH"></system-label></div></th><th scope="col" class="slds-resizable"><div class="slds-truncate"><system-label label="LBL_UNION_FIELD_NAME"></system-label></div></th><th scope="col" class="slds-resizable"><div class="slds-truncate"><system-label label="LBL_FIXED_VALUE"></system-label></div></th><th class="slds-cell-shrink"></th></tr></thead><tbody><tr reports-designer-manipulate-union-table-row *ngFor="let field of currentUnionListFields; trackBy: trackByFn" [listItem]="field" (onUnlink)="unlinkField(field.fieldid)" (cdkDropListEntered)="onDropEntered($event)" cdkDropList [id]="field.fieldid" [cdkDropListData]="field" (cdkDropListDropped)="onDrop($event)" cdkDropListSortingDisabled class="slds-border--bottom slds-drag--preview spice-reports-designer-union-list" style="height: 41px"></tr></tbody></table></div></div>',styles:[".cdk-drop-list-dragging {background-color: #ddd !important}"]}),__metadata("design:paramtypes",[services_1.language,services_1.modelutilities,services_1.modal,services_1.model,ReportsDesignerService])],e)}();exports.ReportsDesignerManipulateUnion=ReportsDesignerManipulateUnion;var ReportsDesignerManipulateTableRow=function(){function e(e,t,s,l,i){this.language=e,this.modelUtilities=t,this.modal=s,this.model=l,this.reportsDesignerService=i,this.listItem={},this.onDelete=new core_1.EventEmitter}var t;return Object.defineProperty(e.prototype,"name",{get:function(){return this.listItem.name},set:function(t){var s=this;this.listItem.name=t;var e=this.model.getField("unionlistfields");e&&e.length&&0!=e.length&&(e.forEach(function(e){if(e.fieldid==s.listItem.fieldid)return e.name=t,!0}),this.model.setField("unionlistfields",e))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"groupBy",{get:function(){return"yes"==this.listItem.groupby},set:function(e){this.listItem.groupby=e?"yes":"no"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"joinType",{get:function(){return"required"==this.listItem.jointype},set:function(e){this.listItem.jointype=e?"required":"optional"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"displayPath",{get:function(){return this.listItem.displaypath&&0<this.listItem.displaypath.length?this.listItem.displaypath:"FIXED"},enumerable:!1,configurable:!0}),e.prototype.deleteField=function(){this.onDelete.emit()},e.prototype.toggleExpand=function(e){e.stopPropagation(),this.reportsDesignerService.expertMode&&(this.reportsDesignerService.manipulateExpandedItemId=this.reportsDesignerService.manipulateExpandedItemId==this.listItem.fieldid?"":this.listItem.fieldid)},Object.defineProperty(e.prototype,"requiredEnabled",{get:function(){return 2<this.listItem.path.split("::").length},enumerable:!1,configurable:!0}),__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"listItem",void 0),__decorate([core_1.Output(),__metadata("design:type","function"==typeof(t=void 0!==core_1.EventEmitter&&core_1.EventEmitter)?t:Object)],e.prototype,"onDelete",void 0),e=__decorate([core_1.Component({selector:"[reports-designer-manipulate-table-row]",template:'<td class="slds-p-around--none"><system-utility-icon class="slds-p-horizontal--x-small" cdkDragHandle style="cursor: move" icon="drag_and_drop" size="x-small"></system-utility-icon></td><td><div class="slds-truncate" [title]="displayPath">{{displayPath}}</div></td><td><div class="slds-form-element"><system-input-label [(ngModel)]="name"></system-input-label></div></td><td><div class="slds-form-element"><div class="slds-form-element__control"><div class="slds-select_container"><select class="slds-select" [(ngModel)]="listItem.sqlfunction"><option></option><option value="SUM"><system-label label="LBL_SUM"></system-label></option><option value="COUNT"><system-label label="LBL_COUNT"></system-label></option><option value="COUNT_DISTINCT"><system-label label="LBL_COUNT_DISTINCT"></system-label></option><option value="MAX"><system-label label="LBL_MAXIMUM"></system-label></option><option value="MIN"><system-label label="LBL_MINIMUM"></system-label></option><option value="AVG"><system-label label="LBL_AVERAGE"></system-label></option><option value="GROUP_CONCAT"><system-label label="LBL_GROUP_CONCAT"></system-label></option><option value="GROUP_CONASC"><system-label label="LBL_GROUP_CONCAT"></system-label> (ASC)</option><option value="GROUP_CONDSC"><system-label label="LBL_GROUP_CONCAT"></system-label> (DESC)</option></select></div></div></div></td><td><div class="slds-align--absolute-center"><system-checkbox [(ngModel)]="groupBy" [hidelabel]="true"></system-checkbox></div></td><td><div *ngIf="requiredEnabled" class="slds-align--absolute-center"><system-checkbox [(ngModel)]="joinType" [hidelabel]="true"></system-checkbox></div></td><td class="slds-cell-shrink"><button class="slds-button slds-button--icon" (click)="deleteField()"><system-button-icon icon="delete"></system-button-icon></button><system-utility-icon [icon]="reportsDesignerService.manipulateExpandedItemId == listItem.fieldid ? \'up\' : \'down\'" (click)="toggleExpand($event)" [colorclass]="reportsDesignerService.expertMode ? \'slds-icon-text-default\' : \'slds-icon-text-light\'" size="x-small" class="slds-p-horizontal--xx-small slds-p-vertical--xx-small" style="cursor: pointer"></system-utility-icon></td>'}),__metadata("design:paramtypes",[services_1.language,services_1.modelutilities,services_1.modal,services_1.model,ReportsDesignerService])],e)}();exports.ReportsDesignerManipulateTableRow=ReportsDesignerManipulateTableRow;var ReportsDesignerManipulateUnionTableRow=function(){function e(e){this.language=e,this.listItem={},this.onUnlink=new core_1.EventEmitter}var t;return Object.defineProperty(e.prototype,"path",{get:function(){return this.listItem.path&&0<this.listItem.path.length?this.listItem.path:"FIXED"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isLinked",{get:function(){return!!this.listItem.unionfieldpath&&0<this.listItem.unionfieldpath.length},enumerable:!1,configurable:!0}),e.prototype.unlinkField=function(){this.onUnlink.emit()},__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"listItem",void 0),__decorate([core_1.Output(),__metadata("design:type","function"==typeof(t=void 0!==core_1.EventEmitter&&core_1.EventEmitter)?t:Object)],e.prototype,"onUnlink",void 0),e=__decorate([core_1.Component({selector:"[reports-designer-manipulate-union-table-row]",template:'<td><system-utility-icon *ngIf="isLinked" icon="linked" size="x-small" colorclass="slds-icon-text-success"></system-utility-icon><system-utility-icon *ngIf="!isLinked" icon="unlinked" size="x-small" colorclass="slds-icon-text-light"></system-utility-icon></td><td><div class="slds-truncate" [title]="path">{{path}}</div></td><td><div class="slds-truncate" [title]="language.getLabel(listItem.name)"><system-label [label]="listItem.name"></system-label></div></td><td><div class="slds-truncate" [title]="listItem.unionfieldpath">{{listItem.unionfieldpath}}</div></td><td><div class="slds-truncate" [title]="listItem.unionfielddisplaypath">{{listItem.unionfielddisplaypath}}</div></td><td><div class="slds-truncate" [title]="language.getLabel(listItem.unionfielddisplayname)"><system-label [label]="listItem.unionfielddisplayname"></system-label></div></td><td><div *ngIf="listItem.joinid" class="slds-form-element"><div class="slds-form-element__control"><input type="text" [(ngModel)]="listItem.fixedvalue" class="slds-input"></div></div></td><td class="slds-cell-shrink slds-text-align--center" data-cdk-drag-placholder-container><button *ngIf="listItem.joinid" (click)="unlinkField()" [disabled]="!isLinked" class="slds-button slds-button--icon"><system-button-icon icon="remove_link"></system-button-icon></button></td>'}),__metadata("design:paramtypes",[services_1.language])],e)}();exports.ReportsDesignerManipulateUnionTableRow=ReportsDesignerManipulateUnionTableRow;var ReportsDesignerManipulateTableRowExpansion=function(){function e(e,t,s,l,i){this.language=e,this.modelUtilities=t,this.modal=s,this.model=l,this.reportsDesignerService=i,this.listItem={}}return __decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"listItem",void 0),e=__decorate([core_1.Component({selector:"[reports-designer-manipulate-table-row-expansion]",template:'<ng-container *ngIf="reportsDesignerService.manipulateExpandedItemId == this.listItem.fieldid && reportsDesignerService.expertMode"><td colspan="7"><fieldset class="slds-form-element slds-form-element_compound slds-p-vertical--x-small"><div class="slds-form-element__control"><div class="slds-grid slds-m-vertical--xx-small slds-grid--align-spread"><div class="slds-form-element slds-size--1-of-1"><label class="slds-form-element__label"><system-label label="LBL_PATH"></system-label></label><div class="slds-form-element__control"><input type="text" [(ngModel)]="listItem.path" class="slds-input" [disabled]="true"></div></div></div><div class="slds-form-element slds-grid"><div class="slds-form-element slds-size--1-of-2"><label class="slds-form-element__label"><system-label label="LBL_FIXED_VALUE"></system-label></label><div class="slds-form-element__control"><input type="text" [(ngModel)]="listItem.fixedvalue" class="slds-input" tabindex="1" autofocus></div></div><div class="slds-form-element slds-size--1-of-2"><label class="slds-form-element__label"><system-label label="LBL_GROUPING"></system-label></label><div class="slds-form-element__control"><input disabled type="text" [(ngModel)]="listItem.grouping" class="slds-input"></div></div></div><div class="slds-form-element slds-grid"><div class="slds-form-element slds-size--1-of-2"><label class="slds-form-element__label"><system-label label="LBL_VALUE_TYPE"></system-label></label><div class="slds-form-element__control"><div class="slds-select_container"><select class="slds-select" [(ngModel)]="listItem.valuetype"><option></option><option value="TOFSUM"><system-label label="LBL_VALUE_TYPE_TOFSUM"></system-label></option><option value="POFSUM"><system-label label="LBL_VALUE_TYPE_POFSUM"></system-label></option><option value="POFCOUNT"><system-label label="LBL_VALUE_TYPE_POFCOUNT"></system-label></option><option value="POFAVG"><system-label label="LBL_VALUE_TYPE_POFAVERAGE"></system-label></option><option value="DOFSUM"><system-label label="LBL_VALUE_TYPE_DOFSUM"></system-label></option><option value="DOFCOUNT"><system-label label="LBL_VALUE_TYPE_DOFCOUNT"></system-label></option><option value="DOFAVG"><system-label label="LBL_VALUE_TYPE_DOFAVERAGE"></system-label></option><option value="C"><system-label label="LBL_VALUE_TYPE_C"></system-label></option></select></div></div></div></div><div class="slds-form-element slds-m-top--x-small slds-has-divider--top"><label class="slds-form-element__label"><system-label label="LBL_CUSTOM_FUNCTION"></system-label></label><system-input-base64 [(ngModel)]="listItem.customsqlfunction"></system-input-base64></div><div class="slds-grid slds-has-divider--top"><div class="slds-form-element slds-size--1-of-2"><label class="slds-form-element__label"><system-label label="LBL_STORE"></system-label></label><div class="slds-form-element__control"><input type="text" [(ngModel)]="listItem.assigntovalue" class="slds-input"></div></div><div class="slds-form-element slds-size--1-of-2"><label class="slds-form-element__label"><system-label label="LBL_SEQUENCE"></system-label></label><div class="slds-form-element__control"><input type="text" [(ngModel)]="listItem.formulasequence" class="slds-input"></div></div></div><div class="slds-form-element"><label class="slds-form-element__label"><system-label label="LBL_FORMULA"></system-label></label><system-input-base64 [(ngModel)]="listItem.formulavalue"></system-input-base64></div><div class="slds-grid slds-has-divider--top"><div class="slds-form-element slds-size--1-of-2"><label class="slds-form-element__label"><system-label label="LBL_PATH"></system-label></label><div class="slds-form-element__control"><input type="text" disabled [(ngModel)]="listItem.path" class="slds-input" tabindex="1" autofocus></div></div><div class="slds-form-element slds-size--1-of-2"><label class="slds-form-element__label"><system-label label="LBL_ID"></system-label></label><div class="slds-form-element__control"><input disabled type="text" [(ngModel)]="listItem.fieldid" class="slds-input"></div></div></div></div></fieldset></td></ng-container>'}),__metadata("design:paramtypes",[services_1.language,services_1.modelutilities,services_1.modal,services_1.model,ReportsDesignerService])],e)}();exports.ReportsDesignerManipulateTableRowExpansion=ReportsDesignerManipulateTableRowExpansion;var ReportsDesignerPresent=function(){function ReportsDesignerPresent(e,t,s,l){this.language=e,this.metadata=t,this.model=s,this.reportsDesignerService=l,this.plugins=[]}return Object.defineProperty(ReportsDesignerPresent.prototype,"selectedItemId",{get:function(){return this.model.getField("listtype")},set:function(e){this.model.setField("listtype",e),this.initializePresentationParams(e)},enumerable:!1,configurable:!0}),ReportsDesignerPresent.prototype.ngOnInit=function(){this.initializePresentationParams(),this.plugins=this.reportsDesignerService.loadPlugins("ReportsDesignerPresent")},ReportsDesignerPresent.prototype.initializePresentationParams=function(e){var t=this.model.getField("presentation_params");t&&t.plugin?e&&t.plugin!=e&&(t={plugin:e,pluginData:{}}):t={plugin:"standard",pluginData:{}},this.model.setField("presentation_params",t)},ReportsDesignerPresent.prototype.trackByFn=function(e,t){return t.id},ReportsDesignerPresent=__decorate([core_1.Component({selector:"reports-designer-present",template:'<div style="height: 100%" class="slds-grid slds-grid--vertical"><div class="slds-border--bottom slds-p-around--xx-small slds-page-header" style="border-radius: 0"><div class="slds-form-element slds-grid slds-grid--vertical-align-center"><label class="slds-form-element__label slds-text-heading--label"><system-label label="LBL_PLUGIN"></system-label></label><div class="slds-form-element__control"><div class="slds-select_container"><select class="slds-select" [(ngModel)]="selectedItemId"><option *ngFor="let item of plugins" [value]="item.id">{{item.name}}</option></select></div></div></div></div><div class="slds-scrollable--y slds-grow"><div *ngFor="let item of plugins; trackBy: trackByFn"><reports-designer-present-item *ngIf="selectedItemId == item.id && !!item.component" [component]="item.component"></reports-designer-present-item></div></div></div>'}),__metadata("design:paramtypes",[services_1.language,services_1.metadata,services_1.model,ReportsDesignerService])],ReportsDesignerPresent)}();exports.ReportsDesignerPresent=ReportsDesignerPresent;var ReportsDesignerPresentItem=function(){function ReportsDesignerPresentItem(e,t){this.language=e,this.metadata=t,this.component=""}var e;return ReportsDesignerPresentItem.prototype.ngAfterViewInit=function(){this.render()},ReportsDesignerPresentItem.prototype.ngOnDestroy=function(){this.componentRef&&this.componentRef.destroy()},ReportsDesignerPresentItem.prototype.render=function(){var t=this;this.metadata.addComponent(this.component,this.itemContainer).subscribe(function(e){return t.componentRef=e})},__decorate([core_1.Input(),__metadata("design:type",String)],ReportsDesignerPresentItem.prototype,"component",void 0),__decorate([core_1.ViewChild("itemContainer",{static:!0,read:core_1.ViewContainerRef}),__metadata("design:type","function"==typeof(e=void 0!==core_1.ViewContainerRef&&core_1.ViewContainerRef)?e:Object)],ReportsDesignerPresentItem.prototype,"itemContainer",void 0),ReportsDesignerPresentItem=__decorate([core_1.Component({selector:"reports-designer-present-item",template:"<div #itemContainer></div>"}),__metadata("design:paramtypes",[services_1.language,services_1.metadata])],ReportsDesignerPresentItem)}();exports.ReportsDesignerPresentItem=ReportsDesignerPresentItem;var ReportsDesignerPresentItemTable=function(){function e(e,t,s){this.language=e,this.model=t,this.reportsDesignerService=s,this.showFunction=!1}return Object.defineProperty(e.prototype,"listFields",{get:function(){return this.reportsDesignerService.listFields},enumerable:!1,configurable:!0}),e.prototype.trackByFn=function(e,t){return t.fieldid},e.prototype.onDrop=function(e){drag_drop_1.moveItemInArray(e.container.data,e.previousIndex,e.currentIndex),e.container.data=e.container.data.map(function(e,t){return e.sortpriority=t,e}),this.model.setField("listfields",e.container.data)},e.prototype.setFieldLink=function(e,t){e.link=t?"yes":"no"},__decorate([core_1.Input(),__metadata("design:type",Boolean)],e.prototype,"showFunction",void 0),e=__decorate([core_1.Component({selector:"reports-designer-present-item-table",template:'<table class="slds-table slds-table--cell-buffer spice-table_header-fixed slds-table--fixed-layout slds-no-row-hover reports-designer-manipulate-table"><thead><tr class="slds-text-title--caps slds-theme--shade"><th class="slds-cell-shrink"></th><th scope="col" class="slds-resizable"><div class="slds-truncate" [title]="language.getLabel(\'LBL_NAME\')"><system-label label="LBL_NAME"></system-label></div></th><th scope="col" class="slds-resizable"><div class="slds-truncate" [title]="language.getLabel(\'LBL_DISPLAY\')"><system-label label="LBL_DISPLAY"></system-label></div></th><th scope="col" class="slds-cell-shrink"><div class="slds-align--absolute-center"><system-utility-icon icon="link" size="x-small" [title]="language.getLabel(\'LBL_LINK\')"></system-utility-icon></div></th><th scope="col" class="slds-resizable"><div class="slds-truncate" [title]="language.getLabel(\'LBL_SORT\')"><system-label label="LBL_SORT"></system-label></div></th><th scope="col" class="slds-resizable"><div class="slds-truncate" [title]="language.getLabel(\'LBL_WIDTH\')"><system-label label="LBL_WIDTH"></system-label></div></th><th scope="col" class="slds-resizable"><div class="slds-truncate" [title]="language.getLabel(\'LBL_OVERRIDE_TYPE\')"><system-label label="LBL_OVERRIDE_TYPE"></system-label></div></th><th *ngIf="showFunction" scope="col" class="slds-resizable"><div class="slds-truncate" [title]="language.getLabel(\'LBL_FUNCTION\')"><system-label label="LBL_FUNCTION"></system-label></div></th><th scope="col" class="slds-resizable"><div class="slds-truncate" [title]="language.getLabel(\'LBL_OVERRIDE_ALIGNMENT\')"><system-label label="LBL_OVERRIDE_ALIGNMENT"></system-label></div></th><th scope="col" class="slds-resizable"><div class="slds-truncate" [title]="language.getLabel(\'LBL_COMPONENT\')"><system-label label="LBL_COMPONENT"></system-label></div></th></tr></thead><tbody *ngIf="listFields" cdkDropList [cdkDropListData]="listFields" (cdkDropListDropped)="onDrop($event)" class="slds-grow slds-scrollable--y"><ng-container *ngFor="let listField of listFields; trackBy: trackByFn"><tr cdkDrag [cdkDragData]="listField" class="slds-border--bottom slds-drag--preview"><td class="slds-p-around--none"><system-utility-icon class="slds-p-horizontal--x-small" cdkDragHandle style="cursor: move" icon="drag_and_drop" size="x-small"></system-utility-icon></td><td><div class="slds-truncate"><system-label [label]="listField.name"></system-label></div></td><td><div class="slds-form-element"><div class="slds-form-element__control"><div class="slds-select_container"><select class="slds-select" [(ngModel)]="listField.display"><option value="yes"><system-label label="LBL_YES"></system-label></option><option value="no"><system-label label="LBL_NO"></system-label></option><option value="hid"><system-label label="LBL_HIDDEN"></system-label></option></select></div></div></div></td><td><div class="slds-cell-shrink"><system-checkbox [ngModel]="listField.link == \'yes\'" (ngModelChange)="setFieldLink(listField, $event)">&nbsp;</system-checkbox></div></td><td><div class="slds-form-element"><div class="slds-form-element__control"><div class="slds-select_container"><select class="slds-select" [(ngModel)]="listField.sort"><option></option><option value="asc"><system-label label="LBL_ASCENDING"></system-label></option><option value="desc"><system-label label="LBL_DESCENDING"></system-label></option><option value="sortable"><system-label label="LBL_SORTABLE"></system-label></option></select></div></div></div></td><td><div class="slds-form-element"><div class="slds-form-element__control"><input type="text" [(ngModel)]="listField.width" class="slds-input"></div></div></td><td><div class="slds-form-element"><div class="slds-form-element__control"><div class="slds-select_container"><select class="slds-select" [(ngModel)]="listField.overridetype"><option value="none"><system-label label="LBL_NONE"></system-label></option><option value="currency"><system-label label="LBL_CURRENCY"></system-label></option><option value="currencyint"><system-label label="LBL_CURRENCY_INTEGER"></system-label></option><option value="percentage"><system-label label="LBL_PERCENTAGE"></system-label></option><option value="number"><system-label label="LBL_NUMBER"></system-label></option><option value="int"><system-label label="LBL_INTEGER"></system-label></option><option value="float"><system-label label="LBL_FLOAT"></system-label></option><option value="date"><system-label label="LBL_DATE"></system-label></option><option value="datetime"><system-label label="LBL_DATE_TIME"></system-label></option><option value="datetutc"><system-label label="LBL_DATE_TO_UTC"></system-label></option><option value="bool"><system-label label="LBL_BOOLEAN"></system-label></option><option value="text"><system-label label="LBL_TEXT"></system-label></option></select></div></div></div></td><td *ngIf="showFunction"><div class="slds-form-element"><div class="slds-form-element__control"><div class="slds-select_container"><select class="slds-select" [(ngModel)]="listField.summaryfunction"><option value="-">-</option><option value="sum"><system-label label="LBL_SUM"></system-label></option><option value="count"><system-label label="LBL_COUNT"></system-label></option><option value="avg"><system-label label="LBL_AVERAGE"></system-label></option><option value="min"><system-label label="LBL_MINIMUM"></system-label></option><option value="max"><system-label label="LBL_MAXIMUM"></system-label></option></select></div></div></div></td><td><div class="slds-form-element"><div class="slds-form-element__control"><div class="slds-select_container"><select class="slds-select" [(ngModel)]="listField.overridealignment"><option value="left"><system-label label="LBL_LEFT_ALIGN"></system-label></option><option value="right"><system-label label="LBL_RIGHT_ALIGN"></system-label></option><option value="center"><system-label label="LBL_CENTER_ALIGN"></system-label></option></select></div></div></div></td><td><div class="slds-form-element"><div class="slds-form-element__control"><input type="text" [(ngModel)]="listField.component" class="slds-input"></div></div></td></tr></ng-container></tbody></table>'}),__metadata("design:paramtypes",[services_1.language,services_1.model,ReportsDesignerService])],e)}();exports.ReportsDesignerPresentItemTable=ReportsDesignerPresentItemTable;var ReportsDesignerPresentItemStandard=function(){function ReportsDesignerPresentItemStandard(e,t,s){this.language=e,this.model=t,this.reportsDesignerService=s,this.propertiesFieldName="standardViewProperties"}return Object.defineProperty(ReportsDesignerPresentItemStandard.prototype,"listFields",{get:function(){return this.reportsDesignerService.listFields},enumerable:!1,configurable:!0}),Object.defineProperty(ReportsDesignerPresentItemStandard.prototype,"properties",{get:function(){return this.model.getField("presentation_params").pluginData[this.propertiesFieldName]},enumerable:!1,configurable:!0}),ReportsDesignerPresentItemStandard.prototype.ngOnInit=function(){this.initializePluginData({processCount:"Synchronous",listEntries:25})},ReportsDesignerPresentItemStandard.prototype.initializePluginData=function(e){var t=this.model.getField("presentation_params");t.pluginData[this.propertiesFieldName]||(t.pluginData[this.propertiesFieldName]=e,this.model.setField("presentation_params",t))},ReportsDesignerPresentItemStandard.prototype.trackByFn=function(e,t){return t.fieldid},ReportsDesignerPresentItemStandard=__decorate([core_1.Component({selector:"reports-designer-present-item-standard",template:'<div class="slds-grid slds-grid--vertical" system-to-bottom-noscroll><div class="slds-border--bottom slds-p-around--small slds-grid"><div class="slds-form-element slds-grid slds-grid--vertical-align-center"><label class="slds-form-element__label"><system-label label="LBL_PROCESS_COUNT"></system-label></label><div class="slds-form-element__control"><div class="slds-select_container"><select class="slds-select" [(ngModel)]="properties.processCount"><option value="Synchronous"><system-label label="LBL_SYNCHRONOUS"></system-label></option><option value="Asynchronous"><system-label label="LBL_ASYNCHRONOUS"></system-label></option><option value="None"><system-label label="LBL_NONE"></system-label></option></select></div></div></div><div class="slds-form-element slds-grid slds-grid--vertical-align-center slds-m-left--x-small"><label class="slds-form-element__label"><system-label label="LBL_RECORDS_PER_PAGE"></system-label></label><div class="slds-form-element__control"><div class="slds-form-element"><div class="slds-form-element__control"><input type="text" [(ngModel)]="properties.listEntries" class="slds-input"></div></div></div></div></div><div class="slds-grow slds-scrollable--y"><reports-designer-present-item-table></reports-designer-present-item-table></div></div>'}),__metadata("design:paramtypes",[services_1.language,services_1.model,ReportsDesignerService])],ReportsDesignerPresentItemStandard)}();exports.ReportsDesignerPresentItemStandard=ReportsDesignerPresentItemStandard;var ReportsDesignerVisualize=function(){function ReportsDesignerVisualize(e,t,s,l){this.language=e,this.metadata=t,this.reportsDesignerService=s,this.model=l,this.plugins=[],this.radioButtonItems=["1","2","3","4","5"],this.layoutOptions=[{value:"-",itemsCount:0},{value:"1x1",itemsCount:1},{value:"1x2",itemsCount:2},{value:"1x3",itemsCount:3},{value:"1x4",itemsCount:4},{value:"2x2",itemsCount:4},{value:"2x2wide",itemsCount:4},{value:"1x3x2",itemsCount:3},{value:"1x2x1",itemsCount:2},{value:"1+1+2",itemsCount:4},{value:"1x2x2",itemsCount:3},{value:"2x1x4",itemsCount:5}]}return Object.defineProperty(ReportsDesignerVisualize.prototype,"selectedLayout",{get:function(){return this._selectedLayout},set:function(e){this.model.getField("visualization_params").layout=e.value,this._selectedLayout=e,this.activeLayoutItem=0<this._selectedLayout.itemsCount?"1":void 0},enumerable:!1,configurable:!0}),Object.defineProperty(ReportsDesignerVisualize.prototype,"visualizationParams",{get:function(){var e=this.model.getField("visualization_params");return e||{}},enumerable:!1,configurable:!0}),Object.defineProperty(ReportsDesignerVisualize.prototype,"activeLayoutItem",{get:function(){return this.reportsDesignerService.visualizeActiveLayoutItem},set:function(e){this.reportsDesignerService.visualizeActiveLayoutItem=e,this.visualizationParams[e]||(this.visualizationParams[e]={})},enumerable:!1,configurable:!0}),Object.defineProperty(ReportsDesignerVisualize.prototype,"selectedPluginId",{get:function(){var e;return null===(e=this.visualizationParams[this.activeLayoutItem])||void 0===e?void 0:e.plugin},set:function(e){this.visualizationParams[this.activeLayoutItem].plugin=e},enumerable:!1,configurable:!0}),Object.defineProperty(ReportsDesignerVisualize.prototype,"chartHeight",{get:function(){return this.model.getField("visualization_params").chartheight},set:function(e){this.model.getField("visualization_params").chartheight=e},enumerable:!1,configurable:!0}),ReportsDesignerVisualize.prototype.ngOnInit=function(){this.initializeVisualizationParams(),this.reportsDesignerService.loadVisualizationColors(),this.plugins=this.reportsDesignerService.loadPlugins("ReportsDesignerVisualize")},ReportsDesignerVisualize.prototype.trackByFn=function(e,t){return t.id},ReportsDesignerVisualize.prototype.initializeVisualizationParams=function(){var t=this.model.getField("visualization_params");(t=t||{}).layout||(t.layout="-"),t.chartheight||(t.chartheight=400),this._selectedLayout=this.layoutOptions.find(function(e){return e.value==t.layout}),this.activeLayoutItem="1",this.model.setField("visualization_params",t)},ReportsDesignerVisualize=__decorate([core_1.Component({selector:"reports-designer-visualize",template:'<div style="height: 100%" class="slds-grid slds-grid--vertical"><div class="slds-border--bottom slds-p-around--x-small slds-page-header slds-grid" style="border-radius: 0"><div class="slds-form-element slds-grid slds-grid--vertical-align-center"><label class="slds-form-element__label slds-text-heading--label"><system-label label="LBL_LAYOUT"></system-label></label><div class="slds-form-element__control"><div class="slds-select_container"><select class="slds-select" [(ngModel)]="selectedLayout"><option *ngFor="let layoutOption of layoutOptions" [ngValue]="layoutOption">{{layoutOption.value}}</option></select></div></div></div><div class="slds-form-element slds-grid slds-grid--vertical-align-center slds-m-left--x-small"><label class="slds-form-element__label slds-text-heading--label"><system-label label="LBL_HEIGHT"></system-label></label><div class="slds-form-element__control"><input type="text" size="5" [(ngModel)]="chartHeight" class="slds-input"></div></div><div class="slds-form-element slds-grid slds-grid--vertical-align-center slds-m-left--x-small"><label class="slds-form-element__label slds-text-heading--label"><system-label label="LBL_ITEMS"></system-label></label><div class="slds-form-element__control"><div class="slds-radio_button-group"><span *ngFor="let radioButtonItem of radioButtonItems" class="slds-button slds-radio_button"><input type="radio" name="layoutActiveItem" [value]="radioButtonItem" [(ngModel)]="activeLayoutItem" [disabled]="selectedLayout.itemsCount == 0 || radioButtonItem > selectedLayout.itemsCount" [id]="\'ReportsDesignerVisualizationlayoutActiveItem\' + radioButtonItem"> <label class="slds-radio_button__label" [for]="\'ReportsDesignerVisualizationlayoutActiveItem\' + radioButtonItem"><span class="slds-radio_faux">{{radioButtonItem}}</span></label></span></div></div></div><div class="slds-form-element slds-grid slds-grid--vertical-align-center slds-m-left--x-small"><label class="slds-form-element__label slds-text-heading--label"><system-label label="LBL_PLUGIN"></system-label> ({{activeLayoutItem}})</label><div class="slds-form-element__control"><div class="slds-select_container"><select class="slds-select" [(ngModel)]="selectedPluginId" [disabled]="selectedLayout.itemsCount == 0"><option *ngFor="let item of plugins" [value]="item.id">{{item.name}}</option></select></div></div></div></div><div class="slds-scrollable--y slds-grow" style="min-height: 0"><div *ngFor="let item of plugins; trackBy: trackByFn"><reports-designer-visualize-item *ngIf="selectedLayout.itemsCount > 0 && selectedPluginId == item.id && !!item.component" [component]="item.component"></reports-designer-visualize-item></div><div *ngIf="selectedLayout.itemsCount == 0 || !selectedPluginId" class="slds-align--absolute-center" style="height: 100%"><system-label label="LBL_MAKE_SELECTION"></system-label></div></div></div>'}),__metadata("design:paramtypes",[services_1.language,services_1.metadata,ReportsDesignerService,services_1.model])],ReportsDesignerVisualize)}();exports.ReportsDesignerVisualize=ReportsDesignerVisualize;var ReportsDesignerVisualizeItem=function(){function ReportsDesignerVisualizeItem(e,t){this.language=e,this.metadata=t,this.component=""}var e;return ReportsDesignerVisualizeItem.prototype.ngAfterViewInit=function(){this.render()},ReportsDesignerVisualizeItem.prototype.ngOnDestroy=function(){this.componentRef&&this.componentRef.destroy()},ReportsDesignerVisualizeItem.prototype.render=function(){var t=this;this.metadata.addComponent(this.component,this.itemContainer).subscribe(function(e){return t.componentRef=e})},__decorate([core_1.Input(),__metadata("design:type",String)],ReportsDesignerVisualizeItem.prototype,"component",void 0),__decorate([core_1.ViewChild("itemContainer",{static:!0,read:core_1.ViewContainerRef}),__metadata("design:type","function"==typeof(e=void 0!==core_1.ViewContainerRef&&core_1.ViewContainerRef)?e:Object)],ReportsDesignerVisualizeItem.prototype,"itemContainer",void 0),ReportsDesignerVisualizeItem=__decorate([core_1.Component({selector:"reports-designer-visualize-item",template:"<div #itemContainer></div>"}),__metadata("design:paramtypes",[services_1.language,services_1.metadata])],ReportsDesignerVisualizeItem)}();exports.ReportsDesignerVisualizeItem=ReportsDesignerVisualizeItem;var ReportsDesignerVisualizeItemChartTypePanel=function(){function e(e,t){this.language=e,this.reportsDesignerService=t,this.typeOptions=[],this.dimensionsOptions=[],this.properties={}}return Object.defineProperty(e.prototype,"typeOptionsFiltered",{get:function(){var t=this;return this.typeOptions.filter(function(e){return-1<e.dimensions.indexOf(t.properties.dims)})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"themeColors",{get:function(){var t=this,e=this.reportsDesignerService.visualizeColorTheme.find(function(e){return e.id==t.properties.colors});return e?e.colors:[]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"colorOptions",{get:function(){return this.reportsDesignerService.visualizeColorTheme},enumerable:!1,configurable:!0}),e.prototype.trackByFnValue=function(e,t){return t.value},e.prototype.trackByFnIndex=function(e,t){return e},__decorate([core_1.Input(),__metadata("design:type",Array)],e.prototype,"typeOptions",void 0),__decorate([core_1.Input(),__metadata("design:type",Array)],e.prototype,"dimensionsOptions",void 0),__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"properties",void 0),e=__decorate([core_1.Component({selector:"reports-designer-visualize-item-chart-type-panel",template:'<system-collapsable-tab title="LBL_CHART_TYPE" [collapsible]="false"><div class="slds-p-around--x-small"><div class="slds-grid"><div class="slds-form-element slds-grid slds-grid--vertical-align-center slds-size--1-of-2 slds-p-horizontal--x-small"><label class="slds-form-element__label slds-text-heading--label"><system-label label="LBL_DIMENSIONS"></system-label></label><div class="slds-form-element__control slds-grow"><div class="slds-select_container"><select class="slds-select" [(ngModel)]="properties.dims"><option *ngFor="let dimensionsOption of dimensionsOptions; trackBy: trackByFnValue" [value]="dimensionsOption.value">{{dimensionsOption.name}}</option></select></div></div></div><div class="slds-form-element slds-grid slds-grid--vertical-align-center slds-size--1-of-2 slds-p-horizontal--x-small"><label class="slds-form-element__label slds-text-heading--label"><system-label label="LBL_TYPE"></system-label></label><div class="slds-form-element__control slds-grow"><div class="slds-select_container"><select class="slds-select" [(ngModel)]="properties.type"><option *ngFor="let typeOption of typeOptionsFiltered; trackBy: trackByFnValue" [value]="typeOption.value">{{typeOption.name}}</option></select></div></div></div></div><div class="slds-grid slds-m-top--x-small"><div class="slds-form-element slds-grid slds-grid--vertical-align-center slds-size--1-of-2 slds-p-horizontal--x-small"><label class="slds-form-element__label slds-text-heading--label"><system-label label="LBL_COLORS"></system-label></label><div class="slds-form-element__control slds-grow"><div class="slds-select_container"><select class="slds-select" [(ngModel)]="properties.colors"><option *ngFor="let colorOption of colorOptions; trackBy: trackByFnIndex" [value]="colorOption.id">{{colorOption.name}}</option></select></div></div></div><div class="slds-grid slds-grid--vertical-align-center slds-size--1-of-2 slds-p-horizontal--x-small"><label class="slds-form-element__label slds-text-heading--label"><system-label label="LBL_PREVIEW"></system-label></label><div class="slds-color-picker slds-color-picker_swatches-only slds-grid slds-grid--vertical-align-center slds-grow"><div class="slds-color-picker__selector"><ul class="slds-color-picker__swatches" role="menu"><li *ngFor="let color of themeColors; trackBy: trackByFnIndex" class="slds-color-picker__swatch" role="presentation"><span class="slds-color-picker__swatch-trigger slds-is-selected" role="menuitem"><span class="slds-swatch" [style.background-color]="color"><span class="slds-assistive-text">{{color}}</span></span></span></li></ul></div></div></div></div></div></system-collapsable-tab>'}),__metadata("design:paramtypes",[services_1.language,ReportsDesignerService])],e)}();exports.ReportsDesignerVisualizeItemChartTypePanel=ReportsDesignerVisualizeItemChartTypePanel;var ReportsDesignerVisualizeItemChartDataPanel=function(){function e(e,t,s){this.language=e,this.model=t,this.reportsDesignerService=s,this.properties={}}return Object.defineProperty(e.prototype,"listFields",{get:function(){return this.model.getField("listfields")},enumerable:!1,configurable:!0}),e.prototype.ngOnChanges=function(){this.initializeDataSeries()},e.prototype.onDrop=function(e){this.properties.dataseries.push({id:this.reportsDesignerService.generateGuid(),fieldid:e.item.data.fieldid,name:e.item.data.name,chartfunction:"-",meaning:"value",axis:"",renderer:"",color:""})},e.prototype.deleteSeries=function(t){this.properties.dataseries=this.properties.dataseries.filter(function(e){return e.fieldid!=t})},e.prototype.trackByFn=function(e,t){return t.fieldid},e.prototype.initializeDataSeries=function(){this.properties.dataseries&&0<this.properties.dataseries.length||("1"==this.properties.dims[2]?this.properties.dataseries=[{fieldid:"",name:"",chartfunction:"-",meaning:"value",axis:"P",renderer:""}]:this.properties.dataseries=[])},__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"properties",void 0),e=__decorate([core_1.Component({selector:"reports-designer-visualize-item-chart-data-panel",template:'<system-collapsable-tab title="LBL_CHART_DATA" [collapsible]="false" class="spice-collapsible-tab-grow"><reports-designer-visualize-item-chart-data-panel-single-series *ngIf="properties.dims.indexOf(\'N\') == -1; else seriesValuesContainer" [properties]="properties"></reports-designer-visualize-item-chart-data-panel-single-series><ng-template #seriesValuesContainer><reports-designer-visualize-item-chart-data-panel-multiple-series [properties]="properties"></reports-designer-visualize-item-chart-data-panel-multiple-series></ng-template></system-collapsable-tab>'}),__metadata("design:paramtypes",[services_1.language,services_1.model,ReportsDesignerService])],e)}(),ReportsDesignerVisualizeItemChartDataPanelSingleSeries=function(i){function e(e,t,s){var l=i.call(this,e,t,s)||this;return l.language=e,l.model=t,l.reportsDesignerService=s,l}return __extends(e,i),e=__decorate([core_1.Component({selector:"reports-designer-visualize-item-chart-data-panel-single-series",template:'<div class="slds-p-around--x-small"><div class="slds-grid"><div class="slds-form-element slds-grid slds-grid--vertical-align-center slds-size--1-of-2 slds-p-horizontal--x-small"><label class="slds-form-element__label slds-text-heading--label"><system-label label="LBL_DIMENSION"></system-label> 1</label><div class="slds-form-element__control slds-grow"><div class="slds-select_container"><select class="slds-select" [(ngModel)]="properties.dimensions.dimension1"><option *ngFor="let listField of listFields; trackBy: trackByFn" [value]="listField.fieldid"><system-label [label]="listField.name"></system-label></option></select></div></div></div><div *ngIf="properties.dims[2] == \'1\'" class="slds-form-element slds-grid slds-grid--vertical-align-center slds-size--1-of-2 slds-p-horizontal--x-small"><label class="slds-form-element__label slds-text-heading--label"><system-label label="LBL_DATA_SERIES"></system-label></label><div class="slds-form-element__control slds-grow"><div class="slds-select_container"><select class="slds-select" [(ngModel)]="properties.dataseries[0].fieldid"><option *ngFor="let listField of listFields; trackBy: trackByFn" [value]="listField.fieldid"><system-label [label]="listField.name"></system-label></option></select></div></div></div></div><div class="slds-grid slds-m-top--x-small"><div class="slds-size--1-of-2 slds-p-horizontal--x-small"><div *ngIf="properties.dims == \'221\' || properties.dims == \'220\' || properties.dims == \'331\'" class="slds-form-element slds-grid slds-grid--vertical-align-center"><label class="slds-form-element__label slds-text-heading--label"><system-label label="LBL_DIMENSION"></system-label> 2</label><div class="slds-form-element__control slds-grow"><div class="slds-select_container"><select class="slds-select" [(ngModel)]="properties.dimensions.dimension2"><option *ngFor="let listField of listFields; trackBy: trackByFn" [value]="listField.fieldid"><system-label [label]="listField.name"></system-label></option></select></div></div></div></div><div *ngIf="properties.dims[2] == \'1\'" class="slds-form-element slds-grid slds-grid--vertical-align-center slds-size--1-of-2 slds-p-horizontal--x-small"><label class="slds-form-element__label slds-text-heading--label"><system-label label="LBL_FUNCTION"></system-label></label><div class="slds-form-element__control slds-grow"><div class="slds-select_container"><select class="slds-select" [(ngModel)]="properties.dataseries[0].chartfunction"><option value="-">-</option><option value="SUM"><system-label label="LBL_SUM"></system-label></option><option value="AVG"><system-label label="LBL_AVERAGE"></system-label></option><option value="CUMSUM"><system-label label="LBL_SUM_CUMULATED"></system-label></option><option value="COUNT"><system-label label="LBL_COUNT"></system-label></option><option value="MAX"><system-label label="LBL_MAXIMUM"></system-label></option><option value="MIN"><system-label label="LBL_MINIMUM"></system-label></option></select></div></div></div></div><div class="slds-grid slds-m-top--x-small"><div *ngIf="properties.dims == \'331\'" class="slds-form-element slds-grid slds-grid--vertical-align-center slds-size--1-of-2 slds-p-horizontal--x-small"><label class="slds-form-element__label slds-text-heading--label"><system-label label="LBL_DIMENSION"></system-label> 3</label><div class="slds-form-element__control slds-grow"><div class="slds-select_container"><select class="slds-select" [(ngModel)]="properties.dimensions.dimension3"><option *ngFor="let listField of listFields; trackBy: trackByFn" [value]="listField.fieldid"><system-label [label]="listField.name"></system-label></option></select></div></div></div></div></div>'}),__metadata("design:paramtypes",[services_1.language,services_1.model,ReportsDesignerService])],e)}(exports.ReportsDesignerVisualizeItemChartDataPanel=ReportsDesignerVisualizeItemChartDataPanel);exports.ReportsDesignerVisualizeItemChartDataPanelSingleSeries=ReportsDesignerVisualizeItemChartDataPanelSingleSeries;var ReportsDesignerVisualizeItemChartDataPanelMultipleSeries=function(o){function e(e,t,s,l){var i=o.call(this,e,t,l)||this;return i.language=e,i.model=t,i.renderer=s,i.reportsDesignerService=l,i}var t;return __extends(e,o),Object.defineProperty(e.prototype,"availableListFields",{get:function(){var e=this;return this.properties.dataseries&&0!=this.properties.dataseries.length?this.listFields.filter(function(t){return!e.properties.dataseries.some(function(e){return e.fieldid===t.fieldid})}):this.listFields},enumerable:!1,configurable:!0}),e=__decorate([core_1.Component({selector:"reports-designer-visualize-item-chart-data-panel-multiple-series",template:'<div class="slds-grid slds-grid--vertical slds-p-around--xxx-small" style="height: 100%"><div *ngIf="properties.dims == \'21N\'" class="slds-form-element slds-grid slds-grid--vertical-align-center slds-p-vertical--x-small slds-p-left--medium slds-p-right--x-small slds-size--1-of-2"><label class="slds-form-element__label slds-text-heading--label"><system-label label="LBL_DIMENSION"></system-label> 1</label><div class="slds-form-element__control slds-grow"><div class="slds-select_container"><select class="slds-select" [(ngModel)]="properties.dimensions.dimension1"><option *ngFor="let listField of listFields; trackBy: trackByFn" [value]="listField.fieldid"><system-label [label]="listField.name"></system-label></option></select></div></div></div><div cdkDropListGroup class="slds-border--bottom slds-border--left slds-border--right slds-border--top slds-grid slds-grow" style="min-height: 100px"><div class="slds-size--1-of-4 slds-scrollable--y slds-border--right" style="height: 100%"><table class="slds-table slds-table--cell-buffer spice-table_header-fixed slds-table--fixed-layout slds-no-row-hover"><thead><tr class="slds-text-title--caps slds-theme--shade"><th scope="col" class="slds-cell-shrink"></th><th scope="col"><div class="slds-truncate" [title]="language.getLabel(\'LBL_FIELDS\')"><system-label label="LBL_FIELDS"></system-label></div></th></tr></thead><tbody cdkDropList cdkDropListSortingDisabled [cdkDropListData]="listFields"><tr *ngFor="let listField of availableListFields; trackBy: trackByFn" cdkDrag [cdkDragData]="listField" class="slds-border--bottom slds-drag--preview" style="height: 41px"><td class="slds-p-around--none"><system-utility-icon class="slds-p-horizontal--x-small" cdkDragHandle style="cursor: move" icon="drag_and_drop" size="x-small"></system-utility-icon></td><td><div [title]="listField.name" class="slds-truncate"><system-label [label]="listField.name"></system-label></div></td></tr></tbody></table></div><div cdkDropList [cdkDropListData]="properties.dataseries" (cdkDropListDropped)="onDrop($event)" class="slds-scrollable--y slds-size--3-of-4" style="height: inherit"><table class="slds-table slds-table--cell-buffer spice-table_header-fixed slds-table--fixed-layout slds-no-row-hover"><thead><tr class="slds-text-title--caps slds-theme--shade"><th scope="col"><div class="slds-truncate" [title]="language.getLabel(\'LBL_NAME\')"><system-label label="LBL_NAME"></system-label></div></th><th scope="col"><div class="slds-truncate" [title]="language.getLabel(\'LBL_FUNCTION\')"><system-label label="LBL_FUNCTION"></system-label></div></th><th scope="col"><div class="slds-truncate" [title]="language.getLabel(\'LBL_AXIS\')"><system-label label="LBL_AXIS"></system-label></div></th><th scope="col"><div class="slds-truncate" [title]="language.getLabel(\'LBL_RENDER_AS\')"><system-label label="LBL_RENDER_AS"></system-label></div></th><th scope="col"><div class="slds-truncate" [title]="language.getLabel(\'LBL_COLOR\')"><system-label label="LBL_COLOR"></system-label></div></th><th scope="col" class="slds-cell-shrink"></th></tr></thead><tbody><tr *ngFor="let dataSeriesItem of properties.dataseries; trackBy: trackByFn" cdkDrag cdkDragDisabled class="slds-border--bottom"><td><div [title]="dataSeriesItem.name" class="slds-truncate"><system-label [label]="dataSeriesItem.name"></system-label></div></td><td><div class="slds-form-element"><div class="slds-form-element__control"><div class="slds-select_container"><select class="slds-select" [(ngModel)]="dataSeriesItem.chartfunction"><option value="-">-</option><option value="SUM"><system-label label="LBL_SUM"></system-label></option><option value="AVG"><system-label label="LBL_AVERAGE"></system-label></option><option value="CUMSUM"><system-label label="LBL_SUM_CUMULATED"></system-label></option><option value="COUNT"><system-label label="LBL_COUNT"></system-label></option><option value="MAX"><system-label label="LBL_MAXIMUM"></system-label></option><option value="MIN"><system-label label="LBL_MINIMUM"></system-label></option></select></div></div></div></td><td><div class="slds-form-element"><div class="slds-form-element__control"><div class="slds-select_container"><select class="slds-select" [(ngModel)]="dataSeriesItem.axis"><option value="-">-</option><option value="P"><system-label label="LBL_PRIMARY"></system-label></option><option value="S"><system-label label="LBL_SECONDARY"></system-label></option></select></div></div></div></td><td><div class="slds-form-element"><div class="slds-form-element__control"><div class="slds-select_container"><select class="slds-select" [(ngModel)]="dataSeriesItem.renderer"><option value="-">-</option><option value="bars"><system-label label="LBL_BAR"></system-label></option><option value="line"><system-label label="LBL_LINE"></system-label></option><option value="area"><system-label label="LBL_AREA"></system-label></option></select></div></div></div></td><td><div class="slds-form-element"><div class="slds-form-element__control"><input type="text" [(ngModel)]="dataSeriesItem.color" class="slds-input"></div></div></td><td><button class="slds-button slds-button--icon" (click)="deleteSeries(dataSeriesItem.fieldid)"><system-button-icon icon="delete"></system-button-icon></button></td></tr><tr *ngIf="properties.dataseries?.length == 0"><td colspan="6" class="slds-text-align_center" style="padding: 1rem;"><system-label label="MSG_DROP_FIELD_HERE"></system-label></td></tr></tbody></table></div></div></div>'}),__metadata("design:paramtypes",[services_1.language,services_1.model,"function"==typeof(t=void 0!==core_1.Renderer2&&core_1.Renderer2)?t:Object,ReportsDesignerService])],e)}(ReportsDesignerVisualizeItemChartDataPanel);exports.ReportsDesignerVisualizeItemChartDataPanelMultipleSeries=ReportsDesignerVisualizeItemChartDataPanelMultipleSeries;var ReportsDesignerVisualizeItemGoogleCharts=function(){function ReportsDesignerVisualizeItemGoogleCharts(e,t,s){this.language=e,this.model=t,this.reportsDesignerService=s,this.contextOptions=[],this.dimensionsOptions=[{value:"111",name:"1 "+this.language.getLabel("LBL_DIMENSIONAL")+" ("+this.language.getLabel("LBL_SERIES")+")"},{value:"10N",name:"1 "+this.language.getLabel("LBL_DIMENSIONAL")+" ("+this.language.getLabel("LBL_VALUES")+")"},{value:"221",name:"2 "+this.language.getLabel("LBL_DIMENSIONAL")+" ("+this.language.getLabel("LBL_SERIES")+")"},{value:"21N",name:"2 "+this.language.getLabel("LBL_DIMENSIONAL")+" ("+this.language.getLabel("LBL_VALUES")+")"},{value:"220",name:"2 "+this.language.getLabel("LBL_DIMENSIONAL")+" ("+this.language.getLabel("LBL_NO_VALUES")+")"},{value:"331",name:"3 "+this.language.getLabel("LBL_DIMENSIONAL")+" ("+this.language.getLabel("LBL_SERIES")+")"}],this.typeOptions=[{dimensions:["111","10N","221","21N"],value:"Area",name:this.language.getLabel("LBL_AREA_CHART")},{dimensions:["111","10N","221","21N"],value:"SteppedArea",name:this.language.getLabel("LBL_STEPPED_AREA_CHART")},{dimensions:["221","331"],value:"Bubble",name:this.language.getLabel("LBL_BUBBLE_CHART")},{dimensions:["221"],value:"Sankey",name:this.language.getLabel("LBL_SANKEY_CHART")},{dimensions:["111","10N","221","21N"],value:"Bar",name:this.language.getLabel("LBL_BAR_CHART")},{dimensions:["111","10N","221","21N"],value:"Column",name:this.language.getLabel("LBL_COLUMN_CHART")},{dimensions:["111","10N","221","21N"],value:"Line",name:this.language.getLabel("LBL_LINE_CHART")},{dimensions:["220"],value:"Scatter",name:this.language.getLabel("LBL_SCATTER_CHART")},{dimensions:["111","10N"],value:"Pie",name:this.language.getLabel("LBL_PIE_CHART")},{dimensions:["111","10N"],value:"Donut",name:this.language.getLabel("LBL_DONUT_CHART")},{dimensions:["10N","21N"],value:"Combo",name:this.language.getLabel("LBL_COMBO_CHART")}]}return Object.defineProperty(ReportsDesignerVisualizeItemGoogleCharts.prototype,"properties",{get:function(){return this.model.getField("visualization_params")[this.reportsDesignerService.visualizeActiveLayoutItem]},enumerable:!1,configurable:!0}),ReportsDesignerVisualizeItemGoogleCharts.prototype.ngOnInit=function(){this.initializeProperties()},ReportsDesignerVisualizeItemGoogleCharts.prototype.initializeProperties=function(){this.contextOptions=this.model.getField("whereconditions").filter(function(e){return!!e.context}).map(function(e){return e.context}),this.properties.googlecharts&&this.properties.googlecharts.uid||(this.properties.googlecharts={uid:this.reportsDesignerService.generateGuid(),title:"",dims:"111",type:"Area",colors:"default",dataseries:[],options:{},context:"",legend:null,dimensions:{dimension1:null,dimension2:null,dimension3:null}})},ReportsDesignerVisualizeItemGoogleCharts.prototype.setPropertiesOption=function(e,t){this.properties.googlecharts.options[e]=t?"on":"off"},ReportsDesignerVisualizeItemGoogleCharts=__decorate([core_1.Component({selector:"reports-designer-visualize-item-google-charts",template:'<div class="slds-p-horizontal--xx-small slds-grid slds-grid--vertical" system-to-bottom-noscroll><reports-designer-visualize-item-chart-type-panel [properties]="properties.googlecharts" [typeOptions]="typeOptions" [dimensionsOptions]="dimensionsOptions"></reports-designer-visualize-item-chart-type-panel><div class="slds-grow" style="min-height: 0"><reports-designer-visualize-item-chart-data-panel [properties]="properties.googlecharts" style="display: block; height: 50%"></reports-designer-visualize-item-chart-data-panel><div class="slds-p-top--x-small" style="height: 50%"><system-collapsable-tab [collapsible]="false" [title]="\'LBL_CHART_OPTIONS\'" class="spice-collapsible-tab-grow"><div class="slds-p-around--x-small slds-height_full"><div class="slds-grid"><div class="slds-size--1-of-2 slds-form-element slds-grid slds-grid--vertical-align-center slds-p-horizontal--x-small slds-size--1-of-1"><label class="slds-form-element__label"><system-label label="LBL_TITLE"></system-label></label><div class="slds-form-element__control slds-grow"><input type="text" size="5" [(ngModel)]="properties.googlecharts.title" class="slds-input"></div></div><div class="slds-size--1-of-2 slds-form-element slds-grid slds-grid--vertical-align-center slds-p-horizontal--x-small slds-size--1-of-1"><label class="slds-form-element__label"><system-label label="LBL_CONTEXT"></system-label></label><div class="slds-form-element__control slds-grow"><div class="slds-select_container"><select class="slds-select" [(ngModel)]="properties.googlecharts.context"><option></option><option *ngFor="let contextOption of contextOptions" [value]="contextOption">{{contextOption}}</option></select></div></div></div></div><div class="slds-size--1-of-1 slds-p-top--x-small slds-m-top--x-small slds-has-divider--top slds-has-divider--bottom slds-grid slds-wrap"><system-checkbox [ngModel]="properties.googlecharts.options.legend == \'on\'" (ngModelChange)="setPropertiesOption(\'legend\', $event)" class="slds-size--1-of-4 slds-p-horizontal--x-small"><system-label label="LBL_DISPLAY_LEGEND"></system-label></system-checkbox><system-checkbox [ngModel]="properties.googlecharts.options.emptyvalues == \'on\'" (ngModelChange)="setPropertiesOption(\'emptyvalues\', $event)" class="slds-size--1-of-4 slds-p-horizontal--x-small"><system-label label="LBL_SHOW_EMPTY_VALUES"></system-label></system-checkbox><system-checkbox [ngModel]="properties.googlecharts.options.novlabels == \'on\'" (ngModelChange)="setPropertiesOption(\'novlabels\', $event)" class="slds-size--1-of-4 slds-p-horizontal--x-small"><system-label label="LBL_HIDE_V_AXIS_LABELS"></system-label></system-checkbox><system-checkbox [ngModel]="properties.googlecharts.options.nohlabels == \'on\'" (ngModelChange)="setPropertiesOption(\'nohlabels\', $event)" class="slds-size--1-of-4 slds-p-horizontal--x-small"><system-label label="LBL_HIDE_H_AXIS_LABELS"></system-label></system-checkbox><system-checkbox [ngModel]="properties.googlecharts.options.logv == \'on\'" (ngModelChange)="setPropertiesOption(\'logv\', $event)" class="slds-size--1-of-4 slds-p-horizontal--x-small"><system-label label="LBL_LOGARITHMIC_V_SCALE"></system-label></system-checkbox><system-checkbox [ngModel]="properties.googlecharts.options.logh == \'on\'" (ngModelChange)="setPropertiesOption(\'logh\', $event)" class="slds-size--1-of-4 slds-p-horizontal--x-small"><system-label label="LBL_LOGARITHMIC_H_SCALE"></system-label></system-checkbox><system-checkbox [ngModel]="properties.googlecharts.options.stacked == \'on\'" (ngModelChange)="setPropertiesOption(\'stacked\', $event)" class="slds-size--1-of-4 slds-p-horizontal--x-small"><system-label label="LBL_STACKED_SERIES"></system-label></system-checkbox><system-checkbox [ngModel]="properties.googlecharts.options.is3D == \'on\'" (ngModelChange)="setPropertiesOption(\'is3D\', $event)" class="slds-size--1-of-4 slds-p-horizontal--x-small">3 <system-label label="LBL_DIMENSIONAL"></system-label></system-checkbox><system-checkbox [ngModel]="properties.googlecharts.options.reverse == \'on\'" (ngModelChange)="setPropertiesOption(\'reverse\', $event)" class="slds-size--1-of-4 slds-p-horizontal--x-small"><system-label label="LBL_REVERSE_SERIES"></system-label></system-checkbox><system-checkbox [ngModel]="properties.googlecharts.options.curvetypefunction == \'on\'" (ngModelChange)="setPropertiesOption(\'curvetypefunction\', $event)" class="slds-size--1-of-4 slds-p-horizontal--x-small"><system-label label="LBL_SMOOTHED_LINE"></system-label></system-checkbox><system-checkbox [ngModel]="properties.googlecharts.options.points == \'on\'" (ngModelChange)="setPropertiesOption(\'points\', $event)" class="slds-size--1-of-4 slds-p-horizontal--x-small"><system-label label="LBL_SHOW_POINTS"></system-label></system-checkbox><system-checkbox [ngModel]="properties.googlecharts.options.material == \'on\'" (ngModelChange)="setPropertiesOption(\'material\', $event)" class="slds-size--1-of-4 slds-p-horizontal--x-small"><system-label label="LBL_MATERIAL_DESIGN"></system-label></system-checkbox></div></div></system-collapsable-tab></div></div></div>'}),__metadata("design:paramtypes",[services_1.language,services_1.model,ReportsDesignerService])],ReportsDesignerVisualizeItemGoogleCharts)}();exports.ReportsDesignerVisualizeItemGoogleCharts=ReportsDesignerVisualizeItemGoogleCharts;var ReportsDesignerIntegrate=function(){function ReportsDesignerIntegrate(e,t,s,l){this.language=e,this.metadata=t,this.model=s,this.reportsDesignerService=l,this.plugins=[],this.selectedItemId=""}return Object.defineProperty(ReportsDesignerIntegrate.prototype,"activePlugins",{get:function(){return this.model.getField("integration_params").activePlugins},enumerable:!1,configurable:!0}),ReportsDesignerIntegrate.prototype.ngOnInit=function(){this.plugins=this.reportsDesignerService.loadPlugins("ReportsDesignerIntegrate"),this.initializeIntegrationParams()},ReportsDesignerIntegrate.prototype.initializeIntegrationParams=function(e){var t=this.model.getField("integration_params");(t=t||{}).activePlugins||(t.activePlugins={},this.model.setField("integration_params",t))},ReportsDesignerIntegrate.prototype.setSelectedItemId=function(e){this.selectedItemId=e},ReportsDesignerIntegrate.prototype.trackByFn=function(e,t){return t.id},ReportsDesignerIntegrate.prototype.setActivePlugins=function(e,t){var s=this.model.getField("integration_params");s.activePlugins[e]=t?1:0,this.model.setField("integration_params",s)},ReportsDesignerIntegrate=__decorate([core_1.Component({selector:"reports-designer-integrate",template:'<div class="slds-grid" style="height: 100%"><div class="slds-size--1-of-3 slds-border--right slds-scrollable--y" style="height: 100%"><div *ngFor="let plugin of plugins" (click)="setSelectedItemId(plugin.id)" [class.slds-theme--shade]="plugin.id == selectedItemId" class="slds-grid slds-p-around--x-small slds-size--1-of-1 slds-border--bottom" style="cursor: pointer"><div class="slds-truncate slds-grow slds-align-middle"><system-label [label]="plugin.name"></system-label></div><div class="slds-form-element"><label class="slds-checkbox_toggle slds-grid"><span class="slds-form-element__label slds-m-bottom_none"></span> <input type="checkbox" [ngModel]="activePlugins[plugin.id]" (ngModelChange)="setActivePlugins(plugin.id, $event)"> <span class="slds-checkbox_faux_container" aria-live="assertive"><span class="slds-checkbox_faux" style="cursor: initial"></span></span></label></div></div></div><div class="slds-size--2-of-3 slds-scrollable--y" style="height: 100%"><ng-container *ngFor="let item of plugins; trackBy: trackByFn"><reports-designer-integrate-item *ngIf="selectedItemId == item.id && !!item.component" [component]="item.component"></reports-designer-integrate-item><div *ngIf="selectedItemId == item.id && !item.component" class="slds-grid slds-grid--vertical-align-center slds-grid--align-center" style="height: 100%"><system-illustration-no-data><system-label label="LBL_NO_CONFIGURATION_NEEDED"></system-label></system-illustration-no-data></div></ng-container></div></div>'}),__metadata("design:paramtypes",[services_1.language,services_1.metadata,services_1.model,ReportsDesignerService])],ReportsDesignerIntegrate)}();exports.ReportsDesignerIntegrate=ReportsDesignerIntegrate;var ReportsDesignerIntegrateItem=function(){function ReportsDesignerIntegrateItem(e,t){this.language=e,this.metadata=t,this.component=""}var e;return ReportsDesignerIntegrateItem.prototype.ngAfterViewInit=function(){this.render()},ReportsDesignerIntegrateItem.prototype.ngOnDestroy=function(){this.componentRef&&this.componentRef.destroy()},ReportsDesignerIntegrateItem.prototype.render=function(){var t=this;this.metadata.addComponent(this.component,this.itemContainer).subscribe(function(e){return t.componentRef=e})},__decorate([core_1.Input(),__metadata("design:type",String)],ReportsDesignerIntegrateItem.prototype,"component",void 0),__decorate([core_1.ViewChild("itemContainer",{static:!0,read:core_1.ViewContainerRef}),__metadata("design:type","function"==typeof(e=void 0!==core_1.ViewContainerRef&&core_1.ViewContainerRef)?e:Object)],ReportsDesignerIntegrateItem.prototype,"itemContainer",void 0),ReportsDesignerIntegrateItem=__decorate([core_1.Component({selector:"reports-designer-integrate-item",template:"<div #itemContainer></div>"}),__metadata("design:paramtypes",[services_1.language,services_1.metadata])],ReportsDesignerIntegrateItem)}();exports.ReportsDesignerIntegrateItem=ReportsDesignerIntegrateItem;var ReportsDesignerIntegrateItemTargetList=function(){function ReportsDesignerIntegrateItemTargetList(e,t,s){this.language=e,this.model=t,this.prospectListModel=s}return Object.defineProperty(ReportsDesignerIntegrateItemTargetList.prototype,"properties",{get:function(){return this.model.getField("integration_params").ktargetlistexport},enumerable:!1,configurable:!0}),Object.defineProperty(ReportsDesignerIntegrateItemTargetList.prototype,"targetList",{get:function(){return this.prospectListModel.data.name?this.prospectListModel.id+"::"+this.prospectListModel.data.name:""},set:function(e){if(e){var t=e.split("::");this.prospectListModel.id=t[0],this.prospectListModel.resetData(),this.prospectListModel.setField("name",t[1]),this.properties.targetlist_id=this.prospectListModel.id}},enumerable:!1,configurable:!0}),ReportsDesignerIntegrateItemTargetList.prototype.ngOnInit=function(){this.initializeProperties()},ReportsDesignerIntegrateItemTargetList.prototype.initializeProperties=function(){this.prospectListModel.module="ProspectLists";var e=this.model.getField("integration_params");e.ktargetlistexport?e.ktargetlistexport.targetlist_id&&(this.prospectListModel.id=e.ktargetlistexport.targetlist_id,this.prospectListModel.getData()):(e.ktargetlistexport={targetlist_id:"",targetlist_update_action:"",targetlist_create_direct:!1},this.model.setField("integration_params",e))},ReportsDesignerIntegrateItemTargetList=__decorate([core_1.Component({selector:"reports-designer-integrate-item-target-list",template:'<div class="slds-p-around--x-small"><fieldset class="slds-form-element slds-form-element_compound slds-m-bottom--medium"><legend class="slds-form-element__legend slds-form-element__label slds-text-title--caps"><system-label label="LBL_UPDATE_TARGET_LIST"></system-label></legend><div class="slds-form-element__control slds-p-left--small slds-p-top--small"><div class="slds-form-element__row"><div class="slds-form-element slds-size--1-of-1"><label class="slds-form-element__label"><system-label label="LBL_PROSPECTLIST"></system-label></label><system-input-relate module="ProspectLists" [(ngModel)]="targetList" class="slds-grow" style="display: block; margin: 0 -5px;"></system-input-relate></div></div><div class="slds-form-element__row"><div class="slds-form-element slds-size--1-of-1"><label class="slds-form-element__label"><system-label label="LBL_ACTION"></system-label></label><div class="slds-select_container slds-grow"><select class="slds-select" [(ngModel)]="properties.targetlist_update_action"><option></option><option value="rep"><system-label label="LBL_UPDATE"></system-label></option><option value="add"><system-label label="LBL_ADD"></system-label></option><option value="sub"><system-label label="LBL_SUBTRACT"></system-label></option></select></div></div></div></div></fieldset><fieldset class="slds-form-element slds-form-element_compound slds-m-top--small slds-has-divider--top-space"><legend class="slds-form-element__legend slds-form-element__label slds-text-title--caps"><system-label label="LBL_PERFORMANCE_SETTINGS"></system-label></legend><div class="slds-form-element__control slds-p-left--small slds-p-top--small"><div class="slds-form-element__row"><div class="slds-form-element"><system-checkbox [(ngModel)]="properties.targetlist_create_direct"><system-label label="LBL_CREATE_DIRECT"></system-label></system-checkbox></div></div></div></fieldset></div>',providers:[services_1.model]}),__param(1,core_1.SkipSelf()),__metadata("design:paramtypes",[services_1.language,services_1.model,services_1.model])],ReportsDesignerIntegrateItemTargetList)}();exports.ReportsDesignerIntegrateItemTargetList=ReportsDesignerIntegrateItemTargetList;var ReportsDesignerFilter=function(){function e(e,t){this.reportsDesignerService=e,this.model=t,this.module={},this.rootGroup={},this.subscription=new rxjs_1.Subscription}return Object.defineProperty(e.prototype,"whereConditions",{get:function(){return this.model.getField("whereconditions")},set:function(e){this.model.setField("whereconditions",e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"whereGroups",{get:function(){return this.model.getField("wheregroups")},set:function(e){e=e.map(function(e){return _.omit(e,["conditions","children"])}),this.model.setField("wheregroups",e)},enumerable:!1,configurable:!0}),e.prototype.ngOnChanges=function(){this.loadWhereGroups()},e.prototype.ngOnDestroy=function(){this.subscription.unsubscribe()},e.prototype.generateGroup=function(e,t){return void 0===e&&(e="-"),void 0===t&&(t=this.reportsDesignerService.generateGuid()),{id:t,groupid:t,unionid:this.module.unionid,type:"AND",parent:e,conditions:[],children:[],group:"-"!==e?null:"root"}},e.prototype.loadWhereGroups=function(){var t=this;this.rootGroup={};var e=this.whereGroups&&this.whereGroups.length&&this.whereGroups.find(function(e){return t.module.unionid==e.unionid&&"-"==e.parent});e?(this.rootGroup=__assign({},e),this.setGroupConditions(this.rootGroup)):(this.rootGroup=this.generateGroup("-",this.module.unionid),this.whereGroups=this.whereGroups&&this.whereGroups.length?__spreadArray(__spreadArray([],this.whereGroups),[__assign({},this.rootGroup)]):[__assign({},this.rootGroup)]),this.buildTree()},e.prototype.handleTreeChange=function(t){switch(t.action){case"deleteGroup":this.whereGroups=this.whereGroups.filter(function(e){return e.id!=t.id}),this.cleanGroup(t.id),this.buildTree();break;case"addGroup":this.whereGroups=__spreadArray(__spreadArray([],this.whereGroups),[this.generateGroup(t.id)]),this.buildTree()}},e.prototype.buildTree=function(){this.rootGroup.children=[],this.addGroupChildren(this.rootGroup)},e.prototype.setGroupConditions=function(t){t.conditions=this.whereConditions?this.whereConditions.filter(function(e){return e.groupid==t.id}):[]},e.prototype.addGroupChildren=function(e){for(var t=0,s=this.whereGroups;t<s.length;t++){var l=s[t];if(l.parent==e.id){var i=__assign({},l);this.setGroupConditions(i),i.children=[],e.children.push(i),this.addGroupChildren(i)}}},e.prototype.cleanGroup=function(e){this.markDeletedGroupChildren(e),this.whereGroups=this.whereGroups.filter(function(e){return!e.deleted}),this.cleanWhereConditions()},e.prototype.markDeletedGroupChildren=function(e){for(var t=0,s=this.whereGroups;t<s.length;t++){var l=s[t];l.parent==e&&(this.markDeletedGroupChildren(l.id),l.deleted=!0)}},e.prototype.cleanWhereConditions=function(){var e=this;this.whereConditions&&(this.whereConditions=this.whereConditions.filter(function(t){return e.whereGroups.some(function(e){return e.id==t.groupid})}))},__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"module",void 0),e=__decorate([core_1.Component({selector:"reports-designer-filter",template:'<ul class="slds-p-horizontal--small"><reports-designer-condition-group [group]="rootGroup" (treeChange)="handleTreeChange($event)"></reports-designer-condition-group></ul>'}),__metadata("design:paramtypes",[ReportsDesignerService,services_1.model])],e)}();exports.ReportsDesignerFilter=ReportsDesignerFilter;var ReportsDesignerConditionGroup=function(){function e(e,t,s){this.language=e,this.reportsDesignerService=t,this.model=s,this.canDelete=!1,this.treeChange=new core_1.EventEmitter}var t;return Object.defineProperty(e.prototype,"groupType",{get:function(){return this.group.type},set:function(t){var s=this;this.group.type=t,this.model.getField("wheregroups").some(function(e){if(e.id==s.group.id)return e.type=t,!0})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"whereConditions",{get:function(){return this.model.getField("whereconditions")},set:function(e){this.model.setField("whereconditions",e)},enumerable:!1,configurable:!0}),e.prototype.onDrop=function(e){this.reportsDesignerService.removePlaceHolderElement(e.previousContainer.element.nativeElement),e.previousContainer===e.container?drag_drop_1.moveItemInArray(this.group.conditions,e.previousIndex,e.currentIndex):this.addCondition(e.item.data)},e.prototype.addGroup=function(){this.treeChange.emit({action:"addGroup",id:this.group.id})},e.prototype.deleteGroup=function(){this.treeChange.emit({action:"deleteGroup",id:this.group.id})},e.prototype.handleTreeChange=function(e){this.treeChange.emit(e)},e.prototype.toggleExpand=function(e){this.reportsDesignerService.expertMode&&(this.expanded=e==this.expanded?null:e)},e.prototype.addCondition=function(e){var t=this.reportsDesignerService.generateGuid(),s=this.reportsDesignerService.getCurrentPath()+"::"+e.id;if("root"!=this.group.unionid){var l=this.reportsDesignerService.getCurrentPath().indexOf("link")<0?"unionroot::":"",i=this.reportsDesignerService.getCurrentPath().replace("root:","");s=l+"union"+this.group.unionid+":"+i+"::"+e.id}var o={id:t,groupid:this.group.id,unionid:this.group.unionid,fieldid:t,referencefieldid:"",path:s,displaypath:this.reportsDesignerService.getCurrentPath(),name:e.name,type:e.type,operator:"ignore",jointype:"required",usereditable:"no",dashleteditable:"no",exportpdf:"no",value:"",valueto:"",valuekey:"",valuetokey:""};this.group.conditions.push(o),this.whereConditions=this.whereConditions?__spreadArray(__spreadArray([],this.whereConditions),[o]):[o]},e.prototype.deleteCondition=function(t){this.group.conditions=this.group.conditions.filter(function(e){return e.id!=t}),this.whereConditions=this.whereConditions.filter(function(e){return e.id!=t})},e.prototype.trackByFn=function(e,t){return t.id},__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"group",void 0),__decorate([core_1.Input(),__metadata("design:type",Boolean)],e.prototype,"canDelete",void 0),__decorate([core_1.Output(),__metadata("design:type","function"==typeof(t=void 0!==core_1.EventEmitter&&core_1.EventEmitter)?t:Object)],e.prototype,"treeChange",void 0),e=__decorate([core_1.Component({selector:"reports-designer-condition-group",template:'<li class="slds-expression__group"><fieldset><div class="slds-grid slds-gutters_direct-xx-small slds-grid--vertical-align-end slds-size--1-of-1"><div class="slds-form-element slds-grid slds-grid--vertical-align-center slds-m-bottom--xx-small"><label class="slds-form-element__label"><system-label label="LBL_GROUP_OPERATOR"></system-label></label><div class="slds-form-element__control"><div class="slds-select_container"><select class="slds-select" [(ngModel)]="groupType"><option value="AND"><system-label label="LBL_AND"></system-label></option><option value="OR"><system-label label="LBL_OR"></system-label></option></select></div></div></div></div><ul class="slds-m-vertical--x-small slds-p-horizontal--x-small"><li *ngFor="let condition of group.conditions; trackBy: trackByFn" class="slds-expression__row_group slds-m-vertical--x-small" style="border: 1px dashed #ddd; padding: 1px"><div class="slds-grid slds-p-around--xx-small"><reports-designer-condition [whereCondition]="condition" class="slds-grid slds-grid--vertical-align-center slds-grow"></reports-designer-condition><div class="slds-grid slds-grid--vertical-align-center"><button class="slds-button slds-button_icon slds-button_icon-border-filled slds-m-left--xx-small" (click)="deleteCondition(condition.id)"><system-button-icon icon="delete"></system-button-icon></button> <button class="slds-button slds-button_icon slds-m-left--xx-small slds-p-vertical--x-small slds-p-horizontal--xx-small" (click)="toggleExpand(condition.id)"><system-utility-icon icon="down" size="x-small" [colorclass]="reportsDesignerService.expertMode ? \'slds-icon-text-default\' : \'slds-icon-text-light\'" [style.transform]="expanded == condition.id ? \'rotate(180deg)\' : \'none\'"></system-utility-icon></button></div></div><reports-designer-condition-group-expansion *ngIf="expanded == condition.id && reportsDesignerService.expertMode" [whereCondition]="condition"></reports-designer-condition-group-expansion></li><li cdkDropList [id]="group.id" (cdkDropListDropped)="onDrop($event)" class="slds-align--absolute-center slds-text-color--inverse-weak" style="min-height: 30px; border: 1px dashed #ddd"><system-label label="MSG_DROP_FIELD_HERE"></system-label></li><ng-container *ngFor="let childGroup of group.children; trackBy: trackByFn"><reports-designer-condition-group [group]="childGroup" [canDelete]="true" (treeChange)="handleTreeChange($event)"></reports-designer-condition-group></ng-container></ul><div class="slds-expression__buttons"><button (click)="addGroup()" class="slds-button slds-button_neutral"><system-button-icon icon="add" class="slds-m-right--xx-small"></system-button-icon><system-label label="LBL_ADD_GROUP"></system-label></button> <button *ngIf="canDelete" (click)="deleteGroup()" class="slds-button slds-button_neutral slds-m-left--xx-small"><system-button-icon icon="delete" class="slds-m-right--xx-small"></system-button-icon><system-label label="LBL_DELETE_GROUP"></system-label></button></div></fieldset></li>',styles:["\n        .cdk-drop-list:hover {\n            background: #fff\n        }\n    "]}),__metadata("design:paramtypes",[services_1.language,ReportsDesignerService,services_1.model])],e)}();exports.ReportsDesignerConditionGroup=ReportsDesignerConditionGroup;var ReportsDesignerConditionGroupExpansion=function(){function e(e,t){this.language=e,this.model=t,this.contextUsed=!1}return Object.defineProperty(e.prototype,"requiredEnabled",{get:function(){return 2<this.whereCondition.path.split("::").length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"joinType",{get:function(){return"required"==this.whereCondition.jointype},set:function(e){this.whereCondition.jointype=e?"required":"optional"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"referenceDisabled",{get:function(){var t=this,e=this.model.getField("whereconditions").some(function(e){return t.whereCondition.fieldid!=e.fieldid&&"reference"==e.operator&&e.value==t.whereCondition.reference});return"reference"==this.whereCondition.operator||e},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){this.setContextReferenceUse()},e.prototype.setContextReferenceUse=function(){var e=this.model.getField("visualization_params");if(e)for(var t in e)e.hasOwnProperty(t)&&(e[t].googlecharts&&e[t].googlecharts.context&&this.whereCondition.context&&this.whereCondition.context==e[t].googlecharts.context&&(this.contextUsed=!0),e[t].highcharts&&e[t].highcharts.context&&this.whereCondition.context&&this.whereCondition.context==e[t].highcharts.context&&(this.contextUsed=!0))},__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"whereCondition",void 0),e=__decorate([core_1.Component({selector:"reports-designer-condition-group-expansion",template:'<div class="slds-grid slds-p-around--x-small" style="box-shadow: inset -1px 1px 6px 0 #aaa;"><fieldset class="slds-form-element slds-form-element_compound slds-p-vertical--x-small slds-size--1-of-1"><div class="slds-form-element__control"><div class="slds-grid slds-m-vertical--xx-small slds-grid--align-spread"><div class="slds-form-element slds-size--1-of-1"><label class="slds-form-element__label"><system-label label="LBL_PATH"></system-label></label><div class="slds-form-element__control"><input type="text" [(ngModel)]="whereCondition.path" class="slds-input" [disabled]="true"></div></div></div><div class="slds-grid"><div class="slds-form-element slds-size--1-of-2"><label class="slds-form-element__label"><system-label label="LBL_USER_EDITABLE"></system-label></label><div class="slds-form-element__control"><div class="slds-select_container"><select class="slds-select" [(ngModel)]="whereCondition.usereditable"><option value="yes"><system-label label="LBL_YES"></system-label></option><option value="no"><system-label label="LBL_NO"></system-label></option><option value="yfo"><system-label label="LBL_VALUE_ONLY"></system-label></option><option value="yo1"><system-label label="LBL_REPORTS_ALLOW_EDIT_ON_OFF"></system-label></option><option value="yo2"><system-label label="LBL_REPORTS_ALLOW_EDIT_ON_ON"></system-label></option></select></div></div></div><div class="slds-form-element slds-size--1-of-2"><label class="slds-form-element__label"><system-label label="LBL_GROUPING"></system-label></label><div class="slds-form-element__control"><input type="text" [(ngModel)]="whereCondition.grouping" class="slds-input" [disabled]="true"></div></div></div><div class="slds-grid"><div class="slds-form-element slds-size--1-of-2"><label class="slds-form-element__label"><system-label label="LBL_SEQUENCE"></system-label></label><div class="slds-form-element__control"><input type="text" [(ngModel)]="whereCondition.sequence" class="slds-input"></div></div><div class="slds-form-element slds-size--1-of-2"><label class="slds-form-element__label"><system-label label="LBL_CONTEXT"></system-label></label><div class="slds-form-element__control"><input type="text" [(ngModel)]="whereCondition.context" class="slds-input" [disabled]="contextUsed"></div></div></div><div class="slds-grid"><div class="slds-form-element slds-size--1-of-2"><label class="slds-form-element__label"><system-label label="LBL_REFERENCE"></system-label></label><div class="slds-form-element__control"><input type="text" [(ngModel)]="whereCondition.reference" class="slds-input" [disabled]="referenceDisabled"></div></div><div class="slds-form-element slds-size--1-of-2"><label class="slds-form-element__label"><system-label label="LBL_REQUIRED"></system-label></label><div class="slds-form-element__control"><system-checkbox [(ngModel)]="joinType" [hidelabel]="true" [disabled]="!requiredEnabled"></system-checkbox></div></div></div></div></fieldset></div>'}),__metadata("design:paramtypes",[services_1.language,services_1.model])],e)}();exports.ReportsDesignerConditionGroupExpansion=ReportsDesignerConditionGroupExpansion;var ReportsDesignerCondition=function(){function e(e,t,s){this.language=e,this.model=t,this.reporterConfig=s,this.whereCondition={},this.isMultiSelect=!1}return Object.defineProperty(e.prototype,"itemType",{get:function(){var e="text";switch(this.whereCondition.type){case"enum":case"multienum":case"radioenum":switch(this.whereCondition.operator){case"equals":case"notequal":case"oneof":case"oneofnot":case"oneofnotornull":e="enum"}break;case"date":case"datetime":case"datetimecombo":switch(this.whereCondition.operator){case"before":case"after":case"between":e="date"}break;default:switch(this.whereCondition.operator){case"equals":case"notequal":case"oneof":case"oneofnot":case"oneofnotornull":(-1<this.whereCondition.type.indexOf("user_id")||-1<this.whereCondition.type.indexOf("user_name"))&&(e="user")}}return"reference"==this.whereCondition.operator&&(e="reference"),"function"==this.whereCondition.operator&&(e="function"),"parent_assign"==this.whereCondition.operator&&(e="parent_assign"),e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"showValue",{get:function(){return"parent_assign"==this.whereCondition.operator||"reference"==this.whereCondition.operator||"function"==this.whereCondition.operator||0<this.reporterConfig.operatorCount[this.whereCondition.operator]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"showValueTo",{get:function(){return 1<this.reporterConfig.operatorCount[this.whereCondition.operator]},enumerable:!1,configurable:!0}),e.prototype.getOperators=function(){for(var t=this,e=[],s=this.reporterConfig.operatorAssignments[this.whereCondition.type]||"varchar",l=0,i=this.reporterConfig.operatorTypes[s];l<i.length;l++){var o=i[l];e.push({value:o,display:this.language.getLabel("LBL_OP_"+o.toUpperCase())})}var n=this.model.getField("integration_params");n&&n.kpublishing&&n.kpublishing.subpanelModule&&e.push({value:"parent_assign",display:this.language.getLabel("LBL_ASSIGN_FROM_PARENT")});var r=this.model.getField("whereconditions");return r&&r.some(function(e){return e.type==t.whereCondition.type&&!!e.reference})&&e.push({value:"reference",display:this.language.getLabel("LBL_REFERENCE")}),this.reporterConfig.whereFunctions&&0<this.reporterConfig.whereFunctions.length&&e.push({value:"function",display:this.language.getLabel("LBL_FUNCTION")}),e.sort(function(e,t){return e.display>t.display?1:-1}),e},e.prototype.changeOperator=function(){this.whereCondition.value="",this.whereCondition.valuekey="",this.whereCondition.valueto="",this.whereCondition.valuetokey="",this.whereCondition.referencefieldid=""},e.prototype.trackByFn=function(e,t){return e},__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"whereCondition",void 0),e=__decorate([core_1.Component({selector:"reports-designer-condition",template:'<div class="slds-grid slds-size--1-of-2 slds-grid--vertical-align-center"><div class="slds-form-element slds-grid slds-size--1-of-2"><label class="slds-form-element__label slds-grid slds-grid--vertical-align-center"><system-label label="LBL_NAME"></system-label></label><div class="slds-form-element__control slds-grow"><input type="text" [ngModel]="whereCondition.name" [disabled]="true" class="slds-input"></div></div><div class="slds-form-element slds-p-horizontal--xx-small slds-grid slds-grid--vertical-align-center slds-size--1-of-2"><label class="slds-form-element__label slds-grid slds-grid--vertical-align-center slds-m-left--xx-small"><system-label label="LBL_OPERATOR"></system-label></label><div class="slds-form-element__control slds-grow"><div class="slds-select_container"><select class="slds-select" [(ngModel)]="whereCondition.operator" (change)="changeOperator()"><option value="ignore"><system-label label="LBL_OP_IGNORE"></system-label></option><option *ngFor="let operator of getOperators(); trackBy: trackByFn" [value]="operator.value">{{operator.display}}</option></select></div></div></div></div><div *ngIf="showValue" class="slds-size--1-of-2 slds-grid"><label class="slds-form-element__label slds-grid slds-grid--vertical-align-center slds-m-left--xx-small"><system-label label="LBL_VALUE"></system-label></label><div class="slds-grid slds-grow"><div [ngSwitch]="itemType" class="slds-grow"><reporter-filter-item-enum *ngSwitchCase="\'enum\' || \'multienum\' || \'radioenum\'" [field]="\'value\'" [wherecondition]="whereCondition" [isMultiSelect]="whereCondition.operator.includes(\'oneof\')"></reporter-filter-item-enum><reporter-filter-item-date *ngSwitchCase="\'date\'" [field]="\'valuekey\'" [wherecondition]="whereCondition"></reporter-filter-item-date><reporter-filter-item-text *ngSwitchCase="\'text\'" [field]="\'value\'" [wherecondition]="whereCondition"></reporter-filter-item-text><reporter-filter-item-user *ngSwitchCase="\'user\'" [whereCondition]="whereCondition"></reporter-filter-item-user><reporter-filter-item-reference *ngSwitchCase="\'reference\'" [whereCondition]="whereCondition"></reporter-filter-item-reference><reporter-filter-item-function *ngSwitchCase="\'function\'" [whereCondition]="whereCondition"></reporter-filter-item-function><reporter-filter-item-parent *ngSwitchCase="\'parent_assign\'" [wherecondition]="whereCondition"></reporter-filter-item-parent></div><div *ngIf="showValueTo" class="slds-size--1-of-2 slds-p-left--xx-small" [ngSwitch]="itemType"><reporter-filter-item-enum *ngSwitchCase="\'enum\' || \'multienum\' || \'radioenum\'" [field]="\'valueto\'" [wherecondition]="whereCondition"></reporter-filter-item-enum><reporter-filter-item-date *ngSwitchCase="\'date\'" [field]="\'valuetokey\'" [wherecondition]="whereCondition"></reporter-filter-item-date><reporter-filter-item-text *ngSwitchCase="\'text\'" [field]="\'valueto\'" [wherecondition]="whereCondition"></reporter-filter-item-text></div></div></div>'}),__metadata("design:paramtypes",[services_1.language,services_1.model,modulereports_1.reporterconfig])],e)}();exports.ReportsDesignerCondition=ReportsDesignerCondition;var ReportsDesignerSelectModuleModal=function(){function ReportsDesignerSelectModuleModal(e,t,s,l){this.language=e,this.metadata=t,this.model=s,this.view=l,this.createmode=!1,this.moduleList=[],this.filteredModuleList=[],this.subject=new rxjs_1.Subject,this.response=this.subject.asObservable(),this.self={},this.reportName="",this.selectedModule="",this._searchTerm="",this.view.isEditable=!0,this.view.setEditMode(),this.view.editfieldname="name"}return Object.defineProperty(ReportsDesignerSelectModuleModal.prototype,"searchTerm",{get:function(){return this._searchTerm},set:function(t){this.filteredModuleList=this.moduleList.filter(function(e){return-1<e.display.toLowerCase().indexOf(t.toLowerCase())||-1<e.name.toLowerCase().indexOf(t.toLowerCase())})},enumerable:!1,configurable:!0}),Object.defineProperty(ReportsDesignerSelectModuleModal.prototype,"disabled",{get:function(){return!(this.reportName&&this.selectedModule)},enumerable:!1,configurable:!0}),ReportsDesignerSelectModuleModal.prototype.ngOnInit=function(){this.loadModuleList();var e=this.metadata.getComponentConfig("ReportsDesignerSelectModuleModal",this.model.module);this.fieldset=e.fieldset},ReportsDesignerSelectModuleModal.prototype.loadModuleList=function(){var t=this;this.moduleList=this.metadata.getModules().map(function(e){return{name:e,display:t.language.getModuleName(e)}}).sort(function(e,t){return e.display>t.display?1:-1}),this.filteredModuleList=this.moduleList},ReportsDesignerSelectModuleModal.prototype.setSelectedModule=function(e){this.selectedModule=e,this.createmode||this.confirm()},ReportsDesignerSelectModuleModal.prototype.close=function(){this.subject.next(!1),this.subject.complete(),this.self.destroy()},ReportsDesignerSelectModuleModal.prototype.confirm=function(e){e&&this.setSelectedModule(e),this.canCreate&&(this.subject.next({name:this.reportName,module:this.selectedModule}),this.subject.complete(),this.close())},ReportsDesignerSelectModuleModal.prototype.trackByFn=function(e,t){return t},Object.defineProperty(ReportsDesignerSelectModuleModal.prototype,"canCreate",{get:function(){var e;return!this.createmode||0<(null===(e=this.model.getField("name"))||void 0===e?void 0:e.length)},enumerable:!1,configurable:!0}),__decorate([core_1.Input(),__metadata("design:type",Boolean)],ReportsDesignerSelectModuleModal.prototype,"createmode",void 0),ReportsDesignerSelectModuleModal=__decorate([core_1.Component({selector:"reports-designer-select-module-modal",template:'<system-modal><system-modal-header (close)="close()" module="KReports"><system-label-modulename module="KReports" [singular]="true"></system-label-modulename></system-modal-header><system-modal-content margin="xx-small" [grow]="true"><system-collapsable-tab *ngIf="createmode" tabtitle="LBL_DETAILS" [collapsible]="false"><object-record-fieldset [fieldset]="fieldset" direction="vertical"></object-record-fieldset></system-collapsable-tab><system-collapsable-tab tabtitle="LBL_MODULE" [collapsible]="false"><div class="slds-p-around--x-small"><div class="slds-app-launcher__header-search slds-p-horizontal--none"><div class="slds-form-element"><div class="slds-form-element__control slds-input-has-icon slds-input-has-icon--left"><system-utility-icon icon="search" [addclasses]="\'slds-input__icon slds-input__icon--left\'"></system-utility-icon><input type="search" class="slds-input" [(ngModel)]="searchTerm" [placeholder]="language.getLabel(\'LBL_SEARCH\')"></div></div></div><ul class="slds-grid slds-grid--pull-padded slds-p-around--xx-small slds-wrap"><li *ngFor="let module of filteredModuleList; trackBy: trackByFn" [class.spice-box-is-selected]="module.name == selectedModule" class="slds-p-around--small slds-size--xx-small" (click)="setSelectedModule(module.name)" (dblclick)="confirm(module.name)"><div class="slds-app-launcher__tile-figure slds-app-launcher__tile-figure--small slds-text-link_reset"><system-icon [module]="module.name" size="large"></system-icon></div><div class="slds-align_absolute-center slds-p-top--xx-small"><p class="slds-truncate slds-text-link_reset" [title]="module.display">{{module.display}}</p></div></li></ul></div></system-collapsable-tab></system-modal-content><system-modal-footer><button class="slds-button slds-button--neutral" (click)="close()"><system-label label="LBL_CANCEL"></system-label></button> <button *ngIf="createmode" [disabled]="!canCreate" class="slds-button slds-button--neutral" (click)="confirm()"><system-label label="LBL_NEXT"></system-label></button></system-modal-footer></system-modal>'}),__metadata("design:paramtypes",[services_1.language,services_1.metadata,services_1.model,services_1.view])],ReportsDesignerSelectModuleModal)}();exports.ReportsDesignerSelectModuleModal=ReportsDesignerSelectModuleModal;var ModuleReportsDesigner=function(){function ModuleReportsDesigner(){}return ModuleReportsDesigner=__decorate([core_1.NgModule({imports:[common_1.CommonModule,forms_1.FormsModule,objectfields_1.ObjectFields,objectcomponents_1.ObjectComponents,systemcomponents_1.SystemComponents,directives_1.DirectivesModule,drag_drop_1.DragDropModule,modulereports_1.ModuleReports],declarations:[ReportsDesigner,ReportsDesignerTree,ReportsDesignerDetails,ReportsDesignerManipulate,ReportsDesignerManipulateUnion,ReportsDesignerPresent,ReportsDesignerPresentItem,ReportsDesignerPresentItemTable,ReportsDesignerPresentItemStandard,ReportsDesignerVisualize,ReportsDesignerVisualizeItem,ReportsDesignerVisualizeItemChartTypePanel,ReportsDesignerVisualizeItemChartDataPanel,ReportsDesignerVisualizeItemChartDataPanelSingleSeries,ReportsDesignerVisualizeItemChartDataPanelMultipleSeries,ReportsDesignerVisualizeItemGoogleCharts,ReportsDesignerIntegrate,ReportsDesignerIntegrateItem,ReportsDesignerIntegrateItemTargetList,ReportsDesignerFilter,ReportsDesignerConditionGroup,ReportsDesignerConditionGroupExpansion,ReportsDesignerCondition,ReportsDesignerManipulateTableRow,ReportsDesignerManipulateUnionTableRow,ReportsDesignerManipulateTableRowExpansion,ReportsDesignerSelectModuleModal],exports:[ReportsDesigner,ReportsDesignerPresentItemTable,ReportsDesignerVisualizeItemChartTypePanel,ReportsDesignerVisualizeItemChartDataPanel],providers:[ReportsDesignerService]})],ModuleReportsDesigner)}();exports.ModuleReportsDesigner=ModuleReportsDesigner;