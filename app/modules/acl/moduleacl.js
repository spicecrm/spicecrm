/** 
 * Â© 2015 - 2021 aac services k.s. All rights reserved.
 * release: 2021.02.001
 * date: 2021-07-16 09:05:07
 * build: 2021.02.001.1626419107136
 **/
"use strict";var __extends=this&&this.__extends||function(){var l=function(e,t){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])})(e,t)};return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function s(){this.constructor=e}l(e,t),e.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),__decorate=this&&this.__decorate||function(e,t,s,l){var i,a=arguments.length,o=a<3?t:null===l?l=Object.getOwnPropertyDescriptor(t,s):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,s,l);else for(var d=e.length-1;0<=d;d--)(i=e[d])&&(o=(a<3?i(o):3<a?i(t,s,o):i(t,s))||o);return 3<a&&o&&Object.defineProperty(t,s,o),o},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ModuleACL=exports.fieldACLAdditionalUsers=exports.ACLUserProfiles=exports.ACLProfilesManagerAddProfileModal=exports.ACLProfilesManagerAddObjectModal=exports.ACLProfilesManagerProfiles=exports.ACLProfilesManagerProfile=exports.ACLProfilesManager=exports.ACLObjectsManagerObjectFields=exports.ACLObjectsManagerObjectFieldvalues=exports.ACLObjectsManagerObjectDetails=exports.ACLObjectsManagerObject=exports.ACLObjectsManagerAddObjectModal=exports.ACLObjectsManagerObjects=exports.ACLObjectsManager=exports.ACLTypesManagerTypesAddAction=exports.ACLTypesManagerTypesAddFields=exports.ACLTypesManagerTypesFields=exports.ACLTypesManagerTypesActions=exports.ACLTypesManagerTypes=exports.ACLManagerHeader=exports.ACLTypesManager=void 0;var common_1=require("@angular/common"),core_1=require("@angular/core"),forms_1=require("@angular/forms"),objectfields_1=require("../../objectfields/objectfields"),globalcomponents_1=require("../../globalcomponents/globalcomponents"),objectcomponents_1=require("../../objectcomponents/objectcomponents"),directives_1=require("../../directives/directives"),systemcomponents_1=require("../../systemcomponents/systemcomponents"),services_1=require("../../services/services"),router_1=require("@angular/router"),ACLTypesManager=function(){function ACLTypesManager(e,t,s){this.backend=e,this.modelutilities=t,this.elementRef=s,this.activeType={authtypeid:"",authtypemodule:"",authtypefields:{},authtypeactions:[]},this.activeModule=""}return Object.defineProperty(ACLTypesManager.prototype,"contentStyle",{get:function(){return{height:"calc(100vh - "+this.elementmanagercontent.element.nativeElement.getBoundingClientRect().top+"px"}},enumerable:!1,configurable:!0}),ACLTypesManager.prototype.setType=function(e){var t=this;this.activeType.authtypeid=e.id,this.activeType.authtypemodule=e.module,this.backend.getRequest("module/SpiceACLObjects/modules/"+e.id).subscribe(function(e){t.activeType.authtypefields=e.authtypefields||[],t.activeType.authtypeactions=e.authtypeactions,t.sortType()})},ACLTypesManager.prototype.addFields=function(e){for(var t=this,s=0,l=e;s<l.length;s++){var i=l[s];this.backend.postRequest("module/SpiceACLObjects/modules/"+this.activeType.authtypeid+"/fields/"+i).subscribe(function(e){t.activeType.authtypefields.push(e),t.sortType()})}},ACLTypesManager.prototype.deleteField=function(s){var l=this;this.backend.deleteRequest("module/SpiceACLObjects/modules/"+this.activeType.authtypeid+"/fields/"+s).subscribe(function(e){l.activeType.authtypefields.some(function(e,t){if(e.id==s)return l.activeType.authtypefields.splice(t,1),!0})})},ACLTypesManager.prototype.addAction=function(e){var t=this;this.backend.postRequest("module/SpiceACLObjects/modules/"+this.activeType.authtypeid+"/actions/"+e).subscribe(function(e){t.activeType.authtypeactions.push(e),t.sortType()})},ACLTypesManager.prototype.deleteAction=function(s){var l=this;this.backend.deleteRequest("module/SpiceACLObjects/modules/"+this.activeType.authtypeid+"/actions/"+s).subscribe(function(e){l.activeType.authtypeactions.some(function(e,t){if(e.id==s)return l.activeType.authtypeactions.splice(t,1),!0})})},ACLTypesManager.prototype.sortType=function(){this.activeType.authtypefields.sort(function(e,t){return e.name>t.name}),this.activeType.authtypeactions.sort(function(e,t){return e.action>t.action})},__decorate([core_1.ViewChild("managercontent",{read:core_1.ViewContainerRef,static:!0}),__metadata("design:type",core_1.ViewContainerRef)],ACLTypesManager.prototype,"elementmanagercontent",void 0),__decorate([core_1.Component({template:'<div style="height: 100%;"><div><acl-manager-header displaylabel="LBL_SPICEACLTYPES"></acl-manager-header></div><div #managercontent class="slds-grid" [ngStyle]="contentStyle"><acltypes-manager-types class="slds-size--1-of-2 slds-border--right" (typeselected)="setType($event)"></acltypes-manager-types><div class="slds-size--1-of-2"><div style="height: 50%;"><acltypes-manager-types-fields [authtypemodule]="activeType.authtypemodule" [authtypefields]="activeType.authtypefields" (addfields)="addFields($event)" (deletefield)="deleteField($event)"></acltypes-manager-types-fields></div><div style="height: 50%;"><acltypes-manager-types-actions [authtypeactions]="activeType.authtypeactions" (addaction)="addAction($event)" (deleteaction)="deleteAction($event)"></acltypes-manager-types-actions></div></div></div></div>'}),__metadata("design:paramtypes",[services_1.backend,services_1.modelutilities,core_1.ElementRef])],ACLTypesManager)}();exports.ACLTypesManager=ACLTypesManager;var ACLManagerHeader=function(){function e(e){this.language=e,this.displaylabel=""}return __decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"displaylabel",void 0),__decorate([core_1.Component({selector:"acl-manager-header",template:'<div class="slds-p-around--medium slds-theme--default slds-border--bottom"><div class="slds-grid"><div class="slds-col slds-has-flexi-truncate"><div class="slds-media slds-no-space slds-grow"><div class="slds-media__figure"><system-icon module="SpiceACLObjects"></system-icon></div><div class="slds-media__body"><p class="slds-text-title_caps slds-line-height_reset"><system-label-modulename module="SpiceACLObjects"></system-label-modulename></p><h1 class="slds-page-header__title slds-p-right_x-small"><div class="slds-truncate"><system-label [label]="displaylabel"></system-label></div></h1></div></div></div></div></div>'}),__metadata("design:paramtypes",[services_1.language])],e)}();exports.ACLManagerHeader=ACLManagerHeader;var ACLTypesManagerTypes=function(){function e(e,t,s,l){var i=this;this.backend=e,this.modal=t,this.language=s,this.modelutilities=l,this.loading=!0,this.acltypes=[],this.activeTypeId="",this.typeselected=new core_1.EventEmitter,this.backend.getRequest("module/SpiceACLObjects/modules").subscribe(function(e){i.acltypes=e,i.acltypes.sort(function(e,t){return e.module>t.module?1:-1}),i.loading=!1})}return e.prototype.selectType=function(e){this.activeTypeId=e.id,this.typeselected.emit(e)},Object.defineProperty(e.prototype,"contentStyle",{get:function(){return{height:"calc(100% - "+this.header.element.nativeElement.getBoundingClientRect().height+"px)"}},enumerable:!1,configurable:!0}),__decorate([core_1.ViewChild("header",{read:core_1.ViewContainerRef,static:!0}),__metadata("design:type",core_1.ViewContainerRef)],e.prototype,"header",void 0),__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],e.prototype,"typeselected",void 0),__decorate([core_1.Component({selector:"acltypes-manager-types",template:'<div style="height: 100%;"><div #header class="slds-grid slds-grid--vertical-align-center slds-p-around--x-small"><h2 class="slds-text-heading--small"><system-label label="LBL_MODULES"></system-label></h2></div><div class="slds-scrollable" [ngStyle]="contentStyle"><div *ngIf="loading; else typesdisplay" class="slds-p-around--medium slds-align--absolute-center"><system-spinner></system-spinner></div><ng-template #typesdisplay><table class="slds-table slds-table_bordered slds-table_cell-buffer"><thead><tr class="slds-text-title_caps"><th scope="col"><div class="slds-truncate"><system-label label="LBL_MODULE"></system-label></div></th><th scope="col" style="width: 3rem;"></th></tr></thead><tbody><tr *ngFor="let acltype of acltypes" (click)="selectType(acltype)" [ngClass]="{\'slds-theme--shade\': acltype.id == activeTypeId}"><td><div class="slds-truncate"><system-link>{{acltype.module}}</system-link></div></td><td style="width: 3rem;"><system-utility-icon *ngIf="acltype.usagecount > 0" icon="lock" size="x-small" addclasses="slds-icon slds-icon-text-default"></system-utility-icon><system-utility-icon *ngIf="acltype.usagecount == 0" icon="unlock" size="x-small" addclasses="slds-icon slds-icon-text-light"></system-utility-icon></td></tr></tbody></table></ng-template></div></div>'}),__metadata("design:paramtypes",[services_1.backend,services_1.modal,services_1.language,services_1.modelutilities])],e)}();exports.ACLTypesManagerTypes=ACLTypesManagerTypes;var ACLTypesManagerTypesActions=function(){function e(e,t,s,l){this.backend=e,this.modal=t,this.language=s,this.modelutilities=l,this.authtypeactions=[],this.addaction=new core_1.EventEmitter,this.deleteaction=new core_1.EventEmitter}return e.prototype.addAction=function(){var t=this;this.modal.openModal("ACLTypesManagerTypesAddAction",!0).subscribe(function(e){e.instance.currentactions=t.authtypeactions,e.instance.addaction.subscribe(function(e){t.addaction.emit(e)})})},e.prototype.deleteAction=function(t){var s=this;this.modal.confirm("MSG_DELETE_ACL_ACTION","MSG_DELETE_ACL_ACTION").subscribe(function(e){e&&s.deleteaction.emit(t)})},__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"authtypeactions",void 0),__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],e.prototype,"addaction",void 0),__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],e.prototype,"deleteaction",void 0),__decorate([core_1.Component({selector:"acltypes-manager-types-actions",template:'<div class="slds-grid slds-grid--vertical-align-center slds-p-around--x-small"><h2 class="slds-text-heading--small"><system-label label="LBL_ACTIONS"></system-label></h2><button class="slds-col--bump-left slds-button slds-button--brand" (click)="addAction()"><system-label label="LBL_ADD"></system-label></button></div><table class="slds-table slds-table_bordered slds-table_cell-buffer"><thead><tr class="slds-text-title_caps"><th scope="col"><div class="slds-truncate"><system-label label="LBL_ACTION"></system-label></div></th><th scope="col" style="width: 3rem;"></th></tr></thead><tbody><tr *ngFor="let action of authtypeactions"><td><div class="slds-truncate">{{action.action}}</div></td><td style="width: 3rem;"><system-utility-icon icon="delete" size="x-small" addclasses="slds-icon slds-icon-text-default" (click)="deleteAction(action.id)"></system-utility-icon></td></tr></tbody></table>'}),__metadata("design:paramtypes",[services_1.backend,services_1.modal,services_1.language,services_1.modelutilities])],e)}();exports.ACLTypesManagerTypesActions=ACLTypesManagerTypesActions;var ACLTypesManagerTypesFields=function(){function e(e,t,s,l){this.backend=e,this.modal=t,this.language=s,this.modelutilities=l,this.authtypefields=[],this.authtypemodule="",this.addfields=new core_1.EventEmitter,this.deletefield=new core_1.EventEmitter}return e.prototype.addField=function(){for(var d=this,e=0,t=this.authtypefields;e<t.length;e++)t[e].hide=!0;this.modal.openModal("ACLTypesManagerTypesAddFields").subscribe(function(e){e.instance.module=d.authtypemodule,e.instance.currentfields=d.authtypefields,e.instance.addfields.subscribe(function(e){if(e){for(var t=[],s=0,l=e;s<l.length;s++){var i,a=l[s],o=!1;for(i in d.authtypefields)d.authtypefields[i].name==a&&(o=!0);o||t.push(a)}d.addfields.emit(t)}})})},e.prototype.deleteField=function(t){var s=this;this.modal.confirm(this.language.getLabel("MSG_DELETE_ACL_FIELD","","long"),this.language.getLabel("MSG_DELETE_ACL_FIELD","","default")).subscribe(function(e){e&&s.deletefield.emit(t)})},__decorate([core_1.Input(),__metadata("design:type",Array)],e.prototype,"authtypefields",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"authtypemodule",void 0),__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],e.prototype,"addfields",void 0),__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],e.prototype,"deletefield",void 0),__decorate([core_1.Component({selector:"acltypes-manager-types-fields",template:'<div class="slds-grid slds-grid--vertical-align-center slds-p-around--x-small"><h2 class="slds-text-heading--small"><system-label label="LBL_FIELDS"></system-label></h2><button class="slds-col--bump-left slds-button slds-button--brand" (click)="addField()"><system-label label="LBL_ADD"></system-label></button></div><table class="slds-table slds-table_bordered slds-table_cell-buffer"><thead><tr class="slds-text-title_caps"><th scope="col"><div class="slds-truncate"><system-label label="LBL_FIELD"></system-label></div></th><th scope="col" style="width: 3rem;"></th></tr></thead><tbody><tr *ngFor="let field of authtypefields"><td><div class="slds-truncate">{{field.name}}</div></td><td style="width: 3rem;"><system-utility-icon icon="delete" size="x-small" addclasses="slds-icon slds-icon-text-default" (click)="deleteField(field.id)"></system-utility-icon></td></tr></tbody></table>'}),__metadata("design:paramtypes",[services_1.backend,services_1.modal,services_1.language,services_1.modelutilities])],e)}();exports.ACLTypesManagerTypesFields=ACLTypesManagerTypesFields;var ACLTypesManagerTypesAddFields=function(){function ACLTypesManagerTypesAddFields(e,t,s,l){this.backend=e,this.metadata=t,this.language=s,this.modelutilities=l,this.module="",this.self={},this.currentfields=[],this.selectedfields=[],this.fields=[],this.addfields=new core_1.EventEmitter,this.showAll=!1,this.selectAllChecked=!1}return ACLTypesManagerTypesAddFields.prototype.ngOnInit=function(){var e,t=this.metadata.getModuleFields(this.module);for(e in this.selectedfields=[],t)(this.showAll||this.allowField(t[e]))&&this.fields.push(e);for(var s=0,l=this.currentfields;s<l.length;s++){var i=l[s];this.selectedfields.push(i.name)}this.fields.sort()},ACLTypesManagerTypesAddFields.prototype.allowField=function(e){return"non-db"!=e.source&&"link"!=e.type&&"relate"!=e.type},ACLTypesManagerTypesAddFields.prototype.getFieldDisplayName=function(e){return this.language.getFieldDisplayName(this.module,e)},ACLTypesManagerTypesAddFields.prototype.close=function(){this.self.destroy()},ACLTypesManagerTypesAddFields.prototype.add=function(){this.addfields.emit(this.selectedfields),this.close()},ACLTypesManagerTypesAddFields.prototype.getFieldDisplay=function(e){for(var t=0,s=this.currentfields;t<s.length;t++){var l=s[t];if(l.name==e&&l.hide)return!0}return!1},ACLTypesManagerTypesAddFields.prototype.getFieldValue=function(e){for(var t=0,s=this.selectedfields;t<s.length;t++)if(s[t]==e)return!0;return!1},ACLTypesManagerTypesAddFields.prototype.setFieldValue=function(e,t){t.preventDefault();var s,l=!1;for(s in this.selectedfields)this.selectedfields[s]==e&&(this.selectedfields.splice(+s,1),l=!0);l||this.selectedfields.push(e)},ACLTypesManagerTypesAddFields.prototype.toggleSelectAll=function(e){if(e.preventDefault(),this.selectAllChecked)this.selectAllChecked=!1,this.selectedfields=[];else{for(var t=0,s=this.fields;t<s.length;t++){var l=s[t];this.selectedfields.push(l)}this.selectAllChecked=!0}},__decorate([core_1.Input(),__metadata("design:type",String)],ACLTypesManagerTypesAddFields.prototype,"module",void 0),__decorate([core_1.Component({selector:"acltypes-manager-types-add-fields",template:'<system-modal><system-modal-header (close)="close()"><system-label label="LBL_ADD_FIELD"></system-label></system-modal-header><system-modal-content><fieldset class="slds-form-element"><div class="slds-form-element__control"><div class="slds-checkbox" (click)="toggleSelectAll($event)"><input type="checkbox" [id]="\'select_all\'" [checked]="selectAllChecked"> <label class="slds-checkbox__label" [attr.for]="\'select_all\'"><span class="slds-checkbox_faux"></span> <span class="slds-form-element__label"><system-label label="LBL_SELECT_ALL"></system-label></span></label></div></div></fieldset><fieldset class="slds-form-element"><div *ngFor="let thisfield of fields" class="slds-form-element__control"><div *ngIf="!getFieldDisplay(thisfield)" class="slds-checkbox" (click)="setFieldValue(thisfield, $event)"><input type="checkbox" [id]="\'id\'+thisfield" [checked]="getFieldValue(thisfield)"> <label class="slds-checkbox__label" [attr.for]="\'id\'+thisfield"><span class="slds-checkbox_faux"></span> <span class="slds-form-element__label">{{getFieldDisplayName(thisfield)}}&nbsp;/&nbsp;{{thisfield}}</span></label></div></div></fieldset></system-modal-content><system-modal-footer><button class="slds-button slds-button--neutral" (click)="close()"><system-label label="LBL_CANCEL"></system-label></button> <button [disabled]="selectedfields.length < 1" class="slds-button slds-button--brand" (click)="add()"><system-label label="LBL_ADD"></system-label></button></system-modal-footer></system-modal>'}),__metadata("design:paramtypes",[services_1.backend,services_1.metadata,services_1.language,services_1.modelutilities])],ACLTypesManagerTypesAddFields)}();exports.ACLTypesManagerTypesAddFields=ACLTypesManagerTypesAddFields;var ACLTypesManagerTypesAddAction=function(){function ACLTypesManagerTypesAddAction(e,t,s,l){this.backend=e,this.metadata=t,this.language=s,this.modelutilities=l,this.self={},this.currentactions=[],this._currentActions=[],this.action="",this.addaction=new core_1.EventEmitter}return ACLTypesManagerTypesAddAction.prototype.ngOnInit=function(){for(var e=0,t=this.currentactions;e<t.length;e++){var s=t[e];this._currentActions.push(s.action)}},ACLTypesManagerTypesAddAction.prototype.close=function(){this.self.destroy()},Object.defineProperty(ACLTypesManagerTypesAddAction.prototype,"adddisabled",{get:function(){return""==this.action||0<=this._currentActions.indexOf(this.action)},enumerable:!1,configurable:!0}),ACLTypesManagerTypesAddAction.prototype.add=function(){this.addaction.emit(this.action),this.close()},__decorate([core_1.Component({selector:"acltypes-manager-types-add-action",template:'<system-modal><system-modal-header (close)="close()"><system-label label="LBL_ADD_ACTION"></system-label></system-modal-header><system-modal-content><div class="slds-form-element"><label class="slds-form-element__label"><system-label label="LBL_ACTION"></system-label></label><div class="slds-form-element__control"><input type="text" class="slds-input" [(ngModel)]="action"></div></div></system-modal-content><system-modal-footer><button class="slds-button slds-button--neutral" (click)="close()"><system-label label="LBL_CANCEL"></system-label></button> <button [disabled]="adddisabled" class="slds-button slds-button--brand" (click)="add()"><system-label label="LBL_ADD"></system-label></button></system-modal-footer></system-modal>'}),__metadata("design:paramtypes",[services_1.backend,services_1.metadata,services_1.language,services_1.modelutilities])],ACLTypesManagerTypesAddAction)}();exports.ACLTypesManagerTypesAddAction=ACLTypesManagerTypesAddAction;var ACLObjectsManager=function(){function ACLObjectsManager(e,t){this.modelutilities=e,this.elementRef=t,this.activeobjectid="",this.activetypeid=""}return Object.defineProperty(ACLObjectsManager.prototype,"contentStyle",{get:function(){return{height:"calc(100% - "+this.elementmanagercontent.element.nativeElement.getBoundingClientRect().top+"px"}},enumerable:!1,configurable:!0}),ACLObjectsManager.prototype.setObject=function(e){this.activeobjectid=e},ACLObjectsManager.prototype.setType=function(e){this.activetypeid=e},__decorate([core_1.ViewChild("managercontent",{read:core_1.ViewContainerRef,static:!0}),__metadata("design:type",core_1.ViewContainerRef)],ACLObjectsManager.prototype,"elementmanagercontent",void 0),__decorate([core_1.Component({template:'<div style="height: 100%;"><div><acl-manager-header displaylabel="LBL_SPICEACLOBJECTS"></acl-manager-header></div><div #managercontent class="slds-grid" [ngStyle]="contentStyle"><aclobjects-manager-objects class="slds-size--1-of-2 slds-border--right" (typeselected)="setType($event)" (objectselected)="setObject($event)"></aclobjects-manager-objects><aclobjects-manager-object [objectid]="activeobjectid" class="slds-size--1-of-2" style="height: 100%;"></aclobjects-manager-object></div></div>'}),__metadata("design:paramtypes",[services_1.modelutilities,core_1.ElementRef])],ACLObjectsManager)}();exports.ACLObjectsManager=ACLObjectsManager;var ACLObjectsManagerObjects=function(){function e(e,t,s){var l=this;this.backend=e,this.modal=t,this.language=s,this.loading=!1,this.acltypes=[],this.activeTypeId="",this.aclobjects=[],this.activeObjectId="",this.searchterm="",this.objectselected=new core_1.EventEmitter,this.typeselected=new core_1.EventEmitter,this.backend.getRequest("module/SpiceACLObjects/modules").subscribe(function(e){l.acltypes=e,l.acltypes.sort(function(e,t){return e.module>t.module?1:-1})})}return e.prototype.keyUp=function(e){"Enter"===e.key&&this.getObjects()},e.prototype.getObjects=function(){var t=this;this.loading=!0,this.aclobjects=[];var e={moduleid:this.activeTypeId,searchterm:this.searchterm};this.backend.getRequest("module/SpiceACLObjects",e).subscribe(function(e){t.aclobjects=e,t.aclobjects.sort(function(e,t){return e.name>t.name?1:-1}),t.loading=!1})},Object.defineProperty(e.prototype,"contentStyle",{get:function(){return{height:"calc(100% - "+this.header.element.nativeElement.getBoundingClientRect().height+"px)"}},enumerable:!1,configurable:!0}),e.prototype.getType=function(e){return this.language.getFieldDisplayOptionValue("SpiceACLObjects","spiceaclobjecttype",e)},e.prototype.selectType=function(e){this.getObjects(),this.activeObjectId="",this.objectselected.emit(this.activeObjectId),this.typeselected.emit(this.activeTypeId)},e.prototype.addObject=function(){var t=this;this.modal.openModal("ACLObjectsManagerAddObjectModal").subscribe(function(e){e.instance.sysmodule_id=t.activeTypeId,e.instance.newObjectData.subscribe(function(e){e&&(t.aclobjects.push(e),t.selectObject(e))})})},e.prototype.addDefaultObjects=function(){var e,t=this;0==this.aclobjects.length&&this.activeTypeId&&(this.loading=!0,e={moduleid:this.activeTypeId,modulename:this.acltypes.find(function(e){return e.id==t.activeTypeId}).module},this.backend.postRequest("module/SpiceACLObjects/defaultobjects",{},e).subscribe(function(e){t.getObjects(),t.loading=!1}))},e.prototype.selectObject=function(e){this.activeObjectId=e.id,this.objectselected.emit(this.activeObjectId)},e.prototype.activateObject=function(t){var s=this;this.backend.postRequest("module/SpiceACLObjects/"+t+"/activation").subscribe(function(e){s.aclobjects.some(function(e){if(e.id==t)return e.status="r",!0})})},e.prototype.deactivateObject=function(t){var s=this;this.backend.deleteRequest("module/SpiceACLObjects/"+t+"/activation").subscribe(function(e){s.aclobjects.some(function(e){if(e.id==t)return e.status="d",!0})})},__decorate([core_1.ViewChild("header",{read:core_1.ViewContainerRef,static:!0}),__metadata("design:type",core_1.ViewContainerRef)],e.prototype,"header",void 0),__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],e.prototype,"objectselected",void 0),__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],e.prototype,"typeselected",void 0),__decorate([core_1.Component({selector:"aclobjects-manager-objects",template:'<div style="height: 100%;"><div #header class="slds-grid slds-grid--vertical-align-center slds-p-around--x-small"><div class="slds-form-element__control slds-size--1-of-3 slds-p-right--xx-small"><div class="slds-select_container"><select class="slds-select" [(ngModel)]="activeTypeId" (change)="selectType($event)" [disabled]="acltypes.length == 0"><ng-container *ngFor="let acltype of acltypes"><option [value]="acltype.id">{{acltype.module}}</option></ng-container></select></div></div><input [disabled]="!activeTypeId" class="slds-input" type="text" [(ngModel)]="searchterm" (keyup)="keyUp($event)"><div class="slds-p-left--xx-small"><button class="slds-button slds-button--icon-border" [disabled]="!activeTypeId" (click)="addObject()"><system-button-icon icon="new"></system-button-icon></button></div><div class="slds-p-left--xx-small"><button class="slds-button slds-button--icon-border" [disabled]="!activeTypeId || aclobjects.length > 0" (click)="addDefaultObjects()"><system-button-icon icon="insert_template"></system-button-icon></button></div></div><div class="slds-scrollable" [ngStyle]="contentStyle"><div *ngIf="loading; else typesdisplay" class="slds-p-around--medium slds-align--absolute-center"><system-spinner></system-spinner></div><ng-template #typesdisplay><table class="slds-table slds-table_bordered slds-table_cell-buffer"><thead><tr class="slds-text-title_caps"><th scope="col"><div class="slds-truncate"><system-label label="LBL_NAME"></system-label></div></th><th scope="col"><div class="slds-truncate"><system-label label="LBL_TYPE"></system-label></div></th><th scope="col"><div class="slds-truncate"><system-label label="LBL_ACTIVITIES"></system-label></div></th><th scope="col" style="width: 3rem;"></th></tr></thead><tbody><tr *ngFor="let aclobject of aclobjects" (click)="selectObject(aclobject)" [ngClass]="{\'slds-theme--shade\': aclobject.id == activeObjectId}"><td><div class="slds-truncate">{{aclobject.name}}</div></td><td><div class="slds-truncate">{{getType(aclobject.spiceaclobjecttype)}}</div></td><td><div class="slds-truncate">{{aclobject.activity}}</div></td><td style="width: 3rem;"><div class="slds-grid"><system-custom-icon *ngIf="aclobject.status == \'r\'" icon="light-bulb-on" size="x-small" addclasses="slds-icon slds-icon-text-default" (click)="deactivateObject(aclobject.id)"></system-custom-icon><system-custom-icon *ngIf="aclobject.status != \'r\'" icon="light-bulb-off" size="x-small" addclasses="slds-icon slds-icon-text-light" (click)="activateObject(aclobject.id)"></system-custom-icon><system-custom-icon [ngClass]="{\'slds-hidden\': !aclobject.description}" icon="info" size="x-small" addclasses="slds-icon slds-icon-text-default"></system-custom-icon><system-custom-icon *ngIf="aclobject.customSQL" icon="sql" size="x-small" addclasses="slds-p-left--xx-small slds-icon slds-icon-text-default"></system-custom-icon></div></td></tr></tbody></table></ng-template></div></div>'}),__metadata("design:paramtypes",[services_1.backend,services_1.modal,services_1.language])],e)}();exports.ACLObjectsManagerObjects=ACLObjectsManagerObjects;var ACLObjectsManagerAddObjectModal=function(){function ACLObjectsManagerAddObjectModal(e,t,s,l){this.metadata=e,this.model=t,this.view=s,this.language=l,this.self={},this.fieldset="",this.sysmodule_id="",this.newObjectData=new core_1.EventEmitter,this.model.module="SpiceACLObjects",this.model.initialize(),this.model.setField("status","d"),this.view.isEditable=!0,this.view.setEditMode();l=this.metadata.getComponentConfig("ACLObjectsManagerAddObjectModal");this.fieldset=l.fieldset}return ACLObjectsManagerAddObjectModal.prototype.ngOnInit=function(){this.model.setField("sysmodule_id",this.sysmodule_id)},ACLObjectsManagerAddObjectModal.prototype.close=function(){this.self.destroy()},ACLObjectsManagerAddObjectModal.prototype.save=function(){var t=this;this.model.save().subscribe(function(e){t.newObjectData.emit(t.model.data),t.close()})},__decorate([core_1.Input(),__metadata("design:type",String)],ACLObjectsManagerAddObjectModal.prototype,"sysmodule_id",void 0),__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],ACLObjectsManagerAddObjectModal.prototype,"newObjectData",void 0),__decorate([core_1.Component({selector:"aclobjects-manager-add-object-modal",template:'<system-modal><system-modal-header (close)="close()"><system-label label="LBL_ADD_OBJECT"></system-label></system-modal-header><system-modal-content margin="none"><object-record-fieldset [fieldset]="fieldset" direction="vertical"></object-record-fieldset></system-modal-content><system-modal-footer><button class="slds-button slds-button--neutral" (click)="close()"><system-label label="LBL_CANCEL"></system-label></button> <button class="slds-button slds-button--brand" (click)="save()"><system-label label="LBL_SAVE"></system-label></button></system-modal-footer></system-modal>',providers:[services_1.model,services_1.view]}),__metadata("design:paramtypes",[services_1.metadata,services_1.model,services_1.view,services_1.language])],ACLObjectsManagerAddObjectModal)}();exports.ACLObjectsManagerAddObjectModal=ACLObjectsManagerAddObjectModal;var ACLObjectsManagerObject=function(){function e(e,t,s,l){this.metadata=e,this.backend=t,this.model=s,this.language=l,this.objectid="",this.typeid="",this.loaded=!1,this.tabs=[],this.activeTab="",this.model.module="SpiceACLObjects";l=this.metadata.getComponentConfig("ACLObjectsManagerObject",this.model.module);if(l.componentset)for(var i=0,a=this.metadata.getComponentSetObjects(l.componentset);i<a.length;i++){var o=a[i];this.tabs.push({tab:o.id,label:o.componentconfig.name,component:o.component}),this.activeTab||(this.activeTab=o.id)}}return e.prototype.switchTab=function(e){this.activeTab=e},e.prototype.ngOnChanges=function(){var t=this;this.loaded=!1,this.objectid&&(this.model.id=this.objectid,this.model.getData(!0).subscribe(function(e){t.loaded=!0}))},e.prototype.save=function(){this.model.save(!0)},__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"objectid",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"typeid",void 0),__decorate([core_1.ViewChild("header",{read:core_1.ViewContainerRef,static:!0}),__metadata("design:type",core_1.ViewContainerRef)],e.prototype,"header",void 0),__decorate([core_1.Component({selector:"aclobjects-manager-object",template:'<div *ngIf="loaded" class="slds-tabs_scoped" style="height: 100%;"><ul class="slds-tabs_scoped__nav" role="tablist"><li *ngFor="let tab of tabs" class="slds-tabs_scoped__item" [ngClass]="{\'slds-is-active\': tab.tab == activeTab}" (click)="switchTab(tab.tab)"><a class="slds-tabs_scoped__link" href="javascript:void(0);" role="tab"><system-label [label]="tab.label"></system-label></a></li></ul><div *ngFor="let tab of tabs" class="slds-tabs_scoped__content" [ngClass]="{\'slds-show\': tab.tab == activeTab,\'slds-hide\': tab.tab != activeTab}" role="tabpanel"><system-dynamic-component *ngIf="tab.component" [component]="tab.component"></system-dynamic-component></div><div class="slds-grid slds-grid--align-center slds-p-around--xx-small"><button class="slds-button slds-button--brand" (click)="save()"><system-label label="LBL_SAVE"></system-label></button></div></div>',providers:[services_1.model]}),__metadata("design:paramtypes",[services_1.metadata,services_1.backend,services_1.model,services_1.language])],e)}();exports.ACLObjectsManagerObject=ACLObjectsManagerObject;var ACLObjectsManagerObjectDetails=function(){function ACLObjectsManagerObjectDetails(e,t,s,l,i){this.view=e,this.metadata=t,this.model=s,this.language=l,this.backend=i,this.fieldset="",this.standardactions=[{id:"list",action:"LBL_LIST"},{id:"listrelated",action:"LBL_LISTRELATED"},{id:"view",action:"LBL_VIEW"},{id:"editrelated",action:"LBL_EDITRELATION"},{id:"edit",action:"LBL_EDIT"},{id:"create",action:"LBL_CREATE"},{id:"deleterelated",action:"LBL_REMOVERELATION"},{id:"delete",action:"LBL_DELETE"},{id:"export",action:"LBL_EXPORT"},{id:"import",action:"LBL_IMPORT"},{id:"massupdate",action:"LBL_MASSUPDATE"}],this.objectactions=[],this.view.isEditable=!0,this.view.setEditMode();i=this.metadata.getComponentConfig("ACLObjectsManagerObjectDetails","SpiceACLObjects");this.fieldset=i.fieldset}return ACLObjectsManagerObjectDetails.prototype.ngOnInit=function(){var t=this;this.backend.getRequest("module/SpiceACLObjects/modules/"+this.model.getFieldValue("sysmodule_id")+"/actions").subscribe(function(e){t.objectactions=e})},Object.defineProperty(ACLObjectsManagerObjectDetails.prototype,"showActions",{get:function(){return"0"==this.model.getFieldValue("spiceaclobjecttype")||"3"==this.model.getFieldValue("spiceaclobjecttype")},enumerable:!1,configurable:!0}),ACLObjectsManagerObjectDetails.prototype.getActionValue=function(e){for(var t=0,s=this.model.getFieldValue("objectactions");t<s.length;t++)if(s[t].spiceaclaction_id==e)return!0;return!1},ACLObjectsManagerObjectDetails.prototype.setActionValue=function(e,t){t.preventDefault();for(var s=this.model.getFieldValue("objectactions"),l=0,i=0,a=s;i<a.length;i++){if(a[i].spiceaclaction_id==e)return s.splice(l,1),void this.model.setField("objectactions",s);l++}s.push({spiceaclobject_id:this.model.id,spiceaclaction_id:e})},__decorate([core_1.Component({selector:"aclobjects-manager-object-details",template:'<div class="slds-box--border"><h2 class="slds-text-heading--small slds-p-around--x-small"><system-label label="LBL_DETAILS"></system-label></h2><object-record-fieldset direction="vertical" [fieldset]="fieldset"></object-record-fieldset></div><div class="slds-box--border slds-m-vertical--x-small" *ngIf="showActions"><h2 class="slds-text-heading--small slds-p-around--x-small"><system-label label="LBL_OBJECT_ACTIONS"></system-label></h2><div class="slds-grid slds-p-horizontal--small slds-p-bottom--x-small"><div class="slds-size--1-of-2"><div *ngFor="let standardaction of standardactions" class="slds-form-element slds-p-horizontal--xxx-small"><div class="slds-form-element__control"><div class="slds-checkbox" (click)="setActionValue(standardaction.id, $event)"><input type="checkbox" [id]="\'action_\'+standardaction.id" [checked]="getActionValue(standardaction.id)"> <label class="slds-checkbox__label" [attr.for]="\'action_\'+standardaction.id"><span class="slds-checkbox_faux"></span> <span class="slds-form-element__label"><system-label [label]="standardaction.action"></system-label></span></label></div></div></div></div><div class="slds-size--1-of-2"><div *ngFor="let objectaction of objectactions" class="slds-form-element slds-p-horizontal--xxx-small"><div class="slds-form-element__control"><div class="slds-checkbox" (click)="setActionValue(objectaction.id, $event)"><input type="checkbox" [id]="\'action_\'+objectaction.id" [checked]="getActionValue(objectaction.id)"> <label class="slds-checkbox__label" [attr.for]="\'action_\'+objectaction.id"><span class="slds-checkbox_faux"></span> <span class="slds-form-element__label">{{objectaction.action}}</span></label></div></div></div></div></div></div>',providers:[services_1.view]}),__metadata("design:paramtypes",[services_1.view,services_1.metadata,services_1.model,services_1.language,services_1.backend])],ACLObjectsManagerObjectDetails)}();exports.ACLObjectsManagerObjectDetails=ACLObjectsManagerObjectDetails;var ACLObjectsManagerObjectFieldvalues=function(){function ACLObjectsManagerObjectFieldvalues(e,t,s,l,i,a){this.backend=e,this.view=t,this.metadata=s,this.model=l,this.language=i,this.modelutilities=a,this.fields=[],this.fieldset="",this.loadedtype="",this.view.isEditable=!0,this.view.setEditMode(),this.handleType();a=this.metadata.getComponentConfig("ACLObjectsManagerObjectFieldvalues","SpiceACLObjects");this.fieldset=a.fieldset}return ACLObjectsManagerObjectFieldvalues.prototype.handleType=function(){var t=this,e=this.model.getFieldValue("sysmodule_id");e&&this.loadedtype!=e&&(this.loadedtype=e,this.backend.getRequest("module/SpiceACLObjects/modules/"+e).subscribe(function(e){t.fields=e.authtypefields}))},ACLObjectsManagerObjectFieldvalues.prototype.getFieldValue=function(e,t){var s=this.model.getFieldValue("fieldvalues");if(s&&0<s.length)for(var l=0,i=s;l<i.length;l++){var a=i[l];if(a.spiceaclmodulefield_id==t)return a[e]}return""},ACLObjectsManagerObjectFieldvalues.prototype.setFieldValue=function(e,t,s,l){var i=this.model.getFieldValue("fieldvalues");if(i&&0<i.length)for(var a=0,o=i;a<o.length;a++){var d=o[a];if(d.spiceaclmodulefield_id==t)return void(d[e]=l.currentTarget.value)}var c={spiceaclobject_id:this.model.id,spiceaclmodulefield_id:t,operator:"",value1:"",value2:""};c[e]=l.currentTarget.value,i.push(c)},ACLObjectsManagerObjectFieldvalues.prototype.resetid=function(e){var t=0,s=this.model.getFieldValue("fieldvalues");if(s&&0<s.length)for(var l=0,i=s;l<i.length;l++){if(i[l].spiceaclmodulefield_id==e)return void s.splice(t,1);t++}},__decorate([core_1.Component({selector:"aclobjects-manager-object-fieldvalues",template:'<div *ngIf="fields.length > 0" class="slds-box"><table class="slds-table slds-table_bordered slds-table_cell-buffer"><thead><tr class="slds-text-title_caps"><th scope="col"><div class="slds-truncate"><system-label label="LBL_NAME"></system-label></div></th><th scope="col"><div class="slds-truncate"><system-label label="LBL_OPERATOR"></system-label></div></th><th scope="col"><div class="slds-truncate"><system-label label="LBL_VALUE1"></system-label></div></th><th scope="col"><div class="slds-truncate"><system-label label="LBL_VALUE2"></system-label></div></th><th scope="col"></th></tr></thead><tbody><tr *ngFor="let field of fields"><td><div class="slds-truncate">{{field.name}}</div></td><td><div class="slds-form-element__control"><div class="slds-select_container"><select class="slds-select" [value]="getFieldValue(\'operator\', field.id)" (change)="setFieldValue(\'operator\', field.id, \'change\', $event)"><option>ignore</option><option value="EQ">=</option><option value="NE">â </option><option value="GT">></option><option value="GTE">â¥</option><option value="LT"><</option><option value="LTE">â¤</option><option value="LK">Like</option><option value="IN">in</option><option value="ISEMPTY">is emtpy</option><option value="ISNEMPTY">is not emtpy</option><option value="SW">starts with</option><option value="SN">does not start with</option><option value="CU">Current User Field</option></select></div></div></td><td><div class="slds-form-element__control"><input type="text" class="slds-input" [value]="getFieldValue(\'value1\', field.id)" (blur)="setFieldValue(\'value1\', field.id, \'blur\', $event)"></div></td><td><div class="slds-form-element__control"><input type="text" class="slds-input" [value]="getFieldValue(\'value2\', field.id)" (change)="setFieldValue(\'value2\', field.id, \'change\', $event)"></div></td><td><system-utility-icon icon="clear" size="x-small" (click)="resetid(field.id)"></system-utility-icon></td></tr></tbody></table></div><div class="slds-p-top--small"><object-record-fieldset direction="vertical" [fieldset]="fieldset"></object-record-fieldset></div>',providers:[services_1.view]}),__metadata("design:paramtypes",[services_1.backend,services_1.view,services_1.metadata,services_1.model,services_1.language,services_1.modelutilities])],ACLObjectsManagerObjectFieldvalues)}();exports.ACLObjectsManagerObjectFieldvalues=ACLObjectsManagerObjectFieldvalues;var ACLObjectsManagerObjectFields=function(){function ACLObjectsManagerObjectFields(e,t,s){this.modal=e,this.model=t,this.language=s}return Object.defineProperty(ACLObjectsManagerObjectFields.prototype,"fields",{get:function(){var e=[],t=this.model.getFieldValue("fieldcontrols");if(t)for(var s=0,l=t;s<l.length;s++){var i=l[s];e.push(i)}return e},enumerable:!1,configurable:!0}),Object.defineProperty(ACLObjectsManagerObjectFields.prototype,"showFieldControls",{get:function(){return"0"==this.model.getFieldValue("spiceaclobjecttype")||"3"==this.model.getFieldValue("spiceaclobjecttype")},enumerable:!1,configurable:!0}),ACLObjectsManagerObjectFields.prototype.getFieldControl=function(e){for(var t=0,s=this.model.getFieldValue("fieldcontrols");t<s.length;t++){var l=s[t];if(l.field==e)return l.control}return""},ACLObjectsManagerObjectFields.prototype.setFieldControl=function(e,t){for(var s=0,l=this.model.getFieldValue("fieldcontrols");s<l.length;s++){var i=l[s];i.field==e&&(i.control=t.currentTarget.value)}},ACLObjectsManagerObjectFields.prototype.removeField=function(e){for(var t=this.model.getFieldValue("fieldcontrols"),s=0,l=0,i=t;l<i.length;l++){if(i[l].field==e)return t.splice(s,1),void this.model.setField("fieldcontrols",t);s++}},ACLObjectsManagerObjectFields.prototype.addField=function(){for(var c=this,t=this.model.getFieldValue("spiceacltype_module"),s=[],e=0,l=this.model.getFieldValue("fieldcontrols");e<l.length;e++){var i=l[e];s.push({name:i.field,id:i.id})}this.modal.openModal("ACLTypesManagerTypesAddFields",!0).subscribe(function(e){e.instance.module=t,e.instance.currentfields=s,e.instance.showAll=!0,e.instance.addfields.subscribe(function(e){if(e){for(var t=c.model.getFieldValue("fieldcontrols"),s=[],l=0,i=e;l<i.length;l++){var a,o=i[l],d=!1;for(a in t)t[a].field==o&&(d=!0,s.push(t[a]));d||s.push({spiceaclobject_id:c.model.id,field:o,control:1})}c.model.setField("fieldcontrols",t=s)}})})},__decorate([core_1.Component({selector:"aclobjects-manager-object-fields",template:'<div class="slds-box" *ngIf="showFieldControls; else nofieldcontrols"><table class="slds-table slds-table_bordered slds-table_cell-buffer"><thead><tr class="slds-text-title_caps"><th scope="col"><div class="slds-truncate"><system-label label="LBL_NAME"></system-label></div></th><th scope="col"><div class="slds-truncate"><system-label label="LBL_CONTROL"></system-label></div></th><th scope="col"></th></tr></thead><tbody><tr *ngFor="let field of fields"><td><div class="slds-truncate">{{field.field}}</div></td><td><div class="slds-form-element__control"><div class="slds-select_container"><select class="slds-select" [value]="getFieldControl(field.field)" (change)="setFieldControl(field.field, $event)"><option value="1"><system-label label="LBL_HIDE"></system-label></option><option value="2"><system-label label="LBL_DISPLAY"></system-label></option><option value="3"><system-label label="LBL_EDIT"></system-label></option></select></div></div></td><td><system-utility-icon class="slds-float--right" icon="clear" size="x-small" (click)="removeField(field.field)"></system-utility-icon></td></tr></tbody></table><div class="slds-align_absolute-center slds-p-top--medium"><system-utility-icon icon="new" size="x-small" (click)="addField()"></system-utility-icon></div></div><ng-template #nofieldcontrols><div class="slds-p-around--medium slds-align_absolute-center"><system-label label="LBL_NOFIELDCONTROLSFORTHISTYPE"></system-label></div></ng-template>'}),__metadata("design:paramtypes",[services_1.modal,services_1.model,services_1.language])],ACLObjectsManagerObjectFields)}();exports.ACLObjectsManagerObjectFields=ACLObjectsManagerObjectFields;var ACLProfilesManager=function(){function ACLProfilesManager(e,t,s){this.backend=e,this.modelutilities=t,this.elementRef=s,this.activeprofileid=""}return ACLProfilesManager.prototype.setProfile=function(e){this.activeprofile=e,this.activeprofileid=e.id},__decorate([core_1.Component({template:'<acl-manager-header displaylabel="LBL_SPICEACLPROFILES"></acl-manager-header><div class="slds-grid"><aclprofiles-manager-profiles class="slds-size--1-of-2 slds-border--right" (profileselected)="setProfile($event)"></aclprofiles-manager-profiles><aclprofiles-manager-profile [profileid]="activeprofileid" [profile]="activeprofile" class="slds-size--1-of-2" style="height: 100%;"></aclprofiles-manager-profile></div>'}),__metadata("design:paramtypes",[services_1.backend,services_1.modelutilities,core_1.ElementRef])],ACLProfilesManager)}();exports.ACLProfilesManager=ACLProfilesManager;var ACLProfilesManagerProfile=function(){function e(e,t,s){this.modal=e,this.language=t,this.backend=s,this.profileid="",this.loaded=!1,this.loadingobjects=!1,this.loadingusers=!1,this.activetab="profiles",this.aclobjects=[],this.aclusers=[]}return Object.defineProperty(e.prototype,"aclallusers",{get:function(){return 0<this.aclusers.filter(function(e){return"*"==e.id}).length},set:function(e){var i=this;e?this.backend.postRequest("module/SpiceACLProfiles/"+this.profileid+"/related/users",{},{userids:["*"]}).subscribe(function(e){i.aclusers.push({id:"*",user_name:""})}):this.backend.deleteRequest("module/SpiceACLProfiles/"+this.profileid+"/related/users/*").subscribe(function(e){for(var t=0,s=0,l=i.aclusers;s<l.length;s++)"*"==l[s].id&&i.aclusers.splice(t,1),t++})},enumerable:!1,configurable:!0}),e.prototype.ngOnChanges=function(){var t=this;this.loaded=!1,this.profileid&&(this.loadingobjects=!0,this.aclobjects=[],this.loadingusers=!0,this.aclusers=[],this.backend.getRequest("module/SpiceACLProfiles/"+this.profileid+"/related/spiceaclobjects").subscribe(function(e){t.aclobjects=e,t.loadingobjects=!1,t.sortobjects()}),this.backend.getRequest("module/SpiceACLProfiles/"+this.profileid+"/related/users").subscribe(function(e){t.aclusers=e,t.loadingusers=!1,t.sortusers()}))},e.prototype.selectProfile=function(){var s=this;this.modal.openModal("ACLProfilesManagerAddObjectModal").subscribe(function(e){e.instance.aclobject.subscribe(function(t){s.backend.postRequest("module/SpiceACLProfiles/"+s.profileid+"/related/spiceaclobjects/"+t.id).subscribe(function(e){s.aclobjects.push(t),s.sortobjects()})})})},e.prototype.removeProfile=function(i){var a=this;this.backend.deleteRequest("module/SpiceACLProfiles/"+this.profileid+"/related/spiceaclobjects/"+i).subscribe(function(e){for(var t=0,s=0,l=a.aclobjects;s<l.length;s++){if(l[s].id==i)return void a.aclobjects.splice(t,1);t++}})},e.prototype.save=function(){this.backend.save("SpiceACLProfiles",this.profileid,{name:this.profile.name,description:this.profile.description})},e.prototype.removeUser=function(i){var a=this;this.backend.deleteRequest("module/SpiceACLProfiles/"+this.profileid+"/related/users/"+i).subscribe(function(e){for(var t=0,s=0,l=a.aclusers;s<l.length;s++){if(l[s].id==i)return void a.aclusers.splice(t,1);t++}})},e.prototype.selectUser=function(){var l=this;this.modal.openModal("ObjectModalModuleLookup").subscribe(function(e){e.instance.module="Users",e.instance.multiselect=!0,e.instance.selectedItems.subscribe(function(t){var s;t.length&&(s=[],t.forEach(function(e){s.push(e.id)}),l.backend.postRequest("module/SpiceACLProfiles/"+l.profileid+"/related/users",{},{userids:s}).subscribe(function(e){t.forEach(function(e){l.aclusers.push({id:e.id,user_name:e.user_name})}),l.sortusers()}))})})},e.prototype.sortobjects=function(){this.aclobjects.sort(function(e,t){return e.name>t.name?1:-1})},e.prototype.sortusers=function(){this.aclusers.sort(function(e,t){return"*"!=e.id&&("*"==t.id||e.user_name>t.user_name)?1:-1})},__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"profile",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"profileid",void 0),__decorate([core_1.Component({selector:"aclprofiles-manager-profile",template:'<div *ngIf="!profileid;else objectlist" style="height: 100%;" class="slds-align_absolute-center"><span class="slds-text-heading--small">Please select a profile</span></div><ng-template #objectlist><div class="slds-tabs_scoped"><ul class="slds-tabs_scoped__nav" role="tablist"><li class="slds-tabs_scoped__item" [ngClass]="{\'slds-is-active\': activetab==\'profiles\'}" title="Profiles" role="presentation"><a class="slds-tabs_scoped__link" href="javascript:void(0);" role="tab" (click)="activetab=\'profiles\'"><system-label label="LBL_SPICEACLOBJECTS"></system-label></a></li><li class="slds-tabs_scoped__item" [ngClass]="{\'slds-is-active\': activetab==\'users\'}" title="Users" role="presentation"><a class="slds-tabs_scoped__link" href="javascript:void(0);" role="tab" (click)="activetab=\'users\'"><system-label label="LBL_USERS"></system-label></a></li><li class="slds-tabs_scoped__item" [ngClass]="{\'slds-is-active\': activetab==\'details\'}" title="DETAILS" role="presentation"><a class="slds-tabs_scoped__link" href="javascript:void(0);" role="tab" (click)="activetab=\'details\'"><system-label label="LBL_DETAILS"></system-label></a></li></ul><div system-to-bottom *ngIf="activetab==\'profiles\'"><div *ngIf="loadingobjects; else objectsdisplay" class="slds-p-around--medium slds-align--absolute-center"><system-spinner></system-spinner></div><ng-template #objectsdisplay><table class="slds-table slds-table_bordered slds-table_cell-buffer"><thead><tr class="slds-text-title_caps"><th scope="col"><div class="slds-truncate"><system-label label="LBL_NAME"></system-label></div></th><th scope="col"><div class="slds-truncate"><system-label label="LBL_MODULE"></system-label></div></th><th scope="col" style="width: 3rem;"></th></tr></thead><tbody><tr *ngFor="let aclobject of aclobjects"><td><div class="slds-truncate">{{aclobject.name}}</div></td><td><div class="slds-truncate">{{aclobject.module}}</div></td><td style="width: 3rem;"><div class="slds-grid"><system-custom-icon *ngIf="aclobject.status == \'r\'" icon="light-bulb-on" size="x-small" addclasses="slds-icon slds-icon-text-default"></system-custom-icon><system-custom-icon *ngIf="aclobject.status != \'r\'" icon="light-bulb-off" size="x-small" addclasses="slds-icon slds-icon-text-light"></system-custom-icon><system-utility-icon icon="delete" size="x-small" (click)="removeProfile(aclobject.id)"></system-utility-icon></div></td></tr></tbody></table><div class="slds-p-around--medium slds-align_absolute-center"><button class="slds-button" (click)="selectProfile()"><system-button-icon icon="new"></system-button-icon></button></div></ng-template></div><div system-to-bottom *ngIf="activetab==\'users\'"><div *ngIf="loadingusers; else usersdisplay" class="slds-p-around--medium slds-align--absolute-center"><system-spinner></system-spinner></div><ng-template #usersdisplay><div class="slds-p-around--x-small"><system-checkbox [(ngModel)]="aclallusers">all users</system-checkbox></div><div *ngIf="!aclallusers"><table class="slds-table slds-table_bordered slds-table_cell-buffer"><thead><tr class="slds-text-title_caps"><th scope="col"><div class="slds-truncate"><system-label label="LBL_USER_NAME"></system-label></div></th><th scope="col" style="width: 3rem;"></th></tr></thead><tbody><tr *ngFor="let acluser of aclusers"><td><div class="slds-truncate">{{acluser.user_name ? acluser.user_name : acluser.id}}</div></td><td style="width: 3rem;"><div *ngIf="acluser.id != \'*\'" class="slds-grid"><system-utility-icon icon="delete" size="x-small" (click)="removeUser(acluser.id)"></system-utility-icon></div></td></tr></tbody></table><div class="slds-p-around--medium slds-align_absolute-center"><button class="slds-button" (click)="selectUser()"><system-button-icon icon="new"></system-button-icon></button></div></div></ng-template></div><div *ngIf="activetab==\'details\'"><div class="slds-p-around--x-small"><div class="slds-form-element"><label class="slds-form-element__label"><system-label label="LBL_NAME"></system-label></label><div class="slds-form-element__control"><input class="slds-input" type="text" [(ngModel)]="profile.name"></div></div><div class="slds-form-element"><label class="slds-form-element__label"><system-label label="LBL_DESCRIPTION"></system-label></label><div class="slds-form-element__control"><textarea class="slds-textarea" [(ngModel)]="profile.description"></textarea></div></div><div class="slds-p-vertical--x-small slds-align--absolute-center"><button class="slds-button slds-button--brand" (click)="save()"><system-label label="LBL_SAVE"></system-label></button></div></div></div></div></ng-template>'}),__metadata("design:paramtypes",[services_1.modal,services_1.language,services_1.backend])],e)}();exports.ACLProfilesManagerProfile=ACLProfilesManagerProfile;var ACLProfilesManagerProfiles=function(){function e(e,t,s,l){this.backend=e,this.modal=t,this.language=s,this.modelutilities=l,this.loading=!1,this.aclprofiles=[],this.activeProfile={},this.activeProfileId="",this.searchterm="",this.profileselected=new core_1.EventEmitter,this.getProfiles()}return e.prototype.keyUp=function(e){"Enter"===e.key&&this.getProfiles()},e.prototype.getProfiles=function(){var t=this;this.loading=!0,this.aclprofiles=[],this.activeProfileId="",this.profileselected.emit(this.activeProfileId);var e={fields:["id","name","description","status"],searchterm:this.searchterm,limit:"-99"};this.backend.getRequest("module/SpiceACLProfiles",e).subscribe(function(e){t.aclprofiles=e.list,t.aclprofiles.sort(function(e,t){return e.name>t.name?1:-1}),t.loading=!1})},e.prototype.addProfile=function(){var t=this;this.modal.openModal("ACLProfilesManagerAddProfileModal").subscribe(function(e){e.instance.newObjectData.subscribe(function(e){e&&(t.aclprofiles.push(e),t.selectProfile(e))})})},e.prototype.selectProfile=function(e){this.activeProfile=e,this.activeProfileId=e.id,this.profileselected.emit(this.activeProfile)},e.prototype.activateProfile=function(t){var s=this;this.backend.postRequest("module/SpiceACLProfiles/"+t+"/activation").subscribe(function(e){s.aclprofiles.some(function(e){if(e.id==t)return e.status="r",!0})})},e.prototype.deactivateProfile=function(t){var s=this;this.backend.deleteRequest("module/SpiceACLProfiles/"+t+"/activation").subscribe(function(e){s.aclprofiles.some(function(e){if(e.id==t)return e.status="d",!0})})},__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],e.prototype,"profileselected",void 0),__decorate([core_1.Component({selector:"aclprofiles-manager-profiles",template:'<div class="slds-grid slds-grid--vertical-align-center slds-p-around--x-small"><input class="slds-input" type="text" [(ngModel)]="searchterm" (keyup)="keyUp($event)"><div class="slds-p-left--xx-small"><button class="slds-button slds-button--icon-border" (click)="addProfile()"><system-button-icon icon="new"></system-button-icon></button></div></div><div system-to-bottom><div *ngIf="loading; else profilesdisplay" class="slds-p-around--medium slds-align--absolute-center"><system-spinner></system-spinner></div><ng-template #profilesdisplay><table class="slds-table slds-table_bordered slds-table_cell-buffer"><thead><tr class="slds-text-title_caps"><th scope="col" class="slds-truncate"><div class="slds-truncate"><system-label label="LBL_NAME"></system-label></div></th><th scope="col" style="width: 3rem;"></th></tr></thead><tbody><tr *ngFor="let aclprofile of aclprofiles" (click)="selectProfile(aclprofile)" [ngClass]="{\'slds-theme--shade\': aclprofile.id == activeProfileId}"><td class="slds-truncate"><div>{{aclprofile.name}}</div></td><td style="width: 3rem;"><div class="slds-grid"><system-custom-icon *ngIf="aclprofile.status == \'r\'" icon="light-bulb-on" size="x-small" addclasses="slds-icon slds-icon-text-default" (click)="deactivateProfile(aclprofile.id)"></system-custom-icon><system-custom-icon *ngIf="aclprofile.status != \'r\'" icon="light-bulb-off" size="x-small" addclasses="slds-icon slds-icon-text-light" (click)="activateProfile(aclprofile.id)"></system-custom-icon></div></td></tr></tbody></table></ng-template></div>'}),__metadata("design:paramtypes",[services_1.backend,services_1.modal,services_1.language,services_1.modelutilities])],e)}();exports.ACLProfilesManagerProfiles=ACLProfilesManagerProfiles;var ACLProfilesManagerAddObjectModal=function(){function ACLProfilesManagerAddObjectModal(e,t){var s=this;this.language=e,this.backend=t,this.self={},this.acltypes=[],this.aclobjects=[],this.activeTypeId="",this.activeObjectId="",this.searchterm="",this.loading=!1,this.aclobject=new core_1.EventEmitter,this.backend.getRequest("module/SpiceACLObjects/modules").subscribe(function(e){s.acltypes=e,s.acltypes.sort(function(e,t){return e.module>t.module?1:-1})})}return ACLProfilesManagerAddObjectModal.prototype.keyUp=function(e){"Enter"===e.key&&this.getObjects()},ACLProfilesManagerAddObjectModal.prototype.getObjects=function(){var t=this;this.loading=!0,this.aclobjects=[];var e={moduleid:this.activeTypeId,searchterm:this.searchterm};this.backend.getRequest("module/SpiceACLObjects",e).subscribe(function(e){t.aclobjects=e,t.aclobjects.sort(function(e,t){return e.name>t.name?1:-1}),t.loading=!1})},ACLProfilesManagerAddObjectModal.prototype.getType=function(e){return this.language.getFieldDisplayOptionValue("SpiceACLObjects","spiceaclobjecttype",e)},ACLProfilesManagerAddObjectModal.prototype.selectType=function(e){this.getObjects(),this.activeObjectId=""},Object.defineProperty(ACLProfilesManagerAddObjectModal.prototype,"currentModule",{get:function(){for(var e=0,t=this.acltypes;e<t.length;e++){var s=t[e];if(s.id==this.activeTypeId)return s.module}return""},enumerable:!1,configurable:!0}),ACLProfilesManagerAddObjectModal.prototype.selectObject=function(e){e.spiceacltype_module=this.currentModule,this.aclobject.emit(e),this.close()},ACLProfilesManagerAddObjectModal.prototype.close=function(){this.self.destroy()},__decorate([core_1.ViewChild("header",{read:core_1.ViewContainerRef,static:!0}),__metadata("design:type",core_1.ViewContainerRef)],ACLProfilesManagerAddObjectModal.prototype,"header",void 0),__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],ACLProfilesManagerAddObjectModal.prototype,"aclobject",void 0),__decorate([core_1.Component({template:'<system-modal><system-modal-header (close)="close()"><system-label label="LBL_SELECT_SPICEACLOBJECT"></system-label></system-modal-header><system-modal-content margin="none" [grow]="true"><div #header class="slds-grid slds-grid--vertical-align-center slds-p-around--x-small"><div class="slds-form-element__control slds-size--1-of-3 slds-p-right--xx-small"><div class="slds-select_container"><select class="slds-select" [(ngModel)]="activeTypeId" (change)="selectType($event)" [disabled]="acltypes.length == 0"><ng-container *ngFor="let acltype of acltypes"><option [value]="acltype.id">{{acltype.module}}</option></ng-container></select></div></div><input [disabled]="!activeTypeId" class="slds-input" type="text" [(ngModel)]="searchterm" (keyup)="keyUp($event)"></div><div *ngIf="loading; else typesdisplay" class="slds-p-around--medium slds-align--absolute-center"><system-spinner></system-spinner></div><ng-template #typesdisplay><table class="slds-table slds-table_bordered slds-table_cell-buffer"><thead><tr class="slds-text-title_caps"><th scope="col"><div class="slds-truncate"><system-label label="LBL_NAME"></system-label></div></th><th scope="col"><div class="slds-truncate"><system-label label="LBL_TYPE"></system-label></div></th><th scope="col" style="width: 3rem;"></th></tr></thead><tbody><tr *ngFor="let aclobject of aclobjects" (click)="selectObject(aclobject)" [ngClass]="{\'slds-theme--shade\': aclobject.id == activeObjectId}"><td><div class="slds-truncate">{{aclobject.name}}</div></td><td><div class="slds-truncate">{{getType(aclobject.spiceaclobjecttype)}}</div></td><td style="width: 3rem;"><system-custom-icon *ngIf="aclobject.status == \'r\'" icon="light-bulb-on" size="x-small" addclasses="slds-icon slds-icon-text-default"></system-custom-icon><system-custom-icon *ngIf="aclobject.status != \'r\'" icon="light-bulb-off" size="x-small" addclasses="slds-icon slds-icon-text-light"></system-custom-icon></td></tr></tbody></table></ng-template></system-modal-content><system-modal-footer><button class="slds-button slds-button--neutral" (click)="close()"><system-label label="LBL_CANCEL"></system-label></button></system-modal-footer></system-modal>',providers:[services_1.model]}),__metadata("design:paramtypes",[services_1.language,services_1.backend])],ACLProfilesManagerAddObjectModal)}();exports.ACLProfilesManagerAddObjectModal=ACLProfilesManagerAddObjectModal;var ACLProfilesManagerAddProfileModal=function(){function ACLProfilesManagerAddProfileModal(e,t,s,l){this.metadata=e,this.model=t,this.view=s,this.language=l,this.self={},this.fieldset="",this.sysmodule_id="",this.newObjectData=new core_1.EventEmitter,this.model.module="SpiceACLProfiles",this.model.initialize(),this.model.setField("status","d"),this.view.isEditable=!0,this.view.setEditMode();l=this.metadata.getComponentConfig("ACLProfilesManagerAddProfileModal",this.model.module);this.fieldset=l.fieldset}return ACLProfilesManagerAddProfileModal.prototype.ngOnInit=function(){this.model.setField("sysmodule_id",this.sysmodule_id)},ACLProfilesManagerAddProfileModal.prototype.close=function(){this.self.destroy()},ACLProfilesManagerAddProfileModal.prototype.save=function(){var t=this;this.model.save().subscribe(function(e){t.newObjectData.emit(t.model.data),t.close()})},__decorate([core_1.Input(),__metadata("design:type",String)],ACLProfilesManagerAddProfileModal.prototype,"sysmodule_id",void 0),__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],ACLProfilesManagerAddProfileModal.prototype,"newObjectData",void 0),__decorate([core_1.Component({template:'<system-modal><system-modal-header (close)="close()"><system-label label="LBL_ADD_SPICEACLPROFILE"></system-label></system-modal-header><system-modal-content margin="none"><object-record-fieldset [fieldset]="fieldset" direction="vertical"></object-record-fieldset></system-modal-content><system-modal-footer><button class="slds-button slds-button--neutral" (click)="close()"><system-label label="LBL_CANCEL"></system-label></button> <button class="slds-button slds-button--brand" (click)="save()"><system-label label="LBL_SAVE"></system-label></button></system-modal-footer></system-modal>',providers:[services_1.model,services_1.view]}),__metadata("design:paramtypes",[services_1.metadata,services_1.model,services_1.view,services_1.language])],ACLProfilesManagerAddProfileModal)}();exports.ACLProfilesManagerAddProfileModal=ACLProfilesManagerAddProfileModal;var ACLUserProfiles=function(){function ACLUserProfiles(e,t,s,l,i,a){var o=this;this.backend=e,this.toast=t,this.modal=s,this.model=l,this.session=i,this.language=a,this.userProfiles=[],this.selectedProfileId="",this.profileObjects=[],this.backend.getRequest("module/Users/"+this.model.id+"/related/spiceaclprofiles").subscribe(function(e){o.userProfiles=e})}return ACLUserProfiles.prototype.selectProfile=function(e){var s=this;this.selectedProfileId!=e&&(this.selectedProfileId=e,this.profileObjects=[],this.backend.getRequest("module/SpiceACLProfiles/"+e+"/related/spiceaclobjects").subscribe(function(e){for(var t in e)s.profileObjects.push(e[t])}))},__decorate([core_1.Component({template:'<table class="slds-table slds-table_bordered slds-table_cell-buffer" style="box-shadow:0px 2px 5px 0 rgba(0,0,0,.1); border-radius: .15rem"><thead class="slds-table--bordered slds-text-align_center"><tr class="slds-text-title--caps"><th><system-label label="LBL_SPICEACLPROFILE"></system-label></th><th><system-label label="LBL_SCOPE"></system-label></th><th><system-label label="LBL_ACTIVE"></system-label></th></tr></thead><tbody><tr *ngFor="let userProfile of userProfiles" class="slds-hint-parent" [ngClass]="{\'slds-is-selected\': userProfile.id == selectedProfileId}"><ng-container><td (click)="selectProfile(userProfile.id)">{{userProfile.name}}</td><td><system-custom-icon [icon]="userProfile.user_id == \'*\' ? \'global\' : \'custom\'" size="x-small"></system-custom-icon></td><td><system-custom-icon [icon]="userProfile.statue == \'r\' ? \'light-bulb-off\' : \'light-bulb-on\'" size="x-small" addclasses="slds-icon slds-icon-text-default"></system-custom-icon></td></ng-container></tr></tbody></table><table *ngIf="profileObjects.length > 0" class="slds-table slds-table_bordered slds-table_cell-buffer slds-m-top--medium" style="box-shadow:0px 2px 5px 0 rgba(0,0,0,.1); border-radius: .15rem"><thead class="slds-table--bordered slds-text-align_center"><tr class="slds-text-title--caps"><th><system-label label="LBL_SPICEACLOBJECT"></system-label></th><th><system-label label="LBL_ACTIVE"></system-label></th></tr></thead><tbody><tr *ngFor="let profileObject of profileObjects" class="slds-hint-parent"><ng-container><td>{{profileObject.name}}</td><td><system-custom-icon [icon]="profileObject.statue == \'r\' ? \'light-bulb-off\' : \'light-bulb-on\'" size="x-small" addclasses="slds-icon slds-icon-text-default"></system-custom-icon></td></ng-container></tr></tbody></table>'}),__metadata("design:paramtypes",[services_1.backend,services_1.toast,services_1.modal,services_1.model,services_1.session,services_1.language])],ACLUserProfiles)}();exports.ACLUserProfiles=ACLUserProfiles;var fieldACLAdditionalUsers=function(n){function fieldACLAdditionalUsers(e,t,s,l,i,a,o,d){var c=n.call(this,e,t,s,l,i)||this;return c.model=e,c.view=t,c.language=s,c.metadata=l,c.router=i,c.elementRef=a,c.renderer=o,c.modal=d,c.lookupSearchOpen=!1,c.lookupSearchTerm="",c}return __extends(fieldACLAdditionalUsers,n),Object.defineProperty(fieldACLAdditionalUsers.prototype,"displayAssignedUser",{get:function(){return this.fieldconfig.displayassigneduser},enumerable:!1,configurable:!0}),Object.defineProperty(fieldACLAdditionalUsers.prototype,"users",{get:function(){try{return JSON.parse(this.model.getField("spiceacl_additional_users"))}catch(e){return[]}},set:function(e){this.model.setField("spiceacl_additional_users",JSON.stringify(e))},enumerable:!1,configurable:!0}),fieldACLAdditionalUsers.prototype.addItem=function(t){var e=this.users;-1==e.findIndex(function(e){return e.id==t.id})&&e.push({id:t.id,summary_text:t.text}),this.closePopups(),this.users=e},fieldACLAdditionalUsers.prototype.onClick=function(e){this.elementRef.nativeElement.contains(e.target)||this.closePopups()},fieldACLAdditionalUsers.prototype.closePopups=function(){this.lookupSearchOpen=!1,this.lookupSearchTerm="",this.clickListener()},fieldACLAdditionalUsers.prototype.removeItem=function(t){var e=this.users,s=e.findIndex(function(e){return e.id==t});0<=s&&e.splice(s,1),this.users=e},fieldACLAdditionalUsers.prototype.onFocus=function(){this.openSearchDropDown()},fieldACLAdditionalUsers.prototype.onFieldClick=function(){this.openSearchDropDown()},fieldACLAdditionalUsers.prototype.openSearchDropDown=function(){var t=this;this.lookupSearchOpen=!0,this.clickListener=this.renderer.listen("document","click",function(e){return t.onClick(e)})},fieldACLAdditionalUsers.prototype.parentSearchStyle=function(){if(this.lookupSearchOpen)return{display:"block"}},fieldACLAdditionalUsers.prototype.searchWithModal=function(){var t=this;this.modal.openModal("ObjectModalModuleLookup").subscribe(function(e){e.instance.module="Users",e.instance.multiselect=!1,e.instance.selectedItems.subscribe(function(e){t.addItem({id:e[0].id,text:e[0].summary_text,data:e[0]})}),e.instance.usedSearchTerm.subscribe(function(e){t.lookupSearchTerm=e}),e.instance.searchTerm=t.lookupSearchTerm})},__decorate([core_1.Component({template:'<field-label *ngIf="displayLabel" [fieldname]="fieldname" [fieldconfig]="fieldconfig"></field-label><field-generic-display *ngIf="!isEditMode()" [fielddisplayclass]="fielddisplayclass" [fieldconfig]="fieldconfig" [editable]="isEditable()"><ul class="slds-list_horizontal slds-has-dividers_left"><li *ngFor="let user of users" class="slds-item"><a href="javascript:void(0);" class="slds-text-link_reset" system-model-popover module="Users" [id]="user.id">{{user.summary_text}}</a></li></ul></field-generic-display><div *ngIf="isEditable() && isEditMode()" class="slds-form-element__control" [ngClass]="getFieldClass()"><div class="slds-form-element__control slds-box--border"><div class="slds-combobox_container"><div class="slds-combobox slds-dropdown-trigger slds-dropdown-trigger_click" [ngClass]="{\'slds-is-open\': lookupSearchOpen}" role="combobox"><div class="slds-combobox__form-element slds-input-has-icon slds-input-has-icon_right" role="none"><input type="text" class="slds-input slds-combobox__input" aria-autocomplete="list" (focus)="onFocus()" (click)="onFieldClick()" autoComplete="off" role="textbox" [(ngModel)]="lookupSearchTerm" [placeholder]="language.getModuleCombinedLabel(\'LBL_SEARCH\', \'Users\')"> <button (click)="searchWithModal()" class="slds-button slds-button_icon slds-input__icon slds-input__icon_right"><system-button-icon [icon]="\'search\'"></system-button-icon></button></div><div class="slds-dropdown slds-dropdown_length-with-icon-7 slds-dropdown_fluid" role="listbox"><field-lookup-recent *ngIf="lookupSearchOpen && lookupSearchTerm === \'\'" module="Users" (selectedObject)="addItem($event)"></field-lookup-recent><field-lookup-search *ngIf="lookupSearchOpen && lookupSearchTerm !== \'\'" module="Users" (selectedObject)="addItem($event)" (searchWithModal)="searchWithModal()" [searchterm]="lookupSearchTerm" [disableadd]="true"></field-lookup-search></div></div></div></div><ul *ngIf="users.length > 0" class="slds-listbox slds-listbox_horizontal" role="group"><li *ngFor="let user of users" role="presentation" class="slds-listbox__item slds-p-top_xxx-small"><div class="slds-pill"><span class="slds-icon_container slds-icon-standard-account slds-pill__icon_container"><system-icon module="Users" size="small"></system-icon></span> <span class="slds-pill__label" system-model-popover module="Users" [id]="user.id">{{user.summary_text}}</span> <button class="slds-button slds-button--icon slds-pill__remove" (click)="removeItem(user.id)"><system-button-icon [icon]="\'close\'"></system-button-icon></button></div></li></ul><field-messages [fieldname]="fieldname"></field-messages></div>',styles:["input, input:focus { border: none; outline: none;}"]}),__metadata("design:paramtypes",[services_1.model,services_1.view,services_1.language,services_1.metadata,router_1.Router,core_1.ElementRef,core_1.Renderer2,services_1.modal])],fieldACLAdditionalUsers)}(objectfields_1.fieldGeneric);exports.fieldACLAdditionalUsers=fieldACLAdditionalUsers;var ModuleACL=function(){function ModuleACL(){}return __decorate([core_1.NgModule({imports:[common_1.CommonModule,forms_1.FormsModule,objectfields_1.ObjectFields,globalcomponents_1.GlobalComponents,objectcomponents_1.ObjectComponents,systemcomponents_1.SystemComponents,directives_1.DirectivesModule],declarations:[ACLTypesManager,ACLManagerHeader,ACLTypesManagerTypes,ACLTypesManagerTypesActions,ACLTypesManagerTypesAddAction,ACLTypesManagerTypesFields,ACLTypesManagerTypesAddFields,ACLObjectsManager,ACLObjectsManagerObjects,ACLObjectsManagerAddObjectModal,ACLObjectsManagerObject,ACLObjectsManagerObjectDetails,ACLObjectsManagerObjectFieldvalues,ACLObjectsManagerObjectFields,ACLProfilesManager,ACLProfilesManagerProfiles,ACLProfilesManagerProfile,ACLProfilesManagerAddProfileModal,ACLProfilesManagerAddObjectModal,ACLUserProfiles,fieldACLAdditionalUsers]})],ModuleACL)}();exports.ModuleACL=ModuleACL;