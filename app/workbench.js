/*!
 * 
 *                     aacService
 *
 *                     release: 2023.01.001
 *
 *                     date: 2023-05-08 11:03:49
 *
 *                     build: 2023.01.001.1683536629965
 *
 */
"use strict";(self.webpackChunkcore=self.webpackChunkcore||[]).push([["src_workbench_workbench_module_ts"],{2426:(e,t,s)=>{s.r(t),s.d(t,{WorkbenchModule:()=>Zg});var i=s(6895),n=s(433),l=s(1652),o=s(4357),a=s(5886),d=s(8363),r=s(3283),c=s(3418),g=s(1571),u=s(8859);let m=(()=>{class DictionaryManagerItemStatus{constructor(){this.disabled=!1}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}getStatusColor(){switch(this.status){case"a":return"slds-icon-text-success";case"i":return"slds-icon-text-light";default:return"slds-icon-text-warning"}}writeValue(e){this.status=e}toggleValue(e){this.disabled||(e.stopPropagation(),"a"===this.status?this.status="i":this.status="a",this.onChange(this.status))}}return DictionaryManagerItemStatus.ɵfac=function(e){return new(e||DictionaryManagerItemStatus)},DictionaryManagerItemStatus.ɵcmp=g.Xpm({type:DictionaryManagerItemStatus,selectors:[["dictionary-manager-item-status"]],inputs:{disabled:"disabled"},features:[g._Bn([{provide:n.JU,useExisting:(0,g.Gpc)((()=>DictionaryManagerItemStatus)),multi:!0}])],decls:1,vars:1,consts:[["size","xx-small","icon","light_bulb",1,"slds-p-right--xx-small",3,"colorclass","click"]],template:function(e,t){1&e&&(g.TgZ(0,"system-utility-icon",0),g.NdJ("click",(function(e){return t.toggleValue(e)})),g.qZA()),2&e&&g.Q6J("colorclass",t.getStatusColor())},dependencies:[u.r],encapsulation:2}),DictionaryManagerItemStatus})();var p=s(4505),h=s(4154),f=s(5329),b=s(6163),Z=s(2032),y=s(3278),M=s(4044),x=s(6625);let v=(()=>{class dictionarymanager{constructor(e,t,s,i,n,l,o,a){this.backend=e,this.metadata=t,this.language=s,this.modelutilities=i,this.navigation=n,this.toast=l,this.modal=o,this.configurationService=a,this.reservedwords=[],this.keywords=[],this.changescope=this.configurationService.getCapabilityConfig("core").edit_mode,this.domaindefinitions=[],this.domainfields=[],this.dictionarydefinitions=[],this.dictionaryitems=[],this.dictionaryrelationships=[],this.dictionaryrelationshipfields=[],this.dictionaryrelationshiprelatefields=[],this.dictionaryindexes=[],this.dictionaryindexitems=[],this.loadDictionaryDefinitions(),this.loadWords(),this.navigation.addModelEditing("dictmgr","Administration",this,"dictionary manager")}ngOnDestroy(){this.navigation.removeModelEditing("dictmgr","Administration")}isDirty(){let e=!1;const t=JSON.parse(this.loaded);return["dictionarydefinitions","dictionaryitems","dictionaryrelationships","dictionaryrelationshiprelatefields","dictionaryindexes","dictionaryindexitem"].forEach((s=>{Array.isArray(this[s])&&this[s].forEach((i=>{const n=t[s].find((e=>e.id==i.id));(!n||n&&JSON.stringify(n)!=JSON.stringify(i))&&(e=!0)}))})),e}loadDictionaryDefinitions(){let e=this.modal.await("LBL_LOADING");this.backend.getRequest("dictionary/definitions").subscribe({next:t=>{this.domaindefinitions=t.domaindefinitions,this.domainfields=t.domainfields,this.dictionarydefinitions=t.dictionarydefinitions,this.dictionaryitems=t.dictionaryitems,this.dictionaryrelationships=t.dictionaryrelationships,this.dictionaryrelationshiprelatefields=t.dictionaryrelationshiprelatefields,this.dictionaryindexes=t.dictionaryindexes,this.dictionaryindexitems=t.dictionaryindexitems,this.settings=t.settings,this.loaded=JSON.stringify(t),e.emit(!0)},error:()=>{e.emit(!0)}})}loadWords(){this.configurationService.getData("spicewords")?(this.reservedwords=this.configurationService.getData("spicewords").reservedwords,this.keywords=this.configurationService.getData("spicewords").keywords):this.backend.getRequest("dictionary/spicewords").subscribe((e=>{this.reservedwords=e.reservedwords,this.keywords=e.keywords,this.configurationService.setData("spicewords",e)}))}canChange(e){return"all"==this.changescope||"custom"==this.changescope&&"c"==e&&(this.currentDictionaryScope="c",!0)}get defaultScope(){return"all"==this.changescope?"g":"c"}getStatusColor(e){switch(e){case"a":return"slds-icon-text-success";case"i":return"slds-icon-text-light";default:return"slds-icon-text-warning"}}getDomainName(e){let t=this.domaindefinitions.find((t=>t.id==e));return t?t.name:e}getDictionaryDefinitionName(e){let t=this.dictionarydefinitions.find((t=>t.id==e));return t?t.name:e}getDictionaryItemName(e){let t=this.dictionaryitems.find((t=>t.id==e));return t?t.name:e}getDictionaryDefinitionItems(e){let t=[];for(let s of this.dictionaryitems.filter((t=>t.sysdictionarydefinition_id==e&&0==t.deleted)).sort(((e,t)=>e.sequence>t.sequence?1:-1)))s.sysdictionary_ref_id&&s.sysdictionary_ref_id!=e?t=t.concat(this.getDictionaryDefinitionItems(s.sysdictionary_ref_id)):s.sysdictionary_ref_id||t.push(s);return t}save(){let e=this.determineChangedRecords();this.backend.postRequest("dictionary/definitions",{},e).subscribe({next:e=>{this.loaded=JSON.stringify(e),this.toast.sendToast(this.language.getLabel("LBL_DATA_SAVED"),"success")},error:()=>{this.toast.sendToast(this.language.getLabel("ERR_FAILED_TO_EXECUTE"),"error")}})}determineChangedRecords(){let e=JSON.parse(this.loaded),t={dictionarydefinitions:[],dictionaryitems:[],dictionaryrelationships:[],dictionaryrelationshiprelatefields:[],dictionaryindexes:[],dictionaryindexitems:[]};for(let s in t)for(let i of this[s]){let n=e[s].find((e=>e.id==i.id));(!n||n&&JSON.stringify(n)!=JSON.stringify(i))&&t[s].push(i)}return t}repairDictionary(e){let t={dictionaries:[e.name]};this.backend.postRequest("admin/repair/dictionary",{},t).subscribe((e=>{e.success?this.toast.sendToast(this.language.getLabel("LBL_DICTIONARY_REPAIRED"),"success"):this.toast.sendToast(this.language.getLabel("LBL_NO_DATA"),"error")}))}}return dictionarymanager.ɵfac=function(e){return new(e||dictionarymanager)(g.LFG(p.y),g.LFG(h.Pu),g.LFG(f.d),g.LFG(b.A),g.LFG(Z.G),g.LFG(y.A),g.LFG(M.o),g.LFG(x.C))},dictionarymanager.ɵprov=g.Yz7({token:dictionarymanager,factory:dictionarymanager.ɵfac}),dictionarymanager})();var A=s(2656),T=s(3463),L=s(5681),C=s(3194),q=s(3772),J=s(5185),N=s(3577),k=s(1058),w=s(151);const U=function(e){return{"slds-is-selected":e}};function E(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"tr",32),g.NdJ("click",(function(){const t=g.CHM(e).$implicit,s=g.oxw();return g.KtG(s.setCurrentDictionaryDefinition(t.id,t.scope))})),g.TgZ(1,"td")(2,"button",33),g.NdJ("click",(function(){const t=g.CHM(e).$implicit,s=g.oxw();return g.KtG(s.repairDictionaryDefinition(t))})),g._UZ(3,"system-utility-icon",34),g.qZA(),g._UZ(4,"system-utility-icon",35),g.TgZ(5,"dictionary-manager-item-status",36),g.NdJ("ngModelChange",(function(t){const s=g.CHM(e).$implicit;return g.KtG(s.status=t)})),g.qZA()(),g.TgZ(6,"td",37)(7,"div",38),g._uU(8),g.qZA()(),g.TgZ(9,"td",39)(10,"div",38),g._uU(11),g.qZA()(),g.TgZ(12,"td",40)(13,"div",38),g._uU(14),g.qZA()(),g.TgZ(15,"td")(16,"button",33),g.NdJ("click",(function(){const t=g.CHM(e).$implicit,s=g.oxw();return g.KtG(s.editDictionaryDefinition(t))})),g._UZ(17,"system-button-icon",41),g.qZA(),g.TgZ(18,"button",42),g.NdJ("click",(function(t){const s=g.CHM(e).$implicit,i=g.oxw();return g.KtG(i.deleteDictionaryDefinition(t,s.id))})),g._UZ(19,"system-button-icon",43),g.qZA()()()}if(2&e){const e=t.$implicit,s=g.oxw();g.Q6J("ngClass",g.VKq(9,U,s.dictionarymanager.currentDictionaryDefinition==e.id)),g.xp6(3),g.Q6J("icon","custom_apps")("system-title",s.language.getLabel("LBL_REPAIR_CACHE")),g.xp6(1),g.Q6J("icon","g"==e.scope?"world":"people"),g.xp6(1),g.Q6J("ngModel",e.status),g.xp6(3),g.Oqu(e.name),g.xp6(3),g.Oqu(e.tablename),g.xp6(3),g.Oqu(e.sysdictionary_type),g.xp6(4),g.Q6J("disabled",!s.dictionarymanager.canChange(e.scope))}}function D(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",44)(1,"system-utility-icon",45),g.NdJ("click",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.addDictionaryDefinition(t))})),g.qZA()()}}let O=(()=>{class DictionaryManagerDefinitions{constructor(e,t,s,i,n,l,o){this.dictionarymanager=e,this.metadata=t,this.language=s,this.modal=i,this.injector=n,this.modelutilities=l,this.backend=o,this.definitionfiltertype="",this.definitionfilterscope="",this.definitionfilterstatus="",this.repairing=!1}get dictionarydefinitions(){return this.dictionarymanager.dictionarydefinitions.filter((e=>!!e.name&&(0==e.deleted&&((!this.definitionfiltertype||e.sysdictionary_type==this.definitionfiltertype)&&(!(this.definitionfilterterm&&!(e.name.toLowerCase().indexOf(this.definitionfilterterm.toLowerCase())>=0||e.tablename&&e.tablename.toLowerCase().indexOf(this.definitionfilterterm.toLowerCase())>=0))&&((""==this.definitionfilterscope||e.scope==this.definitionfilterscope)&&(""==this.definitionfilterstatus||e.status==this.definitionfilterstatus))))))).sort(((e,t)=>e.name.localeCompare(t.name)))}trackByFn(e,t){return t.id}setCurrentDictionaryDefinition(e,t){e!=this.dictionarymanager.currentDictionaryDefinition&&(this.dictionarymanager.currentDictionaryDefinition=e,this.dictionarymanager.currentDictionaryScope=t,this.dictionarymanager.currentDictionaryItem=null,this.dictionarymanager.currentDictionaryIndex=null,this.dictionarymanager.currentDictionaryRelationship=null)}addDictionaryDefinition(e){e.stopPropagation(),this.modal.openModal("DictionaryManagerAddDefinitionModal",!0,this.injector)}deleteDictionaryDefinition(e,t){e.stopPropagation(),this.modal.prompt("confirm",this.language.getLabel("MSG_DELETE_RECORD","","long"),this.language.getLabel("MSG_DELETE_RECORD")).subscribe((e=>{if(e){this.dictionarymanager.dictionarydefinitions.find((e=>e.id==t)).deleted=1;this.dictionarymanager.currentDictionaryDefinition==t&&this.dictionarymanager.currentDictionaryDefinition}}))}editDictionaryDefinition(e){this.modal.openModal("DictionaryManagerEditDefinitionModal",!0,this.injector).subscribe((t=>{t.instance.dictionarydefinition=e}))}repairDictionaryDefinition(e){this.dictionarymanager.repairDictionary(e)}}return DictionaryManagerDefinitions.ɵfac=function(e){return new(e||DictionaryManagerDefinitions)(g.Y36(v),g.Y36(h.Pu),g.Y36(f.d),g.Y36(M.o),g.Y36(g.zs3),g.Y36(b.A),g.Y36(p.y))},DictionaryManagerDefinitions.ɵcmp=g.Xpm({type:DictionaryManagerDefinitions,selectors:[["dictionary-manager-definitions"]],decls:41,vars:7,consts:[[1,"slds-p-around--xx-small","slds-grid","slds-grid--vertical-align-center"],["placeholder","LBL_SEARCH",1,"slds-grow",3,"ngModel","ngModelChange"],[1,"slds-p-left--xx-small",3,"ngModel","ngModelChange"],["value","g","icon","world"],["value","c","icon","people"],["value","d","icon","light_bulb","colorclass","slds-icon-text-warning"],["value","a","icon","light_bulb","colorclass","slds-icon-text-success"],["value","i","icon","light_bulb","colorclass","slds-icon-text-light"],[1,"slds-select_container","slds-p-left--xx-small"],[1,"slds-select",3,"ngModel","ngModelChange"],["value",""],["label","LBL_ALL"],["value","module"],["label","LBL_MODULE"],["value","metadata"],["label","LBL_METADATA"],["value","template"],["label","LBL_TEMPLATE"],["value","relationship"],["label","LBL_RELATIONSHIP"],["system-to-bottom","",1,"slds-border--top"],[1,"slds-table","slds-table_cell-buffer","slds-table_bordered","slds-table--header-fixed"],[1,"slds-line-height_reset"],["scope","col",2,"width","2.5rem"],["scope","col",1,""],[1,"slds-truncate","slds-th__action","slds-p-horizontal--x-small"],["label","LBL_NAME"],["label","LBL_TABLE"],["label","LBL_TYPE"],["scope","col",2,"width","2rem"],["class","slds-hint-parent",3,"ngClass","click",4,"ngFor","ngForOf","ngForTrackBy"],["class","ng-star-inserted slds-align--absolute-center slds-border--top slds-p-around--small slds-theme--default","style","position: sticky;bottom: 0;",4,"ngIf"],[1,"slds-hint-parent",3,"ngClass","click"],[1,"slds-button","slds-button--icon",3,"click"],["size","xx-small",1,"slds-p-right--xx-small",3,"icon","system-title"],["size","xx-small",1,"slds-p-right--xx-small",3,"icon"],[3,"ngModel","ngModelChange"],["data-label","Dictionary"],[1,"slds-truncate"],["data-label","Table"],["data-label","Type"],["size","xx-small","icon","edit"],[1,"slds-button","slds-button--icon",3,"disabled","click"],["size","xx-small","icon","delete"],[1,"ng-star-inserted","slds-align--absolute-center","slds-border--top","slds-p-around--small","slds-theme--default",2,"position","sticky","bottom","0"],["icon","new","size","x-small",3,"click"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0)(1,"system-input-text",1),g.NdJ("ngModelChange",(function(e){return t.definitionfilterterm=e})),g.qZA(),g.TgZ(2,"system-select-icon",2),g.NdJ("ngModelChange",(function(e){return t.definitionfilterscope=e})),g._UZ(3,"system-select-icon-item")(4,"system-select-icon-item",3)(5,"system-select-icon-item",4),g.qZA(),g.TgZ(6,"system-select-icon",2),g.NdJ("ngModelChange",(function(e){return t.definitionfilterstatus=e})),g._UZ(7,"system-select-icon-item")(8,"system-select-icon-item",5)(9,"system-select-icon-item",6)(10,"system-select-icon-item",7),g.qZA(),g.TgZ(11,"div",8)(12,"select",9),g.NdJ("ngModelChange",(function(e){return t.definitionfiltertype=e})),g.TgZ(13,"option",10),g._UZ(14,"system-label",11),g.qZA(),g.TgZ(15,"option",12),g._UZ(16,"system-label",13),g.qZA(),g.TgZ(17,"option",14),g._UZ(18,"system-label",15),g.qZA(),g.TgZ(19,"option",16),g._UZ(20,"system-label",17),g.qZA(),g.TgZ(21,"option",18),g._UZ(22,"system-label",19),g.qZA()()()(),g.TgZ(23,"div",20)(24,"table",21)(25,"thead")(26,"tr",22),g._UZ(27,"th",23),g.TgZ(28,"th",24)(29,"div",25),g._UZ(30,"system-label",26),g.qZA()(),g.TgZ(31,"th",24)(32,"div",25),g._UZ(33,"system-label",27),g.qZA()(),g.TgZ(34,"th",24)(35,"div",25),g._UZ(36,"system-label",28),g.qZA()(),g._UZ(37,"th",29),g.qZA()(),g.TgZ(38,"tbody"),g.YNc(39,E,20,11,"tr",30),g.qZA()(),g.YNc(40,D,2,0,"div",31),g.qZA()),2&e&&(g.xp6(1),g.Q6J("ngModel",t.definitionfilterterm),g.xp6(1),g.Q6J("ngModel",t.definitionfilterscope),g.xp6(4),g.Q6J("ngModel",t.definitionfilterstatus),g.xp6(6),g.Q6J("ngModel",t.definitionfiltertype),g.xp6(27),g.Q6J("ngForOf",t.dictionarydefinitions)("ngForTrackBy",t.trackByFn),g.xp6(1),g.Q6J("ngIf","none"!=t.dictionarymanager.changescope))},dependencies:[i.mk,i.sg,i.O5,n.YN,n.Kr,n.EJ,n.JJ,n.On,A.J,q.Z,T._,u.r,J.E,N.s,k.H,w.S,m],encapsulation:2}),DictionaryManagerDefinitions})();var I=s(7514),Q=s(3497);function S(e,t){if(1&e&&(g.TgZ(0,"div",8)(1,"label",9),g._UZ(2,"system-label",29),g.qZA(),g._UZ(3,"input",30),g.qZA()),2&e){const e=g.oxw(2);g.xp6(3),g.Q6J("ngModel",e.dictionarymanager.getDomainName(e.dictionaryitem.sysdomaindefinition_id))}}function B(e,t){if(1&e&&(g.TgZ(0,"div",8)(1,"label",9),g._UZ(2,"system-label",31),g.qZA(),g._UZ(3,"input",30),g.qZA()),2&e){const e=g.oxw(2);g.xp6(3),g.Q6J("ngModel",e.dictionarymanager.getDictionaryDefinitionName(e.dictionaryitem.sysdictionary_ref_id))}}function F(e,t){if(1&e){const e=g.EpF();g.ynx(0),g.TgZ(1,"div")(2,"label",9),g._UZ(3,"system-label",32),g.qZA(),g.TgZ(4,"system-input-label",33),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw(2);return g.KtG(s.dictionaryitem.label=t)})),g.qZA()(),g.TgZ(5,"div")(6,"label",9),g._UZ(7,"system-label",34),g.qZA(),g.TgZ(8,"system-input-label",33),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw(2);return g.KtG(s.dictionaryitem.labelinputhelper=t)})),g.qZA()(),g.TgZ(9,"div",35)(10,"div",36)(11,"system-checkbox",37),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw(2);return g.KtG(s.dictionaryitem.required=t)})),g._UZ(12,"system-label",38),g.qZA()(),g.TgZ(13,"div",36)(14,"system-checkbox",37),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw(2);return g.KtG(s.dictionaryitem.non_db=t)})),g._UZ(15,"system-label",39),g.qZA()(),g.TgZ(16,"div",36)(17,"system-checkbox",37),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw(2);return g.KtG(s.dictionaryitem.duplicate_merge=t)})),g._UZ(18,"system-label",40),g.qZA()(),g.TgZ(19,"div",36)(20,"label",9),g._UZ(21,"system-label",41),g.qZA(),g.TgZ(22,"system-input-text",33),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw(2);return g.KtG(s.dictionaryitem.default_value=t)})),g.qZA()()(),g.TgZ(23,"div",42)(24,"label",9),g._UZ(25,"system-label",43),g.qZA(),g.TgZ(26,"div",8)(27,"system-input-text",44),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw(2);return g.KtG(s.dictionaryitem.description=t)})),g.qZA()()(),g.BQk()}if(2&e){const e=g.oxw(2);g.xp6(4),g.Q6J("ngModel",e.dictionaryitem.label),g.xp6(4),g.Q6J("ngModel",e.dictionaryitem.labelinputhelper),g.xp6(3),g.Q6J("ngModel",e.dictionaryitem.required)("asinteger",!0),g.xp6(3),g.Q6J("ngModel",e.dictionaryitem.non_db)("asinteger",!0),g.xp6(3),g.Q6J("ngModel",e.dictionaryitem.duplicate_merge)("asinteger",!0),g.xp6(5),g.Q6J("ngModel",e.dictionaryitem.default_value),g.xp6(5),g.Q6J("ngModel",e.dictionaryitem.description)}}function Y(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",4)(1,"div",5)(2,"div",6)(3,"div",7)(4,"div",8)(5,"label",9),g._UZ(6,"system-label",10),g.qZA(),g.TgZ(7,"system-input-text",11),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.dictionaryitem.name=t)})),g.qZA()()(),g.TgZ(8,"div",12),g.YNc(9,S,4,1,"div",13),g.YNc(10,B,4,1,"div",14),g.qZA(),g.TgZ(11,"div",15)(12,"label",9),g._UZ(13,"system-label",16),g.qZA(),g.TgZ(14,"div",17)(15,"select",18),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.dictionaryitem.scope=t)})),g.TgZ(16,"option",19),g._UZ(17,"system-label",20),g.qZA(),g.TgZ(18,"option",21),g._UZ(19,"system-label",22),g.qZA()()()()(),g.YNc(20,F,28,10,"ng-container",23),g.TgZ(21,"div",24)(22,"div",25)(23,"label",9),g._UZ(24,"system-label",26),g.qZA(),g.TgZ(25,"div",8)(26,"input",27),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.dictionaryitem.version=t)})),g.qZA()()(),g.TgZ(27,"div",25)(28,"label",9),g._UZ(29,"system-label",28),g.qZA(),g.TgZ(30,"div",8)(31,"input",27),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.dictionaryitem.package=t)})),g.qZA()()()()()()}if(2&e){const e=g.oxw();g.xp6(7),g.Q6J("maxlength",128)("ngModel",e.dictionaryitem.name),g.xp6(2),g.Q6J("ngIf",e.dictionaryitem.sysdomaindefinition_id),g.xp6(1),g.Q6J("ngIf",e.dictionaryitem.sysdictionary_ref_id),g.xp6(5),g.Q6J("ngModel",e.dictionaryitem.scope),g.xp6(5),g.Q6J("ngIf",e.dictionaryitem.sysdomaindefinition_id),g.xp6(6),g.Q6J("ngModel",e.dictionaryitem.version),g.xp6(5),g.Q6J("ngModel",e.dictionaryitem.package)}}function R(e,t){1&e&&(g.TgZ(0,"div",45),g._UZ(1,"system-label",46),g.qZA())}let G=(()=>{class DictionaryManagerItemDetails{constructor(e,t,s){this.dictionarymanager=e,this.metadata=t,this.language=s}}return DictionaryManagerItemDetails.ɵfac=function(e){return new(e||DictionaryManagerItemDetails)(g.Y36(v),g.Y36(h.Pu),g.Y36(f.d))},DictionaryManagerItemDetails.ɵcmp=g.Xpm({type:DictionaryManagerItemDetails,selectors:[["dictionary-manager-item-details"]],inputs:{dictionaryitem:"dictionaryitem"},decls:5,vars:2,consts:[[1,"slds-text-heading--small","slds-p-around--x-small","slds-theme--shade"],["label","LBL_ITEM_DETAILS"],["system-to-bottom-noscroll","",4,"ngIf","ngIfElse"],["SelectItem",""],["system-to-bottom-noscroll",""],[1,"slds-p-around--x-small"],[1,"slds-grid"],[1,"slds-size--1-of-2","slds-form-element","slds-m-around--xxx-small"],[1,"slds-form-element__control"],[1,"slds-form-element__label"],["label","LBL_NAME"],["disabled","",3,"maxlength","ngModel","ngModelChange"],[1,"slds-size--1-of-4","slds-form-element","slds-m-around--xxx-small"],["class","slds-form-element__control",4,"ngIf"],["class","slds-form-element__control","class","slds-form-element__control",4,"ngIf"],[1,"slds-size--1-of-4","slds-form-element__control","slds-m-around--xxx-small"],["label","LBL_SCOPE"],[1,"slds-select_container"],["disabled","",1,"slds-select",3,"ngModel","ngModelChange"],["value","g"],["label","LBL_GLOBAL"],["value","c"],["label","LBL_CUSTOM"],[4,"ngIf"],[1,"slds-grid","slds-m-vertical--xxx-small","slds-gutters_direct-xx-small"],[1,"slds-col","slds-size--1-of-2","slds-form-element"],["label","LBL_VERSION"],["type","text",1,"slds-input",3,"ngModel","ngModelChange"],["label","LBL_PACKAGE"],["label","LBL_DOMAIN"],["type","text","disabled","",1,"slds-input",3,"ngModel"],["label","LBL_TEMPLATE"],["label","LBL_LABEL"],[3,"ngModel","ngModelChange"],["label","LBL_INPUT_HELPER"],[1,"slds-grid","slds-p-vertical--xx-small"],[1,"slds-size--1-of-3","slds-form-element__control"],[3,"ngModel","asinteger","ngModelChange"],["label","LBL_REQUIRED"],["label","LBL_NON_DB"],["label","LBL_DUPLICATE_MERGE"],["label","LBL_DEFAULT_VALUE"],[1,"slds-form-element","slds-m-vertical--xxx-small"],["label","LBL_COMMENT"],["maxlength","150",3,"ngModel","ngModelChange"],["system-to-bottom-noscroll","",1,"slds-align--absolute-center"],["label","LBL_SELECT_ITEM"]],template:function(e,t){if(1&e&&(g.TgZ(0,"div",0),g._UZ(1,"system-label",1),g.qZA(),g.YNc(2,Y,32,8,"div",2),g.YNc(3,R,2,0,"ng-template",null,3,g.W1O)),2&e){const e=g.MAs(4);g.xp6(2),g.Q6J("ngIf",t.dictionarymanager.currentDictionaryItem)("ngIfElse",e)}},dependencies:[i.O5,n.YN,n.Kr,n.Fj,n.EJ,n.JJ,n.nD,n.On,I.U,q.Z,Q.$,T._,C.t],encapsulation:2}),DictionaryManagerItemDetails})();function H(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"system-utility-icon",20),g.NdJ("click",(function(t){g.CHM(e);const s=g.oxw(2);return g.KtG(s.activateAll(t))})),g.qZA()}}function K(e,t){1&e&&g._UZ(0,"system-utility-icon",29),2&e&&g.Q6J("icon","rows")("size","x-small")}const z=function(e){return{"slds-is-selected":e}};function V(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"tr",21),g.NdJ("click",(function(){const t=g.CHM(e).$implicit,s=g.oxw(2);return g.KtG(s.setActiveId(t.id))})),g.TgZ(1,"td"),g.YNc(2,K,1,2,"system-utility-icon",22),g._UZ(3,"system-utility-icon",23),g.TgZ(4,"dictionary-manager-item-status",24),g.NdJ("ngModelChange",(function(t){const s=g.CHM(e).$implicit;return g.KtG(s.status=t)})),g.qZA()(),g.TgZ(5,"td",25)(6,"div",9),g._uU(7),g.qZA()(),g.TgZ(8,"td",26)(9,"div",9),g._uU(10),g.qZA()(),g.TgZ(11,"td",26)(12,"div",9),g._uU(13),g.qZA()(),g.TgZ(14,"td")(15,"button",27),g.NdJ("click",(function(t){const s=g.CHM(e).$implicit,i=g.oxw(2);return g.KtG(i.deleteDictionaryItem(t,s.id))})),g._UZ(16,"system-button-icon",28),g.qZA()()()}if(2&e){const e=t.$implicit,s=g.oxw(2);g.Q6J("ngClass",g.VKq(9,z,s.dictionarymanager.currentDictionaryItem==e.id))("cdkDragDisabled",!s.canShuffle),g.xp6(2),g.Q6J("ngIf",s.canShuffle),g.xp6(1),g.Q6J("icon","g"==e.scope?"world":"people"),g.xp6(1),g.Q6J("ngModel",e.status),g.xp6(3),g.Oqu(e.name),g.xp6(3),g.Oqu(s.dictionarymanager.getDomainName(e.sysdomaindefinition_id)),g.xp6(3),g.Oqu(s.dictionarymanager.getDictionaryDefinitionName(e.sysdictionary_ref_id)),g.xp6(2),g.Q6J("disabled",!s.dictionarymanager.canChange(e.scope))}}function P(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",30)(1,"system-utility-icon",14),g.NdJ("click",(function(t){g.CHM(e);const s=g.oxw(2);return g.KtG(s.addDictionaryItem(t))})),g.qZA()()}}function $(e,t){if(1&e){const e=g.EpF();g.ynx(0),g.TgZ(1,"div",3)(2,"table",4)(3,"thead")(4,"tr",5)(5,"th",6),g.YNc(6,H,1,0,"system-utility-icon",7),g.qZA(),g.TgZ(7,"th",8)(8,"div",9),g._UZ(9,"system-label",10),g.qZA()(),g.TgZ(10,"th",8)(11,"div",9),g._UZ(12,"system-label",11),g.qZA()(),g.TgZ(13,"th",8)(14,"div",9),g._UZ(15,"system-label",12),g.qZA()(),g.TgZ(16,"th",13)(17,"system-utility-icon",14),g.NdJ("click",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.addDictionaryItem(t))})),g.qZA()()()(),g.TgZ(18,"tbody",15),g.NdJ("cdkDropListDropped",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.drop(t))})),g.YNc(19,V,17,11,"tr",16),g.qZA()(),g.YNc(20,P,2,0,"div",17),g.qZA(),g.TgZ(21,"div",18),g._UZ(22,"dictionary-manager-item-details",19),g.qZA(),g.BQk()}if(2&e){const e=g.oxw();g.xp6(6),g.Q6J("ngIf",e.hasDraftItems),g.xp6(13),g.Q6J("ngForOf",e.dictionaryitems),g.xp6(1),g.Q6J("ngIf","none"!=e.dictionarymanager.changescope),g.xp6(2),g.Q6J("dictionaryitem",e.dictionaryitem)}}function j(e,t){1&e&&(g.TgZ(0,"div",31),g._UZ(1,"system-label",32),g.qZA())}let W=(()=>{class DictionaryManagerItems{constructor(e,t,s,i,n,l){this.dictionarymanager=e,this.metadata=t,this.language=s,this.modal=i,this.injector=n,this.modelutilities=l}get canShuffle(){return this.dictionarymanager.canChange(this.dictionarymanager.dictionarydefinitions.find((e=>e.id==this.dictionarymanager.currentDictionaryDefinition))?.scope)}get dictionaryitems(){return this.dictionarymanager.currentDictionaryDefinition?this.dictionarymanager.dictionaryitems.filter((e=>0==e.deleted&&e.sysdictionarydefinition_id==this.dictionarymanager.currentDictionaryDefinition)).sort(((e,t)=>e.sequence>t.sequence?1:-1)):[]}addDictionaryItem(e){e.stopPropagation(),this.modal.openModal("DictionaryManagerAddItemModal",!0,this.injector)}deleteDictionaryItem(e,t){e.stopPropagation(),this.modal.prompt("confirm",this.language.getLabel("MSG_DELETE_RECORD","","long"),this.language.getLabel("MSG_DELETE_RECORD")).subscribe((e=>{if(e){this.dictionarymanager.dictionaryitems.find((e=>e.id==t)).deleted=1;this.dictionarymanager.currentDictionaryDefinition==t&&this.dictionarymanager.currentDictionaryDefinition}}))}drop(e){let t=this.dictionaryitems,s=t.splice(e.previousIndex,1);t.splice(e.currentIndex,0,s[0]);let i=0;for(let e of t)e.sequence=i,i++}setActiveId(e){this.dictionarymanager.currentDictionaryItem=e,this.dictionaryitem=this.dictionarymanager.dictionaryitems.find((t=>t.id==e))}get hasDraftItems(){return this.dictionaryitems.filter((e=>"d"==e.status)).length>0}activateAll(e){e.stopPropagation(),e.preventDefault(),this.modal.confirm("MSG_ACTIVATE_ALL","MSG_ACTIVATE_ALL").subscribe({next:e=>{e&&this.dictionaryitems.filter((e=>"d"==e.status)).forEach((e=>e.status="a"))}})}}return DictionaryManagerItems.ɵfac=function(e){return new(e||DictionaryManagerItems)(g.Y36(v),g.Y36(h.Pu),g.Y36(f.d),g.Y36(M.o),g.Y36(g.zs3),g.Y36(b.A))},DictionaryManagerItems.ɵcmp=g.Xpm({type:DictionaryManagerItems,selectors:[["dictionary-manager-items"]],decls:4,vars:2,consts:[["system-to-bottom-noscroll",""],[4,"ngIf","ngIfElse"],["selectdefinition",""],[1,"slds-scrollable--y",2,"height","calc(100% - 500px)"],[1,"slds-table","slds-table_cell-buffer","slds-table_bordered"],[1,"slds-line-height_reset"],["scope","col",1,"slds-text-align--right",2,"width","2.5rem"],["class","slds-p-right--xx-small","icon","light_bulb","colorclass","slds-icon-text-warning","size","xx-small",3,"click",4,"ngIf"],["scope","col",1,""],[1,"slds-truncate"],["label","LBL_NAME"],["label","LBL_DOMAIN"],["label","LBL_TEMPLATE"],["scope","col",2,"width","2rem"],["icon","new","size","x-small",3,"click"],["cdkDropList","",1,"dragboundary",3,"cdkDropListDropped"],["class","slds-hint-parent","cdkDrag","","cdkDragBoundary",".dragboundary",3,"ngClass","cdkDragDisabled","click",4,"ngFor","ngForOf"],["class","slds-align--absolute-center slds-p-around--small",4,"ngIf"],[1,"slds-border--top"],[3,"dictionaryitem"],["icon","light_bulb","colorclass","slds-icon-text-warning","size","xx-small",1,"slds-p-right--xx-small",3,"click"],["cdkDrag","","cdkDragBoundary",".dragboundary",1,"slds-hint-parent",3,"ngClass","cdkDragDisabled","click"],["class","slds-p-right--xx-small","cdkDragHandle","","style","cursor:move",3,"icon","size",4,"ngIf"],["size","xx-small",1,"slds-p-right--xx-small",3,"icon"],[3,"ngModel","ngModelChange"],["data-label","Domain"],["data-label","Type"],[1,"slds-button","slds-button--icon",3,"disabled","click"],["size","xx-small","icon","delete"],["cdkDragHandle","",1,"slds-p-right--xx-small",2,"cursor","move",3,"icon","size"],[1,"slds-align--absolute-center","slds-p-around--small"],[1,"slds-size--1-of-1","slds-height_full","slds-align--absolute-center"],["label","LBL_SELECT_A_DICTIONARYDEFINITION"]],template:function(e,t){if(1&e&&(g.TgZ(0,"div",0),g.YNc(1,$,23,4,"ng-container",1),g.YNc(2,j,2,0,"ng-template",null,2,g.W1O),g.qZA()),2&e){const e=g.MAs(3);g.xp6(1),g.Q6J("ngIf",t.dictionarymanager.currentDictionaryDefinition)("ngIfElse",e)}},dependencies:[i.mk,i.sg,i.O5,n.JJ,n.On,A.J,T._,u.r,C.t,c.Wj,c.Zt,c.Bh,G,m],encapsulation:2}),DictionaryManagerItems})();function X(e,t){if(1&e&&(g.TgZ(0,"option",26),g._uU(1),g.qZA()),2&e){const e=t.$implicit;g.Q6J("value",e.id),g.xp6(1),g.Oqu(e.name)}}function ee(e,t){if(1&e&&(g.TgZ(0,"option",26),g._uU(1),g.qZA()),2&e){const e=t.$implicit;g.Q6J("value",e.id),g.xp6(1),g.Oqu(e.name)}}let te=(()=>{class DictionaryManagerRelationshipContainerOneToMany{constructor(e,t,s,i,n,l){this.dictionarymanager=e,this.metadata=t,this.language=s,this.modal=i,this.injector=n,this.modelutilities=l,this.lhs_items=[],this.rhs_items=[],this.relationshiprelatefields=[]}ngOnInit(){this.loadItems(),this.loadRelationshipFields()}loadItems(){this.lhs_items=this.dictionarymanager.getDictionaryDefinitionItems(this.relationship.lhs_sysdictionarydefinition_id),this.rhs_items=this.dictionarymanager.getDictionaryDefinitionItems(this.relationship.rhs_sysdictionarydefinition_id)}loadRelationshipFields(){this.relationshiprelatefields=this.dictionarymanager.dictionaryrelationshiprelatefields.filter((e=>e.relationship_id==this.relationship.id))}}return DictionaryManagerRelationshipContainerOneToMany.ɵfac=function(e){return new(e||DictionaryManagerRelationshipContainerOneToMany)(g.Y36(v),g.Y36(h.Pu),g.Y36(f.d),g.Y36(M.o),g.Y36(g.zs3),g.Y36(b.A))},DictionaryManagerRelationshipContainerOneToMany.ɵcmp=g.Xpm({type:DictionaryManagerRelationshipContainerOneToMany,selectors:[["dictionary-manager-relationship-container-onetomany"]],inputs:{relationship:"relationship"},decls:82,vars:18,consts:[[1,"slds-grid"],[1,"slds-size--1-of-2","slds-p-right--xx-small","slds-form-element"],[1,"slds-form-element__label"],["label","LBL_NAME"],[1,"slds-form-element__control"],[1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-size--1-of-2","slds-p-left--xx-small","slds-form-element"],["label","LBL_RELATIONSHIP_NAME"],["label","LBL_LHS_DICTIONARYDEFINITION"],["disabled","",1,"slds-input",3,"ngModel"],["label","LBL_RHS_DICTIONARYDEFINITION"],["label","LBL_LHS_SYSDICTIONARYITEM"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["label","LBL_RHS_SYSDICTIONARYITEM"],["label","LBL_LHS_LINKNAME"],["label","LBL_RHS_LINKNAME"],["label","LBL_LHS_LINKLABEL"],[3,"ngModel","ngModelChange"],["label","LBL_RHS_LINKLABEL"],["label","LBL_DUPLICATE_MERGE"],[3,"ngModel","asinteger","ngModelChange"],[1,"slds-size--1-of-2"],["label","LBL_RHS_RELATENAME"],["label","LBL_RHS_RELATELABEL"],[3,"value"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0)(1,"div",1)(2,"label",2),g._UZ(3,"system-label",3),g.qZA(),g.TgZ(4,"div",4)(5,"input",5),g.NdJ("ngModelChange",(function(e){return t.relationship.name=e})),g.qZA()()(),g.TgZ(6,"div",6)(7,"label",2),g._UZ(8,"system-label",7),g.qZA(),g.TgZ(9,"div",4)(10,"input",5),g.NdJ("ngModelChange",(function(e){return t.relationship.relationship_name=e})),g.qZA()()()(),g.TgZ(11,"div",0)(12,"div",1)(13,"label",2),g._UZ(14,"system-label",8),g.qZA(),g.TgZ(15,"div",4),g._UZ(16,"input",9),g.qZA()(),g.TgZ(17,"div",6)(18,"label",2),g._UZ(19,"system-label",10),g.qZA(),g.TgZ(20,"div",4),g._UZ(21,"input",9),g.qZA()()(),g.TgZ(22,"div",0)(23,"div",1)(24,"label",2),g._UZ(25,"system-label",11),g.qZA(),g.TgZ(26,"div",12)(27,"select",13),g.NdJ("ngModelChange",(function(e){return t.relationship.lhs_sysdictionaryitem_id=e})),g.YNc(28,X,2,2,"option",14),g.qZA()()(),g.TgZ(29,"div",6)(30,"label",2),g._UZ(31,"system-label",15),g.qZA(),g.TgZ(32,"div",12)(33,"select",13),g.NdJ("ngModelChange",(function(e){return t.relationship.rhs_sysdictionaryitem_id=e})),g.YNc(34,ee,2,2,"option",14),g.qZA()()()(),g.TgZ(35,"div",0)(36,"div",1)(37,"label",2),g._UZ(38,"system-label",16),g.qZA(),g.TgZ(39,"div",4)(40,"input",5),g.NdJ("ngModelChange",(function(e){return t.relationship.lhs_linkname=e})),g.qZA()()(),g.TgZ(41,"div",6)(42,"label",2),g._UZ(43,"system-label",17),g.qZA(),g.TgZ(44,"div",4)(45,"input",5),g.NdJ("ngModelChange",(function(e){return t.relationship.rhs_linkname=e})),g.qZA()()()(),g.TgZ(46,"div",0)(47,"div",1)(48,"label",2),g._UZ(49,"system-label",18),g.qZA(),g.TgZ(50,"div",4)(51,"system-input-label",19),g.NdJ("ngModelChange",(function(e){return t.relationship.lhs_linklabel=e})),g.qZA()()(),g.TgZ(52,"div",6)(53,"label",2),g._UZ(54,"system-label",20),g.qZA(),g.TgZ(55,"div",4)(56,"system-input-label",19),g.NdJ("ngModelChange",(function(e){return t.relationship.rhs_linklabel=e})),g.qZA()()()(),g.TgZ(57,"div",0)(58,"div",1)(59,"label",2),g._UZ(60,"system-label",21),g.qZA(),g.TgZ(61,"div",4)(62,"system-checkbox",22),g.NdJ("ngModelChange",(function(e){return t.relationship.lhs_duplicatemerge=e})),g.qZA()()(),g.TgZ(63,"div",6)(64,"label",2),g._UZ(65,"system-label",21),g.qZA(),g.TgZ(66,"div",4)(67,"system-checkbox",22),g.NdJ("ngModelChange",(function(e){return t.relationship.rhs_duplicatemerge=e})),g.qZA()()()(),g.TgZ(68,"div",0),g._UZ(69,"div",23),g.TgZ(70,"div",23)(71,"label",2),g._UZ(72,"system-label",24),g.qZA(),g.TgZ(73,"div",4)(74,"input",5),g.NdJ("ngModelChange",(function(e){return t.relationship.rhs_relatename=e})),g.qZA()()()(),g.TgZ(75,"div",0),g._UZ(76,"div",23),g.TgZ(77,"div",23)(78,"label",2),g._UZ(79,"system-label",25),g.qZA(),g.TgZ(80,"div",4)(81,"system-input-label",19),g.NdJ("ngModelChange",(function(e){return t.relationship.rhs_relatelabel=e})),g.qZA()()()()),2&e&&(g.xp6(5),g.Q6J("ngModel",t.relationship.name),g.xp6(5),g.Q6J("ngModel",t.relationship.relationship_name),g.xp6(6),g.Q6J("ngModel",t.dictionarymanager.getDictionaryDefinitionName(t.relationship.lhs_sysdictionarydefinition_id)),g.xp6(5),g.Q6J("ngModel",t.dictionarymanager.getDictionaryDefinitionName(t.relationship.rhs_sysdictionarydefinition_id)),g.xp6(6),g.Q6J("ngModel",t.relationship.lhs_sysdictionaryitem_id),g.xp6(1),g.Q6J("ngForOf",t.lhs_items),g.xp6(5),g.Q6J("ngModel",t.relationship.rhs_sysdictionaryitem_id),g.xp6(1),g.Q6J("ngForOf",t.rhs_items),g.xp6(6),g.Q6J("ngModel",t.relationship.lhs_linkname),g.xp6(5),g.Q6J("ngModel",t.relationship.rhs_linkname),g.xp6(6),g.Q6J("ngModel",t.relationship.lhs_linklabel),g.xp6(5),g.Q6J("ngModel",t.relationship.rhs_linklabel),g.xp6(6),g.Q6J("ngModel",t.relationship.lhs_duplicatemerge)("asinteger",!0),g.xp6(5),g.Q6J("ngModel",t.relationship.rhs_duplicatemerge)("asinteger",!0),g.xp6(7),g.Q6J("ngModel",t.relationship.rhs_relatename),g.xp6(7),g.Q6J("ngModel",t.relationship.rhs_relatelabel))},dependencies:[i.sg,n.YN,n.Kr,n.Fj,n.EJ,n.JJ,n.On,I.U,Q.$,T._],encapsulation:2}),DictionaryManagerRelationshipContainerOneToMany})();function se(e,t){if(1&e&&(g.TgZ(0,"option",29),g._uU(1),g.qZA()),2&e){const e=t.$implicit;g.Q6J("value",e.id),g.xp6(1),g.Oqu(e.name)}}function ie(e,t){if(1&e&&(g.TgZ(0,"option",29),g._uU(1),g.qZA()),2&e){const e=t.$implicit;g.Q6J("value",e.id),g.xp6(1),g.Oqu(e.name)}}function ne(e,t){if(1&e&&(g.TgZ(0,"option",29),g._uU(1),g.qZA()),2&e){const e=t.$implicit;g.Q6J("value",e.id),g.xp6(1),g.Oqu(e.name)}}function le(e,t){if(1&e&&(g.TgZ(0,"option",29),g._uU(1),g.qZA()),2&e){const e=t.$implicit;g.Q6J("value",e.id),g.xp6(1),g.Oqu(e.name)}}function oe(e,t){if(1&e&&(g.TgZ(0,"option",29),g._uU(1),g.qZA()),2&e){const e=t.$implicit;g.Q6J("value",e.id),g.xp6(1),g.Oqu(e.name)}}function ae(e,t){if(1&e&&(g.TgZ(0,"option",29),g._uU(1),g.qZA()),2&e){const e=t.$implicit;g.Q6J("value",e.id),g.xp6(1),g.Oqu(e.name)}}let de=(()=>{class DictionaryManagerRelationshipContainerManyToMany{constructor(e,t,s,i,n,l){this.dictionarymanager=e,this.metadata=t,this.language=s,this.modal=i,this.injector=n,this.modelutilities=l,this.lhs_items=[],this.rhs_items=[],this.join_items=[]}get join_sysdictionarydefinition_id(){return this.relationship.join_sysdictionarydefinition_id}set join_sysdictionarydefinition_id(e){e!=this.relationship.join_sysdictionarydefinition_id&&(this.relationship.join_sysdictionarydefinition_id=e,this.relationship.join_rhs_sysdictionaryitem_id=null,this.relationship.join_lhs_sysdictionaryitem_id=null,this.loadJoinItems())}ngOnInit(){this.loadItems(),this.loadJoinItems()}loadJoinItems(){this.relationship.join_sysdictionarydefinition_id?this.join_items=this.dictionarymanager.getDictionaryDefinitionItems(this.relationship.join_sysdictionarydefinition_id):this.join_items=[]}loadItems(){this.lhs_items=this.dictionarymanager.getDictionaryDefinitionItems(this.relationship.lhs_sysdictionarydefinition_id),this.rhs_items=this.dictionarymanager.getDictionaryDefinitionItems(this.relationship.rhs_sysdictionarydefinition_id)}}return DictionaryManagerRelationshipContainerManyToMany.ɵfac=function(e){return new(e||DictionaryManagerRelationshipContainerManyToMany)(g.Y36(v),g.Y36(h.Pu),g.Y36(f.d),g.Y36(M.o),g.Y36(g.zs3),g.Y36(b.A))},DictionaryManagerRelationshipContainerManyToMany.ɵcmp=g.Xpm({type:DictionaryManagerRelationshipContainerManyToMany,selectors:[["dictionary-manager-relationship-container-manytomany"]],inputs:{relationship:"relationship"},decls:101,vars:29,consts:[[1,"slds-grid"],[1,"slds-size--1-of-2","slds-p-right--xx-small","slds-form-element"],[1,"slds-form-element__label"],["label","LBL_NAME"],[1,"slds-form-element__control"],[1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-size--1-of-2","slds-p-left--xx-small","slds-form-element"],["label","LBL_RELATIONSHIP_NAME"],["label","LBL_LHS_DICTIONARYDEFINITION"],["disabled","",1,"slds-input",3,"ngModel"],["label","LBL_RHS_DICTIONARYDEFINITION"],["label","LBL_LHS_SYSDICTIONARYITEM"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["label","LBL_RHS_SYSDICTIONARYITEM"],["label","LBL_LHS_LINKNAME"],["label","LBL_RHS_LINKNAME"],["label","LBL_LHS_LINKLABEL"],[3,"ngModel","ngModelChange"],["label","LBL_RHS_LINKLABEL"],["label","LBL_DUPLICATE_MERGE"],[3,"ngModel","asinteger","ngModelChange"],[1,"slds-size--1-of-1","slds-p-right--xx-small","slds-form-element"],["label","LBL_JOIN_DICTIONARYDEFINITION_ID"],["label","LBL_JOIN_LHS_SYSDICTIONARYITEM"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],["label","LBL_JOIN_RHS_SYSDICTIONARYITEM"],["label","LBL_RELATIONSHIP_ROLE_COLUMN"],[3,"value"],["label","LBL_RELATIONSHIP_ROLE_COLUMN_VALUE"],[1,"slds-input",3,"disabled","ngModel","ngModelChange"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0)(1,"div",1)(2,"label",2),g._UZ(3,"system-label",3),g.qZA(),g.TgZ(4,"div",4)(5,"input",5),g.NdJ("ngModelChange",(function(e){return t.relationship.name=e})),g.qZA()()(),g.TgZ(6,"div",6)(7,"label",2),g._UZ(8,"system-label",7),g.qZA(),g.TgZ(9,"div",4)(10,"input",5),g.NdJ("ngModelChange",(function(e){return t.relationship.relationship_name=e})),g.qZA()()()(),g.TgZ(11,"div",0)(12,"div",1)(13,"label",2),g._UZ(14,"system-label",8),g.qZA(),g.TgZ(15,"div",4),g._UZ(16,"input",9),g.qZA()(),g.TgZ(17,"div",6)(18,"label",2),g._UZ(19,"system-label",10),g.qZA(),g.TgZ(20,"div",4),g._UZ(21,"input",9),g.qZA()()(),g.TgZ(22,"div",0)(23,"div",1)(24,"label",2),g._UZ(25,"system-label",11),g.qZA(),g.TgZ(26,"div",12)(27,"select",13),g.NdJ("ngModelChange",(function(e){return t.relationship.lhs_sysdictionaryitem_id=e})),g.YNc(28,se,2,2,"option",14),g.qZA()()(),g.TgZ(29,"div",6)(30,"label",2),g._UZ(31,"system-label",15),g.qZA(),g.TgZ(32,"div",12)(33,"select",13),g.NdJ("ngModelChange",(function(e){return t.relationship.rhs_sysdictionaryitem_id=e})),g.YNc(34,ie,2,2,"option",14),g.qZA()()()(),g.TgZ(35,"div",0)(36,"div",1)(37,"label",2),g._UZ(38,"system-label",16),g.qZA(),g.TgZ(39,"div",4)(40,"input",5),g.NdJ("ngModelChange",(function(e){return t.relationship.lhs_linkname=e})),g.qZA()()(),g.TgZ(41,"div",6)(42,"label",2),g._UZ(43,"system-label",17),g.qZA(),g.TgZ(44,"div",4)(45,"input",5),g.NdJ("ngModelChange",(function(e){return t.relationship.rhs_linkname=e})),g.qZA()()()(),g.TgZ(46,"div",0)(47,"div",1)(48,"label",2),g._UZ(49,"system-label",18),g.qZA(),g.TgZ(50,"div",4)(51,"system-input-label",19),g.NdJ("ngModelChange",(function(e){return t.relationship.lhs_linklabel=e})),g.qZA()()(),g.TgZ(52,"div",6)(53,"label",2),g._UZ(54,"system-label",20),g.qZA(),g.TgZ(55,"div",4)(56,"system-input-label",19),g.NdJ("ngModelChange",(function(e){return t.relationship.rhs_linklabel=e})),g.qZA()()()(),g.TgZ(57,"div",0)(58,"div",1)(59,"label",2),g._UZ(60,"system-label",21),g.qZA(),g.TgZ(61,"div",4)(62,"system-checkbox",22),g.NdJ("ngModelChange",(function(e){return t.relationship.lhs_duplicatemerge=e})),g.qZA()()(),g.TgZ(63,"div",6)(64,"label",2),g._UZ(65,"system-label",21),g.qZA(),g.TgZ(66,"div",4)(67,"system-checkbox",22),g.NdJ("ngModelChange",(function(e){return t.relationship.rhs_duplicatemerge=e})),g.qZA()()()(),g.TgZ(68,"div",0)(69,"div",23)(70,"label",2),g._UZ(71,"system-label",24),g.qZA(),g.TgZ(72,"div",12)(73,"select",13),g.NdJ("ngModelChange",(function(e){return t.join_sysdictionarydefinition_id=e})),g.YNc(74,ne,2,2,"option",14),g.qZA()()()(),g.TgZ(75,"div",0)(76,"div",1)(77,"label",2),g._UZ(78,"system-label",25),g.qZA(),g.TgZ(79,"div",12)(80,"select",26),g.NdJ("ngModelChange",(function(e){return t.relationship.join_lhs_sysdictionaryitem_id=e})),g.YNc(81,le,2,2,"option",14),g.qZA()()(),g.TgZ(82,"div",6)(83,"label",2),g._UZ(84,"system-label",27),g.qZA(),g.TgZ(85,"div",12)(86,"select",26),g.NdJ("ngModelChange",(function(e){return t.relationship.join_rhs_sysdictionaryitem_id=e})),g.YNc(87,oe,2,2,"option",14),g.qZA()()()(),g.TgZ(88,"div",0)(89,"div",1)(90,"label",2),g._UZ(91,"system-label",28),g.qZA(),g.TgZ(92,"div",12)(93,"select",26),g.NdJ("ngModelChange",(function(e){return t.relationship.relationship_role_column=e})),g._UZ(94,"option",29),g.YNc(95,ae,2,2,"option",14),g.qZA()()(),g.TgZ(96,"div",6)(97,"label",2),g._UZ(98,"system-label",30),g.qZA(),g.TgZ(99,"div",4)(100,"input",31),g.NdJ("ngModelChange",(function(e){return t.relationship.relationship_role_column_value=e})),g.qZA()()()()),2&e&&(g.xp6(5),g.Q6J("ngModel",t.relationship.name),g.xp6(5),g.Q6J("ngModel",t.relationship.relationship_name),g.xp6(6),g.Q6J("ngModel",t.dictionarymanager.getDictionaryDefinitionName(t.relationship.lhs_sysdictionarydefinition_id)),g.xp6(5),g.Q6J("ngModel",t.dictionarymanager.getDictionaryDefinitionName(t.relationship.rhs_sysdictionarydefinition_id)),g.xp6(6),g.Q6J("ngModel",t.relationship.lhs_sysdictionaryitem_id),g.xp6(1),g.Q6J("ngForOf",t.lhs_items),g.xp6(5),g.Q6J("ngModel",t.relationship.rhs_sysdictionaryitem_id),g.xp6(1),g.Q6J("ngForOf",t.rhs_items),g.xp6(6),g.Q6J("ngModel",t.relationship.lhs_linkname),g.xp6(5),g.Q6J("ngModel",t.relationship.rhs_linkname),g.xp6(6),g.Q6J("ngModel",t.relationship.lhs_linklabel),g.xp6(5),g.Q6J("ngModel",t.relationship.rhs_linklabel),g.xp6(6),g.Q6J("ngModel",t.relationship.lhs_duplicatemerge)("asinteger",!0),g.xp6(5),g.Q6J("ngModel",t.relationship.rhs_duplicatemerge)("asinteger",!0),g.xp6(6),g.Q6J("ngModel",t.join_sysdictionarydefinition_id),g.xp6(1),g.Q6J("ngForOf",t.dictionarymanager.dictionarydefinitions),g.xp6(6),g.Q6J("disabled",!t.join_sysdictionarydefinition_id)("ngModel",t.relationship.join_lhs_sysdictionaryitem_id),g.xp6(1),g.Q6J("ngForOf",t.join_items),g.xp6(5),g.Q6J("disabled",!t.join_sysdictionarydefinition_id)("ngModel",t.relationship.join_rhs_sysdictionaryitem_id),g.xp6(1),g.Q6J("ngForOf",t.join_items),g.xp6(6),g.Q6J("disabled",!t.join_sysdictionarydefinition_id)("ngModel",t.relationship.relationship_role_column),g.xp6(2),g.Q6J("ngForOf",t.join_items),g.xp6(5),g.Q6J("disabled",!t.relationship.relationship_role_column)("ngModel",t.relationship.relationship_role_column_value))},dependencies:[i.sg,n.YN,n.Kr,n.Fj,n.EJ,n.JJ,n.On,I.U,Q.$,T._],encapsulation:2}),DictionaryManagerRelationshipContainerManyToMany})();function re(e,t){if(1&e&&(g.TgZ(0,"option",26),g._uU(1),g.qZA()),2&e){const e=t.$implicit;g.Q6J("value",e.id),g.xp6(1),g.Oqu(e.name)}}function ce(e,t){if(1&e&&(g.TgZ(0,"option",26),g._uU(1),g.qZA()),2&e){const e=t.$implicit;g.Q6J("value",e.id),g.xp6(1),g.Oqu(e.name)}}let ge=(()=>{class DictionaryManagerRelationshipContainerParent{constructor(e,t,s,i,n,l){this.dictionarymanager=e,this.metadata=t,this.language=s,this.modal=i,this.injector=n,this.modelutilities=l,this.lhs_items=[],this.rhs_items=[],this.relationshiprelatefields=[]}ngOnInit(){this.loadItems(),this.loadRelationshipFields()}loadItems(){this.lhs_items=this.dictionarymanager.getDictionaryDefinitionItems(this.relationship.lhs_sysdictionarydefinition_id),this.rhs_items=this.dictionarymanager.getDictionaryDefinitionItems(this.relationship.rhs_sysdictionarydefinition_id)}loadRelationshipFields(){this.relationshiprelatefields=this.dictionarymanager.dictionaryrelationshiprelatefields.filter((e=>e.relationship_id==this.relationship.id))}get rhs_sysdictionaryitem_id(){return this.relationship.rhs_sysdictionaryitem_id}set rhs_sysdictionaryitem_id(e){this.relationship.rhs_sysdictionaryitem_id=e,this.relationship.rhs_relatename=this.rhs_items.find((t=>t.id==e)).name+"_name"}}return DictionaryManagerRelationshipContainerParent.ɵfac=function(e){return new(e||DictionaryManagerRelationshipContainerParent)(g.Y36(v),g.Y36(h.Pu),g.Y36(f.d),g.Y36(M.o),g.Y36(g.zs3),g.Y36(b.A))},DictionaryManagerRelationshipContainerParent.ɵcmp=g.Xpm({type:DictionaryManagerRelationshipContainerParent,selectors:[["dictionary-manager-relationship-container-parent"]],inputs:{relationship:"relationship"},decls:75,vars:17,consts:[[1,"slds-grid"],[1,"slds-size--1-of-2","slds-p-right--xx-small","slds-form-element"],[1,"slds-form-element__label"],["label","LBL_NAME"],[1,"slds-form-element__control"],[1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-size--1-of-2","slds-p-left--xx-small","slds-form-element"],["label","LBL_RELATIONSHIP_NAME"],["label","LBL_LHS_DICTIONARYDEFINITION"],["disabled","",1,"slds-input",3,"ngModel"],["label","LBL_RHS_DICTIONARYDEFINITION"],["label","LBL_LHS_SYSDICTIONARYITEM"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["label","LBL_RHS_SYSDICTIONARYITEM"],["label","LBL_LHS_LINKNAME"],["label","LBL_RHS_LINKNAME"],["label","LBL_LHS_LINKLABEL"],[3,"ngModel","ngModelChange"],["label","LBL_RHS_LINKLABEL"],["label","LBL_DUPLICATE_MERGE"],[3,"ngModel","asinteger","ngModelChange"],[1,"slds-size--1-of-2"],["label","LBL_RHS_RELATENAME"],["disabled","",1,"slds-input",3,"ngModel","ngModelChange"],[3,"value"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0)(1,"div",1)(2,"label",2),g._UZ(3,"system-label",3),g.qZA(),g.TgZ(4,"div",4)(5,"input",5),g.NdJ("ngModelChange",(function(e){return t.relationship.name=e})),g.qZA()()(),g.TgZ(6,"div",6)(7,"label",2),g._UZ(8,"system-label",7),g.qZA(),g.TgZ(9,"div",4)(10,"input",5),g.NdJ("ngModelChange",(function(e){return t.relationship.relationship_name=e})),g.qZA()()()(),g.TgZ(11,"div",0)(12,"div",1)(13,"label",2),g._UZ(14,"system-label",8),g.qZA(),g.TgZ(15,"div",4),g._UZ(16,"input",9),g.qZA()(),g.TgZ(17,"div",6)(18,"label",2),g._UZ(19,"system-label",10),g.qZA(),g.TgZ(20,"div",4),g._UZ(21,"input",9),g.qZA()()(),g.TgZ(22,"div",0)(23,"div",1)(24,"label",2),g._UZ(25,"system-label",11),g.qZA(),g.TgZ(26,"div",12)(27,"select",13),g.NdJ("ngModelChange",(function(e){return t.relationship.lhs_sysdictionaryitem_id=e})),g.YNc(28,re,2,2,"option",14),g.qZA()()(),g.TgZ(29,"div",6)(30,"label",2),g._UZ(31,"system-label",15),g.qZA(),g.TgZ(32,"div",12)(33,"select",13),g.NdJ("ngModelChange",(function(e){return t.rhs_sysdictionaryitem_id=e})),g.YNc(34,ce,2,2,"option",14),g.qZA()()()(),g.TgZ(35,"div",0)(36,"div",1)(37,"label",2),g._UZ(38,"system-label",16),g.qZA(),g.TgZ(39,"div",4)(40,"input",5),g.NdJ("ngModelChange",(function(e){return t.relationship.lhs_linkname=e})),g.qZA()()(),g.TgZ(41,"div",6)(42,"label",2),g._UZ(43,"system-label",17),g.qZA(),g.TgZ(44,"div",4)(45,"input",5),g.NdJ("ngModelChange",(function(e){return t.relationship.rhs_linkname=e})),g.qZA()()()(),g.TgZ(46,"div",0)(47,"div",1)(48,"label",2),g._UZ(49,"system-label",18),g.qZA(),g.TgZ(50,"div",4)(51,"system-input-label",19),g.NdJ("ngModelChange",(function(e){return t.relationship.lhs_linklabel=e})),g.qZA()()(),g.TgZ(52,"div",6)(53,"label",2),g._UZ(54,"system-label",20),g.qZA(),g.TgZ(55,"div",4)(56,"system-input-label",19),g.NdJ("ngModelChange",(function(e){return t.relationship.rhs_linklabel=e})),g.qZA()()()(),g.TgZ(57,"div",0)(58,"div",1)(59,"label",2),g._UZ(60,"system-label",21),g.qZA(),g.TgZ(61,"div",4)(62,"system-checkbox",22),g.NdJ("ngModelChange",(function(e){return t.relationship.lhs_duplicatemerge=e})),g.qZA()()(),g.TgZ(63,"div",6)(64,"label",2),g._UZ(65,"system-label",21),g.qZA(),g.TgZ(66,"div",4)(67,"system-checkbox",22),g.NdJ("ngModelChange",(function(e){return t.relationship.rhs_duplicatemerge=e})),g.qZA()()()(),g.TgZ(68,"div",0),g._UZ(69,"div",23),g.TgZ(70,"div",23)(71,"label",2),g._UZ(72,"system-label",24),g.qZA(),g.TgZ(73,"div",4)(74,"input",25),g.NdJ("ngModelChange",(function(e){return t.relationship.rhs_relatename=e})),g.qZA()()()()),2&e&&(g.xp6(5),g.Q6J("ngModel",t.relationship.name),g.xp6(5),g.Q6J("ngModel",t.relationship.relationship_name),g.xp6(6),g.Q6J("ngModel",t.dictionarymanager.getDictionaryDefinitionName(t.relationship.lhs_sysdictionarydefinition_id)),g.xp6(5),g.Q6J("ngModel",t.dictionarymanager.getDictionaryDefinitionName(t.relationship.rhs_sysdictionarydefinition_id)),g.xp6(6),g.Q6J("ngModel",t.relationship.lhs_sysdictionaryitem_id),g.xp6(1),g.Q6J("ngForOf",t.lhs_items),g.xp6(5),g.Q6J("ngModel",t.rhs_sysdictionaryitem_id),g.xp6(1),g.Q6J("ngForOf",t.rhs_items),g.xp6(6),g.Q6J("ngModel",t.relationship.lhs_linkname),g.xp6(5),g.Q6J("ngModel",t.relationship.rhs_linkname),g.xp6(6),g.Q6J("ngModel",t.relationship.lhs_linklabel),g.xp6(5),g.Q6J("ngModel",t.relationship.rhs_linklabel),g.xp6(6),g.Q6J("ngModel",t.relationship.lhs_duplicatemerge)("asinteger",!0),g.xp6(5),g.Q6J("ngModel",t.relationship.rhs_duplicatemerge)("asinteger",!0),g.xp6(7),g.Q6J("ngModel",t.relationship.rhs_relatename))},dependencies:[i.sg,n.YN,n.Kr,n.Fj,n.EJ,n.JJ,n.On,I.U,Q.$,T._],encapsulation:2}),DictionaryManagerRelationshipContainerParent})();function ue(e,t){if(1&e&&g._UZ(0,"dictionary-manager-relationship-container-onetomany",7),2&e){const e=g.oxw(2);g.Q6J("relationship",e.dictionaryRelationship)}}function me(e,t){if(1&e&&g._UZ(0,"dictionary-manager-relationship-container-manytomany",7),2&e){const e=g.oxw(2);g.Q6J("relationship",e.dictionaryRelationship)}}function pe(e,t){if(1&e&&g._UZ(0,"dictionary-manager-relationship-container-parent",7),2&e){const e=g.oxw(2);g.Q6J("relationship",e.dictionaryRelationship)}}function he(e,t){if(1&e&&(g.TgZ(0,"div",4),g.ynx(1,5),g.YNc(2,ue,1,1,"dictionary-manager-relationship-container-onetomany",6),g.YNc(3,me,1,1,"dictionary-manager-relationship-container-manytomany",6),g.YNc(4,pe,1,1,"dictionary-manager-relationship-container-parent",6),g.BQk(),g.qZA()),2&e){const e=g.oxw();g.xp6(1),g.Q6J("ngSwitch",e.dictionaryRelationship.relationship_type),g.xp6(1),g.Q6J("ngSwitchCase","one-to-many"),g.xp6(1),g.Q6J("ngSwitchCase","many-to-many"),g.xp6(1),g.Q6J("ngSwitchCase","parent")}}function fe(e,t){1&e&&(g.TgZ(0,"div",8),g._UZ(1,"system-label",9),g.qZA())}let be=(()=>{class DictionaryManagerRelationshipsDetails{constructor(e){this.dictionarymanager=e}}return DictionaryManagerRelationshipsDetails.ɵfac=function(e){return new(e||DictionaryManagerRelationshipsDetails)(g.Y36(v))},DictionaryManagerRelationshipsDetails.ɵcmp=g.Xpm({type:DictionaryManagerRelationshipsDetails,selectors:[["dictionary-manager-relationships-details"]],inputs:{dictionaryRelationship:"dictionaryRelationship"},decls:5,vars:2,consts:[[1,"slds-text-heading--small","slds-p-around--x-small","slds-theme--shade"],["label","LBL_ITEM_DETAILS"],["class","slds-p-around--x-small","system-to-bottom","",4,"ngIf","ngIfElse"],["SelectItem",""],["system-to-bottom","",1,"slds-p-around--x-small"],[3,"ngSwitch"],[3,"relationship",4,"ngSwitchCase"],[3,"relationship"],[1,"slds-height_full","slds-align--absolute-center"],["label","LBL_SELECT_ITEM"]],template:function(e,t){if(1&e&&(g.TgZ(0,"div",0),g._UZ(1,"system-label",1),g.qZA(),g.YNc(2,he,5,4,"div",2),g.YNc(3,fe,2,0,"ng-template",null,3,g.W1O)),2&e){const e=g.MAs(4);g.xp6(2),g.Q6J("ngIf",t.dictionarymanager.currentDictionaryRelationship)("ngIfElse",e)}},dependencies:[i.O5,i.RF,i.n9,T._,k.H,te,de,ge],encapsulation:2}),DictionaryManagerRelationshipsDetails})();function _e(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"system-utility-icon",27),g.NdJ("click",(function(t){g.CHM(e);const s=g.oxw().$implicit,i=g.oxw(2);return g.KtG(i.deleteDictionaryRelationship(t,s.id))})),g.qZA()}}const Ze=function(e){return{"slds-is-selected":e}};function ye(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"tr",17),g.NdJ("click",(function(){const t=g.CHM(e).$implicit,s=g.oxw(2);return g.KtG(s.setActiveId(t.id))})),g.TgZ(1,"td"),g._UZ(2,"system-utility-icon",18),g.TgZ(3,"dictionary-manager-item-status",19),g.NdJ("ngModelChange",(function(t){const s=g.CHM(e).$implicit;return g.KtG(s.status=t)})),g.qZA()(),g.TgZ(4,"td",20)(5,"div",9),g._uU(6),g.qZA()(),g.TgZ(7,"td",21)(8,"div",9)(9,"span",22),g._uU(10),g.qZA()()(),g.TgZ(11,"td",23)(12,"div",9),g._uU(13),g.qZA()(),g.TgZ(14,"td",24)(15,"div",9),g._uU(16),g.qZA()(),g.TgZ(17,"td",25),g.YNc(18,_e,1,0,"system-utility-icon",26),g.qZA()()}if(2&e){const e=t.$implicit,s=g.oxw(2);g.Q6J("ngClass",g.VKq(11,Ze,s.dictionarymanager.currentDictionaryRelationship==e.id)),g.xp6(2),g.Q6J("icon","g"==e.scope?"world":"people"),g.xp6(1),g.Q6J("ngModel",e.status),g.xp6(3),g.AsE("",e.name," / ",e.relationship_name,""),g.xp6(4),g.Oqu(e.relationship_type),g.xp6(3),g.AsE("",s.dictionarymanager.getDictionaryDefinitionName(e.lhs_sysdictionarydefinition_id)," / ",s.dictionarymanager.getDictionaryItemName(e.lhs_sysdictionaryitem_id),""),g.xp6(3),g.AsE("",s.dictionarymanager.getDictionaryDefinitionName(e.rhs_sysdictionarydefinition_id)," / ",s.dictionarymanager.getDictionaryItemName(e.rhs_sysdictionaryitem_id),""),g.xp6(2),g.Q6J("ngIf",s.dictionarymanager.canChange(e.scope))}}function Me(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",28)(1,"system-utility-icon",29),g.NdJ("click",(function(t){g.CHM(e);const s=g.oxw(2);return g.KtG(s.addDictionaryRelationship(t))})),g.qZA()()}}function xe(e,t){if(1&e&&(g.ynx(0),g.TgZ(1,"table",5)(2,"thead")(3,"tr",6),g._UZ(4,"th",7),g.TgZ(5,"th",8)(6,"div",9),g._UZ(7,"system-label",10),g.qZA()(),g.TgZ(8,"th",8)(9,"div",9),g._UZ(10,"system-label",11),g.qZA()(),g.TgZ(11,"th",8)(12,"div",9),g._UZ(13,"system-label",12),g.qZA()(),g.TgZ(14,"th",8)(15,"div",9),g._UZ(16,"system-label",13),g.qZA()(),g._UZ(17,"th",14),g.qZA()(),g.TgZ(18,"tbody"),g.YNc(19,ye,19,13,"tr",15),g.qZA()(),g.YNc(20,Me,2,0,"div",16),g.BQk()),2&e){const e=g.oxw();g.xp6(19),g.Q6J("ngForOf",e.dictionaryrelationships),g.xp6(1),g.Q6J("ngIf","none"!=e.dictionarymanager.changescope)}}function ve(e,t){1&e&&(g.TgZ(0,"div",30),g._UZ(1,"system-label",31),g.qZA())}let Ae=(()=>{class DictionaryManagerRelationships{constructor(e,t,s,i,n,l){this.dictionarymanager=e,this.metadata=t,this.language=s,this.modal=i,this.injector=n,this.modelutilities=l}get dictionaryrelationships(){return this.dictionarymanager.currentDictionaryDefinition?this.dictionarymanager.dictionaryrelationships.filter((e=>0==e.deleted&&(e.lhs_sysdictionarydefinition_id==this.dictionarymanager.currentDictionaryDefinition||e.rhs_sysdictionarydefinition_id==this.dictionarymanager.currentDictionaryDefinition))).sort(((e,t)=>e.name.localeCompare(t.name))):[]}addDictionaryRelationship(e){e.stopPropagation(),this.modal.openModal("DictionaryManagerRelationshipAdd",!0,this.injector)}deleteDictionaryRelationship(e,t){e.stopPropagation(),this.modal.prompt("confirm",this.language.getLabel("MSG_DELETE_RECORD","","long"),this.language.getLabel("MSG_DELETE_RECORD")).subscribe((e=>{if(e){this.dictionarymanager.dictionaryrelationships.find((e=>e.id==t)).deleted=1;this.dictionarymanager.currentDictionaryRelationship==t&&(this.dictionarymanager.currentDictionaryRelationship,this.currentRelationship=null)}}))}isLeft(e){return e.lhs_sysdictionarydefinition_id==this.dictionarymanager.currentDictionaryDefinition}setActiveId(e){this.dictionarymanager.currentDictionaryRelationship=e,this.currentRelationship=this.dictionarymanager.dictionaryrelationships.find((t=>t.id==e))}}return DictionaryManagerRelationships.ɵfac=function(e){return new(e||DictionaryManagerRelationships)(g.Y36(v),g.Y36(h.Pu),g.Y36(f.d),g.Y36(M.o),g.Y36(g.zs3),g.Y36(b.A))},DictionaryManagerRelationships.ɵcmp=g.Xpm({type:DictionaryManagerRelationships,selectors:[["dictionary-manager-relationships"]],decls:6,vars:3,consts:[["system-to-bottom-noscroll",""],[2,"height","calc(100% - 450px)"],[4,"ngIf","ngIfElse"],["selectdefinition",""],[3,"dictionaryRelationship"],[1,"slds-table","slds-table_cell-buffer","slds-table_bordered"],[1,"slds-line-height_reset"],["scope","col",2,"width","2.5rem"],["scope","col",1,""],[1,"slds-truncate"],["label","LBL_NAME"],["label","LBL_TYPE"],["label","LBL_LEFT"],["label","LBL_RIGHT"],["scope","col",2,"width","2rem"],["class","slds-hint-parent",3,"ngClass","click",4,"ngFor","ngForOf"],["class","slds-align--absolute-center slds-p-around--small",4,"ngIf"],[1,"slds-hint-parent",3,"ngClass","click"],["size","xx-small",1,"slds-p-right--xx-small",3,"icon"],[3,"ngModel","ngModelChange"],["data-label","NAME"],["data-label","Type"],[1,"slds-p-horizontal--x-small"],["data-label","Left"],["data-label","Right"],[1,"slds-align--absolute-center",2,"width","2rem"],["size","xx-small","icon","delete",3,"click",4,"ngIf"],["size","xx-small","icon","delete",3,"click"],[1,"slds-align--absolute-center","slds-p-around--small"],["icon","new","size","x-small",3,"click"],[1,"slds-size--1-of-1","slds-height_full","slds-align--absolute-center"],["label","LBL_SELECT_A_DICTIONARYDEFINITION"]],template:function(e,t){if(1&e&&(g.TgZ(0,"div",0)(1,"div",1),g.YNc(2,xe,21,2,"ng-container",2),g.YNc(3,ve,2,0,"ng-template",null,3,g.W1O),g.qZA(),g._UZ(5,"dictionary-manager-relationships-details",4),g.qZA()),2&e){const e=g.MAs(4);g.xp6(2),g.Q6J("ngIf",t.dictionarymanager.currentDictionaryDefinition)("ngIfElse",e),g.xp6(3),g.Q6J("dictionaryRelationship",t.currentRelationship)}},dependencies:[i.mk,i.sg,i.O5,n.JJ,n.On,T._,u.r,C.t,m,be],encapsulation:2}),DictionaryManagerRelationships})();function Te(e,t){1&e&&(g.TgZ(0,"option",35),g._UZ(1,"system-label",36),g.qZA())}function Le(e,t){if(1&e&&(g.TgZ(0,"div",37)(1,"span",38),g._uU(2),g.qZA()()),2&e){const e=t.$implicit;g.Q6J("cdkDragData",e),g.xp6(2),g.Oqu(e.name)}}function Ce(e,t){if(1&e&&(g.TgZ(0,"div",37)(1,"span",38),g._uU(2),g.qZA()()),2&e){const e=t.$implicit;g.Q6J("cdkDragData",e),g.xp6(2),g.Oqu(e.name)}}const qe=function(e){return[e]};function Je(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div")(1,"div",1),g._UZ(2,"system-label",2),g.qZA(),g.TgZ(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"label",7),g._UZ(8,"system-label",8),g.qZA(),g.TgZ(9,"system-input-text",9),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.index.name=t)})),g.qZA()(),g.TgZ(10,"div",10)(11,"label",7),g._UZ(12,"system-label",11),g.qZA(),g.TgZ(13,"div",12)(14,"select",13),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.index.indextype=t)})),g.TgZ(15,"option",14),g._uU(16,"primary"),g.qZA(),g.TgZ(17,"option",15),g._uU(18,"index"),g.qZA(),g.TgZ(19,"option",16),g._uU(20,"unique"),g.qZA()()()()(),g.TgZ(21,"div",5)(22,"div",6)(23,"label",7),g._UZ(24,"system-label",17),g.qZA(),g.TgZ(25,"div",12)(26,"select",13),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.index.scope=t)})),g.YNc(27,Te,2,0,"option",18),g.TgZ(28,"option",19),g._UZ(29,"system-label",20),g.qZA()()()(),g.TgZ(30,"div",21)(31,"label",7),g._UZ(32,"system-label",22),g.qZA(),g.TgZ(33,"system-input-text",23),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.index.package=t)})),g.qZA()(),g.TgZ(34,"div",24)(35,"label",7),g._UZ(36,"system-label",25),g.qZA(),g.TgZ(37,"system-input-text",23),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.index.version=t)})),g.qZA()()(),g.TgZ(38,"div",5)(39,"div",26)(40,"span",7),g._UZ(41,"system-label",27),g.qZA(),g.TgZ(42,"div",28,29),g.NdJ("cdkDropListDropped",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.onFieldDrop(t))})),g.YNc(44,Le,3,2,"div",30),g.qZA()(),g.TgZ(45,"div",31)(46,"span",7),g._UZ(47,"system-label",32),g.qZA(),g.TgZ(48,"div",33,34),g.NdJ("cdkDropListDropped",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.onFieldDrop(t))})),g.YNc(50,Ce,3,2,"div",30),g.qZA()()()()()()}if(2&e){const e=g.MAs(43),t=g.MAs(49),s=g.oxw();g.xp6(9),g.Q6J("ngModel",s.index.name),g.xp6(5),g.Q6J("ngModel",s.index.indextype),g.xp6(12),g.Q6J("ngModel",s.index.scope),g.xp6(1),g.Q6J("ngIf","all"==s.dictionarymanager.changescope),g.xp6(6),g.Q6J("ngModel",s.index.package),g.xp6(4),g.Q6J("ngModel",s.index.version),g.xp6(5),g.Q6J("cdkDropListData",s.availableDictionaryItems)("cdkDropListConnectedTo",g.VKq(12,qe,t)),g.xp6(2),g.Q6J("ngForOf",s.availableDictionaryItems),g.xp6(4),g.Q6J("cdkDropListData",s.indexDictionaryItems)("cdkDropListConnectedTo",g.VKq(14,qe,e)),g.xp6(2),g.Q6J("ngForOf",s.indexDictionaryItems)}}let Ne=(()=>{class DictionaryManagerIndexDetails{constructor(e,t,s,i,n,l){this.dictionarymanager=e,this.metadata=t,this.language=s,this.modal=i,this.injector=n,this.modelutilities=l,this.availableDictionaryItems=[],this.indexDictionaryItems=[]}ngOnChanges(e){if(this.indexid){this.index=this.dictionarymanager.dictionaryindexes.find((e=>e.id==this.indexid)),this.availableDictionaryItems=this.dictionarymanager.getDictionaryDefinitionItems(this.dictionarymanager.currentDictionaryDefinition),this.indexDictionaryItems=[];let e=this.dictionarymanager.dictionaryindexitems.filter((e=>e.sysdictionaryindex_id==this.indexid&&0==e.deleted)).sort(((e,t)=>e.sequence>t.sequence?1:-1));for(let t of e){let e=this.availableDictionaryItems.findIndex((e=>e.id==t.sysdictionaryitem_id));this.indexDictionaryItems.push(this.availableDictionaryItems.splice(e,1)[0])}}else this.index=null}onFieldDrop(e){let t=e.previousContainer.data.splice(e.previousIndex,1);e.container.data.splice(e.currentIndex,0,t[0]);let s=this.dictionarymanager.dictionaryindexitems.filter((e=>e.sysdictionaryindex_id==this.indexid&&0==e.deleted)),i=0,n=[];for(let e of this.indexDictionaryItems){let t=s.find((t=>t.sysdictionaryitem_id==e.id));if(t)t.sequence=i,n.push(t.id);else{let t=this.modelutilities.generateGuid();this.dictionarymanager.dictionaryindexitems.push({id:t,scope:this.index.scope,status:this.index.status,sysdictionaryindex_id:this.index.id,sysdictionaryitem_id:e.id,sequence:i,deleted:0}),n.push(t)}i++}for(let e of s)n.indexOf(e.id)<0&&(e.deleted=1)}}return DictionaryManagerIndexDetails.ɵfac=function(e){return new(e||DictionaryManagerIndexDetails)(g.Y36(v),g.Y36(h.Pu),g.Y36(f.d),g.Y36(M.o),g.Y36(g.zs3),g.Y36(b.A))},DictionaryManagerIndexDetails.ɵcmp=g.Xpm({type:DictionaryManagerIndexDetails,selectors:[["dictionary-manager-index-details"]],inputs:{indexid:"indexid"},features:[g.TTD],decls:1,vars:1,consts:[[4,"ngIf"],[1,"slds-text-heading--small","slds-p-around--x-small","slds-theme--shade"],["label","LBL_INDEX_DETAILS"],["system-to-bottom",""],[1,"slds-p-around--x-small"],[1,"slds-grid"],[1,"slds-form-element__control","slds-size--1-of-2","slds-p-right--xxx-small"],[1,"slds-form-element__label"],["label","LBL_NAME"],["disabled","",3,"ngModel","ngModelChange"],[1,"slds-large-size--1-of-2","slds-p-left--xxx-small","slds-form-element__control"],["label","LBL_TYPE"],[1,"slds-select_container"],["disabled","",1,"slds-select",3,"ngModel","ngModelChange"],["value","primary"],["value","index"],["value","unique"],["label","LBL_SCOPE"],["value","g",4,"ngIf"],["value","c"],["label","LBL_CUSTOM"],[1,"slds-size--1-of-4","slds-p-horizontal--xxx-small","slds-form-element__control"],["label","LBL_PACKAGE"],[3,"ngModel","ngModelChange"],[1,"slds-size--1-of-4","slds-p-left--xxx-small","slds-form-element__control"],["label","LBL_VERSION"],[1,"slds-form-element","slds-p-right--x-small","slds-size--1-of-2"],["label","LBL_AVAILABLE_ITEMS"],["cdkDropList","",1,"slds-picklist","slds-picklist__options","slds-size--1-of-1",3,"cdkDropListData","cdkDropListConnectedTo","cdkDropListDropped"],["listOne","cdkDropList"],["cdkDrag","","class","slds-drag--preview slds-picklist__item",3,"cdkDragData",4,"ngFor","ngForOf"],[1,"slds-form-element","slds-p-left--x-small","slds-size--1-of-2"],["label","LBL_INDEX_ITEMS"],["cdkDropList","",1,"slds-picklist","slds-picklist__options","slds-size--1-of-1","cdk-drag",3,"cdkDropListData","cdkDropListConnectedTo","cdkDropListDropped"],["listTwo","cdkDropList"],["value","g"],["label","LBL_GLOBAL"],["cdkDrag","",1,"slds-drag--preview","slds-picklist__item",3,"cdkDragData"],[1,"slds-truncate"]],template:function(e,t){1&e&&g.YNc(0,Je,51,16,"div",0),2&e&&g.Q6J("ngIf",t.indexid)},dependencies:[i.sg,i.O5,n.YN,n.Kr,n.EJ,n.JJ,n.On,q.Z,T._,k.H,c.Wj,c.Zt],encapsulation:2}),DictionaryManagerIndexDetails})();const ke=function(e){return{"slds-is-selected":e}};function we(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"tr",17),g.NdJ("click",(function(){const t=g.CHM(e).$implicit,s=g.oxw(2);return g.KtG(s.setActiveId(t.id))})),g.TgZ(1,"td"),g._UZ(2,"system-utility-icon",18),g.TgZ(3,"dictionary-manager-item-status",19),g.NdJ("ngModelChange",(function(t){const s=g.CHM(e).$implicit;return g.KtG(s.status=t)})),g.qZA()(),g.TgZ(4,"td")(5,"div",8),g._uU(6),g.qZA()(),g._UZ(7,"td"),g.TgZ(8,"td")(9,"div",8),g._uU(10),g.qZA()(),g.TgZ(11,"td")(12,"div",8),g._uU(13),g.qZA()(),g.TgZ(14,"td",20)(15,"system-utility-icon",21),g.NdJ("click",(function(t){const s=g.CHM(e).$implicit,i=g.oxw(2);return g.KtG(i.deleteIndex(t,s.id))})),g.qZA()()()}if(2&e){const e=t.$implicit,s=g.oxw(2);g.Q6J("ngClass",g.VKq(6,ke,s.dictionarymanager.currentDictionaryIndex==e.id)),g.xp6(2),g.Q6J("icon","g"==e.scope?"world":"people"),g.xp6(1),g.Q6J("ngModel",e.status),g.xp6(3),g.Oqu(e.name),g.xp6(4),g.Oqu(e.indextype),g.xp6(3),g.Oqu(s.getIndexFields(e.id))}}function Ue(e,t){if(1&e&&(g.TgZ(0,"tr",23),g._UZ(1,"td"),g.TgZ(2,"td")(3,"div",8),g._uU(4),g.qZA()(),g.TgZ(5,"td")(6,"div",8),g._uU(7),g.qZA()(),g.TgZ(8,"td")(9,"div",8),g._uU(10),g.qZA()(),g.TgZ(11,"td")(12,"div",8),g._uU(13),g.qZA()(),g._UZ(14,"td"),g.qZA()),2&e){const e=t.$implicit,s=g.oxw().$implicit,i=g.oxw(2);g.xp6(4),g.Oqu(e.name),g.xp6(3),g.Oqu(i.dictionarymanager.getDictionaryDefinitionName(s.relatedTemplateId)),g.xp6(3),g.Oqu(e.indextype),g.xp6(3),g.Oqu(i.getIndexFields(e.id))}}function Ee(e,t){if(1&e&&(g.TgZ(0,"tbody"),g.YNc(1,Ue,15,4,"tr",22),g.qZA()),2&e){const e=t.$implicit;g.xp6(1),g.Q6J("ngForOf",e.indexes)}}function De(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",24)(1,"system-utility-icon",25),g.NdJ("click",(function(t){g.CHM(e);const s=g.oxw(2);return g.KtG(s.addIndex(t))})),g.qZA()()}}function Oe(e,t){if(1&e&&(g.ynx(0),g.TgZ(1,"table",4)(2,"thead")(3,"tr",5),g._UZ(4,"th",6),g.TgZ(5,"th",7)(6,"div",8),g._UZ(7,"system-label",9),g.qZA()(),g.TgZ(8,"th",7)(9,"div",8),g._UZ(10,"system-label",10),g.qZA()(),g.TgZ(11,"th",7)(12,"div",8),g._UZ(13,"system-label",11),g.qZA()(),g.TgZ(14,"th",7)(15,"div",8),g._UZ(16,"system-label",12),g.qZA()(),g._UZ(17,"th",13),g.qZA()(),g.TgZ(18,"tbody"),g.YNc(19,we,16,8,"tr",14),g.qZA(),g.YNc(20,Ee,2,1,"tbody",15),g.qZA(),g.YNc(21,De,2,0,"div",16),g.BQk()),2&e){const e=g.oxw();g.xp6(19),g.Q6J("ngForOf",e.dictionaryIndexes),g.xp6(1),g.Q6J("ngForOf",e.dictionaryIndexesForTemplates),g.xp6(1),g.Q6J("ngIf","none"!=e.dictionarymanager.changescope)}}function Ie(e,t){1&e&&(g.TgZ(0,"div",26),g._UZ(1,"system-label",27),g.qZA())}let Qe=(()=>{class DictionaryManagerIndexes{constructor(e,t,s,i,n,l){this.dictionarymanager=e,this.metadata=t,this.language=s,this.modal=i,this.injector=n,this.modelutilities=l}get dictionaryIndexes(){return this.dictionarymanager.currentDictionaryDefinition?this.dictionarymanager.dictionaryindexes.filter((e=>0==e.deleted&&e.sysdictionarydefinition_id==this.dictionarymanager.currentDictionaryDefinition)).sort(((e,t)=>e.name.localeCompare(t.name)?1:-1)):[]}get dictionaryIndexesForTemplates(){let e=[];for(let t of this.dictionarymanager.dictionaryitems.filter((e=>0==e.deleted&&e.sysdictionary_ref_id&&e.sysdictionarydefinition_id==this.dictionarymanager.currentDictionaryDefinition))){let s=this.dictionarymanager.dictionaryindexes.filter((e=>0==e.deleted&&e.sysdictionarydefinition_id==t.sysdictionary_ref_id));s.length>0&&e.push({relatedTemplateId:t.sysdictionary_ref_id,indexes:s})}return e}addIndex(e){e.stopPropagation(),this.modal.openModal("DictionaryManagerIndexAdd",!0,this.injector)}deleteIndex(e,t){e.stopPropagation(),this.modal.prompt("confirm",this.language.getLabel("MSG_DELETE_RECORD","","long"),this.language.getLabel("MSG_DELETE_RECORD")).subscribe((e=>{if(e){this.dictionarymanager.dictionaryindexes.find((e=>e.id==t)).deleted=1}}))}getIndexFields(e){let t=[];for(let s of this.dictionarymanager.dictionaryindexitems.filter((t=>t.sysdictionaryindex_id==e&&0==t.deleted)).sort(((e,t)=>e.sequence>t.sequence?1:-1))){let e=this.dictionarymanager.dictionaryitems.find((e=>e.id==s.sysdictionaryitem_id))?.name;e&&t.push(e)}return t.join()}setActiveId(e){this.dictionarymanager.currentDictionaryIndex=e}}return DictionaryManagerIndexes.ɵfac=function(e){return new(e||DictionaryManagerIndexes)(g.Y36(v),g.Y36(h.Pu),g.Y36(f.d),g.Y36(M.o),g.Y36(g.zs3),g.Y36(b.A))},DictionaryManagerIndexes.ɵcmp=g.Xpm({type:DictionaryManagerIndexes,selectors:[["dictionary-manager-indexes"]],decls:5,vars:3,consts:[[2,"height","30vh"],[4,"ngIf","ngIfElse"],["selectdefinition",""],[3,"indexid"],[1,"slds-table","slds-table_cell-buffer","slds-table_bordered"],[1,"slds-line-height_reset"],["scope","col",2,"width","2.5rem"],["scope","col",1,""],[1,"slds-truncate"],["label","LBL_NAME"],["label","LBL_TEMPLATE"],["label","LBL_TYPE"],["label","LBL_ITEMS"],["scope","col",2,"width","2rem"],["class","slds-hint-parent",3,"ngClass","click",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],["class","slds-align--absolute-center slds-p-around--small",4,"ngIf"],[1,"slds-hint-parent",3,"ngClass","click"],["size","xx-small",1,"slds-p-right--xx-small",3,"icon"],[3,"ngModel","ngModelChange"],[1,"slds-align--absolute-center",2,"width","2rem"],["size","xx-small","icon","delete",3,"click"],["class","slds-hint-parent",4,"ngFor","ngForOf"],[1,"slds-hint-parent"],[1,"slds-align--absolute-center","slds-p-around--small"],["icon","new","size","x-small",3,"click"],[1,"slds-size--1-of-1","slds-height_full","slds-align--absolute-center"],["label","LBL_SELECT_A_DICTIONARYDEFINITION"]],template:function(e,t){if(1&e&&(g.TgZ(0,"div",0),g.YNc(1,Oe,22,3,"ng-container",1),g.YNc(2,Ie,2,0,"ng-template",null,2,g.W1O),g.qZA(),g._UZ(4,"dictionary-manager-index-details",3)),2&e){const e=g.MAs(3);g.xp6(1),g.Q6J("ngIf",t.dictionarymanager.currentDictionaryDefinition)("ngIfElse",e),g.xp6(3),g.Q6J("indexid",t.dictionarymanager.currentDictionaryIndex)}},dependencies:[i.mk,i.sg,i.O5,n.JJ,n.On,T._,u.r,m,Ne],encapsulation:2}),DictionaryManagerIndexes})();function Se(e,t){if(1&e&&(g.TgZ(0,"div",6),g._uU(1),g.qZA()),2&e){const e=g.oxw().$implicit,t=g.oxw(2);g.xp6(1),g.Oqu(t.translateDomainField(t.getDomainFields(e.sysdomaindefinition_id)[0].name,e))}}function Be(e,t){1&e&&g._UZ(0,"div",6)}function Fe(e,t){if(1&e&&(g.TgZ(0,"tr",12),g._UZ(1,"td",13)(2,"td",14),g.TgZ(3,"td",15)(4,"div",6),g._uU(5),g.qZA()(),g._UZ(6,"td",17),g.qZA()),2&e){const e=t.$implicit,s=g.oxw().$implicit,i=g.oxw(2);g.xp6(5),g.Oqu(i.translateDomainField(e.name,s))}}function Ye(e,t){if(1&e&&(g.ynx(0),g.TgZ(1,"tr",12)(2,"td",13)(3,"div",6),g._uU(4),g.qZA()(),g.TgZ(5,"td",14)(6,"div",6),g._uU(7),g.qZA()(),g.TgZ(8,"td",15),g.YNc(9,Se,2,1,"div",16),g.YNc(10,Be,1,0,"div",16),g.qZA(),g.TgZ(11,"td",17)(12,"div",6),g._uU(13),g.qZA()()(),g.YNc(14,Fe,7,1,"tr",18),g.BQk()),2&e){const e=t.$implicit,s=g.oxw(2);g.xp6(4),g.Oqu(e.name),g.xp6(3),g.Oqu(s.dictionarymanager.getDomainName(e.sysdomaindefinition_id)),g.xp6(2),g.Q6J("ngIf",s.getDomainFields(e.sysdomaindefinition_id)[0]),g.xp6(1),g.Q6J("ngIf",!s.getDomainFields(e.sysdomaindefinition_id)[0]),g.xp6(3),g.Oqu(s.getRefDefinitionName(e.sysdictionarydefinition_id)),g.xp6(1),g.Q6J("ngForOf",s.getDomainFields(e.sysdomaindefinition_id,!1))}}function Re(e,t){if(1&e&&(g.ynx(0),g.TgZ(1,"table",3)(2,"thead")(3,"tr",4)(4,"th",5)(5,"div",6),g._UZ(6,"system-label",7),g.qZA()(),g.TgZ(7,"th",5)(8,"div",6),g._UZ(9,"system-label",8),g.qZA()(),g.TgZ(10,"th",5)(11,"div",6),g._UZ(12,"system-label",9),g.qZA()(),g.TgZ(13,"th",5)(14,"div",6),g._UZ(15,"system-label",10),g.qZA()()()(),g.TgZ(16,"tbody"),g.YNc(17,Ye,15,6,"ng-container",11),g.qZA()(),g.BQk()),2&e){const e=g.oxw();g.xp6(17),g.Q6J("ngForOf",e.dictionaryitems)}}function Ge(e,t){1&e&&(g.TgZ(0,"div",19),g._UZ(1,"system-label",20),g.qZA())}let He=(()=>{class DictionaryManagerFields{constructor(e,t,s,i,n,l){this.dictionarymanager=e,this.metadata=t,this.language=s,this.modal=i,this.injector=n,this.modelutilities=l}get dictionaryitems(){return this.dictionarymanager.currentDictionaryDefinition?this.dictionarymanager.getDictionaryDefinitionItems(this.dictionarymanager.currentDictionaryDefinition):[]}getDomainFields(e,t=!0){let s=this.dictionarymanager.domainfields.filter((t=>t.sysdomaindefinition_id==e&&0==t.deleted)).sort(((e,t)=>e.sequence>t.sequence?1:-1));return s?t?s.slice(0,1):s.slice(1):[]}getRefDefinitionName(e){return e!=this.dictionarymanager.currentDictionaryDefinition?this.dictionarymanager.dictionarydefinitions.find((t=>t.id==e))?.name:""}translateDomainField(e,t){return e.replace("{sysdictionaryitems.name}",t.name)}}return DictionaryManagerFields.ɵfac=function(e){return new(e||DictionaryManagerFields)(g.Y36(v),g.Y36(h.Pu),g.Y36(f.d),g.Y36(M.o),g.Y36(g.zs3),g.Y36(b.A))},DictionaryManagerFields.ɵcmp=g.Xpm({type:DictionaryManagerFields,selectors:[["dictionary-manager-fields"]],decls:4,vars:2,consts:[["system-to-bottom",""],[4,"ngIf","ngIfElse"],["selectdefinition",""],[1,"slds-table","slds-table_cell-buffer","slds-table_bordered"],[1,"slds-line-height_reset"],["scope","col",1,""],[1,"slds-truncate"],["label","LBL_NAME"],["label","LBL_DOMAIN"],["label","LBL_FIELD"],["label","LBL_TEMPLATE"],[4,"ngFor","ngForOf"],[1,"slds-hint-parent"],["data-label","Name"],["data-label","Domain"],["data-label","Field"],["class","slds-truncate",4,"ngIf"],["data-label","Template"],["class","slds-hint-parent",4,"ngFor","ngForOf"],[1,"slds-size--1-of-1","slds-height_full","slds-align--absolute-center"],["label","LBL_SELECT_A_DICTIONARYDEFINITION"]],template:function(e,t){if(1&e&&(g.TgZ(0,"div",0),g.YNc(1,Re,18,1,"ng-container",1),g.YNc(2,Ge,2,0,"ng-template",null,2,g.W1O),g.qZA()),2&e){const e=g.MAs(3);g.xp6(1),g.Q6J("ngIf",t.dictionarymanager.currentDictionaryDefinition)("ngIfElse",e)}},dependencies:[i.sg,i.O5,T._,k.H],encapsulation:2}),DictionaryManagerFields})();const Ke=function(e){return{"slds-is-active":e}},ze=function(e){return{"slds-hide":e}};let Ve=(()=>{class DictionaryManagerDefinitionTabs{constructor(e,t,s,i,n,l){this.dictionarymanager=e,this.metadata=t,this.language=s,this.modal=i,this.injector=n,this.modelutilities=l,this.scope="items"}}return DictionaryManagerDefinitionTabs.ɵfac=function(e){return new(e||DictionaryManagerDefinitionTabs)(g.Y36(v),g.Y36(h.Pu),g.Y36(f.d),g.Y36(M.o),g.Y36(g.zs3),g.Y36(b.A))},DictionaryManagerDefinitionTabs.ɵcmp=g.Xpm({type:DictionaryManagerDefinitionTabs,selectors:[["dictionary-manager-definition-tabs"]],decls:25,vars:24,consts:[[1,"slds-tabs_scoped"],["role","tablist",1,"slds-tabs_scoped__nav"],["role","presentation",1,"slds-tabs_scoped__item",3,"ngClass","click"],["href","javascript:void(0);","role","tab",1,"slds-tabs_scoped__link"],["label","LBL_ITEMS"],["label","LBL_RELATIONSHIPS"],["label","LBL_INDEXES"],["label","LBL_FIELDS"],["role","tabpanel",1,"slds-tabs_scoped__content","slds-p-around--none",3,"ngClass"],[1,"slds-height_full"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0)(1,"ul",1)(2,"li",2),g.NdJ("click",(function(){return t.scope="items"})),g.TgZ(3,"a",3),g._UZ(4,"system-label",4),g.qZA()(),g.TgZ(5,"li",2),g.NdJ("click",(function(){return t.scope="relationships"})),g.TgZ(6,"a",3),g._UZ(7,"system-label",5),g.qZA()(),g.TgZ(8,"li",2),g.NdJ("click",(function(){return t.scope="indexes"})),g.TgZ(9,"a",3),g._UZ(10,"system-label",6),g.qZA()(),g.TgZ(11,"li",2),g.NdJ("click",(function(){return t.scope="fields"})),g.TgZ(12,"a",3),g._UZ(13,"system-label",7),g.qZA()()(),g.TgZ(14,"div",8)(15,"div",9),g._UZ(16,"dictionary-manager-items"),g.qZA()(),g.TgZ(17,"div",8)(18,"div",9),g._UZ(19,"dictionary-manager-relationships"),g.qZA()(),g.TgZ(20,"div",8)(21,"div",9),g._UZ(22,"dictionary-manager-indexes"),g.qZA()(),g.TgZ(23,"div",8),g._UZ(24,"dictionary-manager-fields"),g.qZA()()),2&e&&(g.xp6(2),g.Q6J("ngClass",g.VKq(8,Ke,"items"==t.scope)),g.xp6(3),g.Q6J("ngClass",g.VKq(10,Ke,"relationships"==t.scope)),g.xp6(3),g.Q6J("ngClass",g.VKq(12,Ke,"indexes"==t.scope)),g.xp6(3),g.Q6J("ngClass",g.VKq(14,Ke,"fields"==t.scope)),g.xp6(3),g.Q6J("ngClass",g.VKq(16,ze,"items"!=t.scope)),g.xp6(3),g.Q6J("ngClass",g.VKq(18,ze,"relationships"!=t.scope)),g.xp6(3),g.Q6J("ngClass",g.VKq(20,ze,"indexes"!=t.scope)),g.xp6(3),g.Q6J("ngClass",g.VKq(22,ze,"fields"!=t.scope)))},dependencies:[i.mk,T._,W,Ae,Qe,He],encapsulation:2}),DictionaryManagerDefinitionTabs})();var Pe=s(4561);const $e=["*",[["workbench-header-controls"]]],je=["*","workbench-header-controls"];let We=(()=>{class WorkbenchHeader{constructor(e){this.language=e,this.icon="custom"}}return WorkbenchHeader.ɵfac=function(e){return new(e||WorkbenchHeader)(g.Y36(f.d))},WorkbenchHeader.ɵcmp=g.Xpm({type:WorkbenchHeader,selectors:[["workbench-header"]],inputs:{titlelabel:"titlelabel",icon:"icon"},ngContentSelectors:je,decls:14,vars:2,consts:[[1,"slds-p-around--medium","slds-theme--shade","slds-border--bottom"],[1,"slds-page-header__row"],[1,"slds-page-header__col-title"],[1,"slds-media"],[3,"icon"],[1,"slds-media__body"],[1,"slds-page-header__name"],[1,"slds-page-header__name-title"],[1,"slds-page-header__title","slds-truncate"],[3,"label"],[1,"slds-page-header__name-meta"]],template:function(e,t){1&e&&(g.F$t($e),g.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),g._UZ(4,"system-icon",4),g.TgZ(5,"div",5)(6,"div",6)(7,"div",7)(8,"h1")(9,"span",8),g._UZ(10,"system-label",9),g.qZA()()()(),g.TgZ(11,"p",10),g.Hsn(12),g.qZA()()()(),g.Hsn(13,1),g.qZA()()),2&e&&(g.xp6(4),g.Q6J("icon",t.icon),g.xp6(6),g.Q6J("label",t.titlelabel))},dependencies:[Pe.f,T._],encapsulation:2}),WorkbenchHeader})();const Xe=["*"];let et=(()=>{class WorkbenchHeaderControls{}return WorkbenchHeaderControls.ɵfac=function(e){return new(e||WorkbenchHeaderControls)},WorkbenchHeaderControls.ɵcmp=g.Xpm({type:WorkbenchHeaderControls,selectors:[["workbench-header-controls"]],ngContentSelectors:Xe,decls:4,vars:0,consts:[[1,"slds-page-header__col-actions"],[1,"slds-page-header__controls"],[1,"slds-page-header__control"]],template:function(e,t){1&e&&(g.F$t(),g.TgZ(0,"div",0)(1,"div",1)(2,"div",2),g.Hsn(3),g.qZA()()())},encapsulation:2}),WorkbenchHeaderControls})();function tt(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"li",10),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw();return g.KtG(t.migrate())})),g.TgZ(1,"a",11)(2,"span",12),g._UZ(3,"system-label",21),g.qZA()()()}}let st=(()=>{class DictionaryManager{constructor(e,t,s,i,n){this.dictionarymanager=e,this.modal=t,this.backend=s,this.toast=i,this.injector=n}migrate(){this.modal.openModal("DictionaryManagerMigrateDefinitionModal",!0,this.injector)}repairDB(){let e=this.modal.await("LBL_LOADING");this.backend.getRequest("admin/repair/sql").subscribe((t=>{e.emit(!0);let s=t.sql,i=t.wholeSQL;t&&this.modal.openModal("AdministrationDictRepairModal",!0,this.injector).subscribe((e=>{e.instance.sql=s,e.instance.wholeSQL=i}))}))}repairDBCache(){this.modal.confirm("are you sure you want to rebuild the dictionary data cache?","rebuild dictionary Cache").subscribe({next:e=>{if(e){let e=this.modal.await("LBL_LOADING");this.backend.getRequest("admin/repair/cachedb").subscribe((t=>{e.emit(!0),t?this.toast.sendToast("LBL_CACHE_REPAIRED","success"):this.toast.sendToast("LBL_ERROR","error")}))}}})}convertCharset(){this.modal.openModal("AdministrationDictRepairConvertDBCharsetModal",!0,this.injector)}repairDBColumns(){this.modal.openModal("AdministrationDictRepairDbColumnsModal",!0,this.injector)}}return DictionaryManager.ɵfac=function(e){return new(e||DictionaryManager)(g.Y36(v),g.Y36(M.o),g.Y36(p.y),g.Y36(y.A),g.Y36(g.zs3))},DictionaryManager.ɵcmp=g.Xpm({type:DictionaryManager,selectors:[["dictionary-manager"]],features:[g._Bn([v])],decls:33,vars:1,consts:[["system-to-bottom-noscroll",""],["titlelabel","LBL_DICTIONARY_MANAGER"],["role","group",1,"slds-button-group"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_SAVE"],["system-dropdown-trigger","",1,"slds-dropdown-trigger","slds-dropdown-trigger_click","slds-button_last"],[1,"slds-button","slds-button_icon","slds-button_icon-border-filled"],["icon","down"],[1,"slds-dropdown","slds-dropdown_right","slds-dropdown_actions"],["role","menu",1,"slds-dropdown__list"],["role","presentation",1,"slds-dropdown__item",3,"click"],["href","javascript:void(null)","role","menuitem"],[1,"slds-truncate"],["label","LBL_REPAIR_DATABASE"],["label","LBL_REPAIR_CACHE"],["label","LBL_CONVERT_DB_CHARSET"],["label","LBL_REPAIR_DBCOLUMNS"],["class","slds-dropdown__item","role","presentation",3,"click",4,"ngIf"],[1,"slds-grid"],[1,"slds-size--1-of-3"],[1,"slds-size--2-of-3","slds-theme--default","slds-border--left"],["label","LBL_MIGRATE"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0)(1,"workbench-header",1)(2,"workbench-header-controls")(3,"div",2)(4,"button",3),g.NdJ("click",(function(){return t.dictionarymanager.save()})),g._UZ(5,"system-label",4),g.qZA(),g.TgZ(6,"div",5)(7,"button",6),g._UZ(8,"system-button-icon",7),g.qZA(),g.TgZ(9,"div",8)(10,"ul",9)(11,"li",10),g.NdJ("click",(function(){return t.repairDB()})),g.TgZ(12,"a",11)(13,"span",12),g._UZ(14,"system-label",13),g.qZA()()(),g.TgZ(15,"li",10),g.NdJ("click",(function(){return t.repairDBCache()})),g.TgZ(16,"a",11)(17,"span",12),g._UZ(18,"system-label",14),g.qZA()()(),g.TgZ(19,"li",10),g.NdJ("click",(function(){return t.convertCharset()})),g.TgZ(20,"a",11)(21,"span",12),g._UZ(22,"system-label",15),g.qZA()()(),g.TgZ(23,"li",10),g.NdJ("click",(function(){return t.repairDBColumns()})),g.TgZ(24,"a",11)(25,"span",12),g._UZ(26,"system-label",16),g.qZA()()(),g.YNc(27,tt,4,0,"li",17),g.qZA()()()()()(),g.TgZ(28,"div",18)(29,"div",19),g._UZ(30,"dictionary-manager-definitions"),g.qZA(),g.TgZ(31,"div",20),g._UZ(32,"dictionary-manager-definition-tabs"),g.qZA()()()),2&e&&(g.xp6(27),g.Q6J("ngIf",null==t.dictionarymanager.settings?null:t.dictionarymanager.settings.migration_enabled))},dependencies:[i.O5,A.J,T._,L.l,C.t,O,Ve,We,et],encapsulation:2}),DictionaryManager})();var it=s(9621),nt=s(3499),lt=s(5767),ot=s(1916);function at(e,t){if(1&e&&(g.TgZ(0,"div",34),g._uU(1),g.qZA()),2&e){const e=t.$implicit;g.xp6(1),g.Oqu(e.message)}}function dt(e,t){if(1&e&&(g.TgZ(0,"div",34),g._uU(1),g.qZA()),2&e){const e=t.$implicit;g.xp6(1),g.Oqu(e.message)}}function rt(e,t){1&e&&(g.TgZ(0,"option",35),g._UZ(1,"system-label",36),g.qZA())}function ct(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",1)(1,"div",16)(2,"label",3)(3,"abbr",4),g._uU(4,"* "),g.qZA(),g._UZ(5,"system-label",37),g.qZA(),g.TgZ(6,"div",11)(7,"select",12),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.dictionarydefinition.sysdictionary_contenttype=t)})),g.TgZ(8,"option",38),g._uU(9,"config"),g.qZA(),g.TgZ(10,"option",39),g._uU(11,"custom config"),g.qZA()()()()()}if(2&e){const e=g.oxw();g.xp6(7),g.Q6J("ngModel",e.dictionarydefinition.sysdictionary_contenttype)}}const gt=function(e){return{"slds-has-error":e}};let ut=(()=>{class DictionaryManagerAddDefinitionModal{constructor(e,t,s,i,n){this.dictionarymanager=e,this.metadata=t,this.modal=s,this.modelutilities=i,this.injector=n,this.messages=[],this.dictionarydefinition={id:this.modelutilities.generateGuid(),name:"",tablename:"",sysdictionary_type:"module",scope:this.dictionarymanager.defaultScope,deleted:0,status:"d"}}close(){this.self.destroy()}getMessages(e){return this.messages.filter((t=>t.field==e))}get canSave(){return this.messages=[],this.dictionarydefinition.name||this.messages.push({field:"name",message:"name must be entered"}),this.dictionarydefinition.sysdictionary_type||this.messages.push({field:"sysdictionary_type",message:"type must be specified"}),"template"==this.dictionarydefinition.sysdictionary_type||this.dictionarydefinition.tablename||this.messages.push({field:"tablename",message:"tablename must be entered"}),this.dictionarymanager.dictionarydefinitions.find((e=>e.name==this.dictionarydefinition.name))&&this.messages.push({field:"name",message:"name exists already"}),this.dictionarydefinition.tablename&&this.dictionarymanager.dictionarydefinitions.find((e=>e.tablename==this.dictionarydefinition.tablename))&&this.messages.push({field:"tablename",message:"table exists already"}),this.dictionarydefinition.tablename&&this.dictionarymanager.reservedwords&&this.dictionarymanager.reservedwords.indexOf(this.dictionarydefinition.tablename.toUpperCase())>=0&&this.messages.push({field:"tablename",message:"tablename cannot be used (reserved word)"}),0==this.messages.length}save(){this.canSave&&(this.dictionarydefinition.id=this.modelutilities.generateGuid(),this.dictionarymanager.dictionarydefinitions.push(this.dictionarydefinition),this.close())}}return DictionaryManagerAddDefinitionModal.ɵfac=function(e){return new(e||DictionaryManagerAddDefinitionModal)(g.Y36(v),g.Y36(h.Pu),g.Y36(M.o),g.Y36(b.A),g.Y36(g.zs3))},DictionaryManagerAddDefinitionModal.ɵcmp=g.Xpm({type:DictionaryManagerAddDefinitionModal,selectors:[["ng-component"]],decls:62,vars:17,consts:[[3,"close"],[1,"slds-grid"],[1,"slds-form-element__control","slds-size--1-of-2","slds-p-right--xxx-small",3,"ngClass"],[1,"slds-form-element__label"],[1,"slds-required"],["label","LBL_NAME"],[3,"ngModel","ngModelChange"],["class","slds-form-element__help",4,"ngFor","ngForOf"],["label","LBL_TABLE"],[1,"slds-form-element__control","slds-size--1-of-4","slds-p-left--xxx-small"],["label","LBL_SCOPE"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],["value","g",4,"ngIf"],["value","c"],["label","LBL_CUSTOM"],[1,"slds-large-size--1-of-4","slds-p-right--xxx-small","slds-form-element__control"],["label","LBL_TYPE"],["value","module"],["value","metadata"],["value","template"],["value","relationship"],["value","system"],[1,"slds-size--1-of-4","slds-p-right--xxx-small","slds-form-element__control"],["label","LBL_PACKAGE"],[1,"slds-size--1-of-4","slds-p-left--xxx-small","slds-form-element__control"],["label","LBL_VERSION"],["class","slds-grid",4,"ngIf"],["label","LBL_COMMENT"],["maxlength","150",3,"ngModel"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CLOSE"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_SAVE"],[1,"slds-form-element__help"],["value","g"],["label","LBL_GLOBAL"],["label","LBL_CONTENT_TYPE"],["value","config"],["value","custom_config"]],template:function(e,t){1&e&&(g.TgZ(0,"system-modal")(1,"system-modal-header",0),g.NdJ("close",(function(){return t.close()})),g._uU(2,"Add Dictionary Definition"),g.qZA(),g.TgZ(3,"system-modal-content")(4,"div",1)(5,"div",2)(6,"label",3)(7,"abbr",4),g._uU(8,"* "),g.qZA(),g._UZ(9,"system-label",5),g.qZA(),g.TgZ(10,"system-input-text",6),g.NdJ("ngModelChange",(function(e){return t.dictionarydefinition.name=e})),g.qZA(),g.YNc(11,at,2,1,"div",7),g.qZA(),g.TgZ(12,"div",2)(13,"label",3),g._UZ(14,"system-label",8),g.qZA(),g.TgZ(15,"system-input-text",6),g.NdJ("ngModelChange",(function(e){return t.dictionarydefinition.tablename=e})),g.qZA(),g.YNc(16,dt,2,1,"div",7),g.qZA()(),g.TgZ(17,"div",1)(18,"div",9)(19,"label",3)(20,"abbr",4),g._uU(21,"* "),g.qZA(),g._UZ(22,"system-label",10),g.qZA(),g.TgZ(23,"div",11)(24,"select",12),g.NdJ("ngModelChange",(function(e){return t.dictionarydefinition.scope=e})),g.YNc(25,rt,2,0,"option",13),g.TgZ(26,"option",14),g._UZ(27,"system-label",15),g.qZA()()()(),g.TgZ(28,"div",16)(29,"label",3)(30,"abbr",4),g._uU(31,"* "),g.qZA(),g._UZ(32,"system-label",17),g.qZA(),g.TgZ(33,"div",11)(34,"select",12),g.NdJ("ngModelChange",(function(e){return t.dictionarydefinition.sysdictionary_type=e})),g.TgZ(35,"option",18),g._uU(36,"module"),g.qZA(),g.TgZ(37,"option",19),g._uU(38,"metadata"),g.qZA(),g.TgZ(39,"option",20),g._uU(40,"template"),g.qZA(),g.TgZ(41,"option",21),g._uU(42,"relationship"),g.qZA(),g.TgZ(43,"option",22),g._uU(44,"system"),g.qZA()()()(),g.TgZ(45,"div",23)(46,"label",3),g._UZ(47,"system-label",24),g.qZA(),g.TgZ(48,"system-input-text",6),g.NdJ("ngModelChange",(function(e){return t.dictionarydefinition.package=e})),g.qZA()(),g.TgZ(49,"div",25)(50,"label",3),g._UZ(51,"system-label",26),g.qZA(),g.TgZ(52,"system-input-text",6),g.NdJ("ngModelChange",(function(e){return t.dictionarydefinition.version=e})),g.qZA()()(),g.YNc(53,ct,12,1,"div",27),g.TgZ(54,"label",3),g._UZ(55,"system-label",28),g.qZA(),g._UZ(56,"system-input-text",29),g.qZA(),g.TgZ(57,"system-modal-footer")(58,"button",30),g.NdJ("click",(function(){return t.close()})),g._UZ(59,"system-label",31),g.qZA(),g.TgZ(60,"button",32),g.NdJ("click",(function(){return t.save()})),g._UZ(61,"system-label",33),g.qZA()()()),2&e&&(g.xp6(5),g.Q6J("ngClass",g.VKq(13,gt,t.getMessages("name").length>0)),g.xp6(5),g.Q6J("ngModel",t.dictionarydefinition.name),g.xp6(1),g.Q6J("ngForOf",t.getMessages("name")),g.xp6(1),g.Q6J("ngClass",g.VKq(15,gt,t.getMessages("tablename").length>0)),g.xp6(3),g.Q6J("ngModel",t.dictionarydefinition.tablename),g.xp6(1),g.Q6J("ngForOf",t.getMessages("tablename")),g.xp6(8),g.Q6J("ngModel",t.dictionarydefinition.scope),g.xp6(1),g.Q6J("ngIf","all"==t.dictionarymanager.changescope),g.xp6(9),g.Q6J("ngModel",t.dictionarydefinition.sysdictionary_type),g.xp6(14),g.Q6J("ngModel",t.dictionarydefinition.package),g.xp6(4),g.Q6J("ngModel",t.dictionarydefinition.version),g.xp6(1),g.Q6J("ngIf","metadata"==t.dictionarydefinition.sysdictionary_type),g.xp6(3),g.Q6J("ngModel",t.dictionarydefinition.description))},dependencies:[i.mk,i.sg,i.O5,n.YN,n.Kr,n.EJ,n.JJ,n.nD,n.On,q.Z,T._,it.j,nt.x,lt.p,ot.y],encapsulation:2}),DictionaryManagerAddDefinitionModal})();var mt=s(9901);function pt(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"tr")(1,"td")(2,"system-input-radio",21),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw(3);return g.KtG(s.selectedtable=t)})),g.qZA()(),g.TgZ(3,"td")(4,"div",22),g._uU(5),g.qZA()(),g.TgZ(6,"td")(7,"div",22),g._uU(8),g.qZA()(),g.TgZ(9,"td"),g._UZ(10,"system-checkbox",23),g.qZA(),g.TgZ(11,"td"),g._UZ(12,"system-checkbox",23),g.qZA()()}if(2&e){const e=t.$implicit,s=g.oxw(3);g.xp6(2),g.Q6J("value",e.sysdictionarytablename)("ngModel",s.selectedtable),g.xp6(3),g.Oqu(e.sysdictionaryname),g.xp6(3),g.Oqu(e.sysdictionarytablename),g.xp6(2),g.Q6J("ngModel","1"==e.sysdictionarytableaudited),g.xp6(2),g.Q6J("ngModel",!!e.sysdictionarydefinition_id)}}function ht(e,t){if(1&e&&(g.TgZ(0,"div",13)(1,"table",14)(2,"thead")(3,"tr",15),g._UZ(4,"th",16),g.TgZ(5,"th",17)(6,"div",18),g._uU(7,"Dictionaryname"),g.qZA()(),g.TgZ(8,"th",17)(9,"div",18),g._uU(10,"Tablename"),g.qZA()(),g.TgZ(11,"th",19)(12,"div",18),g._uU(13,"audited"),g.qZA()(),g.TgZ(14,"th",19)(15,"div",18),g._uU(16,"defined"),g.qZA()()()(),g.TgZ(17,"tbody"),g.YNc(18,pt,13,6,"tr",20),g.qZA()()()),2&e){const e=g.oxw(2);g.xp6(18),g.Q6J("ngForOf",e._tables)}}function ft(e,t){1&e&&(g.TgZ(0,"option",52),g._UZ(1,"system-label",53),g.qZA())}function bt(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",25)(1,"div",39)(2,"label",27)(3,"abbr",32),g._uU(4,"* "),g.qZA(),g._UZ(5,"system-label",54),g.qZA(),g.TgZ(6,"div",34)(7,"select",35),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw(3);return g.KtG(s.dictionarydefinition.sysdictionary_contenttype=t)})),g.TgZ(8,"option",55),g._uU(9,"config"),g.qZA(),g.TgZ(10,"option",56),g._uU(11,"custom config"),g.qZA()()()()()}if(2&e){const e=g.oxw(3);g.xp6(7),g.Q6J("ngModel",e.dictionarydefinition.sysdictionary_contenttype)}}function _t(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",24)(1,"div",25)(2,"div",26)(3,"label",27),g._UZ(4,"system-label",28),g.qZA(),g.TgZ(5,"system-input-text",29),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw(2);return g.KtG(s.dictionarydefinition.name=t)})),g.qZA()(),g.TgZ(6,"div",26)(7,"label",27),g._UZ(8,"system-label",30),g.qZA(),g.TgZ(9,"system-input-text",29),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw(2);return g.KtG(s.dictionarydefinition.tablename=t)})),g.qZA()()(),g.TgZ(10,"div",25)(11,"div",31)(12,"label",27)(13,"abbr",32),g._uU(14,"* "),g.qZA(),g._UZ(15,"system-label",33),g.qZA(),g.TgZ(16,"div",34)(17,"select",35),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw(2);return g.KtG(s.dictionarydefinition.scope=t)})),g.YNc(18,ft,2,0,"option",36),g.TgZ(19,"option",37),g._UZ(20,"system-label",38),g.qZA()()()(),g.TgZ(21,"div",39)(22,"label",27)(23,"abbr",32),g._uU(24,"* "),g.qZA(),g._UZ(25,"system-label",40),g.qZA(),g.TgZ(26,"div",34)(27,"select",35),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw(2);return g.KtG(s.dictionarydefinition.sysdictionary_type=t)})),g.TgZ(28,"option",41),g._uU(29,"module"),g.qZA(),g.TgZ(30,"option",42),g._uU(31,"metadata"),g.qZA(),g.TgZ(32,"option",43),g._uU(33,"template"),g.qZA(),g.TgZ(34,"option",43),g._uU(35,"relationship"),g.qZA()()()(),g.TgZ(36,"div",44)(37,"label",27),g._UZ(38,"system-label",45),g.qZA(),g.TgZ(39,"system-input-text",46),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw(2);return g.KtG(s.dictionarydefinition.package=t)})),g.qZA()(),g.TgZ(40,"div",47)(41,"label",27),g._UZ(42,"system-label",48),g.qZA(),g.TgZ(43,"system-input-text",46),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw(2);return g.KtG(s.dictionarydefinition.version=t)})),g.qZA()()(),g.YNc(44,bt,12,1,"div",49),g.TgZ(45,"label",27),g._UZ(46,"system-label",50),g.qZA(),g._UZ(47,"system-input-text",51),g.qZA()}if(2&e){const e=g.oxw(2);g.xp6(5),g.Q6J("ngModel",e.dictionarydefinition.name),g.xp6(4),g.Q6J("ngModel",e.dictionarydefinition.tablename),g.xp6(8),g.Q6J("ngModel",e.dictionarydefinition.scope),g.xp6(1),g.Q6J("ngIf","all"==e.dictionarymanager.changescope),g.xp6(9),g.Q6J("ngModel",e.dictionarydefinition.sysdictionary_type),g.xp6(12),g.Q6J("ngModel",e.dictionarydefinition.package),g.xp6(4),g.Q6J("ngModel",e.dictionarydefinition.version),g.xp6(1),g.Q6J("ngIf","metadata"==e.dictionarydefinition.sysdictionary_type),g.xp6(3),g.Q6J("ngModel",e.dictionarydefinition.description)}}function Zt(e,t){if(1&e&&(g.TgZ(0,"span"),g._uU(1),g.qZA()),2&e){const e=g.oxw().$implicit;g.xp6(1),g.hij("(",e.fielddefinition.len,")")}}function yt(e,t){1&e&&(g.TgZ(0,"option",52),g._UZ(1,"system-label",53),g.qZA())}function Mt(e,t){if(1&e&&(g.TgZ(0,"option",66),g._uU(1),g.qZA()),2&e){const e=t.$implicit;g.Q6J("value",e.id),g.xp6(1),g.Oqu(e.name)}}function xt(e,t){if(1&e&&(g.TgZ(0,"tr"),g._UZ(1,"td"),g.TgZ(2,"td",67),g._uU(3),g.qZA(),g.TgZ(4,"td",69),g._uU(5),g.qZA()()),2&e){const e=t.$implicit;g.xp6(3),g.hij(" ",e.key," "),g.xp6(2),g.hij(" ",e.value," ")}}function vt(e,t){if(1&e){const e=g.EpF();g.ynx(0),g.TgZ(1,"tr"),g._UZ(2,"td"),g.TgZ(3,"td",67),g._uU(4," package / version "),g.qZA(),g.TgZ(5,"td",68)(6,"system-input-text",61),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw().$implicit;return g.KtG(s.package=t)})),g.qZA()(),g.TgZ(7,"td",68)(8,"system-input-text",61),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw().$implicit;return g.KtG(s.version=t)})),g.qZA()()(),g.TgZ(9,"tr"),g._UZ(10,"td"),g.TgZ(11,"td",67),g._uU(12," Comment "),g.qZA(),g.TgZ(13,"td",69)(14,"system-input-text",61),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw().$implicit;return g.KtG(s.fielddefinition.comment=t)})),g.qZA()()(),g.TgZ(15,"tr"),g._UZ(16,"td"),g.TgZ(17,"td",67),g._uU(18," audited "),g.qZA(),g.TgZ(19,"td",69)(20,"system-checkbox",61),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw().$implicit;return g.KtG(s.fielddefinition.audited=t)})),g.qZA()()(),g.TgZ(21,"tr"),g._UZ(22,"td"),g.TgZ(23,"td",67),g._uU(24," reportable "),g.qZA(),g.TgZ(25,"td",69)(26,"system-checkbox",61),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw().$implicit;return g.KtG(s.fielddefinition.reportable=t)})),g.qZA()()(),g.TgZ(27,"tr"),g._UZ(28,"td"),g.TgZ(29,"td",67),g._uU(30," duplicate merge "),g.qZA(),g.TgZ(31,"td",69)(32,"system-checkbox",61),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw().$implicit;return g.KtG(s.fielddefinition.duplicate_merge=t)})),g.qZA()()(),g.YNc(33,xt,6,2,"tr",20),g.BQk()}if(2&e){const e=g.oxw().$implicit,t=g.oxw(3);g.xp6(6),g.Q6J("disabled",!!e.sysdomainfield_id)("ngModel",e.package),g.xp6(2),g.Q6J("disabled",!!e.sysdomainfield_id)("ngModel",e.version),g.xp6(6),g.Q6J("disabled",!!e.sysdomainfield_id)("ngModel",e.fielddefinition.comment),g.xp6(6),g.Q6J("disabled",!!e.sysdomainfield_id)("ngModel",e.fielddefinition.audited),g.xp6(6),g.Q6J("disabled",!!e.sysdomainfield_id)("ngModel",e.fielddefinition.reportable),g.xp6(6),g.Q6J("disabled",!!e.sysdomainfield_id)("ngModel",e.fielddefinition.duplicate_merge),g.xp6(1),g.Q6J("ngForOf",t.getFieldDefinitions(e.fielddefinition))}}function At(e,t){if(1&e){const e=g.EpF();g.ynx(0),g.TgZ(1,"tr")(2,"td")(3,"system-checkbox",61),g.NdJ("ngModelChange",(function(t){const s=g.CHM(e).$implicit;return g.KtG(s.selected=t)})),g.qZA()(),g.TgZ(4,"td")(5,"div",22),g._uU(6),g.qZA()(),g.TgZ(7,"td"),g._UZ(8,"system-checkbox",23),g.qZA(),g.TgZ(9,"td")(10,"div",22),g._uU(11),g.YNc(12,Zt,2,1,"span",62),g.qZA()(),g.TgZ(13,"td"),g._UZ(14,"system-checkbox",23),g.qZA(),g.TgZ(15,"td")(16,"div",34)(17,"select",63),g.NdJ("ngModelChange",(function(t){const s=g.CHM(e).$implicit;return g.KtG(s.scope=t)})),g.YNc(18,yt,2,0,"option",36),g.TgZ(19,"option",37),g._UZ(20,"system-label",38),g.qZA()()()(),g.TgZ(21,"td")(22,"system-input-label",61),g.NdJ("ngModelChange",(function(t){const s=g.CHM(e).$implicit;return g.KtG(s.fielddefinition.vname=t)})),g.qZA()(),g.TgZ(23,"td")(24,"system-checkbox",61),g.NdJ("ngModelChange",(function(t){const s=g.CHM(e).$implicit;return g.KtG(s.fielddefinition.required=t)})),g.qZA()(),g.TgZ(25,"td")(26,"div",34)(27,"select",63),g.NdJ("ngModelChange",(function(t){const s=g.CHM(e).$implicit;return g.KtG(s.sysdomaindefinition_id=t)})),g.YNc(28,Mt,2,2,"option",64),g.qZA()()(),g.TgZ(29,"td")(30,"button",65),g.NdJ("click",(function(){const t=g.CHM(e).$implicit;return g.KtG(t.showdetails=!t.showdetails)})),g._UZ(31,"system-button-icon",60),g.qZA()()(),g.YNc(32,vt,34,13,"ng-container",62),g.BQk()}if(2&e){const e=t.$implicit,s=g.oxw(3);g.xp6(3),g.Q6J("disabled",!!e.sysdomainfield_id)("ngModel",e.selected),g.xp6(3),g.Oqu(e.fieldname),g.xp6(2),g.Q6J("ngModel",!!e.sysdomainfield_id),g.xp6(3),g.Oqu(e.fieldtype),g.xp6(1),g.Q6J("ngIf",e.fielddefinition.len),g.xp6(2),g.Q6J("ngModel",e.fielddefinition.source&&"non-db"==e.fielddefinition.source),g.xp6(3),g.Q6J("disabled",!!e.sysdomainfield_id)("ngModel",e.scope),g.xp6(1),g.Q6J("ngIf","all"==s.dictionarymanager.changescope&&"g"==s.dictionarydefinition.scope),g.xp6(4),g.Q6J("disabled",!!e.sysdomainfield_id)("ngModel",e.fielddefinition.vname),g.xp6(2),g.Q6J("disabled",!!e.sysdomainfield_id)("ngModel",e.fielddefinition.required),g.xp6(3),g.Q6J("disabled",!!e.sysdomainfield_id)("ngModel",e.sysdomaindefinition_id),g.xp6(1),g.Q6J("ngForOf",s.domains),g.xp6(3),g.Q6J("icon",e.showdetails?"chevronup":"chevrondown"),g.xp6(1),g.Q6J("ngIf",e.showdetails)}}function Tt(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",13)(1,"table",14)(2,"thead")(3,"tr",15)(4,"th",16)(5,"system-checkbox",57),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw(2);return g.KtG(s.allSelected=t)})),g.qZA()(),g.TgZ(6,"th",17)(7,"div",18),g._uU(8,"name"),g.qZA()(),g.TgZ(9,"th",16)(10,"div",58),g._uU(11,"defined"),g.qZA()(),g.TgZ(12,"th",17)(13,"div",58),g._uU(14,"type"),g.qZA()(),g.TgZ(15,"th",16)(16,"div",58),g._uU(17,"non DB"),g.qZA()(),g.TgZ(18,"th",17)(19,"div",58),g._uU(20,"scope"),g.qZA()(),g.TgZ(21,"th",17)(22,"div",58),g._uU(23,"label"),g.qZA()(),g.TgZ(24,"th",17)(25,"div",58),g._uU(26,"required"),g.qZA()(),g.TgZ(27,"th",17)(28,"div",58),g._uU(29,"domain"),g.qZA()(),g.TgZ(30,"th",16)(31,"button",59),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw(2);return g.KtG(t.toggleAllDetails())})),g._UZ(32,"system-button-icon",60),g.qZA()()()(),g.TgZ(33,"tbody"),g.YNc(34,At,33,19,"ng-container",20),g.qZA()()()}if(2&e){const e=g.oxw(2);g.xp6(5),g.Q6J("ngModel",e.allSelected),g.xp6(27),g.Q6J("icon",e.allExpanded?"chevronup":"chevrondown"),g.xp6(2),g.Q6J("ngForOf",e._fields)}}function Lt(e,t){1&e&&(g.TgZ(0,"option",52),g._UZ(1,"system-label",53),g.qZA())}function Ct(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"tr")(1,"td")(2,"system-checkbox",61),g.NdJ("ngModelChange",(function(t){const s=g.CHM(e).$implicit;return g.KtG(s.selected=t)})),g.qZA()(),g.TgZ(3,"td")(4,"system-input-text",46),g.NdJ("ngModelChange",(function(t){const s=g.CHM(e).$implicit;return g.KtG(s.name=t)})),g.qZA()(),g.TgZ(5,"td")(6,"div",34)(7,"select",35),g.NdJ("ngModelChange",(function(t){const s=g.CHM(e).$implicit;return g.KtG(s.type=t)})),g.TgZ(8,"option",71),g._uU(9,"primary"),g.qZA(),g.TgZ(10,"option",72),g._uU(11,"index"),g.qZA(),g.TgZ(12,"option",73),g._uU(13,"unique"),g.qZA()()()(),g.TgZ(14,"td")(15,"div",34)(16,"select",35),g.NdJ("ngModelChange",(function(t){const s=g.CHM(e).$implicit;return g.KtG(s.scope=t)})),g.YNc(17,Lt,2,0,"option",36),g.TgZ(18,"option",37),g._UZ(19,"system-label",38),g.qZA()()()(),g.TgZ(20,"td")(21,"system-input-text",46),g.NdJ("ngModelChange",(function(t){const s=g.CHM(e).$implicit;return g.KtG(s.package=t)})),g.qZA()(),g.TgZ(22,"td")(23,"system-input-text",46),g.NdJ("ngModelChange",(function(t){const s=g.CHM(e).$implicit;return g.KtG(s.version=t)})),g.qZA()(),g.TgZ(24,"td"),g._uU(25),g.qZA()()}if(2&e){const e=t.$implicit,s=g.oxw(3);g.xp6(2),g.Q6J("disabled",!s.canAddIndex(e.fields))("ngModel",e.selected),g.xp6(2),g.Q6J("ngModel",e.name),g.xp6(3),g.Q6J("ngModel",e.type),g.xp6(9),g.Q6J("ngModel",e.scope),g.xp6(1),g.Q6J("ngIf","all"==s.dictionarymanager.changescope&&"g"==s.dictionarydefinition.scope),g.xp6(4),g.Q6J("ngModel",e.package),g.xp6(2),g.Q6J("ngModel",e.version),g.xp6(2),g.Oqu(e.fields.join(", "))}}function qt(e,t){if(1&e&&(g.TgZ(0,"div",13)(1,"table",14)(2,"thead")(3,"tr",15),g._UZ(4,"th",16),g.TgZ(5,"th",17)(6,"div",70),g._uU(7,"name"),g.qZA()(),g.TgZ(8,"th",17)(9,"div",70),g._uU(10,"type"),g.qZA()(),g.TgZ(11,"th",17)(12,"div",70),g._uU(13,"scope"),g.qZA()(),g.TgZ(14,"th",17)(15,"div",70),g._uU(16,"package"),g.qZA()(),g.TgZ(17,"th",17)(18,"div",70),g._uU(19,"version"),g.qZA()(),g.TgZ(20,"th",17)(21,"div",70),g._uU(22,"fields"),g.qZA()()()(),g.TgZ(23,"tbody"),g.YNc(24,Ct,26,9,"tr",20),g.qZA()()()),2&e){const e=g.oxw(2);g.xp6(24),g.Q6J("ngForOf",e.indices)}}function Jt(e,t){if(1&e&&(g.TgZ(0,"option",75),g._uU(1),g.qZA()),2&e){const e=t.$implicit;g.Q6J("ngValue",e.id),g.xp6(1),g.Oqu(e.name)}}function Nt(e,t){1&e&&(g.TgZ(0,"option",52),g._UZ(1,"system-label",53),g.qZA())}function kt(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"tr")(1,"td")(2,"system-checkbox",61),g.NdJ("ngModelChange",(function(t){const s=g.CHM(e).$implicit;return g.KtG(s.selected=t)})),g.qZA()(),g.TgZ(3,"td")(4,"system-input-text",29),g.NdJ("ngModelChange",(function(t){const s=g.CHM(e).$implicit;return g.KtG(s.name=t)})),g.qZA()(),g.TgZ(5,"td")(6,"div",34)(7,"select",35),g.NdJ("ngModelChange",(function(t){const s=g.CHM(e).$implicit;return g.KtG(s.sysdictionary_ref_id=t)})),g.YNc(8,Jt,2,2,"option",74),g.qZA()()(),g.TgZ(9,"td")(10,"div",34)(11,"select",35),g.NdJ("ngModelChange",(function(t){const s=g.CHM(e).$implicit;return g.KtG(s.scope=t)})),g.YNc(12,Nt,2,0,"option",36),g.TgZ(13,"option",37),g._UZ(14,"system-label",38),g.qZA()()()(),g.TgZ(15,"td")(16,"system-input-text",46),g.NdJ("ngModelChange",(function(t){const s=g.CHM(e).$implicit;return g.KtG(s.package=t)})),g.qZA()(),g.TgZ(17,"td")(18,"system-input-text",46),g.NdJ("ngModelChange",(function(t){const s=g.CHM(e).$implicit;return g.KtG(s.version=t)})),g.qZA()()()}if(2&e){const e=t.$implicit,s=g.oxw(3);g.xp6(2),g.Q6J("disabled",!e.sysdictionary_ref_id)("ngModel",e.selected),g.xp6(2),g.Q6J("ngModel",e.name),g.xp6(3),g.Q6J("ngModel",e.sysdictionary_ref_id),g.xp6(1),g.Q6J("ngForOf",s.definedtemplates),g.xp6(3),g.Q6J("ngModel",e.scope),g.xp6(1),g.Q6J("ngIf","all"==s.dictionarymanager.changescope&&"g"==s.dictionarydefinition.scope),g.xp6(4),g.Q6J("ngModel",e.package),g.xp6(2),g.Q6J("ngModel",e.version)}}function wt(e,t){if(1&e&&(g.TgZ(0,"div",13)(1,"table",14)(2,"thead")(3,"tr",15),g._UZ(4,"th",16),g.TgZ(5,"th",17)(6,"div",70),g._uU(7,"name"),g.qZA()(),g.TgZ(8,"th",17)(9,"div",70),g._uU(10,"template"),g.qZA()(),g.TgZ(11,"th",17)(12,"div",70),g._uU(13,"scope"),g.qZA()(),g.TgZ(14,"th",17)(15,"div",70),g._uU(16,"package"),g.qZA()(),g.TgZ(17,"th",17)(18,"div",70),g._uU(19,"version"),g.qZA()()()(),g.TgZ(20,"tbody"),g.YNc(21,kt,19,9,"tr",20),g.qZA()()()),2&e){const e=g.oxw(2);g.xp6(21),g.Q6J("ngForOf",e.templates)}}function Ut(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"system-input-text",76),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw(2);return g.KtG(s.filterterm=t)})),g.qZA()}if(2&e){const e=g.oxw(2);g.Q6J("showClear",!0)("ngModel",e.filterterm)}}function Et(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"system-checkbox",77),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw(2);return g.KtG(s.filterundefined=t)})),g._uU(1,"undefined onyl"),g.qZA()}if(2&e){const e=g.oxw(2);g.Q6J("ngModel",e.filterundefined)}}function Dt(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"button",78),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw(2);return g.KtG(t.goDetails())})),g._UZ(1,"system-label",79),g.qZA()}}function Ot(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"button",80),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw(2);return g.KtG(t.goFields(!0))})),g._UZ(1,"system-label",79),g.qZA()}if(2&e){const e=g.oxw(2);g.Q6J("disabled",!e.detailsComplete)}}function It(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"button",78),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw(2);return g.KtG(t.goFields())})),g._UZ(1,"system-label",81),g.qZA()}}function Qt(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"button",78),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw(2);return g.KtG(t.goIndices())})),g._UZ(1,"system-label",82),g.qZA()}}function St(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"button",78),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw(2);return g.KtG(t.goTemplates())})),g._UZ(1,"system-label",83),g.qZA()}}function Bt(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"button",84),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw(2);return g.KtG(t.add())})),g._UZ(1,"system-label",85),g.qZA()}if(2&e){const e=g.oxw(2);g.Q6J("disabled",!e.canAdd)}}function Ft(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"system-modal",1)(1,"system-modal-header",2),g.NdJ("close",(function(){g.CHM(e);const t=g.oxw();return g.KtG(t.close())})),g._uU(2,"Migrate Dictionary Definition"),g.qZA(),g.TgZ(3,"system-modal-content",3),g.YNc(4,ht,19,1,"div",4),g.YNc(5,_t,48,9,"div",5),g.YNc(6,Tt,35,3,"div",4),g.YNc(7,qt,25,1,"div",4),g.YNc(8,wt,22,1,"div",4),g.qZA(),g.TgZ(9,"system-modal-footer")(10,"div",6)(11,"div",7),g.YNc(12,Ut,1,2,"system-input-text",8),g.YNc(13,Et,2,1,"system-checkbox",9),g.qZA(),g.YNc(14,Dt,2,0,"button",10),g.YNc(15,Ot,2,1,"button",11),g.YNc(16,It,2,0,"button",10),g.YNc(17,Qt,2,0,"button",10),g.YNc(18,St,2,0,"button",10),g.YNc(19,Bt,2,1,"button",12),g.qZA()()()}if(2&e){const e=g.oxw();g.xp6(4),g.Q6J("ngIf","tables"==e.view),g.xp6(1),g.Q6J("ngIf","details"==e.view),g.xp6(1),g.Q6J("ngIf","fields"==e.view),g.xp6(1),g.Q6J("ngIf","indices"==e.view),g.xp6(1),g.Q6J("ngIf","templates"==e.view),g.xp6(4),g.Q6J("ngIf","tables"==e.view),g.xp6(1),g.Q6J("ngIf","fields"==e.view||"tables"==e.view),g.xp6(1),g.Q6J("ngIf","tables"==e.view),g.xp6(1),g.Q6J("ngIf","details"==e.view),g.xp6(1),g.Q6J("ngIf","indices"==e.view||"templates"==e.view),g.xp6(1),g.Q6J("ngIf","fields"==e.view||"templates"==e.view),g.xp6(1),g.Q6J("ngIf","fields"==e.view||"indices"==e.view),g.xp6(1),g.Q6J("ngIf","indices"==e.view||"fields"==e.view||"templates"==e.view)}}let Yt=(()=>{class DictionaryManagerMigrateDefinitionModal{constructor(e,t,s,i){this.backend=e,this.modal=t,this.modelutilities=s,this.dictionarymanager=i,this.loading=!0,this.tables=[],this.filterundefined=!1,this.fields=[],this.indices=[],this.templates=[],this.domains=[],this.definedtemplates=[],this._selectedtable="",this.view="tables",this.systemdefinitions=["audited","name","vname","comment","required","type","len","reportable","duplicate_merge","sysdomainfield_id","source"]}ngOnInit(){let e=this.modal.await("LBL_LOADING");this.dictionarydefinition={id:this.modelutilities.generateGuid(),name:"",tablename:"",sysdictionary_type:"module",scope:this.dictionarymanager.defaultScope,deleted:0,status:"d"},this.backend.getRequest("dictionary/fields").subscribe({next:t=>{this.tables=t,this.tables.sort(((e,t)=>e.sysdictionarytablename.localeCompare(t.sysdictionarytablename))),e.emit(!0),this.loading=!1},error:()=>{e.emit(!0),this.close()}});for(let e of this.dictionarymanager.domaindefinitions)this.domains.push({id:e.id,name:e.name});this.domains.sort(((e,t)=>e.name.localeCompare(t.name)>0?1:-1));for(let e of this.dictionarymanager.dictionarydefinitions.filter((e=>"template"==e.sysdictionary_type)))this.definedtemplates.push({id:e.id,name:e.name});this.definedtemplates.sort(((e,t)=>e.name.localeCompare(t.name)>0?1:-1))}loadVardefs(e){this.backend.getRequest(`dictionary/vardefs/${e}`).subscribe({next:t=>{if(t[e].indices){let s=Object.keys(t[e].indices);for(let i of s)t[e].indices[i].scope=this.dictionarydefinition.scope,t[e].indices[i].package=this.dictionarydefinition.package,t[e].indices[i].version=this.dictionarydefinition.version,this.indices.push(t[e].indices[i])}if(t[e].templates){let s=Object.keys(t[e].templates);for(let e of s){let t=this.definedtemplates.find((t=>t.name==e));this.templates.push({name:e,sysdictionary_ref_id:t?t.id:void 0,scope:this.dictionarydefinition.scope,package:this.dictionarydefinition.package,version:this.dictionarydefinition.version})}}}})}get _tables(){return this.filterterm||this.filterundefined?this.tables.filter((e=>!(this.filterterm&&!(e.sysdictionarytablename.toLowerCase().indexOf(this.filterterm.toLowerCase())>=0)||this.filterundefined&&e.sysdictionarydefinition_id))):this.tables}get _fields(){return this.filterundefined?this.fields.filter((e=>!e.sysdomainfield_id)):this.fields}getFieldDefinitions(e){if(!e)return[];let t=Object.keys(e),s=[];for(let i of t)this.systemdefinitions.indexOf(i)>=0||s.push({key:i,value:e[i]});return s}get selectedtable(){return this._selectedtable}set selectedtable(e){this._selectedtable=e;let t=this.tables.find((t=>t.sysdictionarytablename==e));if(t){if(this.fields=t.fields,t.sysdictionarydefinition_id){this.dictionarydefinition.id=t.sysdictionarydefinition_id;let e=this.dictionarymanager.dictionarydefinitions.find((e=>e.id==t.sysdictionarydefinition_id));this.dictionarydefinition.scope=e.scope,this.dictionarydefinition.package=e.package,this.dictionarydefinition.version=e.version}else this.dictionarydefinition.id=this.modelutilities.generateGuid(),this.dictionarydefinition.scope=void 0,this.dictionarydefinition.package=void 0,this.dictionarydefinition.version=void 0;this.dictionarydefinition.name=t.sysdictionaryname,this.dictionarydefinition.tablename=t.sysdictionarytablename}}get allExpanded(){return this.fields.length==this.fields.filter((e=>!0===e.showdetails)).length}toggleAllDetails(){let e=this.allExpanded;for(let t of this.fields)t.showdetails=!e}get allSelected(){return this.fields.filter((e=>!e.sysdomaindefinition_id)).length==this.fields.filter((e=>!0===e.selected&&!e.sysdomaindefinition_id)).length}set allSelected(e){for(let t of this.fields.filter((e=>!e.sysdomaindefinition_id)))t.selected=e}goDetails(){this.tables.find((e=>e.sysdictionarydefinition_id==this.dictionarydefinition.id))?this.goFields(!0):this.view="details"}get detailsComplete(){return this.dictionarydefinition.name&&this.dictionarydefinition.tablename&&this.dictionarydefinition.scope}goFields(e=!1){if(this.view="fields",e){for(let e of this.fields.filter((e=>!e.sysdomaindefinition_id)))e.scope=this.dictionarydefinition.scope,e.package=this.dictionarydefinition.package,e.version=this.dictionarydefinition.version;this.loadVardefs(this.dictionarydefinition.name)}}goIndices(){this.view="indices"}goTemplates(){this.view="templates"}close(){this.self.destroy()}canAddIndex(e){for(let t of e)if(!this.fields.find((e=>(e.selected||!!e.sysdomainfield_id)&&e.fieldname==t)))return!1;return!0}canAddTemplate(e){return!!this.dictionarymanager.dictionarydefinitions.find((t=>t.name==e&&"template"==t.sysdictionary_type))}get canAdd(){return this.fields.filter((e=>e.selected>0)).length>0&&0==this.fields.filter((e=>e.selected&&!e.sysdomaindefinition_id)).length||this.indices.filter((e=>e.selected)).length>0||this.templates.filter((e=>e.selected)).length>0}add(){this.dictionarymanager.dictionarydefinitions.find((e=>e.id==this.dictionarydefinition.id))||this.dictionarymanager.dictionarydefinitions.push(this.dictionarydefinition);let e=this.fields.filter((e=>!!e.sysdomainfield_id)).length;for(let t of this.templates.filter((e=>e.selected))){let s={id:this.modelutilities.generateGuid(),sysdictionarydefinition_id:this.dictionarydefinition.id,sysdictionary_ref_id:t.sysdictionary_ref_id,name:t.name,exclude_from_audited:0,default_value:"",required:0,scope:t.scope?t.scope:this.dictionarydefinition.scope,deleted:0,status:"d",sequence:e};e++,this.dictionarymanager.dictionaryitems.push(s)}let t={};for(let s of this._fields.filter((e=>e.selected))){let i=this.modelutilities.generateGuid(),n={id:i,sysdictionarydefinition_id:this.dictionarydefinition.id,sysdomaindefinition_id:s.sysdomaindefinition_id,name:s.fieldname,non_db:0,exclude_from_audited:s.fielddefinition.audited?0:1,default_value:"",required:s.fielddefinition.required?1:0,scope:s.scope?s.scope:this.dictionarydefinition.scope,deleted:0,status:"d",sequence:e,label:s.fielddefinition.vname,description:s.fielddefinition.comment};e++,t[s.fieldname]=i,this.dictionarymanager.dictionaryitems.push(n)}let s=this.dictionarymanager.getDictionaryDefinitionItems(this.dictionarydefinition.id);for(let e of this.indices.filter((e=>e.selected))){let i=this.modelutilities.generateGuid(),n={id:i,name:e.name,indextype:e.type,package:e.package,scope:e.scope,version:e.version,sysdictionarydefinition_id:this.dictionarydefinition.id,deleted:0,status:"d"};this.dictionarymanager.dictionaryindexes.push(n);let l=0;for(let n of e.fields)this.dictionarymanager.dictionaryindexitems.push({id:this.modelutilities.generateGuid(),scope:e.scope,status:"d",sysdictionaryindex_id:i,sysdictionaryitem_id:t[n]?t[n]:s.find((e=>e.name==n)).id,sequence:l,deleted:0}),l++}this.close()}}return DictionaryManagerMigrateDefinitionModal.ɵfac=function(e){return new(e||DictionaryManagerMigrateDefinitionModal)(g.Y36(p.y),g.Y36(M.o),g.Y36(b.A),g.Y36(v))},DictionaryManagerMigrateDefinitionModal.ɵcmp=g.Xpm({type:DictionaryManagerMigrateDefinitionModal,selectors:[["dictionary-manager-migratedefinition-modal"]],decls:1,vars:1,consts:[["size","large",4,"ngIf"],["size","large"],[3,"close"],["margin","none"],["style","height: 80vh",4,"ngIf"],["class","slds-p-around--x-small",4,"ngIf"],[1,"slds-grid","slds-grid--vertical-align-center"],[1,"slds-col--bump-right","slds-grid","slds-grid--vertical-align-center"],["class","slds-m-horizontal--xx-small",3,"showClear","ngModel","ngModelChange",4,"ngIf"],["class","slds-m-horizontal--xx-small",3,"ngModel","ngModelChange",4,"ngIf"],["class","slds-button slds-button--neutral slds-m-horizontal--xx-small",3,"click",4,"ngIf"],["class","slds-button slds-button--neutral slds-m-horizontal--xx-small",3,"disabled","click",4,"ngIf"],["class","slds-button slds-button--brand slds-m-horizontal--xx-small",3,"disabled","click",4,"ngIf"],[2,"height","80vh"],[1,"slds-table","slds-table--header-fixed"],[1,"slds-line-height_reset"],["scope","col",2,"width","2rem"],["scope","col"],[1,"slds-truncate","slds-m-around--xx-small"],["scope","col",2,"width","4rem"],[4,"ngFor","ngForOf"],["name","migratedid",3,"value","ngModel","ngModelChange"],[1,"slds-truncate"],["disabled","",3,"ngModel"],[1,"slds-p-around--x-small"],[1,"slds-grid"],[1,"slds-form-element__control","slds-size--1-of-2","slds-p-right--xxx-small"],[1,"slds-form-element__label"],["label","LBL_NAME"],["disabled","",3,"ngModel","ngModelChange"],["label","LBL_TABLE"],[1,"slds-form-element__control","slds-size--1-of-4","slds-p-left--xxx-small"],[1,"slds-required"],["label","LBL_SCOPE"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],["value","g",4,"ngIf"],["value","c"],["label","LBL_CUSTOM"],[1,"slds-large-size--1-of-4","slds-p-right--xxx-small","slds-form-element__control"],["label","LBL_TYPE"],["value","module"],["value","metadata"],["value","template"],[1,"slds-size--1-of-4","slds-p-right--xxx-small","slds-form-element__control"],["label","LBL_PACKAGE"],[3,"ngModel","ngModelChange"],[1,"slds-size--1-of-4","slds-p-left--xxx-small","slds-form-element__control"],["label","LBL_VERSION"],["class","slds-grid",4,"ngIf"],["label","LBL_COMMENT"],["maxlength","150",3,"ngModel"],["value","g"],["label","LBL_GLOBAL"],["label","LBL_CONTENT_TYPE"],["value","config"],["value","custom_config"],[1,"slds-m-around--x-small",3,"ngModel","ngModelChange"],[1,"slds-truncateslds-m-around--xx-small"],[1,"slds-button","slds-button--icon","slds-m-around--x-small",3,"click"],[3,"icon"],[3,"disabled","ngModel","ngModelChange"],[4,"ngIf"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"slds-button","slds-button--icon",3,"click"],[3,"value"],["colspan","2"],["colspan","3"],["colspan","6"],[1,"slds-truncate","slds-p-around--xx-small"],["value","primary"],["value","index"],["value","unique"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"],[1,"slds-m-horizontal--xx-small",3,"showClear","ngModel","ngModelChange"],[1,"slds-m-horizontal--xx-small",3,"ngModel","ngModelChange"],[1,"slds-button","slds-button--neutral","slds-m-horizontal--xx-small",3,"click"],["label","LBL_NEXT"],[1,"slds-button","slds-button--neutral","slds-m-horizontal--xx-small",3,"disabled","click"],["label","LBL_FIELDS"],["label","LBL_INDICES"],["label","LBL_TEMPLATES"],[1,"slds-button","slds-button--brand","slds-m-horizontal--xx-small",3,"disabled","click"],["label","LBL_ADD"]],template:function(e,t){1&e&&g.YNc(0,Ft,20,13,"system-modal",0),2&e&&g.Q6J("ngIf",!t.loading)},dependencies:[i.sg,i.O5,n.YN,n.Kr,n.EJ,n.JJ,n.nD,n.On,A.J,I.U,q.Z,Q.$,mt.A,T._,it.j,nt.x,lt.p,ot.y],encapsulation:2}),DictionaryManagerMigrateDefinitionModal})();function Rt(e,t){if(1&e&&(g.TgZ(0,"div",33),g._uU(1),g.qZA()),2&e){const e=t.$implicit;g.xp6(1),g.Oqu(e.message)}}function Gt(e,t){if(1&e&&(g.TgZ(0,"option",34),g._uU(1),g.qZA()),2&e){const e=t.$implicit;g.Q6J("value",e.id),g.xp6(1),g.Oqu(e.name)}}function Ht(e,t){if(1&e&&(g.TgZ(0,"div",33),g._uU(1),g.qZA()),2&e){const e=t.$implicit;g.xp6(1),g.Oqu(e.message)}}const Kt=function(e){return{"slds-has-error":e}};function zt(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",6)(1,"div",27)(2,"label",8)(3,"abbr",9),g._uU(4,"* "),g.qZA(),g._UZ(5,"system-label",28),g.qZA(),g.TgZ(6,"system-input-text",18),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.dictionaryitem.name=t)})),g.qZA(),g.YNc(7,Rt,2,1,"div",29),g.qZA(),g.TgZ(8,"div",30)(9,"label",8)(10,"abbr",9),g._uU(11,"* "),g.qZA(),g._UZ(12,"system-label",31),g.qZA(),g.TgZ(13,"div",11)(14,"select",12),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.dictionaryitem.sysdomaindefinition_id=t)})),g.YNc(15,Gt,2,2,"option",32),g.qZA()(),g.YNc(16,Ht,2,1,"div",29),g.qZA()()}if(2&e){const e=g.oxw();g.xp6(1),g.Q6J("ngClass",g.VKq(7,Kt,e.getMessages("name").length>0)),g.xp6(5),g.Q6J("ngModel",e.dictionaryitem.name),g.xp6(1),g.Q6J("ngForOf",e.getMessages("name")),g.xp6(1),g.Q6J("ngClass",g.VKq(9,Kt,e.getMessages("sysdomaindefinition_id").length>0)),g.xp6(6),g.Q6J("ngModel",e.dictionaryitem.sysdomaindefinition_id),g.xp6(1),g.Q6J("ngForOf",e.domains),g.xp6(1),g.Q6J("ngForOf",e.getMessages("sysdomaindefinition_id"))}}function Vt(e,t){if(1&e&&(g.TgZ(0,"option",34),g._uU(1),g.qZA()),2&e){const e=t.$implicit;g.Q6J("value",e.id),g.xp6(1),g.Oqu(e.name)}}function Pt(e,t){if(1&e&&(g.TgZ(0,"div",33),g._uU(1),g.qZA()),2&e){const e=t.$implicit;g.xp6(1),g.Oqu(e.message)}}function $t(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",35)(1,"label",8)(2,"abbr",9),g._uU(3,"* "),g.qZA(),g._UZ(4,"system-label",31),g.qZA(),g.TgZ(5,"div",11)(6,"select",12),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.dictionaryitem.sysdictionary_ref_id=t)})),g.YNc(7,Vt,2,2,"option",32),g.qZA()(),g.YNc(8,Pt,2,1,"div",29),g.qZA()}if(2&e){const e=g.oxw();g.Q6J("ngClass",g.VKq(4,Kt,e.getMessages("sysdictionary_ref_id").length>0)),g.xp6(6),g.Q6J("ngModel",e.dictionaryitem.sysdictionary_ref_id),g.xp6(1),g.Q6J("ngForOf",e.templates),g.xp6(1),g.Q6J("ngForOf",e.getMessages("sysdictionary_ref_id"))}}function jt(e,t){1&e&&(g.TgZ(0,"option",36),g._UZ(1,"system-label",37),g.qZA())}let Wt=(()=>{class DictionaryManagerAddItemModal{constructor(e,t,s){this.dictionarymanager=e,this.metadata=t,this.modelutilities=s,this.domains=[],this.templates=[],this.itemtype="i",this.messages=[],this.dictionaryitem={id:this.modelutilities.generateGuid(),sysdictionarydefinition_id:this.dictionarymanager.currentDictionaryDefinition,name:"",non_db:0,duplicate_merge:1,exclude_from_audited:0,default_value:"",required:0,scope:this.dictionarymanager.currentDictionaryScope,deleted:0,status:"d",sequence:this.dictionarymanager.dictionaryitems.filter((e=>e.sysdictionarydefinition_id==this.dictionarymanager.currentDictionaryDefinition)).length};for(let e of this.dictionarymanager.domaindefinitions)this.domains.push({id:e.id,name:e.name});this.domains.sort(((e,t)=>e.name.localeCompare(t.name)>0?1:-1));for(let e of this.dictionarymanager.dictionarydefinitions)"template"==e.sysdictionary_type&&this.templates.push({id:e.id,name:e.name});this.templates.sort(((e,t)=>e.name.localeCompare(t.name)>0?1:-1)),this.dictionaryitem.scope="all"==this.dictionarymanager.changescope?"g":"c",this.currentType=this.dictionarymanager.dictionarydefinitions.find((e=>e.id==this.dictionarymanager.currentDictionaryDefinition)).sysdictionary_type}close(){this.self.destroy()}getMessages(e){return this.messages.filter((t=>t.field==e))}get canSave(){return this.messages=[],"i"!=this.itemtype||this.dictionaryitem.name||this.messages.push({field:"name",message:"please specifiy the name"}),"i"!=this.itemtype||this.dictionaryitem.sysdomaindefinition_id||this.messages.push({field:"sysdomaindefinition_id",message:"please select a domain"}),"i"==this.itemtype&&this.dictionaryitem.name&&this.dictionarymanager.dictionaryitems.find((e=>e.name==this.dictionaryitem.name&&e.sysdictionarydefinition_id==this.dictionarymanager.currentDictionaryDefinition))&&this.messages.push({field:"name",message:"name already used"}),this.dictionaryitem.name&&this.dictionarymanager.reservedwords&&this.dictionarymanager.reservedwords.indexOf(this.dictionaryitem.name.toUpperCase())>=0&&this.messages.push({field:"name",message:"name cannot be used (reserved word)"}),"t"!=this.itemtype||this.dictionaryitem.sysdictionary_ref_id||this.messages.push({field:"sysdictionary_ref_id",message:"no ref id defined"}),"t"==this.itemtype&&this.dictionaryitem.sysdictionary_ref_id&&this.dictionarymanager.dictionaryitems.find((e=>e.sysdictionary_ref_id==this.dictionaryitem.sysdictionary_ref_id&&e.sysdictionarydefinition_id==this.dictionarymanager.currentDictionaryDefinition))&&this.messages.push({field:"sysdictionary_ref_id",message:"ref id already used in dictionary definition"}),0==this.messages.length}save(){this.canSave&&("i"==this.itemtype?this.dictionaryitem.sysdictionary_ref_id=null:(this.dictionaryitem.name=this.templates.find((e=>e.id==this.dictionaryitem.sysdictionary_ref_id)).name,this.dictionaryitem.sysdomaindefinition_id=null),this.dictionaryitem.id=this.modelutilities.generateGuid(),this.dictionaryitem.sysdictionarydefinition_id=this.dictionarymanager.currentDictionaryDefinition,this.dictionarymanager.dictionaryitems.push(this.dictionaryitem),this.close())}}return DictionaryManagerAddItemModal.ɵfac=function(e){return new(e||DictionaryManagerAddItemModal)(g.Y36(v),g.Y36(h.Pu),g.Y36(b.A))},DictionaryManagerAddItemModal.ɵcmp=g.Xpm({type:DictionaryManagerAddItemModal,selectors:[["ng-component"]],decls:37,vars:10,consts:[[3,"close"],["label","LBL_ADD_DICTIONARY_ITEM"],["name","select","value","i",3,"ngModel","ngModelChange"],["name","select","value","t",3,"disabled","ngModel","ngModelChange"],["class","slds-grid",4,"ngIf"],["class","slds-form-element__control",3,"ngClass",4,"ngIf"],[1,"slds-grid"],[1,"slds-form-element__control","slds-size--1-of-2","slds-p-right--xxx-small"],[1,"slds-form-element__label"],[1,"slds-required"],["label","LBL_SCOPE"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],["value","g",4,"ngIf"],["value","c"],["label","LBL_CUSTOM"],[1,"slds-size--1-of-4","slds-p-horizontal--xxx-small","slds-form-element__control"],["label","LBL_PACKAGE"],[3,"ngModel","ngModelChange"],[1,"slds-size--1-of-4","slds-p-left--xxx-small","slds-form-element__control"],["label","LBL_VERSION"],["label","LBL_COMMENT"],["maxlength","150",3,"ngModel"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CLOSE"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_SAVE"],[1,"slds-form-element__control","slds-size--1-of-2","slds-p-right--xxx-small",3,"ngClass"],["label","LBL_NAME"],["class","slds-form-element__help",4,"ngFor","ngForOf"],[1,"slds-large-size--1-of-2","slds-p-left--xxx-small","slds-form-element__control",3,"ngClass"],["label","LBL_DOMAIN"],[3,"value",4,"ngFor","ngForOf"],[1,"slds-form-element__help"],[3,"value"],[1,"slds-form-element__control",3,"ngClass"],["value","g"],["label","LBL_GLOBAL"]],template:function(e,t){1&e&&(g.TgZ(0,"system-modal")(1,"system-modal-header",0),g.NdJ("close",(function(){return t.close()})),g._UZ(2,"system-label",1),g.qZA(),g.TgZ(3,"system-modal-content")(4,"system-input-radio",2),g.NdJ("ngModelChange",(function(e){return t.itemtype=e})),g._uU(5,"Item"),g.qZA(),g.TgZ(6,"system-input-radio",3),g.NdJ("ngModelChange",(function(e){return t.itemtype=e})),g._uU(7,"template"),g.qZA(),g.YNc(8,zt,17,11,"div",4),g.YNc(9,$t,9,6,"div",5),g.TgZ(10,"div",6)(11,"div",7)(12,"label",8)(13,"abbr",9),g._uU(14,"* "),g.qZA(),g._UZ(15,"system-label",10),g.qZA(),g.TgZ(16,"div",11)(17,"select",12),g.NdJ("ngModelChange",(function(e){return t.dictionaryitem.scope=e})),g.YNc(18,jt,2,0,"option",13),g.TgZ(19,"option",14),g._UZ(20,"system-label",15),g.qZA()()()(),g.TgZ(21,"div",16)(22,"label",8),g._UZ(23,"system-label",17),g.qZA(),g.TgZ(24,"system-input-text",18),g.NdJ("ngModelChange",(function(e){return t.dictionaryitem.package=e})),g.qZA()(),g.TgZ(25,"div",19)(26,"label",8),g._UZ(27,"system-label",20),g.qZA(),g.TgZ(28,"system-input-text",18),g.NdJ("ngModelChange",(function(e){return t.dictionaryitem.version=e})),g.qZA()()(),g.TgZ(29,"label",8),g._UZ(30,"system-label",21),g.qZA(),g._UZ(31,"system-input-text",22),g.qZA(),g.TgZ(32,"system-modal-footer")(33,"button",23),g.NdJ("click",(function(){return t.close()})),g._UZ(34,"system-label",24),g.qZA(),g.TgZ(35,"button",25),g.NdJ("click",(function(){return t.save()})),g._UZ(36,"system-label",26),g.qZA()()()),2&e&&(g.xp6(4),g.Q6J("ngModel",t.itemtype),g.xp6(2),g.Q6J("disabled","template"==t.currentType&&t.templates.length>0)("ngModel",t.itemtype),g.xp6(2),g.Q6J("ngIf","i"==t.itemtype),g.xp6(1),g.Q6J("ngIf","t"==t.itemtype),g.xp6(8),g.Q6J("ngModel",t.dictionaryitem.scope),g.xp6(1),g.Q6J("ngIf","all"==t.dictionarymanager.changescope),g.xp6(6),g.Q6J("ngModel",t.dictionaryitem.package),g.xp6(4),g.Q6J("ngModel",t.dictionaryitem.version),g.xp6(3),g.Q6J("ngModel",t.dictionaryitem.description))},dependencies:[i.mk,i.sg,i.O5,n.YN,n.Kr,n.EJ,n.JJ,n.nD,n.On,q.Z,mt.A,T._,it.j,nt.x,lt.p,ot.y],encapsulation:2}),DictionaryManagerAddItemModal})();function Xt(e,t){if(1&e&&(g.TgZ(0,"option",26),g._uU(1),g.qZA()),2&e){const e=t.$implicit,s=g.oxw();g.Q6J("value",e.id),g.xp6(1),g.Oqu(s.dictionarymanager.getDictionaryDefinitionName(e.id))}}function es(e,t){1&e&&(g.TgZ(0,"option",27),g._UZ(1,"system-label",28),g.qZA())}let ts=(()=>{class DictionaryManagerRelationshipAdd{constructor(e,t,s){this.dictionarymanager=e,this.modal=t,this.injector=s,this.relationshipType="one-to-many",this.related_ids=[],this.related_ids=this.dictionarymanager.dictionarydefinitions.filter((e=>"module"==e.sysdictionary_type&&0==e.deleted)).sort(((e,t)=>e.name.localeCompare(t.name))),this.scope=this.dictionarymanager.defaultScope}close(){this.self.destroy()}add(){switch(this.relationshipType){case"one-to-many":this.modal.openModal("DictionaryManagerRelationshipAddOneToMany",!0,this.injector).subscribe((e=>{e.instance.relationship.rhs_sysdictionarydefinition_id=this.related_id,e.instance.relationship.scope=this.scope,e.instance.relationship.lhs_sysdictionarydefinition_id=this.dictionarymanager.currentDictionaryDefinition}));break;case"many-to-one":this.modal.openModal("DictionaryManagerRelationshipAddOneToMany",!0,this.injector).subscribe((e=>{e.instance.relationship.lhs_sysdictionarydefinition_id=this.related_id,e.instance.relationship.scope=this.scope,e.instance.relationship.rhs_sysdictionarydefinition_id=this.dictionarymanager.currentDictionaryDefinition}));break;case"many-to-many":this.modal.openModal("DictionaryManagerRelationshipAddManyToMany",!0,this.injector).subscribe((e=>{e.instance.relationship.rhs_sysdictionarydefinition_id=this.related_id,e.instance.relationship.scope=this.scope,e.instance.relationship.lhs_sysdictionarydefinition_id=this.dictionarymanager.currentDictionaryDefinition}));break;case"parent":this.modal.openModal("DictionaryManagerRelationshipAddParent",!0,this.injector).subscribe((e=>{e.instance.relationship.lhs_sysdictionarydefinition_id=this.related_id,e.instance.relationship.scope=this.scope,e.instance.relationship.rhs_sysdictionarydefinition_id=this.dictionarymanager.currentDictionaryDefinition}))}this.close()}}return DictionaryManagerRelationshipAdd.ɵfac=function(e){return new(e||DictionaryManagerRelationshipAdd)(g.Y36(v),g.Y36(M.o),g.Y36(g.zs3))},DictionaryManagerRelationshipAdd.ɵcmp=g.Xpm({type:DictionaryManagerRelationshipAdd,selectors:[["ng-component"]],decls:36,vars:9,consts:[[3,"close"],["label","LBL_ADD_RELATIONSHIP"],[1,"slds-p-around--small"],["name","relationshiptype","value","one-to-many",3,"ngModel","ngModelChange"],["label","LBL_ONE_TO_MANY"],["name","relationshiptype","value","many-to-one",3,"ngModel","ngModelChange"],["label","LBL_MANY_TO_ONE"],["name","relationshiptype","value","many-to-many",3,"ngModel","ngModelChange"],["label","LBL_MANY_TO_MANY"],["name","relationshiptype","value","parent",3,"ngModel","ngModelChange"],["label","LBL_PARENT"],[1,"slds-form-element__control","slds-p-around--xx-small"],[1,"slds-form-element__label"],[1,"slds-required"],["label","LBL_DICTIONARYDEFINITION"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["label","LBL_SCOPE"],["value","g",4,"ngIf"],["value","c"],["label","LBL_CUSTOM"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_ADD"],[3,"value"],["value","g"],["label","LBL_GLOBAL"]],template:function(e,t){1&e&&(g.TgZ(0,"system-modal")(1,"system-modal-header",0),g.NdJ("close",(function(){return t.close()})),g._UZ(2,"system-label",1),g.qZA(),g.TgZ(3,"system-modal-content")(4,"div",2)(5,"system-input-radio",3),g.NdJ("ngModelChange",(function(e){return t.relationshipType=e})),g._UZ(6,"system-label",4),g.qZA(),g.TgZ(7,"system-input-radio",5),g.NdJ("ngModelChange",(function(e){return t.relationshipType=e})),g._UZ(8,"system-label",6),g.qZA(),g.TgZ(9,"system-input-radio",7),g.NdJ("ngModelChange",(function(e){return t.relationshipType=e})),g._UZ(10,"system-label",8),g.qZA(),g.TgZ(11,"system-input-radio",9),g.NdJ("ngModelChange",(function(e){return t.relationshipType=e})),g._UZ(12,"system-label",10),g.qZA()(),g.TgZ(13,"div",11)(14,"label",12)(15,"abbr",13),g._uU(16,"* "),g.qZA(),g._UZ(17,"system-label",14),g.qZA(),g.TgZ(18,"div",15)(19,"select",16),g.NdJ("ngModelChange",(function(e){return t.related_id=e})),g.YNc(20,Xt,2,2,"option",17),g.qZA()()(),g.TgZ(21,"div",11)(22,"label",12)(23,"abbr",13),g._uU(24,"* "),g.qZA(),g._UZ(25,"system-label",18),g.qZA(),g.TgZ(26,"div",15)(27,"select",16),g.NdJ("ngModelChange",(function(e){return t.scope=e})),g.YNc(28,es,2,0,"option",19),g.TgZ(29,"option",20),g._UZ(30,"system-label",21),g.qZA()()()()(),g.TgZ(31,"system-modal-footer")(32,"button",22),g.NdJ("click",(function(){return t.close()})),g._UZ(33,"system-label",23),g.qZA(),g.TgZ(34,"button",24),g.NdJ("click",(function(){return t.add()})),g._UZ(35,"system-label",25),g.qZA()()()),2&e&&(g.xp6(5),g.Q6J("ngModel",t.relationshipType),g.xp6(2),g.Q6J("ngModel",t.relationshipType),g.xp6(2),g.Q6J("ngModel",t.relationshipType),g.xp6(2),g.Q6J("ngModel",t.relationshipType),g.xp6(8),g.Q6J("ngModel",t.related_id),g.xp6(1),g.Q6J("ngForOf",t.related_ids),g.xp6(7),g.Q6J("ngModel",t.scope),g.xp6(1),g.Q6J("ngIf","all"==t.dictionarymanager.changescope),g.xp6(6),g.Q6J("disabled",!t.related_id))},dependencies:[i.sg,i.O5,n.YN,n.Kr,n.EJ,n.JJ,n.On,mt.A,T._,it.j,nt.x,lt.p,ot.y],encapsulation:2}),DictionaryManagerRelationshipAdd})(),ss=(()=>{class DictionaryManagerRelationshipAddOneToMany{constructor(e,t,s,i,n,l){this.dictionarymanager=e,this.metadata=t,this.language=s,this.modal=i,this.injector=n,this.modelutilities=l,this.relationship={id:this.modelutilities.generateGuid(),name:"",scope:"c",relationship_name:"",lhs_sysdictionarydefinition_id:"",lhs_sysdictionaryitem_id:"",lhs_linkname:"",lhs_linklabel:"",lhs_duplicatemerge:1,rhs_sysdictionarydefinition_id:"",rhs_sysdictionaryitem_id:"",rhs_linkname:"",rhs_linklabel:"",rhs_duplicatemerge:0,rhs_relatename:"",rhs_relatelabel:"",relationship_type:"one-to-many",deleted:0,status:"d"}}ngOnInit(){this.setDefaults()}setDefaults(){this.relationship.name=this.dictionarymanager.dictionarydefinitions.find((e=>e.id==this.relationship.lhs_sysdictionarydefinition_id)).tablename.toLowerCase(),this.relationship.relationship_name=this.dictionarymanager.dictionarydefinitions.find((e=>e.id==this.relationship.lhs_sysdictionarydefinition_id)).tablename.toLowerCase()+"_"+this.dictionarymanager.dictionarydefinitions.find((e=>e.id==this.relationship.rhs_sysdictionarydefinition_id)).tablename.toLowerCase();let e=this.dictionarymanager.getDictionaryDefinitionItems(this.relationship.lhs_sysdictionarydefinition_id).find((e=>"id"==e.name));e&&(this.relationship.lhs_sysdictionaryitem_id=e.id),this.relationship.rhs_linkname=this.dictionarymanager.getDictionaryDefinitionName(this.relationship.lhs_sysdictionarydefinition_id).toLowerCase(),this.relationship.rhs_relatename=this.dictionarymanager.getDictionaryDefinitionName(this.relationship.lhs_sysdictionarydefinition_id).toLowerCase()+"_name",this.relationship.lhs_linkname=this.dictionarymanager.dictionarydefinitions.find((e=>e.id==this.relationship.rhs_sysdictionarydefinition_id)).tablename.toLowerCase()}close(){this.self.destroy()}add(){this.dictionarymanager.dictionaryrelationships.push({...this.relationship}),this.close()}}return DictionaryManagerRelationshipAddOneToMany.ɵfac=function(e){return new(e||DictionaryManagerRelationshipAddOneToMany)(g.Y36(v),g.Y36(h.Pu),g.Y36(f.d),g.Y36(M.o),g.Y36(g.zs3),g.Y36(b.A))},DictionaryManagerRelationshipAddOneToMany.ɵcmp=g.Xpm({type:DictionaryManagerRelationshipAddOneToMany,selectors:[["ng-component"]],decls:10,vars:1,consts:[[3,"close"],["label","LBL_ONE_TO_MANY"],[3,"relationship"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_ADD"]],template:function(e,t){1&e&&(g.TgZ(0,"system-modal")(1,"system-modal-header",0),g.NdJ("close",(function(){return t.close()})),g._UZ(2,"system-label",1),g.qZA(),g.TgZ(3,"system-modal-content"),g._UZ(4,"dictionary-manager-relationship-container-onetomany",2),g.qZA(),g.TgZ(5,"system-modal-footer")(6,"button",3),g.NdJ("click",(function(){return t.close()})),g._UZ(7,"system-label",4),g.qZA(),g.TgZ(8,"button",5),g.NdJ("click",(function(){return t.add()})),g._UZ(9,"system-label",6),g.qZA()()()),2&e&&(g.xp6(4),g.Q6J("relationship",t.relationship))},dependencies:[T._,it.j,nt.x,lt.p,ot.y,te],encapsulation:2}),DictionaryManagerRelationshipAddOneToMany})(),is=(()=>{class DictionaryManagerRelationshipAddManyToMany{constructor(e,t,s,i,n,l){this.dictionarymanager=e,this.metadata=t,this.language=s,this.modal=i,this.injector=n,this.modelutilities=l,this.relationship={id:this.modelutilities.generateGuid(),name:"",scope:"c",relationship_name:"",lhs_sysdictionarydefinition_id:"",lhs_sysdictionaryitem_id:"",lhs_linkname:"",lhs_linklabel:"",lhs_duplicatemerge:1,rhs_sysdictionarydefinition_id:"",rhs_sysdictionaryitem_id:"",rhs_linkname:"",rhs_linklabel:"",rhs_duplicatemerge:0,rhs_relatename:"",rhs_relatelabel:"",relationship_type:"many-to-many",deleted:0,status:"d"}}ngOnInit(){this.setDefaults()}setDefaults(){this.relationship.relationship_name=this.dictionarymanager.dictionarydefinitions.find((e=>e.id==this.relationship.lhs_sysdictionarydefinition_id)).tablename.toLowerCase()+"_"+this.dictionarymanager.dictionarydefinitions.find((e=>e.id==this.relationship.rhs_sysdictionarydefinition_id)).tablename.toLowerCase(),this.relationship.name=this.relationship.relationship_name;let e=this.dictionarymanager.getDictionaryDefinitionItems(this.relationship.lhs_sysdictionarydefinition_id).find((e=>"id"==e.name));e&&(this.relationship.lhs_sysdictionaryitem_id=e.id),this.relationship.lhs_linkname=this.dictionarymanager.dictionarydefinitions.find((e=>e.id==this.relationship.rhs_sysdictionarydefinition_id)).tablename.toLowerCase();let t=this.dictionarymanager.getDictionaryDefinitionItems(this.relationship.rhs_sysdictionarydefinition_id).find((e=>"id"==e.name));t&&(this.relationship.rhs_sysdictionaryitem_id=t.id),this.relationship.rhs_linkname=this.dictionarymanager.getDictionaryDefinitionName(this.relationship.lhs_sysdictionarydefinition_id).toLowerCase()}close(){this.self.destroy()}add(){this.dictionarymanager.dictionaryrelationships.push({...this.relationship}),this.close()}}return DictionaryManagerRelationshipAddManyToMany.ɵfac=function(e){return new(e||DictionaryManagerRelationshipAddManyToMany)(g.Y36(v),g.Y36(h.Pu),g.Y36(f.d),g.Y36(M.o),g.Y36(g.zs3),g.Y36(b.A))},DictionaryManagerRelationshipAddManyToMany.ɵcmp=g.Xpm({type:DictionaryManagerRelationshipAddManyToMany,selectors:[["ng-component"]],decls:10,vars:1,consts:[[3,"close"],["label","LBL_MANY_TO_MANY"],[3,"relationship"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_ADD"]],template:function(e,t){1&e&&(g.TgZ(0,"system-modal")(1,"system-modal-header",0),g.NdJ("close",(function(){return t.close()})),g._UZ(2,"system-label",1),g.qZA(),g.TgZ(3,"system-modal-content"),g._UZ(4,"dictionary-manager-relationship-container-manytomany",2),g.qZA(),g.TgZ(5,"system-modal-footer")(6,"button",3),g.NdJ("click",(function(){return t.close()})),g._UZ(7,"system-label",4),g.qZA(),g.TgZ(8,"button",5),g.NdJ("click",(function(){return t.add()})),g._UZ(9,"system-label",6),g.qZA()()()),2&e&&(g.xp6(4),g.Q6J("relationship",t.relationship))},dependencies:[T._,it.j,nt.x,lt.p,ot.y,de],encapsulation:2}),DictionaryManagerRelationshipAddManyToMany})(),ns=(()=>{class DictionaryManagerRelationshipAddParent{constructor(e,t,s,i,n,l){this.dictionarymanager=e,this.metadata=t,this.language=s,this.modal=i,this.injector=n,this.modelutilities=l,this.relationship={id:this.modelutilities.generateGuid(),name:"",scope:"c",relationship_name:"",lhs_sysdictionarydefinition_id:"",lhs_sysdictionaryitem_id:"",lhs_linkname:"",lhs_linklabel:"",lhs_duplicatemerge:1,rhs_sysdictionarydefinition_id:"",rhs_sysdictionaryitem_id:"",rhs_linkname:"",rhs_linklabel:"",rhs_duplicatemerge:0,rhs_relatename:"",rhs_relatelabel:"",relationship_type:"parent",deleted:0,status:"d"}}ngOnInit(){this.setDefaults()}setDefaults(){this.relationship.name=this.dictionarymanager.dictionarydefinitions.find((e=>e.id==this.relationship.lhs_sysdictionarydefinition_id)).tablename.toLowerCase(),this.relationship.relationship_name=this.dictionarymanager.dictionarydefinitions.find((e=>e.id==this.relationship.lhs_sysdictionarydefinition_id)).tablename.toLowerCase()+"_"+this.dictionarymanager.dictionarydefinitions.find((e=>e.id==this.relationship.rhs_sysdictionarydefinition_id)).tablename.toLowerCase();let e=this.dictionarymanager.getDictionaryDefinitionItems(this.relationship.lhs_sysdictionarydefinition_id).find((e=>"id"==e.name));e&&(this.relationship.lhs_sysdictionaryitem_id=e.id),this.relationship.rhs_linkname=this.dictionarymanager.getDictionaryDefinitionName(this.relationship.lhs_sysdictionarydefinition_id).toLowerCase(),this.relationship.lhs_linkname=this.dictionarymanager.dictionarydefinitions.find((e=>e.id==this.relationship.rhs_sysdictionarydefinition_id)).tablename.toLowerCase()}close(){this.self.destroy()}add(){this.dictionarymanager.dictionaryrelationships.push({...this.relationship}),this.close()}}return DictionaryManagerRelationshipAddParent.ɵfac=function(e){return new(e||DictionaryManagerRelationshipAddParent)(g.Y36(v),g.Y36(h.Pu),g.Y36(f.d),g.Y36(M.o),g.Y36(g.zs3),g.Y36(b.A))},DictionaryManagerRelationshipAddParent.ɵcmp=g.Xpm({type:DictionaryManagerRelationshipAddParent,selectors:[["ng-component"]],decls:10,vars:1,consts:[[3,"close"],["label","LBL_PARENT"],[3,"relationship"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_ADD"]],template:function(e,t){1&e&&(g.TgZ(0,"system-modal")(1,"system-modal-header",0),g.NdJ("close",(function(){return t.close()})),g._UZ(2,"system-label",1),g.qZA(),g.TgZ(3,"system-modal-content"),g._UZ(4,"dictionary-manager-relationship-container-parent",2),g.qZA(),g.TgZ(5,"system-modal-footer")(6,"button",3),g.NdJ("click",(function(){return t.close()})),g._UZ(7,"system-label",4),g.qZA(),g.TgZ(8,"button",5),g.NdJ("click",(function(){return t.add()})),g._UZ(9,"system-label",6),g.qZA()()()),2&e&&(g.xp6(4),g.Q6J("relationship",t.relationship))},dependencies:[T._,it.j,nt.x,lt.p,ot.y,ge],encapsulation:2}),DictionaryManagerRelationshipAddParent})();function ls(e,t){1&e&&(g.TgZ(0,"option",37),g._UZ(1,"system-label",38),g.qZA())}function os(e,t){if(1&e&&(g.TgZ(0,"div",39)(1,"span",40),g._uU(2),g.qZA()()),2&e){const e=t.$implicit;g.Q6J("cdkDragData",e),g.xp6(2),g.Oqu(e.name)}}function as(e,t){if(1&e&&(g.TgZ(0,"div",39)(1,"span",40),g._uU(2),g.qZA()()),2&e){const e=t.$implicit;g.Q6J("cdkDragData",e),g.xp6(2),g.Oqu(e.name)}}const ds=function(e){return[e]};let rs=(()=>{class DictionaryManagerIndexAdd{constructor(e,t,s){this.dictionarymanager=e,this.injector=t,this.modelutilities=s,this.availableDictionaryItems=[],this.indexDictionaryItems=[];let i=this.dictionarymanager.dictionarydefinitions.find((e=>e.id==this.dictionarymanager.currentDictionaryDefinition)).tablename;this.index={id:this.modelutilities.generateGuid(),name:`idx_${i}_`,sysdictionarydefinition_id:this.dictionarymanager.currentDictionaryDefinition,deleted:0,status:"d",scope:this.dictionarymanager.defaultScope,indextype:"index"},this.availableDictionaryItems=this.dictionarymanager.getDictionaryDefinitionItems(this.dictionarymanager.currentDictionaryDefinition)}close(){this.self.destroy()}add(){this.dictionarymanager.dictionaryindexes.push({...this.index});let e=0;for(let t of this.indexDictionaryItems)this.dictionarymanager.dictionaryindexitems.push({id:this.modelutilities.generateGuid(),scope:this.index.scope,status:this.index.status,sysdictionaryindex_id:this.index.id,sysdictionaryitem_id:t.id,sequence:e,deleted:0}),e++;this.close()}onFieldDrop(e){let t=e.previousContainer.data.splice(e.previousIndex,1);e.container.data.splice(e.currentIndex,0,t[0])}}return DictionaryManagerIndexAdd.ɵfac=function(e){return new(e||DictionaryManagerIndexAdd)(g.Y36(v),g.Y36(g.zs3),g.Y36(b.A))},DictionaryManagerIndexAdd.ɵcmp=g.Xpm({type:DictionaryManagerIndexAdd,selectors:[["ng-component"]],decls:61,vars:17,consts:[[3,"close"],["label","LBL_ADD_INDEX"],[1,"slds-grid"],[1,"slds-form-element__control","slds-size--1-of-2","slds-p-right--xxx-small"],[1,"slds-form-element__label"],[1,"slds-required"],["label","LBL_NAME"],[3,"maxlength","ngModel","ngModelChange"],[1,"slds-large-size--1-of-2","slds-p-left--xxx-small","slds-form-element__control"],["label","LBL_TYPE"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],["value","primary"],["value","index"],["value","unique"],["label","LBL_SCOPE"],["value","g",4,"ngIf"],["value","c"],["label","LBL_CUSTOM"],[1,"slds-size--1-of-4","slds-p-horizontal--xxx-small","slds-form-element__control"],["label","LBL_PACKAGE"],[3,"ngModel","ngModelChange"],[1,"slds-size--1-of-4","slds-p-left--xxx-small","slds-form-element__control"],["label","LBL_VERSION"],[1,"slds-form-element","slds-p-right--x-small","slds-size--1-of-2"],["label","LBL_AVAILABLE_ITEMS"],["cdkDropList","",1,"slds-picklist","slds-picklist__options","slds-size--1-of-1",2,"height","50vh",3,"cdkDropListData","cdkDropListConnectedTo","cdkDropListDropped"],["listOne","cdkDropList"],["cdkDrag","","class","slds-drag--preview slds-picklist__item",3,"cdkDragData",4,"ngFor","ngForOf"],[1,"slds-form-element","slds-p-left--x-small","slds-size--1-of-2"],["label","LBL_INDEX_ITEMS"],["cdkDropList","",1,"slds-picklist","slds-picklist__options","slds-size--1-of-1","cdk-drag",2,"height","50vh",3,"cdkDropListData","cdkDropListConnectedTo","cdkDropListDropped"],["listTwo","cdkDropList"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_ADD"],["value","g"],["label","LBL_GLOBAL"],["cdkDrag","",1,"slds-drag--preview","slds-picklist__item",3,"cdkDragData"],[1,"slds-truncate"]],template:function(e,t){if(1&e&&(g.TgZ(0,"system-modal")(1,"system-modal-header",0),g.NdJ("close",(function(){return t.close()})),g._UZ(2,"system-label",1),g.qZA(),g.TgZ(3,"system-modal-content")(4,"div",2)(5,"div",3)(6,"label",4)(7,"abbr",5),g._uU(8,"* "),g.qZA(),g._UZ(9,"system-label",6),g.qZA(),g.TgZ(10,"system-input-text",7),g.NdJ("ngModelChange",(function(e){return t.index.name=e})),g.qZA()(),g.TgZ(11,"div",8)(12,"label",4)(13,"abbr",5),g._uU(14,"* "),g.qZA(),g._UZ(15,"system-label",9),g.qZA(),g.TgZ(16,"div",10)(17,"select",11),g.NdJ("ngModelChange",(function(e){return t.index.indextype=e})),g.TgZ(18,"option",12),g._uU(19,"primary"),g.qZA(),g.TgZ(20,"option",13),g._uU(21,"index"),g.qZA(),g.TgZ(22,"option",14),g._uU(23,"unique"),g.qZA()()()()(),g.TgZ(24,"div",2)(25,"div",3)(26,"label",4)(27,"abbr",5),g._uU(28,"* "),g.qZA(),g._UZ(29,"system-label",15),g.qZA(),g.TgZ(30,"div",10)(31,"select",11),g.NdJ("ngModelChange",(function(e){return t.index.scope=e})),g.YNc(32,ls,2,0,"option",16),g.TgZ(33,"option",17),g._UZ(34,"system-label",18),g.qZA()()()(),g.TgZ(35,"div",19)(36,"label",4),g._UZ(37,"system-label",20),g.qZA(),g.TgZ(38,"system-input-text",21),g.NdJ("ngModelChange",(function(e){return t.index.package=e})),g.qZA()(),g.TgZ(39,"div",22)(40,"label",4),g._UZ(41,"system-label",23),g.qZA(),g.TgZ(42,"system-input-text",21),g.NdJ("ngModelChange",(function(e){return t.index.version=e})),g.qZA()()(),g.TgZ(43,"div",2)(44,"div",24)(45,"span",4),g._UZ(46,"system-label",25),g.qZA(),g.TgZ(47,"div",26,27),g.NdJ("cdkDropListDropped",(function(e){return t.onFieldDrop(e)})),g.YNc(49,os,3,2,"div",28),g.qZA()(),g.TgZ(50,"div",29)(51,"span",4),g._UZ(52,"system-label",30),g.qZA(),g.TgZ(53,"div",31,32),g.NdJ("cdkDropListDropped",(function(e){return t.onFieldDrop(e)})),g.YNc(55,as,3,2,"div",28),g.qZA()()()(),g.TgZ(56,"system-modal-footer")(57,"button",33),g.NdJ("click",(function(){return t.close()})),g._UZ(58,"system-label",34),g.qZA(),g.TgZ(59,"button",35),g.NdJ("click",(function(){return t.add()})),g._UZ(60,"system-label",36),g.qZA()()()),2&e){const e=g.MAs(48),s=g.MAs(54);g.xp6(10),g.Q6J("maxlength",128)("ngModel",t.index.name),g.xp6(7),g.Q6J("ngModel",t.index.indextype),g.xp6(14),g.Q6J("ngModel",t.index.scope),g.xp6(1),g.Q6J("ngIf","all"==t.dictionarymanager.changescope),g.xp6(6),g.Q6J("ngModel",t.index.package),g.xp6(4),g.Q6J("ngModel",t.index.version),g.xp6(5),g.Q6J("cdkDropListData",t.availableDictionaryItems)("cdkDropListConnectedTo",g.VKq(13,ds,s)),g.xp6(2),g.Q6J("ngForOf",t.availableDictionaryItems),g.xp6(4),g.Q6J("cdkDropListData",t.indexDictionaryItems)("cdkDropListConnectedTo",g.VKq(15,ds,e)),g.xp6(2),g.Q6J("ngForOf",t.indexDictionaryItems)}},dependencies:[i.sg,i.O5,n.YN,n.Kr,n.EJ,n.JJ,n.nD,n.On,q.Z,T._,it.j,nt.x,lt.p,ot.y,c.Wj,c.Zt],encapsulation:2}),DictionaryManagerIndexAdd})(),cs=(()=>{class domainmanager{constructor(e,t,s,i){this.backend=e,this.metadata=t,this.language=s,this.modelutilities=i,this.domaindefinitions=[],this.domainfields=[],this.domainfieldvalidations=[],this.domainfieldvalidationvalues=[],this.languagelabels=[],this.languagetranslations=[],this.languagecustomlabels=[],this.languagecustomtranslations=[],this.dbtypes=["non-db","varchar","char","text","shorttext","mediumtext","longtext","date","datetime","int","tinyint","bigint","double","bool","float","json"],this.fieldtypes=[],this.loadDomains();for(let e in this.metadata.fieldTypeMappings)this.fieldtypes.push(e);this.fieldtypes.sort()}loadDomains(){this.backend.getRequest("dictionary/domains").subscribe((e=>{this.domaindefinitions=e.domaindefinitions,this.domainfields=e.domainfields,this.domainfieldvalidations=e.domainfieldvalidations,this.domainfieldvalidationvalues=e.domainfieldvalidationvalues,this.loaded=JSON.stringify(e)}))}getValidationById(e){return this.domainfieldvalidations.find((t=>t.id==e))}getValidationValuesdById(e){Array.isArray(this.domainfieldvalidationvalues)||(this.domainfieldvalidationvalues=[]);let t=this.domainfieldvalidationvalues.filter((t=>t.sysdomainfieldvalidation_id==e&&"c"==t.scope)),s=this.domainfieldvalidationvalues.filter((t=>t.sysdomainfieldvalidation_id==e&&"c"!=t.scope));for(let e of s)-1==t.findIndex((t=>t.enumvalue==e.enumvalue))&&t.push(e);return t}getStatusColor(e){switch(e){case"a":return"slds-icon-text-success";case"i":return"slds-icon-text-light";default:return"slds-icon-text-warning"}}save(){let e=this.determineChangedRecords();this.languagelabels.length>0&&(e.languagelabels=this.languagelabels,e.languagetranslations=this.languagetranslations),this.languagecustomlabels.length>0&&(e.languagecustomlabels=this.languagecustomlabels,e.languagecustomtranslations=this.languagecustomtranslations),this.backend.postRequest("dictionary/domains",{},e).subscribe((e=>{}))}determineChangedRecords(){let e=JSON.parse(this.loaded),t={domaindefinitions:[],domainfields:[],domainfieldvalidations:[],domainfieldvalidationvalues:[]};for(let s in t)for(let i of this[s]){let n=e[s].find((e=>e.id==i.id));(!n||n&&JSON.stringify(n)!=JSON.stringify(i))&&t[s].push(i)}return t}generateENUMSFromModules(){Array.isArray(this.domainfieldvalidationvalues)||(this.domainfieldvalidationvalues=[]),this.backend.getRequest("dictionary/domains/appliststrings").subscribe((e=>{for(let t in this.metadata.fieldDefs){let s=this.metadata.fieldDefs[t];for(let i in s)if(s[i].options&&(e.en_us.global[s[i].options]||e.en_us.custom[s[i].options])&&s[i].type.includes("enum")&&!this.domaindefinitions.find((e=>e.name==t.toLowerCase()+"_"+i))){let n=e.en_us.global[s[i].options]?"g":"c",l=this.modelutilities.generateGuid();this.domaindefinitions.push({id:l,name:t.toLowerCase()+"_"+i,scope:n,fieldtype:s[i].type,status:"a",deleted:0});let o=this.modelutilities.generateGuid();this.domainfieldvalidations.push({id:o,name:s[i].options,validation_type:"enum",scope:n,status:"a",deleted:0}),this.domainfields.push({id:this.modelutilities.generateGuid(),name:i,dbtype:"enum"==s[i].type?"varchar":"text",len:s[i].len?s[i].len:"255",sysdomaindefinition_id:l,sysdomainfieldvalidation_id:o,scope:n,status:"a",exclude_from_index:0,deleted:0});let a=this.language.languagedata.applist[s[i].options],d=0;for(let t in a){if(this.domainfieldvalidationvalues.push({id:this.modelutilities.generateGuid(),sysdomainfieldvalidation_id:o,label:t?("LBL_"+s[i].options+"_"+t).toUpperCase():"",enumvalue:t,sequence:d,comment:"",scope:n,status:"a",deleted:0}),t&&!this.language.languagedata.applang[("LBL_"+s[i].options+"_"+t).toUpperCase()]){let l=this.modelutilities.generateGuid();"g"==n?this.languagelabels.push({id:l,name:("LBL_"+s[i].options+"_"+t).toUpperCase()}):this.languagecustomlabels.push({id:l,name:("LBL_"+s[i].options+"_"+t).toUpperCase()});for(let n in e)e[n].global[s[i].options]&&e[n].global[s[i].options][t]&&(this.languagetranslations.push({id:this.modelutilities.generateGuid(),syslanguagelabel_id:l,syslanguage:n,translation_default:e[n].global[s[i].options][t]}),n==this.language.currentlanguage&&this.language.addLabel(("LBL_"+s[i].options+"_"+t).toUpperCase(),e[n].global[s[i].options][t])),e[n].custom[s[i].options]&&e[n].custom[s[i].options][t]&&(this.languagecustomtranslations.push({id:this.modelutilities.generateGuid(),syslanguagelabel_id:l,syslanguage:n,translation_default:e[n].custom[s[i].options][t]}),n==this.language.currentlanguage&&this.language.addLabel(("LBL_"+s[i].options+"_"+t).toUpperCase(),e[n].custom[s[i].options][t]))}d++}}}}))}}return domainmanager.ɵfac=function(e){return new(e||domainmanager)(g.LFG(p.y),g.LFG(h.Pu),g.LFG(f.d),g.LFG(b.A))},domainmanager.ɵprov=g.Yz7({token:domainmanager,factory:domainmanager.ɵfac}),domainmanager})();var gs=s(3369);const us=function(e){return{"slds-is-selected":e}};function ms(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"tr",20),g.NdJ("click",(function(){const t=g.CHM(e).$implicit,s=g.oxw();return g.KtG(s.setCurrentDomainDefintion(t.id))})),g.TgZ(1,"td"),g._UZ(2,"system-utility-icon",21),g.TgZ(3,"dictionary-manager-item-status",22),g.NdJ("ngModelChange",(function(t){const s=g.CHM(e).$implicit;return g.KtG(s.status=t)})),g.qZA()(),g.TgZ(4,"td",23)(5,"div",24),g._uU(6),g.qZA()(),g.TgZ(7,"td",25)(8,"div",24),g._uU(9),g.qZA()(),g.TgZ(10,"td",26)(11,"system-utility-icon",27),g.NdJ("click",(function(t){const s=g.CHM(e).$implicit,i=g.oxw();return g.KtG(i.deleteDomainDefinition(t,s.id))})),g.qZA()()()}if(2&e){const e=t.$implicit,s=g.oxw();g.Q6J("ngClass",g.VKq(5,us,s.domainmanager.currentDomainDefinition==e.id)),g.xp6(2),g.Q6J("icon","g"==e.scope?"world":"people"),g.xp6(1),g.Q6J("ngModel",e.status),g.xp6(3),g.Oqu(e.name),g.xp6(3),g.Oqu(e.fieldtype)}}let ps=(()=>{class DomainManagerDefinitions{constructor(e,t,s,i,n,l,o,a,d){this.domainmanager=e,this.backend=t,this.metadata=s,this.language=i,this.modelutilities=n,this.broadcast=l,this.toast=o,this.modal=a,this.injector=d,this.definitionfilterscope="",this.definitionfilterstatus=""}get domaindefinitions(){return this.domainmanager.domaindefinitions.filter((e=>!e.deleted&&((!this.definitionfilterterm||e.name.toLowerCase().indexOf(this.definitionfilterterm.toLowerCase())>=0)&&((""==this.definitionfilterscope||e.scope==this.definitionfilterscope)&&(""==this.definitionfilterstatus||e.status==this.definitionfilterstatus))))).sort(((e,t)=>e.name>t.name?1:-1))}trackByFn(e,t){return t.id}setCurrentDomainDefintion(e){this.domainmanager.currentDomainDefinition=e,this.domainmanager.currentDomainField=null}addDomainDefinition(e){e.stopPropagation(),this.modal.openModal("DomainManagerAddDefinitionModal",!0,this.injector)}deleteDomainDefinition(e,t){e.stopPropagation(),this.modal.prompt("confirm",this.language.getLabel("MSG_DELETE_RECORD","","long"),this.language.getLabel("MSG_DELETE_RECORD")).subscribe((e=>{if(e){this.domainmanager.domaindefinitions.find((e=>e.id==t)).deleted=1;for(let e of this.domainmanager.domainfields.filter((e=>e.sysdomaindefinition_id==t)))e.deleted=1;this.domainmanager.currentDomainDefinition==t&&(this.domainmanager.currentDomainDefinition,this.domainmanager.currentDomainField)}}))}}return DomainManagerDefinitions.ɵfac=function(e){return new(e||DomainManagerDefinitions)(g.Y36(cs),g.Y36(p.y),g.Y36(h.Pu),g.Y36(f.d),g.Y36(b.A),g.Y36(gs.f),g.Y36(y.A),g.Y36(M.o),g.Y36(g.zs3))},DomainManagerDefinitions.ɵcmp=g.Xpm({type:DomainManagerDefinitions,selectors:[["domain-manager-definitions"]],decls:27,vars:5,consts:[[1,"slds-p-around--xx-small","slds-grid","slds-grid--vertical-align-center","slds-border--bottom"],["placeholder","LBL_SEARCH",1,"slds-grow",3,"ngModel","ngModelChange"],[1,"slds-p-left--xx-small",3,"ngModel","ngModelChange"],["value","g","icon","world"],["value","c","icon","people"],["value","d","icon","light_bulb","colorclass","slds-icon-text-warning"],["value","a","icon","light_bulb","colorclass","slds-icon-text-success"],["value","i","icon","light_bulb","colorclass","slds-icon-text-light"],["system-to-bottom",""],[1,"slds-table","slds-table_cell-buffer","slds-table_bordered","slds-table--header-fixed"],[1,"slds-line-height_reset"],["scope","col",2,"width","2.5rem"],["scope","col",1,""],[1,"slds-truncate","slds-th__action","slds-p-horizontal--x-small"],["label","LBL_DOMAIN"],["label","LBL_TYPE"],["scope","col",2,"width","2rem"],["class","slds-hint-parent",3,"ngClass","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"slds-align--absolute-center","slds-border--top","slds-p-around--small","slds-theme--shade",2,"position","sticky","bottom","0"],["icon","new","size","x-small",2,"cursor","pointer",3,"click"],[1,"slds-hint-parent",3,"ngClass","click"],["size","xx-small",1,"slds-p-right--xx-small",3,"icon"],[3,"ngModel","ngModelChange"],["data-label","Domain"],[1,"slds-truncate"],["data-label","Type"],[1,"slds-align--absolute-center",2,"width","2rem"],["size","xx-small","icon","delete",3,"click"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0)(1,"system-input-text",1),g.NdJ("ngModelChange",(function(e){return t.definitionfilterterm=e})),g.qZA(),g.TgZ(2,"system-select-icon",2),g.NdJ("ngModelChange",(function(e){return t.definitionfilterscope=e})),g._UZ(3,"system-select-icon-item")(4,"system-select-icon-item",3)(5,"system-select-icon-item",4),g.qZA(),g.TgZ(6,"system-select-icon",2),g.NdJ("ngModelChange",(function(e){return t.definitionfilterstatus=e})),g._UZ(7,"system-select-icon-item")(8,"system-select-icon-item",5)(9,"system-select-icon-item",6)(10,"system-select-icon-item",7),g.qZA()(),g.TgZ(11,"div",8)(12,"table",9)(13,"thead")(14,"tr",10),g._UZ(15,"th",11),g.TgZ(16,"th",12)(17,"div",13),g._UZ(18,"system-label",14),g.qZA()(),g.TgZ(19,"th",12)(20,"div",13),g._UZ(21,"system-label",15),g.qZA()(),g._UZ(22,"th",16),g.qZA()(),g.TgZ(23,"tbody"),g.YNc(24,ms,12,7,"tr",17),g.qZA()(),g.TgZ(25,"div",18)(26,"system-utility-icon",19),g.NdJ("click",(function(e){return t.addDomainDefinition(e)})),g.qZA()()()),2&e&&(g.xp6(1),g.Q6J("ngModel",t.definitionfilterterm),g.xp6(1),g.Q6J("ngModel",t.definitionfilterscope),g.xp6(4),g.Q6J("ngModel",t.definitionfilterstatus),g.xp6(18),g.Q6J("ngForOf",t.domaindefinitions)("ngForTrackBy",t.trackByFn))},dependencies:[i.mk,i.sg,n.JJ,n.On,q.Z,T._,u.r,J.E,N.s,k.H,m],encapsulation:2}),DomainManagerDefinitions})();const hs=function(e){return{"slds-is-selected":e}};function fs(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"tr",18),g.NdJ("click",(function(){const t=g.CHM(e).$implicit,s=g.oxw(2);return g.KtG(s.domainmanager.currentDomainField=t.id)})),g.TgZ(1,"td"),g._UZ(2,"system-utility-icon",19),g.TgZ(3,"system-utility-icon",20),g.NdJ("click",(function(t){const s=g.CHM(e).$implicit,i=g.oxw(2);return g.KtG(i.customizeDomainField(t,s))})),g.qZA(),g.TgZ(4,"system-utility-icon",21),g.NdJ("click",(function(t){const s=g.CHM(e).$implicit,i=g.oxw(2);return g.KtG(i.setStatus(t,s))})),g.qZA()(),g.TgZ(5,"td",22)(6,"div",6),g._uU(7),g.qZA()(),g.TgZ(8,"td",23)(9,"div",6),g._uU(10),g.qZA()(),g.TgZ(11,"td",23)(12,"div",6),g._uU(13),g.qZA()(),g.TgZ(14,"td",23)(15,"div",6),g._uU(16),g.qZA()(),g.TgZ(17,"td",24),g._UZ(18,"system-checkbox",25),g.qZA(),g.TgZ(19,"td",24),g._UZ(20,"system-checkbox",25),g.qZA(),g.TgZ(21,"td",26)(22,"system-utility-icon",27),g.NdJ("click",(function(t){const s=g.CHM(e).$implicit,i=g.oxw(2);return g.KtG(i.deleteDomainField(t,s.id))})),g.qZA()()()}if(2&e){const e=t.$implicit,s=g.oxw(2);g.Q6J("ngClass",g.VKq(11,hs,s.domainmanager.currentDomainField==e.id)),g.xp6(2),g.Q6J("icon","rows")("size","x-small"),g.xp6(1),g.Q6J("icon","g"==e.scope?"world":"people"),g.xp6(1),g.Q6J("colorclass",s.domainmanager.getStatusColor(e.status)),g.xp6(3),g.Oqu(e.name),g.xp6(3),g.Oqu(e.dbtype),g.xp6(3),g.Oqu(e.fieldtype),g.xp6(3),g.Oqu(e.len),g.xp6(2),g.Q6J("ngModel","1"==e.required),g.xp6(2),g.Q6J("ngModel","1"==e.exclude_from_index)}}function bs(e,t){if(1&e){const e=g.EpF();g.ynx(0),g.TgZ(1,"table",2)(2,"thead")(3,"tr",3),g._UZ(4,"th",4),g.TgZ(5,"th",5)(6,"div",6),g._UZ(7,"system-label",7),g.qZA()(),g.TgZ(8,"th",5)(9,"div",6),g._UZ(10,"system-label",8),g.qZA()(),g.TgZ(11,"th",5)(12,"div",6),g._UZ(13,"system-label",9),g.qZA()(),g.TgZ(14,"th",5)(15,"div",6),g._UZ(16,"system-label",10),g.qZA()(),g.TgZ(17,"th",5)(18,"div",6),g._UZ(19,"system-label",11),g.qZA()(),g.TgZ(20,"th",5)(21,"div",6),g._UZ(22,"system-label",12),g.qZA()(),g._UZ(23,"th",13),g.qZA()(),g.TgZ(24,"tbody",14),g.NdJ("cdkDropListDropped",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.drop(t))})),g.YNc(25,fs,23,13,"tr",15),g.qZA()(),g.TgZ(26,"div",16)(27,"system-utility-icon",17),g.NdJ("click",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.addDomainField(t))})),g.qZA()(),g.BQk()}if(2&e){const e=g.oxw();g.xp6(25),g.Q6J("ngForOf",e.domainfields)("ngForTrackBy",e.trackByFn)}}function _s(e,t){1&e&&(g.TgZ(0,"div",28),g._UZ(1,"system-label",29),g.qZA())}let Zs=(()=>{class DomainManagerFields{constructor(e,t,s,i,n,l,o,a,d){this.domainmanager=e,this.backend=t,this.metadata=s,this.language=i,this.modelutilities=n,this.broadcast=l,this.toast=o,this.modal=a,this.injector=d}get domainfields(){let e=this.domainmanager.domainfields.filter((e=>0==e.deleted&&e.sysdomaindefinition_id==this.domainmanager.currentDomainDefinition&&"c"==e.scope));for(let t of this.domainmanager.domainfields.filter((e=>0==e.deleted&&e.sysdomaindefinition_id==this.domainmanager.currentDomainDefinition&&"c"!=e.scope)))-1==e.findIndex((e=>e.name==t.name))&&e.push(t);return e.sort(((e,t)=>e.sequence>t.sequence?1:-1))}drop(e){let t=this.domainfields,s=t.splice(e.previousIndex,1);t.splice(e.currentIndex,0,s[0]);let i=0;for(let e of t)e.sequence=i,i++}addDomainField(e){e.stopPropagation(),this.modal.openModal("DomainManagerAddFieldModal",!0,this.injector)}deleteDomainField(e,t){e.stopPropagation(),this.modal.prompt("confirm",this.language.getLabel("MSG_DELETE_RECORD","","long"),this.language.getLabel("MSG_DELETE_RECORD")).subscribe((e=>{e&&(this.domainmanager.domainfields.find((e=>e.id==t)).deleted=1,this.domainmanager.currentDomainField==t&&this.domainmanager.currentDomainField)}))}customizeDomainField(e,t){e.stopPropagation(),"g"==t.scope&&this.modal.prompt("confirm","Customize the Field?","Customize").subscribe((e=>{if(e){let e={...t};e.id=this.modelutilities.generateGuid(),e.scope="c",this.domainmanager.domainfields.push(e),this.domainmanager.currentDomainField=e.id,this.domainmanager.currentDomainScope=e.scope}}))}setStatus(e,t){e.stopPropagation(),"d"==t.status?t.status="a":"a"==t.status?t.status="i":t.status="a"}trackByFn(e,t){return t.id}}return DomainManagerFields.ɵfac=function(e){return new(e||DomainManagerFields)(g.Y36(cs),g.Y36(p.y),g.Y36(h.Pu),g.Y36(f.d),g.Y36(b.A),g.Y36(gs.f),g.Y36(y.A),g.Y36(M.o),g.Y36(g.zs3))},DomainManagerFields.ɵcmp=g.Xpm({type:DomainManagerFields,selectors:[["domain-manager-fields"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["selectdomain",""],[1,"slds-table","slds-table_cell-buffer","slds-table_bordered"],[1,"slds-line-height_reset"],["scope","col",2,"width","3rem"],["scope","col",1,""],[1,"slds-truncate"],["label","LBL_FIELD"],["label","LBL_DBTYPE"],["label","LBL_TYPE"],["label","LBL_LENGTH"],["label","LBL_REQUIRED"],["label","LBL_EXCLUDE_FROM_INDEX"],["scope","col",2,"width","2rem"],["cdkDropList","",1,"dragboundary",3,"cdkDropListDropped"],["class","slds-hint-parent","cdkDrag","","cdkDragBoundary",".dragboundary",3,"ngClass","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"slds-align--absolute-center","slds-p-around--small"],["icon","new","size","x-small",3,"click"],["cdkDrag","","cdkDragBoundary",".dragboundary",1,"slds-hint-parent",3,"ngClass","click"],["cdkDragHandle","",1,"slds-p-right--xx-small",2,"cursor","move",3,"icon","size"],["size","xx-small",1,"slds-p-right--xx-small",3,"icon","click"],["size","xx-small","icon","light_bulb",1,"slds-p-right--xx-small",3,"colorclass","click"],["data-label","Domain"],["data-label","Type"],["data-label","Type",1,"slds-p-vertical--none"],["disabled","",3,"ngModel"],[1,"slds-align--absolute-center",2,"width","2rem"],["size","xx-small","icon","delete",3,"click"],[1,"slds-size--1-of-1","slds-height_full","slds-align--absolute-center"],["label","LBL_SELECT_A_DOMAIN"]],template:function(e,t){if(1&e&&(g.YNc(0,bs,28,2,"ng-container",0),g.YNc(1,_s,2,0,"ng-template",null,1,g.W1O)),2&e){const e=g.MAs(2);g.Q6J("ngIf",t.domainmanager.currentDomainDefinition)("ngIfElse",e)}},dependencies:[i.mk,i.sg,i.O5,n.JJ,n.On,I.U,T._,u.r,c.Wj,c.Zt,c.Bh],encapsulation:2}),DomainManagerFields})();function ys(e,t){if(1&e&&(g.TgZ(0,"option",32),g._uU(1),g.qZA()),2&e){const e=t.$implicit;g.Q6J("value",e),g.xp6(1),g.Oqu(e)}}function Ms(e,t){if(1&e&&(g.TgZ(0,"option",32),g._uU(1),g.qZA()),2&e){const e=t.$implicit;g.Q6J("value",e),g.xp6(1),g.Oqu(e)}}let xs=(()=>{class DomainManagerFieldDetails{constructor(e,t,s,i){this.backend=e,this.metadata=t,this.language=s,this.domainmanager=i,this.field={}}get required(){return"1"==this.field.required}set required(e){this.field.required=e?"1":"0"}}return DomainManagerFieldDetails.ɵfac=function(e){return new(e||DomainManagerFieldDetails)(g.Y36(p.y),g.Y36(h.Pu),g.Y36(f.d),g.Y36(cs))},DomainManagerFieldDetails.ɵcmp=g.Xpm({type:DomainManagerFieldDetails,selectors:[["domainmanager-field-details"]],inputs:{field:"field"},decls:60,vars:13,consts:[[1,"slds-p-around--x-small"],[1,"slds-grid"],[1,"slds-size--3-of-4","slds-form-element","slds-m-vertical--xxx-small"],[1,"slds-form-element__control"],[1,"slds-form-element__label"],["label","LBL_NAME"],["type","text","disabled","",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-size--1-of-4","slds-form-element__control","slds-size--1-of-4","slds-m-vertical--xxx-small","slds-p-left--x-small"],["label","LBL_SCOPE"],[1,"slds-select_container"],["disabled","",1,"slds-select",3,"ngModel","ngModelChange"],["value","g"],["label","LBL_GLOBAL"],["value","c"],["label","LBL_CUSTOM"],[1,"slds-form-element","slds-m-vertical--xxx-small"],["label","LBL_DBTYPE"],[3,"value",4,"ngFor","ngForOf"],["label","LBL_TYPE"],[1,"slds-select",3,"ngModel","ngModelChange"],["label","LBL_LABEL"],[3,"ngModel","ngModelChange"],["label","LBL_LENGTH"],["type","text",1,"slds-input",3,"ngModel","ngModelChange"],["label","LBL_REQUIRED"],[3,"asinteger","ngModel","ngModelChange"],["label","LBL_COMMENT"],[1,"slds-textarea",3,"ngModel","ngModelChange"],[1,"slds-grid","slds-m-vertical--xxx-small","slds-gutters_direct-xx-small"],[1,"slds-col","slds-size--1-of-2","slds-form-element"],["label","LBL_VERSION"],["label","LBL_PACKAGE"],[3,"value"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"label",4),g._UZ(5,"system-label",5),g.qZA(),g.TgZ(6,"input",6),g.NdJ("ngModelChange",(function(e){return t.field.name=e})),g.qZA()()(),g.TgZ(7,"div",7)(8,"label",4),g._UZ(9,"system-label",8),g.qZA(),g.TgZ(10,"div",9)(11,"select",10),g.NdJ("ngModelChange",(function(e){return t.field.scope=e})),g.TgZ(12,"option",11),g._UZ(13,"system-label",12),g.qZA(),g.TgZ(14,"option",13),g._UZ(15,"system-label",14),g.qZA()()()()(),g.TgZ(16,"div",15)(17,"label",4),g._UZ(18,"system-label",16),g.qZA(),g.TgZ(19,"div",9)(20,"select",10),g.NdJ("ngModelChange",(function(e){return t.field.dbtype=e})),g.YNc(21,ys,2,2,"option",17),g.qZA()()(),g.TgZ(22,"div",15)(23,"label",4),g._UZ(24,"system-label",18),g.qZA(),g.TgZ(25,"div",9)(26,"select",19),g.NdJ("ngModelChange",(function(e){return t.field.fieldtype=e})),g.YNc(27,Ms,2,2,"option",17),g.qZA()()(),g.TgZ(28,"div",15)(29,"label",4),g._UZ(30,"system-label",20),g.qZA(),g.TgZ(31,"div",9)(32,"system-input-label",21),g.NdJ("ngModelChange",(function(e){return t.field.label=e})),g.qZA()()(),g.TgZ(33,"div",15)(34,"label",4),g._UZ(35,"system-label",22),g.qZA(),g.TgZ(36,"div",3)(37,"input",23),g.NdJ("ngModelChange",(function(e){return t.field.len=e})),g.qZA()()(),g.TgZ(38,"div",15)(39,"label",4),g._UZ(40,"system-label",24),g.qZA(),g.TgZ(41,"div",3)(42,"system-checkbox",25),g.NdJ("ngModelChange",(function(e){return t.required=e})),g._uU(43,"required"),g.qZA()()(),g.TgZ(44,"div",15)(45,"label",4),g._UZ(46,"system-label",26),g.qZA(),g.TgZ(47,"div",3)(48,"textarea",27),g.NdJ("ngModelChange",(function(e){return t.field.description=e})),g.qZA()()(),g.TgZ(49,"div",28)(50,"div",29)(51,"label",4),g._UZ(52,"system-label",30),g.qZA(),g.TgZ(53,"div",3)(54,"input",23),g.NdJ("ngModelChange",(function(e){return t.field.version=e})),g.qZA()()(),g.TgZ(55,"div",29)(56,"label",4),g._UZ(57,"system-label",31),g.qZA(),g.TgZ(58,"div",3)(59,"input",23),g.NdJ("ngModelChange",(function(e){return t.field.package=e})),g.qZA()()()()()),2&e&&(g.xp6(6),g.Q6J("ngModel",t.field.name),g.xp6(5),g.Q6J("ngModel",t.field.scope),g.xp6(9),g.Q6J("ngModel",t.field.dbtype),g.xp6(1),g.Q6J("ngForOf",t.domainmanager.dbtypes),g.xp6(5),g.Q6J("ngModel",t.field.fieldtype),g.xp6(1),g.Q6J("ngForOf",t.domainmanager.fieldtypes),g.xp6(5),g.Q6J("ngModel",t.field.label),g.xp6(5),g.Q6J("ngModel",t.field.len),g.xp6(5),g.Q6J("asinteger",!0)("ngModel",t.required),g.xp6(6),g.Q6J("ngModel",t.field.description),g.xp6(6),g.Q6J("ngModel",t.field.version),g.xp6(5),g.Q6J("ngModel",t.field.package))},dependencies:[i.sg,n.YN,n.Kr,n.Fj,n.EJ,n.JJ,n.On,I.U,Q.$,T._],encapsulation:2}),DomainManagerFieldDetails})();function vs(e,t){1&e&&(g.TgZ(0,"th",21)(1,"div",22),g._uU(2,"value"),g.qZA()())}function As(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"td")(1,"input",14),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw().$implicit;return g.KtG(s.enumvalue=t)})),g.qZA()()}if(2&e){const e=g.oxw().$implicit;g.xp6(1),g.Q6J("ngModel",e.enumvalue)}}function Ts(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"tr",27)(1,"td",28),g._UZ(2,"system-utility-icon",29),g.TgZ(3,"system-utility-icon",30),g.NdJ("click",(function(t){const s=g.CHM(e).$implicit,i=g.oxw(2);return g.KtG(i.customizeValidationValue(t,s))})),g.qZA(),g.TgZ(4,"dictionary-manager-item-status",31),g.NdJ("ngModelChange",(function(t){const s=g.CHM(e).$implicit;return g.KtG(s.status=t)})),g.qZA()(),g.YNc(5,As,2,1,"td",32),g.TgZ(6,"td")(7,"select",33),g.NdJ("ngModelChange",(function(t){const s=g.CHM(e).$implicit;return g.KtG(s.valuetype=t)})),g.TgZ(8,"option",34),g._UZ(9,"system-label",35),g.qZA(),g.TgZ(10,"option",36),g._UZ(11,"system-label",37),g.qZA()()(),g.TgZ(12,"td")(13,"system-input-label",31),g.NdJ("ngModelChange",(function(t){const s=g.CHM(e).$implicit;return g.KtG(s.label=t)})),g.qZA()(),g.TgZ(14,"td")(15,"input",14),g.NdJ("ngModelChange",(function(t){const s=g.CHM(e).$implicit;return g.KtG(s.comment=t)})),g.qZA()(),g.TgZ(16,"td")(17,"input",14),g.NdJ("ngModelChange",(function(t){const s=g.CHM(e).$implicit;return g.KtG(s.version=t)})),g.qZA()(),g.TgZ(18,"td")(19,"input",14),g.NdJ("ngModelChange",(function(t){const s=g.CHM(e).$implicit;return g.KtG(s.package=t)})),g.qZA()(),g.TgZ(20,"td",38)(21,"system-utility-icon",39),g.NdJ("click",(function(t){const s=g.CHM(e).$implicit,i=g.oxw(2);return g.KtG(i.deleteValidation(t,s.id))})),g.qZA()()()}if(2&e){const e=t.$implicit,s=g.oxw(2);g.xp6(2),g.Q6J("icon","rows")("size","x-small"),g.xp6(1),g.Q6J("icon","g"==e.scope?"world":"people"),g.xp6(1),g.Q6J("ngModel",e.status),g.xp6(1),g.Q6J("ngIf","enum"==s.validation.validation_type),g.xp6(2),g.Q6J("ngModel",e.valuetype),g.xp6(6),g.Q6J("ngModel",e.label),g.xp6(2),g.Q6J("ngModel",e.comment),g.xp6(2),g.Q6J("ngModel",e.version),g.xp6(2),g.Q6J("ngModel",e.package)}}function Ls(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div")(1,"div",2)(2,"div",3)(3,"label",4),g._UZ(4,"system-label",5),g.qZA(),g.TgZ(5,"div",6)(6,"input",7),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.validation.name=t)})),g.qZA(),g.TgZ(7,"button",8),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw();return g.KtG(t.unlinkValidation())})),g._UZ(8,"system-button-icon",9),g.qZA()()(),g.TgZ(9,"div",10)(10,"label",4),g._UZ(11,"system-label",11),g.qZA(),g.TgZ(12,"div",12)(13,"input",7),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.validation.validation_type=t)})),g.qZA()()(),g.TgZ(14,"div",10)(15,"label",4),g._UZ(16,"system-label",13),g.qZA(),g.TgZ(17,"div",12)(18,"input",14),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.validation.version=t)})),g.qZA()()(),g.TgZ(19,"div",10)(20,"label",4),g._UZ(21,"system-label",15),g.qZA(),g.TgZ(22,"div",12)(23,"input",14),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.validation.package=t)})),g.qZA()()()(),g.TgZ(24,"div",16)(25,"table",17)(26,"thead")(27,"tr",18),g._UZ(28,"th",19),g.YNc(29,vs,3,0,"th",20),g.TgZ(30,"th",21)(31,"div",22),g._uU(32,"valuetype"),g.qZA()(),g.TgZ(33,"th",21)(34,"div",22),g._uU(35,"label"),g.qZA()(),g.TgZ(36,"th",21)(37,"div",22),g._uU(38,"comment"),g.qZA()(),g.TgZ(39,"th",21)(40,"div",22),g._uU(41,"version"),g.qZA()(),g.TgZ(42,"th",21)(43,"div",22),g._uU(44,"package"),g.qZA()(),g._UZ(45,"th",19),g.qZA()(),g.TgZ(46,"tbody",23),g.NdJ("cdkDropListDropped",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.drop(t))})),g.YNc(47,Ts,22,10,"tr",24),g.qZA()(),g.TgZ(48,"div",25)(49,"system-utility-icon",26),g.NdJ("click",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.addValidationValue(t))})),g.qZA()()()()}if(2&e){const e=g.oxw();g.xp6(6),g.Q6J("ngModel",e.validation.name),g.xp6(7),g.Q6J("ngModel",e.validation.validation_type),g.xp6(5),g.Q6J("ngModel",e.validation.version),g.xp6(5),g.Q6J("ngModel",e.validation.package),g.xp6(6),g.Q6J("ngIf","enum"==e.validation.validation_type),g.xp6(18),g.Q6J("ngForOf",e.validationvalues)}}function Cs(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",40)(1,"div",41)(2,"button",42),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw();return g.KtG(t.addValidation())})),g._UZ(3,"system-label",43),g.qZA(),g.TgZ(4,"div",44),g._UZ(5,"system-label",45),g.qZA(),g.TgZ(6,"button",42),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw();return g.KtG(t.selectValidation())})),g._UZ(7,"system-label",46),g.qZA()()()}}let qs=(()=>{class DomainManagerFieldValidation{constructor(e,t,s,i,n){this.domainmanager=e,this.language=t,this.modelutilities=s,this.modal=i,this.injector=n,this.field={}}ngOnChanges(e){}get validation(){return this.domainmanager.getValidationById(this.field.sysdomainfieldvalidation_id)}get validationvalues(){return this.domainmanager.getValidationValuesdById(this.field.sysdomainfieldvalidation_id).sort(((e,t)=>e.sequence>t.sequence?1:-1))}addValidationValue(e){e.stopPropagation(),this.modal.openModal("DomainManagerAddValidationValueModal",!0,this.injector).subscribe((e=>{e.instance.fieldvalidationvalue.sysdomainfieldvalidation_id=this.field.sysdomainfieldvalidation_id,e.instance.fieldvalidationvalue.sequence=this.validationvalues.length,e.instance.fieldvalidationvalue.scope=this.domainmanager.currentDomainScope}))}deleteValidation(e,t){e.preventDefault();let s=this.domainmanager.domainfieldvalidationvalues.findIndex((e=>e.id==t));s>=0&&this.domainmanager.domainfieldvalidationvalues.splice(s,1)}customizeValidationValue(e,t){e.stopPropagation(),"g"==t.scope&&this.modal.prompt("confirm","Customize the Domain?","Customize").subscribe((e=>{if(e){let e={...t};e.id=this.modelutilities.generateGuid(),e.scope="c",this.domainmanager.domainfieldvalidationvalues.push(e),this.domainmanager.currentDomainScope=e.scope}}))}drop(e){let t=this.validationvalues,s=t.splice(e.previousIndex,1);t.splice(e.currentIndex,0,s[0]);let i=0;for(let e of t)e.sequence=i,i++}unlinkValidation(){this.field.sysdomainfieldvalidation_id=null}selectValidation(){this.modal.openModal("DomainManagerSelectValidation",!0,this.injector)}addValidation(){this.modal.openModal("DomainManagerAddValidation",!0,this.injector)}}return DomainManagerFieldValidation.ɵfac=function(e){return new(e||DomainManagerFieldValidation)(g.Y36(cs),g.Y36(f.d),g.Y36(b.A),g.Y36(M.o),g.Y36(g.zs3))},DomainManagerFieldValidation.ɵcmp=g.Xpm({type:DomainManagerFieldValidation,selectors:[["domainmanager-field-validation"]],inputs:{field:"field"},features:[g.TTD],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["novalidation",""],[1,"slds-grid","slds-gutters_direct-xx-small","slds-p-around--x-small"],[1,"slds-col","slds-grow","slds-form-element"],[1,"slds-form-element__label"],["label","LBL_NAME"],[1,"slds-form-element__control","slds-input-has-icon","slds-input-has-icon_right"],["type","text","disabled","",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-button","slds-button_icon","slds-input__icon","slds-input__icon_right",3,"click"],["icon","unlinked"],[1,"slds-col","slds-size--1-of-4","slds-form-element"],["label","LBL_TYPE"],[1,"slds-form-element__control"],["label","LBL_VERSION"],["type","text",1,"slds-input",3,"ngModel","ngModelChange"],["label","LBL_PACKAGE"],["system-to-bottom",""],[1,"slds-table","slds-table_cell-buffer","slds-table_bordered","slds-table--header-fixed"],[1,"slds-line-height_reset"],["scope","col",2,"width","2rem"],["class","","scope","col",4,"ngIf"],["scope","col",1,""],[1,"slds-truncate","slds-th__action","slds-p-horizontal--x-small"],["cdkDropList","",1,"dragboundary",3,"cdkDropListDropped"],["class","slds-hint-parent","cdkDrag","","cdkDragBoundary",".dragboundary",4,"ngFor","ngForOf"],[1,"slds-align--absolute-center","slds-p-around--small"],["icon","new","size","x-small",3,"click"],["cdkDrag","","cdkDragBoundary",".dragboundary",1,"slds-hint-parent"],[1,"slds-grid","slds-align--absolute-center",2,"min-height","40px"],["cdkDragHandle","",1,"slds-p-right--xx-small",2,"cursor","move",3,"icon","size"],["size","xx-small",1,"slds-p-right--xx-small",3,"icon","click"],[3,"ngModel","ngModelChange"],[4,"ngIf"],[1,"slds-select",3,"ngModel","ngModelChange"],["value","string"],["label","LBL_STRING"],["value","integer"],["label","LBL_INTEGER"],[1,"slds-align--absolute-center",2,"min-height","40px"],["size","xx-small","icon","delete",3,"click"],["system-to-bottom-noscroll","",1,"slds-align--absolute-center","slds-p-around--small"],[1,"slds-grid","slds-grid--vertical-align-center"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_ADD"],[1,"slds-p-horizontal--x-small"],["label","LBL_OR"],["label","LBL_SELECT"]],template:function(e,t){if(1&e&&(g.YNc(0,Ls,50,6,"div",0),g.YNc(1,Cs,8,0,"ng-template",null,1,g.W1O)),2&e){const e=g.MAs(2);g.Q6J("ngIf",t.field.sysdomainfieldvalidation_id)("ngIfElse",e)}},dependencies:[i.sg,i.O5,n.YN,n.Kr,n.Fj,n.EJ,n.JJ,n.On,A.J,Q.$,T._,u.r,k.H,C.t,c.Wj,c.Zt,c.Bh,m],encapsulation:2}),DomainManagerFieldValidation})();const Js=function(e){return{"slds-is-active":e}},Ns=function(e){return{"slds-hide":e}};function ks(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",2)(1,"ul",3)(2,"li",4),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw();return g.KtG(t.tabScope="details")})),g.TgZ(3,"a",5),g._UZ(4,"system-label",6),g.qZA()(),g.TgZ(5,"li",7),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw();return g.KtG(t.tabScope="validations")})),g.TgZ(6,"a",8),g._UZ(7,"system-label",9),g.qZA()()(),g.TgZ(8,"div",10),g._UZ(9,"domainmanager-field-details",11),g.qZA(),g.TgZ(10,"div",10),g._UZ(11,"domainmanager-field-validation",11),g.qZA()()}if(2&e){const e=g.oxw();g.xp6(2),g.Q6J("ngClass",g.VKq(6,Js,"details"==e.tabScope)),g.xp6(3),g.Q6J("ngClass",g.VKq(8,Js,"validations"==e.tabScope)),g.xp6(3),g.Q6J("ngClass",g.VKq(10,Ns,"details"!=e.tabScope)),g.xp6(1),g.Q6J("field",e.currentField),g.xp6(1),g.Q6J("ngClass",g.VKq(12,Ns,"validations"!=e.tabScope)),g.xp6(1),g.Q6J("field",e.currentField)}}function ws(e,t){1&e&&(g.TgZ(0,"div",12),g._UZ(1,"system-label",13),g.qZA())}let Us=(()=>{class DomainManagerFieldTabs{constructor(e,t,s,i,n,l,o,a,d){this.domainmanager=e,this.backend=t,this.metadata=s,this.language=i,this.modelutilities=n,this.broadcast=l,this.toast=o,this.modal=a,this.injector=d,this.tabScope="details"}get domainfields(){return this.domainmanager.domainfields}get currentField(){return this.domainfields.find((e=>e.id==this.domainmanager.currentDomainField))}}return DomainManagerFieldTabs.ɵfac=function(e){return new(e||DomainManagerFieldTabs)(g.Y36(cs),g.Y36(p.y),g.Y36(h.Pu),g.Y36(f.d),g.Y36(b.A),g.Y36(gs.f),g.Y36(y.A),g.Y36(M.o),g.Y36(g.zs3))},DomainManagerFieldTabs.ɵcmp=g.Xpm({type:DomainManagerFieldTabs,selectors:[["domain-manager-field-tabs"]],decls:3,vars:2,consts:[["class","slds-tabs_scoped",4,"ngIf","ngIfElse"],["selectfield",""],[1,"slds-tabs_scoped"],["role","tablist",1,"slds-tabs_scoped__nav"],["title","Item One","role","presentation",1,"slds-tabs_scoped__item",3,"ngClass","click"],["href","javascript:void(0);","role","tab","tabindex","0",1,"slds-tabs_scoped__link"],["label","LBL_DETAILS"],["title","Item Two","role","presentation",1,"slds-tabs_scoped__item",3,"ngClass","click"],["href","javascript:void(0);","role","tab","tabindex","-1",1,"slds-tabs_scoped__link"],["label","LBL_VALIDATION"],["role","tabpanel","system-to-bottom-noscroll","",1,"slds-tabs_scoped__content","slds-show","slds-p-around--none",3,"ngClass"],[3,"field"],[1,"slds-size--1-of-1","slds-height_full","slds-align--absolute-center"],["label","LBL_SELECT_A_FIELD"]],template:function(e,t){if(1&e&&(g.YNc(0,ks,12,14,"div",0),g.YNc(1,ws,2,0,"ng-template",null,1,g.W1O)),2&e){const e=g.MAs(2);g.Q6J("ngIf",t.domainmanager.currentDomainField)("ngIfElse",e)}},dependencies:[i.mk,i.O5,T._,C.t,xs,qs],encapsulation:2}),DomainManagerFieldTabs})(),Es=(()=>{class DomainManager{constructor(e,t,s,i,n,l,o,a,d){this.domainmanager=e,this.backend=t,this.metadata=s,this.language=i,this.modelutilities=n,this.broadcast=l,this.toast=o,this.modal=a,this.injector=d}save(){this.domainmanager.save()}repairCustomENUMs(){this.modal.confirm("are you sure you want to migrate all old legacy Cache language files","migrate Labels").subscribe({next:e=>{if(e){let e=this.modal.await("LBL_LOADING");this.backend.postRequest("admin/repair/custom/enum").subscribe((t=>{e.emit(!0),t?this.toast.sendToast("LBL_CACHE_REPAIRED","success"):this.toast.sendToast("LBL_ERROR","error")}))}}})}}return DomainManager.ɵfac=function(e){return new(e||DomainManager)(g.Y36(cs),g.Y36(p.y),g.Y36(h.Pu),g.Y36(f.d),g.Y36(b.A),g.Y36(gs.f),g.Y36(y.A),g.Y36(M.o),g.Y36(g.zs3))},DomainManager.ɵcmp=g.Xpm({type:DomainManager,selectors:[["ng-component"]],features:[g._Bn([h.Pu,cs])],decls:22,vars:0,consts:[["titlelabel","LBL_DOMAIN_MANAGER"],["role","group",1,"slds-button-group"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_SAVE"],["system-dropdown-trigger","",1,"slds-dropdown-trigger","slds-dropdown-trigger_click","slds-button_last"],[1,"slds-button","slds-button_icon","slds-button_icon-border-filled"],["icon","down"],[1,"slds-dropdown","slds-dropdown_right","slds-dropdown_actions"],["role","menu",1,"slds-dropdown__list"],["role","presentation",1,"slds-dropdown__item",3,"click"],["href","javascript:void(null)","role","menuitem"],[1,"slds-truncate"],["label","LBL_REPAIR_CUSTOM_CACHE"],[1,"slds-grid"],[1,"slds-size--1-of-3"],["system-to-bottom-noscroll","",1,"slds-size--2-of-3","slds-theme--default","slds-border--left"],[1,"slds-scrollable--y",2,"height","50%"],[1,"slds-p-around--xx-small","slds-scrollable--y",2,"height","50%"]],template:function(e,t){1&e&&(g.TgZ(0,"workbench-header",0)(1,"workbench-header-controls")(2,"div",1)(3,"button",2),g.NdJ("click",(function(){return t.save()})),g._UZ(4,"system-label",3),g.qZA(),g.TgZ(5,"div",4)(6,"button",5),g._UZ(7,"system-button-icon",6),g.qZA(),g.TgZ(8,"div",7)(9,"ul",8)(10,"li",9),g.NdJ("click",(function(){return t.repairCustomENUMs()})),g.TgZ(11,"a",10)(12,"span",11),g._UZ(13,"system-label",12),g.qZA()()()()()()()()(),g.TgZ(14,"div",13)(15,"div",14),g._UZ(16,"domain-manager-definitions"),g.qZA(),g.TgZ(17,"div",15)(18,"div",16),g._UZ(19,"domain-manager-fields"),g.qZA(),g.TgZ(20,"div",17),g._UZ(21,"domain-manager-field-tabs"),g.qZA()()())},dependencies:[A.J,T._,L.l,C.t,ps,Zs,Us,We,et],encapsulation:2}),DomainManager})();var Ds=s(1574);function Os(e,t){if(1&e&&(g.TgZ(0,"option",27),g._uU(1),g.qZA()),2&e){const e=t.$implicit;g.Q6J("value",e),g.xp6(1),g.Oqu(e)}}let Is=(()=>{class DomainManagerAddDefinitionModal{constructor(e,t,s){this.domainmanager=e,this.metadata=t,this.modelutilities=s,this.domaindefinition={name:"",fieldtype:"",scope:"c",deleted:0,status:"d"}}close(){this.self.destroy()}get canSave(){return this.domaindefinition.name&&this.domaindefinition.fieldtype&&!this.domainmanager.domaindefinitions.find((e=>e.name==this.domaindefinition.name))}save(){this.canSave&&(this.domaindefinition.id=this.modelutilities.generateGuid(),this.domainmanager.domaindefinitions.push(this.domaindefinition),this.close())}}return DomainManagerAddDefinitionModal.ɵfac=function(e){return new(e||DomainManagerAddDefinitionModal)(g.Y36(cs),g.Y36(h.Pu),g.Y36(b.A))},DomainManagerAddDefinitionModal.ɵcmp=g.Xpm({type:DomainManagerAddDefinitionModal,selectors:[["ng-component"]],decls:47,vars:8,consts:[[3,"close"],[1,"slds-grid"],[1,"slds-form-element__control","slds-size--3-of-4","slds-p-right--xxx-small"],[1,"slds-form-element__label"],[1,"slds-required"],["label","LBL_NAME"],[3,"ngModel","ngModelChange"],[1,"slds-form-element__control","slds-size--1-of-4","slds-p-left--xxx-small"],["label","LBL_SCOPE"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],["value","g"],["label","LBL_GLOBAL"],["value","c"],["label","LBL_CUSTOM"],[1,"slds-large-size--1-of-2","slds-p-right--xxx-small","slds-form-element__control"],["label","LBL_TYPE"],[3,"value",4,"ngFor","ngForOf"],[1,"slds-size--1-of-4","slds-p-right--xxx-small","slds-form-element__control"],["label","LBL_PACKAGE"],[1,"slds-size--1-of-4","slds-p-left--xxx-small","slds-form-element__control"],["label","LBL_VERSION"],["label","LBL_COMMENT"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CLOSE"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_SAVE"],[3,"value"]],template:function(e,t){1&e&&(g.TgZ(0,"system-modal")(1,"system-modal-header",0),g.NdJ("close",(function(){return t.close()})),g._uU(2,"Add Domain Definition"),g.qZA(),g.TgZ(3,"system-modal-content")(4,"div",1)(5,"div",2)(6,"label",3)(7,"abbr",4),g._uU(8,"* "),g.qZA(),g._UZ(9,"system-label",5),g.qZA(),g.TgZ(10,"system-input-text",6),g.NdJ("ngModelChange",(function(e){return t.domaindefinition.name=e})),g.qZA()(),g.TgZ(11,"div",7)(12,"label",3)(13,"abbr",4),g._uU(14,"* "),g.qZA(),g._UZ(15,"system-label",8),g.qZA(),g.TgZ(16,"div",9)(17,"select",10),g.NdJ("ngModelChange",(function(e){return t.domaindefinition.scope=e})),g.TgZ(18,"option",11),g._UZ(19,"system-label",12),g.qZA(),g.TgZ(20,"option",13),g._UZ(21,"system-label",14),g.qZA()()()()(),g.TgZ(22,"div",1)(23,"div",15)(24,"label",3)(25,"abbr",4),g._uU(26,"* "),g.qZA(),g._UZ(27,"system-label",16),g.qZA(),g.TgZ(28,"div",9)(29,"select",10),g.NdJ("ngModelChange",(function(e){return t.domaindefinition.fieldtype=e})),g.YNc(30,Os,2,2,"option",17),g.qZA()()(),g.TgZ(31,"div",18)(32,"label",3),g._UZ(33,"system-label",19),g.qZA(),g.TgZ(34,"system-input-text",6),g.NdJ("ngModelChange",(function(e){return t.domaindefinition.package=e})),g.qZA()(),g.TgZ(35,"div",20)(36,"label",3),g._UZ(37,"system-label",21),g.qZA(),g.TgZ(38,"system-input-text",6),g.NdJ("ngModelChange",(function(e){return t.domaindefinition.version=e})),g.qZA()()(),g.TgZ(39,"label",3),g._UZ(40,"system-label",22),g.qZA(),g.TgZ(41,"system-richtext-editor",6),g.NdJ("ngModelChange",(function(e){return t.domaindefinition.description=e})),g.qZA()(),g.TgZ(42,"system-modal-footer")(43,"button",23),g.NdJ("click",(function(){return t.close()})),g._UZ(44,"system-label",24),g.qZA(),g.TgZ(45,"button",25),g.NdJ("click",(function(){return t.save()})),g._UZ(46,"system-label",26),g.qZA()()()),2&e&&(g.xp6(10),g.Q6J("ngModel",t.domaindefinition.name),g.xp6(7),g.Q6J("ngModel",t.domaindefinition.scope),g.xp6(12),g.Q6J("ngModel",t.domaindefinition.fieldtype),g.xp6(1),g.Q6J("ngForOf",t.domainmanager.fieldtypes),g.xp6(4),g.Q6J("ngModel",t.domaindefinition.package),g.xp6(4),g.Q6J("ngModel",t.domaindefinition.version),g.xp6(3),g.Q6J("ngModel",t.domaindefinition.description),g.xp6(4),g.Q6J("disabled",!t.canSave))},dependencies:[i.sg,n.YN,n.Kr,n.EJ,n.JJ,n.On,q.Z,T._,it.j,nt.x,lt.p,ot.y,Ds.z],encapsulation:2}),DomainManagerAddDefinitionModal})();function Qs(e,t){if(1&e&&(g.TgZ(0,"option",35),g._uU(1),g.qZA()),2&e){const e=t.$implicit;g.Q6J("value",e),g.xp6(1),g.Oqu(e)}}function Ss(e,t){if(1&e&&(g.TgZ(0,"option",35),g._uU(1),g.qZA()),2&e){const e=t.$implicit;g.Q6J("value",e),g.xp6(1),g.Oqu(e)}}let Bs=(()=>{class DomainManagerAddFieldModal{constructor(e,t,s){this.domainmanager=e,this.metadata=t,this.modelutilities=s,this.domainfield={name:"{sysdictionaryitems.name}",fieldtype:"",scope:"c",required:0,deleted:0,status:"d"}}close(){this.self.destroy()}get canSave(){return this.domainfield.name&&this.domainfield.dbtype&&!this.domainmanager.domainfields.find((e=>e.name==this.domainfield.name&&e.sysdomaindefinition_id==this.domainmanager.currentDomainDefinition))}save(){this.canSave&&(this.domainfield.sequence=this.domainmanager.domainfields.filter((e=>e.sysdomaindefinition_id==this.domainmanager.currentDomainDefinition)).length,this.domainfield.id=this.modelutilities.generateGuid(),this.domainfield.sysdomaindefinition_id=this.domainmanager.currentDomainDefinition,this.domainmanager.domainfields.push(this.domainfield),this.close())}}return DomainManagerAddFieldModal.ɵfac=function(e){return new(e||DomainManagerAddFieldModal)(g.Y36(cs),g.Y36(h.Pu),g.Y36(b.A))},DomainManagerAddFieldModal.ɵcmp=g.Xpm({type:DomainManagerAddFieldModal,selectors:[["ng-component"]],decls:66,vars:15,consts:[[3,"close"],[1,"slds-grid"],[1,"slds-form-element__control","slds-size--3-of-4","slds-p-right--xxx-small"],[1,"slds-form-element__label"],[1,"slds-required"],["label","LBL_NAME"],[3,"ngModel","ngModelChange"],[1,"slds-form-element__control","slds-size--1-of-4","slds-p-left--xxx-small"],["label","LBL_SCOPE"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],["value","g"],["label","LBL_GLOBAL"],["value","c"],["label","LBL_CUSTOM"],[1,"slds-large-size--1-of-5","slds-p-right--xxx-small","slds-form-element__control"],["label","LBL_DBTYPE"],[3,"value",4,"ngFor","ngForOf"],[1,"slds-form-element__control","slds-size--1-of-5","slds-p-horizontal--xxx-small"],["label","LBL_LENGTH"],[1,"slds-large-size--1-of-5","slds-p-horizontal--xxx-small","slds-form-element__control"],["label","LBL_REQUIRED"],[3,"asinteger","ngModel","ngModelChange"],["label","LBL_EXCLUDE_FROM_INDEX"],[1,"slds-large-size--1-of-5","slds-p-left--xxx-small","slds-form-element__control"],["label","LBL_RENDERING_TYPE"],[1,"slds-size--1-of-2","slds-p-right--xxx-small","slds-form-element__control"],["label","LBL_PACKAGE"],[1,"slds-size--1-of-2","slds-p-left--xxx-small","slds-form-element__control"],["label","LBL_VERSION"],["label","LBL_COMMENT"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CLOSE"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_SAVE"],[3,"value"]],template:function(e,t){1&e&&(g.TgZ(0,"system-modal")(1,"system-modal-header",0),g.NdJ("close",(function(){return t.close()})),g._uU(2,"Add Domain Field"),g.qZA(),g.TgZ(3,"system-modal-content")(4,"div",1)(5,"div",2)(6,"label",3)(7,"abbr",4),g._uU(8,"* "),g.qZA(),g._UZ(9,"system-label",5),g.qZA(),g.TgZ(10,"system-input-text",6),g.NdJ("ngModelChange",(function(e){return t.domainfield.name=e})),g.qZA()(),g.TgZ(11,"div",7)(12,"label",3)(13,"abbr",4),g._uU(14,"* "),g.qZA(),g._UZ(15,"system-label",8),g.qZA(),g.TgZ(16,"div",9)(17,"select",10),g.NdJ("ngModelChange",(function(e){return t.domainfield.scope=e})),g.TgZ(18,"option",11),g._UZ(19,"system-label",12),g.qZA(),g.TgZ(20,"option",13),g._UZ(21,"system-label",14),g.qZA()()()()(),g.TgZ(22,"div",1)(23,"div",15)(24,"label",3)(25,"abbr",4),g._uU(26,"* "),g.qZA(),g._UZ(27,"system-label",16),g.qZA(),g.TgZ(28,"div",9)(29,"select",10),g.NdJ("ngModelChange",(function(e){return t.domainfield.dbtype=e})),g.YNc(30,Qs,2,2,"option",17),g.qZA()()(),g.TgZ(31,"div",18)(32,"label",3),g._UZ(33,"system-label",19),g.qZA(),g.TgZ(34,"system-input-text",6),g.NdJ("ngModelChange",(function(e){return t.domainfield.len=e})),g.qZA()(),g.TgZ(35,"div",20)(36,"label",3),g._UZ(37,"system-label",21),g.qZA(),g.TgZ(38,"system-checkbox",22),g.NdJ("ngModelChange",(function(e){return t.domainfield.required=e})),g.qZA()(),g.TgZ(39,"div",20)(40,"label",3),g._UZ(41,"system-label",23),g.qZA(),g.TgZ(42,"system-checkbox",22),g.NdJ("ngModelChange",(function(e){return t.domainfield.exclude_from_index=e})),g.qZA()(),g.TgZ(43,"div",24)(44,"label",3),g._UZ(45,"system-label",25),g.qZA(),g.TgZ(46,"div",9)(47,"select",10),g.NdJ("ngModelChange",(function(e){return t.domainfield.fieldtype=e})),g.YNc(48,Ss,2,2,"option",17),g.qZA()()()(),g.TgZ(49,"div",1)(50,"div",26)(51,"label",3),g._UZ(52,"system-label",27),g.qZA(),g.TgZ(53,"system-input-text",6),g.NdJ("ngModelChange",(function(e){return t.domainfield.package=e})),g.qZA()(),g.TgZ(54,"div",28)(55,"label",3),g._UZ(56,"system-label",29),g.qZA(),g.TgZ(57,"system-input-text",6),g.NdJ("ngModelChange",(function(e){return t.domainfield.version=e})),g.qZA()()(),g.TgZ(58,"label",3),g._UZ(59,"system-label",30),g.qZA(),g.TgZ(60,"system-richtext-editor",6),g.NdJ("ngModelChange",(function(e){return t.domainfield.description=e})),g.qZA()(),g.TgZ(61,"system-modal-footer")(62,"button",31),g.NdJ("click",(function(){return t.close()})),g._UZ(63,"system-label",32),g.qZA(),g.TgZ(64,"button",33),g.NdJ("click",(function(){return t.save()})),g._UZ(65,"system-label",34),g.qZA()()()),2&e&&(g.xp6(10),g.Q6J("ngModel",t.domainfield.name),g.xp6(7),g.Q6J("ngModel",t.domainfield.scope),g.xp6(12),g.Q6J("ngModel",t.domainfield.dbtype),g.xp6(1),g.Q6J("ngForOf",t.domainmanager.dbtypes),g.xp6(4),g.Q6J("ngModel",t.domainfield.len),g.xp6(4),g.Q6J("asinteger",!0)("ngModel",t.domainfield.required),g.xp6(4),g.Q6J("asinteger",!0)("ngModel",t.domainfield.exclude_from_index),g.xp6(5),g.Q6J("ngModel",t.domainfield.fieldtype),g.xp6(1),g.Q6J("ngForOf",t.domainmanager.fieldtypes),g.xp6(5),g.Q6J("ngModel",t.domainfield.package),g.xp6(4),g.Q6J("ngModel",t.domainfield.version),g.xp6(3),g.Q6J("ngModel",t.domainfield.description),g.xp6(4),g.Q6J("disabled",!t.canSave))},dependencies:[i.sg,n.YN,n.Kr,n.EJ,n.JJ,n.On,I.U,q.Z,T._,it.j,nt.x,lt.p,ot.y,Ds.z],encapsulation:2}),DomainManagerAddFieldModal})();function Fs(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"tr",13),g.NdJ("click",(function(){const t=g.CHM(e).$implicit,s=g.oxw();return g.KtG(s.selectValidation(t.id))})),g.TgZ(1,"td"),g._UZ(2,"system-utility-icon",14),g.TgZ(3,"dictionary-manager-item-status",15),g.NdJ("ngModelChange",(function(t){const s=g.CHM(e).$implicit;return g.KtG(s.status=t)})),g.qZA()(),g.TgZ(4,"td"),g._uU(5),g.qZA(),g.TgZ(6,"td"),g._uU(7),g.qZA()()}if(2&e){const e=t.$implicit;g.xp6(2),g.Q6J("icon","g"==e.scope?"world":"people"),g.xp6(1),g.Q6J("ngModel",e.status),g.xp6(2),g.Oqu(e.name),g.xp6(2),g.Oqu(e.validation_type)}}let Ys=(()=>{class DomainManagerSelectValidation{constructor(e){this.domainmanager=e,this.validations=[],this.validations=e.domainfieldvalidations.filter((e=>0==e.deleted)).sort(((e,t)=>e.name>t.name?1:-1))}selectValidation(e){this.domainmanager.domainfields.find((e=>e.id==this.domainmanager.currentDomainField)).sysdomainfieldvalidation_id=e,this.close()}close(){this.self.destroy()}}return DomainManagerSelectValidation.ɵfac=function(e){return new(e||DomainManagerSelectValidation)(g.Y36(cs))},DomainManagerSelectValidation.ɵcmp=g.Xpm({type:DomainManagerSelectValidation,selectors:[["ng-component"]],decls:19,vars:2,consts:[[3,"close"],["label","LBL_SELECT_VALIDATION"],["margin","none",3,"grow"],[1,"slds-table","slds-table--bordered","slds-table--fixed-layout","slds-table--header-fixed","slds-max-medium-table_stacked-horizontal"],[1,"slds-text-title--caps"],["scope","col",2,"width","3rem"],["scope","col"],[1,"slds-th__action","slds-truncate"],["label","LBL_NAME"],["label","LBL_TYPE"],[3,"click",4,"ngFor","ngForOf"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[3,"click"],["size","xx-small",1,"slds-p-right--xx-small",3,"icon"],[3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(g.TgZ(0,"system-modal")(1,"system-modal-header",0),g.NdJ("close",(function(){return t.close()})),g._UZ(2,"system-label",1),g.qZA(),g.TgZ(3,"system-modal-content",2)(4,"table",3)(5,"thead")(6,"tr",4),g._UZ(7,"th",5),g.TgZ(8,"th",6)(9,"span",7),g._UZ(10,"system-label",8),g.qZA()(),g.TgZ(11,"th",6)(12,"span",7),g._UZ(13,"system-label",9),g.qZA()()()(),g.TgZ(14,"tbody"),g.YNc(15,Fs,8,4,"tr",10),g.qZA()()(),g.TgZ(16,"system-modal-footer")(17,"button",11),g.NdJ("click",(function(){return t.close()})),g._UZ(18,"system-label",12),g.qZA()()()),2&e&&(g.xp6(3),g.Q6J("grow",!0),g.xp6(12),g.Q6J("ngForOf",t.validations))},dependencies:[i.sg,n.JJ,n.On,T._,it.j,nt.x,lt.p,ot.y,u.r,m],encapsulation:2}),DomainManagerSelectValidation})(),Rs=(()=>{class DomainManagerAddValidation{constructor(e,t){this.domainmanager=e,this.modelutilities=t,this.fieldvalidation={scope:"c"}}selectValidation(e){this.domainmanager.domainfields.find((e=>e.id==this.domainmanager.currentDomainField)).sysdomainfieldvalidation_id=e,this.close()}add(){this.fieldvalidation.id=this.modelutilities.generateGuid(),this.fieldvalidation.status="a",this.domainmanager.domainfieldvalidations.push(this.fieldvalidation),this.selectValidation(this.fieldvalidation.id)}close(){this.self.destroy()}}return DomainManagerAddValidation.ɵfac=function(e){return new(e||DomainManagerAddValidation)(g.Y36(cs),g.Y36(b.A))},DomainManagerAddValidation.ɵcmp=g.Xpm({type:DomainManagerAddValidation,selectors:[["ng-component"]],decls:50,vars:6,consts:[[3,"close"],["label","LBL_ADD_VALIDATION"],[1,"slds-grid"],[1,"slds-form-element__control","slds-size--3-of-4","slds-p-right--xxx-small"],[1,"slds-form-element__label"],[1,"slds-required"],["label","LBL_NAME"],[3,"ngModel","ngModelChange"],[1,"slds-form-element__control","slds-size--1-of-4","slds-p-left--xxx-small"],["label","LBL_SCOPE"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],["value","g"],["label","LBL_GLOBAL"],["value","c"],["label","LBL_CUSTOM"],[1,"slds-large-size--1-of-2","slds-p-right--xxx-small","slds-form-element__control"],["label","LBL_TYPE"],["value","enum"],["value","range"],[1,"slds-size--1-of-4","slds-p-right--xxx-small","slds-form-element__control"],["label","LBL_PACKAGE"],[1,"slds-size--1-of-4","slds-p-left--xxx-small","slds-form-element__control"],["label","LBL_VERSION"],["label","LBL_COMMENT"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],["label","LBL_ADD"]],template:function(e,t){1&e&&(g.TgZ(0,"system-modal")(1,"system-modal-header",0),g.NdJ("close",(function(){return t.close()})),g._UZ(2,"system-label",1),g.qZA(),g.TgZ(3,"system-modal-content")(4,"div",2)(5,"div",3)(6,"label",4)(7,"abbr",5),g._uU(8,"* "),g.qZA(),g._UZ(9,"system-label",6),g.qZA(),g.TgZ(10,"system-input-text",7),g.NdJ("ngModelChange",(function(e){return t.fieldvalidation.name=e})),g.qZA()(),g.TgZ(11,"div",8)(12,"label",4)(13,"abbr",5),g._uU(14,"* "),g.qZA(),g._UZ(15,"system-label",9),g.qZA(),g.TgZ(16,"div",10)(17,"select",11),g.NdJ("ngModelChange",(function(e){return t.fieldvalidation.scope=e})),g.TgZ(18,"option",12),g._UZ(19,"system-label",13),g.qZA(),g.TgZ(20,"option",14),g._UZ(21,"system-label",15),g.qZA()()()()(),g.TgZ(22,"div",2)(23,"div",16)(24,"label",4)(25,"abbr",5),g._uU(26,"* "),g.qZA(),g._UZ(27,"system-label",17),g.qZA(),g.TgZ(28,"div",10)(29,"select",11),g.NdJ("ngModelChange",(function(e){return t.fieldvalidation.validation_type=e})),g.TgZ(30,"option",18),g._uU(31,"enum"),g.qZA(),g.TgZ(32,"option",19),g._uU(33,"range"),g.qZA()()()(),g.TgZ(34,"div",20)(35,"label",4),g._UZ(36,"system-label",21),g.qZA(),g.TgZ(37,"system-input-text",7),g.NdJ("ngModelChange",(function(e){return t.fieldvalidation.package=e})),g.qZA()(),g.TgZ(38,"div",22)(39,"label",4),g._UZ(40,"system-label",23),g.qZA(),g.TgZ(41,"system-input-text",7),g.NdJ("ngModelChange",(function(e){return t.fieldvalidation.version=e})),g.qZA()()(),g.TgZ(42,"label",4),g._UZ(43,"system-label",24),g.qZA(),g.TgZ(44,"system-richtext-editor",7),g.NdJ("ngModelChange",(function(e){return t.fieldvalidation.description=e})),g.qZA()(),g.TgZ(45,"system-modal-footer")(46,"button",25),g.NdJ("click",(function(){return t.close()})),g._UZ(47,"system-label",26),g.qZA(),g.TgZ(48,"button",25),g.NdJ("click",(function(){return t.add()})),g._UZ(49,"system-label",27),g.qZA()()()),2&e&&(g.xp6(10),g.Q6J("ngModel",t.fieldvalidation.name),g.xp6(7),g.Q6J("ngModel",t.fieldvalidation.scope),g.xp6(12),g.Q6J("ngModel",t.fieldvalidation.validation_type),g.xp6(8),g.Q6J("ngModel",t.fieldvalidation.package),g.xp6(4),g.Q6J("ngModel",t.fieldvalidation.version),g.xp6(3),g.Q6J("ngModel",t.fieldvalidation.description))},dependencies:[n.YN,n.Kr,n.EJ,n.JJ,n.On,q.Z,T._,it.j,nt.x,lt.p,ot.y,Ds.z],encapsulation:2}),DomainManagerAddValidation})(),Gs=(()=>{class DomainManagerAddValidationValueModal{constructor(e,t){this.domainmanager=e,this.modelutilities=t,this.fieldvalidationvalue={scope:"c",sysdomainfieldvalidation_id:null,sequence:0,deleted:0,status:"d"}}add(){this.fieldvalidationvalue.id=this.modelutilities.generateGuid(),this.domainmanager.domainfieldvalidationvalues.push(this.fieldvalidationvalue),this.close()}close(){this.self.destroy()}}return DomainManagerAddValidationValueModal.ɵfac=function(e){return new(e||DomainManagerAddValidationValueModal)(g.Y36(cs),g.Y36(b.A))},DomainManagerAddValidationValueModal.ɵcmp=g.Xpm({type:DomainManagerAddValidationValueModal,selectors:[["ng-component"]],decls:49,vars:7,consts:[[3,"close"],["label","LBL_ADD_VALIDATION"],[1,"slds-grid"],[1,"slds-form-element__control","slds-size--1-of-3","slds-p-right--xxx-small"],[1,"slds-form-element__label"],["label","LBL_VALUE"],[3,"ngModel","ngModelChange"],["label","LBL_VALUE_TYPE"],[1,"slds-select",3,"ngModel","ngModelChange"],["value","string"],["label","LBL_STRING"],["value","int"],["label","LBL_INTEGER"],[1,"slds-form-element__control","slds-size--1-of-3","slds-p-left--xxx-small"],[1,"slds-required"],["label","LBL_SCOPE"],[1,"slds-select_container"],["value","g"],["label","LBL_GLOBAL"],["value","c"],["label","LBL_CUSTOM"],[1,"slds-size--1-of-4","slds-p-right--xxx-small","slds-form-element__control"],["label","LBL_LABEL"],["label","LBL_PACKAGE"],[1,"slds-size--1-of-4","slds-p-left--xxx-small","slds-form-element__control"],["label","LBL_VERSION"],["label","LBL_COMMENT"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],["label","LBL_ADD"]],template:function(e,t){1&e&&(g.TgZ(0,"system-modal")(1,"system-modal-header",0),g.NdJ("close",(function(){return t.close()})),g._UZ(2,"system-label",1),g.qZA(),g.TgZ(3,"system-modal-content")(4,"div",2)(5,"div",3)(6,"label",4),g._UZ(7,"system-label",5),g.qZA(),g.TgZ(8,"system-input-text",6),g.NdJ("ngModelChange",(function(e){return t.fieldvalidationvalue.enumvalue=e})),g.qZA()(),g.TgZ(9,"div",3)(10,"label",4),g._UZ(11,"system-label",7),g.qZA(),g.TgZ(12,"select",8),g.NdJ("ngModelChange",(function(e){return t.fieldvalidationvalue.valuetype=e})),g.TgZ(13,"option",9),g._UZ(14,"system-label",10),g.qZA(),g.TgZ(15,"option",11),g._UZ(16,"system-label",12),g.qZA()()(),g.TgZ(17,"div",13)(18,"label",4)(19,"abbr",14),g._uU(20,"* "),g.qZA(),g._UZ(21,"system-label",15),g.qZA(),g.TgZ(22,"div",16)(23,"select",8),g.NdJ("ngModelChange",(function(e){return t.fieldvalidationvalue.scope=e})),g.TgZ(24,"option",17),g._UZ(25,"system-label",18),g.qZA(),g.TgZ(26,"option",19),g._UZ(27,"system-label",20),g.qZA()()()()(),g.TgZ(28,"div",2)(29,"div",21)(30,"label",4),g._UZ(31,"system-label",22),g.qZA(),g.TgZ(32,"system-input-label",6),g.NdJ("ngModelChange",(function(e){return t.fieldvalidationvalue.label=e})),g.qZA()(),g.TgZ(33,"div",21)(34,"label",4),g._UZ(35,"system-label",23),g.qZA(),g.TgZ(36,"system-input-text",6),g.NdJ("ngModelChange",(function(e){return t.fieldvalidationvalue.package=e})),g.qZA()(),g.TgZ(37,"div",24)(38,"label",4),g._UZ(39,"system-label",25),g.qZA(),g.TgZ(40,"system-input-text",6),g.NdJ("ngModelChange",(function(e){return t.fieldvalidationvalue.version=e})),g.qZA()()(),g.TgZ(41,"label",4),g._UZ(42,"system-label",26),g.qZA(),g.TgZ(43,"system-richtext-editor",6),g.NdJ("ngModelChange",(function(e){return t.fieldvalidationvalue.description=e})),g.qZA()(),g.TgZ(44,"system-modal-footer")(45,"button",27),g.NdJ("click",(function(){return t.close()})),g._UZ(46,"system-label",28),g.qZA(),g.TgZ(47,"button",27),g.NdJ("click",(function(){return t.add()})),g._UZ(48,"system-label",29),g.qZA()()()),2&e&&(g.xp6(8),g.Q6J("ngModel",t.fieldvalidationvalue.enumvalue),g.xp6(4),g.Q6J("ngModel",t.fieldvalidationvalue.valuetype),g.xp6(11),g.Q6J("ngModel",t.fieldvalidationvalue.scope),g.xp6(9),g.Q6J("ngModel",t.fieldvalidationvalue.label),g.xp6(4),g.Q6J("ngModel",t.fieldvalidationvalue.package),g.xp6(4),g.Q6J("ngModel",t.fieldvalidationvalue.version),g.xp6(3),g.Q6J("ngModel",t.fieldvalidationvalue.description))},dependencies:[n.YN,n.Kr,n.EJ,n.JJ,n.On,q.Z,Q.$,T._,it.j,nt.x,lt.p,ot.y,Ds.z],encapsulation:2}),DomainManagerAddValidationValueModal})();var Hs=s(2294),Ks=s(34);let zs=(()=>{class FieldsetManagerFieldsetDetails{constructor(e,t,s,i){this.backend=e,this.metadata=t,this.language=s,this.view=i,this.fieldset={},this.currentFieldSet={},this.currentFieldSetConfig={}}ngOnChanges(e){this.fieldset.isViewMode?this.view.setViewMode():this.view.setEditMode();try{this.metadata.getFieldSetItems(this.fieldset.fieldset).some((e=>{if(e.id==this.fieldset.id)return this.currentFieldSet=this.metadata.getFieldset(e.fieldset),this.currentFieldSetConfig=e.fieldconfig,!0}))}catch(e){this.currentFieldSet={}}}get fieldsetname(){try{let e;return this.metadata.getFieldSetItems(this.fieldset.fieldset).some((t=>{if(t.id==this.fieldset.id)return e=t,!0})),this.metadata.getFieldsetName(e.fieldset)}catch(e){return""}}set fieldsetname(e){}}return FieldsetManagerFieldsetDetails.ɵfac=function(e){return new(e||FieldsetManagerFieldsetDetails)(g.Y36(p.y),g.Y36(h.Pu),g.Y36(f.d),g.Y36(Hs.e))},FieldsetManagerFieldsetDetails.ɵcmp=g.Xpm({type:FieldsetManagerFieldsetDetails,selectors:[["fieldsetmanager-fieldset-details"]],inputs:{fieldset:"fieldset"},features:[g._Bn([Hs.e]),g.TTD],decls:43,vars:13,consts:[[1,"slds-form-element","slds-m-bottom--x-small"],[1,"slds-form-element__label"],["label","LBL_NAME"],[1,"slds-form-element__control"],["type","text",1,"slds-input",3,"disabled","ngModel","ngModelChange"],["type","text","disabled","",1,"slds-input",3,"ngModel"],[1,"slds-form-element","slds-m-vertical--x-small"],["label","LBL_PACKAGE"],["label","LBL_FORMCLASS"],[1,"slds-checkbox"],["name","options","id","cbDirection","value","vertical","type","checkbox",3,"disabled","checked","change"],["for","cbDirection",1,"slds-checkbox__label"],[1,"slds-checkbox_faux"],["label","LBL_VERTICAL"],[1,"slds-form-element","slds-m-top--x-small"],["label","LBL_WIDTH"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0)(1,"label",1),g._UZ(2,"system-label",2),g.qZA(),g.TgZ(3,"div",3)(4,"input",4),g.NdJ("ngModelChange",(function(e){return t.currentFieldSet.name=e})),g.qZA()()(),g.TgZ(5,"div",0)(6,"label",1),g._uU(7,"ID of Parent Fieldset"),g.qZA(),g.TgZ(8,"div",3),g._UZ(9,"input",5),g.qZA()(),g.TgZ(10,"div",0)(11,"label",1),g._uU(12,"ID of Parent Fieldset Element"),g.qZA(),g.TgZ(13,"div",3),g._UZ(14,"input",5),g.qZA()(),g.TgZ(15,"div",0)(16,"label",1),g._uU(17,"ID of Fieldset"),g.qZA(),g.TgZ(18,"div",3),g._UZ(19,"input",5),g.qZA()(),g.TgZ(20,"div",6)(21,"label",1),g._UZ(22,"system-label",7),g.qZA(),g.TgZ(23,"div",3)(24,"input",4),g.NdJ("ngModelChange",(function(e){return t.currentFieldSet.package=e})),g.qZA()()(),g.TgZ(25,"div",6)(26,"label",1),g._UZ(27,"system-label",8),g.qZA(),g.TgZ(28,"div",3)(29,"input",4),g.NdJ("ngModelChange",(function(e){return t.currentFieldSetConfig.formclass=e})),g.qZA()()(),g.TgZ(30,"div",6)(31,"span",9)(32,"input",10),g.NdJ("change",(function(){return t.currentFieldSetConfig.direction="vertical"===t.currentFieldSetConfig.direction?null:"vertical"})),g.qZA(),g.TgZ(33,"label",11),g._UZ(34,"span",12),g.TgZ(35,"span",1),g._UZ(36,"system-label",13),g.qZA()()()(),g.TgZ(37,"div",14)(38,"label",1),g._UZ(39,"system-label",15),g._uU(40," (number of parts, leave blank for 1)"),g.qZA(),g.TgZ(41,"div",3)(42,"input",4),g.NdJ("ngModelChange",(function(e){return t.currentFieldSetConfig.width=e})),g.qZA()()()),2&e&&(g.xp6(4),g.Q6J("disabled",!t.view.isEditMode())("ngModel",t.currentFieldSet.name),g.xp6(5),g.Q6J("ngModel",t.fieldset.fieldset),g.xp6(5),g.Q6J("ngModel",t.fieldset.id),g.xp6(5),g.Q6J("ngModel",t.currentFieldSet.id),g.xp6(5),g.Q6J("disabled",!t.view.isEditMode())("ngModel",t.currentFieldSet.package),g.xp6(5),g.Q6J("disabled",!t.view.isEditMode())("ngModel",t.currentFieldSetConfig.formclass),g.xp6(3),g.Q6J("disabled",!t.view.isEditMode())("checked","vertical"===t.currentFieldSetConfig.direction),g.xp6(10),g.Q6J("disabled",!t.view.isEditMode())("ngModel",t.currentFieldSetConfig.width))},dependencies:[n.Fj,n.JJ,n.On,T._],encapsulation:2}),FieldsetManagerFieldsetDetails})();const Vs=["optionscontainer"];let Ps=(()=>{class WorkbenchConfig{constructor(e,t,s){this.backend=e,this.metadata=t,this.language=s,this.component="",this.configValues={},this.configOptions=[],this.optionsElements=[]}ngOnChanges(e){for(let e of this.optionsElements)e.destroy();this.optionsElements=[],this.configOptions=[];let t=this.metadata.getComponentConfigOptions(this.component);for(let e in t)this.configOptions.push({option:e,type:t[e].type?t[e].type:"string",description:t[e].description?t[e].description:""});for(let e of this.configOptions){let t="";t="WorkbenchConfigOption"+(e.type.charAt(0).toUpperCase()+e.type.slice(1)),this.metadata.checkComponent(t)||(t="WorkbenchConfigOptionDefault"),this.metadata.addComponent(t,this.optionscontainer).subscribe((t=>{this.optionsElements.push(t),t.instance.option=e,t.instance.configValues=this.configValues}))}}}return WorkbenchConfig.ɵfac=function(e){return new(e||WorkbenchConfig)(g.Y36(p.y),g.Y36(h.Pu),g.Y36(f.d))},WorkbenchConfig.ɵcmp=g.Xpm({type:WorkbenchConfig,selectors:[["workbench-config"]],viewQuery:function(e,t){if(1&e&&g.Gf(Vs,7,g.s_b),2&e){let e;g.iGM(e=g.CRH())&&(t.optionscontainer=e.first)}},inputs:{component:"component",configValues:"configValues"},features:[g.TTD],decls:2,vars:0,consts:[["optionscontainer",""]],template:function(e,t){1&e&&g._UZ(0,"div",null,0)},encapsulation:2}),WorkbenchConfig})();function $s(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"system-input-label",49),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.configValues.label=t)})),g.qZA()}if(2&e){const e=g.oxw();g.Q6J("ngModel",e.configValues.label)}}function js(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"input",50),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.configValues.label=t)})),g.qZA()}if(2&e){const e=g.oxw();g.Q6J("ngModel",e.configValues.label)}}function Ws(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",0)(1,"label",1),g._UZ(2,"system-label",51),g.qZA(),g.TgZ(3,"div",6)(4,"input",36),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.configValues.sortfield=t)})),g.qZA()()()}if(2&e){const e=g.oxw();g.xp6(4),g.Q6J("disabled",!e.view.isEditMode())("ngModel",e.configValues.sortfield)}}function Xs(e,t){if(1&e&&(g.TgZ(0,"option"),g._uU(1),g.qZA()),2&e){const e=t.$implicit;g.xp6(1),g.Oqu(e)}}let ei=(()=>{class FieldsetManagerFieldDetails{constructor(e,t,s,i){this.backend=e,this.metadata=t,this.language=s,this.view=i,this.field={},this.currentField={},this.fieldtypes=[],this.component="",this.configValues={},this.fieldtypes=this.metadata.getFieldTypes(),this.fieldtypes.sort(),this.fieldtypes.unshift("")}ngOnChanges(e){this.field.isViewMode?this.view.setViewMode():this.view.setEditMode();try{this.metadata.getFieldSetItems(this.field.fieldset).some((e=>{if(e.id==this.field.id)return this.currentField=e,this.component=this.metadata.getFieldTypeComponent(e.fieldconfig.fieldtype),this.configValues=e.fieldconfig,!0}))}catch(e){this.currentField={}}}get configValuesLabel(){let e=null;return"label"in this.configValues&&null!=this.configValues.label&&(e={name:this.configValues.label}),e}set configValuesLabel(e){this.configValues.label=null!=e?e.name:null}configValuesLabelEmit(e){this.configValuesLabel=e}get InputConfig(){return{option:"name",type:"label",description:""}}getFieldConfig(){if(this.configValues.fieldtype){let e=this.metadata.getFieldTypeComponent(this.configValues.fieldtype),t=this.metadata.getComponentConfigOptions(e),s=[];for(let e in t)s.push(e);return s}return[]}selectFieldType(){this.component=this.metadata.getFieldTypeComponent(this.configValues.fieldtype)}}return FieldsetManagerFieldDetails.ɵfac=function(e){return new(e||FieldsetManagerFieldDetails)(g.Y36(p.y),g.Y36(h.Pu),g.Y36(f.d),g.Y36(Hs.e))},FieldsetManagerFieldDetails.ɵcmp=g.Xpm({type:FieldsetManagerFieldDetails,selectors:[["fieldsetmanager-field-details"]],inputs:{field:"field"},features:[g._Bn([Hs.e]),g.TTD],decls:82,vars:29,consts:[[1,"slds-form-element","slds-m-vertical--xxx-small"],[1,"slds-form-element__label"],["label","LBL_NAME"],[1,"slds-form-element__control","slds-input-has-icon","slds-input-has-icon--right"],["type","text","placeholder","name",1,"slds-input",3,"disabled","ngModel","ngModelChange"],[1,"slds-form-element","slds-m-bottom--x-small"],[1,"slds-form-element__control"],["type","text","disabled","",1,"slds-input",3,"ngModel"],["label","LBL_PACKAGE"],["type","text","placeholder","package",1,"slds-input",3,"disabled","ngModel","ngModelChange"],[1,"slds-form-element","slds-m-vertical--xx-small"],["label","LBL_LABEL"],[3,"ngModel","ngModelChange",4,"ngIf"],["class","slds-input","disabled","",3,"ngModel","ngModelChange",4,"ngIf"],[1,"slds-form-element__legend","slds-form-element__label"],["label","LBL_OPTIONS"],["for","link",1,"slds-checkbox"],["type","checkbox","id","link",3,"disabled","ngModel","ngModelChange"],[1,"slds-checkbox--faux"],["label","LBL_LINK"],["for","default",1,"slds-checkbox"],["type","checkbox","id","default",3,"disabled","ngModel","ngModelChange"],["label","LBL_HIDDEN"],["for","hidelabel",1,"slds-checkbox"],["type","checkbox","id","hidelabel",3,"disabled","ngModel","ngModelChange"],["label","LBL_HIDE_LABEL"],["for","readonly",1,"slds-checkbox"],["type","checkbox","id","readonly",3,"disabled","ngModel","ngModelChange"],["label","LBL_READONLY"],["for","sortable",1,"slds-checkbox"],["type","checkbox","id","sortable",3,"disabled","ngModel","ngModelChange"],["label","LBL_SORTABLE"],["class","slds-form-element slds-m-vertical--xxx-small",4,"ngIf"],["label","LBL_WIDTH"],[1,"slds-grid","slds-gutters_xx-small"],[1,"slds-col","slds-form-element__control","slds-size--3-of-4"],["type","text",1,"slds-input",3,"disabled","ngModel","ngModelChange"],[1,"slds-col","slds-form-element__control","slds-size--1-of-4"],[1,"slds-select_container"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],["value",""],["value","px"],["value","rem"],["value","%"],["label","LBL_REQUIREDMODELSTATE"],["label","LBL_FIELDTYPE"],[1,"slds-select",3,"disabled","ngModel","ngModelChange","change"],[4,"ngFor","ngForOf"],[3,"component","configValues"],[3,"ngModel","ngModelChange"],["disabled","",1,"slds-input",3,"ngModel","ngModelChange"],["label","LBL_SORTFIELD"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0)(1,"label",1),g._UZ(2,"system-label",2),g.qZA(),g.TgZ(3,"div",3)(4,"input",4),g.NdJ("ngModelChange",(function(e){return t.currentField.field=e})),g.qZA()()(),g.TgZ(5,"div",5)(6,"label",1),g._uU(7,"ID"),g.qZA(),g.TgZ(8,"div",6),g._UZ(9,"input",7),g.qZA()(),g.TgZ(10,"div",0)(11,"label",1),g._UZ(12,"system-label",8),g.qZA(),g.TgZ(13,"div",3)(14,"input",9),g.NdJ("ngModelChange",(function(e){return t.currentField.package=e})),g.qZA()()(),g.TgZ(15,"div",10)(16,"label",1),g._UZ(17,"system-label",11),g.qZA(),g.YNc(18,$s,1,1,"system-input-label",12),g.YNc(19,js,1,1,"input",13),g.qZA(),g.TgZ(20,"fieldset",0)(21,"legend",14),g._UZ(22,"system-label",15),g.qZA(),g.TgZ(23,"div",6)(24,"label",16)(25,"input",17),g.NdJ("ngModelChange",(function(e){return t.configValues.link=e})),g.qZA(),g._UZ(26,"span",18),g.TgZ(27,"span",1),g._UZ(28,"system-label",19),g.qZA()(),g.TgZ(29,"label",20)(30,"input",21),g.NdJ("ngModelChange",(function(e){return t.configValues.hidden=e})),g.qZA(),g._UZ(31,"span",18),g.TgZ(32,"span",1),g._UZ(33,"system-label",22),g.qZA()(),g.TgZ(34,"label",23)(35,"input",24),g.NdJ("ngModelChange",(function(e){return t.configValues.hidelabel=e})),g.qZA(),g._UZ(36,"span",18),g.TgZ(37,"span",1),g._UZ(38,"system-label",25),g.qZA()(),g.TgZ(39,"label",26)(40,"input",27),g.NdJ("ngModelChange",(function(e){return t.configValues.readonly=e})),g.qZA(),g._UZ(41,"span",18),g.TgZ(42,"span",1),g._UZ(43,"system-label",28),g.qZA()(),g.TgZ(44,"label",29)(45,"input",30),g.NdJ("ngModelChange",(function(e){return t.configValues.sortable=e})),g.qZA(),g._UZ(46,"span",18),g.TgZ(47,"span",1),g._UZ(48,"system-label",31),g.qZA()()()(),g.YNc(49,Ws,5,2,"div",32),g.TgZ(50,"div",0)(51,"label",1),g._UZ(52,"system-label",33),g._uU(53," (number of parts, leave blank for 1)"),g.qZA(),g.TgZ(54,"div",34)(55,"div",35)(56,"input",36),g.NdJ("ngModelChange",(function(e){return t.configValues.width=e})),g.qZA()(),g.TgZ(57,"div",37)(58,"div",38)(59,"select",39),g.NdJ("ngModelChange",(function(e){return t.configValues.widthdimension=e})),g.TgZ(60,"option",40),g._uU(61,"units"),g.qZA(),g.TgZ(62,"option",41),g._uU(63,"px"),g.qZA(),g.TgZ(64,"option",42),g._uU(65,"rem"),g.qZA(),g.TgZ(66,"option",43),g._uU(67,"%"),g.qZA()()()()()(),g.TgZ(68,"div",0)(69,"label",1),g._UZ(70,"system-label",44),g._uU(71,"if this field is conditional to a specific model state"),g.qZA(),g.TgZ(72,"div",6)(73,"input",36),g.NdJ("ngModelChange",(function(e){return t.configValues.requiredmodelstate=e})),g.qZA()()(),g.TgZ(74,"div",0)(75,"label",1),g._UZ(76,"system-label",45),g.qZA(),g.TgZ(77,"div",6)(78,"div",38)(79,"select",46),g.NdJ("ngModelChange",(function(e){return t.configValues.fieldtype=e}))("change",(function(){return t.selectFieldType()})),g.YNc(80,Xs,2,1,"option",47),g.qZA()()()(),g._UZ(81,"workbench-config",48)),2&e&&(g.xp6(4),g.Q6J("disabled",!t.view.isEditMode())("ngModel",t.currentField.field),g.xp6(5),g.Q6J("ngModel",t.currentField.id),g.xp6(5),g.Q6J("disabled",!t.view.isEditMode())("ngModel",t.currentField.package),g.xp6(4),g.Q6J("ngIf",t.view.isEditMode()),g.xp6(1),g.Q6J("ngIf",!t.view.isEditMode()),g.xp6(6),g.Q6J("disabled",!t.view.isEditMode())("ngModel",t.configValues.link),g.xp6(5),g.Q6J("disabled",!t.view.isEditMode())("ngModel",t.configValues.hidden),g.xp6(5),g.Q6J("disabled",!t.view.isEditMode())("ngModel",t.configValues.hidelabel),g.xp6(5),g.Q6J("disabled",!t.view.isEditMode())("ngModel",t.configValues.readonly),g.xp6(5),g.Q6J("disabled",!t.view.isEditMode())("ngModel",t.configValues.sortable),g.xp6(4),g.Q6J("ngIf",t.configValues.sortable),g.xp6(7),g.Q6J("disabled",!t.view.isEditMode())("ngModel",t.configValues.width),g.xp6(3),g.Q6J("disabled",!t.view.isEditMode())("ngModel",t.configValues.widthdimension),g.xp6(14),g.Q6J("disabled",!t.view.isEditMode())("ngModel",t.configValues.requiredmodelstate),g.xp6(6),g.Q6J("disabled",!t.view.isEditMode())("ngModel",t.configValues.fieldtype),g.xp6(1),g.Q6J("ngForOf",t.fieldtypes),g.xp6(1),g.Q6J("component",t.component)("configValues",t.configValues))},dependencies:[i.sg,i.O5,n.YN,n.Kr,n.Fj,n.Wl,n.EJ,n.JJ,n.On,Q.$,T._,Ps],encapsulation:2}),FieldsetManagerFieldDetails})();function ti(e,t){if(1&e&&(g.TgZ(0,"option",19),g._uU(1),g.qZA()),2&e){const e=t.$implicit;g.Q6J("value",e),g.xp6(1),g.hij("",e," ")}}function si(e,t){if(1&e&&(g.TgZ(0,"option",22),g._uU(1),g.qZA()),2&e){const e=t.$implicit;g.Q6J("ngValue",e.id),g.xp6(1),g.hij("",e.name," ")}}function ii(e,t){if(1&e&&(g.TgZ(0,"optgroup",20),g.YNc(1,si,2,2,"option",21),g.qZA()),2&e){const e=g.oxw();g.Q6J("label","custom"+e.language.getLabel("LBL_FIELDSET")),g.xp6(1),g.Q6J("ngForOf",e.getFieldSets("custom"))}}function ni(e,t){if(1&e&&(g.TgZ(0,"option",22),g._uU(1),g.qZA()),2&e){const e=t.$implicit;g.Q6J("ngValue",e.id),g.xp6(1),g.hij("",e.name," ")}}function li(e,t){if(1&e&&(g.TgZ(0,"optgroup",20),g.YNc(1,ni,2,2,"option",21),g.qZA()),2&e){const e=g.oxw();g.Q6J("label","global"+e.language.getLabel("LBL_FIELDSET")),g.xp6(1),g.Q6J("ngForOf",e.getFieldSets("global"))}}function oi(e,t){if(1&e&&g._UZ(0,"system-custom-icon",60),2&e){const e=g.oxw().$implicit,t=g.oxw(2);g.Q6J("icon",t.getDisplayType(e))}}const ai=function(e){return{"slds-theme--shade":e}};function di(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"li",50),g.NdJ("click",(function(){const t=g.CHM(e).$implicit,s=g.oxw(2);return g.KtG(s.selectItem(t,s.getDisplayType(t)))})),g.TgZ(1,"div",51),g.YNc(2,oi,1,1,"system-custom-icon",52),g.TgZ(3,"div",53)(4,"a",54),g._uU(5),g.qZA()(),g.TgZ(6,"div",55)(7,"button",42),g.NdJ("click",(function(){const t=g.CHM(e).$implicit,s=g.oxw(2);return g.KtG(s.addItem(t.item.fieldset))})),g._UZ(8,"system-button-icon",43),g.qZA(),g.TgZ(9,"button",56),g.NdJ("click",(function(){const t=g.CHM(e).$implicit,s=g.oxw(2);return g.KtG(s.copy(t.item.fieldset,t))})),g._UZ(10,"system-button-icon",43),g.qZA(),g.TgZ(11,"button",57),g.NdJ("click",(function(){const t=g.CHM(e).$implicit,s=g.oxw(2);return g.KtG(s.unlinkItem(t))})),g._UZ(12,"system-button-icon",43),g.qZA(),g.TgZ(13,"button",58),g.NdJ("click",(function(){const t=g.CHM(e).$implicit,s=g.oxw(2);return g.KtG(s.moveDown(t))})),g._UZ(14,"system-button-icon",43),g.qZA(),g.TgZ(15,"button",59),g.NdJ("click",(function(){const t=g.CHM(e).$implicit,s=g.oxw(2);return g.KtG(s.moveUp(t))})),g._UZ(16,"system-button-icon",43),g.qZA()()()()}if(2&e){const e=t.$implicit,s=g.oxw(2);g.Q6J("ngClass",g.VKq(14,ai,s.isSelected(e.id))),g.uIk("aria-level",e.level),g.xp6(2),g.Q6J("ngIf",""!=s.getDisplayType(e)),g.xp6(3),g.Oqu(s.getDisplayName(e)),g.xp6(2),g.Q6J("disabled",!s.view.isEditMode()||"field"==e.type||e.customModeGlobalField),g.xp6(1),g.Q6J("icon","new"),g.xp6(1),g.Q6J("disabled",!s.view.isEditMode()||"field"==e.type),g.xp6(1),g.Q6J("icon","copy"),g.xp6(1),g.Q6J("disabled",!s.view.isEditMode()||"global"==e.parentScope&&"field"==e.type),g.xp6(1),g.Q6J("icon","remove_link"),g.xp6(1),g.Q6J("disabled",!s.view.isEditMode()||e.index+1==e.count||e.customModeGlobalField),g.xp6(1),g.Q6J("icon","down"),g.xp6(1),g.Q6J("disabled",!s.view.isEditMode()||0==e.index||e.customModeGlobalField),g.xp6(1),g.Q6J("icon","up")}}function ri(e,t){if(1&e&&g._UZ(0,"fieldsetmanager-fieldset-details",61),2&e){const e=g.oxw(2);g.Q6J("fieldset",e.selectedItem)}}function ci(e,t){if(1&e&&g._UZ(0,"fieldsetmanager-field-details",62),2&e){const e=g.oxw(2);g.Q6J("field",e.selectedItem)}}function gi(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",23)(1,"div",24)(2,"div",25)(3,"div",26)(4,"label",4),g._UZ(5,"system-label",27),g.qZA(),g.TgZ(6,"div",28),g._UZ(7,"system-utility-icon",29)(8,"input",30),g.qZA()(),g.TgZ(9,"div",26)(10,"label",4),g._UZ(11,"system-label",31),g.qZA(),g.TgZ(12,"div",32)(13,"input",33),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.currentFieldSetName=t)})),g.qZA()()(),g.TgZ(14,"div",26)(15,"label",4),g._UZ(16,"system-label",34),g.qZA(),g.TgZ(17,"div",32)(18,"input",33),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.currentFieldSetPackage=t)})),g.qZA()()(),g.TgZ(19,"div",26)(20,"label",4),g._UZ(21,"system-label",35),g.qZA(),g.TgZ(22,"div",32),g._UZ(23,"input",30),g.qZA()()()(),g.TgZ(24,"div",36)(25,"div",37)(26,"div",38)(27,"ul",39),g.YNc(28,di,17,16,"li",40),g.qZA()(),g.TgZ(29,"div",41)(30,"button",42),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw();return g.KtG(t.addItem())})),g._UZ(31,"system-button-icon",43),g.qZA()()(),g.TgZ(32,"div",44),g.YNc(33,ri,1,1,"fieldsetmanager-fieldset-details",45),g.YNc(34,ci,1,1,"fieldsetmanager-field-details",46),g.qZA()(),g.TgZ(35,"div",47)(36,"button",48),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw();return g.KtG(t.saveChanges())})),g._UZ(37,"system-label",49),g.qZA()()()}if(2&e){const e=g.oxw();g.xp6(7),g.Q6J("icon","global"==e.fieldSetType?"world":"user"),g.xp6(1),g.Q6J("ngModel",e.fieldSetType),g.xp6(5),g.Q6J("disabled",!e.view.isEditMode())("ngModel",e.currentFieldSetName),g.xp6(5),g.Q6J("disabled",!e.view.isEditMode())("ngModel",e.currentFieldSetPackage),g.xp6(5),g.Q6J("ngModel",e.currentFieldSet),g.xp6(5),g.Q6J("ngForOf",e.currentFieldSetItems),g.xp6(2),g.Q6J("disabled",!e.view.isEditMode()),g.xp6(1),g.Q6J("icon","new"),g.xp6(2),g.Q6J("ngIf","fieldset"==e.selectedItem.type),g.xp6(1),g.Q6J("ngIf","field"==e.selectedItem.type),g.xp6(2),g.Q6J("disabled",!e.view.isEditMode())}}let ui=(()=>{class FieldsetManager{constructor(e,t,s,i,n,l,o,a,d,r){this.backend=e,this.metadata=t,this.language=s,this.modelutilities=i,this.broadcast=n,this.toast=l,this.modalservice=o,this.configurationService=a,this.view=d,this.modal=r,this.edit_mode="custom",this.allowBarButtons=!0,this.crNoneActive=!1,this.change_request_required=!1,this.modules=[],this.currentModule="*",this.currentFieldSet="",this.currentFieldSetItems=[],this.selectedItem={type:"",fieldset:"",id:"",isViewMode:!1},this.showFieldSetDetails=!1,this.modules=this.metadata.getModules().sort(),this.checkMode()}get currentFieldSetName(){return this.metadata.getFieldset(this.currentFieldSet).name}set currentFieldSetName(e){this.metadata.setFieldset(this.currentFieldSet,{name:e,package:this.currentFieldSetPackage})}get currentFieldSetPackage(){return this.metadata.getFieldset(this.currentFieldSet).package}set currentFieldSetPackage(e){this.metadata.setFieldset(this.currentFieldSet,{name:this.currentFieldSetName,package:e})}get showDetailIcon(){return this.showFieldSetDetails?"chevronup":"chevrondown"}toggleDetail(){this.showFieldSetDetails=!this.showFieldSetDetails}get fieldSetType(){return this.currentFieldSet?this.metadata.getFieldset(this.currentFieldSet).type:""}getFieldSets(e){if(e){let t=[],s=this.metadata.getFieldSets(this.currentModule);for(let i of s)i.type==e&&t.push(i);return t}return this.metadata.getFieldSets(this.currentModule)}checkMode(){this.edit_mode=this.configurationService.getCapabilityConfig("core").edit_mode,this.change_request_required=!!this.configurationService.getCapabilityConfig("systemdeployment").change_request_required,"none"!=this.edit_mode&&"custom"!=this.edit_mode&&"all"!=this.edit_mode&&(this.edit_mode="custom"),this.change_request_required?this.backend.getRequest("module/SystemDeploymentCRs/active").subscribe((e=>{""==e.id?(this.setNoneMode(),this.crNoneActive=!0,this.toast.sendToast(this.language.getLabel("LBL_ACTIVATE_CR_WARNING"),"warning",null,3)):(this.crNoneActive=!1,"all"==this.edit_mode?this.setAllMode():"custom"==this.edit_mode?this.setCustomMode():this.setNoneMode())})):(this.crNoneActive=!1,"all"==this.edit_mode?this.setAllMode():"custom"==this.edit_mode?this.setCustomMode():this.setNoneMode())}setNoneMode(){this.view.setViewMode(),this.allowBarButtons=!1}setCustomMode(){"custom"==this.fieldSetType?this.view.setEditMode():this.view.setViewMode()}setAllMode(){this.view.setEditMode()}loadCurrentFieldset(){this.selectedItem={type:"",fieldset:"",id:""},this.checkMode(),this.currentFieldSetItems=[],this.addFieldSetItems(this.currentFieldSet,0,this.fieldSetType)}addItem(e=""){this.modalservice.openModal("FieldsetManagerAddDialog").subscribe((t=>{t.instance.metadata=this.metadata,t.instance.module=this.currentModule,t.instance.fieldsettype=this.fieldSetType,t.instance.edit_mode=this.edit_mode,t.instance.parent=e||this.currentFieldSet,t.instance.closedialog.subscribe((e=>{e&&this.loadCurrentFieldset()}))}))}unlinkItem(e){this.metadata.removeFieldsetItem(e.fieldset,e.item)&&(this.selectedItem={type:"",fieldset:"",id:""},this.loadCurrentFieldset())}editFieldset(){this.modalservice.openModal("FieldsetManagerEditDialog").subscribe((e=>{e.instance.fieldset=this.currentFieldSet,e.instance.edit_mode=this.edit_mode,e.instance.closedialog.subscribe((e=>{if(!1!==e){if(""!=this.currentFieldSet)this.metadata.setFieldset(this.currentFieldSet,{name:e.name,type:e.type});else{let t=this.modelutilities.generateGuid();this.metadata.addFieldset(t,this.currentModule,e.name,e.type),this.currentFieldSet=t}this.checkMode()}}))}))}addFieldset(){this.currentFieldSet="",this.currentFieldSetItems=[],this.editFieldset()}reset(){this.currentFieldSet="",this.currentFieldSetItems=[],this.selectedItem={type:"",fieldset:"",id:""}}addFieldSetItems(e,t=0,s="global"){let i=this.metadata.getFieldSetItems(e);i.forEach(((n,l)=>{let o=!1;if("custom"!=this.edit_mode||this.crNoneActive?("none"==this.edit_mode||this.crNoneActive)&&(o=!0):"global"==s&&(o=!0),n.field){let a={level:t+1,type:"field",fieldset:e,id:n.id,name:n.field,index:l,count:i.length,item:n,parentScope:s,customModeGlobalField:o};this.currentFieldSetItems.push(a)}else if(n.fieldset){let o=!1;if("custom"!=this.edit_mode||this.crNoneActive)("none"==this.edit_mode||this.crNoneActive)&&(o=!0);else{let e=this.metadata.getFieldset(n.fieldset);e&&"global"==e.type&&(o=!0)}let a={level:t+1,type:"fieldset",fieldset:e,id:n.id,name:this.metadata.getFieldsetName(n.fieldset),index:l,count:i.length,item:n,parentScope:s,customModeGlobalField:o};this.currentFieldSetItems.push(a),this.addFieldSetItems(n.fieldset,t+1,this.getDisplayType(a))}}))}getDisplayName(e){return"field"==e.type?e.item.field:"fieldset"==e.type?this.metadata.getFieldsetName(e.item.fieldset):void 0}getDisplayType(e){if("fieldset"==e.type){let t=this.metadata.getFieldset(e.item.fieldset);if(t)return t.type}}isSelected(e){return e==this.selectedItem.id}selectItem(e,t){this.selectedItem={type:e.type,fieldset:e.fieldset,id:e.id,isViewMode:e.customModeGlobalField}}moveDown(e){let t=this.metadata.getFieldSetItems(e.fieldset),s=0;if(t.some(((t,i)=>{if(t.id==e.id)return s=i,!0})),s<t.length-1){let e=t.splice(s,1);t.splice(s+1,0,e[0]);let i=0;for(let e of t)e.sequence=i,i++;this.loadCurrentFieldset()}}moveUp(e){let t=this.metadata.getFieldSetItems(e.fieldset),s=0;if(t.some(((t,i)=>{if(t.id==e.id)return s=i,!0})),s>0){let e=t.splice(s,1);t.splice(s-1,0,e[0]);let i=0;for(let e of t)e.sequence=i,i++;this.loadCurrentFieldset()}}allowEdit(){return""!=this.currentFieldSet}findTable(e){let t;return t="global"==e?{fieldsetTable:"sysuifieldsets",itemsTable:"sysuifieldsetsitems"}:{fieldsetTable:"sysuicustomfieldsets",itemsTable:"sysuicustomfieldsetsitems"},t}copy(e=this.currentFieldSet,t=null){this.modalservice.openModal("FieldsetManagerCopyDialog").subscribe((s=>{s.instance.fieldset=e,s.instance.metaFieldSets=this.metadata.getAllFieldsets(),s.instance.edit_mode=this.edit_mode,s.instance.closedialog.subscribe((e=>{this.modal.openModal("SystemLoadingModal").subscribe((s=>{let i={...e.fieldset},n=e.module,l=e.type,o=e.name;"*"==n&&(n="global");let a={module:n,type:l,name:o};this.backend.getRequest("configuration/spiceui/core/fieldsetalreadyexists",a).subscribe((e=>{if(0==e){let e=this.findTable(l);i.module=n,"global"==n&&(i.module="*"),i.name=o;let a=this.modelutilities.generateGuid();i.id=a;let d=[];for(let e of i.items){let t={...e};t.fieldconfig={...e.fieldconfig},t.id=this.modelutilities.generateGuid(),t.fieldset_id=a,d.push(t)}delete i.items,delete i.type,this.backend.postRequest("configuration/configurator/"+e.fieldsetTable+"/"+i.id,null,{config:i}).subscribe((n=>{let o=0;i.items=d,i.type=l;for(let n of d)this.backend.postRequest("configuration/configurator/"+e.itemsTable+"/"+n.id,null,{config:n}).subscribe((e=>{if(o++,o==d.length)if(t){t.item.fieldset=i.id;let e=this.findTable(t.parentScope);this.backend.postRequest("configuration/configurator/"+e.itemsTable+"/"+t.id,null,{config:t.item}).subscribe((e=>{s.instance.self.destroy(),this.toast.sendToast("saved!"),this.metadata.addFieldset(i.id,i.module,i.name,l,d)}),(e=>{s.instance.self.destroy(),this.toast.sendAlert("saving link failed!, "+n.id),console.error(e)}))}else s.instance.self.destroy(),this.toast.sendToast("saved!"),this.currentModule=i.module,this.metadata.addFieldset(i.id,i.module,i.name,l,d),this.currentFieldSet=i.id,this.currentFieldSetItems=d,this.selectedItem={},this.currentFieldSetName=i.name,this.loadCurrentFieldset()}),(e=>{s.instance.self.destroy(),this.toast.sendAlert("saving failed!, "+n.id),console.error(e)}))}),(e=>{s.instance.self.destroy(),this.toast.sendAlert("saving failed!"),console.error(e)}))}else s.instance.self.destroy(),this.toast.sendAlert("Fieldset already exists!")}))}))}))}))}saveChanges(){this.modal.openModal("SystemLoadingModal").subscribe((e=>{this.backend.getRequest("configuration/spiceui/core/fieldsets").subscribe((t=>{let s=this.metadata.getRawFieldSets(),i={},n={},l={};for(let e in s)t.fieldsets[e]?(JSON.stringify(s[e])!==JSON.stringify(t.fieldsets[e])&&(n[e]=s[e]),delete t.fieldsets[e]):i[e]=s[e];l=t.fieldsets;let o={add:i,update:n,delete:l};this.backend.postRequest("configuration/spiceui/core/fieldsets",{},o).subscribe((t=>{this.broadcast.broadcastMessage("metadata.updatefieldsets",o),e.instance.self.destroy(),this.toast.sendToast("changes saved")}))}))}))}get getAllowCopyButton(){return!!this.currentFieldSet&&this.allowBarButtons}}return FieldsetManager.ɵfac=function(e){return new(e||FieldsetManager)(g.Y36(p.y),g.Y36(h.Pu),g.Y36(f.d),g.Y36(b.A),g.Y36(gs.f),g.Y36(y.A),g.Y36(M.o),g.Y36(x.C),g.Y36(Hs.e),g.Y36(M.o))},FieldsetManager.ɵcmp=g.Xpm({type:FieldsetManager,selectors:[["ng-component"]],features:[g._Bn([Hs.e])],decls:28,vars:12,consts:[["titlelabel","LBL_FIELDSET_MANAGER"],[1,"slds-p-around--small","slds-border--bottom"],[1,"slds-grid","slds-grid--vertical-align-center","slds-form--inline"],[1,"slds-form-element"],[1,"slds-form-element__label"],["label","LBL_MODULE"],[1,"slds-form-element__control",2,"min-width","250px"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","disabled","ngModelChange","change"],["value","*"],[3,"value",4,"ngFor","ngForOf"],["label","LBL_FIELDSET"],[3,"label",4,"ngIf"],[1,"slds-form-element","slds-col--bump-left"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_COPY"],["type","button",1,"slds-button","slds-button_icon","slds-button_icon-border-filled",3,"disabled","click"],[3,"icon","size"],["class","slds-theme--default",4,"ngIf"],[3,"value"],[3,"label"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"],[1,"slds-theme--default"],[1,"slds-p-around--small","slds-border--bottom","slds-theme--default"],[1,"slds-grid","slds-grid--vertical-align-end"],[1,"slds-form-element","slds-p-right--x-small","slds-size--1-of-4"],["label","LBL_SCOPE"],[1,"slds-form-element__control","slds-input-has-icon","slds-input-has-icon_left"],["addclasses","slds-icon slds-input__icon slds-input__icon_left slds-icon-text-default",3,"icon"],["type","text","disabled","",1,"slds-input",3,"ngModel"],["label","LBL_NAME"],[1,"slds-form-element__control"],["type","text",1,"slds-input",3,"disabled","ngModel","ngModelChange"],["label","LBL_PACKAGE"],["label","LBL_ID"],[1,"slds-grid"],["system-to-bottom","","marginBottom","57",1,"slds-size--3-of-5","slds-p-horizontal--small","slds-p-top--x-small","slds-border--right"],["role","application",1,"slds-tree_container",2,"max-width","none"],["role","tree","aria-labelledby","treeheading",1,"slds-tree"],["role","treeitem",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"slds-p-around--small","slds-align--absolute-center","slds-border--top","slds-m-top--small"],["title","add item",1,"slds-button","slds-button--icon",3,"disabled","click"],[3,"icon"],[1,"slds-size--2-of-5","slds-p-horizontal--small","slds-p-vertical--x-small"],[3,"fieldset",4,"ngIf"],[3,"field",4,"ngIf"],[1,"slds-text-align--right","slds-p-around--small","slds-border--top"],["type","button",1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_SAVE"],["role","treeitem",3,"ngClass","click"],[1,"slds-tree__item","slds-grid","slds-grid--vertical-align-center"],["size","x-small",3,"icon",4,"ngIf"],[2,"white-space","nowrap"],["href","javascript:void(0);","role","presentation",1,"slds-truncate"],[1,"slds-col_bump-left"],["title","customize",1,"slds-button","slds-button--icon",3,"disabled","click"],["title","unlink item",1,"slds-button","slds-button--icon","||","customModeGlobalField",3,"disabled","click"],["title","move down",1,"slds-button","slds-button--icon",3,"disabled","click"],["title","move up",1,"slds-button","slds-button--icon",3,"disabled","click"],["size","x-small",3,"icon"],[3,"fieldset"],[3,"field"]],template:function(e,t){1&e&&(g._UZ(0,"workbench-header",0),g.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"label",4),g._UZ(5,"system-label",5),g.qZA(),g.TgZ(6,"div",6)(7,"div",7)(8,"select",8),g.NdJ("ngModelChange",(function(e){return t.currentModule=e}))("change",(function(){return t.reset()})),g.TgZ(9,"option",9),g._uU(10,"*"),g.qZA(),g.YNc(11,ti,2,2,"option",10),g.qZA()()()(),g.TgZ(12,"div",3)(13,"label",4),g._UZ(14,"system-label",11),g.qZA(),g.TgZ(15,"div",6)(16,"div",7)(17,"select",8),g.NdJ("ngModelChange",(function(e){return t.currentFieldSet=e}))("change",(function(){return t.loadCurrentFieldset()})),g._UZ(18,"option"),g.YNc(19,ii,2,2,"optgroup",12),g.YNc(20,li,2,2,"optgroup",12),g.qZA()()()(),g.TgZ(21,"div",13)(22,"button",14),g.NdJ("click",(function(){return t.copy()})),g.TgZ(23,"span"),g._UZ(24,"system-label",15),g.qZA()(),g.TgZ(25,"button",16),g.NdJ("click",(function(){return t.addFieldset()})),g._UZ(26,"system-utility-icon",17),g.qZA()()()(),g.YNc(27,gi,38,13,"div",18)),2&e&&(g.xp6(8),g.Q6J("ngModel",t.currentModule)("disabled",0==t.modules.length),g.xp6(3),g.Q6J("ngForOf",t.modules),g.xp6(6),g.Q6J("ngModel",t.currentFieldSet)("disabled",0==t.getFieldSets().length),g.xp6(2),g.Q6J("ngIf",t.getFieldSets("custom").length>0),g.xp6(1),g.Q6J("ngIf",t.getFieldSets("global").length>0),g.xp6(2),g.Q6J("disabled",!t.allowBarButtons),g.xp6(3),g.Q6J("disabled",!t.allowBarButtons),g.xp6(1),g.Q6J("icon","add")("size","x-small"),g.xp6(1),g.Q6J("ngIf",t.currentFieldSet))},dependencies:[i.mk,i.sg,i.O5,n.YN,n.Kr,n.Fj,n.EJ,n.JJ,n.On,A.J,Ks.$,T._,u.r,k.H,zs,ei,We],encapsulation:2}),FieldsetManager})();var mi=s(6659);function pi(e,t){if(1&e&&(g.TgZ(0,"option"),g._uU(1),g.qZA()),2&e){const e=t.$implicit;g.xp6(1),g.Oqu(e)}}function hi(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",27)(1,"label",13),g._UZ(2,"system-label",28),g.qZA(),g.TgZ(3,"div",29)(4,"div",30)(5,"select",31),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.addName=t)})),g.YNc(6,pi,2,1,"option",32),g.qZA()()(),g.TgZ(7,"div",33)(8,"label",13),g._UZ(9,"system-label",34),g.qZA(),g.TgZ(10,"div",29)(11,"input",35),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.addName=t)})),g.qZA()()()()}if(2&e){const e=g.oxw();g.xp6(5),g.Q6J("ngModel",e.addName),g.xp6(1),g.Q6J("ngForOf",e.getFieldNames()),g.xp6(5),g.Q6J("ngModel",e.addName)}}function fi(e,t){1&e&&(g.TgZ(0,"option",40),g._UZ(1,"system-label",41),g.qZA())}function bi(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",27)(1,"label",13),g._UZ(2,"system-label",36),g.qZA(),g.TgZ(3,"div",29)(4,"div",30)(5,"select",31),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.fieldsettype=t)})),g.YNc(6,fi,2,0,"option",37),g.TgZ(7,"option",38),g._UZ(8,"system-label",39),g.qZA()()()(),g.TgZ(9,"div",33)(10,"label",13),g._UZ(11,"system-label",34),g.qZA(),g.TgZ(12,"div",29)(13,"input",35),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.addName=t)})),g.qZA()()()()}if(2&e){const e=g.oxw();g.xp6(5),g.Q6J("ngModel",e.fieldsettype),g.xp6(1),g.Q6J("ngIf","all"==e.edit_mode),g.xp6(7),g.Q6J("ngModel",e.addName)}}function _i(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",27)(1,"label",13),g._UZ(2,"system-label",42),g.qZA(),g.TgZ(3,"div",29)(4,"system-input-fieldset",43),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.addFieldset=t)})),g.qZA()()()}if(2&e){const e=g.oxw();g.xp6(4),g.Q6J("ngModel",e.addFieldset)}}let Zi=(()=>{class FieldsetManagerAddDialog{constructor(e,t,s,i){this.backend=e,this.language=t,this.modelutilities=s,this.metadata=i,this.closedialog=new g.vpe,this.module="*",this.parent="",this.edit_mode="",this.addType="fieldsetadd",this.addName="",this.addFieldset="",this.fieldsettype="custom",this.moduleFields=[]}ngOnInit(){this.module&&"*"!=this.module&&(this.moduleFields=this.metadata.getModuleFields(this.module))}closeDialog(){this.self.destroy()}onModalEscX(){this.closeDialog()}add(){switch(this.addType){case"fieldsetadd":let e=this.modelutilities.generateGuid();this.metadata.addFieldset(e,this.module,this.addName,this.fieldsettype),this.metadata.addFieldsetToFieldset(this.modelutilities.generateGuid(),this.parent,e);break;case"fieldsetselect":this.metadata.addFieldsetToFieldset(this.modelutilities.generateGuid(),this.parent,this.addFieldset);break;case"field":this.modelutilities.generateGuid();this.metadata.addFieldToFieldset(this.modelutilities.generateGuid(),this.parent,this.addName)}this.closedialog.emit(!0),this.self.destroy()}getFieldNames(){let e=[];for(let t in this.moduleFields)e.push(t);return e.sort(),e}get fieldsets(){return this.metadata.getFieldSets()}}return FieldsetManagerAddDialog.ɵfac=function(e){return new(e||FieldsetManagerAddDialog)(g.Y36(p.y),g.Y36(f.d),g.Y36(b.A),g.Y36(h.Pu))},FieldsetManagerAddDialog.ɵcmp=g.Xpm({type:FieldsetManagerAddDialog,selectors:[["fieldsetmanager-add-dialog"]],inputs:{module:"module",parent:"parent",edit_mode:"edit_mode"},outputs:{closedialog:"closedialog"},decls:35,vars:8,consts:[["role","dialog","tabindex","-1","aria-labelledby","header43",1,"slds-modal","slds-fade-in-open"],[1,"slds-modal__container"],[1,"slds-modal__header","slds-theme--shade"],["title","Close",1,"slds-button","slds-modal__close","slds-button--icon-inverse",3,"click"],[3,"icon","size"],["id","header43",1,"slds-text-heading--medium"],["label","LBL_ADD_ITEM"],[1,"slds-modal__content","slds-p-around--medium"],[1,"slds-grid","slds-col--bump-left"],[1,"slds-radio"],["type","radio","name","addType","value","fieldsetadd","id","fieldsetaddradio",3,"ngModel","ngModelChange"],["for","fieldsetaddradio",1,"slds-radio__label"],[1,"slds-radio_faux"],[1,"slds-form-element__label"],["label","LBL_ADD_FIELDSET"],["type","radio","name","addType","value","fieldsetselect","id","fieldsetselectradio",3,"ngModel","ngModelChange"],["for","fieldsetselectradio",1,"slds-radio__label"],["label","LBL_SELECT_FIELDSET"],["type","radio","name","addType","value","field","id","fieldradio",3,"ngModel","ngModelChange"],["for","fieldradio",1,"slds-radio__label"],["label","LBL_FIELD"],["class","slds-form-element",4,"ngIf"],[1,"slds-modal__footer"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_ADD"],[1,"slds-form-element"],["label","LBL_FIELDNAME"],[1,"slds-form-element__control"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],[1,"slds-form-element","slds-m-top--small"],["label","LBL_ITEM_NAME"],["type","text","placeholder","name",1,"slds-input",3,"ngModel","ngModelChange"],["label","LBL_SCOPE"],["value","global",4,"ngIf"],["value","custom"],["label","LBL_CUSTOM"],["value","global"],["label","LBL_GLOBAL"],["label","LBL_FIELDSET"],[3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),g.NdJ("click",(function(){return t.closeDialog()})),g._UZ(4,"system-button-icon",4),g.qZA(),g.TgZ(5,"h2",5),g._UZ(6,"system-label",6),g.qZA()(),g.TgZ(7,"div",7)(8,"div",8)(9,"span",9)(10,"input",10),g.NdJ("ngModelChange",(function(e){return t.addType=e})),g.qZA(),g.TgZ(11,"label",11),g._UZ(12,"span",12),g.TgZ(13,"span",13),g._UZ(14,"system-label",14),g.qZA()()(),g.TgZ(15,"span",9)(16,"input",15),g.NdJ("ngModelChange",(function(e){return t.addType=e})),g.qZA(),g.TgZ(17,"label",16),g._UZ(18,"span",12),g.TgZ(19,"span",13),g._UZ(20,"system-label",17),g.qZA()()(),g.TgZ(21,"span",9)(22,"input",18),g.NdJ("ngModelChange",(function(e){return t.addType=e})),g.qZA(),g.TgZ(23,"label",19),g._UZ(24,"span",12),g.TgZ(25,"span",13),g._UZ(26,"system-label",20),g.qZA()()()(),g.YNc(27,hi,12,3,"div",21),g.YNc(28,bi,14,3,"div",21),g.YNc(29,_i,5,1,"div",21),g.qZA(),g.TgZ(30,"div",22)(31,"button",23),g.NdJ("click",(function(){return t.closeDialog()})),g._UZ(32,"system-label",24),g.qZA(),g.TgZ(33,"button",25),g.NdJ("click",(function(){return t.add()})),g._UZ(34,"system-label",26),g.qZA()()()()),2&e&&(g.xp6(4),g.Q6J("icon","close")("size","large"),g.xp6(6),g.Q6J("ngModel",t.addType),g.xp6(6),g.Q6J("ngModel",t.addType),g.xp6(6),g.Q6J("ngModel",t.addType),g.xp6(5),g.Q6J("ngIf","field"==t.addType),g.xp6(1),g.Q6J("ngIf","fieldsetadd"==t.addType),g.xp6(1),g.Q6J("ngIf","fieldsetselect"==t.addType))},dependencies:[i.sg,i.O5,n.YN,n.Kr,n.Fj,n.EJ,n._,n.JJ,n.On,A.J,mi.a,T._],encapsulation:2}),FieldsetManagerAddDialog})();function yi(e,t){1&e&&(g.TgZ(0,"option",24),g._UZ(1,"system-label",25),g.qZA())}let Mi=(()=>{class FieldsetManagerEditDialog{constructor(e,t,s,i,n){this.backend=e,this.metadata=t,this.language=s,this.modelutilities=i,this.configurationService=n,this.fieldset="",this.edit_mode="",this.closedialog=new g.vpe,this.fieldsetname="",this.fieldsettype="",this.adding=!1,this.globalEdit=!1,this.modalTitle="",this.modalTitle=this.language.getAppLanglabel("LBL_EDIT")}ngOnInit(){this.fieldset?(this.fieldsetname=this.metadata.getFieldsetName(this.fieldset),this.fieldsettype=this.metadata.getFieldset(this.fieldset).type,this.adding=!1):(this.modalTitle=this.language.getAppLanglabel("LBL_ADD"),this.fieldsettype="custom",this.adding=!0)}closeDialog(){this.self.destroy()}onModalEscX(){this.closeDialog()}add(){this.closedialog.emit({name:this.fieldsetname,type:this.fieldsettype}),this.self.destroy()}}return FieldsetManagerEditDialog.ɵfac=function(e){return new(e||FieldsetManagerEditDialog)(g.Y36(p.y),g.Y36(h.Pu),g.Y36(f.d),g.Y36(b.A),g.Y36(x.C))},FieldsetManagerEditDialog.ɵcmp=g.Xpm({type:FieldsetManagerEditDialog,selectors:[["fieldsetmanager-edit-dialog"]],inputs:{fieldset:"fieldset",edit_mode:"edit_mode"},outputs:{closedialog:"closedialog"},decls:27,vars:8,consts:[["role","dialog","tabindex","-1","aria-labelledby","header43",1,"slds-modal","slds-fade-in-open"],[1,"slds-modal__container"],[1,"slds-modal__header","slds-theme--shade"],["title","Close",1,"slds-button","slds-modal__close","slds-button--icon-inverse",3,"click"],[3,"icon","size"],["id","header43",1,"slds-text-heading--medium"],[1,"slds-modal__content","slds-p-around--medium"],[1,"slds-form-element","slds-m-top--small"],[1,"slds-form-element__label"],["label","LBL_ITEM_NAME"],[1,"slds-form-element__control"],["type","text","placeholder","name",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-form-element"],["label","LBL_TYPE"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","disabled","ngModelChange"],["value","global",4,"ngIf"],["value","custom"],["label","LBL_CUSTOM"],[1,"slds-modal__footer"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_SAVE"],["value","global"],["label","LBL_GLOBAL"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),g.NdJ("click",(function(){return t.closeDialog()})),g._UZ(4,"system-button-icon",4),g.qZA(),g.TgZ(5,"h2",5),g._uU(6),g.qZA()(),g.TgZ(7,"div",6)(8,"div",7)(9,"label",8),g._UZ(10,"system-label",9),g.qZA(),g.TgZ(11,"div",10)(12,"input",11),g.NdJ("ngModelChange",(function(e){return t.fieldsetname=e})),g.qZA()()(),g.TgZ(13,"div",12)(14,"label",8),g._UZ(15,"system-label",13),g.qZA(),g.TgZ(16,"div",10)(17,"div",14)(18,"select",15),g.NdJ("ngModelChange",(function(e){return t.fieldsettype=e})),g.YNc(19,yi,2,0,"option",16),g.TgZ(20,"option",17),g._UZ(21,"system-label",18),g.qZA()()()()()(),g.TgZ(22,"div",19)(23,"button",20),g.NdJ("click",(function(){return t.closeDialog()})),g._UZ(24,"system-label",21),g.qZA(),g.TgZ(25,"button",22),g.NdJ("click",(function(){return t.add()})),g._UZ(26,"system-label",23),g.qZA()()()()),2&e&&(g.xp6(4),g.Q6J("icon","close")("size","large"),g.xp6(2),g.Oqu(t.modalTitle),g.xp6(6),g.Q6J("ngModel",t.fieldsetname),g.xp6(6),g.Q6J("ngModel",t.fieldsettype)("disabled",!t.adding),g.xp6(1),g.Q6J("ngIf","all"==t.edit_mode),g.xp6(6),g.Q6J("disabled",""==t.fieldsetname))},dependencies:[i.O5,n.YN,n.Kr,n.Fj,n.EJ,n.JJ,n.On,A.J,T._],encapsulation:2}),FieldsetManagerEditDialog})();function xi(e,t){if(1&e&&(g.TgZ(0,"option",11),g._uU(1),g.qZA()),2&e){const e=t.$implicit;g.Q6J("value",e.value),g.xp6(1),g.Oqu(e.display)}}function vi(e,t){if(1&e&&(g.TgZ(0,"option",11),g._uU(1),g.qZA()),2&e){const e=t.$implicit;g.Q6J("value",e.id),g.xp6(1),g.Oqu(e.module)}}function Ai(e,t){if(1&e&&(g.TgZ(0,"option",11),g._uU(1),g.qZA()),2&e){const e=t.$implicit,s=g.oxw(2);g.Q6J("value",e.component),g.xp6(1),g.Oqu(s.componentName(e))}}function Ti(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"system-input-label",41),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw(2);return g.KtG(s.action.actionconfig.label=t)})),g.qZA()}if(2&e){const e=g.oxw(2);g.Q6J("ngModel",e.action.actionconfig.label)}}function Li(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"system-input-label",41),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw(2);return g.KtG(s.action.actionconfig.group=t)})),g.qZA()}if(2&e){const e=g.oxw(2);g.Q6J("ngModel",e.action.actionconfig.group)}}function Ci(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"fieldset",1)(1,"legend",2),g._UZ(2,"system-label",3),g.qZA(),g.TgZ(3,"div",4)(4,"div",5)(5,"label",6),g._UZ(6,"system-label",7),g.qZA(),g.TgZ(7,"div",4)(8,"div",8)(9,"select",9,10),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.action.action=t)}))("change",(function(){g.CHM(e);const t=g.oxw();return g.KtG(t.setActionComponent())})),g._UZ(11,"option",11),g.YNc(12,xi,2,2,"option",12),g.qZA()()()(),g.TgZ(13,"div",13)(14,"div",14)(15,"label",6),g._UZ(16,"system-label",15),g.qZA(),g.TgZ(17,"div",4)(18,"div",16)(19,"select",17),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.systemmodule=t)})),g.YNc(20,vi,2,2,"option",12),g.qZA()()()(),g.TgZ(21,"div",18)(22,"label",6),g._UZ(23,"system-label",3),g.qZA(),g.TgZ(24,"div",4)(25,"div",16)(26,"select",19),g.NdJ("change",(function(){g.CHM(e);const t=g.oxw();return g.KtG(t.setComponent())}))("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.localcomponent=t)})),g.TgZ(27,"option"),g._uU(28,"-"),g.qZA(),g.YNc(29,Ai,2,2,"option",12),g.qZA()()()()()(),g.TgZ(30,"legend",2),g._UZ(31,"system-label",20),g.qZA(),g.TgZ(32,"div",4)(33,"div",21)(34,"label",6),g._uU(35,"ID"),g.qZA(),g.TgZ(36,"div",4),g._UZ(37,"input",22),g.qZA()(),g.TgZ(38,"div",23)(39,"label",6),g._UZ(40,"system-label",24),g.qZA(),g.TgZ(41,"div",25)(42,"input",26),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.action.package=t)})),g.qZA()()(),g.TgZ(43,"div",23)(44,"label",6),g._UZ(45,"system-label",27),g.qZA(),g.TgZ(46,"div",25)(47,"input",28),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.action.version=t)})),g.qZA()()()(),g.TgZ(48,"legend",2),g._UZ(49,"system-label",29),g.qZA(),g.TgZ(50,"div",4)(51,"div",30)(52,"label",6),g._UZ(53,"system-label",31),g.qZA(),g.YNc(54,Ti,1,1,"system-input-label",32),g.qZA(),g.TgZ(55,"div",30)(56,"label",6),g._UZ(57,"system-label",33),g.qZA(),g.YNc(58,Li,1,1,"system-input-label",32),g.qZA(),g.TgZ(59,"div",30)(60,"label",6),g._UZ(61,"system-label",34),g.qZA(),g.TgZ(62,"input",35),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.action.actionconfig.addclasses=t)})),g.qZA()(),g.TgZ(63,"fieldset",23)(64,"div",4)(65,"label",36)(66,"input",37),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.action.singlebutton=t)})),g.qZA(),g._UZ(67,"span",38),g.TgZ(68,"span",6),g._UZ(69,"system-label",39),g.qZA()()()(),g._UZ(70,"workbench-config",40),g.qZA()()}if(2&e){const e=g.oxw();g.xp6(9),g.Q6J("disabled",!e.view.isEditMode())("ngModel",e.action.action),g.xp6(3),g.Q6J("ngForOf",e.standardActions),g.xp6(7),g.Q6J("disabled",!e.view.isEditMode()||""!=e.action.action&&!!e.action.action)("ngModel",e.systemmodule),g.xp6(1),g.Q6J("ngForOf",e.systemmodules),g.xp6(6),g.Q6J("disabled",!e.view.isEditMode()||""!=e.action.action&&!!e.action.action)("ngModel",e.localcomponent),g.xp6(3),g.Q6J("ngForOf",e.components),g.xp6(8),g.Q6J("ngModel",e.action.id),g.xp6(5),g.Q6J("disabled",!e.view.isEditMode())("ngModel",e.action.package),g.xp6(5),g.Q6J("disabled",!e.view.isEditMode())("ngModel",e.action.version),g.xp6(7),g.Q6J("ngIf",e.view.isEditMode()),g.xp6(4),g.Q6J("ngIf",e.view.isEditMode()),g.xp6(4),g.Q6J("disabled",!e.view.isEditMode())("ngModel",e.action.actionconfig.addclasses),g.xp6(4),g.Q6J("disabled",!e.view.isEditMode())("ngModel",e.action.singlebutton),g.xp6(4),g.Q6J("component",e.action.component)("configValues",e.action.actionconfig)}}let qi=(()=>{class ActionsetManagerActionDetails{constructor(e,t,s,i){this.backend=e,this.metadata=t,this.language=s,this.view=i,this.action={},this.component="",this.component_backup="",this.localcomponent="",this.systemmodule="",this.systemmodules=[],this.standardActions=[{display:"NEW",value:"NEW",component:"ObjectActionNewButton"},{display:"DUPLICATE",value:"DUPLICATE",component:"ObjectActionDuplicateButton"},{display:"NEWRELATED",value:"NEWRELATED",component:"ObjectActionNewrelatedButton"},{display:"EDIT",value:"EDIT",component:"ObjectActionEditButton"},{display:"DELETE",value:"DELETE",component:"ObjectActionDeleteButton"},{display:"AUDIT",value:"AUDIT",component:"ObjectActionAuditlogButton"},{display:"IMPORT",value:"IMPORT",component:"SpiceImporterImportButton"},{display:"MAIL",value:"MAIL",component:"ObjectActionBeanToMailButton"},{display:"PRINT",value:"PRINT",component:"ObjectActionOutputBeanButton"},{display:"ROUTE",value:"ROUTE",component:"GlobalNavigationMenuItemActionRoute"},{display:"SELECT",value:"SELECT",component:"ObjectActionSelectButton"},{display:"OPEN",value:"OPEN",component:"ObjectActionOpenButton"},{display:"CANCEL",value:"CANCEL",component:"ObjectActionCancelButton"},{display:"SAVE",value:"SAVE",component:"ObjectActionSaveButton"},{display:"SAVERELATED",value:"SAVERELATED",component:"ObjectActionSaveRelatedButton"}],this.systemmodules=this.metadata.getSystemModules()}ngOnChanges(e){this.action&&(this.action.isViewMode?this.view.setViewMode():this.view.setEditMode(),this.localcomponent=this.action.component,this.component_backup=this.localcomponent,this.setActionComponent())}get components(){return this.metadata.getSystemComponents(this.systemmodule)}componentName(e){return e?"1"==e.deprecated?e.component+" | dep.":e.component:""}setActionComponent(){this.action.action?this.localcomponent=this.standardActions.find((e=>e.value===this.action.action)).component:this.localcomponent=this.component_backup,this.systemmodule=this.metadata.getSystemModuleByComponent(this.localcomponent)}setComponent(){this.action.component=this.localcomponent}}return ActionsetManagerActionDetails.ɵfac=function(e){return new(e||ActionsetManagerActionDetails)(g.Y36(p.y),g.Y36(h.Pu),g.Y36(f.d),g.Y36(Hs.e))},ActionsetManagerActionDetails.ɵcmp=g.Xpm({type:ActionsetManagerActionDetails,selectors:[["actionsetmanager-action-details"]],inputs:{action:"action"},features:[g._Bn([Hs.e]),g.TTD],decls:1,vars:1,consts:[["class","slds-form-element slds-form-element_compound",4,"ngIf"],[1,"slds-form-element","slds-form-element_compound"],[1,"slds-form-element__legend","slds-form-element__label","slds-m-vertical_small"],["label","LBL_COMPONENT"],[1,"slds-form-element__control"],[1,"slds-form-element"],[1,"slds-form-element__label"],["label","LBL_STANDARD_ACTION"],[1,"slds-select_container","slds-m-vertical--xx-small"],[1,"slds-select",3,"disabled","ngModel","ngModelChange","change"],["focus",""],[3,"value"],[3,"value",4,"ngFor","ngForOf"],[1,"slds-grid"],[1,"slds-form-element","slds-size--1-of-2","slds-p-right--xx-small"],["label","LBL_MODULE"],[1,"slds-select_container"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],[1,"slds-form-element","slds-size--1-of-2","slds-p-left--xx-small"],[1,"slds-select",3,"disabled","ngModel","change","ngModelChange"],["label","LBL_INFORMATION"],[1,"slds-form-element","slds-m-bottom--x-small"],["type","text","disabled","",1,"slds-input",3,"ngModel"],[1,"slds-form-element","slds-m-vertical--xxx-small"],["label","LBL_PACKAGE"],[1,"slds-form-element__control","slds-input-has-icon","slds-input-has-icon--right"],["type","text","placeholder","package",1,"slds-input",3,"disabled","ngModel","ngModelChange"],["label","LBL_VERSION"],["type","text","placeholder","version",1,"slds-input",3,"disabled","ngModel","ngModelChange"],["label","LBL_OPTIONS"],[1,"slds-form-element","slds-m-vertical--xx-small"],["label","LBL_LABEL"],[3,"ngModel","ngModelChange",4,"ngIf"],["label","LBL_GROUP"],["label","LBL_ADD_CLASS"],["type","text",1,"slds-input",3,"disabled","ngModel","ngModelChange"],["for","link",1,"slds-checkbox"],["type","checkbox","id","link",3,"disabled","ngModel","ngModelChange"],[1,"slds-checkbox--faux"],["label","LBL_SINGLEBUTTON"],[3,"component","configValues"],[3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&g.YNc(0,Ci,71,22,"fieldset",0),2&e&&g.Q6J("ngIf",t.action)},dependencies:[i.sg,i.O5,n.YN,n.Kr,n.Fj,n.Wl,n.EJ,n.JJ,n.On,Q.$,T._,Ps],encapsulation:2}),ActionsetManagerActionDetails})();function Ji(e,t){if(1&e&&(g.TgZ(0,"option",18),g._uU(1),g.qZA()),2&e){const e=t.$implicit;g.Q6J("value",e.module),g.xp6(1),g.hij("",e.module," ")}}function Ni(e,t){if(1&e&&(g.TgZ(0,"option",21),g._uU(1),g.qZA()),2&e){const e=t.$implicit;g.Q6J("ngValue",e.id),g.xp6(1),g.hij("",e.name," ")}}function ki(e,t){if(1&e&&(g.TgZ(0,"optgroup",19),g.YNc(1,Ni,2,2,"option",20),g.qZA()),2&e){const e=g.oxw();g.Q6J("label","custom"+e.language.getLabel("LBL_ACTIONSET")),g.xp6(1),g.Q6J("ngForOf",e.getActionSets("custom"))}}function wi(e,t){if(1&e&&(g.TgZ(0,"option",21),g._uU(1),g.qZA()),2&e){const e=t.$implicit;g.Q6J("ngValue",e.id),g.xp6(1),g.hij("",e.name," ")}}function Ui(e,t){if(1&e&&(g.TgZ(0,"optgroup",19),g.YNc(1,wi,2,2,"option",20),g.qZA()),2&e){const e=g.oxw();g.Q6J("label","global"+e.language.getLabel("LBL_ACTIONSET")),g.xp6(1),g.Q6J("ngForOf",e.getActionSets("global"))}}function Ei(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"button",22),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw();return g.KtG(t.copy())})),g.TgZ(1,"span"),g._UZ(2,"system-label",23),g.qZA()()}if(2&e){const e=g.oxw();g.Q6J("disabled",!e.allowBarButtons)}}function Di(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"button",24),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw();return g.KtG(t.addActionset())})),g._UZ(1,"system-utility-icon",25),g.qZA()}if(2&e){const e=g.oxw();g.Q6J("disabled",!e.allowBarButtons),g.xp6(1),g.Q6J("icon","add")("size","x-small")}}function Oi(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"button",26),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw();return g.KtG(t.saveChanges())})),g._UZ(1,"system-label",27),g.qZA()}if(2&e){const e=g.oxw();g.Q6J("disabled",!e.view.isEditMode())}}function Ii(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"button",26),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw();return g.KtG(t.deleteChanges())})),g._UZ(1,"system-label",28),g.qZA()}if(2&e){const e=g.oxw();g.Q6J("disabled",!e.view.isEditMode())}}const Qi=function(e){return{"slds-theme--shade":e}};function Si(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",61),g.NdJ("click",(function(){const t=g.CHM(e).$implicit,s=g.oxw(2);return g.KtG(s.selectItem(t))})),g._UZ(1,"system-utility-icon",62),g.TgZ(2,"a",63),g._uU(3),g.qZA(),g.TgZ(4,"div",64)(5,"button",65),g.NdJ("click",(function(){const t=g.CHM(e).$implicit,s=g.oxw(2);return g.KtG(s.deleteItem(t))})),g._UZ(6,"system-button-icon",58),g.qZA()()()}if(2&e){const e=t.$implicit,s=g.oxw(2);g.Q6J("ngClass",g.VKq(6,Qi,e.id==s.selectedItemID)),g.xp6(1),g.Q6J("icon","rows")("size","x-small"),g.xp6(2),g.Oqu(s.getDisplayName(e)),g.xp6(2),g.Q6J("disabled",!s.view.isEditMode()),g.xp6(1),g.Q6J("icon","delete")}}function Bi(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",29)(1,"div",30)(2,"div",31)(3,"div",32)(4,"label",4),g._UZ(5,"system-label",33),g.qZA(),g.TgZ(6,"div",34),g._UZ(7,"system-custom-icon",35)(8,"input",36),g.qZA()(),g.TgZ(9,"div",32)(10,"label",4),g._UZ(11,"system-label",37),g.qZA(),g.TgZ(12,"div",38)(13,"div",39)(14,"select",40),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.currentActionSet.grouped=t)})),g.TgZ(15,"option",41),g._UZ(16,"system-label",42),g.qZA(),g.TgZ(17,"option",43),g._UZ(18,"system-label",44),g.qZA(),g.TgZ(19,"option",45),g._UZ(20,"system-label",46),g.qZA()()()()(),g.TgZ(21,"div",32)(22,"label",4),g._UZ(23,"system-label",47),g.qZA(),g.TgZ(24,"div",38)(25,"input",48),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.currentActionSet.name=t)})),g.qZA()()(),g.TgZ(26,"div",32)(27,"label",4),g._UZ(28,"system-label",49),g.qZA(),g.TgZ(29,"div",38)(30,"input",48),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.currentActionSet.package=t)})),g.qZA()()(),g.TgZ(31,"div",32)(32,"label",4),g._UZ(33,"system-label",50),g.qZA(),g.TgZ(34,"div",38)(35,"input",48),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.currentActionSet.version=t)})),g.qZA()()(),g.TgZ(36,"div",32)(37,"label",4),g._UZ(38,"system-label",51),g.qZA(),g.TgZ(39,"div",38),g._UZ(40,"input",36),g.qZA()()()(),g.TgZ(41,"div",52)(42,"div",53)(43,"div",54),g.NdJ("cdkDropListDropped",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.drop(t))})),g.YNc(44,Si,7,8,"div",55),g.qZA(),g.TgZ(45,"div",56)(46,"button",57),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw();return g.KtG(t.addActionsetItem())})),g._UZ(47,"system-button-icon",58),g.qZA()()(),g.TgZ(48,"div",59),g._UZ(49,"actionsetmanager-action-details",60),g.qZA()()()}if(2&e){const e=g.oxw();g.xp6(7),g.Q6J("icon",e.currentActionSet.type),g.xp6(1),g.Q6J("ngModel",e.currentActionSet.type),g.xp6(6),g.Q6J("disabled",!e.view.isEditMode())("ngModel",e.currentActionSet.grouped),g.xp6(11),g.Q6J("disabled",!e.view.isEditMode())("ngModel",e.currentActionSet.name),g.xp6(5),g.Q6J("disabled",!e.view.isEditMode())("ngModel",e.currentActionSet.package),g.xp6(5),g.Q6J("disabled",!e.view.isEditMode())("ngModel",e.currentActionSet.version),g.xp6(5),g.Q6J("ngModel",e.currentActionSet.id),g.xp6(4),g.Q6J("ngForOf",e.currentActionSet.actions),g.xp6(2),g.Q6J("disabled",!e.view.isEditMode()),g.xp6(1),g.Q6J("icon","new"),g.xp6(2),g.Q6J("action",e.selectedItem)}}let Fi=(()=>{class ActionsetManager{constructor(e,t,s,i,n,l,o,a,d,r){this.backend=e,this.metadata=t,this.language=s,this.modelutilities=i,this.broadcast=n,this.toast=l,this.modalservice=o,this.configurationService=a,this.view=d,this.modal=r,this.edit_mode="custom",this.allowBarButtons=!0,this.crNoneActive=!1,this.change_request_required=!1,this.sysModules=[],this.currentModule="*",this.currentActionSet={id:"",module:"",name:"",package:"",type:"",actions:[],isnew:!1},this.actionSetBackup="",this.selectedItem=null,this.selectedItemID="",this.showActionSetDetails=!1,this.backend.getRequest("system/spiceui/admin/modules").subscribe((e=>{this.sysModules=e})),this.checkMode()}getActionSets(e=null){let t=[];if(e){let s=this.metadata.getActionSets(this.currentModule);for(let i of s)i.type==e&&t.push(i)}else t=this.metadata.getActionSets(this.currentModule);return t}checkMode(){this.edit_mode=this.configurationService.getCapabilityConfig("core").edit_mode,this.change_request_required=!!this.configurationService.getCapabilityConfig("systemdeployment").change_request_required,"none"!=this.edit_mode&&"custom"!=this.edit_mode&&"all"!=this.edit_mode&&(this.edit_mode="custom"),this.change_request_required?this.backend.getRequest("module/SystemDeploymentCRs/active").subscribe((e=>{""==e.id?(this.setNoneMode(),this.crNoneActive=!0,this.toast.sendToast(this.language.getLabel("LBL_ACTIVATE_CR_WARNING"),"warning",null,3)):(this.crNoneActive=!1,"all"==this.edit_mode?this.setAllMode():"custom"==this.edit_mode?this.setCustomMode():this.setNoneMode())})):(this.crNoneActive=!1,"all"==this.edit_mode?this.setAllMode():"custom"==this.edit_mode?this.setCustomMode():this.setNoneMode())}setNoneMode(){this.view.setViewMode(),this.allowBarButtons=!1}setCustomMode(){"custom"==this.currentActionSet.type?this.view.setEditMode():this.view.setViewMode()}setAllMode(){this.view.setEditMode()}get checkForChanges(){return this.checkForChangesFunction()}checkForChangesFunction(){return""!=this.currentActionSet.id&&(this.checkMode(),JSON.stringify(this.currentActionSet)!=this.actionSetBackup)}selectCurrentActionset(){if(this.currentActionSet.id){let e=this.currentActionSet.id;""!=this.actionSetBackup?(this.currentActionSet.id=JSON.parse(this.actionSetBackup).id,JSON.stringify(this.actionSetBackup),this.checkForChangesFunction()?this.modal.confirm("LBL_ALL_CHANGES_WOULD_BE_DELETED.","LBL_ARE_YOU_SURE").subscribe((t=>{t&&(this.deleteChanges(),this.loadCurrentActionset(e))})):this.loadCurrentActionset(e)):this.loadCurrentActionset(e)}}loadCurrentActionset(e){this.selectedItem=null,this.checkMode(),this.currentActionSet=this.metadata.getActionSet(e),this.actionSetBackup=JSON.stringify({...this.currentActionSet}),this.currentActionSet&&this.currentActionSet.actions&&this.currentActionSet.actions.length>0&&this.selectItem(this.currentActionSet.actions[0])}addActionsetItem(){let e={action:"NEW",component:null,id:this.modelutilities.generateGuid(),sequence:this.currentActionSet.actions.length,singlebutton:!1,package:this.currentActionSet.package,version:this.currentActionSet.version,actionconfig:{},parentScope:this.currentActionSet.type};this.currentActionSet.actions.push(e),this.metadata.setActionSetItems(this.currentActionSet.id,this.currentActionSet.actions),this.selectItem(e)}deleteItem(e){this.modal.confirm("LBL_ARE_YOU_SURE","LBL_REMOVE_ITEM").subscribe((t=>{t&&this.currentActionSet.actions.splice(this.currentActionSet.actions.map((e=>e.id)).indexOf(e.id),1)}))}addActionset(){this.modalservice.openModal("ActionsetManagerAddDialog").subscribe((e=>{e.instance.sysModules=this.sysModules,e.instance.actionsetModule=this.currentModule,e.instance.mode="add",e.instance.edit_mode=this.edit_mode,e.instance.actionsetName="",e.instance.closedialog.subscribe((e=>{if(e){let t=this.modelutilities.generateGuid();this.currentActionSet.actions=[],this.metadata.setActionSet(t,{module:e.module,name:e.name,type:e.type,actions:this.currentActionSet.actions}),this.reset(),this.currentModule=e.module,this.currentActionSet.id=t,this.currentActionSet.module=e.module,this.currentActionSet.name=e.name,this.currentActionSet.type=e.type,this.currentActionSet.actions=[],this.currentActionSet.package="",this.currentActionSet.isnew=!0}}))}))}selectModule(){let e=this.currentActionSet.module;""!=this.actionSetBackup?(this.currentActionSet.module=JSON.parse(this.actionSetBackup).module,JSON.stringify(this.actionSetBackup),this.checkForChangesFunction()?this.modal.confirm("LBL_ALL_CHANGES_WOULD_BE_DELETED.","LBL_ARE_YOU_SURE").subscribe((t=>{t&&(this.deleteChanges(),this.currentActionSet.module=e)})):this.currentActionSet.module=e):this.currentActionSet.module=e}reset(){this.currentActionSet={id:"",module:"",name:"",package:"",type:"",actions:[]},this.selectedItem=null,this.selectedItemID=""}getDisplayName(e){let t=e.action?e.action:e.component;return e.actionconfig.label?t+" ("+this.language.getLabel(e.actionconfig.label)+")":t}isSelected(e){return e==this.selectedItem.id}selectItem(e){this.selectedItemID=e.id;for(let t of this.currentActionSet.actions)t.id==e.id&&(this.selectedItem=t)}drop(e){this.currentActionSet.actions.splice(e.currentIndex,0,this.currentActionSet.actions.splice(e.previousIndex,1)[0]);let t=0;for(let e of this.currentActionSet.actions)e.sequence=t,t++}deleteChanges(){this.currentActionSet.isnew?(this.metadata.removeActionset(this.currentActionSet.id),this.reset(),this.actionSetBackup=""):(this.currentActionSet={...JSON.parse(this.actionSetBackup)},this.metadata.setActionSet(this.currentActionSet.id,this.currentActionSet),this.currentActionSet.actions.length>0&&this.selectItem(this.currentActionSet.actions[0]))}saveChanges(){this.modal.openModal("SystemLoadingModal").subscribe((e=>{let t={},s={};this.currentActionSet.isnew&&(t[this.currentActionSet.id]=this.currentActionSet),this.currentActionSet.isnew||(s[this.currentActionSet.id]=this.currentActionSet);let i={add:t,update:s,delete:{}};this.backend.postRequest("configuration/spiceui/core/actionsets",{},i).subscribe((t=>{t?(this.broadcast.broadcastMessage("metadata.updateactionsets",i),e.instance.self.destroy(),this.toast.sendToast("changes saved"),this.loadCurrentActionset(this.currentActionSet.id)):(e.instance.self.destroy(),this.toast.sendToast(this.language.getLabel("ERR_FAILED_TO_EXECUTE"),"error"))}))}))}copy(){this.modalservice.openModal("ActionsetManagerAddDialog").subscribe((e=>{e.instance.sysModules=this.sysModules,e.instance.actionsetModule=this.currentModule,e.instance.mode="copy",e.instance.edit_mode=this.edit_mode,e.instance.actionsetName=(" "+this.currentActionSet.name).slice(1),e.instance.closedialog.subscribe((e=>{if(e){let t=this.modelutilities.generateGuid(),s=JSON.parse(JSON.stringify(this.currentActionSet.actions));this.metadata.setActionSet(t,{module:e.module,name:e.name,type:e.type,actions:s});for(let e of s)e.id=this.modelutilities.generateGuid();this.reset(),this.currentModule=e.module,this.currentActionSet.id=t,this.currentActionSet.module=e.module,this.currentActionSet.name=e.name,this.currentActionSet.type=e.type,this.currentActionSet.actions=s,this.currentActionSet.isnew=!0,this.view.setEditMode()}}))}))}}return ActionsetManager.ɵfac=function(e){return new(e||ActionsetManager)(g.Y36(p.y),g.Y36(h.Pu),g.Y36(f.d),g.Y36(b.A),g.Y36(gs.f),g.Y36(y.A),g.Y36(M.o),g.Y36(x.C),g.Y36(Hs.e),g.Y36(M.o))},ActionsetManager.ɵcmp=g.Xpm({type:ActionsetManager,selectors:[["ng-component"]],features:[g._Bn([Hs.e])],decls:27,vars:12,consts:[["titlelabel","LBL_ACTIONSET_MANAGER"],[1,"slds-p-around--small","slds-border--bottom"],[1,"slds-grid","slds-grid--vertical-align-center","slds-form--inline"],[1,"slds-form-element"],[1,"slds-form-element__label"],["label","LBL_MODULE"],[1,"slds-form-element__control",2,"min-width","250px"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","disabled","ngModelChange","change"],["value","*"],[3,"value",4,"ngFor","ngForOf"],["label","LBL_ACTIONSET"],[3,"label",4,"ngIf"],[1,"slds-form-element","slds-col--bump-left"],["class","slds-button slds-button--brand",3,"disabled","click",4,"ngIf"],["type","button","class","slds-button slds-button_icon slds-button_icon-border-filled",3,"disabled","click",4,"ngIf"],["type","button","class","slds-button slds-button--brand",3,"disabled","click",4,"ngIf"],["class","slds-theme--default",4,"ngIf"],[3,"value"],[3,"label"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_COPY"],["type","button",1,"slds-button","slds-button_icon","slds-button_icon-border-filled",3,"disabled","click"],[3,"icon","size"],["type","button",1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_SAVE"],["label","LBL_CANCEL"],[1,"slds-theme--default"],[1,"slds-p-around--small","slds-border--bottom","slds-theme--default"],[1,"slds-grid","slds-grid--vertical-align-end"],[1,"slds-form-element","slds-p-right--x-small","slds-size--1-of-6"],["label","LBL_SCOPE"],[1,"slds-form-element__control","slds-input-has-icon","slds-input-has-icon_left"],["size","x-small","addclasses","slds-input__icon slds-input__icon_left",3,"icon"],["type","text","disabled","",1,"slds-input",3,"ngModel"],["label","LBL_GROUPED"],[1,"slds-form-element__control"],[1,"slds-select_container","slds-m-vertical--xx-small"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],["value","no"],["label","LBL_NO"],["value","vertical"],["label","LBL_VERTICAL"],["value","horizontal"],["label","LBL_HORIZONTAL"],["label","LBL_NAME"],["type","text",1,"slds-input",3,"disabled","ngModel","ngModelChange"],["label","LBL_PACKAGE"],["label","LBL_VERSION"],["label","LBL_ID"],["system-to-bottom-noscroll","",1,"slds-grid"],["system-to-bottom","",1,"slds-size--3-of-5","slds-p-horizontal--small","slds-p-top--x-small","slds-border--right"],["role","application","cdkDropList","",1,"slds-tree_container","dragboundary",2,"max-width","none",3,"cdkDropListDropped"],["class","slds-p-vertical--xx-small slds-grid slds-grid--align-spread slds-grid--vertical-align-center","cdkDrag","","cdkDragBoundary",".dragboundary",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"slds-p-around--small","slds-align--absolute-center","slds-border--top","slds-m-top--small"],["title","add item",1,"slds-button","slds-button--icon",3,"disabled","click"],[3,"icon"],["system-to-bottom","",1,"slds-size--2-of-5","slds-p-horizontal--small","slds-p-vertical--x-small"],[3,"action"],["cdkDrag","","cdkDragBoundary",".dragboundary",1,"slds-p-vertical--xx-small","slds-grid","slds-grid--align-spread","slds-grid--vertical-align-center",3,"ngClass","click"],["cdkDragHandle","",1,"slds-p-right--xx-small",2,"cursor","move",3,"icon","size"],["href","javascript:void(0);","role","presentation",1,"slds-truncate"],[1,"slds-col--bump-left"],["title","unlink item",1,"slds-button","slds-button--icon",3,"disabled","click"]],template:function(e,t){1&e&&(g._UZ(0,"workbench-header",0),g.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"label",4),g._UZ(5,"system-label",5),g.qZA(),g.TgZ(6,"div",6)(7,"div",7)(8,"select",8),g.NdJ("ngModelChange",(function(e){return t.currentModule=e}))("change",(function(){return t.selectModule()})),g.TgZ(9,"option",9),g._uU(10,"*"),g.qZA(),g.YNc(11,Ji,2,2,"option",10),g.qZA()()()(),g.TgZ(12,"div",3)(13,"label",4),g._UZ(14,"system-label",11),g.qZA(),g.TgZ(15,"div",6)(16,"div",7)(17,"select",8),g.NdJ("ngModelChange",(function(e){return t.currentActionSet.id=e}))("change",(function(){return t.selectCurrentActionset()})),g._UZ(18,"option"),g.YNc(19,ki,2,2,"optgroup",12),g.YNc(20,Ui,2,2,"optgroup",12),g.qZA()()()(),g.TgZ(21,"div",13),g.YNc(22,Ei,3,1,"button",14),g.YNc(23,Di,2,3,"button",15),g.YNc(24,Oi,2,1,"button",16),g.YNc(25,Ii,2,1,"button",16),g.qZA()()(),g.YNc(26,Bi,50,15,"div",17)),2&e&&(g.xp6(8),g.Q6J("ngModel",t.currentModule)("disabled",0==t.sysModules.length),g.xp6(3),g.Q6J("ngForOf",t.sysModules),g.xp6(6),g.Q6J("ngModel",t.currentActionSet.id)("disabled",0==t.getActionSets().length),g.xp6(2),g.Q6J("ngIf",t.getActionSets("custom").length>0),g.xp6(1),g.Q6J("ngIf",t.getActionSets("global").length>0),g.xp6(2),g.Q6J("ngIf",!t.checkForChanges&&""!=t.currentActionSet.id),g.xp6(1),g.Q6J("ngIf",!t.checkForChanges),g.xp6(1),g.Q6J("ngIf",t.checkForChanges&&""!=t.currentActionSet.id),g.xp6(1),g.Q6J("ngIf",t.checkForChanges&&""!=t.currentActionSet.id),g.xp6(1),g.Q6J("ngIf",""!=t.currentActionSet.id))},dependencies:[i.mk,i.sg,i.O5,n.YN,n.Kr,n.Fj,n.EJ,n.JJ,n.On,A.J,Ks.$,T._,u.r,k.H,C.t,c.Wj,c.Zt,c.Bh,qi,We],encapsulation:2}),ActionsetManager})();function Yi(e,t){if(1&e&&(g.TgZ(0,"option",29),g._uU(1),g.qZA()),2&e){const e=t.$implicit;g.Q6J("value",e.module),g.xp6(1),g.hij("",e.module," ")}}function Ri(e,t){1&e&&(g.TgZ(0,"option",30),g._UZ(1,"system-label",31),g.qZA())}let Gi=(()=>{class ActionsetManagerAddDialog{constructor(e,t,s){this.backend=e,this.metadata=t,this.language=s,this.sysModules=[],this.actionsetModule="",this.mode="",this.edit_mode="",this.actionsetName="",this.closedialog=new g.vpe,this.actionsetType="custom",this.globalEdit=!1,this.modalTitle=""}ngOnInit(){"copy"==this.mode?this.modalTitle=this.language.getLabel("LBL_COPY_ACTIONSET"):this.modalTitle=this.language.getLabel("LBL_NEW_ACTIONSET")}closeDialog(){this.self.destroy()}onModalEscX(){this.closeDialog()}add(){this.closedialog.emit({name:this.actionsetName,type:this.actionsetType,module:this.actionsetModule}),this.self.destroy()}}return ActionsetManagerAddDialog.ɵfac=function(e){return new(e||ActionsetManagerAddDialog)(g.Y36(p.y),g.Y36(h.Pu),g.Y36(f.d))},ActionsetManagerAddDialog.ɵcmp=g.Xpm({type:ActionsetManagerAddDialog,selectors:[["actionsetmanager-add-dialog"]],inputs:{sysModules:"sysModules",actionsetModule:"actionsetModule",mode:"mode",edit_mode:"edit_mode",actionsetName:"actionsetName"},outputs:{closedialog:"closedialog"},decls:36,vars:10,consts:[["role","dialog","tabindex","-1","aria-labelledby","header43",1,"slds-modal","slds-fade-in-open"],[1,"slds-modal__container"],[1,"slds-modal__header","slds-theme--shade"],["title","Close",1,"slds-button","slds-modal__close","slds-button--icon-inverse",3,"click"],[3,"icon","size"],["id","header43",1,"slds-text-heading--medium"],[1,"slds-modal__content","slds-p-around--medium"],[1,"slds-form-element"],[1,"slds-form-element__label"],["label","LBL_MODULE"],[1,"slds-form-element__control",2,"min-width","250px"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","disabled","ngModelChange"],["value","*"],[3,"value",4,"ngFor","ngForOf"],[1,"slds-form-element","slds-m-top--small"],["label","LBL_ITEM_NAME"],[1,"slds-form-element__control"],["type","text","placeholder","name",1,"slds-input",3,"ngModel","ngModelChange"],["label","LBL_TYPE"],[1,"slds-select",3,"ngModel","ngModelChange"],["value","global",4,"ngIf"],["value","custom"],["label","LBL_CUSTOM"],[1,"slds-modal__footer"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_ADD"],[3,"value"],["value","global"],["label","LBL_GLOBAL"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),g.NdJ("click",(function(){return t.closeDialog()})),g._UZ(4,"system-button-icon",4),g.qZA(),g.TgZ(5,"h2",5),g._uU(6),g.qZA()(),g.TgZ(7,"div",6)(8,"div",7)(9,"label",8),g._UZ(10,"system-label",9),g.qZA(),g.TgZ(11,"div",10)(12,"div",11)(13,"select",12),g.NdJ("ngModelChange",(function(e){return t.actionsetModule=e})),g.TgZ(14,"option",13),g._uU(15,"*"),g.qZA(),g.YNc(16,Yi,2,2,"option",14),g.qZA()()()(),g.TgZ(17,"div",15)(18,"label",8),g._UZ(19,"system-label",16),g.qZA(),g.TgZ(20,"div",17)(21,"input",18),g.NdJ("ngModelChange",(function(e){return t.actionsetName=e})),g.qZA()()(),g.TgZ(22,"div",7)(23,"label",8),g._UZ(24,"system-label",19),g.qZA(),g.TgZ(25,"div",17)(26,"div",11)(27,"select",20),g.NdJ("ngModelChange",(function(e){return t.actionsetType=e})),g.YNc(28,Ri,2,0,"option",21),g.TgZ(29,"option",22),g._UZ(30,"system-label",23),g.qZA()()()()()(),g.TgZ(31,"div",24)(32,"button",25),g.NdJ("click",(function(){return t.closeDialog()})),g._UZ(33,"system-label",26),g.qZA(),g.TgZ(34,"button",27),g.NdJ("click",(function(){return t.add()})),g._UZ(35,"system-label",28),g.qZA()()()()),2&e&&(g.xp6(4),g.Q6J("icon","close")("size","large"),g.xp6(2),g.Oqu(t.modalTitle),g.xp6(7),g.Q6J("ngModel",t.actionsetModule)("disabled",0==t.sysModules.length),g.xp6(3),g.Q6J("ngForOf",t.sysModules),g.xp6(5),g.Q6J("ngModel",t.actionsetName),g.xp6(6),g.Q6J("ngModel",t.actionsetType),g.xp6(1),g.Q6J("ngIf","all"==t.edit_mode),g.xp6(6),g.Q6J("disabled",""==t.actionsetName))},dependencies:[i.sg,i.O5,n.YN,n.Kr,n.Fj,n.EJ,n.JJ,n.On,A.J,T._],encapsulation:2}),ActionsetManagerAddDialog})();var Hi=s(4021);function Ki(e,t){if(1&e&&(g.TgZ(0,"option",18),g._uU(1),g.qZA()),2&e){const e=t.$implicit;g.Q6J("value",e.id),g.xp6(1),g.Oqu(e.name)}}function zi(e,t){if(1&e){const e=g.EpF();g.ynx(0),g.TgZ(1,"button",28),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw().$implicit,s=g.oxw(2);return g.KtG(s.editNode(t))})),g._UZ(2,"system-button-icon",34),g.qZA(),g.TgZ(3,"button",30),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw().$implicit,s=g.oxw(2);return g.KtG(s.deleteNode(t))})),g._UZ(4,"system-button-icon",35),g.qZA(),g.BQk()}}const Vi=function(e){return{"slds-theme--shade":e}},Pi=function(e){return{opacity:e}},$i=function(e){return{"slds-hidden":e}};function ji(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",25),g.NdJ("click",(function(){const t=g.CHM(e).$implicit,s=g.oxw().index,i=g.oxw();return g.KtG(i.setSelectedNodeID(s,t.id))})),g.TgZ(1,"div",26),g._uU(2),g.qZA(),g.YNc(3,zi,5,0,"ng-container",27),g.TgZ(4,"button",28),g.NdJ("click",(function(){const t=g.CHM(e).$implicit;return g.KtG(t.favorite=!t.favorite)})),g._UZ(5,"system-button-icon",29),g.qZA(),g.TgZ(6,"button",30),g.NdJ("click",(function(){const t=g.CHM(e).$implicit;return g.KtG(t.selectable=!t.selectable)})),g._UZ(7,"system-button-icon",31),g.qZA(),g.TgZ(8,"button",32),g.NdJ("click",(function(){const t=g.CHM(e).$implicit,s=g.oxw().index,i=g.oxw();return g.KtG(i.setSelectedNodeID(s,t.id))})),g._UZ(9,"system-button-icon",33),g.qZA()()}if(2&e){const e=t.$implicit,s=g.oxw().$implicit,i=g.oxw();g.Q6J("ngClass",g.VKq(9,Vi,s==e.id)),g.xp6(1),g.Q6J("ngClass",i.getNodeStyle(e)),g.xp6(1),g.AsE("",e.node_name," (",e.node_key,")"),g.xp6(1),g.Q6J("ngIf",s==e.id),g.xp6(2),g.Q6J("ngStyle",g.VKq(11,Pi,e.favorite?1:.3)),g.xp6(2),g.Q6J("ngStyle",g.VKq(13,Pi,e.selectable?1:.3))("icon",e.selectable?"linked":"unlinked"),g.xp6(1),g.Q6J("ngClass",g.VKq(15,$i,!i.hasChildren(e.id)))}}const Wi=function(e){return{"slds-border--right":e}};function Xi(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",19)(1,"div",20),g.YNc(2,ji,10,17,"div",21),g.qZA(),g.TgZ(3,"div",22)(4,"button",23),g.NdJ("click",(function(){const t=g.CHM(e).index,s=g.oxw();return g.KtG(s.addNode(t))})),g._UZ(5,"system-button-icon",24),g.qZA()()()}if(2&e){const e=t.index,s=g.oxw();g.Q6J("ngClass",g.VKq(3,Wi,e<3)),g.xp6(2),g.Q6J("ngForOf",s.getNodes(e)),g.xp6(2),g.Q6J("disabled",!s.addEnabled(e))}}let en=(()=>{class CategoryTreeManager{constructor(e,t,s,i,n,l,o,a){this.backend=e,this.metadata=t,this.language=s,this.config=i,this.utils=n,this.toast=l,this.modal=o,this.injector=a,this.loading=!1,this.activeTreeNodes=[],this.categoryTrees=[],this.selectedTreeNodes=[null,null,null,null],this.loadTrees()}addTree(){this.modal.openModal("CategoryTreeAddModal",!0,this.injector).subscribe((e=>{e.instance.categoryTrees=this.categoryTrees,e.instance.action.subscribe((t=>{"save"==t&&(this.activeTree=e.instance.newActiveTreeId)}))}))}linkTree(){this.modal.openModal("CategoryTreeManagerLinkModal",!0,this.injector).subscribe((e=>{e.instance.activeTreeId=this.activeTree}))}get activeTree(){return this._activeTree}set activeTree(e){this._activeTree=e,this.loadActiveTree()}hasChildren(e){return this.activeTreeNodes.filter((t=>t.parent_id==e)).length>0}loadTrees(){this.loading=!0,this.config.getData("select_trees")||this.backend.getRequest("configuration/spiceui/core/categorytrees").subscribe((e=>{this.loading=!1,this.categoryTrees=e,this.categoryTrees.length>0&&(this.activeTree=this.categoryTrees[0].id)}),(e=>{this.loading=!1,this.toast.sendToast("Error Loading Data","error")}))}loadActiveTree(){this.loading=!0,this.activeTreeNodes=[],this.selectedTreeNodes=[null,null,null,null],this.backend.getRequest(`configuration/spiceui/core/categorytrees/${this.activeTree}/categorytreenodes`,{all:!0}).subscribe((e=>{this.activeTreeNodes=e,this.activeTreeNodesBackup=JSON.stringify(e),this.loading=!1}),(e=>{this.loading=!1,this.toast.sendToast("Error Loading Data","error")}))}getNodeStyle(e){if("c"==e.node_status)return"slds-text-color_success";let t=new moment;return"i"==e.node_status||t.isBefore(e.valid_from)||t.isAfter(e.valid_to)?"slds-text-color_error":""}setSelectedNodeID(e,t){if(this.selectedTreeNodes[e]!=t)for(this.selectedTreeNodes[e]=t,e++;e<=3;)this.selectedTreeNodes[e]=null,e++}addEnabled(e){return 0===e?!!this.activeTree:!!this.selectedTreeNodes[e-1]}getNodes(e){return 0===e?this.activeTreeNodes.filter((e=>0==e.deleted&&!e.parent_id)).sort(((e,t)=>parseFloat(e.node_key)>parseFloat(t.node_key)?1:-1)):this.selectedTreeNodes[e-1]?this.activeTreeNodes.filter((t=>0==t.deleted&&t.parent_id==this.selectedTreeNodes[e-1])).sort(((e,t)=>parseFloat(e.node_key)>parseFloat(t.node_key)?1:-1)):[]}editNode(e){let t={...e};this.modal.openModal("CategoryTreeManagerNode").subscribe((s=>{s.instance.node=t,s.instance.nodes=this.activeTreeNodes.filter((t=>!e.parent_id&&!t.parent_id||e.parent_id&&t.parent_id==e.parent_id)),s.instance.addParamsComponent=this.categoryTrees.find((e=>e.id==this.activeTree)).add_params_component,s.instance.action.subscribe((s=>{s&&(e.node_name=t.node_name,e.node_description=t.node_description,e.node_key=t.node_key,e.selectable=t.selectable,e.favorite=t.favorite,e.add_params=t.add_params,e.valid_from=t.valid_from,e.valid_to=t.valid_to,e.node_status=t.node_status,e.deleted=0)}))}))}deleteNode(e){this.modal.confirm("MSG_DELETE_NODE","MSG_DELETE_NODE").subscribe((t=>{t&&(e.deleted=1,this.deleteChildren(e))}))}deleteChildren(e){let t=this.activeTreeNodes.filter((t=>t.parent_id==e.id&&0==t.deleted));for(let e of t)e.deleted=1,this.deleteChildren(e)}getNextNumber(e){let t=0,s=this.activeTreeNodes.filter((t=>!e&&!t.parent_id||e&&t.parent_id==e));for(let e of s){let s=parseInt(e.node_key,10);s>t&&(t=s)}return t+1}addNode(e){let t={id:this.utils.generateGuid(),node_name:null,node_description:null,node_key:this.getNextNumber(this.selectedTreeNodes[e-1]),parent_id:0==e?null:this.selectedTreeNodes[e-1],syscategorytree_id:this.activeTree,selectable:!0,node_status:"c",favorite:!1,deleted:0};this.modal.openModal("CategoryTreeManagerNode").subscribe((e=>{e.instance.node=t,e.instance.nodes=this.activeTreeNodes.filter((e=>!t.parent_id&&!e.parent_id||t.parent_id&&e.parent_id==t.parent_id)),e.instance.addParamsComponent=this.categoryTrees.find((e=>e.id==this.activeTree)).add_params_component,e.instance.action.subscribe((e=>{e&&this.activeTreeNodes.push(t)}))}))}get isDirty(){return this.changedNodes.length>0}get changedNodes(){let e=[];if(this.activeTreeNodesBackup){let t=JSON.parse(this.activeTreeNodesBackup);for(let s of this.activeTreeNodes){let i=t.find((e=>e.id==s.id));(!i||i&&!_.isEqual(i,s))&&e.push(s)}}return e}revertChanges(){this.loadActiveTree()}save(){let e=this.changedNodes;e.length>0&&this.backend.postRequest(`configuration/spiceui/core/categorytrees/${this.activeTree}/categorytreenodes`,null,e).subscribe((e=>{this.toast.sendToast("changes saved"),this.activeTreeNodesBackup=JSON.stringify(this.activeTreeNodes)}),(e=>{this.toast.sendAlert("saving failed!","error"),console.error(e)}))}}return CategoryTreeManager.ɵfac=function(e){return new(e||CategoryTreeManager)(g.Y36(p.y),g.Y36(h.Pu),g.Y36(f.d),g.Y36(x.C),g.Y36(b.A),g.Y36(y.A),g.Y36(M.o),g.Y36(g.zs3))},CategoryTreeManager.ɵcmp=g.Xpm({type:CategoryTreeManager,selectors:[["categgory-tree-manager"]],decls:22,vars:10,consts:[["titlelabel","LBL_CATEGORY_TREES","icon","strategy"],[1,"slds-grid","slds-grid--vertical-align-center"],[1,"slds-form-element__label"],["label","LBL_TREE"],[1,"slds-form-element__control","slds-p-right--small",2,"min-width","280px"],["disabled","true",3,"ngModel","ngModelChange"],[1,"slds-form-element__control","slds-p-right--small",2,"min-width","250px"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","disabled","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"slds-button","slds-button_icon","slds-button_icon-border-filled",3,"disabled","click"],["icon","add"],["icon","link"],["icon","undo"],["icon","save"],["system-to-bottom-noscroll","",1,"slds-p-around--small","slds-theme--default",3,"system-overlay-loading-spinner"],[1,"slds-box--border","slds-grid","slds-height_full"],["style","min-height: 250px","class","slds-size--1-of-4 slds-is-relative slds-p-bottom--x-large",3,"ngClass",4,"ngFor","ngForOf"],[3,"value"],[1,"slds-size--1-of-4","slds-is-relative","slds-p-bottom--x-large",2,"min-height","250px",3,"ngClass"],[1,"slds-scrollable--y",2,"height","calc(100% - 10px)"],["class","slds-m-around--xx-small slds-p-around--xx-small slds-grid",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"slds-p-vertical--small","slds-align--absolute-center"],[1,"slds-button","slds-button--icon",3,"disabled","click"],["icon","new"],[1,"slds-m-around--xx-small","slds-p-around--xx-small","slds-grid",3,"ngClass","click"],[1,"slds-truncate",3,"ngClass"],[4,"ngIf"],[1,"slds-col--bump-left","slds-button","slds-button--icon",3,"click"],["icon","favorite",3,"ngStyle"],[1,"slds-button","slds-button--icon",3,"click"],[3,"ngStyle","icon"],[1,"slds-button","slds-button--icon",3,"ngClass","click"],["icon","chevronright"],["icon","edit"],["icon","delete"]],template:function(e,t){1&e&&(g.TgZ(0,"workbench-header",0)(1,"workbench-header-controls")(2,"div",1)(3,"label",2),g._UZ(4,"system-label",3),g.qZA(),g.TgZ(5,"div",4)(6,"system-input-text",5),g.NdJ("ngModelChange",(function(e){return t.activeTree=e})),g.qZA()(),g.TgZ(7,"div",6)(8,"div",7)(9,"select",8),g.NdJ("ngModelChange",(function(e){return t.activeTree=e})),g.YNc(10,Ki,2,2,"option",9),g.qZA()()(),g.TgZ(11,"button",10),g.NdJ("click",(function(){return t.addTree()})),g._UZ(12,"system-button-icon",11),g.qZA(),g.TgZ(13,"button",10),g.NdJ("click",(function(){return t.linkTree()})),g._UZ(14,"system-button-icon",12),g.qZA(),g.TgZ(15,"button",10),g.NdJ("click",(function(){return t.revertChanges()})),g._UZ(16,"system-button-icon",13),g.qZA(),g.TgZ(17,"button",10),g.NdJ("click",(function(){return t.save()})),g._UZ(18,"system-button-icon",14),g.qZA()()()(),g.TgZ(19,"div",15)(20,"div",16),g.YNc(21,Xi,6,5,"div",17),g.qZA()()),2&e&&(g.xp6(6),g.Q6J("ngModel",t.activeTree),g.xp6(3),g.Q6J("ngModel",t.activeTree)("disabled",0==t.categoryTrees.length||t.isDirty),g.xp6(1),g.Q6J("ngForOf",t.categoryTrees),g.xp6(1),g.Q6J("disabled",t.isDirty),g.xp6(2),g.Q6J("disabled",!t.activeTree),g.xp6(2),g.Q6J("disabled",!t.isDirty),g.xp6(2),g.Q6J("disabled",!t.isDirty),g.xp6(2),g.Q6J("system-overlay-loading-spinner",t.loading),g.xp6(2),g.Q6J("ngForOf",t.selectedTreeNodes))},dependencies:[i.mk,i.sg,i.O5,i.PC,n.YN,n.Kr,n.EJ,n.JJ,n.On,A.J,q.Z,T._,C.t,Hi._,We,et],encapsulation:2}),CategoryTreeManager})();var tn=s(2995),sn=s(6822);const nn=function(e){return{addParams:e}};function ln(e,t){if(1&e&&(g.TgZ(0,"div"),g._UZ(1,"system-dynamic-component",38),g.qZA()),2&e){const e=g.oxw();g.xp6(1),g.Q6J("component",e.addParamsComponent)("componentattributes",g.VKq(2,nn,e.addParams))}}let on=(()=>{class CategoryTreeManagerNode{constructor(){this.node={},this.nodes=[],this.action=new g.vpe}get canSave(){let e=new RegExp(/([1-9][0-9]*)|0/);return this.node.node_name&&this.node.node_key&&e.test(this.node.node_key)&&this.keyUnique}get keyUnique(){return this.node.node_key&&0==this.nodes.filter((e=>e.node_key==this.node.node_key&&e.id!=this.node.id)).length}ngOnInit(){this.addParams=this.node.add_params??{},this.node.valid_from=moment(this.node.valid_from),this.node.valid_to=moment(this.node.valid_to)}save(){this.node.add_params=this.addParams,this.node.valid_from=this.node.valid_from.format("YYYY-MM-DD HH:mm:ss"),this.node.valid_to=this.node.valid_to.format("YYYY-MM-DD HH:mm:ss"),this.action.emit(!0),this.self.destroy()}close(){this.action.emit(!1),this.self.destroy()}}return CategoryTreeManagerNode.ɵfac=function(e){return new(e||CategoryTreeManagerNode)},CategoryTreeManagerNode.ɵcmp=g.Xpm({type:CategoryTreeManagerNode,selectors:[["categgory-tree-manager-node"]],decls:65,vars:10,consts:[[3,"close"],["label","LBL_TREE_NODE"],[1,"slds-grid","slds-grid--vertical"],[1,"slds-form-element"],[1,"slds-form-element__label"],["title","required",1,"slds-required"],["label","LBL_NAME"],[1,"slds-form-element__control"],[3,"ngModel","ngModelChange"],[1,"slds-grid"],[1,"slds-form-element","slds-size--1-of-4","slds-p-right--xx-small"],["label","LBL_KEY"],["type","text","required","",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-form-element","slds-size--1-of-4","slds-p-left--xx-small"],["label","LBL_STATUS"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],["value","c"],["label","LBL_STATUS_CREATED"],["value","a"],["label","LBL_STATUS_ACTIVE"],["value","i"],["label","LBL_STATUS_INACTIVE"],["label","LBL_SELECTABLE"],[1,"slds-form-element__control","slds-p-vertical--xx-small"],[1,"slds-form-element","slds-size--1-of-4"],["label","LBL_FAVORITE"],[1,"slds-form-element","slds-size--1-of-2","slds-p-right--xx-small"],["label","LBL_VALID_FROM"],[1,"slds-form-element","slds-size--1-of-2","slds-p-left--xx-small"],["label","LBL_VALID_TO"],["label","LBL_DESCRIPTION"],[1,"slds-textarea",3,"ngModel","ngModelChange"],[4,"ngIf"],[1,"slds-button","slds-button_neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button_brand",3,"disabled","click"],["label","LBL_SAVE"],[3,"component","componentattributes"]],template:function(e,t){1&e&&(g.TgZ(0,"system-modal")(1,"system-modal-header",0),g.NdJ("close",(function(){return t.close()})),g._UZ(2,"system-label",1),g.qZA(),g.TgZ(3,"system-modal-content")(4,"div",2)(5,"div",3)(6,"label",4)(7,"abbr",5),g._uU(8,"* "),g.qZA(),g._UZ(9,"system-label",6),g.qZA(),g.TgZ(10,"div",7)(11,"system-input-label",8),g.NdJ("ngModelChange",(function(e){return t.node.node_name=e})),g.qZA()()(),g.TgZ(12,"div",9)(13,"div",10)(14,"label",4)(15,"abbr",5),g._uU(16,"* "),g.qZA(),g._UZ(17,"system-label",11),g.qZA(),g.TgZ(18,"div",7)(19,"input",12),g.NdJ("ngModelChange",(function(e){return t.node.node_key=e})),g.qZA()()(),g.TgZ(20,"div",13)(21,"label",4)(22,"abbr",5),g._uU(23,"* "),g.qZA(),g._UZ(24,"system-label",14),g.qZA(),g.TgZ(25,"div",15)(26,"select",16),g.NdJ("ngModelChange",(function(e){return t.node.node_status=e})),g.TgZ(27,"option",17),g._UZ(28,"system-label",18),g.qZA(),g.TgZ(29,"option",19),g._UZ(30,"system-label",20),g.qZA(),g.TgZ(31,"option",21),g._UZ(32,"system-label",22),g.qZA()()()(),g.TgZ(33,"div",13)(34,"label",4),g._UZ(35,"system-label",23),g.qZA(),g.TgZ(36,"div",24)(37,"system-checkbox",8),g.NdJ("ngModelChange",(function(e){return t.node.selectable=e})),g.qZA()()(),g.TgZ(38,"div",25)(39,"label",4),g._UZ(40,"system-label",26),g.qZA(),g.TgZ(41,"div",24)(42,"system-checkbox",8),g.NdJ("ngModelChange",(function(e){return t.node.favorite=e})),g.qZA()()()(),g.TgZ(43,"div",9)(44,"div",27)(45,"label",4),g._UZ(46,"system-label",28),g.qZA(),g.TgZ(47,"div",7)(48,"system-input-date",8),g.NdJ("ngModelChange",(function(e){return t.node.valid_from=e})),g.qZA()()(),g.TgZ(49,"div",29)(50,"label",4),g._UZ(51,"system-label",30),g.qZA(),g.TgZ(52,"div",7)(53,"system-input-date",8),g.NdJ("ngModelChange",(function(e){return t.node.valid_to=e})),g.qZA()()()(),g.TgZ(54,"div")(55,"label",4),g._UZ(56,"system-label",31),g.qZA(),g.TgZ(57,"div",7)(58,"textarea",32),g.NdJ("ngModelChange",(function(e){return t.node.node_description=e})),g.qZA()()()(),g.YNc(59,ln,2,4,"div",33),g.qZA(),g.TgZ(60,"system-modal-footer")(61,"button",34),g.NdJ("click",(function(){return t.close()})),g._UZ(62,"system-label",35),g.qZA(),g.TgZ(63,"button",36),g.NdJ("click",(function(){return t.save()})),g._UZ(64,"system-label",37),g.qZA()()()),2&e&&(g.xp6(11),g.Q6J("ngModel",t.node.node_name),g.xp6(8),g.Q6J("ngModel",t.node.node_key),g.xp6(7),g.Q6J("ngModel",t.node.node_status),g.xp6(11),g.Q6J("ngModel",t.node.selectable),g.xp6(5),g.Q6J("ngModel",t.node.favorite),g.xp6(6),g.Q6J("ngModel",t.node.valid_from),g.xp6(5),g.Q6J("ngModel",t.node.valid_to),g.xp6(5),g.Q6J("ngModel",t.node.node_description),g.xp6(1),g.Q6J("ngIf",t.addParamsComponent),g.xp6(4),g.Q6J("disabled",!t.canSave))},dependencies:[i.O5,n.YN,n.Kr,n.Fj,n.EJ,n.JJ,n.Q7,n.On,I.U,tn.T,sn.z,Q.$,T._,it.j,nt.x,lt.p,ot.y],encapsulation:2}),CategoryTreeManagerNode})();function an(e,t){if(1&e&&(g.TgZ(0,"option",21),g._uU(1),g.qZA()),2&e){const e=t.$implicit;g.Q6J("value",e.component),g.xp6(1),g.Oqu(e.component)}}let dn=(()=>{class CategoryTreeAddModal{constructor(e,t,s,i,n,l,o){this.metadata=e,this.language=t,this.backend=s,this.utils=i,this.toast=n,this.modal=l,this.broadcast=o,this.componentconfig={},this.components=[],this.categoryTrees=[],this.action=new g.vpe}ngOnInit(){this.componentconfig=this.metadata.getComponentConfig("CategoryTreeAddModal"),this.getComponentsList()}getComponentsList(){this.components=this.metadata.getComponentSetObjects(this.componentconfig.componentset)}close(){this.self.destroy()}get disabled(){if(!this.name)return!0}get value(){return this.selectedComponent}set value(e){this.selectedComponent=e}save(){const e=this.modal.await("LBL_SAVING_DATA");this.newActiveTreeId=this.utils.generateGuid(),this.backend.postRequest(`configuration/spiceui/core/categorytrees/${this.newActiveTreeId}`,{},{id:this.newActiveTreeId,name:this.name,add_params_component:this.selectedComponent}).subscribe({next:()=>{let t={id:this.newActiveTreeId,name:this.name,add_params_component:this.selectedComponent};this.categoryTrees.push(t),this.action.emit("save"),e.emit(!0),this.close(),this.toast.sendToast("LBL_CATEGORYTREE_SAVED","success")},error:()=>{e.emit(!0),this.toast.sendToast("LBL_SAVING_ERROR","error")}})}}return CategoryTreeAddModal.ɵfac=function(e){return new(e||CategoryTreeAddModal)(g.Y36(h.Pu),g.Y36(f.d),g.Y36(p.y),g.Y36(b.A),g.Y36(y.A),g.Y36(M.o),g.Y36(gs.f))},CategoryTreeAddModal.ɵcmp=g.Xpm({type:CategoryTreeAddModal,selectors:[["category-tree-add-modal"]],decls:25,vars:5,consts:[[3,"close"],["label","MSG_ENTER_TREE_NAME"],["margin","medium"],[1,"slds-grid","slds-grid--vertical","slds-p-top--medium","slds-p-bottom--medium"],[1,"slds-grid"],[1,"slds-form-element","slds-size--1-of-2","slds-p-right--xx-small"],[1,"slds-form-element__label"],[1,"slds-required"],["label","LBL_NAME"],[3,"ngModel","ngModelChange"],[1,"slds-form-element","slds-size--1-of-2","slds-p-left--xx-small"],["label","LBL_SELECT_COMPONENT"],[1,"slds-select_container"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"slds-text-align--right","slds-p-vertical--x-small"],["type","button",1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],["type","button",1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_SAVE"],[3,"value"]],template:function(e,t){1&e&&(g.TgZ(0,"system-modal")(1,"system-modal-header",0),g.NdJ("close",(function(){return t.close()})),g._UZ(2,"system-label",1),g.qZA(),g.TgZ(3,"system-modal-content",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"label",6)(8,"abbr",7),g._uU(9,"* "),g.qZA(),g._UZ(10,"system-label",8),g.qZA(),g.TgZ(11,"system-input-text",9),g.NdJ("ngModelChange",(function(e){return t.name=e})),g.qZA()(),g.TgZ(12,"div",10)(13,"label",6),g._UZ(14,"system-label",11),g.qZA(),g.TgZ(15,"div",12)(16,"select",13),g.NdJ("ngModelChange",(function(e){return t.value=e})),g._UZ(17,"option",14),g.YNc(18,an,2,2,"option",15),g.qZA()()()()()(),g.TgZ(19,"system-modal-footer")(20,"div",16)(21,"button",17),g.NdJ("click",(function(){return t.close()})),g._UZ(22,"system-label",18),g.qZA(),g.TgZ(23,"button",19),g.NdJ("click",(function(){return t.save()})),g._UZ(24,"system-label",20),g.qZA()()()()),2&e&&(g.xp6(11),g.Q6J("ngModel",t.name),g.xp6(5),g.Q6J("disabled",0==t.components.length)("ngModel",t.value),g.xp6(2),g.Q6J("ngForOf",t.components),g.xp6(5),g.Q6J("disabled",t.disabled))},dependencies:[i.sg,n.YN,n.Kr,n.EJ,n.JJ,n.On,q.Z,T._,it.j,nt.x,lt.p,ot.y],encapsulation:2}),CategoryTreeAddModal})();var rn=s(7579);let cn=(()=>{class ComponentsetManagerComponentsetDetails{constructor(e,t){this.view=e,this.language=t,this.component={},this.configcomponent="",this.configValues={},this.selectedComponent={}}ngOnChanges(e){this.component.component&&(this.selectComponent(this.component),this.configcomponent=this.component.component,this.configValues=this.component.componentconfig)}selectComponent(e){e.id?this.selectedComponent=e:this.selectedComponent={}}}return ComponentsetManagerComponentsetDetails.ɵfac=function(e){return new(e||ComponentsetManagerComponentsetDetails)(g.Y36(Hs.e),g.Y36(f.d))},ComponentsetManagerComponentsetDetails.ɵcmp=g.Xpm({type:ComponentsetManagerComponentsetDetails,selectors:[["componentsetmanager-componentset-details"]],inputs:{component:"component"},features:[g.TTD],decls:12,vars:5,consts:[[1,"slds-grid"],[1,"slds-form-element","slds-size_2-of-3"],[1,"slds-form-element__label"],["label","LBL_COMPONENT"],[1,"slds-form-element__control"],["disabled","","type","text",1,"slds-input",3,"ngModel"],[1,"slds-form-element","slds-size_1-of-3","slds-p-left_x-small"],["label","LBL_PACKAGE"],["type","text",1,"slds-input",3,"disabled","ngModel","ngModelChange"],[3,"component","configValues"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0)(1,"div",1)(2,"label",2),g._UZ(3,"system-label",3),g.qZA(),g.TgZ(4,"div",4),g._UZ(5,"input",5),g.qZA()(),g.TgZ(6,"div",6)(7,"label",2),g._UZ(8,"system-label",7),g.qZA(),g.TgZ(9,"div",4)(10,"input",8),g.NdJ("ngModelChange",(function(e){return t.component.package=e})),g.qZA()()()(),g._UZ(11,"workbench-config",9)),2&e&&(g.xp6(5),g.Q6J("ngModel",t.component.component),g.xp6(5),g.Q6J("disabled",!t.view.isEditMode())("ngModel",t.component.package),g.xp6(1),g.Q6J("component",t.configcomponent)("configValues",t.configValues))},dependencies:[n.Fj,n.JJ,n.On,T._,Ps],encapsulation:2}),ComponentsetManagerComponentsetDetails})();function gn(e,t){if(1&e&&(g.TgZ(0,"option",20),g._uU(1),g.qZA()),2&e){const e=t.$implicit;g.Q6J("value",e),g.xp6(1),g.hij("",e," ")}}function un(e,t){if(1&e&&(g.TgZ(0,"option",23),g._uU(1),g.qZA()),2&e){const e=t.$implicit;g.Q6J("ngValue",e.id),g.xp6(1),g.hij(" ",e.name," ")}}function mn(e,t){if(1&e&&(g.TgZ(0,"optgroup",21),g.YNc(1,un,2,2,"option",22),g.qZA()),2&e){const e=g.oxw();g.xp6(1),g.Q6J("ngForOf",e.getComponentSets("custom"))}}function pn(e,t){if(1&e&&(g.TgZ(0,"option",23),g._uU(1),g.qZA()),2&e){const e=t.$implicit;g.Q6J("ngValue",e.id),g.xp6(1),g.hij(" ",e.name," ")}}function hn(e,t){if(1&e&&(g.TgZ(0,"optgroup",24),g.YNc(1,pn,2,2,"option",22),g.qZA()),2&e){const e=g.oxw();g.xp6(1),g.Q6J("ngForOf",e.getComponentSets("global"))}}function fn(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"button",17),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw();return g.KtG(t.duplicateComponentset())})),g._UZ(1,"system-utility-icon",25),g.qZA()}if(2&e){const e=g.oxw();g.Q6J("disabled",!e.allowBarButtons||!e.currentComponentSet)}}function bn(e,t){if(1&e&&(g.TgZ(0,"a",56),g._uU(1),g.qZA()),2&e){const e=g.oxw().$implicit,t=g.oxw(2);g.xp6(1),g.AsE(" ",e.component," ",t.getComponentSetItemName(e)," ")}}function _n(e,t){if(1&e&&(g.TgZ(0,"div",57)(1,"a",56),g._UZ(2,"system-icon",58),g.TgZ(3,"del",59),g._uU(4),g.qZA()()()),2&e){const e=g.oxw().$implicit,t=g.oxw(2);g.xp6(2),g.Q6J("icon","warning")("sprite","utility")("size","x-small")("addclasses","slds-m-vertical--xxx-small slds-m-horizontal--xx-small"),g.xp6(2),g.AsE("",e.component," ",t.getComponentSetItemName(e),"")}}const Zn=function(e){return{"slds-theme--shade":e}};function yn(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",50),g.NdJ("click",(function(){const t=g.CHM(e).$implicit,s=g.oxw(2);return g.KtG(s.selectItem(t))})),g._UZ(1,"system-utility-icon",51),g.YNc(2,bn,2,2,"a",52),g.YNc(3,_n,5,6,"div",53),g.TgZ(4,"div",54)(5,"button",55),g.NdJ("click",(function(){const t=g.CHM(e).$implicit,s=g.oxw(2);return g.KtG(s.deleteComponent(t))})),g._UZ(6,"system-button-icon",44),g.qZA()()()}if(2&e){const e=t.$implicit,s=g.oxw(2);g.Q6J("ngClass",g.VKq(7,Zn,s.isSelected(e.id))),g.xp6(1),g.Q6J("icon","rows")("size","x-small"),g.xp6(1),g.Q6J("ngIf",!s.componentDeprecated(e)),g.xp6(1),g.Q6J("ngIf",s.componentDeprecated(e)),g.xp6(2),g.Q6J("disabled",!s.view.isEditMode()),g.xp6(1),g.Q6J("icon","delete")}}function Mn(e,t){if(1&e&&g._UZ(0,"componentsetmanager-componentset-details",60),2&e){const e=g.oxw(2);g.Q6J("component",e.selectedComponent)}}function xn(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",26)(1,"div",27)(2,"div",28)(3,"div",29)(4,"label",4),g._UZ(5,"system-label",30),g.qZA(),g.TgZ(6,"div",31),g._UZ(7,"system-utility-icon",32)(8,"input",33),g.qZA()(),g.TgZ(9,"div",29)(10,"label",4),g._UZ(11,"system-label",34),g.qZA(),g.TgZ(12,"div",6)(13,"input",35),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.currentComponentSetName=t)})),g.qZA()()(),g.TgZ(14,"div",29)(15,"label",4),g._UZ(16,"system-label",36),g.qZA(),g.TgZ(17,"div",6)(18,"input",35),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.currentComponentSetPackage=t)})),g.qZA()()(),g.TgZ(19,"div",29)(20,"label",4),g._UZ(21,"system-label",37),g.qZA(),g.TgZ(22,"div",6),g._UZ(23,"input",33),g.qZA()()()(),g.TgZ(24,"div",38)(25,"div",39)(26,"div",40),g.NdJ("cdkDropListDropped",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.drop(t))})),g.YNc(27,yn,7,9,"div",41),g.qZA(),g.TgZ(28,"div",42)(29,"button",43),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw();return g.KtG(t.addComponent())})),g._UZ(30,"system-button-icon",44),g.qZA()()(),g.TgZ(31,"div",45),g.YNc(32,Mn,1,1,"componentsetmanager-componentset-details",46),g.qZA()(),g.TgZ(33,"div",47)(34,"button",48),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw();return g.KtG(t.saveChanges())})),g._UZ(35,"system-label",49),g.qZA()()()}if(2&e){const e=g.oxw();g.xp6(7),g.Q6J("icon","global"==e.componentSetType?"world":"user"),g.xp6(1),g.Q6J("ngModel",e.componentSetType),g.xp6(5),g.Q6J("disabled",!e.view.isEditMode())("ngModel",e.currentComponentSetName),g.xp6(5),g.Q6J("disabled",!e.view.isEditMode())("ngModel",e.currentComponentSetPackage),g.xp6(5),g.Q6J("ngModel",e.currentComponentSet),g.xp6(4),g.Q6J("ngForOf",e.getComponentSetItems()),g.xp6(2),g.Q6J("disabled",!e.view.isEditMode()),g.xp6(1),g.Q6J("icon","new"),g.xp6(2),g.Q6J("ngIf",e.selectedId),g.xp6(2),g.Q6J("disabled",!e.view.isEditMode())}}let vn=(()=>{class ComponentsetManager{constructor(e,t,s,i,n,l,o,a,d){this.backend=e,this.metadata=t,this.language=s,this.modelutilities=i,this.broadcast=n,this.toast=l,this.modalservice=o,this.view=a,this.configurationService=d,this.edit_mode="custom",this.allowBarButtons=!0,this.change_request_required=!1,this.modules=[],this.currentModule="*",this.currentComponentSet="",this.currentComponentSetItems=[],this.selectedId="",this.selectedComponent={},this.showAddDialog=!1,this.showComponentsetDetails=!1,this.modules=this.metadata.getModules(),this.modules.sort(),this.checkMode()}checkMode(){this.edit_mode=this.configurationService.getCapabilityConfig("core").edit_mode,this.change_request_required=!!this.configurationService.getCapabilityConfig("systemdeployment").change_request_required,"none"!=this.edit_mode&&"custom"!=this.edit_mode&&"all"!=this.edit_mode&&(this.edit_mode="custom"),this.change_request_required?this.backend.getRequest("module/SystemDeploymentCRs/active").subscribe((e=>{""==e.id?(this.setNoneMode(),this.toast.sendToast(this.language.getLabel("LBL_ACTIVATE_CR_WARNING"),"warning",null,3)):"all"==this.edit_mode?this.setAllMode():"custom"==this.edit_mode?this.setCustomMode():this.setNoneMode()})):"all"==this.edit_mode?this.setAllMode():"custom"==this.edit_mode?this.setCustomMode():this.setNoneMode()}setNoneMode(){this.view.setViewMode(),this.allowBarButtons=!1}setCustomMode(){"custom"==this.componentSetType?this.view.setEditMode():this.view.setViewMode()}setAllMode(){this.view.setEditMode()}get showDetailIcon(){return this.showComponentsetDetails?"chevronup":"chevrondown"}toggleDetail(){this.showComponentsetDetails=!this.showComponentsetDetails}get componentSetType(){return this.currentComponentSet?this.metadata.getComponentSet(this.currentComponentSet).type:""}get currentComponentSetPackage(){return this.metadata.getComponentSet(this.currentComponentSet).package}set currentComponentSetPackage(e){this.metadata.getComponentSet(this.currentComponentSet).package=e}get currentComponentSetName(){return this.metadata.getComponentSet(this.currentComponentSet).name}set currentComponentSetName(e){this.metadata.getComponentSet(this.currentComponentSet).name=e}componentDeprecated(e){if(!e||e&&!e.component)return!1;return"1"==this.metadata.getSystemComponents(e.module).find((t=>t.component===e.component)).deprecated}getComponentSetItemName(e){return e.componentconfig.name?`(${this.language.getLabel(e.componentconfig.name)})`:e.componentconfig.object?`(${this.language.getModuleName(e.componentconfig.object)})`:void 0}getComponentSets(e){if(e){let t=[],s=this.metadata.getComponentSets(this.currentModule);for(let i of s)i.type==e&&t.push(i);return t}return this.metadata.getComponentSets(this.currentModule)}getComponentSetItems(){return this.currentComponentSet?this.metadata.getComponentSetObjects(this.currentComponentSet):[]}selectItem(e){this.selectedId=e.id,this.selectedComponent=e}isSelected(e){return e==this.selectedId}getComponentsetConfig(){if(this.selectedComponent.componentconfig)return JSON.stringify(this.selectedComponent.componentconfig)}reset(){this.selectedId="",this.selectedComponent={},this.currentComponentSet=""}selectComponentSet(){this.checkMode(),this.selectedId="",this.selectedComponent={}}addComponent(){this.showAddDialog=!0,this.modalservice.openModal("ComponentsetManagerAddDialog").subscribe((e=>{e.instance.module=this.currentModule,e.instance.parent=this.currentComponentSet}))}addComponentset(){this.reset(),this.editComponentset()}duplicateComponentset(){let e=this.currentComponentSet;this.reset(),this.editComponentset().subscribe({next:t=>{let s=this.metadata.getComponentSetObjects(e);for(let e of s)this.metadata.addComponentToComponentset(this.modelutilities.generateGuid(),t.id,e.component,e.componentconfig)}})}editComponentset(){let e=new rn.x;return this.modalservice.openModal("ComponentsetManagerEditDialog").subscribe((t=>{t.instance.componentset=this.currentComponentSet,t.instance.edit_mode=this.edit_mode,t.instance.closedialog.subscribe((t=>{if(!1!==t)if(""===this.currentComponentSet){let s=this.modelutilities.generateGuid();this.metadata.addComponentSet(s,this.currentModule,t.name,t.type),this.currentComponentSet=s,this.checkMode(),e.next({id:s,type:t.type})}else{let e=this.metadata.getComponentSet(this.currentComponentSet);e.name=e.name}e.complete()}))})),e.asObservable()}deleteComponent(e){let t=this.metadata.getComponentSetObjects(this.currentComponentSet);t.splice(t.findIndex((t=>t.id==e.id)),1)}drop(e){let t=this.metadata.getComponentSetObjects(this.currentComponentSet);t.splice(e.currentIndex,0,t.splice(e.previousIndex,1)[0]);let s=0;for(let e of t)e.sequence=s,s++}saveChanges(){this.backend.getRequest("configuration/spiceui/core/components").subscribe((e=>{let t=this.metadata.getRawComponentSets(),s={},i={},n={};for(let n in t)e.componentsets[n]?(JSON.stringify(t[n])!==JSON.stringify(e.componentsets[n])&&(i[n]=t[n]),delete e.componentsets[n]):s[n]=t[n];n=e.componentsets;let l={add:s,update:i,delete:n};this.backend.postRequest("configuration/spiceui/core/componentsets",{},l).subscribe((e=>{this.broadcast.broadcastMessage("metadata.updatecomponentsets",l),this.toast.sendToast("changes saved")}))}))}}return ComponentsetManager.ɵfac=function(e){return new(e||ComponentsetManager)(g.Y36(p.y),g.Y36(h.Pu),g.Y36(f.d),g.Y36(b.A),g.Y36(gs.f),g.Y36(y.A),g.Y36(M.o),g.Y36(Hs.e),g.Y36(x.C))},ComponentsetManager.ɵcmp=g.Xpm({type:ComponentsetManager,selectors:[["ng-component"]],features:[g._Bn([Hs.e])],decls:26,vars:12,consts:[["titlelabel","LBL_COMPONENTSETSET_MANAGER"],[1,"slds-p-around--small","slds-border--bottom"],[1,"slds-grid","slds-grid--vertical-align-center","slds-form--inline"],[1,"slds-form-element"],[1,"slds-form-element__label"],["label","LBL_MODULE"],[1,"slds-form-element__control"],[1,"slds-select_container",2,"min-width","250px"],[1,"slds-select",3,"ngModel","disabled","ngModelChange","change"],["value","*"],[3,"value",4,"ngFor","ngForOf"],[1,"slds-form-element__control",2,"min-width","250px"],[1,"slds-select_container"],["label","custom Componentsets",4,"ngIf"],["label","global Componentsets",4,"ngIf"],[1,"slds-button-group","slds-col--bump-left"],["type","button","class","slds-button slds-button_icon slds-button_icon-border-filled",3,"disabled","click",4,"ngIf"],["type","button",1,"slds-button","slds-button_icon","slds-button_icon-border-filled",3,"disabled","click"],[3,"icon","size"],["class","slds-theme--default",4,"ngIf"],[3,"value"],["label","custom Componentsets"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"],["label","global Componentsets"],["icon","copy","size","x-small"],[1,"slds-theme--default"],[1,"slds-p-around--small","slds-border--bottom","slds-theme--default"],[1,"slds-grid","slds-grid--vertical-align-end"],[1,"slds-form-element","slds-p-right--x-small","slds-size--1-of-4"],["label","LBL_SCOPE"],[1,"slds-form-element__control","slds-input-has-icon","slds-input-has-icon_left"],["addclasses","slds-icon slds-input__icon slds-input__icon_left slds-icon-text-default",3,"icon"],["type","text","disabled","",1,"slds-input",3,"ngModel"],["label","LBL_NAME"],["type","text",1,"slds-input",3,"disabled","ngModel","ngModelChange"],["label","LBL_PACKAGE"],["label","LBL_ID"],[1,"slds-grid"],[1,"slds-size--2-of-5","slds-p-horizontal--small","slds-p-top--x-small","slds-border--right"],["role","application","cdkDropList","",1,"dragboundary",2,"max-width","none",3,"cdkDropListDropped"],["class","slds-p-vertical--xx-small slds-grid slds-grid--align-spread slds-grid--vertical-align-center","cdkDrag","","cdkDragBoundary",".dragboundary",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"slds-p-around--small","slds-align--absolute-center","slds-border--top","slds-m-top--small"],["title","add item",1,"slds-button","slds-button--icon",3,"disabled","click"],[3,"icon"],[1,"slds-size--3-of-5","slds-p-horizontal--small","slds-p-vertical--x-small"],[3,"component",4,"ngIf"],[1,"slds-text-align--right","slds-p-around--small","slds-border--top"],["type","button",1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_SAVE"],["cdkDrag","","cdkDragBoundary",".dragboundary",1,"slds-p-vertical--xx-small","slds-grid","slds-grid--align-spread","slds-grid--vertical-align-center",3,"ngClass","click"],["cdkDragHandle","",1,"slds-p-right--xx-small",2,"cursor","move",3,"icon","size"],["href","javascript:void(0);","role","presentation","class","slds-truncate",4,"ngIf"],["class","slds-clearfix",4,"ngIf"],[1,"slds-col--bump-left"],["title","unlink item",1,"slds-button","slds-button--icon",3,"disabled","click"],["href","javascript:void(0);","role","presentation",1,"slds-truncate"],[1,"slds-clearfix"],[1,"slds-float_left",3,"icon","sprite","size","addclasses"],[1,"slds-float_left"],[3,"component"]],template:function(e,t){1&e&&(g._UZ(0,"workbench-header",0),g.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"label",4),g._UZ(5,"system-label",5),g.qZA(),g.TgZ(6,"div",6)(7,"div",7)(8,"select",8),g.NdJ("ngModelChange",(function(e){return t.currentModule=e}))("change",(function(){return t.reset()})),g.TgZ(9,"option",9),g._uU(10,"*"),g.qZA(),g.YNc(11,gn,2,2,"option",10),g.qZA()()()(),g.TgZ(12,"div",3)(13,"label",4),g._uU(14,"Componentset"),g.qZA(),g.TgZ(15,"div",11)(16,"div",12)(17,"select",8),g.NdJ("ngModelChange",(function(e){return t.currentComponentSet=e}))("change",(function(){return t.selectComponentSet()})),g._UZ(18,"option"),g.YNc(19,mn,2,1,"optgroup",13),g.YNc(20,hn,2,1,"optgroup",14),g.qZA()()()(),g.TgZ(21,"div",15),g.YNc(22,fn,2,1,"button",16),g.TgZ(23,"button",17),g.NdJ("click",(function(){return t.addComponentset()})),g._UZ(24,"system-utility-icon",18),g.qZA()()()(),g.YNc(25,xn,36,12,"div",19)),2&e&&(g.xp6(8),g.Q6J("ngModel",t.currentModule)("disabled",0==t.modules.length),g.xp6(3),g.Q6J("ngForOf",t.modules),g.xp6(6),g.Q6J("ngModel",t.currentComponentSet)("disabled",0==t.getComponentSets().length),g.xp6(2),g.Q6J("ngIf",t.getComponentSets("custom").length>0),g.xp6(1),g.Q6J("ngIf",t.getComponentSets("global").length>0),g.xp6(2),g.Q6J("ngIf",t.currentComponentSet),g.xp6(1),g.Q6J("disabled",!t.allowBarButtons),g.xp6(1),g.Q6J("icon","add")("size","x-small"),g.xp6(1),g.Q6J("ngIf",t.currentComponentSet))},dependencies:[i.mk,i.sg,i.O5,n.YN,n.Kr,n.Fj,n.EJ,n.JJ,n.On,A.J,Pe.f,T._,u.r,c.Wj,c.Zt,c.Bh,cn,We],encapsulation:2}),ComponentsetManager})();function An(e,t){if(1&e&&(g.TgZ(0,"option",20),g._uU(1),g.qZA()),2&e){const e=t.$implicit;g.Q6J("value",e.id),g.xp6(1),g.Oqu(e.module)}}function Tn(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"option",21),g.NdJ("dblclick",(function(){g.CHM(e);const t=g.oxw();return g.KtG(t.add())})),g._uU(1),g.qZA()}if(2&e){const e=t.$implicit,s=g.oxw();g.Q6J("value",e.component),g.xp6(1),g.Oqu(s.componentName(e))}}function Ln(e,t){1&e&&(g.TgZ(0,"div",22)(1,"span",23),g._uU(2,"warning"),g.qZA(),g.TgZ(3,"span",24),g.O4$(),g.TgZ(4,"svg",25),g._UZ(5,"use",26),g.qZA()(),g.kcU(),g.TgZ(6,"h2"),g._UZ(7,"system-label",27),g.qZA()())}let Cn=(()=>{class ComponentsetManagerAddDialog{constructor(e,t,s,i){this.backend=e,this.metadata=t,this.language=s,this.modelutilities=i,this.module="",this.parent="",this.component="",this.systemmodule="",this.systemmodules=[],this.showDeprecatedWarning=!1,this.systemmodules=this.metadata.getSystemModules()}get components(){return this.componentFilter?this.metadata.getSystemComponents(this.systemmodule).filter((e=>e.component.toLowerCase().indexOf(this.componentFilter.toLowerCase())>=0)):this.metadata.getSystemComponents(this.systemmodule)}get filteredmodules(){return this.moduleFilter?this.systemmodules.filter((e=>e.module.toLowerCase().indexOf(this.moduleFilter.toLowerCase())>=0)):this.systemmodules}componentName(e){return e?"1"==e.deprecated?e.component+" | dep.":e.component:""}cancelDialog(){this.self.destroy()}onModalEscX(){this.cancelDialog()}add(){this.metadata.addComponentToComponentset(this.modelutilities.generateGuid(),this.parent,this.component),this.self.destroy()}checkDep(e){"1"==this.components.find((t=>t.component===e)).deprecated?this.showDeprecatedWarning=!0:this.showDeprecatedWarning=!1}}return ComponentsetManagerAddDialog.ɵfac=function(e){return new(e||ComponentsetManagerAddDialog)(g.Y36(p.y),g.Y36(h.Pu),g.Y36(f.d),g.Y36(b.A))},ComponentsetManagerAddDialog.ɵcmp=g.Xpm({type:ComponentsetManagerAddDialog,selectors:[["componensetmanager-add-dialog"]],inputs:{module:"module",parent:"parent"},decls:27,vars:8,consts:[["size","medium"],[3,"close"],["label","LBL_ADD_COMPONENT"],[1,"slds-grid"],[1,"slds-form-element","slds-size--1-of-2","slds-p-right--xx-small"],[1,"slds-form-element__label"],["label","LBL_MODULE"],[1,"slds-input","slds-m-bottom--small",3,"ngModel","ngModelChange"],[1,"slds-form-element__control"],[1,"slds-select_container"],["size","20",1,"slds-select",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"slds-form-element","slds-size--1-of-2","slds-p-left--xx-small"],["label","LBL_COMPONENT"],[3,"value","dblclick",4,"ngFor","ngForOf"],["class","slds-notify slds-notify_alert slds-theme_alert-texture slds-theme_warning","role","alert",4,"ngIf"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_ADD"],[3,"value"],[3,"value","dblclick"],["role","alert",1,"slds-notify","slds-notify_alert","slds-theme_alert-texture","slds-theme_warning"],[1,"slds-assistive-text"],["title","Description of icon when needed",1,"slds-icon_container","slds-icon-utility-warning","slds-m-right_x-small"],["aria-hidden","true",1,"slds-icon","slds-icon_x-small"],[0,"xlink","href","/assets/icons/utility-sprite/svg/symbols.svg#warning"],["label","LBL_DEPRECATED_MSG"]],template:function(e,t){1&e&&(g.TgZ(0,"system-modal",0)(1,"system-modal-header",1),g.NdJ("close",(function(){return t.cancelDialog()})),g._UZ(2,"system-label",2),g.qZA(),g.TgZ(3,"system-modal-content")(4,"div",3)(5,"div",4)(6,"label",5),g._UZ(7,"system-label",6),g.qZA(),g.TgZ(8,"input",7),g.NdJ("ngModelChange",(function(e){return t.moduleFilter=e})),g.qZA(),g.TgZ(9,"div",8)(10,"div",9)(11,"select",10),g.NdJ("ngModelChange",(function(e){return t.systemmodule=e})),g.YNc(12,An,2,2,"option",11),g.qZA()()()(),g.TgZ(13,"div",12)(14,"label",5),g._UZ(15,"system-label",13),g.qZA(),g.TgZ(16,"input",7),g.NdJ("ngModelChange",(function(e){return t.componentFilter=e})),g.qZA(),g.TgZ(17,"div",8)(18,"div",9)(19,"select",10),g.NdJ("ngModelChange",(function(e){return t.component=e}))("ngModelChange",(function(){return t.checkDep(t.component)})),g.YNc(20,Tn,2,2,"option",14),g.qZA()()()()(),g.YNc(21,Ln,8,0,"div",15),g.qZA(),g.TgZ(22,"system-modal-footer")(23,"button",16),g.NdJ("click",(function(){return t.cancelDialog()})),g._UZ(24,"system-label",17),g.qZA(),g.TgZ(25,"button",18),g.NdJ("click",(function(){return t.add()})),g._UZ(26,"system-label",19),g.qZA()()()),2&e&&(g.xp6(8),g.Q6J("ngModel",t.moduleFilter),g.xp6(3),g.Q6J("ngModel",t.systemmodule),g.xp6(1),g.Q6J("ngForOf",t.filteredmodules),g.xp6(4),g.Q6J("ngModel",t.componentFilter),g.xp6(3),g.Q6J("ngModel",t.component),g.xp6(1),g.Q6J("ngForOf",t.components),g.xp6(1),g.Q6J("ngIf",t.showDeprecatedWarning),g.xp6(4),g.Q6J("disabled",!t.component))},dependencies:[i.sg,i.O5,n.YN,n.Kr,n.Fj,n.EJ,n.JJ,n.On,T._,it.j,nt.x,lt.p,ot.y],encapsulation:2}),ComponentsetManagerAddDialog})();function qn(e,t){1&e&&(g.TgZ(0,"option",21),g._uU(1,"Global"),g.qZA())}let Jn=(()=>{class ComponentsetManagerEditDialog{constructor(e,t){this.metadata=e,this.language=t,this.closedialog=new g.vpe,this.componentset="",this.edit_mode="",this.adding=!1,this.componentsetname="",this.componentsettype=""}ngOnInit(){if(""!==this.componentset){let e=this.metadata.getComponentSet(this.componentset);this.componentsetname=e.name,this.componentsettype=e.type,this.adding=!1}else this.adding=!0,this.componentsettype="custom"}cancelDialog(){this.closedialog.emit(!1),this.self.destroy()}onModalEscX(){this.cancelDialog()}add(){this.closedialog.emit({name:this.componentsetname,type:this.componentsettype}),this.self.destroy()}}return ComponentsetManagerEditDialog.ɵfac=function(e){return new(e||ComponentsetManagerEditDialog)(g.Y36(h.Pu),g.Y36(f.d))},ComponentsetManagerEditDialog.ɵcmp=g.Xpm({type:ComponentsetManagerEditDialog,selectors:[["componensetmanager-edit-dialog"]],inputs:{componentset:"componentset",edit_mode:"edit_mode"},outputs:{closedialog:"closedialog"},decls:27,vars:6,consts:[["role","dialog","tabindex","-1","aria-labelledby","header43",1,"slds-modal","slds-fade-in-open"],[1,"slds-modal__container"],[1,"slds-modal__header","slds-theme--shade"],["title","Close",1,"slds-button","slds-modal__close","slds-button--icon-inverse",3,"click"],[3,"icon","size"],["id","header43",1,"slds-text-heading--medium"],[1,"slds-modal__content","slds-p-around--medium"],[1,"slds-form-element","slds-m-top--small"],[1,"slds-form-element__label"],[1,"slds-form-element__control"],["type","text","placeholder","name",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-form-element"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","disabled","ngModelChange"],["value","global",4,"ngIf"],["value","custom"],[1,"slds-modal__footer"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_SAVE"],["value","global"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),g.NdJ("click",(function(){return t.cancelDialog()})),g._UZ(4,"system-button-icon",4),g.qZA(),g.TgZ(5,"h2",5),g._uU(6,"Add Componentset"),g.qZA()(),g.TgZ(7,"div",6)(8,"div",7)(9,"label",8),g._uU(10,"Componentset Name"),g.qZA(),g.TgZ(11,"div",9)(12,"input",10),g.NdJ("ngModelChange",(function(e){return t.componentsetname=e})),g.qZA()()(),g.TgZ(13,"div",11)(14,"label",8),g._uU(15,"type"),g.qZA(),g.TgZ(16,"div",9)(17,"div",12)(18,"select",13),g.NdJ("ngModelChange",(function(e){return t.componentsettype=e})),g.YNc(19,qn,2,0,"option",14),g.TgZ(20,"option",15),g._uU(21,"Custom"),g.qZA()()()()()(),g.TgZ(22,"div",16)(23,"button",17),g.NdJ("click",(function(){return t.cancelDialog()})),g._UZ(24,"system-label",18),g.qZA(),g.TgZ(25,"button",19),g.NdJ("click",(function(){return t.add()})),g._UZ(26,"system-label",20),g.qZA()()()()),2&e&&(g.xp6(4),g.Q6J("icon","close")("size","large"),g.xp6(8),g.Q6J("ngModel",t.componentsetname),g.xp6(6),g.Q6J("ngModel",t.componentsettype)("disabled",!t.adding),g.xp6(1),g.Q6J("ngIf","all"==t.edit_mode))},dependencies:[i.O5,n.YN,n.Kr,n.Fj,n.EJ,n.JJ,n.On,A.J,T._],encapsulation:2}),ComponentsetManagerEditDialog})();var Nn=s(9503),kn=s(8658);function wn(e,t){if(1&e&&(g.TgZ(0,"option",20),g._uU(1),g.qZA()),2&e){const e=t.$implicit;g.s9C("value",e),g.xp6(1),g.Oqu(e)}}function Un(e,t){if(1&e&&(g.TgZ(0,"option",20),g._uU(1),g.qZA()),2&e){const e=t.$implicit;g.s9C("value",e.value),g.xp6(1),g.Oqu(e.display)}}function En(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"tr",12)(1,"td")(2,"div",13)(3,"select",14),g.NdJ("ngModelChange",(function(t){const s=g.CHM(e).$implicit;return g.KtG(s.fieldname=t)})),g.YNc(4,wn,2,2,"option",15),g.qZA()()(),g.TgZ(5,"td")(6,"div",13)(7,"select",14),g.NdJ("ngModelChange",(function(t){const s=g.CHM(e).$implicit;return g.KtG(s.comparator=t)})),g.YNc(8,Un,2,2,"option",15),g.qZA()()(),g.TgZ(9,"td")(10,"div",16)(11,"textarea",17),g.NdJ("ngModelChange",(function(t){const s=g.CHM(e).$implicit;return g.KtG(s.valuations=t)})),g.ALo(12,"maybejson"),g.qZA()()(),g.TgZ(13,"td")(14,"button",18),g.NdJ("click",(function(){const t=g.CHM(e).$implicit,s=g.oxw();return g.KtG(s.removeCondition(t.id))})),g._UZ(15,"system-button-icon",19),g.qZA()()()}if(2&e){const e=t.$implicit,s=g.oxw();g.xp6(3),g.Q6J("ngModel",e.fieldname),g.xp6(1),g.Q6J("ngForOf",s.fieldname_options),g.xp6(3),g.Q6J("ngModel",e.comparator),g.xp6(1),g.Q6J("ngForOf",s.comparator_options),g.xp6(3),g.Q6J("ngModel",g.lcZ(12,7,e.valuations)),g.xp6(4),g.Q6J("icon","delete")("size","small")}}let Dn=(()=>{class ValidationRulesConditions{constructor(e,t,s){this.metadata=e,this.language=t,this.utils=s,this.comparator_options=[],this.fieldname_options=[]}ngOnInit(){this.comparator_options=this.language.getDisplayOptions("comparators_dom",!0);for(let e in this.metadata.getModuleFields(this.data.module))this.fieldname_options.push(e);this.fieldname_options.sort(),this.data.conditions.sort(((e,t)=>!!e.fieldname&&e.fieldname.localeCompare(t.fieldname)))}get conditions(){return this.data.conditions.filter((e=>1!=e.deleted))}addCondition(){return this.data.conditions.push({id:this.utils.generateGuid(),sysuimodelvalidation_id:this.data.id,isnewrecord:!0})}removeCondition(e){let t=this.data.conditions.findIndex((t=>t.id==e));return this.data.conditions[t]._is_new_record?this.data.conditions.splice(t,1):this.data.conditions[t].deleted=1,!0}}return ValidationRulesConditions.ɵfac=function(e){return new(e||ValidationRulesConditions)(g.Y36(h.Pu),g.Y36(f.d),g.Y36(b.A))},ValidationRulesConditions.ɵcmp=g.Xpm({type:ValidationRulesConditions,selectors:[["validationrules-conditions"]],inputs:{data:"data"},decls:15,vars:1,consts:[[1,"slds-table","slds-table--bordered","slds-table--cell-buffer"],[1,"slds-text-title--caps"],["scope","col",2,"width","2rem"],["label","LBL_FIELD"],["scope","col",2,"width","1rem"],["label","LBL_OPERATOR"],["scope","col",2,"width","4rem"],["label","LBL_VALUE"],["class","slds-theme--shade",4,"ngFor","ngForOf"],[1,"slds-grid","slds-grid--align-spread","slds-p-around--medium"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_ADD"],[1,"slds-theme--shade"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"slds-form-element__control"],[1,"slds-textarea",3,"ngModel","ngModelChange"],[1,"slds-button","slds-button--negative",3,"click"],[3,"icon","size"],[3,"value"]],template:function(e,t){1&e&&(g.TgZ(0,"table",0)(1,"thead")(2,"tr",1)(3,"th",2),g._UZ(4,"system-label",3),g.qZA(),g.TgZ(5,"th",4),g._UZ(6,"system-label",5),g.qZA(),g.TgZ(7,"th",6),g._UZ(8,"system-label",7),g.qZA(),g._UZ(9,"th",4),g.qZA()(),g.TgZ(10,"tbody"),g.YNc(11,En,16,9,"tr",8),g.qZA()(),g.TgZ(12,"div",9)(13,"button",10),g.NdJ("click",(function(){return t.addCondition()})),g._UZ(14,"system-label",11),g.qZA()()),2&e&&(g.xp6(11),g.Q6J("ngForOf",t.conditions))},encapsulation:2}),ValidationRulesConditions})();function On(e,t){if(1&e&&(g.TgZ(0,"option",18),g._uU(1),g.qZA()),2&e){const e=t.$implicit;g.s9C("value",e),g.xp6(1),g.Oqu(e)}}function In(e,t){if(1&e&&(g.TgZ(0,"option",18),g._uU(1),g.qZA()),2&e){const e=t.$implicit;g.s9C("value",e),g.xp6(1),g.Oqu(e)}}function Qn(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"tr",9)(1,"td")(2,"div",10)(3,"select",11),g.NdJ("ngModelChange",(function(t){const s=g.CHM(e).$implicit;return g.KtG(s.fieldname=t)})),g._UZ(4,"option"),g.YNc(5,On,2,2,"option",12),g.qZA()()(),g.TgZ(6,"td")(7,"div",10)(8,"select",11),g.NdJ("ngModelChange",(function(t){const s=g.CHM(e).$implicit;return g.KtG(s.action=t)})),g.YNc(9,In,2,2,"option",12),g.qZA()()(),g.TgZ(10,"td")(11,"div",13)(12,"textarea",14),g.NdJ("ngModelChange",(function(t){const s=g.CHM(e).$implicit;return g.KtG(s.params=t)})),g.ALo(13,"maybejson"),g.qZA()()(),g.TgZ(14,"td")(15,"div",13)(16,"input",15),g.NdJ("ngModelChange",(function(t){const s=g.CHM(e).$implicit;return g.KtG(s.priority=t)})),g.qZA()()(),g.TgZ(17,"td")(18,"button",16),g.NdJ("click",(function(){const t=g.CHM(e).$implicit,s=g.oxw();return g.KtG(s.removeAction(t.id))})),g._UZ(19,"system-button-icon",17),g.qZA()()()}if(2&e){const e=t.$implicit,s=g.oxw();g.xp6(3),g.Q6J("ngModel",e.fieldname),g.xp6(2),g.Q6J("ngForOf",s.fieldname_options),g.xp6(3),g.Q6J("ngModel",e.action),g.xp6(1),g.Q6J("ngForOf",s.action_options),g.xp6(3),g.Q6J("ngModel",g.lcZ(13,8,e.params)),g.xp6(4),g.Q6J("ngModel",e.priority),g.xp6(3),g.Q6J("icon","delete")("size","small")}}let Sn=(()=>{class ValidationRulesActions{constructor(e,t,s){this.metadata=e,this.language=t,this.utils=s,this.action_options=["set_value","set_value_from_field","set_value_from_user","set_model_state","set_stati","set_message","error","warning","notice","hide","show","require"],this.fieldname_options=[]}ngOnInit(){for(let e in this.metadata.getModuleFields(this.data.module))this.fieldname_options.push(e);this.fieldname_options.sort(),this.data.actions.sort(((e,t)=>!!e.fieldname&&e.fieldname.localeCompare(t.fieldname)))}get actions(){return this.data.actions.filter((e=>1!=e.deleted))}addAction(){return this.data.actions.push({id:this.utils.generateGuid(),sysuimodelvalidation_id:this.data.id,isnewrecord:!0})}removeAction(e){let t=this.data.actions.findIndex((t=>t.id==e));return this.data.actions[t].isnewrecord?this.data.actions.splice(t,1):this.data.actions[t].deleted=1,!0}}return ValidationRulesActions.ɵfac=function(e){return new(e||ValidationRulesActions)(g.Y36(h.Pu),g.Y36(f.d),g.Y36(b.A))},ValidationRulesActions.ɵcmp=g.Xpm({type:ValidationRulesActions,selectors:[["validationrules-actions"]],inputs:{data:"data"},decls:17,vars:1,consts:[[1,"slds-table","slds-table--bordered","slds-table--cell-buffer"],[1,"slds-text-title--caps"],["scope","col",2,"width","2rem"],["scope","col",2,"width","1rem"],["scope","col",2,"width","4rem"],["class","slds-theme--shade",4,"ngFor","ngForOf"],[1,"slds-grid","slds-grid--align-spread","slds-p-around--medium"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_ADD"],[1,"slds-theme--shade"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"slds-form-element__control"],[1,"slds-textarea",3,"ngModel","ngModelChange"],["type","number","min","0","max","99",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-button","slds-button--negative",3,"click"],[3,"icon","size"],[3,"value"]],template:function(e,t){1&e&&(g.TgZ(0,"table",0)(1,"thead")(2,"tr",1)(3,"th",2),g._uU(4,"Fieldname"),g.qZA(),g.TgZ(5,"th",3),g._uU(6,"Action"),g.qZA(),g.TgZ(7,"th",4),g._uU(8,"Parameter(s)"),g.qZA(),g.TgZ(9,"th",3),g._uU(10,"Priority"),g.qZA(),g._UZ(11,"th",3),g.qZA()(),g.TgZ(12,"tbody"),g.YNc(13,Qn,20,10,"tr",5),g.qZA()(),g.TgZ(14,"div",6)(15,"button",7),g.NdJ("click",(function(){return t.addAction()})),g._UZ(16,"system-label",8),g.qZA()()),2&e&&(g.xp6(13),g.Q6J("ngForOf",t.actions))},encapsulation:2}),ValidationRulesActions})();function Bn(e,t){if(1&e&&(g.TgZ(0,"option",12),g._uU(1),g.qZA()),2&e){const e=t.$implicit;g.Q6J("value",e),g.xp6(1),g.Oqu(e)}}const Fn=function(e){return{"slds-text-color_error":e}};function Yn(e,t){if(1&e&&(g.TgZ(0,"option",15),g._uU(1),g.qZA()),2&e){const e=t.$implicit;g.Q6J("value",e.id)("ngClass",g.VKq(3,Fn,!e.active)),g.xp6(1),g.Oqu(e.name)}}function Rn(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",2)(1,"label",3),g._UZ(2,"system-label",13),g.qZA(),g.TgZ(3,"div",5)(4,"div",6)(5,"select",7),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.current_rule=t)})),g._UZ(6,"option"),g.YNc(7,Yn,2,5,"option",14),g.qZA()()()()}if(2&e){const e=g.oxw();g.xp6(5),g.Q6J("ngModel",e.current_rule),g.xp6(2),g.Q6J("ngForOf",e.rules)}}function Gn(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",16)(1,"div",17)(2,"button",18),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw();return g.KtG(t.addValidationRule())})),g._UZ(3,"system-label",19),g.qZA(),g.TgZ(4,"button",20),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw();return g.KtG(t.removeCurrentValidationRule())})),g._UZ(5,"system-label",21),g.qZA(),g.TgZ(6,"button",20),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw();return g.KtG(t.cancel())})),g._UZ(7,"system-label",22),g.qZA(),g.TgZ(8,"button",23),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw();return g.KtG(t.save())})),g._UZ(9,"system-label",24),g.qZA()()()}if(2&e){const e=g.oxw();g.xp6(4),g.Q6J("disabled",!e.current_rule),g.xp6(2),g.Q6J("disabled",!e.current_rule),g.xp6(2),g.Q6J("disabled",!e.current_rule)}}function Hn(e,t){if(1&e&&(g.TgZ(0,"option",12),g._uU(1),g.qZA()),2&e){const e=t.$implicit;g.s9C("value",e.value),g.xp6(1),g.Oqu(e.display)}}function Kn(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",36)(1,"div",37)(2,"div",38)(3,"label",3),g._UZ(4,"system-label",39),g.qZA(),g.TgZ(5,"div",40)(6,"input",41),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw(2);return g.KtG(s.current_rule_data.name=t)})),g.qZA()()(),g.TgZ(7,"div",42)(8,"div",43)(9,"label",3),g._UZ(10,"system-label",44),g.qZA(),g.TgZ(11,"div",40)(12,"system-checkbox",45),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw(2);return g.KtG(s.current_rule_data.active=t)})),g.qZA()()(),g.TgZ(13,"div",2)(14,"label",3),g._UZ(15,"system-label",46),g.qZA(),g.TgZ(16,"system-checkbox-group",47),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw(2);return g.KtG(s.current_rule_data.onevents=t)})),g.TgZ(17,"system-checkbox-group-checkbox",48),g._UZ(18,"system-label",49),g.qZA(),g.TgZ(19,"system-checkbox-group-checkbox",50),g._UZ(20,"system-label",51),g.qZA()()()(),g.TgZ(21,"div",38)(22,"label",3),g._UZ(23,"system-label",52),g.qZA(),g.TgZ(24,"div",40)(25,"select",7),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw(2);return g.KtG(s.current_rule_data.logicoperator=t)})),g.YNc(26,Hn,2,2,"option",8),g.qZA()()(),g.TgZ(27,"div",38)(28,"label",3),g._UZ(29,"system-label",53),g.qZA(),g.TgZ(30,"div",40)(31,"input",54),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw(2);return g.KtG(s.current_rule_data.priority=t)})),g.qZA()()()()()}if(2&e){const e=g.oxw(2);g.xp6(6),g.Q6J("ngModel",e.current_rule_data.name),g.xp6(6),g.Q6J("ngModel",e.current_rule_data.active),g.xp6(4),g.Q6J("ngModel",e.current_rule_data.onevents),g.xp6(9),g.Q6J("ngModel",e.current_rule_data.logicoperator),g.xp6(1),g.Q6J("ngForOf",e.logicoperator_options),g.xp6(5),g.Q6J("ngModel",e.current_rule_data.priority)}}function zn(e,t){if(1&e&&(g.TgZ(0,"div",55),g._UZ(1,"validationrules-conditions",56),g.qZA()),2&e){const e=g.oxw(2);g.xp6(1),g.Q6J("data",e.current_rule_data)}}function Vn(e,t){if(1&e&&(g.TgZ(0,"div",57),g._UZ(1,"validationrules-actions",56),g.qZA()),2&e){const e=g.oxw(2);g.xp6(1),g.Q6J("data",e.current_rule_data)}}const Pn=function(e){return{"slds-active":e}};function $n(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",25)(1,"div",26)(2,"ul",27)(3,"li",28),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw();return g.KtG(t.current_tab="details")})),g.TgZ(4,"a",29),g._UZ(5,"system-label",30),g.qZA()(),g.TgZ(6,"li",28),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw();return g.KtG(t.current_tab="conditions")})),g.TgZ(7,"a",29),g._UZ(8,"system-label",31),g.qZA()(),g.TgZ(9,"li",28),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw();return g.KtG(t.current_tab="actions")})),g.TgZ(10,"a",29),g._UZ(11,"system-label",32),g.qZA()()(),g.YNc(12,Kn,32,6,"div",33),g.YNc(13,zn,2,1,"div",34),g.YNc(14,Vn,2,1,"div",35),g.qZA()()}if(2&e){const e=g.oxw();g.xp6(3),g.Q6J("ngClass",g.VKq(6,Pn,"details"==e.current_tab||!e.current_tab)),g.xp6(3),g.Q6J("ngClass",g.VKq(8,Pn,"conditions"==e.current_tab)),g.xp6(3),g.Q6J("ngClass",g.VKq(10,Pn,"actions"==e.current_tab)),g.xp6(3),g.Q6J("ngIf","details"==e.current_tab),g.xp6(1),g.Q6J("ngIf","conditions"==e.current_tab),g.xp6(1),g.Q6J("ngIf","actions"==e.current_tab)}}let jn=(()=>{class ValidationRulesManager{constructor(e,t,s,i,n){this.backend=e,this.metadata=t,this.language=s,this.utils=i,this.toast=n,this.rules=[],this._backup_rules=[],this._current_rule_data={},this.logicoperator_options=[],this.current_tab="details",this.logicoperator_options=this.language.getDisplayOptions("logicoperators_dom",!0)}get modules(){return this.metadata.getModules().sort()}set current_module(e){this._current_module=e,this.rules=this.metadata.getModuleValidations(e),this.rules.sort(((e,t)=>e.name.localeCompare(t.name))),this.copyRulesToBackup(),this.current_rule=null}get current_module(){return this._current_module}get current_rule(){return this._current_rule}set current_rule(e){this._current_rule=e,this._current_rule_data=this.getCurrentRuleData()}get current_rule_data(){return this._current_rule_data}getCurrentRuleData(){if(this.rules){const e=this.rules.find((e=>e.id==this._current_rule));return e?.onevents&&"string"==typeof e.onevents&&(e.onevents=e.onevents.split(",")),e}return""}removeCurrentValidationRule(){this.backend.deleteRequest("configuration/spiceui/core/modelvalidations/"+this.current_rule).subscribe((e=>(this.toast.sendToast("rule removed"),this.removeRule(this.current_rule),!0)),(e=>(this.toast.sendToast("removing rule failed!"),console.error(e),!1)))}save(){let e=this.current_rule_data;Array.isArray(e.onevents)&&(e.onevents=e.onevents.join(",")),this.backend.postRequest("configuration/spiceui/core/modelvalidations",{},e).subscribe((t=>{this.current_rule_data.isnewrecord=!1;let s=this._backup_rules.findIndex((e=>e.id==this._current_rule));this._backup_rules[s]={...e},this.rules.sort(((e,t)=>e.name.localeCompare(t.name))),this.toast.sendToast("changes saved")}),(e=>{this.toast.sendAlert("saving changes failed!"),console.error(e)}))}cancel(){this.current_rule_data.isnewrecord?this.removeRule(this.current_rule):this.resetCurrentRuleData()}addValidationRule(){this.rules.push({id:this.utils.generateGuid(),module:this.current_module,active:1,actions:[],conditions:[],isnewrecord:!0}),this.current_rule=this.rules[this.rules.length-1].id}removeRule(e=this.current_rule){let t=this.rules.findIndex((t=>t.id==e));return this.rules.splice(t,1),this.current_rule==e&&(this.current_rule=null),!0}resetCurrentRuleData(){let e=this._backup_rules.find((e=>e.id==this._current_rule));this._current_rule_data={...e}}copyRulesToBackup(){this._backup_rules=[];for(let e of this.rules)this._backup_rules.push({...e})}}return ValidationRulesManager.ɵfac=function(e){return new(e||ValidationRulesManager)(g.Y36(p.y),g.Y36(h.Pu),g.Y36(f.d),g.Y36(b.A),g.Y36(y.A))},ValidationRulesManager.ɵcmp=g.Xpm({type:ValidationRulesManager,selectors:[["validation-rules-manager"]],decls:13,vars:5,consts:[["titlelabel","LBL_VALIDATIONRULES_MANAGER"],[1,"slds-grid","slds-form--inline","slds-p-around--small","slds-border--bottom"],[1,"slds-form-element"],[1,"slds-form-element__label"],["label","LBL_MODULE"],[1,"slds-form-element__control",2,"min-width","250px"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["class","slds-form-element",4,"ngIf"],["class","slds-form-element slds-col--bump-left",4,"ngIf"],["class","slds-grid",4,"ngIf"],[3,"value"],["label","LBL_RULE"],[3,"value","ngClass",4,"ngFor","ngForOf"],[3,"value","ngClass"],[1,"slds-form-element","slds-col--bump-left"],["role","group",1,"slds-button-group"],["type","button",1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_ADD"],["type","button",1,"slds-button","slds-button--neutral",3,"disabled","click"],["label","LBL_DELETE"],["label","LBL_CANCEL"],["type","button",1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_SAVE"],[1,"slds-grid"],[1,"slds-tabs_default"],["role","tablist",1,"slds-tabs_default__nav"],["role","presentation",1,"slds-tabs--default__item","slds-text-title--caps",3,"ngClass","click"],["href","javascript:void(0);","role","tab","aria-selected","false",1,"slds-tabs--default__link"],["label","LBL_DETAILS"],["label","LBL_CONDITIONS"],["label","LBL_ACTIONS"],["id","tab-default-1","class","slds-tabs_default__content","role","tabpanel",4,"ngIf"],["id","tab-default-2","class","slds-tabs_default__content","role","tabpanel",4,"ngIf"],["id","tab-default-3","class","slds-tabs_default__content","role","tabpanel",4,"ngIf"],["id","tab-default-1","role","tabpanel",1,"slds-tabs_default__content"],[1,"slds-size--3-of-5","slds-p-horizontal--small","slds-p-top--x-small"],[1,"slds-form-element","slds-m-vertical--xxx-small"],["label","LBL_NAME"],[1,"slds-form-element__control"],["type","text",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-grid","slds-m-vertical--small"],[1,"slds-form-element","slds-m-right_xx-large"],["label","LBL_ACTIVE"],[3,"ngModel","ngModelChange"],["label","LBL_ON_EVENTS"],[1,"spice-display-block",3,"ngModel","ngModelChange"],["value","initialize"],["label","LBL_INITIALIZE"],["value","change"],["label","LBL_CHANGE"],["label","LBL_OPERATOR"],["label","LBL_PRIORITY"],["type","number","min","0","max","99",1,"slds-input",3,"ngModel","ngModelChange"],["id","tab-default-2","role","tabpanel",1,"slds-tabs_default__content"],[3,"data"],["id","tab-default-3","role","tabpanel",1,"slds-tabs_default__content"]],template:function(e,t){1&e&&(g._UZ(0,"workbench-header",0),g.TgZ(1,"div",1)(2,"div",2)(3,"label",3),g._UZ(4,"system-label",4),g.qZA(),g.TgZ(5,"div",5)(6,"div",6)(7,"select",7),g.NdJ("ngModelChange",(function(e){return t.current_module=e})),g._UZ(8,"option"),g.YNc(9,Bn,2,2,"option",8),g.qZA()()()(),g.YNc(10,Rn,8,2,"div",9),g.YNc(11,Gn,10,3,"div",10),g.qZA(),g.YNc(12,$n,15,12,"div",11)),2&e&&(g.xp6(7),g.Q6J("ngModel",t.current_module),g.xp6(2),g.Q6J("ngForOf",t.modules),g.xp6(1),g.Q6J("ngIf",t.current_module),g.xp6(1),g.Q6J("ngIf",t.current_module),g.xp6(1),g.Q6J("ngIf",t.current_rule))},dependencies:[i.mk,i.sg,i.O5,n.YN,n.Kr,n.Fj,n.wV,n.EJ,n.JJ,n.qQ,n.Fd,n.On,I.U,Nn.L,kn.m,T._,We,Dn,Sn],encapsulation:2}),ValidationRulesManager})(),Wn=(()=>{class MaybeJsonPipe extends i.Ts{transform(e){return e instanceof Array||e instanceof Object?super.transform(e):e}}return MaybeJsonPipe.ɵfac=function(){let e;return function(t){return(e||(e=g.n5z(MaybeJsonPipe)))(t||MaybeJsonPipe)}}(),MaybeJsonPipe.ɵpipe=g.Yjl({name:"maybejson",type:MaybeJsonPipe,pure:!0}),MaybeJsonPipe})();var Xn=s(4664);function el(e,t){if(1&e&&(g.TgZ(0,"div",26),g._uU(1," Untranslated records: "),g.TgZ(2,"span",27),g._uU(3),g.qZA()()),2&e){const e=g.oxw();g.xp6(3),g.Oqu(null==e.labels?null:e.labels.length)}}function tl(e,t){if(1&e&&(g.TgZ(0,"option",28),g._uU(1),g.qZA()),2&e){const e=t.$implicit;g.Q6J("ngValue",e.language),g.xp6(1),g.Oqu(e.text)}}function sl(e,t){1&e&&(g.TgZ(0,"div",29),g._UZ(1,"system-spinner"),g.qZA())}function il(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"button",52),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw().$implicit,s=g.oxw();return g.KtG(s.translate(t))})),g._UZ(1,"system-label",53),g.qZA()}}function nl(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div")(1,"div",30)(2,"div",31)(3,"h2",32),g._UZ(4,"system-label",33),g._uU(5,": "),g.TgZ(6,"span",34),g._uU(7),g.qZA()()(),g.TgZ(8,"div",35)(9,"div",36)(10,"div",37)(11,"div",12)(12,"label"),g._UZ(13,"system-label",38),g._uU(14,":"),g.qZA(),g._UZ(15,"input",14),g.qZA(),g.TgZ(16,"div",12)(17,"label"),g._UZ(18,"system-label",39),g._uU(19,":"),g.qZA(),g._UZ(20,"input",40),g.qZA(),g.TgZ(21,"div",12)(22,"label"),g._UZ(23,"system-label",41),g._uU(24,":"),g.qZA(),g._UZ(25,"textarea",42),g.qZA()(),g.TgZ(26,"div",43)(27,"div",12)(28,"label"),g._UZ(29,"system-label",38),g._uU(30,":"),g.qZA(),g.TgZ(31,"input",44),g.NdJ("ngModelChange",(function(t){const s=g.CHM(e).$implicit;return g.KtG(s.translation_short=t)})),g.qZA()(),g.TgZ(32,"div",12)(33,"label")(34,"abbr",34),g._uU(35,"*"),g.qZA(),g._UZ(36,"system-label",39),g._uU(37,":"),g.qZA(),g.TgZ(38,"input",45),g.NdJ("ngModelChange",(function(t){const s=g.CHM(e).$implicit;return g.KtG(s.translation_default=t)})),g.qZA()(),g.TgZ(39,"div",12)(40,"label"),g._UZ(41,"system-label",41),g._uU(42,":"),g.qZA(),g.TgZ(43,"textarea",46),g.NdJ("ngModelChange",(function(t){const s=g.CHM(e).$implicit;return g.KtG(s.translation_long=t)})),g.qZA()()()(),g.TgZ(44,"div",47)(45,"div",48),g.YNc(46,il,2,0,"button",49),g.TgZ(47,"button",50),g.NdJ("click",(function(){const t=g.CHM(e).$implicit,s=g.oxw();return g.KtG(s.save(t))})),g._UZ(48,"system-label",51),g.qZA()()()()()()}if(2&e){const e=t.$implicit,s=g.oxw();g.xp6(7),g.Oqu(s.language.getLangText(e.name)),g.xp6(8),g.Q6J("value",s.getLabelSpecificLength(e.name,"short")),g.xp6(5),g.Q6J("value",s.language.getLabel(e.name)),g.xp6(5),g.Q6J("value",s.getLabelSpecificLength(e.name,"long")),g.xp6(6),g.Q6J("ngModel",e.translation_short),g.xp6(7),g.Q6J("ngModel",e.translation_default),g.xp6(5),g.Q6J("ngModel",e.translation_long),g.xp6(3),g.Q6J("ngIf",s.cantranslate),g.xp6(1),g.Q6J("disabled",!s.canSave(e))}}function ll(e,t){1&e&&(g.TgZ(0,"div",29),g._UZ(1,"system-label",54),g.qZA())}function ol(e,t){1&e&&(g.TgZ(0,"div",29),g._UZ(1,"system-label",55),g.qZA())}let al=(()=>{class LanguageTranslationsManager{constructor(e,t,s,i,n){this.backend=e,this.metadata=t,this.language=s,this.utils=i,this.toast=n,this.labels=[],this.currentScope="global",this.selectedLanguage="",this.isLoading=!1,this.cantranslate=!1,this.backend.getRequest("syslanguage/labels/translate/cantranslate").subscribe({next:e=>{this.cantranslate=e.cantranslate}})}get scope(){return this.currentScope}set scope(e){this.currentScope=e,this.getTranslations()}get languages(){return this.language.getAvialableLanguages().filter((e=>e.language!=this.language.currentlanguage))}get selectedLanguageText(){return this.language.getLangText(this.language.currentlanguage)}translate(e){let t=["default"],s=[this.language.getLabel(e.name)],i=this.getLabelSpecificLength(e.name,"short");i&&(s.push(i),t.push("short"));let n=this.getLabelSpecificLength(e.name,"long");n&&(s.push(n),t.push("long"));let l=this.language.currentlanguage.substring(0,2),o=this.selectedLanguage.substring(0,2);this.backend.postRequest(`syslanguage/labels/translate/${l}/${o}`,{},{labels:s}).subscribe({next:s=>{s.data.translations&&s.data.translations.forEach(((s,i)=>{e["translation_"+t[i]]=s.translatedText}))}})}save(e){let t="global"==this.scope?"global_translations":"custom_translations",s={id:e.id,name:e.name,scope:this.scope,[t]:[{id:this.utils.generateGuid(),syslanguagelabel_id:e.id,syslanguage:this.selectedLanguage,translation_default:e.translation_default,translation_short:e.translation_short,translation_long:e.translation_long}]};this.backend.postRequest("configuration/syslanguages/labels",null,[s]).subscribe((t=>{this.language.addLabel(e.name,e.translation_default,e.translation_short,e.translation_long),this.labels=this.labels.filter((t=>t.id!=e.id)),this.toast.sendToast(this.language.getLabel("LBL_DATA_SAVED"),"success")}))}getLabelSpecificLength(e,t){let s=this.language.getLabel(e),i=this.language.getLabel(e,"",t);return i!=s?i:""}getTranslations(){this.labels=[],0!=this.selectedLanguage.length&&(this.isLoading=!0,this.backend.getRequest(`configuration/syslanguage/${this.selectedLanguage}/${this.scope}/labels/untranslated`).subscribe((e=>{this.labels=e,this.isLoading=!1}),(e=>this.isLoading=!1)))}canSave(e){return e.translation_default&&e.translation_default.length>0}trackByFn(e,t){return t.id}}return LanguageTranslationsManager.ɵfac=function(e){return new(e||LanguageTranslationsManager)(g.Y36(p.y),g.Y36(h.Pu),g.Y36(f.d),g.Y36(b.A),g.Y36(y.A))},LanguageTranslationsManager.ɵcmp=g.Xpm({type:LanguageTranslationsManager,selectors:[["language-translations-manager"]],decls:35,vars:19,consts:[[1,"slds-border--bottom","slds-form--inline","slds-grid","slds-grid--vertical-align-end","slds-p-around--small"],["class","slds-text-heading--label",4,"ngIf"],[1,"slds-grid","slds-grid--vertical-align-center","slds-col--bump-left"],[1,"slds-radio"],["type","radio","name","translation_scope","id","scope_global","value","global",3,"ngModel","disabled","ngModelChange"],["for","scope_global",1,"slds-radio__label"],[1,"slds-radio_faux"],[1,"slds-form-element__label"],["label","LBL_GLOBAL"],["type","radio","name","translation_scope","id","scope_custom","value","custom",3,"ngModel","disabled","ngModelChange"],["for","scope_custom",1,"slds-radio__label"],["label","LBL_CUSTOM"],[1,"slds-form-element"],[1,"slds-form-element__control"],["type","text","disabled","",1,"slds-input",3,"value"],["icon","sort","size","xx-small","addclasses","slds-path__trigger_open",1,"slds-m-right--x-small"],[1,"slds-form-element__control","slds-p-right--x-small"],[1,"slds-select_container",2,"min-width","150px"],[1,"slds-select",3,"ngModel","disabled","ngModelChange","change"],[3,"ngValue",4,"ngFor","ngForOf"],["role","group",1,"slds-button-group"],[1,"slds-button","slds-button--icon-border",3,"disabled","click"],["icon","refresh"],["system-to-bottom","",1,"slds-size--1-of-1","spice-scrollbar"],["class","slds-align_absolute-center","style","height: 100%;",4,"ngIf"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"slds-text-heading--label"],[1,"slds-text-color--error"],[3,"ngValue"],[1,"slds-align_absolute-center",2,"height","100%"],[1,"slds-card","slds-m-around--small"],[1,"slds-card__header"],[1,"slds-text-heading--small"],["label","LBL_LABEL"],[1,"slds-required"],[1,"slds-card__body","slds-p-around--small",2,"margin-bottom","0"],[1,"slds-grid"],[1,"slds-size--1-of-2","slds-p-right--small"],["label","LBL_TEXT_SHORT"],["label","LBL_DEFAULT"],["type","text","required","required","disabled","",1,"slds-input",3,"value"],["label","LBL_TEXT_LONG"],["disabled","",1,"slds-textarea",3,"value"],[1,"slds-size--1-of-2"],["type","text",1,"slds-input",3,"ngModel","ngModelChange"],["type","text","required","required",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-textarea",3,"ngModel","ngModelChange"],[1,"slds-grid","slds-p-top--x-small"],[1,"slds-col--bump-left"],["type","button","class","slds-button slds-button--neutral",3,"click",4,"ngIf"],["type","button",1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_SAVE"],["type","button",1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_GOOGLE_TRANSLATE"],["label","LBL_MAKE_SELECTION"],["label","LBL_NO_ENTRIES"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0),g.YNc(1,el,4,1,"div",1),g.TgZ(2,"div",2)(3,"div")(4,"span",3)(5,"input",4),g.NdJ("ngModelChange",(function(e){return t.scope=e})),g.qZA(),g.TgZ(6,"label",5),g._UZ(7,"span",6),g.TgZ(8,"span",7),g._UZ(9,"system-label",8),g.qZA()()(),g.TgZ(10,"span",3)(11,"input",9),g.NdJ("ngModelChange",(function(e){return t.scope=e})),g.qZA(),g.TgZ(12,"label",10),g._UZ(13,"span",6),g.TgZ(14,"span",7),g._UZ(15,"system-label",11),g.qZA()()()(),g.TgZ(16,"div",12)(17,"div",13),g._UZ(18,"input",14),g.qZA()(),g._UZ(19,"system-utility-icon",15),g.TgZ(20,"div",16)(21,"div",17)(22,"select",18),g.NdJ("ngModelChange",(function(e){return t.selectedLanguage=e}))("change",(function(){return t.getTranslations()})),g._UZ(23,"option"),g.YNc(24,tl,2,2,"option",19),g.qZA()()(),g.TgZ(25,"div",12)(26,"div",20)(27,"button",21),g.NdJ("click",(function(){return t.getTranslations()})),g._UZ(28,"system-button-icon",22),g.qZA()()()()(),g.TgZ(29,"div",23),g.YNc(30,sl,2,0,"div",24),g.YNc(31,nl,49,9,"div",25),g.ALo(32,"slice"),g.YNc(33,ll,2,0,"div",24),g.YNc(34,ol,2,0,"div",24),g.qZA()),2&e&&(g.xp6(1),g.Q6J("ngIf",!t.isLoading&&(null==t.selectedLanguage?null:t.selectedLanguage.length)>0&&(null==t.labels?null:t.labels.length)),g.xp6(4),g.Q6J("ngModel",t.scope)("disabled",t.isLoading),g.xp6(6),g.Q6J("ngModel",t.scope)("disabled",t.isLoading),g.xp6(7),g.Q6J("value",t.selectedLanguageText),g.xp6(4),g.Q6J("ngModel",t.selectedLanguage)("disabled",t.isLoading),g.xp6(2),g.Q6J("ngForOf",t.languages),g.xp6(3),g.Q6J("disabled",t.isLoading),g.xp6(3),g.Q6J("ngIf",t.isLoading),g.xp6(1),g.Q6J("ngForOf",g.Dn7(32,15,t.labels,0,100))("ngForTrackBy",t.trackByFn),g.xp6(2),g.Q6J("ngIf",!t.isLoading&&0==t.selectedLanguage.length),g.xp6(1),g.Q6J("ngIf",!t.isLoading&&(null==t.selectedLanguage?null:t.selectedLanguage.length)>0&&0==(null==t.labels?null:t.labels.length)))},dependencies:[i.sg,i.O5,n.YN,n.Kr,n.Fj,n.EJ,n._,n.JJ,n.Q7,n.On,A.J,T._,Xn.W,u.r,k.H,i.OU],encapsulation:2}),LanguageTranslationsManager})();var dl=s(3917),rl=s(5920),cl=s(6010);function gl(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",16)(1,"div",17)(2,"button",18),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw();return g.KtG(t.addLabel())})),g._UZ(3,"system-label",19),g.qZA()()()}}function ul(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div")(1,"button",18),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw();return g.KtG(t.filesToDB())})),g._uU(2,"Files to DB"),g.qZA()()}}function ml(e,t){1&e&&g._UZ(0,"system-spinner")}function pl(e,t){1&e&&(g.TgZ(0,"span",37),g._uU(1,"custom"),g.qZA())}function hl(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"system-utility-icon",38),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw().$implicit,s=g.oxw(2);return g.KtG(s.deleteLabel(t))})),g.qZA()}2&e&&g.Q6J("icon","close")("size","xx-small")}const fl=function(e){return{"slds-theme_inverse":e}};function bl(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"li",34),g.NdJ("click",(function(){const t=g.CHM(e).$implicit,s=g.oxw(2);return g.KtG(s.selected_label=t)})),g.TgZ(1,"div",22)(2,"span"),g._uU(3),g.qZA(),g.YNc(4,pl,2,0,"span",35),g.TgZ(5,"div",25),g.YNc(6,hl,1,2,"system-utility-icon",36),g.qZA()()()}if(2&e){const e=t.$implicit,s=g.oxw(2);g.Q6J("ngClass",g.VKq(4,fl,e==s.selected_label)),g.xp6(3),g.Oqu(e.name),g.xp6(1),g.Q6J("ngIf","custom"==e.scope),g.xp6(2),g.Q6J("ngIf",e==s.selected_label)}}function _l(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"article")(1,"div",27)(2,"div",53)(3,"h2"),g._uU(4),g.qZA()(),g.TgZ(5,"div",28)(6,"div",1)(7,"label"),g._uU(8,"short:"),g.qZA(),g.TgZ(9,"input",54),g.NdJ("ngModelChange",(function(t){const s=g.CHM(e).$implicit;return g.KtG(s.translation_short=t)})),g.qZA()(),g.TgZ(10,"div",1)(11,"label")(12,"abbr",55),g._uU(13,"*"),g.qZA(),g._uU(14,"default:"),g.qZA(),g.TgZ(15,"input",56),g.NdJ("ngModelChange",(function(t){const s=g.CHM(e).$implicit;return g.KtG(s.translation_default=t)})),g.qZA()(),g.TgZ(16,"div",1)(17,"label"),g._uU(18,"long:"),g.qZA(),g.TgZ(19,"textarea",57),g.NdJ("ngModelChange",(function(t){const s=g.CHM(e).$implicit;return g.KtG(s.translation_long=t)})),g.qZA()()()()()}if(2&e){const e=t.$implicit,s=g.oxw(3);g.xp6(4),g.Oqu(s.getLangText(e.syslanguage)),g.xp6(5),g.Q6J("ngModel",e.translation_short),g.xp6(6),g.Q6J("ngModel",e.translation_default),g.xp6(4),g.Q6J("ngModel",e.translation_long)}}function Zl(e,t){if(1&e&&(g.TgZ(0,"option",64),g._uU(1),g.qZA()),2&e){const e=t.$implicit;g.s9C("value",e.language),g.xp6(1),g.Oqu(e.text)}}function yl(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",20)(1,"div",58)(2,"div",59)(3,"select",60,61),g.YNc(5,Zl,2,2,"option",62),g.qZA()()(),g.TgZ(6,"button",63),g.NdJ("click",(function(){g.CHM(e);const t=g.MAs(4),s=g.oxw(3);return g.KtG(s.addTranslation(s.translation_scope,t.value))})),g._UZ(7,"system-label",19),g.qZA()()}if(2&e){const e=g.oxw(3);g.xp6(5),g.Q6J("ngForOf",e.getMissingLanguages()),g.xp6(1),g.MGl("title","",e.language.getLabel("LBL_ADD_TRANSLATION"),"...")}}function Ml(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",39)(1,"div",40)(2,"h2",23),g._UZ(3,"system-label",41),g._uU(4,":"),g.qZA(),g.TgZ(5,"div",42)(6,"span",43)(7,"input",44),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw(2);return g.KtG(s.translation_scope=t)})),g.qZA(),g.TgZ(8,"label",45),g._UZ(9,"span",46),g.TgZ(10,"span",47),g._uU(11,"global"),g.qZA()()(),g.TgZ(12,"span",43)(13,"input",48),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw(2);return g.KtG(s.translation_scope=t)})),g.qZA(),g.TgZ(14,"label",49),g._UZ(15,"span",46),g.TgZ(16,"span",47),g._uU(17,"custom"),g.qZA()()()()(),g.YNc(18,_l,20,4,"article",50),g.TgZ(19,"div",20),g.YNc(20,yl,8,2,"div",15),g.TgZ(21,"div",25)(22,"button",51),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw(2);return g.KtG(t.save())})),g._UZ(23,"system-label",52),g.qZA()()()()}if(2&e){const e=g.oxw(2);g.xp6(7),g.Q6J("ngModel",e.translation_scope)("disabled","custom"==e.selected_label.scope),g.xp6(6),g.Q6J("ngModel",e.translation_scope),g.xp6(5),g.Q6J("ngForOf",e.translations),g.xp6(2),g.Q6J("ngIf",e.languages.length>e.translations.length),g.xp6(2),g.Q6J("disabled",e.labels.length<1)}}const xl=function(e){return{page:e,limit:20}};function vl(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",20)(1,"div",21)(2,"div",22)(3,"h2",23),g._UZ(4,"system-label",24),g._uU(5,":"),g.qZA(),g.TgZ(6,"div",25)(7,"pagination-controls",26),g.NdJ("pageChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.page=t)})),g.qZA()()(),g.TgZ(8,"article")(9,"div",27)(10,"div",28)(11,"ul",29),g.YNc(12,bl,7,6,"li",30),g.ALo(13,"paginate"),g.qZA()(),g.TgZ(14,"div",31)(15,"pagination-controls",32),g.NdJ("pageChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.page=t)})),g.qZA()()()()(),g.YNc(16,Ml,24,6,"div",33),g.qZA()}if(2&e){const e=g.oxw();g.xp6(7),g.Q6J("page",e.page)("limit",20)("total_records",e.labels.length)("variation","short"),g.xp6(5),g.Q6J("ngForOf",g.xi3(13,9,e.labels,g.VKq(12,xl,e.page))),g.xp6(3),g.Q6J("page",e.page)("limit",20)("total_records",e.labels.length),g.xp6(1),g.Q6J("ngIf",e.selected_label)}}let Al=(()=>{class LanguageLabelManagerComponent{get selected_label(){return this._selected_label}set selected_label(e){if(this._selected_label=e,e&&0==e[this.translation_scope+"_translations"].length){for(let t of this.scopes)if(e[t+"_translations"].length>0){this.translation_scope=t;break}e[this.translation_scope+"_translations"].sort(((e,t)=>e.syslanguage==this.language.languagedata.languages.default||e.syslanguage<t.syslanguage?-1:e.syslanguage>t.syslanguage?1:void 0))}}constructor(e,t,s,i,n,l,o,a){this.backend=e,this.metadata=t,this.language=s,this.utils=i,this.toast=n,this.footer=l,this.modalservice=o,this.sessionservice=a,this.search_term="",this.labels=[],this.languages=[],this._selected_label=null,this.is_searching=!1,this.page=1,this.translation_scope="global",this.scopes=["global","custom"],this.languages=this.language.getAvialableLanguages()}showRefModal(){this.modalservice.openModal("LanguageLabelReferenceConfigModal")}get translations(){return this.selected_label[`${this.translation_scope}_translations`]}search(e=null){if(this.page=1,!(e=e||this.search_term))return!1;this.selected_label=null,this.is_searching=!0,this.backend.getRequest("configuration/syslanguages/labels/search/"+this.search_term).subscribe((e=>{this.labels=e,this.is_searching=!1}))}addTranslation(e,t=null){if(this.selected_label[e+"_translations"]||(this.selected_label[e+"_translations"]=[]),!t){t=this.getMissingLanguages(e)[0]}this.selected_label[e+"_translations"].push({id:this.utils.generateGuid(),syslanguagelabel_id:this.selected_label.id,syslanguage:t})}getMissingLanguages(e=null){e||(e=this.translation_scope);let t=[];for(let e of this.languages)this.translations.find((t=>t.syslanguage==e.language))||t.push(e);return t}addLabel(){let e={id:this.utils.generateGuid(),name:"",scope:"custom",custom_translations:[],global_translations:[]};e.custom_translations.push({id:this.utils.generateGuid(),syslanguagelabel_id:e.id,syslanguage:this.language.currentlanguage}),this.selected_label=e,this.labels.push(e),this.modalservice.openModal("LanguageLabelModal").subscribe((e=>{e.instance.label=this.selected_label,e.instance.label$.subscribe((e=>{this.selected_label=e})),e.instance.close$.subscribe((e=>{this.closeModal(e)}))}))}deleteLabel(e){this.modalservice.confirm(this.language.getLabel("LBL_DELETE_LABEL_TEXT"),this.language.getLabel("LBL_DELETE_LABEL_TITLE")).subscribe((t=>{t&&this.backend.deleteRequest("configuration/syslanguages/labels/"+e.id+"/"+e.source).subscribe((t=>{for(let t=0;t<this.labels.length;t++){this.labels[t].id==e.id&&this.labels.splice(t,1)}this.selected_label=null}))}))}save(){this.backend.postRequest("configuration/syslanguages/labels",null,[this.selected_label]).subscribe((e=>{let t=this.getcurrentLanguageTranslations();this.language.addLabel(this.selected_label.name,t.default,t.short,t.long),this.toast.sendToast("Label saved!")}))}getcurrentLanguageTranslations(){let e=this.translations,t={default:"",short:"",long:""};return e.some((e=>{if(e.syslanguage==this.language.currentlanguage)return t.default=e.translation_default,t.short=e.translation_short,t.long=e.translation_long,!0})),t}closeModal(e){switch(e){case"cancel":for(let e=0;e<this.labels.length;e++){let t=this.labels[e];""!=t.name&&t.id!=this.selected_label.id||this.labels.splice(e,1)}break;case"save":this.translation_scope=this.selected_label.scope}}sortTranslations(e,t){return e.syslanguage==this.language.languagedata.languages.default||e.syslanguage<t.syslanguage?-1:e.syslanguage>t.syslanguage?1:0}getLangText(e){return this.language.getLangText(e)}filesToDB(){this.modalservice.confirm("Transfering custom labels from language files will change your database content and might destroy/overwrite existing language data in your database! Do you really want to do this?","Caution!","warning").subscribe((e=>{if(e){let e=this.modalservice.await("Transfering language data from files to database …");this.backend.postRequest("configuration/syslanguages/filesToDB",{},{confirmed:!0}).subscribe((t=>{e.emit(),this.modalservice.info("Language data successfully transfered ("+t.countLabels+" labels with "+t.countTranslations+" translations). Look into console for more details.","Done","success"),console.info(t)}),(t=>{e.emit(),this.toast.sendToast("Error transfering language data.","error")}))}}))}}return LanguageLabelManagerComponent.ɵfac=function(e){return new(e||LanguageLabelManagerComponent)(g.Y36(p.y),g.Y36(h.Pu),g.Y36(f.d),g.Y36(b.A),g.Y36(y.A),g.Y36(dl.M),g.Y36(M.o),g.Y36(rl.n))},LanguageLabelManagerComponent.ɵcmp=g.Xpm({type:LanguageLabelManagerComponent,selectors:[["language-label-manager"]],decls:19,vars:7,consts:[[1,"slds-grid","slds-form--inline","slds-p-around--small","slds-border--bottom"],[1,"slds-form-element"],[1,"slds-form-element__control"],["type","search","placeholder","search here...",1,"slds-input",3,"ngModel","ngModelChange","keyup.enter"],[1,"slds-button","slds-button--neutral",3,"disabled","click"],[1,"slds-grid","slds-grid--vertical-align-center","slds-m-horizontal--xx-small",2,"cursor","pointer"],[1,"slds-truncate","slds-grow","slds-align-middle"],["label","LBL_ENABLE_INLINE_EDIT"],[1,"slds-checkbox_toggle","slds-grid"],[1,"slds-form-element__label","slds-m-bottom_none"],["type","checkbox",3,"ngModel","ngModelChange"],["aria-live","assertive",1,"slds-checkbox_faux_container"],[1,"slds-checkbox_faux",2,"cursor","initial"],["class","slds-form-element slds-col--bump-left",4,"ngIf"],[4,"ngIf"],["class","slds-grid",4,"ngIf"],[1,"slds-form-element","slds-col--bump-left"],["role","group",1,"slds-button-group"],["type","button",1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_ADD"],[1,"slds-grid"],[1,"slds-size--2-of-5","slds-p-around--small"],[1,"slds-grid","slds-grid--vertical-align-center"],[1,"slds-p-vertical--small","slds-text-heading--small"],["label","LBL_LABELS"],[1,"slds-col--bump-left"],[3,"page","limit","total_records","variation","pageChange"],[1,"slds-card","slds-m-bottom--small"],[1,"slds-card__body","slds-p-around--small"],[1,"slds-has-dividers_bottom-space"],["class","slds-item","style","cursor: pointer;",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"slds-card__footer"],[3,"page","limit","total_records","pageChange"],["class","slds-size--3-of-5 slds-p-around--small",4,"ngIf"],[1,"slds-item",2,"cursor","pointer",3,"ngClass","click"],["class","slds-text-color_weak",4,"ngIf"],[3,"icon","size","click",4,"ngIf"],[1,"slds-text-color_weak"],[3,"icon","size","click"],[1,"slds-size--3-of-5","slds-p-around--small"],[1,"slds-grid","slds-grid--vertical-align-center","slds-p-bottom--small"],["label","LBL_TRANSLATIONS"],[1,"slds-grid","slds-col--bump-left"],[1,"slds-radio"],["type","radio","name","translation_scope","id","translation_scope_global","value","global",3,"ngModel","disabled","ngModelChange"],["for","translation_scope_global",1,"slds-radio__label"],[1,"slds-radio_faux"],[1,"slds-form-element__label"],["type","radio","name","translation_scope","id","translation_scope_custom","value","custom",3,"ngModel","ngModelChange"],["for","translation_scope_custom",1,"slds-radio__label"],[4,"ngFor","ngForOf"],["type","button",1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_SAVE"],[1,"slds-card__header"],["type","text",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-required"],["type","text","required","required",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-textarea",3,"ngModel","ngModelChange"],[1,"slds-form-element__control","slds-p-right--x-small"],[1,"slds-select_container"],[1,"slds-select"],["add_translation_language",""],[3,"value",4,"ngFor","ngForOf"],[1,"slds-button","slds-button--neutral",3,"title","click"],[3,"value"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"input",3),g.NdJ("ngModelChange",(function(e){return t.search_term=e}))("keyup.enter",(function(){return t.search()})),g.qZA()(),g.TgZ(4,"button",4),g.NdJ("click",(function(){return t.search()})),g._uU(5,"search"),g.qZA()(),g.TgZ(6,"div",5)(7,"div",6),g._UZ(8,"system-label",7),g.qZA(),g.TgZ(9,"div",1)(10,"label",8),g._UZ(11,"span",9),g.TgZ(12,"input",10),g.NdJ("ngModelChange",(function(e){return t.language.inlineEditEnabled=e})),g.qZA(),g.TgZ(13,"span",11),g._UZ(14,"span",12),g.qZA()()()(),g.YNc(15,gl,4,0,"div",13),g.YNc(16,ul,3,0,"div",14),g.qZA(),g.YNc(17,ml,1,0,"system-spinner",14),g.YNc(18,vl,17,14,"div",15)),2&e&&(g.xp6(3),g.Q6J("ngModel",t.search_term),g.xp6(1),g.Q6J("disabled",!t.search_term),g.xp6(8),g.Q6J("ngModel",t.language.inlineEditEnabled),g.xp6(3),g.Q6J("ngIf",!0),g.xp6(1),g.Q6J("ngIf",t.sessionservice.isAdmin),g.xp6(1),g.Q6J("ngIf",t.is_searching),g.xp6(1),g.Q6J("ngIf",t.labels.length>0&&!t.is_searching))},dependencies:[i.mk,i.sg,i.O5,n.YN,n.Kr,n.Fj,n.Wl,n._,n.JJ,n.Q7,n.On,cl.L,T._,Xn.W,u.r,cl.s],encapsulation:2}),LanguageLabelManagerComponent})(),Tl=(()=>{class SortPipe{transform(e,t=((e,t)=>e>t?1:-1)){return e.sort(t)}}return SortPipe.ɵfac=function(e){return new(e||SortPipe)},SortPipe.ɵpipe=g.Yjl({name:"sort",type:SortPipe,pure:!0}),SortPipe})();function Ll(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"article")(1,"div",24)(2,"div",25)(3,"h2"),g._uU(4),g.qZA()(),g.TgZ(5,"div",26)(6,"div",27)(7,"label"),g._uU(8,"short:"),g.qZA(),g.TgZ(9,"input",28),g.NdJ("ngModelChange",(function(t){const s=g.CHM(e).$implicit;return g.KtG(s.translation_short=t)})),g.qZA()(),g.TgZ(10,"div",27)(11,"label")(12,"abbr",5),g._uU(13,"*"),g.qZA(),g._uU(14,"default:"),g.qZA(),g.TgZ(15,"input",29),g.NdJ("ngModelChange",(function(t){const s=g.CHM(e).$implicit;return g.KtG(s.translation_default=t)})),g.qZA()(),g.TgZ(16,"div",27)(17,"label"),g._uU(18,"long:"),g.qZA(),g.TgZ(19,"textarea",30),g.NdJ("ngModelChange",(function(t){const s=g.CHM(e).$implicit;return g.KtG(s.translation_long=t)})),g.qZA()()()()()}if(2&e){const e=t.$implicit,s=g.oxw();g.xp6(4),g.Oqu(s.getLangText(e.syslanguage)),g.xp6(5),g.Q6J("ngModel",e.translation_short),g.xp6(6),g.Q6J("ngModel",e.translation_default),g.xp6(4),g.Q6J("ngModel",e.translation_long)}}function Cl(e,t){if(1&e&&(g.TgZ(0,"option",38),g._uU(1),g.qZA()),2&e){const e=t.$implicit;g.s9C("value",e.language),g.xp6(1),g.Oqu(e.text)}}function ql(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",3)(1,"div",31)(2,"div",32)(3,"select",33,34),g.YNc(5,Cl,2,2,"option",35),g.qZA()()(),g.TgZ(6,"button",36),g.NdJ("click",(function(){g.CHM(e);const t=g.MAs(4),s=g.oxw();return g.KtG(s.addTranslation(t.value))})),g._UZ(7,"system-label",37),g.qZA()()}if(2&e){const e=g.oxw();g.xp6(5),g.Q6J("ngForOf",e.getMissingLanguages()),g.xp6(1),g.MGl("title","",e.language.getLabel("LBL_ADD_TRANSLATION"),"...")}}let Jl=(()=>{class LanguageLabelModal{constructor(e,t,s){this.utils=e,this.language=t,this.backend=s,this.label={},this.label$=new g.vpe,this.close$=new g.vpe,this.languages=[],this.languages=this.language.getAvialableLanguages(!0)}get translations(){return this.label[this.label.scope+"_translations"]||[]}set translations(e){this.label[this.label.scope+"_translations"]=e}get name(){return this.label?this.label.name:""}set name(e){e=e.toUpperCase().trim().replace("-","_"),this.label.name=e}get scope(){return this.label?this.label.scope:""}set scope(e){this.label[e+"_translations"]=this.translations,this.translations=[],this.label.scope=e}validate(){if(!this.label.name)return!1;if(/[^A-Z_0-9]/.test(this.label.name))return!1;for(let e of this.translations)if(!e.translation_default)return!1;return!0}save(){if(this.label.name=this.label.name.toUpperCase(),!this.validate())return!1;this.backend.postRequest("configuration/syslanguages/labels",null,[this.label]).subscribe((e=>{this.label$.emit(this.label),this.close$.emit("save");let t=this.getcurrentLanguageTranslations();this.language.addLabel(this.label.name,t.default,t.short,t.long),this.self&&this.self.destroy()}))}getcurrentLanguageTranslations(){let e=this.translations,t={default:"",short:"",long:""};return e.some((e=>{if(e.syslanguage==this.language.currentlanguage)return t.default=e.translation_default,t.short=e.translation_short,t.long=e.translation_long,!0})),t}cancelDialog(){this.label={},this.label$.emit(null),this.close$.emit("cancel"),this.self.destroy()}onModalEscX(){this.cancelDialog()}addTranslation(e=null){if(!e){e=this.getMissingLanguages()[0]}this.label[this.label.scope+"_translations"].push({id:this.utils.generateGuid(),syslanguagelabel_id:this.label.id,syslanguage:e})}getMissingLanguages(e=null){e||(e=this.scope);let t=[];for(let e of this.languages)this.translations.find((t=>t.syslanguage==e.language))||t.push(e);return t}getLangText(e){return this.language.getLangText(e)}}return LanguageLabelModal.ɵfac=function(e){return new(e||LanguageLabelModal)(g.Y36(b.A),g.Y36(f.d),g.Y36(p.y))},LanguageLabelModal.ɵcmp=g.Xpm({type:LanguageLabelModal,selectors:[["language-label-modal"]],inputs:{label:"label"},outputs:{label$:"label",close$:"close"},decls:37,vars:6,consts:[["size","large"],[3,"close"],["label","LBL_EDIT"],[1,"slds-grid"],[1,"slds-form-element","slds-size--3-of-4"],[1,"slds-required"],["label","LBL_NAME"],["type","text","placeholder","only A-Z, 0-9 and _ are allowed!",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-form-element","slds-size--1-of-4","slds-p-around--small"],[1,"slds-form-element__control"],[1,"slds-radio"],["type","radio","id","radio-3","value","global",3,"ngModel","ngModelChange"],["for","radio-3",1,"slds-radio__label"],[1,"slds-radio_faux"],[1,"slds-form-element__label"],["type","radio","id","radio-4","value","custom",3,"ngModel","ngModelChange"],["for","radio-4",1,"slds-radio__label"],["label","LBL_TRANSLATIONS"],[4,"ngFor","ngForOf"],["class","slds-grid",4,"ngIf"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_SAVE"],[1,"slds-card","slds-m-bottom--small"],[1,"slds-card__header"],[1,"slds-card__body","slds-p-around--small"],[1,"slds-form-element"],["type","text",1,"slds-input",3,"ngModel","ngModelChange"],["type","text","required","required",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-textarea",3,"ngModel","ngModelChange"],[1,"slds-form-element__control","slds-p-right--x-small"],[1,"slds-select_container"],[1,"slds-select"],["add_translation_language",""],[3,"value",4,"ngFor","ngForOf"],[1,"slds-button","slds-button--neutral",3,"title","click"],["label","LBL_ADD"],[3,"value"]],template:function(e,t){1&e&&(g.TgZ(0,"system-modal",0)(1,"system-modal-header",1),g.NdJ("close",(function(){return t.cancelDialog()})),g._UZ(2,"system-label",2),g.qZA(),g.TgZ(3,"system-modal-content")(4,"div",3)(5,"div",4)(6,"label")(7,"abbr",5),g._uU(8,"*"),g.qZA(),g._UZ(9,"system-label",6),g._uU(10,":"),g.qZA(),g.TgZ(11,"input",7),g.NdJ("ngModelChange",(function(e){return t.name=e})),g.qZA()(),g.TgZ(12,"div",8)(13,"div",9)(14,"span",10)(15,"input",11),g.NdJ("ngModelChange",(function(e){return t.scope=e})),g.qZA(),g.TgZ(16,"label",12),g._UZ(17,"span",13),g.TgZ(18,"span",14),g._uU(19,"global"),g.qZA()()(),g.TgZ(20,"span",10)(21,"input",15),g.NdJ("ngModelChange",(function(e){return t.scope=e})),g.qZA(),g.TgZ(22,"label",16),g._UZ(23,"span",13),g.TgZ(24,"span",14),g._uU(25,"custom"),g.qZA()()()()()(),g.TgZ(26,"div")(27,"h2"),g._UZ(28,"system-label",17),g._uU(29,":"),g.qZA(),g.YNc(30,Ll,20,4,"article",18),g.YNc(31,ql,8,2,"div",19),g.qZA()(),g.TgZ(32,"system-modal-footer")(33,"button",20),g.NdJ("click",(function(){return t.cancelDialog()})),g._UZ(34,"system-label",21),g.qZA(),g.TgZ(35,"button",22),g.NdJ("click",(function(){return t.save()})),g._UZ(36,"system-label",23),g.qZA()()()),2&e&&(g.xp6(11),g.Q6J("ngModel",t.name),g.xp6(4),g.Q6J("ngModel",t.scope),g.xp6(6),g.Q6J("ngModel",t.scope),g.xp6(9),g.Q6J("ngForOf",t.translations),g.xp6(1),g.Q6J("ngIf",t.languages.length>t.translations.length),g.xp6(4),g.Q6J("disabled",!t.validate()))},dependencies:[i.sg,i.O5,n.YN,n.Kr,n.Fj,n._,n.JJ,n.Q7,n.On,T._,it.j,nt.x,lt.p,ot.y],encapsulation:2}),LanguageLabelModal})();var Nl=s(2644),kl=s(5710),wl=s(8861);const Ul=["viewcontainer"];function El(e,t){if(1&e&&(g.TgZ(0,"option",13),g._uU(1),g.qZA()),2&e){const e=t.$implicit;g.Q6J("value",e.id),g.xp6(1),g.hij("",e.name," ")}}let Dl=(()=>{class MailboxesManager{constructor(e,t,s,i,n,l,o,a,d,r,c){this.modellist=e,this.backend=t,this.footer=s,this.language=i,this.metadata=n,this.model=l,this.modelutils=o,this.modelutilities=a,this.toast=d,this.view=r,this.configuration=c,this.renderedview=[],this.modellist.initialize("Mailboxes"),this.modellist.getListData(),this.model.module="Mailboxes",this.view.isEditable=!0,this.configuration.getData("mailboxtransports")||(this.configuration.setData("mailboxtransports",[]),this.backend.getRequest("module/Mailboxes/transports").subscribe((e=>{this.configuration.setData("mailboxtransports",e)})));let g=this.metadata.getComponentConfig("MailboxesManager","Mailboxes");this.headeractionset=g.actionset}get mailboxes(){return this.modellist.listData.list.sort(((e,t)=>e.name.localeCompare(t.name)))}get selected_mailbox(){return this.model.id}set selected_mailbox(e){this.modellist.listData.list.find((t=>t.id==e))?(this._selected_mailbox=e,this.model.id=e,this.model.getData(),this.cleanView(),this.renderedview=[],this.metadata.addComponent("ObjectRecordDetails",this.viewcontainer).subscribe((e=>{this.renderedview.push(e)})),this.metadata.addComponent("ObjectRelateContainer",this.viewcontainer).subscribe((e=>{this.renderedview.push(e)}))):(this.cleanView(),this._selected_mailbox=null,this.model.id="",this.model.initialize())}cleanView(){for(let e of this.renderedview)e.destroy()}reset(){this.view.setViewMode(),this.model.reset(),this.model.module="Mailboxes"}}return MailboxesManager.ɵfac=function(e){return new(e||MailboxesManager)(g.Y36(Nl.t),g.Y36(p.y),g.Y36(dl.M),g.Y36(f.d),g.Y36(h.Pu),g.Y36(kl.o),g.Y36(b.A),g.Y36(b.A),g.Y36(y.A),g.Y36(Hs.e),g.Y36(x.C))},MailboxesManager.ɵcmp=g.Xpm({type:MailboxesManager,selectors:[["mailboxes-manager"]],viewQuery:function(e,t){if(1&e&&g.Gf(Ul,7,g.s_b),2&e){let e;g.iGM(e=g.CRH())&&(t.viewcontainer=e.first)}},features:[g._Bn([Nl.t,kl.o,Hs.e])],decls:15,vars:3,consts:[[1,"slds-grid","slds-form--inline","slds-p-around--small","slds-border--bottom"],[1,"slds-form-element"],[1,"slds-form-element__label"],["label","LBL_MAILBOX"],[1,"slds-form-element__control",2,"min-width","250px"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"slds-form-element","slds-col--bump-left"],[3,"actionset"],["system-to-bottom","",1,"slds-p-horizontal--small"],["viewcontainer",""],[3,"value"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0)(1,"div",1)(2,"label",2),g._UZ(3,"system-label",3),g.qZA(),g.TgZ(4,"div",4)(5,"div",5)(6,"select",6),g.NdJ("ngModelChange",(function(e){return t.selected_mailbox=e})),g.TgZ(7,"option",7),g._uU(8,"--"),g.qZA(),g.YNc(9,El,2,2,"option",8),g.qZA()()()(),g.TgZ(10,"div",9),g._UZ(11,"object-action-container",10),g.qZA()(),g.TgZ(12,"div",11),g._UZ(13,"div",null,12),g.qZA()),2&e&&(g.xp6(6),g.Q6J("ngModel",t.selected_mailbox),g.xp6(3),g.Q6J("ngForOf",t.mailboxes),g.xp6(2),g.Q6J("actionset",t.headeractionset))},dependencies:[i.sg,n.YN,n.Kr,n.EJ,n.JJ,n.On,T._,k.H,wl.S],encapsulation:2}),MailboxesManager})();var Ol=s(7040),Il=s(1933),Ql=s(6367),Sl=s(3208),Bl=s(5638);function Fl(e,t){if(1&e&&g._UZ(0,"field-label",3),2&e){const e=g.oxw();g.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Yl(e,t){if(1&e&&(g.TgZ(0,"field-generic-display",4),g._uU(1),g.qZA()),2&e){const e=g.oxw();g.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig)("fieldid",e.fieldid),g.xp6(1),g.hij(" ",e.getValue(),"\n")}}function Rl(e,t){if(1&e&&(g.TgZ(0,"option",12),g._UZ(1,"system-label",13),g.qZA()),2&e){const e=t.$implicit;g.Q6J("value",e.name),g.xp6(1),g.Q6J("label",e.label)}}function Gl(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",5)(1,"div",6)(2,"div",7)(3,"select",8,9),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.value=t)})),g.YNc(5,Rl,2,2,"option",10),g.qZA()(),g._UZ(6,"field-messages",11),g.qZA()()}if(2&e){const e=g.oxw();g.xp6(1),g.Q6J("ngClass",e.getFieldClass()),g.xp6(2),g.Q6J("ngModel",e.value),g.xp6(2),g.Q6J("ngForOf",e.transportoptions),g.xp6(1),g.Q6J("fieldname",e.fieldname)}}let Hl=(()=>{class MailboxesTransportsEnum extends Ol.O{constructor(e,t,s,i,n,l){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.configuration=l}getValue(){let e=this.configuration.getData("mailboxtransports").find((e=>e.name==this.value));return e?this.language.getLabel(e.label):this.value}get transportoptions(){return this.configuration.getData("mailboxtransports")}}return MailboxesTransportsEnum.ɵfac=function(e){return new(e||MailboxesTransportsEnum)(g.Y36(kl.o),g.Y36(Hs.e),g.Y36(f.d),g.Y36(h.Pu),g.Y36(Il.F0),g.Y36(x.C))},MailboxesTransportsEnum.ɵcmp=g.Xpm({type:MailboxesTransportsEnum,selectors:[["ng-component"]],features:[g.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","fieldid",4,"ngIf"],["class","slds-form-element",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig","fieldid"],[1,"slds-form-element"],[1,"slds-form-element__control",3,"ngClass"],[1,"slds-select_container","slds-m-vertical--xx-small"],[1,"slds-select",3,"ngModel","ngModelChange"],["focus",""],[3,"value",4,"ngFor","ngForOf"],[3,"fieldname"],[3,"value"],[3,"label"]],template:function(e,t){1&e&&(g.YNc(0,Fl,1,2,"field-label",0),g.YNc(1,Yl,2,5,"field-generic-display",1),g.YNc(2,Gl,7,4,"div",2)),2&e&&(g.Q6J("ngIf",t.displayLabel),g.xp6(1),g.Q6J("ngIf",!t.isEditMode()),g.xp6(1),g.Q6J("ngIf",t.isEditMode()))},dependencies:[i.mk,i.sg,i.O5,n.YN,n.Kr,n.EJ,n.JJ,n.On,T._,Ql.q,Sl.D,Bl.a],encapsulation:2}),MailboxesTransportsEnum})();function Kl(e,t){1&e&&(g.TgZ(0,"div",6),g._UZ(1,"system-spinner",11),g.TgZ(2,"span",12),g._UZ(3,"system-label",13),g.qZA()())}function zl(e,t){1&e&&(g.TgZ(0,"div",6),g._UZ(1,"system-utility-icon",14),g.TgZ(2,"span",12),g._UZ(3,"system-label",15),g.qZA()())}let Vl=(()=>{class MailboxesmanagerTestModal{constructor(e,t,s,i){this.backend=e,this.language=t,this.model=s,this.session=i,this.self={},this.validConnection=!1,this.isvalid=new g.vpe,this.testemailaddress="",this.testing=!1,this.tested=!1,this.testtype="email"}ngOnInit(){if("sms"===this.testtype);else this.testemailaddress=this.session.authData.email}testConnection(){this.testing=!0,this.testemailaddress=this.testemailaddress.trim();let e=this.model.utils.spiceModel2backend("Mailboxes",this.model.data);this.backend.postRequest("module/Mailboxes/test",{},{data:e,test_email:this.testemailaddress}).subscribe((e=>{!0===e.result?this.validConnection=!0:this.validConnection=!1,this.tested=!0,this.testing=!1}),(e=>{this.tested=!1,this.testing=!1,this.validConnection=null}))}close(){this.isvalid.emit(this.validConnection),this.self.destroy()}onModalEscX(){this.close()}get testtypelabel(){return this.language.getLabel("email"==this.testtype?"LBL_EMAIL":"LBL_SMS")}}return MailboxesmanagerTestModal.ɵfac=function(e){return new(e||MailboxesmanagerTestModal)(g.Y36(p.y),g.Y36(f.d),g.Y36(kl.o),g.Y36(rl.n))},MailboxesmanagerTestModal.ɵcmp=g.Xpm({type:MailboxesmanagerTestModal,selectors:[["ng-component"]],decls:17,vars:7,consts:[[3,"close"],["label","LBL_TEST"],[1,"slds-form-element","slds-size--1-of-1"],[1,"slds-truncate","slds-form-element__label"],["label","LBL_DESTINATION_ADDRESS"],["type","text",1,"slds-input",3,"disabled","ngModel","ngModelChange"],[1,"slds-grid","slds-grid--vertical-align-center"],["class","slds-grid slds-grid--vertical-align-center",4,"ngIf"],[1,"slds-button","slds-col--bump-left","slds-button--neutral",3,"disabled","click"],["label","LBL_CLOSE"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["size","10"],[1,"slds-p-horizontal--xx-small"],["label","LBL_TESTING"],["icon","check","size","x-small"],["label","LBL_OK"]],template:function(e,t){1&e&&(g.TgZ(0,"system-modal")(1,"system-modal-header",0),g.NdJ("close",(function(){return t.close()})),g._UZ(2,"system-label",1),g._uU(3),g.qZA(),g.TgZ(4,"system-modal-content")(5,"div",2)(6,"label",3),g._UZ(7,"system-label",4),g.qZA(),g.TgZ(8,"input",5),g.NdJ("ngModelChange",(function(e){return t.testemailaddress=e})),g.qZA()()(),g.TgZ(9,"system-modal-footer")(10,"div",6),g.YNc(11,Kl,4,0,"div",7),g.YNc(12,zl,4,0,"div",7),g.TgZ(13,"button",8),g.NdJ("click",(function(){return t.close()})),g._UZ(14,"system-label",9),g.qZA(),g.TgZ(15,"button",10),g.NdJ("click",(function(){return t.testConnection()})),g._UZ(16,"system-label",1),g.qZA()()()()),2&e&&(g.xp6(3),g.hij(" ",t.testtypelabel,""),g.xp6(5),g.Q6J("disabled",t.testing)("ngModel",t.testemailaddress),g.xp6(3),g.Q6J("ngIf",t.testing),g.xp6(1),g.Q6J("ngIf",!t.testing&&t.validConnection),g.xp6(1),g.Q6J("disabled",!t.validConnection),g.xp6(2),g.Q6J("disabled",0===t.testemailaddress.trim().length))},dependencies:[i.O5,n.Fj,n.JJ,n.On,T._,it.j,nt.x,lt.p,ot.y,Xn.W,u.r],encapsulation:2}),MailboxesmanagerTestModal})();function Pl(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",10)(1,"label",11),g._UZ(2,"system-label",12),g.qZA(),g.TgZ(3,"input",13),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.testemailaddress=t)})),g.qZA()()}if(2&e){const e=g.oxw();g.xp6(3),g.Q6J("ngModel",e.testemailaddress)}}function $l(e,t){if(1&e&&(g.TgZ(0,"div",14)(1,"div"),g._UZ(2,"system-label",15),g.qZA(),g._UZ(3,"system-utility-icon",16),g.qZA()),2&e){const e=g.oxw();g.xp6(3),g.Q6J("icon",e.imapIcon)}}function jl(e,t){if(1&e&&(g.TgZ(0,"div",14)(1,"div"),g._UZ(2,"system-label",17),g.qZA(),g._UZ(3,"system-utility-icon",16),g.qZA()),2&e){const e=g.oxw();g.xp6(3),g.Q6J("icon",e.smtpIcon)}}function Wl(e,t){1&e&&(g.TgZ(0,"div",4),g._UZ(1,"system-spinner",18),g.TgZ(2,"span",19),g._UZ(3,"system-label",20),g.qZA()())}function Xl(e,t){1&e&&(g.TgZ(0,"div",4),g._UZ(1,"system-utility-icon",21),g.TgZ(2,"span",19),g._UZ(3,"system-label",22),g.qZA()())}let eo=(()=>{class MailboxesmanagerTestIMAPModal{constructor(e,t,s,i){this.backend=e,this.language=t,this.model=s,this.session=i,this.self={},this.validConnection=null,this.isvalid=new g.vpe,this.testemailaddress="",this.imapStatus=!1,this.smtpStatus=!1,this.testing=!1,this.tested=!1,this.testemailaddress=this.session.authData.email}get isInbound(){return!!this.model.getFieldValue("inbound_comm")}get isOutbound(){let e=this.model.getFieldValue("outbound_comm");return!(!e||"no"==e)}testConnection(){this.testing=!0;let e=this.model.utils.spiceModel2backend("Mailboxes",this.model.data);this.backend.postRequest("module/Mailboxes/test",{},{data:e,test_email:this.testemailaddress}).subscribe((e=>{this.validConnection=!0,this.isInbound&&(!0!==e.imap.result&&(this.validConnection=!1),e.imap.errors&&e.imap.errors.length>0?this.imapStatus=!1:this.imapStatus=!0),this.isOutbound&&(e.smtp.errors&&e.smtp.errors.length>0?(this.smtpStatus=!1,this.validConnection=!1):this.smtpStatus=!0),this.tested=!0,this.testing=!1}),(e=>{this.testing=!1}))}close(){null!==this.validConnection&&this.isvalid.emit(this.validConnection),this.self.destroy()}get imapIcon(){return this.imapStatus?"check":"close"}get smtpIcon(){return this.smtpStatus?"check":"close"}onModalEscX(){this.close()}}return MailboxesmanagerTestIMAPModal.ɵfac=function(e){return new(e||MailboxesmanagerTestIMAPModal)(g.Y36(p.y),g.Y36(f.d),g.Y36(kl.o),g.Y36(rl.n))},MailboxesmanagerTestIMAPModal.ɵcmp=g.Xpm({type:MailboxesmanagerTestIMAPModal,selectors:[["ng-component"]],decls:15,vars:5,consts:[[3,"close"],["class","slds-form-element slds-size--1-of-1",4,"ngIf"],[1,"slds-p-vertical--x-small"],["class","slds-grid slds-grid--align-spread slds-grid_vertical-align-center slds-p-vertical--xxx-small",4,"ngIf"],[1,"slds-grid","slds-grid--vertical-align-center"],["class","slds-grid slds-grid--vertical-align-center",4,"ngIf"],[1,"slds-col--bump-left","slds-button","slds-button--neutral",3,"click"],["label","LBL_TEST"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_CLOSE"],[1,"slds-form-element","slds-size--1-of-1"],[1,"slds-truncate","slds-form-element__label"],["label","LBL_TEST_EMAIL"],["type","text",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-grid","slds-grid--align-spread","slds-grid_vertical-align-center","slds-p-vertical--xxx-small"],["label","LBL_IMAP"],["size","xx-small",3,"icon"],["label","LBL_SMTP"],["size","10"],[1,"slds-p-horizontal--xx-small"],["label","LBL_TESTING"],["icon","check","size","x-small"],["label","LBL_OK"]],template:function(e,t){1&e&&(g.TgZ(0,"system-modal")(1,"system-modal-header",0),g.NdJ("close",(function(){return t.close()})),g.qZA(),g.TgZ(2,"system-modal-content"),g.YNc(3,Pl,4,1,"div",1),g.TgZ(4,"div",2),g.YNc(5,$l,4,1,"div",3),g.YNc(6,jl,4,1,"div",3),g.qZA()(),g.TgZ(7,"system-modal-footer")(8,"div",4),g.YNc(9,Wl,4,0,"div",5),g.YNc(10,Xl,4,0,"div",5),g.TgZ(11,"button",6),g.NdJ("click",(function(){return t.testConnection()})),g._UZ(12,"system-label",7),g.qZA(),g.TgZ(13,"button",8),g.NdJ("click",(function(){return t.close()})),g._UZ(14,"system-label",9),g.qZA()()()()),2&e&&(g.xp6(3),g.Q6J("ngIf",t.isOutbound),g.xp6(2),g.Q6J("ngIf",t.isInbound),g.xp6(1),g.Q6J("ngIf",t.isOutbound),g.xp6(3),g.Q6J("ngIf",t.testing),g.xp6(1),g.Q6J("ngIf",!t.testing&&t.validConnection))},dependencies:[i.O5,n.Fj,n.JJ,n.On,T._,it.j,nt.x,lt.p,ot.y,Xn.W,u.r],encapsulation:2}),MailboxesmanagerTestIMAPModal})(),to=(()=>{class MailboxesGmailTrafficManager{constructor(e,t,s,i,n,l,o){this.backend=e,this.language=t,this.model=s,this.modal=i,this.toast=n,this.view=l,this.injector=o;let a=this.model.getField("settings");(!a||a&&0==a.length)&&this.model.setField("settings",{gmail_user_name:"",gmail_email_address:"",gmail_delete_emails:!1})}get isInbound(){return!!this.model.getFieldValue("inbound_comm")}get isOutbound(){return"no"!=this.model.getFieldValue("outbound_comm")}getMailboxes(){let e=new rn.x,t=this.model.utils.spiceModel2backend("Mailboxes",this.model.data);return this.backend.postRequest("module/Mailboxes/gmail/labels",{},{data:t}).subscribe((t=>{!0===t.result?e.next(t):e.next(!1),e.complete()})),e.asObservable()}testConnection(){this.modal.openModal("MailboxesmanagerTestModal",!0,this.injector)}}return MailboxesGmailTrafficManager.ɵfac=function(e){return new(e||MailboxesGmailTrafficManager)(g.Y36(p.y),g.Y36(f.d),g.Y36(kl.o),g.Y36(M.o),g.Y36(y.A),g.Y36(Hs.e),g.Y36(g.zs3))},MailboxesGmailTrafficManager.ɵcmp=g.Xpm({type:MailboxesGmailTrafficManager,selectors:[["mailboxes-gmail-traffic-manager"]],decls:20,vars:7,consts:[[1,"slds-m-vertical--xx-small","slds-box--border"],[1,"slds-p-around--x-small"],["label","LBL_GMAIL"],[1,"slds-grid","slds-p-vertical--xx-small"],[1,"slds-form-element","slds-size--1-of-2","slds-p-right--xx-small"],[1,"slds-truncate","slds-form-element__label"],["label","LBL_EMAIL_ADDRESS"],["type","text",1,"slds-input",3,"ngModel","disabled","ngModelChange"],[1,"slds-form-element","slds-size--1-of-2","slds-p-left--xx-small"],["label","LBL_USER_NAME"],[3,"disabled","ngModel","ngModelChange"],["label","LBL_DELETE_REMOTE"],["type","button",1,"slds-col--bump-left","slds-button","slds-button--neutral",3,"disabled","click"],["label","LBL_TEST_CONNECTION"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0)(1,"div",1)(2,"h1"),g._UZ(3,"system-label",2),g.qZA(),g.TgZ(4,"div",3)(5,"div",4)(6,"label",5),g._UZ(7,"system-label",6),g.qZA(),g.TgZ(8,"input",7),g.NdJ("ngModelChange",(function(e){return t.model.data.settings.gmail_email_address=e})),g.qZA()(),g.TgZ(9,"div",8)(10,"label",5),g._UZ(11,"system-label",9),g.qZA(),g.TgZ(12,"input",7),g.NdJ("ngModelChange",(function(e){return t.model.data.settings.gmail_user_name=e})),g.qZA()()(),g.TgZ(13,"div",3)(14,"div",4)(15,"system-checkbox",10),g.NdJ("ngModelChange",(function(e){return t.model.data.settings.gmail_delete_emails=e})),g._UZ(16,"system-label",11),g.qZA()()(),g.TgZ(17,"div",3)(18,"button",12),g.NdJ("click",(function(){return t.testConnection()})),g._UZ(19,"system-label",13),g.qZA()()()()),2&e&&(g.xp6(8),g.Q6J("ngModel",t.model.data.settings.gmail_email_address)("disabled",!t.view.isEditMode()),g.xp6(4),g.Q6J("ngModel",t.model.data.settings.gmail_user_name)("disabled",!t.view.isEditMode()),g.xp6(3),g.Q6J("disabled",!t.view.isEditMode())("ngModel",t.model.data.settings.gmail_delete_emails),g.xp6(3),g.Q6J("disabled",!t.view.isEditMode()))},dependencies:[n.Fj,n.JJ,n.On,I.U,T._],encapsulation:2}),MailboxesGmailTrafficManager})();var so=s(7919);let io=(()=>{class MailboxesMailgunTrafficManager{constructor(e,t,s,i,n){this.language=e,this.injector=t,this.model=s,this.modal=i,this.view=n;let l=this.model.getField("settings");(!l||l&&0==l.length)&&this.model.setField("settings",{api_key:"",domain:"",imap_pop3_display_name:"",imap_pop3_username:"",reply_to:"",region:""})}testConnection(){this.modal.openModal("MailboxesmanagerTestModal",!0,this.injector)}}return MailboxesMailgunTrafficManager.ɵfac=function(e){return new(e||MailboxesMailgunTrafficManager)(g.Y36(f.d),g.Y36(g.zs3),g.Y36(kl.o),g.Y36(M.o),g.Y36(Hs.e))},MailboxesMailgunTrafficManager.ɵcmp=g.Xpm({type:MailboxesMailgunTrafficManager,selectors:[["mailboxes-mailgun-traffic-manager"]],decls:38,vars:13,consts:[[1,"slds-m-vertical--xx-small","slds-box--border"],[1,"slds-p-around--x-small"],["label","LBL_MAILGUN"],[1,"slds-grid","slds-p-vertical--xx-small"],[1,"slds-form-element","slds-size--1-of-2","slds-p-right--xx-small"],[1,"slds-truncate","slds-form-element__label"],["label","LBL_DISPLAY_NAME"],["type","text",1,"slds-input",3,"disabled","ngModel","ngModelChange"],[1,"slds-form-element","slds-size--1-of-2","slds-p-left--xx-small"],["label","LBL_DOMAIN"],["type","text",1,"slds-input","ng-pristine",3,"ngModel","disabled","ngModelChange"],["label","LBL_USER_NAME"],["type","text",1,"slds-input",3,"ngModel","disabled","ngModelChange"],["label","LBL_REPLY_TO"],["label","LBL_REGION"],["type","text",1,"slds-select",3,"disabled","ngModel","ngModelChange"],["value","eu"],["label","LBL_EU"],["value","us"],["label","LBL_USA"],["label","LBL_API_KEY"],[3,"ngModel","disabled","ngModelChange"],["type","button",1,"slds-col--bump-left","slds-button","slds-button--neutral",3,"disabled","click"],["label","LBL_TEST_CONNECTION"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0)(1,"div",1)(2,"h1"),g._UZ(3,"system-label",2),g.qZA(),g.TgZ(4,"div",3)(5,"div",4)(6,"label",5),g._UZ(7,"system-label",6),g.qZA(),g.TgZ(8,"input",7),g.NdJ("ngModelChange",(function(e){return t.model.data.settings.imap_pop3_display_name=e})),g.qZA()(),g.TgZ(9,"div",8)(10,"label",5),g._UZ(11,"system-label",9),g.qZA(),g.TgZ(12,"input",10),g.NdJ("ngModelChange",(function(e){return t.model.data.settings.domain=e})),g.qZA()()(),g.TgZ(13,"div",3)(14,"div",4)(15,"label",5),g._UZ(16,"system-label",11),g.qZA(),g.TgZ(17,"input",12),g.NdJ("ngModelChange",(function(e){return t.model.data.settings.imap_pop3_username=e})),g.qZA()(),g.TgZ(18,"div",4)(19,"label",5),g._UZ(20,"system-label",13),g.qZA(),g.TgZ(21,"input",7),g.NdJ("ngModelChange",(function(e){return t.model.data.settings.reply_to=e})),g.qZA()()(),g.TgZ(22,"div",3)(23,"div",4)(24,"label",5),g._UZ(25,"system-label",14),g.qZA(),g.TgZ(26,"select",15),g.NdJ("ngModelChange",(function(e){return t.model.data.settings.region=e})),g.TgZ(27,"option",16),g._UZ(28,"system-label",17),g.qZA(),g.TgZ(29,"option",18),g._UZ(30,"system-label",19),g.qZA()()(),g.TgZ(31,"div",8)(32,"label",5),g._UZ(33,"system-label",20),g.qZA(),g.TgZ(34,"system-input-password",21),g.NdJ("ngModelChange",(function(e){return t.model.data.settings.api_key=e})),g.qZA()()(),g.TgZ(35,"div",3)(36,"button",22),g.NdJ("click",(function(){return t.testConnection()})),g._UZ(37,"system-label",23),g.qZA()()()()),2&e&&(g.xp6(8),g.Q6J("disabled",!t.view.isEditMode())("ngModel",t.model.data.settings.imap_pop3_display_name),g.xp6(4),g.Q6J("ngModel",t.model.data.settings.domain)("disabled",!t.view.isEditMode()),g.xp6(5),g.Q6J("ngModel",t.model.data.settings.imap_pop3_username)("disabled",!t.view.isEditMode()),g.xp6(4),g.Q6J("disabled",!t.view.isEditMode())("ngModel",t.model.data.settings.reply_to),g.xp6(5),g.Q6J("disabled",!t.view.isEditMode())("ngModel",t.model.data.settings.region),g.xp6(8),g.Q6J("ngModel",t.model.data.settings.api_key)("disabled",!t.view.isEditMode()),g.xp6(2),g.Q6J("disabled",!t.view.isEditMode()))},dependencies:[n.YN,n.Kr,n.Fj,n.EJ,n.JJ,n.On,so.Z,T._],encapsulation:2}),MailboxesMailgunTrafficManager})(),no=(()=>{class MailboxesSendgridTrafficManager{constructor(e,t,s,i,n){this.language=e,this.model=t,this.modal=s,this.view=i,this.injector=n;let l=this.model.getField("settings");(!l||l&&0==l.length)&&(this.model.data.settings={api_key:"",imap_pop3_display_name:"",imap_pop3_username:"",reply_to:""})}testConnection(){this.modal.openModal("MailboxesmanagerTestModal",!0,this.injector)}}return MailboxesSendgridTrafficManager.ɵfac=function(e){return new(e||MailboxesSendgridTrafficManager)(g.Y36(f.d),g.Y36(kl.o),g.Y36(M.o),g.Y36(Hs.e),g.Y36(g.zs3))},MailboxesSendgridTrafficManager.ɵcmp=g.Xpm({type:MailboxesSendgridTrafficManager,selectors:[["mailboxes-sendgrid-traffic-manager"]],decls:25,vars:9,consts:[[1,"slds-m-vertical--xx-small","slds-box--border"],[1,"slds-p-around--x-small"],["label","LBL_SENDGRID"],[1,"slds-grid","slds-p-vertical--xx-small"],[1,"slds-form-element","slds-size--1-of-2","slds-p-right--xx-small"],[1,"slds-truncate","slds-form-element__label"],["label","LBL_DISPLAY_NAME"],["type","text",1,"slds-input","ng-pristine","ng-valid",3,"disabled","ngModel","ngModelChange"],[1,"slds-form-element","slds-size--1-of-2","slds-p-left--xx-small"],["label","LBL_REPLY_TO"],["label","LBL_USER_NAME"],["label","LBL_API_KEY"],[3,"disabled","ngModel","ngModelChange"],["type","button",1,"slds-col--bump-left","slds-button","slds-button--neutral",3,"disabled","click"],["label","LBL_SEND_TEST_EMAIL"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0)(1,"div",1)(2,"h1"),g._UZ(3,"system-label",2),g.qZA(),g.TgZ(4,"div",3)(5,"div",4)(6,"label",5),g._UZ(7,"system-label",6),g.qZA(),g.TgZ(8,"input",7),g.NdJ("ngModelChange",(function(e){return t.model.data.settings.imap_pop3_display_name=e})),g.qZA()(),g.TgZ(9,"div",8)(10,"label",5),g._UZ(11,"system-label",9),g.qZA(),g.TgZ(12,"input",7),g.NdJ("ngModelChange",(function(e){return t.model.data.settings.reply_to=e})),g.qZA()()(),g.TgZ(13,"div",3)(14,"div",4)(15,"label",5),g._UZ(16,"system-label",10),g.qZA(),g.TgZ(17,"input",7),g.NdJ("ngModelChange",(function(e){return t.model.data.settings.imap_pop3_username=e})),g.qZA()(),g.TgZ(18,"div",8)(19,"label",5),g._UZ(20,"system-label",11),g.qZA(),g.TgZ(21,"system-input-password",12),g.NdJ("ngModelChange",(function(e){return t.model.data.settings.api_key=e})),g.qZA()()(),g.TgZ(22,"div",3)(23,"button",13),g.NdJ("click",(function(){return t.testConnection()})),g._UZ(24,"system-label",14),g.qZA()()()()),2&e&&(g.xp6(8),g.Q6J("disabled",!t.view.isEditMode())("ngModel",t.model.data.settings.imap_pop3_display_name),g.xp6(4),g.Q6J("disabled",!t.view.isEditMode())("ngModel",t.model.data.settings.reply_to),g.xp6(5),g.Q6J("disabled",!t.view.isEditMode())("ngModel",t.model.data.settings.imap_pop3_username),g.xp6(4),g.Q6J("disabled",!t.view.isEditMode())("ngModel",t.model.data.settings.api_key),g.xp6(2),g.Q6J("disabled",!t.view.isEditMode()))},dependencies:[n.Fj,n.JJ,n.On,so.Z,T._],encapsulation:2}),MailboxesSendgridTrafficManager})(),lo=(()=>{class MailboxesSendinblueTrafficManager{constructor(e,t,s,i,n){this.language=e,this.model=t,this.modal=s,this.view=i,this.injector=n;let l=this.model.getField("settings");(!l||l&&0==l.length)&&(this.model.data.settings={api_key:"",sender_name:"",sender_address:"",reply_to:""})}testConnection(){this.modal.openModal("MailboxesmanagerTestModal",!0,this.injector)}}return MailboxesSendinblueTrafficManager.ɵfac=function(e){return new(e||MailboxesSendinblueTrafficManager)(g.Y36(f.d),g.Y36(kl.o),g.Y36(M.o),g.Y36(Hs.e),g.Y36(g.zs3))},MailboxesSendinblueTrafficManager.ɵcmp=g.Xpm({type:MailboxesSendinblueTrafficManager,selectors:[["mailboxes-sendinblue-traffic-manager"]],decls:25,vars:9,consts:[[1,"slds-m-vertical--xx-small","slds-box--border"],[1,"slds-p-around--x-small"],["label","LBL_SENDGRID"],[1,"slds-grid","slds-p-vertical--xx-small"],[1,"slds-form-element","slds-size--1-of-2","slds-p-right--xx-small"],[1,"slds-truncate","slds-form-element__label"],["label","LBL_SENDER_NAME"],["type","text",1,"slds-input","ng-pristine","ng-valid",3,"disabled","ngModel","ngModelChange"],[1,"slds-form-element","slds-size--1-of-2","slds-p-left--xx-small"],["label","LBL_SENDER_ADDRESS"],["label","LBL_REPLY_TO"],["label","LBL_API_KEY"],[3,"disabled","ngModel","ngModelChange"],["type","button",1,"slds-col--bump-left","slds-button","slds-button--neutral",3,"disabled","click"],["label","LBL_SEND_TEST_EMAIL"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0)(1,"div",1)(2,"h1"),g._UZ(3,"system-label",2),g.qZA(),g.TgZ(4,"div",3)(5,"div",4)(6,"label",5),g._UZ(7,"system-label",6),g.qZA(),g.TgZ(8,"input",7),g.NdJ("ngModelChange",(function(e){return t.model.data.settings.sender_name=e})),g.qZA()(),g.TgZ(9,"div",8)(10,"label",5),g._UZ(11,"system-label",9),g.qZA(),g.TgZ(12,"input",7),g.NdJ("ngModelChange",(function(e){return t.model.data.settings.sender_address=e})),g.qZA()()(),g.TgZ(13,"div",3)(14,"div",8)(15,"label",5),g._UZ(16,"system-label",10),g.qZA(),g.TgZ(17,"input",7),g.NdJ("ngModelChange",(function(e){return t.model.data.settings.reply_to=e})),g.qZA()(),g.TgZ(18,"div",8)(19,"label",5),g._UZ(20,"system-label",11),g.qZA(),g.TgZ(21,"system-input-password",12),g.NdJ("ngModelChange",(function(e){return t.model.data.settings.api_key=e})),g.qZA()()(),g.TgZ(22,"div",3)(23,"button",13),g.NdJ("click",(function(){return t.testConnection()})),g._UZ(24,"system-label",14),g.qZA()()()()),2&e&&(g.xp6(8),g.Q6J("disabled",!t.view.isEditMode())("ngModel",t.model.data.settings.sender_name),g.xp6(4),g.Q6J("disabled",!t.view.isEditMode())("ngModel",t.model.data.settings.sender_address),g.xp6(5),g.Q6J("disabled",!t.view.isEditMode())("ngModel",t.model.data.settings.reply_to),g.xp6(4),g.Q6J("disabled",!t.view.isEditMode())("ngModel",t.model.data.settings.api_key),g.xp6(2),g.Q6J("disabled",!t.view.isEditMode()))},dependencies:[n.Fj,n.JJ,n.On,so.Z,T._],encapsulation:2}),MailboxesSendinblueTrafficManager})(),oo=(()=>{class MailboxesTwillioTrafficManager{constructor(e,t,s,i,n){this.language=e,this.model=t,this.modal=s,this.view=i,this.injector=n;let l=this.model.getField("settings");(!l||l&&0==l.length)&&(this.model.data.settings={account_sid:"",auth_token:"",phone_number_from:""})}testConnection(){this.modal.openModal("MailboxesmanagerTestModal",!0,this.injector)}}return MailboxesTwillioTrafficManager.ɵfac=function(e){return new(e||MailboxesTwillioTrafficManager)(g.Y36(f.d),g.Y36(kl.o),g.Y36(M.o),g.Y36(Hs.e),g.Y36(g.zs3))},MailboxesTwillioTrafficManager.ɵcmp=g.Xpm({type:MailboxesTwillioTrafficManager,selectors:[["mailboxes-twillio-traffic-manager"]],decls:20,vars:7,consts:[[1,"slds-m-vertical--xx-small","slds-box--border"],[1,"slds-p-around--x-small"],["label","LBL_TWILIO"],[1,"slds-grid","slds-p-vertical--xx-small"],[1,"slds-form-element","slds-size--1-of-3","slds-p-right--xx-small"],[1,"slds-truncate","slds-form-element__label"],["label","LBL_ACCOUNT_SID"],[3,"disabled","ngModel","ngModelChange"],[1,"slds-form-element","slds-size--1-of-3","slds-p-left--xx-small"],["label","LBL_AUTH_TOKEN"],["label","LBL_PHONE_NUMBER_FROM"],["type","text",1,"slds-input",3,"disabled","ngModel","ngModelChange"],["type","button",1,"slds-col--bump-left","slds-button","slds-button--neutral",3,"disabled","click"],["label","LBL_SEND_TEST_SMS"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0)(1,"div",1)(2,"h1"),g._UZ(3,"system-label",2),g.qZA(),g.TgZ(4,"div",3)(5,"div",4)(6,"label",5),g._UZ(7,"system-label",6),g.qZA(),g.TgZ(8,"system-input-password",7),g.NdJ("ngModelChange",(function(e){return t.model.data.settings.account_sid=e})),g.qZA()(),g.TgZ(9,"div",8)(10,"label",5),g._UZ(11,"system-label",9),g.qZA(),g.TgZ(12,"system-input-password",7),g.NdJ("ngModelChange",(function(e){return t.model.data.settings.auth_token=e})),g.qZA()(),g.TgZ(13,"div",8)(14,"label",5),g._UZ(15,"system-label",10),g.qZA(),g.TgZ(16,"input",11),g.NdJ("ngModelChange",(function(e){return t.model.data.settings.phone_number_from=e})),g.qZA()()(),g.TgZ(17,"div",3)(18,"button",12),g.NdJ("click",(function(){return t.testConnection()})),g._UZ(19,"system-label",13),g.qZA()()()()),2&e&&(g.xp6(8),g.Q6J("disabled",!t.view.isEditMode())("ngModel",t.model.data.settings.account_sid),g.xp6(4),g.Q6J("disabled",!t.view.isEditMode())("ngModel",t.model.data.settings.auth_token),g.xp6(4),g.Q6J("disabled",!t.view.isEditMode())("ngModel",t.model.data.settings.phone_number_from),g.xp6(2),g.Q6J("disabled",!t.view.isEditMode()))},dependencies:[n.Fj,n.JJ,n.On,so.Z,T._],encapsulation:2}),MailboxesTwillioTrafficManager})(),ao=(()=>{class MailboxesA1SmsTrafficManager{constructor(e,t,s,i,n){this.language=e,this.model=t,this.modal=s,this.view=i,this.injector=n;let l=this.model.getField("settings");(!l||l&&0==l.length)&&this.model.setField("settings",{a1_username:"",a1_password:"",a1_sender:""})}testConnection(){this.modal.openModal("MailboxesmanagerTestModal",!0,this.injector)}}return MailboxesA1SmsTrafficManager.ɵfac=function(e){return new(e||MailboxesA1SmsTrafficManager)(g.Y36(f.d),g.Y36(kl.o),g.Y36(M.o),g.Y36(Hs.e),g.Y36(g.zs3))},MailboxesA1SmsTrafficManager.ɵcmp=g.Xpm({type:MailboxesA1SmsTrafficManager,selectors:[["mailboxes-a1sms-traffic-manager"]],decls:20,vars:7,consts:[[1,"slds-m-vertical--xx-small","slds-box--border"],[1,"slds-p-around--x-small"],["label","LBL_A1"],[1,"slds-grid","slds-p-vertical--xx-small"],[1,"slds-form-element","slds-size--1-of-3","slds-p-right--xx-small"],[1,"slds-truncate","slds-form-element__label"],["label","LBL_USERNAME"],[3,"disabled","ngModel","ngModelChange"],[1,"slds-form-element","slds-size--1-of-3","slds-p-left--xx-small"],["label","LBL_PASSWORD"],["label","LBL_SENDER"],["type","text",1,"slds-input",3,"disabled","ngModel","ngModelChange"],["type","button",1,"slds-col--bump-left","slds-button","slds-button--neutral",3,"disabled","click"],["label","LBL_SEND_TEST_SMS"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0)(1,"div",1)(2,"h1"),g._UZ(3,"system-label",2),g.qZA(),g.TgZ(4,"div",3)(5,"div",4)(6,"label",5),g._UZ(7,"system-label",6),g.qZA(),g.TgZ(8,"system-input-password",7),g.NdJ("ngModelChange",(function(e){return t.model.data.settings.a1_username=e})),g.qZA()(),g.TgZ(9,"div",8)(10,"label",5),g._UZ(11,"system-label",9),g.qZA(),g.TgZ(12,"system-input-password",7),g.NdJ("ngModelChange",(function(e){return t.model.data.settings.a1_password=e})),g.qZA()(),g.TgZ(13,"div",8)(14,"label",5),g._UZ(15,"system-label",10),g.qZA(),g.TgZ(16,"input",11),g.NdJ("ngModelChange",(function(e){return t.model.data.settings.a1_sender=e})),g.qZA()()(),g.TgZ(17,"div",3)(18,"button",12),g.NdJ("click",(function(){return t.testConnection()})),g._UZ(19,"system-label",13),g.qZA()()()()),2&e&&(g.xp6(8),g.Q6J("disabled",!t.view.isEditMode())("ngModel",t.model.data.settings.a1_username),g.xp6(4),g.Q6J("disabled",!t.view.isEditMode())("ngModel",t.model.data.settings.a1_password),g.xp6(4),g.Q6J("disabled",!t.view.isEditMode())("ngModel",t.model.data.settings.a1_sender),g.xp6(2),g.Q6J("disabled",!t.view.isEditMode()))},dependencies:[n.Fj,n.JJ,n.On,so.Z,T._],encapsulation:2}),MailboxesA1SmsTrafficManager})(),ro=(()=>{class MailboxesA1TrafficManager{constructor(e,t,s,i,n,l,o,a){this.metadata=e,this.language=t,this.backend=s,this.model=i,this.modal=n,this.toast=l,this.view=o,this.ViewContainerRef=a,this.valid_connection=!1}ngOnInit(){0===this.model.getField("settings").length&&this.model.setField("settings",{api_key:"",imap_pop3_display_name:"",imap_pop3_username:"",reply_to:""})}testConnection(){this.modal.openModal("MailboxesmanagerTestModal",!0,this.ViewContainerRef.injector)}}return MailboxesA1TrafficManager.ɵfac=function(e){return new(e||MailboxesA1TrafficManager)(g.Y36(h.Pu),g.Y36(f.d),g.Y36(p.y),g.Y36(kl.o),g.Y36(M.o),g.Y36(y.A),g.Y36(Hs.e),g.Y36(g.s_b))},MailboxesA1TrafficManager.ɵcmp=g.Xpm({type:MailboxesA1TrafficManager,selectors:[["mailboxes-a1-traffic-manager"]],inputs:{valid_connection:"valid_connection"},decls:19,vars:7,consts:[[1,"slds-p-horizontal--medium","slds-p-vertical--small"],["label","LBL_SMS_GATEWAY"],[1,"slds-grid","slds-p-vertical--xx-small"],[1,"slds-form-element","slds-size--1-of-3","slds-p-right--xx-small"],[1,"slds-truncate","slds-form-element__label"],["label","LBL_CONSUMER_KEY"],["type","text",1,"slds-input","ng-pristine","ng-valid",3,"disabled","ngModel","ngModelChange"],[1,"slds-form-element","slds-size--1-of-3","slds-p-left--xx-small"],["label","LBL_CONSUMER_SECRET"],["label","LBL_PHONE_NUMBER_FROM"],["type","button",1,"slds-col--bump-left","slds-button","slds-button--neutral",3,"disabled","click"],["label","LBL_SEND_TEST_EMAIL"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0)(1,"h1"),g._UZ(2,"system-label",1),g.qZA(),g.TgZ(3,"div",2)(4,"div",3)(5,"label",4),g._UZ(6,"system-label",5),g.qZA(),g.TgZ(7,"input",6),g.NdJ("ngModelChange",(function(e){return t.model.data.settings.consumer_key=e})),g.qZA()(),g.TgZ(8,"div",7)(9,"label",4),g._UZ(10,"system-label",8),g.qZA(),g.TgZ(11,"input",6),g.NdJ("ngModelChange",(function(e){return t.model.data.settings.consumer_secret=e})),g.qZA()(),g.TgZ(12,"div",7)(13,"label",4),g._UZ(14,"system-label",9),g.qZA(),g.TgZ(15,"input",6),g.NdJ("ngModelChange",(function(e){return t.model.data.settings.phone_number_from=e})),g.qZA()()(),g.TgZ(16,"div",2)(17,"button",10),g.NdJ("click",(function(){return t.testConnection()})),g._UZ(18,"system-label",11),g.qZA()()()),2&e&&(g.xp6(7),g.Q6J("disabled",!t.view.isEditMode())("ngModel",t.model.data.settings.consumer_key),g.xp6(4),g.Q6J("disabled",!t.view.isEditMode())("ngModel",t.model.data.settings.consumer_secret),g.xp6(4),g.Q6J("disabled",!t.view.isEditMode())("ngModel",t.model.data.settings.phone_number_from),g.xp6(2),g.Q6J("disabled",t.valid_connection))},dependencies:[n.Fj,n.JJ,n.On,T._],encapsulation:2}),MailboxesA1TrafficManager})(),co=(()=>{class MailboxesEWSTrafficManager{constructor(e,t,s,i,n,l){this.language=e,this.injector=t,this.model=s,this.modal=i,this.view=n,this.backend=l;let o=this.model.getField("settings");(!o||o&&0==o.length)&&this.model.setField("settings",{ews_host:"",ews_username:"",ews_password:"",ews_email:"",ews_folder:"",ews_subscriptionid:"",ews_push:!1})}testConnection(){this.modal.openModal("MailboxesmanagerTestModal",!0,this.injector)}getMailboxes(){let e=new rn.x,t=this.model.utils.spiceModel2backend("Mailboxes",this.model.data);return this.backend.postRequest("module/Mailboxes/ews/folders",{},{data:t}).subscribe((t=>{!0===t.result?e.next(t):e.next(!1),e.complete()})),e.asObservable()}displayFoldersModal(){let e=this.modal.await("loading folders");this.getMailboxes().subscribe((t=>{e.emit(!0),!1!==t&&this.modal.openModal("MailboxesEWSSelectFoldersModal",!0,this.injector).subscribe((e=>{e.instance.setMailboxes(t.mailboxes)}))}),(t=>{e.emit(!0)}))}get foldername(){return this.model.getField("settings").ews_folder?this.model.getField("settings").ews_folder.name:""}}return MailboxesEWSTrafficManager.ɵfac=function(e){return new(e||MailboxesEWSTrafficManager)(g.Y36(f.d),g.Y36(g.zs3),g.Y36(kl.o),g.Y36(M.o),g.Y36(Hs.e),g.Y36(p.y))},MailboxesEWSTrafficManager.ɵcmp=g.Xpm({type:MailboxesEWSTrafficManager,selectors:[["mailboxes-mailgun-ews-manager"]],decls:42,vars:13,consts:[[1,"slds-m-vertical--xx-small","slds-box--border"],[1,"slds-p-around--x-small"],["label","LBL_EWS"],[1,"slds-grid","slds-p-vertical--xx-small"],[1,"slds-form-element","slds-size--1-of-1"],[1,"slds-truncate","slds-form-element__label"],["label","LBL_HOST"],["type","text",1,"slds-input",3,"disabled","ngModel","ngModelChange"],[1,"slds-form-element","slds-size--1-of-2","slds-p-right--xx-small"],["label","LBL_USER_NAME"],["type","text",1,"slds-input",3,"ngModel","disabled","ngModelChange"],[1,"slds-form-element","slds-size--1-of-2","slds-p-left--xx-small"],["label","LBL_PASSWORD"],[3,"ngModel","disabled","ngModelChange"],["label","LBL_MAILBOX_EMAIL"],["label","LBL_MAILBOX_FOLDER"],["type","text","disabled","",1,"slds-input",3,"ngModel"],["label","LBL_PUSH"],[3,"ngModel","ngModelChange"],["label","LBL_SUBSCRIPTION"],["type","text","disabled","",1,"slds-input",3,"ngModel","ngModelChange"],["type","button",1,"slds-col--bump-left","slds-button","slds-button--neutral",3,"disabled","click"],["label","LBL_EWS_SELECT_FOLDERS"],["label","LBL_TEST_CONNECTION"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0)(1,"div",1)(2,"h1"),g._UZ(3,"system-label",2),g.qZA(),g.TgZ(4,"div",3)(5,"div",4)(6,"label",5),g._UZ(7,"system-label",6),g.qZA(),g.TgZ(8,"input",7),g.NdJ("ngModelChange",(function(e){return t.model.data.settings.ews_host=e})),g.qZA()()(),g.TgZ(9,"div",3)(10,"div",8)(11,"label",5),g._UZ(12,"system-label",9),g.qZA(),g.TgZ(13,"input",10),g.NdJ("ngModelChange",(function(e){return t.model.data.settings.ews_username=e})),g.qZA()(),g.TgZ(14,"div",11)(15,"label",5),g._UZ(16,"system-label",12),g.qZA(),g.TgZ(17,"system-input-password",13),g.NdJ("ngModelChange",(function(e){return t.model.data.settings.ews_password=e})),g.qZA()()(),g.TgZ(18,"div",3)(19,"div",8)(20,"label",5),g._UZ(21,"system-label",14),g.qZA(),g.TgZ(22,"input",10),g.NdJ("ngModelChange",(function(e){return t.model.data.settings.ews_email=e})),g.qZA()(),g.TgZ(23,"div",11)(24,"label",5),g._UZ(25,"system-label",15),g.qZA(),g._UZ(26,"input",16),g.qZA()(),g.TgZ(27,"div",3)(28,"div",8)(29,"label",5),g._UZ(30,"system-label",17),g.qZA(),g.TgZ(31,"div")(32,"system-checkbox",18),g.NdJ("ngModelChange",(function(e){return t.model.data.settings.ews_push=e})),g.qZA()()(),g.TgZ(33,"div",11)(34,"label",5),g._UZ(35,"system-label",19),g.qZA(),g.TgZ(36,"input",20),g.NdJ("ngModelChange",(function(e){return t.model.data.settings.ews_subscriptionid=e})),g.qZA()()(),g.TgZ(37,"div",3)(38,"button",21),g.NdJ("click",(function(){return t.displayFoldersModal()})),g._UZ(39,"system-label",22),g.qZA(),g.TgZ(40,"button",21),g.NdJ("click",(function(){return t.testConnection()})),g._UZ(41,"system-label",23),g.qZA()()()()),2&e&&(g.xp6(8),g.Q6J("disabled",!t.view.isEditMode())("ngModel",t.model.data.settings.ews_host),g.xp6(5),g.Q6J("ngModel",t.model.data.settings.ews_username)("disabled",!t.view.isEditMode()),g.xp6(4),g.Q6J("ngModel",t.model.data.settings.ews_password)("disabled",!t.view.isEditMode()),g.xp6(5),g.Q6J("ngModel",t.model.data.settings.ews_email)("disabled",!t.view.isEditMode()),g.xp6(4),g.Q6J("ngModel",t.foldername),g.xp6(6),g.Q6J("ngModel",t.model.data.settings.ews_push),g.xp6(4),g.Q6J("ngModel",t.model.data.settings.ews_subscriptionid),g.xp6(2),g.Q6J("disabled",!t.view.isEditMode()),g.xp6(2),g.Q6J("disabled",!t.view.isEditMode()))},dependencies:[n.Fj,n.JJ,n.On,I.U,so.Z,T._],encapsulation:2}),MailboxesEWSTrafficManager})();function go(e,t){if(1&e&&(g.TgZ(0,"option",10),g._uU(1),g.qZA()),2&e){const e=t.$implicit;g.s9C("value",e.id),g.xp6(1),g.Oqu(e.name)}}let uo=(()=>{class MailboxesEWSSelectFoldersModal{constructor(e,t){this.language=e,this.model=t,this.mailboxes=[]}setMailboxes(e){this.mailboxes=e}get mailbox(){try{return this.model.getField("settings").ews_folder.id}catch(e){return""}}set mailbox(e){let t=this.model.getField("settings");t.ews_folder=this.mailboxes.find((t=>t.id==e)),this.model.setField("settings",t)}close(){this.self.destroy()}}return MailboxesEWSSelectFoldersModal.ɵfac=function(e){return new(e||MailboxesEWSSelectFoldersModal)(g.Y36(f.d),g.Y36(kl.o))},MailboxesEWSSelectFoldersModal.ɵcmp=g.Xpm({type:MailboxesEWSSelectFoldersModal,selectors:[["mailbox-folders-modal"]],decls:14,vars:4,consts:[[3,"close"],[1,"slds-grid","slds-wrap","slds-grid--pull-padded"],[1,"slds-col"],[1,"slds-form-element"],[1,"slds-truncate","slds-form-element__label"],["label","LBL_INBOX_FOLDER"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_OK"],[3,"value"]],template:function(e,t){1&e&&(g.TgZ(0,"system-modal")(1,"system-modal-header",0),g.NdJ("close",(function(){return t.close()})),g._uU(2),g.qZA(),g.TgZ(3,"system-modal-content")(4,"div",1)(5,"div",2)(6,"div",3)(7,"label",4),g._UZ(8,"system-label",5),g.qZA(),g.TgZ(9,"select",6),g.NdJ("ngModelChange",(function(e){return t.mailbox=e})),g.YNc(10,go,2,2,"option",7),g.qZA()()()()(),g.TgZ(11,"system-modal-footer")(12,"button",8),g.NdJ("click",(function(){return t.close()})),g._UZ(13,"system-label",9),g.qZA()()()),2&e&&(g.xp6(2),g.Oqu(t.language.getLabel(t.model.module,"LBL_MAILBOX_FOLDERS")),g.xp6(7),g.Q6J("disabled",0==t.mailboxes.length)("ngModel",t.mailbox),g.xp6(1),g.Q6J("ngForOf",t.mailboxes))},dependencies:[i.sg,n.YN,n.Kr,n.EJ,n.JJ,n.On,T._,it.j,nt.x,lt.p,ot.y],encapsulation:2}),MailboxesEWSSelectFoldersModal})(),mo=(()=>{class MailboxesImpersonatedEWSTrafficManager{constructor(e,t,s,i,n,l){this.language=e,this.injector=t,this.model=s,this.modal=i,this.view=n,this.backend=l;let o=this.model.getField("settings");(!o||o&&0==o.length)&&(this.model.data.settings={user_name:""})}testConnection(){this.modal.openModal("MailboxesmanagerTestModal",!0,this.injector)}getMailboxes(){let e=new rn.x,t=this.model.utils.spiceModel2backend("Mailboxes",this.model.data);return this.backend.postRequest("module/Mailboxes/ews/folders",{},{data:t}).subscribe((t=>{!0===t.result?e.next(t):e.next(!1),e.complete()})),e.asObservable()}}return MailboxesImpersonatedEWSTrafficManager.ɵfac=function(e){return new(e||MailboxesImpersonatedEWSTrafficManager)(g.Y36(f.d),g.Y36(g.zs3),g.Y36(kl.o),g.Y36(M.o),g.Y36(Hs.e),g.Y36(p.y))},MailboxesImpersonatedEWSTrafficManager.ɵcmp=g.Xpm({type:MailboxesImpersonatedEWSTrafficManager,selectors:[["ng-component"]],decls:12,vars:3,consts:[[1,"slds-m-vertical--xx-small","slds-box--border"],[1,"slds-p-around--x-small"],["label","LBL_IMPERSONATED_EWS"],[1,"slds-grid","slds-p-vertical--xx-small"],[1,"slds-form-element","slds-size--1-of-1"],[1,"slds-truncate","slds-form-element__label"],["label","LBL_USER_NAME"],["type","text",1,"slds-input",3,"disabled","ngModel","ngModelChange"],["type","button",1,"slds-col--bump-left","slds-button","slds-button--neutral",3,"disabled","click"],["label","LBL_TEST_CONNECTION"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0)(1,"div",1)(2,"h1"),g._UZ(3,"system-label",2),g.qZA(),g.TgZ(4,"div",3)(5,"div",4)(6,"label",5),g._UZ(7,"system-label",6),g.qZA(),g.TgZ(8,"input",7),g.NdJ("ngModelChange",(function(e){return t.model.data.settings.user_name=e})),g.qZA()()(),g.TgZ(9,"div",3)(10,"button",8),g.NdJ("click",(function(){return t.testConnection()})),g._UZ(11,"system-label",9),g.qZA()()()()),2&e&&(g.xp6(8),g.Q6J("disabled",!t.view.isEditMode())("ngModel",t.model.data.settings.user_name),g.xp6(2),g.Q6J("disabled",!t.view.isEditMode()))},dependencies:[n.Fj,n.JJ,n.On,T._],encapsulation:2}),MailboxesImpersonatedEWSTrafficManager})(),po=(()=>{class MailboxManagerAddDialog{constructor(e,t,s,i,n){this.backend=e,this.metadata=t,this.language=s,this.modelutilities=i,this.model=n,this.closedialog=new g.vpe,this.mailbox_name="",this.self=null,this.saving=!1}closeDialog(){this.closedialog.emit(!1),this.self.destroy()}add(){this.model.module="Mailboxes",this.model.id=this.modelutilities.generateGuid(),this.model.setField("name",this.mailbox_name),this.saving=!0,this.model.save().subscribe((()=>{this.closedialog.emit(this.model.data),this.self.destroy()}))}getComponents(){return this.metadata.getSystemComponents()}}return MailboxManagerAddDialog.ɵfac=function(e){return new(e||MailboxManagerAddDialog)(g.Y36(p.y),g.Y36(h.Pu),g.Y36(f.d),g.Y36(b.A),g.Y36(kl.o))},MailboxManagerAddDialog.ɵcmp=g.Xpm({type:MailboxManagerAddDialog,selectors:[["mailboxmanager-add-dialog"]],inputs:{mailboxes:"mailboxes"},features:[g._Bn([kl.o])],decls:15,vars:4,consts:[[3,"close"],["label","LBL_ADD"],["label","LBL_MAILBOX"],[1,"slds-form-element"],[1,"slds-form-element__label"],[1,"slds-form-element__control"],["type","text","placeholder","name",1,"slds-input",3,"ngModel","disabled","ngModelChange"],[1,"slds-button","slds-button--neutral",3,"disabled","click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"disabled","click"]],template:function(e,t){1&e&&(g.TgZ(0,"system-modal")(1,"system-modal-header",0),g.NdJ("close",(function(){return t.closeDialog()})),g._UZ(2,"system-label",1)(3,"system-label",2),g.qZA(),g.TgZ(4,"system-modal-content")(5,"div",3)(6,"label",4),g._UZ(7,"system-label",2),g.qZA(),g.TgZ(8,"div",5)(9,"input",6),g.NdJ("ngModelChange",(function(e){return t.mailbox_name=e})),g.qZA()()()(),g.TgZ(10,"system-modal-footer")(11,"button",7),g.NdJ("click",(function(){return t.closeDialog()})),g._UZ(12,"system-label",8),g.qZA(),g.TgZ(13,"button",9),g.NdJ("click",(function(){return t.add()})),g._UZ(14,"system-label",1),g.qZA()()()),2&e&&(g.xp6(9),g.Q6J("ngModel",t.mailbox_name)("disabled",t.saving),g.xp6(2),g.Q6J("disabled",t.saving),g.xp6(2),g.Q6J("disabled",t.saving))},dependencies:[n.Fj,n.JJ,n.On,T._,it.j,nt.x,lt.p,ot.y],encapsulation:2}),MailboxManagerAddDialog})();function ho(e,t){if(1&e&&(g.TgZ(0,"option",12),g._uU(1),g.qZA()),2&e){const e=t.$implicit;g.s9C("value",e),g.xp6(1),g.Oqu(e)}}function fo(e,t){if(1&e&&(g.TgZ(0,"option",12),g._uU(1),g.qZA()),2&e){const e=t.$implicit;g.s9C("value",e),g.xp6(1),g.Oqu(e)}}function bo(e,t){if(1&e&&(g.TgZ(0,"option",12),g._uU(1),g.qZA()),2&e){const e=t.$implicit;g.s9C("value",e),g.xp6(1),g.Oqu(e)}}let _o=(()=>{class MailboxesIMAPSMTPSelectFoldersModal{constructor(e,t){this.language=e,this.model=t,this.mailboxes=[]}setMailboxes(e){this.mailboxes=e}close(){this.self.destroy()}}return MailboxesIMAPSMTPSelectFoldersModal.ɵfac=function(e){return new(e||MailboxesIMAPSMTPSelectFoldersModal)(g.Y36(f.d),g.Y36(kl.o))},MailboxesIMAPSMTPSelectFoldersModal.ɵcmp=g.Xpm({type:MailboxesIMAPSMTPSelectFoldersModal,selectors:[["mailbox-folders-modal"]],decls:24,vars:10,consts:[[3,"close"],[1,"slds-grid","slds-wrap","slds-grid--pull-padded"],[1,"slds-col"],[1,"slds-form-element"],[1,"slds-truncate","slds-form-element__label"],["label","LBL_INBOX_FOLDER"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["label","LBL_SENT_FOLDER"],["label","LBL_TRASH_FOLDER"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_OK"],[3,"value"]],template:function(e,t){1&e&&(g.TgZ(0,"system-modal")(1,"system-modal-header",0),g.NdJ("close",(function(){return t.close()})),g._uU(2),g.qZA(),g.TgZ(3,"system-modal-content")(4,"div",1)(5,"div",2)(6,"div",3)(7,"label",4),g._UZ(8,"system-label",5),g.qZA(),g.TgZ(9,"select",6),g.NdJ("ngModelChange",(function(e){return t.model.data.settings.imap_inbox_dir=e})),g.YNc(10,ho,2,2,"option",7),g.qZA()(),g.TgZ(11,"div",3)(12,"label",4),g._UZ(13,"system-label",8),g.qZA(),g.TgZ(14,"select",6),g.NdJ("ngModelChange",(function(e){return t.model.data.settings.imap_sent_dir=e})),g.YNc(15,fo,2,2,"option",7),g.qZA()(),g.TgZ(16,"div",3)(17,"label",4),g._UZ(18,"system-label",9),g.qZA(),g.TgZ(19,"select",6),g.NdJ("ngModelChange",(function(e){return t.model.data.settings.imap_trash_dir=e})),g.YNc(20,bo,2,2,"option",7),g.qZA()()()()(),g.TgZ(21,"system-modal-footer")(22,"button",10),g.NdJ("click",(function(){return t.close()})),g._UZ(23,"system-label",11),g.qZA()()()),2&e&&(g.xp6(2),g.Oqu(t.language.getLabel(t.model.module,"LBL_MAILBOX_FOLDERS")),g.xp6(7),g.Q6J("disabled",0==t.mailboxes.length)("ngModel",t.model.data.settings.imap_inbox_dir),g.xp6(1),g.Q6J("ngForOf",t.mailboxes),g.xp6(4),g.Q6J("disabled",0==t.mailboxes.length)("ngModel",t.model.data.settings.imap_sent_dir),g.xp6(1),g.Q6J("ngForOf",t.mailboxes),g.xp6(4),g.Q6J("disabled",0==t.mailboxes.length)("ngModel",t.model.data.settings.imap_trash_dir),g.xp6(1),g.Q6J("ngForOf",t.mailboxes))},dependencies:[i.sg,n.YN,n.Kr,n.EJ,n.JJ,n.On,T._,it.j,nt.x,lt.p,ot.y],encapsulation:2}),MailboxesIMAPSMTPSelectFoldersModal})();function Zo(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",0)(1,"div",1)(2,"h1"),g._UZ(3,"system-label",19),g.qZA(),g.TgZ(4,"div",20)(5,"div",8)(6,"label",5),g._UZ(7,"system-label",21),g.qZA(),g.TgZ(8,"select",22),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.model.data.settings.imap_pop3_protocol_type=t)})),g.TgZ(9,"option",23),g._UZ(10,"system-label",19),g.qZA(),g.TgZ(11,"option",24),g._UZ(12,"system-label",25),g.qZA()()(),g.TgZ(13,"div",10)(14,"label",5),g._UZ(15,"system-label",26),g.qZA(),g.TgZ(16,"input",27),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.model.data.settings.imap_pop3_host=t)})),g.qZA()()(),g.TgZ(17,"div",20)(18,"div",8)(19,"label",5),g._UZ(20,"system-label",28),g.qZA(),g.TgZ(21,"input",27),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.model.data.settings.imap_pop3_port=t)})),g.qZA()(),g.TgZ(22,"div",10)(23,"label",5),g._UZ(24,"system-label",29),g.qZA(),g.TgZ(25,"select",22),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.model.data.settings.imap_pop3_encryption=t)})),g.TgZ(26,"option",30),g._UZ(27,"system-label",31),g.qZA(),g.TgZ(28,"option",32),g._UZ(29,"system-label",33),g.qZA(),g.TgZ(30,"option",34),g._UZ(31,"system-label",35),g.qZA()()()(),g.TgZ(32,"div",36)(33,"div",37)(34,"label",5),g._UZ(35,"system-label",38),g.qZA(),g._UZ(36,"input",39),g.qZA(),g.TgZ(37,"div",37)(38,"label",5),g._UZ(39,"system-label",40),g.qZA(),g._UZ(40,"input",39),g.qZA(),g.TgZ(41,"div",37)(42,"label",5),g._UZ(43,"system-label",41),g.qZA(),g._UZ(44,"input",39),g.qZA()(),g.TgZ(45,"div",36)(46,"div",10)(47,"div",37)(48,"label",5),g._UZ(49,"system-label",42),g.qZA()(),g.TgZ(50,"div",37)(51,"system-checkbox",43),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.model.data.settings.imap_delete_after_fetch=t)})),g.qZA()()()(),g.TgZ(52,"div",15)(53,"button",44),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw();return g.KtG(t.displayFoldersModal())})),g._UZ(54,"system-label",45),g.qZA()()()()}if(2&e){const e=g.oxw();g.xp6(8),g.Q6J("disabled",!e.view.isEditMode())("ngModel",e.model.data.settings.imap_pop3_protocol_type),g.xp6(8),g.Q6J("ngModel",e.model.data.settings.imap_pop3_host)("disabled",!e.view.isEditMode()),g.xp6(5),g.Q6J("ngModel",e.model.data.settings.imap_pop3_port)("disabled",!e.view.isEditMode()),g.xp6(4),g.Q6J("disabled",!e.view.isEditMode())("ngModel",e.model.data.settings.imap_pop3_encryption),g.xp6(11),g.Q6J("ngModel",e.model.data.settings.imap_inbox_dir),g.xp6(4),g.Q6J("ngModel",e.model.data.settings.imap_sent_dir),g.xp6(4),g.Q6J("ngModel",e.model.data.settings.imap_trash_dir),g.xp6(7),g.Q6J("disabled",!e.view.isEditMode())("ngModel",e.model.data.settings.imap_delete_after_fetch),g.xp6(2),g.Q6J("disabled",!e.view.isEditMode())}}function yo(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",0)(1,"div",1)(2,"h1"),g._UZ(3,"system-label",46),g.qZA(),g.TgZ(4,"div",20)(5,"div",8)(6,"label",5),g._UZ(7,"system-label",26),g.qZA(),g.TgZ(8,"input",27),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.model.data.settings.smtp_host=t)})),g.qZA()(),g.TgZ(9,"div",10)(10,"div",37)(11,"label",5),g._UZ(12,"system-label",47),g.qZA()(),g.TgZ(13,"div",37)(14,"system-checkbox",48),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.model.data.settings.smtp_auth=t)})),g.qZA()()()(),g.TgZ(15,"div",20)(16,"div",8)(17,"label",5),g._UZ(18,"system-label",28),g.qZA(),g.TgZ(19,"input",27),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.model.data.settings.smtp_port=t)})),g.qZA()(),g.TgZ(20,"div",10)(21,"label",5),g._UZ(22,"system-label",29),g.qZA(),g.TgZ(23,"select",22),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.model.data.settings.smtp_encryption=t)})),g.TgZ(24,"option",30),g._UZ(25,"system-label",31),g.qZA(),g.TgZ(26,"option",32),g._UZ(27,"system-label",33),g.qZA(),g.TgZ(28,"option",34),g._UZ(29,"system-label",35),g.qZA()()()(),g.TgZ(30,"div",20)(31,"div",8)(32,"label",5),g._UZ(33,"system-label",49),g.qZA(),g.TgZ(34,"input",27),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.model.data.settings.reply_to=t)})),g.qZA()()(),g.TgZ(35,"div",20)(36,"div",50)(37,"div",37)(38,"system-checkbox",12),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.model.data.settings.smtp_verify_peer=t)})),g.qZA()()(),g.TgZ(39,"div",50)(40,"div",37)(41,"system-checkbox",12),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.model.data.smtp_verify_peer_name=t)})),g._UZ(42,"system-label",51),g.qZA()()(),g.TgZ(43,"div",50)(44,"div",37)(45,"system-checkbox",12),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.model.data.allow_external_delete=t)})),g._UZ(46,"system-label",52),g.qZA()()(),g.TgZ(47,"div",50)(48,"div",37)(49,"system-checkbox",12),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.model.data.smtp_allow_self_signed=t)})),g._UZ(50,"system-label",53),g.qZA()()()()()()}if(2&e){const e=g.oxw();g.xp6(8),g.Q6J("ngModel",e.model.data.settings.smtp_host)("disabled",!e.view.isEditMode()),g.xp6(6),g.Q6J("disabled",!e.view.isEditMode())("ngModel",e.model.data.settings.smtp_auth),g.xp6(5),g.Q6J("ngModel",e.model.data.settings.smtp_port)("disabled",!e.view.isEditMode()),g.xp6(4),g.Q6J("disabled",!e.view.isEditMode())("ngModel",e.model.data.settings.smtp_encryption),g.xp6(11),g.Q6J("ngModel",e.model.data.settings.reply_to)("disabled",!e.view.isEditMode()),g.xp6(4),g.Q6J("disabled",!e.view.isEditMode())("ngModel",e.model.data.settings.smtp_verify_peer),g.xp6(3),g.Q6J("disabled",!e.view.isEditMode())("ngModel",e.model.data.smtp_verify_peer_name),g.xp6(4),g.Q6J("disabled",!e.view.isEditMode())("ngModel",e.model.data.allow_external_delete),g.xp6(4),g.Q6J("disabled",!e.view.isEditMode())("ngModel",e.model.data.smtp_allow_self_signed)}}let Mo=(()=>{class MailboxesImapSmtpTrafficManager{constructor(e,t,s,i,n,l,o){this.backend=e,this.language=t,this.model=s,this.modal=i,this.toast=n,this.view=l,this.injector=o;let a=this.model.getField("settings");(!a||a&&0==a.length)&&this.model.setField("settings",{imap_inbox_dir:"",imap_pop3_display_name:"",imap_pop3_encryption:"",imap_pop3_host:"",imap_pop3_password:"",imap_pop3_port:"",imap_pop3_protocol_type:"",imap_pop3_username:"",imap_sent_dir:"",imap_trash_dir:"",imap_delete_after_fetch:"",smtp_allow_self_signed:"",smtp_auth:"",smtp_encryption:"",smtp_host:"",smtp_port:"",smtp_verify_peer:"",smtp_verify_peer_name:"",reply_to:"",shared_mailbox_auth_user:"",shared_mailbox_user:""})}get isInbound(){return!!this.model.getFieldValue("inbound_comm")}get isOutbound(){return"no"!=this.model.getFieldValue("outbound_comm")}getMailboxes(){let e=new rn.x,t=this.model.utils.spiceModel2backend("Mailboxes",this.model.data);return this.backend.postRequest("module/Mailboxes/imap/folders",{},{data:t}).subscribe((t=>{!0===t.result?e.next(t):e.next(!1),e.complete()})),e.asObservable()}displayFoldersModal(){let e=this.modal.await("loading folders");this.getMailboxes().subscribe((t=>{e.emit(!0),!1!==t&&this.modal.openModal("MailboxesIMAPSMTPSelectFoldersModal",!0,this.injector).subscribe((e=>{e.instance.setMailboxes(t.mailboxes)}),(e=>{this.toast.sendToast(e)}))}))}testConnection(){this.modal.openModal("MailboxesmanagerTestIMAPModal",!0,this.injector)}}return MailboxesImapSmtpTrafficManager.ɵfac=function(e){return new(e||MailboxesImapSmtpTrafficManager)(g.Y36(p.y),g.Y36(f.d),g.Y36(kl.o),g.Y36(M.o),g.Y36(y.A),g.Y36(Hs.e),g.Y36(g.zs3))},MailboxesImapSmtpTrafficManager.ɵcmp=g.Xpm({type:MailboxesImapSmtpTrafficManager,selectors:[["mailboxes-imap-smtp-traffic-manager"]],decls:32,vars:12,consts:[[1,"slds-m-vertical--xx-small","slds-box--border"],[1,"slds-p-around--x-small"],["label","LBL_USER"],[1,"slds-grid"],[1,"slds-form-element","slds-size--1-of-1"],[1,"slds-truncate","slds-form-element__label"],["label","LBL_DISPLAY_NAME"],["type","text",1,"slds-input",3,"disabled","ngModel","ngModelChange"],[1,"slds-form-element","slds-size--1-of-2","slds-p-right--xx-small"],["label","LBL_USER_NAME"],[1,"slds-form-element","slds-size--1-of-2","slds-p-left--xx-small"],["label","LBL_PASSWORD"],[3,"disabled","ngModel","ngModelChange"],["label","LBL_SHARED_MAILBOX_AUTH_USER"],["label","LBL_SHARED_MAILBOX_USER"],[1,"slds-grid","slds-p-vertical--small"],["type","button",1,"slds-col--bump-left","slds-button","slds-button--neutral",3,"click"],["label","LBL_TEST_CONNECTION"],["class","slds-m-vertical--xx-small slds-box--border",4,"ngIf"],["label","LBL_IMAP"],[1,"slds-grid","slds-p-vertical--xx-small"],["label","LBL_PROTOCOL_TYPE"],["type","text",1,"slds-select","ng-pristine","ng-valid",3,"disabled","ngModel","ngModelChange"],["value","imap"],["value","pop3"],["label","LBL_POP3"],["label","LBL_HOST"],["type","text",1,"slds-input",3,"ngModel","disabled","ngModelChange"],["label","LBL_PORT"],["label","LBL_ENCRYPTION"],["value","none"],["label","LBL_NOENCRYPTION"],["value","ssl"],["label","LBL_SSL"],["value","tls"],["label","LBL_TLS"],[1,"slds-grid--vertical","slds-p-vertical--xx-small"],[1,"slds-form-element"],["label","LBL_INBOX_FOLDER"],["disabled","",1,"slds-input",3,"ngModel"],["label","LBL_SENT_FOLDER"],["label","LBL_TRASH_FOLDER"],["label","LBL_IMAP_DELETE_AFTER_FETCH"],["id","imap_delete_after_fetch",3,"disabled","ngModel","ngModelChange"],["type","button",1,"slds-col--bump-left","slds-button","slds-button--neutral",3,"disabled","click"],["label","LBL_IMAP_SELECT_FOLDERS"],["label","LBL_SMTP"],["label","LBL_AUTHENTICATION"],["id","smtp_auth",3,"disabled","ngModel","ngModelChange"],["label","LBL_REPLY_TO"],[1,"slds-form-element","slds-size--1-of-4"],["label","LBL_SMTP_VERIFY_PEER_NAME"],["label","LBL_IMAP_SMTP_ALLOW_EXTERNAL_DELETE"],["label","LBL_SMTP_ALLOW_SELF_SIGNED"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0)(1,"div",1)(2,"h1"),g._UZ(3,"system-label",2),g.qZA(),g.TgZ(4,"div",3)(5,"div",4)(6,"label",5),g._UZ(7,"system-label",6),g.qZA(),g.TgZ(8,"input",7),g.NdJ("ngModelChange",(function(e){return t.model.data.settings.imap_pop3_display_name=e})),g.qZA()()(),g.TgZ(9,"div",3)(10,"div",8)(11,"label",5),g._UZ(12,"system-label",9),g.qZA(),g.TgZ(13,"input",7),g.NdJ("ngModelChange",(function(e){return t.model.data.settings.imap_pop3_username=e})),g.qZA()(),g.TgZ(14,"div",10)(15,"label",5),g._UZ(16,"system-label",11),g.qZA(),g.TgZ(17,"system-input-password",12),g.NdJ("ngModelChange",(function(e){return t.model.data.settings.imap_pop3_password=e})),g.qZA()()(),g.TgZ(18,"div",3)(19,"div",8)(20,"label",5),g._UZ(21,"system-label",13),g.qZA(),g.TgZ(22,"input",7),g.NdJ("ngModelChange",(function(e){return t.model.data.settings.shared_mailbox_auth_user=e})),g.qZA()(),g.TgZ(23,"div",8)(24,"label",5),g._UZ(25,"system-label",14),g.qZA(),g.TgZ(26,"input",7),g.NdJ("ngModelChange",(function(e){return t.model.data.settings.shared_mailbox_user=e})),g.qZA()()(),g.TgZ(27,"div",15)(28,"button",16),g.NdJ("click",(function(){return t.testConnection()})),g._UZ(29,"system-label",17),g.qZA()()()(),g.YNc(30,Zo,55,14,"div",18),g.YNc(31,yo,51,18,"div",18)),2&e&&(g.xp6(8),g.Q6J("disabled",!t.view.isEditMode())("ngModel",t.model.data.settings.imap_pop3_display_name),g.xp6(5),g.Q6J("disabled",!t.view.isEditMode())("ngModel",t.model.data.settings.imap_pop3_username),g.xp6(4),g.Q6J("disabled",!t.view.isEditMode())("ngModel",t.model.data.settings.imap_pop3_password),g.xp6(5),g.Q6J("disabled",!t.view.isEditMode())("ngModel",t.model.data.settings.shared_mailbox_auth_user),g.xp6(4),g.Q6J("disabled",!t.view.isEditMode())("ngModel",t.model.data.settings.shared_mailbox_user),g.xp6(4),g.Q6J("ngIf",t.isInbound),g.xp6(1),g.Q6J("ngIf",t.isOutbound))},dependencies:[i.O5,n.YN,n.Kr,n.Fj,n.EJ,n.JJ,n.On,I.U,so.Z,T._],encapsulation:2}),MailboxesImapSmtpTrafficManager})();var xo=s(2868),vo=s(3634);function Ao(e,t){if(1&e&&g._UZ(0,"system-dynamic-component",4),2&e){const e=g.oxw();g.Q6J("component",e.transportcomponent)}}let To=(()=>{class MailboxesTransportManager{constructor(e,t,s,i,n){this.metadata=e,this.language=t,this.model=s,this.view=i,this.configuration=n}get transportcomponent(){let e=this.model.getField("transport");if(!e)return;let t=this.configuration.getData("mailboxtransports").find((t=>t.name==e));return t?t.component:void 0}}return MailboxesTransportManager.ɵfac=function(e){return new(e||MailboxesTransportManager)(g.Y36(h.Pu),g.Y36(f.d),g.Y36(kl.o),g.Y36(Hs.e),g.Y36(x.C))},MailboxesTransportManager.ɵcmp=g.Xpm({type:MailboxesTransportManager,selectors:[["mailboxes-transport-manager"]],decls:4,vars:1,consts:[["titlelabel","LBL_TRANSPORT"],[1,"slds-p-around--x-small"],["field","transport"],[3,"component",4,"ngIf"],[3,"component"]],template:function(e,t){1&e&&(g.TgZ(0,"system-section",0)(1,"div",1),g._UZ(2,"field-container",2),g.YNc(3,Ao,1,1,"system-dynamic-component",3),g.qZA()()),2&e&&(g.xp6(3),g.Q6J("ngIf",t.transportcomponent))},dependencies:[i.O5,tn.T,xo.P,vo.j],encapsulation:2}),MailboxesTransportManager})();function Lo(e,t){if(1&e&&(g.TgZ(0,"option",22),g._uU(1),g.qZA()),2&e){const e=t.$implicit;g.s9C("value",e.processor_class),g.xp6(1),g.hij(" ",e.name," ")}}function Co(e,t){if(1&e&&(g.TgZ(0,"option",22),g._uU(1),g.qZA()),2&e){const e=t.$implicit;g.s9C("value",e),g.xp6(1),g.hij(" ",e," ")}}function qo(e,t){if(1&e&&(g.ynx(0),g.YNc(1,Co,2,2,"option",14),g.BQk()),2&e){const e=g.oxw(2).$implicit,t=g.oxw(2);g.xp6(1),g.Q6J("ngForOf",t.getProcessorMethods(e.processor_class))}}function Jo(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"tr")(1,"input",11),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw().$implicit;return g.KtG(s.id=t)})),g.qZA(),g.TgZ(2,"td",12)(3,"select",13),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw().$implicit;return g.KtG(s.processor_class=t)})),g.YNc(4,Lo,2,2,"option",14),g.qZA()(),g.TgZ(5,"td",15)(6,"select",13),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw().$implicit;return g.KtG(s.processor_method=t)})),g.YNc(7,qo,2,1,"ng-container",10),g.qZA()(),g.TgZ(8,"td",16)(9,"input",17),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw().$implicit;return g.KtG(s.priority=t)})),g.qZA()(),g.TgZ(10,"td",18)(11,"input",19),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw().$implicit;return g.KtG(s.stop_on_success=t)})),g.qZA()(),g.TgZ(12,"td",20)(13,"button",21),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw().$implicit,s=g.oxw(2);return g.KtG(s.removeProcessor(t.id))})),g._uU(14,"X "),g.qZA()()()}if(2&e){const e=g.oxw().$implicit,t=g.oxw(2);g.xp6(1),g.Q6J("ngModel",e.id),g.xp6(2),g.Q6J("disabled",0==t.processors.length)("ngModel",e.processor_class),g.xp6(1),g.Q6J("ngForOf",t.processors),g.xp6(2),g.Q6J("disabled",!e.processor_class)("ngModel",e.processor_method),g.xp6(1),g.Q6J("ngIf",e.processor_class),g.xp6(2),g.Q6J("ngModel",e.priority),g.xp6(2),g.Q6J("ngModel",e.stop_on_success)}}function No(e,t){if(1&e&&(g.ynx(0),g.YNc(1,Jo,15,9,"tr",10),g.BQk()),2&e){const e=t.$implicit;g.xp6(1),g.Q6J("ngIf",!e.deleted)}}function ko(e,t){if(1&e&&(g.TgZ(0,"table",2)(1,"thead")(2,"tr",3)(3,"th",4)(4,"div",5),g._uU(5,"Class"),g.qZA()(),g.TgZ(6,"th",4)(7,"div",6),g._uU(8,"Method"),g.qZA()(),g.TgZ(9,"th",4)(10,"div",7),g._uU(11,"Priority"),g.qZA()(),g.TgZ(12,"th",4)(13,"div",8),g._uU(14,"Stop on success "),g.qZA()()()(),g.TgZ(15,"tbody"),g.YNc(16,No,2,1,"ng-container",9),g.qZA()()),2&e){const e=g.oxw();g.xp6(16),g.Q6J("ngForOf",e.model.data.mailbox_processors)}}let wo=(()=>{class MailboxesProcessors{constructor(e,t,s,i,n){this.metadata=e,this.language=t,this.backend=s,this.model=i,this.view=n,this.processors=[],this.model.module="Mailboxes",this.view.isEditable=!0,this.view.setEditMode(),this.getProcessors()}addProcessor(){this.model.getField("mailbox_processors")||this.model.setField("mailbox_processors",[]),this.model.getField("mailbox_processors").push({id:this.model.generateGuid(),class:"",method:"",priority:"",stop_on_success:"",deleted:!1})}removeProcessor(e){this.model.getField("mailbox_processors").forEach((function(t){t.id===e&&(t.deleted=!0)}))}get processorsvisible(){return this.model.getField("mailbox_processors").length>0}getProcessorMethods(e){for(let t of this.processors)if(t.processor_class==e)return t.methods;return[]}getProcessors(){let e=new rn.x;return this.backend.getRequest("module/Mailboxes/processors").subscribe((t=>{!0===t.result&&(this.processors=t.processors),e.next(t),e.complete()})),e.asObservable()}}return MailboxesProcessors.ɵfac=function(e){return new(e||MailboxesProcessors)(g.Y36(h.Pu),g.Y36(f.d),g.Y36(p.y),g.Y36(kl.o),g.Y36(Hs.e))},MailboxesProcessors.ɵcmp=g.Xpm({type:MailboxesProcessors,selectors:[["mailboxes-processors"]],decls:3,vars:1,consts:[["class","slds-table slds-table_bordered slds-table_cell-buffer",4,"ngIf"],["type","button",1,"slds-col--bump-left","slds-button","slds-button--neutral",3,"click"],[1,"slds-table","slds-table_bordered","slds-table_cell-buffer"],[1,"slds-text-title"],["scope","col"],["title","Class",1,"slds-truncate"],["title","Method",1,"slds-truncate"],["title","Priority",1,"slds-truncate"],["title","Stop on success",1,"slds-truncate"],[4,"ngFor","ngForOf"],[4,"ngIf"],["type","hidden",3,"ngModel","ngModelChange"],["scope","row","data-label","Class"],["type","text",1,"slds-select","ng-pristine","ng-valid",3,"disabled","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["scope","row","data-label","Method"],["scope","row","data-label","Priority"],["title","Priority",1,"slds-input","ng-pristine","ng-valid","ng-touched",3,"ngModel","ngModelChange"],["scope","row","data-label","Stop on success"],["title","Stop on success",1,"slds-input","ng-pristine","ng-valid","ng-touched",3,"ngModel","ngModelChange"],["scope","row"],[1,"slds-button","slds-button_destructive",3,"click"],[3,"value"]],template:function(e,t){1&e&&(g.YNc(0,ko,17,1,"table",0),g.TgZ(1,"button",1),g.NdJ("click",(function(){return t.addProcessor()})),g._uU(2," Add Processor\n"),g.qZA()),2&e&&g.Q6J("ngIf",t.processorsvisible)},dependencies:[i.sg,i.O5,n.YN,n.Kr,n.Fj,n.EJ,n.JJ,n.On],encapsulation:2}),MailboxesProcessors})();function Uo(e,t){if(1&e&&(g.TgZ(0,"option",22),g._uU(1),g.qZA()),2&e){const e=t.$implicit;g.Q6J("value",e.id),g.xp6(1),g.hij("",e.name," ")}}function Eo(e,t){1&e&&(g.TgZ(0,"div",23),g._UZ(1,"system-spinner"),g.qZA())}function Do(e,t){1&e&&g._UZ(0,"system-utility-icon",34),2&e&&g.Q6J("icon","favorite")("size","xx-small")}function Oo(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"system-utility-icon",35),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw().$implicit,s=g.oxw(2);return g.KtG(s.addCategory(t))})),g.qZA()}2&e&&g.Q6J("icon","add")("size","xx-small")}function Io(e,t){1&e&&g._UZ(0,"system-utility-icon",11),2&e&&g.Q6J("icon","chevronright")("size","xx-small")}const Qo=function(e,t){return{"slds-theme--shade":e,"slds-theme_alert-texture":t}};function So(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",27)(1,"div",28),g.NdJ("mouseenter",(function(){const t=g.CHM(e).$implicit,s=g.oxw(2);return g.KtG(s.select(t))})),g.TgZ(2,"span",29),g.NdJ("click",(function(){const t=g.CHM(e).$implicit,s=g.oxw(2);return g.KtG(s.edit(t))})),g._uU(3),g.qZA(),g.YNc(4,Do,1,2,"system-utility-icon",30),g.TgZ(5,"div",31),g.YNc(6,Oo,1,2,"system-utility-icon",32),g.YNc(7,Io,1,2,"system-utility-icon",33),g.qZA()()()}if(2&e){const e=t.$implicit,s=g.oxw(2);g.Q6J("ngClass",g.WLB(5,Qo,s.isCategorySelected(e)||e==s.edit_category,e==s.edit_category)),g.xp6(3),g.Oqu(e.name),g.xp6(1),g.Q6J("ngIf",1==e.favorite),g.xp6(2),g.Q6J("ngIf",e.level<s.max_levels-1),g.xp6(1),g.Q6J("ngIf",e.childs)}}function Bo(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",36)(1,"system-utility-icon",35),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw(2);return g.KtG(t.addCategory())})),g.qZA()()}2&e&&(g.xp6(1),g.Q6J("icon","add")("size","xx-small"))}const Fo=function(e){return{width:e}},Yo=function(e){return{"slds-border--right":e}};function Ro(e,t){if(1&e&&(g.TgZ(0,"div",24),g.YNc(1,So,8,8,"div",25),g.YNc(2,Bo,2,2,"div",26),g.qZA()),2&e){const e=t.$implicit,s=t.index,i=g.oxw();g.Q6J("ngStyle",g.VKq(4,Fo,100/i.levels.length+"%"))("ngClass",g.VKq(6,Yo,s<i.max_levels-1)),g.xp6(1),g.Q6J("ngForOf",e),g.xp6(1),g.Q6J("ngIf",0==s)}}function Go(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"article",37)(1,"div",38)(2,"header",17)(3,"h2"),g._uU(4,"Edit Category"),g.qZA()(),g.TgZ(5,"system-utility-icon",35),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw();return g.KtG(t.removeCategory(t.edit_category))})),g.qZA()(),g.TgZ(6,"div",39)(7,"div",40)(8,"label",3),g._uU(9,"Name:"),g.qZA(),g.TgZ(10,"div",41)(11,"input",42),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.edit_category.name=t)})),g.qZA()()(),g.TgZ(12,"div",40)(13,"label",3),g._uU(14,"Key:"),g.qZA(),g.TgZ(15,"div",41)(16,"input",42),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.edit_category.keyname=t)})),g.qZA()()(),g.TgZ(17,"div",40)(18,"div",43)(19,"div",44)(20,"span",45)(21,"input",46),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.edit_category.favorite=t)})),g.qZA(),g.TgZ(22,"label",47),g._UZ(23,"span",48),g.TgZ(24,"span",3),g._uU(25,"Favorite"),g.qZA()()(),g.TgZ(26,"span",45)(27,"input",49),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.edit_category.selectable=t)})),g.qZA(),g.TgZ(28,"label",50),g._UZ(29,"span",48),g.TgZ(30,"span",3),g._uU(31,"Selectable"),g.qZA()()()()()()()()}if(2&e){const e=g.oxw();g.xp6(5),g.Q6J("icon","close")("size","xx-small"),g.xp6(6),g.Q6J("ngModel",e.edit_category.name),g.xp6(5),g.Q6J("ngModel",e.edit_category.keyname),g.xp6(5),g.Q6J("ngModel",e.edit_category.favorite),g.xp6(6),g.Q6J("ngModel",e.edit_category.selectable)}}let Ho=(()=>{class SelectTreeComponent{constructor(e,t,s,i,n,l,o){this.backend=e,this.metadata=t,this.language=s,this.config=i,this.utils=n,this.toast=l,this.modalservice=o,this.currentSelectTree="",this.category_tree=[],this.levels=[],this.max_levels=4,this.loading=!0,this.selected_categorys=[],this.edit_category=null,this.service_queues=[],this.trees=[],this.loadTrees(!0)}addTree(){this.modalservice.openModal("SelectTreeAddDialog").subscribe((e=>{e.instance.tree$.subscribe((e=>{this.updateTree(e)}))}))}updateTree(e){this.loadTrees(),this.currentSelectTree=e.id,this.loadSelectTree(this.currentSelectTree)}loadTrees(e=!1){this.config.getData("select_trees")||this.backend.getRequest("configuration/spiceui/core/selecttree/trees").subscribe((t=>{this.trees=t,e&&(this.trees.length>0?(this.currentSelectTree=this.trees[0].id,this.loadSelectTree(this.currentSelectTree)):this.loading=!1)}))}loadSelectTree(e){this.edit_category=null,this.backend.getRequest("configuration/spiceui/core/selecttree/tree/"+e).subscribe((e=>{this.config.setData("select_tree",e),this.initializeTree(e)}))}initializeTree(e){this.category_tree=e;for(let e=0;e<this.max_levels;e++)this.levels[e]=[];this.levels[0]=this.category_tree,this.loading=!1}resetLevels(e=0){for(let t=e;t<this.max_levels;t++)this.levels[t]=[];this.selected_categorys.splice(e,this.max_levels-e)}select(e){this.selected_categorys[e.level]=e,e.childs?(this.levels[e.level+1]=e.childs,this.resetLevels(e.level+2)):this.resetLevels(e.level+1)}addCategory(e=null){let t={id:this.utils.generateGuid(),name:"new Field...",keyname:null,parent_id:null,tree:this.currentSelectTree,selectable:0,favorite:0,level:0};e?(e.childs||(e.childs=[]),t.parent_id=e.id,t.level=e.level+1,t.level>this.max_levels&&(this.max_levels=t.level),e.childs.push(t),this.levels[e.level+1]=e.childs):(this.category_tree.push(t),this.levels[0]=this.category_tree),this.select(t),this.edit(t)}removeCategory(e){if(e.childs){if(!confirm("Are you sure you want to delete this Category? There are "+e.childs.length+" Subcategories which will be get deleted too!"))return!1}e==this.edit_category&&(this.edit_category=null);let t=0;for(let i of this.category_tree){if(i==e)return this.category_tree.splice(t,1),!0;s(i,e),t++}function s(e,t){if(e.childs)for(let i=0;i<e.childs.length;i++){if(e.childs[i]==t)return e.childs.splice(i,1),!0;s(e.childs[i],t)}return!1}}edit(e){this.selected_categorys[e.level]=e,this.edit_category=e}save(){this.backend.postRequest("configuration/spiceui/core/selecttree/tree",null,this.category_tree).subscribe((e=>{this.toast.sendToast("changes saved")}),(e=>{this.toast.sendAlert("saving failed!"),console.error(e)}))}isCategorySelected(e){for(let t of this.selected_categorys)if(t.id==e.id)return!0;return!1}}return SelectTreeComponent.ɵfac=function(e){return new(e||SelectTreeComponent)(g.Y36(p.y),g.Y36(h.Pu),g.Y36(f.d),g.Y36(x.C),g.Y36(b.A),g.Y36(y.A),g.Y36(M.o))},SelectTreeComponent.ɵcmp=g.Xpm({type:SelectTreeComponent,selectors:[["ng-component"]],decls:26,vars:8,consts:[[1,"slds-p-around--small","slds-border--bottom"],[1,"slds-grid","slds-grid--vertical-align-center","slds-form--inline"],[1,"slds-form-element"],[1,"slds-form-element__label"],["label","LBL_TREE"],[1,"slds-form-element__control",2,"min-width","250px"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","disabled","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],[1,"slds-form-element","slds-col--bump-left"],["type","button",1,"slds-button","slds-button_icon","slds-button_icon-border-filled",3,"click"],[3,"icon","size"],[1,"slds-grid","slds-grid--align-spread","slds-p-around--medium"],[1,"slds-text-heading--medium"],[1,"slds-button","slds-button--brand",3,"click"],[1,"slds-card","slds-m-around--small"],[1,"slds-card__header"],[1,"slds-has-flexi-truncate"],[1,"slds-card__body","slds-card__body_inner","slds-grid"],["class","slds-p-around--small slds-align--absolute-center",4,"ngIf"],["class","slds-col slds-size--1-of-2",3,"ngStyle","ngClass",4,"ngFor","ngForOf"],["class","slds-card slds-m-around--small slds-size--1-of-4 slds-theme--shade slds-theme_alert-texture",4,"ngIf"],[3,"value"],[1,"slds-p-around--small","slds-align--absolute-center"],[1,"slds-col","slds-size--1-of-2",3,"ngStyle","ngClass"],[3,"ngClass",4,"ngFor","ngForOf"],["class","slds-p-around--xx-small",4,"ngIf"],[3,"ngClass"],[1,"slds-grid","slds-grid--vertical-align-center","slds-p-around--xx-small",3,"mouseenter"],[1,"slds-truncate",2,"cursor","pointer",3,"click"],["class","slds-m-left--small",3,"icon","size",4,"ngIf"],[1,"slds-col--bump-left"],["style","cursor:pointer;",3,"icon","size","click",4,"ngIf"],[3,"icon","size",4,"ngIf"],[1,"slds-m-left--small",3,"icon","size"],[2,"cursor","pointer",3,"icon","size","click"],[1,"slds-p-around--xx-small"],[1,"slds-card","slds-m-around--small","slds-size--1-of-4","slds-theme--shade","slds-theme_alert-texture"],[1,"slds-card__header","slds-grid"],[1,"slds-card__body","slds-card__body_inner"],[1,"slds-form-element","slds-m-vertical--xxx-small"],[1,"slds-form-element__control"],["type","text",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-form-element","slds-p-top--small"],[1,"slds-form-element__control","slds-grid"],[1,"slds-checkbox"],["type","checkbox","name","options","id","checkbox-42",3,"ngModel","ngModelChange"],["for","checkbox-42",1,"slds-checkbox__label"],[1,"slds-checkbox_faux"],["type","checkbox","name","options","id","checkbox-49",3,"ngModel","ngModelChange"],["for","checkbox-49",1,"slds-checkbox__label"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"label",3),g._UZ(4,"system-label",4),g.qZA(),g.TgZ(5,"div",5)(6,"div",6)(7,"select",7),g.NdJ("ngModelChange",(function(e){return t.currentSelectTree=e}))("change",(function(){return t.loadSelectTree(t.currentSelectTree)})),g.YNc(8,Uo,2,2,"option",8),g.qZA()()()(),g.TgZ(9,"div",9)(10,"button",10),g.NdJ("click",(function(){return t.addTree()})),g._UZ(11,"system-utility-icon",11),g.qZA()()()(),g.TgZ(12,"div",12)(13,"h2",13),g._uU(14,"Select Tree"),g.qZA(),g.TgZ(15,"button",14),g.NdJ("click",(function(){return t.save()})),g._uU(16,"Save"),g.qZA()(),g.TgZ(17,"article",15)(18,"div",16)(19,"header",17)(20,"h2"),g._uU(21,"Service Category Tree"),g.qZA()()(),g.TgZ(22,"div",18),g.YNc(23,Eo,2,0,"div",19),g.YNc(24,Ro,3,8,"div",20),g.qZA()(),g.YNc(25,Go,32,6,"article",21)),2&e&&(g.xp6(7),g.Q6J("ngModel",t.currentSelectTree)("disabled",0==t.trees.length),g.xp6(1),g.Q6J("ngForOf",t.trees),g.xp6(3),g.Q6J("icon","add")("size","x-small"),g.xp6(12),g.Q6J("ngIf",t.loading),g.xp6(1),g.Q6J("ngForOf",t.levels),g.xp6(1),g.Q6J("ngIf",t.edit_category))},dependencies:[i.mk,i.sg,i.O5,i.PC,n.YN,n.Kr,n.Fj,n.Wl,n.EJ,n.JJ,n.On,T._,Xn.W,u.r],encapsulation:2}),SelectTreeComponent})(),Ko=(()=>{class SelectTreeAddDialog{constructor(e,t,s,i,n){this.backend=e,this.metadata=t,this.language=s,this.modelutilities=i,this.utils=n,this.tree=null,this.tree$=new g.vpe,this.addType="fieldset",this.addName="",this.fieldsettype="custom"}closeDialog(){this.self.destroy()}add(){this.tree={id:this.utils.generateGuid(),name:this.addName},this.backend.postRequest("configuration/spiceui/core/selecttree/newtree",null,this.tree).subscribe((e=>{this.tree$.emit(this.tree),this.self.destroy()}),(e=>{console.error(e)}))}}return SelectTreeAddDialog.ɵfac=function(e){return new(e||SelectTreeAddDialog)(g.Y36(p.y),g.Y36(h.Pu),g.Y36(f.d),g.Y36(b.A),g.Y36(b.A))},SelectTreeAddDialog.ɵcmp=g.Xpm({type:SelectTreeAddDialog,selectors:[["selecttree-add-dialog"]],inputs:{tree:"tree"},outputs:{tree$:"tree"},decls:18,vars:3,consts:[["role","dialog","tabindex","-1","aria-labelledby","header43",1,"slds-modal","slds-fade-in-open"],[1,"slds-modal__container"],[1,"slds-modal__header"],["title","Close",1,"slds-button","slds-modal__close","slds-button--icon-inverse",3,"click"],[3,"icon","size"],["id","header43",1,"slds-text-heading--medium"],["label","LBL_ADD_TREE"],[1,"slds-modal__content","slds-p-around--medium"],[1,"slds-form-element","slds-m-top--small"],[1,"slds-form-element__label"],["label","LBL_TREE_NAME"],[1,"slds-form-element__control"],["type","text","placeholder","name",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-modal__footer"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_ADD"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),g.NdJ("click",(function(){return t.closeDialog()})),g._UZ(4,"system-button-icon",4),g.qZA(),g.TgZ(5,"h2",5),g._UZ(6,"system-label",6),g.qZA()(),g.TgZ(7,"div",7)(8,"div",8)(9,"label",9),g._UZ(10,"system-label",10),g.qZA(),g.TgZ(11,"div",11)(12,"input",12),g.NdJ("ngModelChange",(function(e){return t.addName=e})),g.qZA()()()(),g.TgZ(13,"div",13)(14,"button",14),g.NdJ("click",(function(){return t.closeDialog()})),g._UZ(15,"system-label",15),g.qZA(),g.TgZ(16,"button",16),g.NdJ("click",(function(){return t.add()})),g._UZ(17,"system-label",17),g.qZA()()()()),2&e&&(g.xp6(4),g.Q6J("icon","close")("size","large"),g.xp6(8),g.Q6J("ngModel",t.addName))},dependencies:[n.Fj,n.JJ,n.On,A.J,T._],encapsulation:2}),SelectTreeAddDialog})();var zo=s(5399),Vo=s(8807),Po=s(2400);function $o(e,t){1&e&&(g.TgZ(0,"div"),g._UZ(1,"system-spinner"),g.qZA())}function jo(e,t){1&e&&(g.TgZ(0,"div",10),g._UZ(1,"system-utility-icon",11),g.TgZ(2,"div",12)(3,"p"),g._uU(4,"all fine!"),g.qZA()()())}function Wo(e,t){if(1&e&&(g.TgZ(0,"tr")(1,"td"),g._UZ(2,"system-checkbox",15),g.qZA(),g.TgZ(3,"td"),g._uU(4),g.qZA(),g.TgZ(5,"td"),g._uU(6),g.qZA()()),2&e){const e=t.$implicit;g.xp6(2),g.Q6J("disabled",!0),g.xp6(2),g.Oqu(e.id),g.xp6(2),g.Oqu(e.name)}}function Xo(e,t){if(1&e&&(g.TgZ(0,"div")(1,"p"),g._uU(2),g.qZA(),g.TgZ(3,"table",13)(4,"thead")(5,"tr"),g._UZ(6,"th"),g.TgZ(7,"th"),g._uU(8,"ID"),g.qZA(),g.TgZ(9,"th"),g._uU(10,"Name"),g.qZA()()(),g.TgZ(11,"tbody"),g.YNc(12,Wo,7,3,"tr",14),g.qZA()()()),2&e){const e=g.oxw().$implicit;g.xp6(2),g.Oqu(e.description),g.xp6(10),g.Q6J("ngForOf",e.records)}}function ea(e,t){if(1&e&&(g.TgZ(0,"system-card",7),g._UZ(1,"system-card-header",8),g.TgZ(2,"system-card-body"),g.YNc(3,jo,5,0,"div",9),g.YNc(4,Xo,13,2,"div",4),g.qZA()()),2&e){const e=t.$implicit;g.xp6(1),g.Q6J("title",e.table),g.xp6(2),g.Q6J("ngIf",!e.records),g.xp6(1),g.Q6J("ngIf",e.records&&e.records.length>0)}}function ta(e,t){if(1&e&&(g.TgZ(0,"div")(1,"div",5)(2,"p"),g._uU(3),g.qZA()(),g.YNc(4,ea,5,3,"system-card",6),g.qZA()),2&e){const e=g.oxw();g.xp6(3),g.AsE("",e.results.total_checks," Checks are made and found ",e.results.total_records," Records:"),g.xp6(1),g.Q6J("ngForOf",e.results.checks)}}let sa=(()=>{class ConfigCleaner{constructor(e,t,s,i){this.backend=e,this.metadata=t,this.language=s,this.utils=i,this.results=[],this.is_loading=!1}diagnose(e){this.is_loading=!0,this.backend.getRequest(`admin/cleanup/configs/check/${e}`).subscribe((e=>{this.results=e,this.is_loading=!1}))}}return ConfigCleaner.ɵfac=function(e){return new(e||ConfigCleaner)(g.Y36(p.y),g.Y36(h.Pu),g.Y36(f.d),g.Y36(b.A))},ConfigCleaner.ɵcmp=g.Xpm({type:ConfigCleaner,selectors:[["language-label-manager"]],decls:6,vars:2,consts:[[1,"slds-p-around--medium"],[1,"slds-m-around--medium"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_INCOMPLETE_RECORDS"],[4,"ngIf"],[1,"slds-box","slds-m-bottom--medium"],["class","slds-m-bottom--medium",4,"ngFor","ngForOf"],[1,"slds-m-bottom--medium"],[3,"title"],["class","slds-inline_icon_text slds-grid",4,"ngIf"],[1,"slds-inline_icon_text","slds-grid"],["icon","check","size","x-small"],[1,"slds-col","slds-align-middle","slds-text-color_success"],[1,"slds-table","slds-table--bordered"],[4,"ngFor","ngForOf"],[3,"disabled"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0)(1,"div",1)(2,"button",2),g.NdJ("click",(function(){return t.diagnose("incomplete")})),g._UZ(3,"system-label",3),g.qZA()(),g.YNc(4,$o,2,0,"div",4),g.YNc(5,ta,5,3,"div",4),g.qZA()),2&e&&(g.xp6(4),g.Q6J("ngIf",t.is_loading),g.xp6(1),g.Q6J("ngIf",t.results&&t.results.total_checks>0))},dependencies:[i.sg,i.O5,zo.x,Vo.I,Po.Q,I.U,T._,Xn.W,u.r],encapsulation:2}),ConfigCleaner})();function ia(e,t){1&e&&(g.TgZ(0,"div"),g._UZ(1,"system-spinner"),g.qZA())}let na=(()=>{class StyleCacheCleaner{constructor(e,t,s){this.backend=e,this.toast=t,this.language=s,this.is_loading=!1}cleanCache(){this.is_loading=!0,this.backend.getRequest("admin/cleanup/stylecache").subscribe((e=>{e?this.toast.sendToast(this.language.getLabel("LBL_CACHE_FILE_DELETED"),"success"):this.toast.sendToast(this.language.getLabel("LBL_CACHE_FILE_NOT_FOUND"),"info"),this.is_loading=!1}))}}return StyleCacheCleaner.ɵfac=function(e){return new(e||StyleCacheCleaner)(g.Y36(p.y),g.Y36(y.A),g.Y36(f.d))},StyleCacheCleaner.ɵcmp=g.Xpm({type:StyleCacheCleaner,selectors:[["style-cache-cleaner"]],decls:5,vars:1,consts:[[1,"slds-p-around--medium"],[1,"slds-m-around--medium"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_CLEAN_STYLE_CACHE"],[4,"ngIf"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0)(1,"div",1)(2,"button",2),g.NdJ("click",(function(){return t.cleanCache()})),g._UZ(3,"system-label",3),g.qZA()(),g.YNc(4,ia,2,0,"div",4),g.qZA()),2&e&&(g.xp6(4),g.Q6J("ngIf",t.is_loading))},dependencies:[i.O5,T._,Xn.W],encapsulation:2}),StyleCacheCleaner})();function la(e,t){if(1&e&&(g.TgZ(0,"option",21),g._uU(1),g.qZA()),2&e){const e=t.$implicit;g.s9C("value",e.class),g.xp6(1),g.Oqu(e.class)}}function oa(e,t){if(1&e&&(g.TgZ(0,"option",21),g._uU(1),g.qZA()),2&e){const e=t.$implicit;g.s9C("value",e.id),g.xp6(1),g.Oqu(e.name)}}function aa(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"tr")(1,"td",15)(2,"select",16),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw().$implicit;return g.KtG(s.bean=t)})),g.YNc(3,la,2,2,"option",17),g.qZA()(),g.TgZ(4,"td",18)(5,"select",16),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw().$implicit;return g.KtG(s.calendar=t)})),g.YNc(6,oa,2,2,"option",17),g.qZA()(),g.TgZ(7,"td",19)(8,"button",20),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw().$implicit,s=g.oxw();return g.KtG(s.removeMapping(t.id))})),g._uU(9,"X "),g.qZA()()()}if(2&e){const e=g.oxw().$implicit,t=g.oxw();g.xp6(2),g.Q6J("disabled",0==t.beans.length)("ngModel",e.bean),g.xp6(1),g.Q6J("ngForOf",t.beans),g.xp6(2),g.Q6J("disabled",0==t.calendars.length)("ngModel",e.calendar),g.xp6(1),g.Q6J("ngForOf",t.calendars)}}function da(e,t){if(1&e&&(g.ynx(0),g.YNc(1,aa,10,6,"tr",14),g.BQk()),2&e){const e=t.$implicit;g.xp6(1),g.Q6J("ngIf",!e.deleted)}}let ra=(()=>{class GoogleCalendarManager{constructor(e,t,s,i){this.backend=e,this.language=t,this.model=s,this.toast=i,this.beans=[],this.calendars=[],this.beanMappings=[],this.getBeans(),this.getCalendars(),this.getBeanMappings()}saveBeanMappings(){let e={bean_mappings:this.beanMappings};this.backend.postRequest("channels/groupware/gsuite/calendar/beanmappings",{},e).subscribe((e=>{this.toast.sendToast("Bean Mappings saved")}))}startSync(){this.backend.getRequest("channels/groupware/gsuite/calendar/sync").subscribe((e=>{1==e.result?this.toast.sendToast("Google Calendar synchronization started.","success"):this.toast.sendToast(e.error,"error")}))}addMapping(){this.beanMappings||(this.beanMappings=[]),this.beanMappings.push({id:this.model.generateGuid(),deleted:!1,bean:{module:"",class:""},calendar:{id:"",name:""}})}removeMapping(e){this.beanMappings.forEach((t=>{t.id===e&&(t.deleted=!0)}))}getBeans(){let e=new rn.x;return this.backend.getRequest("channels/groupware/gsuite/calendar/beans").subscribe((t=>{!0===t.result&&(this.beans=t.beans),e.next(t),e.complete()}),(e=>{})),e.asObservable()}getCalendars(){let e=new rn.x;return this.backend.getRequest("channels/groupware/gsuite/calendar/calendars").subscribe((t=>{!0===t.result&&(this.calendars=t.calendars),e.next(t),e.complete()}),(e=>{})),e.asObservable()}getBeanMappings(){let e=new rn.x;return this.backend.getRequest("channels/groupware/gsuite/calendar/beanmappings").subscribe((t=>{!0===t.result&&(this.beanMappings=Object.keys(t.bean_mappings).map((e=>t.bean_mappings[e]))),e.next(t),e.complete()}),(e=>{})),e.asObservable()}}return GoogleCalendarManager.ɵfac=function(e){return new(e||GoogleCalendarManager)(g.Y36(p.y),g.Y36(f.d),g.Y36(kl.o),g.Y36(y.A))},GoogleCalendarManager.ɵcmp=g.Xpm({type:GoogleCalendarManager,selectors:[["google-calendar-manager"]],features:[g._Bn([kl.o,Hs.e])],decls:20,vars:1,consts:[[1,"slds-grid","slds-form--inline","slds-p-around--small","slds-border--bottom"],[1,"slds-form-element","slds-col--bump-left"],["role","group",1,"slds-button-group"],["type","button",1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_START_SYNC"],["label","LBL_ADD"],["type","button",1,"slds-button","slds-button--brand",3,"click"],["label","LBL_SAVE"],[1,"slds-table","slds-table_bordered","slds-table_cell-buffer"],[1,"slds-text-title"],["scope","col"],["title","Bean",1,"slds-truncate"],["title","Calendar",1,"slds-truncate"],[4,"ngFor","ngForOf"],[4,"ngIf"],["scope","row","data-label","Class"],["type","text",1,"slds-select","ng-pristine","ng-valid",3,"disabled","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["scope","row","data-label","Method"],["scope","row"],[1,"slds-button","slds-button_destructive",3,"click"],[3,"value"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),g.NdJ("click",(function(){return t.startSync()})),g._UZ(4,"system-label",4),g.qZA(),g.TgZ(5,"button",3),g.NdJ("click",(function(){return t.addMapping()})),g._UZ(6,"system-label",5),g.qZA(),g.TgZ(7,"button",6),g.NdJ("click",(function(){return t.saveBeanMappings()})),g._UZ(8,"system-label",7),g.qZA()()()(),g.TgZ(9,"table",8)(10,"thead")(11,"tr",9)(12,"th",10)(13,"div",11),g._uU(14,"Bean"),g.qZA()(),g.TgZ(15,"th",10)(16,"div",12),g._uU(17,"Calendar"),g.qZA()()()(),g.TgZ(18,"tbody"),g.YNc(19,da,2,1,"ng-container",13),g.qZA()()),2&e&&(g.xp6(19),g.Q6J("ngForOf",t.beanMappings))},dependencies:[i.sg,i.O5,n.YN,n.Kr,n.EJ,n.JJ,n.On,T._],encapsulation:2}),GoogleCalendarManager})();var ca=s(1135),ga=s(2422),ua=s(8026),ma=s(1061);const pa=["downloadlink"],ha=["fileupload"];function fa(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div")(1,"div",33),g._uU(2,'Upload and import the file "'),g.TgZ(3,"b"),g._uU(4),g.qZA(),g._uU(5,'"?'),g.qZA(),g.TgZ(6,"div")(7,"button",34),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw(2);return g.KtG(t.uploadFile())})),g._uU(8),g.qZA()()()}if(2&e){const e=g.oxw(2);g.xp6(4),g.Oqu(e.filename),g.xp6(4),g.Oqu(e.lang.getLabel("LBL_UPLOAD_AND_IMPORT"))}}function ba(e,t){if(1&e&&(g.TgZ(0,"system-progress-bar",35),g._uU(1,' Upload of file "'),g.TgZ(2,"b"),g._uU(3),g.qZA(),g._uU(4,'" … '),g.qZA()),2&e){const e=g.oxw(2);g.Q6J("progress",e.uploadProgress),g.xp6(3),g.Oqu(e.filename)}}function _a(e,t){1&e&&(g.TgZ(0,"div")(1,"b"),g._uU(2,"Importing …"),g.qZA()())}function Za(e,t){if(1&e&&(g.TgZ(0,"div")(1,"b"),g._uU(2,"Import successful"),g.qZA(),g._uU(3),g._UZ(4,"br"),g._uU(5),g.qZA()),2&e){const e=g.oxw(2);g.xp6(3),g.AsE(": ",e.importResponse.numberLinesInserted," records inserted into ",e.importResponse.numberAffectedTables," tables. "),g.xp6(2),g.AsE('Before import a backup of the affected tables has been made to folder "',e.importResponse.backupLocation,'". It will be automatically deleted after ',e.importResponse.backupPeriod," days. ")}}function ya(e,t){if(1&e&&(g.TgZ(0,"div")(1,"b"),g._uU(2,"Import failed"),g.qZA(),g._uU(3),g.qZA()),2&e){const e=g.oxw(2);g.xp6(3),g.hij(". No record has been inserted. Reason: ",e.importErrorMessage," ")}}function Ma(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div")(1,"div",8)(2,"div",23)(3,"div",24)(4,"input",25),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.ignoreUnknownTables=t)})),g.qZA(),g.TgZ(5,"label",26),g._UZ(6,"span",27),g.TgZ(7,"span",9),g._uU(8,"Ignore unknown tables and do the import anyway. In case the input data contains tables that are unknown to the system."),g.qZA()()()()(),g.TgZ(9,"div",8)(10,"div",23)(11,"div",24)(12,"input",28),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.keepAssignedUser=t)})),g.qZA(),g.TgZ(13,"label",29),g._UZ(14,"span",27),g.TgZ(15,"span",9),g._uU(16,"Keep assigned user. Otherwise, the records will be assigned to "),g.TgZ(17,"i"),g._uU(18,"you"),g.qZA(),g._uU(19,"."),g.qZA()()()()(),g.TgZ(20,"div",8)(21,"div",23)(22,"div",24)(23,"input",30),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.keepEnteredModifiedInfo=t)})),g.qZA(),g.TgZ(24,"label",31),g._UZ(25,"span",27),g.TgZ(26,"span",9),g._uU(27,"Keep entered/modified info. Otherwise, "),g.TgZ(28,"i"),g._uU(29,"you"),g.qZA(),g._uU(30," will be noted in the record - with the "),g.TgZ(31,"i"),g._uU(32,"current"),g.qZA(),g._uU(33," time stamp."),g.qZA()()()()(),g.YNc(34,fa,9,2,"div",19),g.YNc(35,ba,5,2,"system-progress-bar",32),g.YNc(36,_a,3,0,"div",19),g.YNc(37,Za,6,4,"div",19),g.YNc(38,ya,4,1,"div",19),g.qZA()}if(2&e){const e=g.oxw();g.xp6(4),g.Q6J("ngModel",e.ignoreUnknownTables)("disabled",e.isAfterUpload||e.isUploading),g.xp6(8),g.Q6J("ngModel",e.keepAssignedUser)("disabled",e.isAfterUpload||e.isUploading),g.xp6(11),g.Q6J("ngModel",e.keepEnteredModifiedInfo)("disabled",e.isAfterUpload||e.isUploading),g.xp6(11),g.Q6J("ngIf",!e.isAfterUpload&&!e.isUploading),g.xp6(1),g.Q6J("ngIf",e.isUploading||e.isAfterUpload),g.xp6(1),g.Q6J("ngIf",e.isImporting),g.xp6(1),g.Q6J("ngIf",!0===e.importOK),g.xp6(1),g.Q6J("ngIf",!1===e.importOK)}}function xa(e,t){1&e&&g._UZ(0,"system-spinner",36)}function va(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",39)(1,"button",40),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw(2);return g.KtG(t.changeExportSettings=!0)})),g._uU(2,"change export settings …"),g.qZA()()}}function Aa(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",51)(1,"div",52)(2,"div",24)(3,"input",53),g.NdJ("ngModelChange",(function(t){const s=g.CHM(e).$implicit;return g.KtG(s.include=t)})),g.qZA(),g.TgZ(4,"label",54),g._UZ(5,"span",27),g.TgZ(6,"span",55),g._uU(7),g.qZA()()()()()}if(2&e){const e=t.$implicit,s=t.index;g.xp6(3),g.MGl("id","table",s,""),g.Q6J("ngModel",e.include),g.xp6(1),g.MGl("for","table",s,""),g.xp6(3),g.Oqu(e.name)}}function Ta(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"span")(1,"a",56),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw(3);return g.KtG(t.showBlacklistedTables=!t.showBlacklistedTables)})),g._uU(2,"[show/hide]"),g.qZA(),g._uU(3),g.qZA()}if(2&e){const e=g.oxw(3);g.xp6(3),g.hij('. If necessary use the following input field "',e.lang.getLabel("LBL_ADDITIONAL_TABLES"),'".')}}function La(e,t){if(1&e&&(g.TgZ(0,"span"),g._uU(1),g.qZA()),2&e){const e=g.oxw(3);g.xp6(1),g.Oqu(e.blacklistedTables.join(", "))}}function Ca(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div")(1,"div",41)(2,"button",42),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw(2);return g.KtG(t.selectAll(!0))})),g._uU(3),g.qZA(),g.TgZ(4,"button",42),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw(2);return g.KtG(t.selectAll(!1))})),g._uU(5),g.qZA()(),g.TgZ(6,"div",43),g.YNc(7,Aa,8,4,"div",44),g.qZA(),g.TgZ(8,"div",33)(9,"div")(10,"b"),g._uU(11),g.qZA(),g._uU(12,", because they may not be exported/imported "),g.YNc(13,Ta,4,1,"span",19),g.qZA(),g.YNc(14,La,2,1,"span",19),g.qZA(),g.TgZ(15,"div",45)(16,"label",46),g._uU(17),g.qZA(),g.TgZ(18,"div",47)(19,"input",48),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw(2);return g.KtG(s.additionalTables=t)})),g.qZA(),g.TgZ(20,"button",49),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw(2);return g.KtG(t.additionalTables="")})),g._UZ(21,"system-button-icon",50),g.qZA()()()()}if(2&e){const e=g.oxw(2);g.xp6(3),g.Oqu(e.lang.getLabel("LBL_SELECT_ALL")),g.xp6(2),g.Oqu(e.lang.getLabel("LBL_DESELECT_ALL")),g.xp6(2),g.Q6J("ngForOf",e.selectableTables),g.xp6(4),g.hij("",e.blacklistedTables.length," tables are not listed"),g.xp6(2),g.Q6J("ngIf",e.blacklistedTables.length),g.xp6(1),g.Q6J("ngIf",e.showBlacklistedTables),g.xp6(3),g.Oqu(e.lang.getLabel("LBL_ADDITIONAL_TABLES")),g.xp6(2),g.Q6J("ngModel",e.additionalTables),g.xp6(2),g.Q6J("icon","clear")("size","small")}}function qa(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div"),g.YNc(1,va,3,0,"div",37),g.YNc(2,Ca,22,10,"div",19),g.TgZ(3,"div")(4,"button",38),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw();return g.KtG(t.exportTables())})),g._uU(5),g.qZA()()()}if(2&e){const e=g.oxw();g.xp6(1),g.Q6J("ngIf",!e.changeExportSettings),g.xp6(1),g.Q6J("ngIf",e.changeExportSettings),g.xp6(2),g.Q6J("disabled",0===e.numberOfSelectedTables&&""===e.additionalTables||e.isDownloading),g.xp6(1),g.Oqu(e.lang.getLabel("LBL_EXPORT"))}}const Ja=function(e){return{"slds-is-active":e}},Na=function(e){return{"slds-hide":e}},ka=function(e){return{"slds-has-drag-over":e}};let wa=(()=>{class ConfigTransfer{constructor(e,t,s,i,n,l){this.backend=e,this.metadata=t,this.lang=s,this.prefs=i,this.modalservice=n,this.toast=l,this.tabToShow="i",this.selectableTables=[],this.blacklistedTables=[],this.additionalTables="",this.tablenamesLoaded=!1,this.showBlacklistedTables=!1,this.isLoadingTablenames=!1,this.isDownloading=!1,this.loadUrl=void 0,this.fileName="export.gz",this.changeExportSettings=!1,this.isUploading=!1,this.isImporting=!1,this.isAfterUpload=!1,this.dropErrorMessageCode=null,this.importOK=null,this.ignoreUnknownTables=!1,this.keepAssignedUser=!1,this.keepEnteredModifiedInfo=!1,this.isDragOver=!1}showExport(){"e"!==this.tabToShow&&(this.tablenamesLoaded||this.isLoadingTablenames||(this.isLoadingTablenames=!0,this.backend.getRequest("configuration/transfer/tablenames").subscribe((e=>{e.selectableTables.forEach((e=>{this.selectableTables.push({name:e,include:!0})})),e.blacklistedTables.forEach((e=>{this.blacklistedTables.push(e)})),this.isLoadingTablenames=!1,this.tablenamesLoaded=!0}))),this.tabToShow="e")}showImport(){this.tabToShow="i"}exportTables(){this.isDownloading=!0,this.exportErrorID&&(this.toast.clearToast(this.exportErrorID),this.exportErrorID=null);let e=[];this.selectableTables.forEach((t=>{t.include&&e.push(t.name)})),this.fileName="spicecrm-cfg-"+moment().format("YYYYMMDD-HHmm")+".gz",this.backend.getDownloadPostRequestFile("configuration/transfer/export",{},{selectedTables:e,additionalTables:this.additionalTables}).subscribe((e=>{this.downloadlink.element.nativeElement.href=e,this.downloadlink.element.nativeElement.click(),this.isDownloading=!1}),(e=>{this.isDownloading=!1,this.exportErrorID=this.toast.sendToast(this.lang.getLabel("ERR_EXPORT_FAILED"),"error",this.exportErrorMessage=e.error.message)}))}selectAll(e){this.selectableTables.forEach((t=>{t.include=e}))}get numberOfSelectedTables(){let e=0;return this.selectableTables.forEach((t=>t.include&&e++)),e}uploadFile(){this.modalservice.confirm("You are about to upload a file and import its data into the database. This will change the existing database. Do you really want to do this?",this.lang.getLabel("LBL_WARNING"),"warning").subscribe((e=>{if(e){this.isUploading=!0,this.importOK=null;let e=new ca.X(0);e.subscribe((e=>{this.uploadProgress=e,100===e&&(this.isImporting=!0)})),this.readFileFromFilesystem(this.fileFromBrowser).subscribe((t=>{this.backend.postRequestWithProgress("configuration/transfer/import",null,{file:t,ignoreUnknownTables:this.ignoreUnknownTables,keepAssignedUser:this.keepAssignedUser,keepEnteredModifiedInfo:this.keepEnteredModifiedInfo},e).subscribe((e=>{this.isAfterUpload=this.importOK=!0,this.isImporting=this.isUploading=!1,this.importResponse=e}),(e=>{this.isAfterUpload=!0,this.importOK=!1,this.isImporting=this.isUploading=!1,this.importErrorID=this.toast.sendToast(this.lang.getLabel("ERR_IMPORT_FAILED"),"error",this.importErrorMessage=e.error.error.message)}))}))}}))}get filename(){return this.fileFromBrowser?this.fileFromBrowser.name:""}fileSelectionChange(){return 1===this.fileupload.element.nativeElement.files.length&&(this.fileFromBrowser=this.fileupload.element.nativeElement.files[0]),this.fileSelectedOrDropped(),this.fileupload.element.nativeElement.value=null,!1}fileSelectedOrDropped(){this.isAfterUpload=this.isUploading=!1,this.importOK=null,this.importErrorID&&(this.toast.clearToast(this.importErrorID),this.importErrorID=null)}get fileReadyForUpload(){return this.fileFromBrowser&&!0}readFileFromFilesystem(e){let t=new rn.x,s=new FileReader;return s.onloadend=()=>{let e=s.result.toString();e=e.substring(e.indexOf("base64,")+7),t.next(e),t.complete()},s.readAsDataURL(e),t.asObservable()}onDrop(e){if(e.preventDefault(),this.isDragOver=!1,e.dataTransfer.items){if(1!==e.dataTransfer.items.length||"file"!==e.dataTransfer.items[0].kind)return void this.showDropError();const t=e.dataTransfer.items[0].getAsFile();if("gz"!==t.name.split(".").pop())return void this.showDropError();this.fileFromBrowser=t}else{if(1!==e.dataTransfer.files.length)return;if("gz"!==e.dataTransfer.files[0].name.split(".").pop())return void this.showDropError();this.fileFromBrowser=e.dataTransfer.files[0]}this.dropErrorMessageCode&&this.toast.clearToast(this.dropErrorMessageCode),this.fileSelectedOrDropped()}showDropError(){this.dropErrorMessageCode&&this.toast.clearToast(this.dropErrorMessageCode),this.dropErrorMessageCode=this.toast.sendToast('You can drop only a file. One file. With the extension "gz".',"error",null,!1,this.dropErrorMessageCode)}onDragOver(e){e.preventDefault(),e.stopPropagation(),e.dataTransfer.dropEffect="copy",this.isDragOver=!0}onDragLeave(){this.isDragOver=!1}}return ConfigTransfer.ɵfac=function(e){return new(e||ConfigTransfer)(g.Y36(p.y),g.Y36(h.Pu),g.Y36(f.d),g.Y36(ga.z),g.Y36(M.o),g.Y36(y.A))},ConfigTransfer.ɵcmp=g.Xpm({type:ConfigTransfer,selectors:[["ng-component"]],viewQuery:function(e,t){if(1&e&&(g.Gf(pa,7,g.s_b),g.Gf(ha,7,g.s_b)),2&e){let e;g.iGM(e=g.CRH())&&(t.downloadlink=e.first),g.iGM(e=g.CRH())&&(t.fileupload=e.first)}},decls:34,vars:30,consts:[[1,"slds-m-horizontal--medium","slds-m-top--medium","slds-m-bottom--small"],[1,"slds-text-heading--medium"],[1,"slds-tabs_default","slds-tabs_medium"],["role","tablist",1,"slds-tabs_default__nav"],["title","Item One","role","presentation",1,"slds-tabs_default__item",3,"ngClass"],["href","javascript:void(0);",1,"slds-tabs_default__link",3,"click"],["title","Item Two","role","presentation",1,"slds-tabs_default__item",3,"ngClass"],[1,"slds-tabs_default__content",3,"ngClass"],[1,"slds-form-element"],[1,"slds-form-element__label"],[1,"slds-form-element__control"],[1,"slds-file-selector","slds-file-selector_files",3,"drop","dragover","dragleave"],[1,"slds-file-selector__dropzone",3,"ngClass"],["accept",".gz","type","file","id","config-file-upload-input",1,"slds-file-selector__input","slds-assistive-text",3,"disabled","click","change"],["fileupload",""],["for","config-file-upload-input",1,"slds-file-selector__body"],[1,"slds-file-selector__button","slds-button","slds-button_neutral"],[3,"icon","size","addclasses"],[1,"slds-file-selector__text","slds-medium-show"],[4,"ngIf"],["class","slds-m-top--x-large","style","display:block",4,"ngIf"],[2,"display","none",3,"href","download"],["downloadlink",""],[1,"slds-form-element__control","slds-m-vertical--medium"],[1,"slds-checkbox"],["type","checkbox","id","cbIgnoreUnknownTables",3,"ngModel","disabled","ngModelChange"],["for","cbIgnoreUnknownTables",1,"slds-checkbox__label"],[1,"slds-checkbox_faux"],["type","checkbox","id","cbKeepAssignedUser",3,"ngModel","disabled","ngModelChange"],["for","cbKeepAssignedUser",1,"slds-checkbox__label"],["type","checkbox","id","cbKeepEnteredModifiedData",3,"ngModel","disabled","ngModelChange"],["for","cbKeepEnteredModifiedData",1,"slds-checkbox__label"],["class","slds-m-vertical--medium","size","large",3,"progress",4,"ngIf"],[1,"slds-m-vertical--medium"],[1,"slds-button","slds-button--brand",3,"click"],["size","large",1,"slds-m-vertical--medium",3,"progress"],[1,"slds-m-top--x-large",2,"display","block"],["class","slds-m-bottom--medium",4,"ngIf"],[1,"slds-button","slds-button--brand",3,"disabled","click"],[1,"slds-m-bottom--medium"],[1,"slds-button","slds-button--neutral",3,"click"],["role","group",1,"slds-button-group","slds-m-bottom--medium"],[1,"slds-button","slds-button_neutral",3,"click"],["system-multi-select-checkboxes","",2,"column-width","270px","column-gap","1em"],["class","slds-form-element","style","z-index:1",4,"ngFor","ngForOf"],[1,"slds-form-element","slds-m-vertical--medium"],["for","additionalTables",1,"slds-form-element__label"],[1,"slds-form-element__control","slds-input-has-icon","slds-input-has-icon_right"],["id","additionalTables","type","text",1,"slds-input",3,"ngModel","ngModelChange"],["title","Clear",1,"slds-button","slds-button_icon","slds-input__icon","slds-input__icon_right",3,"click"],[3,"icon","size"],[1,"slds-form-element",2,"z-index","1"],[1,"slds-form-element__control","slds-m-bottom--xxx-small"],["type","checkbox","name","selectableTables",3,"id","ngModel","ngModelChange"],[1,"slds-checkbox__label",3,"for"],[1,"slds-form-element__label",2,"display","inline-block"],["href","javascript:void(0)",3,"click"]],template:function(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",0)(1,"h2",1),g._uU(2),g.qZA(),g.TgZ(3,"p"),g._uU(4,"Export and import configuration data from/into database. Also usable for backup."),g.qZA(),g.TgZ(5,"div",2)(6,"ul",3)(7,"li",4)(8,"a",5),g.NdJ("click",(function(){return t.showImport()})),g._uU(9),g.qZA()(),g.TgZ(10,"li",6)(11,"a",5),g.NdJ("click",(function(){return t.showExport()})),g._uU(12),g.qZA()()(),g.TgZ(13,"div",7)(14,"div",8)(15,"span",9),g._uU(16),g.qZA(),g.TgZ(17,"div",10)(18,"div",11),g.NdJ("drop",(function(e){return t.onDrop(e)}))("dragover",(function(e){return t.onDragOver(e)}))("dragleave",(function(){return t.onDragLeave()})),g.TgZ(19,"div",12)(20,"input",13,14),g.NdJ("click",(function(){g.CHM(e);const t=g.MAs(21);return g.KtG(t.value=null)}))("change",(function(){return t.fileSelectionChange()})),g.qZA(),g.TgZ(22,"label",15)(23,"span",16),g._UZ(24,"system-button-icon",17),g._uU(25),g.qZA(),g.TgZ(26,"span",18),g._uU(27),g.qZA()()()()()(),g.YNc(28,Ma,39,11,"div",19),g.qZA(),g.TgZ(29,"div",7),g.YNc(30,xa,1,0,"system-spinner",20),g.YNc(31,qa,6,4,"div",19),g.qZA()(),g._UZ(32,"a",21,22),g.qZA()}2&e&&(g.xp6(2),g.Oqu(t.lang.getLabel("LBL_CONFIGURATION_TRANSFER")),g.xp6(5),g.Q6J("ngClass",g.VKq(20,Ja,"i"===t.tabToShow)),g.xp6(2),g.Oqu(t.lang.getLabel("LBL_IMPORT")),g.xp6(1),g.Q6J("ngClass",g.VKq(22,Ja,"e"===t.tabToShow)),g.xp6(2),g.Oqu(t.lang.getLabel("LBL_EXPORT")),g.xp6(1),g.Q6J("ngClass",g.VKq(24,Na,"i"!==t.tabToShow)),g.xp6(3),g.Oqu(t.lang.getLabel("LBL_CONFIGURATION_FILE")),g.xp6(3),g.Q6J("ngClass",g.VKq(26,ka,t.isDragOver)),g.xp6(1),g.Q6J("disabled",t.isUploading),g.xp6(4),g.Q6J("icon","upload")("size","small")("addclasses","slds-button__icon_left"),g.xp6(1),g.hij(" ",t.lang.getLabel("LBL_SELECT_FILE"),""),g.xp6(2),g.Oqu(t.lang.getLabel("LBL_OR_DROP_FILE_HERE")),g.xp6(1),g.Q6J("ngIf",t.fileReadyForUpload),g.xp6(1),g.Q6J("ngClass",g.VKq(28,Na,"e"!==t.tabToShow)),g.xp6(1),g.Q6J("ngIf",t.isLoadingTablenames),g.xp6(1),g.Q6J("ngIf",!t.isLoadingTablenames),g.xp6(1),g.Q6J("href",t.loadUrl,g.LSH)("download",t.fileName))},dependencies:[i.mk,i.sg,i.O5,n.Fj,n.Wl,n.JJ,n.On,A.J,ua.J,Xn.W,ma.Q],encapsulation:2}),ConfigTransfer})();var Ua=s(8574);const Ea=["treecontainer"],Da=["addconfigcontainer"];function Oa(e,t){if(1&e&&(g.TgZ(0,"option",52),g._uU(1),g.qZA()),2&e){const e=t.$implicit;g.Q6J("value",e),g.xp6(1),g.Oqu(e)}}function Ia(e,t){1&e&&(g.TgZ(0,"div",53),g._UZ(1,"system-spinner"),g.qZA())}function Qa(e,t){if(1&e&&(g.TgZ(0,"div",54),g._uU(1),g.qZA()),2&e){const e=g.oxw();g.xp6(1),g.AsE(" ",e.selectedComponent.component," / ",e.selectedComponent.role_name," ")}}const Sa=function(e){return{"slds-hidden":e}},Ba=function(e){return{"slds-is-active":e}};let Fa=(()=>{class ModuleConfigManager{constructor(e,t,s,i,n,l,o,a){this.backend=e,this.metadata=t,this.language=s,this.toast=i,this.modalservice=n,this.configuration=l,this.view=o,this.modal=a,this.component="",this.configValues={},this.crActive=!1,this.change_request_required=!1,this.edit_mode="",this.allowCopyButton=!0,this.allowGlobalModal=!1,this.sysModules=[],this.sysRoles={},this.currentModule="",this.currentComponent="",this.selectedId="",this.selectedComponent={},this.newComponent={},this.componentTree=[],this.currentTableActive="",this.componentModuleList=[],this.treelist=[],this.initialized=!1;let d=this.metadata.getRoles();this.sysRoles["*"]="*";for(let e of d)this.sysRoles[e.id]=e.name;this.sysModules=this.metadata.getModules(),this.sysModules.sort(),this.initialized=!0,this.currentModule="*",this.selectedModule(),this.checkMode()}get getAllowCopyButton(){return(0!==Object.keys(this.selectedComponent).length||this.selectedComponent.constructor!==Object)&&this.allowCopyButton}checkMode(){this.edit_mode=this.configuration.getCapabilityConfig("core").edit_mode,this.change_request_required=!!this.configuration.getCapabilityConfig("systemdeployment").change_request_required,"none"!=this.edit_mode&&"custom"!=this.edit_mode&&"all"!=this.edit_mode&&(this.edit_mode="custom"),this.change_request_required?this.backend.getRequest("module/SystemDeploymentCRs/active").subscribe((e=>{""==e.id?(this.setNoneMode(),this.toast.sendToast(this.language.getLabel("LBL_ACTIVATE_CR_WARNING"),"warning",null,3)):"all"==this.edit_mode?this.setAllMode():"custom"==this.edit_mode?this.setCustomMode():this.setNoneMode()})):"all"==this.edit_mode?this.setAllMode():"custom"==this.edit_mode?this.setCustomMode():this.setNoneMode()}setNoneMode(){this.view.setViewMode(),this.allowCopyButton=!1}setCustomMode(){"custom"==this.currentTableActive||"default_custom"==this.currentTableActive?this.view.setEditMode():this.view.setViewMode()}setAllMode(){this.allowGlobalModal=!0,this.view.setEditMode()}selectedModule(){this.currentComponent="",this.componentTree=[],this.selectedComponent={},"*"==this.currentModule?"default_custom"==this.currentTableActive?this.loadDefaultCustom():this.loadDefault():"custom"==this.currentTableActive?this.loadCustom():this.loadGlobal()}loadGlobal(){this.modal.openModal("SystemLoadingModal").subscribe((e=>{this.selectedComponent={},this.currentTableActive="global",this.checkMode(),"*"!=this.currentModule?this.backend.getRequest("configuration/configurator/entries/sysuicomponentmoduleconf").subscribe((t=>{this.buildTreeList(t),e.instance.self.destroy()})):(this.loadDefault(),e.instance.self.destroy())}))}loadCustom(){this.modal.openModal("SystemLoadingModal").subscribe((e=>{this.selectedComponent={},this.currentTableActive="custom",this.checkMode(),"*"!=this.currentModule?this.backend.getRequest("configuration/configurator/entries/sysuicustomcomponentmoduleconf").subscribe((t=>{this.buildTreeList(t),e.instance.self.destroy()})):(this.loadDefaultCustom(),e.instance.self.destroy())}))}loadDefault(){this.modal.openModal("SystemLoadingModal").subscribe((e=>{this.currentTableActive="default",this.backend.getRequest("configuration/configurator/entries/sysuicomponentdefaultconf").subscribe((t=>{this.buildTreeList(t),e.instance.self.destroy()}))}))}loadDefaultCustom(){this.modal.openModal("SystemLoadingModal").subscribe((e=>{this.currentTableActive="default_custom",this.backend.getRequest("configuration/configurator/entries/sysuicustomcomponentdefaultconf").subscribe((t=>{this.buildTreeList(t),e.instance.self.destroy()}))}))}buildTreeList(e){let t=[];for(let s of e)if(s.module==this.currentModule||"*"==this.currentModule){this.componentModuleList.push(s);let e=this.checkRoleName(s.role_id),i={};i={id:s.id,parent_id:s.component,clickable:!0,name:e},this.newComponent&&this.newComponent.id==s.id&&(i.selected=!0,this.selectedOutputItem(i.id)),t.push(i);let n=0;for(let e of t)s.component==e.id&&(n=1);if(0==n){let e=s.component;this.metadata.getSystemComponents().length>0&&this.metadata.getSystemComponents().find((e=>e.component===s.component))&&"1"==this.metadata.getSystemComponents().find((e=>e.component===s.component)).deprecated&&(e+=" | dep."),t.push({id:s.component,parent_id:null,clickable:!1,name:e})}}return this.newComponent={},t.sort(((e,t)=>e.name>t.name?1:-1)),this.treelist=t,t}checkRoleName(e){let t="";return t=this.sysRoles[e]?this.sysRoles[e]:e,t}selectedOutputItem(e){for(let t of this.componentModuleList)if(t.id==e){"string"==typeof t.componentconfig&&(t.componentconfig=JSON.parse(t.componentconfig));this.checkRoleName(t.role_id);this.selectedComponent=t,this.component=t.component,this.configValues=t.componentconfig}}saveChanges(){this.modal.openModal("SystemLoadingModal").subscribe((e=>{if(this.selectedComponent.componentconfig){switch(this.selectedComponent.componentconfig=JSON.stringify(this.selectedComponent.componentconfig),delete this.selectedComponent.role_name,this.currentTableActive){case"default":this.backend.postRequest("configuration/configurator/sysuicomponentdefaultconf/"+this.selectedComponent.id,{},{config:this.selectedComponent}).subscribe((t=>{"success"==t.status&&(e.instance.self.destroy(),this.toast.sendToast("changes saved"))}));break;case"default_custom":this.backend.postRequest("configuration/configurator/sysuicustomcomponentdefaultconf/"+this.selectedComponent.id,{},{config:this.selectedComponent}).subscribe((t=>{"success"==t.status&&(e.instance.self.destroy(),this.toast.sendToast("changes saved"))}));break;case"global":this.backend.postRequest("configuration/configurator/sysuicomponentmoduleconf/"+this.selectedComponent.id,{},{config:this.selectedComponent}).subscribe((t=>{"success"==t.status&&(e.instance.self.destroy(),this.toast.sendToast("changes saved"))}));break;case"custom":this.backend.postRequest("configuration/configurator/sysuicustomcomponentmoduleconf/"+this.selectedComponent.id,{},{config:this.selectedComponent}).subscribe((t=>{"success"==t.status&&(e.instance.self.destroy(),this.toast.sendToast("changes saved"))}));break;default:e.instance.self.destroy()}this.selectedComponent.componentconfig=JSON.parse(this.selectedComponent.componentconfig)}}))}addConf(){this.modalservice.openModal("ModuleConfigAddDialog").subscribe((e=>{e.instance.mode="add","default_custom"==this.currentTableActive||"custom"==this.currentTableActive?e.instance.currentType="custom":"all"==this.edit_mode?e.instance.currentType="global":e.instance.currentType="custom",e.instance.currentModule=this.currentModule,e.instance.allowGlobal=this.allowGlobalModal,e.instance.response$.subscribe((e=>{this.response(e)}))}))}copyConf(){this.modalservice.openModal("ModuleConfigAddDialog").subscribe((e=>{e.instance.mode="copy",e.instance.currentComponent=this.selectedComponent,e.instance.currentRole=this.selectedComponent.role_id,e.instance.currentModule=this.currentModule,e.instance.allowGlobal=this.allowGlobalModal,e.instance.response$.subscribe((e=>{this.response(e)}))}))}response(e){e.module?this.currentModule=e.module:this.currentModule="*","sysuicomponentdefaultconf"==e.table||"sysuicomponentmoduleconf"==e.table?this.currentTableActive="global":this.currentTableActive="custom","sysuicustomcomponentdefaultconf"==e.table&&(this.currentTableActive="default_custom"),"sysuicustomcomponentmoduleconf"==e.table&&(this.currentTableActive="custom"),"sysuicomponentdefaultconf"==e.table&&(this.currentTableActive="default"),"sysuicomponentmoduleconf"==e.table&&(this.currentTableActive="global"),this.newComponent=e,this.selectedModule()}}return ModuleConfigManager.ɵfac=function(e){return new(e||ModuleConfigManager)(g.Y36(p.y),g.Y36(h.Pu),g.Y36(f.d),g.Y36(y.A),g.Y36(M.o),g.Y36(x.C),g.Y36(Hs.e),g.Y36(M.o))},ModuleConfigManager.ɵcmp=g.Xpm({type:ModuleConfigManager,selectors:[["ng-component"]],viewQuery:function(e,t){if(1&e&&(g.Gf(Ea,7,g.s_b),g.Gf(Da,7,g.s_b)),2&e){let e;g.iGM(e=g.CRH())&&(t.treecontainer=e.first),g.iGM(e=g.CRH())&&(t.addconfigcontainer=e.first)}},features:[g._Bn([Hs.e])],decls:56,vars:25,consts:[["system-to-bottom-noscroll",""],[1,"slds-p-around--medium","slds-theme--shade"],[1,"slds-page-header__row"],[1,"slds-page-header__col-title"],[1,"slds-media"],["icon","custom19","sprite","custom"],[1,"slds-media__body"],[1,"slds-page-header__name"],[1,"slds-page-header__name-title"],[1,"slds-page-header__title","slds-truncate"],["label","LBL_CONFIGURATION_MANAGER"],[1,"slds-page-header__name-meta","slds-grid"],[1,"slds-grid","slds-form--inline","slds-p-around--small","slds-border--bottom"],[1,"slds-form-element"],[1,"slds-form-element__label"],["label","LBL_MODULE"],[1,"slds-form-element__control"],[1,"slds-select_container",2,"min-width","250px"],[1,"slds-select",3,"ngModel","disabled","ngModelChange","change"],["value","*"],[3,"value",4,"ngFor","ngForOf"],["class","slds-align_absolute-center slds-p-around--large",4,"ngIf"],[1,"slds-grid",3,"ngClass"],[1,"slds-size--2-of-5","slds-border--right"],["role","application",1,"slds-tree_container",2,"max-width","none"],[1,"slds-tabs_default",2,"background-color","transparent"],["role","tablist",1,"slds-tabs_default__nav"],["title","Item One","role","presentation",1,"slds-tabs_default__item","slds-is-active",3,"ngClass"],[1,"slds-grid","slds-grid--vertical-align-center"],["icon","global","size","x-small"],["href","javascript:void(0);","role","tab","tabindex","0","id","tab-default-1__item",1,"slds-tabs_default__link",3,"click"],["label","LBL_GLOBAL"],["title","Item Two","role","presentation",1,"slds-tabs_default__item",3,"ngClass"],["icon","custom","size","x-small"],["href","javascript:void(0);","role","tab","tabindex","-1","aria-selected","false","aria-controls","tab-default-2","id","tab-default-2__item",1,"slds-tabs_default__link",3,"click"],["label","LBL_CUSTOM"],["role","tabpanel",1,"slds-tabs_default__content","slds-p-vertical_none"],["treecontainer",""],["system-to-bottom","",1,"slds-scrollable_y","slds-border_bottom",3,"marginBottom"],[3,"sourceList","selectedItem","selectedItemChange"],[1,"slds-p-around--small","slds-align--absolute-center"],["addconfigcontainer",""],["title","add item",1,"slds-button","slds-button--icon",3,"disabled","click"],[3,"icon","size","addclasses"],[1,"slds-size--3-of-5","slds-p-horizontal--small","slds-p-top--x-small"],["class","slds-text-heading_small",4,"ngIf"],[1,"slds-col--bump-left"],["type","button",1,"slds-m-bottom_small","slds-col--bump-left","slds-button","slds-button--neutral",3,"disabled","click"],["label","LBL_COPY"],["type","button",1,"slds-m-bottom_small","slds-col--bump-left","slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_SAVE"],[3,"component","configValues"],[3,"value"],[1,"slds-align_absolute-center","slds-p-around--large"],[1,"slds-text-heading_small"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),g._UZ(5,"system-icon",5),g.TgZ(6,"div",6)(7,"div",7)(8,"div",8)(9,"h1")(10,"span",9),g._UZ(11,"system-label",10),g.qZA()()()(),g._UZ(12,"div",11),g.qZA()()()()(),g.TgZ(13,"div",12)(14,"div",13)(15,"label",14),g._UZ(16,"system-label",15),g.qZA(),g.TgZ(17,"div",16)(18,"div",17)(19,"select",18),g.NdJ("ngModelChange",(function(e){return t.currentModule=e}))("change",(function(){return t.selectedModule()})),g.TgZ(20,"option",19),g._uU(21,"*"),g.qZA(),g.YNc(22,Oa,2,2,"option",20),g.qZA()()()()(),g.YNc(23,Ia,2,0,"div",21),g.TgZ(24,"div",22)(25,"div",23)(26,"div",24)(27,"div",25)(28,"ul",26)(29,"li",27)(30,"div",28),g._UZ(31,"system-custom-icon",29),g.TgZ(32,"a",30),g.NdJ("click",(function(){return t.loadGlobal()})),g._UZ(33,"system-label",31),g.qZA()()(),g.TgZ(34,"li",32)(35,"div",28),g._UZ(36,"system-custom-icon",33),g.TgZ(37,"a",34),g.NdJ("click",(function(){return t.loadCustom()})),g._UZ(38,"system-label",35),g.qZA()()()(),g.TgZ(39,"div",36,37)(41,"div",38)(42,"system-tree",39),g.NdJ("selectedItemChange",(function(e){return t.selectedOutputItem(e)})),g.qZA()(),g.TgZ(43,"div",40,41)(45,"button",42),g.NdJ("click",(function(){return t.addConf()})),g._UZ(46,"system-utility-icon",43),g.qZA()()()()()(),g.TgZ(47,"div",44)(48,"div",28),g.YNc(49,Qa,2,2,"div",45),g.TgZ(50,"div",46)(51,"button",47),g.NdJ("click",(function(){return t.copyConf()})),g._UZ(52,"system-label",48),g.qZA(),g.TgZ(53,"button",49),g.NdJ("click",(function(){return t.saveChanges()})),g._UZ(54,"system-label",50),g.qZA()()(),g._UZ(55,"workbench-config",51),g.qZA()()()),2&e&&(g.xp6(19),g.Q6J("ngModel",t.currentModule)("disabled",!t.initialized),g.xp6(3),g.Q6J("ngForOf",t.sysModules),g.xp6(1),g.Q6J("ngIf",!t.initialized),g.xp6(1),g.Q6J("ngClass",g.VKq(19,Sa,!t.initialized)),g.xp6(5),g.Q6J("ngClass",g.VKq(21,Ba,"global"==t.currentTableActive||"default"==t.currentTableActive)),g.xp6(5),g.Q6J("ngClass",g.VKq(23,Ba,"custom"==t.currentTableActive||"default_custom"==t.currentTableActive)),g.xp6(7),g.Q6J("marginBottom",45),g.xp6(1),g.Q6J("sourceList",t.treelist)("selectedItem",t.selectedComponent.id),g.xp6(3),g.Q6J("disabled",!t.view.isEditMode()),g.xp6(1),g.Q6J("icon","new")("size","xx-small")("addclasses","slds-section__title-action-icon slds-button__icon slds-button__icon_left"),g.xp6(3),g.Q6J("ngIf",t.selectedComponent.component),g.xp6(2),g.Q6J("disabled",!t.getAllowCopyButton),g.xp6(2),g.Q6J("disabled",!t.view.isEditMode()),g.xp6(2),g.Q6J("component",t.component)("configValues",t.configValues))},dependencies:[i.mk,i.sg,i.O5,n.YN,n.Kr,n.EJ,n.JJ,n.On,Ks.$,Pe.f,T._,Xn.W,Ua.O,u.r,k.H,C.t,Ps],encapsulation:2}),ModuleConfigManager})();function Ya(e,t){if(1&e&&(g.TgZ(0,"div",9)(1,"div",10),g._uU(2),g.qZA()()),2&e){const e=g.oxw(2);g.xp6(2),g.Oqu(e.description)}}function Ra(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",3)(1,"div",4)(2,"div",5)(3,"button",6),g.NdJ("mouseenter",(function(){g.CHM(e);const t=g.oxw();return g.KtG(t.showInfo=!0)}))("mouseleave",(function(){g.CHM(e);const t=g.oxw();return g.KtG(t.showInfo=!1)})),g._UZ(4,"system-button-icon",7),g.qZA()()(),g.YNc(5,Ya,3,1,"div",8),g.qZA()}if(2&e){const e=g.oxw();g.xp6(4),g.Q6J("size","small")("icon","info"),g.xp6(1),g.Q6J("ngIf",e.showInfo)}}let Ga=(()=>{class WorkbenchConfigLabel{constructor(){this.option="",this.description="",this.showInfo=!1}}return WorkbenchConfigLabel.ɵfac=function(e){return new(e||WorkbenchConfigLabel)},WorkbenchConfigLabel.ɵcmp=g.Xpm({type:WorkbenchConfigLabel,selectors:[["workbench-config-label"]],inputs:{option:"option",description:"description"},decls:4,vars:2,consts:[[1,"slds-grid","slds-grid--vertical-align-center"],[1,"slds-form-element__label"],["class","slds-is-relative",4,"ngIf"],[1,"slds-is-relative"],[1,"slds-form-element"],[1,"slds-form-element__icon","slds-align-middle"],["aria-describedby","help","title","Description",1,"slds-button","slds-button_icon","slds-button","slds-button_icon",3,"mouseenter","mouseleave"],[3,"size","icon"],["class","slds-popover slds-popover_tooltip slds-nubbin_bottom-left slds-rise-from-ground slds-is-absolute","role","tooltip","style","bottom: 25px; left: -17px; width: 320px; height: auto;",4,"ngIf"],["role","tooltip",1,"slds-popover","slds-popover_tooltip","slds-nubbin_bottom-left","slds-rise-from-ground","slds-is-absolute",2,"bottom","25px","left","-17px","width","320px","height","auto"],[1,"slds-popover__body","slds-scrollable_y"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0)(1,"label",1),g._uU(2),g.qZA(),g.YNc(3,Ra,6,3,"div",2),g.qZA()),2&e&&(g.xp6(2),g.Oqu(t.option),g.xp6(1),g.Q6J("ngIf",t.description))},dependencies:[i.O5,A.J],encapsulation:2}),WorkbenchConfigLabel})();var Ha=s(3543);function Ka(e,t){1&e&&g._UZ(0,"system-label",19)}function za(e,t){1&e&&g._UZ(0,"system-label",20)}function Va(e,t){if(1&e&&(g.TgZ(0,"option",21),g._UZ(1,"system-label",22),g.qZA()),2&e){const e=t.$implicit;g.Q6J("value",e.value),g.xp6(1),g.Q6J("label",e.text)}}function Pa(e,t){1&e&&(g.TgZ(0,"div",23)(1,"span",24),g._uU(2,"warning"),g.qZA(),g.TgZ(3,"span",25),g.O4$(),g.TgZ(4,"svg",26),g._UZ(5,"use",27),g.qZA()(),g.kcU(),g.TgZ(6,"h2"),g._UZ(7,"system-label",28),g.qZA()())}function $a(e,t){1&e&&(g.TgZ(0,"div",29),g._UZ(1,"system-label",30),g.qZA())}function ja(e,t){1&e&&(g.TgZ(0,"span"),g._UZ(1,"system-label",31),g.qZA())}function Wa(e,t){1&e&&(g.TgZ(0,"span"),g._UZ(1,"system-label",32),g.qZA())}let Xa=(()=>{class ModuleConfigAddDialog{constructor(e,t,s,i,n,l,o){this.backend=e,this.metadata=t,this.language=s,this.modelutilities=i,this.utils=n,this.toast=l,this.configuration=o,this.mode="",this.currentRole="",this.currentType="",this.currentModule="",this.allowGlobal=!1,this.response$=new g.vpe,this.showDeprecatedWarning=!1,this.types=[{value:"custom",text:"LBL_CUSTOM"},{value:"global",text:"LBL_GLOBAL"}],this.compSelectList=[],this.compDisabled=!1,this.moduleSelectList=[],this.roleSelectList=[]}get roleSelectedItem(){return this.roleselecteditem}set roleSelectedItem(e){this.roleselecteditem=e}get moduleSelectedItem(){return this.moduleselecteditem}set moduleSelectedItem(e){this.moduleselecteditem=e}get compSelectedItem(){return this.compselecteditem}set compSelectedItem(e){this.compselecteditem=e,this.showDeprecatedWarning=!0,this.showDeprecatedWarning="1"==e.deprecated}ngOnInit(){this.allowGlobal||(this.types.pop(),this.currentType="custom"),this.moduleSelectList=[{id:"*",name:"*"}],"add"==this.mode&&"*"==this.currentModule&&(this.moduleSelectedItem={id:"*",name:"*"});let e=this.metadata.getModules();e.sort();for(let t of e)this.moduleSelectList.push({id:t,name:t}),"add"==this.mode&&t==this.currentModule&&(this.moduleSelectedItem={id:t,name:t});this.roleSelectList=[{id:"*",name:"*",group:"global"}],this.roleSelectedItem={id:"*",name:"*",group:"global"};let t=this.metadata.getSysRoles();for(let e of t)this.roleSelectList.push({id:e.id,name:e.name,group:e.scope}),"copy"==this.mode&&e.id==this.currentRole&&(this.roleSelectedItem={id:e.id,name:e.name,group:"global"});let s=this.configuration.getData("components");for(let e in s)this.compSelectList.push({id:e,name:e,deprecated:"1"==s[e].deprecated});this.compSelectList.sort(((e,t)=>e.name.localeCompare(t.name))),"copy"==this.mode&&(this.compDisabled=!0,this.compSelectedItem={id:this.currentComponent.id,name:this.currentComponent.component})}validate(){if("*"==this.currentModule){if(this.compSelectedItem&&this.roleSelectedItem&&this.currentType)return!1}else if(this.compSelectedItem&&this.moduleSelectedItem&&this.roleSelectedItem&&this.currentType)return!1;return!0}sortArray(e){return e.sort(((e,t)=>{let s=e.name.toLowerCase(),i=t.name.toLowerCase();return s<i?-1:s>i?1:0})),e}closeDialog(){this.self.destroy()}save(){let e=this.currentType,t="",s={},i=this.modelutilities.generateGuid();if(this.currentComponent){let e=JSON.stringify(this.currentComponent.componentconfig);s={component:this.currentComponent.component,componentconfig:e}}else s={component:this.compSelectedItem.name,componentconfig:"{}"};s.id=i,s.role_id=this.roleSelectedItem.id,"*"!=s.module&&(s.module=this.moduleSelectedItem.name),"custom"==e&&"*"==s.module&&(t="sysuicustomcomponentdefaultconf"),"custom"==e&&"*"!=s.module&&(t="sysuicustomcomponentmoduleconf"),"global"==e&&"*"==s.module&&(t="sysuicomponentdefaultconf"),"global"==e&&"*"!=s.module&&(t="sysuicomponentmoduleconf"),this.saveComponent(s,t)}saveComponent(e,t){e.type=this.currentType;let s="";"*"==e.module?(s="componentdefaultalreadyexists",delete e.module):s="componentmodulealreadyexists",this.backend.getRequest("configuration/spiceui/core/"+s,e).subscribe((s=>{delete e.type,0==s?this.backend.postRequest("configuration/configurator/"+t+"/"+e.id,null,{config:e}).subscribe((s=>{this.toast.sendToast("saved"),e.table=t,this.response$.emit(e),this.self.destroy()}),(e=>{this.toast.sendAlert("saving failed!"),console.error(e)})):this.toast.sendAlert("Configuration already exists!")}),(e=>{this.toast.sendAlert("Saving configuration failed!"),console.error(e)}))}}return ModuleConfigAddDialog.ɵfac=function(e){return new(e||ModuleConfigAddDialog)(g.Y36(p.y),g.Y36(h.Pu),g.Y36(f.d),g.Y36(b.A),g.Y36(b.A),g.Y36(y.A),g.Y36(x.C))},ModuleConfigAddDialog.ɵcmp=g.Xpm({type:ModuleConfigAddDialog,selectors:[["moduleconfig-add-dialog"]],inputs:{mode:"mode",currentComponent:"currentComponent",currentRole:"currentRole",currentType:"currentType",currentModule:"currentModule",allowGlobal:"allowGlobal"},outputs:{response$:"response"},decls:23,vars:20,consts:[[3,"close"],["label","LBL_COPY_COMPONENT",4,"ngIf"],["label","LBL_ADD_COMPONENT",4,"ngIf"],[2,"overflow","visible",3,"scrollable"],[1,"slds-form-element"],[1,"slds-form-element__label"],["label","LBL_SCOPE"],[1,"slds-form-element__control"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"selectList","ngModel","label","ngModelChange"],[3,"selectList","ngModel","disabled","label","ngModelChange"],["class","slds-notify slds-notify_alert slds-theme_alert-texture slds-theme_warning","role","alert",4,"ngIf"],["class","slds-text-align_center slds-p-vertical_small slds-text-heading_small",4,"ngIf"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"disabled","click"],[4,"ngIf"],["label","LBL_COPY_COMPONENT"],["label","LBL_ADD_COMPONENT"],[3,"value"],[3,"label"],["role","alert",1,"slds-notify","slds-notify_alert","slds-theme_alert-texture","slds-theme_warning"],[1,"slds-assistive-text"],["title","Description of icon when needed",1,"slds-icon_container","slds-icon-utility-warning","slds-m-right_x-small"],["aria-hidden","true",1,"slds-icon","slds-icon_x-small"],[0,"xlink","href","/assets/icons/utility-sprite/svg/symbols.svg#warning"],["label","LBL_DEPRECATED_MSG"],[1,"slds-text-align_center","slds-p-vertical_small","slds-text-heading_small"],["label","LBL_NOTE_COPY_CONFIG_INFO"],["label","LBL_ADD"],["label","LBL_COPY"]],template:function(e,t){1&e&&(g.TgZ(0,"system-modal")(1,"system-modal-header",0),g.NdJ("close",(function(){return t.closeDialog()})),g.YNc(2,Ka,1,0,"system-label",1),g.YNc(3,za,1,0,"system-label",2),g.qZA(),g.TgZ(4,"system-modal-content",3)(5,"div",4)(6,"label",5),g._UZ(7,"system-label",6),g.qZA(),g.TgZ(8,"div",7)(9,"div",8)(10,"select",9),g.NdJ("ngModelChange",(function(e){return t.currentType=e})),g.YNc(11,Va,2,2,"option",10),g.qZA()()()(),g.TgZ(12,"system-select",11),g.NdJ("ngModelChange",(function(e){return t.moduleSelectedItem=e})),g.qZA(),g.TgZ(13,"system-select",12),g.NdJ("ngModelChange",(function(e){return t.compSelectedItem=e})),g.qZA(),g.YNc(14,Pa,8,0,"div",13),g.TgZ(15,"system-select",11),g.NdJ("ngModelChange",(function(e){return t.roleSelectedItem=e})),g.qZA(),g.YNc(16,$a,2,0,"div",14),g.qZA(),g.TgZ(17,"system-modal-footer")(18,"button",15),g.NdJ("click",(function(){return t.closeDialog()})),g._UZ(19,"system-label",16),g.qZA(),g.TgZ(20,"button",17),g.NdJ("click",(function(){return t.save()})),g.YNc(21,ja,2,0,"span",18),g.YNc(22,Wa,2,0,"span",18),g.qZA()()()),2&e&&(g.xp6(2),g.Q6J("ngIf","copy"==t.mode),g.xp6(1),g.Q6J("ngIf","add"==t.mode),g.xp6(1),g.Q6J("scrollable",!1),g.xp6(6),g.Q6J("ngModel",t.currentType),g.xp6(1),g.Q6J("ngForOf",t.types),g.xp6(1),g.Q6J("selectList",t.moduleSelectList)("ngModel",t.moduleSelectedItem)("label","LBL_MODULES"),g.xp6(1),g.Q6J("selectList",t.compSelectList)("ngModel",t.compSelectedItem)("disabled",t.compDisabled)("label","LBL_COMPONENT"),g.xp6(1),g.Q6J("ngIf",t.showDeprecatedWarning),g.xp6(1),g.Q6J("selectList",t.roleSelectList)("ngModel",t.roleSelectedItem)("label","LBL_ROLES"),g.xp6(1),g.Q6J("ngIf","copy"==t.mode),g.xp6(4),g.Q6J("disabled",t.validate()),g.xp6(1),g.Q6J("ngIf","add"==t.mode),g.xp6(1),g.Q6J("ngIf","copy"==t.mode))},dependencies:[i.sg,i.O5,n.YN,n.Kr,n.EJ,n.JJ,n.On,T._,it.j,nt.x,lt.p,ot.y,Ha.R],encapsulation:2}),ModuleConfigAddDialog})();function ed(e,t){if(1&e&&(g.TgZ(0,"option",30),g._uU(1),g.qZA()),2&e){const e=t.$implicit;g.Q6J("value",e),g.xp6(1),g.hij("",e," ")}}function td(e,t){1&e&&(g.TgZ(0,"option",31),g._UZ(1,"system-label",32),g.qZA())}let sd=(()=>{class FieldsetManagerCopyDialog{constructor(e,t){this.language=e,this.metadata=t,this.metaFieldSets=[],this.fieldset="",this.edit_mode="",this.closedialog=new g.vpe,this.modules=[],this.currentName="",this.currentType="",this.currentModule="",this.modules=this.metadata.getModules().sort()}ngOnInit(){this.fieldset&&(this.currentName=this.metaFieldSets[this.fieldset].name,this.currentModule=this.metaFieldSets[this.fieldset].module,"all"==this.edit_mode?this.currentType=this.metaFieldSets[this.fieldset].type:this.currentType="custom")}closeDialog(){this.self.destroy()}onModalEscX(){this.closeDialog()}copy(){this.closedialog.emit({fieldset:this.metaFieldSets[this.fieldset],type:this.currentType,module:this.currentModule,name:this.currentName}),this.self.destroy()}validate(){return!(this.fieldset&&this.currentModule&&this.currentType)}}return FieldsetManagerCopyDialog.ɵfac=function(e){return new(e||FieldsetManagerCopyDialog)(g.Y36(f.d),g.Y36(h.Pu))},FieldsetManagerCopyDialog.ɵcmp=g.Xpm({type:FieldsetManagerCopyDialog,selectors:[["fieldsetmanager-copy-dialog"]],inputs:{metaFieldSets:"metaFieldSets",fieldset:"fieldset",edit_mode:"edit_mode"},outputs:{closedialog:"closedialog"},decls:36,vars:9,consts:[["role","dialog","tabindex","-1","aria-labelledby","header43",1,"slds-modal","slds-fade-in-open"],[1,"slds-modal__container"],[1,"slds-modal__header","slds-theme--shade"],["title","Close",1,"slds-button","slds-modal__close","slds-button--icon-inverse",3,"click"],[3,"icon","size"],["id","header43",1,"slds-text-heading--medium"],["label","LBL_COPY"],[1,"slds-modal__content","slds-p-around--medium"],[1,"slds-form-element"],[1,"slds-form-element__label"],["label","LBL_MODULE"],[1,"slds-form-element__control",2,"min-width","250px"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","disabled","ngModelChange"],["value","*"],[3,"value",4,"ngFor","ngForOf"],["label","LBL_SCOPE"],[1,"slds-form-element__control"],[1,"slds-select",3,"ngModel","ngModelChange"],["value","custom"],["label","LBL_CUSTOM"],["value","global",4,"ngIf"],[1,"slds-form-element","slds-m-top--small"],["label","LBL_FIELDSET"],["type","text","placeholder","name",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-modal__footer"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_SAVE"],[3,"value"],["value","global"],["label","LBL_GLOBAL"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),g.NdJ("click",(function(){return t.closeDialog()})),g._UZ(4,"system-button-icon",4),g.qZA(),g.TgZ(5,"h2",5),g._UZ(6,"system-label",6),g.qZA()(),g.TgZ(7,"div",7)(8,"div",8)(9,"label",9),g._UZ(10,"system-label",10),g.qZA(),g.TgZ(11,"div",11)(12,"div",12)(13,"select",13),g.NdJ("ngModelChange",(function(e){return t.currentModule=e})),g.TgZ(14,"option",14),g._uU(15,"*"),g.qZA(),g.YNc(16,ed,2,2,"option",15),g.qZA()()()(),g.TgZ(17,"div",8)(18,"label",9),g._UZ(19,"system-label",16),g.qZA(),g.TgZ(20,"div",17)(21,"div",12)(22,"select",18),g.NdJ("ngModelChange",(function(e){return t.currentType=e})),g.TgZ(23,"option",19),g._UZ(24,"system-label",20),g.qZA(),g.YNc(25,td,2,0,"option",21),g.qZA()()()(),g.TgZ(26,"div",22)(27,"label",9),g._UZ(28,"system-label",23),g.qZA(),g.TgZ(29,"div",17)(30,"input",24),g.NdJ("ngModelChange",(function(e){return t.currentName=e})),g.qZA()()()(),g.TgZ(31,"div",25)(32,"button",26),g.NdJ("click",(function(){return t.closeDialog()})),g._UZ(33,"system-label",27),g.qZA(),g.TgZ(34,"button",28),g.NdJ("click",(function(){return t.copy()})),g._UZ(35,"system-label",29),g.qZA()()()()),2&e&&(g.xp6(4),g.Q6J("icon","close")("size","large"),g.xp6(9),g.Q6J("ngModel",t.currentModule)("disabled",0==t.modules.length),g.xp6(3),g.Q6J("ngForOf",t.modules),g.xp6(6),g.Q6J("ngModel",t.currentType),g.xp6(3),g.Q6J("ngIf","all"==t.edit_mode),g.xp6(5),g.Q6J("ngModel",t.currentName),g.xp6(4),g.Q6J("disabled",t.validate()))},dependencies:[i.sg,i.O5,n.YN,n.Kr,n.Fj,n.EJ,n.JJ,n.On,A.J,T._],encapsulation:2}),FieldsetManagerCopyDialog})(),id=(()=>{class WorkbenchConfigOptionFieldset{constructor(e,t){this.language=e,this.view=t,this.option={},this.configValues={}}}return WorkbenchConfigOptionFieldset.ɵfac=function(e){return new(e||WorkbenchConfigOptionFieldset)(g.Y36(f.d),g.Y36(Hs.e))},WorkbenchConfigOptionFieldset.ɵcmp=g.Xpm({type:WorkbenchConfigOptionFieldset,selectors:[["workbench-config-option-fieldset"]],decls:3,vars:4,consts:[[1,"slds-form-element","slds-m-vertical--xxx-small"],[3,"option","description"],[3,"ngModel","disabled","ngModelChange"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0),g._UZ(1,"workbench-config-label",1),g.TgZ(2,"system-input-fieldset",2),g.NdJ("ngModelChange",(function(e){return t.configValues[t.option.option]=e})),g.qZA()()),2&e&&(g.xp6(1),g.Q6J("option",t.option.option)("description",t.option.description),g.xp6(1),g.Q6J("ngModel",t.configValues[t.option.option])("disabled",!t.view.isEditMode()))},dependencies:[n.JJ,n.On,mi.a,Ga],encapsulation:2}),WorkbenchConfigOptionFieldset})();var nd=s(3673);let ld=(()=>{class WorkbenchConfigOptionModulefilter{constructor(e,t,s,i){this.language=e,this.metadata=t,this.cdRef=s,this.view=i,this.configValues=[],this.option={},this.modules=[],this.modulefilters=[],this.module=""}ngAfterViewInit(){this.modulefilters=this.metadata.getModuleFilters(),this.modules=this.metadata.getModules(),this.modules.sort(),this.configValues[this.option.option]&&this.metadata.getModuleFilter(this.configValues[this.option.option])&&(this.module=this.metadata.getModuleFilter(this.configValues[this.option.option]).module),this.cdRef.detectChanges()}}return WorkbenchConfigOptionModulefilter.ɵfac=function(e){return new(e||WorkbenchConfigOptionModulefilter)(g.Y36(f.d),g.Y36(h.Pu),g.Y36(g.sBO),g.Y36(Hs.e))},WorkbenchConfigOptionModulefilter.ɵcmp=g.Xpm({type:WorkbenchConfigOptionModulefilter,selectors:[["workbench-config-option-module-filter"]],decls:3,vars:4,consts:[[1,"slds-form-element","slds-m-vertical--xxx-small"],[3,"option","description"],[3,"ngModel","disabled","ngModelChange"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0),g._UZ(1,"workbench-config-label",1),g.TgZ(2,"system-input-module-filter",2),g.NdJ("ngModelChange",(function(e){return t.configValues[t.option.option]=e})),g.qZA()()),2&e&&(g.xp6(1),g.Q6J("option",t.option.option)("description",t.option.description),g.xp6(1),g.Q6J("ngModel",t.configValues[t.option.option])("disabled",!t.view.isEditMode()))},dependencies:[n.JJ,n.On,nd.l,Ga],encapsulation:2}),WorkbenchConfigOptionModulefilter})();var od=s(4728);let ad=(()=>{class WorkbenchConfigOptionActionset{constructor(e,t){this.language=e,this.view=t,this.configValues=[],this.option={}}}return WorkbenchConfigOptionActionset.ɵfac=function(e){return new(e||WorkbenchConfigOptionActionset)(g.Y36(f.d),g.Y36(Hs.e))},WorkbenchConfigOptionActionset.ɵcmp=g.Xpm({type:WorkbenchConfigOptionActionset,selectors:[["workbench-config-option-actionset"]],decls:3,vars:4,consts:[[1,"slds-form-element","slds-m-vertical--xxx-small"],[3,"option","description"],[3,"ngModel","disabled","ngModelChange"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0),g._UZ(1,"workbench-config-label",1),g.TgZ(2,"system-input-actionset",2),g.NdJ("ngModelChange",(function(e){return t.configValues[t.option.option]=e})),g.qZA()()),2&e&&(g.xp6(1),g.Q6J("option",t.option.option)("description",t.option.description),g.xp6(1),g.Q6J("ngModel",t.configValues[t.option.option])("disabled",!t.view.isEditMode()))},dependencies:[n.JJ,n.On,od.Q,Ga],encapsulation:2}),WorkbenchConfigOptionActionset})(),dd=(()=>{class WorkbenchConfigOptionBoolean{constructor(e){this.view=e,this.configValues=[],this.option={},this.objtype="",this.showInfo=!1}}return WorkbenchConfigOptionBoolean.ɵfac=function(e){return new(e||WorkbenchConfigOptionBoolean)(g.Y36(Hs.e))},WorkbenchConfigOptionBoolean.ɵcmp=g.Xpm({type:WorkbenchConfigOptionBoolean,selectors:[["workbench-config-option-boolean"]],decls:7,vars:6,consts:[[1,"slds-form-element","slds-p-vertical--x-small"],[1,"slds-form-element__control","slds-grid","slds-grid--vertical-align-center"],[1,"slds-checkbox"],["type","checkbox","name","options",1,"slds-float_left",3,"disabled","id","ngModel","ngModelChange"],[1,"slds-checkbox__label"],[1,"slds-checkbox_faux"],[3,"option","description"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"input",3),g.NdJ("ngModelChange",(function(e){return t.configValues[t.option.option]=e})),g.qZA(),g.TgZ(4,"label",4),g._UZ(5,"span",5),g.qZA()(),g._UZ(6,"workbench-config-label",6),g.qZA()()),2&e&&(g.xp6(3),g.Q6J("disabled",!t.view.isEditMode())("id",t.option.option)("ngModel",t.configValues[t.option.option]),g.xp6(1),g.uIk("for",t.option.option),g.xp6(2),g.Q6J("option",t.option.option)("description",t.option.description))},dependencies:[n.Wl,n.JJ,n.On,Ga],encapsulation:2}),WorkbenchConfigOptionBoolean})();var rd=s(4665);let cd=(()=>{class WorkbenchConfigOptionComponentset{constructor(e,t){this.language=e,this.view=t,this.configValues=[],this.option={}}}return WorkbenchConfigOptionComponentset.ɵfac=function(e){return new(e||WorkbenchConfigOptionComponentset)(g.Y36(f.d),g.Y36(Hs.e))},WorkbenchConfigOptionComponentset.ɵcmp=g.Xpm({type:WorkbenchConfigOptionComponentset,selectors:[["workbench-config-option-componentset"]],decls:3,vars:4,consts:[[1,"slds-form-element","slds-m-vertical--xxx-small"],[3,"option","description"],[3,"ngModel","disabled","ngModelChange"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0),g._UZ(1,"workbench-config-label",1),g.TgZ(2,"system-input-componentset",2),g.NdJ("ngModelChange",(function(e){return t.configValues[t.option.option]=e})),g.qZA()()),2&e&&(g.xp6(1),g.Q6J("option",t.option.option)("description",t.option.description),g.xp6(1),g.Q6J("ngModel",t.configValues[t.option.option])("disabled",!t.view.isEditMode()))},dependencies:[n.JJ,n.On,rd.C,Ga],encapsulation:2}),WorkbenchConfigOptionComponentset})();var gd=s(6898);let ud=(()=>{class WorkbenchConfigOptionModule{constructor(e,t,s,i,n,l,o,a){this.backend=e,this.metadata=t,this.language=s,this.modelutilities=i,this.broadcast=n,this.toast=l,this.cdRef=o,this.view=a,this.option={},this.objtype="",this.modules=[]}ngAfterViewInit(){this.modules=this.metadata.getModules().sort(),this.cdRef.detectChanges()}}return WorkbenchConfigOptionModule.ɵfac=function(e){return new(e||WorkbenchConfigOptionModule)(g.Y36(p.y),g.Y36(h.Pu),g.Y36(f.d),g.Y36(b.A),g.Y36(gs.f),g.Y36(y.A),g.Y36(g.sBO),g.Y36(Hs.e))},WorkbenchConfigOptionModule.ɵcmp=g.Xpm({type:WorkbenchConfigOptionModule,selectors:[["workbench-config-option-componentset"]],inputs:{configValues:"configValues"},decls:3,vars:3,consts:[[1,"slds-form-element","slds-m-vertical--xxx-small"],[3,"option","description"],[3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0),g._UZ(1,"workbench-config-label",1),g.TgZ(2,"system-input-module",2),g.NdJ("ngModelChange",(function(e){return t.configValues[t.option.option]=e})),g.qZA()()),2&e&&(g.xp6(1),g.Q6J("option",t.option.option)("description",t.option.description),g.xp6(1),g.Q6J("ngModel",t.configValues[t.option.option]))},dependencies:[n.JJ,n.On,gd.a,Ga],encapsulation:2}),WorkbenchConfigOptionModule})(),md=(()=>{class WorkbenchConfigOptionDefault{constructor(e){this.view=e,this.configValues=[],this.option={},this.showInfo=!1}get optionValue(){return this.configValues[this.option.option]}set optionValue(e){this.configValues[this.option.option]=e}}return WorkbenchConfigOptionDefault.ɵfac=function(e){return new(e||WorkbenchConfigOptionDefault)(g.Y36(Hs.e))},WorkbenchConfigOptionDefault.ɵcmp=g.Xpm({type:WorkbenchConfigOptionDefault,selectors:[["workbench-config-option-default"]],inputs:{configValues:"configValues"},decls:4,vars:4,consts:[[1,"slds-form-element","slds-m-vertical--xxx-small"],[3,"option","description"],[1,"slds-form-element__control"],["type","text",1,"slds-input",3,"disabled","ngModel","ngModelChange"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0),g._UZ(1,"workbench-config-label",1),g.TgZ(2,"div",2)(3,"input",3),g.NdJ("ngModelChange",(function(e){return t.optionValue=e})),g.qZA()()()),2&e&&(g.xp6(1),g.Q6J("option",t.option.option)("description",t.option.description),g.xp6(2),g.Q6J("disabled",!t.view.isEditMode())("ngModel",t.optionValue))},dependencies:[n.Fj,n.JJ,n.On,Ga],encapsulation:2}),WorkbenchConfigOptionDefault})(),pd=(()=>{class WorkbenchConfigOptionLabel{constructor(e){this.view=e,this.configValues=[],this.option={}}}return WorkbenchConfigOptionLabel.ɵfac=function(e){return new(e||WorkbenchConfigOptionLabel)(g.Y36(Hs.e))},WorkbenchConfigOptionLabel.ɵcmp=g.Xpm({type:WorkbenchConfigOptionLabel,selectors:[["workbench-config-option-label"]],decls:3,vars:3,consts:[[1,"slds-form-element","slds-m-vertical--xxx-small"],[3,"option","description"],[3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0),g._UZ(1,"workbench-config-label",1),g.TgZ(2,"system-input-label",2),g.NdJ("ngModelChange",(function(e){return t.configValues[t.option.option]=e})),g.qZA()()),2&e&&(g.xp6(1),g.Q6J("option",t.option.option)("description",t.option.description),g.xp6(1),g.Q6J("ngModel",t.configValues[t.option.option]))},dependencies:[n.JJ,n.On,Q.$,Ga],encapsulation:2}),WorkbenchConfigOptionLabel})();var hd=s(8973);let fd=(()=>{class WorkbenchConfigOptionMethod{constructor(e,t){this.language=e,this.view=t,this.option={},this.configValues={}}}return WorkbenchConfigOptionMethod.ɵfac=function(e){return new(e||WorkbenchConfigOptionMethod)(g.Y36(f.d),g.Y36(Hs.e))},WorkbenchConfigOptionMethod.ɵcmp=g.Xpm({type:WorkbenchConfigOptionMethod,selectors:[["workbench-config-option-method"]],decls:3,vars:4,consts:[[1,"slds-form-element","slds-m-vertical--xxx-small"],[3,"option","description"],[3,"ngModel","disabled","ngModelChange"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0),g._UZ(1,"workbench-config-label",1),g.TgZ(2,"system-input-backend-method",2),g.NdJ("ngModelChange",(function(e){return t.configValues[t.option.option]=e})),g.qZA()()),2&e&&(g.xp6(1),g.Q6J("option",t.option.option)("description",t.option.description),g.xp6(1),g.Q6J("ngModel",t.configValues[t.option.option])("disabled",!t.view.isEditMode()))},dependencies:[n.JJ,n.On,hd.N,Ga],encapsulation:2}),WorkbenchConfigOptionMethod})();function bd(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"button",7),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw();return g.KtG(t.editModalRepo())})),g._UZ(1,"system-utility-icon",8),g.qZA()}if(2&e){const e=g.oxw();g.Q6J("disabled",!e.view.isEditMode()),g.xp6(1),g.Q6J("icon","edit")("size","x-small")}}function _d(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",16)(1,"div",17),g._UZ(2,"system-utility-icon",18),g.TgZ(3,"input",19),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.objectFilter=t)})),g.qZA()(),g.TgZ(4,"button",20),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw();return g.KtG(t.addObjRepo())})),g._UZ(5,"system-label",21),g.qZA()()}if(2&e){const e=g.oxw();g.xp6(3),g.Q6J("ngModel",e.objectFilter),g.xp6(1),g.Q6J("disabled",!e.view.isEditMode())}}const Zd=function(e){return{"slds-theme--shade":e}};function yd(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"li",22),g.NdJ("click",(function(){const t=g.CHM(e).$implicit,s=g.oxw();return g.KtG(s.clickObjRepo(t))})),g._uU(1),g.qZA()}if(2&e){const e=t.$implicit,s=g.oxw();g.Q6J("ngClass",g.VKq(2,Zd,s.checkCurrentObjRepo(e.id))),g.xp6(1),g.hij(" ",e.object," ")}}function Md(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",24)(1,"label",2),g._UZ(2,"system-label",42),g.qZA(),g.TgZ(3,"div",26)(4,"system-richtext-editor",50),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw(2);return g.KtG(s.currentObjRepo.description=t)})),g.qZA()()()}if(2&e){const e=g.oxw(2);g.xp6(4),g.Q6J("ngModel",e.currentObjRepo.description)}}function xd(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",24)(1,"label",2),g._UZ(2,"system-label",42),g.qZA(),g.TgZ(3,"div",51)(4,"iframe",52),g.NdJ("change",(function(t){g.CHM(e);const s=g.oxw(2);return g.KtG(s.currentObjRepo.description=t)})),g.qZA()()()}if(2&e){const e=g.oxw(2);g.xp6(4),g.Q6J("srcdoc",e.currentObjRepo.description,g.oJD)}}function vd(e,t){if(1&e&&(g.TgZ(0,"option",66),g._uU(1),g.qZA()),2&e){const e=t.$implicit;g.Q6J("value",e),g.xp6(1),g.Oqu(e)}}function Ad(e,t){if(1&e){const e=g.EpF();g.ynx(0),g.TgZ(1,"tr",53)(2,"td",54)(3,"span",55)(4,"div",56)(5,"input",57),g.NdJ("ngModelChange",(function(t){const s=g.CHM(e).$implicit;return g.KtG(s.name=t)})),g.qZA()()()(),g.TgZ(6,"td",58)(7,"span",55)(8,"div",26)(9,"div",59)(10,"select",60),g.NdJ("ngModelChange",(function(t){const s=g.CHM(e).$implicit;return g.KtG(s.type=t)})),g.YNc(11,vd,2,2,"option",61),g.qZA()()()()(),g.TgZ(12,"td",62)(13,"span",55)(14,"div",56)(15,"input",57),g.NdJ("ngModelChange",(function(t){const s=g.CHM(e).$implicit;return g.KtG(s.description=t)})),g.qZA()()()(),g.TgZ(16,"td",63)(17,"div",64)(18,"button",65),g.NdJ("click",(function(){const t=g.CHM(e).index,s=g.oxw(2);return g.KtG(s.deleteConfig(t))})),g._UZ(19,"system-button-icon",46),g.qZA()()()(),g.BQk()}if(2&e){const e=t.$implicit,s=g.oxw(2);g.xp6(5),g.Q6J("disabled",!s.view.isEditMode())("ngModel",e.name),g.xp6(5),g.Q6J("disabled",!s.view.isEditMode())("ngModel",e.type),g.xp6(1),g.Q6J("ngForOf",s.fieldTypeList),g.xp6(4),g.Q6J("disabled",!s.view.isEditMode())("ngModel",e.description),g.xp6(3),g.Q6J("disabled",!s.view.isEditMode()),g.xp6(1),g.Q6J("icon","delete")}}function Td(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",23)(1,"div",24)(2,"label",2),g._UZ(3,"system-label",25),g.qZA(),g.TgZ(4,"div",26)(5,"input",27),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.currentObjRepo.object=t)})),g.qZA()()(),g.TgZ(6,"div",24)(7,"label",2),g._UZ(8,"system-label",28),g.qZA(),g.TgZ(9,"div",26)(10,"input",27),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.currentObjRepo.component=t)})),g.qZA()()(),g.TgZ(11,"label",29)(12,"input",30),g.NdJ("change",(function(){g.CHM(e);const t=g.oxw();return g.KtG(t.updateDeprecated())})),g.qZA(),g._UZ(13,"span",31),g.TgZ(14,"span",2),g._UZ(15,"system-label",32),g.qZA()(),g.YNc(16,Md,5,1,"div",33),g.YNc(17,xd,5,1,"div",33),g.TgZ(18,"div",34)(19,"label",2),g._UZ(20,"system-label",35),g.qZA(),g.TgZ(21,"table",36)(22,"thead")(23,"tr",37)(24,"th",38)(25,"span",39),g._UZ(26,"system-label",40),g.qZA()(),g.TgZ(27,"th",38)(28,"span",39),g._UZ(29,"system-label",41),g.qZA()(),g.TgZ(30,"th",38)(31,"span",39),g._UZ(32,"system-label",42),g.qZA()(),g._UZ(33,"th",38),g.qZA()(),g.TgZ(34,"tbody"),g.YNc(35,Ad,20,9,"ng-container",43),g.qZA()(),g.TgZ(36,"div",44)(37,"button",45),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw();return g.KtG(t.addConfig())})),g._UZ(38,"system-button-icon",46),g.qZA()()(),g.TgZ(39,"div",47)(40,"button",48),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw();return g.KtG(t.saveChanges())})),g._UZ(41,"system-label",49),g.qZA()()()}if(2&e){const e=g.oxw();g.xp6(5),g.Q6J("disabled",!e.view.isEditMode())("ngModel",e.currentObjRepo.object),g.xp6(5),g.Q6J("disabled",!e.view.isEditMode())("ngModel",e.currentObjRepo.component),g.xp6(2),g.Q6J("disabled",!e.view.isEditMode())("ngModel",e.getDeprecatedBool(e.currentObjRepo.deprecated)),g.xp6(4),g.Q6J("ngIf",e.view.isEditMode()),g.xp6(1),g.Q6J("ngIf",!e.view.isEditMode()),g.xp6(18),g.Q6J("ngForOf",e.currentConfigArray),g.xp6(2),g.Q6J("disabled",!e.view.isEditMode()),g.xp6(1),g.Q6J("icon","new"),g.xp6(2),g.Q6J("disabled",!e.view.isEditMode())}}let Ld=(()=>{class ObjectRepositoryManagerFilter{transform(e,t){if(!t)return e;let s=[];for(let i of e)i.object.toLowerCase().indexOf(t.toLowerCase())>=0&&s.push(i);return s}}return ObjectRepositoryManagerFilter.ɵfac=function(e){return new(e||ObjectRepositoryManagerFilter)},ObjectRepositoryManagerFilter.ɵpipe=g.Yjl({name:"objectrepositorymanagerfilter",type:ObjectRepositoryManagerFilter,pure:!0}),ObjectRepositoryManagerFilter})(),Cd=(()=>{class ObjectRepositoryManager{constructor(e,t,s,i,n,l,o,a,d){this.backend=e,this.metadata=t,this.language=s,this.modalservice=i,this.modelutilities=n,this.modal=l,this.toast=o,this.configurationService=a,this.view=d,this.treelist=[],this.edit_mode="custom",this.change_request_required=!1,this.crNoneActive=!1,this.moduleReposSelect=[],this.moduleRepos=[],this.modulereposselecteditem={},this.objrepoList=[],this.configList={},this.currentConfigArray=[],this.objectFilter="",this.fieldTypeList=["string","label","boolean","fieldset","actionset","componentset","module","modulefilter"],this.newRepo={},this.emptyRepo={component:"",componentconfig:"",description:"",id:"",module:"",object:"",package:""},this.currentModule={},this.newModule={},this.emptyModule={id:"",module:"",path:"",description:"",package:"",version:"",scope:"custom"},this.currentObjRepo={},this.backend.getRequest("configuration/configurator/entries/sysuimodulerepository").subscribe((e=>{for(let t of e){this.moduleRepos.push(t);let e={};e={id:t.id,name:t.module,group:"global"},this.moduleReposSelect.push(e)}this.moduleReposSelect=Object.assign([],this.moduleReposSelect)})),this.backend.getRequest("configuration/configurator/entries/sysuicustommodulerepository").subscribe((e=>{for(let t of e){this.moduleRepos.push(t);let e={};e={id:t.id,name:t.module,group:"custom"},this.moduleReposSelect.push(e)}this.moduleReposSelect=Object.assign([],this.moduleReposSelect)})),this.checkMode()}set moduleReposSelectedItem(e){this.modulereposselecteditem=e,"global"==e.group?this.backend.getRequest("configuration/configurator/entries/sysuiobjectrepository").subscribe((t=>{this.objrepoList=[];for(let s of t)e.id==s.module&&this.objrepoList.push(s)})):"custom"==e.group?this.backend.getRequest("configuration/configurator/entries/sysuicustomobjectrepository").subscribe((t=>{this.objrepoList=[];for(let s of t)e.id==s.module&&this.objrepoList.push(s)})):console.error("Damaged item!"),this.objrepoList.sort(((e,t)=>e.object<t.object?1:-1));for(let t of this.moduleRepos)t.id==e.id&&(this.currentModule=t,this.currentModule.scope=e.group);this.checkMode()}get moduleReposSelectedItem(){return this.modulereposselecteditem}updateField(e){this.currentObjRepo.description=e}updateDeprecated(){this.currentObjRepo.deprecated="1"==this.currentObjRepo.deprecated?"0":"1"}checkMode(){this.edit_mode=this.configurationService.getCapabilityConfig("core").edit_mode,this.change_request_required=this.configurationService.getCapabilityConfig("systemdeployment").change_request_required,"none"!=this.edit_mode&&"custom"!=this.edit_mode&&"all"!=this.edit_mode&&(this.edit_mode="custom"),this.change_request_required?this.backend.getRequest("module/SystemDeploymentCRs/active").subscribe((e=>{""==e.id?(this.setNoneMode(),this.crNoneActive=!0,this.toast.sendToast(this.language.getLabel("LBL_ACTIVATE_CR_WARNING"),"warning",null,3)):(this.crNoneActive=!1,"all"==this.edit_mode?this.setAllMode():"custom"==this.edit_mode?this.setCustomMode():this.setNoneMode())})):(this.crNoneActive=!1,"all"==this.edit_mode?this.setAllMode():"custom"==this.edit_mode?this.setCustomMode():this.setNoneMode())}setNoneMode(){this.view.setViewMode()}setCustomMode(){"custom"==this.currentModule.scope?this.view.setEditMode():this.view.setViewMode()}setAllMode(){this.view.setEditMode()}clickObjRepo(e){this.currentObjRepo=e,this.currentConfigArray=[];try{this.configList=JSON.parse(this.currentObjRepo.componentconfig);let e=0;for(let t in this.configList)if(this.configList.hasOwnProperty(t)){let s;s=this.configList[t].description?this.configList[t].description:"";let i={id:e,name:t,type:this.configList[t].type,description:s};this.currentConfigArray.push(i),e++}}catch(e){console.warn("JSON is invalid or empty!")}}checkCurrentObjRepo(e){return this.currentObjRepo.id==e}addConfig(){this.currentConfigArray.push({id:this.currentConfigArray.length+1,name:"",type:""})}deleteConfig(e){this.currentConfigArray.splice(e,1)}saveChanges(){this.modal.openModal("SystemLoadingModal").subscribe((e=>{let t={},s=[...this.currentConfigArray],i=!0;for(let e of s)if(""!=e.type&&""!=e.name){let s={};s["type"]=e.type;let i="description";e.description?s[i]=e.description:s[i]="",t[e.name]=s}else i=!1;if(i){this.currentObjRepo.componentconfig=JSON.stringify(t);let s="";s="global"==this.currentModule.scope?"sysuiobjectrepository":"sysuicustomobjectrepository",this.backend.postRequest("configuration/configurator/"+s+"/"+this.currentObjRepo.id,null,{config:this.currentObjRepo}).subscribe((t=>{for(let e in this.objrepoList)this.objrepoList[e].id==this.currentObjRepo.id&&(this.objrepoList[e]=this.currentObjRepo);e.instance.self.destroy(),this.toast.sendToast("changes saved")}))}else e.instance.self.destroy(),this.toast.sendToast("Empty configuration!")}))}addObjRepo(){this.modalservice.openModal("ObjectRepositoryManagerAddRepo").subscribe((e=>{this.newRepo={...this.emptyRepo},e.instance.objRepo=this.newRepo,e.instance.closedialog.subscribe((e=>{e&&this.modal.openModal("SystemLoadingModal").subscribe((e=>{this.newRepo.id=this.modelutilities.generateGuid(),this.newRepo.module=this.currentModule.id;let t="";t="global"==this.currentModule.scope?"sysuiobjectrepository":"sysuicustomobjectrepository",this.backend.postRequest("configuration/configurator/"+t+"/"+this.newRepo.id,null,{config:this.newRepo}).subscribe((t=>{this.objrepoList.push(this.newRepo),this.currentObjRepo=this.newRepo,e.instance.self.destroy(),this.toast.sendToast("changes saved")}))}))}))}))}addModalRepo(e="add"){this.modalservice.openModal("ObjectRepositoryManagerAddModule").subscribe((t=>{"edit"==e?(this.newModule={...this.currentModule},t.instance.moduleRepo=this.newModule):(this.newModule={...this.emptyModule},t.instance.moduleRepo=this.newModule),t.instance.mode=e,t.instance.edit_mode=this.edit_mode,t.instance.closedialog.subscribe((t=>{t&&this.modal.openModal("SystemLoadingModal").subscribe((t=>{""==this.newModule.id&&(this.newModule.id=this.modelutilities.generateGuid());let s="",i="";"global"==this.newModule.scope?(s="sysuimodulerepository",i="global"):(s="sysuicustommodulerepository",i="custom"),delete this.newModule.scope,this.backend.postRequest("configuration/configurator/"+s+"/"+this.newModule.id,null,{config:this.newModule}).subscribe((s=>{let n={id:this.newModule.id,name:this.newModule.module,group:i};if(this.newModule.scope=i,"add"==e)this.moduleReposSelect.push(n),this.moduleRepos.push(this.newModule),this.moduleReposSelectedItem=n;else{for(let e in this.moduleReposSelect)this.moduleReposSelect[e].id==n.id&&(this.moduleReposSelect[e]=n);for(let e of this.moduleRepos)e.id==this.newModule.id&&(e=this.newModule)}this.currentModule=this.newModule,this.moduleReposSelect=Object.assign([],this.moduleReposSelect),this.moduleReposSelectedItem=n,t.instance.self.destroy(),this.toast.sendToast("changes saved")}))}))}))}))}editModalRepo(){this.addModalRepo("edit")}exportRepoList(){this.modalservice.openModal("ObjectRepositoryExport")}getDeprecatedBool(e){return"1"==e}}return ObjectRepositoryManager.ɵfac=function(e){return new(e||ObjectRepositoryManager)(g.Y36(p.y),g.Y36(h.Pu),g.Y36(f.d),g.Y36(M.o),g.Y36(b.A),g.Y36(M.o),g.Y36(y.A),g.Y36(x.C),g.Y36(Hs.e))},ObjectRepositoryManager.ɵcmp=g.Xpm({type:ObjectRepositoryManager,selectors:[["ng-component"]],features:[g._Bn([Hs.e])],decls:22,vars:19,consts:[[1,"slds-grid","slds-form--inline","slds-p-around--small","slds-border--bottom"],[1,"slds-form-element"],[1,"slds-form-element__label"],[1,"slds-form-element__control",2,"width","400px"],[2,"width","100%",3,"listHeight","selectList","ngModel","ngModelChange"],[1,"slds-form-element","slds-col--bump-left"],["type","button","class","slds-button slds-button_icon slds-button_icon-border-filled",3,"disabled","click",4,"ngIf"],["type","button",1,"slds-button","slds-button_icon","slds-button_icon-border-filled",3,"disabled","click"],[3,"icon","size"],["type","button",1,"slds-button","slds-button--neutral",3,"click"],[1,"slds-grid"],[1,"slds-size--2-of-5","slds-p-horizontal--small","slds-border--right"],["class","slds-p-around--small slds-grid slds-grid_align-spread slds-grid_vertical-align-center slds-gutters",4,"ngIf"],["system-to-bottom","",1,"slds-has-dividers_around-space"],["class","slds-item",3,"ngClass","click",4,"ngFor","ngForOf"],["system-to-bottom","","class","slds-size--3-of-5 slds-p-horizontal--small",4,"ngIf"],[1,"slds-p-around--small","slds-grid","slds-grid_align-spread","slds-grid_vertical-align-center","slds-gutters"],[1,"slds-grow","slds-form-element__control","slds-input-has-icon","slds-input-has-icon_right","slds-p-right--xx-small"],["icon","filterList","addclasses","slds-input__icon slds-input__icon--left"],["type","text",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-button","slds-button_neutral",3,"disabled","click"],["label","LBL_ADD"],[1,"slds-item",3,"ngClass","click"],["system-to-bottom","",1,"slds-size--3-of-5","slds-p-horizontal--small"],[1,"slds-form-element","slds-m-vertical_medium"],["label","LBL_OBJECT"],[1,"slds-form-element__control"],["type","text",1,"slds-input",3,"disabled","ngModel","ngModelChange"],["label","LBL_COMPONENT"],["for","deprecated",1,"slds-checkbox"],["type","checkbox","id","deprecated",3,"disabled","ngModel","change"],[1,"slds-checkbox--faux"],["label","LBL_DEPRECATED"],["class","slds-form-element slds-m-vertical_medium",4,"ngIf"],[1,"slds-table_edit_container","slds-is-relative"],["label","LBL_CONFIGURATION"],["role","grid",1,"slds-table","slds-table_bordered",2,"width","100%"],[1,"slds-line-height_reset"],["scope","col"],["title","Name",1,"slds-truncate"],["label","LBL_NAME"],["label","LBL_TYPE"],["label","LBL_DESCRIPTION"],[4,"ngFor","ngForOf"],[1,"slds-p-around--small","slds-align--absolute-center","slds-border--bottom"],["title","add item",1,"slds-button","slds-button--icon",3,"disabled","click"],[3,"icon"],[1,"slds-text-align--right","slds-p-vertical--x-small"],["type","button",1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_SAVE"],[3,"ngModel","ngModelChange"],[1,"slds-form-element__control","slds-box","slds-scrollable_y",2,"background-color","#ecebea","background-color","#ecebea","max-height","300px"],["width","100%","height","100%","frameborder","0","seamless","true","sandbox","",3,"srcdoc","change"],[1,"slds-hint-parent"],["role","gridcell",1,"slds-cell-edit",2,"width","30%"],[1,"slds-grid","slds-grid_align-spread"],[1,"slds-form-element__control",2,"width","100%"],["aria-describedby","error-message","type","text",1,"slds-input",3,"disabled","ngModel","ngModelChange"],["role","gridcell",1,"slds-cell-edit",2,"width","12%"],[1,"slds-select_container"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["role","gridcell",1,"slds-cell-edit",2,"width","100%"],["role","gridcell",1,"slds-cell-edit"],[1,"slds-p-around--small","slds-align--absolute-center","slds-float_right"],["title","delete item",1,"slds-button","slds-button--icon",3,"disabled","click"],[3,"value"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0)(1,"div",1)(2,"label",2),g._uU(3,"Module"),g.qZA(),g.TgZ(4,"div",3)(5,"system-select",4),g.NdJ("ngModelChange",(function(e){return t.moduleReposSelectedItem=e})),g.qZA()()(),g.TgZ(6,"div",5),g.YNc(7,bd,2,3,"button",6),g.ALo(8,"json"),g.TgZ(9,"button",7),g.NdJ("click",(function(){return t.addModalRepo()})),g._UZ(10,"system-utility-icon",8),g.qZA(),g.TgZ(11,"button",9),g.NdJ("click",(function(){return t.exportRepoList()})),g._uU(12,"EXP"),g.qZA()()(),g.TgZ(13,"div",10)(14,"div",11),g.YNc(15,_d,6,2,"div",12),g.ALo(16,"json"),g.TgZ(17,"ul",13),g.YNc(18,yd,2,4,"li",14),g.ALo(19,"objectrepositorymanagerfilter"),g.qZA()(),g.YNc(20,Td,42,12,"div",15),g.ALo(21,"json"),g.qZA()),2&e&&(g.xp6(5),g.Q6J("listHeight","10")("selectList",t.moduleReposSelect)("ngModel",t.moduleReposSelectedItem),g.xp6(2),g.Q6J("ngIf","{}"!=g.lcZ(8,10,t.currentModule)),g.xp6(2),g.Q6J("disabled","none"==t.edit_mode),g.xp6(1),g.Q6J("icon","add")("size","x-small"),g.xp6(5),g.Q6J("ngIf","{}"!=g.lcZ(16,12,t.currentModule)),g.xp6(3),g.Q6J("ngForOf",g.xi3(19,14,t.objrepoList,t.objectFilter)),g.xp6(2),g.Q6J("ngIf","{}"!=g.lcZ(21,17,t.currentObjRepo)))},dependencies:[i.mk,i.sg,i.O5,n.YN,n.Kr,n.Fj,n.Wl,n.EJ,n.JJ,n.On,A.J,T._,Ds.z,Ha.R,u.r,k.H,i.Ts,Ld],encapsulation:2}),ObjectRepositoryManager})(),qd=(()=>{class ObjectRepositoryManagerAddRepo{constructor(e,t,s){this.backend=e,this.language=t,this.modelutilities=s,this.closedialog=new g.vpe,this.objRepo={component:"",componentconfig:"",description:"",id:"",module:"",object:"",package:""},this.currentObject="",this.currentComponent="",this.addType="fieldsetadd",this.addName="",this.addFieldset="",this.fieldsettype="custom",this.moduleFields=[]}ngOnInit(){}closeDialog(){this.self.destroy()}onModalEscX(){this.closeDialog()}add(){this.closedialog.emit(!0),this.self.destroy()}copyObject(){this.objRepo.component=this.objRepo.object}}return ObjectRepositoryManagerAddRepo.ɵfac=function(e){return new(e||ObjectRepositoryManagerAddRepo)(g.Y36(p.y),g.Y36(f.d),g.Y36(b.A))},ObjectRepositoryManagerAddRepo.ɵcmp=g.Xpm({type:ObjectRepositoryManagerAddRepo,selectors:[["objectrepositorymanager-add-repo"]],inputs:{objRepo:"objRepo"},outputs:{closedialog:"closedialog"},decls:25,vars:7,consts:[["role","dialog","tabindex","-1","aria-labelledby","header43",1,"slds-modal","slds-fade-in-open"],[1,"slds-modal__container"],[1,"slds-modal__header","slds-theme--shade"],["title","Close",1,"slds-button","slds-modal__close","slds-button--icon-inverse",3,"click"],[3,"icon","size"],["id","header43",1,"slds-text-heading--medium"],["label","LBL_ADD_REPOSITORY"],[1,"slds-modal__content","slds-p-around--medium"],[1,"slds-form-element","slds-m-top--small"],[1,"slds-form-element__label"],["label","LBL_OBJECT"],[1,"slds-form-element__control"],["type","text","placeholder","",1,"slds-input",3,"ngModel","ngModelChange"],["for","text-input-id-1",1,"slds-form-element__label"],["label","LBL_COMPONENT"],[1,"slds-form-element__control","slds-input-has-icon","slds-input-has-icon_right"],["type","text","id","text-input-id-1","placeholder","",1,"slds-input",3,"ngModel","ngModelChange"],["title","add item",1,"slds-button","slds-button_icon","slds-input__icon","slds-input__icon_right",3,"click"],[3,"icon","size","addclasses"],[1,"slds-modal__footer"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_ADD"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),g.NdJ("click",(function(){return t.closeDialog()})),g._UZ(4,"system-button-icon",4),g.qZA(),g.TgZ(5,"h2",5),g._UZ(6,"system-label",6),g.qZA()(),g.TgZ(7,"div",7)(8,"div",8)(9,"label",9),g._UZ(10,"system-label",10),g.qZA(),g.TgZ(11,"div",11)(12,"input",12),g.NdJ("ngModelChange",(function(e){return t.objRepo.object=e})),g.qZA()()(),g.TgZ(13,"div",8)(14,"label",13),g._UZ(15,"system-label",14),g.qZA(),g.TgZ(16,"div",15)(17,"input",16),g.NdJ("ngModelChange",(function(e){return t.objRepo.component=e})),g.qZA(),g.TgZ(18,"button",17),g.NdJ("click",(function(){return t.copyObject()})),g._UZ(19,"system-utility-icon",18),g.qZA()()()(),g.TgZ(20,"div",19)(21,"button",20),g.NdJ("click",(function(){return t.closeDialog()})),g._UZ(22,"system-label",21),g.qZA(),g.TgZ(23,"button",22),g.NdJ("click",(function(){return t.add()})),g._UZ(24,"system-label",23),g.qZA()()()()),2&e&&(g.xp6(4),g.Q6J("icon","close")("size","large"),g.xp6(8),g.Q6J("ngModel",t.objRepo.object),g.xp6(5),g.Q6J("ngModel",t.objRepo.component),g.xp6(2),g.Q6J("icon","redo")("size","xx-small")("addclasses","slds-section__title-action-icon slds-button__icon slds-button__icon_left"))},dependencies:[n.Fj,n.JJ,n.On,A.J,T._,u.r],encapsulation:2}),ObjectRepositoryManagerAddRepo})();function Jd(e,t){1&e&&(g.TgZ(0,"h2",21),g._UZ(1,"system-label",22),g.qZA())}function Nd(e,t){1&e&&(g.TgZ(0,"h2",23),g._UZ(1,"system-label",24),g.qZA())}function kd(e,t){if(1&e&&(g.TgZ(0,"option",28),g._uU(1),g.qZA()),2&e){const e=t.$implicit;g.Q6J("ngValue",e),g.xp6(1),g.Oqu(e)}}function wd(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",9)(1,"label",10),g._uU(2,"Scope"),g.qZA(),g.TgZ(3,"div",12)(4,"div",25)(5,"select",26),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.moduleRepo.scope=t)})),g.YNc(6,kd,2,2,"option",27),g.qZA()()()()}if(2&e){const e=g.oxw();g.xp6(5),g.Q6J("ngModel",e.moduleRepo.scope),g.xp6(1),g.Q6J("ngForOf",e.scopes)}}function Ud(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"button",29),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw();return g.KtG(t.add())})),g._UZ(1,"system-label",30),g.qZA()}}function Ed(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"button",29),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw();return g.KtG(t.add())})),g._UZ(1,"system-label",31),g.qZA()}}let Dd=(()=>{class ObjectRepositoryManagerAddModule{constructor(e,t,s){this.backend=e,this.language=t,this.modelutilities=s,this.closedialog=new g.vpe,this.mode="add",this.edit_mode="custom",this.moduleRepo={id:"",module:"",path:"",description:"",package:"",version:"",scope:"custom"},this.scopes=["custom","global"]}ngOnInit(){"custom"==this.edit_mode?this.scopes=["custom"]:this.scopes=["custom","global"]}closeDialog(){this.self.destroy()}onModalEscX(){this.closeDialog()}add(){this.closedialog.emit(!0),this.self.destroy()}updateField(e){this.moduleRepo.description=e}}return ObjectRepositoryManagerAddModule.ɵfac=function(e){return new(e||ObjectRepositoryManagerAddModule)(g.Y36(p.y),g.Y36(f.d),g.Y36(b.A))},ObjectRepositoryManagerAddModule.ɵcmp=g.Xpm({type:ObjectRepositoryManagerAddModule,selectors:[["objectrepositorymanager-add-module"]],inputs:{mode:"mode",edit_mode:"edit_mode",moduleRepo:"moduleRepo"},outputs:{closedialog:"closedialog"},decls:29,vars:10,consts:[["role","dialog","tabindex","-1","aria-labelledby","header43",1,"slds-modal","slds-fade-in-open"],[1,"slds-modal__container"],[1,"slds-modal__header","slds-theme--shade"],["title","Close",1,"slds-button","slds-modal__close","slds-button--icon-inverse",3,"click"],[3,"icon","size"],["id","header43","class","slds-text-heading--medium",4,"ngIf"],["id","header44","class","slds-text-heading--medium",4,"ngIf"],[1,"slds-modal__content","slds-p-around--medium"],["class","slds-form-element slds-m-top--small",4,"ngIf"],[1,"slds-form-element","slds-m-top--small"],[1,"slds-form-element__label"],["label","LBL_NAME"],[1,"slds-form-element__control"],["type","text","placeholder","",1,"slds-input",3,"ngModel","ngModelChange"],["label","LBL_PATH"],["label","LBL_DESCRIPTION"],[3,"ngModel","ngModelChange"],[1,"slds-modal__footer"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],["class","slds-button slds-button--brand",3,"click",4,"ngIf"],["id","header43",1,"slds-text-heading--medium"],["label","LBL_ADD_Module"],["id","header44",1,"slds-text-heading--medium"],["label","LBL_EDIT_Module"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_ADD"],["label","LBL_SAVE"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),g.NdJ("click",(function(){return t.closeDialog()})),g._UZ(4,"system-button-icon",4),g.qZA(),g.YNc(5,Jd,2,0,"h2",5),g.YNc(6,Nd,2,0,"h2",6),g.qZA(),g.TgZ(7,"div",7),g.YNc(8,wd,7,2,"div",8),g.TgZ(9,"div",9)(10,"label",10),g._UZ(11,"system-label",11),g.qZA(),g.TgZ(12,"div",12)(13,"input",13),g.NdJ("ngModelChange",(function(e){return t.moduleRepo.module=e})),g.qZA()()(),g.TgZ(14,"div",9)(15,"label",10),g._UZ(16,"system-label",14),g.qZA(),g.TgZ(17,"div",12)(18,"input",13),g.NdJ("ngModelChange",(function(e){return t.moduleRepo.path=e})),g.qZA()()(),g.TgZ(19,"div",9)(20,"label",10),g._UZ(21,"system-label",15),g.qZA(),g.TgZ(22,"div",12)(23,"system-richtext-editor",16),g.NdJ("ngModelChange",(function(e){return t.moduleRepo.description=e})),g.qZA()()()(),g.TgZ(24,"div",17)(25,"button",18),g.NdJ("click",(function(){return t.closeDialog()})),g._UZ(26,"system-label",19),g.qZA(),g.YNc(27,Ud,2,0,"button",20),g.YNc(28,Ed,2,0,"button",20),g.qZA()()()),2&e&&(g.xp6(4),g.Q6J("icon","close")("size","large"),g.xp6(1),g.Q6J("ngIf","add"==t.mode),g.xp6(1),g.Q6J("ngIf","edit"==t.mode),g.xp6(2),g.Q6J("ngIf","add"==t.mode),g.xp6(5),g.Q6J("ngModel",t.moduleRepo.module),g.xp6(5),g.Q6J("ngModel",t.moduleRepo.path),g.xp6(5),g.Q6J("ngModel",t.moduleRepo.description),g.xp6(4),g.Q6J("ngIf","add"==t.mode),g.xp6(1),g.Q6J("ngIf","edit"==t.mode))},dependencies:[i.sg,i.O5,n.YN,n.Kr,n.Fj,n.EJ,n.JJ,n.On,A.J,T._,Ds.z],styles:["[_nghost-%COMP%]   .mce-ico[_ngcontent-%COMP%]{color:#54698d;font-size:12px}","[_nghost-%COMP%]   .mce-text[_ngcontent-%COMP%]{color:#54698d;font-size:12px}","[_nghost-%COMP%]   .mce-btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#54698d;font-size:12px}","[_nghost-%COMP%]   .mce-tinymce[_ngcontent-%COMP%]{border-radius:4px}","[_nghost-%COMP%]   .mce-widget[_ngcontent-%COMP%]{font-family:Titillium Web,sans-serif}"]}),ObjectRepositoryManagerAddModule})();const Od=["inputField"];function Id(e,t){1&e&&g._UZ(0,"system-spinner")}function Qd(e,t){if(1&e&&(g.TgZ(0,"div",4)(1,"div",5),g._UZ(2,"input",6,7),g.qZA()()),2&e){const e=g.oxw();g.xp6(2),g.s9C("value",e.repostring)}}let Sd=(()=>{class ObjectRepositoryExport{constructor(e,t,s){this.lang=e,this.backend=t,this.toast=s,this.isLoading=!1}ngOnInit(){this.isLoading=!0,this.backend.getRequest("configuration/configurator/objectrepository").subscribe((e=>{this.repostring=e.repostring,this.isLoading=!1,window.setTimeout((()=>this.inputField.nativeElement.select()),500)}),(()=>{this.isLoading=!1,this.toast.sendToast("Error loading data!","error")}))}closeModal(){this.self.destroy()}onModalEscX(){this.closeModal()}}return ObjectRepositoryExport.ɵfac=function(e){return new(e||ObjectRepositoryExport)(g.Y36(f.d),g.Y36(p.y),g.Y36(y.A))},ObjectRepositoryExport.ɵcmp=g.Xpm({type:ObjectRepositoryExport,selectors:[["objectrepositoryexport"]],viewQuery:function(e,t){if(1&e&&g.Gf(Od,7),2&e){let e;g.iGM(e=g.CRH())&&(t.inputField=e.first)}},decls:9,vars:3,consts:[[3,"close"],[4,"ngIf"],["class","slds-text-align--center slds-grid",4,"ngIf"],[1,"slds-button","slds-button--neutral",3,"click"],[1,"slds-text-align--center","slds-grid"],[1,"slds-m-right--medium",2,"width","100%"],["type","text",1,"slds-input",2,"width","100%",3,"value"],["inputField",""]],template:function(e,t){1&e&&(g.TgZ(0,"system-modal")(1,"system-modal-header",0),g.NdJ("close",(function(){return t.closeModal()})),g._uU(2,"Object Repository Export"),g.qZA(),g.TgZ(3,"system-modal-content"),g.YNc(4,Id,1,0,"system-spinner",1),g.YNc(5,Qd,4,1,"div",2),g.qZA(),g.TgZ(6,"system-modal-footer")(7,"button",3),g.NdJ("click",(function(){return t.closeModal()})),g._uU(8),g.qZA()()()),2&e&&(g.xp6(4),g.Q6J("ngIf",t.isLoading),g.xp6(1),g.Q6J("ngIf",!t.isLoading),g.xp6(3),g.Oqu(t.lang.getLabel("LBL_CLOSE")))},dependencies:[i.O5,it.j,nt.x,lt.p,ot.y,Xn.W],encapsulation:2}),ObjectRepositoryExport})();var Bd=s(4846),Fd=s(2006),Yd=s(8280),Rd=s(6538),Gd=s(4730);function Hd(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"a",27),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw().$implicit,s=g.oxw();return g.KtG(s.valueClicked$.emit({type:"date_entered",value:t.date_entered}))})),g._UZ(1,"system-display-datetime",28),g.qZA()}if(2&e){const e=g.oxw().$implicit;g.xp6(1),g.Q6J("date",e.date_entered)}}function Kd(e,t){if(1&e&&g._UZ(0,"system-display-datetime",28),2&e){const e=g.oxw().$implicit;g.Q6J("date",e.date_entered)}}function zd(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"a",27),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw().$implicit,s=g.oxw();return g.KtG(s.valueClicked$.emit({type:"pid",value:t.pid}))})),g._uU(1),g.qZA()}if(2&e){const e=g.oxw().$implicit;g.xp6(1),g.Oqu(e.pid)}}function Vd(e,t){if(1&e&&(g.ynx(0),g._uU(1),g.BQk()),2&e){const e=g.oxw().$implicit;g.xp6(1),g.Oqu(e.pid)}}function Pd(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"a",27),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw().$implicit,s=g.oxw();return g.KtG(s.valueClicked$.emit({type:"transaction_id",value:t.transaction_id}))})),g._uU(1),g.qZA()}if(2&e){const e=g.oxw().$implicit;g.xp6(1),g.Oqu(e.transaction_id)}}function $d(e,t){if(1&e&&(g.ynx(0),g._uU(1),g.BQk()),2&e){const e=g.oxw().$implicit;g.xp6(1),g.Oqu(e.transaction_id)}}function jd(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"a",27),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw().$implicit,s=g.oxw();return g.KtG(s.valueClicked$.emit({type:"user",value:{user_id:t.user_id,user_name:t.user_name}}))})),g._uU(1),g.qZA()}if(2&e){const e=g.oxw().$implicit;g.xp6(1),g.Oqu(e.user_name)}}function Wd(e,t){if(1&e&&(g.ynx(0),g._uU(1),g.BQk()),2&e){const e=g.oxw().$implicit;g.xp6(1),g.Oqu(e.user_name)}}function Xd(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"a",27),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw().$implicit,s=g.oxw();return g.KtG(s.valueClicked$.emit({type:"log_level",value:t.log_level}))})),g._uU(1),g.qZA()}if(2&e){const e=g.oxw().$implicit;g.xp6(1),g.Oqu(e.log_level)}}function er(e,t){if(1&e&&(g.ynx(0),g._uU(1),g.BQk()),2&e){const e=g.oxw().$implicit;g.xp6(1),g.Oqu(e.log_level)}}function tr(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"a",27),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw().$implicit,s=g.oxw();return g.KtG(s.valueClicked$.emit({type:"log_sublevel",value:t.log_sublevel}))})),g._uU(1),g.qZA()}if(2&e){const e=g.oxw().$implicit;g.xp6(1),g.Oqu(e.log_sublevel)}}function sr(e,t){if(1&e&&(g.ynx(0),g._uU(1),g.BQk()),2&e){const e=g.oxw().$implicit;g.xp6(1),g.Oqu(e.log_sublevel)}}function ir(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"tr")(1,"td"),g.YNc(2,Hd,2,1,"a",20),g.YNc(3,Kd,1,1,"system-display-datetime",21),g.qZA(),g.TgZ(4,"td",22),g.YNc(5,zd,2,1,"a",20),g.YNc(6,Vd,2,1,"ng-container",23),g.qZA(),g.TgZ(7,"td"),g.YNc(8,Pd,2,1,"a",20),g.YNc(9,$d,2,1,"ng-container",23),g.qZA(),g.TgZ(10,"td"),g.YNc(11,jd,2,1,"a",20),g.YNc(12,Wd,2,1,"ng-container",23),g.qZA(),g.TgZ(13,"td"),g.YNc(14,Xd,2,1,"a",20),g.YNc(15,er,2,1,"ng-container",23),g.qZA(),g.TgZ(16,"td"),g.YNc(17,tr,2,1,"a",20),g.YNc(18,sr,2,1,"ng-container",23),g.qZA(),g.TgZ(19,"td")(20,"div",24),g._uU(21),g.qZA()(),g.TgZ(22,"td")(23,"button",25),g.NdJ("click",(function(){const t=g.CHM(e).index,s=g.oxw();return g.KtG(s.showEntryInModal(t))})),g._UZ(24,"system-button-icon",26),g.qZA()()()}if(2&e){const e=t.$implicit,s=g.oxw();g.xp6(2),g.Q6J("ngIf",!s.valuesNotClickable),g.xp6(1),g.Q6J("ngIf",s.valuesNotClickable),g.xp6(2),g.Q6J("ngIf",!s.valuesNotClickable),g.xp6(1),g.Q6J("ngIf",s.valuesNotClickable),g.xp6(2),g.Q6J("ngIf",!s.valuesNotClickable),g.xp6(1),g.Q6J("ngIf",s.valuesNotClickable),g.xp6(2),g.Q6J("ngIf",!s.valuesNotClickable),g.xp6(1),g.Q6J("ngIf",s.valuesNotClickable),g.xp6(2),g.Q6J("ngIf",!s.valuesNotClickable),g.xp6(1),g.Q6J("ngIf",s.valuesNotClickable),g.xp6(2),g.Q6J("ngIf",!s.valuesNotClickable),g.xp6(1),g.Q6J("ngIf",s.valuesNotClickable),g.xp6(3),g.Oqu(e.description)}}function nr(e,t){1&e&&(g.TgZ(0,"div",29)(1,"system-illustration-no-records"),g._UZ(2,"system-label",30),g.qZA()())}const lr=function(){return{opacity:0}},or=function(){return{opacity:.33}};let ar=(()=>{class CRMLogViewerList{constructor(e,t,s,i,n,l){this.backend=e,this.metadata=t,this.lang=s,this.prefs=i,this.modalservice=n,this.toast=l,this.filter={loglevel:"",subloglevel:"",pid:"",user_id:"",text:"",transaction_id:"",end:void 0},this.period={type:"",begin:{year:"",month:"",day:"",hour:""},end:{year:"",month:"",day:"",hour:""},duration:""},this.valuesNotClickable=!1,this.countEntries$=new ca.X(0),this.valueClicked$=new g.vpe,this.entries=[],this.toastId="",this.isLoading=!1,this.isLoaded=!1,this.isInitialLoaded=!1}ngOnInit(){this.load$?this.load$.subscribe((()=>{this.loadData()})):this.loadData()}loadData(){if(this.isLoading)return;this.isLoaded=!1,this.isLoading=!0;let e={loglevel:this.filter.loglevel?this.filter.loglevel:void 0,subloglevel:this.filter.subloglevel?this.filter.subloglevel:void 0,pid:this.filter.pid?this.filter.pid:void 0,user_id:this.filter.user_id?this.filter.user_id:void 0,text:this.filter.text?this.filter.text:void 0,transaction_id:this.filter.transaction_id?this.filter.transaction_id:void 0,end:this.filter.end?this.filter.end.utc().format("YYYY-MM-DD HH:mm:ss"):void 0,limit:this.limit};this.toast.clearToast(this.toastId),this.backend.getRequest("admin/crmlog/entries",e).subscribe((e=>{this.entries=e.entries,this.countEntries$.next(e.totalCount),this.isLoading=!1,this.isInitialLoaded=!0}),(e=>{this.toast.sendToast("Error loading log data!","error"),this.isLoading=!1}))}showEntryInModal(e){this.modalservice.openModal("CRMLogViewerModal").subscribe((t=>{t.instance.entry=this.entries[e],t.instance.user_name=this.entries[e].user_name}))}}return CRMLogViewerList.ɵfac=function(e){return new(e||CRMLogViewerList)(g.Y36(p.y),g.Y36(h.Pu),g.Y36(f.d),g.Y36(ga.z),g.Y36(M.o),g.Y36(y.A))},CRMLogViewerList.ɵcmp=g.Xpm({type:CRMLogViewerList,selectors:[["crm-log-viewer-list"]],inputs:{filter:"filter",period:"period",load$:["load","load$"],valuesNotClickable:"valuesNotClickable",limit:"limit"},outputs:{countEntries$:"countEntries$",valueClicked$:"valueClicked"},decls:25,vars:7,consts:[[1,"slds-section","slds-is-open",3,"ngStyle"],[1,"slds-section__content","slds-m-bottom_medium","slds-grid","slds-grid_vertical",2,"padding-top","0"],["system-to-bottom","",1,"slds-grid","slds-grid_vertical","slds-border--top","slds-scrollable--y",3,"system-overlay-loading-spinner"],[1,"slds-table","slds-table--striped","slds-table--bordered","slds-table--fixed-layout","slds-table--col-bordered","slds-table--striped","slds-table_header-fixed",3,"ngStyle"],[2,"width","7.5rem"],["label","LBL_DATE",1,"slds-th__action"],[1,"slds-text-align--right",2,"width","3.5rem"],[1,"slds-th__action"],[1,"slds-text-align--right",2,"width","17rem"],["label","LBL_TRANSACTION",1,"slds-th__action"],[1,"slds-resizable",2,"width","4.5rem"],["label","LBL_USER",1,"slds-th__action"],[2,"width","3rem"],["label","LBL_LEVEL",1,"slds-th__action"],["label","LBL_SUBLEVEL",1,"slds-th__action"],[1,"slds-resizable",2,"width","100%"],["label","LBL_TEXT",1,"slds-th__action"],[2,"width","2.5rem"],[4,"ngFor","ngForOf"],["class","slds-height_full slds-align--absolute-center",4,"ngIf"],[3,"click",4,"ngIf"],[3,"date",4,"ngIf"],[1,"slds-text-align--right"],[4,"ngIf"],[1,"slds-truncate","slds-text-font_monospace"],[1,"slds-button","slds-button--icon-border","slds-button_icon-small",3,"click"],["icon","expand"],[3,"click"],[3,"date"],[1,"slds-height_full","slds-align--absolute-center"],["label","LBL_NO_RECORDS_FOUND"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"table",3)(4,"thead")(5,"tr")(6,"th",4),g._UZ(7,"system-label",5),g.qZA(),g.TgZ(8,"th",6)(9,"span",7),g._uU(10,"PID"),g.qZA()(),g.TgZ(11,"th",8),g._UZ(12,"system-label",9),g.qZA(),g.TgZ(13,"th",10),g._UZ(14,"system-label",11),g.qZA(),g.TgZ(15,"th",12),g._UZ(16,"system-label",13),g.qZA(),g.TgZ(17,"th",12),g._UZ(18,"system-label",14),g.qZA(),g.TgZ(19,"th",15),g._UZ(20,"system-label",16),g.qZA(),g._UZ(21,"th",17),g.qZA()(),g.TgZ(22,"tbody"),g.YNc(23,ir,25,13,"tr",18),g.qZA()(),g.YNc(24,nr,3,0,"div",19),g.qZA()()()),2&e&&(g.Q6J("ngStyle",t.isInitialLoaded?void 0:g.DdM(5,lr)),g.xp6(2),g.Q6J("system-overlay-loading-spinner",t.isLoading),g.xp6(1),g.Q6J("ngStyle",t.isLoading?g.DdM(6,or):void 0),g.xp6(20),g.Q6J("ngForOf",t.entries),g.xp6(1),g.Q6J("ngIf",0==t.entries.length))},dependencies:[i.sg,i.O5,i.PC,A.J,Rd.a,Gd.C,T._,k.H,Hi._],encapsulation:2}),CRMLogViewerList})(),dr=(()=>{class CRMLogViewer{setNow(){this.filter.end=new moment}set filterUser(e){if(!e)return this.filter.user_id="",void(this.filterUserName=void 0);const t=e.split("::");this.filter.user_id=t[0],this.filterUserName=t[1]}get filterUser(){if(this.filter.user_id)return this.filter.user_id+"::"+this.filterUserName}constructor(e,t,s,i,n){this.lang=e,this.backend=t,this.modal=s,this.toast=i,this.userpreferences=n,this.filter={loglevel:"",subloglevel:"",pid:"",user_id:"",text:"",transaction_id:"",end:void 0},this.limit=250,this.load$=new g.vpe}canLoad(){return!(this.filter.pid&&!this.filter.pid.match(/\d$/))}buttonLoad(){this.load$.emit()}valueClicked(e,t){switch(e){case"date_entered":this.filter.end=new moment.utc(t).tz(this.userpreferences.toUse.timezone);break;case"transaction_id":this.filter.transaction_id=t;break;case"user":this.filter.user_id=t.user_id,this.filterUserName=t.user_name;break;case"log_level":this.filter.loglevel=t;break;case"log_sublevel":this.filter.subloglevel=t;break;case"pid":this.filter.pid=t.toString()}}truncate(){this.modal.prompt("confirm","Truncate the API log and delete all entries?","Empty the API Log?").subscribe((e=>{e&&this.backend.deleteRequest("admin/crmlog").subscribe((()=>{this.load$.emit()}),(()=>{this.toast.sendToast("Error truncating log","error")}))}))}}return CRMLogViewer.ɵfac=function(e){return new(e||CRMLogViewer)(g.Y36(f.d),g.Y36(p.y),g.Y36(M.o),g.Y36(y.A),g.Y36(ga.z))},CRMLogViewer.ɵcmp=g.Xpm({type:CRMLogViewer,selectors:[["ng-component"]],decls:91,vars:17,consts:[[2,"height","100%"],["titlelabel","LBL_CRM_LOG_VIEWER","icon","custom:custom62"],["label","LBL_RECORDS"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_TRUNCATE"],[1,"slds-button","slds-button_brand",3,"click"],["label","LBL_LOAD"],[1,"slds-section","slds-is-open","slds-m-bottom--medium"],[1,"slds-section__content","slds-m-horizontal_medium","slds-m-bottom_medium",2,"padding-top","0","margin-bottom","0"],[1,"slds-grid","slds-grid_vertical-align-center","slds-m-bottom_xxx-small",2,"padding-top","0"],[1,"slds-col","slds-size--5-of-12"],[1,"slds-form-element__label"],["label","LBL_END"],[1,"slds-grid","slds-grid--vertical-align-center","slds-p-right--small"],[1,"slds-grow",3,"ngModel","ngModelChange"],[1,"slds-grow","slds-p-horizontal--xx-small",3,"ngModel","ngModelChange"],["system-title","LBL_NOW","icon","clock","size","x-small",3,"click"],[1,"slds-col","slds-size--1-of-12","slds-p-right_x-small"],["label","LBL_ROWS"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],[1,"slds-form-element","slds-p-right_x-small","slds-size--3-of-12"],["for","pid",1,"slds-form-element__label"],[1,"slds-form-element__control","slds-input-has-icon","slds-input-has-icon_right"],["id","pid","system-trim-input","","type","text","size","5",1,"slds-input","slds-text-align_right",3,"ngModel","ngModelChange"],[1,"slds-button","slds-button_icon","slds-input__icon","slds-input__icon_right",3,"click"],["icon","clear","addclasses","slds-icon-text-light"],[1,"slds-form-element","slds-size--3-of-12"],["for","transaction_id",1,"slds-form-element__label"],["system-trim-input","","id","transaction_id","type","text",1,"slds-input","slds-text-align_right",3,"ngModel","ngModelChange"],[1,"slds-grid","slds-grid_vertical-align-end","slds-m-bottom_xxx-small",2,"padding-top","0"],[1,"slds-p-right_x-small","slds-size--1-of-4"],["module","Users","nameField","user_name",3,"ngModel","ngModelChange"],[1,"slds-form-element","slds-p-right_x-small","slds-size--1-of-4"],["label","LBL_LOGFILE_LEVEL"],[1,"slds-form-element__control"],["value",""],["label","LBL_ALL"],["value","debug"],["label","LBL_LOGLEVEL_DEBUG"],["value","info"],["label","LBL_LOGLEVEL_INFO"],["value","error"],["label","LBL_LOGLEVEL_ERROR"],["value","warn"],["label","LBL_LOGLEVEL_WARN"],["value","security"],["label","LBL_LOGLEVEL_SECURITY"],["value","fatal"],["label","LBL_LOGLEVEL_FATAL"],["value","sql"],["label","LBL_LOGLEVEL_SQL"],["value","slowsql"],["label","LBL_LOGLEVEL_SLOWSQL"],["value","developer"],["label","LBL_LOGLEVEL_DEVELOPER"],[1,"slds-form-element","slds-size--1-of-4","slds-p-right_x-small"],["system-trim-input","","type","text",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-form-element","slds-size--1-of-4"],[3,"load","filter","limit","countEntries$","valueClicked"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0)(1,"workbench-header",1),g._uU(2),g._UZ(3,"system-label",2),g._uU(4,") "),g.TgZ(5,"workbench-header-controls")(6,"button",3),g.NdJ("click",(function(){return t.truncate()})),g._UZ(7,"system-label",4),g.qZA(),g.TgZ(8,"button",5),g.NdJ("click",(function(){return t.buttonLoad()})),g._UZ(9,"system-label",6),g.qZA()()(),g.TgZ(10,"div",7)(11,"div",8)(12,"div",9)(13,"div",10)(14,"label",11),g._UZ(15,"system-label",12),g.qZA(),g.TgZ(16,"div",13)(17,"system-input-date",14),g.NdJ("ngModelChange",(function(e){return t.filter.end=e})),g.qZA(),g.TgZ(18,"system-input-time",15),g.NdJ("ngModelChange",(function(e){return t.filter.end=e})),g.qZA(),g.TgZ(19,"system-utility-icon",16),g.NdJ("click",(function(){return t.setNow()})),g.qZA()()(),g.TgZ(20,"div",17)(21,"label",11),g._UZ(22,"system-label",18),g.qZA(),g.TgZ(23,"div",19)(24,"select",20),g.NdJ("ngModelChange",(function(e){return t.limit=e})),g.TgZ(25,"option"),g._uU(26,"250"),g.qZA(),g.TgZ(27,"option"),g._uU(28,"500"),g.qZA(),g.TgZ(29,"option"),g._uU(30,"1000"),g.qZA()()()(),g.TgZ(31,"div",21)(32,"label",22),g._uU(33),g.qZA(),g.TgZ(34,"div",23)(35,"input",24),g.NdJ("ngModelChange",(function(e){return t.filter.pid=e})),g.qZA(),g.TgZ(36,"button",25),g.NdJ("click",(function(){return t.filter.pid=""})),g._UZ(37,"system-button-icon",26),g.qZA()()(),g.TgZ(38,"div",27)(39,"label",28),g._uU(40),g.qZA(),g.TgZ(41,"div",23)(42,"input",29),g.NdJ("ngModelChange",(function(e){return t.filter.transaction_id=e})),g.qZA(),g.TgZ(43,"button",25),g.NdJ("click",(function(){return t.filter.transaction_id=""})),g._UZ(44,"system-button-icon",26),g.qZA()()()(),g.TgZ(45,"div",30)(46,"div",31)(47,"label",11),g._uU(48),g.qZA(),g.TgZ(49,"system-input-relate",32),g.NdJ("ngModelChange",(function(e){return t.filterUser=e})),g.qZA()(),g.TgZ(50,"div",33)(51,"label",11),g._UZ(52,"system-label",34),g.qZA(),g.TgZ(53,"div",35)(54,"div",19)(55,"select",20),g.NdJ("ngModelChange",(function(e){return t.filter.loglevel=e})),g.TgZ(56,"option",36),g._UZ(57,"system-label",37),g.qZA(),g.TgZ(58,"option",38),g._UZ(59,"system-label",39),g.qZA(),g.TgZ(60,"option",40),g._UZ(61,"system-label",41),g.qZA(),g.TgZ(62,"option",42),g._UZ(63,"system-label",43),g.qZA(),g.TgZ(64,"option",44),g._UZ(65,"system-label",45),g.qZA(),g.TgZ(66,"option",46),g._UZ(67,"system-label",47),g.qZA(),g.TgZ(68,"option",48),g._UZ(69,"system-label",49),g.qZA(),g.TgZ(70,"option",50),g._UZ(71,"system-label",51),g.qZA(),g.TgZ(72,"option",52),g._UZ(73,"system-label",53),g.qZA(),g.TgZ(74,"option",54),g._UZ(75,"system-label",55),g.qZA()()()()(),g.TgZ(76,"div",56)(77,"label",11),g._uU(78,"Sub Log Level"),g.qZA(),g.TgZ(79,"div",23)(80,"input",57),g.NdJ("ngModelChange",(function(e){return t.filter.subloglevel=e})),g.qZA(),g.TgZ(81,"button",25),g.NdJ("click",(function(){return t.filter.subloglevel=""})),g._UZ(82,"system-button-icon",26),g.qZA()()(),g.TgZ(83,"div",58)(84,"label",11),g._uU(85,"Text"),g.qZA(),g.TgZ(86,"div",23)(87,"input",57),g.NdJ("ngModelChange",(function(e){return t.filter.text=e})),g.qZA(),g.TgZ(88,"button",25),g.NdJ("click",(function(){return t.filter.text=""})),g._UZ(89,"system-button-icon",26),g.qZA()()()()()(),g.TgZ(90,"crm-log-viewer-list",59),g.NdJ("countEntries$",(function(e){return t.countEntries=e}))("valueClicked",(function(e){return t.valueClicked(e.type,e.value)})),g.qZA()()),2&e&&(g.xp6(2),g.hij(" (",t.countEntries," "),g.xp6(6),g.uIk("disabled",!t.canLoad()||null),g.xp6(9),g.Q6J("ngModel",t.filter.end),g.xp6(1),g.Q6J("ngModel",t.filter.end),g.xp6(6),g.Q6J("ngModel",t.limit),g.xp6(9),g.Oqu(t.lang.getLabel("LBL_PROCESS_ID")),g.xp6(2),g.Q6J("ngModel",t.filter.pid),g.xp6(5),g.Oqu(t.lang.getLabel("LBL_TRANSACTION")),g.xp6(2),g.Q6J("ngModel",t.filter.transaction_id),g.xp6(6),g.Oqu(t.lang.getLabel("LBL_USER")),g.xp6(1),g.Q6J("ngModel",t.filterUser),g.xp6(6),g.Q6J("ngModel",t.filter.loglevel),g.xp6(25),g.Q6J("ngModel",t.filter.subloglevel),g.xp6(7),g.Q6J("ngModel",t.filter.text),g.xp6(3),g.Q6J("load",t.load$)("filter",t.filter)("limit",t.limit))},dependencies:[n.YN,n.Kr,n.Fj,n.EJ,n.JJ,n.On,A.J,sn.z,Bd.z,Fd.H,T._,u.r,Yd.t,w.S,We,et,ar],encapsulation:2}),CRMLogViewer})();function rr(e,t){1&e&&g._UZ(0,"system-spinner",9)}function cr(e,t){if(1&e&&(g.TgZ(0,"div",10),g._uU(1),g.qZA()),2&e){const e=g.oxw();g.xp6(1),g.Oqu(e.entry.fullDescription)}}function gr(e,t){if(1&e&&(g.TgZ(0,"pre",11),g._uU(1),g.qZA()),2&e){const e=g.oxw();g.xp6(1),g.Oqu(e.formattedJson)}}let ur=(()=>{class CRMLogViewerModal{constructor(e,t,s,i){this.language=e,this.backend=t,this.toast=s,this.prefs=i,this.user_name="",this.isLoaded=!1,this.isLoading=!0}ngOnInit(){this.entry.fullDescription?this.isLoading=!(this.isLoaded=!0):this.loadFullData()}loadFullData(){this.backend.getRequest("admin/crmlog/entry/"+this.entry.id).subscribe({next:e=>{this.isLoaded=!0,this.isLoading=!1,this.entry.fullDescription=e.entry.description;try{this.jsonResponse=JSON.parse(e.entry.description)}catch(e){this.jsonResponse=!1}},error:()=>{this.toast.sendToast("Error loading entry of log file!","error","Entry "+this.entry.id+" of CRM log couldn´t be fetched.",!1),this.isLoading=!1}})}get formattedJson(){return JSON.stringify(this.jsonResponse,null,"\t")}closeModal(){this.self.destroy()}onModalEscX(){this.closeModal()}}return CRMLogViewerModal.ɵfac=function(e){return new(e||CRMLogViewerModal)(g.Y36(f.d),g.Y36(p.y),g.Y36(y.A),g.Y36(ga.z))},CRMLogViewerModal.ɵcmp=g.Xpm({type:CRMLogViewerModal,selectors:[["ng-component"]],inputs:{entry:"entry",user_name:"user_name"},decls:11,vars:7,consts:[["size","large"],[3,"close"],[3,"date"],[2,"height","100%"],["class","slds-m-top--medium","style","display:block",4,"ngIf"],["class","slds-m-bottom--x-small slds-m-horizontal--x-small slds-text-font_monospace","style","overflow-wrap:break-word",4,"ngIf"],["class","slds-m-bottom--x-small slds-m-horizontal--x-small slds-text-font_monospace","style","overflow-wrap:break-word;white-space: pre-wrap;",4,"ngIf"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CLOSE"],[1,"slds-m-top--medium",2,"display","block"],[1,"slds-m-bottom--x-small","slds-m-horizontal--x-small","slds-text-font_monospace",2,"overflow-wrap","break-word"],[1,"slds-m-bottom--x-small","slds-m-horizontal--x-small","slds-text-font_monospace",2,"overflow-wrap","break-word","white-space","pre-wrap"]],template:function(e,t){1&e&&(g.TgZ(0,"system-modal",0)(1,"system-modal-header",1),g.NdJ("close",(function(){return t.closeModal()})),g._UZ(2,"system-display-datetime",2),g._uU(3),g.qZA(),g.TgZ(4,"system-modal-content",3),g.YNc(5,rr,1,0,"system-spinner",4),g.YNc(6,cr,2,1,"div",5),g.YNc(7,gr,2,1,"pre",6),g.qZA(),g.TgZ(8,"system-modal-footer")(9,"button",7),g.NdJ("click",(function(){return t.closeModal()})),g._UZ(10,"system-label",8),g.qZA()()()),2&e&&(g.xp6(2),g.Q6J("date",t.entry.date_entered),g.xp6(1),g.lnq(" • ",t.entry.pid," • ",t.user_name," • ",t.entry.log_level,""),g.xp6(2),g.Q6J("ngIf",t.isLoading),g.xp6(1),g.Q6J("ngIf",t.isLoaded&&!t.jsonResponse),g.xp6(1),g.Q6J("ngIf",t.isLoaded&&t.jsonResponse))},dependencies:[i.O5,Rd.a,T._,it.j,nt.x,lt.p,ot.y,Xn.W],encapsulation:2}),CRMLogViewerModal})(),mr=(()=>{class CRMLogViewerListModal{constructor(e){this.language=e}closeModal(){this.self.destroy()}onModalEscX(){this.closeModal()}}return CRMLogViewerListModal.ɵfac=function(e){return new(e||CRMLogViewerListModal)(g.Y36(f.d))},CRMLogViewerListModal.ɵcmp=g.Xpm({type:CRMLogViewerListModal,selectors:[["ng-component"]],inputs:{filter:"filter",crmLogId:"crmLogId"},decls:8,vars:3,consts:[["size","large"],[3,"close"],[2,"height","100%"],[3,"filter","valuesNotClickable"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CLOSE"]],template:function(e,t){1&e&&(g.TgZ(0,"system-modal",0)(1,"system-modal-header",1),g.NdJ("close",(function(){return t.closeModal()})),g._uU(2),g.qZA(),g.TgZ(3,"system-modal-content",2),g._UZ(4,"crm-log-viewer-list",3),g.qZA(),g.TgZ(5,"system-modal-footer")(6,"button",4),g.NdJ("click",(function(){return t.closeModal()})),g._UZ(7,"system-label",5),g.qZA()()()),2&e&&(g.xp6(2),g.hij("CRM Log Entries for API Request ",t.crmLogId,""),g.xp6(2),g.Q6J("filter",t.filter)("valuesNotClickable",!0))},dependencies:[T._,it.j,nt.x,lt.p,ot.y,ar],encapsulation:2}),CRMLogViewerListModal})();var pr=s(4270);function hr(e,t){if(1&e&&(g.TgZ(0,"option"),g._uU(1),g.qZA()),2&e){const e=t.$implicit;g.xp6(1),g.Oqu(e)}}function fr(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",63)(1,"div",64)(2,"div",22)(3,"select",23),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.logtable=t)})),g.TgZ(4,"option"),g._uU(5,"sysapilog"),g.qZA(),g.YNc(6,hr,2,1,"option",30),g.qZA()()()()}if(2&e){const e=g.oxw();g.xp6(3),g.Q6J("ngModel",e.logtable),g.xp6(3),g.Q6J("ngForOf",e.logtables)}}function br(e,t){if(1&e&&(g.TgZ(0,"option"),g._uU(1),g.qZA()),2&e){const e=t.$implicit;g.xp6(1),g.Oqu(e)}}const _r=function(e){return{"slds-theme--error":e}};function Zr(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"tr",65)(1,"td"),g._UZ(2,"system-display-datetime",66),g.qZA(),g.TgZ(3,"td")(4,"div",67),g._uU(5),g.qZA()(),g.TgZ(6,"td")(7,"div",67),g._uU(8),g.qZA()(),g.TgZ(9,"td")(10,"div",67)(11,"a",68),g.NdJ("click",(function(){const t=g.CHM(e).$implicit,s=g.oxw();return g.KtG(s.valueClicked("route",t.route))})),g._uU(12),g.qZA()()(),g.TgZ(13,"td",69)(14,"div",67)(15,"a",68),g.NdJ("click",(function(){const t=g.CHM(e).$implicit,s=g.oxw();return g.KtG(s.valueClicked("method",t.method))})),g._uU(16),g.qZA()()(),g.TgZ(17,"td",69),g._uU(18),g.qZA(),g.TgZ(19,"td",70)(20,"a",68),g.NdJ("click",(function(){const t=g.CHM(e).$implicit,s=g.oxw();return g.KtG(s.valueClicked("status",t.http_status_code))})),g._uU(21),g.qZA()(),g.TgZ(22,"td",69),g._UZ(23,"system-display-number",71),g.qZA(),g.TgZ(24,"td")(25,"div",67),g._uU(26),g.qZA()(),g.TgZ(27,"td")(28,"div",67),g._uU(29),g.qZA()(),g.TgZ(30,"td")(31,"button",72),g.NdJ("click",(function(){const t=g.CHM(e).$implicit,s=g.oxw();return g.KtG(s.showEntryInModal(t))})),g._UZ(32,"system-button-icon",73),g.qZA()()()}if(2&e){const e=t.$implicit;g.Q6J("ngClass",g.VKq(13,_r,e.http_status_code<200||e.http_status_code>=300)),g.xp6(2),g.Q6J("date",e.date_entered),g.xp6(3),g.Oqu(e.user_name),g.xp6(3),g.Oqu(e.transaction_id),g.xp6(4),g.Oqu(e.route),g.xp6(4),g.Oqu(e.method),g.xp6(2),g.Oqu(e.direction),g.xp6(3),g.Oqu(e.http_status_code),g.xp6(2),g.Q6J("number",e.runtime),g.xp6(3),g.Oqu(e.request_args),g.xp6(3),g.Oqu(e.request_params),g.xp6(3),g.Q6J("icon","expand")("size","medium")}}function yr(e,t){1&e&&(g.TgZ(0,"div",74)(1,"system-illustration-no-records"),g._UZ(2,"system-label",75),g.qZA()())}let Mr=(()=>{class APIlogViewer{set filterUser(e){if(!e)return this.filter.userId="",void(this.filterUserName=void 0);const t=e.split("::");this.filter.userId=t[0],this.filterUserName=t[1]}get filterUser(){if(this.filter.userId)return this.filter.userId+"::"+this.filterUserName}get logtable(){return this._logtable}set logtable(e){e!=this._logtable&&(this._logtable=e,this.entries=[])}constructor(e,t,s){this.backend=e,this.modal=t,this.toast=s,this.methods=["CONNECT","DELETE","GET","HEAD","OPTIONS","POST","PATCH","PUT","SOAP","TRACE"],this.limit="250",this.entries=[],this.filter={method:"",session_id:"",userId:"",term:"",ip:"",route:"",status:"",direction:""},this.isLoading=!1,this.logtables=[],this._logtable="sysapilog",this.getAPILogTables()}getAPILogTables(){this.backend.getRequest("admin/apilog/logtables").subscribe({next:e=>{this.logtables=e}})}setNow(){this.dateEnd=new moment}loadData(){if(!this.isLoading){this.isLoading=!0;let e={limit:this.limit,logtable:this.logtable};this.filter.method&&(e.method=this.filter.method),this.filter.route&&(e.route=this.filter.route),this.filter.userId&&(e.user_id=this.filter.userId),this.filter.term&&(e.filter=this.filter.term),this.filter.ip&&(e.ip=this.filter.ip),this.filter.status&&(e.status=this.filter.status),this.filter.session_id&&(e.session_id=this.filter.session_id),this.filter.direction&&(e.direction=this.filter.direction),this.dateEnd&&(e.end=this.dateEnd?.utc().format("YYYY-MM-DD HH:mm:ss")),this.backend.getRequest("admin/apilog",e).subscribe({next:e=>{this.entries=e.entries,this.isLoading=!1},error:e=>{this.toast.sendToast("Error loading log data!","error"),this.isLoading=!1}})}}buttonLoad(){this.loadData()}truncate(){this.modal.prompt("confirm","Truncate the API log and delete all entries?","Truncate API Log").subscribe((e=>{e&&(this.backend.deleteRequest("admin/apilog").subscribe((()=>{this.isLoading=!1,this.loadData()}),(()=>{this.toast.sendToast("Error truncating log","error"),this.isLoading=!1})),this.isLoading=!0)}))}showEntryInModal(e){this.modal.openModal("APIlogViewerModal").subscribe((t=>{t.instance.entry=e,t.instance.logtable=this.logtable}))}showCRMlog(e){this.modal.openModal("CRMLogViewerListModal").subscribe((t=>{t.instance.filter={transaction_id:e}}))}valueClicked(e,t){switch(e){case"route":this.filter.route=t;break;case"method":this.filter.method=t;break;case"status":this.filter.status=t;break;case"dir":this.filter.direction=t}}}return APIlogViewer.ɵfac=function(e){return new(e||APIlogViewer)(g.Y36(p.y),g.Y36(M.o),g.Y36(y.A))},APIlogViewer.ɵcmp=g.Xpm({type:APIlogViewer,selectors:[["ng-component"]],decls:116,vars:18,consts:[["titlelabel","LBL_API_LOG_VIEWER","icon","custom:custom62"],["label","LBL_RECORDS"],[1,"slds-grid","slds-grid--vertical-align-center"],["class","slds-form-element slds-m-right--small",4,"ngIf"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_LOAD"],["system-to-bottom-noscroll","",3,"system-overlay-loading-spinner"],[1,"slds-section","slds-is-open","slds-p-around--xx-small"],[1,"slds-grid","slds-grid--vertical-align-end","slds-gutters_direct-xxx-small"],[1,"slds-col","slds-size--1-of-4"],[1,"slds-form-element__label"],["label","LBL_ROUTE"],[1,"slds-form-element__control","slds-input-has-icon","slds-input-has-icon_right"],["type","text","system-trim-input","",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-button","slds-button_icon","slds-input__icon","slds-input__icon_right",3,"click"],["icon","clear","addclasses","slds-icon-text-light"],["label","LBL_FILTER"],["label","LBL_END"],[1,"slds-grow",3,"ngModel","ngModelChange"],[1,"slds-grow","slds-p-horizontal--xx-small",3,"ngModel","ngModelChange"],["system-title","LBL_NOW","icon","clock","size","x-small",3,"click"],["label","LBL_ROWS"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],[1,"slds-grid","slds-gutters_direct-xxx-small"],[1,"slds-col","slds-size--1-of-8"],["label","LBL_USER"],["module","Users","nameField","user_name",3,"ngModel","ngModelChange"],["label","LBL_METHOD"],["value",""],[4,"ngFor","ngForOf"],["label","LBL_DIRECTION"],["value","I"],["label","LBL_DIRECTION_I"],["value","O"],["label","LBL_DIRECTION_O"],["label","LBL_STATUS"],["type","text","system-trim-input","","size","3",1,"slds-input",3,"ngModel","ngModelChange"],["label","LBL_IP_ADDRESS"],["label","LBL_SESSION_ID"],["system-to-bottom","",1,"slds-border--top"],[1,"slds-table","slds-table--bordered","slds-table--fixed-layout","slds-table--col-bordered","slds-no-row-hover","slds-table_header-fixed"],[2,"width","8rem"],["label","LBL_DATE",1,"slds-th__action"],[1,"slds-resizable",2,"width","8rem"],["label","LBL_USER",1,"slds-th__action"],["label","LBL_TRANSACTION_ID",1,"slds-th__action"],[1,"slds-resizable"],["label","LBL_ROUTE",1,"slds-th__action"],[2,"width","4rem"],["label","LBL_METHOD",1,"slds-th__action"],[1,"slds-text-align_center",2,"width","2rem"],["icon","signpost","size","x-small"],[2,"width","3rem"],["label","LBL_STATUS",1,"slds-th__action"],[1,"slds-text-align_center",2,"width","3rem"],["icon","clock","size","x-small"],["label","LBL_ROUTE_ARGUMENTS",1,"slds-th__action"],["label","LBL_URL_PARAMETERS",1,"slds-th__action"],[2,"width","2.5rem"],["tbody",""],[3,"ngClass",4,"ngFor","ngForOf"],["class","slds-height_full slds-align--absolute-center",4,"ngIf"],[1,"slds-form-element","slds-m-right--small"],[1,"slds-form-element__control"],[3,"ngClass"],[3,"date"],[1,"slds-truncate"],[3,"click"],[1,"slds-text-align--center"],[1,"slds-text-align--right","status"],["system-display-number-nodigits","",3,"number"],[1,"slds-button","slds-button--icon-border","slds-button_icon-small",3,"click"],[3,"icon","size"],[1,"slds-height_full","slds-align--absolute-center"],["label","LBL_NO_RECORDS_FOUND"]],template:function(e,t){1&e&&(g.TgZ(0,"workbench-header",0),g._uU(1),g._UZ(2,"system-label",1),g._uU(3,") "),g.TgZ(4,"workbench-header-controls")(5,"div",2),g.YNc(6,fr,7,2,"div",3),g.TgZ(7,"button",4),g.NdJ("click",(function(){return t.buttonLoad()})),g._UZ(8,"system-label",5),g.qZA()()()(),g.TgZ(9,"div",6)(10,"div",7)(11,"div",8)(12,"div",9)(13,"label",10),g._UZ(14,"system-label",11),g.qZA(),g.TgZ(15,"div",12)(16,"input",13),g.NdJ("ngModelChange",(function(e){return t.filter.route=e})),g.qZA(),g.TgZ(17,"button",14),g.NdJ("click",(function(){return t.filter.route=""})),g._UZ(18,"system-button-icon",15),g.qZA()()(),g.TgZ(19,"div",9)(20,"label",10),g._UZ(21,"system-label",16),g.qZA(),g.TgZ(22,"div",12)(23,"input",13),g.NdJ("ngModelChange",(function(e){return t.filter.term=e})),g.qZA(),g.TgZ(24,"button",14),g.NdJ("click",(function(){return t.filter.term=""})),g._UZ(25,"system-button-icon",15),g.qZA()()(),g.TgZ(26,"div",9)(27,"label",10),g._UZ(28,"system-label",17),g.qZA(),g.TgZ(29,"div",2)(30,"system-input-date",18),g.NdJ("ngModelChange",(function(e){return t.dateEnd=e})),g.qZA(),g.TgZ(31,"system-input-time",19),g.NdJ("ngModelChange",(function(e){return t.dateEnd=e})),g.qZA(),g.TgZ(32,"system-utility-icon",20),g.NdJ("click",(function(){return t.setNow()})),g.qZA()()(),g.TgZ(33,"div",9)(34,"label",10),g._UZ(35,"system-label",21),g.qZA(),g.TgZ(36,"div",22)(37,"select",23),g.NdJ("ngModelChange",(function(e){return t.limit=e})),g.TgZ(38,"option"),g._uU(39,"250"),g.qZA(),g.TgZ(40,"option"),g._uU(41,"500"),g.qZA(),g.TgZ(42,"option"),g._uU(43,"1000"),g.qZA()()()()(),g.TgZ(44,"div",24)(45,"div",25)(46,"label",10),g._UZ(47,"system-label",26),g.qZA(),g.TgZ(48,"system-input-relate",27),g.NdJ("ngModelChange",(function(e){return t.filterUser=e})),g.qZA()(),g.TgZ(49,"div",25)(50,"label",10),g._UZ(51,"system-label",28),g.qZA(),g.TgZ(52,"div",22)(53,"select",23),g.NdJ("ngModelChange",(function(e){return t.filter.method=e})),g._UZ(54,"option",29),g.YNc(55,br,2,1,"option",30),g.qZA()()(),g.TgZ(56,"div",25)(57,"label",10),g._UZ(58,"system-label",31),g.qZA(),g.TgZ(59,"div",22)(60,"select",23),g.NdJ("ngModelChange",(function(e){return t.filter.direction=e})),g._UZ(61,"option"),g.TgZ(62,"option",32),g._UZ(63,"system-label",33),g.qZA(),g.TgZ(64,"option",34),g._UZ(65,"system-label",35),g.qZA()()()(),g.TgZ(66,"div",25)(67,"label",10),g._UZ(68,"system-label",36),g.qZA(),g.TgZ(69,"div",12)(70,"input",37),g.NdJ("ngModelChange",(function(e){return t.filter.status=e})),g.qZA(),g.TgZ(71,"button",14),g.NdJ("click",(function(){return t.filter.status=""})),g._UZ(72,"system-button-icon",15),g.qZA()()(),g.TgZ(73,"div",9)(74,"label",10),g._UZ(75,"system-label",38),g.qZA(),g.TgZ(76,"div",12)(77,"input",13),g.NdJ("ngModelChange",(function(e){return t.filter.ip=e})),g.qZA(),g.TgZ(78,"button",14),g.NdJ("click",(function(){return t.filter.ip=""})),g._UZ(79,"system-button-icon",15),g.qZA()()(),g.TgZ(80,"div",9)(81,"label",10),g._UZ(82,"system-label",39),g.qZA(),g.TgZ(83,"div",12)(84,"input",13),g.NdJ("ngModelChange",(function(e){return t.filter.session_id=e})),g.qZA(),g.TgZ(85,"button",14),g.NdJ("click",(function(){return t.filter.session_id=""})),g._UZ(86,"system-button-icon",15),g.qZA()()()()(),g.TgZ(87,"div",40)(88,"table",41)(89,"thead")(90,"tr")(91,"th",42),g._UZ(92,"system-label",43),g.qZA(),g.TgZ(93,"th",44),g._UZ(94,"system-label",45),g.qZA(),g.TgZ(95,"th",44),g._UZ(96,"system-label",46),g.qZA(),g.TgZ(97,"th",47),g._UZ(98,"system-label",48),g.qZA(),g.TgZ(99,"th",49),g._UZ(100,"system-label",50),g.qZA(),g.TgZ(101,"th",51),g._UZ(102,"system-utility-icon",52),g.qZA(),g.TgZ(103,"th",53),g._UZ(104,"system-label",54),g.qZA(),g.TgZ(105,"th",55),g._UZ(106,"system-utility-icon",56),g.qZA(),g.TgZ(107,"th",47),g._UZ(108,"system-label",57),g.qZA(),g.TgZ(109,"th",47),g._UZ(110,"system-label",58),g.qZA(),g._UZ(111,"th",59),g.qZA()(),g.TgZ(112,"tbody",null,60),g.YNc(114,Zr,33,15,"tr",61),g.qZA()(),g.YNc(115,yr,3,0,"div",62),g.qZA()()),2&e&&(g.xp6(1),g.hij(" (",t.entries.length," "),g.xp6(5),g.Q6J("ngIf",t.logtables.length>0),g.xp6(1),g.Q6J("disabled",t.isLoading),g.xp6(2),g.Q6J("system-overlay-loading-spinner",t.isLoading),g.xp6(7),g.Q6J("ngModel",t.filter.route),g.xp6(7),g.Q6J("ngModel",t.filter.term),g.xp6(7),g.Q6J("ngModel",t.dateEnd),g.xp6(1),g.Q6J("ngModel",t.dateEnd),g.xp6(6),g.Q6J("ngModel",t.limit),g.xp6(11),g.Q6J("ngModel",t.filterUser),g.xp6(5),g.Q6J("ngModel",t.filter.method),g.xp6(2),g.Q6J("ngForOf",t.methods),g.xp6(5),g.Q6J("ngModel",t.filter.direction),g.xp6(10),g.Q6J("ngModel",t.filter.status),g.xp6(7),g.Q6J("ngModel",t.filter.ip),g.xp6(7),g.Q6J("ngModel",t.filter.session_id),g.xp6(30),g.Q6J("ngForOf",t.entries),g.xp6(1),g.Q6J("ngIf",!t.isLoading&&0==t.entries.length))},dependencies:[i.mk,i.sg,i.O5,n.YN,n.Kr,n.Fj,n.EJ,n.JJ,n.On,A.J,Rd.a,pr.G,Gd.C,sn.z,Bd.z,Fd.H,T._,u.r,k.H,C.t,Yd.t,Hi._,w.S,We,et],encapsulation:2}),APIlogViewer})();var xr=s(2067);function vr(e,t){1&e&&g._UZ(0,"system-spinner",7)}const Ar=function(e){return{"slds-is-active":e}};function Tr(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"li",10),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw(2);return g.KtG(t.activeTab="post")})),g.TgZ(1,"a",11),g._UZ(2,"system-label",44),g.qZA()()}if(2&e){const e=g.oxw(2);g.Q6J("ngClass",g.VKq(1,Ar,"post"==e.activeTab))}}function Lr(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"li",10),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw(2);return g.KtG(t.activeTab="response")})),g.TgZ(1,"a",11),g._UZ(2,"system-label",45),g.qZA()()}if(2&e){const e=g.oxw(2);g.Q6J("ngClass",g.VKq(1,Ar,"response"==e.activeTab))}}function Cr(e,t){if(1&e&&(g.TgZ(0,"tr",48)(1,"td")(2,"div",19),g._uU(3),g.qZA()(),g.TgZ(4,"td")(5,"div",19),g._uU(6),g.qZA()()()),2&e){const e=t.$implicit;g.xp6(3),g.Oqu(e.name),g.xp6(3),g.Oqu(e.value)}}function qr(e,t){if(1&e&&(g.TgZ(0,"div",46)(1,"h3",39),g._UZ(2,"system-label",47),g.qZA(),g.TgZ(3,"table",16)(4,"thead")(5,"tr",17)(6,"th",18)(7,"div",19),g._UZ(8,"system-label",20),g.qZA()(),g.TgZ(9,"th",21)(10,"div",19),g._UZ(11,"system-label",22),g.qZA()()()(),g.TgZ(12,"tbody"),g.YNc(13,Cr,7,2,"tr",41),g.qZA()()()),2&e){const e=g.oxw(2);g.xp6(13),g.Q6J("ngForOf",e.requestArguments)}}function Jr(e,t){if(1&e&&(g.TgZ(0,"tr",48)(1,"td")(2,"div",19),g._uU(3),g.qZA()(),g.TgZ(4,"td")(5,"div",19),g._uU(6),g.qZA()()()),2&e){const e=t.$implicit;g.xp6(3),g.Oqu(e.name),g.xp6(3),g.Oqu(e.value)}}function Nr(e,t){if(1&e&&(g.TgZ(0,"div",46)(1,"h3",39),g._UZ(2,"system-label",49),g.qZA(),g.TgZ(3,"table",16)(4,"thead")(5,"tr",17)(6,"th",18)(7,"div",19),g._UZ(8,"system-label",20),g.qZA()(),g.TgZ(9,"th",21)(10,"div",19),g._UZ(11,"system-label",22),g.qZA()()()(),g.TgZ(12,"tbody"),g.YNc(13,Jr,7,2,"tr",41),g.qZA()()()),2&e){const e=g.oxw(2);g.xp6(13),g.Q6J("ngForOf",e.requestParams)}}function kr(e,t){if(1&e&&(g.TgZ(0,"tr",48)(1,"td")(2,"div",19),g._uU(3),g.qZA()(),g.TgZ(4,"td")(5,"div",19),g._uU(6),g.qZA()()()),2&e){const e=t.$implicit;g.xp6(3),g.Oqu(e.name),g.xp6(3),g.Oqu(e.value)}}function wr(e,t){if(1&e&&(g.TgZ(0,"tr",48)(1,"td")(2,"div",19),g._uU(3),g.qZA()(),g.TgZ(4,"td")(5,"div",19),g._uU(6),g.qZA()()()),2&e){const e=t.$implicit;g.xp6(3),g.Oqu(e.name),g.xp6(3),g.Oqu(e.value)}}function Ur(e,t){if(1&e&&(g.ynx(0),g.TgZ(1,"h3",39),g._UZ(2,"system-label",50),g.qZA(),g.TgZ(3,"table",16)(4,"thead")(5,"tr",17)(6,"th",18)(7,"div",19),g._UZ(8,"system-label",20),g.qZA()(),g.TgZ(9,"th",21)(10,"div",19),g._UZ(11,"system-label",22),g.qZA()()()(),g.TgZ(12,"tbody"),g.YNc(13,wr,7,2,"tr",41),g.qZA()(),g.BQk()),2&e){const e=g.oxw(2);g.xp6(13),g.Q6J("ngForOf",e.responseHeaders)}}function Er(e,t){if(1&e&&(g.TgZ(0,"tr",48)(1,"td")(2,"div",19),g._uU(3),g.qZA()(),g.TgZ(4,"td")(5,"div",19),g._uU(6),g.qZA()()()),2&e){const e=t.$implicit;g.xp6(3),g.Oqu(e.name),g.xp6(3),g.Oqu(e.value)}}function Dr(e,t){if(1&e&&(g.TgZ(0,"div")(1,"table",16)(2,"thead")(3,"tr",17)(4,"th",18)(5,"div",19),g._UZ(6,"system-label",20),g.qZA()(),g.TgZ(7,"th",21)(8,"div",19),g._UZ(9,"system-label",22),g.qZA()()()(),g.TgZ(10,"tbody"),g.YNc(11,Er,7,2,"tr",41),g.qZA()()()),2&e){const e=g.oxw(3);g.xp6(11),g.Q6J("ngForOf",e.formattedRequest())}}function Or(e,t){if(1&e&&(g.TgZ(0,"div",54)(1,"pre",55),g._uU(2),g.qZA()()),2&e){const e=g.oxw(3);g.xp6(2),g.Oqu(e.formattedRequest())}}const Ir=function(e){return{"slds-hide":e}};function Qr(e,t){if(1&e&&(g.TgZ(0,"div",15),g.ynx(1,51),g.YNc(2,Dr,12,1,"div",52),g.YNc(3,Or,3,1,"div",53),g.BQk(),g.qZA()),2&e){const e=g.oxw(2);g.Q6J("ngClass",g.VKq(3,Ir,"post"!=e.activeTab)),g.xp6(1),g.Q6J("ngSwitch",e.determineContentType(e._requestheaders)),g.xp6(1),g.Q6J("ngSwitchCase","application/x-www-form-urlencoded")}}function Sr(e,t){1&e&&(g.TgZ(0,"div"),g._uU(1," url encoded "),g.qZA())}function Br(e,t){if(1&e&&(g.TgZ(0,"div",54)(1,"pre",55),g._uU(2),g.qZA()()),2&e){const e=g.oxw(3);g.xp6(2),g.Oqu(e.formattedResponse())}}function Fr(e,t){if(1&e&&(g.TgZ(0,"div",15),g.ynx(1,51),g.YNc(2,Sr,2,0,"div",52),g.YNc(3,Br,3,1,"div",53),g.BQk(),g.qZA()),2&e){const e=g.oxw(2);g.Q6J("ngClass",g.VKq(3,Ir,"response"!=e.activeTab)),g.xp6(1),g.Q6J("ngSwitch",e.determineContentType(e._responseheaders)),g.xp6(1),g.Q6J("ngSwitchCase","application/x-www-form-urlencoded")}}function Yr(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",8)(1,"ul",9)(2,"li",10),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw();return g.KtG(t.activeTab="record")})),g.TgZ(3,"a",11),g._UZ(4,"system-label",12),g.qZA()(),g.TgZ(5,"li",10),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw();return g.KtG(t.activeTab="headers")})),g.TgZ(6,"a",11),g._UZ(7,"system-label",13),g.qZA()(),g.YNc(8,Tr,3,3,"li",14),g.YNc(9,Lr,3,3,"li",14),g.qZA(),g.TgZ(10,"div",15)(11,"table",16)(12,"thead")(13,"tr",17)(14,"th",18)(15,"div",19),g._UZ(16,"system-label",20),g.qZA()(),g.TgZ(17,"th",21)(18,"div",19),g._UZ(19,"system-label",22),g.qZA()()()(),g.TgZ(20,"tbody")(21,"tr")(22,"td"),g._UZ(23,"system-label",23),g.qZA(),g.TgZ(24,"td"),g._uU(25),g.qZA()(),g.TgZ(26,"tr")(27,"td"),g._UZ(28,"system-label",24),g.qZA(),g.TgZ(29,"td"),g._uU(30),g.qZA()(),g.TgZ(31,"tr")(32,"td"),g._UZ(33,"system-label",25),g.qZA(),g.TgZ(34,"td"),g._uU(35),g.qZA()(),g.TgZ(36,"tr")(37,"td"),g._UZ(38,"system-label",26),g.qZA(),g.TgZ(39,"td"),g._UZ(40,"system-display-datetime",27),g.qZA()(),g.TgZ(41,"tr")(42,"td"),g._UZ(43,"system-label",28),g.qZA(),g.TgZ(44,"td"),g._uU(45),g.qZA()(),g.TgZ(46,"tr")(47,"td"),g._UZ(48,"system-label",29),g.qZA(),g.TgZ(49,"td"),g._uU(50),g.qZA()(),g.TgZ(51,"tr")(52,"td"),g._UZ(53,"system-label",30),g.qZA(),g.TgZ(54,"td"),g._uU(55),g.qZA()(),g.TgZ(56,"tr")(57,"td"),g._UZ(58,"system-label",31),g.qZA(),g.TgZ(59,"td"),g._uU(60),g.qZA()(),g.TgZ(61,"tr")(62,"td"),g._UZ(63,"system-label",32),g.qZA(),g.TgZ(64,"td"),g._uU(65),g.qZA()(),g.TgZ(66,"tr")(67,"td"),g._UZ(68,"system-label",33),g.qZA(),g.TgZ(69,"td"),g._uU(70),g.qZA()(),g.TgZ(71,"tr")(72,"td"),g._UZ(73,"system-label",34),g.qZA(),g.TgZ(74,"td",35),g._uU(75),g.qZA()(),g.TgZ(76,"tr")(77,"td"),g._UZ(78,"system-label",36),g.qZA(),g.TgZ(79,"td"),g._uU(80),g.qZA()(),g.TgZ(81,"tr")(82,"td"),g._UZ(83,"system-label",37),g.qZA(),g.TgZ(84,"td"),g._uU(85),g.qZA()()()(),g.YNc(86,qr,14,1,"div",38),g.YNc(87,Nr,14,1,"div",38),g.qZA(),g.TgZ(88,"div",15)(89,"h3",39),g._UZ(90,"system-label",40),g.qZA(),g.TgZ(91,"table",16)(92,"thead")(93,"tr",17)(94,"th",18)(95,"div",19),g._UZ(96,"system-label",20),g.qZA()(),g.TgZ(97,"th",21)(98,"div",19),g._UZ(99,"system-label",22),g.qZA()()()(),g.TgZ(100,"tbody"),g.YNc(101,kr,7,2,"tr",41),g.qZA()(),g.YNc(102,Ur,14,1,"ng-container",42),g.qZA(),g.YNc(103,Qr,4,5,"div",43),g.YNc(104,Fr,4,5,"div",43),g.qZA()}if(2&e){const e=g.oxw();g.xp6(2),g.Q6J("ngClass",g.VKq(25,Ar,"record"==e.activeTab)),g.xp6(3),g.Q6J("ngClass",g.VKq(27,Ar,"headers"==e.activeTab)),g.xp6(3),g.Q6J("ngIf",e.hasRequest),g.xp6(1),g.Q6J("ngIf",e.hasResponse),g.xp6(1),g.Q6J("ngClass",g.VKq(29,Ir,"record"!=e.activeTab)),g.xp6(15),g.Oqu(e.entry.id),g.xp6(5),g.Oqu(e.record.transaction_id),g.xp6(5),g.Oqu(e.record.session_id),g.xp6(5),g.Q6J("date",e.entry.date_entered),g.xp6(5),g.Oqu(e.entry.direction),g.xp6(5),g.Oqu(e.entry.http_status_code),g.xp6(5),g.Oqu(e.entry.method),g.xp6(5),g.Oqu(e.entry.runtime),g.xp6(5),g.Oqu(e.entry.user_name),g.xp6(5),g.Oqu(e.entry.route),g.xp6(5),g.Oqu(e.record.url),g.xp6(5),g.Oqu(e.record.ip),g.xp6(5),g.Oqu(e.record.response_error),g.xp6(1),g.Q6J("ngIf",e.requestArguments.length>0),g.xp6(1),g.Q6J("ngIf",e.requestParams.length>0),g.xp6(1),g.Q6J("ngClass",g.VKq(31,Ir,"headers"!=e.activeTab)),g.xp6(13),g.Q6J("ngForOf",e.requestHeaders),g.xp6(1),g.Q6J("ngIf",e.record.response_headers),g.xp6(1),g.Q6J("ngIf",e.hasRequest),g.xp6(1),g.Q6J("ngIf",e.hasResponse)}}let Rr=(()=>{class APIlogViewerModal{constructor(e,t,s,i){this.language=e,this.backend=t,this.toast=s,this.libloader=i,this.record={},this._requestheaders={},this._responseheaders={},this.isLoading=!0,this.logtable="sysapilog",this.beautifyenabled=!1,this.activeTab="record",this.libloader.loadLib("jsbeautify").subscribe((e=>{this.beautifyenabled=!0}))}ngOnInit(){this.loadFullData()}loadFullData(){this.isLoading=!0,this.backend.getRequest(`admin/apilog/${this.entry.id}`,{logtable:this.logtable}).subscribe({next:e=>{this.isLoading=!1,this.record=e,this.setRequestHeaders(),this.setResponseHeaders()},error:e=>{this.toast.sendToast("Error loading entry of log file!","error","Entry "+this.entry.id+" of REST log couldn´t be fetched.",!1),this.isLoading=!1,this.close()}})}setRequestHeaders(){try{let e=JSON.parse(this.record.request_headers);e&&(this._requestheaders=e)}catch(e){this._requestheaders={}}}setResponseHeaders(){try{let e=JSON.parse(this.record.response_headers);e&&(this._responseheaders=e)}catch(e){this._responseheaders={}}}get requestHeaders(){if(this.record.request_headers)try{let e=[],t=JSON.parse(this.record.request_headers);for(let s in t)e.push({name:s,value:t[s]});return e}catch(e){return[]}return[]}get responseHeaders(){if(this.record.response_headers)try{let e=[],t=JSON.parse(this.record.response_headers);for(let s in t)e.push({name:s,value:t[s]});return e}catch(e){return[]}return[]}get requestArguments(){if(this.record.request_args)try{let e=[],t=JSON.parse(this.record.request_args);for(let s in t)e.push({name:s,value:t[s]});return e}catch(e){return[]}return[]}get requestParams(){if(this.record.request_params)try{let e=[],t=JSON.parse(this.record.request_params);for(let s in t)e.push({name:s,value:t[s]});return e}catch(e){return[]}return[]}get hasRequest(){return this.record.request_body&&"{}"!=this.record.request_body}get hasResponse(){return this.record.response_body&&"{}"!=this.record.response_body}close(){this.self.destroy()}determineContentType(e){let t="application/json";for(let s in e)if("content-type"==s.toLowerCase()){t=(_.isArray(e[s])?e[s][0].toLowerCase().trim():e[s].toLowerCase().trim()).split(";")[0].trim();break}return t}formattedResponse(){return this.getFormattedBody(this.determineContentType(this._responseheaders),this.record.response_body)}formattedRequest(){return this.getFormattedBody(this.determineContentType(this._requestheaders),this.record.request_body)}getFormattedBody(e,t){switch(e){case"application/json":return JSON.stringify(JSON.parse(t),null,"\t");case"application/x-ndjson":let e=[],s=t.split("\n");for(let t of s)t&&e.push(JSON.stringify(JSON.parse(t),null,"\t"));return e.join("\r\n\r\n");case"application/x-www-form-urlencoded":let i=[],n=t.split("&");for(let e of n){let t=e.split("=");i.push({name:t[0],value:decodeURIComponent(t[1].replaceAll("+"," "))})}return i;case"text/xml":case"application/xml":return html_beautify(t,{indent_size:4,indent_char:" ",indent_with_tabs:!1,end_with_newline:!1,indent_level:0,preserve_newlines:!0,max_preserve_newlines:10,space_in_paren:!1,space_in_empty_paren:!1,unindent_chained_methods:!1,break_chained_methods:!1,keep_array_indentation:!1,unescape_strings:!1,wrap_line_length:100,e4x:!1,comma_first:!1,operator_position:"before-newline",indent_empty_lines:!1,templating:["auto"]});default:return t}}formatted(e){try{return JSON.stringify(JSON.parse(this.record[e]),null,"\t")}catch(t){return this.record[e]}}}return APIlogViewerModal.ɵfac=function(e){return new(e||APIlogViewerModal)(g.Y36(f.d),g.Y36(p.y),g.Y36(y.A),g.Y36(xr.$))},APIlogViewerModal.ɵcmp=g.Xpm({type:APIlogViewerModal,selectors:[["ng-component"]],inputs:{entry:"entry"},decls:9,vars:3,consts:[["size","large"],[3,"close"],["system-modal-content-grow","","margin","none"],["class","slds-m-top--medium","style","display:block",4,"ngIf"],["class","slds-tabs_default",4,"ngIf"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CLOSE"],[1,"slds-m-top--medium",2,"display","block"],[1,"slds-tabs_default"],["role","tablist",1,"slds-tabs_default__nav"],[1,"slds-tabs_default__item",3,"ngClass","click"],[1,"slds-tabs_default__link"],["label","LBL_RECORD"],["label","LBL_HEADERS"],["class","slds-tabs_default__item",3,"ngClass","click",4,"ngIf"],[1,"slds-tabs_default__content","slds-show",3,"ngClass"],[1,"slds-table","slds-table_cell-buffer","slds-table_bordered","slds-table--fixed-layout"],[1,"slds-line-height_reset"],["scope","col",1,"slds-size--1-of-4"],[1,"slds-truncate"],["label","LBL_NAME"],["scope","col",1,"slds-size--3-of-4"],["label","LBL_VALUE"],["label","LBL_ID"],["label","LBL_TRANSACTIONID"],["label","LBL_SESSIONID"],["label","LBL_DATE"],[3,"date"],["label","LBL_DIRECTION"],["label","LBL_STATUS"],["label","LBL_METHOD"],["label","LBL_RUNTIME"],["label","LBL_USER"],["label","LBL_ROUTE"],["label","LBL_URL"],[2,"white-space","normal","word-break","break-all"],["label","LBL_IP"],["label","LBL_ERROR"],["class","slds-p-vertical--small",4,"ngIf"],[1,"slds-p-around--x-small"],["label","LBL_REQUEST_HEADERS"],["class","slds-hint-parent",4,"ngFor","ngForOf"],[4,"ngIf"],["class","slds-tabs_default__content slds-show",3,"ngClass",4,"ngIf"],["label","LBL_REQUEST"],["label","LBL_RESPONSE"],[1,"slds-p-vertical--small"],["label","LBL_REQUEST_ARGUMENTS"],[1,"slds-hint-parent"],["label","LBL_REQUEST_PARAMS"],["label","LBL_RESPONSE_HEADERS"],[3,"ngSwitch"],[4,"ngSwitchCase"],["class","slds-m-horizontal--x-small slds-box slds-theme--shade",4,"ngSwitchDefault"],[1,"slds-m-horizontal--x-small","slds-box","slds-theme--shade"],[1,"slds-text-font_monospace",2,"overflow-wrap","break-word","white-space","pre-wrap"]],template:function(e,t){1&e&&(g.TgZ(0,"system-modal",0)(1,"system-modal-header",1),g.NdJ("close",(function(){return t.close()})),g._uU(2),g.qZA(),g.TgZ(3,"system-modal-content",2),g.YNc(4,vr,1,0,"system-spinner",3),g.YNc(5,Yr,105,33,"div",4),g.qZA(),g.TgZ(6,"system-modal-footer")(7,"button",5),g.NdJ("click",(function(){return t.close()})),g._UZ(8,"system-label",6),g.qZA()()()),2&e&&(g.xp6(2),g.Oqu(t.entry.route),g.xp6(2),g.Q6J("ngIf",t.isLoading),g.xp6(1),g.Q6J("ngIf",!t.isLoading))},dependencies:[i.mk,i.sg,i.O5,i.RF,i.n9,i.ED,Rd.a,T._,it.j,nt.x,lt.p,ot.y,Xn.W],encapsulation:2}),APIlogViewerModal})();function Gr(e,t){if(1&e&&(g.TgZ(0,"option",14),g._uU(1),g.qZA()),2&e){const e=t.$implicit;g.Q6J("value",e),g.xp6(1),g.Oqu(e)}}function Hr(e,t){1&e&&(g.TgZ(0,"div",15),g._UZ(1,"system-spinner"),g.qZA())}function Kr(e,t){1&e&&(g.TgZ(0,"div",15),g._UZ(1,"system-label",16),g.qZA())}function zr(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"li",31)(1,"a",32),g.NdJ("click",(function(){const t=g.CHM(e).$implicit,s=g.oxw(2);return g.KtG(s.goDetail(t))})),g._uU(2),g.qZA(),g.TgZ(3,"button",33),g.NdJ("click",(function(){const t=g.CHM(e).$implicit,s=g.oxw(2);return g.KtG(s.remove(t))})),g._UZ(4,"system-button-icon",34),g.qZA()()}if(2&e){const e=t.$implicit;g.xp6(2),g.Oqu(e.name)}}function Vr(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"li",31)(1,"a",32),g.NdJ("click",(function(){const t=g.CHM(e).$implicit,s=g.oxw(2);return g.KtG(s.goDetail(t))})),g._uU(2),g.qZA(),g.TgZ(3,"button",35),g.NdJ("click",(function(){const t=g.CHM(e).$implicit,s=g.oxw(2);return g.KtG(s.remove(t))})),g._UZ(4,"system-button-icon",34),g.qZA()()}if(2&e){const e=t.$implicit;g.xp6(2),g.Oqu(e.name)}}function Pr(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",17)(1,"ul",18)(2,"li",19)(3,"a",20),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw();return g.KtG(t.activeTab="custom")})),g._UZ(4,"system-label",21),g.qZA()(),g.TgZ(5,"li",19)(6,"a",22),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw();return g.KtG(t.activeTab="global")})),g._UZ(7,"system-label",23),g.qZA()()(),g.TgZ(8,"div",24)(9,"ul",25),g.YNc(10,zr,5,1,"li",26),g.qZA(),g.TgZ(11,"div",27)(12,"button",28),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw();return g.KtG(t.add("custom"))})),g._UZ(13,"system-button-icon",29),g.qZA()()(),g.TgZ(14,"div",30)(15,"ul",25),g.YNc(16,Vr,5,1,"li",26),g.qZA(),g.TgZ(17,"div",27)(18,"button",28),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw();return g.KtG(t.add("global"))})),g._UZ(19,"system-button-icon",29),g.qZA()()()()}if(2&e){const e=g.oxw();g.xp6(2),g.ekj("slds-is-active","custom"==e.activeTab),g.Q6J("title",e.language.getLabel("LBL_CUSTOM")),g.xp6(3),g.ekj("slds-is-active","global"==e.activeTab),g.Q6J("title",e.language.getLabel("LBL_GLOBAL")),g.xp6(3),g.Q6J("ngClass","custom"==e.activeTab?"slds-show":"slds-hide"),g.xp6(2),g.Q6J("ngForOf",e.customModulefilters),g.xp6(1),g.ekj("slds-border--top",e.customModulefilters.length>0),g.xp6(3),g.Q6J("ngClass","global"==e.activeTab?"slds-show":"slds-hide"),g.xp6(2),g.Q6J("ngForOf",e.modulefilters),g.xp6(1),g.ekj("slds-border--top",e.modulefilters.length>0)}}let $r=(()=>{class ModuleFilterBuilderFilters{constructor(e,t,s,i,n){this.backend=e,this.language=t,this.metadata=s,this.modelutilities=i,this.session=n,this.loading=!1,this._module="",this.filters=[],this.activeTab="global",this.filter=new g.vpe,this.modules=this.metadata.getModules(),this.modules.sort()}get module(){return this._module}set module(e){e!=this._module&&(this._module=e,this.filter.emit(null),this.loadLists())}get modulefilters(){return this.filters.filter((e=>"global"==e.scope))}get customModulefilters(){return this.filters.filter((e=>"custom"==e.scope))}goDetail(e){this.filter.emit(e)}loadLists(){this.filters=[],this.module&&(this.loading=!0,this.backend.getRequest("configuration/sysmodulefilters/"+this.module).subscribe((e=>{this.filters=e,this.loading=!1})))}add(e){let t={id:this.modelutilities.generateGuid(),module:this.module,filterdefs:null,created_by_id:this.session.authData.userId,name:"new filter",scope:e,package:"",version:""};this.filters.push(t),this.filter.emit(t)}remove(e){this.metadata.removeModuleFilter(e.id),this.backend.deleteRequest("configuration/sysmodulefilters/"+e.module+"/"+e.id),this.filters=this.filters.filter((t=>t.id!=e.id)),this.filter.emit(void 0)}}return ModuleFilterBuilderFilters.ɵfac=function(e){return new(e||ModuleFilterBuilderFilters)(g.Y36(p.y),g.Y36(f.d),g.Y36(h.Pu),g.Y36(b.A),g.Y36(rl.n))},ModuleFilterBuilderFilters.ɵcmp=g.Xpm({type:ModuleFilterBuilderFilters,selectors:[["module-builder-filters"]],outputs:{filter:"filter"},decls:15,vars:5,consts:[[1,"slds-border--right"],[1,"slds-p-around--x-small","slds-border--bottom"],[1,"slds-form-element","slds-grid","slds-grid--vertical-align-center"],["for","moduleselect",1,"slds-form-element__label"],["label","LBL_MODULE"],[1,"slds-form-element__control","slds-col"],[1,"slds-select_container"],["id","moduleselect",1,"slds-select",3,"ngModel","ngModelChange"],["value",""],["label","LBL_SELECT"],[3,"value",4,"ngFor","ngForOf"],["system-to-bottom",""],["class","slds-align--absolute-center slds-height_full",4,"ngIf"],["class","slds-tabs_default","style","background-color: transparent",4,"ngIf"],[3,"value"],[1,"slds-align--absolute-center","slds-height_full"],["label","LBL_MAKE_SELECTION"],[1,"slds-tabs_default",2,"background-color","transparent"],["role","tablist",1,"slds-tabs_default__nav"],["role","presentation",1,"slds-tabs_default__item","slds-text-title--caps",3,"title"],["href","javascript:void(0);","role","tab","tabindex","0","aria-selected","true","aria-controls","tab-custom","id","tab-custom-item",1,"slds-tabs_default__link",3,"click"],["label","LBL_CUSTOM"],["href","javascript:void(0);","role","tab","tabindex","-1","aria-selected","false","aria-controls","tab-global","id","tab-global-item",1,"slds-tabs_default__link",3,"click"],["label","LBL_GLOBAL"],["id","tab-custom","role","tabpanel","aria-labelledby","tab-custom-item",1,"slds-tabs_default__content","slds-p-around--none",3,"ngClass"],[1,"slds-has-dividers_around-space","slds-p-around--x-small"],["class","slds-grid slds-grid--align-spread slds-item",4,"ngFor","ngForOf"],[1,"slds-p-around--x-small"],[1,"slds-align--absolute-center","slds-button","slds-button--icon","slds-button--icon-border",2,"border-radius","50%",3,"click"],["icon","add","size","medium"],["id","tab-global","role","tabpanel","aria-labelledby","tab-global-item",1,"slds-tabs_default__content","slds-p-around--none",3,"ngClass"],[1,"slds-grid","slds-grid--align-spread","slds-item"],["href","javascript:void(0);",1,"slds-text-link_reset",3,"click"],[1,"slds-button","slds-button--icon","slds-col_bump-left",3,"click"],["icon","clear"],[1,"slds-button","slds-button--icon",3,"click"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"label",3),g._UZ(4,"system-label",4),g.qZA(),g.TgZ(5,"div",5)(6,"div",6)(7,"select",7),g.NdJ("ngModelChange",(function(e){return t.module=e})),g.TgZ(8,"option",8),g._UZ(9,"system-label",9),g.qZA(),g.YNc(10,Gr,2,2,"option",10),g.qZA()()()()(),g.TgZ(11,"div",11),g.YNc(12,Hr,2,0,"div",12),g.YNc(13,Kr,2,0,"div",12),g.YNc(14,Pr,20,14,"div",13),g.qZA()()),2&e&&(g.xp6(7),g.Q6J("ngModel",t.module),g.xp6(3),g.Q6J("ngForOf",t.modules),g.xp6(2),g.Q6J("ngIf",t.loading),g.xp6(1),g.Q6J("ngIf",!t.module&&!t.loading),g.xp6(1),g.Q6J("ngIf",t.module&&!t.loading))},dependencies:[i.mk,i.sg,i.O5,n.YN,n.Kr,n.EJ,n.JJ,n.On,A.J,T._,Xn.W,k.H],encapsulation:2}),ModuleFilterBuilderFilters})();var jr=s(3617);function Wr(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div")(1,"div",1)(2,"div",2)(3,"label",3),g._UZ(4,"system-label",4),g.qZA(),g.TgZ(5,"div",5)(6,"div",6)(7,"input",7),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.filter.name=t)})),g.qZA()()()(),g.TgZ(8,"div",2)(9,"label",3),g._UZ(10,"system-label",8),g.qZA(),g.TgZ(11,"div",5)(12,"div",6)(13,"input",7),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.filter.package=t)})),g.qZA()()()(),g.TgZ(14,"div",2)(15,"label",3),g._UZ(16,"system-label",9),g.qZA(),g.TgZ(17,"div",5)(18,"div",6)(19,"input",7),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.filter.version=t)})),g.qZA()()()(),g.TgZ(20,"div",2)(21,"label",3),g._UZ(22,"system-label",10),g.qZA(),g.TgZ(23,"div",5)(24,"div",6)(25,"input",11),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.filter.id=t)})),g.qZA()()()()(),g.TgZ(26,"div",12)(27,"div",13)(28,"h2",14),g._UZ(29,"system-label",15),g.qZA(),g.TgZ(30,"ul"),g._UZ(31,"system-filter-builder-expression-group",16),g.qZA(),g.TgZ(32,"h2",14),g._UZ(33,"system-label",17),g.qZA(),g.TgZ(34,"div",18)(35,"system-input-backend-method",19),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.filter.filtermethod=t)})),g.qZA()(),g.TgZ(36,"div",20)(37,"button",21),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw();return g.KtG(t.save())})),g._UZ(38,"system-label",22),g.qZA()()()()()}if(2&e){const e=g.oxw();g.xp6(7),g.Q6J("ngModel",e.filter.name),g.xp6(6),g.Q6J("ngModel",e.filter.package),g.xp6(6),g.Q6J("ngModel",e.filter.version),g.xp6(6),g.Q6J("ngModel",e.filter.id)("disabled",1),g.xp6(6),g.Q6J("filtergroup",e.primaryGroup)("module",e.filter.module),g.xp6(4),g.Q6J("ngModel",e.filter.filtermethod)}}let Xr=(()=>{class ModuleFilterBuilderFilterDetails{constructor(e,t,s,i){this.backend=e,this.language=t,this.metadata=s,this.toast=i,this.primaryGroup={logicaloperator:"and",groupscope:"all",conditions:[]}}ngOnChanges(){this.filter&&(this.filter.filterdefs?this.primaryGroup="string"==typeof this.filter.filterdefs?JSON.parse(this.filter.filterdefs):this.filter.filterdefs:this.primaryGroup={logicaloperator:"and",conditions:[]})}save(){this.cleangroup(this.primaryGroup),this.filter.filterdefs=this.primaryGroup,this.metadata.setModuleFilter(this.filter.id,this.filter.name,this.filter.module,this.filter.type),this.backend.postRequest("configuration/sysmodulefilters/"+this.filter.module+"/"+this.filter.id,{},this.filter).subscribe((e=>this.toast.sendToast(this.language.getLabel("LBL_DATA_SAVED")+".","success")))}cleangroup(e){for(let t of e.conditions){let s=e.conditions.indexOf(t);!0===t.deleted?e.conditions.splice(s,1):t.conditions&&this.cleangroup(e.conditions[s])}}}return ModuleFilterBuilderFilterDetails.ɵfac=function(e){return new(e||ModuleFilterBuilderFilterDetails)(g.Y36(p.y),g.Y36(f.d),g.Y36(h.Pu),g.Y36(y.A))},ModuleFilterBuilderFilterDetails.ɵcmp=g.Xpm({type:ModuleFilterBuilderFilterDetails,selectors:[["module-builder-filter-details"]],inputs:{filter:"filter"},features:[g.TTD],decls:1,vars:1,consts:[[4,"ngIf"],[1,"slds-p-vertical--x-small","slds-grid","slds-grid--vertical-align-center","slds-border--bottom"],[1,"slds-col","slds-grid","slds-grid--vertical-align-center","slds-size--1-of-4","slds-p-horizontal--x-small"],[1,"slds-form-element__label"],["label","LBL_NAME"],[1,"slds-form-element","slds-col"],[1,"slds-form-element__control"],["type","text",1,"slds-input",3,"ngModel","ngModelChange"],["label","LBL_PACKAGE"],["label","LBL_VERSION"],["label","LBL_ID"],["type","text",1,"slds-input",3,"ngModel","disabled","ngModelChange"],[1,"slds-p-around--x-small"],["system-to-bottom","",1,"slds-expression"],[1,"slds-expression__title"],["label","LBL_CONDITIONS"],[3,"filtergroup","module"],["label","LBL_METHOD"],[1,"slds-p-around--xx-small"],[3,"ngModel","ngModelChange"],[1,"slds-expression__buttons"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_SAVE"]],template:function(e,t){1&e&&g.YNc(0,Wr,39,8,"div",0),2&e&&g.Q6J("ngIf",t.filter)},dependencies:[i.O5,n.Fj,n.JJ,n.On,jr.s,hd.N,T._,k.H],encapsulation:2}),ModuleFilterBuilderFilterDetails})(),ec=(()=>{class ModuleFilterBuilder{}return ModuleFilterBuilder.ɵfac=function(e){return new(e||ModuleFilterBuilder)},ModuleFilterBuilder.ɵcmp=g.Xpm({type:ModuleFilterBuilder,selectors:[["ng-component"]],decls:4,vars:1,consts:[["titlelabel","LBL_FILTERBUILDER"],[1,"slds-grid"],[1,"slds-size--1-of-4",3,"filter"],[1,"slds-size--3-of-4",3,"filter"]],template:function(e,t){1&e&&(g._UZ(0,"workbench-header",0),g.TgZ(1,"div",1)(2,"module-builder-filters",2),g.NdJ("filter",(function(e){return t.filter=e})),g.qZA(),g._UZ(3,"module-builder-filter-details",3),g.qZA()),2&e&&(g.xp6(3),g.Q6J("filter",t.filter))},dependencies:[We,$r,Xr],encapsulation:2}),ModuleFilterBuilder})();function tc(e,t){if(1&e&&(g.TgZ(0,"option",14),g._uU(1),g.qZA()),2&e){const e=t.$implicit;g.Q6J("value",e),g.xp6(1),g.Oqu(e)}}function sc(e,t){1&e&&(g.TgZ(0,"div",15),g._UZ(1,"system-spinner"),g.qZA())}function ic(e,t){1&e&&(g.TgZ(0,"div",15),g._UZ(1,"system-label",16),g.qZA())}function nc(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"li",31)(1,"a",32),g.NdJ("click",(function(){const t=g.CHM(e).$implicit,s=g.oxw(2);return g.KtG(s.goDetail(t))})),g._uU(2),g.qZA(),g.TgZ(3,"button",33),g.NdJ("click",(function(){const t=g.CHM(e).$implicit,s=g.oxw(2);return g.KtG(s.remove(t.id))})),g._UZ(4,"system-button-icon",34),g.qZA()()}if(2&e){const e=t.$implicit;g.xp6(2),g.Oqu(e.name)}}function lc(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"li",31)(1,"a",32),g.NdJ("click",(function(){const t=g.CHM(e).$implicit,s=g.oxw(2);return g.KtG(s.goDetail(t))})),g._uU(2),g.qZA(),g.TgZ(3,"button",35),g.NdJ("click",(function(){const t=g.CHM(e).$implicit,s=g.oxw(2);return g.KtG(s.remove(t.id))})),g._UZ(4,"system-button-icon",34),g.qZA()()}if(2&e){const e=t.$implicit;g.xp6(2),g.Oqu(e.name)}}function oc(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",17)(1,"ul",18)(2,"li",19)(3,"a",20),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw();return g.KtG(t.activeTab="custom")})),g._UZ(4,"system-label",21),g.qZA()(),g.TgZ(5,"li",19)(6,"a",22),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw();return g.KtG(t.activeTab="global")})),g._UZ(7,"system-label",23),g.qZA()()(),g.TgZ(8,"div",24)(9,"ul",25),g.YNc(10,nc,5,1,"li",26),g.qZA(),g.TgZ(11,"div",27)(12,"button",28),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw();return g.KtG(t.add("custom"))})),g._UZ(13,"system-button-icon",29),g.qZA()()(),g.TgZ(14,"div",30)(15,"ul",25),g.YNc(16,lc,5,1,"li",26),g.qZA(),g.TgZ(17,"div",27)(18,"button",28),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw();return g.KtG(t.add("global"))})),g._UZ(19,"system-button-icon",29),g.qZA()()()()}if(2&e){const e=g.oxw();g.xp6(2),g.ekj("slds-is-active","custom"==e.activeTab),g.Q6J("title",e.language.getLabel("LBL_CUSTOM")),g.xp6(3),g.ekj("slds-is-active","global"==e.activeTab),g.Q6J("title",e.language.getLabel("LBL_GLOBAL")),g.xp6(3),g.Q6J("ngClass","custom"==e.activeTab?"slds-show":"slds-hide"),g.xp6(2),g.Q6J("ngForOf",e.customModuleDashlets),g.xp6(1),g.ekj("slds-border--top",e.customModuleDashlets.length>0),g.xp6(3),g.Q6J("ngClass","global"==e.activeTab?"slds-show":"slds-hide"),g.xp6(2),g.Q6J("ngForOf",e.moduleDashlets),g.xp6(1),g.ekj("slds-border--top",e.moduleDashlets.length>0)}}let ac=(()=>{class DashletGeneratorDashlets{constructor(e,t,s,i){this.backend=e,this.language=t,this.metadata=s,this.modelutilities=i,this.loading=!1,this._module="",this.dashlets=[],this.activeTab="global",this.dashlet=new g.vpe,this.modules=this.metadata.getModules(),this.modules.sort()}ngOnInit(){this.loading=!0,this.backend.getRequest("module/Dashboards/dashlets").subscribe((e=>{this.dashlets=e,this.loading=!1}))}get module(){return this._module}set module(e){e!=this._module&&(this._module=e,this.dashlet.emit(null))}get moduleDashlets(){return this.dashlets.filter((e=>e.module==this.module&&"global"==e.type))}get customModuleDashlets(){return this.dashlets.filter((e=>e.module==this.module&&"custom"==e.type))}goDetail(e){this.dashlet.emit(e)}add(e){let t={id:this.modelutilities.generateGuid(),name:"new dashlet",component:"DashboardGenericDashlet",module:this.module,type:e,componentconfig:null,icon:"",description:"",acl_action:"",label:""};this.dashlets.push(t),this.dashlet.emit(t)}remove(e){this.backend.deleteRequest("module/Dashboards/dashlets/"+e),this.dashlets=this.dashlets.filter((t=>t.id!=e)),this.dashlet.emit(void 0)}}return DashletGeneratorDashlets.ɵfac=function(e){return new(e||DashletGeneratorDashlets)(g.Y36(p.y),g.Y36(f.d),g.Y36(h.Pu),g.Y36(b.A))},DashletGeneratorDashlets.ɵcmp=g.Xpm({type:DashletGeneratorDashlets,selectors:[["dashlet-generator-dashlets"]],outputs:{dashlet:"dashlet"},decls:15,vars:5,consts:[[1,"slds-border--right"],[1,"slds-p-around--x-small","slds-border--bottom"],[1,"slds-form-element","slds-grid","slds-grid--vertical-align-center"],["for","moduleselect",1,"slds-form-element__label"],["label","LBL_MODULE"],[1,"slds-form-element__control","slds-col"],[1,"slds-select_container"],["id","moduleselect",1,"slds-select",3,"ngModel","ngModelChange"],["value",""],["label","LBL_SELECT"],[3,"value",4,"ngFor","ngForOf"],["system-to-bottom",""],["class","slds-align--absolute-center slds-height_full",4,"ngIf"],["class","slds-tabs_default","style","background-color: transparent",4,"ngIf"],[3,"value"],[1,"slds-align--absolute-center","slds-height_full"],["label","LBL_MAKE_SELECTION"],[1,"slds-tabs_default",2,"background-color","transparent"],["role","tablist",1,"slds-tabs_default__nav"],["role","presentation",1,"slds-tabs_default__item","slds-text-title--caps",3,"title"],["href","javascript:void(0);","role","tab","tabindex","0","aria-selected","true","aria-controls","tab-custom","id","tab-custom-item",1,"slds-tabs_default__link",3,"click"],["label","LBL_CUSTOM"],["href","javascript:void(0);","role","tab","tabindex","-1","aria-selected","false","aria-controls","tab-global","id","tab-global-item",1,"slds-tabs_default__link",3,"click"],["label","LBL_GLOBAL"],["id","tab-custom","role","tabpanel","aria-labelledby","tab-custom-item",1,"slds-tabs_default__content","slds-p-around--none",3,"ngClass"],[1,"slds-has-dividers_around-space","slds-p-around--x-small"],["class","slds-grid slds-grid--align-spread slds-item",4,"ngFor","ngForOf"],[1,"slds-p-around--x-small"],[1,"slds-align--absolute-center","slds-button","slds-button--icon","slds-button--icon-border",2,"border-radius","50%",3,"click"],["icon","add","size","medium"],["id","tab-global","role","tabpanel","aria-labelledby","tab-global-item",1,"slds-tabs_default__content","slds-p-around--none",3,"ngClass"],[1,"slds-grid","slds-grid--align-spread","slds-item"],["href","javascript:void(0);",1,"slds-text-link_reset",3,"click"],[1,"slds-button","slds-button--icon","slds-col_bump-left",3,"click"],["icon","clear"],[1,"slds-button","slds-button--icon",3,"click"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"label",3),g._UZ(4,"system-label",4),g.qZA(),g.TgZ(5,"div",5)(6,"div",6)(7,"select",7),g.NdJ("ngModelChange",(function(e){return t.module=e})),g.TgZ(8,"option",8),g._UZ(9,"system-label",9),g.qZA(),g.YNc(10,tc,2,2,"option",10),g.qZA()()()()(),g.TgZ(11,"div",11),g.YNc(12,sc,2,0,"div",12),g.YNc(13,ic,2,0,"div",12),g.YNc(14,oc,20,14,"div",13),g.qZA()()),2&e&&(g.xp6(7),g.Q6J("ngModel",t.module),g.xp6(3),g.Q6J("ngForOf",t.modules),g.xp6(2),g.Q6J("ngIf",t.loading),g.xp6(1),g.Q6J("ngIf",!t.module&&!t.loading),g.xp6(1),g.Q6J("ngIf",t.module&&!t.loading))},dependencies:[i.mk,i.sg,i.O5,n.YN,n.Kr,n.EJ,n.JJ,n.On,A.J,T._,Xn.W,k.H],encapsulation:2}),DashletGeneratorDashlets})();function dc(e,t){if(1&e&&(g.TgZ(0,"option",36),g._uU(1),g.qZA()),2&e){const e=t.$implicit;g.Q6J("value",e.id),g.xp6(1),g.Oqu(e.module)}}function rc(e,t){if(1&e&&(g.TgZ(0,"option",36),g._uU(1),g.qZA()),2&e){const e=t.$implicit;g.Q6J("value",e.component),g.xp6(1),g.Oqu(e.component)}}function cc(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div")(1,"div",1)(2,"div",2)(3,"div",3)(4,"label",4),g._UZ(5,"system-label",5),g.qZA(),g.TgZ(6,"div",6)(7,"div",7)(8,"select",8),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.sysModule=t)})),g.YNc(9,dc,2,2,"option",9),g.qZA()()(),g.TgZ(10,"label",10),g._UZ(11,"system-label",11),g.qZA(),g.TgZ(12,"div",6)(13,"div",7)(14,"select",12),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.dashlet.component=t)})),g.YNc(15,rc,2,2,"option",9),g.qZA()()()()()(),g.TgZ(16,"div",13)(17,"div",14)(18,"div",15)(19,"label",4),g._UZ(20,"system-label",16),g.qZA(),g.TgZ(21,"div",17)(22,"input",18),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.dashlet.name=t)})),g.qZA()()(),g.TgZ(23,"div",19)(24,"label",4),g._uU(25,"Label"),g.qZA(),g.TgZ(26,"system-input-label",20),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.dashlet.label=t)})),g.qZA()()(),g.TgZ(27,"div",14)(28,"div",15)(29,"label",4),g._UZ(30,"system-label",21),g.qZA(),g.TgZ(31,"div",17)(32,"input",18),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.dashlet.package=t)})),g.qZA()()(),g.TgZ(33,"div",15)(34,"label",4),g._UZ(35,"system-label",22),g.qZA(),g.TgZ(36,"div",17)(37,"input",18),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.dashlet.version=t)})),g.qZA()()()(),g.TgZ(38,"div",14)(39,"div",15)(40,"label",4),g._UZ(41,"system-label",23),g.qZA(),g.TgZ(42,"div",17)(43,"input",18),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.dashlet.icon=t)})),g.qZA()()(),g.TgZ(44,"div",15)(45,"label",4),g._UZ(46,"system-label",24),g.qZA(),g.TgZ(47,"div",17)(48,"input",18),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.dashlet.acl_action=t)})),g.qZA()()()(),g.TgZ(49,"div",25)(50,"label",4),g._UZ(51,"system-label",26),g.qZA(),g.TgZ(52,"div",27)(53,"textarea",28),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.dashlet.description=t)})),g.qZA()()(),g.TgZ(54,"div",29)(55,"div",30),g._UZ(56,"system-label",31),g.qZA(),g._UZ(57,"workbench-config",32),g.qZA(),g.TgZ(58,"div",33)(59,"button",34),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw();return g.KtG(t.save())})),g._UZ(60,"system-label",35),g.qZA()()()()}if(2&e){const e=g.oxw();g.xp6(8),g.Q6J("ngModel",e.sysModule),g.xp6(1),g.Q6J("ngForOf",e.sysModules),g.xp6(5),g.Q6J("ngModel",e.dashlet.component)("disabled",!e.sysModule),g.xp6(1),g.Q6J("ngForOf",e.components),g.xp6(7),g.Q6J("ngModel",e.dashlet.name),g.xp6(4),g.Q6J("ngModel",e.dashlet.label),g.xp6(6),g.Q6J("ngModel",e.dashlet.package),g.xp6(5),g.Q6J("ngModel",e.dashlet.version),g.xp6(6),g.Q6J("ngModel",e.dashlet.icon),g.xp6(5),g.Q6J("ngModel",e.dashlet.acl_action),g.xp6(5),g.Q6J("ngModel",e.dashlet.description),g.xp6(4),g.Q6J("component",e.dashlet.component)("configValues",e.configValues)}}let gc=(()=>{class DashletGeneratorDashletDetails{constructor(e,t,s,i,n){this.backend=e,this.language=t,this.metadata=s,this.toast=i,this.view=n,this.sysModules=[],this.configValues={},this.view.setEditMode(),this.sysModules=this.metadata.getSystemModules()}get components(){return this.metadata.getSystemComponents(this.sysModule)}ngOnChanges(){if(this.dashlet){let e=this.metadata.getSystemComponents().find((e=>e.component==this.dashlet.component));this.sysModule=e?e.module:void 0,this.configValues=this.dashlet.componentconfig?JSON.parse(this.dashlet.componentconfig):{}}}save(){this.dashlet.componentconfig=JSON.stringify(this.configValues),this.backend.postRequest("module/Dashboards/dashlets/"+this.dashlet.id,{},this.dashlet).subscribe((e=>this.toast.sendToast(this.language.getLabel("LBL_DATA_SAVED")+".","success")))}}return DashletGeneratorDashletDetails.ɵfac=function(e){return new(e||DashletGeneratorDashletDetails)(g.Y36(p.y),g.Y36(f.d),g.Y36(h.Pu),g.Y36(y.A),g.Y36(Hs.e))},DashletGeneratorDashletDetails.ɵcmp=g.Xpm({type:DashletGeneratorDashletDetails,selectors:[["dashlet_generator_dashlet-details"]],inputs:{dashlet:"dashlet"},features:[g._Bn([Hs.e]),g.TTD],decls:1,vars:1,consts:[[4,"ngIf"],[1,"slds-p-around--x-small","slds-border--bottom"],[1,"slds-form-element","slds-size--1-of-3","slds-form-element","slds-size--1-of-3","slds-grid","slds-grid--vertical-align-center"],[1,"slds-grid","slds-grid--vertical-align-center"],[1,"slds-form-element__label"],["label","LBL_MODULE"],[1,"slds-form-element__control","slds-size--1-of-2"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"slds-form-element__label","slds-m-left--small"],["label","LBL_COMPONENT"],[1,"slds-select",3,"ngModel","disabled","ngModelChange"],[1,"slds-p-around--x-small"],[1,"slds-grid","slds-gutters_direct-xx-small"],[1,"slds-form-element","slds-col","slds-size--1-of-2"],["label","LBL_NAME"],[1,"slds-form-element__control"],["type","text",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-form-element","slds-size--1-of-2"],[3,"ngModel","ngModelChange"],["label","LBL_PACKAGE"],["label","LBL_VERSION"],["label","LBL_ICON"],["label","LBL_ACL_ACTION"],[1,"slds-form-element","slds-size--1-of-1"],["label","LBL_DESCRIPTION"],[1,"slds-m-vertical--small","slds-text-title_bold"],[1,"slds-textarea",2,"max-height","400px","min-height","30px",3,"ngModel","ngModelChange"],[1,"slds-size--1-of-1","slds-border--top","slds-border--bottom","slds-form-element","slds-m-top--medium","slds-p-bottom--medium"],[1,"slds-text-title_bold","slds-m-vertical--small"],["label","LBL_CONFIGURATION"],[3,"component","configValues"],[1,"slds-align--absolute-center","slds-p-top--medium"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_SAVE"],[3,"value"]],template:function(e,t){1&e&&g.YNc(0,cc,61,14,"div",0),2&e&&g.Q6J("ngIf",t.dashlet)},dependencies:[i.sg,i.O5,n.YN,n.Kr,n.Fj,n.EJ,n.JJ,n.On,Q.$,T._,Ps],encapsulation:2}),DashletGeneratorDashletDetails})(),uc=(()=>{class DashletGenerator{}return DashletGenerator.ɵfac=function(e){return new(e||DashletGenerator)},DashletGenerator.ɵcmp=g.Xpm({type:DashletGenerator,selectors:[["ng-component"]],decls:4,vars:1,consts:[["titlelabel","LBL_DASHLET_GENERATOR"],[1,"slds-grid"],[1,"slds-size--1-of-4",3,"dashlet"],[1,"slds-size--3-of-4",3,"dashlet"]],template:function(e,t){1&e&&(g._UZ(0,"workbench-header",0),g.TgZ(1,"div",1)(2,"dashlet-generator-dashlets",2),g.NdJ("dashlet",(function(e){return t.dashlet=e})),g.qZA(),g._UZ(3,"dashlet_generator_dashlet-details",3),g.qZA()),2&e&&(g.xp6(3),g.Q6J("dashlet",t.dashlet))},dependencies:[We,ac,gc],encapsulation:2}),DashletGenerator})();function mc(e,t){if(1&e&&(g.ynx(0),g.TgZ(1,"td"),g._uU(2),g.qZA(),g.TgZ(3,"td"),g._uU(4),g.qZA(),g.TgZ(5,"td"),g._uU(6),g.qZA(),g.TgZ(7,"td"),g._uU(8),g.qZA(),g.TgZ(9,"td"),g._uU(10),g.qZA(),g.TgZ(11,"td"),g._uU(12),g.qZA(),g.BQk()),2&e){const e=g.oxw().$implicit;g.xp6(2),g.Oqu(e.route),g.xp6(2),g.Oqu(e.method),g.xp6(2),g.Oqu(e.user_id),g.xp6(2),g.Oqu(e.ip),g.xp6(2),g.Oqu(e.direction),g.xp6(2),g.Oqu(e.logtable)}}function pc(e,t){if(1&e&&(g.TgZ(0,"option"),g._uU(1),g.qZA()),2&e){const e=t.$implicit;g.xp6(1),g.Oqu(e)}}function hc(e,t){if(1&e&&(g.TgZ(0,"option"),g._uU(1),g.qZA()),2&e){const e=t.$implicit;g.xp6(1),g.Oqu(e)}}function fc(e,t){if(1&e){const e=g.EpF();g.ynx(0),g.TgZ(1,"td")(2,"input",23),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw().$implicit;return g.KtG(s.route=t)})),g.qZA()(),g.TgZ(3,"td")(4,"div",24)(5,"div",25)(6,"div",26)(7,"select",27),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw().$implicit;return g.KtG(s.method=t)})),g.TgZ(8,"option"),g._uU(9,"*"),g.qZA(),g.YNc(10,pc,2,1,"option",18),g.qZA()()()()(),g.TgZ(11,"td")(12,"input",23),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw().$implicit;return g.KtG(s.user_id=t)})),g.qZA()(),g.TgZ(13,"td")(14,"input",23),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw().$implicit;return g.KtG(s.ip=t)})),g.qZA()(),g.TgZ(15,"td")(16,"div",24)(17,"div",25)(18,"div",26)(19,"select",27),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw().$implicit;return g.KtG(s.direction=t)})),g.TgZ(20,"option"),g._uU(21,"*"),g.qZA(),g.TgZ(22,"option"),g._uU(23,"O"),g.qZA(),g.TgZ(24,"option"),g._uU(25,"I"),g.qZA()()()()()(),g.TgZ(26,"td")(27,"div",24)(28,"div",25)(29,"div",26)(30,"select",27),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw().$implicit;return g.KtG(s.logtable=t)})),g._UZ(31,"option"),g.YNc(32,hc,2,1,"option",18),g.qZA()()()()(),g.BQk()}if(2&e){const e=g.oxw().$implicit,t=g.oxw();g.xp6(2),g.Q6J("ngModel",e.route),g.xp6(5),g.Q6J("ngModel",e.method),g.xp6(3),g.Q6J("ngForOf",t.methods),g.xp6(2),g.Q6J("ngModel",e.user_id),g.xp6(2),g.Q6J("ngModel",e.ip),g.xp6(5),g.Q6J("ngModel",e.direction),g.xp6(11),g.Q6J("ngModel",e.logtable),g.xp6(2),g.Q6J("ngForOf",t.logtables)}}function bc(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"button",28),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw().$implicit,s=g.oxw();return g.KtG(s.toggleActive(t.id))})),g._UZ(1,"system-utility-icon",29),g.qZA()}if(2&e){const e=g.oxw().$implicit;g.xp6(1),g.Q6J("colorclass",e.is_active?"slds-icon-text-success":"slds-icon-text-light")}}function _c(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"button",28),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw().$implicit;return g.KtG(t.editing=!0)})),g._UZ(1,"system-button-icon",30),g.qZA()}2&e&&(g.xp6(1),g.Q6J("icon","edit")("size","small"))}function Zc(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"button",28),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw().$implicit,s=g.oxw();return g.KtG(s.delete(t.id))})),g._UZ(1,"system-button-icon",30),g.qZA()}2&e&&(g.xp6(1),g.Q6J("icon","delete")("size","small"))}function yc(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"button",28),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw().$implicit,s=g.oxw();return g.KtG(s.save(t))})),g._UZ(1,"system-button-icon",30),g.qZA()}2&e&&(g.xp6(1),g.Q6J("icon","check")("size","small"))}function Mc(e,t){if(1&e&&(g.TgZ(0,"tr"),g.YNc(1,mc,13,6,"ng-container",20),g.YNc(2,fc,33,8,"ng-container",20),g.TgZ(3,"td")(4,"div",21),g.YNc(5,bc,2,1,"button",22),g.YNc(6,_c,2,2,"button",22),g.YNc(7,Zc,2,2,"button",22),g.YNc(8,yc,2,2,"button",22),g.qZA()()()),2&e){const e=t.$implicit;g.xp6(1),g.Q6J("ngIf",!e.editing),g.xp6(1),g.Q6J("ngIf",e.editing),g.xp6(3),g.Q6J("ngIf",!e.editing),g.xp6(1),g.Q6J("ngIf",!e.editing),g.xp6(1),g.Q6J("ngIf",!e.editing),g.xp6(1),g.Q6J("ngIf",e.editing)}}function xc(e,t){1&e&&(g.TgZ(0,"div",31)(1,"system-illustration-no-records"),g._UZ(2,"system-label",32),g.qZA()())}let vc=(()=>{class APIlogConfig{constructor(e,t,s,i){this.backend=e,this.modal=t,this.modelutilities=s,this.toast=i,this.methods=["CONNECT","DELETE","GET","HEAD","OPTIONS","POST","PATCH","PUT","SOAP","TRACE"],this.entries=[],this.logtables=[],this.isLoading=!1,this.loadData()}loadData(){this.isLoading=!0,this.backend.getRequest("admin/apilog/config").subscribe({next:e=>{this.entries=e,this.isLoading=!1},error:()=>{this.isLoading=!1}}),this.backend.getRequest("admin/apilog/logtables").subscribe({next:e=>{this.logtables=e}})}addEntry(){let e=this.modelutilities.generateGuid(),t={route:"*",method:"*",user_id:"*",ip:"*",direction:"*",is_active:0};this.backend.postRequest(`admin/apilog/config/${e}`,{},t).subscribe({next:()=>{t.id=e,t.editing=!0,this.entries.push(t)}})}toggleActive(e){let t=this.entries.find((t=>t.id==e)).is_active;this.backend.putRequest(`admin/apilog/config/${e}/activate/${t?0:1}`).subscribe({next:()=>{this.entries.find((t=>t.id==e)).is_active=!t}})}delete(e){this.backend.deleteRequest(`admin/apilog/config/${e}`).subscribe({next:()=>{this.entries.splice(this.entries.findIndex((t=>t.id==e)),1)}})}save(e){let t={route:e.route,method:e.method,user_id:e.user_id,ip:e.ip,direction:e.direction,logtable:e.logtable,is_active:e.is_active};this.backend.postRequest(`admin/apilog/config/${e.id}`,{},t).subscribe({next:()=>{e.editing=!1}})}}return APIlogConfig.ɵfac=function(e){return new(e||APIlogConfig)(g.Y36(p.y),g.Y36(M.o),g.Y36(b.A),g.Y36(y.A))},APIlogConfig.ɵcmp=g.Xpm({type:APIlogConfig,selectors:[["apilog-config"]],decls:27,vars:4,consts:[["titlelabel","LBL_API_LOG_CONFIGURATION","icon","custom:custom62"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_ADD"],["system-to-bottom-noscroll","",3,"system-overlay-loading-spinner"],["system-to-bottom","",1,"slds-border--top"],[1,"slds-table","slds-table--bordered","slds-table--fixed-layout","slds-no-row-hover","slds-table_header-fixed"],[2,"width","8rem"],["label","LBL_ROUTE",1,"slds-th__action"],[2,"width","4rem"],["label","LBL_METHOD",1,"slds-th__action"],["label","LBL_USER",1,"slds-th__action"],["label","LBL_IP_ADDRESS",1,"slds-th__action"],[2,"width","2rem"],["label","LBL_DIRECTION",1,"slds-th__action"],[2,"width","6rem"],["label","LBL_LOGTABLE",1,"slds-th__action"],["label","LBL_ACTION",1,"slds-th__action"],["tbody",""],[4,"ngFor","ngForOf"],["class","slds-height_full slds-align--absolute-center",4,"ngIf"],[4,"ngIf"],["role","group",1,"slds-button-group","slds-float--right"],["class","slds-button slds-button--icon-border",3,"click",4,"ngIf"],[1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-form-element"],[1,"slds-form-element__control"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],[1,"slds-button","slds-button--icon-border",3,"click"],["icon","light_bulb","size","x-small",3,"colorclass"],[3,"icon","size"],[1,"slds-height_full","slds-align--absolute-center"],["label","LBL_NO_RECORDS_FOUND"]],template:function(e,t){1&e&&(g.TgZ(0,"workbench-header",0)(1,"workbench-header-controls")(2,"button",1),g.NdJ("click",(function(){return t.addEntry()})),g._UZ(3,"system-label",2),g.qZA()()(),g.TgZ(4,"div",3)(5,"div",4)(6,"table",5)(7,"thead")(8,"tr")(9,"th",6),g._UZ(10,"system-label",7),g.qZA(),g.TgZ(11,"th",8),g._UZ(12,"system-label",9),g.qZA(),g.TgZ(13,"th",6),g._UZ(14,"system-label",10),g.qZA(),g.TgZ(15,"th",6),g._UZ(16,"system-label",11),g.qZA(),g.TgZ(17,"th",12),g._UZ(18,"system-label",13),g.qZA(),g.TgZ(19,"th",14),g._UZ(20,"system-label",15),g.qZA(),g.TgZ(21,"th",8),g._UZ(22,"system-label",16),g.qZA()()(),g.TgZ(23,"tbody",null,17),g.YNc(25,Mc,9,6,"tr",18),g.qZA()(),g.YNc(26,xc,3,0,"div",19),g.qZA()()),2&e&&(g.xp6(2),g.Q6J("disabled",t.isLoading),g.xp6(2),g.Q6J("system-overlay-loading-spinner",t.isLoading),g.xp6(21),g.Q6J("ngForOf",t.entries),g.xp6(1),g.Q6J("ngIf",!t.isLoading&&0==t.entries.length))},dependencies:[i.sg,i.O5,n.YN,n.Kr,n.Fj,n.EJ,n.JJ,n.On,A.J,Gd.C,T._,u.r,k.H,C.t,Hi._,We,et],encapsulation:2}),APIlogConfig})();function Ac(e,t){1&e&&(g.TgZ(0,"option",31),g._UZ(1,"system-label",32),g.qZA())}function Tc(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",1)(1,"div",15)(2,"label",3)(3,"abbr",4),g._uU(4,"* "),g.qZA(),g._UZ(5,"system-label",33),g.qZA(),g.TgZ(6,"div",10)(7,"select",34),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.dictionarydefinition.sysdictionary_contenttype=t)})),g.TgZ(8,"option",35),g._uU(9,"config"),g.qZA(),g.TgZ(10,"option",36),g._uU(11,"custom config"),g.qZA()()()()()}if(2&e){const e=g.oxw();g.xp6(7),g.Q6J("ngModel",e.dictionarydefinition.sysdictionary_contenttype)}}let Lc=(()=>{class DictionaryManagerEditDefinitionModal{constructor(e,t,s){this.dictionarymanager=e,this.metadata=t,this.modelutilities=s}close(){this.self.destroy()}save(){this.dictionarymanager.dictionarydefinitions.some((e=>e.id==this.dictionarydefinition.id&&(e.package=this.dictionarydefinition.package,e.version=this.dictionarydefinition.version,e.sysdictionary_contenttype=this.dictionarydefinition.sysdictionary_contenttype,!0))),this.close()}}return DictionaryManagerEditDefinitionModal.ɵfac=function(e){return new(e||DictionaryManagerEditDefinitionModal)(g.Y36(v),g.Y36(h.Pu),g.Y36(b.A))},DictionaryManagerEditDefinitionModal.ɵcmp=g.Xpm({type:DictionaryManagerEditDefinitionModal,selectors:[["ng-component"]],decls:58,vars:13,consts:[[3,"close"],[1,"slds-grid"],[1,"slds-form-element__control","slds-size--1-of-2","slds-p-right--xxx-small"],[1,"slds-form-element__label"],[1,"slds-required"],["label","LBL_NAME"],[3,"ngModel","disabled","ngModelChange"],["label","LBL_TABLE"],[1,"slds-form-element__control","slds-size--1-of-4","slds-p-left--xxx-small"],["label","LBL_SCOPE"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","disabled","ngModelChange"],["value","g",4,"ngIf"],["value","c"],["label","LBL_CUSTOM"],[1,"slds-large-size--1-of-4","slds-p-right--xxx-small","slds-form-element__control"],["label","LBL_TYPE"],["value","module"],["value","metadata"],["value","template"],[1,"slds-size--1-of-4","slds-p-right--xxx-small","slds-form-element__control"],["label","LBL_PACKAGE"],[3,"ngModel","ngModelChange"],[1,"slds-size--1-of-4","slds-p-left--xxx-small","slds-form-element__control"],["label","LBL_VERSION"],["class","slds-grid",4,"ngIf"],["label","LBL_COMMENT"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CLOSE"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_SAVE"],["value","g"],["label","LBL_GLOBAL"],["label","LBL_CONTENT_TYPE"],[1,"slds-select",3,"ngModel","ngModelChange"],["value","config"],["value","custom_config"]],template:function(e,t){1&e&&(g.TgZ(0,"system-modal")(1,"system-modal-header",0),g.NdJ("close",(function(){return t.close()})),g._uU(2,"Add Dictionary Definition"),g.qZA(),g.TgZ(3,"system-modal-content")(4,"div",1)(5,"div",2)(6,"label",3)(7,"abbr",4),g._uU(8,"* "),g.qZA(),g._UZ(9,"system-label",5),g.qZA(),g.TgZ(10,"system-input-text",6),g.NdJ("ngModelChange",(function(e){return t.dictionarydefinition.name=e})),g.qZA()(),g.TgZ(11,"div",2)(12,"label",3),g._UZ(13,"system-label",7),g.qZA(),g.TgZ(14,"system-input-text",6),g.NdJ("ngModelChange",(function(e){return t.dictionarydefinition.tablename=e})),g.qZA()()(),g.TgZ(15,"div",1)(16,"div",8)(17,"label",3)(18,"abbr",4),g._uU(19,"* "),g.qZA(),g._UZ(20,"system-label",9),g.qZA(),g.TgZ(21,"div",10)(22,"select",11),g.NdJ("ngModelChange",(function(e){return t.dictionarydefinition.scope=e})),g.YNc(23,Ac,2,0,"option",12),g.TgZ(24,"option",13),g._UZ(25,"system-label",14),g.qZA()()()(),g.TgZ(26,"div",15)(27,"label",3)(28,"abbr",4),g._uU(29,"* "),g.qZA(),g._UZ(30,"system-label",16),g.qZA(),g.TgZ(31,"div",10)(32,"select",11),g.NdJ("ngModelChange",(function(e){return t.dictionarydefinition.sysdictionary_type=e})),g.TgZ(33,"option",17),g._uU(34,"module"),g.qZA(),g.TgZ(35,"option",18),g._uU(36,"metadata"),g.qZA(),g.TgZ(37,"option",19),g._uU(38,"template"),g.qZA(),g.TgZ(39,"option",19),g._uU(40,"relationship"),g.qZA()()()(),g.TgZ(41,"div",20)(42,"label",3),g._UZ(43,"system-label",21),g.qZA(),g.TgZ(44,"system-input-text",22),g.NdJ("ngModelChange",(function(e){return t.dictionarydefinition.package=e})),g.qZA()(),g.TgZ(45,"div",23)(46,"label",3),g._UZ(47,"system-label",24),g.qZA(),g.TgZ(48,"system-input-text",22),g.NdJ("ngModelChange",(function(e){return t.dictionarydefinition.version=e})),g.qZA()()(),g.YNc(49,Tc,12,1,"div",25),g.TgZ(50,"label",3),g._UZ(51,"system-label",26),g.qZA(),g.TgZ(52,"system-richtext-editor",22),g.NdJ("ngModelChange",(function(e){return t.dictionarydefinition.description=e})),g.qZA()(),g.TgZ(53,"system-modal-footer")(54,"button",27),g.NdJ("click",(function(){return t.close()})),g._UZ(55,"system-label",28),g.qZA(),g.TgZ(56,"button",29),g.NdJ("click",(function(){return t.save()})),g._UZ(57,"system-label",30),g.qZA()()()),2&e&&(g.xp6(10),g.Q6J("ngModel",t.dictionarydefinition.name)("disabled",!0),g.xp6(4),g.Q6J("ngModel",t.dictionarydefinition.tablename)("disabled",!0),g.xp6(8),g.Q6J("ngModel",t.dictionarydefinition.scope)("disabled",!0),g.xp6(1),g.Q6J("ngIf","all"==t.dictionarymanager.changescope),g.xp6(9),g.Q6J("ngModel",t.dictionarydefinition.sysdictionary_type)("disabled",!0),g.xp6(12),g.Q6J("ngModel",t.dictionarydefinition.package),g.xp6(4),g.Q6J("ngModel",t.dictionarydefinition.version),g.xp6(1),g.Q6J("ngIf","metadata"==t.dictionarydefinition.sysdictionary_type),g.xp6(3),g.Q6J("ngModel",t.dictionarydefinition.description))},dependencies:[i.O5,n.YN,n.Kr,n.EJ,n.JJ,n.On,q.Z,T._,it.j,nt.x,lt.p,ot.y,Ds.z],encapsulation:2}),DictionaryManagerEditDefinitionModal})();function Cc(e,t){if(1&e&&(g.TgZ(0,"option",42),g._uU(1),g.qZA()),2&e){const e=t.$implicit;g.Q6J("value",e.id),g.xp6(1),g.hij("",e.module," ")}}function qc(e,t){if(1&e){const e=g.EpF();g.ynx(0),g.TgZ(1,"tr",29)(2,"td",30)(3,"span",31)(4,"div",32)(5,"div",33)(6,"div",34)(7,"select",35),g.NdJ("ngModelChange",(function(t){const s=g.CHM(e).$implicit;return g.KtG(s.module_id=t)}))("change",(function(){g.CHM(e);const t=g.oxw(2);return g.KtG(t.canSaveOnInit=!0)})),g.YNc(8,Cc,2,2,"option",36),g.qZA()()()()()(),g.TgZ(9,"td",30)(10,"span",31)(11,"div",32)(12,"input",37),g.NdJ("ngModelChange",(function(t){const s=g.CHM(e).$implicit;return g.KtG(s.module_field=t)}))("keydown",(function(){g.CHM(e);const t=g.oxw(2);return g.KtG(t.canSaveOnInit=!0)})),g.qZA()()()(),g.TgZ(13,"td",30)(14,"span",31)(15,"div",32)(16,"input",37),g.NdJ("ngModelChange",(function(t){const s=g.CHM(e).$implicit;return g.KtG(s.module_field_c1=t)}))("keydown",(function(){g.CHM(e);const t=g.oxw(2);return g.KtG(t.canSaveOnInit=!0)})),g.qZA()()()(),g.TgZ(17,"td",30)(18,"span",31)(19,"div",32)(20,"input",37),g.NdJ("ngModelChange",(function(t){const s=g.CHM(e).$implicit;return g.KtG(s.module_field_c2=t)}))("keydown",(function(){g.CHM(e);const t=g.oxw(2);return g.KtG(t.canSaveOnInit=!0)})),g.qZA()()()(),g.TgZ(21,"td",30)(22,"span",31)(23,"div",32)(24,"input",37),g.NdJ("ngModelChange",(function(t){const s=g.CHM(e).$implicit;return g.KtG(s.module_field_c3=t)}))("keydown",(function(){g.CHM(e);const t=g.oxw(2);return g.KtG(t.canSaveOnInit=!0)})),g.qZA()()()(),g.TgZ(25,"td",30)(26,"span",31)(27,"div",32)(28,"input",37),g.NdJ("ngModelChange",(function(t){const s=g.CHM(e).$implicit;return g.KtG(s.module_field_c4=t)}))("keydown",(function(){g.CHM(e);const t=g.oxw(2);return g.KtG(t.canSaveOnInit=!0)})),g.qZA()()()(),g.TgZ(29,"td",38)(30,"div",39)(31,"button",40),g.NdJ("click",(function(){const t=g.CHM(e).index,s=g.oxw(2);return g.KtG(s.deleteConfig(t))})),g._UZ(32,"system-button-icon",41),g.qZA()()()(),g.BQk()}if(2&e){const e=t.$implicit,s=g.oxw(2);g.xp6(7),g.Q6J("disabled",s.loading)("ngModel",e.module_id),g.xp6(1),g.Q6J("ngForOf",s.sysModules),g.xp6(4),g.Q6J("disabled",s.loading)("ngModel",e.module_field),g.xp6(4),g.Q6J("disabled",s.loading)("ngModel",e.module_field_c1),g.xp6(4),g.Q6J("disabled",s.loading)("ngModel",e.module_field_c2),g.xp6(4),g.Q6J("disabled",s.loading)("ngModel",e.module_field_c3),g.xp6(4),g.Q6J("disabled",s.loading)("ngModel",e.module_field_c4),g.xp6(3),g.Q6J("disabled",s.loading),g.xp6(1),g.Q6J("icon","delete")}}function Jc(e,t){if(1&e&&(g.TgZ(0,"table",13)(1,"thead")(2,"tr",14)(3,"th",15)(4,"span",16),g._UZ(5,"system-label",17),g.qZA()(),g.TgZ(6,"th",15)(7,"span",18),g._UZ(8,"system-label",19),g.qZA()(),g.TgZ(9,"th",15)(10,"span",20),g._UZ(11,"system-label",21),g.qZA()(),g.TgZ(12,"th",15)(13,"span",22),g._UZ(14,"system-label",23),g.qZA()(),g.TgZ(15,"th",15)(16,"span",24),g._UZ(17,"system-label",25),g.qZA()(),g.TgZ(18,"th",15)(19,"span",26),g._UZ(20,"system-label",27),g.qZA()(),g._UZ(21,"th",15),g.qZA()(),g.TgZ(22,"tbody"),g.YNc(23,qc,33,15,"ng-container",28),g.qZA()()),2&e){const e=g.oxw();g.xp6(23),g.Q6J("ngForOf",e.categoriesInputArray)}}function Nc(e,t){1&e&&g._UZ(0,"system-label",43)}let kc=(()=>{class CategoryTreeManagerLinkModal{constructor(e,t,s){this.backend=e,this.model=t,this.modal=s,this.loading=!1,this.categoriesInputArray=[],this.sysModules=[],this.canSaveOnInit=!1,this.backend.getRequest("system/spiceui/admin/modules").subscribe((e=>{this.sysModules=e}))}ngOnInit(){this.getTreeLinks()}getTreeLinks(){this.loading=!0;let e=this.modal.await("loading...");this.backend.getRequest(`configuration/spiceui/core/categorytrees/${this.activeTreeId}/links`).subscribe({next:t=>{this.categoriesInputArray=t,this.loading=!1,e.emit(!0)},error:()=>{this.loading=!1,e.emit(!0)}})}addConfig(){this.canSaveOnInit=!0,this.categoriesInputArray.push({id:this.categoriesInputArray.length+1,module_id:"",module_field:"",module_field_c1:"",module_field_c2:"",module_field_c3:"",module_field_c4:""})}deleteConfig(e){this.canSaveOnInit=!0,this.categoriesInputArray.splice(e,1)}get canSave(){let e=this.categoriesInputArray.find((e=>""==e.module_id||""==e.module_field));return""==e?.module_id||""==e?.module_field}saveChanges(){let e=this.modal.await("saving..."),t=new RegExp(/^[{]?[0-9a-fA-F]{8}-([0-9a-fA-F]{4}-){3}[0-9a-fA-F]{12}[}]?$/),s=this.categoriesInputArray.map((e=>({id:t.test(e.id)?e.id:this.model.generateGuid(),module_id:e.module_id,module_field:e.module_field,syscategorytree_id:this.activeTreeId,module_field_c1:e.module_field_c1,module_field_c2:e.module_field_c2,module_field_c3:e.module_field_c3,module_field_c4:e.module_field_c4})));this.backend.postRequest(`configuration/spiceui/core/categorytrees/${this.activeTreeId}/links`,{},s).subscribe({next:()=>{e.emit(!0),this.loading=!1,this.close()},error:()=>{e.emit(!0),this.loading=!1}})}close(){this.self.destroy()}}return CategoryTreeManagerLinkModal.ɵfac=function(e){return new(e||CategoryTreeManagerLinkModal)(g.Y36(p.y),g.Y36(kl.o),g.Y36(M.o))},CategoryTreeManagerLinkModal.ɵcmp=g.Xpm({type:CategoryTreeManagerLinkModal,selectors:[["category-tree-manager-link-modal"]],features:[g._Bn([kl.o])],decls:16,vars:4,consts:[[3,"close"],["label","LBL_LINK_TREE_CATEGORIES"],["margin","none"],[1,"slds-table_edit_container","slds-is-relative"],["class","slds-table slds-table_bordered","role","grid","style","width: 100%;",4,"ngIf","ngIfElse"],["notLinkTree",""],[1,"slds-text-align--right","slds-p-vertical--x-small"],["type","button",1,"slds-button","slds-button--brand","slds-float--left",3,"disabled","click"],["label","LBL_ADD"],["type","button",1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],["type","button",1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_SAVE"],["role","grid",1,"slds-table","slds-table_bordered",2,"width","100%"],[1,"slds-line-height_reset"],["scope","col"],["title","Model",1,"slds-truncate"],["label","LBL_MODEL"],["title","module field",1,"slds-truncate"],["label","LBL_MODULE_FIELD"],["title","syscategory 1",1,"slds-truncate"],["label","LBL_SYS_CAT_1"],["title","syscategory 2",1,"slds-truncate"],["label","LBL_SYS_CAT_2"],["title","syscategory 3",1,"slds-truncate"],["label","LBL_SYS_CAT_3"],["title","syscategory 4",1,"slds-truncate"],["label","LBL_SYS_CAT_4"],[4,"ngFor","ngForOf"],[1,"slds-hint-parent"],["role","gridcell",1,"slds-cell-edit",2,"width","16%"],[1,"slds-grid","slds-grid_align-spread"],[1,"slds-form-element__control",2,"width","100%"],[1,"slds-form-element__control",2,"min-width","250px"],[1,"slds-select_container"],[1,"slds-select",3,"disabled","ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],["aria-describedby","error-message","type","text",1,"slds-input",3,"disabled","ngModel","ngModelChange","keydown"],["role","gridcell",1,"slds-cell-edit"],[1,"slds-p-around--small","slds-align--absolute-center","slds-float_right"],["title","delete item",1,"slds-button","slds-button--icon",3,"disabled","click"],[3,"icon"],[3,"value"],["label","LBL_PLEASE_ADD_LINK_TREE_CATEGORIES",1,"slds-align--absolute-center","slds-is-relative","slds-p-around--xx-large"]],template:function(e,t){if(1&e&&(g.TgZ(0,"system-modal")(1,"system-modal-header",0),g.NdJ("close",(function(){return t.close()})),g._UZ(2,"system-label",1),g.qZA(),g.TgZ(3,"system-modal-content",2)(4,"div",3),g.YNc(5,Jc,24,1,"table",4),g.YNc(6,Nc,1,0,"ng-template",null,5,g.W1O),g.qZA()(),g.TgZ(8,"system-modal-footer")(9,"div",6)(10,"button",7),g.NdJ("click",(function(){return t.addConfig()})),g._UZ(11,"system-label",8),g.qZA(),g.TgZ(12,"button",9),g.NdJ("click",(function(){return t.close()})),g._UZ(13,"system-label",10),g.qZA(),g.TgZ(14,"button",11),g.NdJ("click",(function(){return t.saveChanges()})),g._UZ(15,"system-label",12),g.qZA()()()()),2&e){const e=g.MAs(7);g.xp6(5),g.Q6J("ngIf",t.categoriesInputArray.length)("ngIfElse",e),g.xp6(5),g.Q6J("disabled",t.loading),g.xp6(4),g.Q6J("disabled",t.canSave||!t.canSaveOnInit||0==t.categoriesInputArray.length)}},dependencies:[i.sg,i.O5,n.YN,n.Kr,n.Fj,n.EJ,n.JJ,n.On,A.J,T._,it.j,nt.x,lt.p,ot.y],encapsulation:2}),CategoryTreeManagerLinkModal})();var wc=s(3814),Uc=s(6271);function Ec(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"li",20),g._UZ(1,"system-utility-icon",21),g.TgZ(2,"a",22),g.NdJ("click",(function(){const t=g.CHM(e).$implicit,s=g.oxw();return g.KtG(s.handleSelectedItemChange(t.id))})),g._uU(3),g.qZA(),g.TgZ(4,"div",23)(5,"button",24),g.NdJ("click",(function(){const t=g.CHM(e).$implicit,s=g.oxw();return g.KtG(s.editRole(t.id))})),g._UZ(6,"system-button-icon",25),g.qZA(),g.TgZ(7,"button",24),g.NdJ("click",(function(){const t=g.CHM(e).$implicit,s=g.oxw();return g.KtG(s.deleteRole(t.id))})),g._UZ(8,"system-button-icon",26),g.qZA()()()}if(2&e){const e=t.$implicit;g.xp6(1),g.Q6J("icon","global"==e.scope?"world":"people"),g.xp6(2),g.Oqu(e.name)}}function Dc(e,t){if(1&e&&g._UZ(0,"system-utility-icon",41),2&e){const e=g.oxw().$implicit;g.Q6J("icon","global"==e.scope?"world":"people")}}const Oc=function(){return{icon:"people",value:"custom"}},Ic=function(){return{icon:"world",value:"global"}},Qc=function(e,t){return[e,t]};function Sc(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"system-input-radio-button-group",42),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw().$implicit;return g.KtG(s.scope=t)})),g.qZA()}if(2&e){const e=g.oxw().$implicit,t=g.oxw();g.Q6J("disabled",!t.editableRoleScope)("ngModel",e.scope)("inputOptions",g.WLB(5,Qc,g.DdM(3,Oc),g.DdM(4,Ic)))}}function Bc(e,t){if(1&e&&(g.TgZ(0,"div",12),g._uU(1),g.qZA()),2&e){const e=g.oxw().$implicit;g.xp6(1),g.Oqu(e.module)}}function Fc(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"system-input-module",43),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw().$implicit;return g.KtG(s.module=t)})),g.qZA()}if(2&e){const e=g.oxw().$implicit,t=g.oxw();g.Q6J("filterModules",t.filterModules)("ngModel",e.module)}}function Yc(e,t){if(1&e&&(g.TgZ(0,"div",12),g._uU(1),g.qZA()),2&e){const e=g.oxw().$implicit;g.xp6(1),g.Oqu(e.version)}}function Rc(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"input",44),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw().$implicit;return g.KtG(s.version=t)})),g.qZA()}if(2&e){const e=g.oxw().$implicit;g.Q6J("ngModel",e.version)}}function Gc(e,t){if(1&e&&(g.TgZ(0,"div",12),g._uU(1),g.qZA()),2&e){const e=g.oxw().$implicit;g.xp6(1),g.Oqu(e.package)}}function Hc(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"input",44),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw().$implicit;return g.KtG(s.package=t)})),g.qZA()}if(2&e){const e=g.oxw().$implicit;g.Q6J("ngModel",e.package)}}function Kc(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",45)(1,"button",46),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw().$implicit,s=g.MAs(1),i=g.oxw();return g.KtG(i.deleteRoleModule(t,s))})),g._UZ(2,"system-button-icon",26),g.qZA()()}}function zc(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",45)(1,"button",47),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw().index,s=g.MAs(1),i=g.oxw();return g.KtG(i.cancelEditing(s,t))})),g._UZ(2,"system-button-icon",48),g.qZA(),g.TgZ(3,"button",47),g.NdJ("click",(function(){g.CHM(e);const t=g.oxw().$implicit,s=g.MAs(1),i=g.oxw();return g.KtG(i.saveRoleModule(t,s))})),g._UZ(4,"system-button-icon",49),g.qZA()()}}const Vc=function(){return{editable:!0}};function Pc(e,t){if(1&e&&(g.TgZ(0,"tr",27,28)(2,"td",29),g._UZ(3,"system-utility-icon",30),g.YNc(4,Dc,1,1,"system-utility-icon",31),g.TgZ(5,"span",32),g.YNc(6,Sc,1,8,"system-input-radio-button-group",33),g.qZA()(),g.TgZ(7,"td",34),g.YNc(8,Bc,2,1,"div",35),g.YNc(9,Fc,1,2,"system-input-module",36),g.qZA(),g.TgZ(10,"td",34),g.YNc(11,Yc,2,1,"div",35),g.YNc(12,Rc,1,1,"input",37),g.qZA(),g.TgZ(13,"td",34),g.YNc(14,Gc,2,1,"div",35),g.YNc(15,Hc,1,1,"input",37),g.qZA(),g.TgZ(16,"td",38)(17,"div",39),g.YNc(18,Kc,3,0,"div",40),g.YNc(19,zc,5,0,"div",40),g.qZA()()()),2&e){const e=t.$implicit,s=g.MAs(1);g.Q6J("system-view-provider",g.DdM(13,Vc)),g.xp6(3),g.Q6J("icon","rows")("size","x-small"),g.xp6(1),g.Q6J("ngIf","edit"!=s.view.mode||!!e.id),g.xp6(2),g.Q6J("ngIf","edit"==s.view.mode&&!e.id),g.xp6(2),g.Q6J("ngIf","edit"!=s.view.mode),g.xp6(1),g.Q6J("ngIf","edit"==s.view.mode),g.xp6(2),g.Q6J("ngIf","edit"!=s.view.mode),g.xp6(1),g.Q6J("ngIf","edit"==s.view.mode),g.xp6(2),g.Q6J("ngIf","edit"!=s.view.mode),g.xp6(1),g.Q6J("ngIf","edit"==s.view.mode),g.xp6(3),g.Q6J("ngIf","edit"!=s.view.mode),g.xp6(1),g.Q6J("ngIf","edit"==s.view.mode)}}let $c=(()=>{class RoleMenuManager{constructor(e,t,s,i,n){this.backend=e,this.modal=t,this.toast=s,this.cdRef=i,this.injector=n,this.roles=[],this.roleModules=[],this.isLoading=!1,this.filterModules=[],this.roleModulesBackup={}}saveRoleModule(e,t){t.view.setViewMode(),delete this.roleModulesBackup[e.id],e.id||(e.id=this.backend.modelutilities.generateGuid()),e.sysuirole_id=this.selectedRoleId;const s="global"==e.scope?"sysuirolemodules":"sysuicustomrolemodules",i={...e};delete i.scope,this.backend.postRequest(`configuration/configurator/${s}/${e.id}`,null,{config:i}).subscribe({next:()=>{this.toast.sendToast("LBL_DATA_SAVED","success")}})}deleteRoleModule(e,t){t.view.setViewMode();const s="custom"==e.scope?"sysuicustomrolemodules":"sysuirolemodules";this.backend.deleteRequest(`configuration/configurator/${s}/${e.id}`).subscribe((()=>{this.toast.sendToast("MSG_SUCCESSFULLY_DELETED","success")})),this.roleModules=this.roleModules.filter((t=>t.id!=e.id)),this.saveSequence()}addRoleModule(){const e={id:"",sysuirole_id:this.selectedRoleId,module:"",sequence:this.roleModules.length,version:"",package:"",scope:"custom"};this.roleModules.push(e),this.cdRef.detectChanges(),this.viewProviders.last.view.setEditMode()}ngOnInit(){this.loadRoles()}loadRoleModules(e){this.isLoading=!0,this.cdRef.detectChanges(),this.backend.getRequest(`configuration/spiceui/core/rolemodules/${e}`).subscribe({next:e=>{this.isLoading=!1,this.roleModules=e.sort(((e,t)=>e.sequence-t.sequence)),this.filterModules=this.roleModules.map((e=>e.module))}})}handleSelectedItemChange(e){this.loadRoleModules(e),this.editableRoleScope="global"==this.roles.find((t=>t.id==e)).scope,this.selectedRoleId=this.roles.find((t=>t.id==e)).id}startEditing(e,t){this.roleModulesBackup[t.id]={...t},e.view.setEditMode()}cancelEditing(e,t){this.roleModules[t].id?this.roleModules[t]=this.roleModulesBackup[this.roleModules[t].id]:this.roleModules.splice(t,1),e.view.setViewMode()}deleteRole(e){const t=this.roles.find((t=>t.id==e)),s="global"==t.scope?"sysuiroles":"sysuicustomroles";this.backend.deleteRequest(`configuration/configurator/${s}/${t.id}`).subscribe((()=>{this.toast.sendToast("MSG_SUCCESSFULLY_DELETED","success")})),this.roles=this.roles.filter((e=>e.id!=t.id))}editRole(e){const t=this.roles.find((t=>t.id==e));this.openEditRoleModal(t)}openEditRoleModal(e){this.modal.openModal("RoleMenuManagerEditRoleModal").subscribe((t=>{const s=this.roles.indexOf(e);e&&(t.instance.newRole={...e}),t.instance.save$.subscribe({next:t=>{e?this.roles.splice(s,1,t):this.roles.push(t)}})}))}addRole(){this.openEditRoleModal()}loadRoles(){this.isLoading=!0,this.cdRef.detectChanges(),this.backend.getRequest("configuration/spiceui/core/roles").subscribe({next:e=>{this.isLoading=!1,this.roles=e.map((e=>({...e}))),this.handleSelectedItemChange(e[0].id)}})}drop(e){(0,c.bA)(e.container.data,e.previousIndex,e.currentIndex),this.saveSequence()}saveSequence(){this.roleModules.forEach(((e,t)=>{e.sequence=t}));const e=this.roleModules.filter((e=>"global"==e.scope)).map((e=>{const t={...e};return delete t.scope,t}));e.length>0&&this.backend.postRequest("configuration/configurator/sysuirolemodules",null,{config:e});const t=this.roleModules.filter((e=>"custom"==e.scope)).map((e=>{const t={...e};return delete t.scope,t}));t.length>0&&this.backend.postRequest("configuration/configurator/sysuicustomrolemodules",null,{config:t})}}return RoleMenuManager.ɵfac=function(e){return new(e||RoleMenuManager)(g.Y36(p.y),g.Y36(M.o),g.Y36(y.A),g.Y36(g.sBO),g.Y36(g.zs3))},RoleMenuManager.ɵcmp=g.Xpm({type:RoleMenuManager,selectors:[["role-menu-manager"]],viewQuery:function(e,t){if(1&e&&g.Gf(wc.V,5),2&e){let e;g.iGM(e=g.CRH())&&(t.viewProviders=e)}},decls:30,vars:4,consts:[["titlelabel","LBL_ROLE_MENU_MANAGER"],["system-to-bottom-noscroll","",1,"slds-grid",3,"system-overlay-loading-spinner"],[1,"slds-size--1-of-5","slds-scrollable--y","slds-tabs_default__content","slds-p-around--none","slds-border--right"],[1,"slds-has-dividers_around-space","slds-p-around--x-small"],["class","slds-grid slds-grid--align-spread slds-item",4,"ngFor","ngForOf"],[1,"slds-align--absolute-center","slds-border--top","slds-p-around--small",2,"position","sticky","bottom","0"],[1,"slds-align--absolute-center","slds-button","slds-button--icon","slds-button--icon-border",2,"border-radius","50%",3,"click"],["icon","add","size","medium"],[1,"slds-size--4-of-5","slds-scrollable--y"],[1,"slds-table","slds-table--bordered","slds-table--cell-buffer","slds-table--fixed-layout","slds-text-align_center"],[1,"slds-line-height_reset"],["scope","col",1,"slds-text-align_left",2,"width","8rem"],[1,"slds-truncate"],["scope","col",1,"slds-text-align_left"],["label","LBL_MODULE"],["label","LBL_VERSION"],["label","LBL_PACKAGE"],["scope","col",1,"slds-cell_action-mode"],["cdkDropList","",1,"dragboundary",3,"cdkDropListData","cdkDropListDropped"],["class","slds-hint-parent","cdkDrag","","cdkDragBoundary",".dragboundary",3,"system-view-provider",4,"ngFor","ngForOf"],[1,"slds-grid","slds-grid--align-spread","slds-item"],["size","x-small",1,"slds-p-around--xx-small",3,"icon"],["href","javascript:void(0);",1,"slds-text-link_reset","slds-text-align_center","slds-p-around--xx-small",3,"click"],[1,"slds-button","slds-button--icon","slds-col_bump-left"],[1,"slds-button","slds-button--icon",3,"click"],["icon","edit","size","small"],["icon","delete","size","small"],["cdkDrag","","cdkDragBoundary",".dragboundary",1,"slds-hint-parent",3,"system-view-provider"],["viewProvider","system-view-provider"],[1,"slds-text-align_left",2,"width","8rem"],["cdkDragHandle","",1,"slds-p-right--xx-small",2,"cursor","move",3,"icon","size"],["style","width:4.25rem","size","x-small",3,"icon",4,"ngIf"],[1,"slds-form-element__control"],[3,"disabled","ngModel","inputOptions","ngModelChange",4,"ngIf"],[1,"slds-text-align_left"],["class","slds-truncate",4,"ngIf"],[3,"filterModules","ngModel","ngModelChange",4,"ngIf"],["class","slds-input",3,"ngModel","ngModelChange",4,"ngIf"],[1,"slds-text-align_center"],[1,"slds-truncate","slds-cell_action-mode"],["role","group","class","slds-button slds-float--right ng-star-inserted",4,"ngIf"],["size","x-small",2,"width","4.25rem",3,"icon"],[3,"disabled","ngModel","inputOptions","ngModelChange"],[3,"filterModules","ngModel","ngModelChange"],[1,"slds-input",3,"ngModel","ngModelChange"],["role","group",1,"slds-button","slds-float--right","ng-star-inserted"],[1,"slds-button","slds-button--icon","slds-p-around--xx-small",3,"click"],[1,"slds-button","slds-button--icon-border",3,"click"],["icon","close","size","small"],["icon","check","size","small"]],template:function(e,t){1&e&&(g.TgZ(0,"workbench-header",0),g._UZ(1,"workbench-header-controls"),g.qZA(),g.TgZ(2,"div",1)(3,"div",2)(4,"ul",3),g.YNc(5,Ec,9,2,"li",4),g.qZA(),g.TgZ(6,"div",5)(7,"button",6),g.NdJ("click",(function(){return t.addRole()})),g._UZ(8,"system-button-icon",7),g.qZA()()(),g.TgZ(9,"div",8)(10,"table",9)(11,"thead")(12,"tr",10)(13,"th",11),g._UZ(14,"div",12),g.qZA(),g.TgZ(15,"th",13)(16,"div",12),g._UZ(17,"system-label",14),g.qZA()(),g.TgZ(18,"th",13)(19,"div",12),g._UZ(20,"system-label",15),g.qZA()(),g.TgZ(21,"th",13)(22,"div",12),g._UZ(23,"system-label",16),g.qZA()(),g._UZ(24,"th",17),g.qZA()(),g.TgZ(25,"tbody",18),g.NdJ("cdkDropListDropped",(function(e){return t.drop(e)})),g.YNc(26,Pc,20,14,"tr",19),g.qZA()(),g.TgZ(27,"div",5)(28,"button",6),g.NdJ("click",(function(){return t.addRoleModule()})),g._UZ(29,"system-button-icon",7),g.qZA()()()()),2&e&&(g.xp6(2),g.Q6J("system-overlay-loading-spinner",t.isLoading),g.xp6(3),g.Q6J("ngForOf",t.roles),g.xp6(20),g.Q6J("cdkDropListData",t.roleModules),g.xp6(1),g.Q6J("ngForOf",t.roleModules))},dependencies:[i.sg,i.O5,n.Fj,n.JJ,n.On,A.J,gd.a,Uc.p,T._,u.r,C.t,wc.V,Hi._,c.Wj,c.Zt,c.Bh,We,et],encapsulation:2}),RoleMenuManager})(),jc=(()=>{class RoleMenuManagerEditRoleModal{constructor(e,t,s,i,n){this.metadata=e,this.modelutilities=t,this.backend=s,this.toast=i,this.modal=n,this.newRole={id:"",identifier:"",name:"",label:"",icon:"",systemdefault:!1,portaldefault:!1,showsearch:!0,showfavorites:!0,description:"",default_dashboard:"",default_dashboardset:"",version:"",package:"",scope:"custom",scope_icon:"",systemTreeDefs:{}},this.save$=new rn.x,this.radioOptions=[{label:"custom",value:"custom"},{label:"global",value:"global"}]}close(){this.self.destroy()}canSave(){return!!(this.newRole.name&&this.newRole.label&&this.newRole.identifier)}saveRole(){this.newRole.id||(this.newRole.id=this.modelutilities.generateGuid());const e="custom"==this.newRole.scope?"sysuicustomroles":"sysuiroles",t={...this.newRole};delete t.scope,delete t.scope_icon,delete t.systemTreeDefs;let s=this.modal.await("LBL_LOADING");this.backend.postRequest(`configuration/configurator/${e}/${this.newRole.id}`,null,{config:t}).subscribe({next:()=>{this.newRole.scope_icon="custom"==this.newRole.scope?"people":"world",this.save$.next(this.newRole),this.save$.complete(),s.emit(!0),this.toast.sendToast("LBL_DATA_SAVED","success")}}),this.self.destroy()}}return RoleMenuManagerEditRoleModal.ɵfac=function(e){return new(e||RoleMenuManagerEditRoleModal)(g.Y36(h.Pu),g.Y36(b.A),g.Y36(p.y),g.Y36(y.A),g.Y36(M.o))},RoleMenuManagerEditRoleModal.ɵcmp=g.Xpm({type:RoleMenuManagerEditRoleModal,selectors:[["role-menu-manager-edit-role-modal"]],decls:71,vars:21,consts:[[3,"close"],["label","LBL_ROLE"],[1,"slds-form-element__control"],[1,"slds-form-element__label"],["label","LBL_SCOPE"],[3,"ngModel","inputOptions","disabled","ngModelChange"],[1,"slds-grid"],[1,"slds-form-element__control","slds-size--1-of-4","slds-p-right--xxx-small"],[1,"slds-required"],["label","LBL_NAME"],[3,"ngModel","ngModelChange"],["label","LBL_LABEL"],["label","LBL_IDENTIFIER"],["maxlength","3",3,"ngModel","ngModelChange"],["label","LBL_ICON"],[1,"slds-grid","slds-m-top--medium"],[3,"ngModel","asinteger","ngModelChange"],["label","LBL_SYSTEM_DEFAULT"],["label","LBL_PORTAL_DEFAULT"],["label","LBL_SHOW_SEARCH"],["label","LBL_SHOW_FAVORITES"],[1,"slds-form-element__control","slds-size--4-of-4","slds-p-right--xxx-small"],["label","LBL_DESCRIPTION"],[1,"slds-textarea","slds-scrollable--y","slds-m-vertical--xx-small","ng-untouched","ng-pristine","ng-valid",2,"min-height","80px","max-height","300px","height","80px",3,"ngModel","ngModelChange"],["label","LBL_VERSION"],["label","LBL_PACKAGE"],["label","LBL_DEFAULT_DASHBOARD"],["label","LBL_DEFAULT_DASHBOARD_SET"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CLOSE"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_SAVE"]],template:function(e,t){1&e&&(g.TgZ(0,"system-modal")(1,"system-modal-header",0),g.NdJ("close",(function(){return t.close()})),g._UZ(2,"system-label",1),g.qZA(),g.TgZ(3,"system-modal-content")(4,"div",2)(5,"label",3),g._UZ(6,"system-label",4),g.qZA(),g.TgZ(7,"system-input-radio-button-group",5),g.NdJ("ngModelChange",(function(e){return t.newRole.scope=e})),g.qZA()(),g.TgZ(8,"div",6)(9,"div",7)(10,"label",3)(11,"abbr",8),g._uU(12,"* "),g.qZA(),g._UZ(13,"system-label",9),g.qZA(),g.TgZ(14,"system-input-text",10),g.NdJ("ngModelChange",(function(e){return t.newRole.name=e})),g.qZA()(),g.TgZ(15,"div",7)(16,"label",3)(17,"abbr",8),g._uU(18,"* "),g.qZA(),g._UZ(19,"system-label",11),g.qZA(),g.TgZ(20,"system-input-label",10),g.NdJ("ngModelChange",(function(e){return t.newRole.label=e})),g.qZA()()(),g.TgZ(21,"div",6)(22,"div",7)(23,"label",3)(24,"abbr",8),g._uU(25,"* "),g.qZA(),g._UZ(26,"system-label",12),g.qZA(),g.TgZ(27,"system-input-text",13),g.NdJ("ngModelChange",(function(e){return t.newRole.identifier=e})),g.qZA()(),g.TgZ(28,"div",7)(29,"label",3),g._UZ(30,"system-label",14),g.qZA(),g.TgZ(31,"system-input-text",10),g.NdJ("ngModelChange",(function(e){return t.newRole.icon=e})),g.qZA()()(),g.TgZ(32,"div",15)(33,"div",7)(34,"system-checkbox",16),g.NdJ("ngModelChange",(function(e){return t.newRole.systemdefault=e})),g._UZ(35,"system-label",17),g.qZA()(),g.TgZ(36,"div",7)(37,"system-checkbox",16),g.NdJ("ngModelChange",(function(e){return t.newRole.portaldefault=e})),g._UZ(38,"system-label",18),g.qZA()(),g.TgZ(39,"div",7)(40,"system-checkbox",16),g.NdJ("ngModelChange",(function(e){return t.newRole.showsearch=e})),g._UZ(41,"system-label",19),g.qZA()(),g.TgZ(42,"div",7)(43,"system-checkbox",16),g.NdJ("ngModelChange",(function(e){return t.newRole.showfavorites=e})),g._UZ(44,"system-label",20),g.qZA()()(),g.TgZ(45,"div",21)(46,"label",3),g._UZ(47,"system-label",22),g.qZA(),g.TgZ(48,"textarea",23),g.NdJ("ngModelChange",(function(e){return t.newRole.description=e})),g.qZA()(),g.TgZ(49,"div",6)(50,"div",7)(51,"label",3),g._UZ(52,"system-label",24),g.qZA(),g.TgZ(53,"system-input-text",10),g.NdJ("ngModelChange",(function(e){return t.newRole.version=e})),g.qZA()(),g.TgZ(54,"div",7)(55,"label",3),g._UZ(56,"system-label",25),g.qZA(),g.TgZ(57,"system-input-text",10),g.NdJ("ngModelChange",(function(e){return t.newRole.package=e})),g.qZA()(),g.TgZ(58,"div",7)(59,"label",3),g._UZ(60,"system-label",26),g.qZA(),g.TgZ(61,"system-input-text",10),g.NdJ("ngModelChange",(function(e){return t.newRole.default_dashboard=e})),g.qZA()(),g.TgZ(62,"div",7)(63,"label",3),g._UZ(64,"system-label",27),g.qZA(),g.TgZ(65,"system-input-text",10),g.NdJ("ngModelChange",(function(e){return t.newRole.default_dashboardset=e})),g.qZA()()()(),g.TgZ(66,"system-modal-footer")(67,"button",28),g.NdJ("click",(function(){return t.close()})),g._UZ(68,"system-label",29),g.qZA(),g.TgZ(69,"button",30),g.NdJ("click",(function(){return t.saveRole()})),g._UZ(70,"system-label",31),g.qZA()()()),2&e&&(g.xp6(7),g.Q6J("ngModel",t.newRole.scope)("inputOptions",t.radioOptions)("disabled",!!t.newRole.id),g.xp6(7),g.Q6J("ngModel",t.newRole.name),g.xp6(6),g.Q6J("ngModel",t.newRole.label),g.xp6(7),g.Q6J("ngModel",t.newRole.identifier),g.xp6(4),g.Q6J("ngModel",t.newRole.icon),g.xp6(3),g.Q6J("ngModel",t.newRole.systemdefault)("asinteger",!0),g.xp6(3),g.Q6J("ngModel",t.newRole.portaldefault)("asinteger",!0),g.xp6(3),g.Q6J("ngModel",t.newRole.showsearch)("asinteger",!0),g.xp6(3),g.Q6J("ngModel",t.newRole.showfavorites)("asinteger",!0),g.xp6(5),g.Q6J("ngModel",t.newRole.description),g.xp6(5),g.Q6J("ngModel",t.newRole.version),g.xp6(4),g.Q6J("ngModel",t.newRole.package),g.xp6(4),g.Q6J("ngModel",t.newRole.default_dashboard),g.xp6(4),g.Q6J("ngModel",t.newRole.default_dashboardset),g.xp6(4),g.Q6J("disabled",!t.canSave()))},dependencies:[n.Fj,n.JJ,n.nD,n.On,I.U,q.Z,Q.$,Uc.p,T._,it.j,nt.x,lt.p,ot.y],encapsulation:2}),RoleMenuManagerEditRoleModal})();function Wc(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",10)(1,"div",11)(2,"label",12)(3,"abbr",13),g._uU(4,"* "),g.qZA(),g._UZ(5,"system-label",14),g.qZA(),g.TgZ(6,"system-input-password",15),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.loginDetails.token=t)})),g.qZA()()()}if(2&e){const e=g.oxw();g.xp6(6),g.Q6J("ngModel",e.loginDetails.token)}}function Xc(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",10)(1,"div",16)(2,"label",12)(3,"abbr",13),g._uU(4,"* "),g.qZA(),g._UZ(5,"system-label",17),g.qZA(),g.TgZ(6,"system-input-text",15),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.loginDetails.username=t)})),g.qZA()(),g.TgZ(7,"div",16)(8,"label",12)(9,"abbr",13),g._uU(10,"* "),g.qZA(),g._UZ(11,"system-label",18),g.qZA(),g.TgZ(12,"system-input-password",15),g.NdJ("ngModelChange",(function(t){g.CHM(e);const s=g.oxw();return g.KtG(s.loginDetails.password=t)})),g.qZA()()()}if(2&e){const e=g.oxw();g.xp6(6),g.Q6J("ngModel",e.loginDetails.username),g.xp6(6),g.Q6J("ngModel",e.loginDetails.password)}}function eg(e,t){if(1&e&&(g.TgZ(0,"div",19),g._uU(1),g.qZA()),2&e){const e=t.$implicit;g.xp6(1),g.hij("",e," ")}}let tg=(()=>{class GitPullFromRepository{constructor(e,t,s){this.backend=e,this.toast=t,this.modal=s,this.loginFormChosen=[{label:"username",value:"username"},{label:"token",value:"token"}],this.loginDetails={username:"",password:"",token:"",loginOption:"token"},this.passwordCondition=!0,this.tokenCondition=!0,this.usernameCondition=!0,this.emailCondition=!0,this.pwRegexp=new RegExp("(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.{6,})"),this.tokenRegexp=new RegExp("^ghp_[a-zA-Z0-9]{36}$"),this.userRegexp=new RegExp("^[a-zA-Z0-9-]+$"),this.emailRegexp=new RegExp("^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$")}loginCheck(){this.passwordCondition=this.loginDetails.password.length>0&&this.pwRegexp.test(this.loginDetails.password),this.tokenCondition=this.loginDetails.token.length>0&&this.tokenRegexp.test(this.loginDetails.token),this.usernameCondition=this.userRegexp.test(this.loginDetails.username)||this.emailRegexp.test(this.loginDetails.username)}pullFromRepository(e){if(this.loginCheck(),"token"==this.loginDetails.loginOption)if(this.tokenCondition){let t=this.modal.await("LBL_LOADING");delete this.loginDetails.username,delete this.loginDetails.password,delete this.loginDetails.loginOption,this.backend.postRequest("admin/repair/pull",null,e).subscribe((e=>{this.data=e.output,t.emit(!0),this.toast.sendToast("LBL_DATA_SAVED","success")}))}else this.tokenCondition||this.toast.sendToast("token is empty or incorrect","error");else if("username"==this.loginDetails.loginOption)if(this.usernameCondition&&this.passwordCondition){let t=this.modal.await("LBL_LOADING");this.backend.postRequest("admin/repair/pull",null,e).subscribe((e=>{this.data=e.output,t.emit(!0),this.toast.sendToast("LBL_DATA_SAVED","success")}))}else this.usernameCondition||this.passwordCondition?this.usernameCondition?this.passwordCondition||this.toast.sendToast("password is empty or incorrect","error"):this.toast.sendToast("username is empty or incorrect","error"):this.toast.sendToast("username and password is empty or incorrect","error")}}return GitPullFromRepository.ɵfac=function(e){return new(e||GitPullFromRepository)(g.Y36(p.y),g.Y36(y.A),g.Y36(M.o))},GitPullFromRepository.ɵcmp=g.Xpm({type:GitPullFromRepository,selectors:[["git-pull-from-repository"]],decls:13,vars:5,consts:[["titlelabel","LBL_PULL_FROM_GIT_REPOSITORY"],[1,"slds-button","slds-button_brand",3,"click"],["label","LBL_GIT_PULL"],[1,"slds-form-element__control","slds-p-around--small"],[1,"slds-text-heading--small","slds-p-around--small"],[1,"slds-form-element__control","slds-p-left--small"],[3,"ngModel","inputOptions","ngModelChange"],["class","slds-grid slds-grid--vertical-align-center slds-p-around--small",4,"ngIf","ngIfElse"],["username",""],["class","slds-form-element__control slds-p-around--small slds-scrollable--y slds-m-left_small",4,"ngFor","ngForOf"],[1,"slds-grid","slds-grid--vertical-align-center","slds-p-around--small"],[1,"slds-form-element__control","slds-size--2-of-4","slds-p-around--small"],[1,"slds-form-element__label"],[1,"slds-required"],["label","LBL_AUTH_TOKEN"],[3,"ngModel","ngModelChange"],[1,"slds-form-element__control","slds-size--1-of-4","slds-p-around--small"],["label","LBL_USER_NAME"],["label","LBL_PASSWORD"],[1,"slds-form-element__control","slds-p-around--small","slds-scrollable--y","slds-m-left_small"]],template:function(e,t){if(1&e&&(g.TgZ(0,"workbench-header",0)(1,"workbench-header-controls")(2,"button",1),g.NdJ("click",(function(){return t.pullFromRepository(t.loginDetails)})),g._UZ(3,"system-label",2),g.qZA()()(),g.TgZ(4,"div",3)(5,"h3",4),g._uU(6," Login Options "),g.qZA(),g.TgZ(7,"div",5)(8,"system-input-radio-button-group",6),g.NdJ("ngModelChange",(function(e){return t.loginDetails.loginOption=e})),g.qZA()()(),g.YNc(9,Wc,7,1,"div",7),g.YNc(10,Xc,13,2,"ng-template",null,8,g.W1O),g.YNc(12,eg,2,1,"div",9)),2&e){const e=g.MAs(11);g.xp6(8),g.Q6J("ngModel",t.loginDetails.loginOption)("inputOptions",t.loginFormChosen),g.xp6(1),g.Q6J("ngIf","token"==t.loginDetails.loginOption)("ngIfElse",e),g.xp6(3),g.Q6J("ngForOf",t.data)}},dependencies:[i.sg,i.O5,n.JJ,n.On,q.Z,so.Z,Uc.p,T._,We,et],encapsulation:2}),GitPullFromRepository})();function sg(e,t){if(1&e&&(g.TgZ(0,"div",2),g._uU(1),g.qZA()),2&e){const e=t.$implicit;g.xp6(1),g.Oqu(e)}}let ig=(()=>{class GitStatusOfRepository{ngOnInit(){this.gitStatusRepository()}constructor(e,t,s){this.backend=e,this.toast=t,this.modal=s}gitStatusRepository(){let e=this.modal.await("LBL_LOADING");this.backend.postRequest("admin/repair/status",null).subscribe((t=>{this.data=t.output,e.emit(!0)}))}}return GitStatusOfRepository.ɵfac=function(e){return new(e||GitStatusOfRepository)(g.Y36(p.y),g.Y36(y.A),g.Y36(M.o))},GitStatusOfRepository.ɵcmp=g.Xpm({type:GitStatusOfRepository,selectors:[["git-status-of-repository"]],decls:2,vars:1,consts:[["titlelabel","LBL_GIT_STATUS"],["class","slds-form-element__control slds-p-around--medium slds-scrollable--y",4,"ngFor","ngForOf"],[1,"slds-form-element__control","slds-p-around--medium","slds-scrollable--y"]],template:function(e,t){1&e&&(g._UZ(0,"workbench-header",0),g.YNc(1,sg,2,1,"div",1)),2&e&&(g.xp6(1),g.Q6J("ngForOf",t.data))},dependencies:[i.sg,We],encapsulation:2}),GitStatusOfRepository})();function ng(e,t){if(1&e&&(g.TgZ(0,"option",14),g._uU(1),g.qZA()),2&e){const e=t.$implicit;g.Q6J("value",e),g.xp6(1),g.Oqu(e)}}let lg=(()=>{class HooksManager{constructor(e){this.metadata=e,this.activeTab="logic",this._module="*",this.hooksManager=[{label:"Logic Hooks",value:"logic"},{label:"Web Hooks",value:"web"}],this.modules=this.metadata.getModules(),this.modules.sort()}get module(){return this._module}set module(e){e!=this._module&&(this._module=e)}}return HooksManager.ɵfac=function(e){return new(e||HooksManager)(g.Y36(h.Pu))},HooksManager.ɵcmp=g.Xpm({type:HooksManager,selectors:[["hooks-manager"]],decls:16,vars:3,consts:[["titlelabel","LBL_HOOKS_MANAGER"],[1,"slds-form-element__control","slds-grid","slds-p-left--small"],[1,"slds-p-right--small"],[1,"slds-form-element","slds-grid","slds-grid--vertical-align-center","slds-size--4-of-4"],["for","moduleselect",1,"slds-form-element__label"],["label","LBL_MODULE"],[1,"slds-form-element__control"],[1,"slds-select_container"],["id","moduleselect",1,"slds-select",3,"ngModel","ngModelChange"],["value","*"],[3,"value",4,"ngFor","ngForOf"],[1,"slds-tabs_default",2,"background-color","transparent"],[1,"slds-grid",3,"ngClass"],[1,"slds-size--1-of-1"],[3,"value"]],template:function(e,t){1&e&&(g.TgZ(0,"workbench-header",0)(1,"workbench-header-controls")(2,"div",1)(3,"div",2)(4,"div",3)(5,"label",4),g._UZ(6,"system-label",5),g.qZA(),g.TgZ(7,"div",6)(8,"div",7)(9,"select",8),g.NdJ("ngModelChange",(function(e){return t.module=e})),g.TgZ(10,"option",9),g._uU(11,"*"),g.qZA(),g.YNc(12,ng,2,2,"option",10),g.qZA()()()()()()()(),g.TgZ(13,"div",11)(14,"div",12),g._UZ(15,"hooks-manager-hooks",13),g.qZA()()),2&e&&(g.xp6(9),g.Q6J("ngModel",t.module),g.xp6(3),g.Q6J("ngForOf",t.modules),g.xp6(2),g.Q6J("ngClass","logic"==t.activeTab?"slds-show":"slds-hide"))},encapsulation:2}),HooksManager})();function og(e,t){1&e&&(g.TgZ(0,"div",23),g._UZ(1,"system-spinner"),g.qZA())}function ag(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"tr",24)(1,"td",6),g._UZ(2,"system-utility-icon",25),g.TgZ(3,"system-utility-icon",26),g.NdJ("click",(function(t){const s=g.CHM(e).$implicit,i=g.oxw();return g.KtG(i.toggleValue(t,s))})),g.qZA()(),g.TgZ(4,"td",27)(5,"div",7),g._uU(6),g.qZA()(),g.TgZ(7,"td",27)(8,"div",7),g._uU(9),g.qZA()(),g.TgZ(10,"td",28)(11,"div",7),g._uU(12),g.qZA()(),g.TgZ(13,"td",27)(14,"div",29),g._uU(15),g.qZA()(),g.TgZ(16,"td",27)(17,"div",7),g._uU(18),g.qZA()(),g.TgZ(19,"td",30)(20,"button",31),g.NdJ("click",(function(){const t=g.CHM(e).$implicit,s=g.oxw();return g.KtG(s.editHook(t.id))})),g._UZ(21,"system-button-icon",32),g.qZA(),g.TgZ(22,"button",31),g.NdJ("click",(function(){const t=g.CHM(e).$implicit,s=g.oxw();return g.KtG(s.deleteHook(t.id))})),g._UZ(23,"system-button-icon",33),g.qZA()()()}if(2&e){const e=t.$implicit,s=g.oxw();g.xp6(2),g.Q6J("icon","global"==e.type?"world":"people"),g.xp6(1),g.Q6J("colorclass",s.getStatusColor(e)),g.xp6(3),g.Oqu(e.module),g.xp6(3),g.Oqu(e.event),g.xp6(3),g.Oqu(e.hook_index),g.xp6(3),g.Oqu(e.hook_class),g.xp6(3),g.Oqu(e.hook_method)}}let dg=(()=>{class HooksManagerHooks{constructor(e,t,s,i,n,l,o){this.backend=e,this.language=t,this.metadata=s,this.modelutilities=i,this.toast=n,this.modal=l,this.hooksManager=o,this.loading=!1,this.hooks=[]}ngOnInit(){this.getLogicHooks()}getLogicHooks(){this.loading=!0,this.backend.getRequest("configuration/spiceui/core/module/hooks").subscribe((e=>{this.hooks=e,this.loading=!1}))}get allModuleHooks(){return"*"==this.hooksManager._module?this.hooks:this.hooks.filter((e=>e.module==this.hooksManager.module))}deleteHook(e){this.modal.confirm("MSG_DELETE_RECORD","MSG_DELETE_RECORD").subscribe({next:t=>{if(t){const t=this.hooks.find((t=>t.id==e)),s="global"==t.type?"syshooks":"syscustomhooks";this.backend.deleteRequest(`configuration/configurator/${s}/${t.id}`).subscribe((()=>{this.toast.sendToast("MSG_SUCCESSFULLY_DELETED","success")})),this.hooks=this.hooks.filter((e=>e.id!=t.id))}}})}editHook(e){const t=this.hooks.find((t=>t.id==e));this.openEditHookModal(t)}openEditHookModal(e){this.modal.openModal("HooksManagerHooksEditModal").subscribe((t=>{const s=this.hooks.indexOf(e);e&&(t.instance.newLogicHook={...e}),t.instance.save$.subscribe({next:t=>{e?this.hooks.splice(s,1,t):this.hooks.push(t)}})}))}addLogicHook(){this.openEditHookModal()}getStatusColor(e){return 1==e.hook_active?"slds-icon-text-success":0==e.hook_active?"slds-icon-text-light":void 0}toggleValue(e,t){e.stopPropagation();const s=1==t.hook_active?"MSG_DEACTIVATE":"MSG_ACTIVATE",i=1==t.hook_active?"LBL_DEACTIVATED":"LBL_ACTIVATED";this.modal.confirm(s,s).subscribe({next:e=>{if(e){t.hook_active=1==t.hook_active?0:1;const e="global"==t.type?"syshooks":"syscustomhooks",s={...t};delete s.type,this.backend.postRequest(`configuration/configurator/${e}/${t.id}`,null,{config:s}).subscribe({next:()=>{this.toast.sendToast(i,"success")}})}}})}}return HooksManagerHooks.ɵfac=function(e){return new(e||HooksManagerHooks)(g.Y36(p.y),g.Y36(f.d),g.Y36(h.Pu),g.Y36(b.A),g.Y36(y.A),g.Y36(M.o),g.Y36(lg))},HooksManagerHooks.ɵcmp=g.Xpm({type:HooksManagerHooks,selectors:[["hooks-manager-hooks"]],decls:31,vars:2,consts:[["system-to-bottom-noscroll",""],["class","slds-align--absolute-center slds-height_full",4,"ngIf"],[1,"slds-tabs_default",2,"background-color","transparent"],["system-to-bottom","",1,"slds-size--4-of-4","slds-scrollable--y"],[1,"slds-table","slds-table--bordered","slds-table--cell-buffer","slds-table--fixed-layout","slds-text-align_center","slds-table--header-fixed"],[1,""],["scope","col",1,"slds-text-align_left",2,"width","5rem"],[1,"slds-truncate"],["scope","col",1,"slds-text-align_left"],[1,"slds-truncate","slds-m-left--x-small","slds-m-vertical--xx-small"],["label","LBL_MODULE"],[1,"slds-truncate","slds-m-left--x-small"],["label","LBL_EVENT"],["scope","col",1,"slds-text-align_center",2,"width","5rem"],["label","LBL_INDEX"],["scope","col",1,"slds-text-align_left",2,"width","30rem"],["label","LBL_CLASS"],["label","LBL_METHOD"],["scope","col",1,"slds-text-align_right"],["class","slds-hint-parent",4,"ngFor","ngForOf"],[1,"slds-p-around--x-small"],[1,"slds-align--absolute-center","slds-button","slds-button--icon",2,"border-radius","50%",3,"click"],["icon","add","size","medium"],[1,"slds-align--absolute-center","slds-height_full"],[1,"slds-hint-parent"],["size","x-small",1,"slds-p-right--small",3,"icon"],["size","xx-small","icon","light_bulb",1,"slds-p-right--xx-small","slds-button","slds-button--icon","slds-col_bump-left",3,"colorclass","click"],[1,"slds-text-align_left"],[1,"slds-text-align_center",2,"width","5rem"],[1,"slds-wrap"],[1,"slds-text-align_right"],[1,"slds-button","slds-button--icon","slds-col_bump-left","--slds-c-button-color-border",3,"click"],["icon","edit"],["icon","clear"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0),g.YNc(1,og,2,0,"div",1),g.TgZ(2,"div",2)(3,"div",3)(4,"table",4)(5,"thead")(6,"tr",5)(7,"th",6),g._UZ(8,"div",7),g.qZA(),g.TgZ(9,"th",8)(10,"div",9),g._UZ(11,"system-label",10),g.qZA()(),g.TgZ(12,"th",8)(13,"div",11),g._UZ(14,"system-label",12),g.qZA()(),g.TgZ(15,"th",13)(16,"div",7),g._UZ(17,"system-label",14),g.qZA()(),g.TgZ(18,"th",15)(19,"div",11),g._UZ(20,"system-label",16),g.qZA()(),g.TgZ(21,"th",8)(22,"div",11),g._UZ(23,"system-label",17),g.qZA()(),g.TgZ(24,"th",18),g._UZ(25,"div",7),g.qZA()()(),g.TgZ(26,"tbody"),g.YNc(27,ag,24,7,"tr",19),g.qZA()(),g.TgZ(28,"div",20)(29,"button",21),g.NdJ("click",(function(){return t.addLogicHook()})),g._UZ(30,"system-button-icon",22),g.qZA()()()()()),2&e&&(g.xp6(1),g.Q6J("ngIf",t.loading),g.xp6(26),g.Q6J("ngForOf",t.allModuleHooks))},dependencies:[i.sg,i.O5,A.J,T._,Xn.W,u.r,k.H,C.t],encapsulation:2}),HooksManagerHooks})();function rg(e,t){if(1&e&&(g.TgZ(0,"option",28),g._uU(1),g.qZA()),2&e){const e=t.$implicit;g.Q6J("value",e),g.xp6(1),g.Oqu(e)}}let cg=(()=>{class HooksManagerHooksEditModal{constructor(e,t,s,i,n,l){this.backend=e,this.language=t,this.metadata=s,this.modelutilities=i,this.toast=n,this.modal=l,this.hooks=[],this.events=["before_relationship_add","after_relationship_add","before_relationship_delete","after_relationship_delete","before_save","after_save","before_retrieve","after_retrieve","before_delete","after_delete","before_restore","after_restore","after_save_completed","before_logout"],this.classMethod="",this.newLogicHook={id:"",module:"",type:"custom",event:"before_relationship_add",hook_include:"",hook_index:0,hook_class:"",hook_method:"",hook_active:1,description:"",version:"",package:""},this.save$=new rn.x,this.radioOptions=[{label:"custom",value:"custom"},{label:"global",value:"global"}]}ngOnInit(){this.newLogicHook.hook_class&&this.newLogicHook.hook_method&&(this.classMethod=`${this.newLogicHook.hook_class}->${this.newLogicHook.hook_method}`)}close(){this.self.destroy()}canSave(){return!!(this.newLogicHook.module&&this.newLogicHook.event&&this.newLogicHook.package&&this.newLogicHook.version&&this.classMethod)}saveHook(){this.newLogicHook.id||(this.newLogicHook.id=this.modelutilities.generateGuid()),this.newLogicHook.type||(this.newLogicHook.type="custom");const e="custom"==this.newLogicHook.type?"syscustomhooks":"syshooks";if([this.newLogicHook.hook_class,this.newLogicHook.hook_method]=this.classMethod.split("->"),this.newLogicHook.hook_method){const t={...this.newLogicHook};delete t.type;let s=this.modal.await("LBL_LOADING");this.backend.postRequest(`configuration/configurator/${e}/${this.newLogicHook.id}`,null,{config:t}).subscribe({next:()=>{this.save$.next(this.newLogicHook),this.save$.complete(),s.emit(!0),this.toast.sendToast("LBL_DATA_SAVED","success")}}),this.self.destroy()}else this.toast.sendToast("LBL_METHOD_EMPTY","warning")}}return HooksManagerHooksEditModal.ɵfac=function(e){return new(e||HooksManagerHooksEditModal)(g.Y36(p.y),g.Y36(f.d),g.Y36(h.Pu),g.Y36(b.A),g.Y36(y.A),g.Y36(M.o))},HooksManagerHooksEditModal.ɵcmp=g.Xpm({type:HooksManagerHooksEditModal,selectors:[["hooks-manager-hooks-edit-modal"]],decls:62,vars:12,consts:[[3,"close"],["label","LBL_LOGIC_HOOK"],[1,"slds-grid"],[1,"slds-form-element__control","slds-size--1-of-4","slds-p-right--xxx-small"],[1,"slds-form-element__label"],[1,"slds-required"],["label","LBL_SCOPE"],[1,"slds-form-element__control"],[3,"ngModel","inputOptions","disabled","ngModelChange"],["label","LBL_MODULE"],[3,"ngModel","ngModelChange"],["label","LBL_EVENT"],["id","eventselect",1,"slds-select",3,"ngModel","ngModelChange"],["value","select"],[3,"value",4,"ngFor","ngForOf"],["label","LBL_INDEX"],[1,"slds-form-element__control","slds-size--4-of-4"],["label","LBL_CLASS"],[1,"slds-form-element__control","slds-size--4-of-4","slds-p-right--xxx-small"],["label","LBL_DESCRIPTION"],[1,"slds-textarea","slds-scrollable--y","slds-m-vertical--xx-small","ng-untouched","ng-pristine","ng-valid",2,"min-height","80px","max-height","300px","height","80px",3,"ngModel","ngModelChange"],[1,"slds-form-element__control","slds-size--2-of-4","slds-p-right--xxx-small"],["label","LBL_VERSION"],["label","LBL_PACKAGE"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CLOSE"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_SAVE"],[3,"value"]],template:function(e,t){1&e&&(g.TgZ(0,"system-modal")(1,"system-modal-header",0),g.NdJ("close",(function(){return t.close()})),g._UZ(2,"system-label",1),g.qZA(),g.TgZ(3,"system-modal-content")(4,"div",2)(5,"div",3)(6,"label",4)(7,"abbr",5),g._uU(8,"* "),g.qZA(),g._UZ(9,"system-label",6),g.qZA(),g.TgZ(10,"div",7)(11,"system-input-radio-button-group",8),g.NdJ("ngModelChange",(function(e){return t.newLogicHook.type=e})),g.qZA()()(),g.TgZ(12,"div",3)(13,"label",4)(14,"abbr",5),g._uU(15,"* "),g.qZA(),g._UZ(16,"system-label",9),g.qZA(),g.TgZ(17,"system-input-module",10),g.NdJ("ngModelChange",(function(e){return t.newLogicHook.module=e})),g.qZA()(),g.TgZ(18,"div",3)(19,"label",4)(20,"abbr",5),g._uU(21,"* "),g.qZA(),g._UZ(22,"system-label",11),g.qZA(),g.TgZ(23,"select",12),g.NdJ("ngModelChange",(function(e){return t.newLogicHook.event=e})),g.TgZ(24,"option",13),g._uU(25,"select"),g.qZA(),g.YNc(26,rg,2,2,"option",14),g.qZA()(),g.TgZ(27,"div",3)(28,"label",4)(29,"abbr",5),g._uU(30,"* "),g.qZA(),g._UZ(31,"system-label",15),g.qZA(),g.TgZ(32,"system-input-text",10),g.NdJ("ngModelChange",(function(e){return t.newLogicHook.hook_index=e})),g.qZA()()(),g.TgZ(33,"div",2)(34,"div",16)(35,"label",4)(36,"abbr",5),g._uU(37,"* "),g.qZA(),g._UZ(38,"system-label",17),g.qZA(),g.TgZ(39,"system-input-backend-method",10),g.NdJ("ngModelChange",(function(e){return t.classMethod=e})),g.qZA()()(),g.TgZ(40,"div",18)(41,"label",4),g._UZ(42,"system-label",19),g.qZA(),g.TgZ(43,"textarea",20),g.NdJ("ngModelChange",(function(e){return t.newLogicHook.description=e})),g.qZA()(),g.TgZ(44,"div",2)(45,"div",21)(46,"label",4)(47,"abbr",5),g._uU(48,"* "),g.qZA(),g._UZ(49,"system-label",22),g.qZA(),g.TgZ(50,"system-input-text",10),g.NdJ("ngModelChange",(function(e){return t.newLogicHook.version=e})),g.qZA()(),g.TgZ(51,"div",21)(52,"label",4)(53,"abbr",5),g._uU(54,"* "),g.qZA(),g._UZ(55,"system-label",23),g.qZA(),g.TgZ(56,"system-input-text",10),g.NdJ("ngModelChange",(function(e){return t.newLogicHook.package=e})),g.qZA()()()(),g.TgZ(57,"system-modal-footer")(58,"button",24),g.NdJ("click",(function(){return t.close()})),g._UZ(59,"system-label",25),g.qZA(),g.TgZ(60,"button",26),g.NdJ("click",(function(){return t.saveHook()})),g._UZ(61,"system-label",27),g.qZA()()()),2&e&&(g.xp6(11),g.Q6J("ngModel",t.newLogicHook.type)("inputOptions",t.radioOptions)("disabled",!!t.newLogicHook.id),g.xp6(6),g.Q6J("ngModel",t.newLogicHook.module),g.xp6(6),g.Q6J("ngModel",t.newLogicHook.event),g.xp6(3),g.Q6J("ngForOf",t.events),g.xp6(6),g.Q6J("ngModel",t.newLogicHook.hook_index),g.xp6(7),g.Q6J("ngModel",t.classMethod),g.xp6(4),g.Q6J("ngModel",t.newLogicHook.description),g.xp6(7),g.Q6J("ngModel",t.newLogicHook.version),g.xp6(6),g.Q6J("ngModel",t.newLogicHook.package),g.xp6(4),g.Q6J("disabled",!t.canSave()))},dependencies:[i.sg,n.YN,n.Kr,n.Fj,n.EJ,n.JJ,n.On,q.Z,gd.a,Uc.p,hd.N,T._,it.j,nt.x,lt.p,ot.y],encapsulation:2}),HooksManagerHooksEditModal})();var gg=s(6040),ug=s(727);function mg(e,t){1&e&&(g.TgZ(0,"div",21),g._UZ(1,"system-spinner"),g.qZA())}function pg(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"tr",22)(1,"td",23)(2,"system-utility-icon",24),g.NdJ("click",(function(t){const s=g.CHM(e).$implicit,i=g.oxw();return g.KtG(i.toggleValue(t,s))})),g.qZA()(),g.TgZ(3,"td",25)(4,"div",7),g._uU(5),g.qZA()(),g.TgZ(6,"td",25)(7,"div",7),g._uU(8),g.qZA()(),g.TgZ(9,"td",25)(10,"div",7),g._uU(11),g.qZA()(),g.TgZ(12,"td",26),g._UZ(13,"system-checkbox",27),g.qZA(),g.TgZ(14,"td",28)(15,"button",29),g.NdJ("click",(function(){const t=g.CHM(e).$implicit,s=g.oxw();return g.KtG(s.callWebHooks(t))})),g._UZ(16,"system-button-icon",30),g.qZA(),g.TgZ(17,"button",29),g.NdJ("click",(function(){const t=g.CHM(e).$implicit,s=g.oxw();return g.KtG(s.editWebHook(t.id))})),g._UZ(18,"system-button-icon",31),g.qZA(),g.TgZ(19,"button",29),g.NdJ("click",(function(){const t=g.CHM(e).$implicit,s=g.oxw();return g.KtG(s.deleteWebHook(t.id))})),g._UZ(20,"system-button-icon",32),g.qZA(),g.TgZ(21,"button",33),g.NdJ("click",(function(){const t=g.CHM(e).$implicit,s=g.oxw();return g.KtG(s.searchWithModal(t))})),g._UZ(22,"system-button-icon",34),g.qZA()()()}if(2&e){const e=t.$implicit,s=g.oxw();g.xp6(2),g.Q6J("colorclass",s.getStatusColor(e)),g.xp6(3),g.Oqu(e.module),g.xp6(3),g.Oqu(e.event),g.xp6(3),g.Oqu(e.url),g.xp6(2),g.Q6J("ngModel",e.send_data)("asinteger",!0)("disabled",!0)}}let hg=(()=>{class WebHooksManager{constructor(e,t,s,i,n,l,o,a,d){this.backend=e,this.language=t,this.metadata=s,this.modelutilities=i,this.toast=n,this.modal=l,this.hooksManager=o,this.model=a,this.relatedmodels=d,this.loading=!1,this.webHooks=[],this.subscriptions=new ug.w0,this.webhook=new g.vpe}ngOnInit(){this.getWebHooks()}getWebHooks(){this.loading=!0,this.backend.getRequest("configuration/spiceui/core/module/webhooks").subscribe((e=>{this.webHooks=e,this.loading=!1}))}get allWebHooks(){return"*"==this.hooksManager._module?this.webHooks:this.webHooks.filter((e=>e.module==this.hooksManager._module))}deleteWebHook(e){this.modal.confirm("MSG_DELETE_RECORD","MSG_DELETE_RECORD").subscribe({next:t=>{if(t){const t=this.webHooks.find((t=>t.id==e));this.backend.deleteRequest(`configuration/configurator/webhooks/${t.id}`).subscribe((()=>{this.toast.sendToast("MSG_SUCCESSFULLY_DELETED","success")})),this.webHooks=this.webHooks.filter((e=>e.id!=t.id))}}})}editWebHook(e){const t=this.webHooks.find((t=>t.id==e));this.openEditWebHookModal(t)}openEditWebHookModal(e){this.modal.openModal("WebHooksManagerEditModal").subscribe((t=>{const s=this.webHooks.indexOf(e);e&&(t.instance.newWebHook={...e}),t.instance.save$.subscribe({next:t=>{e?this.webHooks.splice(s,1,t):this.webHooks.push(t)}})}))}addWebHook(){this.openEditWebHookModal()}getStatusColor(e){return 1==e.active?"slds-icon-text-success":0==e.active?"slds-icon-text-light":void 0}toggleValue(e,t){e.stopPropagation();const s=1==t.active?"LBL_DEACTIVATE":"LBL_ACTIVATE";this.modal.confirm(s,s).subscribe({next:e=>{if(e){t.active=1==t.active?0:1;const e="syswebhooks";this.backend.postRequest(`configuration/configurator/${e}/${t.id}`,null,{config:t}).subscribe({next:()=>{this.toast.sendToast("LBL_STATUS_CHANGED","success")}})}}})}openResultModal(e){this.webhook.emit(e),this.modal.openModal("WebHooksManagerResultModal").subscribe()}callWebHooks(e){}searchWithModal(e){this.modal.openModal("ObjectModalModuleLookup").subscribe((t=>{t.instance.module=e.module,t.instance.multiselect=!0,t.instance.selectedItems.subscribe((e=>{this.addSelectedItems(e)}))}))}ngOnDestroy(){this.subscriptions.unsubscribe()}addSelectedItems(e){this.relatedmodels.addItems(e)}}return WebHooksManager.ɵfac=function(e){return new(e||WebHooksManager)(g.Y36(p.y),g.Y36(f.d),g.Y36(h.Pu),g.Y36(b.A),g.Y36(y.A),g.Y36(M.o),g.Y36(lg),g.Y36(kl.o),g.Y36(gg.j))},WebHooksManager.ɵcmp=g.Xpm({type:WebHooksManager,selectors:[["web-hooks-manager"]],outputs:{webhook:"webhook"},features:[g._Bn([kl.o,gg.j])],decls:28,vars:2,consts:[["system-to-bottom-noscroll",""],["class","slds-align--absolute-center slds-height_full",4,"ngIf"],[1,"slds-tabs_default",2,"background-color","transparent"],["system-to-bottom","",1,"slds-size--4-of-4","slds-scrollable--y"],[1,"slds-table","slds-table--bordered","slds-table--cell-buffer","slds-table--fixed-layout","slds-text-align_center","slds-table--header-fixed"],[1,"slds-line-height_reset"],["scope","col",1,"slds-text-align_left",2,"width","4.25rem"],[1,"slds-truncate"],["scope","col",1,"slds-text-align_left"],[1,"slds-truncate","slds-m-left--x-small","slds-m-vertical--xx-small"],["label","LBL_MODULE"],[1,"slds-truncate","slds-m-left--x-small"],["label","LBL_EVENT"],["label","LBL_URL"],["scope","col",1,"slds-text-align_center"],["label","LBL_SEND_DATA"],["scope","col",1,"slds-text-align_right"],["class","slds-hint-parent",4,"ngFor","ngForOf"],[1,"slds-p-around--x-small"],[1,"slds-align--absolute-center","slds-button","slds-button--icon",3,"click"],["icon","add","size","medium",2,"border-radius","50%"],[1,"slds-align--absolute-center","slds-height_full"],[1,"slds-hint-parent"],[1,"slds-text-align_left",2,"width","4.25rem"],["size","xx-small","icon","light_bulb",1,"slds-p-right--xx-small","slds-button","slds-button--icon","slds-col_bump-left",3,"colorclass","click"],[1,"slds-text-align_left"],[1,"slds-text-align_center"],[3,"ngModel","asinteger","disabled"],[1,"slds-text-align_right"],[1,"slds-button","slds-button--icon","slds-col_bump-left","--slds-c-button-color-border",3,"click"],["icon","broadcast"],["icon","edit"],["icon","clear"],[1,"slds-button","slds-button_icon","slds-input__icon","slds-input__icon_right",3,"click"],["icon","search"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0),g.YNc(1,mg,2,0,"div",1),g.TgZ(2,"div",2)(3,"div",3)(4,"table",4)(5,"thead")(6,"tr",5)(7,"th",6),g._UZ(8,"div",7),g.qZA(),g.TgZ(9,"th",8)(10,"div",9),g._UZ(11,"system-label",10),g.qZA()(),g.TgZ(12,"th",8)(13,"div",11),g._UZ(14,"system-label",12),g.qZA()(),g.TgZ(15,"th",8)(16,"div",11),g._UZ(17,"system-label",13),g.qZA()(),g.TgZ(18,"th",14)(19,"div",11),g._UZ(20,"system-label",15),g.qZA()(),g.TgZ(21,"th",16),g._UZ(22,"div",11),g.qZA()()(),g.TgZ(23,"tbody"),g.YNc(24,pg,23,7,"tr",17),g.qZA()(),g.TgZ(25,"div",18)(26,"button",19),g.NdJ("click",(function(){return t.addWebHook()})),g._UZ(27,"system-button-icon",20),g.qZA()()()()()),2&e&&(g.xp6(1),g.Q6J("ngIf",t.loading),g.xp6(23),g.Q6J("ngForOf",t.allWebHooks))},dependencies:[i.sg,i.O5,n.JJ,n.On,A.J,I.U,T._,Xn.W,u.r,k.H,C.t],encapsulation:2}),WebHooksManager})();function fg(e,t){if(1&e&&(g.TgZ(0,"option",33),g._uU(1),g.qZA()),2&e){const e=t.$implicit;g.Q6J("value",e),g.xp6(1),g.Oqu(e)}}let bg=(()=>{class WebHooksManagerEditModal{constructor(e,t,s,i,n,l){this.backend=e,this.language=t,this.metadata=s,this.modelutilities=i,this.toast=n,this.modal=l,this.hooks=[],this.events=["create","update","delete"],this.urlCondition=!0,this.urlRegexp=new RegExp("(https?:\\/\\/(www\\.)?[-a-zA-Z0-9@:%._\\+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b([-a-zA-Z0-9()@:%_\\+.~#?&//=]*))"),this.newWebHook={id:"",module:"",event:"create",url:"",active:1,send_data:!1,modulefilter_id:"",fieldset_id:"",ssl_verifypeer:!0,ssl_verifyhost:!0,custom_headers:""},this.save$=new rn.x}close(){this.self.destroy()}canSave(){return this.urlCondition=this.newWebHook.url.length>0&&this.urlRegexp.test(this.newWebHook.url),!!(this.newWebHook.module&&this.newWebHook.event&&this.newWebHook.url&&this.urlCondition)}saveHook(){this.newWebHook.id||(this.newWebHook.id=this.modelutilities.generateGuid());let e=this.modal.await("LBL_LOADING");this.backend.postRequest(`configuration/configurator/syswebhooks/${this.newWebHook.id}`,null,{config:this.newWebHook}).subscribe({next:()=>{this.save$.next(this.newWebHook),this.save$.complete(),e.emit(!0),this.toast.sendToast("LBL_DATA_SAVED","success")}}),this.self.destroy()}callWebHooks(){this.backend.postRequest("system/webhook",null,this.newWebHook).subscribe((e=>{this.data=e.output,this.toast.sendToast("LBL_DATA_SAVED","success")}))}}return WebHooksManagerEditModal.ɵfac=function(e){return new(e||WebHooksManagerEditModal)(g.Y36(p.y),g.Y36(f.d),g.Y36(h.Pu),g.Y36(b.A),g.Y36(y.A),g.Y36(M.o))},WebHooksManagerEditModal.ɵcmp=g.Xpm({type:WebHooksManagerEditModal,selectors:[["web-hooks-manager-edit-modal"]],decls:56,vars:15,consts:[[3,"close"],["label","LBL_WEB_HOOK"],[1,"slds-grid"],[1,"slds-form-element__control","slds-size--1-of-4","slds-p-right--xxx-small"],[1,"slds-form-element__label"],[1,"slds-required"],["label","LBL_MODULE"],[3,"ngModel","ngModelChange"],["label","LBL_EVENT"],["id","eventselect",1,"slds-select",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"slds-form-element__control","slds-size--2-of-4","slds-p-right--xxx-small"],["label","LBL_URL"],["label","LBL_MODULE_FILTER"],[1,"slds-grow",3,"ngModel","ngModelChange"],[1,"slds-form-element__label","slds-p-bottom--xxx-small"],["label","LBL_FIELDSET"],[1,"slds-grid","slds-m-top--x-small"],[1,"slds-form-element__control","slds-size--1-of-4"],[3,"ngModel","asinteger","ngModelChange"],["label","LBL_SEND_DATA"],["label","LBL_VERIFY_PEER"],["label","LBL_VERIFY_HOST"],[1,"slds-form-element__control","slds-size--4-of-4","slds-p-right--xxx-small"],["label","LBL_DATA"],[1,"slds-textarea","slds-scrollable--y","slds-m-vertical--xx-small","ng-untouched","ng-pristine","ng-valid",2,"min-height","80px","max-height","300px","height","80px",3,"ngModel","ngModelChange"],[1,"slds-button","slds-button--neutral",3,"disabled","click"],["icon","broadcast",1,"slds-m-right--small"],["label","LBL_TEST"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CLOSE"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_SAVE"],[3,"value"]],template:function(e,t){1&e&&(g.TgZ(0,"system-modal")(1,"system-modal-header",0),g.NdJ("close",(function(){return t.close()})),g._UZ(2,"system-label",1),g.qZA(),g.TgZ(3,"system-modal-content")(4,"div",2)(5,"div",3)(6,"label",4)(7,"abbr",5),g._uU(8,"* "),g.qZA(),g._UZ(9,"system-label",6),g.qZA(),g.TgZ(10,"system-input-module",7),g.NdJ("ngModelChange",(function(e){return t.newWebHook.module=e})),g.qZA()(),g.TgZ(11,"div",3)(12,"label",4)(13,"abbr",5),g._uU(14,"* "),g.qZA(),g._UZ(15,"system-label",8),g.qZA(),g.TgZ(16,"select",9),g.NdJ("ngModelChange",(function(e){return t.newWebHook.event=e})),g.YNc(17,fg,2,2,"option",10),g.qZA()(),g.TgZ(18,"div",11)(19,"label",4)(20,"abbr",5),g._uU(21,"* "),g.qZA(),g._UZ(22,"system-label",12),g.qZA(),g.TgZ(23,"system-input-text",7),g.NdJ("ngModelChange",(function(e){return t.newWebHook.url=e})),g.qZA()()(),g.TgZ(24,"div",2)(25,"div",11)(26,"label",4),g._UZ(27,"system-label",13),g.qZA(),g.TgZ(28,"system-input-module-filter",14),g.NdJ("ngModelChange",(function(e){return t.newWebHook.modulefilter_id=e})),g.qZA()(),g.TgZ(29,"div",11)(30,"label",15),g._UZ(31,"system-label",16),g.qZA(),g.TgZ(32,"system-input-fieldset",14),g.NdJ("ngModelChange",(function(e){return t.newWebHook.fieldset_id=e})),g.qZA()()(),g.TgZ(33,"div",17)(34,"div",18)(35,"system-checkbox",19),g.NdJ("ngModelChange",(function(e){return t.newWebHook.send_data=e})),g._UZ(36,"system-label",20),g.qZA()(),g.TgZ(37,"div",18)(38,"system-checkbox",19),g.NdJ("ngModelChange",(function(e){return t.newWebHook.ssl_verifypeer=e})),g._UZ(39,"system-label",21),g.qZA()(),g.TgZ(40,"div",18)(41,"system-checkbox",19),g.NdJ("ngModelChange",(function(e){return t.newWebHook.ssl_verifyhost=e})),g._UZ(42,"system-label",22),g.qZA()()(),g.TgZ(43,"div",2)(44,"div",23)(45,"label",4),g._UZ(46,"system-label",24),g.qZA(),g.TgZ(47,"textarea",25),g.NdJ("ngModelChange",(function(e){return t.newWebHook.custom_headers=e})),g.qZA()()()(),g.TgZ(48,"system-modal-footer")(49,"button",26),g.NdJ("click",(function(){return t.callWebHooks()})),g._UZ(50,"system-button-icon",27)(51,"system-label",28),g.qZA(),g.TgZ(52,"button",29),g.NdJ("click",(function(){return t.close()})),g._UZ(53,"system-label",30),g.qZA(),g.TgZ(54,"button",31),g.NdJ("click",(function(){return t.saveHook()})),g._UZ(55,"system-label",32),g.qZA()()()),2&e&&(g.xp6(10),g.Q6J("ngModel",t.newWebHook.module),g.xp6(6),g.Q6J("ngModel",t.newWebHook.event),g.xp6(1),g.Q6J("ngForOf",t.events),g.xp6(6),g.Q6J("ngModel",t.newWebHook.url),g.xp6(5),g.Q6J("ngModel",t.newWebHook.modulefilter_id),g.xp6(4),g.Q6J("ngModel",t.newWebHook.fieldset_id),g.xp6(3),g.Q6J("ngModel",t.newWebHook.send_data)("asinteger",!0),g.xp6(3),g.Q6J("ngModel",t.newWebHook.ssl_verifypeer)("asinteger",!0),g.xp6(3),g.Q6J("ngModel",t.newWebHook.ssl_verifyhost)("asinteger",!0),g.xp6(6),g.Q6J("ngModel",t.newWebHook.custom_headers),g.xp6(2),g.Q6J("disabled",!t.canSave()),g.xp6(5),g.Q6J("disabled",!t.canSave()))},dependencies:[i.sg,n.YN,n.Kr,n.Fj,n.EJ,n.JJ,n.On,A.J,I.U,q.Z,mi.a,gd.a,nd.l,T._,it.j,nt.x,lt.p,ot.y],encapsulation:2}),WebHooksManagerEditModal})(),_g=(()=>{class WebHooksManagerResultModal{constructor(e,t,s,i,n){this.backend=e,this.language=t,this.metadata=s,this.modelutilities=i,this.toast=n}close(){this.self.destroy()}callWebHooks(e){this.backend.postRequest("system/webhook",null,e).subscribe((e=>{this.data=e.result}))}}return WebHooksManagerResultModal.ɵfac=function(e){return new(e||WebHooksManagerResultModal)(g.Y36(p.y),g.Y36(f.d),g.Y36(h.Pu),g.Y36(b.A),g.Y36(y.A))},WebHooksManagerResultModal.ɵcmp=g.Xpm({type:WebHooksManagerResultModal,selectors:[["web-hooks-manager-result-modal"]],inputs:{webhook:"webhook"},decls:10,vars:1,consts:[[3,"close"],["label","LBL_WEB_HOOK"],[3,"click"]],template:function(e,t){1&e&&(g.TgZ(0,"system-modal")(1,"system-modal-header",0),g.NdJ("close",(function(){return t.close()})),g._UZ(2,"system-label",1),g.qZA(),g.TgZ(3,"system-modal-content")(4,"div")(5,"button",2),g.NdJ("click",(function(){return t.callWebHooks(t.webhook)})),g._uU(6,"TEST"),g.qZA()(),g.TgZ(7,"div"),g._uU(8),g.qZA()(),g._UZ(9,"system-modal-footer"),g.qZA()),2&e&&(g.xp6(8),g.Oqu(t.data))},dependencies:[T._,it.j,nt.x,lt.p,ot.y],encapsulation:2}),WebHooksManagerResultModal})(),Zg=(()=>{class WorkbenchModule{}return WorkbenchModule.ɵfac=function(e){return new(e||WorkbenchModule)},WorkbenchModule.ɵmod=g.oAB({type:WorkbenchModule}),WorkbenchModule.ɵinj=g.cJS({imports:[i.ez,n.u5,l.SystemComponents,o.o,a.ObjectFields,d.ObjectComponents,r.GlobalComponents,c._t]}),WorkbenchModule})();("undefined"==typeof ngJitMode||ngJitMode)&&g.kYT(Zg,{declarations:[en,on,kc,dn,Es,ps,Zs,Us,xs,qs,Is,Bs,Ys,Rs,Gs,st,O,Ve,W,G,m,ut,Yt,Lc,Wt,Ae,be,ts,ss,te,is,de,ns,ge,Qe,rs,Ne,He,ui,zs,ei,Zi,Mi,sd,Fi,qi,Gi,vn,cn,We,et,Ga,md,id,ld,cd,ud,ad,dd,pd,fd,Cn,Jn,jn,Dn,Sn,Wn,al,Al,Jl,Dl,Hl,Jl,po,Vl,eo,Mo,_o,to,io,no,lo,oo,ao,ro,co,mo,uo,To,Tl,wo,Ho,Ko,Fa,Xa,Ps,sa,na,ra,Cd,Ld,qd,Sd,Dd,dr,ar,ur,mr,vc,Mr,Rr,vc,ec,$r,Xr,uc,ac,gc,wa,$c,jc,tg,ig,lg,dg,cg,hg,bg,_g],imports:[i.ez,n.u5,l.SystemComponents,o.o,a.ObjectFields,d.ObjectComponents,r.GlobalComponents,c._t],exports:[Tl]}),g.B6R(Dn,[i.sg,n.YN,n.Kr,n.Fj,n.EJ,n.JJ,n.On,A.J,T._],[Wn]),g.B6R(Sn,[i.sg,n.YN,n.Kr,n.Fj,n.wV,n.EJ,n.JJ,n.qQ,n.Fd,n.On,A.J,T._],[Wn]),g.B6R(lg,[i.mk,i.sg,n.YN,n.Kr,n.EJ,n.JJ,n.On,T._,We,et,dg],[])}}]);