/*!
 * 
 *                     aacService
 *
 *                     release: 2023.02.001
 *
 *                     date: 2023-08-15 08:39:15
 *
 *                     build: 2023.02.001.1692081555935
 *
 */
"use strict";(self.webpackChunkcore=self.webpackChunkcore||[]).push([["default-src_workbench_workbench_module_ts"],{3385:(e,t,i)=>{i.d(t,{R:()=>c});var s=i(1180),n=i(2242),l=i(4755),o=i(2656),a=i(3463);function d(e,t){if(1&e&&(n.TgZ(0,"div",9)(1,"div",10),n._uU(2),n.qZA()()),2&e){const e=n.oxw(2);n.xp6(2),n.Oqu(e.description)}}function r(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",3)(1,"div",4)(2,"div",5)(3,"button",6),n.NdJ("mouseenter",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.showInfo=!0)}))("mouseleave",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.showInfo=!1)})),n._UZ(4,"system-button-icon",7),n.qZA()()(),n.YNc(5,d,3,1,"div",8),n.qZA()}if(2&e){const e=n.oxw();n.xp6(4),n.Q6J("size","small")("icon","info"),n.xp6(1),n.Q6J("ngIf",e.showInfo)}}let c=(()=>{var e;class WorkbenchConfigLabel{constructor(){(0,s.Z)(this,"option",""),(0,s.Z)(this,"description",""),(0,s.Z)(this,"showInfo",!1)}}return e=WorkbenchConfigLabel,(0,s.Z)(WorkbenchConfigLabel,"ɵfac",(function(t){return new(t||e)})),(0,s.Z)(WorkbenchConfigLabel,"ɵcmp",n.Xpm({type:e,selectors:[["workbench-config-label"]],inputs:{option:"option",description:"description"},decls:3,vars:2,consts:[[1,"slds-grid","slds-grid--vertical-align-center"],[1,"slds-form-element__label",3,"label"],["class","slds-is-relative",4,"ngIf"],[1,"slds-is-relative"],[1,"slds-form-element"],[1,"slds-form-element__icon","slds-align-middle"],["aria-describedby","help",1,"slds-button","slds-button_icon","slds-button","slds-button_icon",3,"mouseenter","mouseleave"],[3,"size","icon"],["class","slds-popover slds-popover_tooltip slds-nubbin_bottom-left slds-rise-from-ground slds-is-absolute","role","tooltip","style","bottom: 25px; left: -17px; min-width: 320px; min-height: 30px; height:auto",4,"ngIf"],["role","tooltip",1,"slds-popover","slds-popover_tooltip","slds-nubbin_bottom-left","slds-rise-from-ground","slds-is-absolute",2,"bottom","25px","left","-17px","min-width","320px","min-height","30px","height","auto"],[1,"slds-popover__body","slds-scrollable_y","slds-cell-wrap"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n._UZ(1,"system-label",1),n.YNc(2,r,6,3,"div",2),n.qZA()),2&e&&(n.xp6(1),n.Q6J("label",t.option),n.xp6(1),n.Q6J("ngIf",t.description))},dependencies:[l.O5,o.J,a._],encapsulation:2})),WorkbenchConfigLabel})()},7388:(e,t,i)=>{i.r(t),i.d(t,{WorkbenchModule:()=>Cg});var s=i(1180),n=i(4755),l=i(5030),o=i(3735),a=i(4357),d=i(3190),r=i(6490),c=i(4826),g=i(3418),u=i(2242),m=i(8859);let p=(()=>{var e;class DictionaryManagerItemStatus{constructor(){(0,s.Z)(this,"disabled",!1),(0,s.Z)(this,"status",void 0),(0,s.Z)(this,"onChange",void 0),(0,s.Z)(this,"onTouched",void 0)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}getStatusColor(){switch(this.status){case"a":return"slds-icon-text-success";case"i":return"slds-icon-text-light";default:return"slds-icon-text-warning"}}writeValue(e){this.status=e}toggleValue(e){this.disabled||(e.stopPropagation(),"a"===this.status?this.status="i":this.status="a",this.onChange(this.status))}}return e=DictionaryManagerItemStatus,(0,s.Z)(DictionaryManagerItemStatus,"ɵfac",(function(t){return new(t||e)})),(0,s.Z)(DictionaryManagerItemStatus,"ɵcmp",u.Xpm({type:e,selectors:[["dictionary-manager-item-status"]],inputs:{disabled:"disabled"},features:[u._Bn([{provide:l.JU,useExisting:(0,u.Gpc)((()=>e)),multi:!0}])],decls:1,vars:1,consts:[["size","xx-small","icon","light_bulb",1,"slds-p-right--xx-small",3,"colorclass","click"]],template:function(e,t){1&e&&(u.TgZ(0,"system-utility-icon",0),u.NdJ("click",(function(e){return t.toggleValue(e)})),u.qZA()),2&e&&u.Q6J("colorclass",t.getStatusColor())},dependencies:[m.r],encapsulation:2})),DictionaryManagerItemStatus})();var h=i(4505),f=i(4154),b=i(5329),Z=i(6163),y=i(2032),v=i(3278),x=i(4044),M=i(6625);let A=(()=>{var e;class dictionarymanager{constructor(e,t,i,n,l,o,a,d){(0,s.Z)(this,"backend",void 0),(0,s.Z)(this,"metadata",void 0),(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"modelutilities",void 0),(0,s.Z)(this,"navigation",void 0),(0,s.Z)(this,"toast",void 0),(0,s.Z)(this,"modal",void 0),(0,s.Z)(this,"configurationService",void 0),(0,s.Z)(this,"reservedwords",[]),(0,s.Z)(this,"keywords",[]),(0,s.Z)(this,"changescope","none"),(0,s.Z)(this,"domaindefinitions",[]),(0,s.Z)(this,"domainfields",[]),(0,s.Z)(this,"dictionarydefinitions",[]),(0,s.Z)(this,"dictionaryitems",[]),(0,s.Z)(this,"dictionaryrelationships",[]),(0,s.Z)(this,"dictionaryrelationshipfields",[]),(0,s.Z)(this,"dictionaryrelationshiprelatefields",[]),(0,s.Z)(this,"dictionaryindexes",[]),(0,s.Z)(this,"dictionaryindexitems",[]),(0,s.Z)(this,"currentDictionaryDefinition",void 0),(0,s.Z)(this,"currentDictionaryScope",void 0),(0,s.Z)(this,"currentDictionaryItem",void 0),(0,s.Z)(this,"currentDictionaryIndex",void 0),(0,s.Z)(this,"currentDictionaryRelationship",void 0),(0,s.Z)(this,"loaded",void 0),(0,s.Z)(this,"settings",void 0),this.backend=e,this.metadata=t,this.language=i,this.modelutilities=n,this.navigation=l,this.toast=o,this.modal=a,this.configurationService=d,this.loadDictionaryDefinitions(),this.loadWords(),this.changescope=this.configurationService.getCapabilityConfig("core").edit_mode,this.navigation.addModelEditing("dictmgr","Administration",this,"dictionary manager")}ngOnDestroy(){this.navigation.removeModelEditing("dictmgr","Administration")}isDirty(){let e=!1;const t=JSON.parse(this.loaded);return["dictionarydefinitions","dictionaryitems","dictionaryrelationships","dictionaryrelationshiprelatefields","dictionaryindexes","dictionaryindexitem"].forEach((i=>{Array.isArray(this[i])&&this[i].forEach((s=>{const n=t[i].find((e=>e.id==s.id));(!n||n&&JSON.stringify(n)!=JSON.stringify(s))&&(e=!0)}))})),e}loadDictionaryDefinitions(){let e=this.modal.await("LBL_LOADING");this.backend.getRequest("dictionary/definitions").subscribe({next:t=>{this.domaindefinitions=t.domaindefinitions,this.domainfields=t.domainfields,this.dictionarydefinitions=t.dictionarydefinitions,this.dictionaryitems=t.dictionaryitems,this.dictionaryrelationships=t.dictionaryrelationships,this.dictionaryrelationshiprelatefields=t.dictionaryrelationshiprelatefields,this.dictionaryindexes=t.dictionaryindexes,this.dictionaryindexitems=t.dictionaryindexitems,this.settings=t.settings,this.loaded=JSON.stringify(t),e.emit(!0)},error:()=>{e.emit(!0)}})}loadWords(){this.configurationService.getData("spicewords")?(this.reservedwords=this.configurationService.getData("spicewords").reservedwords,this.keywords=this.configurationService.getData("spicewords").keywords):this.backend.getRequest("dictionary/spicewords").subscribe((e=>{this.reservedwords=e.reservedwords,this.keywords=e.keywords,this.configurationService.setData("spicewords",e)}))}canChange(e){return"all"==this.changescope||"custom"==this.changescope&&"c"==e&&(this.currentDictionaryScope="c",!0)}get defaultScope(){return"all"==this.changescope?"g":"c"}getStatusColor(e){switch(e){case"a":return"slds-icon-text-success";case"i":return"slds-icon-text-light";default:return"slds-icon-text-warning"}}getDomainName(e){let t=this.domaindefinitions.find((t=>t.id==e));return t?t.name:e}getDictionaryDefinitionName(e){let t=this.dictionarydefinitions.find((t=>t.id==e));return t?t.name:e}getDictionaryItemName(e){let t=this.dictionaryitems.find((t=>t.id==e));return t?t.name:e}getDictionaryDefinitionItems(e){let t=[];for(let i of this.dictionaryitems.filter((t=>t.sysdictionarydefinition_id==e&&0==t.deleted)).sort(((e,t)=>e.sequence>t.sequence?1:-1)))i.sysdictionary_ref_id&&i.sysdictionary_ref_id!=e?t=t.concat(this.getDictionaryDefinitionItems(i.sysdictionary_ref_id)):i.sysdictionary_ref_id||t.push(i);return t}save(){let e=this.determineChangedRecords();this.backend.postRequest("dictionary/definitions",{},e).subscribe({next:e=>{this.loaded=JSON.stringify(e),this.toast.sendToast(this.language.getLabel("LBL_DATA_SAVED"),"success")},error:()=>{this.toast.sendToast(this.language.getLabel("ERR_FAILED_TO_EXECUTE"),"error")}})}determineChangedRecords(){let e=JSON.parse(this.loaded),t={dictionarydefinitions:[],dictionaryitems:[],dictionaryrelationships:[],dictionaryrelationshiprelatefields:[],dictionaryindexes:[],dictionaryindexitems:[]};for(let i in t)for(let s of this[i]){let n=e[i].find((e=>e.id==s.id));(!n||n&&JSON.stringify(n)!=JSON.stringify(s))&&t[i].push(s)}return t}repairDictionary(e){let t={dictionaries:[e.name]};this.backend.postRequest("admin/repair/dictionary",{},t).subscribe((e=>{e.success?this.toast.sendToast(this.language.getLabel("LBL_DICTIONARY_REPAIRED"),"success"):this.toast.sendToast(this.language.getLabel("LBL_NO_DATA"),"error")}))}}return e=dictionarymanager,(0,s.Z)(dictionarymanager,"ɵfac",(function(t){return new(t||e)(u.LFG(h.y),u.LFG(f.Pu),u.LFG(b.d),u.LFG(Z.A),u.LFG(y.G),u.LFG(v.A),u.LFG(x.o),u.LFG(M.C))})),(0,s.Z)(dictionarymanager,"ɵprov",u.Yz7({token:e,factory:e.ɵfac})),dictionarymanager})();var T=i(2656),L=i(3463),q=i(5681),C=i(3194),J=i(3772),N=i(5185),k=i(3577),w=i(1058),U=i(151);const E=function(e){return{"slds-is-selected":e}};function D(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"tr",32),u.NdJ("click",(function(){const t=u.CHM(e).$implicit,i=u.oxw();return u.KtG(i.setCurrentDictionaryDefinition(t.id,t.scope))})),u.TgZ(1,"td")(2,"button",33),u.NdJ("click",(function(){const t=u.CHM(e).$implicit,i=u.oxw();return u.KtG(i.repairDictionaryDefinition(t))})),u._UZ(3,"system-utility-icon",34),u.qZA(),u._UZ(4,"system-utility-icon",35),u.TgZ(5,"dictionary-manager-item-status",36),u.NdJ("ngModelChange",(function(t){const i=u.CHM(e).$implicit;return u.KtG(i.status=t)})),u.qZA()(),u.TgZ(6,"td",37)(7,"div",38),u._uU(8),u.qZA()(),u.TgZ(9,"td",39)(10,"div",38),u._uU(11),u.qZA()(),u.TgZ(12,"td",40)(13,"div",38),u._uU(14),u.qZA()(),u.TgZ(15,"td")(16,"button",33),u.NdJ("click",(function(){const t=u.CHM(e).$implicit,i=u.oxw();return u.KtG(i.editDictionaryDefinition(t))})),u._UZ(17,"system-button-icon",41),u.qZA(),u.TgZ(18,"button",42),u.NdJ("click",(function(t){const i=u.CHM(e).$implicit,s=u.oxw();return u.KtG(s.deleteDictionaryDefinition(t,i.id))})),u._UZ(19,"system-button-icon",43),u.qZA()()()}if(2&e){const e=t.$implicit,i=u.oxw();u.Q6J("ngClass",u.VKq(9,E,i.dictionarymanager.currentDictionaryDefinition==e.id)),u.xp6(3),u.Q6J("icon","custom_apps")("system-title",i.language.getLabel("LBL_REPAIR_CACHE")),u.xp6(1),u.Q6J("icon","g"==e.scope?"world":"people"),u.xp6(1),u.Q6J("ngModel",e.status),u.xp6(3),u.Oqu(e.name),u.xp6(3),u.Oqu(e.tablename),u.xp6(3),u.Oqu(e.sysdictionary_type),u.xp6(4),u.Q6J("disabled",!i.dictionarymanager.canChange(e.scope))}}function O(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div",44)(1,"system-utility-icon",45),u.NdJ("click",(function(t){u.CHM(e);const i=u.oxw();return u.KtG(i.addDictionaryDefinition(t))})),u.qZA()()}}let I=(()=>{var e;class DictionaryManagerDefinitions{constructor(e,t,i,n,l,o,a){(0,s.Z)(this,"dictionarymanager",void 0),(0,s.Z)(this,"metadata",void 0),(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"modal",void 0),(0,s.Z)(this,"injector",void 0),(0,s.Z)(this,"modelutilities",void 0),(0,s.Z)(this,"backend",void 0),(0,s.Z)(this,"definitionfilterterm",void 0),(0,s.Z)(this,"definitionfiltertype",""),(0,s.Z)(this,"definitionfilterscope",""),(0,s.Z)(this,"definitionfilterstatus",""),(0,s.Z)(this,"repairing",!1),this.dictionarymanager=e,this.metadata=t,this.language=i,this.modal=n,this.injector=l,this.modelutilities=o,this.backend=a}get dictionarydefinitions(){return this.dictionarymanager.dictionarydefinitions.filter((e=>!!e.name&&(0==e.deleted&&((!this.definitionfiltertype||e.sysdictionary_type==this.definitionfiltertype)&&(!(this.definitionfilterterm&&!(e.name.toLowerCase().indexOf(this.definitionfilterterm.toLowerCase())>=0||e.tablename&&e.tablename.toLowerCase().indexOf(this.definitionfilterterm.toLowerCase())>=0))&&((""==this.definitionfilterscope||e.scope==this.definitionfilterscope)&&(""==this.definitionfilterstatus||e.status==this.definitionfilterstatus))))))).sort(((e,t)=>e.name.localeCompare(t.name)))}trackByFn(e,t){return t.id}setCurrentDictionaryDefinition(e,t){e!=this.dictionarymanager.currentDictionaryDefinition&&(this.dictionarymanager.currentDictionaryDefinition=e,this.dictionarymanager.currentDictionaryScope=t,this.dictionarymanager.currentDictionaryItem=null,this.dictionarymanager.currentDictionaryIndex=null,this.dictionarymanager.currentDictionaryRelationship=null)}addDictionaryDefinition(e){e.stopPropagation(),this.modal.openModal("DictionaryManagerAddDefinitionModal",!0,this.injector)}deleteDictionaryDefinition(e,t){e.stopPropagation(),this.modal.prompt("confirm",this.language.getLabel("MSG_DELETE_RECORD","","long"),this.language.getLabel("MSG_DELETE_RECORD")).subscribe((e=>{if(e){this.dictionarymanager.dictionarydefinitions.find((e=>e.id==t)).deleted=1;this.dictionarymanager.currentDictionaryDefinition==t&&this.dictionarymanager.currentDictionaryDefinition}}))}editDictionaryDefinition(e){this.modal.openModal("DictionaryManagerEditDefinitionModal",!0,this.injector).subscribe((t=>{t.instance.dictionarydefinition=e}))}repairDictionaryDefinition(e){this.dictionarymanager.repairDictionary(e)}}return e=DictionaryManagerDefinitions,(0,s.Z)(DictionaryManagerDefinitions,"ɵfac",(function(t){return new(t||e)(u.Y36(A),u.Y36(f.Pu),u.Y36(b.d),u.Y36(x.o),u.Y36(u.zs3),u.Y36(Z.A),u.Y36(h.y))})),(0,s.Z)(DictionaryManagerDefinitions,"ɵcmp",u.Xpm({type:e,selectors:[["dictionary-manager-definitions"]],decls:41,vars:7,consts:[[1,"slds-p-around--xx-small","slds-grid","slds-grid--vertical-align-center"],["placeholder","LBL_SEARCH",1,"slds-grow",3,"ngModel","ngModelChange"],[1,"slds-p-left--xx-small",3,"ngModel","ngModelChange"],["value","g","icon","world"],["value","c","icon","people"],["value","d","icon","light_bulb","colorclass","slds-icon-text-warning"],["value","a","icon","light_bulb","colorclass","slds-icon-text-success"],["value","i","icon","light_bulb","colorclass","slds-icon-text-light"],[1,"slds-select_container","slds-p-left--xx-small"],[1,"slds-select",3,"ngModel","ngModelChange"],["value",""],["label","LBL_ALL"],["value","module"],["label","LBL_MODULE"],["value","metadata"],["label","LBL_METADATA"],["value","template"],["label","LBL_TEMPLATE"],["value","relationship"],["label","LBL_RELATIONSHIP"],["system-to-bottom","",1,"slds-border--top"],[1,"slds-table","slds-table_cell-buffer","slds-table_bordered","slds-table--header-fixed"],[1,"slds-line-height_reset"],["scope","col",2,"width","2.5rem"],["scope","col",1,""],[1,"slds-truncate","slds-th__action","slds-p-horizontal--x-small"],["label","LBL_NAME"],["label","LBL_TABLE"],["label","LBL_TYPE"],["scope","col",2,"width","2rem"],["class","slds-hint-parent",3,"ngClass","click",4,"ngFor","ngForOf","ngForTrackBy"],["class","ng-star-inserted slds-align--absolute-center slds-border--top slds-p-around--small slds-theme--default","style","position: sticky;bottom: 0;",4,"ngIf"],[1,"slds-hint-parent",3,"ngClass","click"],[1,"slds-button","slds-button--icon",3,"click"],["size","xx-small",1,"slds-p-right--xx-small",3,"icon","system-title"],["size","xx-small",1,"slds-p-right--xx-small",3,"icon"],[3,"ngModel","ngModelChange"],["data-label","Dictionary"],[1,"slds-truncate"],["data-label","Table"],["data-label","Type"],["size","xx-small","icon","edit"],[1,"slds-button","slds-button--icon",3,"disabled","click"],["size","xx-small","icon","delete"],[1,"ng-star-inserted","slds-align--absolute-center","slds-border--top","slds-p-around--small","slds-theme--default",2,"position","sticky","bottom","0"],["icon","new","size","x-small",3,"click"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0)(1,"system-input-text",1),u.NdJ("ngModelChange",(function(e){return t.definitionfilterterm=e})),u.qZA(),u.TgZ(2,"system-select-icon",2),u.NdJ("ngModelChange",(function(e){return t.definitionfilterscope=e})),u._UZ(3,"system-select-icon-item")(4,"system-select-icon-item",3)(5,"system-select-icon-item",4),u.qZA(),u.TgZ(6,"system-select-icon",2),u.NdJ("ngModelChange",(function(e){return t.definitionfilterstatus=e})),u._UZ(7,"system-select-icon-item")(8,"system-select-icon-item",5)(9,"system-select-icon-item",6)(10,"system-select-icon-item",7),u.qZA(),u.TgZ(11,"div",8)(12,"select",9),u.NdJ("ngModelChange",(function(e){return t.definitionfiltertype=e})),u.TgZ(13,"option",10),u._UZ(14,"system-label",11),u.qZA(),u.TgZ(15,"option",12),u._UZ(16,"system-label",13),u.qZA(),u.TgZ(17,"option",14),u._UZ(18,"system-label",15),u.qZA(),u.TgZ(19,"option",16),u._UZ(20,"system-label",17),u.qZA(),u.TgZ(21,"option",18),u._UZ(22,"system-label",19),u.qZA()()()(),u.TgZ(23,"div",20)(24,"table",21)(25,"thead")(26,"tr",22),u._UZ(27,"th",23),u.TgZ(28,"th",24)(29,"div",25),u._UZ(30,"system-label",26),u.qZA()(),u.TgZ(31,"th",24)(32,"div",25),u._UZ(33,"system-label",27),u.qZA()(),u.TgZ(34,"th",24)(35,"div",25),u._UZ(36,"system-label",28),u.qZA()(),u._UZ(37,"th",29),u.qZA()(),u.TgZ(38,"tbody"),u.YNc(39,D,20,11,"tr",30),u.qZA()(),u.YNc(40,O,2,0,"div",31),u.qZA()),2&e&&(u.xp6(1),u.Q6J("ngModel",t.definitionfilterterm),u.xp6(1),u.Q6J("ngModel",t.definitionfilterscope),u.xp6(4),u.Q6J("ngModel",t.definitionfilterstatus),u.xp6(6),u.Q6J("ngModel",t.definitionfiltertype),u.xp6(27),u.Q6J("ngForOf",t.dictionarydefinitions)("ngForTrackBy",t.trackByFn),u.xp6(1),u.Q6J("ngIf","none"!=t.dictionarymanager.changescope))},dependencies:[n.mk,n.sg,n.O5,l.YN,l.Kr,l.EJ,l.JJ,l.On,T.J,J.Z,L._,m.r,N.E,k.s,w.H,U.S,p],encapsulation:2})),DictionaryManagerDefinitions})();var Q=i(7514),S=i(3497);function B(e,t){if(1&e&&(u.TgZ(0,"div",8)(1,"label",9),u._UZ(2,"system-label",29),u.qZA(),u._UZ(3,"input",30),u.qZA()),2&e){const e=u.oxw(2);u.xp6(3),u.Q6J("ngModel",e.dictionarymanager.getDomainName(e.dictionaryitem.sysdomaindefinition_id))}}function F(e,t){if(1&e&&(u.TgZ(0,"div",8)(1,"label",9),u._UZ(2,"system-label",31),u.qZA(),u._UZ(3,"input",30),u.qZA()),2&e){const e=u.oxw(2);u.xp6(3),u.Q6J("ngModel",e.dictionarymanager.getDictionaryDefinitionName(e.dictionaryitem.sysdictionary_ref_id))}}function Y(e,t){if(1&e){const e=u.EpF();u.ynx(0),u.TgZ(1,"div")(2,"label",9),u._UZ(3,"system-label",32),u.qZA(),u.TgZ(4,"system-input-label",33),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw(2);return u.KtG(i.dictionaryitem.label=t)})),u.qZA()(),u.TgZ(5,"div")(6,"label",9),u._UZ(7,"system-label",34),u.qZA(),u.TgZ(8,"system-input-label",33),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw(2);return u.KtG(i.dictionaryitem.labelinputhelper=t)})),u.qZA()(),u.TgZ(9,"div",35)(10,"div",36)(11,"system-checkbox",37),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw(2);return u.KtG(i.dictionaryitem.required=t)})),u._UZ(12,"system-label",38),u.qZA()(),u.TgZ(13,"div",36)(14,"system-checkbox",37),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw(2);return u.KtG(i.dictionaryitem.non_db=t)})),u._UZ(15,"system-label",39),u.qZA()(),u.TgZ(16,"div",36)(17,"system-checkbox",37),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw(2);return u.KtG(i.dictionaryitem.duplicate_merge=t)})),u._UZ(18,"system-label",40),u.qZA()(),u.TgZ(19,"div",36)(20,"label",9),u._UZ(21,"system-label",41),u.qZA(),u.TgZ(22,"system-input-text",33),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw(2);return u.KtG(i.dictionaryitem.default_value=t)})),u.qZA()()(),u.TgZ(23,"div",42)(24,"label",9),u._UZ(25,"system-label",43),u.qZA(),u.TgZ(26,"div",8)(27,"system-input-text",44),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw(2);return u.KtG(i.dictionaryitem.description=t)})),u.qZA()()(),u.BQk()}if(2&e){const e=u.oxw(2);u.xp6(4),u.Q6J("ngModel",e.dictionaryitem.label),u.xp6(4),u.Q6J("ngModel",e.dictionaryitem.labelinputhelper),u.xp6(3),u.Q6J("ngModel",e.dictionaryitem.required)("asinteger",!0),u.xp6(3),u.Q6J("ngModel",e.dictionaryitem.non_db)("asinteger",!0),u.xp6(3),u.Q6J("ngModel",e.dictionaryitem.duplicate_merge)("asinteger",!0),u.xp6(5),u.Q6J("ngModel",e.dictionaryitem.default_value),u.xp6(5),u.Q6J("ngModel",e.dictionaryitem.description)}}function R(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div",4)(1,"div",5)(2,"div",6)(3,"div",7)(4,"div",8)(5,"label",9),u._UZ(6,"system-label",10),u.qZA(),u.TgZ(7,"system-input-text",11),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw();return u.KtG(i.dictionaryitem.name=t)})),u.qZA()()(),u.TgZ(8,"div",12),u.YNc(9,B,4,1,"div",13),u.YNc(10,F,4,1,"div",14),u.qZA(),u.TgZ(11,"div",15)(12,"label",9),u._UZ(13,"system-label",16),u.qZA(),u.TgZ(14,"div",17)(15,"select",18),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw();return u.KtG(i.dictionaryitem.scope=t)})),u.TgZ(16,"option",19),u._UZ(17,"system-label",20),u.qZA(),u.TgZ(18,"option",21),u._UZ(19,"system-label",22),u.qZA()()()()(),u.YNc(20,Y,28,10,"ng-container",23),u.TgZ(21,"div",24)(22,"div",25)(23,"label",9),u._UZ(24,"system-label",26),u.qZA(),u.TgZ(25,"div",8)(26,"input",27),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw();return u.KtG(i.dictionaryitem.version=t)})),u.qZA()()(),u.TgZ(27,"div",25)(28,"label",9),u._UZ(29,"system-label",28),u.qZA(),u.TgZ(30,"div",8)(31,"input",27),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw();return u.KtG(i.dictionaryitem.package=t)})),u.qZA()()()()()()}if(2&e){const e=u.oxw();u.xp6(7),u.Q6J("maxlength",128)("ngModel",e.dictionaryitem.name),u.xp6(2),u.Q6J("ngIf",e.dictionaryitem.sysdomaindefinition_id),u.xp6(1),u.Q6J("ngIf",e.dictionaryitem.sysdictionary_ref_id),u.xp6(5),u.Q6J("ngModel",e.dictionaryitem.scope),u.xp6(5),u.Q6J("ngIf",e.dictionaryitem.sysdomaindefinition_id),u.xp6(6),u.Q6J("ngModel",e.dictionaryitem.version),u.xp6(5),u.Q6J("ngModel",e.dictionaryitem.package)}}function G(e,t){1&e&&(u.TgZ(0,"div",45),u._UZ(1,"system-label",46),u.qZA())}let H=(()=>{var e;class DictionaryManagerItemDetails{constructor(e,t,i){(0,s.Z)(this,"dictionarymanager",void 0),(0,s.Z)(this,"metadata",void 0),(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"dictionaryitem",void 0),this.dictionarymanager=e,this.metadata=t,this.language=i}}return e=DictionaryManagerItemDetails,(0,s.Z)(DictionaryManagerItemDetails,"ɵfac",(function(t){return new(t||e)(u.Y36(A),u.Y36(f.Pu),u.Y36(b.d))})),(0,s.Z)(DictionaryManagerItemDetails,"ɵcmp",u.Xpm({type:e,selectors:[["dictionary-manager-item-details"]],inputs:{dictionaryitem:"dictionaryitem"},decls:5,vars:2,consts:[[1,"slds-text-heading--small","slds-p-around--x-small","slds-theme--shade"],["label","LBL_ITEM_DETAILS"],["system-to-bottom-noscroll","",4,"ngIf","ngIfElse"],["SelectItem",""],["system-to-bottom-noscroll",""],[1,"slds-p-around--x-small"],[1,"slds-grid"],[1,"slds-size--1-of-2","slds-form-element","slds-m-around--xxx-small"],[1,"slds-form-element__control"],[1,"slds-form-element__label"],["label","LBL_NAME"],["disabled","",3,"maxlength","ngModel","ngModelChange"],[1,"slds-size--1-of-4","slds-form-element","slds-m-around--xxx-small"],["class","slds-form-element__control",4,"ngIf"],["class","slds-form-element__control","class","slds-form-element__control",4,"ngIf"],[1,"slds-size--1-of-4","slds-form-element__control","slds-m-around--xxx-small"],["label","LBL_SCOPE"],[1,"slds-select_container"],["disabled","",1,"slds-select",3,"ngModel","ngModelChange"],["value","g"],["label","LBL_GLOBAL"],["value","c"],["label","LBL_CUSTOM"],[4,"ngIf"],[1,"slds-grid","slds-m-vertical--xxx-small","slds-gutters_direct-xx-small"],[1,"slds-col","slds-size--1-of-2","slds-form-element"],["label","LBL_VERSION"],["type","text",1,"slds-input",3,"ngModel","ngModelChange"],["label","LBL_PACKAGE"],["label","LBL_DOMAIN"],["type","text","disabled","",1,"slds-input",3,"ngModel"],["label","LBL_TEMPLATE"],["label","LBL_LABEL"],[3,"ngModel","ngModelChange"],["label","LBL_INPUT_HELPER"],[1,"slds-grid","slds-p-vertical--xx-small"],[1,"slds-size--1-of-3","slds-form-element__control"],[3,"ngModel","asinteger","ngModelChange"],["label","LBL_REQUIRED"],["label","LBL_NON_DB"],["label","LBL_DUPLICATE_MERGE"],["label","LBL_DEFAULT_VALUE"],[1,"slds-form-element","slds-m-vertical--xxx-small"],["label","LBL_COMMENT"],["maxlength","150",3,"ngModel","ngModelChange"],["system-to-bottom-noscroll","",1,"slds-align--absolute-center"],["label","LBL_SELECT_ITEM"]],template:function(e,t){if(1&e&&(u.TgZ(0,"div",0),u._UZ(1,"system-label",1),u.qZA(),u.YNc(2,R,32,8,"div",2),u.YNc(3,G,2,0,"ng-template",null,3,u.W1O)),2&e){const e=u.MAs(4);u.xp6(2),u.Q6J("ngIf",t.dictionarymanager.currentDictionaryItem)("ngIfElse",e)}},dependencies:[n.O5,l.YN,l.Kr,l.Fj,l.EJ,l.JJ,l.nD,l.On,Q.U,J.Z,S.$,L._,C.t],encapsulation:2})),DictionaryManagerItemDetails})();function K(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"system-utility-icon",20),u.NdJ("click",(function(t){u.CHM(e);const i=u.oxw(2);return u.KtG(i.activateAll(t))})),u.qZA()}}function z(e,t){1&e&&u._UZ(0,"system-utility-icon",29),2&e&&u.Q6J("icon","rows")("size","x-small")}const V=function(e){return{"slds-is-selected":e}};function P(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"tr",21),u.NdJ("click",(function(){const t=u.CHM(e).$implicit,i=u.oxw(2);return u.KtG(i.setActiveId(t.id))})),u.TgZ(1,"td"),u.YNc(2,z,1,2,"system-utility-icon",22),u._UZ(3,"system-utility-icon",23),u.TgZ(4,"dictionary-manager-item-status",24),u.NdJ("ngModelChange",(function(t){const i=u.CHM(e).$implicit;return u.KtG(i.status=t)})),u.qZA()(),u.TgZ(5,"td",25)(6,"div",9),u._uU(7),u.qZA()(),u.TgZ(8,"td",26)(9,"div",9),u._uU(10),u.qZA()(),u.TgZ(11,"td",26)(12,"div",9),u._uU(13),u.qZA()(),u.TgZ(14,"td")(15,"button",27),u.NdJ("click",(function(t){const i=u.CHM(e).$implicit,s=u.oxw(2);return u.KtG(s.deleteDictionaryItem(t,i.id))})),u._UZ(16,"system-button-icon",28),u.qZA()()()}if(2&e){const e=t.$implicit,i=u.oxw(2);u.Q6J("ngClass",u.VKq(9,V,i.dictionarymanager.currentDictionaryItem==e.id))("cdkDragDisabled",!i.canShuffle),u.xp6(2),u.Q6J("ngIf",i.canShuffle),u.xp6(1),u.Q6J("icon","g"==e.scope?"world":"people"),u.xp6(1),u.Q6J("ngModel",e.status),u.xp6(3),u.Oqu(e.name),u.xp6(3),u.Oqu(i.dictionarymanager.getDomainName(e.sysdomaindefinition_id)),u.xp6(3),u.Oqu(i.dictionarymanager.getDictionaryDefinitionName(e.sysdictionary_ref_id)),u.xp6(2),u.Q6J("disabled",!i.dictionarymanager.canChange(e.scope))}}function $(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div",30)(1,"system-utility-icon",14),u.NdJ("click",(function(t){u.CHM(e);const i=u.oxw(2);return u.KtG(i.addDictionaryItem(t))})),u.qZA()()}}function j(e,t){if(1&e){const e=u.EpF();u.ynx(0),u.TgZ(1,"div",3)(2,"table",4)(3,"thead")(4,"tr",5)(5,"th",6),u.YNc(6,K,1,0,"system-utility-icon",7),u.qZA(),u.TgZ(7,"th",8)(8,"div",9),u._UZ(9,"system-label",10),u.qZA()(),u.TgZ(10,"th",8)(11,"div",9),u._UZ(12,"system-label",11),u.qZA()(),u.TgZ(13,"th",8)(14,"div",9),u._UZ(15,"system-label",12),u.qZA()(),u.TgZ(16,"th",13)(17,"system-utility-icon",14),u.NdJ("click",(function(t){u.CHM(e);const i=u.oxw();return u.KtG(i.addDictionaryItem(t))})),u.qZA()()()(),u.TgZ(18,"tbody",15),u.NdJ("cdkDropListDropped",(function(t){u.CHM(e);const i=u.oxw();return u.KtG(i.drop(t))})),u.YNc(19,P,17,11,"tr",16),u.qZA()(),u.YNc(20,$,2,0,"div",17),u.qZA(),u.TgZ(21,"div",18),u._UZ(22,"dictionary-manager-item-details",19),u.qZA(),u.BQk()}if(2&e){const e=u.oxw();u.xp6(6),u.Q6J("ngIf",e.hasDraftItems),u.xp6(13),u.Q6J("ngForOf",e.dictionaryitems),u.xp6(1),u.Q6J("ngIf","none"!=e.dictionarymanager.changescope),u.xp6(2),u.Q6J("dictionaryitem",e.dictionaryitem)}}function W(e,t){1&e&&(u.TgZ(0,"div",31),u._UZ(1,"system-label",32),u.qZA())}let X=(()=>{var e;class DictionaryManagerItems{constructor(e,t,i,n,l,o){(0,s.Z)(this,"dictionarymanager",void 0),(0,s.Z)(this,"metadata",void 0),(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"modal",void 0),(0,s.Z)(this,"injector",void 0),(0,s.Z)(this,"modelutilities",void 0),(0,s.Z)(this,"dictionaryitem",void 0),this.dictionarymanager=e,this.metadata=t,this.language=i,this.modal=n,this.injector=l,this.modelutilities=o}get canShuffle(){return this.dictionarymanager.canChange(this.dictionarymanager.dictionarydefinitions.find((e=>e.id==this.dictionarymanager.currentDictionaryDefinition))?.scope)}get dictionaryitems(){return this.dictionarymanager.currentDictionaryDefinition?this.dictionarymanager.dictionaryitems.filter((e=>0==e.deleted&&e.sysdictionarydefinition_id==this.dictionarymanager.currentDictionaryDefinition)).sort(((e,t)=>e.sequence>t.sequence?1:-1)):[]}addDictionaryItem(e){e.stopPropagation(),this.modal.openModal("DictionaryManagerAddItemModal",!0,this.injector)}deleteDictionaryItem(e,t){e.stopPropagation(),this.modal.prompt("confirm",this.language.getLabel("MSG_DELETE_RECORD","","long"),this.language.getLabel("MSG_DELETE_RECORD")).subscribe((e=>{if(e){this.dictionarymanager.dictionaryitems.find((e=>e.id==t)).deleted=1;this.dictionarymanager.currentDictionaryDefinition==t&&this.dictionarymanager.currentDictionaryDefinition}}))}drop(e){let t=this.dictionaryitems,i=t.splice(e.previousIndex,1);t.splice(e.currentIndex,0,i[0]);let s=0;for(let e of t)e.sequence=s,s++}setActiveId(e){this.dictionarymanager.currentDictionaryItem=e,this.dictionaryitem=this.dictionarymanager.dictionaryitems.find((t=>t.id==e))}get hasDraftItems(){return this.dictionaryitems.filter((e=>"d"==e.status)).length>0}activateAll(e){e.stopPropagation(),e.preventDefault(),this.modal.confirm("MSG_ACTIVATE_ALL","MSG_ACTIVATE_ALL").subscribe({next:e=>{e&&this.dictionaryitems.filter((e=>"d"==e.status)).forEach((e=>e.status="a"))}})}}return e=DictionaryManagerItems,(0,s.Z)(DictionaryManagerItems,"ɵfac",(function(t){return new(t||e)(u.Y36(A),u.Y36(f.Pu),u.Y36(b.d),u.Y36(x.o),u.Y36(u.zs3),u.Y36(Z.A))})),(0,s.Z)(DictionaryManagerItems,"ɵcmp",u.Xpm({type:e,selectors:[["dictionary-manager-items"]],decls:4,vars:2,consts:[["system-to-bottom-noscroll",""],[4,"ngIf","ngIfElse"],["selectdefinition",""],[1,"slds-scrollable--y",2,"height","calc(100% - 500px)"],[1,"slds-table","slds-table_cell-buffer","slds-table_bordered"],[1,"slds-line-height_reset"],["scope","col",1,"slds-text-align--right",2,"width","2.5rem"],["class","slds-p-right--xx-small","icon","light_bulb","colorclass","slds-icon-text-warning","size","xx-small",3,"click",4,"ngIf"],["scope","col",1,""],[1,"slds-truncate"],["label","LBL_NAME"],["label","LBL_DOMAIN"],["label","LBL_TEMPLATE"],["scope","col",2,"width","2rem"],["icon","new","size","x-small",3,"click"],["cdkDropList","",1,"dragboundary",3,"cdkDropListDropped"],["class","slds-hint-parent","cdkDrag","","cdkDragBoundary",".dragboundary",3,"ngClass","cdkDragDisabled","click",4,"ngFor","ngForOf"],["class","slds-align--absolute-center slds-p-around--small",4,"ngIf"],[1,"slds-border--top"],[3,"dictionaryitem"],["icon","light_bulb","colorclass","slds-icon-text-warning","size","xx-small",1,"slds-p-right--xx-small",3,"click"],["cdkDrag","","cdkDragBoundary",".dragboundary",1,"slds-hint-parent",3,"ngClass","cdkDragDisabled","click"],["class","slds-p-right--xx-small","cdkDragHandle","","style","cursor:move",3,"icon","size",4,"ngIf"],["size","xx-small",1,"slds-p-right--xx-small",3,"icon"],[3,"ngModel","ngModelChange"],["data-label","Domain"],["data-label","Type"],[1,"slds-button","slds-button--icon",3,"disabled","click"],["size","xx-small","icon","delete"],["cdkDragHandle","",1,"slds-p-right--xx-small",2,"cursor","move",3,"icon","size"],[1,"slds-align--absolute-center","slds-p-around--small"],[1,"slds-size--1-of-1","slds-height_full","slds-align--absolute-center"],["label","LBL_SELECT_A_DICTIONARYDEFINITION"]],template:function(e,t){if(1&e&&(u.TgZ(0,"div",0),u.YNc(1,j,23,4,"ng-container",1),u.YNc(2,W,2,0,"ng-template",null,2,u.W1O),u.qZA()),2&e){const e=u.MAs(3);u.xp6(1),u.Q6J("ngIf",t.dictionarymanager.currentDictionaryDefinition)("ngIfElse",e)}},dependencies:[n.mk,n.sg,n.O5,l.JJ,l.On,T.J,L._,m.r,C.t,g.Wj,g.Zt,g.Bh,H,p],encapsulation:2})),DictionaryManagerItems})();function ee(e,t){if(1&e&&(u.TgZ(0,"option",26),u._uU(1),u.qZA()),2&e){const e=t.$implicit;u.Q6J("value",e.id),u.xp6(1),u.Oqu(e.name)}}function te(e,t){if(1&e&&(u.TgZ(0,"option",26),u._uU(1),u.qZA()),2&e){const e=t.$implicit;u.Q6J("value",e.id),u.xp6(1),u.Oqu(e.name)}}let ie=(()=>{var e;class DictionaryManagerRelationshipContainerOneToMany{constructor(e,t,i,n,l,o){(0,s.Z)(this,"dictionarymanager",void 0),(0,s.Z)(this,"metadata",void 0),(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"modal",void 0),(0,s.Z)(this,"injector",void 0),(0,s.Z)(this,"modelutilities",void 0),(0,s.Z)(this,"lhs_items",[]),(0,s.Z)(this,"rhs_items",[]),(0,s.Z)(this,"relationshiprelatefields",[]),(0,s.Z)(this,"relationship",void 0),this.dictionarymanager=e,this.metadata=t,this.language=i,this.modal=n,this.injector=l,this.modelutilities=o}ngOnInit(){this.loadItems(),this.loadRelationshipFields()}loadItems(){this.lhs_items=this.dictionarymanager.getDictionaryDefinitionItems(this.relationship.lhs_sysdictionarydefinition_id),this.rhs_items=this.dictionarymanager.getDictionaryDefinitionItems(this.relationship.rhs_sysdictionarydefinition_id)}loadRelationshipFields(){this.relationshiprelatefields=this.dictionarymanager.dictionaryrelationshiprelatefields.filter((e=>e.relationship_id==this.relationship.id))}}return e=DictionaryManagerRelationshipContainerOneToMany,(0,s.Z)(DictionaryManagerRelationshipContainerOneToMany,"ɵfac",(function(t){return new(t||e)(u.Y36(A),u.Y36(f.Pu),u.Y36(b.d),u.Y36(x.o),u.Y36(u.zs3),u.Y36(Z.A))})),(0,s.Z)(DictionaryManagerRelationshipContainerOneToMany,"ɵcmp",u.Xpm({type:e,selectors:[["dictionary-manager-relationship-container-onetomany"]],inputs:{relationship:"relationship"},decls:82,vars:18,consts:[[1,"slds-grid"],[1,"slds-size--1-of-2","slds-p-right--xx-small","slds-form-element"],[1,"slds-form-element__label"],["label","LBL_NAME"],[1,"slds-form-element__control"],[1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-size--1-of-2","slds-p-left--xx-small","slds-form-element"],["label","LBL_RELATIONSHIP_NAME"],["label","LBL_LHS_DICTIONARYDEFINITION"],["disabled","",1,"slds-input",3,"ngModel"],["label","LBL_RHS_DICTIONARYDEFINITION"],["label","LBL_LHS_SYSDICTIONARYITEM"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["label","LBL_RHS_SYSDICTIONARYITEM"],["label","LBL_LHS_LINKNAME"],["label","LBL_RHS_LINKNAME"],["label","LBL_LHS_LINKLABEL"],[3,"ngModel","ngModelChange"],["label","LBL_RHS_LINKLABEL"],["label","LBL_DUPLICATE_MERGE"],[3,"ngModel","asinteger","ngModelChange"],[1,"slds-size--1-of-2"],["label","LBL_RHS_RELATENAME"],["label","LBL_RHS_RELATELABEL"],[3,"value"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0)(1,"div",1)(2,"label",2),u._UZ(3,"system-label",3),u.qZA(),u.TgZ(4,"div",4)(5,"input",5),u.NdJ("ngModelChange",(function(e){return t.relationship.name=e})),u.qZA()()(),u.TgZ(6,"div",6)(7,"label",2),u._UZ(8,"system-label",7),u.qZA(),u.TgZ(9,"div",4)(10,"input",5),u.NdJ("ngModelChange",(function(e){return t.relationship.relationship_name=e})),u.qZA()()()(),u.TgZ(11,"div",0)(12,"div",1)(13,"label",2),u._UZ(14,"system-label",8),u.qZA(),u.TgZ(15,"div",4),u._UZ(16,"input",9),u.qZA()(),u.TgZ(17,"div",6)(18,"label",2),u._UZ(19,"system-label",10),u.qZA(),u.TgZ(20,"div",4),u._UZ(21,"input",9),u.qZA()()(),u.TgZ(22,"div",0)(23,"div",1)(24,"label",2),u._UZ(25,"system-label",11),u.qZA(),u.TgZ(26,"div",12)(27,"select",13),u.NdJ("ngModelChange",(function(e){return t.relationship.lhs_sysdictionaryitem_id=e})),u.YNc(28,ee,2,2,"option",14),u.qZA()()(),u.TgZ(29,"div",6)(30,"label",2),u._UZ(31,"system-label",15),u.qZA(),u.TgZ(32,"div",12)(33,"select",13),u.NdJ("ngModelChange",(function(e){return t.relationship.rhs_sysdictionaryitem_id=e})),u.YNc(34,te,2,2,"option",14),u.qZA()()()(),u.TgZ(35,"div",0)(36,"div",1)(37,"label",2),u._UZ(38,"system-label",16),u.qZA(),u.TgZ(39,"div",4)(40,"input",5),u.NdJ("ngModelChange",(function(e){return t.relationship.lhs_linkname=e})),u.qZA()()(),u.TgZ(41,"div",6)(42,"label",2),u._UZ(43,"system-label",17),u.qZA(),u.TgZ(44,"div",4)(45,"input",5),u.NdJ("ngModelChange",(function(e){return t.relationship.rhs_linkname=e})),u.qZA()()()(),u.TgZ(46,"div",0)(47,"div",1)(48,"label",2),u._UZ(49,"system-label",18),u.qZA(),u.TgZ(50,"div",4)(51,"system-input-label",19),u.NdJ("ngModelChange",(function(e){return t.relationship.lhs_linklabel=e})),u.qZA()()(),u.TgZ(52,"div",6)(53,"label",2),u._UZ(54,"system-label",20),u.qZA(),u.TgZ(55,"div",4)(56,"system-input-label",19),u.NdJ("ngModelChange",(function(e){return t.relationship.rhs_linklabel=e})),u.qZA()()()(),u.TgZ(57,"div",0)(58,"div",1)(59,"label",2),u._UZ(60,"system-label",21),u.qZA(),u.TgZ(61,"div",4)(62,"system-checkbox",22),u.NdJ("ngModelChange",(function(e){return t.relationship.lhs_duplicatemerge=e})),u.qZA()()(),u.TgZ(63,"div",6)(64,"label",2),u._UZ(65,"system-label",21),u.qZA(),u.TgZ(66,"div",4)(67,"system-checkbox",22),u.NdJ("ngModelChange",(function(e){return t.relationship.rhs_duplicatemerge=e})),u.qZA()()()(),u.TgZ(68,"div",0),u._UZ(69,"div",23),u.TgZ(70,"div",23)(71,"label",2),u._UZ(72,"system-label",24),u.qZA(),u.TgZ(73,"div",4)(74,"input",5),u.NdJ("ngModelChange",(function(e){return t.relationship.rhs_relatename=e})),u.qZA()()()(),u.TgZ(75,"div",0),u._UZ(76,"div",23),u.TgZ(77,"div",23)(78,"label",2),u._UZ(79,"system-label",25),u.qZA(),u.TgZ(80,"div",4)(81,"system-input-label",19),u.NdJ("ngModelChange",(function(e){return t.relationship.rhs_relatelabel=e})),u.qZA()()()()),2&e&&(u.xp6(5),u.Q6J("ngModel",t.relationship.name),u.xp6(5),u.Q6J("ngModel",t.relationship.relationship_name),u.xp6(6),u.Q6J("ngModel",t.dictionarymanager.getDictionaryDefinitionName(t.relationship.lhs_sysdictionarydefinition_id)),u.xp6(5),u.Q6J("ngModel",t.dictionarymanager.getDictionaryDefinitionName(t.relationship.rhs_sysdictionarydefinition_id)),u.xp6(6),u.Q6J("ngModel",t.relationship.lhs_sysdictionaryitem_id),u.xp6(1),u.Q6J("ngForOf",t.lhs_items),u.xp6(5),u.Q6J("ngModel",t.relationship.rhs_sysdictionaryitem_id),u.xp6(1),u.Q6J("ngForOf",t.rhs_items),u.xp6(6),u.Q6J("ngModel",t.relationship.lhs_linkname),u.xp6(5),u.Q6J("ngModel",t.relationship.rhs_linkname),u.xp6(6),u.Q6J("ngModel",t.relationship.lhs_linklabel),u.xp6(5),u.Q6J("ngModel",t.relationship.rhs_linklabel),u.xp6(6),u.Q6J("ngModel",t.relationship.lhs_duplicatemerge)("asinteger",!0),u.xp6(5),u.Q6J("ngModel",t.relationship.rhs_duplicatemerge)("asinteger",!0),u.xp6(7),u.Q6J("ngModel",t.relationship.rhs_relatename),u.xp6(7),u.Q6J("ngModel",t.relationship.rhs_relatelabel))},dependencies:[n.sg,l.YN,l.Kr,l.Fj,l.EJ,l.JJ,l.On,Q.U,S.$,L._],encapsulation:2})),DictionaryManagerRelationshipContainerOneToMany})();function se(e,t){if(1&e&&(u.TgZ(0,"option",29),u._uU(1),u.qZA()),2&e){const e=t.$implicit;u.Q6J("value",e.id),u.xp6(1),u.Oqu(e.name)}}function ne(e,t){if(1&e&&(u.TgZ(0,"option",29),u._uU(1),u.qZA()),2&e){const e=t.$implicit;u.Q6J("value",e.id),u.xp6(1),u.Oqu(e.name)}}function le(e,t){if(1&e&&(u.TgZ(0,"option",29),u._uU(1),u.qZA()),2&e){const e=t.$implicit;u.Q6J("value",e.id),u.xp6(1),u.Oqu(e.name)}}function oe(e,t){if(1&e&&(u.TgZ(0,"option",29),u._uU(1),u.qZA()),2&e){const e=t.$implicit;u.Q6J("value",e.id),u.xp6(1),u.Oqu(e.name)}}function ae(e,t){if(1&e&&(u.TgZ(0,"option",29),u._uU(1),u.qZA()),2&e){const e=t.$implicit;u.Q6J("value",e.id),u.xp6(1),u.Oqu(e.name)}}function de(e,t){if(1&e&&(u.TgZ(0,"option",29),u._uU(1),u.qZA()),2&e){const e=t.$implicit;u.Q6J("value",e.id),u.xp6(1),u.Oqu(e.name)}}let re=(()=>{var e;class DictionaryManagerRelationshipContainerManyToMany{constructor(e,t,i,n,l,o){(0,s.Z)(this,"dictionarymanager",void 0),(0,s.Z)(this,"metadata",void 0),(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"modal",void 0),(0,s.Z)(this,"injector",void 0),(0,s.Z)(this,"modelutilities",void 0),(0,s.Z)(this,"lhs_items",[]),(0,s.Z)(this,"rhs_items",[]),(0,s.Z)(this,"join_items",[]),(0,s.Z)(this,"relationship",void 0),this.dictionarymanager=e,this.metadata=t,this.language=i,this.modal=n,this.injector=l,this.modelutilities=o}get join_sysdictionarydefinition_id(){return this.relationship.join_sysdictionarydefinition_id}set join_sysdictionarydefinition_id(e){e!=this.relationship.join_sysdictionarydefinition_id&&(this.relationship.join_sysdictionarydefinition_id=e,this.relationship.join_rhs_sysdictionaryitem_id=null,this.relationship.join_lhs_sysdictionaryitem_id=null,this.loadJoinItems())}ngOnInit(){this.loadItems(),this.loadJoinItems()}loadJoinItems(){this.relationship.join_sysdictionarydefinition_id?this.join_items=this.dictionarymanager.getDictionaryDefinitionItems(this.relationship.join_sysdictionarydefinition_id):this.join_items=[]}loadItems(){this.lhs_items=this.dictionarymanager.getDictionaryDefinitionItems(this.relationship.lhs_sysdictionarydefinition_id),this.rhs_items=this.dictionarymanager.getDictionaryDefinitionItems(this.relationship.rhs_sysdictionarydefinition_id)}}return e=DictionaryManagerRelationshipContainerManyToMany,(0,s.Z)(DictionaryManagerRelationshipContainerManyToMany,"ɵfac",(function(t){return new(t||e)(u.Y36(A),u.Y36(f.Pu),u.Y36(b.d),u.Y36(x.o),u.Y36(u.zs3),u.Y36(Z.A))})),(0,s.Z)(DictionaryManagerRelationshipContainerManyToMany,"ɵcmp",u.Xpm({type:e,selectors:[["dictionary-manager-relationship-container-manytomany"]],inputs:{relationship:"relationship"},decls:101,vars:29,consts:[[1,"slds-grid"],[1,"slds-size--1-of-2","slds-p-right--xx-small","slds-form-element"],[1,"slds-form-element__label"],["label","LBL_NAME"],[1,"slds-form-element__control"],[1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-size--1-of-2","slds-p-left--xx-small","slds-form-element"],["label","LBL_RELATIONSHIP_NAME"],["label","LBL_LHS_DICTIONARYDEFINITION"],["disabled","",1,"slds-input",3,"ngModel"],["label","LBL_RHS_DICTIONARYDEFINITION"],["label","LBL_LHS_SYSDICTIONARYITEM"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["label","LBL_RHS_SYSDICTIONARYITEM"],["label","LBL_LHS_LINKNAME"],["label","LBL_RHS_LINKNAME"],["label","LBL_LHS_LINKLABEL"],[3,"ngModel","ngModelChange"],["label","LBL_RHS_LINKLABEL"],["label","LBL_DUPLICATE_MERGE"],[3,"ngModel","asinteger","ngModelChange"],[1,"slds-size--1-of-1","slds-p-right--xx-small","slds-form-element"],["label","LBL_JOIN_DICTIONARYDEFINITION_ID"],["label","LBL_JOIN_LHS_SYSDICTIONARYITEM"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],["label","LBL_JOIN_RHS_SYSDICTIONARYITEM"],["label","LBL_RELATIONSHIP_ROLE_COLUMN"],[3,"value"],["label","LBL_RELATIONSHIP_ROLE_COLUMN_VALUE"],[1,"slds-input",3,"disabled","ngModel","ngModelChange"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0)(1,"div",1)(2,"label",2),u._UZ(3,"system-label",3),u.qZA(),u.TgZ(4,"div",4)(5,"input",5),u.NdJ("ngModelChange",(function(e){return t.relationship.name=e})),u.qZA()()(),u.TgZ(6,"div",6)(7,"label",2),u._UZ(8,"system-label",7),u.qZA(),u.TgZ(9,"div",4)(10,"input",5),u.NdJ("ngModelChange",(function(e){return t.relationship.relationship_name=e})),u.qZA()()()(),u.TgZ(11,"div",0)(12,"div",1)(13,"label",2),u._UZ(14,"system-label",8),u.qZA(),u.TgZ(15,"div",4),u._UZ(16,"input",9),u.qZA()(),u.TgZ(17,"div",6)(18,"label",2),u._UZ(19,"system-label",10),u.qZA(),u.TgZ(20,"div",4),u._UZ(21,"input",9),u.qZA()()(),u.TgZ(22,"div",0)(23,"div",1)(24,"label",2),u._UZ(25,"system-label",11),u.qZA(),u.TgZ(26,"div",12)(27,"select",13),u.NdJ("ngModelChange",(function(e){return t.relationship.lhs_sysdictionaryitem_id=e})),u.YNc(28,se,2,2,"option",14),u.qZA()()(),u.TgZ(29,"div",6)(30,"label",2),u._UZ(31,"system-label",15),u.qZA(),u.TgZ(32,"div",12)(33,"select",13),u.NdJ("ngModelChange",(function(e){return t.relationship.rhs_sysdictionaryitem_id=e})),u.YNc(34,ne,2,2,"option",14),u.qZA()()()(),u.TgZ(35,"div",0)(36,"div",1)(37,"label",2),u._UZ(38,"system-label",16),u.qZA(),u.TgZ(39,"div",4)(40,"input",5),u.NdJ("ngModelChange",(function(e){return t.relationship.lhs_linkname=e})),u.qZA()()(),u.TgZ(41,"div",6)(42,"label",2),u._UZ(43,"system-label",17),u.qZA(),u.TgZ(44,"div",4)(45,"input",5),u.NdJ("ngModelChange",(function(e){return t.relationship.rhs_linkname=e})),u.qZA()()()(),u.TgZ(46,"div",0)(47,"div",1)(48,"label",2),u._UZ(49,"system-label",18),u.qZA(),u.TgZ(50,"div",4)(51,"system-input-label",19),u.NdJ("ngModelChange",(function(e){return t.relationship.lhs_linklabel=e})),u.qZA()()(),u.TgZ(52,"div",6)(53,"label",2),u._UZ(54,"system-label",20),u.qZA(),u.TgZ(55,"div",4)(56,"system-input-label",19),u.NdJ("ngModelChange",(function(e){return t.relationship.rhs_linklabel=e})),u.qZA()()()(),u.TgZ(57,"div",0)(58,"div",1)(59,"label",2),u._UZ(60,"system-label",21),u.qZA(),u.TgZ(61,"div",4)(62,"system-checkbox",22),u.NdJ("ngModelChange",(function(e){return t.relationship.lhs_duplicatemerge=e})),u.qZA()()(),u.TgZ(63,"div",6)(64,"label",2),u._UZ(65,"system-label",21),u.qZA(),u.TgZ(66,"div",4)(67,"system-checkbox",22),u.NdJ("ngModelChange",(function(e){return t.relationship.rhs_duplicatemerge=e})),u.qZA()()()(),u.TgZ(68,"div",0)(69,"div",23)(70,"label",2),u._UZ(71,"system-label",24),u.qZA(),u.TgZ(72,"div",12)(73,"select",13),u.NdJ("ngModelChange",(function(e){return t.join_sysdictionarydefinition_id=e})),u.YNc(74,le,2,2,"option",14),u.qZA()()()(),u.TgZ(75,"div",0)(76,"div",1)(77,"label",2),u._UZ(78,"system-label",25),u.qZA(),u.TgZ(79,"div",12)(80,"select",26),u.NdJ("ngModelChange",(function(e){return t.relationship.join_lhs_sysdictionaryitem_id=e})),u.YNc(81,oe,2,2,"option",14),u.qZA()()(),u.TgZ(82,"div",6)(83,"label",2),u._UZ(84,"system-label",27),u.qZA(),u.TgZ(85,"div",12)(86,"select",26),u.NdJ("ngModelChange",(function(e){return t.relationship.join_rhs_sysdictionaryitem_id=e})),u.YNc(87,ae,2,2,"option",14),u.qZA()()()(),u.TgZ(88,"div",0)(89,"div",1)(90,"label",2),u._UZ(91,"system-label",28),u.qZA(),u.TgZ(92,"div",12)(93,"select",26),u.NdJ("ngModelChange",(function(e){return t.relationship.relationship_role_column=e})),u._UZ(94,"option",29),u.YNc(95,de,2,2,"option",14),u.qZA()()(),u.TgZ(96,"div",6)(97,"label",2),u._UZ(98,"system-label",30),u.qZA(),u.TgZ(99,"div",4)(100,"input",31),u.NdJ("ngModelChange",(function(e){return t.relationship.relationship_role_column_value=e})),u.qZA()()()()),2&e&&(u.xp6(5),u.Q6J("ngModel",t.relationship.name),u.xp6(5),u.Q6J("ngModel",t.relationship.relationship_name),u.xp6(6),u.Q6J("ngModel",t.dictionarymanager.getDictionaryDefinitionName(t.relationship.lhs_sysdictionarydefinition_id)),u.xp6(5),u.Q6J("ngModel",t.dictionarymanager.getDictionaryDefinitionName(t.relationship.rhs_sysdictionarydefinition_id)),u.xp6(6),u.Q6J("ngModel",t.relationship.lhs_sysdictionaryitem_id),u.xp6(1),u.Q6J("ngForOf",t.lhs_items),u.xp6(5),u.Q6J("ngModel",t.relationship.rhs_sysdictionaryitem_id),u.xp6(1),u.Q6J("ngForOf",t.rhs_items),u.xp6(6),u.Q6J("ngModel",t.relationship.lhs_linkname),u.xp6(5),u.Q6J("ngModel",t.relationship.rhs_linkname),u.xp6(6),u.Q6J("ngModel",t.relationship.lhs_linklabel),u.xp6(5),u.Q6J("ngModel",t.relationship.rhs_linklabel),u.xp6(6),u.Q6J("ngModel",t.relationship.lhs_duplicatemerge)("asinteger",!0),u.xp6(5),u.Q6J("ngModel",t.relationship.rhs_duplicatemerge)("asinteger",!0),u.xp6(6),u.Q6J("ngModel",t.join_sysdictionarydefinition_id),u.xp6(1),u.Q6J("ngForOf",t.dictionarymanager.dictionarydefinitions),u.xp6(6),u.Q6J("disabled",!t.join_sysdictionarydefinition_id)("ngModel",t.relationship.join_lhs_sysdictionaryitem_id),u.xp6(1),u.Q6J("ngForOf",t.join_items),u.xp6(5),u.Q6J("disabled",!t.join_sysdictionarydefinition_id)("ngModel",t.relationship.join_rhs_sysdictionaryitem_id),u.xp6(1),u.Q6J("ngForOf",t.join_items),u.xp6(6),u.Q6J("disabled",!t.join_sysdictionarydefinition_id)("ngModel",t.relationship.relationship_role_column),u.xp6(2),u.Q6J("ngForOf",t.join_items),u.xp6(5),u.Q6J("disabled",!t.relationship.relationship_role_column)("ngModel",t.relationship.relationship_role_column_value))},dependencies:[n.sg,l.YN,l.Kr,l.Fj,l.EJ,l.JJ,l.On,Q.U,S.$,L._],encapsulation:2})),DictionaryManagerRelationshipContainerManyToMany})();function ce(e,t){if(1&e&&(u.TgZ(0,"option",26),u._uU(1),u.qZA()),2&e){const e=t.$implicit;u.Q6J("value",e.id),u.xp6(1),u.Oqu(e.name)}}function ge(e,t){if(1&e&&(u.TgZ(0,"option",26),u._uU(1),u.qZA()),2&e){const e=t.$implicit;u.Q6J("value",e.id),u.xp6(1),u.Oqu(e.name)}}let ue=(()=>{var e;class DictionaryManagerRelationshipContainerParent{constructor(e,t,i,n,l,o){(0,s.Z)(this,"dictionarymanager",void 0),(0,s.Z)(this,"metadata",void 0),(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"modal",void 0),(0,s.Z)(this,"injector",void 0),(0,s.Z)(this,"modelutilities",void 0),(0,s.Z)(this,"lhs_items",[]),(0,s.Z)(this,"rhs_items",[]),(0,s.Z)(this,"relationshiprelatefields",[]),(0,s.Z)(this,"relationship",void 0),this.dictionarymanager=e,this.metadata=t,this.language=i,this.modal=n,this.injector=l,this.modelutilities=o}ngOnInit(){this.loadItems(),this.loadRelationshipFields()}loadItems(){this.lhs_items=this.dictionarymanager.getDictionaryDefinitionItems(this.relationship.lhs_sysdictionarydefinition_id),this.rhs_items=this.dictionarymanager.getDictionaryDefinitionItems(this.relationship.rhs_sysdictionarydefinition_id)}loadRelationshipFields(){this.relationshiprelatefields=this.dictionarymanager.dictionaryrelationshiprelatefields.filter((e=>e.relationship_id==this.relationship.id))}get rhs_sysdictionaryitem_id(){return this.relationship.rhs_sysdictionaryitem_id}set rhs_sysdictionaryitem_id(e){this.relationship.rhs_sysdictionaryitem_id=e,this.relationship.rhs_relatename=this.rhs_items.find((t=>t.id==e)).name+"_name"}}return e=DictionaryManagerRelationshipContainerParent,(0,s.Z)(DictionaryManagerRelationshipContainerParent,"ɵfac",(function(t){return new(t||e)(u.Y36(A),u.Y36(f.Pu),u.Y36(b.d),u.Y36(x.o),u.Y36(u.zs3),u.Y36(Z.A))})),(0,s.Z)(DictionaryManagerRelationshipContainerParent,"ɵcmp",u.Xpm({type:e,selectors:[["dictionary-manager-relationship-container-parent"]],inputs:{relationship:"relationship"},decls:75,vars:17,consts:[[1,"slds-grid"],[1,"slds-size--1-of-2","slds-p-right--xx-small","slds-form-element"],[1,"slds-form-element__label"],["label","LBL_NAME"],[1,"slds-form-element__control"],[1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-size--1-of-2","slds-p-left--xx-small","slds-form-element"],["label","LBL_RELATIONSHIP_NAME"],["label","LBL_LHS_DICTIONARYDEFINITION"],["disabled","",1,"slds-input",3,"ngModel"],["label","LBL_RHS_DICTIONARYDEFINITION"],["label","LBL_LHS_SYSDICTIONARYITEM"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["label","LBL_RHS_SYSDICTIONARYITEM"],["label","LBL_LHS_LINKNAME"],["label","LBL_RHS_LINKNAME"],["label","LBL_LHS_LINKLABEL"],[3,"ngModel","ngModelChange"],["label","LBL_RHS_LINKLABEL"],["label","LBL_DUPLICATE_MERGE"],[3,"ngModel","asinteger","ngModelChange"],[1,"slds-size--1-of-2"],["label","LBL_RHS_RELATENAME"],["disabled","",1,"slds-input",3,"ngModel","ngModelChange"],[3,"value"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0)(1,"div",1)(2,"label",2),u._UZ(3,"system-label",3),u.qZA(),u.TgZ(4,"div",4)(5,"input",5),u.NdJ("ngModelChange",(function(e){return t.relationship.name=e})),u.qZA()()(),u.TgZ(6,"div",6)(7,"label",2),u._UZ(8,"system-label",7),u.qZA(),u.TgZ(9,"div",4)(10,"input",5),u.NdJ("ngModelChange",(function(e){return t.relationship.relationship_name=e})),u.qZA()()()(),u.TgZ(11,"div",0)(12,"div",1)(13,"label",2),u._UZ(14,"system-label",8),u.qZA(),u.TgZ(15,"div",4),u._UZ(16,"input",9),u.qZA()(),u.TgZ(17,"div",6)(18,"label",2),u._UZ(19,"system-label",10),u.qZA(),u.TgZ(20,"div",4),u._UZ(21,"input",9),u.qZA()()(),u.TgZ(22,"div",0)(23,"div",1)(24,"label",2),u._UZ(25,"system-label",11),u.qZA(),u.TgZ(26,"div",12)(27,"select",13),u.NdJ("ngModelChange",(function(e){return t.relationship.lhs_sysdictionaryitem_id=e})),u.YNc(28,ce,2,2,"option",14),u.qZA()()(),u.TgZ(29,"div",6)(30,"label",2),u._UZ(31,"system-label",15),u.qZA(),u.TgZ(32,"div",12)(33,"select",13),u.NdJ("ngModelChange",(function(e){return t.rhs_sysdictionaryitem_id=e})),u.YNc(34,ge,2,2,"option",14),u.qZA()()()(),u.TgZ(35,"div",0)(36,"div",1)(37,"label",2),u._UZ(38,"system-label",16),u.qZA(),u.TgZ(39,"div",4)(40,"input",5),u.NdJ("ngModelChange",(function(e){return t.relationship.lhs_linkname=e})),u.qZA()()(),u.TgZ(41,"div",6)(42,"label",2),u._UZ(43,"system-label",17),u.qZA(),u.TgZ(44,"div",4)(45,"input",5),u.NdJ("ngModelChange",(function(e){return t.relationship.rhs_linkname=e})),u.qZA()()()(),u.TgZ(46,"div",0)(47,"div",1)(48,"label",2),u._UZ(49,"system-label",18),u.qZA(),u.TgZ(50,"div",4)(51,"system-input-label",19),u.NdJ("ngModelChange",(function(e){return t.relationship.lhs_linklabel=e})),u.qZA()()(),u.TgZ(52,"div",6)(53,"label",2),u._UZ(54,"system-label",20),u.qZA(),u.TgZ(55,"div",4)(56,"system-input-label",19),u.NdJ("ngModelChange",(function(e){return t.relationship.rhs_linklabel=e})),u.qZA()()()(),u.TgZ(57,"div",0)(58,"div",1)(59,"label",2),u._UZ(60,"system-label",21),u.qZA(),u.TgZ(61,"div",4)(62,"system-checkbox",22),u.NdJ("ngModelChange",(function(e){return t.relationship.lhs_duplicatemerge=e})),u.qZA()()(),u.TgZ(63,"div",6)(64,"label",2),u._UZ(65,"system-label",21),u.qZA(),u.TgZ(66,"div",4)(67,"system-checkbox",22),u.NdJ("ngModelChange",(function(e){return t.relationship.rhs_duplicatemerge=e})),u.qZA()()()(),u.TgZ(68,"div",0),u._UZ(69,"div",23),u.TgZ(70,"div",23)(71,"label",2),u._UZ(72,"system-label",24),u.qZA(),u.TgZ(73,"div",4)(74,"input",25),u.NdJ("ngModelChange",(function(e){return t.relationship.rhs_relatename=e})),u.qZA()()()()),2&e&&(u.xp6(5),u.Q6J("ngModel",t.relationship.name),u.xp6(5),u.Q6J("ngModel",t.relationship.relationship_name),u.xp6(6),u.Q6J("ngModel",t.dictionarymanager.getDictionaryDefinitionName(t.relationship.lhs_sysdictionarydefinition_id)),u.xp6(5),u.Q6J("ngModel",t.dictionarymanager.getDictionaryDefinitionName(t.relationship.rhs_sysdictionarydefinition_id)),u.xp6(6),u.Q6J("ngModel",t.relationship.lhs_sysdictionaryitem_id),u.xp6(1),u.Q6J("ngForOf",t.lhs_items),u.xp6(5),u.Q6J("ngModel",t.rhs_sysdictionaryitem_id),u.xp6(1),u.Q6J("ngForOf",t.rhs_items),u.xp6(6),u.Q6J("ngModel",t.relationship.lhs_linkname),u.xp6(5),u.Q6J("ngModel",t.relationship.rhs_linkname),u.xp6(6),u.Q6J("ngModel",t.relationship.lhs_linklabel),u.xp6(5),u.Q6J("ngModel",t.relationship.rhs_linklabel),u.xp6(6),u.Q6J("ngModel",t.relationship.lhs_duplicatemerge)("asinteger",!0),u.xp6(5),u.Q6J("ngModel",t.relationship.rhs_duplicatemerge)("asinteger",!0),u.xp6(7),u.Q6J("ngModel",t.relationship.rhs_relatename))},dependencies:[n.sg,l.YN,l.Kr,l.Fj,l.EJ,l.JJ,l.On,Q.U,S.$,L._],encapsulation:2})),DictionaryManagerRelationshipContainerParent})();function me(e,t){if(1&e&&u._UZ(0,"dictionary-manager-relationship-container-onetomany",7),2&e){const e=u.oxw(2);u.Q6J("relationship",e.dictionaryRelationship)}}function pe(e,t){if(1&e&&u._UZ(0,"dictionary-manager-relationship-container-manytomany",7),2&e){const e=u.oxw(2);u.Q6J("relationship",e.dictionaryRelationship)}}function he(e,t){if(1&e&&u._UZ(0,"dictionary-manager-relationship-container-parent",7),2&e){const e=u.oxw(2);u.Q6J("relationship",e.dictionaryRelationship)}}function fe(e,t){if(1&e&&(u.TgZ(0,"div",4),u.ynx(1,5),u.YNc(2,me,1,1,"dictionary-manager-relationship-container-onetomany",6),u.YNc(3,pe,1,1,"dictionary-manager-relationship-container-manytomany",6),u.YNc(4,he,1,1,"dictionary-manager-relationship-container-parent",6),u.BQk(),u.qZA()),2&e){const e=u.oxw();u.xp6(1),u.Q6J("ngSwitch",e.dictionaryRelationship.relationship_type),u.xp6(1),u.Q6J("ngSwitchCase","one-to-many"),u.xp6(1),u.Q6J("ngSwitchCase","many-to-many"),u.xp6(1),u.Q6J("ngSwitchCase","parent")}}function be(e,t){1&e&&(u.TgZ(0,"div",8),u._UZ(1,"system-label",9),u.qZA())}let Ze=(()=>{var e;class DictionaryManagerRelationshipsDetails{constructor(e){(0,s.Z)(this,"dictionarymanager",void 0),(0,s.Z)(this,"dictionaryRelationship",void 0),this.dictionarymanager=e}}return e=DictionaryManagerRelationshipsDetails,(0,s.Z)(DictionaryManagerRelationshipsDetails,"ɵfac",(function(t){return new(t||e)(u.Y36(A))})),(0,s.Z)(DictionaryManagerRelationshipsDetails,"ɵcmp",u.Xpm({type:e,selectors:[["dictionary-manager-relationships-details"]],inputs:{dictionaryRelationship:"dictionaryRelationship"},decls:5,vars:2,consts:[[1,"slds-text-heading--small","slds-p-around--x-small","slds-theme--shade"],["label","LBL_ITEM_DETAILS"],["class","slds-p-around--x-small","system-to-bottom","",4,"ngIf","ngIfElse"],["SelectItem",""],["system-to-bottom","",1,"slds-p-around--x-small"],[3,"ngSwitch"],[3,"relationship",4,"ngSwitchCase"],[3,"relationship"],[1,"slds-height_full","slds-align--absolute-center"],["label","LBL_SELECT_ITEM"]],template:function(e,t){if(1&e&&(u.TgZ(0,"div",0),u._UZ(1,"system-label",1),u.qZA(),u.YNc(2,fe,5,4,"div",2),u.YNc(3,be,2,0,"ng-template",null,3,u.W1O)),2&e){const e=u.MAs(4);u.xp6(2),u.Q6J("ngIf",t.dictionarymanager.currentDictionaryRelationship)("ngIfElse",e)}},dependencies:[n.O5,n.RF,n.n9,L._,w.H,ie,re,ue],encapsulation:2})),DictionaryManagerRelationshipsDetails})();function _e(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"system-utility-icon",27),u.NdJ("click",(function(t){u.CHM(e);const i=u.oxw().$implicit,s=u.oxw(2);return u.KtG(s.deleteDictionaryRelationship(t,i.id))})),u.qZA()}}const ye=function(e){return{"slds-is-selected":e}};function ve(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"tr",17),u.NdJ("click",(function(){const t=u.CHM(e).$implicit,i=u.oxw(2);return u.KtG(i.setActiveId(t.id))})),u.TgZ(1,"td"),u._UZ(2,"system-utility-icon",18),u.TgZ(3,"dictionary-manager-item-status",19),u.NdJ("ngModelChange",(function(t){const i=u.CHM(e).$implicit;return u.KtG(i.status=t)})),u.qZA()(),u.TgZ(4,"td",20)(5,"div",9),u._uU(6),u.qZA()(),u.TgZ(7,"td",21)(8,"div",9)(9,"span",22),u._uU(10),u.qZA()()(),u.TgZ(11,"td",23)(12,"div",9),u._uU(13),u.qZA()(),u.TgZ(14,"td",24)(15,"div",9),u._uU(16),u.qZA()(),u.TgZ(17,"td",25),u.YNc(18,_e,1,0,"system-utility-icon",26),u.qZA()()}if(2&e){const e=t.$implicit,i=u.oxw(2);u.Q6J("ngClass",u.VKq(11,ye,i.dictionarymanager.currentDictionaryRelationship==e.id)),u.xp6(2),u.Q6J("icon","g"==e.scope?"world":"people"),u.xp6(1),u.Q6J("ngModel",e.status),u.xp6(3),u.AsE("",e.name," / ",e.relationship_name,""),u.xp6(4),u.Oqu(e.relationship_type),u.xp6(3),u.AsE("",i.dictionarymanager.getDictionaryDefinitionName(e.lhs_sysdictionarydefinition_id)," / ",i.dictionarymanager.getDictionaryItemName(e.lhs_sysdictionaryitem_id),""),u.xp6(3),u.AsE("",i.dictionarymanager.getDictionaryDefinitionName(e.rhs_sysdictionarydefinition_id)," / ",i.dictionarymanager.getDictionaryItemName(e.rhs_sysdictionaryitem_id),""),u.xp6(2),u.Q6J("ngIf",i.dictionarymanager.canChange(e.scope))}}function xe(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div",28)(1,"system-utility-icon",29),u.NdJ("click",(function(t){u.CHM(e);const i=u.oxw(2);return u.KtG(i.addDictionaryRelationship(t))})),u.qZA()()}}function Me(e,t){if(1&e&&(u.ynx(0),u.TgZ(1,"table",5)(2,"thead")(3,"tr",6),u._UZ(4,"th",7),u.TgZ(5,"th",8)(6,"div",9),u._UZ(7,"system-label",10),u.qZA()(),u.TgZ(8,"th",8)(9,"div",9),u._UZ(10,"system-label",11),u.qZA()(),u.TgZ(11,"th",8)(12,"div",9),u._UZ(13,"system-label",12),u.qZA()(),u.TgZ(14,"th",8)(15,"div",9),u._UZ(16,"system-label",13),u.qZA()(),u._UZ(17,"th",14),u.qZA()(),u.TgZ(18,"tbody"),u.YNc(19,ve,19,13,"tr",15),u.qZA()(),u.YNc(20,xe,2,0,"div",16),u.BQk()),2&e){const e=u.oxw();u.xp6(19),u.Q6J("ngForOf",e.dictionaryrelationships),u.xp6(1),u.Q6J("ngIf","none"!=e.dictionarymanager.changescope)}}function Ae(e,t){1&e&&(u.TgZ(0,"div",30),u._UZ(1,"system-label",31),u.qZA())}let Te=(()=>{var e;class DictionaryManagerRelationships{constructor(e,t,i,n,l,o){(0,s.Z)(this,"dictionarymanager",void 0),(0,s.Z)(this,"metadata",void 0),(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"modal",void 0),(0,s.Z)(this,"injector",void 0),(0,s.Z)(this,"modelutilities",void 0),(0,s.Z)(this,"currentRelationship",void 0),this.dictionarymanager=e,this.metadata=t,this.language=i,this.modal=n,this.injector=l,this.modelutilities=o}get dictionaryrelationships(){return this.dictionarymanager.currentDictionaryDefinition?this.dictionarymanager.dictionaryrelationships.filter((e=>0==e.deleted&&(e.lhs_sysdictionarydefinition_id==this.dictionarymanager.currentDictionaryDefinition||e.rhs_sysdictionarydefinition_id==this.dictionarymanager.currentDictionaryDefinition))).sort(((e,t)=>e.name.localeCompare(t.name))):[]}addDictionaryRelationship(e){e.stopPropagation(),this.modal.openModal("DictionaryManagerRelationshipAdd",!0,this.injector)}deleteDictionaryRelationship(e,t){e.stopPropagation(),this.modal.prompt("confirm",this.language.getLabel("MSG_DELETE_RECORD","","long"),this.language.getLabel("MSG_DELETE_RECORD")).subscribe((e=>{if(e){this.dictionarymanager.dictionaryrelationships.find((e=>e.id==t)).deleted=1;this.dictionarymanager.currentDictionaryRelationship==t&&(this.dictionarymanager.currentDictionaryRelationship,this.currentRelationship=null)}}))}isLeft(e){return e.lhs_sysdictionarydefinition_id==this.dictionarymanager.currentDictionaryDefinition}setActiveId(e){this.dictionarymanager.currentDictionaryRelationship=e,this.currentRelationship=this.dictionarymanager.dictionaryrelationships.find((t=>t.id==e))}}return e=DictionaryManagerRelationships,(0,s.Z)(DictionaryManagerRelationships,"ɵfac",(function(t){return new(t||e)(u.Y36(A),u.Y36(f.Pu),u.Y36(b.d),u.Y36(x.o),u.Y36(u.zs3),u.Y36(Z.A))})),(0,s.Z)(DictionaryManagerRelationships,"ɵcmp",u.Xpm({type:e,selectors:[["dictionary-manager-relationships"]],decls:6,vars:3,consts:[["system-to-bottom-noscroll",""],[2,"height","calc(100% - 450px)"],[4,"ngIf","ngIfElse"],["selectdefinition",""],[3,"dictionaryRelationship"],[1,"slds-table","slds-table_cell-buffer","slds-table_bordered"],[1,"slds-line-height_reset"],["scope","col",2,"width","2.5rem"],["scope","col",1,""],[1,"slds-truncate"],["label","LBL_NAME"],["label","LBL_TYPE"],["label","LBL_LEFT"],["label","LBL_RIGHT"],["scope","col",2,"width","2rem"],["class","slds-hint-parent",3,"ngClass","click",4,"ngFor","ngForOf"],["class","slds-align--absolute-center slds-p-around--small",4,"ngIf"],[1,"slds-hint-parent",3,"ngClass","click"],["size","xx-small",1,"slds-p-right--xx-small",3,"icon"],[3,"ngModel","ngModelChange"],["data-label","NAME"],["data-label","Type"],[1,"slds-p-horizontal--x-small"],["data-label","Left"],["data-label","Right"],[1,"slds-align--absolute-center",2,"width","2rem"],["size","xx-small","icon","delete",3,"click",4,"ngIf"],["size","xx-small","icon","delete",3,"click"],[1,"slds-align--absolute-center","slds-p-around--small"],["icon","new","size","x-small",3,"click"],[1,"slds-size--1-of-1","slds-height_full","slds-align--absolute-center"],["label","LBL_SELECT_A_DICTIONARYDEFINITION"]],template:function(e,t){if(1&e&&(u.TgZ(0,"div",0)(1,"div",1),u.YNc(2,Me,21,2,"ng-container",2),u.YNc(3,Ae,2,0,"ng-template",null,3,u.W1O),u.qZA(),u._UZ(5,"dictionary-manager-relationships-details",4),u.qZA()),2&e){const e=u.MAs(4);u.xp6(2),u.Q6J("ngIf",t.dictionarymanager.currentDictionaryDefinition)("ngIfElse",e),u.xp6(3),u.Q6J("dictionaryRelationship",t.currentRelationship)}},dependencies:[n.mk,n.sg,n.O5,l.JJ,l.On,L._,m.r,C.t,p,Ze],encapsulation:2})),DictionaryManagerRelationships})();function Le(e,t){1&e&&(u.TgZ(0,"option",35),u._UZ(1,"system-label",36),u.qZA())}function qe(e,t){if(1&e&&(u.TgZ(0,"div",37)(1,"span",38),u._uU(2),u.qZA()()),2&e){const e=t.$implicit;u.Q6J("cdkDragData",e),u.xp6(2),u.Oqu(e.name)}}function Ce(e,t){if(1&e&&(u.TgZ(0,"div",37)(1,"span",38),u._uU(2),u.qZA()()),2&e){const e=t.$implicit;u.Q6J("cdkDragData",e),u.xp6(2),u.Oqu(e.name)}}const Je=function(e){return[e]};function Ne(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div")(1,"div",1),u._UZ(2,"system-label",2),u.qZA(),u.TgZ(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"label",7),u._UZ(8,"system-label",8),u.qZA(),u.TgZ(9,"system-input-text",9),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw();return u.KtG(i.index.name=t)})),u.qZA()(),u.TgZ(10,"div",10)(11,"label",7),u._UZ(12,"system-label",11),u.qZA(),u.TgZ(13,"div",12)(14,"select",13),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw();return u.KtG(i.index.indextype=t)})),u.TgZ(15,"option",14),u._uU(16,"primary"),u.qZA(),u.TgZ(17,"option",15),u._uU(18,"index"),u.qZA(),u.TgZ(19,"option",16),u._uU(20,"unique"),u.qZA()()()()(),u.TgZ(21,"div",5)(22,"div",6)(23,"label",7),u._UZ(24,"system-label",17),u.qZA(),u.TgZ(25,"div",12)(26,"select",13),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw();return u.KtG(i.index.scope=t)})),u.YNc(27,Le,2,0,"option",18),u.TgZ(28,"option",19),u._UZ(29,"system-label",20),u.qZA()()()(),u.TgZ(30,"div",21)(31,"label",7),u._UZ(32,"system-label",22),u.qZA(),u.TgZ(33,"system-input-text",23),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw();return u.KtG(i.index.package=t)})),u.qZA()(),u.TgZ(34,"div",24)(35,"label",7),u._UZ(36,"system-label",25),u.qZA(),u.TgZ(37,"system-input-text",23),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw();return u.KtG(i.index.version=t)})),u.qZA()()(),u.TgZ(38,"div",5)(39,"div",26)(40,"span",7),u._UZ(41,"system-label",27),u.qZA(),u.TgZ(42,"div",28,29),u.NdJ("cdkDropListDropped",(function(t){u.CHM(e);const i=u.oxw();return u.KtG(i.onFieldDrop(t))})),u.YNc(44,qe,3,2,"div",30),u.qZA()(),u.TgZ(45,"div",31)(46,"span",7),u._UZ(47,"system-label",32),u.qZA(),u.TgZ(48,"div",33,34),u.NdJ("cdkDropListDropped",(function(t){u.CHM(e);const i=u.oxw();return u.KtG(i.onFieldDrop(t))})),u.YNc(50,Ce,3,2,"div",30),u.qZA()()()()()()}if(2&e){const e=u.MAs(43),t=u.MAs(49),i=u.oxw();u.xp6(9),u.Q6J("ngModel",i.index.name),u.xp6(5),u.Q6J("ngModel",i.index.indextype),u.xp6(12),u.Q6J("ngModel",i.index.scope),u.xp6(1),u.Q6J("ngIf","all"==i.dictionarymanager.changescope),u.xp6(6),u.Q6J("ngModel",i.index.package),u.xp6(4),u.Q6J("ngModel",i.index.version),u.xp6(5),u.Q6J("cdkDropListData",i.availableDictionaryItems)("cdkDropListConnectedTo",u.VKq(12,Je,t)),u.xp6(2),u.Q6J("ngForOf",i.availableDictionaryItems),u.xp6(4),u.Q6J("cdkDropListData",i.indexDictionaryItems)("cdkDropListConnectedTo",u.VKq(14,Je,e)),u.xp6(2),u.Q6J("ngForOf",i.indexDictionaryItems)}}let ke=(()=>{var e;class DictionaryManagerIndexDetails{constructor(e,t,i,n,l,o){(0,s.Z)(this,"dictionarymanager",void 0),(0,s.Z)(this,"metadata",void 0),(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"modal",void 0),(0,s.Z)(this,"injector",void 0),(0,s.Z)(this,"modelutilities",void 0),(0,s.Z)(this,"indexid",void 0),(0,s.Z)(this,"index",void 0),(0,s.Z)(this,"availableDictionaryItems",[]),(0,s.Z)(this,"indexDictionaryItems",[]),this.dictionarymanager=e,this.metadata=t,this.language=i,this.modal=n,this.injector=l,this.modelutilities=o}ngOnChanges(e){if(this.indexid){this.index=this.dictionarymanager.dictionaryindexes.find((e=>e.id==this.indexid)),this.availableDictionaryItems=this.dictionarymanager.getDictionaryDefinitionItems(this.dictionarymanager.currentDictionaryDefinition),this.indexDictionaryItems=[];let e=this.dictionarymanager.dictionaryindexitems.filter((e=>e.sysdictionaryindex_id==this.indexid&&0==e.deleted)).sort(((e,t)=>e.sequence>t.sequence?1:-1));for(let t of e){let e=this.availableDictionaryItems.findIndex((e=>e.id==t.sysdictionaryitem_id));this.indexDictionaryItems.push(this.availableDictionaryItems.splice(e,1)[0])}}else this.index=null}onFieldDrop(e){let t=e.previousContainer.data.splice(e.previousIndex,1);e.container.data.splice(e.currentIndex,0,t[0]);let i=this.dictionarymanager.dictionaryindexitems.filter((e=>e.sysdictionaryindex_id==this.indexid&&0==e.deleted)),s=0,n=[];for(let e of this.indexDictionaryItems){let t=i.find((t=>t.sysdictionaryitem_id==e.id));if(t)t.sequence=s,n.push(t.id);else{let t=this.modelutilities.generateGuid();this.dictionarymanager.dictionaryindexitems.push({id:t,scope:this.index.scope,status:this.index.status,sysdictionaryindex_id:this.index.id,sysdictionaryitem_id:e.id,sequence:s,deleted:0}),n.push(t)}s++}for(let e of i)n.indexOf(e.id)<0&&(e.deleted=1)}}return e=DictionaryManagerIndexDetails,(0,s.Z)(DictionaryManagerIndexDetails,"ɵfac",(function(t){return new(t||e)(u.Y36(A),u.Y36(f.Pu),u.Y36(b.d),u.Y36(x.o),u.Y36(u.zs3),u.Y36(Z.A))})),(0,s.Z)(DictionaryManagerIndexDetails,"ɵcmp",u.Xpm({type:e,selectors:[["dictionary-manager-index-details"]],inputs:{indexid:"indexid"},features:[u.TTD],decls:1,vars:1,consts:[[4,"ngIf"],[1,"slds-text-heading--small","slds-p-around--x-small","slds-theme--shade"],["label","LBL_INDEX_DETAILS"],["system-to-bottom",""],[1,"slds-p-around--x-small"],[1,"slds-grid"],[1,"slds-form-element__control","slds-size--1-of-2","slds-p-right--xxx-small"],[1,"slds-form-element__label"],["label","LBL_NAME"],["disabled","",3,"ngModel","ngModelChange"],[1,"slds-large-size--1-of-2","slds-p-left--xxx-small","slds-form-element__control"],["label","LBL_TYPE"],[1,"slds-select_container"],["disabled","",1,"slds-select",3,"ngModel","ngModelChange"],["value","primary"],["value","index"],["value","unique"],["label","LBL_SCOPE"],["value","g",4,"ngIf"],["value","c"],["label","LBL_CUSTOM"],[1,"slds-size--1-of-4","slds-p-horizontal--xxx-small","slds-form-element__control"],["label","LBL_PACKAGE"],[3,"ngModel","ngModelChange"],[1,"slds-size--1-of-4","slds-p-left--xxx-small","slds-form-element__control"],["label","LBL_VERSION"],[1,"slds-form-element","slds-p-right--x-small","slds-size--1-of-2"],["label","LBL_AVAILABLE_ITEMS"],["cdkDropList","",1,"slds-picklist","slds-picklist__options","slds-size--1-of-1",3,"cdkDropListData","cdkDropListConnectedTo","cdkDropListDropped"],["listOne","cdkDropList"],["cdkDrag","","class","slds-drag--preview slds-picklist__item",3,"cdkDragData",4,"ngFor","ngForOf"],[1,"slds-form-element","slds-p-left--x-small","slds-size--1-of-2"],["label","LBL_INDEX_ITEMS"],["cdkDropList","",1,"slds-picklist","slds-picklist__options","slds-size--1-of-1","cdk-drag",3,"cdkDropListData","cdkDropListConnectedTo","cdkDropListDropped"],["listTwo","cdkDropList"],["value","g"],["label","LBL_GLOBAL"],["cdkDrag","",1,"slds-drag--preview","slds-picklist__item",3,"cdkDragData"],[1,"slds-truncate"]],template:function(e,t){1&e&&u.YNc(0,Ne,51,16,"div",0),2&e&&u.Q6J("ngIf",t.indexid)},dependencies:[n.sg,n.O5,l.YN,l.Kr,l.EJ,l.JJ,l.On,J.Z,L._,w.H,g.Wj,g.Zt],encapsulation:2})),DictionaryManagerIndexDetails})();const we=function(e){return{"slds-is-selected":e}};function Ue(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"tr",17),u.NdJ("click",(function(){const t=u.CHM(e).$implicit,i=u.oxw(2);return u.KtG(i.setActiveId(t.id))})),u.TgZ(1,"td"),u._UZ(2,"system-utility-icon",18),u.TgZ(3,"dictionary-manager-item-status",19),u.NdJ("ngModelChange",(function(t){const i=u.CHM(e).$implicit;return u.KtG(i.status=t)})),u.qZA()(),u.TgZ(4,"td")(5,"div",8),u._uU(6),u.qZA()(),u._UZ(7,"td"),u.TgZ(8,"td")(9,"div",8),u._uU(10),u.qZA()(),u.TgZ(11,"td")(12,"div",8),u._uU(13),u.qZA()(),u.TgZ(14,"td",20)(15,"system-utility-icon",21),u.NdJ("click",(function(t){const i=u.CHM(e).$implicit,s=u.oxw(2);return u.KtG(s.deleteIndex(t,i.id))})),u.qZA()()()}if(2&e){const e=t.$implicit,i=u.oxw(2);u.Q6J("ngClass",u.VKq(6,we,i.dictionarymanager.currentDictionaryIndex==e.id)),u.xp6(2),u.Q6J("icon","g"==e.scope?"world":"people"),u.xp6(1),u.Q6J("ngModel",e.status),u.xp6(3),u.Oqu(e.name),u.xp6(4),u.Oqu(e.indextype),u.xp6(3),u.Oqu(i.getIndexFields(e.id))}}function Ee(e,t){if(1&e&&(u.TgZ(0,"tr",23),u._UZ(1,"td"),u.TgZ(2,"td")(3,"div",8),u._uU(4),u.qZA()(),u.TgZ(5,"td")(6,"div",8),u._uU(7),u.qZA()(),u.TgZ(8,"td")(9,"div",8),u._uU(10),u.qZA()(),u.TgZ(11,"td")(12,"div",8),u._uU(13),u.qZA()(),u._UZ(14,"td"),u.qZA()),2&e){const e=t.$implicit,i=u.oxw().$implicit,s=u.oxw(2);u.xp6(4),u.Oqu(e.name),u.xp6(3),u.Oqu(s.dictionarymanager.getDictionaryDefinitionName(i.relatedTemplateId)),u.xp6(3),u.Oqu(e.indextype),u.xp6(3),u.Oqu(s.getIndexFields(e.id))}}function De(e,t){if(1&e&&(u.TgZ(0,"tbody"),u.YNc(1,Ee,15,4,"tr",22),u.qZA()),2&e){const e=t.$implicit;u.xp6(1),u.Q6J("ngForOf",e.indexes)}}function Oe(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div",24)(1,"system-utility-icon",25),u.NdJ("click",(function(t){u.CHM(e);const i=u.oxw(2);return u.KtG(i.addIndex(t))})),u.qZA()()}}function Ie(e,t){if(1&e&&(u.ynx(0),u.TgZ(1,"table",4)(2,"thead")(3,"tr",5),u._UZ(4,"th",6),u.TgZ(5,"th",7)(6,"div",8),u._UZ(7,"system-label",9),u.qZA()(),u.TgZ(8,"th",7)(9,"div",8),u._UZ(10,"system-label",10),u.qZA()(),u.TgZ(11,"th",7)(12,"div",8),u._UZ(13,"system-label",11),u.qZA()(),u.TgZ(14,"th",7)(15,"div",8),u._UZ(16,"system-label",12),u.qZA()(),u._UZ(17,"th",13),u.qZA()(),u.TgZ(18,"tbody"),u.YNc(19,Ue,16,8,"tr",14),u.qZA(),u.YNc(20,De,2,1,"tbody",15),u.qZA(),u.YNc(21,Oe,2,0,"div",16),u.BQk()),2&e){const e=u.oxw();u.xp6(19),u.Q6J("ngForOf",e.dictionaryIndexes),u.xp6(1),u.Q6J("ngForOf",e.dictionaryIndexesForTemplates),u.xp6(1),u.Q6J("ngIf","none"!=e.dictionarymanager.changescope)}}function Qe(e,t){1&e&&(u.TgZ(0,"div",26),u._UZ(1,"system-label",27),u.qZA())}let Se=(()=>{var e;class DictionaryManagerIndexes{constructor(e,t,i,n,l,o){(0,s.Z)(this,"dictionarymanager",void 0),(0,s.Z)(this,"metadata",void 0),(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"modal",void 0),(0,s.Z)(this,"injector",void 0),(0,s.Z)(this,"modelutilities",void 0),this.dictionarymanager=e,this.metadata=t,this.language=i,this.modal=n,this.injector=l,this.modelutilities=o}get dictionaryIndexes(){return this.dictionarymanager.currentDictionaryDefinition?this.dictionarymanager.dictionaryindexes.filter((e=>0==e.deleted&&e.sysdictionarydefinition_id==this.dictionarymanager.currentDictionaryDefinition)).sort(((e,t)=>e.name.localeCompare(t.name)?1:-1)):[]}get dictionaryIndexesForTemplates(){let e=[];for(let t of this.dictionarymanager.dictionaryitems.filter((e=>0==e.deleted&&e.sysdictionary_ref_id&&e.sysdictionarydefinition_id==this.dictionarymanager.currentDictionaryDefinition))){let i=this.dictionarymanager.dictionaryindexes.filter((e=>0==e.deleted&&e.sysdictionarydefinition_id==t.sysdictionary_ref_id));i.length>0&&e.push({relatedTemplateId:t.sysdictionary_ref_id,indexes:i})}return e}addIndex(e){e.stopPropagation(),this.modal.openModal("DictionaryManagerIndexAdd",!0,this.injector)}deleteIndex(e,t){e.stopPropagation(),this.modal.prompt("confirm",this.language.getLabel("MSG_DELETE_RECORD","","long"),this.language.getLabel("MSG_DELETE_RECORD")).subscribe((e=>{if(e){this.dictionarymanager.dictionaryindexes.find((e=>e.id==t)).deleted=1}}))}getIndexFields(e){let t=[];for(let i of this.dictionarymanager.dictionaryindexitems.filter((t=>t.sysdictionaryindex_id==e&&0==t.deleted)).sort(((e,t)=>e.sequence>t.sequence?1:-1))){let e=this.dictionarymanager.dictionaryitems.find((e=>e.id==i.sysdictionaryitem_id))?.name;e&&t.push(e)}return t.join()}setActiveId(e){this.dictionarymanager.currentDictionaryIndex=e}}return e=DictionaryManagerIndexes,(0,s.Z)(DictionaryManagerIndexes,"ɵfac",(function(t){return new(t||e)(u.Y36(A),u.Y36(f.Pu),u.Y36(b.d),u.Y36(x.o),u.Y36(u.zs3),u.Y36(Z.A))})),(0,s.Z)(DictionaryManagerIndexes,"ɵcmp",u.Xpm({type:e,selectors:[["dictionary-manager-indexes"]],decls:5,vars:3,consts:[[2,"height","30vh"],[4,"ngIf","ngIfElse"],["selectdefinition",""],[3,"indexid"],[1,"slds-table","slds-table_cell-buffer","slds-table_bordered"],[1,"slds-line-height_reset"],["scope","col",2,"width","2.5rem"],["scope","col",1,""],[1,"slds-truncate"],["label","LBL_NAME"],["label","LBL_TEMPLATE"],["label","LBL_TYPE"],["label","LBL_ITEMS"],["scope","col",2,"width","2rem"],["class","slds-hint-parent",3,"ngClass","click",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],["class","slds-align--absolute-center slds-p-around--small",4,"ngIf"],[1,"slds-hint-parent",3,"ngClass","click"],["size","xx-small",1,"slds-p-right--xx-small",3,"icon"],[3,"ngModel","ngModelChange"],[1,"slds-align--absolute-center",2,"width","2rem"],["size","xx-small","icon","delete",3,"click"],["class","slds-hint-parent",4,"ngFor","ngForOf"],[1,"slds-hint-parent"],[1,"slds-align--absolute-center","slds-p-around--small"],["icon","new","size","x-small",3,"click"],[1,"slds-size--1-of-1","slds-height_full","slds-align--absolute-center"],["label","LBL_SELECT_A_DICTIONARYDEFINITION"]],template:function(e,t){if(1&e&&(u.TgZ(0,"div",0),u.YNc(1,Ie,22,3,"ng-container",1),u.YNc(2,Qe,2,0,"ng-template",null,2,u.W1O),u.qZA(),u._UZ(4,"dictionary-manager-index-details",3)),2&e){const e=u.MAs(3);u.xp6(1),u.Q6J("ngIf",t.dictionarymanager.currentDictionaryDefinition)("ngIfElse",e),u.xp6(3),u.Q6J("indexid",t.dictionarymanager.currentDictionaryIndex)}},dependencies:[n.mk,n.sg,n.O5,l.JJ,l.On,L._,m.r,p,ke],encapsulation:2})),DictionaryManagerIndexes})();function Be(e,t){if(1&e&&(u.TgZ(0,"div",6),u._uU(1),u.qZA()),2&e){const e=u.oxw().$implicit,t=u.oxw(2);u.xp6(1),u.Oqu(t.translateDomainField(t.getDomainFields(e.sysdomaindefinition_id)[0].name,e))}}function Fe(e,t){1&e&&u._UZ(0,"div",6)}function Ye(e,t){if(1&e&&(u.TgZ(0,"tr",12),u._UZ(1,"td",13)(2,"td",14),u.TgZ(3,"td",15)(4,"div",6),u._uU(5),u.qZA()(),u._UZ(6,"td",17),u.qZA()),2&e){const e=t.$implicit,i=u.oxw().$implicit,s=u.oxw(2);u.xp6(5),u.Oqu(s.translateDomainField(e.name,i))}}function Re(e,t){if(1&e&&(u.ynx(0),u.TgZ(1,"tr",12)(2,"td",13)(3,"div",6),u._uU(4),u.qZA()(),u.TgZ(5,"td",14)(6,"div",6),u._uU(7),u.qZA()(),u.TgZ(8,"td",15),u.YNc(9,Be,2,1,"div",16),u.YNc(10,Fe,1,0,"div",16),u.qZA(),u.TgZ(11,"td",17)(12,"div",6),u._uU(13),u.qZA()()(),u.YNc(14,Ye,7,1,"tr",18),u.BQk()),2&e){const e=t.$implicit,i=u.oxw(2);u.xp6(4),u.Oqu(e.name),u.xp6(3),u.Oqu(i.dictionarymanager.getDomainName(e.sysdomaindefinition_id)),u.xp6(2),u.Q6J("ngIf",i.getDomainFields(e.sysdomaindefinition_id)[0]),u.xp6(1),u.Q6J("ngIf",!i.getDomainFields(e.sysdomaindefinition_id)[0]),u.xp6(3),u.Oqu(i.getRefDefinitionName(e.sysdictionarydefinition_id)),u.xp6(1),u.Q6J("ngForOf",i.getDomainFields(e.sysdomaindefinition_id,!1))}}function Ge(e,t){if(1&e&&(u.ynx(0),u.TgZ(1,"table",3)(2,"thead")(3,"tr",4)(4,"th",5)(5,"div",6),u._UZ(6,"system-label",7),u.qZA()(),u.TgZ(7,"th",5)(8,"div",6),u._UZ(9,"system-label",8),u.qZA()(),u.TgZ(10,"th",5)(11,"div",6),u._UZ(12,"system-label",9),u.qZA()(),u.TgZ(13,"th",5)(14,"div",6),u._UZ(15,"system-label",10),u.qZA()()()(),u.TgZ(16,"tbody"),u.YNc(17,Re,15,6,"ng-container",11),u.qZA()(),u.BQk()),2&e){const e=u.oxw();u.xp6(17),u.Q6J("ngForOf",e.dictionaryitems)}}function He(e,t){1&e&&(u.TgZ(0,"div",19),u._UZ(1,"system-label",20),u.qZA())}let Ke=(()=>{var e;class DictionaryManagerFields{constructor(e,t,i,n,l,o){(0,s.Z)(this,"dictionarymanager",void 0),(0,s.Z)(this,"metadata",void 0),(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"modal",void 0),(0,s.Z)(this,"injector",void 0),(0,s.Z)(this,"modelutilities",void 0),(0,s.Z)(this,"dictionaryitem",void 0),this.dictionarymanager=e,this.metadata=t,this.language=i,this.modal=n,this.injector=l,this.modelutilities=o}get dictionaryitems(){return this.dictionarymanager.currentDictionaryDefinition?this.dictionarymanager.getDictionaryDefinitionItems(this.dictionarymanager.currentDictionaryDefinition):[]}getDomainFields(e,t=!0){let i=this.dictionarymanager.domainfields.filter((t=>t.sysdomaindefinition_id==e&&0==t.deleted)).sort(((e,t)=>e.sequence>t.sequence?1:-1));return i?t?i.slice(0,1):i.slice(1):[]}getRefDefinitionName(e){return e!=this.dictionarymanager.currentDictionaryDefinition?this.dictionarymanager.dictionarydefinitions.find((t=>t.id==e))?.name:""}translateDomainField(e,t){return e.replace("{sysdictionaryitems.name}",t.name)}}return e=DictionaryManagerFields,(0,s.Z)(DictionaryManagerFields,"ɵfac",(function(t){return new(t||e)(u.Y36(A),u.Y36(f.Pu),u.Y36(b.d),u.Y36(x.o),u.Y36(u.zs3),u.Y36(Z.A))})),(0,s.Z)(DictionaryManagerFields,"ɵcmp",u.Xpm({type:e,selectors:[["dictionary-manager-fields"]],decls:4,vars:2,consts:[["system-to-bottom",""],[4,"ngIf","ngIfElse"],["selectdefinition",""],[1,"slds-table","slds-table_cell-buffer","slds-table_bordered"],[1,"slds-line-height_reset"],["scope","col",1,""],[1,"slds-truncate"],["label","LBL_NAME"],["label","LBL_DOMAIN"],["label","LBL_FIELD"],["label","LBL_TEMPLATE"],[4,"ngFor","ngForOf"],[1,"slds-hint-parent"],["data-label","Name"],["data-label","Domain"],["data-label","Field"],["class","slds-truncate",4,"ngIf"],["data-label","Template"],["class","slds-hint-parent",4,"ngFor","ngForOf"],[1,"slds-size--1-of-1","slds-height_full","slds-align--absolute-center"],["label","LBL_SELECT_A_DICTIONARYDEFINITION"]],template:function(e,t){if(1&e&&(u.TgZ(0,"div",0),u.YNc(1,Ge,18,1,"ng-container",1),u.YNc(2,He,2,0,"ng-template",null,2,u.W1O),u.qZA()),2&e){const e=u.MAs(3);u.xp6(1),u.Q6J("ngIf",t.dictionarymanager.currentDictionaryDefinition)("ngIfElse",e)}},dependencies:[n.sg,n.O5,L._,w.H],encapsulation:2})),DictionaryManagerFields})();const ze=function(e){return{"slds-is-active":e}},Ve=function(e){return{"slds-hide":e}};let Pe=(()=>{var e;class DictionaryManagerDefinitionTabs{constructor(e,t,i,n,l,o){(0,s.Z)(this,"dictionarymanager",void 0),(0,s.Z)(this,"metadata",void 0),(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"modal",void 0),(0,s.Z)(this,"injector",void 0),(0,s.Z)(this,"modelutilities",void 0),(0,s.Z)(this,"scope","items"),this.dictionarymanager=e,this.metadata=t,this.language=i,this.modal=n,this.injector=l,this.modelutilities=o}}return e=DictionaryManagerDefinitionTabs,(0,s.Z)(DictionaryManagerDefinitionTabs,"ɵfac",(function(t){return new(t||e)(u.Y36(A),u.Y36(f.Pu),u.Y36(b.d),u.Y36(x.o),u.Y36(u.zs3),u.Y36(Z.A))})),(0,s.Z)(DictionaryManagerDefinitionTabs,"ɵcmp",u.Xpm({type:e,selectors:[["dictionary-manager-definition-tabs"]],decls:25,vars:24,consts:[[1,"slds-tabs_scoped"],["role","tablist",1,"slds-tabs_scoped__nav"],["role","presentation",1,"slds-tabs_scoped__item",3,"ngClass","click"],["href","javascript:void(0);","role","tab",1,"slds-tabs_scoped__link"],["label","LBL_ITEMS"],["label","LBL_RELATIONSHIPS"],["label","LBL_INDEXES"],["label","LBL_FIELDS"],["role","tabpanel",1,"slds-tabs_scoped__content","slds-p-around--none",3,"ngClass"],[1,"slds-height_full"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0)(1,"ul",1)(2,"li",2),u.NdJ("click",(function(){return t.scope="items"})),u.TgZ(3,"a",3),u._UZ(4,"system-label",4),u.qZA()(),u.TgZ(5,"li",2),u.NdJ("click",(function(){return t.scope="relationships"})),u.TgZ(6,"a",3),u._UZ(7,"system-label",5),u.qZA()(),u.TgZ(8,"li",2),u.NdJ("click",(function(){return t.scope="indexes"})),u.TgZ(9,"a",3),u._UZ(10,"system-label",6),u.qZA()(),u.TgZ(11,"li",2),u.NdJ("click",(function(){return t.scope="fields"})),u.TgZ(12,"a",3),u._UZ(13,"system-label",7),u.qZA()()(),u.TgZ(14,"div",8)(15,"div",9),u._UZ(16,"dictionary-manager-items"),u.qZA()(),u.TgZ(17,"div",8)(18,"div",9),u._UZ(19,"dictionary-manager-relationships"),u.qZA()(),u.TgZ(20,"div",8)(21,"div",9),u._UZ(22,"dictionary-manager-indexes"),u.qZA()(),u.TgZ(23,"div",8),u._UZ(24,"dictionary-manager-fields"),u.qZA()()),2&e&&(u.xp6(2),u.Q6J("ngClass",u.VKq(8,ze,"items"==t.scope)),u.xp6(3),u.Q6J("ngClass",u.VKq(10,ze,"relationships"==t.scope)),u.xp6(3),u.Q6J("ngClass",u.VKq(12,ze,"indexes"==t.scope)),u.xp6(3),u.Q6J("ngClass",u.VKq(14,ze,"fields"==t.scope)),u.xp6(3),u.Q6J("ngClass",u.VKq(16,Ve,"items"!=t.scope)),u.xp6(3),u.Q6J("ngClass",u.VKq(18,Ve,"relationships"!=t.scope)),u.xp6(3),u.Q6J("ngClass",u.VKq(20,Ve,"indexes"!=t.scope)),u.xp6(3),u.Q6J("ngClass",u.VKq(22,Ve,"fields"!=t.scope)))},dependencies:[n.mk,L._,X,Te,Se,Ke],encapsulation:2})),DictionaryManagerDefinitionTabs})();var $e=i(4561);const je=["*",[["workbench-header-controls"]]],We=["*","workbench-header-controls"];let Xe=(()=>{var e;class WorkbenchHeader{constructor(e){(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"titlelabel",void 0),(0,s.Z)(this,"icon","custom"),this.language=e}}return e=WorkbenchHeader,(0,s.Z)(WorkbenchHeader,"ɵfac",(function(t){return new(t||e)(u.Y36(b.d))})),(0,s.Z)(WorkbenchHeader,"ɵcmp",u.Xpm({type:e,selectors:[["workbench-header"]],inputs:{titlelabel:"titlelabel",icon:"icon"},ngContentSelectors:We,decls:14,vars:2,consts:[[1,"slds-p-around--medium","slds-theme--shade","slds-border--bottom"],[1,"slds-page-header__row"],[1,"slds-page-header__col-title"],[1,"slds-media"],[3,"icon"],[1,"slds-media__body"],[1,"slds-page-header__name"],[1,"slds-page-header__name-title"],[1,"slds-page-header__title","slds-truncate"],[3,"label"],[1,"slds-page-header__name-meta"]],template:function(e,t){1&e&&(u.F$t(je),u.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),u._UZ(4,"system-icon",4),u.TgZ(5,"div",5)(6,"div",6)(7,"div",7)(8,"h1")(9,"span",8),u._UZ(10,"system-label",9),u.qZA()()()(),u.TgZ(11,"p",10),u.Hsn(12),u.qZA()()()(),u.Hsn(13,1),u.qZA()()),2&e&&(u.xp6(4),u.Q6J("icon",t.icon),u.xp6(6),u.Q6J("label",t.titlelabel))},dependencies:[$e.f,L._],encapsulation:2})),WorkbenchHeader})();const et=["*"];let tt=(()=>{var e;class WorkbenchHeaderControls{}return e=WorkbenchHeaderControls,(0,s.Z)(WorkbenchHeaderControls,"ɵfac",(function(t){return new(t||e)})),(0,s.Z)(WorkbenchHeaderControls,"ɵcmp",u.Xpm({type:e,selectors:[["workbench-header-controls"]],ngContentSelectors:et,decls:4,vars:0,consts:[[1,"slds-page-header__col-actions"],[1,"slds-page-header__controls"],[1,"slds-page-header__control"]],template:function(e,t){1&e&&(u.F$t(),u.TgZ(0,"div",0)(1,"div",1)(2,"div",2),u.Hsn(3),u.qZA()()())},encapsulation:2})),WorkbenchHeaderControls})();function it(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"li",10),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw();return u.KtG(t.migrate())})),u.TgZ(1,"a",11)(2,"span",12),u._UZ(3,"system-label",21),u.qZA()()()}}let st=(()=>{var e;class DictionaryManager{constructor(e,t,i,n,l){(0,s.Z)(this,"dictionarymanager",void 0),(0,s.Z)(this,"modal",void 0),(0,s.Z)(this,"backend",void 0),(0,s.Z)(this,"toast",void 0),(0,s.Z)(this,"injector",void 0),this.dictionarymanager=e,this.modal=t,this.backend=i,this.toast=n,this.injector=l}migrate(){this.modal.openModal("DictionaryManagerMigrateDefinitionModal",!0,this.injector)}repairDB(){let e=this.modal.await("LBL_LOADING");this.backend.getRequest("admin/repair/sql").subscribe((t=>{e.emit(!0);let i=t.sql,s=t.wholeSQL;t&&this.modal.openModal("AdministrationDictRepairModal",!0,this.injector).subscribe((e=>{e.instance.sql=i,e.instance.wholeSQL=s}))}))}repairDBCache(){this.modal.confirm("are you sure you want to rebuild the dictionary data cache?","rebuild dictionary Cache").subscribe({next:e=>{if(e){let e=this.modal.await("LBL_LOADING");this.backend.getRequest("admin/repair/cachedb").subscribe((t=>{e.emit(!0),t?this.toast.sendToast("LBL_CACHE_REPAIRED","success"):this.toast.sendToast("LBL_ERROR","error")}))}}})}convertCharset(){this.modal.openModal("AdministrationDictRepairConvertDBCharsetModal",!0,this.injector)}repairDBColumns(){this.modal.openModal("AdministrationDictRepairDbColumnsModal",!0,this.injector)}}return e=DictionaryManager,(0,s.Z)(DictionaryManager,"ɵfac",(function(t){return new(t||e)(u.Y36(A),u.Y36(x.o),u.Y36(h.y),u.Y36(v.A),u.Y36(u.zs3))})),(0,s.Z)(DictionaryManager,"ɵcmp",u.Xpm({type:e,selectors:[["dictionary-manager"]],features:[u._Bn([A])],decls:33,vars:1,consts:[["system-to-bottom-noscroll",""],["titlelabel","LBL_DICTIONARY_MANAGER"],["role","group",1,"slds-button-group"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_SAVE"],["system-dropdown-trigger","",1,"slds-dropdown-trigger","slds-dropdown-trigger_click","slds-button_last"],[1,"slds-button","slds-button_icon","slds-button_icon-border-filled"],["icon","down"],[1,"slds-dropdown","slds-dropdown_right","slds-dropdown_actions"],["role","menu",1,"slds-dropdown__list"],["role","presentation",1,"slds-dropdown__item",3,"click"],["href","javascript:void(null)","role","menuitem"],[1,"slds-truncate"],["label","LBL_REPAIR_DATABASE"],["label","LBL_REPAIR_CACHE"],["label","LBL_CONVERT_DB_CHARSET"],["label","LBL_REPAIR_DBCOLUMNS"],["class","slds-dropdown__item","role","presentation",3,"click",4,"ngIf"],[1,"slds-grid"],[1,"slds-size--1-of-3"],[1,"slds-size--2-of-3","slds-theme--default","slds-border--left"],["label","LBL_MIGRATE"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0)(1,"workbench-header",1)(2,"workbench-header-controls")(3,"div",2)(4,"button",3),u.NdJ("click",(function(){return t.dictionarymanager.save()})),u._UZ(5,"system-label",4),u.qZA(),u.TgZ(6,"div",5)(7,"button",6),u._UZ(8,"system-button-icon",7),u.qZA(),u.TgZ(9,"div",8)(10,"ul",9)(11,"li",10),u.NdJ("click",(function(){return t.repairDB()})),u.TgZ(12,"a",11)(13,"span",12),u._UZ(14,"system-label",13),u.qZA()()(),u.TgZ(15,"li",10),u.NdJ("click",(function(){return t.repairDBCache()})),u.TgZ(16,"a",11)(17,"span",12),u._UZ(18,"system-label",14),u.qZA()()(),u.TgZ(19,"li",10),u.NdJ("click",(function(){return t.convertCharset()})),u.TgZ(20,"a",11)(21,"span",12),u._UZ(22,"system-label",15),u.qZA()()(),u.TgZ(23,"li",10),u.NdJ("click",(function(){return t.repairDBColumns()})),u.TgZ(24,"a",11)(25,"span",12),u._UZ(26,"system-label",16),u.qZA()()(),u.YNc(27,it,4,0,"li",17),u.qZA()()()()()(),u.TgZ(28,"div",18)(29,"div",19),u._UZ(30,"dictionary-manager-definitions"),u.qZA(),u.TgZ(31,"div",20),u._UZ(32,"dictionary-manager-definition-tabs"),u.qZA()()()),2&e&&(u.xp6(27),u.Q6J("ngIf",null==t.dictionarymanager.settings?null:t.dictionarymanager.settings.migration_enabled))},dependencies:[n.O5,T.J,L._,q.l,C.t,I,Pe,Xe,tt],encapsulation:2})),DictionaryManager})();var nt=i(9621),lt=i(3499),ot=i(5767),at=i(1916);function dt(e,t){if(1&e&&(u.TgZ(0,"div",34),u._uU(1),u.qZA()),2&e){const e=t.$implicit;u.xp6(1),u.Oqu(e.message)}}function rt(e,t){if(1&e&&(u.TgZ(0,"div",34),u._uU(1),u.qZA()),2&e){const e=t.$implicit;u.xp6(1),u.Oqu(e.message)}}function ct(e,t){1&e&&(u.TgZ(0,"option",35),u._UZ(1,"system-label",36),u.qZA())}function gt(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div",1)(1,"div",16)(2,"label",3)(3,"abbr",4),u._uU(4,"* "),u.qZA(),u._UZ(5,"system-label",37),u.qZA(),u.TgZ(6,"div",11)(7,"select",12),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw();return u.KtG(i.dictionarydefinition.sysdictionary_contenttype=t)})),u.TgZ(8,"option",38),u._uU(9,"config"),u.qZA(),u.TgZ(10,"option",39),u._uU(11,"custom config"),u.qZA()()()()()}if(2&e){const e=u.oxw();u.xp6(7),u.Q6J("ngModel",e.dictionarydefinition.sysdictionary_contenttype)}}const ut=function(e){return{"slds-has-error":e}};let mt=(()=>{var e;class DictionaryManagerAddDefinitionModal{constructor(e,t,i,n,l){(0,s.Z)(this,"dictionarymanager",void 0),(0,s.Z)(this,"metadata",void 0),(0,s.Z)(this,"modal",void 0),(0,s.Z)(this,"modelutilities",void 0),(0,s.Z)(this,"injector",void 0),(0,s.Z)(this,"self",void 0),(0,s.Z)(this,"dictionarydefinition",void 0),(0,s.Z)(this,"messages",[]),this.dictionarymanager=e,this.metadata=t,this.modal=i,this.modelutilities=n,this.injector=l,this.dictionarydefinition={id:this.modelutilities.generateGuid(),name:"",tablename:"",sysdictionary_type:"module",scope:this.dictionarymanager.defaultScope,deleted:0,status:"d"}}close(){this.self.destroy()}getMessages(e){return this.messages.filter((t=>t.field==e))}get canSave(){return this.messages=[],this.dictionarydefinition.name||this.messages.push({field:"name",message:"name must be entered"}),this.dictionarydefinition.sysdictionary_type||this.messages.push({field:"sysdictionary_type",message:"type must be specified"}),"template"==this.dictionarydefinition.sysdictionary_type||this.dictionarydefinition.tablename||this.messages.push({field:"tablename",message:"tablename must be entered"}),this.dictionarymanager.dictionarydefinitions.find((e=>e.name==this.dictionarydefinition.name))&&this.messages.push({field:"name",message:"name exists already"}),this.dictionarydefinition.tablename&&this.dictionarymanager.dictionarydefinitions.find((e=>e.tablename==this.dictionarydefinition.tablename))&&this.messages.push({field:"tablename",message:"table exists already"}),this.dictionarydefinition.tablename&&this.dictionarymanager.reservedwords&&this.dictionarymanager.reservedwords.indexOf(this.dictionarydefinition.tablename.toUpperCase())>=0&&this.messages.push({field:"tablename",message:"tablename cannot be used (reserved word)"}),0==this.messages.length}save(){this.canSave&&(this.dictionarydefinition.id=this.modelutilities.generateGuid(),this.dictionarymanager.dictionarydefinitions.push(this.dictionarydefinition),this.close())}}return e=DictionaryManagerAddDefinitionModal,(0,s.Z)(DictionaryManagerAddDefinitionModal,"ɵfac",(function(t){return new(t||e)(u.Y36(A),u.Y36(f.Pu),u.Y36(x.o),u.Y36(Z.A),u.Y36(u.zs3))})),(0,s.Z)(DictionaryManagerAddDefinitionModal,"ɵcmp",u.Xpm({type:e,selectors:[["ng-component"]],decls:62,vars:17,consts:[[3,"close"],[1,"slds-grid"],[1,"slds-form-element__control","slds-size--1-of-2","slds-p-right--xxx-small",3,"ngClass"],[1,"slds-form-element__label"],[1,"slds-required"],["label","LBL_NAME"],[3,"ngModel","ngModelChange"],["class","slds-form-element__help",4,"ngFor","ngForOf"],["label","LBL_TABLE"],[1,"slds-form-element__control","slds-size--1-of-4","slds-p-left--xxx-small"],["label","LBL_SCOPE"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],["value","g",4,"ngIf"],["value","c"],["label","LBL_CUSTOM"],[1,"slds-large-size--1-of-4","slds-p-right--xxx-small","slds-form-element__control"],["label","LBL_TYPE"],["value","module"],["value","metadata"],["value","template"],["value","relationship"],["value","system"],[1,"slds-size--1-of-4","slds-p-right--xxx-small","slds-form-element__control"],["label","LBL_PACKAGE"],[1,"slds-size--1-of-4","slds-p-left--xxx-small","slds-form-element__control"],["label","LBL_VERSION"],["class","slds-grid",4,"ngIf"],["label","LBL_COMMENT"],["maxlength","150",3,"ngModel"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CLOSE"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_SAVE"],[1,"slds-form-element__help"],["value","g"],["label","LBL_GLOBAL"],["label","LBL_CONTENT_TYPE"],["value","config"],["value","custom_config"]],template:function(e,t){1&e&&(u.TgZ(0,"system-modal")(1,"system-modal-header",0),u.NdJ("close",(function(){return t.close()})),u._uU(2,"Add Dictionary Definition"),u.qZA(),u.TgZ(3,"system-modal-content")(4,"div",1)(5,"div",2)(6,"label",3)(7,"abbr",4),u._uU(8,"* "),u.qZA(),u._UZ(9,"system-label",5),u.qZA(),u.TgZ(10,"system-input-text",6),u.NdJ("ngModelChange",(function(e){return t.dictionarydefinition.name=e})),u.qZA(),u.YNc(11,dt,2,1,"div",7),u.qZA(),u.TgZ(12,"div",2)(13,"label",3),u._UZ(14,"system-label",8),u.qZA(),u.TgZ(15,"system-input-text",6),u.NdJ("ngModelChange",(function(e){return t.dictionarydefinition.tablename=e})),u.qZA(),u.YNc(16,rt,2,1,"div",7),u.qZA()(),u.TgZ(17,"div",1)(18,"div",9)(19,"label",3)(20,"abbr",4),u._uU(21,"* "),u.qZA(),u._UZ(22,"system-label",10),u.qZA(),u.TgZ(23,"div",11)(24,"select",12),u.NdJ("ngModelChange",(function(e){return t.dictionarydefinition.scope=e})),u.YNc(25,ct,2,0,"option",13),u.TgZ(26,"option",14),u._UZ(27,"system-label",15),u.qZA()()()(),u.TgZ(28,"div",16)(29,"label",3)(30,"abbr",4),u._uU(31,"* "),u.qZA(),u._UZ(32,"system-label",17),u.qZA(),u.TgZ(33,"div",11)(34,"select",12),u.NdJ("ngModelChange",(function(e){return t.dictionarydefinition.sysdictionary_type=e})),u.TgZ(35,"option",18),u._uU(36,"module"),u.qZA(),u.TgZ(37,"option",19),u._uU(38,"metadata"),u.qZA(),u.TgZ(39,"option",20),u._uU(40,"template"),u.qZA(),u.TgZ(41,"option",21),u._uU(42,"relationship"),u.qZA(),u.TgZ(43,"option",22),u._uU(44,"system"),u.qZA()()()(),u.TgZ(45,"div",23)(46,"label",3),u._UZ(47,"system-label",24),u.qZA(),u.TgZ(48,"system-input-text",6),u.NdJ("ngModelChange",(function(e){return t.dictionarydefinition.package=e})),u.qZA()(),u.TgZ(49,"div",25)(50,"label",3),u._UZ(51,"system-label",26),u.qZA(),u.TgZ(52,"system-input-text",6),u.NdJ("ngModelChange",(function(e){return t.dictionarydefinition.version=e})),u.qZA()()(),u.YNc(53,gt,12,1,"div",27),u.TgZ(54,"label",3),u._UZ(55,"system-label",28),u.qZA(),u._UZ(56,"system-input-text",29),u.qZA(),u.TgZ(57,"system-modal-footer")(58,"button",30),u.NdJ("click",(function(){return t.close()})),u._UZ(59,"system-label",31),u.qZA(),u.TgZ(60,"button",32),u.NdJ("click",(function(){return t.save()})),u._UZ(61,"system-label",33),u.qZA()()()),2&e&&(u.xp6(5),u.Q6J("ngClass",u.VKq(13,ut,t.getMessages("name").length>0)),u.xp6(5),u.Q6J("ngModel",t.dictionarydefinition.name),u.xp6(1),u.Q6J("ngForOf",t.getMessages("name")),u.xp6(1),u.Q6J("ngClass",u.VKq(15,ut,t.getMessages("tablename").length>0)),u.xp6(3),u.Q6J("ngModel",t.dictionarydefinition.tablename),u.xp6(1),u.Q6J("ngForOf",t.getMessages("tablename")),u.xp6(8),u.Q6J("ngModel",t.dictionarydefinition.scope),u.xp6(1),u.Q6J("ngIf","all"==t.dictionarymanager.changescope),u.xp6(9),u.Q6J("ngModel",t.dictionarydefinition.sysdictionary_type),u.xp6(14),u.Q6J("ngModel",t.dictionarydefinition.package),u.xp6(4),u.Q6J("ngModel",t.dictionarydefinition.version),u.xp6(1),u.Q6J("ngIf","metadata"==t.dictionarydefinition.sysdictionary_type),u.xp6(3),u.Q6J("ngModel",t.dictionarydefinition.description))},dependencies:[n.mk,n.sg,n.O5,l.YN,l.Kr,l.EJ,l.JJ,l.nD,l.On,J.Z,L._,nt.j,lt.x,ot.p,at.y],encapsulation:2})),DictionaryManagerAddDefinitionModal})();var pt=i(9901);function ht(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"tr")(1,"td")(2,"system-input-radio",21),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw(3);return u.KtG(i.selectedtable=t)})),u.qZA()(),u.TgZ(3,"td")(4,"div",22),u._uU(5),u.qZA()(),u.TgZ(6,"td")(7,"div",22),u._uU(8),u.qZA()(),u.TgZ(9,"td"),u._UZ(10,"system-checkbox",23),u.qZA(),u.TgZ(11,"td"),u._UZ(12,"system-checkbox",23),u.qZA()()}if(2&e){const e=t.$implicit,i=u.oxw(3);u.xp6(2),u.Q6J("value",e.sysdictionarytablename)("ngModel",i.selectedtable),u.xp6(3),u.Oqu(e.sysdictionaryname),u.xp6(3),u.Oqu(e.sysdictionarytablename),u.xp6(2),u.Q6J("ngModel","1"==e.sysdictionarytableaudited),u.xp6(2),u.Q6J("ngModel",!!e.sysdictionarydefinition_id)}}function ft(e,t){if(1&e&&(u.TgZ(0,"div",13)(1,"table",14)(2,"thead")(3,"tr",15),u._UZ(4,"th",16),u.TgZ(5,"th",17)(6,"div",18),u._uU(7,"Dictionaryname"),u.qZA()(),u.TgZ(8,"th",17)(9,"div",18),u._uU(10,"Tablename"),u.qZA()(),u.TgZ(11,"th",19)(12,"div",18),u._uU(13,"audited"),u.qZA()(),u.TgZ(14,"th",19)(15,"div",18),u._uU(16,"defined"),u.qZA()()()(),u.TgZ(17,"tbody"),u.YNc(18,ht,13,6,"tr",20),u.qZA()()()),2&e){const e=u.oxw(2);u.xp6(18),u.Q6J("ngForOf",e._tables)}}function bt(e,t){1&e&&(u.TgZ(0,"option",52),u._UZ(1,"system-label",53),u.qZA())}function Zt(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div",25)(1,"div",39)(2,"label",27)(3,"abbr",32),u._uU(4,"* "),u.qZA(),u._UZ(5,"system-label",54),u.qZA(),u.TgZ(6,"div",34)(7,"select",35),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw(3);return u.KtG(i.dictionarydefinition.sysdictionary_contenttype=t)})),u.TgZ(8,"option",55),u._uU(9,"config"),u.qZA(),u.TgZ(10,"option",56),u._uU(11,"custom config"),u.qZA()()()()()}if(2&e){const e=u.oxw(3);u.xp6(7),u.Q6J("ngModel",e.dictionarydefinition.sysdictionary_contenttype)}}function _t(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div",24)(1,"div",25)(2,"div",26)(3,"label",27),u._UZ(4,"system-label",28),u.qZA(),u.TgZ(5,"system-input-text",29),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw(2);return u.KtG(i.dictionarydefinition.name=t)})),u.qZA()(),u.TgZ(6,"div",26)(7,"label",27),u._UZ(8,"system-label",30),u.qZA(),u.TgZ(9,"system-input-text",29),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw(2);return u.KtG(i.dictionarydefinition.tablename=t)})),u.qZA()()(),u.TgZ(10,"div",25)(11,"div",31)(12,"label",27)(13,"abbr",32),u._uU(14,"* "),u.qZA(),u._UZ(15,"system-label",33),u.qZA(),u.TgZ(16,"div",34)(17,"select",35),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw(2);return u.KtG(i.dictionarydefinition.scope=t)})),u.YNc(18,bt,2,0,"option",36),u.TgZ(19,"option",37),u._UZ(20,"system-label",38),u.qZA()()()(),u.TgZ(21,"div",39)(22,"label",27)(23,"abbr",32),u._uU(24,"* "),u.qZA(),u._UZ(25,"system-label",40),u.qZA(),u.TgZ(26,"div",34)(27,"select",35),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw(2);return u.KtG(i.dictionarydefinition.sysdictionary_type=t)})),u.TgZ(28,"option",41),u._uU(29,"module"),u.qZA(),u.TgZ(30,"option",42),u._uU(31,"metadata"),u.qZA(),u.TgZ(32,"option",43),u._uU(33,"template"),u.qZA(),u.TgZ(34,"option",43),u._uU(35,"relationship"),u.qZA()()()(),u.TgZ(36,"div",44)(37,"label",27),u._UZ(38,"system-label",45),u.qZA(),u.TgZ(39,"system-input-text",46),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw(2);return u.KtG(i.dictionarydefinition.package=t)})),u.qZA()(),u.TgZ(40,"div",47)(41,"label",27),u._UZ(42,"system-label",48),u.qZA(),u.TgZ(43,"system-input-text",46),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw(2);return u.KtG(i.dictionarydefinition.version=t)})),u.qZA()()(),u.YNc(44,Zt,12,1,"div",49),u.TgZ(45,"label",27),u._UZ(46,"system-label",50),u.qZA(),u._UZ(47,"system-input-text",51),u.qZA()}if(2&e){const e=u.oxw(2);u.xp6(5),u.Q6J("ngModel",e.dictionarydefinition.name),u.xp6(4),u.Q6J("ngModel",e.dictionarydefinition.tablename),u.xp6(8),u.Q6J("ngModel",e.dictionarydefinition.scope),u.xp6(1),u.Q6J("ngIf","all"==e.dictionarymanager.changescope),u.xp6(9),u.Q6J("ngModel",e.dictionarydefinition.sysdictionary_type),u.xp6(12),u.Q6J("ngModel",e.dictionarydefinition.package),u.xp6(4),u.Q6J("ngModel",e.dictionarydefinition.version),u.xp6(1),u.Q6J("ngIf","metadata"==e.dictionarydefinition.sysdictionary_type),u.xp6(3),u.Q6J("ngModel",e.dictionarydefinition.description)}}function yt(e,t){if(1&e&&(u.TgZ(0,"span"),u._uU(1),u.qZA()),2&e){const e=u.oxw().$implicit;u.xp6(1),u.hij("(",e.fielddefinition.len,")")}}function vt(e,t){1&e&&(u.TgZ(0,"option",52),u._UZ(1,"system-label",53),u.qZA())}function xt(e,t){if(1&e&&(u.TgZ(0,"option",66),u._uU(1),u.qZA()),2&e){const e=t.$implicit;u.Q6J("value",e.id),u.xp6(1),u.Oqu(e.name)}}function Mt(e,t){if(1&e&&(u.TgZ(0,"tr"),u._UZ(1,"td"),u.TgZ(2,"td",67),u._uU(3),u.qZA(),u.TgZ(4,"td",69),u._uU(5),u.qZA()()),2&e){const e=t.$implicit;u.xp6(3),u.hij(" ",e.key," "),u.xp6(2),u.hij(" ",e.value," ")}}function At(e,t){if(1&e){const e=u.EpF();u.ynx(0),u.TgZ(1,"tr"),u._UZ(2,"td"),u.TgZ(3,"td",67),u._uU(4," package / version "),u.qZA(),u.TgZ(5,"td",68)(6,"system-input-text",61),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw().$implicit;return u.KtG(i.package=t)})),u.qZA()(),u.TgZ(7,"td",68)(8,"system-input-text",61),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw().$implicit;return u.KtG(i.version=t)})),u.qZA()()(),u.TgZ(9,"tr"),u._UZ(10,"td"),u.TgZ(11,"td",67),u._uU(12," Comment "),u.qZA(),u.TgZ(13,"td",69)(14,"system-input-text",61),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw().$implicit;return u.KtG(i.fielddefinition.comment=t)})),u.qZA()()(),u.TgZ(15,"tr"),u._UZ(16,"td"),u.TgZ(17,"td",67),u._uU(18," audited "),u.qZA(),u.TgZ(19,"td",69)(20,"system-checkbox",61),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw().$implicit;return u.KtG(i.fielddefinition.audited=t)})),u.qZA()()(),u.TgZ(21,"tr"),u._UZ(22,"td"),u.TgZ(23,"td",67),u._uU(24," reportable "),u.qZA(),u.TgZ(25,"td",69)(26,"system-checkbox",61),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw().$implicit;return u.KtG(i.fielddefinition.reportable=t)})),u.qZA()()(),u.TgZ(27,"tr"),u._UZ(28,"td"),u.TgZ(29,"td",67),u._uU(30," duplicate merge "),u.qZA(),u.TgZ(31,"td",69)(32,"system-checkbox",61),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw().$implicit;return u.KtG(i.fielddefinition.duplicate_merge=t)})),u.qZA()()(),u.YNc(33,Mt,6,2,"tr",20),u.BQk()}if(2&e){const e=u.oxw().$implicit,t=u.oxw(3);u.xp6(6),u.Q6J("disabled",!!e.sysdomainfield_id)("ngModel",e.package),u.xp6(2),u.Q6J("disabled",!!e.sysdomainfield_id)("ngModel",e.version),u.xp6(6),u.Q6J("disabled",!!e.sysdomainfield_id)("ngModel",e.fielddefinition.comment),u.xp6(6),u.Q6J("disabled",!!e.sysdomainfield_id)("ngModel",e.fielddefinition.audited),u.xp6(6),u.Q6J("disabled",!!e.sysdomainfield_id)("ngModel",e.fielddefinition.reportable),u.xp6(6),u.Q6J("disabled",!!e.sysdomainfield_id)("ngModel",e.fielddefinition.duplicate_merge),u.xp6(1),u.Q6J("ngForOf",t.getFieldDefinitions(e.fielddefinition))}}function Tt(e,t){if(1&e){const e=u.EpF();u.ynx(0),u.TgZ(1,"tr")(2,"td")(3,"system-checkbox",61),u.NdJ("ngModelChange",(function(t){const i=u.CHM(e).$implicit;return u.KtG(i.selected=t)})),u.qZA()(),u.TgZ(4,"td")(5,"div",22),u._uU(6),u.qZA()(),u.TgZ(7,"td"),u._UZ(8,"system-checkbox",23),u.qZA(),u.TgZ(9,"td")(10,"div",22),u._uU(11),u.YNc(12,yt,2,1,"span",62),u.qZA()(),u.TgZ(13,"td"),u._UZ(14,"system-checkbox",23),u.qZA(),u.TgZ(15,"td")(16,"div",34)(17,"select",63),u.NdJ("ngModelChange",(function(t){const i=u.CHM(e).$implicit;return u.KtG(i.scope=t)})),u.YNc(18,vt,2,0,"option",36),u.TgZ(19,"option",37),u._UZ(20,"system-label",38),u.qZA()()()(),u.TgZ(21,"td")(22,"system-input-label",61),u.NdJ("ngModelChange",(function(t){const i=u.CHM(e).$implicit;return u.KtG(i.fielddefinition.vname=t)})),u.qZA()(),u.TgZ(23,"td")(24,"system-checkbox",61),u.NdJ("ngModelChange",(function(t){const i=u.CHM(e).$implicit;return u.KtG(i.fielddefinition.required=t)})),u.qZA()(),u.TgZ(25,"td")(26,"div",34)(27,"select",63),u.NdJ("ngModelChange",(function(t){const i=u.CHM(e).$implicit;return u.KtG(i.sysdomaindefinition_id=t)})),u.YNc(28,xt,2,2,"option",64),u.qZA()()(),u.TgZ(29,"td")(30,"button",65),u.NdJ("click",(function(){const t=u.CHM(e).$implicit;return u.KtG(t.showdetails=!t.showdetails)})),u._UZ(31,"system-button-icon",60),u.qZA()()(),u.YNc(32,At,34,13,"ng-container",62),u.BQk()}if(2&e){const e=t.$implicit,i=u.oxw(3);u.xp6(3),u.Q6J("disabled",!!e.sysdomainfield_id)("ngModel",e.selected),u.xp6(3),u.Oqu(e.fieldname),u.xp6(2),u.Q6J("ngModel",!!e.sysdomainfield_id),u.xp6(3),u.Oqu(e.fieldtype),u.xp6(1),u.Q6J("ngIf",e.fielddefinition.len),u.xp6(2),u.Q6J("ngModel",e.fielddefinition.source&&"non-db"==e.fielddefinition.source),u.xp6(3),u.Q6J("disabled",!!e.sysdomainfield_id)("ngModel",e.scope),u.xp6(1),u.Q6J("ngIf","all"==i.dictionarymanager.changescope&&"g"==i.dictionarydefinition.scope),u.xp6(4),u.Q6J("disabled",!!e.sysdomainfield_id)("ngModel",e.fielddefinition.vname),u.xp6(2),u.Q6J("disabled",!!e.sysdomainfield_id)("ngModel",e.fielddefinition.required),u.xp6(3),u.Q6J("disabled",!!e.sysdomainfield_id)("ngModel",e.sysdomaindefinition_id),u.xp6(1),u.Q6J("ngForOf",i.domains),u.xp6(3),u.Q6J("icon",e.showdetails?"chevronup":"chevrondown"),u.xp6(1),u.Q6J("ngIf",e.showdetails)}}function Lt(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div",13)(1,"table",14)(2,"thead")(3,"tr",15)(4,"th",16)(5,"system-checkbox",57),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw(2);return u.KtG(i.allSelected=t)})),u.qZA()(),u.TgZ(6,"th",17)(7,"div",18),u._uU(8,"name"),u.qZA()(),u.TgZ(9,"th",16)(10,"div",58),u._uU(11,"defined"),u.qZA()(),u.TgZ(12,"th",17)(13,"div",58),u._uU(14,"type"),u.qZA()(),u.TgZ(15,"th",16)(16,"div",58),u._uU(17,"non DB"),u.qZA()(),u.TgZ(18,"th",17)(19,"div",58),u._uU(20,"scope"),u.qZA()(),u.TgZ(21,"th",17)(22,"div",58),u._uU(23,"label"),u.qZA()(),u.TgZ(24,"th",17)(25,"div",58),u._uU(26,"required"),u.qZA()(),u.TgZ(27,"th",17)(28,"div",58),u._uU(29,"domain"),u.qZA()(),u.TgZ(30,"th",16)(31,"button",59),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw(2);return u.KtG(t.toggleAllDetails())})),u._UZ(32,"system-button-icon",60),u.qZA()()()(),u.TgZ(33,"tbody"),u.YNc(34,Tt,33,19,"ng-container",20),u.qZA()()()}if(2&e){const e=u.oxw(2);u.xp6(5),u.Q6J("ngModel",e.allSelected),u.xp6(27),u.Q6J("icon",e.allExpanded?"chevronup":"chevrondown"),u.xp6(2),u.Q6J("ngForOf",e._fields)}}function qt(e,t){1&e&&(u.TgZ(0,"option",52),u._UZ(1,"system-label",53),u.qZA())}function Ct(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"tr")(1,"td")(2,"system-checkbox",61),u.NdJ("ngModelChange",(function(t){const i=u.CHM(e).$implicit;return u.KtG(i.selected=t)})),u.qZA()(),u.TgZ(3,"td")(4,"system-input-text",46),u.NdJ("ngModelChange",(function(t){const i=u.CHM(e).$implicit;return u.KtG(i.name=t)})),u.qZA()(),u.TgZ(5,"td")(6,"div",34)(7,"select",35),u.NdJ("ngModelChange",(function(t){const i=u.CHM(e).$implicit;return u.KtG(i.type=t)})),u.TgZ(8,"option",71),u._uU(9,"primary"),u.qZA(),u.TgZ(10,"option",72),u._uU(11,"index"),u.qZA(),u.TgZ(12,"option",73),u._uU(13,"unique"),u.qZA()()()(),u.TgZ(14,"td")(15,"div",34)(16,"select",35),u.NdJ("ngModelChange",(function(t){const i=u.CHM(e).$implicit;return u.KtG(i.scope=t)})),u.YNc(17,qt,2,0,"option",36),u.TgZ(18,"option",37),u._UZ(19,"system-label",38),u.qZA()()()(),u.TgZ(20,"td")(21,"system-input-text",46),u.NdJ("ngModelChange",(function(t){const i=u.CHM(e).$implicit;return u.KtG(i.package=t)})),u.qZA()(),u.TgZ(22,"td")(23,"system-input-text",46),u.NdJ("ngModelChange",(function(t){const i=u.CHM(e).$implicit;return u.KtG(i.version=t)})),u.qZA()(),u.TgZ(24,"td"),u._uU(25),u.qZA()()}if(2&e){const e=t.$implicit,i=u.oxw(3);u.xp6(2),u.Q6J("disabled",!i.canAddIndex(e.fields))("ngModel",e.selected),u.xp6(2),u.Q6J("ngModel",e.name),u.xp6(3),u.Q6J("ngModel",e.type),u.xp6(9),u.Q6J("ngModel",e.scope),u.xp6(1),u.Q6J("ngIf","all"==i.dictionarymanager.changescope&&"g"==i.dictionarydefinition.scope),u.xp6(4),u.Q6J("ngModel",e.package),u.xp6(2),u.Q6J("ngModel",e.version),u.xp6(2),u.Oqu(e.fields.join(", "))}}function Jt(e,t){if(1&e&&(u.TgZ(0,"div",13)(1,"table",14)(2,"thead")(3,"tr",15),u._UZ(4,"th",16),u.TgZ(5,"th",17)(6,"div",70),u._uU(7,"name"),u.qZA()(),u.TgZ(8,"th",17)(9,"div",70),u._uU(10,"type"),u.qZA()(),u.TgZ(11,"th",17)(12,"div",70),u._uU(13,"scope"),u.qZA()(),u.TgZ(14,"th",17)(15,"div",70),u._uU(16,"package"),u.qZA()(),u.TgZ(17,"th",17)(18,"div",70),u._uU(19,"version"),u.qZA()(),u.TgZ(20,"th",17)(21,"div",70),u._uU(22,"fields"),u.qZA()()()(),u.TgZ(23,"tbody"),u.YNc(24,Ct,26,9,"tr",20),u.qZA()()()),2&e){const e=u.oxw(2);u.xp6(24),u.Q6J("ngForOf",e.indices)}}function Nt(e,t){if(1&e&&(u.TgZ(0,"option",75),u._uU(1),u.qZA()),2&e){const e=t.$implicit;u.Q6J("ngValue",e.id),u.xp6(1),u.Oqu(e.name)}}function kt(e,t){1&e&&(u.TgZ(0,"option",52),u._UZ(1,"system-label",53),u.qZA())}function wt(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"tr")(1,"td")(2,"system-checkbox",61),u.NdJ("ngModelChange",(function(t){const i=u.CHM(e).$implicit;return u.KtG(i.selected=t)})),u.qZA()(),u.TgZ(3,"td")(4,"system-input-text",29),u.NdJ("ngModelChange",(function(t){const i=u.CHM(e).$implicit;return u.KtG(i.name=t)})),u.qZA()(),u.TgZ(5,"td")(6,"div",34)(7,"select",35),u.NdJ("ngModelChange",(function(t){const i=u.CHM(e).$implicit;return u.KtG(i.sysdictionary_ref_id=t)})),u.YNc(8,Nt,2,2,"option",74),u.qZA()()(),u.TgZ(9,"td")(10,"div",34)(11,"select",35),u.NdJ("ngModelChange",(function(t){const i=u.CHM(e).$implicit;return u.KtG(i.scope=t)})),u.YNc(12,kt,2,0,"option",36),u.TgZ(13,"option",37),u._UZ(14,"system-label",38),u.qZA()()()(),u.TgZ(15,"td")(16,"system-input-text",46),u.NdJ("ngModelChange",(function(t){const i=u.CHM(e).$implicit;return u.KtG(i.package=t)})),u.qZA()(),u.TgZ(17,"td")(18,"system-input-text",46),u.NdJ("ngModelChange",(function(t){const i=u.CHM(e).$implicit;return u.KtG(i.version=t)})),u.qZA()()()}if(2&e){const e=t.$implicit,i=u.oxw(3);u.xp6(2),u.Q6J("disabled",!e.sysdictionary_ref_id)("ngModel",e.selected),u.xp6(2),u.Q6J("ngModel",e.name),u.xp6(3),u.Q6J("ngModel",e.sysdictionary_ref_id),u.xp6(1),u.Q6J("ngForOf",i.definedtemplates),u.xp6(3),u.Q6J("ngModel",e.scope),u.xp6(1),u.Q6J("ngIf","all"==i.dictionarymanager.changescope&&"g"==i.dictionarydefinition.scope),u.xp6(4),u.Q6J("ngModel",e.package),u.xp6(2),u.Q6J("ngModel",e.version)}}function Ut(e,t){if(1&e&&(u.TgZ(0,"div",13)(1,"table",14)(2,"thead")(3,"tr",15),u._UZ(4,"th",16),u.TgZ(5,"th",17)(6,"div",70),u._uU(7,"name"),u.qZA()(),u.TgZ(8,"th",17)(9,"div",70),u._uU(10,"template"),u.qZA()(),u.TgZ(11,"th",17)(12,"div",70),u._uU(13,"scope"),u.qZA()(),u.TgZ(14,"th",17)(15,"div",70),u._uU(16,"package"),u.qZA()(),u.TgZ(17,"th",17)(18,"div",70),u._uU(19,"version"),u.qZA()()()(),u.TgZ(20,"tbody"),u.YNc(21,wt,19,9,"tr",20),u.qZA()()()),2&e){const e=u.oxw(2);u.xp6(21),u.Q6J("ngForOf",e.templates)}}function Et(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"system-input-text",76),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw(2);return u.KtG(i.filterterm=t)})),u.qZA()}if(2&e){const e=u.oxw(2);u.Q6J("showClear",!0)("ngModel",e.filterterm)}}function Dt(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"system-checkbox",77),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw(2);return u.KtG(i.filterundefined=t)})),u._uU(1,"undefined onyl"),u.qZA()}if(2&e){const e=u.oxw(2);u.Q6J("ngModel",e.filterundefined)}}function Ot(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"button",78),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw(2);return u.KtG(t.goDetails())})),u._UZ(1,"system-label",79),u.qZA()}}function It(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"button",80),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw(2);return u.KtG(t.goFields(!0))})),u._UZ(1,"system-label",79),u.qZA()}if(2&e){const e=u.oxw(2);u.Q6J("disabled",!e.detailsComplete)}}function Qt(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"button",78),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw(2);return u.KtG(t.goFields())})),u._UZ(1,"system-label",81),u.qZA()}}function St(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"button",78),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw(2);return u.KtG(t.goIndices())})),u._UZ(1,"system-label",82),u.qZA()}}function Bt(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"button",78),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw(2);return u.KtG(t.goTemplates())})),u._UZ(1,"system-label",83),u.qZA()}}function Ft(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"button",84),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw(2);return u.KtG(t.add())})),u._UZ(1,"system-label",85),u.qZA()}if(2&e){const e=u.oxw(2);u.Q6J("disabled",!e.canAdd)}}function Yt(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"system-modal",1)(1,"system-modal-header",2),u.NdJ("close",(function(){u.CHM(e);const t=u.oxw();return u.KtG(t.close())})),u._uU(2,"Migrate Dictionary Definition"),u.qZA(),u.TgZ(3,"system-modal-content",3),u.YNc(4,ft,19,1,"div",4),u.YNc(5,_t,48,9,"div",5),u.YNc(6,Lt,35,3,"div",4),u.YNc(7,Jt,25,1,"div",4),u.YNc(8,Ut,22,1,"div",4),u.qZA(),u.TgZ(9,"system-modal-footer")(10,"div",6)(11,"div",7),u.YNc(12,Et,1,2,"system-input-text",8),u.YNc(13,Dt,2,1,"system-checkbox",9),u.qZA(),u.YNc(14,Ot,2,0,"button",10),u.YNc(15,It,2,1,"button",11),u.YNc(16,Qt,2,0,"button",10),u.YNc(17,St,2,0,"button",10),u.YNc(18,Bt,2,0,"button",10),u.YNc(19,Ft,2,1,"button",12),u.qZA()()()}if(2&e){const e=u.oxw();u.xp6(4),u.Q6J("ngIf","tables"==e.view),u.xp6(1),u.Q6J("ngIf","details"==e.view),u.xp6(1),u.Q6J("ngIf","fields"==e.view),u.xp6(1),u.Q6J("ngIf","indices"==e.view),u.xp6(1),u.Q6J("ngIf","templates"==e.view),u.xp6(4),u.Q6J("ngIf","tables"==e.view),u.xp6(1),u.Q6J("ngIf","fields"==e.view||"tables"==e.view),u.xp6(1),u.Q6J("ngIf","tables"==e.view),u.xp6(1),u.Q6J("ngIf","details"==e.view),u.xp6(1),u.Q6J("ngIf","indices"==e.view||"templates"==e.view),u.xp6(1),u.Q6J("ngIf","fields"==e.view||"templates"==e.view),u.xp6(1),u.Q6J("ngIf","fields"==e.view||"indices"==e.view),u.xp6(1),u.Q6J("ngIf","indices"==e.view||"fields"==e.view||"templates"==e.view)}}let Rt=(()=>{var e;class DictionaryManagerMigrateDefinitionModal{constructor(e,t,i,n){(0,s.Z)(this,"backend",void 0),(0,s.Z)(this,"modal",void 0),(0,s.Z)(this,"modelutilities",void 0),(0,s.Z)(this,"dictionarymanager",void 0),(0,s.Z)(this,"loading",!0),(0,s.Z)(this,"self",void 0),(0,s.Z)(this,"tables",[]),(0,s.Z)(this,"filterterm",void 0),(0,s.Z)(this,"filterundefined",!1),(0,s.Z)(this,"fields",[]),(0,s.Z)(this,"indices",[]),(0,s.Z)(this,"templates",[]),(0,s.Z)(this,"domains",[]),(0,s.Z)(this,"definedtemplates",[]),(0,s.Z)(this,"dictionarydefinition",void 0),(0,s.Z)(this,"_selectedtable",""),(0,s.Z)(this,"view","tables"),(0,s.Z)(this,"systemdefinitions",["audited","name","vname","comment","required","type","len","reportable","duplicate_merge","sysdomainfield_id","source"]),this.backend=e,this.modal=t,this.modelutilities=i,this.dictionarymanager=n}ngOnInit(){let e=this.modal.await("LBL_LOADING");this.dictionarydefinition={id:this.modelutilities.generateGuid(),name:"",tablename:"",sysdictionary_type:"module",scope:this.dictionarymanager.defaultScope,deleted:0,status:"d"},this.backend.getRequest("dictionary/fields").subscribe({next:t=>{this.tables=t,this.tables.sort(((e,t)=>e.sysdictionarytablename.localeCompare(t.sysdictionarytablename))),e.emit(!0),this.loading=!1},error:()=>{e.emit(!0),this.close()}});for(let e of this.dictionarymanager.domaindefinitions)this.domains.push({id:e.id,name:e.name});this.domains.sort(((e,t)=>e.name.localeCompare(t.name)>0?1:-1));for(let e of this.dictionarymanager.dictionarydefinitions.filter((e=>"template"==e.sysdictionary_type)))this.definedtemplates.push({id:e.id,name:e.name});this.definedtemplates.sort(((e,t)=>e.name.localeCompare(t.name)>0?1:-1))}loadVardefs(e){this.backend.getRequest(`dictionary/vardefs/${e}`).subscribe({next:t=>{if(t[e].indices){let i=Object.keys(t[e].indices);for(let s of i)t[e].indices[s].scope=this.dictionarydefinition.scope,t[e].indices[s].package=this.dictionarydefinition.package,t[e].indices[s].version=this.dictionarydefinition.version,this.indices.push(t[e].indices[s])}if(t[e].templates){let i=Object.keys(t[e].templates);for(let e of i){let t=this.definedtemplates.find((t=>t.name==e));this.templates.push({name:e,sysdictionary_ref_id:t?t.id:void 0,scope:this.dictionarydefinition.scope,package:this.dictionarydefinition.package,version:this.dictionarydefinition.version})}}}})}get _tables(){return this.filterterm||this.filterundefined?this.tables.filter((e=>!(this.filterterm&&!(e.sysdictionarytablename.toLowerCase().indexOf(this.filterterm.toLowerCase())>=0)||this.filterundefined&&e.sysdictionarydefinition_id))):this.tables}get _fields(){return this.filterundefined?this.fields.filter((e=>!e.sysdomainfield_id)):this.fields}getFieldDefinitions(e){if(!e)return[];let t=Object.keys(e),i=[];for(let s of t)this.systemdefinitions.indexOf(s)>=0||i.push({key:s,value:e[s]});return i}get selectedtable(){return this._selectedtable}set selectedtable(e){this._selectedtable=e;let t=this.tables.find((t=>t.sysdictionarytablename==e));if(t){if(this.fields=t.fields,t.sysdictionarydefinition_id){this.dictionarydefinition.id=t.sysdictionarydefinition_id;let e=this.dictionarymanager.dictionarydefinitions.find((e=>e.id==t.sysdictionarydefinition_id));this.dictionarydefinition.scope=e.scope,this.dictionarydefinition.package=e.package,this.dictionarydefinition.version=e.version}else this.dictionarydefinition.id=this.modelutilities.generateGuid(),this.dictionarydefinition.scope=void 0,this.dictionarydefinition.package=void 0,this.dictionarydefinition.version=void 0;this.dictionarydefinition.name=t.sysdictionaryname,this.dictionarydefinition.tablename=t.sysdictionarytablename}}get allExpanded(){return this.fields.length==this.fields.filter((e=>!0===e.showdetails)).length}toggleAllDetails(){let e=this.allExpanded;for(let t of this.fields)t.showdetails=!e}get allSelected(){return this.fields.filter((e=>!e.sysdomaindefinition_id)).length==this.fields.filter((e=>!0===e.selected&&!e.sysdomaindefinition_id)).length}set allSelected(e){for(let t of this.fields.filter((e=>!e.sysdomaindefinition_id)))t.selected=e}goDetails(){this.tables.find((e=>e.sysdictionarydefinition_id==this.dictionarydefinition.id))?this.goFields(!0):this.view="details"}get detailsComplete(){return this.dictionarydefinition.name&&this.dictionarydefinition.tablename&&this.dictionarydefinition.scope}goFields(e=!1){if(this.view="fields",e){for(let e of this.fields.filter((e=>!e.sysdomaindefinition_id)))e.scope=this.dictionarydefinition.scope,e.package=this.dictionarydefinition.package,e.version=this.dictionarydefinition.version;this.loadVardefs(this.dictionarydefinition.name)}}goIndices(){this.view="indices"}goTemplates(){this.view="templates"}close(){this.self.destroy()}canAddIndex(e){for(let t of e)if(!this.fields.find((e=>(e.selected||!!e.sysdomainfield_id)&&e.fieldname==t)))return!1;return!0}canAddTemplate(e){return!!this.dictionarymanager.dictionarydefinitions.find((t=>t.name==e&&"template"==t.sysdictionary_type))}get canAdd(){return this.fields.filter((e=>e.selected>0)).length>0&&0==this.fields.filter((e=>e.selected&&!e.sysdomaindefinition_id)).length||this.indices.filter((e=>e.selected)).length>0||this.templates.filter((e=>e.selected)).length>0}add(){this.dictionarymanager.dictionarydefinitions.find((e=>e.id==this.dictionarydefinition.id))||this.dictionarymanager.dictionarydefinitions.push(this.dictionarydefinition);let e=this.fields.filter((e=>!!e.sysdomainfield_id)).length;for(let t of this.templates.filter((e=>e.selected))){let i={id:this.modelutilities.generateGuid(),sysdictionarydefinition_id:this.dictionarydefinition.id,sysdictionary_ref_id:t.sysdictionary_ref_id,name:t.name,exclude_from_audited:0,default_value:"",required:0,scope:t.scope?t.scope:this.dictionarydefinition.scope,deleted:0,status:"d",sequence:e};e++,this.dictionarymanager.dictionaryitems.push(i)}let t={};for(let i of this._fields.filter((e=>e.selected))){let s=this.modelutilities.generateGuid(),n={id:s,sysdictionarydefinition_id:this.dictionarydefinition.id,sysdomaindefinition_id:i.sysdomaindefinition_id,name:i.fieldname,non_db:0,exclude_from_audited:i.fielddefinition.audited?0:1,default_value:"",required:i.fielddefinition.required?1:0,scope:i.scope?i.scope:this.dictionarydefinition.scope,deleted:0,status:"d",sequence:e,label:i.fielddefinition.vname,description:i.fielddefinition.comment};e++,t[i.fieldname]=s,this.dictionarymanager.dictionaryitems.push(n)}let i=this.dictionarymanager.getDictionaryDefinitionItems(this.dictionarydefinition.id);for(let e of this.indices.filter((e=>e.selected))){let s=this.modelutilities.generateGuid(),n={id:s,name:e.name,indextype:e.type,package:e.package,scope:e.scope,version:e.version,sysdictionarydefinition_id:this.dictionarydefinition.id,deleted:0,status:"d"};this.dictionarymanager.dictionaryindexes.push(n);let l=0;for(let n of e.fields)this.dictionarymanager.dictionaryindexitems.push({id:this.modelutilities.generateGuid(),scope:e.scope,status:"d",sysdictionaryindex_id:s,sysdictionaryitem_id:t[n]?t[n]:i.find((e=>e.name==n)).id,sequence:l,deleted:0}),l++}this.close()}}return e=DictionaryManagerMigrateDefinitionModal,(0,s.Z)(DictionaryManagerMigrateDefinitionModal,"ɵfac",(function(t){return new(t||e)(u.Y36(h.y),u.Y36(x.o),u.Y36(Z.A),u.Y36(A))})),(0,s.Z)(DictionaryManagerMigrateDefinitionModal,"ɵcmp",u.Xpm({type:e,selectors:[["dictionary-manager-migratedefinition-modal"]],decls:1,vars:1,consts:[["size","large",4,"ngIf"],["size","large"],[3,"close"],["margin","none"],["style","height: 80vh",4,"ngIf"],["class","slds-p-around--x-small",4,"ngIf"],[1,"slds-grid","slds-grid--vertical-align-center"],[1,"slds-col--bump-right","slds-grid","slds-grid--vertical-align-center"],["class","slds-m-horizontal--xx-small",3,"showClear","ngModel","ngModelChange",4,"ngIf"],["class","slds-m-horizontal--xx-small",3,"ngModel","ngModelChange",4,"ngIf"],["class","slds-button slds-button--neutral slds-m-horizontal--xx-small",3,"click",4,"ngIf"],["class","slds-button slds-button--neutral slds-m-horizontal--xx-small",3,"disabled","click",4,"ngIf"],["class","slds-button slds-button--brand slds-m-horizontal--xx-small",3,"disabled","click",4,"ngIf"],[2,"height","80vh"],[1,"slds-table","slds-table--header-fixed"],[1,"slds-line-height_reset"],["scope","col",2,"width","2rem"],["scope","col"],[1,"slds-truncate","slds-m-around--xx-small"],["scope","col",2,"width","4rem"],[4,"ngFor","ngForOf"],["name","migratedid",3,"value","ngModel","ngModelChange"],[1,"slds-truncate"],["disabled","",3,"ngModel"],[1,"slds-p-around--x-small"],[1,"slds-grid"],[1,"slds-form-element__control","slds-size--1-of-2","slds-p-right--xxx-small"],[1,"slds-form-element__label"],["label","LBL_NAME"],["disabled","",3,"ngModel","ngModelChange"],["label","LBL_TABLE"],[1,"slds-form-element__control","slds-size--1-of-4","slds-p-left--xxx-small"],[1,"slds-required"],["label","LBL_SCOPE"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],["value","g",4,"ngIf"],["value","c"],["label","LBL_CUSTOM"],[1,"slds-large-size--1-of-4","slds-p-right--xxx-small","slds-form-element__control"],["label","LBL_TYPE"],["value","module"],["value","metadata"],["value","template"],[1,"slds-size--1-of-4","slds-p-right--xxx-small","slds-form-element__control"],["label","LBL_PACKAGE"],[3,"ngModel","ngModelChange"],[1,"slds-size--1-of-4","slds-p-left--xxx-small","slds-form-element__control"],["label","LBL_VERSION"],["class","slds-grid",4,"ngIf"],["label","LBL_COMMENT"],["maxlength","150",3,"ngModel"],["value","g"],["label","LBL_GLOBAL"],["label","LBL_CONTENT_TYPE"],["value","config"],["value","custom_config"],[1,"slds-m-around--x-small",3,"ngModel","ngModelChange"],[1,"slds-truncateslds-m-around--xx-small"],[1,"slds-button","slds-button--icon","slds-m-around--x-small",3,"click"],[3,"icon"],[3,"disabled","ngModel","ngModelChange"],[4,"ngIf"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"slds-button","slds-button--icon",3,"click"],[3,"value"],["colspan","2"],["colspan","3"],["colspan","6"],[1,"slds-truncate","slds-p-around--xx-small"],["value","primary"],["value","index"],["value","unique"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"],[1,"slds-m-horizontal--xx-small",3,"showClear","ngModel","ngModelChange"],[1,"slds-m-horizontal--xx-small",3,"ngModel","ngModelChange"],[1,"slds-button","slds-button--neutral","slds-m-horizontal--xx-small",3,"click"],["label","LBL_NEXT"],[1,"slds-button","slds-button--neutral","slds-m-horizontal--xx-small",3,"disabled","click"],["label","LBL_FIELDS"],["label","LBL_INDICES"],["label","LBL_TEMPLATES"],[1,"slds-button","slds-button--brand","slds-m-horizontal--xx-small",3,"disabled","click"],["label","LBL_ADD"]],template:function(e,t){1&e&&u.YNc(0,Yt,20,13,"system-modal",0),2&e&&u.Q6J("ngIf",!t.loading)},dependencies:[n.sg,n.O5,l.YN,l.Kr,l.EJ,l.JJ,l.nD,l.On,T.J,Q.U,J.Z,S.$,pt.A,L._,nt.j,lt.x,ot.p,at.y],encapsulation:2})),DictionaryManagerMigrateDefinitionModal})();function Gt(e,t){if(1&e&&(u.TgZ(0,"div",33),u._uU(1),u.qZA()),2&e){const e=t.$implicit;u.xp6(1),u.Oqu(e.message)}}function Ht(e,t){if(1&e&&(u.TgZ(0,"option",34),u._uU(1),u.qZA()),2&e){const e=t.$implicit;u.Q6J("value",e.id),u.xp6(1),u.Oqu(e.name)}}function Kt(e,t){if(1&e&&(u.TgZ(0,"div",33),u._uU(1),u.qZA()),2&e){const e=t.$implicit;u.xp6(1),u.Oqu(e.message)}}const zt=function(e){return{"slds-has-error":e}};function Vt(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div",6)(1,"div",27)(2,"label",8)(3,"abbr",9),u._uU(4,"* "),u.qZA(),u._UZ(5,"system-label",28),u.qZA(),u.TgZ(6,"system-input-text",18),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw();return u.KtG(i.dictionaryitem.name=t)})),u.qZA(),u.YNc(7,Gt,2,1,"div",29),u.qZA(),u.TgZ(8,"div",30)(9,"label",8)(10,"abbr",9),u._uU(11,"* "),u.qZA(),u._UZ(12,"system-label",31),u.qZA(),u.TgZ(13,"div",11)(14,"select",12),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw();return u.KtG(i.dictionaryitem.sysdomaindefinition_id=t)})),u.YNc(15,Ht,2,2,"option",32),u.qZA()(),u.YNc(16,Kt,2,1,"div",29),u.qZA()()}if(2&e){const e=u.oxw();u.xp6(1),u.Q6J("ngClass",u.VKq(7,zt,e.getMessages("name").length>0)),u.xp6(5),u.Q6J("ngModel",e.dictionaryitem.name),u.xp6(1),u.Q6J("ngForOf",e.getMessages("name")),u.xp6(1),u.Q6J("ngClass",u.VKq(9,zt,e.getMessages("sysdomaindefinition_id").length>0)),u.xp6(6),u.Q6J("ngModel",e.dictionaryitem.sysdomaindefinition_id),u.xp6(1),u.Q6J("ngForOf",e.domains),u.xp6(1),u.Q6J("ngForOf",e.getMessages("sysdomaindefinition_id"))}}function Pt(e,t){if(1&e&&(u.TgZ(0,"option",34),u._uU(1),u.qZA()),2&e){const e=t.$implicit;u.Q6J("value",e.id),u.xp6(1),u.Oqu(e.name)}}function $t(e,t){if(1&e&&(u.TgZ(0,"div",33),u._uU(1),u.qZA()),2&e){const e=t.$implicit;u.xp6(1),u.Oqu(e.message)}}function jt(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div",35)(1,"label",8)(2,"abbr",9),u._uU(3,"* "),u.qZA(),u._UZ(4,"system-label",31),u.qZA(),u.TgZ(5,"div",11)(6,"select",12),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw();return u.KtG(i.dictionaryitem.sysdictionary_ref_id=t)})),u.YNc(7,Pt,2,2,"option",32),u.qZA()(),u.YNc(8,$t,2,1,"div",29),u.qZA()}if(2&e){const e=u.oxw();u.Q6J("ngClass",u.VKq(4,zt,e.getMessages("sysdictionary_ref_id").length>0)),u.xp6(6),u.Q6J("ngModel",e.dictionaryitem.sysdictionary_ref_id),u.xp6(1),u.Q6J("ngForOf",e.templates),u.xp6(1),u.Q6J("ngForOf",e.getMessages("sysdictionary_ref_id"))}}function Wt(e,t){1&e&&(u.TgZ(0,"option",36),u._UZ(1,"system-label",37),u.qZA())}let Xt=(()=>{var e;class DictionaryManagerAddItemModal{constructor(e,t,i){(0,s.Z)(this,"dictionarymanager",void 0),(0,s.Z)(this,"metadata",void 0),(0,s.Z)(this,"modelutilities",void 0),(0,s.Z)(this,"self",void 0),(0,s.Z)(this,"dictionaryitem",void 0),(0,s.Z)(this,"domains",[]),(0,s.Z)(this,"templates",[]),(0,s.Z)(this,"itemtype","i"),(0,s.Z)(this,"messages",[]),(0,s.Z)(this,"currentType",void 0),this.dictionarymanager=e,this.metadata=t,this.modelutilities=i,this.dictionaryitem={id:this.modelutilities.generateGuid(),sysdictionarydefinition_id:this.dictionarymanager.currentDictionaryDefinition,name:"",non_db:0,duplicate_merge:1,exclude_from_audited:0,default_value:"",required:0,scope:this.dictionarymanager.currentDictionaryScope,deleted:0,status:"d",sequence:this.dictionarymanager.dictionaryitems.filter((e=>e.sysdictionarydefinition_id==this.dictionarymanager.currentDictionaryDefinition)).length};for(let e of this.dictionarymanager.domaindefinitions)this.domains.push({id:e.id,name:e.name});this.domains.sort(((e,t)=>e.name.localeCompare(t.name)>0?1:-1));for(let e of this.dictionarymanager.dictionarydefinitions)"template"==e.sysdictionary_type&&this.templates.push({id:e.id,name:e.name});this.templates.sort(((e,t)=>e.name.localeCompare(t.name)>0?1:-1)),this.dictionaryitem.scope="all"==this.dictionarymanager.changescope?"g":"c",this.currentType=this.dictionarymanager.dictionarydefinitions.find((e=>e.id==this.dictionarymanager.currentDictionaryDefinition)).sysdictionary_type}close(){this.self.destroy()}getMessages(e){return this.messages.filter((t=>t.field==e))}get canSave(){return this.messages=[],"i"!=this.itemtype||this.dictionaryitem.name||this.messages.push({field:"name",message:"please specifiy the name"}),"i"!=this.itemtype||this.dictionaryitem.sysdomaindefinition_id||this.messages.push({field:"sysdomaindefinition_id",message:"please select a domain"}),"i"==this.itemtype&&this.dictionaryitem.name&&this.dictionarymanager.dictionaryitems.find((e=>e.name==this.dictionaryitem.name&&e.sysdictionarydefinition_id==this.dictionarymanager.currentDictionaryDefinition))&&this.messages.push({field:"name",message:"name already used"}),this.dictionaryitem.name&&this.dictionarymanager.reservedwords&&this.dictionarymanager.reservedwords.indexOf(this.dictionaryitem.name.toUpperCase())>=0&&this.messages.push({field:"name",message:"name cannot be used (reserved word)"}),"t"!=this.itemtype||this.dictionaryitem.sysdictionary_ref_id||this.messages.push({field:"sysdictionary_ref_id",message:"no ref id defined"}),"t"==this.itemtype&&this.dictionaryitem.sysdictionary_ref_id&&this.dictionarymanager.dictionaryitems.find((e=>e.sysdictionary_ref_id==this.dictionaryitem.sysdictionary_ref_id&&e.sysdictionarydefinition_id==this.dictionarymanager.currentDictionaryDefinition))&&this.messages.push({field:"sysdictionary_ref_id",message:"ref id already used in dictionary definition"}),0==this.messages.length}save(){this.canSave&&("i"==this.itemtype?this.dictionaryitem.sysdictionary_ref_id=null:(this.dictionaryitem.name=this.templates.find((e=>e.id==this.dictionaryitem.sysdictionary_ref_id)).name,this.dictionaryitem.sysdomaindefinition_id=null),this.dictionaryitem.id=this.modelutilities.generateGuid(),this.dictionaryitem.sysdictionarydefinition_id=this.dictionarymanager.currentDictionaryDefinition,this.dictionarymanager.dictionaryitems.push(this.dictionaryitem),this.close())}}return e=DictionaryManagerAddItemModal,(0,s.Z)(DictionaryManagerAddItemModal,"ɵfac",(function(t){return new(t||e)(u.Y36(A),u.Y36(f.Pu),u.Y36(Z.A))})),(0,s.Z)(DictionaryManagerAddItemModal,"ɵcmp",u.Xpm({type:e,selectors:[["ng-component"]],decls:37,vars:10,consts:[[3,"close"],["label","LBL_ADD_DICTIONARY_ITEM"],["name","select","value","i",3,"ngModel","ngModelChange"],["name","select","value","t",3,"disabled","ngModel","ngModelChange"],["class","slds-grid",4,"ngIf"],["class","slds-form-element__control",3,"ngClass",4,"ngIf"],[1,"slds-grid"],[1,"slds-form-element__control","slds-size--1-of-2","slds-p-right--xxx-small"],[1,"slds-form-element__label"],[1,"slds-required"],["label","LBL_SCOPE"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],["value","g",4,"ngIf"],["value","c"],["label","LBL_CUSTOM"],[1,"slds-size--1-of-4","slds-p-horizontal--xxx-small","slds-form-element__control"],["label","LBL_PACKAGE"],[3,"ngModel","ngModelChange"],[1,"slds-size--1-of-4","slds-p-left--xxx-small","slds-form-element__control"],["label","LBL_VERSION"],["label","LBL_COMMENT"],["maxlength","150",3,"ngModel"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CLOSE"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_SAVE"],[1,"slds-form-element__control","slds-size--1-of-2","slds-p-right--xxx-small",3,"ngClass"],["label","LBL_NAME"],["class","slds-form-element__help",4,"ngFor","ngForOf"],[1,"slds-large-size--1-of-2","slds-p-left--xxx-small","slds-form-element__control",3,"ngClass"],["label","LBL_DOMAIN"],[3,"value",4,"ngFor","ngForOf"],[1,"slds-form-element__help"],[3,"value"],[1,"slds-form-element__control",3,"ngClass"],["value","g"],["label","LBL_GLOBAL"]],template:function(e,t){1&e&&(u.TgZ(0,"system-modal")(1,"system-modal-header",0),u.NdJ("close",(function(){return t.close()})),u._UZ(2,"system-label",1),u.qZA(),u.TgZ(3,"system-modal-content")(4,"system-input-radio",2),u.NdJ("ngModelChange",(function(e){return t.itemtype=e})),u._uU(5,"Item"),u.qZA(),u.TgZ(6,"system-input-radio",3),u.NdJ("ngModelChange",(function(e){return t.itemtype=e})),u._uU(7,"template"),u.qZA(),u.YNc(8,Vt,17,11,"div",4),u.YNc(9,jt,9,6,"div",5),u.TgZ(10,"div",6)(11,"div",7)(12,"label",8)(13,"abbr",9),u._uU(14,"* "),u.qZA(),u._UZ(15,"system-label",10),u.qZA(),u.TgZ(16,"div",11)(17,"select",12),u.NdJ("ngModelChange",(function(e){return t.dictionaryitem.scope=e})),u.YNc(18,Wt,2,0,"option",13),u.TgZ(19,"option",14),u._UZ(20,"system-label",15),u.qZA()()()(),u.TgZ(21,"div",16)(22,"label",8),u._UZ(23,"system-label",17),u.qZA(),u.TgZ(24,"system-input-text",18),u.NdJ("ngModelChange",(function(e){return t.dictionaryitem.package=e})),u.qZA()(),u.TgZ(25,"div",19)(26,"label",8),u._UZ(27,"system-label",20),u.qZA(),u.TgZ(28,"system-input-text",18),u.NdJ("ngModelChange",(function(e){return t.dictionaryitem.version=e})),u.qZA()()(),u.TgZ(29,"label",8),u._UZ(30,"system-label",21),u.qZA(),u._UZ(31,"system-input-text",22),u.qZA(),u.TgZ(32,"system-modal-footer")(33,"button",23),u.NdJ("click",(function(){return t.close()})),u._UZ(34,"system-label",24),u.qZA(),u.TgZ(35,"button",25),u.NdJ("click",(function(){return t.save()})),u._UZ(36,"system-label",26),u.qZA()()()),2&e&&(u.xp6(4),u.Q6J("ngModel",t.itemtype),u.xp6(2),u.Q6J("disabled","template"==t.currentType&&t.templates.length>0)("ngModel",t.itemtype),u.xp6(2),u.Q6J("ngIf","i"==t.itemtype),u.xp6(1),u.Q6J("ngIf","t"==t.itemtype),u.xp6(8),u.Q6J("ngModel",t.dictionaryitem.scope),u.xp6(1),u.Q6J("ngIf","all"==t.dictionarymanager.changescope),u.xp6(6),u.Q6J("ngModel",t.dictionaryitem.package),u.xp6(4),u.Q6J("ngModel",t.dictionaryitem.version),u.xp6(3),u.Q6J("ngModel",t.dictionaryitem.description))},dependencies:[n.mk,n.sg,n.O5,l.YN,l.Kr,l.EJ,l.JJ,l.nD,l.On,J.Z,pt.A,L._,nt.j,lt.x,ot.p,at.y],encapsulation:2})),DictionaryManagerAddItemModal})();function ei(e,t){if(1&e&&(u.TgZ(0,"option",26),u._uU(1),u.qZA()),2&e){const e=t.$implicit,i=u.oxw();u.Q6J("value",e.id),u.xp6(1),u.Oqu(i.dictionarymanager.getDictionaryDefinitionName(e.id))}}function ti(e,t){1&e&&(u.TgZ(0,"option",27),u._UZ(1,"system-label",28),u.qZA())}let ii=(()=>{var e;class DictionaryManagerRelationshipAdd{constructor(e,t,i){(0,s.Z)(this,"dictionarymanager",void 0),(0,s.Z)(this,"modal",void 0),(0,s.Z)(this,"injector",void 0),(0,s.Z)(this,"self",void 0),(0,s.Z)(this,"relationshipType","one-to-many"),(0,s.Z)(this,"related_id",void 0),(0,s.Z)(this,"related_ids",[]),(0,s.Z)(this,"scope",void 0),this.dictionarymanager=e,this.modal=t,this.injector=i,this.related_ids=this.dictionarymanager.dictionarydefinitions.filter((e=>"module"==e.sysdictionary_type&&0==e.deleted)).sort(((e,t)=>e.name.localeCompare(t.name))),this.scope=this.dictionarymanager.defaultScope}close(){this.self.destroy()}add(){switch(this.relationshipType){case"one-to-many":this.modal.openModal("DictionaryManagerRelationshipAddOneToMany",!0,this.injector).subscribe((e=>{e.instance.relationship.rhs_sysdictionarydefinition_id=this.related_id,e.instance.relationship.scope=this.scope,e.instance.relationship.lhs_sysdictionarydefinition_id=this.dictionarymanager.currentDictionaryDefinition}));break;case"many-to-one":this.modal.openModal("DictionaryManagerRelationshipAddOneToMany",!0,this.injector).subscribe((e=>{e.instance.relationship.lhs_sysdictionarydefinition_id=this.related_id,e.instance.relationship.scope=this.scope,e.instance.relationship.rhs_sysdictionarydefinition_id=this.dictionarymanager.currentDictionaryDefinition}));break;case"many-to-many":this.modal.openModal("DictionaryManagerRelationshipAddManyToMany",!0,this.injector).subscribe((e=>{e.instance.relationship.rhs_sysdictionarydefinition_id=this.related_id,e.instance.relationship.scope=this.scope,e.instance.relationship.lhs_sysdictionarydefinition_id=this.dictionarymanager.currentDictionaryDefinition}));break;case"parent":this.modal.openModal("DictionaryManagerRelationshipAddParent",!0,this.injector).subscribe((e=>{e.instance.relationship.lhs_sysdictionarydefinition_id=this.related_id,e.instance.relationship.scope=this.scope,e.instance.relationship.rhs_sysdictionarydefinition_id=this.dictionarymanager.currentDictionaryDefinition}))}this.close()}}return e=DictionaryManagerRelationshipAdd,(0,s.Z)(DictionaryManagerRelationshipAdd,"ɵfac",(function(t){return new(t||e)(u.Y36(A),u.Y36(x.o),u.Y36(u.zs3))})),(0,s.Z)(DictionaryManagerRelationshipAdd,"ɵcmp",u.Xpm({type:e,selectors:[["ng-component"]],decls:36,vars:9,consts:[[3,"close"],["label","LBL_ADD_RELATIONSHIP"],[1,"slds-p-around--small"],["name","relationshiptype","value","one-to-many",3,"ngModel","ngModelChange"],["label","LBL_ONE_TO_MANY"],["name","relationshiptype","value","many-to-one",3,"ngModel","ngModelChange"],["label","LBL_MANY_TO_ONE"],["name","relationshiptype","value","many-to-many",3,"ngModel","ngModelChange"],["label","LBL_MANY_TO_MANY"],["name","relationshiptype","value","parent",3,"ngModel","ngModelChange"],["label","LBL_PARENT"],[1,"slds-form-element__control","slds-p-around--xx-small"],[1,"slds-form-element__label"],[1,"slds-required"],["label","LBL_DICTIONARYDEFINITION"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["label","LBL_SCOPE"],["value","g",4,"ngIf"],["value","c"],["label","LBL_CUSTOM"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_ADD"],[3,"value"],["value","g"],["label","LBL_GLOBAL"]],template:function(e,t){1&e&&(u.TgZ(0,"system-modal")(1,"system-modal-header",0),u.NdJ("close",(function(){return t.close()})),u._UZ(2,"system-label",1),u.qZA(),u.TgZ(3,"system-modal-content")(4,"div",2)(5,"system-input-radio",3),u.NdJ("ngModelChange",(function(e){return t.relationshipType=e})),u._UZ(6,"system-label",4),u.qZA(),u.TgZ(7,"system-input-radio",5),u.NdJ("ngModelChange",(function(e){return t.relationshipType=e})),u._UZ(8,"system-label",6),u.qZA(),u.TgZ(9,"system-input-radio",7),u.NdJ("ngModelChange",(function(e){return t.relationshipType=e})),u._UZ(10,"system-label",8),u.qZA(),u.TgZ(11,"system-input-radio",9),u.NdJ("ngModelChange",(function(e){return t.relationshipType=e})),u._UZ(12,"system-label",10),u.qZA()(),u.TgZ(13,"div",11)(14,"label",12)(15,"abbr",13),u._uU(16,"* "),u.qZA(),u._UZ(17,"system-label",14),u.qZA(),u.TgZ(18,"div",15)(19,"select",16),u.NdJ("ngModelChange",(function(e){return t.related_id=e})),u.YNc(20,ei,2,2,"option",17),u.qZA()()(),u.TgZ(21,"div",11)(22,"label",12)(23,"abbr",13),u._uU(24,"* "),u.qZA(),u._UZ(25,"system-label",18),u.qZA(),u.TgZ(26,"div",15)(27,"select",16),u.NdJ("ngModelChange",(function(e){return t.scope=e})),u.YNc(28,ti,2,0,"option",19),u.TgZ(29,"option",20),u._UZ(30,"system-label",21),u.qZA()()()()(),u.TgZ(31,"system-modal-footer")(32,"button",22),u.NdJ("click",(function(){return t.close()})),u._UZ(33,"system-label",23),u.qZA(),u.TgZ(34,"button",24),u.NdJ("click",(function(){return t.add()})),u._UZ(35,"system-label",25),u.qZA()()()),2&e&&(u.xp6(5),u.Q6J("ngModel",t.relationshipType),u.xp6(2),u.Q6J("ngModel",t.relationshipType),u.xp6(2),u.Q6J("ngModel",t.relationshipType),u.xp6(2),u.Q6J("ngModel",t.relationshipType),u.xp6(8),u.Q6J("ngModel",t.related_id),u.xp6(1),u.Q6J("ngForOf",t.related_ids),u.xp6(7),u.Q6J("ngModel",t.scope),u.xp6(1),u.Q6J("ngIf","all"==t.dictionarymanager.changescope),u.xp6(6),u.Q6J("disabled",!t.related_id))},dependencies:[n.sg,n.O5,l.YN,l.Kr,l.EJ,l.JJ,l.On,pt.A,L._,nt.j,lt.x,ot.p,at.y],encapsulation:2})),DictionaryManagerRelationshipAdd})(),si=(()=>{var e;class DictionaryManagerRelationshipAddOneToMany{constructor(e,t,i,n,l,o){(0,s.Z)(this,"dictionarymanager",void 0),(0,s.Z)(this,"metadata",void 0),(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"modal",void 0),(0,s.Z)(this,"injector",void 0),(0,s.Z)(this,"modelutilities",void 0),(0,s.Z)(this,"self",void 0),(0,s.Z)(this,"relationship",void 0),this.dictionarymanager=e,this.metadata=t,this.language=i,this.modal=n,this.injector=l,this.modelutilities=o,this.relationship={id:this.modelutilities.generateGuid(),name:"",scope:"c",relationship_name:"",lhs_sysdictionarydefinition_id:"",lhs_sysdictionaryitem_id:"",lhs_linkname:"",lhs_linklabel:"",lhs_duplicatemerge:1,rhs_sysdictionarydefinition_id:"",rhs_sysdictionaryitem_id:"",rhs_linkname:"",rhs_linklabel:"",rhs_duplicatemerge:0,rhs_relatename:"",rhs_relatelabel:"",relationship_type:"one-to-many",deleted:0,status:"d"}}ngOnInit(){this.setDefaults()}setDefaults(){this.relationship.name=this.dictionarymanager.dictionarydefinitions.find((e=>e.id==this.relationship.lhs_sysdictionarydefinition_id)).tablename.toLowerCase(),this.relationship.relationship_name=this.dictionarymanager.dictionarydefinitions.find((e=>e.id==this.relationship.lhs_sysdictionarydefinition_id)).tablename.toLowerCase()+"_"+this.dictionarymanager.dictionarydefinitions.find((e=>e.id==this.relationship.rhs_sysdictionarydefinition_id)).tablename.toLowerCase();let e=this.dictionarymanager.getDictionaryDefinitionItems(this.relationship.lhs_sysdictionarydefinition_id).find((e=>"id"==e.name));e&&(this.relationship.lhs_sysdictionaryitem_id=e.id),this.relationship.rhs_linkname=this.dictionarymanager.getDictionaryDefinitionName(this.relationship.lhs_sysdictionarydefinition_id).toLowerCase(),this.relationship.rhs_relatename=this.dictionarymanager.getDictionaryDefinitionName(this.relationship.lhs_sysdictionarydefinition_id).toLowerCase()+"_name",this.relationship.lhs_linkname=this.dictionarymanager.dictionarydefinitions.find((e=>e.id==this.relationship.rhs_sysdictionarydefinition_id)).tablename.toLowerCase()}close(){this.self.destroy()}add(){this.dictionarymanager.dictionaryrelationships.push({...this.relationship}),this.close()}}return e=DictionaryManagerRelationshipAddOneToMany,(0,s.Z)(DictionaryManagerRelationshipAddOneToMany,"ɵfac",(function(t){return new(t||e)(u.Y36(A),u.Y36(f.Pu),u.Y36(b.d),u.Y36(x.o),u.Y36(u.zs3),u.Y36(Z.A))})),(0,s.Z)(DictionaryManagerRelationshipAddOneToMany,"ɵcmp",u.Xpm({type:e,selectors:[["ng-component"]],decls:10,vars:1,consts:[[3,"close"],["label","LBL_ONE_TO_MANY"],[3,"relationship"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_ADD"]],template:function(e,t){1&e&&(u.TgZ(0,"system-modal")(1,"system-modal-header",0),u.NdJ("close",(function(){return t.close()})),u._UZ(2,"system-label",1),u.qZA(),u.TgZ(3,"system-modal-content"),u._UZ(4,"dictionary-manager-relationship-container-onetomany",2),u.qZA(),u.TgZ(5,"system-modal-footer")(6,"button",3),u.NdJ("click",(function(){return t.close()})),u._UZ(7,"system-label",4),u.qZA(),u.TgZ(8,"button",5),u.NdJ("click",(function(){return t.add()})),u._UZ(9,"system-label",6),u.qZA()()()),2&e&&(u.xp6(4),u.Q6J("relationship",t.relationship))},dependencies:[L._,nt.j,lt.x,ot.p,at.y,ie],encapsulation:2})),DictionaryManagerRelationshipAddOneToMany})(),ni=(()=>{var e;class DictionaryManagerRelationshipAddManyToMany{constructor(e,t,i,n,l,o){(0,s.Z)(this,"dictionarymanager",void 0),(0,s.Z)(this,"metadata",void 0),(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"modal",void 0),(0,s.Z)(this,"injector",void 0),(0,s.Z)(this,"modelutilities",void 0),(0,s.Z)(this,"self",void 0),(0,s.Z)(this,"relationship",void 0),this.dictionarymanager=e,this.metadata=t,this.language=i,this.modal=n,this.injector=l,this.modelutilities=o,this.relationship={id:this.modelutilities.generateGuid(),name:"",scope:"c",relationship_name:"",lhs_sysdictionarydefinition_id:"",lhs_sysdictionaryitem_id:"",lhs_linkname:"",lhs_linklabel:"",lhs_duplicatemerge:1,rhs_sysdictionarydefinition_id:"",rhs_sysdictionaryitem_id:"",rhs_linkname:"",rhs_linklabel:"",rhs_duplicatemerge:0,rhs_relatename:"",rhs_relatelabel:"",relationship_type:"many-to-many",deleted:0,status:"d"}}ngOnInit(){this.setDefaults()}setDefaults(){this.relationship.relationship_name=this.dictionarymanager.dictionarydefinitions.find((e=>e.id==this.relationship.lhs_sysdictionarydefinition_id)).tablename.toLowerCase()+"_"+this.dictionarymanager.dictionarydefinitions.find((e=>e.id==this.relationship.rhs_sysdictionarydefinition_id)).tablename.toLowerCase(),this.relationship.name=this.relationship.relationship_name;let e=this.dictionarymanager.getDictionaryDefinitionItems(this.relationship.lhs_sysdictionarydefinition_id).find((e=>"id"==e.name));e&&(this.relationship.lhs_sysdictionaryitem_id=e.id),this.relationship.lhs_linkname=this.dictionarymanager.dictionarydefinitions.find((e=>e.id==this.relationship.rhs_sysdictionarydefinition_id)).tablename.toLowerCase();let t=this.dictionarymanager.getDictionaryDefinitionItems(this.relationship.rhs_sysdictionarydefinition_id).find((e=>"id"==e.name));t&&(this.relationship.rhs_sysdictionaryitem_id=t.id),this.relationship.rhs_linkname=this.dictionarymanager.getDictionaryDefinitionName(this.relationship.lhs_sysdictionarydefinition_id).toLowerCase()}close(){this.self.destroy()}add(){this.dictionarymanager.dictionaryrelationships.push({...this.relationship}),this.close()}}return e=DictionaryManagerRelationshipAddManyToMany,(0,s.Z)(DictionaryManagerRelationshipAddManyToMany,"ɵfac",(function(t){return new(t||e)(u.Y36(A),u.Y36(f.Pu),u.Y36(b.d),u.Y36(x.o),u.Y36(u.zs3),u.Y36(Z.A))})),(0,s.Z)(DictionaryManagerRelationshipAddManyToMany,"ɵcmp",u.Xpm({type:e,selectors:[["ng-component"]],decls:10,vars:1,consts:[[3,"close"],["label","LBL_MANY_TO_MANY"],[3,"relationship"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_ADD"]],template:function(e,t){1&e&&(u.TgZ(0,"system-modal")(1,"system-modal-header",0),u.NdJ("close",(function(){return t.close()})),u._UZ(2,"system-label",1),u.qZA(),u.TgZ(3,"system-modal-content"),u._UZ(4,"dictionary-manager-relationship-container-manytomany",2),u.qZA(),u.TgZ(5,"system-modal-footer")(6,"button",3),u.NdJ("click",(function(){return t.close()})),u._UZ(7,"system-label",4),u.qZA(),u.TgZ(8,"button",5),u.NdJ("click",(function(){return t.add()})),u._UZ(9,"system-label",6),u.qZA()()()),2&e&&(u.xp6(4),u.Q6J("relationship",t.relationship))},dependencies:[L._,nt.j,lt.x,ot.p,at.y,re],encapsulation:2})),DictionaryManagerRelationshipAddManyToMany})(),li=(()=>{var e;class DictionaryManagerRelationshipAddParent{constructor(e,t,i,n,l,o){(0,s.Z)(this,"dictionarymanager",void 0),(0,s.Z)(this,"metadata",void 0),(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"modal",void 0),(0,s.Z)(this,"injector",void 0),(0,s.Z)(this,"modelutilities",void 0),(0,s.Z)(this,"self",void 0),(0,s.Z)(this,"relationship",void 0),this.dictionarymanager=e,this.metadata=t,this.language=i,this.modal=n,this.injector=l,this.modelutilities=o,this.relationship={id:this.modelutilities.generateGuid(),name:"",scope:"c",relationship_name:"",lhs_sysdictionarydefinition_id:"",lhs_sysdictionaryitem_id:"",lhs_linkname:"",lhs_linklabel:"",lhs_duplicatemerge:1,rhs_sysdictionarydefinition_id:"",rhs_sysdictionaryitem_id:"",rhs_linkname:"",rhs_linklabel:"",rhs_duplicatemerge:0,rhs_relatename:"",rhs_relatelabel:"",relationship_type:"parent",deleted:0,status:"d"}}ngOnInit(){this.setDefaults()}setDefaults(){this.relationship.name=this.dictionarymanager.dictionarydefinitions.find((e=>e.id==this.relationship.lhs_sysdictionarydefinition_id)).tablename.toLowerCase(),this.relationship.relationship_name=this.dictionarymanager.dictionarydefinitions.find((e=>e.id==this.relationship.lhs_sysdictionarydefinition_id)).tablename.toLowerCase()+"_"+this.dictionarymanager.dictionarydefinitions.find((e=>e.id==this.relationship.rhs_sysdictionarydefinition_id)).tablename.toLowerCase();let e=this.dictionarymanager.getDictionaryDefinitionItems(this.relationship.lhs_sysdictionarydefinition_id).find((e=>"id"==e.name));e&&(this.relationship.lhs_sysdictionaryitem_id=e.id),this.relationship.rhs_linkname=this.dictionarymanager.getDictionaryDefinitionName(this.relationship.lhs_sysdictionarydefinition_id).toLowerCase(),this.relationship.lhs_linkname=this.dictionarymanager.dictionarydefinitions.find((e=>e.id==this.relationship.rhs_sysdictionarydefinition_id)).tablename.toLowerCase()}close(){this.self.destroy()}add(){this.dictionarymanager.dictionaryrelationships.push({...this.relationship}),this.close()}}return e=DictionaryManagerRelationshipAddParent,(0,s.Z)(DictionaryManagerRelationshipAddParent,"ɵfac",(function(t){return new(t||e)(u.Y36(A),u.Y36(f.Pu),u.Y36(b.d),u.Y36(x.o),u.Y36(u.zs3),u.Y36(Z.A))})),(0,s.Z)(DictionaryManagerRelationshipAddParent,"ɵcmp",u.Xpm({type:e,selectors:[["ng-component"]],decls:10,vars:1,consts:[[3,"close"],["label","LBL_PARENT"],[3,"relationship"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_ADD"]],template:function(e,t){1&e&&(u.TgZ(0,"system-modal")(1,"system-modal-header",0),u.NdJ("close",(function(){return t.close()})),u._UZ(2,"system-label",1),u.qZA(),u.TgZ(3,"system-modal-content"),u._UZ(4,"dictionary-manager-relationship-container-parent",2),u.qZA(),u.TgZ(5,"system-modal-footer")(6,"button",3),u.NdJ("click",(function(){return t.close()})),u._UZ(7,"system-label",4),u.qZA(),u.TgZ(8,"button",5),u.NdJ("click",(function(){return t.add()})),u._UZ(9,"system-label",6),u.qZA()()()),2&e&&(u.xp6(4),u.Q6J("relationship",t.relationship))},dependencies:[L._,nt.j,lt.x,ot.p,at.y,ue],encapsulation:2})),DictionaryManagerRelationshipAddParent})();function oi(e,t){1&e&&(u.TgZ(0,"option",37),u._UZ(1,"system-label",38),u.qZA())}function ai(e,t){if(1&e&&(u.TgZ(0,"div",39)(1,"span",40),u._uU(2),u.qZA()()),2&e){const e=t.$implicit;u.Q6J("cdkDragData",e),u.xp6(2),u.Oqu(e.name)}}function di(e,t){if(1&e&&(u.TgZ(0,"div",39)(1,"span",40),u._uU(2),u.qZA()()),2&e){const e=t.$implicit;u.Q6J("cdkDragData",e),u.xp6(2),u.Oqu(e.name)}}const ri=function(e){return[e]};let ci=(()=>{var e;class DictionaryManagerIndexAdd{constructor(e,t,i){(0,s.Z)(this,"dictionarymanager",void 0),(0,s.Z)(this,"injector",void 0),(0,s.Z)(this,"modelutilities",void 0),(0,s.Z)(this,"self",void 0),(0,s.Z)(this,"index",void 0),(0,s.Z)(this,"availableDictionaryItems",[]),(0,s.Z)(this,"indexDictionaryItems",[]),this.dictionarymanager=e,this.injector=t,this.modelutilities=i;let n=this.dictionarymanager.dictionarydefinitions.find((e=>e.id==this.dictionarymanager.currentDictionaryDefinition)).tablename;this.index={id:this.modelutilities.generateGuid(),name:`idx_${n}_`,sysdictionarydefinition_id:this.dictionarymanager.currentDictionaryDefinition,deleted:0,status:"d",scope:this.dictionarymanager.defaultScope,indextype:"index"},this.availableDictionaryItems=this.dictionarymanager.getDictionaryDefinitionItems(this.dictionarymanager.currentDictionaryDefinition)}close(){this.self.destroy()}add(){this.dictionarymanager.dictionaryindexes.push({...this.index});let e=0;for(let t of this.indexDictionaryItems)this.dictionarymanager.dictionaryindexitems.push({id:this.modelutilities.generateGuid(),scope:this.index.scope,status:this.index.status,sysdictionaryindex_id:this.index.id,sysdictionaryitem_id:t.id,sequence:e,deleted:0}),e++;this.close()}onFieldDrop(e){let t=e.previousContainer.data.splice(e.previousIndex,1);e.container.data.splice(e.currentIndex,0,t[0])}}return e=DictionaryManagerIndexAdd,(0,s.Z)(DictionaryManagerIndexAdd,"ɵfac",(function(t){return new(t||e)(u.Y36(A),u.Y36(u.zs3),u.Y36(Z.A))})),(0,s.Z)(DictionaryManagerIndexAdd,"ɵcmp",u.Xpm({type:e,selectors:[["ng-component"]],decls:61,vars:17,consts:[[3,"close"],["label","LBL_ADD_INDEX"],[1,"slds-grid"],[1,"slds-form-element__control","slds-size--1-of-2","slds-p-right--xxx-small"],[1,"slds-form-element__label"],[1,"slds-required"],["label","LBL_NAME"],[3,"maxlength","ngModel","ngModelChange"],[1,"slds-large-size--1-of-2","slds-p-left--xxx-small","slds-form-element__control"],["label","LBL_TYPE"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],["value","primary"],["value","index"],["value","unique"],["label","LBL_SCOPE"],["value","g",4,"ngIf"],["value","c"],["label","LBL_CUSTOM"],[1,"slds-size--1-of-4","slds-p-horizontal--xxx-small","slds-form-element__control"],["label","LBL_PACKAGE"],[3,"ngModel","ngModelChange"],[1,"slds-size--1-of-4","slds-p-left--xxx-small","slds-form-element__control"],["label","LBL_VERSION"],[1,"slds-form-element","slds-p-right--x-small","slds-size--1-of-2"],["label","LBL_AVAILABLE_ITEMS"],["cdkDropList","",1,"slds-picklist","slds-picklist__options","slds-size--1-of-1",2,"height","50vh",3,"cdkDropListData","cdkDropListConnectedTo","cdkDropListDropped"],["listOne","cdkDropList"],["cdkDrag","","class","slds-drag--preview slds-picklist__item",3,"cdkDragData",4,"ngFor","ngForOf"],[1,"slds-form-element","slds-p-left--x-small","slds-size--1-of-2"],["label","LBL_INDEX_ITEMS"],["cdkDropList","",1,"slds-picklist","slds-picklist__options","slds-size--1-of-1","cdk-drag",2,"height","50vh",3,"cdkDropListData","cdkDropListConnectedTo","cdkDropListDropped"],["listTwo","cdkDropList"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_ADD"],["value","g"],["label","LBL_GLOBAL"],["cdkDrag","",1,"slds-drag--preview","slds-picklist__item",3,"cdkDragData"],[1,"slds-truncate"]],template:function(e,t){if(1&e&&(u.TgZ(0,"system-modal")(1,"system-modal-header",0),u.NdJ("close",(function(){return t.close()})),u._UZ(2,"system-label",1),u.qZA(),u.TgZ(3,"system-modal-content")(4,"div",2)(5,"div",3)(6,"label",4)(7,"abbr",5),u._uU(8,"* "),u.qZA(),u._UZ(9,"system-label",6),u.qZA(),u.TgZ(10,"system-input-text",7),u.NdJ("ngModelChange",(function(e){return t.index.name=e})),u.qZA()(),u.TgZ(11,"div",8)(12,"label",4)(13,"abbr",5),u._uU(14,"* "),u.qZA(),u._UZ(15,"system-label",9),u.qZA(),u.TgZ(16,"div",10)(17,"select",11),u.NdJ("ngModelChange",(function(e){return t.index.indextype=e})),u.TgZ(18,"option",12),u._uU(19,"primary"),u.qZA(),u.TgZ(20,"option",13),u._uU(21,"index"),u.qZA(),u.TgZ(22,"option",14),u._uU(23,"unique"),u.qZA()()()()(),u.TgZ(24,"div",2)(25,"div",3)(26,"label",4)(27,"abbr",5),u._uU(28,"* "),u.qZA(),u._UZ(29,"system-label",15),u.qZA(),u.TgZ(30,"div",10)(31,"select",11),u.NdJ("ngModelChange",(function(e){return t.index.scope=e})),u.YNc(32,oi,2,0,"option",16),u.TgZ(33,"option",17),u._UZ(34,"system-label",18),u.qZA()()()(),u.TgZ(35,"div",19)(36,"label",4),u._UZ(37,"system-label",20),u.qZA(),u.TgZ(38,"system-input-text",21),u.NdJ("ngModelChange",(function(e){return t.index.package=e})),u.qZA()(),u.TgZ(39,"div",22)(40,"label",4),u._UZ(41,"system-label",23),u.qZA(),u.TgZ(42,"system-input-text",21),u.NdJ("ngModelChange",(function(e){return t.index.version=e})),u.qZA()()(),u.TgZ(43,"div",2)(44,"div",24)(45,"span",4),u._UZ(46,"system-label",25),u.qZA(),u.TgZ(47,"div",26,27),u.NdJ("cdkDropListDropped",(function(e){return t.onFieldDrop(e)})),u.YNc(49,ai,3,2,"div",28),u.qZA()(),u.TgZ(50,"div",29)(51,"span",4),u._UZ(52,"system-label",30),u.qZA(),u.TgZ(53,"div",31,32),u.NdJ("cdkDropListDropped",(function(e){return t.onFieldDrop(e)})),u.YNc(55,di,3,2,"div",28),u.qZA()()()(),u.TgZ(56,"system-modal-footer")(57,"button",33),u.NdJ("click",(function(){return t.close()})),u._UZ(58,"system-label",34),u.qZA(),u.TgZ(59,"button",35),u.NdJ("click",(function(){return t.add()})),u._UZ(60,"system-label",36),u.qZA()()()),2&e){const e=u.MAs(48),i=u.MAs(54);u.xp6(10),u.Q6J("maxlength",128)("ngModel",t.index.name),u.xp6(7),u.Q6J("ngModel",t.index.indextype),u.xp6(14),u.Q6J("ngModel",t.index.scope),u.xp6(1),u.Q6J("ngIf","all"==t.dictionarymanager.changescope),u.xp6(6),u.Q6J("ngModel",t.index.package),u.xp6(4),u.Q6J("ngModel",t.index.version),u.xp6(5),u.Q6J("cdkDropListData",t.availableDictionaryItems)("cdkDropListConnectedTo",u.VKq(13,ri,i)),u.xp6(2),u.Q6J("ngForOf",t.availableDictionaryItems),u.xp6(4),u.Q6J("cdkDropListData",t.indexDictionaryItems)("cdkDropListConnectedTo",u.VKq(15,ri,e)),u.xp6(2),u.Q6J("ngForOf",t.indexDictionaryItems)}},dependencies:[n.sg,n.O5,l.YN,l.Kr,l.EJ,l.JJ,l.nD,l.On,J.Z,L._,nt.j,lt.x,ot.p,at.y,g.Wj,g.Zt],encapsulation:2})),DictionaryManagerIndexAdd})(),gi=(()=>{var e;class domainmanager{constructor(e,t,i,n){(0,s.Z)(this,"backend",void 0),(0,s.Z)(this,"metadata",void 0),(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"modelutilities",void 0),(0,s.Z)(this,"domaindefinitions",[]),(0,s.Z)(this,"domainfields",[]),(0,s.Z)(this,"domainfieldvalidations",[]),(0,s.Z)(this,"domainfieldvalidationvalues",[]),(0,s.Z)(this,"currentDomainDefinition",void 0),(0,s.Z)(this,"currentDomainField",void 0),(0,s.Z)(this,"currentDomainScope",void 0),(0,s.Z)(this,"languagelabels",[]),(0,s.Z)(this,"languagetranslations",[]),(0,s.Z)(this,"languagecustomlabels",[]),(0,s.Z)(this,"languagecustomtranslations",[]),(0,s.Z)(this,"loaded",void 0),(0,s.Z)(this,"dbtypes",["non-db","varchar","char","text","shorttext","mediumtext","longtext","date","datetime","int","tinyint","bigint","double","bool","float","json"]),(0,s.Z)(this,"fieldtypes",[]),this.backend=e,this.metadata=t,this.language=i,this.modelutilities=n,this.loadDomains();for(let e in this.metadata.fieldTypeMappings)this.fieldtypes.push(e);this.fieldtypes.sort()}loadDomains(){this.backend.getRequest("dictionary/domains").subscribe((e=>{this.domaindefinitions=e.domaindefinitions,this.domainfields=e.domainfields,this.domainfieldvalidations=e.domainfieldvalidations,this.domainfieldvalidationvalues=e.domainfieldvalidationvalues,this.loaded=JSON.stringify(e)}))}getValidationById(e){return this.domainfieldvalidations.find((t=>t.id==e))}getValidationValuesdById(e){Array.isArray(this.domainfieldvalidationvalues)||(this.domainfieldvalidationvalues=[]);let t=this.domainfieldvalidationvalues.filter((t=>t.sysdomainfieldvalidation_id==e&&"c"==t.scope)),i=this.domainfieldvalidationvalues.filter((t=>t.sysdomainfieldvalidation_id==e&&"c"!=t.scope));for(let e of i)-1==t.findIndex((t=>t.enumvalue==e.enumvalue))&&t.push(e);return t}getStatusColor(e){switch(e){case"a":return"slds-icon-text-success";case"i":return"slds-icon-text-light";default:return"slds-icon-text-warning"}}save(){let e=this.determineChangedRecords();this.languagelabels.length>0&&(e.languagelabels=this.languagelabels,e.languagetranslations=this.languagetranslations),this.languagecustomlabels.length>0&&(e.languagecustomlabels=this.languagecustomlabels,e.languagecustomtranslations=this.languagecustomtranslations),this.backend.postRequest("dictionary/domains",{},e).subscribe((e=>{}))}determineChangedRecords(){let e=JSON.parse(this.loaded),t={domaindefinitions:[],domainfields:[],domainfieldvalidations:[],domainfieldvalidationvalues:[]};for(let i in t)for(let s of this[i]){let n=e[i].find((e=>e.id==s.id));(!n||n&&JSON.stringify(n)!=JSON.stringify(s))&&t[i].push(s)}return t}generateENUMSFromModules(){Array.isArray(this.domainfieldvalidationvalues)||(this.domainfieldvalidationvalues=[]),this.backend.getRequest("dictionary/domains/appliststrings").subscribe((e=>{for(let t in this.metadata.fieldDefs){let i=this.metadata.fieldDefs[t];for(let s in i)if(i[s].options&&(e.en_us.global[i[s].options]||e.en_us.custom[i[s].options])&&i[s].type.includes("enum")&&!this.domaindefinitions.find((e=>e.name==t.toLowerCase()+"_"+s))){let n=e.en_us.global[i[s].options]?"g":"c",l=this.modelutilities.generateGuid();this.domaindefinitions.push({id:l,name:t.toLowerCase()+"_"+s,scope:n,fieldtype:i[s].type,status:"a",deleted:0});let o=this.modelutilities.generateGuid();this.domainfieldvalidations.push({id:o,name:i[s].options,validation_type:"enum",scope:n,status:"a",deleted:0}),this.domainfields.push({id:this.modelutilities.generateGuid(),name:s,dbtype:"enum"==i[s].type?"varchar":"text",len:i[s].len?i[s].len:"255",sysdomaindefinition_id:l,sysdomainfieldvalidation_id:o,scope:n,status:"a",exclude_from_index:0,deleted:0});let a=this.language.languagedata.applist[i[s].options],d=0;for(let t in a){if(this.domainfieldvalidationvalues.push({id:this.modelutilities.generateGuid(),sysdomainfieldvalidation_id:o,label:t?("LBL_"+i[s].options+"_"+t).toUpperCase():"",enumvalue:t,sequence:d,comment:"",scope:n,status:"a",deleted:0}),t&&!this.language.languagedata.applang[("LBL_"+i[s].options+"_"+t).toUpperCase()]){let l=this.modelutilities.generateGuid();"g"==n?this.languagelabels.push({id:l,name:("LBL_"+i[s].options+"_"+t).toUpperCase()}):this.languagecustomlabels.push({id:l,name:("LBL_"+i[s].options+"_"+t).toUpperCase()});for(let n in e)e[n].global[i[s].options]&&e[n].global[i[s].options][t]&&(this.languagetranslations.push({id:this.modelutilities.generateGuid(),syslanguagelabel_id:l,syslanguage:n,translation_default:e[n].global[i[s].options][t]}),n==this.language.currentlanguage&&this.language.addLabel(("LBL_"+i[s].options+"_"+t).toUpperCase(),e[n].global[i[s].options][t])),e[n].custom[i[s].options]&&e[n].custom[i[s].options][t]&&(this.languagecustomtranslations.push({id:this.modelutilities.generateGuid(),syslanguagelabel_id:l,syslanguage:n,translation_default:e[n].custom[i[s].options][t]}),n==this.language.currentlanguage&&this.language.addLabel(("LBL_"+i[s].options+"_"+t).toUpperCase(),e[n].custom[i[s].options][t]))}d++}}}}))}}return e=domainmanager,(0,s.Z)(domainmanager,"ɵfac",(function(t){return new(t||e)(u.LFG(h.y),u.LFG(f.Pu),u.LFG(b.d),u.LFG(Z.A))})),(0,s.Z)(domainmanager,"ɵprov",u.Yz7({token:e,factory:e.ɵfac})),domainmanager})();var ui=i(3369);const mi=function(e){return{"slds-is-selected":e}};function pi(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"tr",20),u.NdJ("click",(function(){const t=u.CHM(e).$implicit,i=u.oxw();return u.KtG(i.setCurrentDomainDefintion(t.id))})),u.TgZ(1,"td"),u._UZ(2,"system-utility-icon",21),u.TgZ(3,"dictionary-manager-item-status",22),u.NdJ("ngModelChange",(function(t){const i=u.CHM(e).$implicit;return u.KtG(i.status=t)})),u.qZA()(),u.TgZ(4,"td",23)(5,"div",24),u._uU(6),u.qZA()(),u.TgZ(7,"td",25)(8,"div",24),u._uU(9),u.qZA()(),u.TgZ(10,"td",26)(11,"system-utility-icon",27),u.NdJ("click",(function(t){const i=u.CHM(e).$implicit,s=u.oxw();return u.KtG(s.deleteDomainDefinition(t,i.id))})),u.qZA()()()}if(2&e){const e=t.$implicit,i=u.oxw();u.Q6J("ngClass",u.VKq(5,mi,i.domainmanager.currentDomainDefinition==e.id)),u.xp6(2),u.Q6J("icon","g"==e.scope?"world":"people"),u.xp6(1),u.Q6J("ngModel",e.status),u.xp6(3),u.Oqu(e.name),u.xp6(3),u.Oqu(e.fieldtype)}}let hi=(()=>{var e;class DomainManagerDefinitions{constructor(e,t,i,n,l,o,a,d,r){(0,s.Z)(this,"domainmanager",void 0),(0,s.Z)(this,"backend",void 0),(0,s.Z)(this,"metadata",void 0),(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"modelutilities",void 0),(0,s.Z)(this,"broadcast",void 0),(0,s.Z)(this,"toast",void 0),(0,s.Z)(this,"modal",void 0),(0,s.Z)(this,"injector",void 0),(0,s.Z)(this,"definitionfilterterm",void 0),(0,s.Z)(this,"definitionfilterscope",""),(0,s.Z)(this,"definitionfilterstatus",""),this.domainmanager=e,this.backend=t,this.metadata=i,this.language=n,this.modelutilities=l,this.broadcast=o,this.toast=a,this.modal=d,this.injector=r}get domaindefinitions(){return this.domainmanager.domaindefinitions.filter((e=>!e.deleted&&((!this.definitionfilterterm||e.name.toLowerCase().indexOf(this.definitionfilterterm.toLowerCase())>=0)&&((""==this.definitionfilterscope||e.scope==this.definitionfilterscope)&&(""==this.definitionfilterstatus||e.status==this.definitionfilterstatus))))).sort(((e,t)=>e.name>t.name?1:-1))}trackByFn(e,t){return t.id}setCurrentDomainDefintion(e){this.domainmanager.currentDomainDefinition=e,this.domainmanager.currentDomainField=null}addDomainDefinition(e){e.stopPropagation(),this.modal.openModal("DomainManagerAddDefinitionModal",!0,this.injector)}deleteDomainDefinition(e,t){e.stopPropagation(),this.modal.prompt("confirm",this.language.getLabel("MSG_DELETE_RECORD","","long"),this.language.getLabel("MSG_DELETE_RECORD")).subscribe((e=>{if(e){this.domainmanager.domaindefinitions.find((e=>e.id==t)).deleted=1;for(let e of this.domainmanager.domainfields.filter((e=>e.sysdomaindefinition_id==t)))e.deleted=1;this.domainmanager.currentDomainDefinition==t&&(this.domainmanager.currentDomainDefinition,this.domainmanager.currentDomainField)}}))}}return e=DomainManagerDefinitions,(0,s.Z)(DomainManagerDefinitions,"ɵfac",(function(t){return new(t||e)(u.Y36(gi),u.Y36(h.y),u.Y36(f.Pu),u.Y36(b.d),u.Y36(Z.A),u.Y36(ui.f),u.Y36(v.A),u.Y36(x.o),u.Y36(u.zs3))})),(0,s.Z)(DomainManagerDefinitions,"ɵcmp",u.Xpm({type:e,selectors:[["domain-manager-definitions"]],decls:27,vars:5,consts:[[1,"slds-p-around--xx-small","slds-grid","slds-grid--vertical-align-center","slds-border--bottom"],["placeholder","LBL_SEARCH",1,"slds-grow",3,"ngModel","ngModelChange"],[1,"slds-p-left--xx-small",3,"ngModel","ngModelChange"],["value","g","icon","world"],["value","c","icon","people"],["value","d","icon","light_bulb","colorclass","slds-icon-text-warning"],["value","a","icon","light_bulb","colorclass","slds-icon-text-success"],["value","i","icon","light_bulb","colorclass","slds-icon-text-light"],["system-to-bottom",""],[1,"slds-table","slds-table_cell-buffer","slds-table_bordered","slds-table--header-fixed"],[1,"slds-line-height_reset"],["scope","col",2,"width","2.5rem"],["scope","col",1,""],[1,"slds-truncate","slds-th__action","slds-p-horizontal--x-small"],["label","LBL_DOMAIN"],["label","LBL_TYPE"],["scope","col",2,"width","2rem"],["class","slds-hint-parent",3,"ngClass","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"slds-align--absolute-center","slds-border--top","slds-p-around--small","slds-theme--shade",2,"position","sticky","bottom","0"],["icon","new","size","x-small",2,"cursor","pointer",3,"click"],[1,"slds-hint-parent",3,"ngClass","click"],["size","xx-small",1,"slds-p-right--xx-small",3,"icon"],[3,"ngModel","ngModelChange"],["data-label","Domain"],[1,"slds-truncate"],["data-label","Type"],[1,"slds-align--absolute-center",2,"width","2rem"],["size","xx-small","icon","delete",3,"click"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0)(1,"system-input-text",1),u.NdJ("ngModelChange",(function(e){return t.definitionfilterterm=e})),u.qZA(),u.TgZ(2,"system-select-icon",2),u.NdJ("ngModelChange",(function(e){return t.definitionfilterscope=e})),u._UZ(3,"system-select-icon-item")(4,"system-select-icon-item",3)(5,"system-select-icon-item",4),u.qZA(),u.TgZ(6,"system-select-icon",2),u.NdJ("ngModelChange",(function(e){return t.definitionfilterstatus=e})),u._UZ(7,"system-select-icon-item")(8,"system-select-icon-item",5)(9,"system-select-icon-item",6)(10,"system-select-icon-item",7),u.qZA()(),u.TgZ(11,"div",8)(12,"table",9)(13,"thead")(14,"tr",10),u._UZ(15,"th",11),u.TgZ(16,"th",12)(17,"div",13),u._UZ(18,"system-label",14),u.qZA()(),u.TgZ(19,"th",12)(20,"div",13),u._UZ(21,"system-label",15),u.qZA()(),u._UZ(22,"th",16),u.qZA()(),u.TgZ(23,"tbody"),u.YNc(24,pi,12,7,"tr",17),u.qZA()(),u.TgZ(25,"div",18)(26,"system-utility-icon",19),u.NdJ("click",(function(e){return t.addDomainDefinition(e)})),u.qZA()()()),2&e&&(u.xp6(1),u.Q6J("ngModel",t.definitionfilterterm),u.xp6(1),u.Q6J("ngModel",t.definitionfilterscope),u.xp6(4),u.Q6J("ngModel",t.definitionfilterstatus),u.xp6(18),u.Q6J("ngForOf",t.domaindefinitions)("ngForTrackBy",t.trackByFn))},dependencies:[n.mk,n.sg,l.JJ,l.On,J.Z,L._,m.r,N.E,k.s,w.H,p],encapsulation:2})),DomainManagerDefinitions})();const fi=function(e){return{"slds-is-selected":e}};function bi(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"tr",18),u.NdJ("click",(function(){const t=u.CHM(e).$implicit,i=u.oxw(2);return u.KtG(i.domainmanager.currentDomainField=t.id)})),u.TgZ(1,"td"),u._UZ(2,"system-utility-icon",19),u.TgZ(3,"system-utility-icon",20),u.NdJ("click",(function(t){const i=u.CHM(e).$implicit,s=u.oxw(2);return u.KtG(s.customizeDomainField(t,i))})),u.qZA(),u.TgZ(4,"system-utility-icon",21),u.NdJ("click",(function(t){const i=u.CHM(e).$implicit,s=u.oxw(2);return u.KtG(s.setStatus(t,i))})),u.qZA()(),u.TgZ(5,"td",22)(6,"div",6),u._uU(7),u.qZA()(),u.TgZ(8,"td",23)(9,"div",6),u._uU(10),u.qZA()(),u.TgZ(11,"td",23)(12,"div",6),u._uU(13),u.qZA()(),u.TgZ(14,"td",23)(15,"div",6),u._uU(16),u.qZA()(),u.TgZ(17,"td",24),u._UZ(18,"system-checkbox",25),u.qZA(),u.TgZ(19,"td",24),u._UZ(20,"system-checkbox",25),u.qZA(),u.TgZ(21,"td",26)(22,"system-utility-icon",27),u.NdJ("click",(function(t){const i=u.CHM(e).$implicit,s=u.oxw(2);return u.KtG(s.deleteDomainField(t,i.id))})),u.qZA()()()}if(2&e){const e=t.$implicit,i=u.oxw(2);u.Q6J("ngClass",u.VKq(11,fi,i.domainmanager.currentDomainField==e.id)),u.xp6(2),u.Q6J("icon","rows")("size","x-small"),u.xp6(1),u.Q6J("icon","g"==e.scope?"world":"people"),u.xp6(1),u.Q6J("colorclass",i.domainmanager.getStatusColor(e.status)),u.xp6(3),u.Oqu(e.name),u.xp6(3),u.Oqu(e.dbtype),u.xp6(3),u.Oqu(e.fieldtype),u.xp6(3),u.Oqu(e.len),u.xp6(2),u.Q6J("ngModel","1"==e.required),u.xp6(2),u.Q6J("ngModel","1"==e.exclude_from_index)}}function Zi(e,t){if(1&e){const e=u.EpF();u.ynx(0),u.TgZ(1,"table",2)(2,"thead")(3,"tr",3),u._UZ(4,"th",4),u.TgZ(5,"th",5)(6,"div",6),u._UZ(7,"system-label",7),u.qZA()(),u.TgZ(8,"th",5)(9,"div",6),u._UZ(10,"system-label",8),u.qZA()(),u.TgZ(11,"th",5)(12,"div",6),u._UZ(13,"system-label",9),u.qZA()(),u.TgZ(14,"th",5)(15,"div",6),u._UZ(16,"system-label",10),u.qZA()(),u.TgZ(17,"th",5)(18,"div",6),u._UZ(19,"system-label",11),u.qZA()(),u.TgZ(20,"th",5)(21,"div",6),u._UZ(22,"system-label",12),u.qZA()(),u._UZ(23,"th",13),u.qZA()(),u.TgZ(24,"tbody",14),u.NdJ("cdkDropListDropped",(function(t){u.CHM(e);const i=u.oxw();return u.KtG(i.drop(t))})),u.YNc(25,bi,23,13,"tr",15),u.qZA()(),u.TgZ(26,"div",16)(27,"system-utility-icon",17),u.NdJ("click",(function(t){u.CHM(e);const i=u.oxw();return u.KtG(i.addDomainField(t))})),u.qZA()(),u.BQk()}if(2&e){const e=u.oxw();u.xp6(25),u.Q6J("ngForOf",e.domainfields)("ngForTrackBy",e.trackByFn)}}function _i(e,t){1&e&&(u.TgZ(0,"div",28),u._UZ(1,"system-label",29),u.qZA())}let yi=(()=>{var e;class DomainManagerFields{constructor(e,t,i,n,l,o,a,d,r){(0,s.Z)(this,"domainmanager",void 0),(0,s.Z)(this,"backend",void 0),(0,s.Z)(this,"metadata",void 0),(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"modelutilities",void 0),(0,s.Z)(this,"broadcast",void 0),(0,s.Z)(this,"toast",void 0),(0,s.Z)(this,"modal",void 0),(0,s.Z)(this,"injector",void 0),this.domainmanager=e,this.backend=t,this.metadata=i,this.language=n,this.modelutilities=l,this.broadcast=o,this.toast=a,this.modal=d,this.injector=r}get domainfields(){let e=this.domainmanager.domainfields.filter((e=>0==e.deleted&&e.sysdomaindefinition_id==this.domainmanager.currentDomainDefinition&&"c"==e.scope));for(let t of this.domainmanager.domainfields.filter((e=>0==e.deleted&&e.sysdomaindefinition_id==this.domainmanager.currentDomainDefinition&&"c"!=e.scope)))-1==e.findIndex((e=>e.name==t.name))&&e.push(t);return e.sort(((e,t)=>e.sequence>t.sequence?1:-1))}drop(e){let t=this.domainfields,i=t.splice(e.previousIndex,1);t.splice(e.currentIndex,0,i[0]);let s=0;for(let e of t)e.sequence=s,s++}addDomainField(e){e.stopPropagation(),this.modal.openModal("DomainManagerAddFieldModal",!0,this.injector)}deleteDomainField(e,t){e.stopPropagation(),this.modal.prompt("confirm",this.language.getLabel("MSG_DELETE_RECORD","","long"),this.language.getLabel("MSG_DELETE_RECORD")).subscribe((e=>{e&&(this.domainmanager.domainfields.find((e=>e.id==t)).deleted=1,this.domainmanager.currentDomainField==t&&this.domainmanager.currentDomainField)}))}customizeDomainField(e,t){e.stopPropagation(),"g"==t.scope&&this.modal.prompt("confirm","Customize the Field?","Customize").subscribe((e=>{if(e){let e={...t};e.id=this.modelutilities.generateGuid(),e.scope="c",this.domainmanager.domainfields.push(e),this.domainmanager.currentDomainField=e.id,this.domainmanager.currentDomainScope=e.scope}}))}setStatus(e,t){e.stopPropagation(),"d"==t.status?t.status="a":"a"==t.status?t.status="i":t.status="a"}trackByFn(e,t){return t.id}}return e=DomainManagerFields,(0,s.Z)(DomainManagerFields,"ɵfac",(function(t){return new(t||e)(u.Y36(gi),u.Y36(h.y),u.Y36(f.Pu),u.Y36(b.d),u.Y36(Z.A),u.Y36(ui.f),u.Y36(v.A),u.Y36(x.o),u.Y36(u.zs3))})),(0,s.Z)(DomainManagerFields,"ɵcmp",u.Xpm({type:e,selectors:[["domain-manager-fields"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["selectdomain",""],[1,"slds-table","slds-table_cell-buffer","slds-table_bordered"],[1,"slds-line-height_reset"],["scope","col",2,"width","3rem"],["scope","col",1,""],[1,"slds-truncate"],["label","LBL_FIELD"],["label","LBL_DBTYPE"],["label","LBL_TYPE"],["label","LBL_LENGTH"],["label","LBL_REQUIRED"],["label","LBL_EXCLUDE_FROM_INDEX"],["scope","col",2,"width","2rem"],["cdkDropList","",1,"dragboundary",3,"cdkDropListDropped"],["class","slds-hint-parent","cdkDrag","","cdkDragBoundary",".dragboundary",3,"ngClass","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"slds-align--absolute-center","slds-p-around--small"],["icon","new","size","x-small",3,"click"],["cdkDrag","","cdkDragBoundary",".dragboundary",1,"slds-hint-parent",3,"ngClass","click"],["cdkDragHandle","",1,"slds-p-right--xx-small",2,"cursor","move",3,"icon","size"],["size","xx-small",1,"slds-p-right--xx-small",3,"icon","click"],["size","xx-small","icon","light_bulb",1,"slds-p-right--xx-small",3,"colorclass","click"],["data-label","Domain"],["data-label","Type"],["data-label","Type",1,"slds-p-vertical--none"],["disabled","",3,"ngModel"],[1,"slds-align--absolute-center",2,"width","2rem"],["size","xx-small","icon","delete",3,"click"],[1,"slds-size--1-of-1","slds-height_full","slds-align--absolute-center"],["label","LBL_SELECT_A_DOMAIN"]],template:function(e,t){if(1&e&&(u.YNc(0,Zi,28,2,"ng-container",0),u.YNc(1,_i,2,0,"ng-template",null,1,u.W1O)),2&e){const e=u.MAs(2);u.Q6J("ngIf",t.domainmanager.currentDomainDefinition)("ngIfElse",e)}},dependencies:[n.mk,n.sg,n.O5,l.JJ,l.On,Q.U,L._,m.r,g.Wj,g.Zt,g.Bh],encapsulation:2})),DomainManagerFields})();function vi(e,t){if(1&e&&(u.TgZ(0,"option",32),u._uU(1),u.qZA()),2&e){const e=t.$implicit;u.Q6J("value",e),u.xp6(1),u.Oqu(e)}}function xi(e,t){if(1&e&&(u.TgZ(0,"option",32),u._uU(1),u.qZA()),2&e){const e=t.$implicit;u.Q6J("value",e),u.xp6(1),u.Oqu(e)}}let Mi=(()=>{var e;class DomainManagerFieldDetails{constructor(e,t,i,n){(0,s.Z)(this,"backend",void 0),(0,s.Z)(this,"metadata",void 0),(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"domainmanager",void 0),(0,s.Z)(this,"field",{}),this.backend=e,this.metadata=t,this.language=i,this.domainmanager=n}get required(){return"1"==this.field.required}set required(e){this.field.required=e?"1":"0"}}return e=DomainManagerFieldDetails,(0,s.Z)(DomainManagerFieldDetails,"ɵfac",(function(t){return new(t||e)(u.Y36(h.y),u.Y36(f.Pu),u.Y36(b.d),u.Y36(gi))})),(0,s.Z)(DomainManagerFieldDetails,"ɵcmp",u.Xpm({type:e,selectors:[["domainmanager-field-details"]],inputs:{field:"field"},decls:60,vars:13,consts:[[1,"slds-p-around--x-small"],[1,"slds-grid"],[1,"slds-size--3-of-4","slds-form-element","slds-m-vertical--xxx-small"],[1,"slds-form-element__control"],[1,"slds-form-element__label"],["label","LBL_NAME"],["type","text","disabled","",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-size--1-of-4","slds-form-element__control","slds-size--1-of-4","slds-m-vertical--xxx-small","slds-p-left--x-small"],["label","LBL_SCOPE"],[1,"slds-select_container"],["disabled","",1,"slds-select",3,"ngModel","ngModelChange"],["value","g"],["label","LBL_GLOBAL"],["value","c"],["label","LBL_CUSTOM"],[1,"slds-form-element","slds-m-vertical--xxx-small"],["label","LBL_DBTYPE"],[3,"value",4,"ngFor","ngForOf"],["label","LBL_TYPE"],[1,"slds-select",3,"ngModel","ngModelChange"],["label","LBL_LABEL"],[3,"ngModel","ngModelChange"],["label","LBL_LENGTH"],["type","text",1,"slds-input",3,"ngModel","ngModelChange"],["label","LBL_REQUIRED"],[3,"asinteger","ngModel","ngModelChange"],["label","LBL_COMMENT"],[1,"slds-textarea",3,"ngModel","ngModelChange"],[1,"slds-grid","slds-m-vertical--xxx-small","slds-gutters_direct-xx-small"],[1,"slds-col","slds-size--1-of-2","slds-form-element"],["label","LBL_VERSION"],["label","LBL_PACKAGE"],[3,"value"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"label",4),u._UZ(5,"system-label",5),u.qZA(),u.TgZ(6,"input",6),u.NdJ("ngModelChange",(function(e){return t.field.name=e})),u.qZA()()(),u.TgZ(7,"div",7)(8,"label",4),u._UZ(9,"system-label",8),u.qZA(),u.TgZ(10,"div",9)(11,"select",10),u.NdJ("ngModelChange",(function(e){return t.field.scope=e})),u.TgZ(12,"option",11),u._UZ(13,"system-label",12),u.qZA(),u.TgZ(14,"option",13),u._UZ(15,"system-label",14),u.qZA()()()()(),u.TgZ(16,"div",15)(17,"label",4),u._UZ(18,"system-label",16),u.qZA(),u.TgZ(19,"div",9)(20,"select",10),u.NdJ("ngModelChange",(function(e){return t.field.dbtype=e})),u.YNc(21,vi,2,2,"option",17),u.qZA()()(),u.TgZ(22,"div",15)(23,"label",4),u._UZ(24,"system-label",18),u.qZA(),u.TgZ(25,"div",9)(26,"select",19),u.NdJ("ngModelChange",(function(e){return t.field.fieldtype=e})),u.YNc(27,xi,2,2,"option",17),u.qZA()()(),u.TgZ(28,"div",15)(29,"label",4),u._UZ(30,"system-label",20),u.qZA(),u.TgZ(31,"div",9)(32,"system-input-label",21),u.NdJ("ngModelChange",(function(e){return t.field.label=e})),u.qZA()()(),u.TgZ(33,"div",15)(34,"label",4),u._UZ(35,"system-label",22),u.qZA(),u.TgZ(36,"div",3)(37,"input",23),u.NdJ("ngModelChange",(function(e){return t.field.len=e})),u.qZA()()(),u.TgZ(38,"div",15)(39,"label",4),u._UZ(40,"system-label",24),u.qZA(),u.TgZ(41,"div",3)(42,"system-checkbox",25),u.NdJ("ngModelChange",(function(e){return t.required=e})),u._uU(43,"required"),u.qZA()()(),u.TgZ(44,"div",15)(45,"label",4),u._UZ(46,"system-label",26),u.qZA(),u.TgZ(47,"div",3)(48,"textarea",27),u.NdJ("ngModelChange",(function(e){return t.field.description=e})),u.qZA()()(),u.TgZ(49,"div",28)(50,"div",29)(51,"label",4),u._UZ(52,"system-label",30),u.qZA(),u.TgZ(53,"div",3)(54,"input",23),u.NdJ("ngModelChange",(function(e){return t.field.version=e})),u.qZA()()(),u.TgZ(55,"div",29)(56,"label",4),u._UZ(57,"system-label",31),u.qZA(),u.TgZ(58,"div",3)(59,"input",23),u.NdJ("ngModelChange",(function(e){return t.field.package=e})),u.qZA()()()()()),2&e&&(u.xp6(6),u.Q6J("ngModel",t.field.name),u.xp6(5),u.Q6J("ngModel",t.field.scope),u.xp6(9),u.Q6J("ngModel",t.field.dbtype),u.xp6(1),u.Q6J("ngForOf",t.domainmanager.dbtypes),u.xp6(5),u.Q6J("ngModel",t.field.fieldtype),u.xp6(1),u.Q6J("ngForOf",t.domainmanager.fieldtypes),u.xp6(5),u.Q6J("ngModel",t.field.label),u.xp6(5),u.Q6J("ngModel",t.field.len),u.xp6(5),u.Q6J("asinteger",!0)("ngModel",t.required),u.xp6(6),u.Q6J("ngModel",t.field.description),u.xp6(6),u.Q6J("ngModel",t.field.version),u.xp6(5),u.Q6J("ngModel",t.field.package))},dependencies:[n.sg,l.YN,l.Kr,l.Fj,l.EJ,l.JJ,l.On,Q.U,S.$,L._],encapsulation:2})),DomainManagerFieldDetails})();function Ai(e,t){1&e&&(u.TgZ(0,"th",21)(1,"div",22),u._uU(2,"value"),u.qZA()())}function Ti(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"td")(1,"input",14),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw().$implicit;return u.KtG(i.enumvalue=t)})),u.qZA()()}if(2&e){const e=u.oxw().$implicit;u.xp6(1),u.Q6J("ngModel",e.enumvalue)}}function Li(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"tr",27)(1,"td",28),u._UZ(2,"system-utility-icon",29),u.TgZ(3,"system-utility-icon",30),u.NdJ("click",(function(t){const i=u.CHM(e).$implicit,s=u.oxw(2);return u.KtG(s.customizeValidationValue(t,i))})),u.qZA(),u.TgZ(4,"dictionary-manager-item-status",31),u.NdJ("ngModelChange",(function(t){const i=u.CHM(e).$implicit;return u.KtG(i.status=t)})),u.qZA()(),u.YNc(5,Ti,2,1,"td",32),u.TgZ(6,"td")(7,"select",33),u.NdJ("ngModelChange",(function(t){const i=u.CHM(e).$implicit;return u.KtG(i.valuetype=t)})),u.TgZ(8,"option",34),u._UZ(9,"system-label",35),u.qZA(),u.TgZ(10,"option",36),u._UZ(11,"system-label",37),u.qZA()()(),u.TgZ(12,"td")(13,"system-input-label",31),u.NdJ("ngModelChange",(function(t){const i=u.CHM(e).$implicit;return u.KtG(i.label=t)})),u.qZA()(),u.TgZ(14,"td")(15,"input",14),u.NdJ("ngModelChange",(function(t){const i=u.CHM(e).$implicit;return u.KtG(i.description=t)})),u.qZA()(),u.TgZ(16,"td")(17,"input",14),u.NdJ("ngModelChange",(function(t){const i=u.CHM(e).$implicit;return u.KtG(i.version=t)})),u.qZA()(),u.TgZ(18,"td")(19,"input",14),u.NdJ("ngModelChange",(function(t){const i=u.CHM(e).$implicit;return u.KtG(i.package=t)})),u.qZA()(),u.TgZ(20,"td",38)(21,"system-utility-icon",39),u.NdJ("click",(function(t){const i=u.CHM(e).$implicit,s=u.oxw(2);return u.KtG(s.deleteValidation(t,i.id))})),u.qZA()()()}if(2&e){const e=t.$implicit,i=u.oxw(2);u.xp6(2),u.Q6J("icon","rows")("size","x-small"),u.xp6(1),u.Q6J("icon","g"==e.scope?"world":"people"),u.xp6(1),u.Q6J("ngModel",e.status),u.xp6(1),u.Q6J("ngIf","enum"==i.validation.validation_type),u.xp6(2),u.Q6J("ngModel",e.valuetype),u.xp6(6),u.Q6J("ngModel",e.label),u.xp6(2),u.Q6J("ngModel",e.description),u.xp6(2),u.Q6J("ngModel",e.version),u.xp6(2),u.Q6J("ngModel",e.package)}}function qi(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div")(1,"div",2)(2,"div",3)(3,"label",4),u._UZ(4,"system-label",5),u.qZA(),u.TgZ(5,"div",6)(6,"input",7),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw();return u.KtG(i.validation.name=t)})),u.qZA(),u.TgZ(7,"button",8),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw();return u.KtG(t.unlinkValidation())})),u._UZ(8,"system-button-icon",9),u.qZA()()(),u.TgZ(9,"div",10)(10,"label",4),u._UZ(11,"system-label",11),u.qZA(),u.TgZ(12,"div",12)(13,"input",7),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw();return u.KtG(i.validation.validation_type=t)})),u.qZA()()(),u.TgZ(14,"div",10)(15,"label",4),u._UZ(16,"system-label",13),u.qZA(),u.TgZ(17,"div",12)(18,"input",14),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw();return u.KtG(i.validation.version=t)})),u.qZA()()(),u.TgZ(19,"div",10)(20,"label",4),u._UZ(21,"system-label",15),u.qZA(),u.TgZ(22,"div",12)(23,"input",14),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw();return u.KtG(i.validation.package=t)})),u.qZA()()()(),u.TgZ(24,"div",16)(25,"table",17)(26,"thead")(27,"tr",18),u._UZ(28,"th",19),u.YNc(29,Ai,3,0,"th",20),u.TgZ(30,"th",21)(31,"div",22),u._uU(32,"valuetype"),u.qZA()(),u.TgZ(33,"th",21)(34,"div",22),u._uU(35,"label"),u.qZA()(),u.TgZ(36,"th",21)(37,"div",22),u._uU(38,"comment"),u.qZA()(),u.TgZ(39,"th",21)(40,"div",22),u._uU(41,"version"),u.qZA()(),u.TgZ(42,"th",21)(43,"div",22),u._uU(44,"package"),u.qZA()(),u._UZ(45,"th",19),u.qZA()(),u.TgZ(46,"tbody",23),u.NdJ("cdkDropListDropped",(function(t){u.CHM(e);const i=u.oxw();return u.KtG(i.drop(t))})),u.YNc(47,Li,22,10,"tr",24),u.qZA()(),u.TgZ(48,"div",25)(49,"system-utility-icon",26),u.NdJ("click",(function(t){u.CHM(e);const i=u.oxw();return u.KtG(i.addValidationValue(t))})),u.qZA()()()()}if(2&e){const e=u.oxw();u.xp6(6),u.Q6J("ngModel",e.validation.name),u.xp6(7),u.Q6J("ngModel",e.validation.validation_type),u.xp6(5),u.Q6J("ngModel",e.validation.version),u.xp6(5),u.Q6J("ngModel",e.validation.package),u.xp6(6),u.Q6J("ngIf","enum"==e.validation.validation_type),u.xp6(18),u.Q6J("ngForOf",e.validationvalues)}}function Ci(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div",40)(1,"div",41)(2,"button",42),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw();return u.KtG(t.addValidation())})),u._UZ(3,"system-label",43),u.qZA(),u.TgZ(4,"div",44),u._UZ(5,"system-label",45),u.qZA(),u.TgZ(6,"button",42),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw();return u.KtG(t.selectValidation())})),u._UZ(7,"system-label",46),u.qZA()()()}}let Ji=(()=>{var e;class DomainManagerFieldValidation{constructor(e,t,i,n,l){(0,s.Z)(this,"domainmanager",void 0),(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"modelutilities",void 0),(0,s.Z)(this,"modal",void 0),(0,s.Z)(this,"injector",void 0),(0,s.Z)(this,"field",{}),this.domainmanager=e,this.language=t,this.modelutilities=i,this.modal=n,this.injector=l}ngOnChanges(e){}get validation(){return this.domainmanager.getValidationById(this.field.sysdomainfieldvalidation_id)}get validationvalues(){return this.domainmanager.getValidationValuesdById(this.field.sysdomainfieldvalidation_id).sort(((e,t)=>e.sequence>t.sequence?1:-1))}addValidationValue(e){e.stopPropagation(),this.modal.openModal("DomainManagerAddValidationValueModal",!0,this.injector).subscribe((e=>{e.instance.fieldvalidationvalue.sysdomainfieldvalidation_id=this.field.sysdomainfieldvalidation_id,e.instance.fieldvalidationvalue.sequence=this.validationvalues.length,e.instance.fieldvalidationvalue.scope=this.domainmanager.currentDomainScope}))}deleteValidation(e,t){e.preventDefault();let i=this.domainmanager.domainfieldvalidationvalues.findIndex((e=>e.id==t));i>=0&&this.domainmanager.domainfieldvalidationvalues.splice(i,1)}customizeValidationValue(e,t){e.stopPropagation(),"g"==t.scope&&this.modal.prompt("confirm","Customize the Domain?","Customize").subscribe((e=>{if(e){let e={...t};e.id=this.modelutilities.generateGuid(),e.scope="c",this.domainmanager.domainfieldvalidationvalues.push(e),this.domainmanager.currentDomainScope=e.scope}}))}drop(e){let t=this.validationvalues,i=t.splice(e.previousIndex,1);t.splice(e.currentIndex,0,i[0]);let s=0;for(let e of t)e.sequence=s,s++}unlinkValidation(){this.field.sysdomainfieldvalidation_id=null}selectValidation(){this.modal.openModal("DomainManagerSelectValidation",!0,this.injector)}addValidation(){this.modal.openModal("DomainManagerAddValidation",!0,this.injector)}}return e=DomainManagerFieldValidation,(0,s.Z)(DomainManagerFieldValidation,"ɵfac",(function(t){return new(t||e)(u.Y36(gi),u.Y36(b.d),u.Y36(Z.A),u.Y36(x.o),u.Y36(u.zs3))})),(0,s.Z)(DomainManagerFieldValidation,"ɵcmp",u.Xpm({type:e,selectors:[["domainmanager-field-validation"]],inputs:{field:"field"},features:[u.TTD],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["novalidation",""],[1,"slds-grid","slds-gutters_direct-xx-small","slds-p-around--x-small"],[1,"slds-col","slds-grow","slds-form-element"],[1,"slds-form-element__label"],["label","LBL_NAME"],[1,"slds-form-element__control","slds-input-has-icon","slds-input-has-icon_right"],["type","text","disabled","",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-button","slds-button_icon","slds-input__icon","slds-input__icon_right",3,"click"],["icon","unlinked"],[1,"slds-col","slds-size--1-of-4","slds-form-element"],["label","LBL_TYPE"],[1,"slds-form-element__control"],["label","LBL_VERSION"],["type","text",1,"slds-input",3,"ngModel","ngModelChange"],["label","LBL_PACKAGE"],["system-to-bottom",""],[1,"slds-table","slds-table_cell-buffer","slds-table_bordered","slds-table--header-fixed"],[1,"slds-line-height_reset"],["scope","col",2,"width","2rem"],["class","","scope","col",4,"ngIf"],["scope","col",1,""],[1,"slds-truncate","slds-th__action","slds-p-horizontal--x-small"],["cdkDropList","",1,"dragboundary",3,"cdkDropListDropped"],["class","slds-hint-parent","cdkDrag","","cdkDragBoundary",".dragboundary",4,"ngFor","ngForOf"],[1,"slds-align--absolute-center","slds-p-around--small"],["icon","new","size","x-small",3,"click"],["cdkDrag","","cdkDragBoundary",".dragboundary",1,"slds-hint-parent"],[1,"slds-grid","slds-align--absolute-center",2,"min-height","40px"],["cdkDragHandle","",1,"slds-p-right--xx-small",2,"cursor","move",3,"icon","size"],["size","xx-small",1,"slds-p-right--xx-small",3,"icon","click"],[3,"ngModel","ngModelChange"],[4,"ngIf"],[1,"slds-select",3,"ngModel","ngModelChange"],["value","string"],["label","LBL_STRING"],["value","integer"],["label","LBL_INTEGER"],[1,"slds-align--absolute-center",2,"min-height","40px"],["size","xx-small","icon","delete",3,"click"],["system-to-bottom-noscroll","",1,"slds-align--absolute-center","slds-p-around--small"],[1,"slds-grid","slds-grid--vertical-align-center"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_ADD"],[1,"slds-p-horizontal--x-small"],["label","LBL_OR"],["label","LBL_SELECT"]],template:function(e,t){if(1&e&&(u.YNc(0,qi,50,6,"div",0),u.YNc(1,Ci,8,0,"ng-template",null,1,u.W1O)),2&e){const e=u.MAs(2);u.Q6J("ngIf",t.field.sysdomainfieldvalidation_id)("ngIfElse",e)}},dependencies:[n.sg,n.O5,l.YN,l.Kr,l.Fj,l.EJ,l.JJ,l.On,T.J,S.$,L._,m.r,w.H,C.t,g.Wj,g.Zt,g.Bh,p],encapsulation:2})),DomainManagerFieldValidation})();const Ni=function(e){return{"slds-is-active":e}},ki=function(e){return{"slds-hide":e}};function wi(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div",2)(1,"ul",3)(2,"li",4),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw();return u.KtG(t.tabScope="details")})),u.TgZ(3,"a",5),u._UZ(4,"system-label",6),u.qZA()(),u.TgZ(5,"li",7),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw();return u.KtG(t.tabScope="validations")})),u.TgZ(6,"a",8),u._UZ(7,"system-label",9),u.qZA()()(),u.TgZ(8,"div",10),u._UZ(9,"domainmanager-field-details",11),u.qZA(),u.TgZ(10,"div",10),u._UZ(11,"domainmanager-field-validation",11),u.qZA()()}if(2&e){const e=u.oxw();u.xp6(2),u.Q6J("ngClass",u.VKq(6,Ni,"details"==e.tabScope)),u.xp6(3),u.Q6J("ngClass",u.VKq(8,Ni,"validations"==e.tabScope)),u.xp6(3),u.Q6J("ngClass",u.VKq(10,ki,"details"!=e.tabScope)),u.xp6(1),u.Q6J("field",e.currentField),u.xp6(1),u.Q6J("ngClass",u.VKq(12,ki,"validations"!=e.tabScope)),u.xp6(1),u.Q6J("field",e.currentField)}}function Ui(e,t){1&e&&(u.TgZ(0,"div",12),u._UZ(1,"system-label",13),u.qZA())}let Ei=(()=>{var e;class DomainManagerFieldTabs{constructor(e,t,i,n,l,o,a,d,r){(0,s.Z)(this,"domainmanager",void 0),(0,s.Z)(this,"backend",void 0),(0,s.Z)(this,"metadata",void 0),(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"modelutilities",void 0),(0,s.Z)(this,"broadcast",void 0),(0,s.Z)(this,"toast",void 0),(0,s.Z)(this,"modal",void 0),(0,s.Z)(this,"injector",void 0),(0,s.Z)(this,"tabScope","details"),this.domainmanager=e,this.backend=t,this.metadata=i,this.language=n,this.modelutilities=l,this.broadcast=o,this.toast=a,this.modal=d,this.injector=r}get domainfields(){return this.domainmanager.domainfields}get currentField(){return this.domainfields.find((e=>e.id==this.domainmanager.currentDomainField))}}return e=DomainManagerFieldTabs,(0,s.Z)(DomainManagerFieldTabs,"ɵfac",(function(t){return new(t||e)(u.Y36(gi),u.Y36(h.y),u.Y36(f.Pu),u.Y36(b.d),u.Y36(Z.A),u.Y36(ui.f),u.Y36(v.A),u.Y36(x.o),u.Y36(u.zs3))})),(0,s.Z)(DomainManagerFieldTabs,"ɵcmp",u.Xpm({type:e,selectors:[["domain-manager-field-tabs"]],decls:3,vars:2,consts:[["class","slds-tabs_scoped",4,"ngIf","ngIfElse"],["selectfield",""],[1,"slds-tabs_scoped"],["role","tablist",1,"slds-tabs_scoped__nav"],["title","Item One","role","presentation",1,"slds-tabs_scoped__item",3,"ngClass","click"],["href","javascript:void(0);","role","tab","tabindex","0",1,"slds-tabs_scoped__link"],["label","LBL_DETAILS"],["title","Item Two","role","presentation",1,"slds-tabs_scoped__item",3,"ngClass","click"],["href","javascript:void(0);","role","tab","tabindex","-1",1,"slds-tabs_scoped__link"],["label","LBL_VALIDATION"],["role","tabpanel","system-to-bottom-noscroll","",1,"slds-tabs_scoped__content","slds-show","slds-p-around--none",3,"ngClass"],[3,"field"],[1,"slds-size--1-of-1","slds-height_full","slds-align--absolute-center"],["label","LBL_SELECT_A_FIELD"]],template:function(e,t){if(1&e&&(u.YNc(0,wi,12,14,"div",0),u.YNc(1,Ui,2,0,"ng-template",null,1,u.W1O)),2&e){const e=u.MAs(2);u.Q6J("ngIf",t.domainmanager.currentDomainField)("ngIfElse",e)}},dependencies:[n.mk,n.O5,L._,C.t,Mi,Ji],encapsulation:2})),DomainManagerFieldTabs})(),Di=(()=>{var e;class DomainManager{constructor(e,t,i,n,l,o,a,d,r){(0,s.Z)(this,"domainmanager",void 0),(0,s.Z)(this,"backend",void 0),(0,s.Z)(this,"metadata",void 0),(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"modelutilities",void 0),(0,s.Z)(this,"broadcast",void 0),(0,s.Z)(this,"toast",void 0),(0,s.Z)(this,"modal",void 0),(0,s.Z)(this,"injector",void 0),this.domainmanager=e,this.backend=t,this.metadata=i,this.language=n,this.modelutilities=l,this.broadcast=o,this.toast=a,this.modal=d,this.injector=r}save(){this.domainmanager.save()}repairCustomENUMs(){this.modal.confirm("are you sure you want to migrate all old legacy Cache language files","migrate Labels").subscribe({next:e=>{if(e){let e=this.modal.await("LBL_LOADING");this.backend.postRequest("admin/repair/custom/enum").subscribe((t=>{e.emit(!0),t?this.toast.sendToast("LBL_CACHE_REPAIRED","success"):this.toast.sendToast("LBL_ERROR","error")}))}}})}}return e=DomainManager,(0,s.Z)(DomainManager,"ɵfac",(function(t){return new(t||e)(u.Y36(gi),u.Y36(h.y),u.Y36(f.Pu),u.Y36(b.d),u.Y36(Z.A),u.Y36(ui.f),u.Y36(v.A),u.Y36(x.o),u.Y36(u.zs3))})),(0,s.Z)(DomainManager,"ɵcmp",u.Xpm({type:e,selectors:[["domain-manager"]],features:[u._Bn([f.Pu,gi])],decls:22,vars:0,consts:[["titlelabel","LBL_DOMAIN_MANAGER"],["role","group",1,"slds-button-group"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_SAVE"],["system-dropdown-trigger","",1,"slds-dropdown-trigger","slds-dropdown-trigger_click","slds-button_last"],[1,"slds-button","slds-button_icon","slds-button_icon-border-filled"],["icon","down"],[1,"slds-dropdown","slds-dropdown_right","slds-dropdown_actions"],["role","menu",1,"slds-dropdown__list"],["role","presentation",1,"slds-dropdown__item",3,"click"],["href","javascript:void(null)","role","menuitem"],[1,"slds-truncate"],["label","LBL_REPAIR_CUSTOM_CACHE"],[1,"slds-grid"],[1,"slds-size--1-of-3"],["system-to-bottom-noscroll","",1,"slds-size--2-of-3","slds-theme--default","slds-border--left"],[1,"slds-scrollable--y",2,"height","50%"],[1,"slds-p-around--xx-small","slds-scrollable--y",2,"height","50%"]],template:function(e,t){1&e&&(u.TgZ(0,"workbench-header",0)(1,"workbench-header-controls")(2,"div",1)(3,"button",2),u.NdJ("click",(function(){return t.save()})),u._UZ(4,"system-label",3),u.qZA(),u.TgZ(5,"div",4)(6,"button",5),u._UZ(7,"system-button-icon",6),u.qZA(),u.TgZ(8,"div",7)(9,"ul",8)(10,"li",9),u.NdJ("click",(function(){return t.repairCustomENUMs()})),u.TgZ(11,"a",10)(12,"span",11),u._UZ(13,"system-label",12),u.qZA()()()()()()()()(),u.TgZ(14,"div",13)(15,"div",14),u._UZ(16,"domain-manager-definitions"),u.qZA(),u.TgZ(17,"div",15)(18,"div",16),u._UZ(19,"domain-manager-fields"),u.qZA(),u.TgZ(20,"div",17),u._UZ(21,"domain-manager-field-tabs"),u.qZA()()())},dependencies:[T.J,L._,q.l,C.t,hi,yi,Ei,Xe,tt],encapsulation:2})),DomainManager})();var Oi=i(1574);function Ii(e,t){if(1&e&&(u.TgZ(0,"option",27),u._uU(1),u.qZA()),2&e){const e=t.$implicit;u.Q6J("value",e),u.xp6(1),u.Oqu(e)}}let Qi=(()=>{var e;class DomainManagerAddDefinitionModal{constructor(e,t,i){(0,s.Z)(this,"domainmanager",void 0),(0,s.Z)(this,"metadata",void 0),(0,s.Z)(this,"modelutilities",void 0),(0,s.Z)(this,"self",void 0),(0,s.Z)(this,"domaindefinition",{name:"",fieldtype:"",scope:"c",deleted:0,status:"d"}),this.domainmanager=e,this.metadata=t,this.modelutilities=i}close(){this.self.destroy()}get canSave(){return this.domaindefinition.name&&this.domaindefinition.fieldtype&&!this.domainmanager.domaindefinitions.find((e=>e.name==this.domaindefinition.name))}save(){this.canSave&&(this.domaindefinition.id=this.modelutilities.generateGuid(),this.domainmanager.domaindefinitions.push(this.domaindefinition),this.close())}}return e=DomainManagerAddDefinitionModal,(0,s.Z)(DomainManagerAddDefinitionModal,"ɵfac",(function(t){return new(t||e)(u.Y36(gi),u.Y36(f.Pu),u.Y36(Z.A))})),(0,s.Z)(DomainManagerAddDefinitionModal,"ɵcmp",u.Xpm({type:e,selectors:[["ng-component"]],decls:47,vars:8,consts:[[3,"close"],[1,"slds-grid"],[1,"slds-form-element__control","slds-size--3-of-4","slds-p-right--xxx-small"],[1,"slds-form-element__label"],[1,"slds-required"],["label","LBL_NAME"],[3,"ngModel","ngModelChange"],[1,"slds-form-element__control","slds-size--1-of-4","slds-p-left--xxx-small"],["label","LBL_SCOPE"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],["value","g"],["label","LBL_GLOBAL"],["value","c"],["label","LBL_CUSTOM"],[1,"slds-large-size--1-of-2","slds-p-right--xxx-small","slds-form-element__control"],["label","LBL_TYPE"],[3,"value",4,"ngFor","ngForOf"],[1,"slds-size--1-of-4","slds-p-right--xxx-small","slds-form-element__control"],["label","LBL_PACKAGE"],[1,"slds-size--1-of-4","slds-p-left--xxx-small","slds-form-element__control"],["label","LBL_VERSION"],["label","LBL_COMMENT"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CLOSE"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_SAVE"],[3,"value"]],template:function(e,t){1&e&&(u.TgZ(0,"system-modal")(1,"system-modal-header",0),u.NdJ("close",(function(){return t.close()})),u._uU(2,"Add Domain Definition"),u.qZA(),u.TgZ(3,"system-modal-content")(4,"div",1)(5,"div",2)(6,"label",3)(7,"abbr",4),u._uU(8,"* "),u.qZA(),u._UZ(9,"system-label",5),u.qZA(),u.TgZ(10,"system-input-text",6),u.NdJ("ngModelChange",(function(e){return t.domaindefinition.name=e})),u.qZA()(),u.TgZ(11,"div",7)(12,"label",3)(13,"abbr",4),u._uU(14,"* "),u.qZA(),u._UZ(15,"system-label",8),u.qZA(),u.TgZ(16,"div",9)(17,"select",10),u.NdJ("ngModelChange",(function(e){return t.domaindefinition.scope=e})),u.TgZ(18,"option",11),u._UZ(19,"system-label",12),u.qZA(),u.TgZ(20,"option",13),u._UZ(21,"system-label",14),u.qZA()()()()(),u.TgZ(22,"div",1)(23,"div",15)(24,"label",3)(25,"abbr",4),u._uU(26,"* "),u.qZA(),u._UZ(27,"system-label",16),u.qZA(),u.TgZ(28,"div",9)(29,"select",10),u.NdJ("ngModelChange",(function(e){return t.domaindefinition.fieldtype=e})),u.YNc(30,Ii,2,2,"option",17),u.qZA()()(),u.TgZ(31,"div",18)(32,"label",3),u._UZ(33,"system-label",19),u.qZA(),u.TgZ(34,"system-input-text",6),u.NdJ("ngModelChange",(function(e){return t.domaindefinition.package=e})),u.qZA()(),u.TgZ(35,"div",20)(36,"label",3),u._UZ(37,"system-label",21),u.qZA(),u.TgZ(38,"system-input-text",6),u.NdJ("ngModelChange",(function(e){return t.domaindefinition.version=e})),u.qZA()()(),u.TgZ(39,"label",3),u._UZ(40,"system-label",22),u.qZA(),u.TgZ(41,"system-richtext-editor",6),u.NdJ("ngModelChange",(function(e){return t.domaindefinition.description=e})),u.qZA()(),u.TgZ(42,"system-modal-footer")(43,"button",23),u.NdJ("click",(function(){return t.close()})),u._UZ(44,"system-label",24),u.qZA(),u.TgZ(45,"button",25),u.NdJ("click",(function(){return t.save()})),u._UZ(46,"system-label",26),u.qZA()()()),2&e&&(u.xp6(10),u.Q6J("ngModel",t.domaindefinition.name),u.xp6(7),u.Q6J("ngModel",t.domaindefinition.scope),u.xp6(12),u.Q6J("ngModel",t.domaindefinition.fieldtype),u.xp6(1),u.Q6J("ngForOf",t.domainmanager.fieldtypes),u.xp6(4),u.Q6J("ngModel",t.domaindefinition.package),u.xp6(4),u.Q6J("ngModel",t.domaindefinition.version),u.xp6(3),u.Q6J("ngModel",t.domaindefinition.description),u.xp6(4),u.Q6J("disabled",!t.canSave))},dependencies:[n.sg,l.YN,l.Kr,l.EJ,l.JJ,l.On,J.Z,L._,nt.j,lt.x,ot.p,at.y,Oi.z],encapsulation:2})),DomainManagerAddDefinitionModal})();function Si(e,t){if(1&e&&(u.TgZ(0,"option",35),u._uU(1),u.qZA()),2&e){const e=t.$implicit;u.Q6J("value",e),u.xp6(1),u.Oqu(e)}}function Bi(e,t){if(1&e&&(u.TgZ(0,"option",35),u._uU(1),u.qZA()),2&e){const e=t.$implicit;u.Q6J("value",e),u.xp6(1),u.Oqu(e)}}let Fi=(()=>{var e;class DomainManagerAddFieldModal{constructor(e,t,i){(0,s.Z)(this,"domainmanager",void 0),(0,s.Z)(this,"metadata",void 0),(0,s.Z)(this,"modelutilities",void 0),(0,s.Z)(this,"self",void 0),(0,s.Z)(this,"domainfield",{name:"{sysdictionaryitems.name}",fieldtype:"",scope:"c",required:0,deleted:0,status:"d"}),this.domainmanager=e,this.metadata=t,this.modelutilities=i}close(){this.self.destroy()}get canSave(){return this.domainfield.name&&this.domainfield.dbtype&&!this.domainmanager.domainfields.find((e=>e.name==this.domainfield.name&&e.sysdomaindefinition_id==this.domainmanager.currentDomainDefinition))}save(){this.canSave&&(this.domainfield.sequence=this.domainmanager.domainfields.filter((e=>e.sysdomaindefinition_id==this.domainmanager.currentDomainDefinition)).length,this.domainfield.id=this.modelutilities.generateGuid(),this.domainfield.sysdomaindefinition_id=this.domainmanager.currentDomainDefinition,this.domainmanager.domainfields.push(this.domainfield),this.close())}}return e=DomainManagerAddFieldModal,(0,s.Z)(DomainManagerAddFieldModal,"ɵfac",(function(t){return new(t||e)(u.Y36(gi),u.Y36(f.Pu),u.Y36(Z.A))})),(0,s.Z)(DomainManagerAddFieldModal,"ɵcmp",u.Xpm({type:e,selectors:[["ng-component"]],decls:66,vars:15,consts:[[3,"close"],[1,"slds-grid"],[1,"slds-form-element__control","slds-size--3-of-4","slds-p-right--xxx-small"],[1,"slds-form-element__label"],[1,"slds-required"],["label","LBL_NAME"],[3,"ngModel","ngModelChange"],[1,"slds-form-element__control","slds-size--1-of-4","slds-p-left--xxx-small"],["label","LBL_SCOPE"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],["value","g"],["label","LBL_GLOBAL"],["value","c"],["label","LBL_CUSTOM"],[1,"slds-large-size--1-of-5","slds-p-right--xxx-small","slds-form-element__control"],["label","LBL_DBTYPE"],[3,"value",4,"ngFor","ngForOf"],[1,"slds-form-element__control","slds-size--1-of-5","slds-p-horizontal--xxx-small"],["label","LBL_LENGTH"],[1,"slds-large-size--1-of-5","slds-p-horizontal--xxx-small","slds-form-element__control"],["label","LBL_REQUIRED"],[3,"asinteger","ngModel","ngModelChange"],["label","LBL_EXCLUDE_FROM_INDEX"],[1,"slds-large-size--1-of-5","slds-p-left--xxx-small","slds-form-element__control"],["label","LBL_RENDERING_TYPE"],[1,"slds-size--1-of-2","slds-p-right--xxx-small","slds-form-element__control"],["label","LBL_PACKAGE"],[1,"slds-size--1-of-2","slds-p-left--xxx-small","slds-form-element__control"],["label","LBL_VERSION"],["label","LBL_COMMENT"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CLOSE"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_SAVE"],[3,"value"]],template:function(e,t){1&e&&(u.TgZ(0,"system-modal")(1,"system-modal-header",0),u.NdJ("close",(function(){return t.close()})),u._uU(2,"Add Domain Field"),u.qZA(),u.TgZ(3,"system-modal-content")(4,"div",1)(5,"div",2)(6,"label",3)(7,"abbr",4),u._uU(8,"* "),u.qZA(),u._UZ(9,"system-label",5),u.qZA(),u.TgZ(10,"system-input-text",6),u.NdJ("ngModelChange",(function(e){return t.domainfield.name=e})),u.qZA()(),u.TgZ(11,"div",7)(12,"label",3)(13,"abbr",4),u._uU(14,"* "),u.qZA(),u._UZ(15,"system-label",8),u.qZA(),u.TgZ(16,"div",9)(17,"select",10),u.NdJ("ngModelChange",(function(e){return t.domainfield.scope=e})),u.TgZ(18,"option",11),u._UZ(19,"system-label",12),u.qZA(),u.TgZ(20,"option",13),u._UZ(21,"system-label",14),u.qZA()()()()(),u.TgZ(22,"div",1)(23,"div",15)(24,"label",3)(25,"abbr",4),u._uU(26,"* "),u.qZA(),u._UZ(27,"system-label",16),u.qZA(),u.TgZ(28,"div",9)(29,"select",10),u.NdJ("ngModelChange",(function(e){return t.domainfield.dbtype=e})),u.YNc(30,Si,2,2,"option",17),u.qZA()()(),u.TgZ(31,"div",18)(32,"label",3),u._UZ(33,"system-label",19),u.qZA(),u.TgZ(34,"system-input-text",6),u.NdJ("ngModelChange",(function(e){return t.domainfield.len=e})),u.qZA()(),u.TgZ(35,"div",20)(36,"label",3),u._UZ(37,"system-label",21),u.qZA(),u.TgZ(38,"system-checkbox",22),u.NdJ("ngModelChange",(function(e){return t.domainfield.required=e})),u.qZA()(),u.TgZ(39,"div",20)(40,"label",3),u._UZ(41,"system-label",23),u.qZA(),u.TgZ(42,"system-checkbox",22),u.NdJ("ngModelChange",(function(e){return t.domainfield.exclude_from_index=e})),u.qZA()(),u.TgZ(43,"div",24)(44,"label",3),u._UZ(45,"system-label",25),u.qZA(),u.TgZ(46,"div",9)(47,"select",10),u.NdJ("ngModelChange",(function(e){return t.domainfield.fieldtype=e})),u.YNc(48,Bi,2,2,"option",17),u.qZA()()()(),u.TgZ(49,"div",1)(50,"div",26)(51,"label",3),u._UZ(52,"system-label",27),u.qZA(),u.TgZ(53,"system-input-text",6),u.NdJ("ngModelChange",(function(e){return t.domainfield.package=e})),u.qZA()(),u.TgZ(54,"div",28)(55,"label",3),u._UZ(56,"system-label",29),u.qZA(),u.TgZ(57,"system-input-text",6),u.NdJ("ngModelChange",(function(e){return t.domainfield.version=e})),u.qZA()()(),u.TgZ(58,"label",3),u._UZ(59,"system-label",30),u.qZA(),u.TgZ(60,"system-richtext-editor",6),u.NdJ("ngModelChange",(function(e){return t.domainfield.description=e})),u.qZA()(),u.TgZ(61,"system-modal-footer")(62,"button",31),u.NdJ("click",(function(){return t.close()})),u._UZ(63,"system-label",32),u.qZA(),u.TgZ(64,"button",33),u.NdJ("click",(function(){return t.save()})),u._UZ(65,"system-label",34),u.qZA()()()),2&e&&(u.xp6(10),u.Q6J("ngModel",t.domainfield.name),u.xp6(7),u.Q6J("ngModel",t.domainfield.scope),u.xp6(12),u.Q6J("ngModel",t.domainfield.dbtype),u.xp6(1),u.Q6J("ngForOf",t.domainmanager.dbtypes),u.xp6(4),u.Q6J("ngModel",t.domainfield.len),u.xp6(4),u.Q6J("asinteger",!0)("ngModel",t.domainfield.required),u.xp6(4),u.Q6J("asinteger",!0)("ngModel",t.domainfield.exclude_from_index),u.xp6(5),u.Q6J("ngModel",t.domainfield.fieldtype),u.xp6(1),u.Q6J("ngForOf",t.domainmanager.fieldtypes),u.xp6(5),u.Q6J("ngModel",t.domainfield.package),u.xp6(4),u.Q6J("ngModel",t.domainfield.version),u.xp6(3),u.Q6J("ngModel",t.domainfield.description),u.xp6(4),u.Q6J("disabled",!t.canSave))},dependencies:[n.sg,l.YN,l.Kr,l.EJ,l.JJ,l.On,Q.U,J.Z,L._,nt.j,lt.x,ot.p,at.y,Oi.z],encapsulation:2})),DomainManagerAddFieldModal})();function Yi(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"tr",13),u.NdJ("click",(function(){const t=u.CHM(e).$implicit,i=u.oxw();return u.KtG(i.selectValidation(t.id))})),u.TgZ(1,"td"),u._UZ(2,"system-utility-icon",14),u.TgZ(3,"dictionary-manager-item-status",15),u.NdJ("ngModelChange",(function(t){const i=u.CHM(e).$implicit;return u.KtG(i.status=t)})),u.qZA()(),u.TgZ(4,"td"),u._uU(5),u.qZA(),u.TgZ(6,"td"),u._uU(7),u.qZA()()}if(2&e){const e=t.$implicit;u.xp6(2),u.Q6J("icon","g"==e.scope?"world":"people"),u.xp6(1),u.Q6J("ngModel",e.status),u.xp6(2),u.Oqu(e.name),u.xp6(2),u.Oqu(e.validation_type)}}let Ri=(()=>{var e;class DomainManagerSelectValidation{constructor(e){(0,s.Z)(this,"domainmanager",void 0),(0,s.Z)(this,"self",void 0),(0,s.Z)(this,"validations",[]),this.domainmanager=e,this.validations=e.domainfieldvalidations.filter((e=>0==e.deleted)).sort(((e,t)=>e.name>t.name?1:-1))}selectValidation(e){this.domainmanager.domainfields.find((e=>e.id==this.domainmanager.currentDomainField)).sysdomainfieldvalidation_id=e,this.close()}close(){this.self.destroy()}}return e=DomainManagerSelectValidation,(0,s.Z)(DomainManagerSelectValidation,"ɵfac",(function(t){return new(t||e)(u.Y36(gi))})),(0,s.Z)(DomainManagerSelectValidation,"ɵcmp",u.Xpm({type:e,selectors:[["ng-component"]],decls:19,vars:2,consts:[[3,"close"],["label","LBL_SELECT_VALIDATION"],["margin","none",3,"grow"],[1,"slds-table","slds-table--bordered","slds-table--fixed-layout","slds-table--header-fixed","slds-max-medium-table_stacked-horizontal"],[1,"slds-text-title--caps"],["scope","col",2,"width","3rem"],["scope","col"],[1,"slds-th__action","slds-truncate"],["label","LBL_NAME"],["label","LBL_TYPE"],[3,"click",4,"ngFor","ngForOf"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[3,"click"],["size","xx-small",1,"slds-p-right--xx-small",3,"icon"],[3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(u.TgZ(0,"system-modal")(1,"system-modal-header",0),u.NdJ("close",(function(){return t.close()})),u._UZ(2,"system-label",1),u.qZA(),u.TgZ(3,"system-modal-content",2)(4,"table",3)(5,"thead")(6,"tr",4),u._UZ(7,"th",5),u.TgZ(8,"th",6)(9,"span",7),u._UZ(10,"system-label",8),u.qZA()(),u.TgZ(11,"th",6)(12,"span",7),u._UZ(13,"system-label",9),u.qZA()()()(),u.TgZ(14,"tbody"),u.YNc(15,Yi,8,4,"tr",10),u.qZA()()(),u.TgZ(16,"system-modal-footer")(17,"button",11),u.NdJ("click",(function(){return t.close()})),u._UZ(18,"system-label",12),u.qZA()()()),2&e&&(u.xp6(3),u.Q6J("grow",!0),u.xp6(12),u.Q6J("ngForOf",t.validations))},dependencies:[n.sg,l.JJ,l.On,L._,nt.j,lt.x,ot.p,at.y,m.r,p],encapsulation:2})),DomainManagerSelectValidation})(),Gi=(()=>{var e;class DomainManagerAddValidation{constructor(e,t){(0,s.Z)(this,"domainmanager",void 0),(0,s.Z)(this,"modelutilities",void 0),(0,s.Z)(this,"self",void 0),(0,s.Z)(this,"fieldvalidation",{scope:"c"}),this.domainmanager=e,this.modelutilities=t}selectValidation(e){this.domainmanager.domainfields.find((e=>e.id==this.domainmanager.currentDomainField)).sysdomainfieldvalidation_id=e,this.close()}add(){this.fieldvalidation.id=this.modelutilities.generateGuid(),this.fieldvalidation.status="a",this.domainmanager.domainfieldvalidations.push(this.fieldvalidation),this.selectValidation(this.fieldvalidation.id)}close(){this.self.destroy()}}return e=DomainManagerAddValidation,(0,s.Z)(DomainManagerAddValidation,"ɵfac",(function(t){return new(t||e)(u.Y36(gi),u.Y36(Z.A))})),(0,s.Z)(DomainManagerAddValidation,"ɵcmp",u.Xpm({type:e,selectors:[["ng-component"]],decls:50,vars:6,consts:[[3,"close"],["label","LBL_ADD_VALIDATION"],[1,"slds-grid"],[1,"slds-form-element__control","slds-size--3-of-4","slds-p-right--xxx-small"],[1,"slds-form-element__label"],[1,"slds-required"],["label","LBL_NAME"],[3,"ngModel","ngModelChange"],[1,"slds-form-element__control","slds-size--1-of-4","slds-p-left--xxx-small"],["label","LBL_SCOPE"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],["value","g"],["label","LBL_GLOBAL"],["value","c"],["label","LBL_CUSTOM"],[1,"slds-large-size--1-of-2","slds-p-right--xxx-small","slds-form-element__control"],["label","LBL_TYPE"],["value","enum"],["value","range"],[1,"slds-size--1-of-4","slds-p-right--xxx-small","slds-form-element__control"],["label","LBL_PACKAGE"],[1,"slds-size--1-of-4","slds-p-left--xxx-small","slds-form-element__control"],["label","LBL_VERSION"],["label","LBL_COMMENT"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],["label","LBL_ADD"]],template:function(e,t){1&e&&(u.TgZ(0,"system-modal")(1,"system-modal-header",0),u.NdJ("close",(function(){return t.close()})),u._UZ(2,"system-label",1),u.qZA(),u.TgZ(3,"system-modal-content")(4,"div",2)(5,"div",3)(6,"label",4)(7,"abbr",5),u._uU(8,"* "),u.qZA(),u._UZ(9,"system-label",6),u.qZA(),u.TgZ(10,"system-input-text",7),u.NdJ("ngModelChange",(function(e){return t.fieldvalidation.name=e})),u.qZA()(),u.TgZ(11,"div",8)(12,"label",4)(13,"abbr",5),u._uU(14,"* "),u.qZA(),u._UZ(15,"system-label",9),u.qZA(),u.TgZ(16,"div",10)(17,"select",11),u.NdJ("ngModelChange",(function(e){return t.fieldvalidation.scope=e})),u.TgZ(18,"option",12),u._UZ(19,"system-label",13),u.qZA(),u.TgZ(20,"option",14),u._UZ(21,"system-label",15),u.qZA()()()()(),u.TgZ(22,"div",2)(23,"div",16)(24,"label",4)(25,"abbr",5),u._uU(26,"* "),u.qZA(),u._UZ(27,"system-label",17),u.qZA(),u.TgZ(28,"div",10)(29,"select",11),u.NdJ("ngModelChange",(function(e){return t.fieldvalidation.validation_type=e})),u.TgZ(30,"option",18),u._uU(31,"enum"),u.qZA(),u.TgZ(32,"option",19),u._uU(33,"range"),u.qZA()()()(),u.TgZ(34,"div",20)(35,"label",4),u._UZ(36,"system-label",21),u.qZA(),u.TgZ(37,"system-input-text",7),u.NdJ("ngModelChange",(function(e){return t.fieldvalidation.package=e})),u.qZA()(),u.TgZ(38,"div",22)(39,"label",4),u._UZ(40,"system-label",23),u.qZA(),u.TgZ(41,"system-input-text",7),u.NdJ("ngModelChange",(function(e){return t.fieldvalidation.version=e})),u.qZA()()(),u.TgZ(42,"label",4),u._UZ(43,"system-label",24),u.qZA(),u.TgZ(44,"system-richtext-editor",7),u.NdJ("ngModelChange",(function(e){return t.fieldvalidation.description=e})),u.qZA()(),u.TgZ(45,"system-modal-footer")(46,"button",25),u.NdJ("click",(function(){return t.close()})),u._UZ(47,"system-label",26),u.qZA(),u.TgZ(48,"button",25),u.NdJ("click",(function(){return t.add()})),u._UZ(49,"system-label",27),u.qZA()()()),2&e&&(u.xp6(10),u.Q6J("ngModel",t.fieldvalidation.name),u.xp6(7),u.Q6J("ngModel",t.fieldvalidation.scope),u.xp6(12),u.Q6J("ngModel",t.fieldvalidation.validation_type),u.xp6(8),u.Q6J("ngModel",t.fieldvalidation.package),u.xp6(4),u.Q6J("ngModel",t.fieldvalidation.version),u.xp6(3),u.Q6J("ngModel",t.fieldvalidation.description))},dependencies:[l.YN,l.Kr,l.EJ,l.JJ,l.On,J.Z,L._,nt.j,lt.x,ot.p,at.y,Oi.z],encapsulation:2})),DomainManagerAddValidation})(),Hi=(()=>{var e;class DomainManagerAddValidationValueModal{constructor(e,t){(0,s.Z)(this,"domainmanager",void 0),(0,s.Z)(this,"modelutilities",void 0),(0,s.Z)(this,"self",void 0),(0,s.Z)(this,"fieldvalidationvalue",{scope:"c",sysdomainfieldvalidation_id:null,sequence:0,deleted:0,status:"d"}),this.domainmanager=e,this.modelutilities=t}add(){this.fieldvalidationvalue.id=this.modelutilities.generateGuid(),this.domainmanager.domainfieldvalidationvalues.push(this.fieldvalidationvalue),this.close()}close(){this.self.destroy()}}return e=DomainManagerAddValidationValueModal,(0,s.Z)(DomainManagerAddValidationValueModal,"ɵfac",(function(t){return new(t||e)(u.Y36(gi),u.Y36(Z.A))})),(0,s.Z)(DomainManagerAddValidationValueModal,"ɵcmp",u.Xpm({type:e,selectors:[["ng-component"]],decls:49,vars:7,consts:[[3,"close"],["label","LBL_ADD_VALIDATION"],[1,"slds-grid"],[1,"slds-form-element__control","slds-size--1-of-3","slds-p-right--xxx-small"],[1,"slds-form-element__label"],["label","LBL_VALUE"],[3,"ngModel","ngModelChange"],["label","LBL_VALUE_TYPE"],[1,"slds-select",3,"ngModel","ngModelChange"],["value","string"],["label","LBL_STRING"],["value","int"],["label","LBL_INTEGER"],[1,"slds-form-element__control","slds-size--1-of-3","slds-p-left--xxx-small"],[1,"slds-required"],["label","LBL_SCOPE"],[1,"slds-select_container"],["value","g"],["label","LBL_GLOBAL"],["value","c"],["label","LBL_CUSTOM"],[1,"slds-size--1-of-4","slds-p-right--xxx-small","slds-form-element__control"],["label","LBL_LABEL"],["label","LBL_PACKAGE"],[1,"slds-size--1-of-4","slds-p-left--xxx-small","slds-form-element__control"],["label","LBL_VERSION"],["label","LBL_COMMENT"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],["label","LBL_ADD"]],template:function(e,t){1&e&&(u.TgZ(0,"system-modal")(1,"system-modal-header",0),u.NdJ("close",(function(){return t.close()})),u._UZ(2,"system-label",1),u.qZA(),u.TgZ(3,"system-modal-content")(4,"div",2)(5,"div",3)(6,"label",4),u._UZ(7,"system-label",5),u.qZA(),u.TgZ(8,"system-input-text",6),u.NdJ("ngModelChange",(function(e){return t.fieldvalidationvalue.enumvalue=e})),u.qZA()(),u.TgZ(9,"div",3)(10,"label",4),u._UZ(11,"system-label",7),u.qZA(),u.TgZ(12,"select",8),u.NdJ("ngModelChange",(function(e){return t.fieldvalidationvalue.valuetype=e})),u.TgZ(13,"option",9),u._UZ(14,"system-label",10),u.qZA(),u.TgZ(15,"option",11),u._UZ(16,"system-label",12),u.qZA()()(),u.TgZ(17,"div",13)(18,"label",4)(19,"abbr",14),u._uU(20,"* "),u.qZA(),u._UZ(21,"system-label",15),u.qZA(),u.TgZ(22,"div",16)(23,"select",8),u.NdJ("ngModelChange",(function(e){return t.fieldvalidationvalue.scope=e})),u.TgZ(24,"option",17),u._UZ(25,"system-label",18),u.qZA(),u.TgZ(26,"option",19),u._UZ(27,"system-label",20),u.qZA()()()()(),u.TgZ(28,"div",2)(29,"div",21)(30,"label",4),u._UZ(31,"system-label",22),u.qZA(),u.TgZ(32,"system-input-label",6),u.NdJ("ngModelChange",(function(e){return t.fieldvalidationvalue.label=e})),u.qZA()(),u.TgZ(33,"div",21)(34,"label",4),u._UZ(35,"system-label",23),u.qZA(),u.TgZ(36,"system-input-text",6),u.NdJ("ngModelChange",(function(e){return t.fieldvalidationvalue.package=e})),u.qZA()(),u.TgZ(37,"div",24)(38,"label",4),u._UZ(39,"system-label",25),u.qZA(),u.TgZ(40,"system-input-text",6),u.NdJ("ngModelChange",(function(e){return t.fieldvalidationvalue.version=e})),u.qZA()()(),u.TgZ(41,"label",4),u._UZ(42,"system-label",26),u.qZA(),u.TgZ(43,"system-richtext-editor",6),u.NdJ("ngModelChange",(function(e){return t.fieldvalidationvalue.description=e})),u.qZA()(),u.TgZ(44,"system-modal-footer")(45,"button",27),u.NdJ("click",(function(){return t.close()})),u._UZ(46,"system-label",28),u.qZA(),u.TgZ(47,"button",27),u.NdJ("click",(function(){return t.add()})),u._UZ(48,"system-label",29),u.qZA()()()),2&e&&(u.xp6(8),u.Q6J("ngModel",t.fieldvalidationvalue.enumvalue),u.xp6(4),u.Q6J("ngModel",t.fieldvalidationvalue.valuetype),u.xp6(11),u.Q6J("ngModel",t.fieldvalidationvalue.scope),u.xp6(9),u.Q6J("ngModel",t.fieldvalidationvalue.label),u.xp6(4),u.Q6J("ngModel",t.fieldvalidationvalue.package),u.xp6(4),u.Q6J("ngModel",t.fieldvalidationvalue.version),u.xp6(3),u.Q6J("ngModel",t.fieldvalidationvalue.description))},dependencies:[l.YN,l.Kr,l.EJ,l.JJ,l.On,J.Z,S.$,L._,nt.j,lt.x,ot.p,at.y,Oi.z],encapsulation:2})),DomainManagerAddValidationValueModal})();var Ki=i(5861),zi=i(6805),Vi=i(930);function Pi(e,t){const i="object"==typeof t;return new Promise(((s,n)=>{const l=new Vi.Hp({next:e=>{s(e),l.unsubscribe()},error:n,complete:()=>{i?s(t.defaultValue):n(new zi.K)}});e.subscribe(l)}))}var $i=i(2294),ji=i(34);let Wi=(()=>{var e;class FieldsetManagerFieldsetDetails{constructor(e,t,i,n){(0,s.Z)(this,"backend",void 0),(0,s.Z)(this,"metadata",void 0),(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"view",void 0),(0,s.Z)(this,"fieldset",{}),(0,s.Z)(this,"currentFieldSet",{}),(0,s.Z)(this,"currentFieldSetConfig",{}),this.backend=e,this.metadata=t,this.language=i,this.view=n}ngOnChanges(e){this.fieldset.isViewMode?this.view.setViewMode():this.view.setEditMode();try{this.metadata.getFieldSetItems(this.fieldset.fieldset).some((e=>{if(e.id==this.fieldset.id)return this.currentFieldSet=this.metadata.getFieldset(e.fieldset),this.currentFieldSetConfig=e.fieldconfig,!0}))}catch(e){this.currentFieldSet={}}}get fieldsetname(){try{let e;return this.metadata.getFieldSetItems(this.fieldset.fieldset).some((t=>{if(t.id==this.fieldset.id)return e=t,!0})),this.metadata.getFieldsetName(e.fieldset)}catch(e){return""}}set fieldsetname(e){}}return e=FieldsetManagerFieldsetDetails,(0,s.Z)(FieldsetManagerFieldsetDetails,"ɵfac",(function(t){return new(t||e)(u.Y36(h.y),u.Y36(f.Pu),u.Y36(b.d),u.Y36($i.e))})),(0,s.Z)(FieldsetManagerFieldsetDetails,"ɵcmp",u.Xpm({type:e,selectors:[["fieldsetmanager-fieldset-details"]],inputs:{fieldset:"fieldset"},features:[u._Bn([$i.e]),u.TTD],decls:43,vars:13,consts:[[1,"slds-form-element","slds-m-bottom--x-small"],[1,"slds-form-element__label"],["label","LBL_NAME"],[1,"slds-form-element__control"],["type","text",1,"slds-input",3,"disabled","ngModel","ngModelChange"],["type","text","disabled","",1,"slds-input",3,"ngModel"],[1,"slds-form-element","slds-m-vertical--x-small"],["label","LBL_PACKAGE"],["label","LBL_FORMCLASS"],[1,"slds-checkbox"],["name","options","id","cbDirection","value","vertical","type","checkbox",3,"disabled","checked","change"],["for","cbDirection",1,"slds-checkbox__label"],[1,"slds-checkbox_faux"],["label","LBL_VERTICAL"],[1,"slds-form-element","slds-m-top--x-small"],["label","LBL_WIDTH"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0)(1,"label",1),u._UZ(2,"system-label",2),u.qZA(),u.TgZ(3,"div",3)(4,"input",4),u.NdJ("ngModelChange",(function(e){return t.currentFieldSet.name=e})),u.qZA()()(),u.TgZ(5,"div",0)(6,"label",1),u._uU(7,"ID of Parent Fieldset"),u.qZA(),u.TgZ(8,"div",3),u._UZ(9,"input",5),u.qZA()(),u.TgZ(10,"div",0)(11,"label",1),u._uU(12,"ID of Parent Fieldset Element"),u.qZA(),u.TgZ(13,"div",3),u._UZ(14,"input",5),u.qZA()(),u.TgZ(15,"div",0)(16,"label",1),u._uU(17,"ID of Fieldset"),u.qZA(),u.TgZ(18,"div",3),u._UZ(19,"input",5),u.qZA()(),u.TgZ(20,"div",6)(21,"label",1),u._UZ(22,"system-label",7),u.qZA(),u.TgZ(23,"div",3)(24,"input",4),u.NdJ("ngModelChange",(function(e){return t.currentFieldSet.package=e})),u.qZA()()(),u.TgZ(25,"div",6)(26,"label",1),u._UZ(27,"system-label",8),u.qZA(),u.TgZ(28,"div",3)(29,"input",4),u.NdJ("ngModelChange",(function(e){return t.currentFieldSetConfig.formclass=e})),u.qZA()()(),u.TgZ(30,"div",6)(31,"span",9)(32,"input",10),u.NdJ("change",(function(){return t.currentFieldSetConfig.direction="vertical"===t.currentFieldSetConfig.direction?null:"vertical"})),u.qZA(),u.TgZ(33,"label",11),u._UZ(34,"span",12),u.TgZ(35,"span",1),u._UZ(36,"system-label",13),u.qZA()()()(),u.TgZ(37,"div",14)(38,"label",1),u._UZ(39,"system-label",15),u._uU(40," (number of parts, leave blank for 1)"),u.qZA(),u.TgZ(41,"div",3)(42,"input",4),u.NdJ("ngModelChange",(function(e){return t.currentFieldSetConfig.width=e})),u.qZA()()()),2&e&&(u.xp6(4),u.Q6J("disabled",!t.view.isEditMode())("ngModel",t.currentFieldSet.name),u.xp6(5),u.Q6J("ngModel",t.fieldset.fieldset),u.xp6(5),u.Q6J("ngModel",t.fieldset.id),u.xp6(5),u.Q6J("ngModel",t.currentFieldSet.id),u.xp6(5),u.Q6J("disabled",!t.view.isEditMode())("ngModel",t.currentFieldSet.package),u.xp6(5),u.Q6J("disabled",!t.view.isEditMode())("ngModel",t.currentFieldSetConfig.formclass),u.xp6(3),u.Q6J("disabled",!t.view.isEditMode())("checked","vertical"===t.currentFieldSetConfig.direction),u.xp6(10),u.Q6J("disabled",!t.view.isEditMode())("ngModel",t.currentFieldSetConfig.width))},dependencies:[l.Fj,l.JJ,l.On,L._],encapsulation:2})),FieldsetManagerFieldsetDetails})();const Xi=["optionscontainer"];let es=(()=>{var e;class WorkbenchConfig{constructor(e,t,i){(0,s.Z)(this,"backend",void 0),(0,s.Z)(this,"metadata",void 0),(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"optionscontainer",void 0),(0,s.Z)(this,"component",""),(0,s.Z)(this,"configValues",{}),(0,s.Z)(this,"configOptions",[]),(0,s.Z)(this,"optionsElements",[]),this.backend=e,this.metadata=t,this.language=i}ngOnChanges(e){for(let e of this.optionsElements)e.destroy();this.optionsElements=[],this.configOptions=[];let t=this.metadata.getComponentConfigOptions(this.component);for(let e in t)this.configOptions.push({option:e,type:t[e].type?t[e].type:"string",description:t[e].description?t[e].description:""});for(let e of this.configOptions){let t="";t="WorkbenchConfigOption"+(e.type.charAt(0).toUpperCase()+e.type.slice(1)),this.metadata.checkComponent(t)||(t="WorkbenchConfigOptionDefault"),this.metadata.addComponent(t,this.optionscontainer).subscribe((t=>{this.optionsElements.push(t),t.instance.option=e,t.instance.configValues=this.configValues}))}}}return e=WorkbenchConfig,(0,s.Z)(WorkbenchConfig,"ɵfac",(function(t){return new(t||e)(u.Y36(h.y),u.Y36(f.Pu),u.Y36(b.d))})),(0,s.Z)(WorkbenchConfig,"ɵcmp",u.Xpm({type:e,selectors:[["workbench-config"]],viewQuery:function(e,t){if(1&e&&u.Gf(Xi,7,u.s_b),2&e){let e;u.iGM(e=u.CRH())&&(t.optionscontainer=e.first)}},inputs:{component:"component",configValues:"configValues"},features:[u.TTD],decls:2,vars:0,consts:[["optionscontainer",""]],template:function(e,t){1&e&&u._UZ(0,"div",null,0)},encapsulation:2})),WorkbenchConfig})();function ts(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"system-input-label",49),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw();return u.KtG(i.configValues.label=t)})),u.qZA()}if(2&e){const e=u.oxw();u.Q6J("ngModel",e.configValues.label)}}function is(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"input",50),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw();return u.KtG(i.configValues.label=t)})),u.qZA()}if(2&e){const e=u.oxw();u.Q6J("ngModel",e.configValues.label)}}function ss(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div",0)(1,"label",1),u._UZ(2,"system-label",51),u.qZA(),u.TgZ(3,"div",6)(4,"input",36),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw();return u.KtG(i.configValues.sortfield=t)})),u.qZA()()()}if(2&e){const e=u.oxw();u.xp6(4),u.Q6J("disabled",!e.view.isEditMode())("ngModel",e.configValues.sortfield)}}function ns(e,t){if(1&e&&(u.TgZ(0,"option"),u._uU(1),u.qZA()),2&e){const e=t.$implicit;u.xp6(1),u.Oqu(e)}}let ls=(()=>{var e;class FieldsetManagerFieldDetails{constructor(e,t,i,n){(0,s.Z)(this,"backend",void 0),(0,s.Z)(this,"metadata",void 0),(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"view",void 0),(0,s.Z)(this,"field",{}),(0,s.Z)(this,"currentField",{}),(0,s.Z)(this,"fieldtypes",[]),(0,s.Z)(this,"component",""),(0,s.Z)(this,"configValues",{}),this.backend=e,this.metadata=t,this.language=i,this.view=n,this.fieldtypes=this.metadata.getFieldTypes(),this.fieldtypes.sort(),this.fieldtypes.unshift("")}ngOnChanges(e){this.field.isViewMode?this.view.setViewMode():this.view.setEditMode();try{this.metadata.getFieldSetItems(this.field.fieldset).some((e=>{if(e.id==this.field.id)return this.currentField=e,this.component=this.metadata.getFieldTypeComponent(e.fieldconfig.fieldtype),this.configValues=e.fieldconfig,!0}))}catch(e){this.currentField={}}}get configValuesLabel(){let e=null;return"label"in this.configValues&&null!=this.configValues.label&&(e={name:this.configValues.label}),e}set configValuesLabel(e){this.configValues.label=null!=e?e.name:null}configValuesLabelEmit(e){this.configValuesLabel=e}get InputConfig(){return{option:"name",type:"label",description:""}}getFieldConfig(){if(this.configValues.fieldtype){let e=this.metadata.getFieldTypeComponent(this.configValues.fieldtype),t=this.metadata.getComponentConfigOptions(e),i=[];for(let e in t)i.push(e);return i}return[]}selectFieldType(){this.component=this.metadata.getFieldTypeComponent(this.configValues.fieldtype)}}return e=FieldsetManagerFieldDetails,(0,s.Z)(FieldsetManagerFieldDetails,"ɵfac",(function(t){return new(t||e)(u.Y36(h.y),u.Y36(f.Pu),u.Y36(b.d),u.Y36($i.e))})),(0,s.Z)(FieldsetManagerFieldDetails,"ɵcmp",u.Xpm({type:e,selectors:[["fieldsetmanager-field-details"]],inputs:{field:"field"},features:[u._Bn([$i.e]),u.TTD],decls:82,vars:29,consts:[[1,"slds-form-element","slds-m-vertical--xxx-small"],[1,"slds-form-element__label"],["label","LBL_NAME"],[1,"slds-form-element__control","slds-input-has-icon","slds-input-has-icon--right"],["type","text","placeholder","name",1,"slds-input",3,"disabled","ngModel","ngModelChange"],[1,"slds-form-element","slds-m-bottom--x-small"],[1,"slds-form-element__control"],["type","text","disabled","",1,"slds-input",3,"ngModel"],["label","LBL_PACKAGE"],["type","text","placeholder","package",1,"slds-input",3,"disabled","ngModel","ngModelChange"],[1,"slds-form-element","slds-m-vertical--xx-small"],["label","LBL_LABEL"],[3,"ngModel","ngModelChange",4,"ngIf"],["class","slds-input","disabled","",3,"ngModel","ngModelChange",4,"ngIf"],[1,"slds-form-element__legend","slds-form-element__label"],["label","LBL_OPTIONS"],["for","link",1,"slds-checkbox"],["type","checkbox","id","link",3,"disabled","ngModel","ngModelChange"],[1,"slds-checkbox--faux"],["label","LBL_LINK"],["for","default",1,"slds-checkbox"],["type","checkbox","id","default",3,"disabled","ngModel","ngModelChange"],["label","LBL_HIDDEN"],["for","hidelabel",1,"slds-checkbox"],["type","checkbox","id","hidelabel",3,"disabled","ngModel","ngModelChange"],["label","LBL_HIDE_LABEL"],["for","readonly",1,"slds-checkbox"],["type","checkbox","id","readonly",3,"disabled","ngModel","ngModelChange"],["label","LBL_READONLY"],["for","sortable",1,"slds-checkbox"],["type","checkbox","id","sortable",3,"disabled","ngModel","ngModelChange"],["label","LBL_SORTABLE"],["class","slds-form-element slds-m-vertical--xxx-small",4,"ngIf"],["label","LBL_WIDTH"],[1,"slds-grid","slds-gutters_xx-small"],[1,"slds-col","slds-form-element__control","slds-size--3-of-4"],["type","text",1,"slds-input",3,"disabled","ngModel","ngModelChange"],[1,"slds-col","slds-form-element__control","slds-size--1-of-4"],[1,"slds-select_container"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],["value",""],["value","px"],["value","rem"],["value","%"],["label","LBL_REQUIREDMODELSTATE"],["label","LBL_FIELDTYPE"],[1,"slds-select",3,"disabled","ngModel","ngModelChange","change"],[4,"ngFor","ngForOf"],[3,"component","configValues"],[3,"ngModel","ngModelChange"],["disabled","",1,"slds-input",3,"ngModel","ngModelChange"],["label","LBL_SORTFIELD"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0)(1,"label",1),u._UZ(2,"system-label",2),u.qZA(),u.TgZ(3,"div",3)(4,"input",4),u.NdJ("ngModelChange",(function(e){return t.currentField.field=e})),u.qZA()()(),u.TgZ(5,"div",5)(6,"label",1),u._uU(7,"ID"),u.qZA(),u.TgZ(8,"div",6),u._UZ(9,"input",7),u.qZA()(),u.TgZ(10,"div",0)(11,"label",1),u._UZ(12,"system-label",8),u.qZA(),u.TgZ(13,"div",3)(14,"input",9),u.NdJ("ngModelChange",(function(e){return t.currentField.package=e})),u.qZA()()(),u.TgZ(15,"div",10)(16,"label",1),u._UZ(17,"system-label",11),u.qZA(),u.YNc(18,ts,1,1,"system-input-label",12),u.YNc(19,is,1,1,"input",13),u.qZA(),u.TgZ(20,"fieldset",0)(21,"legend",14),u._UZ(22,"system-label",15),u.qZA(),u.TgZ(23,"div",6)(24,"label",16)(25,"input",17),u.NdJ("ngModelChange",(function(e){return t.configValues.link=e})),u.qZA(),u._UZ(26,"span",18),u.TgZ(27,"span",1),u._UZ(28,"system-label",19),u.qZA()(),u.TgZ(29,"label",20)(30,"input",21),u.NdJ("ngModelChange",(function(e){return t.configValues.hidden=e})),u.qZA(),u._UZ(31,"span",18),u.TgZ(32,"span",1),u._UZ(33,"system-label",22),u.qZA()(),u.TgZ(34,"label",23)(35,"input",24),u.NdJ("ngModelChange",(function(e){return t.configValues.hidelabel=e})),u.qZA(),u._UZ(36,"span",18),u.TgZ(37,"span",1),u._UZ(38,"system-label",25),u.qZA()(),u.TgZ(39,"label",26)(40,"input",27),u.NdJ("ngModelChange",(function(e){return t.configValues.readonly=e})),u.qZA(),u._UZ(41,"span",18),u.TgZ(42,"span",1),u._UZ(43,"system-label",28),u.qZA()(),u.TgZ(44,"label",29)(45,"input",30),u.NdJ("ngModelChange",(function(e){return t.configValues.sortable=e})),u.qZA(),u._UZ(46,"span",18),u.TgZ(47,"span",1),u._UZ(48,"system-label",31),u.qZA()()()(),u.YNc(49,ss,5,2,"div",32),u.TgZ(50,"div",0)(51,"label",1),u._UZ(52,"system-label",33),u._uU(53," (number of parts, leave blank for 1)"),u.qZA(),u.TgZ(54,"div",34)(55,"div",35)(56,"input",36),u.NdJ("ngModelChange",(function(e){return t.configValues.width=e})),u.qZA()(),u.TgZ(57,"div",37)(58,"div",38)(59,"select",39),u.NdJ("ngModelChange",(function(e){return t.configValues.widthdimension=e})),u.TgZ(60,"option",40),u._uU(61,"units"),u.qZA(),u.TgZ(62,"option",41),u._uU(63,"px"),u.qZA(),u.TgZ(64,"option",42),u._uU(65,"rem"),u.qZA(),u.TgZ(66,"option",43),u._uU(67,"%"),u.qZA()()()()()(),u.TgZ(68,"div",0)(69,"label",1),u._UZ(70,"system-label",44),u._uU(71,"if this field is conditional to a specific model state"),u.qZA(),u.TgZ(72,"div",6)(73,"input",36),u.NdJ("ngModelChange",(function(e){return t.configValues.requiredmodelstate=e})),u.qZA()()(),u.TgZ(74,"div",0)(75,"label",1),u._UZ(76,"system-label",45),u.qZA(),u.TgZ(77,"div",6)(78,"div",38)(79,"select",46),u.NdJ("ngModelChange",(function(e){return t.configValues.fieldtype=e}))("change",(function(){return t.selectFieldType()})),u.YNc(80,ns,2,1,"option",47),u.qZA()()()(),u._UZ(81,"workbench-config",48)),2&e&&(u.xp6(4),u.Q6J("disabled",!t.view.isEditMode())("ngModel",t.currentField.field),u.xp6(5),u.Q6J("ngModel",t.currentField.id),u.xp6(5),u.Q6J("disabled",!t.view.isEditMode())("ngModel",t.currentField.package),u.xp6(4),u.Q6J("ngIf",t.view.isEditMode()),u.xp6(1),u.Q6J("ngIf",!t.view.isEditMode()),u.xp6(6),u.Q6J("disabled",!t.view.isEditMode())("ngModel",t.configValues.link),u.xp6(5),u.Q6J("disabled",!t.view.isEditMode())("ngModel",t.configValues.hidden),u.xp6(5),u.Q6J("disabled",!t.view.isEditMode())("ngModel",t.configValues.hidelabel),u.xp6(5),u.Q6J("disabled",!t.view.isEditMode())("ngModel",t.configValues.readonly),u.xp6(5),u.Q6J("disabled",!t.view.isEditMode())("ngModel",t.configValues.sortable),u.xp6(4),u.Q6J("ngIf",t.configValues.sortable),u.xp6(7),u.Q6J("disabled",!t.view.isEditMode())("ngModel",t.configValues.width),u.xp6(3),u.Q6J("disabled",!t.view.isEditMode())("ngModel",t.configValues.widthdimension),u.xp6(14),u.Q6J("disabled",!t.view.isEditMode())("ngModel",t.configValues.requiredmodelstate),u.xp6(6),u.Q6J("disabled",!t.view.isEditMode())("ngModel",t.configValues.fieldtype),u.xp6(1),u.Q6J("ngForOf",t.fieldtypes),u.xp6(1),u.Q6J("component",t.component)("configValues",t.configValues))},dependencies:[n.sg,n.O5,l.YN,l.Kr,l.Fj,l.Wl,l.EJ,l.JJ,l.On,S.$,L._,es],encapsulation:2})),FieldsetManagerFieldDetails})();function os(e,t){if(1&e&&(u.TgZ(0,"option",19),u._uU(1),u.qZA()),2&e){const e=t.$implicit;u.Q6J("value",e),u.xp6(1),u.hij("",e," ")}}function as(e,t){if(1&e&&(u.TgZ(0,"option",22),u._uU(1),u.qZA()),2&e){const e=t.$implicit;u.Q6J("ngValue",e.id),u.xp6(1),u.hij("",e.name," ")}}function ds(e,t){if(1&e&&(u.TgZ(0,"optgroup",20),u.YNc(1,as,2,2,"option",21),u.qZA()),2&e){const e=u.oxw();u.Q6J("label","custom"+e.language.getLabel("LBL_FIELDSET")),u.xp6(1),u.Q6J("ngForOf",e.getFieldSets("custom"))}}function rs(e,t){if(1&e&&(u.TgZ(0,"option",22),u._uU(1),u.qZA()),2&e){const e=t.$implicit;u.Q6J("ngValue",e.id),u.xp6(1),u.hij("",e.name," ")}}function cs(e,t){if(1&e&&(u.TgZ(0,"optgroup",20),u.YNc(1,rs,2,2,"option",21),u.qZA()),2&e){const e=u.oxw();u.Q6J("label","global"+e.language.getLabel("LBL_FIELDSET")),u.xp6(1),u.Q6J("ngForOf",e.getFieldSets("global"))}}function gs(e,t){if(1&e&&u._UZ(0,"system-custom-icon",60),2&e){const e=u.oxw().$implicit,t=u.oxw(2);u.Q6J("icon",t.getDisplayType(e))}}const us=function(e){return{"slds-theme--shade":e}};function ms(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"li",50),u.NdJ("click",(function(){const t=u.CHM(e).$implicit,i=u.oxw(2);return u.KtG(i.selectItem(t,i.getDisplayType(t)))})),u.TgZ(1,"div",51),u.YNc(2,gs,1,1,"system-custom-icon",52),u.TgZ(3,"div",53)(4,"a",54),u._uU(5),u.qZA()(),u.TgZ(6,"div",55)(7,"button",42),u.NdJ("click",(function(){const t=u.CHM(e).$implicit,i=u.oxw(2);return u.KtG(i.addItem(t.item.fieldset))})),u._UZ(8,"system-button-icon",43),u.qZA(),u.TgZ(9,"button",56),u.NdJ("click",(function(){const t=u.CHM(e).$implicit,i=u.oxw(2);return u.KtG(i.openCopyModal(t))})),u._UZ(10,"system-button-icon",43),u.qZA(),u.TgZ(11,"button",57),u.NdJ("click",(function(){const t=u.CHM(e).$implicit,i=u.oxw(2);return u.KtG(i.unlinkItem(t))})),u._UZ(12,"system-button-icon",43),u.qZA(),u.TgZ(13,"button",58),u.NdJ("click",(function(){const t=u.CHM(e).$implicit,i=u.oxw(2);return u.KtG(i.moveDown(t))})),u._UZ(14,"system-button-icon",43),u.qZA(),u.TgZ(15,"button",59),u.NdJ("click",(function(){const t=u.CHM(e).$implicit,i=u.oxw(2);return u.KtG(i.moveUp(t))})),u._UZ(16,"system-button-icon",43),u.qZA()()()()}if(2&e){const e=t.$implicit,i=u.oxw(2);u.Q6J("ngClass",u.VKq(14,us,i.isSelected(e.id))),u.uIk("aria-level",e.level),u.xp6(2),u.Q6J("ngIf",""!=i.getDisplayType(e)),u.xp6(3),u.Oqu(i.getDisplayName(e)),u.xp6(2),u.Q6J("disabled",!i.view.isEditMode()||"field"==e.type||e.customModeGlobalField),u.xp6(1),u.Q6J("icon","new"),u.xp6(1),u.Q6J("disabled",!i.view.isEditMode()||"field"==e.type),u.xp6(1),u.Q6J("icon","copy"),u.xp6(1),u.Q6J("disabled",!i.view.isEditMode()||"global"==e.parentScope&&"field"==e.type),u.xp6(1),u.Q6J("icon","remove_link"),u.xp6(1),u.Q6J("disabled",!i.view.isEditMode()||e.index+1==e.count||e.customModeGlobalField),u.xp6(1),u.Q6J("icon","down"),u.xp6(1),u.Q6J("disabled",!i.view.isEditMode()||0==e.index||e.customModeGlobalField),u.xp6(1),u.Q6J("icon","up")}}function ps(e,t){if(1&e&&u._UZ(0,"fieldsetmanager-fieldset-details",61),2&e){const e=u.oxw(2);u.Q6J("fieldset",e.selectedItem)}}function hs(e,t){if(1&e&&u._UZ(0,"fieldsetmanager-field-details",62),2&e){const e=u.oxw(2);u.Q6J("field",e.selectedItem)}}function fs(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div",23)(1,"div",24)(2,"div",25)(3,"div",26)(4,"label",4),u._UZ(5,"system-label",27),u.qZA(),u.TgZ(6,"div",28),u._UZ(7,"system-utility-icon",29)(8,"input",30),u.qZA()(),u.TgZ(9,"div",26)(10,"label",4),u._UZ(11,"system-label",31),u.qZA(),u.TgZ(12,"div",32)(13,"input",33),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw();return u.KtG(i.currentFieldSetName=t)})),u.qZA()()(),u.TgZ(14,"div",26)(15,"label",4),u._UZ(16,"system-label",34),u.qZA(),u.TgZ(17,"div",32)(18,"input",33),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw();return u.KtG(i.currentFieldSetPackage=t)})),u.qZA()()(),u.TgZ(19,"div",26)(20,"label",4),u._UZ(21,"system-label",35),u.qZA(),u.TgZ(22,"div",32),u._UZ(23,"input",30),u.qZA()()()(),u.TgZ(24,"div",36)(25,"div",37)(26,"div",38)(27,"ul",39),u.YNc(28,ms,17,16,"li",40),u.qZA()(),u.TgZ(29,"div",41)(30,"button",42),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw();return u.KtG(t.addItem())})),u._UZ(31,"system-button-icon",43),u.qZA()()(),u.TgZ(32,"div",44),u.YNc(33,ps,1,1,"fieldsetmanager-fieldset-details",45),u.YNc(34,hs,1,1,"fieldsetmanager-field-details",46),u.qZA()(),u.TgZ(35,"div",47)(36,"button",48),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw();return u.KtG(t.saveChanges())})),u._UZ(37,"system-label",49),u.qZA()()()}if(2&e){const e=u.oxw();u.xp6(7),u.Q6J("icon","global"==e.fieldSetType?"world":"user"),u.xp6(1),u.Q6J("ngModel",e.fieldSetType),u.xp6(5),u.Q6J("disabled",!e.view.isEditMode())("ngModel",e.currentFieldSetName),u.xp6(5),u.Q6J("disabled",!e.view.isEditMode())("ngModel",e.currentFieldSetPackage),u.xp6(5),u.Q6J("ngModel",e.currentFieldSet),u.xp6(5),u.Q6J("ngForOf",e.currentFieldSetItems),u.xp6(2),u.Q6J("disabled",!e.view.isEditMode()),u.xp6(1),u.Q6J("icon","new"),u.xp6(2),u.Q6J("ngIf","fieldset"==e.selectedItem.type),u.xp6(1),u.Q6J("ngIf","field"==e.selectedItem.type),u.xp6(2),u.Q6J("disabled",!e.view.isEditMode())}}let bs=(()=>{var e;class FieldsetManager{constructor(e,t,i,n,l,o,a,d,r,c){(0,s.Z)(this,"backend",void 0),(0,s.Z)(this,"metadata",void 0),(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"modelutilities",void 0),(0,s.Z)(this,"broadcast",void 0),(0,s.Z)(this,"toast",void 0),(0,s.Z)(this,"modalservice",void 0),(0,s.Z)(this,"configurationService",void 0),(0,s.Z)(this,"view",void 0),(0,s.Z)(this,"modal",void 0),(0,s.Z)(this,"edit_mode","custom"),(0,s.Z)(this,"allowBarButtons",!0),(0,s.Z)(this,"crNoneActive",!1),(0,s.Z)(this,"change_request_required",!1),(0,s.Z)(this,"modules",[]),(0,s.Z)(this,"currentModule","*"),(0,s.Z)(this,"currentFieldSet",""),(0,s.Z)(this,"currentFieldSetItems",[]),(0,s.Z)(this,"selectedItem",{type:"",fieldset:"",id:"",isViewMode:!1}),(0,s.Z)(this,"showFieldSetDetails",!1),this.backend=e,this.metadata=t,this.language=i,this.modelutilities=n,this.broadcast=l,this.toast=o,this.modalservice=a,this.configurationService=d,this.view=r,this.modal=c,this.modules=this.metadata.getModules().sort(),this.checkMode()}get currentFieldSetName(){return this.metadata.getFieldset(this.currentFieldSet).name}set currentFieldSetName(e){this.metadata.setFieldset(this.currentFieldSet,{name:e,package:this.currentFieldSetPackage})}get currentFieldSetPackage(){return this.metadata.getFieldset(this.currentFieldSet).package}set currentFieldSetPackage(e){this.metadata.setFieldset(this.currentFieldSet,{name:this.currentFieldSetName,package:e})}get showDetailIcon(){return this.showFieldSetDetails?"chevronup":"chevrondown"}toggleDetail(){this.showFieldSetDetails=!this.showFieldSetDetails}get fieldSetType(){return this.currentFieldSet?this.metadata.getFieldset(this.currentFieldSet).type:""}getFieldSets(e){if(e){let t=[],i=this.metadata.getFieldSets(this.currentModule);for(let s of i)s.type==e&&t.push(s);return t}return this.metadata.getFieldSets(this.currentModule)}checkMode(){this.edit_mode=this.configurationService.getCapabilityConfig("core").edit_mode,this.change_request_required=!!this.configurationService.getCapabilityConfig("systemdeployment").change_request_required,"none"!=this.edit_mode&&"custom"!=this.edit_mode&&"all"!=this.edit_mode&&(this.edit_mode="custom"),this.change_request_required?this.backend.getRequest("module/SystemDeploymentCRs/active").subscribe((e=>{""==e.id?(this.setNoneMode(),this.crNoneActive=!0,this.toast.sendToast(this.language.getLabel("LBL_ACTIVATE_CR_WARNING"),"warning",null,3)):(this.crNoneActive=!1,"all"==this.edit_mode?this.setAllMode():"custom"==this.edit_mode?this.setCustomMode():this.setNoneMode())})):(this.crNoneActive=!1,"all"==this.edit_mode?this.setAllMode():"custom"==this.edit_mode?this.setCustomMode():this.setNoneMode())}setNoneMode(){this.view.setViewMode(),this.allowBarButtons=!1}setCustomMode(){"custom"==this.fieldSetType?this.view.setEditMode():this.view.setViewMode()}setAllMode(){this.view.setEditMode()}loadCurrentFieldset(){this.selectedItem={type:"",fieldset:"",id:""},this.checkMode(),this.currentFieldSetItems=[],this.addFieldSetItems(this.currentFieldSet,0,this.fieldSetType)}addItem(e=""){this.modalservice.openModal("FieldsetManagerAddDialog").subscribe((t=>{t.instance.metadata=this.metadata,t.instance.module=this.currentModule,t.instance.fieldsettype=this.fieldSetType,t.instance.edit_mode=this.edit_mode,t.instance.parent=e||this.currentFieldSet,t.instance.closedialog.subscribe((e=>{e&&this.loadCurrentFieldset()}))}))}unlinkItem(e){this.metadata.removeFieldsetItem(e.fieldset,e.item)&&(this.selectedItem={type:"",fieldset:"",id:""},this.loadCurrentFieldset())}editFieldset(){this.modalservice.openModal("FieldsetManagerEditDialog").subscribe((e=>{e.instance.fieldset=this.currentFieldSet,e.instance.edit_mode=this.edit_mode,e.instance.closedialog.subscribe((e=>{if(!1!==e){if(""!=this.currentFieldSet)this.metadata.setFieldset(this.currentFieldSet,{name:e.name,type:e.type});else{let t=this.modelutilities.generateGuid();this.metadata.addFieldset(t,this.currentModule,e.name,e.type),this.currentFieldSet=t}this.checkMode()}}))}))}addFieldset(){this.currentFieldSet="",this.currentFieldSetItems=[],this.editFieldset()}reset(){this.currentFieldSet="",this.currentFieldSetItems=[],this.selectedItem={type:"",fieldset:"",id:""}}addFieldSetItems(e,t=0,i="global"){let s=this.metadata.getFieldSetItems(e);s.forEach(((n,l)=>{let o=!1;if("custom"!=this.edit_mode||this.crNoneActive?("none"==this.edit_mode||this.crNoneActive)&&(o=!0):"global"==i&&(o=!0),n.field){let a={level:t+1,type:"field",fieldset:e,id:n.id,name:n.field,index:l,count:s.length,item:n,parentScope:i,customModeGlobalField:o};this.currentFieldSetItems.push(a)}else if(n.fieldset){let o=!1;if("custom"!=this.edit_mode||this.crNoneActive)("none"==this.edit_mode||this.crNoneActive)&&(o=!0);else{let e=this.metadata.getFieldset(n.fieldset);e&&"global"==e.type&&(o=!0)}let a={level:t+1,type:"fieldset",fieldset:e,id:n.id,name:this.metadata.getFieldsetName(n.fieldset),index:l,count:s.length,item:n,parentScope:i,customModeGlobalField:o};this.currentFieldSetItems.push(a),this.addFieldSetItems(n.fieldset,t+1,this.getDisplayType(a))}}))}getDisplayName(e){return"field"==e.type?e.item.field:"fieldset"==e.type?this.metadata.getFieldsetName(e.item.fieldset):void 0}getDisplayType(e){if("fieldset"==e.type){let t=this.metadata.getFieldset(e.item.fieldset);if(t)return t.type}}isSelected(e){return e==this.selectedItem.id}selectItem(e,t){this.selectedItem={type:e.type,fieldset:e.fieldset,id:e.id,isViewMode:e.customModeGlobalField}}moveDown(e){let t=this.metadata.getFieldSetItems(e.fieldset),i=0;if(t.some(((t,s)=>{if(t.id==e.id)return i=s,!0})),i<t.length-1){let e=t.splice(i,1);t.splice(i+1,0,e[0]);let s=0;for(let e of t)e.sequence=s,s++;this.loadCurrentFieldset()}}moveUp(e){let t=this.metadata.getFieldSetItems(e.fieldset),i=0;if(t.some(((t,s)=>{if(t.id==e.id)return i=s,!0})),i>0){let e=t.splice(i,1);t.splice(i-1,0,e[0]);let s=0;for(let e of t)e.sequence=s,s++;this.loadCurrentFieldset()}}allowEdit(){return""!=this.currentFieldSet}findTable(e){let t;return t="global"==e?{fieldsetTable:"sysuifieldsets",itemsTable:"sysuifieldsetsitems"}:{fieldsetTable:"sysuicustomfieldsets",itemsTable:"sysuicustomfieldsetsitems"},t}openCopyModal(e){var t=this;return(0,Ki.Z)((function*(){const i=e?e.item.fieldset:t.currentFieldSet,s=yield Pi(t.modalservice.openModal("FieldsetManagerCopyDialog"));var n;s.instance.fieldset=t.metadata.getFieldset(i),s.instance.edit_mode=t.edit_mode,s.instance.response.subscribe({next:(n=(0,Ki.Z)((function*(i){if(!i)return;const n=t.modal.await("LBL_PROCESSING");(yield t.checkExisting(i.module,i.type,i.name))?(n.next(!0),n.complete(),t.toast.sendAlert("Fieldset already exists!")):(s.instance.close(),t.copyFieldset(i,n,e))})),function(e){return n.apply(this,arguments)})})}))()}checkExisting(e,t,i){const s={module:e,type:t,name:i};return Pi(this.backend.getRequest("configuration/spiceui/core/fieldsetalreadyexists",s))}copyFieldset(e,t,i){const s=this.modelutilities.generateGuid();i&&(i.item.fieldset=s);const n={[s]:this.copyFieldsetToMetadata(s,e)},l={add:n};this.backend.postRequest("configuration/spiceui/core/fieldsets",{},{add:n}).subscribe({next:()=>{t.next(!0),t.complete(),this.broadcast.broadcastMessage("metadata.updatefieldsets",l),this.toast.sendToast("LBL_DATA_SAVED","success"),i||(this.currentModule=e.module,this.currentFieldSet=s,this.currentFieldSetName=e.name),this.loadCurrentFieldset()},error:()=>{t.next(!1),t.complete(),this.broadcast.broadcastMessage("metadata.updatefieldsets",{delete:n}),this.toast.sendToast("ERR_FAILED_TO_EXECUTE","error")}})}copyFieldsetToMetadata(e,t){return this.metadata.addFieldset(e,t.module,t.name,t.type),t.fieldset.items.forEach((t=>{t.fieldset?this.metadata.addFieldsetToFieldset(this.modelutilities.generateGuid(),e,t.fieldset,t.fieldconfig):this.metadata.addFieldToFieldset(this.modelutilities.generateGuid(),e,t.field,t.fieldconfig)})),this.metadata.getFieldset(e)}saveChanges(){this.modal.openModal("SystemLoadingModal").subscribe((e=>{this.backend.getRequest("configuration/spiceui/core/fieldsets").subscribe((t=>{let i=this.metadata.getRawFieldSets(),s={},n={},l={};for(let e in i)t.fieldsets[e]?(JSON.stringify(i[e])!==JSON.stringify(t.fieldsets[e])&&(n[e]=i[e]),delete t.fieldsets[e]):s[e]=i[e];l=t.fieldsets;let o={add:s,update:n,delete:l};this.backend.postRequest("configuration/spiceui/core/fieldsets",{},o).subscribe((t=>{this.broadcast.broadcastMessage("metadata.updatefieldsets",o),e.instance.self.destroy(),this.toast.sendToast("changes saved")}))}))}))}get getAllowCopyButton(){return!!this.currentFieldSet&&this.allowBarButtons}}return e=FieldsetManager,(0,s.Z)(FieldsetManager,"ɵfac",(function(t){return new(t||e)(u.Y36(h.y),u.Y36(f.Pu),u.Y36(b.d),u.Y36(Z.A),u.Y36(ui.f),u.Y36(v.A),u.Y36(x.o),u.Y36(M.C),u.Y36($i.e),u.Y36(x.o))})),(0,s.Z)(FieldsetManager,"ɵcmp",u.Xpm({type:e,selectors:[["fieldset-manager"]],features:[u._Bn([$i.e])],decls:28,vars:12,consts:[["titlelabel","LBL_FIELDSET_MANAGER"],[1,"slds-p-around--small","slds-border--bottom"],[1,"slds-grid","slds-grid--vertical-align-center","slds-form--inline"],[1,"slds-form-element"],[1,"slds-form-element__label"],["label","LBL_MODULE"],[1,"slds-form-element__control",2,"min-width","250px"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","disabled","ngModelChange","change"],["value","*"],[3,"value",4,"ngFor","ngForOf"],["label","LBL_FIELDSET"],[3,"label",4,"ngIf"],[1,"slds-form-element","slds-col--bump-left"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_COPY"],["type","button",1,"slds-button","slds-button_icon","slds-button_icon-border-filled",3,"disabled","click"],[3,"icon","size"],["class","slds-theme--default",4,"ngIf"],[3,"value"],[3,"label"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"],[1,"slds-theme--default"],[1,"slds-p-around--small","slds-border--bottom","slds-theme--default"],[1,"slds-grid","slds-grid--vertical-align-end"],[1,"slds-form-element","slds-p-right--x-small","slds-size--1-of-4"],["label","LBL_SCOPE"],[1,"slds-form-element__control","slds-input-has-icon","slds-input-has-icon_left"],["addclasses","slds-icon slds-input__icon slds-input__icon_left slds-icon-text-default",3,"icon"],["type","text","disabled","",1,"slds-input",3,"ngModel"],["label","LBL_NAME"],[1,"slds-form-element__control"],["type","text",1,"slds-input",3,"disabled","ngModel","ngModelChange"],["label","LBL_PACKAGE"],["label","LBL_ID"],[1,"slds-grid"],["system-to-bottom","","marginBottom","57",1,"slds-size--3-of-5","slds-p-horizontal--small","slds-p-top--x-small","slds-border--right"],["role","application",1,"slds-tree_container",2,"max-width","none"],["role","tree","aria-labelledby","treeheading",1,"slds-tree"],["role","treeitem",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"slds-p-around--small","slds-align--absolute-center","slds-border--top","slds-m-top--small"],["title","add item",1,"slds-button","slds-button--icon",3,"disabled","click"],[3,"icon"],[1,"slds-size--2-of-5","slds-p-horizontal--small","slds-p-vertical--x-small"],[3,"fieldset",4,"ngIf"],[3,"field",4,"ngIf"],[1,"slds-text-align--right","slds-p-around--small","slds-border--top"],["type","button",1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_SAVE"],["role","treeitem",3,"ngClass","click"],[1,"slds-tree__item","slds-grid","slds-grid--vertical-align-center"],["size","x-small",3,"icon",4,"ngIf"],[2,"white-space","nowrap"],["href","javascript:void(0);","role","presentation",1,"slds-truncate"],[1,"slds-col_bump-left"],["title","customize",1,"slds-button","slds-button--icon",3,"disabled","click"],["title","unlink item",1,"slds-button","slds-button--icon","||","customModeGlobalField",3,"disabled","click"],["title","move down",1,"slds-button","slds-button--icon",3,"disabled","click"],["title","move up",1,"slds-button","slds-button--icon",3,"disabled","click"],["size","x-small",3,"icon"],[3,"fieldset"],[3,"field"]],template:function(e,t){1&e&&(u._UZ(0,"workbench-header",0),u.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"label",4),u._UZ(5,"system-label",5),u.qZA(),u.TgZ(6,"div",6)(7,"div",7)(8,"select",8),u.NdJ("ngModelChange",(function(e){return t.currentModule=e}))("change",(function(){return t.reset()})),u.TgZ(9,"option",9),u._uU(10,"*"),u.qZA(),u.YNc(11,os,2,2,"option",10),u.qZA()()()(),u.TgZ(12,"div",3)(13,"label",4),u._UZ(14,"system-label",11),u.qZA(),u.TgZ(15,"div",6)(16,"div",7)(17,"select",8),u.NdJ("ngModelChange",(function(e){return t.currentFieldSet=e}))("change",(function(){return t.loadCurrentFieldset()})),u._UZ(18,"option"),u.YNc(19,ds,2,2,"optgroup",12),u.YNc(20,cs,2,2,"optgroup",12),u.qZA()()()(),u.TgZ(21,"div",13)(22,"button",14),u.NdJ("click",(function(){return t.openCopyModal()})),u.TgZ(23,"span"),u._UZ(24,"system-label",15),u.qZA()(),u.TgZ(25,"button",16),u.NdJ("click",(function(){return t.addFieldset()})),u._UZ(26,"system-utility-icon",17),u.qZA()()()(),u.YNc(27,fs,38,13,"div",18)),2&e&&(u.xp6(8),u.Q6J("ngModel",t.currentModule)("disabled",0==t.modules.length),u.xp6(3),u.Q6J("ngForOf",t.modules),u.xp6(6),u.Q6J("ngModel",t.currentFieldSet)("disabled",0==t.getFieldSets().length),u.xp6(2),u.Q6J("ngIf",t.getFieldSets("custom").length>0),u.xp6(1),u.Q6J("ngIf",t.getFieldSets("global").length>0),u.xp6(2),u.Q6J("disabled",!t.allowBarButtons),u.xp6(3),u.Q6J("disabled",!t.allowBarButtons),u.xp6(1),u.Q6J("icon","add")("size","x-small"),u.xp6(1),u.Q6J("ngIf",t.currentFieldSet))},dependencies:[n.mk,n.sg,n.O5,l.YN,l.Kr,l.Fj,l.EJ,l.JJ,l.On,T.J,ji.$,L._,m.r,w.H,Wi,ls,Xe],encapsulation:2})),FieldsetManager})();var Zs=i(6659);function _s(e,t){if(1&e&&(u.TgZ(0,"option"),u._uU(1),u.qZA()),2&e){const e=t.$implicit;u.xp6(1),u.Oqu(e)}}function ys(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div",27)(1,"label",13),u._UZ(2,"system-label",28),u.qZA(),u.TgZ(3,"div",29)(4,"div",30)(5,"select",31),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw();return u.KtG(i.addName=t)})),u.YNc(6,_s,2,1,"option",32),u.qZA()()(),u.TgZ(7,"div",33)(8,"label",13),u._UZ(9,"system-label",34),u.qZA(),u.TgZ(10,"div",29)(11,"input",35),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw();return u.KtG(i.addName=t)})),u.qZA()()()()}if(2&e){const e=u.oxw();u.xp6(5),u.Q6J("ngModel",e.addName),u.xp6(1),u.Q6J("ngForOf",e.getFieldNames()),u.xp6(5),u.Q6J("ngModel",e.addName)}}function vs(e,t){1&e&&(u.TgZ(0,"option",40),u._UZ(1,"system-label",41),u.qZA())}function xs(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div",27)(1,"label",13),u._UZ(2,"system-label",36),u.qZA(),u.TgZ(3,"div",29)(4,"div",30)(5,"select",31),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw();return u.KtG(i.fieldsettype=t)})),u.YNc(6,vs,2,0,"option",37),u.TgZ(7,"option",38),u._UZ(8,"system-label",39),u.qZA()()()(),u.TgZ(9,"div",33)(10,"label",13),u._UZ(11,"system-label",34),u.qZA(),u.TgZ(12,"div",29)(13,"input",35),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw();return u.KtG(i.addName=t)})),u.qZA()()()()}if(2&e){const e=u.oxw();u.xp6(5),u.Q6J("ngModel",e.fieldsettype),u.xp6(1),u.Q6J("ngIf","all"==e.edit_mode),u.xp6(7),u.Q6J("ngModel",e.addName)}}function Ms(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div",27)(1,"label",13),u._UZ(2,"system-label",42),u.qZA(),u.TgZ(3,"div",29)(4,"system-input-fieldset",43),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw();return u.KtG(i.addFieldset=t)})),u.qZA()()()}if(2&e){const e=u.oxw();u.xp6(4),u.Q6J("ngModel",e.addFieldset)}}let As=(()=>{var e;class FieldsetManagerAddDialog{constructor(e,t,i,n){(0,s.Z)(this,"backend",void 0),(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"modelutilities",void 0),(0,s.Z)(this,"metadata",void 0),(0,s.Z)(this,"closedialog",new u.vpe),(0,s.Z)(this,"module","*"),(0,s.Z)(this,"parent",""),(0,s.Z)(this,"edit_mode",""),(0,s.Z)(this,"addType","fieldsetadd"),(0,s.Z)(this,"addName",""),(0,s.Z)(this,"addFieldset",""),(0,s.Z)(this,"fieldsettype","custom"),(0,s.Z)(this,"moduleFields",[]),(0,s.Z)(this,"self",void 0),this.backend=e,this.language=t,this.modelutilities=i,this.metadata=n}ngOnInit(){this.module&&"*"!=this.module&&(this.moduleFields=this.metadata.getModuleFields(this.module))}closeDialog(){this.self.destroy()}onModalEscX(){this.closeDialog()}add(){switch(this.addType){case"fieldsetadd":let e=this.modelutilities.generateGuid();this.metadata.addFieldset(e,this.module,this.addName,this.fieldsettype),this.metadata.addFieldsetToFieldset(this.modelutilities.generateGuid(),this.parent,e);break;case"fieldsetselect":this.metadata.addFieldsetToFieldset(this.modelutilities.generateGuid(),this.parent,this.addFieldset);break;case"field":this.modelutilities.generateGuid();this.metadata.addFieldToFieldset(this.modelutilities.generateGuid(),this.parent,this.addName)}this.closedialog.emit(!0),this.self.destroy()}getFieldNames(){let e=[];for(let t in this.moduleFields)e.push(t);return e.sort(),e}get fieldsets(){return this.metadata.getFieldSets()}}return e=FieldsetManagerAddDialog,(0,s.Z)(FieldsetManagerAddDialog,"ɵfac",(function(t){return new(t||e)(u.Y36(h.y),u.Y36(b.d),u.Y36(Z.A),u.Y36(f.Pu))})),(0,s.Z)(FieldsetManagerAddDialog,"ɵcmp",u.Xpm({type:e,selectors:[["fieldsetmanager-add-dialog"]],inputs:{module:"module",parent:"parent",edit_mode:"edit_mode"},outputs:{closedialog:"closedialog"},decls:35,vars:8,consts:[["role","dialog","tabindex","-1","aria-labelledby","header43",1,"slds-modal","slds-fade-in-open"],[1,"slds-modal__container"],[1,"slds-modal__header","slds-theme--shade"],["title","Close",1,"slds-button","slds-modal__close","slds-button--icon-inverse",3,"click"],[3,"icon","size"],["id","header43",1,"slds-text-heading--medium"],["label","LBL_ADD_ITEM"],[1,"slds-modal__content","slds-p-around--medium"],[1,"slds-grid","slds-col--bump-left"],[1,"slds-radio"],["type","radio","name","addType","value","fieldsetadd","id","fieldsetaddradio",3,"ngModel","ngModelChange"],["for","fieldsetaddradio",1,"slds-radio__label"],[1,"slds-radio_faux"],[1,"slds-form-element__label"],["label","LBL_ADD_FIELDSET"],["type","radio","name","addType","value","fieldsetselect","id","fieldsetselectradio",3,"ngModel","ngModelChange"],["for","fieldsetselectradio",1,"slds-radio__label"],["label","LBL_SELECT_FIELDSET"],["type","radio","name","addType","value","field","id","fieldradio",3,"ngModel","ngModelChange"],["for","fieldradio",1,"slds-radio__label"],["label","LBL_FIELD"],["class","slds-form-element",4,"ngIf"],[1,"slds-modal__footer"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_ADD"],[1,"slds-form-element"],["label","LBL_FIELDNAME"],[1,"slds-form-element__control"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],[1,"slds-form-element","slds-m-top--small"],["label","LBL_ITEM_NAME"],["type","text","placeholder","name",1,"slds-input",3,"ngModel","ngModelChange"],["label","LBL_SCOPE"],["value","global",4,"ngIf"],["value","custom"],["label","LBL_CUSTOM"],["value","global"],["label","LBL_GLOBAL"],["label","LBL_FIELDSET"],[3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),u.NdJ("click",(function(){return t.closeDialog()})),u._UZ(4,"system-button-icon",4),u.qZA(),u.TgZ(5,"h2",5),u._UZ(6,"system-label",6),u.qZA()(),u.TgZ(7,"div",7)(8,"div",8)(9,"span",9)(10,"input",10),u.NdJ("ngModelChange",(function(e){return t.addType=e})),u.qZA(),u.TgZ(11,"label",11),u._UZ(12,"span",12),u.TgZ(13,"span",13),u._UZ(14,"system-label",14),u.qZA()()(),u.TgZ(15,"span",9)(16,"input",15),u.NdJ("ngModelChange",(function(e){return t.addType=e})),u.qZA(),u.TgZ(17,"label",16),u._UZ(18,"span",12),u.TgZ(19,"span",13),u._UZ(20,"system-label",17),u.qZA()()(),u.TgZ(21,"span",9)(22,"input",18),u.NdJ("ngModelChange",(function(e){return t.addType=e})),u.qZA(),u.TgZ(23,"label",19),u._UZ(24,"span",12),u.TgZ(25,"span",13),u._UZ(26,"system-label",20),u.qZA()()()(),u.YNc(27,ys,12,3,"div",21),u.YNc(28,xs,14,3,"div",21),u.YNc(29,Ms,5,1,"div",21),u.qZA(),u.TgZ(30,"div",22)(31,"button",23),u.NdJ("click",(function(){return t.closeDialog()})),u._UZ(32,"system-label",24),u.qZA(),u.TgZ(33,"button",25),u.NdJ("click",(function(){return t.add()})),u._UZ(34,"system-label",26),u.qZA()()()()),2&e&&(u.xp6(4),u.Q6J("icon","close")("size","large"),u.xp6(6),u.Q6J("ngModel",t.addType),u.xp6(6),u.Q6J("ngModel",t.addType),u.xp6(6),u.Q6J("ngModel",t.addType),u.xp6(5),u.Q6J("ngIf","field"==t.addType),u.xp6(1),u.Q6J("ngIf","fieldsetadd"==t.addType),u.xp6(1),u.Q6J("ngIf","fieldsetselect"==t.addType))},dependencies:[n.sg,n.O5,l.YN,l.Kr,l.Fj,l.EJ,l._,l.JJ,l.On,T.J,Zs.a,L._],encapsulation:2})),FieldsetManagerAddDialog})();function Ts(e,t){1&e&&(u.TgZ(0,"option",24),u._UZ(1,"system-label",25),u.qZA())}let Ls=(()=>{var e;class FieldsetManagerEditDialog{constructor(e,t,i,n,l){(0,s.Z)(this,"backend",void 0),(0,s.Z)(this,"metadata",void 0),(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"modelutilities",void 0),(0,s.Z)(this,"configurationService",void 0),(0,s.Z)(this,"fieldset",""),(0,s.Z)(this,"edit_mode",""),(0,s.Z)(this,"closedialog",new u.vpe),(0,s.Z)(this,"fieldsetname",""),(0,s.Z)(this,"fieldsettype",""),(0,s.Z)(this,"adding",!1),(0,s.Z)(this,"globalEdit",!1),(0,s.Z)(this,"modalTitle",""),(0,s.Z)(this,"self",void 0),this.backend=e,this.metadata=t,this.language=i,this.modelutilities=n,this.configurationService=l,this.modalTitle=this.language.getAppLanglabel("LBL_EDIT")}ngOnInit(){this.fieldset?(this.fieldsetname=this.metadata.getFieldsetName(this.fieldset),this.fieldsettype=this.metadata.getFieldset(this.fieldset).type,this.adding=!1):(this.modalTitle=this.language.getAppLanglabel("LBL_ADD"),this.fieldsettype="custom",this.adding=!0)}closeDialog(){this.self.destroy()}onModalEscX(){this.closeDialog()}add(){this.closedialog.emit({name:this.fieldsetname,type:this.fieldsettype}),this.self.destroy()}}return e=FieldsetManagerEditDialog,(0,s.Z)(FieldsetManagerEditDialog,"ɵfac",(function(t){return new(t||e)(u.Y36(h.y),u.Y36(f.Pu),u.Y36(b.d),u.Y36(Z.A),u.Y36(M.C))})),(0,s.Z)(FieldsetManagerEditDialog,"ɵcmp",u.Xpm({type:e,selectors:[["fieldsetmanager-edit-dialog"]],inputs:{fieldset:"fieldset",edit_mode:"edit_mode"},outputs:{closedialog:"closedialog"},decls:27,vars:8,consts:[["role","dialog","tabindex","-1","aria-labelledby","header43",1,"slds-modal","slds-fade-in-open"],[1,"slds-modal__container"],[1,"slds-modal__header","slds-theme--shade"],["title","Close",1,"slds-button","slds-modal__close","slds-button--icon-inverse",3,"click"],[3,"icon","size"],["id","header43",1,"slds-text-heading--medium"],[1,"slds-modal__content","slds-p-around--medium"],[1,"slds-form-element","slds-m-top--small"],[1,"slds-form-element__label"],["label","LBL_ITEM_NAME"],[1,"slds-form-element__control"],["type","text","placeholder","name",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-form-element"],["label","LBL_SCOPE"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","disabled","ngModelChange"],["value","global",4,"ngIf"],["value","custom"],["label","LBL_CUSTOM"],[1,"slds-modal__footer"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_SAVE"],["value","global"],["label","LBL_GLOBAL"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),u.NdJ("click",(function(){return t.closeDialog()})),u._UZ(4,"system-button-icon",4),u.qZA(),u.TgZ(5,"h2",5),u._uU(6),u.qZA()(),u.TgZ(7,"div",6)(8,"div",7)(9,"label",8),u._UZ(10,"system-label",9),u.qZA(),u.TgZ(11,"div",10)(12,"input",11),u.NdJ("ngModelChange",(function(e){return t.fieldsetname=e})),u.qZA()()(),u.TgZ(13,"div",12)(14,"label",8),u._UZ(15,"system-label",13),u.qZA(),u.TgZ(16,"div",10)(17,"div",14)(18,"select",15),u.NdJ("ngModelChange",(function(e){return t.fieldsettype=e})),u.YNc(19,Ts,2,0,"option",16),u.TgZ(20,"option",17),u._UZ(21,"system-label",18),u.qZA()()()()()(),u.TgZ(22,"div",19)(23,"button",20),u.NdJ("click",(function(){return t.closeDialog()})),u._UZ(24,"system-label",21),u.qZA(),u.TgZ(25,"button",22),u.NdJ("click",(function(){return t.add()})),u._UZ(26,"system-label",23),u.qZA()()()()),2&e&&(u.xp6(4),u.Q6J("icon","close")("size","large"),u.xp6(2),u.Oqu(t.modalTitle),u.xp6(6),u.Q6J("ngModel",t.fieldsetname),u.xp6(6),u.Q6J("ngModel",t.fieldsettype)("disabled",!t.adding),u.xp6(1),u.Q6J("ngIf","all"==t.edit_mode),u.xp6(6),u.Q6J("disabled",""==t.fieldsetname))},dependencies:[n.O5,l.YN,l.Kr,l.Fj,l.EJ,l.JJ,l.On,T.J,L._],encapsulation:2})),FieldsetManagerEditDialog})();function qs(e,t){if(1&e&&(u.TgZ(0,"option",11),u._uU(1),u.qZA()),2&e){const e=t.$implicit;u.Q6J("value",e.value),u.xp6(1),u.Oqu(e.display)}}function Cs(e,t){if(1&e&&(u.TgZ(0,"option",11),u._uU(1),u.qZA()),2&e){const e=t.$implicit;u.Q6J("value",e.id),u.xp6(1),u.Oqu(e.module)}}function Js(e,t){if(1&e&&(u.TgZ(0,"option",11),u._uU(1),u.qZA()),2&e){const e=t.$implicit,i=u.oxw(2);u.Q6J("value",e.component),u.xp6(1),u.Oqu(i.componentName(e))}}function Ns(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"system-input-label",41),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw(2);return u.KtG(i.action.actionconfig.label=t)})),u.qZA()}if(2&e){const e=u.oxw(2);u.Q6J("ngModel",e.action.actionconfig.label)}}function ks(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"system-input-label",41),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw(2);return u.KtG(i.action.actionconfig.group=t)})),u.qZA()}if(2&e){const e=u.oxw(2);u.Q6J("ngModel",e.action.actionconfig.group)}}function ws(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"fieldset",1)(1,"legend",2),u._UZ(2,"system-label",3),u.qZA(),u.TgZ(3,"div",4)(4,"div",5)(5,"label",6),u._UZ(6,"system-label",7),u.qZA(),u.TgZ(7,"div",4)(8,"div",8)(9,"select",9,10),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw();return u.KtG(i.action.action=t)}))("change",(function(){u.CHM(e);const t=u.oxw();return u.KtG(t.setActionComponent())})),u._UZ(11,"option",11),u.YNc(12,qs,2,2,"option",12),u.qZA()()()(),u.TgZ(13,"div",13)(14,"div",14)(15,"label",6),u._UZ(16,"system-label",15),u.qZA(),u.TgZ(17,"div",4)(18,"div",16)(19,"select",17),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw();return u.KtG(i.systemmodule=t)})),u.YNc(20,Cs,2,2,"option",12),u.qZA()()()(),u.TgZ(21,"div",18)(22,"label",6),u._UZ(23,"system-label",3),u.qZA(),u.TgZ(24,"div",4)(25,"div",16)(26,"select",19),u.NdJ("change",(function(){u.CHM(e);const t=u.oxw();return u.KtG(t.setComponent())}))("ngModelChange",(function(t){u.CHM(e);const i=u.oxw();return u.KtG(i.localcomponent=t)})),u.TgZ(27,"option"),u._uU(28,"-"),u.qZA(),u.YNc(29,Js,2,2,"option",12),u.qZA()()()()()(),u.TgZ(30,"legend",2),u._UZ(31,"system-label",20),u.qZA(),u.TgZ(32,"div",4)(33,"div",21)(34,"label",6),u._uU(35,"ID"),u.qZA(),u.TgZ(36,"div",4),u._UZ(37,"input",22),u.qZA()(),u.TgZ(38,"div",23)(39,"label",6),u._UZ(40,"system-label",24),u.qZA(),u.TgZ(41,"div",25)(42,"input",26),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw();return u.KtG(i.action.package=t)})),u.qZA()()(),u.TgZ(43,"div",23)(44,"label",6),u._UZ(45,"system-label",27),u.qZA(),u.TgZ(46,"div",25)(47,"input",28),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw();return u.KtG(i.action.version=t)})),u.qZA()()()(),u.TgZ(48,"legend",2),u._UZ(49,"system-label",29),u.qZA(),u.TgZ(50,"div",4)(51,"div",30)(52,"label",6),u._UZ(53,"system-label",31),u.qZA(),u.YNc(54,Ns,1,1,"system-input-label",32),u.qZA(),u.TgZ(55,"div",30)(56,"label",6),u._UZ(57,"system-label",33),u.qZA(),u.YNc(58,ks,1,1,"system-input-label",32),u.qZA(),u.TgZ(59,"div",30)(60,"label",6),u._UZ(61,"system-label",34),u.qZA(),u.TgZ(62,"input",35),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw();return u.KtG(i.action.actionconfig.addclasses=t)})),u.qZA()(),u.TgZ(63,"fieldset",23)(64,"div",4)(65,"label",36)(66,"input",37),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw();return u.KtG(i.action.singlebutton=t)})),u.qZA(),u._UZ(67,"span",38),u.TgZ(68,"span",6),u._UZ(69,"system-label",39),u.qZA()()()(),u._UZ(70,"workbench-config",40),u.qZA()()}if(2&e){const e=u.oxw();u.xp6(9),u.Q6J("disabled",!e.view.isEditMode())("ngModel",e.action.action),u.xp6(3),u.Q6J("ngForOf",e.standardActions),u.xp6(7),u.Q6J("disabled",!e.view.isEditMode()||""!=e.action.action&&!!e.action.action)("ngModel",e.systemmodule),u.xp6(1),u.Q6J("ngForOf",e.systemmodules),u.xp6(6),u.Q6J("disabled",!e.view.isEditMode()||""!=e.action.action&&!!e.action.action)("ngModel",e.localcomponent),u.xp6(3),u.Q6J("ngForOf",e.components),u.xp6(8),u.Q6J("ngModel",e.action.id),u.xp6(5),u.Q6J("disabled",!e.view.isEditMode())("ngModel",e.action.package),u.xp6(5),u.Q6J("disabled",!e.view.isEditMode())("ngModel",e.action.version),u.xp6(7),u.Q6J("ngIf",e.view.isEditMode()),u.xp6(4),u.Q6J("ngIf",e.view.isEditMode()),u.xp6(4),u.Q6J("disabled",!e.view.isEditMode())("ngModel",e.action.actionconfig.addclasses),u.xp6(4),u.Q6J("disabled",!e.view.isEditMode())("ngModel",e.action.singlebutton),u.xp6(4),u.Q6J("component",e.action.component)("configValues",e.action.actionconfig)}}let Us=(()=>{var e;class ActionsetManagerActionDetails{constructor(e,t,i,n){(0,s.Z)(this,"backend",void 0),(0,s.Z)(this,"metadata",void 0),(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"view",void 0),(0,s.Z)(this,"action",{}),(0,s.Z)(this,"component",""),(0,s.Z)(this,"component_backup",""),(0,s.Z)(this,"localcomponent",""),(0,s.Z)(this,"systemmodule",""),(0,s.Z)(this,"systemmodules",[]),(0,s.Z)(this,"standardActions",[{display:"NEW",value:"NEW",component:"ObjectActionNewButton"},{display:"DUPLICATE",value:"DUPLICATE",component:"ObjectActionDuplicateButton"},{display:"NEWRELATED",value:"NEWRELATED",component:"ObjectActionNewrelatedButton"},{display:"EDIT",value:"EDIT",component:"ObjectActionEditButton"},{display:"DELETE",value:"DELETE",component:"ObjectActionDeleteButton"},{display:"AUDIT",value:"AUDIT",component:"ObjectActionAuditlogButton"},{display:"IMPORT",value:"IMPORT",component:"SpiceImporterImportButton"},{display:"MAIL",value:"MAIL",component:"ObjectActionBeanToMailButton"},{display:"PRINT",value:"PRINT",component:"ObjectActionOutputBeanButton"},{display:"ROUTE",value:"ROUTE",component:"GlobalNavigationMenuItemActionRoute"},{display:"SELECT",value:"SELECT",component:"ObjectActionSelectButton"},{display:"OPEN",value:"OPEN",component:"ObjectActionOpenButton"},{display:"CANCEL",value:"CANCEL",component:"ObjectActionCancelButton"},{display:"SAVE",value:"SAVE",component:"ObjectActionSaveButton"},{display:"SAVERELATED",value:"SAVERELATED",component:"ObjectActionSaveRelatedButton"}]),this.backend=e,this.metadata=t,this.language=i,this.view=n,this.systemmodules=this.metadata.getSystemModules()}ngOnChanges(e){this.action&&(this.action.isViewMode?this.view.setViewMode():this.view.setEditMode(),this.localcomponent=this.action.component,this.component_backup=this.localcomponent,this.setActionComponent())}get components(){return this.metadata.getSystemComponents(this.systemmodule)}componentName(e){return e?"1"==e.deprecated?e.component+" | dep.":e.component:""}setActionComponent(){this.action.action?this.localcomponent=this.standardActions.find((e=>e.value===this.action.action)).component:this.localcomponent=this.component_backup,this.systemmodule=this.metadata.getSystemModuleByComponent(this.localcomponent)}setComponent(){this.action.component=this.localcomponent}}return e=ActionsetManagerActionDetails,(0,s.Z)(ActionsetManagerActionDetails,"ɵfac",(function(t){return new(t||e)(u.Y36(h.y),u.Y36(f.Pu),u.Y36(b.d),u.Y36($i.e))})),(0,s.Z)(ActionsetManagerActionDetails,"ɵcmp",u.Xpm({type:e,selectors:[["actionsetmanager-action-details"]],inputs:{action:"action"},features:[u._Bn([$i.e]),u.TTD],decls:1,vars:1,consts:[["class","slds-form-element slds-form-element_compound",4,"ngIf"],[1,"slds-form-element","slds-form-element_compound"],[1,"slds-form-element__legend","slds-form-element__label","slds-m-vertical_small"],["label","LBL_COMPONENT"],[1,"slds-form-element__control"],[1,"slds-form-element"],[1,"slds-form-element__label"],["label","LBL_STANDARD_ACTION"],[1,"slds-select_container","slds-m-vertical--xx-small"],[1,"slds-select",3,"disabled","ngModel","ngModelChange","change"],["focus",""],[3,"value"],[3,"value",4,"ngFor","ngForOf"],[1,"slds-grid"],[1,"slds-form-element","slds-size--1-of-2","slds-p-right--xx-small"],["label","LBL_MODULE"],[1,"slds-select_container"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],[1,"slds-form-element","slds-size--1-of-2","slds-p-left--xx-small"],[1,"slds-select",3,"disabled","ngModel","change","ngModelChange"],["label","LBL_INFORMATION"],[1,"slds-form-element","slds-m-bottom--x-small"],["type","text","disabled","",1,"slds-input",3,"ngModel"],[1,"slds-form-element","slds-m-vertical--xxx-small"],["label","LBL_PACKAGE"],[1,"slds-form-element__control","slds-input-has-icon","slds-input-has-icon--right"],["type","text","placeholder","package",1,"slds-input",3,"disabled","ngModel","ngModelChange"],["label","LBL_VERSION"],["type","text","placeholder","version",1,"slds-input",3,"disabled","ngModel","ngModelChange"],["label","LBL_OPTIONS"],[1,"slds-form-element","slds-m-vertical--xx-small"],["label","LBL_LABEL"],[3,"ngModel","ngModelChange",4,"ngIf"],["label","LBL_GROUP"],["label","LBL_ADD_CLASS"],["type","text",1,"slds-input",3,"disabled","ngModel","ngModelChange"],["for","link",1,"slds-checkbox"],["type","checkbox","id","link",3,"disabled","ngModel","ngModelChange"],[1,"slds-checkbox--faux"],["label","LBL_SINGLEBUTTON"],[3,"component","configValues"],[3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&u.YNc(0,ws,71,22,"fieldset",0),2&e&&u.Q6J("ngIf",t.action)},dependencies:[n.sg,n.O5,l.YN,l.Kr,l.Fj,l.Wl,l.EJ,l.JJ,l.On,S.$,L._,es],encapsulation:2})),ActionsetManagerActionDetails})();function Es(e,t){if(1&e&&(u.TgZ(0,"option",18),u._uU(1),u.qZA()),2&e){const e=t.$implicit;u.Q6J("value",e.module),u.xp6(1),u.hij("",e.module," ")}}function Ds(e,t){if(1&e&&(u.TgZ(0,"option",21),u._uU(1),u.qZA()),2&e){const e=t.$implicit;u.Q6J("ngValue",e.id),u.xp6(1),u.hij("",e.name," ")}}function Os(e,t){if(1&e&&(u.TgZ(0,"optgroup",19),u.YNc(1,Ds,2,2,"option",20),u.qZA()),2&e){const e=u.oxw();u.Q6J("label","custom"+e.language.getLabel("LBL_ACTIONSET")),u.xp6(1),u.Q6J("ngForOf",e.getActionSets("custom"))}}function Is(e,t){if(1&e&&(u.TgZ(0,"option",21),u._uU(1),u.qZA()),2&e){const e=t.$implicit;u.Q6J("ngValue",e.id),u.xp6(1),u.hij("",e.name," ")}}function Qs(e,t){if(1&e&&(u.TgZ(0,"optgroup",19),u.YNc(1,Is,2,2,"option",20),u.qZA()),2&e){const e=u.oxw();u.Q6J("label","global"+e.language.getLabel("LBL_ACTIONSET")),u.xp6(1),u.Q6J("ngForOf",e.getActionSets("global"))}}function Ss(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"button",22),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw();return u.KtG(t.copy())})),u.TgZ(1,"span"),u._UZ(2,"system-label",23),u.qZA()()}if(2&e){const e=u.oxw();u.Q6J("disabled",!e.allowBarButtons)}}function Bs(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"button",24),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw();return u.KtG(t.addActionset())})),u._UZ(1,"system-utility-icon",25),u.qZA()}if(2&e){const e=u.oxw();u.Q6J("disabled",!e.allowBarButtons),u.xp6(1),u.Q6J("icon","add")("size","x-small")}}function Fs(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"button",26),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw();return u.KtG(t.saveChanges())})),u._UZ(1,"system-label",27),u.qZA()}if(2&e){const e=u.oxw();u.Q6J("disabled",!e.view.isEditMode())}}function Ys(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"button",26),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw();return u.KtG(t.deleteChanges())})),u._UZ(1,"system-label",28),u.qZA()}if(2&e){const e=u.oxw();u.Q6J("disabled",!e.view.isEditMode())}}const Rs=function(e){return{"slds-theme--shade":e}};function Gs(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div",61),u.NdJ("click",(function(){const t=u.CHM(e).$implicit,i=u.oxw(2);return u.KtG(i.selectItem(t))})),u._UZ(1,"system-utility-icon",62),u.TgZ(2,"a",63),u._uU(3),u.qZA(),u.TgZ(4,"div",64)(5,"button",65),u.NdJ("click",(function(){const t=u.CHM(e).$implicit,i=u.oxw(2);return u.KtG(i.deleteItem(t))})),u._UZ(6,"system-button-icon",58),u.qZA()()()}if(2&e){const e=t.$implicit,i=u.oxw(2);u.Q6J("ngClass",u.VKq(6,Rs,e.id==i.selectedItemID)),u.xp6(1),u.Q6J("icon","rows")("size","x-small"),u.xp6(2),u.Oqu(i.getDisplayName(e)),u.xp6(2),u.Q6J("disabled",!i.view.isEditMode()),u.xp6(1),u.Q6J("icon","delete")}}function Hs(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div",29)(1,"div",30)(2,"div",31)(3,"div",32)(4,"label",4),u._UZ(5,"system-label",33),u.qZA(),u.TgZ(6,"div",34),u._UZ(7,"system-custom-icon",35)(8,"input",36),u.qZA()(),u.TgZ(9,"div",32)(10,"label",4),u._UZ(11,"system-label",37),u.qZA(),u.TgZ(12,"div",38)(13,"div",39)(14,"select",40),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw();return u.KtG(i.currentActionSet.grouped=t)})),u.TgZ(15,"option",41),u._UZ(16,"system-label",42),u.qZA(),u.TgZ(17,"option",43),u._UZ(18,"system-label",44),u.qZA(),u.TgZ(19,"option",45),u._UZ(20,"system-label",46),u.qZA()()()()(),u.TgZ(21,"div",32)(22,"label",4),u._UZ(23,"system-label",47),u.qZA(),u.TgZ(24,"div",38)(25,"input",48),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw();return u.KtG(i.currentActionSet.name=t)})),u.qZA()()(),u.TgZ(26,"div",32)(27,"label",4),u._UZ(28,"system-label",49),u.qZA(),u.TgZ(29,"div",38)(30,"input",48),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw();return u.KtG(i.currentActionSet.package=t)})),u.qZA()()(),u.TgZ(31,"div",32)(32,"label",4),u._UZ(33,"system-label",50),u.qZA(),u.TgZ(34,"div",38)(35,"input",48),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw();return u.KtG(i.currentActionSet.version=t)})),u.qZA()()(),u.TgZ(36,"div",32)(37,"label",4),u._UZ(38,"system-label",51),u.qZA(),u.TgZ(39,"div",38),u._UZ(40,"input",36),u.qZA()()()(),u.TgZ(41,"div",52)(42,"div",53)(43,"div",54),u.NdJ("cdkDropListDropped",(function(t){u.CHM(e);const i=u.oxw();return u.KtG(i.drop(t))})),u.YNc(44,Gs,7,8,"div",55),u.qZA(),u.TgZ(45,"div",56)(46,"button",57),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw();return u.KtG(t.addActionsetItem())})),u._UZ(47,"system-button-icon",58),u.qZA()()(),u.TgZ(48,"div",59),u._UZ(49,"actionsetmanager-action-details",60),u.qZA()()()}if(2&e){const e=u.oxw();u.xp6(7),u.Q6J("icon",e.currentActionSet.type),u.xp6(1),u.Q6J("ngModel",e.currentActionSet.type),u.xp6(6),u.Q6J("disabled",!e.view.isEditMode())("ngModel",e.currentActionSet.grouped),u.xp6(11),u.Q6J("disabled",!e.view.isEditMode())("ngModel",e.currentActionSet.name),u.xp6(5),u.Q6J("disabled",!e.view.isEditMode())("ngModel",e.currentActionSet.package),u.xp6(5),u.Q6J("disabled",!e.view.isEditMode())("ngModel",e.currentActionSet.version),u.xp6(5),u.Q6J("ngModel",e.currentActionSet.id),u.xp6(4),u.Q6J("ngForOf",e.currentActionSet.actions),u.xp6(2),u.Q6J("disabled",!e.view.isEditMode()),u.xp6(1),u.Q6J("icon","new"),u.xp6(2),u.Q6J("action",e.selectedItem)}}let Ks=(()=>{var e;class ActionsetManager{constructor(e,t,i,n,l,o,a,d,r,c){(0,s.Z)(this,"backend",void 0),(0,s.Z)(this,"metadata",void 0),(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"modelutilities",void 0),(0,s.Z)(this,"broadcast",void 0),(0,s.Z)(this,"toast",void 0),(0,s.Z)(this,"modalservice",void 0),(0,s.Z)(this,"configurationService",void 0),(0,s.Z)(this,"view",void 0),(0,s.Z)(this,"modal",void 0),(0,s.Z)(this,"edit_mode","custom"),(0,s.Z)(this,"allowBarButtons",!0),(0,s.Z)(this,"crNoneActive",!1),(0,s.Z)(this,"change_request_required",!1),(0,s.Z)(this,"sysModules",[]),(0,s.Z)(this,"currentModule","*"),(0,s.Z)(this,"currentActionSet",{id:"",module:"",name:"",package:"",type:"",actions:[],isnew:!1}),(0,s.Z)(this,"actionSetBackup",""),(0,s.Z)(this,"selectedItem",null),(0,s.Z)(this,"selectedItemID",""),(0,s.Z)(this,"showActionSetDetails",!1),this.backend=e,this.metadata=t,this.language=i,this.modelutilities=n,this.broadcast=l,this.toast=o,this.modalservice=a,this.configurationService=d,this.view=r,this.modal=c,this.backend.getRequest("system/spiceui/admin/modules").subscribe((e=>{this.sysModules=e})),this.checkMode()}getActionSets(e=null){let t=[];if(e){let i=this.metadata.getActionSets(this.currentModule);for(let s of i)s.type==e&&t.push(s)}else t=this.metadata.getActionSets(this.currentModule);return t}checkMode(){this.edit_mode=this.configurationService.getCapabilityConfig("core").edit_mode,this.change_request_required=!!this.configurationService.getCapabilityConfig("systemdeployment").change_request_required,"none"!=this.edit_mode&&"custom"!=this.edit_mode&&"all"!=this.edit_mode&&(this.edit_mode="custom"),this.change_request_required?this.backend.getRequest("module/SystemDeploymentCRs/active").subscribe((e=>{""==e.id?(this.setNoneMode(),this.crNoneActive=!0,this.toast.sendToast(this.language.getLabel("LBL_ACTIVATE_CR_WARNING"),"warning",null,3)):(this.crNoneActive=!1,"all"==this.edit_mode?this.setAllMode():"custom"==this.edit_mode?this.setCustomMode():this.setNoneMode())})):(this.crNoneActive=!1,"all"==this.edit_mode?this.setAllMode():"custom"==this.edit_mode?this.setCustomMode():this.setNoneMode())}setNoneMode(){this.view.setViewMode(),this.allowBarButtons=!1}setCustomMode(){"custom"==this.currentActionSet.type?this.view.setEditMode():this.view.setViewMode()}setAllMode(){this.view.setEditMode()}get checkForChanges(){return this.checkForChangesFunction()}checkForChangesFunction(){return""!=this.currentActionSet.id&&(this.checkMode(),JSON.stringify(this.currentActionSet)!=this.actionSetBackup)}selectCurrentActionset(){if(this.currentActionSet.id){let e=this.currentActionSet.id;""!=this.actionSetBackup?(this.currentActionSet.id=JSON.parse(this.actionSetBackup).id,JSON.stringify(this.actionSetBackup),this.checkForChangesFunction()?this.modal.confirm("LBL_ALL_CHANGES_WOULD_BE_DELETED.","LBL_ARE_YOU_SURE").subscribe((t=>{t&&(this.deleteChanges(),this.loadCurrentActionset(e))})):this.loadCurrentActionset(e)):this.loadCurrentActionset(e)}}loadCurrentActionset(e){this.selectedItem=null,this.checkMode(),this.currentActionSet=this.metadata.getActionSet(e),this.actionSetBackup=JSON.stringify({...this.currentActionSet}),this.currentActionSet&&this.currentActionSet.actions&&this.currentActionSet.actions.length>0&&this.selectItem(this.currentActionSet.actions[0])}addActionsetItem(){let e={action:"NEW",component:null,id:this.modelutilities.generateGuid(),sequence:this.currentActionSet.actions.length,singlebutton:!1,package:this.currentActionSet.package,version:this.currentActionSet.version,actionconfig:{},parentScope:this.currentActionSet.type};this.currentActionSet.actions.push(e),this.metadata.setActionSetItems(this.currentActionSet.id,this.currentActionSet.actions),this.selectItem(e)}deleteItem(e){this.modal.confirm("LBL_ARE_YOU_SURE","LBL_REMOVE_ITEM").subscribe((t=>{t&&this.currentActionSet.actions.splice(this.currentActionSet.actions.map((e=>e.id)).indexOf(e.id),1)}))}addActionset(){this.modalservice.openModal("ActionsetManagerAddDialog").subscribe((e=>{e.instance.sysModules=this.sysModules,e.instance.actionsetModule=this.currentModule,e.instance.mode="add",e.instance.edit_mode=this.edit_mode,e.instance.actionsetName="",e.instance.closedialog.subscribe((e=>{if(e){let t=this.modelutilities.generateGuid();this.currentActionSet.actions=[],this.metadata.setActionSet(t,{module:e.module,name:e.name,type:e.type,actions:this.currentActionSet.actions}),this.reset(),this.currentModule=e.module,this.currentActionSet.id=t,this.currentActionSet.module=e.module,this.currentActionSet.name=e.name,this.currentActionSet.type=e.type,this.currentActionSet.actions=[],this.currentActionSet.package="",this.currentActionSet.isnew=!0}}))}))}selectModule(){let e=this.currentActionSet.module;""!=this.actionSetBackup?(this.currentActionSet.module=JSON.parse(this.actionSetBackup).module,JSON.stringify(this.actionSetBackup),this.checkForChangesFunction()?this.modal.confirm("LBL_ALL_CHANGES_WOULD_BE_DELETED.","LBL_ARE_YOU_SURE").subscribe((t=>{t&&(this.deleteChanges(),this.currentActionSet.module=e)})):this.currentActionSet.module=e):this.currentActionSet.module=e}reset(){this.currentActionSet={id:"",module:"",name:"",package:"",type:"",actions:[]},this.selectedItem=null,this.selectedItemID=""}getDisplayName(e){let t=e.action?e.action:e.component;return e.actionconfig.label?t+" ("+this.language.getLabel(e.actionconfig.label)+")":t}isSelected(e){return e==this.selectedItem.id}selectItem(e){this.selectedItemID=e.id;for(let t of this.currentActionSet.actions)t.id==e.id&&(this.selectedItem=t)}drop(e){this.currentActionSet.actions.splice(e.currentIndex,0,this.currentActionSet.actions.splice(e.previousIndex,1)[0]);let t=0;for(let e of this.currentActionSet.actions)e.sequence=t,t++}deleteChanges(){this.currentActionSet.isnew?(this.metadata.removeActionset(this.currentActionSet.id),this.reset(),this.actionSetBackup=""):(this.currentActionSet={...JSON.parse(this.actionSetBackup)},this.metadata.setActionSet(this.currentActionSet.id,this.currentActionSet),this.currentActionSet.actions.length>0&&this.selectItem(this.currentActionSet.actions[0]))}saveChanges(){this.modal.openModal("SystemLoadingModal").subscribe((e=>{let t={},i={};this.currentActionSet.isnew&&(t[this.currentActionSet.id]=this.currentActionSet),this.currentActionSet.isnew||(i[this.currentActionSet.id]=this.currentActionSet);let s={add:t,update:i,delete:{}};this.backend.postRequest("configuration/spiceui/core/actionsets",{},s).subscribe((t=>{t?(this.broadcast.broadcastMessage("metadata.updateactionsets",s),e.instance.self.destroy(),this.toast.sendToast("changes saved"),this.loadCurrentActionset(this.currentActionSet.id)):(e.instance.self.destroy(),this.toast.sendToast(this.language.getLabel("ERR_FAILED_TO_EXECUTE"),"error"))}))}))}copy(){this.modalservice.openModal("ActionsetManagerAddDialog").subscribe((e=>{e.instance.sysModules=this.sysModules,e.instance.actionsetModule=this.currentModule,e.instance.mode="copy",e.instance.edit_mode=this.edit_mode,e.instance.actionsetName=this.currentActionSet.name+" (custom)",e.instance.closedialog.subscribe((e=>{if(e){let t=this.modelutilities.generateGuid(),i=JSON.parse(JSON.stringify(this.currentActionSet.actions));this.metadata.setActionSet(t,{module:e.module,name:e.name,type:e.type,actions:i});for(let e of i)e.id=this.modelutilities.generateGuid();this.reset(),this.currentModule=e.module,this.currentActionSet.id=t,this.currentActionSet.module=e.module,this.currentActionSet.name=e.name,this.currentActionSet.type=e.type,this.currentActionSet.actions=i,this.currentActionSet.isnew=!0,this.view.setEditMode()}}))}))}}return e=ActionsetManager,(0,s.Z)(ActionsetManager,"ɵfac",(function(t){return new(t||e)(u.Y36(h.y),u.Y36(f.Pu),u.Y36(b.d),u.Y36(Z.A),u.Y36(ui.f),u.Y36(v.A),u.Y36(x.o),u.Y36(M.C),u.Y36($i.e),u.Y36(x.o))})),(0,s.Z)(ActionsetManager,"ɵcmp",u.Xpm({type:e,selectors:[["actionset-manager"]],features:[u._Bn([$i.e])],decls:27,vars:12,consts:[["titlelabel","LBL_ACTIONSET_MANAGER"],[1,"slds-p-around--small","slds-border--bottom"],[1,"slds-grid","slds-grid--vertical-align-center","slds-form--inline"],[1,"slds-form-element"],[1,"slds-form-element__label"],["label","LBL_MODULE"],[1,"slds-form-element__control",2,"min-width","250px"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","disabled","ngModelChange","change"],["value","*"],[3,"value",4,"ngFor","ngForOf"],["label","LBL_ACTIONSET"],[3,"label",4,"ngIf"],[1,"slds-form-element","slds-col--bump-left"],["class","slds-button slds-button--brand",3,"disabled","click",4,"ngIf"],["type","button","class","slds-button slds-button_icon slds-button_icon-border-filled",3,"disabled","click",4,"ngIf"],["type","button","class","slds-button slds-button--brand",3,"disabled","click",4,"ngIf"],["class","slds-theme--default",4,"ngIf"],[3,"value"],[3,"label"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_COPY"],["type","button",1,"slds-button","slds-button_icon","slds-button_icon-border-filled",3,"disabled","click"],[3,"icon","size"],["type","button",1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_SAVE"],["label","LBL_CANCEL"],[1,"slds-theme--default"],[1,"slds-p-around--small","slds-border--bottom","slds-theme--default"],[1,"slds-grid","slds-grid--vertical-align-end"],[1,"slds-form-element","slds-p-right--x-small","slds-size--1-of-6"],["label","LBL_SCOPE"],[1,"slds-form-element__control","slds-input-has-icon","slds-input-has-icon_left"],["size","x-small","addclasses","slds-input__icon slds-input__icon_left",3,"icon"],["type","text","disabled","",1,"slds-input",3,"ngModel"],["label","LBL_GROUPED"],[1,"slds-form-element__control"],[1,"slds-select_container","slds-m-vertical--xx-small"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],["value","no"],["label","LBL_NO"],["value","vertical"],["label","LBL_VERTICAL"],["value","horizontal"],["label","LBL_HORIZONTAL"],["label","LBL_NAME"],["type","text",1,"slds-input",3,"disabled","ngModel","ngModelChange"],["label","LBL_PACKAGE"],["label","LBL_VERSION"],["label","LBL_ID"],["system-to-bottom-noscroll","",1,"slds-grid"],["system-to-bottom","",1,"slds-size--3-of-5","slds-p-horizontal--small","slds-p-top--x-small","slds-border--right"],["role","application","cdkDropList","",1,"slds-tree_container","dragboundary",2,"max-width","none",3,"cdkDropListDropped"],["class","slds-p-vertical--xx-small slds-grid slds-grid--align-spread slds-grid--vertical-align-center","cdkDrag","","cdkDragBoundary",".dragboundary",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"slds-p-around--small","slds-align--absolute-center","slds-border--top","slds-m-top--small"],["title","add item",1,"slds-button","slds-button--icon",3,"disabled","click"],[3,"icon"],["system-to-bottom","",1,"slds-size--2-of-5","slds-p-horizontal--small","slds-p-vertical--x-small"],[3,"action"],["cdkDrag","","cdkDragBoundary",".dragboundary",1,"slds-p-vertical--xx-small","slds-grid","slds-grid--align-spread","slds-grid--vertical-align-center",3,"ngClass","click"],["cdkDragHandle","",1,"slds-p-right--xx-small",2,"cursor","move",3,"icon","size"],["href","javascript:void(0);","role","presentation",1,"slds-truncate"],[1,"slds-col--bump-left"],["title","unlink item",1,"slds-button","slds-button--icon",3,"disabled","click"]],template:function(e,t){1&e&&(u._UZ(0,"workbench-header",0),u.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"label",4),u._UZ(5,"system-label",5),u.qZA(),u.TgZ(6,"div",6)(7,"div",7)(8,"select",8),u.NdJ("ngModelChange",(function(e){return t.currentModule=e}))("change",(function(){return t.selectModule()})),u.TgZ(9,"option",9),u._uU(10,"*"),u.qZA(),u.YNc(11,Es,2,2,"option",10),u.qZA()()()(),u.TgZ(12,"div",3)(13,"label",4),u._UZ(14,"system-label",11),u.qZA(),u.TgZ(15,"div",6)(16,"div",7)(17,"select",8),u.NdJ("ngModelChange",(function(e){return t.currentActionSet.id=e}))("change",(function(){return t.selectCurrentActionset()})),u._UZ(18,"option"),u.YNc(19,Os,2,2,"optgroup",12),u.YNc(20,Qs,2,2,"optgroup",12),u.qZA()()()(),u.TgZ(21,"div",13),u.YNc(22,Ss,3,1,"button",14),u.YNc(23,Bs,2,3,"button",15),u.YNc(24,Fs,2,1,"button",16),u.YNc(25,Ys,2,1,"button",16),u.qZA()()(),u.YNc(26,Hs,50,15,"div",17)),2&e&&(u.xp6(8),u.Q6J("ngModel",t.currentModule)("disabled",0==t.sysModules.length),u.xp6(3),u.Q6J("ngForOf",t.sysModules),u.xp6(6),u.Q6J("ngModel",t.currentActionSet.id)("disabled",0==t.getActionSets().length),u.xp6(2),u.Q6J("ngIf",t.getActionSets("custom").length>0),u.xp6(1),u.Q6J("ngIf",t.getActionSets("global").length>0),u.xp6(2),u.Q6J("ngIf",!t.checkForChanges&&""!=t.currentActionSet.id),u.xp6(1),u.Q6J("ngIf",!t.checkForChanges),u.xp6(1),u.Q6J("ngIf",t.checkForChanges&&""!=t.currentActionSet.id),u.xp6(1),u.Q6J("ngIf",t.checkForChanges&&""!=t.currentActionSet.id),u.xp6(1),u.Q6J("ngIf",""!=t.currentActionSet.id))},dependencies:[n.mk,n.sg,n.O5,l.YN,l.Kr,l.Fj,l.EJ,l.JJ,l.On,T.J,ji.$,L._,m.r,w.H,C.t,g.Wj,g.Zt,g.Bh,Us,Xe],encapsulation:2})),ActionsetManager})();function zs(e,t){if(1&e&&(u.TgZ(0,"option",29),u._uU(1),u.qZA()),2&e){const e=t.$implicit;u.Q6J("value",e.module),u.xp6(1),u.hij("",e.module," ")}}function Vs(e,t){1&e&&(u.TgZ(0,"option",30),u._UZ(1,"system-label",31),u.qZA())}let Ps=(()=>{var e;class ActionsetManagerAddDialog{constructor(e,t,i){(0,s.Z)(this,"backend",void 0),(0,s.Z)(this,"metadata",void 0),(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"sysModules",[]),(0,s.Z)(this,"actionsetModule",""),(0,s.Z)(this,"mode",""),(0,s.Z)(this,"edit_mode",""),(0,s.Z)(this,"actionsetName",""),(0,s.Z)(this,"closedialog",new u.vpe),(0,s.Z)(this,"actionsetType","custom"),(0,s.Z)(this,"globalEdit",!1),(0,s.Z)(this,"modalTitle",""),(0,s.Z)(this,"self",void 0),this.backend=e,this.metadata=t,this.language=i}ngOnInit(){"copy"==this.mode?this.modalTitle=this.language.getLabel("LBL_COPY_ACTIONSET"):this.modalTitle=this.language.getLabel("LBL_NEW_ACTIONSET")}closeDialog(){this.self.destroy()}onModalEscX(){this.closeDialog()}add(){this.closedialog.emit({name:this.actionsetName,type:this.actionsetType,module:this.actionsetModule}),this.self.destroy()}}return e=ActionsetManagerAddDialog,(0,s.Z)(ActionsetManagerAddDialog,"ɵfac",(function(t){return new(t||e)(u.Y36(h.y),u.Y36(f.Pu),u.Y36(b.d))})),(0,s.Z)(ActionsetManagerAddDialog,"ɵcmp",u.Xpm({type:e,selectors:[["actionsetmanager-add-dialog"]],inputs:{sysModules:"sysModules",actionsetModule:"actionsetModule",mode:"mode",edit_mode:"edit_mode",actionsetName:"actionsetName"},outputs:{closedialog:"closedialog"},decls:36,vars:10,consts:[["role","dialog","tabindex","-1","aria-labelledby","header43",1,"slds-modal","slds-fade-in-open"],[1,"slds-modal__container"],[1,"slds-modal__header","slds-theme--shade"],["title","Close",1,"slds-button","slds-modal__close","slds-button--icon-inverse",3,"click"],[3,"icon","size"],["id","header43",1,"slds-text-heading--medium"],[1,"slds-modal__content","slds-p-around--medium"],[1,"slds-form-element"],[1,"slds-form-element__label"],["label","LBL_MODULE"],[1,"slds-form-element__control",2,"min-width","250px"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","disabled","ngModelChange"],["value","*"],[3,"value",4,"ngFor","ngForOf"],[1,"slds-form-element","slds-m-top--small"],["label","LBL_ITEM_NAME"],[1,"slds-form-element__control"],["type","text","placeholder","name",1,"slds-input",3,"ngModel","ngModelChange"],["label","LBL_TYPE"],[1,"slds-select",3,"ngModel","ngModelChange"],["value","global",4,"ngIf"],["value","custom"],["label","LBL_CUSTOM"],[1,"slds-modal__footer"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_ADD"],[3,"value"],["value","global"],["label","LBL_GLOBAL"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),u.NdJ("click",(function(){return t.closeDialog()})),u._UZ(4,"system-button-icon",4),u.qZA(),u.TgZ(5,"h2",5),u._uU(6),u.qZA()(),u.TgZ(7,"div",6)(8,"div",7)(9,"label",8),u._UZ(10,"system-label",9),u.qZA(),u.TgZ(11,"div",10)(12,"div",11)(13,"select",12),u.NdJ("ngModelChange",(function(e){return t.actionsetModule=e})),u.TgZ(14,"option",13),u._uU(15,"*"),u.qZA(),u.YNc(16,zs,2,2,"option",14),u.qZA()()()(),u.TgZ(17,"div",15)(18,"label",8),u._UZ(19,"system-label",16),u.qZA(),u.TgZ(20,"div",17)(21,"input",18),u.NdJ("ngModelChange",(function(e){return t.actionsetName=e})),u.qZA()()(),u.TgZ(22,"div",7)(23,"label",8),u._UZ(24,"system-label",19),u.qZA(),u.TgZ(25,"div",17)(26,"div",11)(27,"select",20),u.NdJ("ngModelChange",(function(e){return t.actionsetType=e})),u.YNc(28,Vs,2,0,"option",21),u.TgZ(29,"option",22),u._UZ(30,"system-label",23),u.qZA()()()()()(),u.TgZ(31,"div",24)(32,"button",25),u.NdJ("click",(function(){return t.closeDialog()})),u._UZ(33,"system-label",26),u.qZA(),u.TgZ(34,"button",27),u.NdJ("click",(function(){return t.add()})),u._UZ(35,"system-label",28),u.qZA()()()()),2&e&&(u.xp6(4),u.Q6J("icon","close")("size","large"),u.xp6(2),u.Oqu(t.modalTitle),u.xp6(7),u.Q6J("ngModel",t.actionsetModule)("disabled",0==t.sysModules.length),u.xp6(3),u.Q6J("ngForOf",t.sysModules),u.xp6(5),u.Q6J("ngModel",t.actionsetName),u.xp6(6),u.Q6J("ngModel",t.actionsetType),u.xp6(1),u.Q6J("ngIf","all"==t.edit_mode),u.xp6(6),u.Q6J("disabled",""==t.actionsetName))},dependencies:[n.sg,n.O5,l.YN,l.Kr,l.Fj,l.EJ,l.JJ,l.On,T.J,L._],encapsulation:2})),ActionsetManagerAddDialog})();var $s=i(4021);function js(e,t){if(1&e&&(u.TgZ(0,"option",18),u._uU(1),u.qZA()),2&e){const e=t.$implicit;u.Q6J("value",e.id),u.xp6(1),u.Oqu(e.name)}}function Ws(e,t){if(1&e){const e=u.EpF();u.ynx(0),u.TgZ(1,"button",28),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw().$implicit,i=u.oxw(2);return u.KtG(i.editNode(t))})),u._UZ(2,"system-button-icon",34),u.qZA(),u.TgZ(3,"button",30),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw().$implicit,i=u.oxw(2);return u.KtG(i.deleteNode(t))})),u._UZ(4,"system-button-icon",35),u.qZA(),u.BQk()}}const Xs=function(e){return{"slds-theme--shade":e}},en=function(e){return{opacity:e}},tn=function(e){return{"slds-hidden":e}};function sn(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div",25),u.NdJ("click",(function(){const t=u.CHM(e).$implicit,i=u.oxw().index,s=u.oxw();return u.KtG(s.setSelectedNodeID(i,t.id))})),u.TgZ(1,"div",26),u._uU(2),u.qZA(),u.YNc(3,Ws,5,0,"ng-container",27),u.TgZ(4,"button",28),u.NdJ("click",(function(){const t=u.CHM(e).$implicit;return u.KtG(t.favorite=!t.favorite)})),u._UZ(5,"system-button-icon",29),u.qZA(),u.TgZ(6,"button",30),u.NdJ("click",(function(){const t=u.CHM(e).$implicit;return u.KtG(t.selectable=!t.selectable)})),u._UZ(7,"system-button-icon",31),u.qZA(),u.TgZ(8,"button",32),u.NdJ("click",(function(){const t=u.CHM(e).$implicit,i=u.oxw().index,s=u.oxw();return u.KtG(s.setSelectedNodeID(i,t.id))})),u._UZ(9,"system-button-icon",33),u.qZA()()}if(2&e){const e=t.$implicit,i=u.oxw().$implicit,s=u.oxw();u.Q6J("ngClass",u.VKq(9,Xs,i==e.id)),u.xp6(1),u.Q6J("ngClass",s.getNodeStyle(e)),u.xp6(1),u.AsE("",e.node_name," (",e.node_key,")"),u.xp6(1),u.Q6J("ngIf",i==e.id),u.xp6(2),u.Q6J("ngStyle",u.VKq(11,en,e.favorite?1:.3)),u.xp6(2),u.Q6J("ngStyle",u.VKq(13,en,e.selectable?1:.3))("icon",e.selectable?"linked":"unlinked"),u.xp6(1),u.Q6J("ngClass",u.VKq(15,tn,!s.hasChildren(e.id)))}}const nn=function(e){return{"slds-border--right":e}};function ln(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div",19)(1,"div",20),u.YNc(2,sn,10,17,"div",21),u.qZA(),u.TgZ(3,"div",22)(4,"button",23),u.NdJ("click",(function(){const t=u.CHM(e).index,i=u.oxw();return u.KtG(i.addNode(t))})),u._UZ(5,"system-button-icon",24),u.qZA()()()}if(2&e){const e=t.index,i=u.oxw();u.Q6J("ngClass",u.VKq(3,nn,e<3)),u.xp6(2),u.Q6J("ngForOf",i.getNodes(e)),u.xp6(2),u.Q6J("disabled",!i.addEnabled(e))}}let on=(()=>{var e;class CategoryTreeManager{constructor(e,t,i,n,l,o,a,d){(0,s.Z)(this,"backend",void 0),(0,s.Z)(this,"metadata",void 0),(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"config",void 0),(0,s.Z)(this,"utils",void 0),(0,s.Z)(this,"toast",void 0),(0,s.Z)(this,"modal",void 0),(0,s.Z)(this,"injector",void 0),(0,s.Z)(this,"loading",!1),(0,s.Z)(this,"_activeTree",void 0),(0,s.Z)(this,"activeTreeNodes",[]),(0,s.Z)(this,"activeTreeNodesBackup",void 0),(0,s.Z)(this,"categoryTrees",[]),(0,s.Z)(this,"selectedTreeNodes",[null,null,null,null]),this.backend=e,this.metadata=t,this.language=i,this.config=n,this.utils=l,this.toast=o,this.modal=a,this.injector=d,this.loadTrees()}addTree(){this.modal.openModal("CategoryTreeAddModal",!0,this.injector).subscribe((e=>{e.instance.categoryTrees=this.categoryTrees,e.instance.action.subscribe((t=>{"save"==t&&(this.activeTree=e.instance.newActiveTreeId)}))}))}linkTree(){this.modal.openModal("CategoryTreeManagerLinkModal",!0,this.injector).subscribe((e=>{e.instance.activeTreeId=this.activeTree}))}get activeTree(){return this._activeTree}set activeTree(e){this._activeTree=e,this.loadActiveTree()}hasChildren(e){return this.activeTreeNodes.filter((t=>t.parent_id==e)).length>0}loadTrees(){this.loading=!0,this.config.getData("select_trees")||this.backend.getRequest("configuration/spiceui/core/categorytrees").subscribe((e=>{this.loading=!1,this.categoryTrees=e,this.categoryTrees.length>0&&(this.activeTree=this.categoryTrees[0].id)}),(e=>{this.loading=!1,this.toast.sendToast("Error Loading Data","error")}))}loadActiveTree(){this.loading=!0,this.activeTreeNodes=[],this.selectedTreeNodes=[null,null,null,null],this.backend.getRequest(`configuration/spiceui/core/categorytrees/${this.activeTree}/categorytreenodes`,{all:!0}).subscribe((e=>{this.activeTreeNodes=e,this.activeTreeNodesBackup=JSON.stringify(e),this.loading=!1}),(e=>{this.loading=!1,this.toast.sendToast("Error Loading Data","error")}))}getNodeStyle(e){if("c"==e.node_status)return"slds-text-color_success";let t=new moment;return"i"==e.node_status||t.isBefore(e.valid_from)||t.isAfter(e.valid_to)?"slds-text-color_error":""}setSelectedNodeID(e,t){if(this.selectedTreeNodes[e]!=t)for(this.selectedTreeNodes[e]=t,e++;e<=3;)this.selectedTreeNodes[e]=null,e++}addEnabled(e){return 0===e?!!this.activeTree:!!this.selectedTreeNodes[e-1]}getNodes(e){return 0===e?this.activeTreeNodes.filter((e=>0==e.deleted&&!e.parent_id)).sort(((e,t)=>parseFloat(e.node_key)>parseFloat(t.node_key)?1:-1)):this.selectedTreeNodes[e-1]?this.activeTreeNodes.filter((t=>0==t.deleted&&t.parent_id==this.selectedTreeNodes[e-1])).sort(((e,t)=>parseFloat(e.node_key)>parseFloat(t.node_key)?1:-1)):[]}editNode(e){let t={...e};this.modal.openModal("CategoryTreeManagerNode").subscribe((i=>{i.instance.node=t,i.instance.nodes=this.activeTreeNodes.filter((t=>!e.parent_id&&!t.parent_id||e.parent_id&&t.parent_id==e.parent_id)),i.instance.addParamsComponent=this.categoryTrees.find((e=>e.id==this.activeTree)).add_params_component,i.instance.action.subscribe((i=>{i&&(e.node_name=t.node_name,e.node_description=t.node_description,e.node_key=t.node_key,e.selectable=t.selectable,e.favorite=t.favorite,e.add_params=t.add_params,e.valid_from=t.valid_from,e.valid_to=t.valid_to,e.node_status=t.node_status,e.deleted=0)}))}))}deleteNode(e){this.modal.confirm("MSG_DELETE_NODE","MSG_DELETE_NODE").subscribe((t=>{t&&(e.deleted=1,this.deleteChildren(e))}))}deleteChildren(e){let t=this.activeTreeNodes.filter((t=>t.parent_id==e.id&&0==t.deleted));for(let e of t)e.deleted=1,this.deleteChildren(e)}getNextNumber(e){let t=0,i=this.activeTreeNodes.filter((t=>!e&&!t.parent_id||e&&t.parent_id==e));for(let e of i){let i=parseInt(e.node_key,10);i>t&&(t=i)}return t+1}addNode(e){let t={id:this.utils.generateGuid(),node_name:null,node_description:null,node_key:this.getNextNumber(this.selectedTreeNodes[e-1]),parent_id:0==e?null:this.selectedTreeNodes[e-1],syscategorytree_id:this.activeTree,selectable:!0,node_status:"c",favorite:!1,deleted:0};this.modal.openModal("CategoryTreeManagerNode").subscribe((e=>{e.instance.node=t,e.instance.nodes=this.activeTreeNodes.filter((e=>!t.parent_id&&!e.parent_id||t.parent_id&&e.parent_id==t.parent_id)),e.instance.addParamsComponent=this.categoryTrees.find((e=>e.id==this.activeTree)).add_params_component,e.instance.action.subscribe((e=>{e&&this.activeTreeNodes.push(t)}))}))}get isDirty(){return this.changedNodes.length>0}get changedNodes(){let e=[];if(this.activeTreeNodesBackup){let t=JSON.parse(this.activeTreeNodesBackup);for(let i of this.activeTreeNodes){let s=t.find((e=>e.id==i.id));(!s||s&&!_.isEqual(s,i))&&e.push(i)}}return e}revertChanges(){this.loadActiveTree()}save(){let e=this.changedNodes;e.length>0&&this.backend.postRequest(`configuration/spiceui/core/categorytrees/${this.activeTree}/categorytreenodes`,null,e).subscribe((e=>{this.toast.sendToast("changes saved"),this.activeTreeNodesBackup=JSON.stringify(this.activeTreeNodes)}),(e=>{this.toast.sendAlert("saving failed!","error"),console.error(e)}))}}return e=CategoryTreeManager,(0,s.Z)(CategoryTreeManager,"ɵfac",(function(t){return new(t||e)(u.Y36(h.y),u.Y36(f.Pu),u.Y36(b.d),u.Y36(M.C),u.Y36(Z.A),u.Y36(v.A),u.Y36(x.o),u.Y36(u.zs3))})),(0,s.Z)(CategoryTreeManager,"ɵcmp",u.Xpm({type:e,selectors:[["categgory-tree-manager"]],decls:22,vars:10,consts:[["titlelabel","LBL_CATEGORY_TREES","icon","strategy"],[1,"slds-grid","slds-grid--vertical-align-center"],[1,"slds-form-element__label"],["label","LBL_TREE"],[1,"slds-form-element__control","slds-p-right--small",2,"min-width","280px"],["disabled","true",3,"ngModel","ngModelChange"],[1,"slds-form-element__control","slds-p-right--small",2,"min-width","250px"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","disabled","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"slds-button","slds-button_icon","slds-button_icon-border-filled",3,"disabled","click"],["icon","add"],["icon","link"],["icon","undo"],["icon","save"],["system-to-bottom-noscroll","",1,"slds-p-around--small","slds-theme--default",3,"system-overlay-loading-spinner"],[1,"slds-box--border","slds-grid","slds-height_full"],["style","min-height: 250px","class","slds-size--1-of-4 slds-is-relative slds-p-bottom--x-large",3,"ngClass",4,"ngFor","ngForOf"],[3,"value"],[1,"slds-size--1-of-4","slds-is-relative","slds-p-bottom--x-large",2,"min-height","250px",3,"ngClass"],[1,"slds-scrollable--y",2,"height","calc(100% - 10px)"],["class","slds-m-around--xx-small slds-p-around--xx-small slds-grid",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"slds-p-vertical--small","slds-align--absolute-center"],[1,"slds-button","slds-button--icon",3,"disabled","click"],["icon","new"],[1,"slds-m-around--xx-small","slds-p-around--xx-small","slds-grid",3,"ngClass","click"],[1,"slds-truncate",3,"ngClass"],[4,"ngIf"],[1,"slds-col--bump-left","slds-button","slds-button--icon",3,"click"],["icon","favorite",3,"ngStyle"],[1,"slds-button","slds-button--icon",3,"click"],[3,"ngStyle","icon"],[1,"slds-button","slds-button--icon",3,"ngClass","click"],["icon","chevronright"],["icon","edit"],["icon","delete"]],template:function(e,t){1&e&&(u.TgZ(0,"workbench-header",0)(1,"workbench-header-controls")(2,"div",1)(3,"label",2),u._UZ(4,"system-label",3),u.qZA(),u.TgZ(5,"div",4)(6,"system-input-text",5),u.NdJ("ngModelChange",(function(e){return t.activeTree=e})),u.qZA()(),u.TgZ(7,"div",6)(8,"div",7)(9,"select",8),u.NdJ("ngModelChange",(function(e){return t.activeTree=e})),u.YNc(10,js,2,2,"option",9),u.qZA()()(),u.TgZ(11,"button",10),u.NdJ("click",(function(){return t.addTree()})),u._UZ(12,"system-button-icon",11),u.qZA(),u.TgZ(13,"button",10),u.NdJ("click",(function(){return t.linkTree()})),u._UZ(14,"system-button-icon",12),u.qZA(),u.TgZ(15,"button",10),u.NdJ("click",(function(){return t.revertChanges()})),u._UZ(16,"system-button-icon",13),u.qZA(),u.TgZ(17,"button",10),u.NdJ("click",(function(){return t.save()})),u._UZ(18,"system-button-icon",14),u.qZA()()()(),u.TgZ(19,"div",15)(20,"div",16),u.YNc(21,ln,6,5,"div",17),u.qZA()()),2&e&&(u.xp6(6),u.Q6J("ngModel",t.activeTree),u.xp6(3),u.Q6J("ngModel",t.activeTree)("disabled",0==t.categoryTrees.length||t.isDirty),u.xp6(1),u.Q6J("ngForOf",t.categoryTrees),u.xp6(1),u.Q6J("disabled",t.isDirty),u.xp6(2),u.Q6J("disabled",!t.activeTree),u.xp6(2),u.Q6J("disabled",!t.isDirty),u.xp6(2),u.Q6J("disabled",!t.isDirty),u.xp6(2),u.Q6J("system-overlay-loading-spinner",t.loading),u.xp6(2),u.Q6J("ngForOf",t.selectedTreeNodes))},dependencies:[n.mk,n.sg,n.O5,n.PC,l.YN,l.Kr,l.EJ,l.JJ,l.On,T.J,J.Z,L._,C.t,$s._,Xe,tt],encapsulation:2})),CategoryTreeManager})();var an=i(2995),dn=i(6822);const rn=function(e){return{addParams:e}};function cn(e,t){if(1&e&&(u.TgZ(0,"div"),u._UZ(1,"system-dynamic-component",38),u.qZA()),2&e){const e=u.oxw();u.xp6(1),u.Q6J("component",e.addParamsComponent)("componentattributes",u.VKq(2,rn,e.addParams))}}let gn=(()=>{var e;class CategoryTreeManagerNode{constructor(){(0,s.Z)(this,"self",void 0),(0,s.Z)(this,"node",{}),(0,s.Z)(this,"nodes",[]),(0,s.Z)(this,"addParamsComponent",void 0),(0,s.Z)(this,"addParams",void 0),(0,s.Z)(this,"action",new u.vpe)}get canSave(){let e=new RegExp(/([1-9][0-9]*)|0/);return this.node.node_name&&this.node.node_key&&e.test(this.node.node_key)&&this.keyUnique}get keyUnique(){return this.node.node_key&&0==this.nodes.filter((e=>e.node_key==this.node.node_key&&e.id!=this.node.id)).length}ngOnInit(){this.addParams=this.node.add_params??{},this.node.valid_from=moment(this.node.valid_from),this.node.valid_to=moment(this.node.valid_to)}save(){this.node.add_params=this.addParams,this.node.valid_from=this.node.valid_from.format("YYYY-MM-DD HH:mm:ss"),this.node.valid_to=this.node.valid_to.format("YYYY-MM-DD HH:mm:ss"),this.action.emit(!0),this.self.destroy()}close(){this.action.emit(!1),this.self.destroy()}}return e=CategoryTreeManagerNode,(0,s.Z)(CategoryTreeManagerNode,"ɵfac",(function(t){return new(t||e)})),(0,s.Z)(CategoryTreeManagerNode,"ɵcmp",u.Xpm({type:e,selectors:[["categgory-tree-manager-node"]],decls:65,vars:10,consts:[[3,"close"],["label","LBL_TREE_NODE"],[1,"slds-grid","slds-grid--vertical"],[1,"slds-form-element"],[1,"slds-form-element__label"],["title","required",1,"slds-required"],["label","LBL_NAME"],[1,"slds-form-element__control"],[3,"ngModel","ngModelChange"],[1,"slds-grid"],[1,"slds-form-element","slds-size--1-of-4","slds-p-right--xx-small"],["label","LBL_KEY"],["type","text","required","",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-form-element","slds-size--1-of-4","slds-p-left--xx-small"],["label","LBL_STATUS"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],["value","c"],["label","LBL_STATUS_CREATED"],["value","a"],["label","LBL_STATUS_ACTIVE"],["value","i"],["label","LBL_STATUS_INACTIVE"],["label","LBL_SELECTABLE"],[1,"slds-form-element__control","slds-p-vertical--xx-small"],[1,"slds-form-element","slds-size--1-of-4"],["label","LBL_FAVORITE"],[1,"slds-form-element","slds-size--1-of-2","slds-p-right--xx-small"],["label","LBL_VALID_FROM"],[1,"slds-form-element","slds-size--1-of-2","slds-p-left--xx-small"],["label","LBL_VALID_TO"],["label","LBL_DESCRIPTION"],[1,"slds-textarea",3,"ngModel","ngModelChange"],[4,"ngIf"],[1,"slds-button","slds-button_neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button_brand",3,"disabled","click"],["label","LBL_SAVE"],[3,"component","componentattributes"]],template:function(e,t){1&e&&(u.TgZ(0,"system-modal")(1,"system-modal-header",0),u.NdJ("close",(function(){return t.close()})),u._UZ(2,"system-label",1),u.qZA(),u.TgZ(3,"system-modal-content")(4,"div",2)(5,"div",3)(6,"label",4)(7,"abbr",5),u._uU(8,"* "),u.qZA(),u._UZ(9,"system-label",6),u.qZA(),u.TgZ(10,"div",7)(11,"system-input-label",8),u.NdJ("ngModelChange",(function(e){return t.node.node_name=e})),u.qZA()()(),u.TgZ(12,"div",9)(13,"div",10)(14,"label",4)(15,"abbr",5),u._uU(16,"* "),u.qZA(),u._UZ(17,"system-label",11),u.qZA(),u.TgZ(18,"div",7)(19,"input",12),u.NdJ("ngModelChange",(function(e){return t.node.node_key=e})),u.qZA()()(),u.TgZ(20,"div",13)(21,"label",4)(22,"abbr",5),u._uU(23,"* "),u.qZA(),u._UZ(24,"system-label",14),u.qZA(),u.TgZ(25,"div",15)(26,"select",16),u.NdJ("ngModelChange",(function(e){return t.node.node_status=e})),u.TgZ(27,"option",17),u._UZ(28,"system-label",18),u.qZA(),u.TgZ(29,"option",19),u._UZ(30,"system-label",20),u.qZA(),u.TgZ(31,"option",21),u._UZ(32,"system-label",22),u.qZA()()()(),u.TgZ(33,"div",13)(34,"label",4),u._UZ(35,"system-label",23),u.qZA(),u.TgZ(36,"div",24)(37,"system-checkbox",8),u.NdJ("ngModelChange",(function(e){return t.node.selectable=e})),u.qZA()()(),u.TgZ(38,"div",25)(39,"label",4),u._UZ(40,"system-label",26),u.qZA(),u.TgZ(41,"div",24)(42,"system-checkbox",8),u.NdJ("ngModelChange",(function(e){return t.node.favorite=e})),u.qZA()()()(),u.TgZ(43,"div",9)(44,"div",27)(45,"label",4),u._UZ(46,"system-label",28),u.qZA(),u.TgZ(47,"div",7)(48,"system-input-date",8),u.NdJ("ngModelChange",(function(e){return t.node.valid_from=e})),u.qZA()()(),u.TgZ(49,"div",29)(50,"label",4),u._UZ(51,"system-label",30),u.qZA(),u.TgZ(52,"div",7)(53,"system-input-date",8),u.NdJ("ngModelChange",(function(e){return t.node.valid_to=e})),u.qZA()()()(),u.TgZ(54,"div")(55,"label",4),u._UZ(56,"system-label",31),u.qZA(),u.TgZ(57,"div",7)(58,"textarea",32),u.NdJ("ngModelChange",(function(e){return t.node.node_description=e})),u.qZA()()()(),u.YNc(59,cn,2,4,"div",33),u.qZA(),u.TgZ(60,"system-modal-footer")(61,"button",34),u.NdJ("click",(function(){return t.close()})),u._UZ(62,"system-label",35),u.qZA(),u.TgZ(63,"button",36),u.NdJ("click",(function(){return t.save()})),u._UZ(64,"system-label",37),u.qZA()()()),2&e&&(u.xp6(11),u.Q6J("ngModel",t.node.node_name),u.xp6(8),u.Q6J("ngModel",t.node.node_key),u.xp6(7),u.Q6J("ngModel",t.node.node_status),u.xp6(11),u.Q6J("ngModel",t.node.selectable),u.xp6(5),u.Q6J("ngModel",t.node.favorite),u.xp6(6),u.Q6J("ngModel",t.node.valid_from),u.xp6(5),u.Q6J("ngModel",t.node.valid_to),u.xp6(5),u.Q6J("ngModel",t.node.node_description),u.xp6(1),u.Q6J("ngIf",t.addParamsComponent),u.xp6(4),u.Q6J("disabled",!t.canSave))},dependencies:[n.O5,l.YN,l.Kr,l.Fj,l.EJ,l.JJ,l.Q7,l.On,Q.U,an.T,dn.z,S.$,L._,nt.j,lt.x,ot.p,at.y],encapsulation:2})),CategoryTreeManagerNode})();function un(e,t){if(1&e&&(u.TgZ(0,"option",21),u._uU(1),u.qZA()),2&e){const e=t.$implicit;u.Q6J("value",e.component),u.xp6(1),u.Oqu(e.component)}}let mn=(()=>{var e;class CategoryTreeAddModal{constructor(e,t,i,n,l,o,a){(0,s.Z)(this,"metadata",void 0),(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"backend",void 0),(0,s.Z)(this,"utils",void 0),(0,s.Z)(this,"toast",void 0),(0,s.Z)(this,"modal",void 0),(0,s.Z)(this,"broadcast",void 0),(0,s.Z)(this,"self",void 0),(0,s.Z)(this,"name",void 0),(0,s.Z)(this,"componentconfig",{}),(0,s.Z)(this,"components",[]),(0,s.Z)(this,"selectedComponent",void 0),(0,s.Z)(this,"categoryTrees",[]),(0,s.Z)(this,"newActiveTreeId",void 0),(0,s.Z)(this,"action",new u.vpe),this.metadata=e,this.language=t,this.backend=i,this.utils=n,this.toast=l,this.modal=o,this.broadcast=a}ngOnInit(){this.componentconfig=this.metadata.getComponentConfig("CategoryTreeAddModal"),this.getComponentsList()}getComponentsList(){this.components=this.metadata.getComponentSetObjects(this.componentconfig.componentset)}close(){this.self.destroy()}get disabled(){if(!this.name)return!0}get value(){return this.selectedComponent}set value(e){this.selectedComponent=e}save(){const e=this.modal.await("LBL_SAVING_DATA");this.newActiveTreeId=this.utils.generateGuid(),this.backend.postRequest(`configuration/spiceui/core/categorytrees/${this.newActiveTreeId}`,{},{id:this.newActiveTreeId,name:this.name,add_params_component:this.selectedComponent}).subscribe({next:()=>{let t={id:this.newActiveTreeId,name:this.name,add_params_component:this.selectedComponent};this.categoryTrees.push(t),this.action.emit("save"),e.emit(!0),this.close(),this.toast.sendToast("LBL_CATEGORYTREE_SAVED","success")},error:()=>{e.emit(!0),this.toast.sendToast("LBL_SAVING_ERROR","error")}})}}return e=CategoryTreeAddModal,(0,s.Z)(CategoryTreeAddModal,"ɵfac",(function(t){return new(t||e)(u.Y36(f.Pu),u.Y36(b.d),u.Y36(h.y),u.Y36(Z.A),u.Y36(v.A),u.Y36(x.o),u.Y36(ui.f))})),(0,s.Z)(CategoryTreeAddModal,"ɵcmp",u.Xpm({type:e,selectors:[["category-tree-add-modal"]],decls:25,vars:5,consts:[[3,"close"],["label","MSG_ENTER_TREE_NAME"],["margin","medium"],[1,"slds-grid","slds-grid--vertical","slds-p-top--medium","slds-p-bottom--medium"],[1,"slds-grid"],[1,"slds-form-element","slds-size--1-of-2","slds-p-right--xx-small"],[1,"slds-form-element__label"],[1,"slds-required"],["label","LBL_NAME"],[3,"ngModel","ngModelChange"],[1,"slds-form-element","slds-size--1-of-2","slds-p-left--xx-small"],["label","LBL_SELECT_COMPONENT"],[1,"slds-select_container"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"slds-text-align--right","slds-p-vertical--x-small"],["type","button",1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],["type","button",1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_SAVE"],[3,"value"]],template:function(e,t){1&e&&(u.TgZ(0,"system-modal")(1,"system-modal-header",0),u.NdJ("close",(function(){return t.close()})),u._UZ(2,"system-label",1),u.qZA(),u.TgZ(3,"system-modal-content",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"label",6)(8,"abbr",7),u._uU(9,"* "),u.qZA(),u._UZ(10,"system-label",8),u.qZA(),u.TgZ(11,"system-input-text",9),u.NdJ("ngModelChange",(function(e){return t.name=e})),u.qZA()(),u.TgZ(12,"div",10)(13,"label",6),u._UZ(14,"system-label",11),u.qZA(),u.TgZ(15,"div",12)(16,"select",13),u.NdJ("ngModelChange",(function(e){return t.value=e})),u._UZ(17,"option",14),u.YNc(18,un,2,2,"option",15),u.qZA()()()()()(),u.TgZ(19,"system-modal-footer")(20,"div",16)(21,"button",17),u.NdJ("click",(function(){return t.close()})),u._UZ(22,"system-label",18),u.qZA(),u.TgZ(23,"button",19),u.NdJ("click",(function(){return t.save()})),u._UZ(24,"system-label",20),u.qZA()()()()),2&e&&(u.xp6(11),u.Q6J("ngModel",t.name),u.xp6(5),u.Q6J("disabled",0==t.components.length)("ngModel",t.value),u.xp6(2),u.Q6J("ngForOf",t.components),u.xp6(5),u.Q6J("disabled",t.disabled))},dependencies:[n.sg,l.YN,l.Kr,l.EJ,l.JJ,l.On,J.Z,L._,nt.j,lt.x,ot.p,at.y],encapsulation:2})),CategoryTreeAddModal})();var pn=i(7579);let hn=(()=>{var e;class ComponentsetManagerComponentsetDetails{constructor(e,t){(0,s.Z)(this,"view",void 0),(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"component",{}),(0,s.Z)(this,"configcomponent",""),(0,s.Z)(this,"configValues",{}),(0,s.Z)(this,"selectedComponent",{}),this.view=e,this.language=t}ngOnChanges(e){this.component.component&&(this.selectComponent(this.component),this.configcomponent=this.component.component,this.configValues=this.component.componentconfig)}selectComponent(e){e.id?this.selectedComponent=e:this.selectedComponent={}}}return e=ComponentsetManagerComponentsetDetails,(0,s.Z)(ComponentsetManagerComponentsetDetails,"ɵfac",(function(t){return new(t||e)(u.Y36($i.e),u.Y36(b.d))})),(0,s.Z)(ComponentsetManagerComponentsetDetails,"ɵcmp",u.Xpm({type:e,selectors:[["componentsetmanager-componentset-details"]],inputs:{component:"component"},features:[u.TTD],decls:12,vars:5,consts:[[1,"slds-grid"],[1,"slds-form-element","slds-size_2-of-3"],[1,"slds-form-element__label"],["label","LBL_COMPONENT"],[1,"slds-form-element__control"],["disabled","","type","text",1,"slds-input",3,"ngModel"],[1,"slds-form-element","slds-size_1-of-3","slds-p-left_x-small"],["label","LBL_PACKAGE"],["type","text",1,"slds-input",3,"disabled","ngModel","ngModelChange"],[3,"component","configValues"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0)(1,"div",1)(2,"label",2),u._UZ(3,"system-label",3),u.qZA(),u.TgZ(4,"div",4),u._UZ(5,"input",5),u.qZA()(),u.TgZ(6,"div",6)(7,"label",2),u._UZ(8,"system-label",7),u.qZA(),u.TgZ(9,"div",4)(10,"input",8),u.NdJ("ngModelChange",(function(e){return t.component.package=e})),u.qZA()()()(),u._UZ(11,"workbench-config",9)),2&e&&(u.xp6(5),u.Q6J("ngModel",t.component.component),u.xp6(5),u.Q6J("disabled",!t.view.isEditMode())("ngModel",t.component.package),u.xp6(1),u.Q6J("component",t.configcomponent)("configValues",t.configValues))},dependencies:[l.Fj,l.JJ,l.On,L._,es],encapsulation:2})),ComponentsetManagerComponentsetDetails})();function fn(e,t){if(1&e&&(u.TgZ(0,"option",20),u._uU(1),u.qZA()),2&e){const e=t.$implicit;u.Q6J("value",e),u.xp6(1),u.hij("",e," ")}}function bn(e,t){if(1&e&&(u.TgZ(0,"option",23),u._uU(1),u.qZA()),2&e){const e=t.$implicit;u.Q6J("ngValue",e.id),u.xp6(1),u.hij(" ",e.name," ")}}function Zn(e,t){if(1&e&&(u.TgZ(0,"optgroup",21),u.YNc(1,bn,2,2,"option",22),u.qZA()),2&e){const e=u.oxw();u.xp6(1),u.Q6J("ngForOf",e.getComponentSets("custom"))}}function _n(e,t){if(1&e&&(u.TgZ(0,"option",23),u._uU(1),u.qZA()),2&e){const e=t.$implicit;u.Q6J("ngValue",e.id),u.xp6(1),u.hij(" ",e.name," ")}}function yn(e,t){if(1&e&&(u.TgZ(0,"optgroup",24),u.YNc(1,_n,2,2,"option",22),u.qZA()),2&e){const e=u.oxw();u.xp6(1),u.Q6J("ngForOf",e.getComponentSets("global"))}}function vn(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"button",17),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw();return u.KtG(t.duplicateComponentset())})),u._UZ(1,"system-utility-icon",25),u.qZA()}if(2&e){const e=u.oxw();u.Q6J("disabled",!e.allowBarButtons||!e.currentComponentSet)}}function xn(e,t){if(1&e&&(u.TgZ(0,"a",56),u._uU(1),u.qZA()),2&e){const e=u.oxw().$implicit,t=u.oxw(2);u.xp6(1),u.AsE(" ",e.component," ",t.getComponentSetItemName(e)," ")}}function Mn(e,t){if(1&e&&(u.TgZ(0,"div",57)(1,"a",56),u._UZ(2,"system-icon",58),u.TgZ(3,"del",59),u._uU(4),u.qZA()()()),2&e){const e=u.oxw().$implicit,t=u.oxw(2);u.xp6(2),u.Q6J("icon","warning")("sprite","utility")("size","x-small")("addclasses","slds-m-vertical--xxx-small slds-m-horizontal--xx-small"),u.xp6(2),u.AsE("",e.component," ",t.getComponentSetItemName(e),"")}}const An=function(e){return{"slds-theme--shade":e}};function Tn(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div",50),u.NdJ("click",(function(){const t=u.CHM(e).$implicit,i=u.oxw(2);return u.KtG(i.selectItem(t))})),u._UZ(1,"system-utility-icon",51),u.YNc(2,xn,2,2,"a",52),u.YNc(3,Mn,5,6,"div",53),u.TgZ(4,"div",54)(5,"button",55),u.NdJ("click",(function(){const t=u.CHM(e).$implicit,i=u.oxw(2);return u.KtG(i.deleteComponent(t))})),u._UZ(6,"system-button-icon",44),u.qZA()()()}if(2&e){const e=t.$implicit,i=u.oxw(2);u.Q6J("ngClass",u.VKq(7,An,i.isSelected(e.id))),u.xp6(1),u.Q6J("icon","rows")("size","x-small"),u.xp6(1),u.Q6J("ngIf",!i.componentDeprecated(e)),u.xp6(1),u.Q6J("ngIf",i.componentDeprecated(e)),u.xp6(2),u.Q6J("disabled",!i.view.isEditMode()),u.xp6(1),u.Q6J("icon","delete")}}function Ln(e,t){if(1&e&&u._UZ(0,"componentsetmanager-componentset-details",60),2&e){const e=u.oxw(2);u.Q6J("component",e.selectedComponent)}}function qn(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div",26)(1,"div",27)(2,"div",28)(3,"div",29)(4,"label",4),u._UZ(5,"system-label",30),u.qZA(),u.TgZ(6,"div",31),u._UZ(7,"system-utility-icon",32)(8,"input",33),u.qZA()(),u.TgZ(9,"div",29)(10,"label",4),u._UZ(11,"system-label",34),u.qZA(),u.TgZ(12,"div",6)(13,"input",35),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw();return u.KtG(i.currentComponentSetName=t)})),u.qZA()()(),u.TgZ(14,"div",29)(15,"label",4),u._UZ(16,"system-label",36),u.qZA(),u.TgZ(17,"div",6)(18,"input",35),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw();return u.KtG(i.currentComponentSetPackage=t)})),u.qZA()()(),u.TgZ(19,"div",29)(20,"label",4),u._UZ(21,"system-label",37),u.qZA(),u.TgZ(22,"div",6),u._UZ(23,"input",33),u.qZA()()()(),u.TgZ(24,"div",38)(25,"div",39)(26,"div",40),u.NdJ("cdkDropListDropped",(function(t){u.CHM(e);const i=u.oxw();return u.KtG(i.drop(t))})),u.YNc(27,Tn,7,9,"div",41),u.qZA(),u.TgZ(28,"div",42)(29,"button",43),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw();return u.KtG(t.addComponent())})),u._UZ(30,"system-button-icon",44),u.qZA()()(),u.TgZ(31,"div",45),u.YNc(32,Ln,1,1,"componentsetmanager-componentset-details",46),u.qZA()(),u.TgZ(33,"div",47)(34,"button",48),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw();return u.KtG(t.saveChanges())})),u._UZ(35,"system-label",49),u.qZA()()()}if(2&e){const e=u.oxw();u.xp6(7),u.Q6J("icon","global"==e.componentSetType?"world":"user"),u.xp6(1),u.Q6J("ngModel",e.componentSetType),u.xp6(5),u.Q6J("disabled",!e.view.isEditMode())("ngModel",e.currentComponentSetName),u.xp6(5),u.Q6J("disabled",!e.view.isEditMode())("ngModel",e.currentComponentSetPackage),u.xp6(5),u.Q6J("ngModel",e.currentComponentSet),u.xp6(4),u.Q6J("ngForOf",e.getComponentSetItems()),u.xp6(2),u.Q6J("disabled",!e.view.isEditMode()),u.xp6(1),u.Q6J("icon","new"),u.xp6(2),u.Q6J("ngIf",e.selectedId),u.xp6(2),u.Q6J("disabled",!e.view.isEditMode())}}let Cn=(()=>{var e;class ComponentsetManager{constructor(e,t,i,n,l,o,a,d,r){(0,s.Z)(this,"backend",void 0),(0,s.Z)(this,"metadata",void 0),(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"modelutilities",void 0),(0,s.Z)(this,"broadcast",void 0),(0,s.Z)(this,"toast",void 0),(0,s.Z)(this,"modalservice",void 0),(0,s.Z)(this,"view",void 0),(0,s.Z)(this,"configurationService",void 0),(0,s.Z)(this,"edit_mode","custom"),(0,s.Z)(this,"allowBarButtons",!0),(0,s.Z)(this,"change_request_required",!1),(0,s.Z)(this,"modules",[]),(0,s.Z)(this,"currentModule","*"),(0,s.Z)(this,"currentComponentSet",""),(0,s.Z)(this,"currentComponentSetItems",[]),(0,s.Z)(this,"selectedId",""),(0,s.Z)(this,"selectedComponent",{}),(0,s.Z)(this,"showAddDialog",!1),(0,s.Z)(this,"showComponentsetDetails",!1),this.backend=e,this.metadata=t,this.language=i,this.modelutilities=n,this.broadcast=l,this.toast=o,this.modalservice=a,this.view=d,this.configurationService=r,this.modules=this.metadata.getModules(),this.modules.sort(),this.checkMode()}checkMode(){this.edit_mode=this.configurationService.getCapabilityConfig("core").edit_mode,this.change_request_required=!!this.configurationService.getCapabilityConfig("systemdeployment").change_request_required,"none"!=this.edit_mode&&"custom"!=this.edit_mode&&"all"!=this.edit_mode&&(this.edit_mode="custom"),this.change_request_required?this.backend.getRequest("module/SystemDeploymentCRs/active").subscribe((e=>{""==e.id?(this.setNoneMode(),this.toast.sendToast(this.language.getLabel("LBL_ACTIVATE_CR_WARNING"),"warning",null,3)):"all"==this.edit_mode?this.setAllMode():"custom"==this.edit_mode?this.setCustomMode():this.setNoneMode()})):"all"==this.edit_mode?this.setAllMode():"custom"==this.edit_mode?this.setCustomMode():this.setNoneMode()}setNoneMode(){this.view.setViewMode(),this.allowBarButtons=!1}setCustomMode(){"custom"==this.componentSetType?this.view.setEditMode():this.view.setViewMode()}setAllMode(){this.view.setEditMode()}get showDetailIcon(){return this.showComponentsetDetails?"chevronup":"chevrondown"}toggleDetail(){this.showComponentsetDetails=!this.showComponentsetDetails}get componentSetType(){return this.currentComponentSet?this.metadata.getComponentSet(this.currentComponentSet).type:""}get currentComponentSetPackage(){return this.metadata.getComponentSet(this.currentComponentSet).package}set currentComponentSetPackage(e){this.metadata.getComponentSet(this.currentComponentSet).package=e}get currentComponentSetName(){return this.metadata.getComponentSet(this.currentComponentSet).name}set currentComponentSetName(e){this.metadata.getComponentSet(this.currentComponentSet).name=e}componentDeprecated(e){if(!e||e&&!e.component)return!1;return"1"==this.metadata.getSystemComponents(e.module).find((t=>t.component===e.component)).deprecated}getComponentSetItemName(e){return e.componentconfig.name?`(${this.language.getLabel(e.componentconfig.name)})`:e.componentconfig.object?`(${this.language.getModuleName(e.componentconfig.object)})`:void 0}getComponentSets(e){if(e){let t=[],i=this.metadata.getComponentSets(this.currentModule);for(let s of i)s.type==e&&t.push(s);return t}return this.metadata.getComponentSets(this.currentModule)}getComponentSetItems(){return this.currentComponentSet?this.metadata.getComponentSetObjects(this.currentComponentSet):[]}selectItem(e){this.selectedId=e.id,this.selectedComponent=e}isSelected(e){return e==this.selectedId}getComponentsetConfig(){if(this.selectedComponent.componentconfig)return JSON.stringify(this.selectedComponent.componentconfig)}reset(){this.selectedId="",this.selectedComponent={},this.currentComponentSet=""}selectComponentSet(){this.checkMode(),this.selectedId="",this.selectedComponent={}}addComponent(){this.showAddDialog=!0,this.modalservice.openModal("ComponentsetManagerAddDialog").subscribe((e=>{e.instance.module=this.currentModule,e.instance.parent=this.currentComponentSet}))}addComponentset(){this.editComponentset()}duplicateComponentset(){let e=this.currentComponentSet;this.editComponentset(!0).subscribe({next:t=>{let i=this.metadata.getComponentSetObjects(e);for(let e of i)this.metadata.addComponentToComponentset(this.modelutilities.generateGuid(),t.id,e.component,e.componentconfig);this.saveChanges()}})}editComponentset(e=!1){let t=new pn.x;return this.modalservice.openModal("ComponentsetManagerEditDialog").subscribe((i=>{i.instance.componentset=this.currentComponentSet,i.instance.edit_mode=this.edit_mode,i.instance.showModuleField=e,i.instance.module=this.currentModule,i.instance.closedialog.subscribe((i=>{if(!1!==i)if(this.reset(),""===this.currentComponentSet){let s=this.modelutilities.generateGuid();e&&(this.currentModule=i.module),this.metadata.addComponentSet(s,this.currentModule,i.name,i.type),this.currentComponentSet=s,this.checkMode(),t.next({id:s,type:i.type})}else{this.metadata.getComponentSet(this.currentComponentSet).name=i.name}t.complete()}))})),t.asObservable()}deleteComponent(e){let t=this.metadata.getComponentSetObjects(this.currentComponentSet);t.splice(t.findIndex((t=>t.id==e.id)),1)}drop(e){let t=this.metadata.getComponentSetObjects(this.currentComponentSet);t.splice(e.currentIndex,0,t.splice(e.previousIndex,1)[0]);let i=0;for(let e of t)e.sequence=i,i++}saveChanges(){this.backend.getRequest("configuration/spiceui/core/components").subscribe((e=>{let t=this.metadata.getRawComponentSets(),i={},s={},n={};for(let n in t)e.componentsets[n]?(JSON.stringify(t[n])!==JSON.stringify(e.componentsets[n])&&(s[n]=t[n]),delete e.componentsets[n]):i[n]=t[n];n=e.componentsets;let l={add:i,update:s,delete:n};this.backend.postRequest("configuration/spiceui/core/componentsets",{},l).subscribe((e=>{this.broadcast.broadcastMessage("metadata.updatecomponentsets",l),this.toast.sendToast("changes saved")}))}))}}return e=ComponentsetManager,(0,s.Z)(ComponentsetManager,"ɵfac",(function(t){return new(t||e)(u.Y36(h.y),u.Y36(f.Pu),u.Y36(b.d),u.Y36(Z.A),u.Y36(ui.f),u.Y36(v.A),u.Y36(x.o),u.Y36($i.e),u.Y36(M.C))})),(0,s.Z)(ComponentsetManager,"ɵcmp",u.Xpm({type:e,selectors:[["componentset-manager"]],features:[u._Bn([$i.e])],decls:26,vars:12,consts:[["titlelabel","LBL_COMPONENTSETSET_MANAGER"],[1,"slds-p-around--small","slds-border--bottom"],[1,"slds-grid","slds-grid--vertical-align-center","slds-form--inline"],[1,"slds-form-element"],[1,"slds-form-element__label"],["label","LBL_MODULE"],[1,"slds-form-element__control"],[1,"slds-select_container",2,"min-width","250px"],[1,"slds-select",3,"ngModel","disabled","ngModelChange","change"],["value","*"],[3,"value",4,"ngFor","ngForOf"],[1,"slds-form-element__control",2,"min-width","250px"],[1,"slds-select_container"],["label","custom Componentsets",4,"ngIf"],["label","global Componentsets",4,"ngIf"],[1,"slds-button-group","slds-col--bump-left"],["type","button","class","slds-button slds-button_icon slds-button_icon-border-filled",3,"disabled","click",4,"ngIf"],["type","button",1,"slds-button","slds-button_icon","slds-button_icon-border-filled",3,"disabled","click"],[3,"icon","size"],["class","slds-theme--default",4,"ngIf"],[3,"value"],["label","custom Componentsets"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"],["label","global Componentsets"],["icon","copy","size","x-small"],[1,"slds-theme--default"],[1,"slds-p-around--small","slds-border--bottom","slds-theme--default"],[1,"slds-grid","slds-grid--vertical-align-end"],[1,"slds-form-element","slds-p-right--x-small","slds-size--1-of-4"],["label","LBL_SCOPE"],[1,"slds-form-element__control","slds-input-has-icon","slds-input-has-icon_left"],["addclasses","slds-icon slds-input__icon slds-input__icon_left slds-icon-text-default",3,"icon"],["type","text","disabled","",1,"slds-input",3,"ngModel"],["label","LBL_NAME"],["type","text",1,"slds-input",3,"disabled","ngModel","ngModelChange"],["label","LBL_PACKAGE"],["label","LBL_ID"],[1,"slds-grid"],[1,"slds-size--2-of-5","slds-p-horizontal--small","slds-p-top--x-small","slds-border--right"],["role","application","cdkDropList","",1,"dragboundary",2,"max-width","none",3,"cdkDropListDropped"],["class","slds-p-vertical--xx-small slds-grid slds-grid--align-spread slds-grid--vertical-align-center","cdkDrag","","cdkDragBoundary",".dragboundary",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"slds-p-around--small","slds-align--absolute-center","slds-border--top","slds-m-top--small"],["title","add item",1,"slds-button","slds-button--icon",3,"disabled","click"],[3,"icon"],[1,"slds-size--3-of-5","slds-p-horizontal--small","slds-p-vertical--x-small"],[3,"component",4,"ngIf"],[1,"slds-text-align--right","slds-p-around--small","slds-border--top"],["type","button",1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_SAVE"],["cdkDrag","","cdkDragBoundary",".dragboundary",1,"slds-p-vertical--xx-small","slds-grid","slds-grid--align-spread","slds-grid--vertical-align-center",3,"ngClass","click"],["cdkDragHandle","",1,"slds-p-right--xx-small",2,"cursor","move",3,"icon","size"],["href","javascript:void(0);","role","presentation","class","slds-truncate",4,"ngIf"],["class","slds-clearfix",4,"ngIf"],[1,"slds-col--bump-left"],["title","unlink item",1,"slds-button","slds-button--icon",3,"disabled","click"],["href","javascript:void(0);","role","presentation",1,"slds-truncate"],[1,"slds-clearfix"],[1,"slds-float_left",3,"icon","sprite","size","addclasses"],[1,"slds-float_left"],[3,"component"]],template:function(e,t){1&e&&(u._UZ(0,"workbench-header",0),u.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"label",4),u._UZ(5,"system-label",5),u.qZA(),u.TgZ(6,"div",6)(7,"div",7)(8,"select",8),u.NdJ("ngModelChange",(function(e){return t.currentModule=e}))("change",(function(){return t.reset()})),u.TgZ(9,"option",9),u._uU(10,"*"),u.qZA(),u.YNc(11,fn,2,2,"option",10),u.qZA()()()(),u.TgZ(12,"div",3)(13,"label",4),u._uU(14,"Componentset"),u.qZA(),u.TgZ(15,"div",11)(16,"div",12)(17,"select",8),u.NdJ("ngModelChange",(function(e){return t.currentComponentSet=e}))("change",(function(){return t.selectComponentSet()})),u._UZ(18,"option"),u.YNc(19,Zn,2,1,"optgroup",13),u.YNc(20,yn,2,1,"optgroup",14),u.qZA()()()(),u.TgZ(21,"div",15),u.YNc(22,vn,2,1,"button",16),u.TgZ(23,"button",17),u.NdJ("click",(function(){return t.addComponentset()})),u._UZ(24,"system-utility-icon",18),u.qZA()()()(),u.YNc(25,qn,36,12,"div",19)),2&e&&(u.xp6(8),u.Q6J("ngModel",t.currentModule)("disabled",0==t.modules.length),u.xp6(3),u.Q6J("ngForOf",t.modules),u.xp6(6),u.Q6J("ngModel",t.currentComponentSet)("disabled",0==t.getComponentSets().length),u.xp6(2),u.Q6J("ngIf",t.getComponentSets("custom").length>0),u.xp6(1),u.Q6J("ngIf",t.getComponentSets("global").length>0),u.xp6(2),u.Q6J("ngIf",t.currentComponentSet),u.xp6(1),u.Q6J("disabled",!t.allowBarButtons),u.xp6(1),u.Q6J("icon","add")("size","x-small"),u.xp6(1),u.Q6J("ngIf",t.currentComponentSet))},dependencies:[n.mk,n.sg,n.O5,l.YN,l.Kr,l.Fj,l.EJ,l.JJ,l.On,T.J,$e.f,L._,m.r,g.Wj,g.Zt,g.Bh,hn,Xe],encapsulation:2})),ComponentsetManager})();function Jn(e,t){if(1&e&&(u.TgZ(0,"option",20),u._uU(1),u.qZA()),2&e){const e=t.$implicit;u.Q6J("value",e.id),u.xp6(1),u.Oqu(e.module)}}function Nn(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"option",21),u.NdJ("dblclick",(function(){u.CHM(e);const t=u.oxw();return u.KtG(t.add())})),u._uU(1),u.qZA()}if(2&e){const e=t.$implicit,i=u.oxw();u.Q6J("value",e.component),u.xp6(1),u.Oqu(i.componentName(e))}}function kn(e,t){1&e&&(u.TgZ(0,"div",22)(1,"span",23),u._uU(2,"warning"),u.qZA(),u.TgZ(3,"span",24),u.O4$(),u.TgZ(4,"svg",25),u._UZ(5,"use",26),u.qZA()(),u.kcU(),u.TgZ(6,"h2"),u._UZ(7,"system-label",27),u.qZA()())}let wn=(()=>{var e;class ComponentsetManagerAddDialog{constructor(e,t,i,n){(0,s.Z)(this,"backend",void 0),(0,s.Z)(this,"metadata",void 0),(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"modelutilities",void 0),(0,s.Z)(this,"module",""),(0,s.Z)(this,"parent",""),(0,s.Z)(this,"component",""),(0,s.Z)(this,"systemmodule",""),(0,s.Z)(this,"systemmodules",[]),(0,s.Z)(this,"showDeprecatedWarning",!1),(0,s.Z)(this,"self",void 0),(0,s.Z)(this,"moduleFilter",void 0),(0,s.Z)(this,"componentFilter",void 0),this.backend=e,this.metadata=t,this.language=i,this.modelutilities=n,this.systemmodules=this.metadata.getSystemModules()}get components(){return this.componentFilter?this.metadata.getSystemComponents(this.systemmodule).filter((e=>e.component.toLowerCase().indexOf(this.componentFilter.toLowerCase())>=0)):this.metadata.getSystemComponents(this.systemmodule)}get filteredmodules(){return this.moduleFilter?this.systemmodules.filter((e=>e.module.toLowerCase().indexOf(this.moduleFilter.toLowerCase())>=0)):this.systemmodules}componentName(e){return e?"1"==e.deprecated?e.component+" | dep.":e.component:""}cancelDialog(){this.self.destroy()}onModalEscX(){this.cancelDialog()}add(){this.metadata.addComponentToComponentset(this.modelutilities.generateGuid(),this.parent,this.component),this.self.destroy()}checkDep(e){"1"==this.components.find((t=>t.component===e)).deprecated?this.showDeprecatedWarning=!0:this.showDeprecatedWarning=!1}}return e=ComponentsetManagerAddDialog,(0,s.Z)(ComponentsetManagerAddDialog,"ɵfac",(function(t){return new(t||e)(u.Y36(h.y),u.Y36(f.Pu),u.Y36(b.d),u.Y36(Z.A))})),(0,s.Z)(ComponentsetManagerAddDialog,"ɵcmp",u.Xpm({type:e,selectors:[["componensetmanager-add-dialog"]],inputs:{module:"module",parent:"parent"},decls:27,vars:8,consts:[["size","medium"],[3,"close"],["label","LBL_ADD_COMPONENT"],[1,"slds-grid"],[1,"slds-form-element","slds-size--1-of-2","slds-p-right--xx-small"],[1,"slds-form-element__label"],["label","LBL_MODULE"],[1,"slds-input","slds-m-bottom--small",3,"ngModel","ngModelChange"],[1,"slds-form-element__control"],[1,"slds-select_container"],["size","20",1,"slds-select",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"slds-form-element","slds-size--1-of-2","slds-p-left--xx-small"],["label","LBL_COMPONENT"],[3,"value","dblclick",4,"ngFor","ngForOf"],["class","slds-notify slds-notify_alert slds-theme_alert-texture slds-theme_warning","role","alert",4,"ngIf"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_ADD"],[3,"value"],[3,"value","dblclick"],["role","alert",1,"slds-notify","slds-notify_alert","slds-theme_alert-texture","slds-theme_warning"],[1,"slds-assistive-text"],["title","Description of icon when needed",1,"slds-icon_container","slds-icon-utility-warning","slds-m-right_x-small"],["aria-hidden","true",1,"slds-icon","slds-icon_x-small"],[0,"xlink","href","/assets/icons/utility-sprite/svg/symbols.svg#warning"],["label","LBL_DEPRECATED_MSG"]],template:function(e,t){1&e&&(u.TgZ(0,"system-modal",0)(1,"system-modal-header",1),u.NdJ("close",(function(){return t.cancelDialog()})),u._UZ(2,"system-label",2),u.qZA(),u.TgZ(3,"system-modal-content")(4,"div",3)(5,"div",4)(6,"label",5),u._UZ(7,"system-label",6),u.qZA(),u.TgZ(8,"input",7),u.NdJ("ngModelChange",(function(e){return t.moduleFilter=e})),u.qZA(),u.TgZ(9,"div",8)(10,"div",9)(11,"select",10),u.NdJ("ngModelChange",(function(e){return t.systemmodule=e})),u.YNc(12,Jn,2,2,"option",11),u.qZA()()()(),u.TgZ(13,"div",12)(14,"label",5),u._UZ(15,"system-label",13),u.qZA(),u.TgZ(16,"input",7),u.NdJ("ngModelChange",(function(e){return t.componentFilter=e})),u.qZA(),u.TgZ(17,"div",8)(18,"div",9)(19,"select",10),u.NdJ("ngModelChange",(function(e){return t.component=e}))("ngModelChange",(function(){return t.checkDep(t.component)})),u.YNc(20,Nn,2,2,"option",14),u.qZA()()()()(),u.YNc(21,kn,8,0,"div",15),u.qZA(),u.TgZ(22,"system-modal-footer")(23,"button",16),u.NdJ("click",(function(){return t.cancelDialog()})),u._UZ(24,"system-label",17),u.qZA(),u.TgZ(25,"button",18),u.NdJ("click",(function(){return t.add()})),u._UZ(26,"system-label",19),u.qZA()()()),2&e&&(u.xp6(8),u.Q6J("ngModel",t.moduleFilter),u.xp6(3),u.Q6J("ngModel",t.systemmodule),u.xp6(1),u.Q6J("ngForOf",t.filteredmodules),u.xp6(4),u.Q6J("ngModel",t.componentFilter),u.xp6(3),u.Q6J("ngModel",t.component),u.xp6(1),u.Q6J("ngForOf",t.components),u.xp6(1),u.Q6J("ngIf",t.showDeprecatedWarning),u.xp6(4),u.Q6J("disabled",!t.component))},dependencies:[n.sg,n.O5,l.YN,l.Kr,l.Fj,l.EJ,l.JJ,l.On,L._,nt.j,lt.x,ot.p,at.y],encapsulation:2})),ComponentsetManagerAddDialog})();var Un=i(6898);function En(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div",12)(1,"label",9),u._uU(2,"Module"),u.qZA(),u.TgZ(3,"system-input-module",22),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw();return u.KtG(i.module=t)})),u.qZA()()}if(2&e){const e=u.oxw();u.xp6(3),u.Q6J("ngModel",e.module)("displayAsterisk",!0)}}function Dn(e,t){1&e&&(u.TgZ(0,"option",23),u._uU(1,"Global"),u.qZA())}let On=(()=>{var e;class ComponentsetManagerEditDialog{constructor(e,t){(0,s.Z)(this,"metadata",void 0),(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"closedialog",new u.vpe),(0,s.Z)(this,"componentset",""),(0,s.Z)(this,"edit_mode",""),(0,s.Z)(this,"componentsetname",""),(0,s.Z)(this,"componentsettype","custom"),(0,s.Z)(this,"module","*"),(0,s.Z)(this,"showModuleField",!1),(0,s.Z)(this,"self",void 0),this.metadata=e,this.language=t}ngOnInit(){if(this.showModuleField){let e=this.metadata.getComponentSet(this.componentset);this.componentsetname=e.name+" (custom)"}}cancelDialog(){this.closedialog.emit(!1),this.self.destroy()}onModalEscX(){this.cancelDialog()}add(){this.closedialog.emit({name:this.componentsetname,type:this.componentsettype,module:this.module}),this.self.destroy()}}return e=ComponentsetManagerEditDialog,(0,s.Z)(ComponentsetManagerEditDialog,"ɵfac",(function(t){return new(t||e)(u.Y36(f.Pu),u.Y36(b.d))})),(0,s.Z)(ComponentsetManagerEditDialog,"ɵcmp",u.Xpm({type:e,selectors:[["componensetmanager-edit-dialog"]],inputs:{componentset:"componentset",edit_mode:"edit_mode"},outputs:{closedialog:"closedialog"},decls:28,vars:6,consts:[["role","dialog","tabindex","-1","aria-labelledby","header43",1,"slds-modal","slds-fade-in-open"],[1,"slds-modal__container"],[1,"slds-modal__header","slds-theme--shade"],["title","Close",1,"slds-button","slds-modal__close","slds-button--icon-inverse",3,"click"],[3,"icon","size"],["id","header43",1,"slds-text-heading--medium"],[1,"slds-modal__content","slds-p-around--medium"],["class","slds-form-element",4,"ngIf"],[1,"slds-form-element","slds-m-top--small"],[1,"slds-form-element__label"],[1,"slds-form-element__control"],["type","text","placeholder","name",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-form-element"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],["value","global",4,"ngIf"],["value","custom"],[1,"slds-modal__footer"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_SAVE"],[3,"ngModel","displayAsterisk","ngModelChange"],["value","global"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),u.NdJ("click",(function(){return t.cancelDialog()})),u._UZ(4,"system-button-icon",4),u.qZA(),u.TgZ(5,"h2",5),u._uU(6,"Add Componentset"),u.qZA()(),u.TgZ(7,"div",6),u.YNc(8,En,4,2,"div",7),u.TgZ(9,"div",8)(10,"label",9),u._uU(11,"Componentset Name"),u.qZA(),u.TgZ(12,"div",10)(13,"input",11),u.NdJ("ngModelChange",(function(e){return t.componentsetname=e})),u.qZA()()(),u.TgZ(14,"div",12)(15,"label",9),u._uU(16,"type"),u.qZA(),u.TgZ(17,"div",10)(18,"div",13)(19,"select",14),u.NdJ("ngModelChange",(function(e){return t.componentsettype=e})),u.YNc(20,Dn,2,0,"option",15),u.TgZ(21,"option",16),u._uU(22,"Custom"),u.qZA()()()()()(),u.TgZ(23,"div",17)(24,"button",18),u.NdJ("click",(function(){return t.cancelDialog()})),u._UZ(25,"system-label",19),u.qZA(),u.TgZ(26,"button",20),u.NdJ("click",(function(){return t.add()})),u._UZ(27,"system-label",21),u.qZA()()()()),2&e&&(u.xp6(4),u.Q6J("icon","close")("size","large"),u.xp6(4),u.Q6J("ngIf",t.showModuleField),u.xp6(5),u.Q6J("ngModel",t.componentsetname),u.xp6(6),u.Q6J("ngModel",t.componentsettype),u.xp6(1),u.Q6J("ngIf","all"==t.edit_mode))},dependencies:[n.O5,l.YN,l.Kr,l.Fj,l.EJ,l.JJ,l.On,T.J,Un.a,L._],encapsulation:2})),ComponentsetManagerEditDialog})();var In=i(9503),Qn=i(8658);function Sn(e,t){if(1&e&&(u.TgZ(0,"option",20),u._uU(1),u.qZA()),2&e){const e=t.$implicit;u.s9C("value",e),u.xp6(1),u.Oqu(e)}}function Bn(e,t){if(1&e&&(u.TgZ(0,"option",20),u._uU(1),u.qZA()),2&e){const e=t.$implicit;u.s9C("value",e.value),u.xp6(1),u.Oqu(e.display)}}function Fn(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"tr",12)(1,"td")(2,"div",13)(3,"select",14),u.NdJ("ngModelChange",(function(t){const i=u.CHM(e).$implicit;return u.KtG(i.fieldname=t)})),u.YNc(4,Sn,2,2,"option",15),u.qZA()()(),u.TgZ(5,"td")(6,"div",13)(7,"select",14),u.NdJ("ngModelChange",(function(t){const i=u.CHM(e).$implicit;return u.KtG(i.comparator=t)})),u.YNc(8,Bn,2,2,"option",15),u.qZA()()(),u.TgZ(9,"td")(10,"div",16)(11,"textarea",17),u.NdJ("ngModelChange",(function(t){const i=u.CHM(e).$implicit;return u.KtG(i.valuations=t)})),u.ALo(12,"maybejson"),u.qZA()()(),u.TgZ(13,"td")(14,"button",18),u.NdJ("click",(function(){const t=u.CHM(e).$implicit,i=u.oxw();return u.KtG(i.removeCondition(t.id))})),u._UZ(15,"system-button-icon",19),u.qZA()()()}if(2&e){const e=t.$implicit,i=u.oxw();u.xp6(3),u.Q6J("ngModel",e.fieldname),u.xp6(1),u.Q6J("ngForOf",i.fieldname_options),u.xp6(3),u.Q6J("ngModel",e.comparator),u.xp6(1),u.Q6J("ngForOf",i.comparator_options),u.xp6(3),u.Q6J("ngModel",u.lcZ(12,7,e.valuations)),u.xp6(4),u.Q6J("icon","delete")("size","small")}}let Yn=(()=>{var e;class ValidationRulesConditions{constructor(e,t,i){(0,s.Z)(this,"metadata",void 0),(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"utils",void 0),(0,s.Z)(this,"data",void 0),(0,s.Z)(this,"comparator_options",[]),(0,s.Z)(this,"fieldname_options",[]),this.metadata=e,this.language=t,this.utils=i}ngOnInit(){this.comparator_options=this.language.getDisplayOptions("comparators_dom",!0);for(let e in this.metadata.getModuleFields(this.data.module))this.fieldname_options.push(e);this.fieldname_options.sort(),this.data.conditions.sort(((e,t)=>!!e.fieldname&&e.fieldname.localeCompare(t.fieldname)))}get conditions(){return this.data.conditions.filter((e=>1!=e.deleted))}addCondition(){return this.data.conditions.push({id:this.utils.generateGuid(),sysuimodelvalidation_id:this.data.id,isnewrecord:!0})}removeCondition(e){let t=this.data.conditions.findIndex((t=>t.id==e));return this.data.conditions[t]._is_new_record?this.data.conditions.splice(t,1):this.data.conditions[t].deleted=1,!0}}return e=ValidationRulesConditions,(0,s.Z)(ValidationRulesConditions,"ɵfac",(function(t){return new(t||e)(u.Y36(f.Pu),u.Y36(b.d),u.Y36(Z.A))})),(0,s.Z)(ValidationRulesConditions,"ɵcmp",u.Xpm({type:e,selectors:[["validationrules-conditions"]],inputs:{data:"data"},decls:15,vars:1,consts:[[1,"slds-table","slds-table--bordered","slds-table--cell-buffer"],[1,"slds-text-title--caps"],["scope","col",2,"width","2rem"],["label","LBL_FIELD"],["scope","col",2,"width","1rem"],["label","LBL_OPERATOR"],["scope","col",2,"width","4rem"],["label","LBL_VALUE"],["class","slds-theme--shade",4,"ngFor","ngForOf"],[1,"slds-grid","slds-grid--align-spread","slds-p-around--medium"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_ADD"],[1,"slds-theme--shade"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"slds-form-element__control"],[1,"slds-textarea",3,"ngModel","ngModelChange"],[1,"slds-button","slds-button--negative",3,"click"],[3,"icon","size"],[3,"value"]],template:function(e,t){1&e&&(u.TgZ(0,"table",0)(1,"thead")(2,"tr",1)(3,"th",2),u._UZ(4,"system-label",3),u.qZA(),u.TgZ(5,"th",4),u._UZ(6,"system-label",5),u.qZA(),u.TgZ(7,"th",6),u._UZ(8,"system-label",7),u.qZA(),u._UZ(9,"th",4),u.qZA()(),u.TgZ(10,"tbody"),u.YNc(11,Fn,16,9,"tr",8),u.qZA()(),u.TgZ(12,"div",9)(13,"button",10),u.NdJ("click",(function(){return t.addCondition()})),u._UZ(14,"system-label",11),u.qZA()()),2&e&&(u.xp6(11),u.Q6J("ngForOf",t.conditions))},encapsulation:2})),ValidationRulesConditions})();function Rn(e,t){if(1&e&&(u.TgZ(0,"option",18),u._uU(1),u.qZA()),2&e){const e=t.$implicit;u.s9C("value",e),u.xp6(1),u.Oqu(e)}}function Gn(e,t){if(1&e&&(u.TgZ(0,"option",18),u._uU(1),u.qZA()),2&e){const e=t.$implicit;u.s9C("value",e),u.xp6(1),u.Oqu(e)}}function Hn(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"tr",9)(1,"td")(2,"div",10)(3,"select",11),u.NdJ("ngModelChange",(function(t){const i=u.CHM(e).$implicit;return u.KtG(i.fieldname=t)})),u._UZ(4,"option"),u.YNc(5,Rn,2,2,"option",12),u.qZA()()(),u.TgZ(6,"td")(7,"div",10)(8,"select",11),u.NdJ("ngModelChange",(function(t){const i=u.CHM(e).$implicit;return u.KtG(i.action=t)})),u.YNc(9,Gn,2,2,"option",12),u.qZA()()(),u.TgZ(10,"td")(11,"div",13)(12,"textarea",14),u.NdJ("ngModelChange",(function(t){const i=u.CHM(e).$implicit;return u.KtG(i.params=t)})),u.ALo(13,"maybejson"),u.qZA()()(),u.TgZ(14,"td")(15,"div",13)(16,"input",15),u.NdJ("ngModelChange",(function(t){const i=u.CHM(e).$implicit;return u.KtG(i.priority=t)})),u.qZA()()(),u.TgZ(17,"td")(18,"button",16),u.NdJ("click",(function(){const t=u.CHM(e).$implicit,i=u.oxw();return u.KtG(i.removeAction(t.id))})),u._UZ(19,"system-button-icon",17),u.qZA()()()}if(2&e){const e=t.$implicit,i=u.oxw();u.xp6(3),u.Q6J("ngModel",e.fieldname),u.xp6(2),u.Q6J("ngForOf",i.fieldname_options),u.xp6(3),u.Q6J("ngModel",e.action),u.xp6(1),u.Q6J("ngForOf",i.action_options),u.xp6(3),u.Q6J("ngModel",u.lcZ(13,8,e.params)),u.xp6(4),u.Q6J("ngModel",e.priority),u.xp6(3),u.Q6J("icon","delete")("size","small")}}let Kn=(()=>{var e;class ValidationRulesActions{constructor(e,t,i){(0,s.Z)(this,"metadata",void 0),(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"utils",void 0),(0,s.Z)(this,"data",void 0),(0,s.Z)(this,"action_options",["set_value","set_value_from_field","set_value_from_user","set_model_state","set_stati","set_message","error","warning","notice","hide","show","require"]),(0,s.Z)(this,"fieldname_options",[]),this.metadata=e,this.language=t,this.utils=i}ngOnInit(){for(let e in this.metadata.getModuleFields(this.data.module))this.fieldname_options.push(e);this.fieldname_options.sort(),this.data.actions.sort(((e,t)=>!!e.fieldname&&e.fieldname.localeCompare(t.fieldname)))}get actions(){return this.data.actions.filter((e=>1!=e.deleted))}addAction(){return this.data.actions.push({id:this.utils.generateGuid(),sysuimodelvalidation_id:this.data.id,isnewrecord:!0})}removeAction(e){let t=this.data.actions.findIndex((t=>t.id==e));return this.data.actions[t].isnewrecord?this.data.actions.splice(t,1):this.data.actions[t].deleted=1,!0}}return e=ValidationRulesActions,(0,s.Z)(ValidationRulesActions,"ɵfac",(function(t){return new(t||e)(u.Y36(f.Pu),u.Y36(b.d),u.Y36(Z.A))})),(0,s.Z)(ValidationRulesActions,"ɵcmp",u.Xpm({type:e,selectors:[["validationrules-actions"]],inputs:{data:"data"},decls:17,vars:1,consts:[[1,"slds-table","slds-table--bordered","slds-table--cell-buffer"],[1,"slds-text-title--caps"],["scope","col",2,"width","2rem"],["scope","col",2,"width","1rem"],["scope","col",2,"width","4rem"],["class","slds-theme--shade",4,"ngFor","ngForOf"],[1,"slds-grid","slds-grid--align-spread","slds-p-around--medium"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_ADD"],[1,"slds-theme--shade"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"slds-form-element__control"],[1,"slds-textarea",3,"ngModel","ngModelChange"],["type","number","min","0","max","99",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-button","slds-button--negative",3,"click"],[3,"icon","size"],[3,"value"]],template:function(e,t){1&e&&(u.TgZ(0,"table",0)(1,"thead")(2,"tr",1)(3,"th",2),u._uU(4,"Fieldname"),u.qZA(),u.TgZ(5,"th",3),u._uU(6,"Action"),u.qZA(),u.TgZ(7,"th",4),u._uU(8,"Parameter(s)"),u.qZA(),u.TgZ(9,"th",3),u._uU(10,"Priority"),u.qZA(),u._UZ(11,"th",3),u.qZA()(),u.TgZ(12,"tbody"),u.YNc(13,Hn,20,10,"tr",5),u.qZA()(),u.TgZ(14,"div",6)(15,"button",7),u.NdJ("click",(function(){return t.addAction()})),u._UZ(16,"system-label",8),u.qZA()()),2&e&&(u.xp6(13),u.Q6J("ngForOf",t.actions))},encapsulation:2})),ValidationRulesActions})();function zn(e,t){if(1&e&&(u.TgZ(0,"option",12),u._uU(1),u.qZA()),2&e){const e=t.$implicit;u.Q6J("value",e),u.xp6(1),u.Oqu(e)}}const Vn=function(e){return{"slds-text-color_error":e}};function Pn(e,t){if(1&e&&(u.TgZ(0,"option",15),u._uU(1),u.qZA()),2&e){const e=t.$implicit;u.Q6J("value",e.id)("ngClass",u.VKq(3,Vn,!e.active)),u.xp6(1),u.Oqu(e.name)}}function $n(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div",2)(1,"label",3),u._UZ(2,"system-label",13),u.qZA(),u.TgZ(3,"div",5)(4,"div",6)(5,"select",7),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw();return u.KtG(i.current_rule=t)})),u._UZ(6,"option"),u.YNc(7,Pn,2,5,"option",14),u.qZA()()()()}if(2&e){const e=u.oxw();u.xp6(5),u.Q6J("ngModel",e.current_rule),u.xp6(2),u.Q6J("ngForOf",e.rules)}}function jn(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div",16)(1,"div",17)(2,"button",18),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw();return u.KtG(t.addValidationRule())})),u._UZ(3,"system-label",19),u.qZA(),u.TgZ(4,"button",20),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw();return u.KtG(t.removeCurrentValidationRule())})),u._UZ(5,"system-label",21),u.qZA(),u.TgZ(6,"button",20),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw();return u.KtG(t.cancel())})),u._UZ(7,"system-label",22),u.qZA(),u.TgZ(8,"button",23),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw();return u.KtG(t.save())})),u._UZ(9,"system-label",24),u.qZA()()()}if(2&e){const e=u.oxw();u.xp6(4),u.Q6J("disabled",!e.current_rule),u.xp6(2),u.Q6J("disabled",!e.current_rule),u.xp6(2),u.Q6J("disabled",!e.current_rule)}}function Wn(e,t){if(1&e&&(u.TgZ(0,"option",12),u._uU(1),u.qZA()),2&e){const e=t.$implicit;u.s9C("value",e.value),u.xp6(1),u.Oqu(e.display)}}function Xn(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div",36)(1,"div",37)(2,"div",38)(3,"label",3),u._UZ(4,"system-label",39),u.qZA(),u.TgZ(5,"div",40)(6,"input",41),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw(2);return u.KtG(i.current_rule_data.name=t)})),u.qZA()()(),u.TgZ(7,"div",42)(8,"div",43)(9,"label",3),u._UZ(10,"system-label",44),u.qZA(),u.TgZ(11,"div",40)(12,"system-checkbox",45),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw(2);return u.KtG(i.current_rule_data.active=t)})),u.qZA()()(),u.TgZ(13,"div",2)(14,"label",3),u._UZ(15,"system-label",46),u.qZA(),u.TgZ(16,"system-checkbox-group",47),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw(2);return u.KtG(i.current_rule_data.onevents=t)})),u.TgZ(17,"system-checkbox-group-checkbox",48),u._UZ(18,"system-label",49),u.qZA(),u.TgZ(19,"system-checkbox-group-checkbox",50),u._UZ(20,"system-label",51),u.qZA()()()(),u.TgZ(21,"div",38)(22,"label",3),u._UZ(23,"system-label",52),u.qZA(),u.TgZ(24,"div",40)(25,"select",7),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw(2);return u.KtG(i.current_rule_data.logicoperator=t)})),u.YNc(26,Wn,2,2,"option",8),u.qZA()()(),u.TgZ(27,"div",38)(28,"label",3),u._UZ(29,"system-label",53),u.qZA(),u.TgZ(30,"div",40)(31,"input",54),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw(2);return u.KtG(i.current_rule_data.priority=t)})),u.qZA()()()()()}if(2&e){const e=u.oxw(2);u.xp6(6),u.Q6J("ngModel",e.current_rule_data.name),u.xp6(6),u.Q6J("ngModel",e.current_rule_data.active),u.xp6(4),u.Q6J("ngModel",e.current_rule_data.onevents),u.xp6(9),u.Q6J("ngModel",e.current_rule_data.logicoperator),u.xp6(1),u.Q6J("ngForOf",e.logicoperator_options),u.xp6(5),u.Q6J("ngModel",e.current_rule_data.priority)}}function el(e,t){if(1&e&&(u.TgZ(0,"div",55),u._UZ(1,"validationrules-conditions",56),u.qZA()),2&e){const e=u.oxw(2);u.xp6(1),u.Q6J("data",e.current_rule_data)}}function tl(e,t){if(1&e&&(u.TgZ(0,"div",57),u._UZ(1,"validationrules-actions",56),u.qZA()),2&e){const e=u.oxw(2);u.xp6(1),u.Q6J("data",e.current_rule_data)}}const il=function(e){return{"slds-active":e}};function sl(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div",25)(1,"div",26)(2,"ul",27)(3,"li",28),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw();return u.KtG(t.current_tab="details")})),u.TgZ(4,"a",29),u._UZ(5,"system-label",30),u.qZA()(),u.TgZ(6,"li",28),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw();return u.KtG(t.current_tab="conditions")})),u.TgZ(7,"a",29),u._UZ(8,"system-label",31),u.qZA()(),u.TgZ(9,"li",28),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw();return u.KtG(t.current_tab="actions")})),u.TgZ(10,"a",29),u._UZ(11,"system-label",32),u.qZA()()(),u.YNc(12,Xn,32,6,"div",33),u.YNc(13,el,2,1,"div",34),u.YNc(14,tl,2,1,"div",35),u.qZA()()}if(2&e){const e=u.oxw();u.xp6(3),u.Q6J("ngClass",u.VKq(6,il,"details"==e.current_tab||!e.current_tab)),u.xp6(3),u.Q6J("ngClass",u.VKq(8,il,"conditions"==e.current_tab)),u.xp6(3),u.Q6J("ngClass",u.VKq(10,il,"actions"==e.current_tab)),u.xp6(3),u.Q6J("ngIf","details"==e.current_tab),u.xp6(1),u.Q6J("ngIf","conditions"==e.current_tab),u.xp6(1),u.Q6J("ngIf","actions"==e.current_tab)}}let nl=(()=>{var e;class ValidationRulesManager{constructor(e,t,i,n,l){(0,s.Z)(this,"backend",void 0),(0,s.Z)(this,"metadata",void 0),(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"utils",void 0),(0,s.Z)(this,"toast",void 0),(0,s.Z)(this,"rules",[]),(0,s.Z)(this,"_backup_rules",[]),(0,s.Z)(this,"_current_module",void 0),(0,s.Z)(this,"_current_rule",void 0),(0,s.Z)(this,"_current_rule_data",{}),(0,s.Z)(this,"logicoperator_options",[]),(0,s.Z)(this,"current_tab","details"),this.backend=e,this.metadata=t,this.language=i,this.utils=n,this.toast=l,this.logicoperator_options=this.language.getDisplayOptions("logicoperators_dom",!0)}get modules(){return this.metadata.getModules().sort()}set current_module(e){this._current_module=e,this.rules=this.metadata.getModuleValidations(e),this.rules.sort(((e,t)=>e.name.localeCompare(t.name))),this.copyRulesToBackup(),this.current_rule=null}get current_module(){return this._current_module}get current_rule(){return this._current_rule}set current_rule(e){this._current_rule=e,this._current_rule_data=this.getCurrentRuleData()}get current_rule_data(){return this._current_rule_data}getCurrentRuleData(){if(this.rules){const e=this.rules.find((e=>e.id==this._current_rule));return e?.onevents&&"string"==typeof e.onevents&&(e.onevents=e.onevents.split(",")),e}return""}removeCurrentValidationRule(){this.backend.deleteRequest("configuration/spiceui/core/modelvalidations/"+this.current_rule).subscribe((e=>(this.toast.sendToast("rule removed"),this.removeRule(this.current_rule),!0)),(e=>(this.toast.sendToast("removing rule failed!"),console.error(e),!1)))}save(){let e=this.current_rule_data;Array.isArray(e.onevents)&&(e.onevents=e.onevents.join(",")),this.backend.postRequest("configuration/spiceui/core/modelvalidations",{},e).subscribe((t=>{this.current_rule_data.isnewrecord=!1;let i=this._backup_rules.findIndex((e=>e.id==this._current_rule));this._backup_rules[i]={...e},this.rules.sort(((e,t)=>e.name.localeCompare(t.name))),this.toast.sendToast("changes saved")}),(e=>{this.toast.sendAlert("saving changes failed!"),console.error(e)}))}cancel(){this.current_rule_data.isnewrecord?this.removeRule(this.current_rule):this.resetCurrentRuleData()}addValidationRule(){this.rules.push({id:this.utils.generateGuid(),module:this.current_module,active:1,actions:[],conditions:[],isnewrecord:!0}),this.current_rule=this.rules[this.rules.length-1].id}removeRule(e=this.current_rule){let t=this.rules.findIndex((t=>t.id==e));return this.rules.splice(t,1),this.current_rule==e&&(this.current_rule=null),!0}resetCurrentRuleData(){let e=this._backup_rules.find((e=>e.id==this._current_rule));this._current_rule_data={...e}}copyRulesToBackup(){this._backup_rules=[];for(let e of this.rules)this._backup_rules.push({...e})}}return e=ValidationRulesManager,(0,s.Z)(ValidationRulesManager,"ɵfac",(function(t){return new(t||e)(u.Y36(h.y),u.Y36(f.Pu),u.Y36(b.d),u.Y36(Z.A),u.Y36(v.A))})),(0,s.Z)(ValidationRulesManager,"ɵcmp",u.Xpm({type:e,selectors:[["validation-rules-manager"]],decls:13,vars:5,consts:[["titlelabel","LBL_VALIDATIONRULES_MANAGER"],[1,"slds-grid","slds-form--inline","slds-p-around--small","slds-border--bottom"],[1,"slds-form-element"],[1,"slds-form-element__label"],["label","LBL_MODULE"],[1,"slds-form-element__control",2,"min-width","250px"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["class","slds-form-element",4,"ngIf"],["class","slds-form-element slds-col--bump-left",4,"ngIf"],["class","slds-grid",4,"ngIf"],[3,"value"],["label","LBL_RULE"],[3,"value","ngClass",4,"ngFor","ngForOf"],[3,"value","ngClass"],[1,"slds-form-element","slds-col--bump-left"],["role","group",1,"slds-button-group"],["type","button",1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_ADD"],["type","button",1,"slds-button","slds-button--neutral",3,"disabled","click"],["label","LBL_DELETE"],["label","LBL_CANCEL"],["type","button",1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_SAVE"],[1,"slds-grid"],[1,"slds-tabs_default"],["role","tablist",1,"slds-tabs_default__nav"],["role","presentation",1,"slds-tabs--default__item","slds-text-title--caps",3,"ngClass","click"],["href","javascript:void(0);","role","tab","aria-selected","false",1,"slds-tabs--default__link"],["label","LBL_DETAILS"],["label","LBL_CONDITIONS"],["label","LBL_ACTIONS"],["id","tab-default-1","class","slds-tabs_default__content","role","tabpanel",4,"ngIf"],["id","tab-default-2","class","slds-tabs_default__content","role","tabpanel",4,"ngIf"],["id","tab-default-3","class","slds-tabs_default__content","role","tabpanel",4,"ngIf"],["id","tab-default-1","role","tabpanel",1,"slds-tabs_default__content"],[1,"slds-size--3-of-5","slds-p-horizontal--small","slds-p-top--x-small"],[1,"slds-form-element","slds-m-vertical--xxx-small"],["label","LBL_NAME"],[1,"slds-form-element__control"],["type","text",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-grid","slds-m-vertical--small"],[1,"slds-form-element","slds-m-right_xx-large"],["label","LBL_ACTIVE"],[3,"ngModel","ngModelChange"],["label","LBL_ON_EVENTS"],[1,"spice-display-block",3,"ngModel","ngModelChange"],["value","initialize"],["label","LBL_INITIALIZE"],["value","change"],["label","LBL_CHANGE"],["label","LBL_OPERATOR"],["label","LBL_PRIORITY"],["type","number","min","0","max","99",1,"slds-input",3,"ngModel","ngModelChange"],["id","tab-default-2","role","tabpanel",1,"slds-tabs_default__content"],[3,"data"],["id","tab-default-3","role","tabpanel",1,"slds-tabs_default__content"]],template:function(e,t){1&e&&(u._UZ(0,"workbench-header",0),u.TgZ(1,"div",1)(2,"div",2)(3,"label",3),u._UZ(4,"system-label",4),u.qZA(),u.TgZ(5,"div",5)(6,"div",6)(7,"select",7),u.NdJ("ngModelChange",(function(e){return t.current_module=e})),u._UZ(8,"option"),u.YNc(9,zn,2,2,"option",8),u.qZA()()()(),u.YNc(10,$n,8,2,"div",9),u.YNc(11,jn,10,3,"div",10),u.qZA(),u.YNc(12,sl,15,12,"div",11)),2&e&&(u.xp6(7),u.Q6J("ngModel",t.current_module),u.xp6(2),u.Q6J("ngForOf",t.modules),u.xp6(1),u.Q6J("ngIf",t.current_module),u.xp6(1),u.Q6J("ngIf",t.current_module),u.xp6(1),u.Q6J("ngIf",t.current_rule))},dependencies:[n.mk,n.sg,n.O5,l.YN,l.Kr,l.Fj,l.wV,l.EJ,l.JJ,l.qQ,l.Fd,l.On,Q.U,In.L,Qn.m,L._,Xe,Yn,Kn],encapsulation:2})),ValidationRulesManager})(),ll=(()=>{var e;class MaybeJsonPipe extends n.Ts{transform(e){return e instanceof Array||e instanceof Object?super.transform(e):e}}return e=MaybeJsonPipe,(0,s.Z)(MaybeJsonPipe,"ɵfac",function(){let t;return function(i){return(t||(t=u.n5z(e)))(i||e)}}()),(0,s.Z)(MaybeJsonPipe,"ɵpipe",u.Yjl({name:"maybejson",type:e,pure:!0})),MaybeJsonPipe})();var ol=i(4664);function al(e,t){if(1&e&&(u.TgZ(0,"div",26),u._uU(1," Untranslated records: "),u.TgZ(2,"span",27),u._uU(3),u.qZA()()),2&e){const e=u.oxw();u.xp6(3),u.Oqu(null==e.labels?null:e.labels.length)}}function dl(e,t){if(1&e&&(u.TgZ(0,"option",28),u._uU(1),u.qZA()),2&e){const e=t.$implicit;u.Q6J("ngValue",e.language),u.xp6(1),u.Oqu(e.text)}}function rl(e,t){1&e&&(u.TgZ(0,"div",29),u._UZ(1,"system-spinner"),u.qZA())}function cl(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"button",52),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw().$implicit,i=u.oxw();return u.KtG(i.translate(t))})),u._UZ(1,"system-label",53),u.qZA()}}function gl(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div")(1,"div",30)(2,"div",31)(3,"h2",32),u._UZ(4,"system-label",33),u._uU(5,": "),u.TgZ(6,"span",34),u._uU(7),u.qZA()()(),u.TgZ(8,"div",35)(9,"div",36)(10,"div",37)(11,"div",12)(12,"label"),u._UZ(13,"system-label",38),u._uU(14,":"),u.qZA(),u._UZ(15,"input",14),u.qZA(),u.TgZ(16,"div",12)(17,"label"),u._UZ(18,"system-label",39),u._uU(19,":"),u.qZA(),u._UZ(20,"input",40),u.qZA(),u.TgZ(21,"div",12)(22,"label"),u._UZ(23,"system-label",41),u._uU(24,":"),u.qZA(),u._UZ(25,"textarea",42),u.qZA()(),u.TgZ(26,"div",43)(27,"div",12)(28,"label"),u._UZ(29,"system-label",38),u._uU(30,":"),u.qZA(),u.TgZ(31,"input",44),u.NdJ("ngModelChange",(function(t){const i=u.CHM(e).$implicit;return u.KtG(i.translation_short=t)})),u.qZA()(),u.TgZ(32,"div",12)(33,"label")(34,"abbr",34),u._uU(35,"*"),u.qZA(),u._UZ(36,"system-label",39),u._uU(37,":"),u.qZA(),u.TgZ(38,"input",45),u.NdJ("ngModelChange",(function(t){const i=u.CHM(e).$implicit;return u.KtG(i.translation_default=t)})),u.qZA()(),u.TgZ(39,"div",12)(40,"label"),u._UZ(41,"system-label",41),u._uU(42,":"),u.qZA(),u.TgZ(43,"textarea",46),u.NdJ("ngModelChange",(function(t){const i=u.CHM(e).$implicit;return u.KtG(i.translation_long=t)})),u.qZA()()()(),u.TgZ(44,"div",47)(45,"div",48),u.YNc(46,cl,2,0,"button",49),u.TgZ(47,"button",50),u.NdJ("click",(function(){const t=u.CHM(e).$implicit,i=u.oxw();return u.KtG(i.save(t))})),u._UZ(48,"system-label",51),u.qZA()()()()()()}if(2&e){const e=t.$implicit,i=u.oxw();u.xp6(7),u.Oqu(i.language.getLangText(e.name)),u.xp6(8),u.Q6J("value",i.getLabelSpecificLength(e.name,"short")),u.xp6(5),u.Q6J("value",i.language.getLabel(e.name)),u.xp6(5),u.Q6J("value",i.getLabelSpecificLength(e.name,"long")),u.xp6(6),u.Q6J("ngModel",e.translation_short),u.xp6(7),u.Q6J("ngModel",e.translation_default),u.xp6(5),u.Q6J("ngModel",e.translation_long),u.xp6(3),u.Q6J("ngIf",i.cantranslate),u.xp6(1),u.Q6J("disabled",!i.canSave(e))}}function ul(e,t){1&e&&(u.TgZ(0,"div",29),u._UZ(1,"system-label",54),u.qZA())}function ml(e,t){1&e&&(u.TgZ(0,"div",29),u._UZ(1,"system-label",55),u.qZA())}let pl=(()=>{var e;class LanguageTranslationsManager{constructor(e,t,i,n,l){(0,s.Z)(this,"backend",void 0),(0,s.Z)(this,"metadata",void 0),(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"utils",void 0),(0,s.Z)(this,"toast",void 0),(0,s.Z)(this,"labels",[]),(0,s.Z)(this,"currentScope","global"),(0,s.Z)(this,"selectedLanguage",""),(0,s.Z)(this,"isLoading",!1),(0,s.Z)(this,"cantranslate",!1),this.backend=e,this.metadata=t,this.language=i,this.utils=n,this.toast=l,this.backend.getRequest("syslanguage/labels/translate/cantranslate").subscribe({next:e=>{this.cantranslate=e.cantranslate}})}get scope(){return this.currentScope}set scope(e){this.currentScope=e,this.getTranslations()}get languages(){return this.language.getAvialableLanguages().filter((e=>e.language!=this.language.currentlanguage))}get selectedLanguageText(){return this.language.getLangText(this.language.currentlanguage)}translate(e){let t=["default"],i=[this.language.getLabel(e.name)],s=this.getLabelSpecificLength(e.name,"short");s&&(i.push(s),t.push("short"));let n=this.getLabelSpecificLength(e.name,"long");n&&(i.push(n),t.push("long"));let l=this.language.currentlanguage.substring(0,2),o=this.selectedLanguage.substring(0,2);this.backend.postRequest(`syslanguage/labels/translate/${l}/${o}`,{},{labels:i}).subscribe({next:i=>{i.data.translations&&i.data.translations.forEach(((i,s)=>{e["translation_"+t[s]]=i.translatedText}))}})}save(e){let t="global"==this.scope?"global_translations":"custom_translations",i={id:e.id,name:e.name,scope:this.scope,[t]:[{id:this.utils.generateGuid(),syslanguagelabel_id:e.id,syslanguage:this.selectedLanguage,translation_default:e.translation_default,translation_short:e.translation_short,translation_long:e.translation_long}]};this.backend.postRequest("configuration/syslanguages/labels",null,[i]).subscribe((t=>{this.language.addLabel(e.name,e.translation_default,e.translation_short,e.translation_long),this.labels=this.labels.filter((t=>t.id!=e.id)),this.toast.sendToast(this.language.getLabel("LBL_DATA_SAVED"),"success")}))}getLabelSpecificLength(e,t){let i=this.language.getLabel(e),s=this.language.getLabel(e,"",t);return s!=i?s:""}getTranslations(){this.labels=[],0!=this.selectedLanguage.length&&(this.isLoading=!0,this.backend.getRequest(`configuration/syslanguage/${this.selectedLanguage}/${this.scope}/labels/untranslated`).subscribe((e=>{this.labels=e,this.isLoading=!1}),(e=>this.isLoading=!1)))}canSave(e){return e.translation_default&&e.translation_default.length>0}trackByFn(e,t){return t.id}}return e=LanguageTranslationsManager,(0,s.Z)(LanguageTranslationsManager,"ɵfac",(function(t){return new(t||e)(u.Y36(h.y),u.Y36(f.Pu),u.Y36(b.d),u.Y36(Z.A),u.Y36(v.A))})),(0,s.Z)(LanguageTranslationsManager,"ɵcmp",u.Xpm({type:e,selectors:[["language-translations-manager"]],decls:35,vars:19,consts:[[1,"slds-border--bottom","slds-form--inline","slds-grid","slds-grid--vertical-align-end","slds-p-around--small"],["class","slds-text-heading--label",4,"ngIf"],[1,"slds-grid","slds-grid--vertical-align-center","slds-col--bump-left"],[1,"slds-radio"],["type","radio","name","translation_scope","id","scope_global","value","global",3,"ngModel","disabled","ngModelChange"],["for","scope_global",1,"slds-radio__label"],[1,"slds-radio_faux"],[1,"slds-form-element__label"],["label","LBL_GLOBAL"],["type","radio","name","translation_scope","id","scope_custom","value","custom",3,"ngModel","disabled","ngModelChange"],["for","scope_custom",1,"slds-radio__label"],["label","LBL_CUSTOM"],[1,"slds-form-element"],[1,"slds-form-element__control"],["type","text","disabled","",1,"slds-input",3,"value"],["icon","sort","size","xx-small","addclasses","slds-path__trigger_open",1,"slds-m-right--x-small"],[1,"slds-form-element__control","slds-p-right--x-small"],[1,"slds-select_container",2,"min-width","150px"],[1,"slds-select",3,"ngModel","disabled","ngModelChange","change"],[3,"ngValue",4,"ngFor","ngForOf"],["role","group",1,"slds-button-group"],[1,"slds-button","slds-button--icon-border",3,"disabled","click"],["icon","refresh"],["system-to-bottom","",1,"slds-size--1-of-1","spice-scrollbar"],["class","slds-align_absolute-center","style","height: 100%;",4,"ngIf"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"slds-text-heading--label"],[1,"slds-text-color--error"],[3,"ngValue"],[1,"slds-align_absolute-center",2,"height","100%"],[1,"slds-card","slds-m-around--small"],[1,"slds-card__header"],[1,"slds-text-heading--small"],["label","LBL_LABEL"],[1,"slds-required"],[1,"slds-card__body","slds-p-around--small",2,"margin-bottom","0"],[1,"slds-grid"],[1,"slds-size--1-of-2","slds-p-right--small"],["label","LBL_TEXT_SHORT"],["label","LBL_DEFAULT"],["type","text","required","required","disabled","",1,"slds-input",3,"value"],["label","LBL_TEXT_LONG"],["disabled","",1,"slds-textarea",3,"value"],[1,"slds-size--1-of-2"],["type","text",1,"slds-input",3,"ngModel","ngModelChange"],["type","text","required","required",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-textarea",3,"ngModel","ngModelChange"],[1,"slds-grid","slds-p-top--x-small"],[1,"slds-col--bump-left"],["type","button","class","slds-button slds-button--neutral",3,"click",4,"ngIf"],["type","button",1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_SAVE"],["type","button",1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_GOOGLE_TRANSLATE"],["label","LBL_MAKE_SELECTION"],["label","LBL_NO_ENTRIES"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0),u.YNc(1,al,4,1,"div",1),u.TgZ(2,"div",2)(3,"div")(4,"span",3)(5,"input",4),u.NdJ("ngModelChange",(function(e){return t.scope=e})),u.qZA(),u.TgZ(6,"label",5),u._UZ(7,"span",6),u.TgZ(8,"span",7),u._UZ(9,"system-label",8),u.qZA()()(),u.TgZ(10,"span",3)(11,"input",9),u.NdJ("ngModelChange",(function(e){return t.scope=e})),u.qZA(),u.TgZ(12,"label",10),u._UZ(13,"span",6),u.TgZ(14,"span",7),u._UZ(15,"system-label",11),u.qZA()()()(),u.TgZ(16,"div",12)(17,"div",13),u._UZ(18,"input",14),u.qZA()(),u._UZ(19,"system-utility-icon",15),u.TgZ(20,"div",16)(21,"div",17)(22,"select",18),u.NdJ("ngModelChange",(function(e){return t.selectedLanguage=e}))("change",(function(){return t.getTranslations()})),u._UZ(23,"option"),u.YNc(24,dl,2,2,"option",19),u.qZA()()(),u.TgZ(25,"div",12)(26,"div",20)(27,"button",21),u.NdJ("click",(function(){return t.getTranslations()})),u._UZ(28,"system-button-icon",22),u.qZA()()()()(),u.TgZ(29,"div",23),u.YNc(30,rl,2,0,"div",24),u.YNc(31,gl,49,9,"div",25),u.ALo(32,"slice"),u.YNc(33,ul,2,0,"div",24),u.YNc(34,ml,2,0,"div",24),u.qZA()),2&e&&(u.xp6(1),u.Q6J("ngIf",!t.isLoading&&(null==t.selectedLanguage?null:t.selectedLanguage.length)>0&&(null==t.labels?null:t.labels.length)),u.xp6(4),u.Q6J("ngModel",t.scope)("disabled",t.isLoading),u.xp6(6),u.Q6J("ngModel",t.scope)("disabled",t.isLoading),u.xp6(7),u.Q6J("value",t.selectedLanguageText),u.xp6(4),u.Q6J("ngModel",t.selectedLanguage)("disabled",t.isLoading),u.xp6(2),u.Q6J("ngForOf",t.languages),u.xp6(3),u.Q6J("disabled",t.isLoading),u.xp6(3),u.Q6J("ngIf",t.isLoading),u.xp6(1),u.Q6J("ngForOf",u.Dn7(32,15,t.labels,0,100))("ngForTrackBy",t.trackByFn),u.xp6(2),u.Q6J("ngIf",!t.isLoading&&0==t.selectedLanguage.length),u.xp6(1),u.Q6J("ngIf",!t.isLoading&&(null==t.selectedLanguage?null:t.selectedLanguage.length)>0&&0==(null==t.labels?null:t.labels.length)))},dependencies:[n.sg,n.O5,l.YN,l.Kr,l.Fj,l.EJ,l._,l.JJ,l.Q7,l.On,T.J,L._,ol.W,m.r,w.H,n.OU],encapsulation:2})),LanguageTranslationsManager})();var hl=i(3917),fl=i(5920),bl=i(6010);function Zl(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div",16)(1,"div",17)(2,"button",18),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw();return u.KtG(t.addLabel())})),u._UZ(3,"system-label",19),u.qZA()()()}}function _l(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div")(1,"button",18),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw();return u.KtG(t.filesToDB())})),u._uU(2,"Files to DB"),u.qZA()()}}function yl(e,t){1&e&&u._UZ(0,"system-spinner")}function vl(e,t){1&e&&(u.TgZ(0,"span",37),u._uU(1,"custom"),u.qZA())}function xl(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"system-utility-icon",38),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw().$implicit,i=u.oxw(2);return u.KtG(i.deleteLabel(t))})),u.qZA()}2&e&&u.Q6J("icon","close")("size","xx-small")}const Ml=function(e){return{"slds-theme_inverse":e}};function Al(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"li",34),u.NdJ("click",(function(){const t=u.CHM(e).$implicit,i=u.oxw(2);return u.KtG(i.selected_label=t)})),u.TgZ(1,"div",22)(2,"span"),u._uU(3),u.qZA(),u.YNc(4,vl,2,0,"span",35),u.TgZ(5,"div",25),u.YNc(6,xl,1,2,"system-utility-icon",36),u.qZA()()()}if(2&e){const e=t.$implicit,i=u.oxw(2);u.Q6J("ngClass",u.VKq(4,Ml,e==i.selected_label)),u.xp6(3),u.Oqu(e.name),u.xp6(1),u.Q6J("ngIf","custom"==e.scope),u.xp6(2),u.Q6J("ngIf",e==i.selected_label)}}function Tl(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"article")(1,"div",27)(2,"div",53)(3,"h2"),u._uU(4),u.qZA()(),u.TgZ(5,"div",28)(6,"div",1)(7,"label"),u._uU(8,"short:"),u.qZA(),u.TgZ(9,"input",54),u.NdJ("ngModelChange",(function(t){const i=u.CHM(e).$implicit;return u.KtG(i.translation_short=t)})),u.qZA()(),u.TgZ(10,"div",1)(11,"label")(12,"abbr",55),u._uU(13,"*"),u.qZA(),u._uU(14,"default:"),u.qZA(),u.TgZ(15,"input",56),u.NdJ("ngModelChange",(function(t){const i=u.CHM(e).$implicit;return u.KtG(i.translation_default=t)})),u.qZA()(),u.TgZ(16,"div",1)(17,"label"),u._uU(18,"long:"),u.qZA(),u.TgZ(19,"textarea",57),u.NdJ("ngModelChange",(function(t){const i=u.CHM(e).$implicit;return u.KtG(i.translation_long=t)})),u.qZA()()()()()}if(2&e){const e=t.$implicit,i=u.oxw(3);u.xp6(4),u.Oqu(i.getLangText(e.syslanguage)),u.xp6(5),u.Q6J("ngModel",e.translation_short),u.xp6(6),u.Q6J("ngModel",e.translation_default),u.xp6(4),u.Q6J("ngModel",e.translation_long)}}function Ll(e,t){if(1&e&&(u.TgZ(0,"option",64),u._uU(1),u.qZA()),2&e){const e=t.$implicit;u.s9C("value",e.language),u.xp6(1),u.Oqu(e.text)}}function ql(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div",20)(1,"div",58)(2,"div",59)(3,"select",60,61),u.YNc(5,Ll,2,2,"option",62),u.qZA()()(),u.TgZ(6,"button",63),u.NdJ("click",(function(){u.CHM(e);const t=u.MAs(4),i=u.oxw(3);return u.KtG(i.addTranslation(i.translation_scope,t.value))})),u._UZ(7,"system-label",19),u.qZA()()}if(2&e){const e=u.oxw(3);u.xp6(5),u.Q6J("ngForOf",e.getMissingLanguages()),u.xp6(1),u.MGl("title","",e.language.getLabel("LBL_ADD_TRANSLATION"),"...")}}function Cl(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div",39)(1,"div",40)(2,"h2",23),u._UZ(3,"system-label",41),u._uU(4,":"),u.qZA(),u.TgZ(5,"div",42)(6,"span",43)(7,"input",44),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw(2);return u.KtG(i.translation_scope=t)})),u.qZA(),u.TgZ(8,"label",45),u._UZ(9,"span",46),u.TgZ(10,"span",47),u._uU(11,"global"),u.qZA()()(),u.TgZ(12,"span",43)(13,"input",48),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw(2);return u.KtG(i.translation_scope=t)})),u.qZA(),u.TgZ(14,"label",49),u._UZ(15,"span",46),u.TgZ(16,"span",47),u._uU(17,"custom"),u.qZA()()()()(),u.YNc(18,Tl,20,4,"article",50),u.TgZ(19,"div",20),u.YNc(20,ql,8,2,"div",15),u.TgZ(21,"div",25)(22,"button",51),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw(2);return u.KtG(t.save())})),u._UZ(23,"system-label",52),u.qZA()()()()}if(2&e){const e=u.oxw(2);u.xp6(7),u.Q6J("ngModel",e.translation_scope)("disabled","custom"==e.selected_label.scope),u.xp6(6),u.Q6J("ngModel",e.translation_scope),u.xp6(5),u.Q6J("ngForOf",e.translations),u.xp6(2),u.Q6J("ngIf",e.languages.length>e.translations.length),u.xp6(2),u.Q6J("disabled",e.labels.length<1)}}const Jl=function(e){return{page:e,limit:20}};function Nl(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div",20)(1,"div",21)(2,"div",22)(3,"h2",23),u._UZ(4,"system-label",24),u._uU(5,":"),u.qZA(),u.TgZ(6,"div",25)(7,"pagination-controls",26),u.NdJ("pageChange",(function(t){u.CHM(e);const i=u.oxw();return u.KtG(i.page=t)})),u.qZA()()(),u.TgZ(8,"article")(9,"div",27)(10,"div",28)(11,"ul",29),u.YNc(12,Al,7,6,"li",30),u.ALo(13,"paginate"),u.qZA()(),u.TgZ(14,"div",31)(15,"pagination-controls",32),u.NdJ("pageChange",(function(t){u.CHM(e);const i=u.oxw();return u.KtG(i.page=t)})),u.qZA()()()()(),u.YNc(16,Cl,24,6,"div",33),u.qZA()}if(2&e){const e=u.oxw();u.xp6(7),u.Q6J("page",e.page)("limit",20)("total_records",e.labels.length)("variation","short"),u.xp6(5),u.Q6J("ngForOf",u.xi3(13,9,e.labels,u.VKq(12,Jl,e.page))),u.xp6(3),u.Q6J("page",e.page)("limit",20)("total_records",e.labels.length),u.xp6(1),u.Q6J("ngIf",e.selected_label)}}let kl=(()=>{var e;class LanguageLabelManagerComponent{get selected_label(){return this._selected_label}set selected_label(e){if(this._selected_label=e,e&&0==e[this.translation_scope+"_translations"].length){for(let t of this.scopes)if(e[t+"_translations"].length>0){this.translation_scope=t;break}e[this.translation_scope+"_translations"].sort(((e,t)=>e.syslanguage==this.language.languagedata.languages.default||e.syslanguage<t.syslanguage?-1:e.syslanguage>t.syslanguage?1:void 0))}}constructor(e,t,i,n,l,o,a,d){(0,s.Z)(this,"backend",void 0),(0,s.Z)(this,"metadata",void 0),(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"utils",void 0),(0,s.Z)(this,"toast",void 0),(0,s.Z)(this,"footer",void 0),(0,s.Z)(this,"modalservice",void 0),(0,s.Z)(this,"sessionservice",void 0),(0,s.Z)(this,"search_term",""),(0,s.Z)(this,"labels",[]),(0,s.Z)(this,"languages",[]),(0,s.Z)(this,"_selected_label",null),(0,s.Z)(this,"is_searching",!1),(0,s.Z)(this,"page",1),(0,s.Z)(this,"translation_scope","global"),(0,s.Z)(this,"scopes",["global","custom"]),this.backend=e,this.metadata=t,this.language=i,this.utils=n,this.toast=l,this.footer=o,this.modalservice=a,this.sessionservice=d,this.languages=this.language.getAvialableLanguages()}showRefModal(){this.modalservice.openModal("LanguageLabelReferenceConfigModal")}get translations(){return this.selected_label[`${this.translation_scope}_translations`]}search(e=null){if(this.page=1,!(e=e||this.search_term))return!1;this.selected_label=null,this.is_searching=!0,this.backend.getRequest("configuration/syslanguages/labels/search/"+this.search_term).subscribe((e=>{this.labels=e,this.is_searching=!1}))}addTranslation(e,t=null){if(this.selected_label[e+"_translations"]||(this.selected_label[e+"_translations"]=[]),!t){t=this.getMissingLanguages(e)[0]}this.selected_label[e+"_translations"].push({id:this.utils.generateGuid(),syslanguagelabel_id:this.selected_label.id,syslanguage:t})}getMissingLanguages(e=null){e||(e=this.translation_scope);let t=[];for(let e of this.languages)this.translations.find((t=>t.syslanguage==e.language))||t.push(e);return t}addLabel(){let e={id:this.utils.generateGuid(),name:"",scope:"custom",custom_translations:[],global_translations:[]};e.custom_translations.push({id:this.utils.generateGuid(),syslanguagelabel_id:e.id,syslanguage:this.language.currentlanguage}),this.selected_label=e,this.labels.push(e),this.modalservice.openModal("LanguageLabelModal").subscribe((e=>{e.instance.label=this.selected_label,e.instance.label$.subscribe((e=>{this.selected_label=e})),e.instance.close$.subscribe((e=>{this.closeModal(e)}))}))}deleteLabel(e){this.modalservice.confirm(this.language.getLabel("LBL_DELETE_LABEL_TEXT"),this.language.getLabel("LBL_DELETE_LABEL_TITLE")).subscribe((t=>{t&&this.backend.deleteRequest("configuration/syslanguages/labels/"+e.id+"/"+e.source).subscribe((t=>{for(let t=0;t<this.labels.length;t++){this.labels[t].id==e.id&&this.labels.splice(t,1)}this.selected_label=null}))}))}save(){this.backend.postRequest("configuration/syslanguages/labels",null,[this.selected_label]).subscribe((e=>{let t=this.getcurrentLanguageTranslations();this.language.addLabel(this.selected_label.name,t.default,t.short,t.long),this.toast.sendToast("Label saved!")}))}getcurrentLanguageTranslations(){let e=this.translations,t={default:"",short:"",long:""};return e.some((e=>{if(e.syslanguage==this.language.currentlanguage)return t.default=e.translation_default,t.short=e.translation_short,t.long=e.translation_long,!0})),t}closeModal(e){switch(e){case"cancel":for(let e=0;e<this.labels.length;e++){let t=this.labels[e];""!=t.name&&t.id!=this.selected_label.id||this.labels.splice(e,1)}break;case"save":this.translation_scope=this.selected_label.scope}}sortTranslations(e,t){return e.syslanguage==this.language.languagedata.languages.default||e.syslanguage<t.syslanguage?-1:e.syslanguage>t.syslanguage?1:0}getLangText(e){return this.language.getLangText(e)}filesToDB(){this.modalservice.confirm("Transfering custom labels from language files will change your database content and might destroy/overwrite existing language data in your database! Do you really want to do this?","Caution!","warning").subscribe((e=>{if(e){let e=this.modalservice.await("Transfering language data from files to database …");this.backend.postRequest("configuration/syslanguages/filesToDB",{},{confirmed:!0}).subscribe((t=>{e.emit(),this.modalservice.info("Language data successfully transfered ("+t.countLabels+" labels with "+t.countTranslations+" translations). Look into console for more details.","Done","success"),console.info(t)}),(t=>{e.emit(),this.toast.sendToast("Error transfering language data.","error")}))}}))}}return e=LanguageLabelManagerComponent,(0,s.Z)(LanguageLabelManagerComponent,"ɵfac",(function(t){return new(t||e)(u.Y36(h.y),u.Y36(f.Pu),u.Y36(b.d),u.Y36(Z.A),u.Y36(v.A),u.Y36(hl.M),u.Y36(x.o),u.Y36(fl.n))})),(0,s.Z)(LanguageLabelManagerComponent,"ɵcmp",u.Xpm({type:e,selectors:[["language-label-manager"]],decls:19,vars:7,consts:[[1,"slds-grid","slds-form--inline","slds-p-around--small","slds-border--bottom"],[1,"slds-form-element"],[1,"slds-form-element__control"],["type","search","placeholder","search here...",1,"slds-input",3,"ngModel","ngModelChange","keyup.enter"],[1,"slds-button","slds-button--neutral",3,"disabled","click"],[1,"slds-grid","slds-grid--vertical-align-center","slds-m-horizontal--xx-small",2,"cursor","pointer"],[1,"slds-truncate","slds-grow","slds-align-middle"],["label","LBL_ENABLE_INLINE_EDIT"],[1,"slds-checkbox_toggle","slds-grid"],[1,"slds-form-element__label","slds-m-bottom_none"],["type","checkbox",3,"ngModel","ngModelChange"],["aria-live","assertive",1,"slds-checkbox_faux_container"],[1,"slds-checkbox_faux",2,"cursor","initial"],["class","slds-form-element slds-col--bump-left",4,"ngIf"],[4,"ngIf"],["class","slds-grid",4,"ngIf"],[1,"slds-form-element","slds-col--bump-left"],["role","group",1,"slds-button-group"],["type","button",1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_ADD"],[1,"slds-grid"],[1,"slds-size--2-of-5","slds-p-around--small"],[1,"slds-grid","slds-grid--vertical-align-center"],[1,"slds-p-vertical--small","slds-text-heading--small"],["label","LBL_LABELS"],[1,"slds-col--bump-left"],[3,"page","limit","total_records","variation","pageChange"],[1,"slds-card","slds-m-bottom--small"],[1,"slds-card__body","slds-p-around--small"],[1,"slds-has-dividers_bottom-space"],["class","slds-item","style","cursor: pointer;",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"slds-card__footer"],[3,"page","limit","total_records","pageChange"],["class","slds-size--3-of-5 slds-p-around--small",4,"ngIf"],[1,"slds-item",2,"cursor","pointer",3,"ngClass","click"],["class","slds-text-color_weak",4,"ngIf"],[3,"icon","size","click",4,"ngIf"],[1,"slds-text-color_weak"],[3,"icon","size","click"],[1,"slds-size--3-of-5","slds-p-around--small"],[1,"slds-grid","slds-grid--vertical-align-center","slds-p-bottom--small"],["label","LBL_TRANSLATIONS"],[1,"slds-grid","slds-col--bump-left"],[1,"slds-radio"],["type","radio","name","translation_scope","id","translation_scope_global","value","global",3,"ngModel","disabled","ngModelChange"],["for","translation_scope_global",1,"slds-radio__label"],[1,"slds-radio_faux"],[1,"slds-form-element__label"],["type","radio","name","translation_scope","id","translation_scope_custom","value","custom",3,"ngModel","ngModelChange"],["for","translation_scope_custom",1,"slds-radio__label"],[4,"ngFor","ngForOf"],["type","button",1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_SAVE"],[1,"slds-card__header"],["type","text",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-required"],["type","text","required","required",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-textarea",3,"ngModel","ngModelChange"],[1,"slds-form-element__control","slds-p-right--x-small"],[1,"slds-select_container"],[1,"slds-select"],["add_translation_language",""],[3,"value",4,"ngFor","ngForOf"],[1,"slds-button","slds-button--neutral",3,"title","click"],[3,"value"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"input",3),u.NdJ("ngModelChange",(function(e){return t.search_term=e}))("keyup.enter",(function(){return t.search()})),u.qZA()(),u.TgZ(4,"button",4),u.NdJ("click",(function(){return t.search()})),u._uU(5,"search"),u.qZA()(),u.TgZ(6,"div",5)(7,"div",6),u._UZ(8,"system-label",7),u.qZA(),u.TgZ(9,"div",1)(10,"label",8),u._UZ(11,"span",9),u.TgZ(12,"input",10),u.NdJ("ngModelChange",(function(e){return t.language.inlineEditEnabled=e})),u.qZA(),u.TgZ(13,"span",11),u._UZ(14,"span",12),u.qZA()()()(),u.YNc(15,Zl,4,0,"div",13),u.YNc(16,_l,3,0,"div",14),u.qZA(),u.YNc(17,yl,1,0,"system-spinner",14),u.YNc(18,Nl,17,14,"div",15)),2&e&&(u.xp6(3),u.Q6J("ngModel",t.search_term),u.xp6(1),u.Q6J("disabled",!t.search_term),u.xp6(8),u.Q6J("ngModel",t.language.inlineEditEnabled),u.xp6(3),u.Q6J("ngIf",!0),u.xp6(1),u.Q6J("ngIf",t.sessionservice.isAdmin),u.xp6(1),u.Q6J("ngIf",t.is_searching),u.xp6(1),u.Q6J("ngIf",t.labels.length>0&&!t.is_searching))},dependencies:[n.mk,n.sg,n.O5,l.YN,l.Kr,l.Fj,l.Wl,l._,l.JJ,l.Q7,l.On,bl.L,L._,ol.W,m.r,bl.s],encapsulation:2})),LanguageLabelManagerComponent})(),wl=(()=>{var e;class SortPipe{transform(e,t=((e,t)=>e>t?1:-1)){return e.sort(t)}}return e=SortPipe,(0,s.Z)(SortPipe,"ɵfac",(function(t){return new(t||e)})),(0,s.Z)(SortPipe,"ɵpipe",u.Yjl({name:"sort",type:e,pure:!0})),SortPipe})();function Ul(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"article")(1,"div",24)(2,"div",25)(3,"h2"),u._uU(4),u.qZA()(),u.TgZ(5,"div",26)(6,"div",27)(7,"label"),u._uU(8,"short:"),u.qZA(),u.TgZ(9,"input",28),u.NdJ("ngModelChange",(function(t){const i=u.CHM(e).$implicit;return u.KtG(i.translation_short=t)})),u.qZA()(),u.TgZ(10,"div",27)(11,"label")(12,"abbr",5),u._uU(13,"*"),u.qZA(),u._uU(14,"default:"),u.qZA(),u.TgZ(15,"input",29),u.NdJ("ngModelChange",(function(t){const i=u.CHM(e).$implicit;return u.KtG(i.translation_default=t)})),u.qZA()(),u.TgZ(16,"div",27)(17,"label"),u._uU(18,"long:"),u.qZA(),u.TgZ(19,"textarea",30),u.NdJ("ngModelChange",(function(t){const i=u.CHM(e).$implicit;return u.KtG(i.translation_long=t)})),u.qZA()()()()()}if(2&e){const e=t.$implicit,i=u.oxw();u.xp6(4),u.Oqu(i.getLangText(e.syslanguage)),u.xp6(5),u.Q6J("ngModel",e.translation_short),u.xp6(6),u.Q6J("ngModel",e.translation_default),u.xp6(4),u.Q6J("ngModel",e.translation_long)}}function El(e,t){if(1&e&&(u.TgZ(0,"option",38),u._uU(1),u.qZA()),2&e){const e=t.$implicit;u.s9C("value",e.language),u.xp6(1),u.Oqu(e.text)}}function Dl(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div",3)(1,"div",31)(2,"div",32)(3,"select",33,34),u.YNc(5,El,2,2,"option",35),u.qZA()()(),u.TgZ(6,"button",36),u.NdJ("click",(function(){u.CHM(e);const t=u.MAs(4),i=u.oxw();return u.KtG(i.addTranslation(t.value))})),u._UZ(7,"system-label",37),u.qZA()()}if(2&e){const e=u.oxw();u.xp6(5),u.Q6J("ngForOf",e.getMissingLanguages()),u.xp6(1),u.MGl("title","",e.language.getLabel("LBL_ADD_TRANSLATION"),"...")}}let Ol=(()=>{var e;class LanguageLabelModal{constructor(e,t,i){(0,s.Z)(this,"utils",void 0),(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"backend",void 0),(0,s.Z)(this,"label",{}),(0,s.Z)(this,"label$",new u.vpe),(0,s.Z)(this,"close$",new u.vpe),(0,s.Z)(this,"languages",[]),(0,s.Z)(this,"self",void 0),this.utils=e,this.language=t,this.backend=i,this.languages=this.language.getAvialableLanguages(!0)}get translations(){return this.label[this.label.scope+"_translations"]||[]}set translations(e){this.label[this.label.scope+"_translations"]=e}get name(){return this.label?this.label.name:""}set name(e){e=e.toUpperCase().trim().replace("-","_"),this.label.name=e}get scope(){return this.label?this.label.scope:""}set scope(e){this.label[e+"_translations"]=this.translations,this.translations=[],this.label.scope=e}validate(){if(!this.label.name)return!1;if(/[^A-Z_0-9]/.test(this.label.name))return!1;for(let e of this.translations)if(!e.translation_default)return!1;return!0}save(){if(this.label.name=this.label.name.toUpperCase(),!this.validate())return!1;this.backend.postRequest("configuration/syslanguages/labels",null,[this.label]).subscribe((e=>{this.label$.emit(this.label),this.close$.emit("save");let t=this.getcurrentLanguageTranslations();this.language.addLabel(this.label.name,t.default,t.short,t.long),this.self&&this.self.destroy()}))}getcurrentLanguageTranslations(){let e=this.translations,t={default:"",short:"",long:""};return e.some((e=>{if(e.syslanguage==this.language.currentlanguage)return t.default=e.translation_default,t.short=e.translation_short,t.long=e.translation_long,!0})),t}cancelDialog(){this.label={},this.label$.emit(null),this.close$.emit("cancel"),this.self.destroy()}onModalEscX(){this.cancelDialog()}addTranslation(e=null){if(!e){e=this.getMissingLanguages()[0]}this.label[this.label.scope+"_translations"].push({id:this.utils.generateGuid(),syslanguagelabel_id:this.label.id,syslanguage:e})}getMissingLanguages(e=null){e||(e=this.scope);let t=[];for(let e of this.languages)this.translations.find((t=>t.syslanguage==e.language))||t.push(e);return t}getLangText(e){return this.language.getLangText(e)}}return e=LanguageLabelModal,(0,s.Z)(LanguageLabelModal,"ɵfac",(function(t){return new(t||e)(u.Y36(Z.A),u.Y36(b.d),u.Y36(h.y))})),(0,s.Z)(LanguageLabelModal,"ɵcmp",u.Xpm({type:e,selectors:[["language-label-modal"]],inputs:{label:"label"},outputs:{label$:"label",close$:"close"},decls:37,vars:6,consts:[["size","large"],[3,"close"],["label","LBL_EDIT"],[1,"slds-grid"],[1,"slds-form-element","slds-size--3-of-4"],[1,"slds-required"],["label","LBL_NAME"],["type","text","placeholder","only A-Z, 0-9 and _ are allowed!",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-form-element","slds-size--1-of-4","slds-p-around--small"],[1,"slds-form-element__control"],[1,"slds-radio"],["type","radio","id","radio-3","value","global",3,"ngModel","ngModelChange"],["for","radio-3",1,"slds-radio__label"],[1,"slds-radio_faux"],[1,"slds-form-element__label"],["type","radio","id","radio-4","value","custom",3,"ngModel","ngModelChange"],["for","radio-4",1,"slds-radio__label"],["label","LBL_TRANSLATIONS"],[4,"ngFor","ngForOf"],["class","slds-grid",4,"ngIf"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_SAVE"],[1,"slds-card","slds-m-bottom--small"],[1,"slds-card__header"],[1,"slds-card__body","slds-p-around--small"],[1,"slds-form-element"],["type","text",1,"slds-input",3,"ngModel","ngModelChange"],["type","text","required","required",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-textarea",3,"ngModel","ngModelChange"],[1,"slds-form-element__control","slds-p-right--x-small"],[1,"slds-select_container"],[1,"slds-select"],["add_translation_language",""],[3,"value",4,"ngFor","ngForOf"],[1,"slds-button","slds-button--neutral",3,"title","click"],["label","LBL_ADD"],[3,"value"]],template:function(e,t){1&e&&(u.TgZ(0,"system-modal",0)(1,"system-modal-header",1),u.NdJ("close",(function(){return t.cancelDialog()})),u._UZ(2,"system-label",2),u.qZA(),u.TgZ(3,"system-modal-content")(4,"div",3)(5,"div",4)(6,"label")(7,"abbr",5),u._uU(8,"*"),u.qZA(),u._UZ(9,"system-label",6),u._uU(10,":"),u.qZA(),u.TgZ(11,"input",7),u.NdJ("ngModelChange",(function(e){return t.name=e})),u.qZA()(),u.TgZ(12,"div",8)(13,"div",9)(14,"span",10)(15,"input",11),u.NdJ("ngModelChange",(function(e){return t.scope=e})),u.qZA(),u.TgZ(16,"label",12),u._UZ(17,"span",13),u.TgZ(18,"span",14),u._uU(19,"global"),u.qZA()()(),u.TgZ(20,"span",10)(21,"input",15),u.NdJ("ngModelChange",(function(e){return t.scope=e})),u.qZA(),u.TgZ(22,"label",16),u._UZ(23,"span",13),u.TgZ(24,"span",14),u._uU(25,"custom"),u.qZA()()()()()(),u.TgZ(26,"div")(27,"h2"),u._UZ(28,"system-label",17),u._uU(29,":"),u.qZA(),u.YNc(30,Ul,20,4,"article",18),u.YNc(31,Dl,8,2,"div",19),u.qZA()(),u.TgZ(32,"system-modal-footer")(33,"button",20),u.NdJ("click",(function(){return t.cancelDialog()})),u._UZ(34,"system-label",21),u.qZA(),u.TgZ(35,"button",22),u.NdJ("click",(function(){return t.save()})),u._UZ(36,"system-label",23),u.qZA()()()),2&e&&(u.xp6(11),u.Q6J("ngModel",t.name),u.xp6(4),u.Q6J("ngModel",t.scope),u.xp6(6),u.Q6J("ngModel",t.scope),u.xp6(9),u.Q6J("ngForOf",t.translations),u.xp6(1),u.Q6J("ngIf",t.languages.length>t.translations.length),u.xp6(4),u.Q6J("disabled",!t.validate()))},dependencies:[n.sg,n.O5,l.YN,l.Kr,l.Fj,l._,l.JJ,l.Q7,l.On,L._,nt.j,lt.x,ot.p,at.y],encapsulation:2})),LanguageLabelModal})();var Il=i(2644),Ql=i(5710),Sl=i(8861);const Bl=["viewcontainer"];function Fl(e,t){if(1&e&&(u.TgZ(0,"option",13),u._uU(1),u.qZA()),2&e){const e=t.$implicit;u.Q6J("value",e.id),u.xp6(1),u.hij("",e.name," ")}}let Yl=(()=>{var e;class MailboxesManager{constructor(e,t,i,n,l,o,a,d,r,c,g){(0,s.Z)(this,"modellist",void 0),(0,s.Z)(this,"backend",void 0),(0,s.Z)(this,"footer",void 0),(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"metadata",void 0),(0,s.Z)(this,"model",void 0),(0,s.Z)(this,"modelutils",void 0),(0,s.Z)(this,"modelutilities",void 0),(0,s.Z)(this,"toast",void 0),(0,s.Z)(this,"view",void 0),(0,s.Z)(this,"configuration",void 0),(0,s.Z)(this,"viewcontainer",void 0),(0,s.Z)(this,"_selected_mailbox",void 0),(0,s.Z)(this,"renderedview",[]),(0,s.Z)(this,"headeractionset",void 0),this.modellist=e,this.backend=t,this.footer=i,this.language=n,this.metadata=l,this.model=o,this.modelutils=a,this.modelutilities=d,this.toast=r,this.view=c,this.configuration=g,this.modellist.initialize("Mailboxes"),this.modellist.getListData(),this.model.module="Mailboxes",this.view.isEditable=!0,this.configuration.getData("mailboxtransports")||(this.configuration.setData("mailboxtransports",[]),this.backend.getRequest("module/Mailboxes/transports").subscribe((e=>{this.configuration.setData("mailboxtransports",e)})));let u=this.metadata.getComponentConfig("MailboxesManager","Mailboxes");this.headeractionset=u.actionset}get mailboxes(){return this.modellist.listData.list.sort(((e,t)=>e.name.localeCompare(t.name)))}get selected_mailbox(){return this.model.id}set selected_mailbox(e){this.modellist.listData.list.find((t=>t.id==e))?(this._selected_mailbox=e,this.model.id=e,this.model.getData(),this.cleanView(),this.renderedview=[],this.metadata.addComponent("ObjectRecordDetails",this.viewcontainer).subscribe((e=>{this.renderedview.push(e)})),this.metadata.addComponent("ObjectRelateContainer",this.viewcontainer).subscribe((e=>{this.renderedview.push(e)}))):(this.cleanView(),this._selected_mailbox=null,this.model.id="",this.model.initialize())}cleanView(){for(let e of this.renderedview)e.destroy()}reset(){this.view.setViewMode(),this.model.reset(),this.model.module="Mailboxes"}}return e=MailboxesManager,(0,s.Z)(MailboxesManager,"ɵfac",(function(t){return new(t||e)(u.Y36(Il.t),u.Y36(h.y),u.Y36(hl.M),u.Y36(b.d),u.Y36(f.Pu),u.Y36(Ql.o),u.Y36(Z.A),u.Y36(Z.A),u.Y36(v.A),u.Y36($i.e),u.Y36(M.C))})),(0,s.Z)(MailboxesManager,"ɵcmp",u.Xpm({type:e,selectors:[["mailboxes-manager"]],viewQuery:function(e,t){if(1&e&&u.Gf(Bl,7,u.s_b),2&e){let e;u.iGM(e=u.CRH())&&(t.viewcontainer=e.first)}},features:[u._Bn([Il.t,Ql.o,$i.e])],decls:15,vars:3,consts:[[1,"slds-grid","slds-form--inline","slds-p-around--small","slds-border--bottom"],[1,"slds-form-element"],[1,"slds-form-element__label"],["label","LBL_MAILBOX"],[1,"slds-form-element__control",2,"min-width","250px"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"slds-form-element","slds-col--bump-left"],[3,"actionset"],["system-to-bottom","",1,"slds-p-horizontal--small"],["viewcontainer",""],[3,"value"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0)(1,"div",1)(2,"label",2),u._UZ(3,"system-label",3),u.qZA(),u.TgZ(4,"div",4)(5,"div",5)(6,"select",6),u.NdJ("ngModelChange",(function(e){return t.selected_mailbox=e})),u.TgZ(7,"option",7),u._uU(8,"--"),u.qZA(),u.YNc(9,Fl,2,2,"option",8),u.qZA()()()(),u.TgZ(10,"div",9),u._UZ(11,"object-action-container",10),u.qZA()(),u.TgZ(12,"div",11),u._UZ(13,"div",null,12),u.qZA()),2&e&&(u.xp6(6),u.Q6J("ngModel",t.selected_mailbox),u.xp6(3),u.Q6J("ngForOf",t.mailboxes),u.xp6(2),u.Q6J("actionset",t.headeractionset))},dependencies:[n.sg,l.YN,l.Kr,l.EJ,l.JJ,l.On,L._,w.H,Sl.S],encapsulation:2})),MailboxesManager})();var Rl=i(7040),Gl=i(3348),Hl=i(6367),Kl=i(3208),zl=i(5638);function Vl(e,t){if(1&e&&u._UZ(0,"field-label",3),2&e){const e=u.oxw();u.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Pl(e,t){if(1&e&&(u.TgZ(0,"field-generic-display",4),u._uU(1),u.qZA()),2&e){const e=u.oxw();u.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig)("fieldid",e.fieldid),u.xp6(1),u.hij(" ",e.getValue(),"\n")}}function $l(e,t){if(1&e&&(u.TgZ(0,"option",12),u._UZ(1,"system-label",13),u.qZA()),2&e){const e=t.$implicit;u.Q6J("value",e.name),u.xp6(1),u.Q6J("label",e.label)}}function jl(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div",5)(1,"div",6)(2,"div",7)(3,"select",8,9),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw();return u.KtG(i.value=t)})),u.YNc(5,$l,2,2,"option",10),u.qZA()(),u._UZ(6,"field-messages",11),u.qZA()()}if(2&e){const e=u.oxw();u.xp6(1),u.Q6J("ngClass",e.getFieldClass()),u.xp6(2),u.Q6J("ngModel",e.value),u.xp6(2),u.Q6J("ngForOf",e.transportoptions),u.xp6(1),u.Q6J("fieldname",e.fieldname)}}let Wl=(()=>{var e;class MailboxesTransportsEnum extends Rl.O{constructor(e,t,i,n,l,o){super(e,t,i,n,l),(0,s.Z)(this,"model",void 0),(0,s.Z)(this,"view",void 0),(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"metadata",void 0),(0,s.Z)(this,"router",void 0),(0,s.Z)(this,"configuration",void 0),this.model=e,this.view=t,this.language=i,this.metadata=n,this.router=l,this.configuration=o}getValue(){let e=this.configuration.getData("mailboxtransports").find((e=>e.name==this.value));return e?this.language.getLabel(e.label):this.value}get transportoptions(){return this.configuration.getData("mailboxtransports")}}return e=MailboxesTransportsEnum,(0,s.Z)(MailboxesTransportsEnum,"ɵfac",(function(t){return new(t||e)(u.Y36(Ql.o),u.Y36($i.e),u.Y36(b.d),u.Y36(f.Pu),u.Y36(Gl.F0),u.Y36(M.C))})),(0,s.Z)(MailboxesTransportsEnum,"ɵcmp",u.Xpm({type:e,selectors:[["ng-component"]],features:[u.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","fieldid",4,"ngIf"],["class","slds-form-element",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig","fieldid"],[1,"slds-form-element"],[1,"slds-form-element__control",3,"ngClass"],[1,"slds-select_container","slds-m-vertical--xx-small"],[1,"slds-select",3,"ngModel","ngModelChange"],["focus",""],[3,"value",4,"ngFor","ngForOf"],[3,"fieldname"],[3,"value"],[3,"label"]],template:function(e,t){1&e&&(u.YNc(0,Vl,1,2,"field-label",0),u.YNc(1,Pl,2,5,"field-generic-display",1),u.YNc(2,jl,7,4,"div",2)),2&e&&(u.Q6J("ngIf",t.displayLabel),u.xp6(1),u.Q6J("ngIf",!t.isEditMode()),u.xp6(1),u.Q6J("ngIf",t.isEditMode()))},dependencies:[n.mk,n.sg,n.O5,l.YN,l.Kr,l.EJ,l.JJ,l.On,L._,Hl.q,Kl.D,zl.a],encapsulation:2})),MailboxesTransportsEnum})();function Xl(e,t){1&e&&(u.TgZ(0,"div",6),u._UZ(1,"system-spinner",11),u.TgZ(2,"span",12),u._UZ(3,"system-label",13),u.qZA()())}function eo(e,t){1&e&&(u.TgZ(0,"span",12),u._UZ(1,"system-label",17),u.qZA())}function to(e,t){if(1&e&&(u.TgZ(0,"span",18),u._uU(1),u.qZA()),2&e){const e=u.oxw(2);u.xp6(1),u.Oqu(e.errorMessage)}}function io(e,t){if(1&e&&(u.TgZ(0,"div",6),u._UZ(1,"system-utility-icon",14),u.YNc(2,eo,2,0,"span",15),u.YNc(3,to,2,1,"span",16),u.qZA()),2&e){const e=u.oxw();u.xp6(1),u.Q6J("icon",e.validConnection?"check":"error")("colorclass",e.validConnection?"slds-icon-text-success":"slds-icon-text-error"),u.xp6(1),u.Q6J("ngIf",e.validConnection),u.xp6(1),u.Q6J("ngIf",!!e.errorMessage)}}let so=(()=>{var e;class MailboxesmanagerTestModal{constructor(e,t,i,n){(0,s.Z)(this,"backend",void 0),(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"model",void 0),(0,s.Z)(this,"session",void 0),(0,s.Z)(this,"self",{}),(0,s.Z)(this,"validConnection",void 0),(0,s.Z)(this,"isvalid",new u.vpe),(0,s.Z)(this,"testemailaddress",""),(0,s.Z)(this,"testing",!1),(0,s.Z)(this,"tested",!1),(0,s.Z)(this,"testtype","email"),(0,s.Z)(this,"errorMessage",void 0),this.backend=e,this.language=t,this.model=i,this.session=n}ngOnInit(){if("sms"===this.testtype);else this.testemailaddress=this.session.authData.email}testConnection(){this.testing=!0,this.testemailaddress=this.testemailaddress.trim();let e=this.model.utils.spiceModel2backend("Mailboxes",this.model.data);this.backend.postRequest("module/Mailboxes/test",{},{data:e,test_email:this.testemailaddress}).subscribe({next:e=>{!0===e.result?this.validConnection=!0:(this.validConnection=!1,this.errorMessage=e.errors),this.tested=!0,this.testing=!1},error:e=>{this.tested=!1,this.testing=!1,this.validConnection=void 0,this.errorMessage=e.error?.error?.message??e.error?.message}})}close(){this.isvalid.emit(this.validConnection),this.self.destroy()}onModalEscX(){this.close()}get testtypelabel(){return this.language.getLabel("email"==this.testtype?"LBL_EMAIL":"LBL_SMS")}}return e=MailboxesmanagerTestModal,(0,s.Z)(MailboxesmanagerTestModal,"ɵfac",(function(t){return new(t||e)(u.Y36(h.y),u.Y36(b.d),u.Y36(Ql.o),u.Y36(fl.n))})),(0,s.Z)(MailboxesmanagerTestModal,"ɵcmp",u.Xpm({type:e,selectors:[["ng-component"]],decls:17,vars:7,consts:[[3,"close"],["label","LBL_TEST"],[1,"slds-form-element","slds-size--1-of-1"],[1,"slds-truncate","slds-form-element__label"],["label","LBL_DESTINATION_ADDRESS"],["type","text",1,"slds-input",3,"disabled","ngModel","ngModelChange"],[1,"slds-grid","slds-grid--vertical-align-center"],["class","slds-grid slds-grid--vertical-align-center",4,"ngIf"],[1,"slds-button","slds-col--bump-left","slds-button--neutral",3,"disabled","click"],["label","LBL_CLOSE"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["size","10"],[1,"slds-p-horizontal--xx-small"],["label","LBL_TESTING"],["size","x-small",3,"icon","colorclass"],["class","slds-p-horizontal--xx-small",4,"ngIf"],["class","slds-p-horizontal--xx-small slds-text-color--error",4,"ngIf"],["label","LBL_OK"],[1,"slds-p-horizontal--xx-small","slds-text-color--error"]],template:function(e,t){1&e&&(u.TgZ(0,"system-modal")(1,"system-modal-header",0),u.NdJ("close",(function(){return t.close()})),u._UZ(2,"system-label",1),u._uU(3),u.qZA(),u.TgZ(4,"system-modal-content")(5,"div",2)(6,"label",3),u._UZ(7,"system-label",4),u.qZA(),u.TgZ(8,"input",5),u.NdJ("ngModelChange",(function(e){return t.testemailaddress=e})),u.qZA()()(),u.TgZ(9,"system-modal-footer")(10,"div",6),u.YNc(11,Xl,4,0,"div",7),u.YNc(12,io,4,4,"div",7),u.TgZ(13,"button",8),u.NdJ("click",(function(){return t.close()})),u._UZ(14,"system-label",9),u.qZA(),u.TgZ(15,"button",10),u.NdJ("click",(function(){return t.testConnection()})),u._UZ(16,"system-label",1),u.qZA()()()()),2&e&&(u.xp6(3),u.hij(" ",t.testtypelabel,""),u.xp6(5),u.Q6J("disabled",t.testing)("ngModel",t.testemailaddress),u.xp6(3),u.Q6J("ngIf",t.testing),u.xp6(1),u.Q6J("ngIf",!(t.testing||void 0===t.validConnection&&!t.errorMessage)),u.xp6(1),u.Q6J("disabled",!t.validConnection),u.xp6(2),u.Q6J("disabled",0===t.testemailaddress.trim().length))},dependencies:[n.O5,l.Fj,l.JJ,l.On,L._,nt.j,lt.x,ot.p,at.y,ol.W,m.r],encapsulation:2})),MailboxesmanagerTestModal})();function no(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div",10)(1,"label",11),u._UZ(2,"system-label",12),u.qZA(),u.TgZ(3,"input",13),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw();return u.KtG(i.testemailaddress=t)})),u.qZA()()}if(2&e){const e=u.oxw();u.xp6(3),u.Q6J("ngModel",e.testemailaddress)}}function lo(e,t){if(1&e&&u._UZ(0,"system-utility-icon",17),2&e){const e=u.oxw(2);u.Q6J("icon",e.imapIcon)("colorclass",e.imapStatus?"slds-icon-text-success":"slds-icon-text-error")}}function oo(e,t){if(1&e&&(u.TgZ(0,"div",14)(1,"div"),u._UZ(2,"system-label",15),u.qZA(),u.YNc(3,lo,1,2,"system-utility-icon",16),u.qZA()),2&e){const e=u.oxw();u.xp6(3),u.Q6J("ngIf",void 0!==e.imapStatus)}}function ao(e,t){if(1&e&&u._UZ(0,"system-utility-icon",17),2&e){const e=u.oxw(2);u.Q6J("icon",e.smtpIcon)("colorclass",e.smtpStatus?"slds-icon-text-success":"slds-icon-text-error")}}function ro(e,t){if(1&e&&(u.TgZ(0,"div",14)(1,"div"),u._UZ(2,"system-label",18),u.qZA(),u.YNc(3,ao,1,2,"system-utility-icon",16),u.qZA()),2&e){const e=u.oxw();u.xp6(3),u.Q6J("ngIf",void 0!==e.smtpStatus)}}function co(e,t){1&e&&(u.TgZ(0,"div",4),u._UZ(1,"system-spinner",19),u.TgZ(2,"span",20),u._UZ(3,"system-label",21),u.qZA()())}function go(e,t){if(1&e&&(u.TgZ(0,"span",24),u._uU(1),u.qZA()),2&e){const e=u.oxw(2);u.xp6(1),u.Oqu(e.errorMessage)}}function uo(e,t){if(1&e&&(u.TgZ(0,"div",4),u._UZ(1,"system-utility-icon",22),u.YNc(2,go,2,1,"span",23),u.qZA()),2&e){const e=u.oxw();u.xp6(1),u.Q6J("icon",e.validConnection?"check":"error")("colorclass",e.validConnection?"slds-icon-text-success":"slds-icon-text-error"),u.xp6(1),u.Q6J("ngIf",!!e.errorMessage)}}let mo=(()=>{var e;class MailboxesmanagerTestIMAPModal{constructor(e,t,i,n){(0,s.Z)(this,"backend",void 0),(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"model",void 0),(0,s.Z)(this,"session",void 0),(0,s.Z)(this,"self",{}),(0,s.Z)(this,"validConnection",void 0),(0,s.Z)(this,"isvalid",new u.vpe),(0,s.Z)(this,"testemailaddress",""),(0,s.Z)(this,"imapStatus",void 0),(0,s.Z)(this,"smtpStatus",void 0),(0,s.Z)(this,"testing",!1),(0,s.Z)(this,"tested",!1),(0,s.Z)(this,"errorMessage",void 0),this.backend=e,this.language=t,this.model=i,this.session=n,this.testemailaddress=this.session.authData.email}get isInbound(){return!!this.model.getFieldValue("inbound_comm")}get isOutbound(){let e=this.model.getFieldValue("outbound_comm");return!(!e||"no"==e)}testConnection(){this.testing=!0;let e=this.model.utils.spiceModel2backend("Mailboxes",this.model.data);this.backend.postRequest("module/Mailboxes/test",{},{data:e,test_email:this.testemailaddress}).subscribe({next:e=>{this.validConnection=!0,this.isInbound&&(!0!==e.imap.result&&(this.validConnection=!1),e.imap?.errors||e.errors?(this.imapStatus=!1,this.errorMessage=e.errors??e.imap.errors):this.imapStatus=!0),this.isOutbound&&(e.smtp?.errors||e.errors?(this.smtpStatus=!1,this.validConnection=!1,this.errorMessage=e.errors??e.smtp.errors):this.smtpStatus=!0),this.tested=!0,this.testing=!1},error:e=>{this.testing=!1,this.validConnection=void 0,this.errorMessage=e.error?.error?.message??e.error?.message}})}close(){void 0!==this.validConnection&&this.isvalid.emit(this.validConnection),this.self.destroy()}get imapIcon(){return this.imapStatus?"check":"error"}get smtpIcon(){return this.smtpStatus?"check":"error"}onModalEscX(){this.close()}}return e=MailboxesmanagerTestIMAPModal,(0,s.Z)(MailboxesmanagerTestIMAPModal,"ɵfac",(function(t){return new(t||e)(u.Y36(h.y),u.Y36(b.d),u.Y36(Ql.o),u.Y36(fl.n))})),(0,s.Z)(MailboxesmanagerTestIMAPModal,"ɵcmp",u.Xpm({type:e,selectors:[["ng-component"]],decls:15,vars:5,consts:[[3,"close"],["class","slds-form-element slds-size--1-of-1",4,"ngIf"],[1,"slds-p-vertical--x-small"],["class","slds-grid slds-grid_vertical-align-center slds-p-vertical--xxx-small",4,"ngIf"],[1,"slds-grid","slds-grid--vertical-align-center"],["class","slds-grid slds-grid--vertical-align-center",4,"ngIf"],[1,"slds-col--bump-left","slds-button","slds-button--neutral",3,"click"],["label","LBL_TEST"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_CLOSE"],[1,"slds-form-element","slds-size--1-of-1"],[1,"slds-truncate","slds-form-element__label"],["label","LBL_TEST_EMAIL"],["type","text",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-grid","slds-grid_vertical-align-center","slds-p-vertical--xxx-small"],["label","LBL_IMAP"],["size","xx-small","class","slds-m-left--xx-small",3,"icon","colorclass",4,"ngIf"],["size","xx-small",1,"slds-m-left--xx-small",3,"icon","colorclass"],["label","LBL_SMTP"],["size","10"],[1,"slds-p-horizontal--xx-small"],["label","LBL_TESTING"],["size","x-small",3,"icon","colorclass"],["class","slds-p-horizontal--xx-small slds-text-color--error",4,"ngIf"],[1,"slds-p-horizontal--xx-small","slds-text-color--error"]],template:function(e,t){1&e&&(u.TgZ(0,"system-modal")(1,"system-modal-header",0),u.NdJ("close",(function(){return t.close()})),u.qZA(),u.TgZ(2,"system-modal-content"),u.YNc(3,no,4,1,"div",1),u.TgZ(4,"div",2),u.YNc(5,oo,4,1,"div",3),u.YNc(6,ro,4,1,"div",3),u.qZA()(),u.TgZ(7,"system-modal-footer")(8,"div",4),u.YNc(9,co,4,0,"div",5),u.YNc(10,uo,3,3,"div",5),u.TgZ(11,"button",6),u.NdJ("click",(function(){return t.testConnection()})),u._UZ(12,"system-label",7),u.qZA(),u.TgZ(13,"button",8),u.NdJ("click",(function(){return t.close()})),u._UZ(14,"system-label",9),u.qZA()()()()),2&e&&(u.xp6(3),u.Q6J("ngIf",t.isOutbound),u.xp6(2),u.Q6J("ngIf",t.isInbound),u.xp6(1),u.Q6J("ngIf",t.isOutbound),u.xp6(3),u.Q6J("ngIf",t.testing),u.xp6(1),u.Q6J("ngIf",!(t.testing||void 0===t.validConnection&&!t.errorMessage)))},dependencies:[n.O5,l.Fj,l.JJ,l.On,L._,nt.j,lt.x,ot.p,at.y,ol.W,m.r],encapsulation:2})),MailboxesmanagerTestIMAPModal})(),po=(()=>{var e;class MailboxesGmailTrafficManager{constructor(e,t,i,n,l,o,a){(0,s.Z)(this,"backend",void 0),(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"model",void 0),(0,s.Z)(this,"modal",void 0),(0,s.Z)(this,"toast",void 0),(0,s.Z)(this,"view",void 0),(0,s.Z)(this,"injector",void 0),this.backend=e,this.language=t,this.model=i,this.modal=n,this.toast=l,this.view=o,this.injector=a;let d=this.model.getField("settings");(!d||d&&0==d.length)&&this.model.setField("settings",{gmail_user_name:"",gmail_email_address:"",gmail_delete_emails:!1})}get isInbound(){return!!this.model.getFieldValue("inbound_comm")}get isOutbound(){return"no"!=this.model.getFieldValue("outbound_comm")}getMailboxes(){let e=new pn.x,t=this.model.utils.spiceModel2backend("Mailboxes",this.model.data);return this.backend.postRequest("module/Mailboxes/gmail/labels",{},{data:t}).subscribe((t=>{!0===t.result?e.next(t):e.next(!1),e.complete()})),e.asObservable()}testConnection(){this.modal.openModal("MailboxesmanagerTestModal",!0,this.injector)}}return e=MailboxesGmailTrafficManager,(0,s.Z)(MailboxesGmailTrafficManager,"ɵfac",(function(t){return new(t||e)(u.Y36(h.y),u.Y36(b.d),u.Y36(Ql.o),u.Y36(x.o),u.Y36(v.A),u.Y36($i.e),u.Y36(u.zs3))})),(0,s.Z)(MailboxesGmailTrafficManager,"ɵcmp",u.Xpm({type:e,selectors:[["mailboxes-gmail-traffic-manager"]],decls:20,vars:7,consts:[[1,"slds-m-vertical--xx-small","slds-box--border"],[1,"slds-p-around--x-small"],["label","LBL_GMAIL"],[1,"slds-grid","slds-p-vertical--xx-small"],[1,"slds-form-element","slds-size--1-of-2","slds-p-right--xx-small"],[1,"slds-truncate","slds-form-element__label"],["label","LBL_EMAIL_ADDRESS"],["type","text",1,"slds-input",3,"ngModel","disabled","ngModelChange"],[1,"slds-form-element","slds-size--1-of-2","slds-p-left--xx-small"],["label","LBL_USER_NAME"],[3,"disabled","ngModel","ngModelChange"],["label","LBL_DELETE_REMOTE"],["type","button",1,"slds-col--bump-left","slds-button","slds-button--neutral",3,"disabled","click"],["label","LBL_TEST_CONNECTION"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0)(1,"div",1)(2,"h1"),u._UZ(3,"system-label",2),u.qZA(),u.TgZ(4,"div",3)(5,"div",4)(6,"label",5),u._UZ(7,"system-label",6),u.qZA(),u.TgZ(8,"input",7),u.NdJ("ngModelChange",(function(e){return t.model.data.settings.gmail_email_address=e})),u.qZA()(),u.TgZ(9,"div",8)(10,"label",5),u._UZ(11,"system-label",9),u.qZA(),u.TgZ(12,"input",7),u.NdJ("ngModelChange",(function(e){return t.model.data.settings.gmail_user_name=e})),u.qZA()()(),u.TgZ(13,"div",3)(14,"div",4)(15,"system-checkbox",10),u.NdJ("ngModelChange",(function(e){return t.model.data.settings.gmail_delete_emails=e})),u._UZ(16,"system-label",11),u.qZA()()(),u.TgZ(17,"div",3)(18,"button",12),u.NdJ("click",(function(){return t.testConnection()})),u._UZ(19,"system-label",13),u.qZA()()()()),2&e&&(u.xp6(8),u.Q6J("ngModel",t.model.data.settings.gmail_email_address)("disabled",!t.view.isEditMode()),u.xp6(4),u.Q6J("ngModel",t.model.data.settings.gmail_user_name)("disabled",!t.view.isEditMode()),u.xp6(3),u.Q6J("disabled",!t.view.isEditMode())("ngModel",t.model.data.settings.gmail_delete_emails),u.xp6(3),u.Q6J("disabled",!t.view.isEditMode()))},dependencies:[l.Fj,l.JJ,l.On,Q.U,L._],encapsulation:2})),MailboxesGmailTrafficManager})();var ho=i(7919);let fo=(()=>{var e;class MailboxesMailgunTrafficManager{constructor(e,t,i,n,l){(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"injector",void 0),(0,s.Z)(this,"model",void 0),(0,s.Z)(this,"modal",void 0),(0,s.Z)(this,"view",void 0),this.language=e,this.injector=t,this.model=i,this.modal=n,this.view=l;let o=this.model.getField("settings");(!o||o&&0==o.length)&&this.model.setField("settings",{api_key:"",domain:"",imap_pop3_display_name:"",imap_pop3_username:"",reply_to:"",region:""})}testConnection(){this.modal.openModal("MailboxesmanagerTestModal",!0,this.injector)}}return e=MailboxesMailgunTrafficManager,(0,s.Z)(MailboxesMailgunTrafficManager,"ɵfac",(function(t){return new(t||e)(u.Y36(b.d),u.Y36(u.zs3),u.Y36(Ql.o),u.Y36(x.o),u.Y36($i.e))})),(0,s.Z)(MailboxesMailgunTrafficManager,"ɵcmp",u.Xpm({type:e,selectors:[["mailboxes-mailgun-traffic-manager"]],decls:38,vars:13,consts:[[1,"slds-m-vertical--xx-small","slds-box--border"],[1,"slds-p-around--x-small"],["label","LBL_MAILGUN"],[1,"slds-grid","slds-p-vertical--xx-small"],[1,"slds-form-element","slds-size--1-of-2","slds-p-right--xx-small"],[1,"slds-truncate","slds-form-element__label"],["label","LBL_DISPLAY_NAME"],["type","text",1,"slds-input",3,"disabled","ngModel","ngModelChange"],[1,"slds-form-element","slds-size--1-of-2","slds-p-left--xx-small"],["label","LBL_DOMAIN"],["type","text",1,"slds-input","ng-pristine",3,"ngModel","disabled","ngModelChange"],["label","LBL_USER_NAME"],["type","text",1,"slds-input",3,"ngModel","disabled","ngModelChange"],["label","LBL_REPLY_TO"],["label","LBL_REGION"],["type","text",1,"slds-select",3,"disabled","ngModel","ngModelChange"],["value","eu"],["label","LBL_EU"],["value","us"],["label","LBL_USA"],["label","LBL_API_KEY"],[3,"ngModel","disabled","ngModelChange"],["type","button",1,"slds-col--bump-left","slds-button","slds-button--neutral",3,"disabled","click"],["label","LBL_TEST_CONNECTION"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0)(1,"div",1)(2,"h1"),u._UZ(3,"system-label",2),u.qZA(),u.TgZ(4,"div",3)(5,"div",4)(6,"label",5),u._UZ(7,"system-label",6),u.qZA(),u.TgZ(8,"input",7),u.NdJ("ngModelChange",(function(e){return t.model.data.settings.imap_pop3_display_name=e})),u.qZA()(),u.TgZ(9,"div",8)(10,"label",5),u._UZ(11,"system-label",9),u.qZA(),u.TgZ(12,"input",10),u.NdJ("ngModelChange",(function(e){return t.model.data.settings.domain=e})),u.qZA()()(),u.TgZ(13,"div",3)(14,"div",4)(15,"label",5),u._UZ(16,"system-label",11),u.qZA(),u.TgZ(17,"input",12),u.NdJ("ngModelChange",(function(e){return t.model.data.settings.imap_pop3_username=e})),u.qZA()(),u.TgZ(18,"div",4)(19,"label",5),u._UZ(20,"system-label",13),u.qZA(),u.TgZ(21,"input",7),u.NdJ("ngModelChange",(function(e){return t.model.data.settings.reply_to=e})),u.qZA()()(),u.TgZ(22,"div",3)(23,"div",4)(24,"label",5),u._UZ(25,"system-label",14),u.qZA(),u.TgZ(26,"select",15),u.NdJ("ngModelChange",(function(e){return t.model.data.settings.region=e})),u.TgZ(27,"option",16),u._UZ(28,"system-label",17),u.qZA(),u.TgZ(29,"option",18),u._UZ(30,"system-label",19),u.qZA()()(),u.TgZ(31,"div",8)(32,"label",5),u._UZ(33,"system-label",20),u.qZA(),u.TgZ(34,"system-input-password",21),u.NdJ("ngModelChange",(function(e){return t.model.data.settings.api_key=e})),u.qZA()()(),u.TgZ(35,"div",3)(36,"button",22),u.NdJ("click",(function(){return t.testConnection()})),u._UZ(37,"system-label",23),u.qZA()()()()),2&e&&(u.xp6(8),u.Q6J("disabled",!t.view.isEditMode())("ngModel",t.model.data.settings.imap_pop3_display_name),u.xp6(4),u.Q6J("ngModel",t.model.data.settings.domain)("disabled",!t.view.isEditMode()),u.xp6(5),u.Q6J("ngModel",t.model.data.settings.imap_pop3_username)("disabled",!t.view.isEditMode()),u.xp6(4),u.Q6J("disabled",!t.view.isEditMode())("ngModel",t.model.data.settings.reply_to),u.xp6(5),u.Q6J("disabled",!t.view.isEditMode())("ngModel",t.model.data.settings.region),u.xp6(8),u.Q6J("ngModel",t.model.data.settings.api_key)("disabled",!t.view.isEditMode()),u.xp6(2),u.Q6J("disabled",!t.view.isEditMode()))},dependencies:[l.YN,l.Kr,l.Fj,l.EJ,l.JJ,l.On,ho.Z,L._],encapsulation:2})),MailboxesMailgunTrafficManager})(),bo=(()=>{var e;class MailboxesSendgridTrafficManager{constructor(e,t,i,n,l){(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"model",void 0),(0,s.Z)(this,"modal",void 0),(0,s.Z)(this,"view",void 0),(0,s.Z)(this,"injector",void 0),this.language=e,this.model=t,this.modal=i,this.view=n,this.injector=l;let o=this.model.getField("settings");(!o||o&&0==o.length)&&(this.model.data.settings={api_key:"",imap_pop3_display_name:"",imap_pop3_username:"",reply_to:""})}testConnection(){this.modal.openModal("MailboxesmanagerTestModal",!0,this.injector)}}return e=MailboxesSendgridTrafficManager,(0,s.Z)(MailboxesSendgridTrafficManager,"ɵfac",(function(t){return new(t||e)(u.Y36(b.d),u.Y36(Ql.o),u.Y36(x.o),u.Y36($i.e),u.Y36(u.zs3))})),(0,s.Z)(MailboxesSendgridTrafficManager,"ɵcmp",u.Xpm({type:e,selectors:[["mailboxes-sendgrid-traffic-manager"]],decls:25,vars:9,consts:[[1,"slds-m-vertical--xx-small","slds-box--border"],[1,"slds-p-around--x-small"],["label","LBL_SENDGRID"],[1,"slds-grid","slds-p-vertical--xx-small"],[1,"slds-form-element","slds-size--1-of-2","slds-p-right--xx-small"],[1,"slds-truncate","slds-form-element__label"],["label","LBL_DISPLAY_NAME"],["type","text",1,"slds-input","ng-pristine","ng-valid",3,"disabled","ngModel","ngModelChange"],[1,"slds-form-element","slds-size--1-of-2","slds-p-left--xx-small"],["label","LBL_REPLY_TO"],["label","LBL_USER_NAME"],["label","LBL_API_KEY"],[3,"disabled","ngModel","ngModelChange"],["type","button",1,"slds-col--bump-left","slds-button","slds-button--neutral",3,"disabled","click"],["label","LBL_SEND_TEST_EMAIL"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0)(1,"div",1)(2,"h1"),u._UZ(3,"system-label",2),u.qZA(),u.TgZ(4,"div",3)(5,"div",4)(6,"label",5),u._UZ(7,"system-label",6),u.qZA(),u.TgZ(8,"input",7),u.NdJ("ngModelChange",(function(e){return t.model.data.settings.imap_pop3_display_name=e})),u.qZA()(),u.TgZ(9,"div",8)(10,"label",5),u._UZ(11,"system-label",9),u.qZA(),u.TgZ(12,"input",7),u.NdJ("ngModelChange",(function(e){return t.model.data.settings.reply_to=e})),u.qZA()()(),u.TgZ(13,"div",3)(14,"div",4)(15,"label",5),u._UZ(16,"system-label",10),u.qZA(),u.TgZ(17,"input",7),u.NdJ("ngModelChange",(function(e){return t.model.data.settings.imap_pop3_username=e})),u.qZA()(),u.TgZ(18,"div",8)(19,"label",5),u._UZ(20,"system-label",11),u.qZA(),u.TgZ(21,"system-input-password",12),u.NdJ("ngModelChange",(function(e){return t.model.data.settings.api_key=e})),u.qZA()()(),u.TgZ(22,"div",3)(23,"button",13),u.NdJ("click",(function(){return t.testConnection()})),u._UZ(24,"system-label",14),u.qZA()()()()),2&e&&(u.xp6(8),u.Q6J("disabled",!t.view.isEditMode())("ngModel",t.model.data.settings.imap_pop3_display_name),u.xp6(4),u.Q6J("disabled",!t.view.isEditMode())("ngModel",t.model.data.settings.reply_to),u.xp6(5),u.Q6J("disabled",!t.view.isEditMode())("ngModel",t.model.data.settings.imap_pop3_username),u.xp6(4),u.Q6J("disabled",!t.view.isEditMode())("ngModel",t.model.data.settings.api_key),u.xp6(2),u.Q6J("disabled",!t.view.isEditMode()))},dependencies:[l.Fj,l.JJ,l.On,ho.Z,L._],encapsulation:2})),MailboxesSendgridTrafficManager})(),Zo=(()=>{var e;class MailboxesSendinblueTrafficManager{constructor(e,t,i,n,l){(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"model",void 0),(0,s.Z)(this,"modal",void 0),(0,s.Z)(this,"view",void 0),(0,s.Z)(this,"injector",void 0),this.language=e,this.model=t,this.modal=i,this.view=n,this.injector=l;let o=this.model.getField("settings");(!o||o&&0==o.length)&&(this.model.data.settings={api_key:"",sender_name:"",sender_address:"",reply_to:""})}testConnection(){this.modal.openModal("MailboxesmanagerTestModal",!0,this.injector)}}return e=MailboxesSendinblueTrafficManager,(0,s.Z)(MailboxesSendinblueTrafficManager,"ɵfac",(function(t){return new(t||e)(u.Y36(b.d),u.Y36(Ql.o),u.Y36(x.o),u.Y36($i.e),u.Y36(u.zs3))})),(0,s.Z)(MailboxesSendinblueTrafficManager,"ɵcmp",u.Xpm({type:e,selectors:[["mailboxes-sendinblue-traffic-manager"]],decls:25,vars:9,consts:[[1,"slds-m-vertical--xx-small","slds-box--border"],[1,"slds-p-around--x-small"],["label","LBL_SENDGRID"],[1,"slds-grid","slds-p-vertical--xx-small"],[1,"slds-form-element","slds-size--1-of-2","slds-p-right--xx-small"],[1,"slds-truncate","slds-form-element__label"],["label","LBL_SENDER_NAME"],["type","text",1,"slds-input","ng-pristine","ng-valid",3,"disabled","ngModel","ngModelChange"],[1,"slds-form-element","slds-size--1-of-2","slds-p-left--xx-small"],["label","LBL_SENDER_ADDRESS"],["label","LBL_REPLY_TO"],["label","LBL_API_KEY"],[3,"disabled","ngModel","ngModelChange"],["type","button",1,"slds-col--bump-left","slds-button","slds-button--neutral",3,"disabled","click"],["label","LBL_SEND_TEST_EMAIL"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0)(1,"div",1)(2,"h1"),u._UZ(3,"system-label",2),u.qZA(),u.TgZ(4,"div",3)(5,"div",4)(6,"label",5),u._UZ(7,"system-label",6),u.qZA(),u.TgZ(8,"input",7),u.NdJ("ngModelChange",(function(e){return t.model.data.settings.sender_name=e})),u.qZA()(),u.TgZ(9,"div",8)(10,"label",5),u._UZ(11,"system-label",9),u.qZA(),u.TgZ(12,"input",7),u.NdJ("ngModelChange",(function(e){return t.model.data.settings.sender_address=e})),u.qZA()()(),u.TgZ(13,"div",3)(14,"div",8)(15,"label",5),u._UZ(16,"system-label",10),u.qZA(),u.TgZ(17,"input",7),u.NdJ("ngModelChange",(function(e){return t.model.data.settings.reply_to=e})),u.qZA()(),u.TgZ(18,"div",8)(19,"label",5),u._UZ(20,"system-label",11),u.qZA(),u.TgZ(21,"system-input-password",12),u.NdJ("ngModelChange",(function(e){return t.model.data.settings.api_key=e})),u.qZA()()(),u.TgZ(22,"div",3)(23,"button",13),u.NdJ("click",(function(){return t.testConnection()})),u._UZ(24,"system-label",14),u.qZA()()()()),2&e&&(u.xp6(8),u.Q6J("disabled",!t.view.isEditMode())("ngModel",t.model.data.settings.sender_name),u.xp6(4),u.Q6J("disabled",!t.view.isEditMode())("ngModel",t.model.data.settings.sender_address),u.xp6(5),u.Q6J("disabled",!t.view.isEditMode())("ngModel",t.model.data.settings.reply_to),u.xp6(4),u.Q6J("disabled",!t.view.isEditMode())("ngModel",t.model.data.settings.api_key),u.xp6(2),u.Q6J("disabled",!t.view.isEditMode()))},dependencies:[l.Fj,l.JJ,l.On,ho.Z,L._],encapsulation:2})),MailboxesSendinblueTrafficManager})(),_o=(()=>{var e;class MailboxesTwillioTrafficManager{constructor(e,t,i,n,l){(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"model",void 0),(0,s.Z)(this,"modal",void 0),(0,s.Z)(this,"view",void 0),(0,s.Z)(this,"injector",void 0),this.language=e,this.model=t,this.modal=i,this.view=n,this.injector=l;let o=this.model.getField("settings");(!o||o&&0==o.length)&&(this.model.data.settings={account_sid:"",auth_token:"",phone_number_from:""})}testConnection(){this.modal.openModal("MailboxesmanagerTestModal",!0,this.injector)}}return e=MailboxesTwillioTrafficManager,(0,s.Z)(MailboxesTwillioTrafficManager,"ɵfac",(function(t){return new(t||e)(u.Y36(b.d),u.Y36(Ql.o),u.Y36(x.o),u.Y36($i.e),u.Y36(u.zs3))})),(0,s.Z)(MailboxesTwillioTrafficManager,"ɵcmp",u.Xpm({type:e,selectors:[["mailboxes-twillio-traffic-manager"]],decls:20,vars:7,consts:[[1,"slds-m-vertical--xx-small","slds-box--border"],[1,"slds-p-around--x-small"],["label","LBL_TWILIO"],[1,"slds-grid","slds-p-vertical--xx-small"],[1,"slds-form-element","slds-size--1-of-3","slds-p-right--xx-small"],[1,"slds-truncate","slds-form-element__label"],["label","LBL_ACCOUNT_SID"],[3,"disabled","ngModel","ngModelChange"],[1,"slds-form-element","slds-size--1-of-3","slds-p-left--xx-small"],["label","LBL_AUTH_TOKEN"],["label","LBL_PHONE_NUMBER_FROM"],["type","text",1,"slds-input",3,"disabled","ngModel","ngModelChange"],["type","button",1,"slds-col--bump-left","slds-button","slds-button--neutral",3,"disabled","click"],["label","LBL_SEND_TEST_SMS"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0)(1,"div",1)(2,"h1"),u._UZ(3,"system-label",2),u.qZA(),u.TgZ(4,"div",3)(5,"div",4)(6,"label",5),u._UZ(7,"system-label",6),u.qZA(),u.TgZ(8,"system-input-password",7),u.NdJ("ngModelChange",(function(e){return t.model.data.settings.account_sid=e})),u.qZA()(),u.TgZ(9,"div",8)(10,"label",5),u._UZ(11,"system-label",9),u.qZA(),u.TgZ(12,"system-input-password",7),u.NdJ("ngModelChange",(function(e){return t.model.data.settings.auth_token=e})),u.qZA()(),u.TgZ(13,"div",8)(14,"label",5),u._UZ(15,"system-label",10),u.qZA(),u.TgZ(16,"input",11),u.NdJ("ngModelChange",(function(e){return t.model.data.settings.phone_number_from=e})),u.qZA()()(),u.TgZ(17,"div",3)(18,"button",12),u.NdJ("click",(function(){return t.testConnection()})),u._UZ(19,"system-label",13),u.qZA()()()()),2&e&&(u.xp6(8),u.Q6J("disabled",!t.view.isEditMode())("ngModel",t.model.data.settings.account_sid),u.xp6(4),u.Q6J("disabled",!t.view.isEditMode())("ngModel",t.model.data.settings.auth_token),u.xp6(4),u.Q6J("disabled",!t.view.isEditMode())("ngModel",t.model.data.settings.phone_number_from),u.xp6(2),u.Q6J("disabled",!t.view.isEditMode()))},dependencies:[l.Fj,l.JJ,l.On,ho.Z,L._],encapsulation:2})),MailboxesTwillioTrafficManager})(),yo=(()=>{var e;class MailboxesA1SmsTrafficManager{constructor(e,t,i,n,l){(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"model",void 0),(0,s.Z)(this,"modal",void 0),(0,s.Z)(this,"view",void 0),(0,s.Z)(this,"injector",void 0),this.language=e,this.model=t,this.modal=i,this.view=n,this.injector=l;let o=this.model.getField("settings");(!o||o&&0==o.length)&&this.model.setField("settings",{a1_username:"",a1_password:"",a1_sender:""})}testConnection(){this.modal.openModal("MailboxesmanagerTestModal",!0,this.injector)}}return e=MailboxesA1SmsTrafficManager,(0,s.Z)(MailboxesA1SmsTrafficManager,"ɵfac",(function(t){return new(t||e)(u.Y36(b.d),u.Y36(Ql.o),u.Y36(x.o),u.Y36($i.e),u.Y36(u.zs3))})),(0,s.Z)(MailboxesA1SmsTrafficManager,"ɵcmp",u.Xpm({type:e,selectors:[["mailboxes-a1sms-traffic-manager"]],decls:20,vars:7,consts:[[1,"slds-m-vertical--xx-small","slds-box--border"],[1,"slds-p-around--x-small"],["label","LBL_A1"],[1,"slds-grid","slds-p-vertical--xx-small"],[1,"slds-form-element","slds-size--1-of-3","slds-p-right--xx-small"],[1,"slds-truncate","slds-form-element__label"],["label","LBL_USERNAME"],[3,"disabled","ngModel","ngModelChange"],[1,"slds-form-element","slds-size--1-of-3","slds-p-left--xx-small"],["label","LBL_PASSWORD"],["label","LBL_SENDER"],["type","text",1,"slds-input",3,"disabled","ngModel","ngModelChange"],["type","button",1,"slds-col--bump-left","slds-button","slds-button--neutral",3,"disabled","click"],["label","LBL_SEND_TEST_SMS"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0)(1,"div",1)(2,"h1"),u._UZ(3,"system-label",2),u.qZA(),u.TgZ(4,"div",3)(5,"div",4)(6,"label",5),u._UZ(7,"system-label",6),u.qZA(),u.TgZ(8,"system-input-password",7),u.NdJ("ngModelChange",(function(e){return t.model.data.settings.a1_username=e})),u.qZA()(),u.TgZ(9,"div",8)(10,"label",5),u._UZ(11,"system-label",9),u.qZA(),u.TgZ(12,"system-input-password",7),u.NdJ("ngModelChange",(function(e){return t.model.data.settings.a1_password=e})),u.qZA()(),u.TgZ(13,"div",8)(14,"label",5),u._UZ(15,"system-label",10),u.qZA(),u.TgZ(16,"input",11),u.NdJ("ngModelChange",(function(e){return t.model.data.settings.a1_sender=e})),u.qZA()()(),u.TgZ(17,"div",3)(18,"button",12),u.NdJ("click",(function(){return t.testConnection()})),u._UZ(19,"system-label",13),u.qZA()()()()),2&e&&(u.xp6(8),u.Q6J("disabled",!t.view.isEditMode())("ngModel",t.model.data.settings.a1_username),u.xp6(4),u.Q6J("disabled",!t.view.isEditMode())("ngModel",t.model.data.settings.a1_password),u.xp6(4),u.Q6J("disabled",!t.view.isEditMode())("ngModel",t.model.data.settings.a1_sender),u.xp6(2),u.Q6J("disabled",!t.view.isEditMode()))},dependencies:[l.Fj,l.JJ,l.On,ho.Z,L._],encapsulation:2})),MailboxesA1SmsTrafficManager})(),vo=(()=>{var e;class MailboxesA1TrafficManager{constructor(e,t,i,n,l,o,a,d){(0,s.Z)(this,"metadata",void 0),(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"backend",void 0),(0,s.Z)(this,"model",void 0),(0,s.Z)(this,"modal",void 0),(0,s.Z)(this,"toast",void 0),(0,s.Z)(this,"view",void 0),(0,s.Z)(this,"ViewContainerRef",void 0),(0,s.Z)(this,"valid_connection",!1),this.metadata=e,this.language=t,this.backend=i,this.model=n,this.modal=l,this.toast=o,this.view=a,this.ViewContainerRef=d}ngOnInit(){0===this.model.getField("settings").length&&this.model.setField("settings",{api_key:"",imap_pop3_display_name:"",imap_pop3_username:"",reply_to:""})}testConnection(){this.modal.openModal("MailboxesmanagerTestModal",!0,this.ViewContainerRef.injector)}}return e=MailboxesA1TrafficManager,(0,s.Z)(MailboxesA1TrafficManager,"ɵfac",(function(t){return new(t||e)(u.Y36(f.Pu),u.Y36(b.d),u.Y36(h.y),u.Y36(Ql.o),u.Y36(x.o),u.Y36(v.A),u.Y36($i.e),u.Y36(u.s_b))})),(0,s.Z)(MailboxesA1TrafficManager,"ɵcmp",u.Xpm({type:e,selectors:[["mailboxes-a1-traffic-manager"]],inputs:{valid_connection:"valid_connection"},decls:19,vars:7,consts:[[1,"slds-p-horizontal--medium","slds-p-vertical--small"],["label","LBL_SMS_GATEWAY"],[1,"slds-grid","slds-p-vertical--xx-small"],[1,"slds-form-element","slds-size--1-of-3","slds-p-right--xx-small"],[1,"slds-truncate","slds-form-element__label"],["label","LBL_CONSUMER_KEY"],["type","text",1,"slds-input","ng-pristine","ng-valid",3,"disabled","ngModel","ngModelChange"],[1,"slds-form-element","slds-size--1-of-3","slds-p-left--xx-small"],["label","LBL_CONSUMER_SECRET"],["label","LBL_PHONE_NUMBER_FROM"],["type","button",1,"slds-col--bump-left","slds-button","slds-button--neutral",3,"disabled","click"],["label","LBL_SEND_TEST_EMAIL"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0)(1,"h1"),u._UZ(2,"system-label",1),u.qZA(),u.TgZ(3,"div",2)(4,"div",3)(5,"label",4),u._UZ(6,"system-label",5),u.qZA(),u.TgZ(7,"input",6),u.NdJ("ngModelChange",(function(e){return t.model.data.settings.consumer_key=e})),u.qZA()(),u.TgZ(8,"div",7)(9,"label",4),u._UZ(10,"system-label",8),u.qZA(),u.TgZ(11,"input",6),u.NdJ("ngModelChange",(function(e){return t.model.data.settings.consumer_secret=e})),u.qZA()(),u.TgZ(12,"div",7)(13,"label",4),u._UZ(14,"system-label",9),u.qZA(),u.TgZ(15,"input",6),u.NdJ("ngModelChange",(function(e){return t.model.data.settings.phone_number_from=e})),u.qZA()()(),u.TgZ(16,"div",2)(17,"button",10),u.NdJ("click",(function(){return t.testConnection()})),u._UZ(18,"system-label",11),u.qZA()()()),2&e&&(u.xp6(7),u.Q6J("disabled",!t.view.isEditMode())("ngModel",t.model.data.settings.consumer_key),u.xp6(4),u.Q6J("disabled",!t.view.isEditMode())("ngModel",t.model.data.settings.consumer_secret),u.xp6(4),u.Q6J("disabled",!t.view.isEditMode())("ngModel",t.model.data.settings.phone_number_from),u.xp6(2),u.Q6J("disabled",t.valid_connection))},dependencies:[l.Fj,l.JJ,l.On,L._],encapsulation:2})),MailboxesA1TrafficManager})(),xo=(()=>{var e;class MailboxesEWSTrafficManager{constructor(e,t,i,n,l,o){(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"injector",void 0),(0,s.Z)(this,"model",void 0),(0,s.Z)(this,"modal",void 0),(0,s.Z)(this,"view",void 0),(0,s.Z)(this,"backend",void 0),this.language=e,this.injector=t,this.model=i,this.modal=n,this.view=l,this.backend=o;let a=this.model.getField("settings");(!a||a&&0==a.length)&&this.model.setField("settings",{ews_host:"",ews_username:"",ews_password:"",ews_email:"",ews_folder:"",ews_subscriptionid:"",ews_push:!1})}testConnection(){this.modal.openModal("MailboxesmanagerTestModal",!0,this.injector)}getMailboxes(){let e=new pn.x,t=this.model.utils.spiceModel2backend("Mailboxes",this.model.data);return this.backend.postRequest("module/Mailboxes/ews/folders",{},{data:t}).subscribe((t=>{!0===t.result?e.next(t):e.next(!1),e.complete()})),e.asObservable()}displayFoldersModal(){let e=this.modal.await("loading folders");this.getMailboxes().subscribe((t=>{e.emit(!0),!1!==t&&this.modal.openModal("MailboxesEWSSelectFoldersModal",!0,this.injector).subscribe((e=>{e.instance.setMailboxes(t.mailboxes)}))}),(t=>{e.emit(!0)}))}get foldername(){return this.model.getField("settings").ews_folder?this.model.getField("settings").ews_folder.name:""}}return e=MailboxesEWSTrafficManager,(0,s.Z)(MailboxesEWSTrafficManager,"ɵfac",(function(t){return new(t||e)(u.Y36(b.d),u.Y36(u.zs3),u.Y36(Ql.o),u.Y36(x.o),u.Y36($i.e),u.Y36(h.y))})),(0,s.Z)(MailboxesEWSTrafficManager,"ɵcmp",u.Xpm({type:e,selectors:[["mailboxes-mailgun-ews-manager"]],decls:42,vars:13,consts:[[1,"slds-m-vertical--xx-small","slds-box--border"],[1,"slds-p-around--x-small"],["label","LBL_EWS"],[1,"slds-grid","slds-p-vertical--xx-small"],[1,"slds-form-element","slds-size--1-of-1"],[1,"slds-truncate","slds-form-element__label"],["label","LBL_HOST"],["type","text",1,"slds-input",3,"disabled","ngModel","ngModelChange"],[1,"slds-form-element","slds-size--1-of-2","slds-p-right--xx-small"],["label","LBL_USER_NAME"],["type","text",1,"slds-input",3,"ngModel","disabled","ngModelChange"],[1,"slds-form-element","slds-size--1-of-2","slds-p-left--xx-small"],["label","LBL_PASSWORD"],[3,"ngModel","disabled","ngModelChange"],["label","LBL_MAILBOX_EMAIL"],["label","LBL_MAILBOX_FOLDER"],["type","text","disabled","",1,"slds-input",3,"ngModel"],["label","LBL_PUSH"],[3,"ngModel","ngModelChange"],["label","LBL_SUBSCRIPTION"],["type","text","disabled","",1,"slds-input",3,"ngModel","ngModelChange"],["type","button",1,"slds-col--bump-left","slds-button","slds-button--neutral",3,"disabled","click"],["label","LBL_EWS_SELECT_FOLDERS"],["label","LBL_TEST_CONNECTION"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0)(1,"div",1)(2,"h1"),u._UZ(3,"system-label",2),u.qZA(),u.TgZ(4,"div",3)(5,"div",4)(6,"label",5),u._UZ(7,"system-label",6),u.qZA(),u.TgZ(8,"input",7),u.NdJ("ngModelChange",(function(e){return t.model.data.settings.ews_host=e})),u.qZA()()(),u.TgZ(9,"div",3)(10,"div",8)(11,"label",5),u._UZ(12,"system-label",9),u.qZA(),u.TgZ(13,"input",10),u.NdJ("ngModelChange",(function(e){return t.model.data.settings.ews_username=e})),u.qZA()(),u.TgZ(14,"div",11)(15,"label",5),u._UZ(16,"system-label",12),u.qZA(),u.TgZ(17,"system-input-password",13),u.NdJ("ngModelChange",(function(e){return t.model.data.settings.ews_password=e})),u.qZA()()(),u.TgZ(18,"div",3)(19,"div",8)(20,"label",5),u._UZ(21,"system-label",14),u.qZA(),u.TgZ(22,"input",10),u.NdJ("ngModelChange",(function(e){return t.model.data.settings.ews_email=e})),u.qZA()(),u.TgZ(23,"div",11)(24,"label",5),u._UZ(25,"system-label",15),u.qZA(),u._UZ(26,"input",16),u.qZA()(),u.TgZ(27,"div",3)(28,"div",8)(29,"label",5),u._UZ(30,"system-label",17),u.qZA(),u.TgZ(31,"div")(32,"system-checkbox",18),u.NdJ("ngModelChange",(function(e){return t.model.data.settings.ews_push=e})),u.qZA()()(),u.TgZ(33,"div",11)(34,"label",5),u._UZ(35,"system-label",19),u.qZA(),u.TgZ(36,"input",20),u.NdJ("ngModelChange",(function(e){return t.model.data.settings.ews_subscriptionid=e})),u.qZA()()(),u.TgZ(37,"div",3)(38,"button",21),u.NdJ("click",(function(){return t.displayFoldersModal()})),u._UZ(39,"system-label",22),u.qZA(),u.TgZ(40,"button",21),u.NdJ("click",(function(){return t.testConnection()})),u._UZ(41,"system-label",23),u.qZA()()()()),2&e&&(u.xp6(8),u.Q6J("disabled",!t.view.isEditMode())("ngModel",t.model.data.settings.ews_host),u.xp6(5),u.Q6J("ngModel",t.model.data.settings.ews_username)("disabled",!t.view.isEditMode()),u.xp6(4),u.Q6J("ngModel",t.model.data.settings.ews_password)("disabled",!t.view.isEditMode()),u.xp6(5),u.Q6J("ngModel",t.model.data.settings.ews_email)("disabled",!t.view.isEditMode()),u.xp6(4),u.Q6J("ngModel",t.foldername),u.xp6(6),u.Q6J("ngModel",t.model.data.settings.ews_push),u.xp6(4),u.Q6J("ngModel",t.model.data.settings.ews_subscriptionid),u.xp6(2),u.Q6J("disabled",!t.view.isEditMode()),u.xp6(2),u.Q6J("disabled",!t.view.isEditMode()))},dependencies:[l.Fj,l.JJ,l.On,Q.U,ho.Z,L._],encapsulation:2})),MailboxesEWSTrafficManager})();function Mo(e,t){if(1&e&&(u.TgZ(0,"option",10),u._uU(1),u.qZA()),2&e){const e=t.$implicit;u.s9C("value",e.id),u.xp6(1),u.Oqu(e.name)}}let Ao=(()=>{var e;class MailboxesEWSSelectFoldersModal{constructor(e,t){(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"model",void 0),(0,s.Z)(this,"self",void 0),(0,s.Z)(this,"mailboxes",[]),this.language=e,this.model=t}setMailboxes(e){this.mailboxes=e}get mailbox(){try{return this.model.getField("settings").ews_folder.id}catch(e){return""}}set mailbox(e){let t=this.model.getField("settings");t.ews_folder=this.mailboxes.find((t=>t.id==e)),this.model.setField("settings",t)}close(){this.self.destroy()}}return e=MailboxesEWSSelectFoldersModal,(0,s.Z)(MailboxesEWSSelectFoldersModal,"ɵfac",(function(t){return new(t||e)(u.Y36(b.d),u.Y36(Ql.o))})),(0,s.Z)(MailboxesEWSSelectFoldersModal,"ɵcmp",u.Xpm({type:e,selectors:[["mailbox-folders-modal"]],decls:14,vars:4,consts:[[3,"close"],[1,"slds-grid","slds-wrap","slds-grid--pull-padded"],[1,"slds-col"],[1,"slds-form-element"],[1,"slds-truncate","slds-form-element__label"],["label","LBL_INBOX_FOLDER"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_OK"],[3,"value"]],template:function(e,t){1&e&&(u.TgZ(0,"system-modal")(1,"system-modal-header",0),u.NdJ("close",(function(){return t.close()})),u._uU(2),u.qZA(),u.TgZ(3,"system-modal-content")(4,"div",1)(5,"div",2)(6,"div",3)(7,"label",4),u._UZ(8,"system-label",5),u.qZA(),u.TgZ(9,"select",6),u.NdJ("ngModelChange",(function(e){return t.mailbox=e})),u.YNc(10,Mo,2,2,"option",7),u.qZA()()()()(),u.TgZ(11,"system-modal-footer")(12,"button",8),u.NdJ("click",(function(){return t.close()})),u._UZ(13,"system-label",9),u.qZA()()()),2&e&&(u.xp6(2),u.Oqu(t.language.getLabel(t.model.module,"LBL_MAILBOX_FOLDERS")),u.xp6(7),u.Q6J("disabled",0==t.mailboxes.length)("ngModel",t.mailbox),u.xp6(1),u.Q6J("ngForOf",t.mailboxes))},dependencies:[n.sg,l.YN,l.Kr,l.EJ,l.JJ,l.On,L._,nt.j,lt.x,ot.p,at.y],encapsulation:2})),MailboxesEWSSelectFoldersModal})(),To=(()=>{var e;class MailboxesImpersonatedEWSTrafficManager{constructor(e,t,i,n,l,o){(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"injector",void 0),(0,s.Z)(this,"model",void 0),(0,s.Z)(this,"modal",void 0),(0,s.Z)(this,"view",void 0),(0,s.Z)(this,"backend",void 0),this.language=e,this.injector=t,this.model=i,this.modal=n,this.view=l,this.backend=o;let a=this.model.getField("settings");(!a||a&&0==a.length)&&(this.model.data.settings={user_name:""})}testConnection(){this.modal.openModal("MailboxesmanagerTestModal",!0,this.injector)}getMailboxes(){let e=new pn.x,t=this.model.utils.spiceModel2backend("Mailboxes",this.model.data);return this.backend.postRequest("module/Mailboxes/ews/folders",{},{data:t}).subscribe((t=>{!0===t.result?e.next(t):e.next(!1),e.complete()})),e.asObservable()}}return e=MailboxesImpersonatedEWSTrafficManager,(0,s.Z)(MailboxesImpersonatedEWSTrafficManager,"ɵfac",(function(t){return new(t||e)(u.Y36(b.d),u.Y36(u.zs3),u.Y36(Ql.o),u.Y36(x.o),u.Y36($i.e),u.Y36(h.y))})),(0,s.Z)(MailboxesImpersonatedEWSTrafficManager,"ɵcmp",u.Xpm({type:e,selectors:[["ng-component"]],decls:12,vars:3,consts:[[1,"slds-m-vertical--xx-small","slds-box--border"],[1,"slds-p-around--x-small"],["label","LBL_IMPERSONATED_EWS"],[1,"slds-grid","slds-p-vertical--xx-small"],[1,"slds-form-element","slds-size--1-of-1"],[1,"slds-truncate","slds-form-element__label"],["label","LBL_USER_NAME"],["type","text",1,"slds-input",3,"disabled","ngModel","ngModelChange"],["type","button",1,"slds-col--bump-left","slds-button","slds-button--neutral",3,"disabled","click"],["label","LBL_TEST_CONNECTION"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0)(1,"div",1)(2,"h1"),u._UZ(3,"system-label",2),u.qZA(),u.TgZ(4,"div",3)(5,"div",4)(6,"label",5),u._UZ(7,"system-label",6),u.qZA(),u.TgZ(8,"input",7),u.NdJ("ngModelChange",(function(e){return t.model.data.settings.user_name=e})),u.qZA()()(),u.TgZ(9,"div",3)(10,"button",8),u.NdJ("click",(function(){return t.testConnection()})),u._UZ(11,"system-label",9),u.qZA()()()()),2&e&&(u.xp6(8),u.Q6J("disabled",!t.view.isEditMode())("ngModel",t.model.data.settings.user_name),u.xp6(2),u.Q6J("disabled",!t.view.isEditMode()))},dependencies:[l.Fj,l.JJ,l.On,L._],encapsulation:2})),MailboxesImpersonatedEWSTrafficManager})(),Lo=(()=>{var e;class MailboxManagerAddDialog{constructor(e,t,i,n,l){(0,s.Z)(this,"backend",void 0),(0,s.Z)(this,"metadata",void 0),(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"modelutilities",void 0),(0,s.Z)(this,"model",void 0),(0,s.Z)(this,"closedialog",new u.vpe),(0,s.Z)(this,"mailboxes",void 0),(0,s.Z)(this,"mailbox_name",""),(0,s.Z)(this,"self",null),(0,s.Z)(this,"saving",!1),this.backend=e,this.metadata=t,this.language=i,this.modelutilities=n,this.model=l}closeDialog(){this.closedialog.emit(!1),this.self.destroy()}add(){this.model.module="Mailboxes",this.model.id=this.modelutilities.generateGuid(),this.model.setField("name",this.mailbox_name),this.saving=!0,this.model.save().subscribe((()=>{this.closedialog.emit(this.model.data),this.self.destroy()}))}getComponents(){return this.metadata.getSystemComponents()}}return e=MailboxManagerAddDialog,(0,s.Z)(MailboxManagerAddDialog,"ɵfac",(function(t){return new(t||e)(u.Y36(h.y),u.Y36(f.Pu),u.Y36(b.d),u.Y36(Z.A),u.Y36(Ql.o))})),(0,s.Z)(MailboxManagerAddDialog,"ɵcmp",u.Xpm({type:e,selectors:[["mailboxmanager-add-dialog"]],inputs:{mailboxes:"mailboxes"},features:[u._Bn([Ql.o])],decls:15,vars:4,consts:[[3,"close"],["label","LBL_ADD"],["label","LBL_MAILBOX"],[1,"slds-form-element"],[1,"slds-form-element__label"],[1,"slds-form-element__control"],["type","text","placeholder","name",1,"slds-input",3,"ngModel","disabled","ngModelChange"],[1,"slds-button","slds-button--neutral",3,"disabled","click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"disabled","click"]],template:function(e,t){1&e&&(u.TgZ(0,"system-modal")(1,"system-modal-header",0),u.NdJ("close",(function(){return t.closeDialog()})),u._UZ(2,"system-label",1)(3,"system-label",2),u.qZA(),u.TgZ(4,"system-modal-content")(5,"div",3)(6,"label",4),u._UZ(7,"system-label",2),u.qZA(),u.TgZ(8,"div",5)(9,"input",6),u.NdJ("ngModelChange",(function(e){return t.mailbox_name=e})),u.qZA()()()(),u.TgZ(10,"system-modal-footer")(11,"button",7),u.NdJ("click",(function(){return t.closeDialog()})),u._UZ(12,"system-label",8),u.qZA(),u.TgZ(13,"button",9),u.NdJ("click",(function(){return t.add()})),u._UZ(14,"system-label",1),u.qZA()()()),2&e&&(u.xp6(9),u.Q6J("ngModel",t.mailbox_name)("disabled",t.saving),u.xp6(2),u.Q6J("disabled",t.saving),u.xp6(2),u.Q6J("disabled",t.saving))},dependencies:[l.Fj,l.JJ,l.On,L._,nt.j,lt.x,ot.p,at.y],encapsulation:2})),MailboxManagerAddDialog})();function qo(e,t){if(1&e&&(u.TgZ(0,"option",12),u._uU(1),u.qZA()),2&e){const e=t.$implicit;u.s9C("value",e),u.xp6(1),u.Oqu(e)}}function Co(e,t){if(1&e&&(u.TgZ(0,"option",12),u._uU(1),u.qZA()),2&e){const e=t.$implicit;u.s9C("value",e),u.xp6(1),u.Oqu(e)}}function Jo(e,t){if(1&e&&(u.TgZ(0,"option",12),u._uU(1),u.qZA()),2&e){const e=t.$implicit;u.s9C("value",e),u.xp6(1),u.Oqu(e)}}let No=(()=>{var e;class MailboxesIMAPSMTPSelectFoldersModal{constructor(e,t){(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"model",void 0),(0,s.Z)(this,"self",void 0),(0,s.Z)(this,"mailboxes",[]),this.language=e,this.model=t}setMailboxes(e){this.mailboxes=e}close(){this.self.destroy()}}return e=MailboxesIMAPSMTPSelectFoldersModal,(0,s.Z)(MailboxesIMAPSMTPSelectFoldersModal,"ɵfac",(function(t){return new(t||e)(u.Y36(b.d),u.Y36(Ql.o))})),(0,s.Z)(MailboxesIMAPSMTPSelectFoldersModal,"ɵcmp",u.Xpm({type:e,selectors:[["mailbox-folders-modal"]],decls:24,vars:10,consts:[[3,"close"],[1,"slds-grid","slds-wrap","slds-grid--pull-padded"],[1,"slds-col"],[1,"slds-form-element"],[1,"slds-truncate","slds-form-element__label"],["label","LBL_INBOX_FOLDER"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["label","LBL_SENT_FOLDER"],["label","LBL_TRASH_FOLDER"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_OK"],[3,"value"]],template:function(e,t){1&e&&(u.TgZ(0,"system-modal")(1,"system-modal-header",0),u.NdJ("close",(function(){return t.close()})),u._uU(2),u.qZA(),u.TgZ(3,"system-modal-content")(4,"div",1)(5,"div",2)(6,"div",3)(7,"label",4),u._UZ(8,"system-label",5),u.qZA(),u.TgZ(9,"select",6),u.NdJ("ngModelChange",(function(e){return t.model.data.settings.imap_inbox_dir=e})),u.YNc(10,qo,2,2,"option",7),u.qZA()(),u.TgZ(11,"div",3)(12,"label",4),u._UZ(13,"system-label",8),u.qZA(),u.TgZ(14,"select",6),u.NdJ("ngModelChange",(function(e){return t.model.data.settings.imap_sent_dir=e})),u.YNc(15,Co,2,2,"option",7),u.qZA()(),u.TgZ(16,"div",3)(17,"label",4),u._UZ(18,"system-label",9),u.qZA(),u.TgZ(19,"select",6),u.NdJ("ngModelChange",(function(e){return t.model.data.settings.imap_trash_dir=e})),u.YNc(20,Jo,2,2,"option",7),u.qZA()()()()(),u.TgZ(21,"system-modal-footer")(22,"button",10),u.NdJ("click",(function(){return t.close()})),u._UZ(23,"system-label",11),u.qZA()()()),2&e&&(u.xp6(2),u.Oqu(t.language.getLabel(t.model.module,"LBL_MAILBOX_FOLDERS")),u.xp6(7),u.Q6J("disabled",0==t.mailboxes.length)("ngModel",t.model.data.settings.imap_inbox_dir),u.xp6(1),u.Q6J("ngForOf",t.mailboxes),u.xp6(4),u.Q6J("disabled",0==t.mailboxes.length)("ngModel",t.model.data.settings.imap_sent_dir),u.xp6(1),u.Q6J("ngForOf",t.mailboxes),u.xp6(4),u.Q6J("disabled",0==t.mailboxes.length)("ngModel",t.model.data.settings.imap_trash_dir),u.xp6(1),u.Q6J("ngForOf",t.mailboxes))},dependencies:[n.sg,l.YN,l.Kr,l.EJ,l.JJ,l.On,L._,nt.j,lt.x,ot.p,at.y],encapsulation:2})),MailboxesIMAPSMTPSelectFoldersModal})();function ko(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div",0)(1,"div",1)(2,"h1"),u._UZ(3,"system-label",19),u.qZA(),u.TgZ(4,"div",20)(5,"div",8)(6,"label",5),u._UZ(7,"system-label",21),u.qZA(),u.TgZ(8,"select",22),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw();return u.KtG(i.model.data.settings.imap_pop3_protocol_type=t)})),u.TgZ(9,"option",23),u._UZ(10,"system-label",19),u.qZA(),u.TgZ(11,"option",24),u._UZ(12,"system-label",25),u.qZA()()(),u.TgZ(13,"div",10)(14,"label",5),u._UZ(15,"system-label",26),u.qZA(),u.TgZ(16,"input",27),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw();return u.KtG(i.model.data.settings.imap_pop3_host=t)})),u.qZA()()(),u.TgZ(17,"div",20)(18,"div",8)(19,"label",5),u._UZ(20,"system-label",28),u.qZA(),u.TgZ(21,"input",27),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw();return u.KtG(i.model.data.settings.imap_pop3_port=t)})),u.qZA()(),u.TgZ(22,"div",10)(23,"label",5),u._UZ(24,"system-label",29),u.qZA(),u.TgZ(25,"select",22),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw();return u.KtG(i.model.data.settings.imap_pop3_encryption=t)})),u.TgZ(26,"option",30),u._UZ(27,"system-label",31),u.qZA(),u.TgZ(28,"option",32),u._UZ(29,"system-label",33),u.qZA(),u.TgZ(30,"option",34),u._UZ(31,"system-label",35),u.qZA()()()(),u.TgZ(32,"div",36)(33,"div",37)(34,"label",5),u._UZ(35,"system-label",38),u.qZA(),u._UZ(36,"input",39),u.qZA(),u.TgZ(37,"div",37)(38,"label",5),u._UZ(39,"system-label",40),u.qZA(),u._UZ(40,"input",39),u.qZA(),u.TgZ(41,"div",37)(42,"label",5),u._UZ(43,"system-label",41),u.qZA(),u._UZ(44,"input",39),u.qZA()(),u.TgZ(45,"div",36)(46,"div",10)(47,"div",37)(48,"label",5),u._UZ(49,"system-label",42),u.qZA()(),u.TgZ(50,"div",37)(51,"system-checkbox",43),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw();return u.KtG(i.model.data.settings.imap_delete_after_fetch=t)})),u.qZA()()()(),u.TgZ(52,"div",15)(53,"button",44),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw();return u.KtG(t.displayFoldersModal())})),u._UZ(54,"system-label",45),u.qZA()()()()}if(2&e){const e=u.oxw();u.xp6(8),u.Q6J("disabled",!e.view.isEditMode())("ngModel",e.model.data.settings.imap_pop3_protocol_type),u.xp6(8),u.Q6J("ngModel",e.model.data.settings.imap_pop3_host)("disabled",!e.view.isEditMode()),u.xp6(5),u.Q6J("ngModel",e.model.data.settings.imap_pop3_port)("disabled",!e.view.isEditMode()),u.xp6(4),u.Q6J("disabled",!e.view.isEditMode())("ngModel",e.model.data.settings.imap_pop3_encryption),u.xp6(11),u.Q6J("ngModel",e.model.data.settings.imap_inbox_dir),u.xp6(4),u.Q6J("ngModel",e.model.data.settings.imap_sent_dir),u.xp6(4),u.Q6J("ngModel",e.model.data.settings.imap_trash_dir),u.xp6(7),u.Q6J("disabled",!e.view.isEditMode())("ngModel",e.model.data.settings.imap_delete_after_fetch),u.xp6(2),u.Q6J("disabled",!e.view.isEditMode())}}function wo(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div",0)(1,"div",1)(2,"h1"),u._UZ(3,"system-label",46),u.qZA(),u.TgZ(4,"div",20)(5,"div",8)(6,"label",5),u._UZ(7,"system-label",26),u.qZA(),u.TgZ(8,"input",27),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw();return u.KtG(i.model.data.settings.smtp_host=t)})),u.qZA()(),u.TgZ(9,"div",10)(10,"div",37)(11,"label",5),u._UZ(12,"system-label",47),u.qZA()(),u.TgZ(13,"div",37)(14,"system-checkbox",48),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw();return u.KtG(i.model.data.settings.smtp_auth=t)})),u.qZA()()()(),u.TgZ(15,"div",20)(16,"div",8)(17,"label",5),u._UZ(18,"system-label",28),u.qZA(),u.TgZ(19,"input",27),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw();return u.KtG(i.model.data.settings.smtp_port=t)})),u.qZA()(),u.TgZ(20,"div",10)(21,"label",5),u._UZ(22,"system-label",29),u.qZA(),u.TgZ(23,"select",22),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw();return u.KtG(i.model.data.settings.smtp_encryption=t)})),u.TgZ(24,"option",30),u._UZ(25,"system-label",31),u.qZA(),u.TgZ(26,"option",32),u._UZ(27,"system-label",33),u.qZA(),u.TgZ(28,"option",34),u._UZ(29,"system-label",35),u.qZA()()()(),u.TgZ(30,"div",20)(31,"div",8)(32,"label",5),u._UZ(33,"system-label",49),u.qZA(),u.TgZ(34,"input",27),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw();return u.KtG(i.model.data.settings.reply_to=t)})),u.qZA()()(),u.TgZ(35,"div",20)(36,"div",50)(37,"div",37)(38,"system-checkbox",12),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw();return u.KtG(i.model.data.settings.smtp_verify_peer=t)})),u.qZA()()(),u.TgZ(39,"div",50)(40,"div",37)(41,"system-checkbox",12),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw();return u.KtG(i.model.data.smtp_verify_peer_name=t)})),u._UZ(42,"system-label",51),u.qZA()()(),u.TgZ(43,"div",50)(44,"div",37)(45,"system-checkbox",12),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw();return u.KtG(i.model.data.allow_external_delete=t)})),u._UZ(46,"system-label",52),u.qZA()()(),u.TgZ(47,"div",50)(48,"div",37)(49,"system-checkbox",12),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw();return u.KtG(i.model.data.smtp_allow_self_signed=t)})),u._UZ(50,"system-label",53),u.qZA()()()()()()}if(2&e){const e=u.oxw();u.xp6(8),u.Q6J("ngModel",e.model.data.settings.smtp_host)("disabled",!e.view.isEditMode()),u.xp6(6),u.Q6J("disabled",!e.view.isEditMode())("ngModel",e.model.data.settings.smtp_auth),u.xp6(5),u.Q6J("ngModel",e.model.data.settings.smtp_port)("disabled",!e.view.isEditMode()),u.xp6(4),u.Q6J("disabled",!e.view.isEditMode())("ngModel",e.model.data.settings.smtp_encryption),u.xp6(11),u.Q6J("ngModel",e.model.data.settings.reply_to)("disabled",!e.view.isEditMode()),u.xp6(4),u.Q6J("disabled",!e.view.isEditMode())("ngModel",e.model.data.settings.smtp_verify_peer),u.xp6(3),u.Q6J("disabled",!e.view.isEditMode())("ngModel",e.model.data.smtp_verify_peer_name),u.xp6(4),u.Q6J("disabled",!e.view.isEditMode())("ngModel",e.model.data.allow_external_delete),u.xp6(4),u.Q6J("disabled",!e.view.isEditMode())("ngModel",e.model.data.smtp_allow_self_signed)}}let Uo=(()=>{var e;class MailboxesImapSmtpTrafficManager{constructor(e,t,i,n,l,o,a){(0,s.Z)(this,"backend",void 0),(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"model",void 0),(0,s.Z)(this,"modal",void 0),(0,s.Z)(this,"toast",void 0),(0,s.Z)(this,"view",void 0),(0,s.Z)(this,"injector",void 0),this.backend=e,this.language=t,this.model=i,this.modal=n,this.toast=l,this.view=o,this.injector=a;let d=this.model.getField("settings");(!d||d&&0==d.length)&&this.model.setField("settings",{imap_inbox_dir:"",imap_pop3_display_name:"",imap_pop3_encryption:"",imap_pop3_host:"",imap_pop3_password:"",imap_pop3_port:"",imap_pop3_protocol_type:"",imap_pop3_username:"",imap_sent_dir:"",imap_trash_dir:"",imap_delete_after_fetch:"",smtp_allow_self_signed:"",smtp_auth:"",smtp_encryption:"",smtp_host:"",smtp_port:"",smtp_verify_peer:"",smtp_verify_peer_name:"",reply_to:"",shared_mailbox_auth_user:"",shared_mailbox_user:""})}get isInbound(){return!!this.model.getFieldValue("inbound_comm")}get isOutbound(){return"no"!=this.model.getFieldValue("outbound_comm")}getMailboxes(){let e=new pn.x,t=this.model.utils.spiceModel2backend("Mailboxes",this.model.data);return this.backend.postRequest("module/Mailboxes/imap/folders",{},{data:t}).subscribe((t=>{!0===t.result?e.next(t):e.next(!1),e.complete()})),e.asObservable()}displayFoldersModal(){let e=this.modal.await("loading folders");this.getMailboxes().subscribe((t=>{e.emit(!0),!1!==t&&this.modal.openModal("MailboxesIMAPSMTPSelectFoldersModal",!0,this.injector).subscribe((e=>{e.instance.setMailboxes(t.mailboxes)}),(e=>{this.toast.sendToast(e)}))}))}testConnection(){this.modal.openModal("MailboxesmanagerTestIMAPModal",!0,this.injector)}}return e=MailboxesImapSmtpTrafficManager,(0,s.Z)(MailboxesImapSmtpTrafficManager,"ɵfac",(function(t){return new(t||e)(u.Y36(h.y),u.Y36(b.d),u.Y36(Ql.o),u.Y36(x.o),u.Y36(v.A),u.Y36($i.e),u.Y36(u.zs3))})),(0,s.Z)(MailboxesImapSmtpTrafficManager,"ɵcmp",u.Xpm({type:e,selectors:[["mailboxes-imap-smtp-traffic-manager"]],decls:32,vars:12,consts:[[1,"slds-m-vertical--xx-small","slds-box--border"],[1,"slds-p-around--x-small"],["label","LBL_USER"],[1,"slds-grid"],[1,"slds-form-element","slds-size--1-of-1"],[1,"slds-truncate","slds-form-element__label"],["label","LBL_DISPLAY_NAME"],["type","text",1,"slds-input",3,"disabled","ngModel","ngModelChange"],[1,"slds-form-element","slds-size--1-of-2","slds-p-right--xx-small"],["label","LBL_USER_NAME"],[1,"slds-form-element","slds-size--1-of-2","slds-p-left--xx-small"],["label","LBL_PASSWORD"],[3,"disabled","ngModel","ngModelChange"],["label","LBL_SHARED_MAILBOX_AUTH_USER"],["label","LBL_SHARED_MAILBOX_USER"],[1,"slds-grid","slds-p-vertical--small"],["type","button",1,"slds-col--bump-left","slds-button","slds-button--neutral",3,"click"],["label","LBL_TEST_CONNECTION"],["class","slds-m-vertical--xx-small slds-box--border",4,"ngIf"],["label","LBL_IMAP"],[1,"slds-grid","slds-p-vertical--xx-small"],["label","LBL_PROTOCOL_TYPE"],["type","text",1,"slds-select","ng-pristine","ng-valid",3,"disabled","ngModel","ngModelChange"],["value","imap"],["value","pop3"],["label","LBL_POP3"],["label","LBL_HOST"],["type","text",1,"slds-input",3,"ngModel","disabled","ngModelChange"],["label","LBL_PORT"],["label","LBL_ENCRYPTION"],["value","none"],["label","LBL_NOENCRYPTION"],["value","ssl"],["label","LBL_SSL"],["value","tls"],["label","LBL_TLS"],[1,"slds-grid--vertical","slds-p-vertical--xx-small"],[1,"slds-form-element"],["label","LBL_INBOX_FOLDER"],["disabled","",1,"slds-input",3,"ngModel"],["label","LBL_SENT_FOLDER"],["label","LBL_TRASH_FOLDER"],["label","LBL_IMAP_DELETE_AFTER_FETCH"],["id","imap_delete_after_fetch",3,"disabled","ngModel","ngModelChange"],["type","button",1,"slds-col--bump-left","slds-button","slds-button--neutral",3,"disabled","click"],["label","LBL_IMAP_SELECT_FOLDERS"],["label","LBL_SMTP"],["label","LBL_AUTHENTICATION"],["id","smtp_auth",3,"disabled","ngModel","ngModelChange"],["label","LBL_REPLY_TO"],[1,"slds-form-element","slds-size--1-of-4"],["label","LBL_SMTP_VERIFY_PEER_NAME"],["label","LBL_IMAP_SMTP_ALLOW_EXTERNAL_DELETE"],["label","LBL_SMTP_ALLOW_SELF_SIGNED"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0)(1,"div",1)(2,"h1"),u._UZ(3,"system-label",2),u.qZA(),u.TgZ(4,"div",3)(5,"div",4)(6,"label",5),u._UZ(7,"system-label",6),u.qZA(),u.TgZ(8,"input",7),u.NdJ("ngModelChange",(function(e){return t.model.data.settings.imap_pop3_display_name=e})),u.qZA()()(),u.TgZ(9,"div",3)(10,"div",8)(11,"label",5),u._UZ(12,"system-label",9),u.qZA(),u.TgZ(13,"input",7),u.NdJ("ngModelChange",(function(e){return t.model.data.settings.imap_pop3_username=e})),u.qZA()(),u.TgZ(14,"div",10)(15,"label",5),u._UZ(16,"system-label",11),u.qZA(),u.TgZ(17,"system-input-password",12),u.NdJ("ngModelChange",(function(e){return t.model.data.settings.imap_pop3_password=e})),u.qZA()()(),u.TgZ(18,"div",3)(19,"div",8)(20,"label",5),u._UZ(21,"system-label",13),u.qZA(),u.TgZ(22,"input",7),u.NdJ("ngModelChange",(function(e){return t.model.data.settings.shared_mailbox_auth_user=e})),u.qZA()(),u.TgZ(23,"div",8)(24,"label",5),u._UZ(25,"system-label",14),u.qZA(),u.TgZ(26,"input",7),u.NdJ("ngModelChange",(function(e){return t.model.data.settings.shared_mailbox_user=e})),u.qZA()()(),u.TgZ(27,"div",15)(28,"button",16),u.NdJ("click",(function(){return t.testConnection()})),u._UZ(29,"system-label",17),u.qZA()()()(),u.YNc(30,ko,55,14,"div",18),u.YNc(31,wo,51,18,"div",18)),2&e&&(u.xp6(8),u.Q6J("disabled",!t.view.isEditMode())("ngModel",t.model.data.settings.imap_pop3_display_name),u.xp6(5),u.Q6J("disabled",!t.view.isEditMode())("ngModel",t.model.data.settings.imap_pop3_username),u.xp6(4),u.Q6J("disabled",!t.view.isEditMode())("ngModel",t.model.data.settings.imap_pop3_password),u.xp6(5),u.Q6J("disabled",!t.view.isEditMode())("ngModel",t.model.data.settings.shared_mailbox_auth_user),u.xp6(4),u.Q6J("disabled",!t.view.isEditMode())("ngModel",t.model.data.settings.shared_mailbox_user),u.xp6(4),u.Q6J("ngIf",t.isInbound),u.xp6(1),u.Q6J("ngIf",t.isOutbound))},dependencies:[n.O5,l.YN,l.Kr,l.Fj,l.EJ,l.JJ,l.On,Q.U,ho.Z,L._],encapsulation:2})),MailboxesImapSmtpTrafficManager})();var Eo=i(2868),Do=i(3634);function Oo(e,t){if(1&e&&u._UZ(0,"system-dynamic-component",4),2&e){const e=u.oxw();u.Q6J("component",e.transportcomponent)}}let Io=(()=>{var e;class MailboxesTransportManager{constructor(e,t,i,n,l){(0,s.Z)(this,"metadata",void 0),(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"model",void 0),(0,s.Z)(this,"view",void 0),(0,s.Z)(this,"configuration",void 0),this.metadata=e,this.language=t,this.model=i,this.view=n,this.configuration=l}get transportcomponent(){let e=this.model.getField("transport");if(!e)return;let t=this.configuration.getData("mailboxtransports").find((t=>t.name==e));return t?t.component:void 0}}return e=MailboxesTransportManager,(0,s.Z)(MailboxesTransportManager,"ɵfac",(function(t){return new(t||e)(u.Y36(f.Pu),u.Y36(b.d),u.Y36(Ql.o),u.Y36($i.e),u.Y36(M.C))})),(0,s.Z)(MailboxesTransportManager,"ɵcmp",u.Xpm({type:e,selectors:[["mailboxes-transport-manager"]],decls:4,vars:1,consts:[["titlelabel","LBL_TRANSPORT"],[1,"slds-p-around--x-small"],["field","transport"],[3,"component",4,"ngIf"],[3,"component"]],template:function(e,t){1&e&&(u.TgZ(0,"system-section",0)(1,"div",1),u._UZ(2,"field-container",2),u.YNc(3,Oo,1,1,"system-dynamic-component",3),u.qZA()()),2&e&&(u.xp6(3),u.Q6J("ngIf",t.transportcomponent))},dependencies:[n.O5,an.T,Eo.P,Do.j],encapsulation:2})),MailboxesTransportManager})();function Qo(e,t){if(1&e&&(u.TgZ(0,"option",22),u._uU(1),u.qZA()),2&e){const e=t.$implicit;u.s9C("value",e.processor_class),u.xp6(1),u.hij(" ",e.name," ")}}function So(e,t){if(1&e&&(u.TgZ(0,"option",22),u._uU(1),u.qZA()),2&e){const e=t.$implicit;u.s9C("value",e),u.xp6(1),u.hij(" ",e," ")}}function Bo(e,t){if(1&e&&(u.ynx(0),u.YNc(1,So,2,2,"option",14),u.BQk()),2&e){const e=u.oxw(2).$implicit,t=u.oxw(2);u.xp6(1),u.Q6J("ngForOf",t.getProcessorMethods(e.processor_class))}}function Fo(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"tr")(1,"input",11),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw().$implicit;return u.KtG(i.id=t)})),u.qZA(),u.TgZ(2,"td",12)(3,"select",13),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw().$implicit;return u.KtG(i.processor_class=t)})),u.YNc(4,Qo,2,2,"option",14),u.qZA()(),u.TgZ(5,"td",15)(6,"select",13),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw().$implicit;return u.KtG(i.processor_method=t)})),u.YNc(7,Bo,2,1,"ng-container",10),u.qZA()(),u.TgZ(8,"td",16)(9,"input",17),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw().$implicit;return u.KtG(i.priority=t)})),u.qZA()(),u.TgZ(10,"td",18)(11,"input",19),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw().$implicit;return u.KtG(i.stop_on_success=t)})),u.qZA()(),u.TgZ(12,"td",20)(13,"button",21),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw().$implicit,i=u.oxw(2);return u.KtG(i.removeProcessor(t.id))})),u._uU(14,"X "),u.qZA()()()}if(2&e){const e=u.oxw().$implicit,t=u.oxw(2);u.xp6(1),u.Q6J("ngModel",e.id),u.xp6(2),u.Q6J("disabled",0==t.processors.length)("ngModel",e.processor_class),u.xp6(1),u.Q6J("ngForOf",t.processors),u.xp6(2),u.Q6J("disabled",!e.processor_class)("ngModel",e.processor_method),u.xp6(1),u.Q6J("ngIf",e.processor_class),u.xp6(2),u.Q6J("ngModel",e.priority),u.xp6(2),u.Q6J("ngModel",e.stop_on_success)}}function Yo(e,t){if(1&e&&(u.ynx(0),u.YNc(1,Fo,15,9,"tr",10),u.BQk()),2&e){const e=t.$implicit;u.xp6(1),u.Q6J("ngIf",!e.deleted)}}function Ro(e,t){if(1&e&&(u.TgZ(0,"table",2)(1,"thead")(2,"tr",3)(3,"th",4)(4,"div",5),u._uU(5,"Class"),u.qZA()(),u.TgZ(6,"th",4)(7,"div",6),u._uU(8,"Method"),u.qZA()(),u.TgZ(9,"th",4)(10,"div",7),u._uU(11,"Priority"),u.qZA()(),u.TgZ(12,"th",4)(13,"div",8),u._uU(14,"Stop on success "),u.qZA()()()(),u.TgZ(15,"tbody"),u.YNc(16,Yo,2,1,"ng-container",9),u.qZA()()),2&e){const e=u.oxw();u.xp6(16),u.Q6J("ngForOf",e.model.data.mailbox_processors)}}let Go=(()=>{var e;class MailboxesProcessors{constructor(e,t,i,n,l){(0,s.Z)(this,"metadata",void 0),(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"backend",void 0),(0,s.Z)(this,"model",void 0),(0,s.Z)(this,"view",void 0),(0,s.Z)(this,"processors",[]),this.metadata=e,this.language=t,this.backend=i,this.model=n,this.view=l,this.model.module="Mailboxes",this.view.isEditable=!0,this.view.setEditMode(),this.getProcessors()}addProcessor(){this.model.getField("mailbox_processors")||this.model.setField("mailbox_processors",[]),this.model.getField("mailbox_processors").push({id:this.model.generateGuid(),class:"",method:"",priority:"",stop_on_success:"",deleted:!1})}removeProcessor(e){this.model.getField("mailbox_processors").forEach((function(t){t.id===e&&(t.deleted=!0)}))}get processorsvisible(){return this.model.getField("mailbox_processors").length>0}getProcessorMethods(e){for(let t of this.processors)if(t.processor_class==e)return t.methods;return[]}getProcessors(){let e=new pn.x;return this.backend.getRequest("module/Mailboxes/processors").subscribe((t=>{!0===t.result&&(this.processors=t.processors),e.next(t),e.complete()})),e.asObservable()}}return e=MailboxesProcessors,(0,s.Z)(MailboxesProcessors,"ɵfac",(function(t){return new(t||e)(u.Y36(f.Pu),u.Y36(b.d),u.Y36(h.y),u.Y36(Ql.o),u.Y36($i.e))})),(0,s.Z)(MailboxesProcessors,"ɵcmp",u.Xpm({type:e,selectors:[["mailboxes-processors"]],decls:3,vars:1,consts:[["class","slds-table slds-table_bordered slds-table_cell-buffer",4,"ngIf"],["type","button",1,"slds-col--bump-left","slds-button","slds-button--neutral",3,"click"],[1,"slds-table","slds-table_bordered","slds-table_cell-buffer"],[1,"slds-text-title"],["scope","col"],["title","Class",1,"slds-truncate"],["title","Method",1,"slds-truncate"],["title","Priority",1,"slds-truncate"],["title","Stop on success",1,"slds-truncate"],[4,"ngFor","ngForOf"],[4,"ngIf"],["type","hidden",3,"ngModel","ngModelChange"],["scope","row","data-label","Class"],["type","text",1,"slds-select","ng-pristine","ng-valid",3,"disabled","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["scope","row","data-label","Method"],["scope","row","data-label","Priority"],["title","Priority",1,"slds-input","ng-pristine","ng-valid","ng-touched",3,"ngModel","ngModelChange"],["scope","row","data-label","Stop on success"],["title","Stop on success",1,"slds-input","ng-pristine","ng-valid","ng-touched",3,"ngModel","ngModelChange"],["scope","row"],[1,"slds-button","slds-button_destructive",3,"click"],[3,"value"]],template:function(e,t){1&e&&(u.YNc(0,Ro,17,1,"table",0),u.TgZ(1,"button",1),u.NdJ("click",(function(){return t.addProcessor()})),u._uU(2," Add Processor\n"),u.qZA()),2&e&&u.Q6J("ngIf",t.processorsvisible)},dependencies:[n.sg,n.O5,l.YN,l.Kr,l.Fj,l.EJ,l.JJ,l.On],encapsulation:2})),MailboxesProcessors})();function Ho(e,t){if(1&e&&(u.TgZ(0,"option",22),u._uU(1),u.qZA()),2&e){const e=t.$implicit;u.Q6J("value",e.id),u.xp6(1),u.hij("",e.name," ")}}function Ko(e,t){1&e&&(u.TgZ(0,"div",23),u._UZ(1,"system-spinner"),u.qZA())}function zo(e,t){1&e&&u._UZ(0,"system-utility-icon",34),2&e&&u.Q6J("icon","favorite")("size","xx-small")}function Vo(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"system-utility-icon",35),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw().$implicit,i=u.oxw(2);return u.KtG(i.addCategory(t))})),u.qZA()}2&e&&u.Q6J("icon","add")("size","xx-small")}function Po(e,t){1&e&&u._UZ(0,"system-utility-icon",11),2&e&&u.Q6J("icon","chevronright")("size","xx-small")}const $o=function(e,t){return{"slds-theme--shade":e,"slds-theme_alert-texture":t}};function jo(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div",27)(1,"div",28),u.NdJ("mouseenter",(function(){const t=u.CHM(e).$implicit,i=u.oxw(2);return u.KtG(i.select(t))})),u.TgZ(2,"span",29),u.NdJ("click",(function(){const t=u.CHM(e).$implicit,i=u.oxw(2);return u.KtG(i.edit(t))})),u._uU(3),u.qZA(),u.YNc(4,zo,1,2,"system-utility-icon",30),u.TgZ(5,"div",31),u.YNc(6,Vo,1,2,"system-utility-icon",32),u.YNc(7,Po,1,2,"system-utility-icon",33),u.qZA()()()}if(2&e){const e=t.$implicit,i=u.oxw(2);u.Q6J("ngClass",u.WLB(5,$o,i.isCategorySelected(e)||e==i.edit_category,e==i.edit_category)),u.xp6(3),u.Oqu(e.name),u.xp6(1),u.Q6J("ngIf",1==e.favorite),u.xp6(2),u.Q6J("ngIf",e.level<i.max_levels-1),u.xp6(1),u.Q6J("ngIf",e.childs)}}function Wo(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div",36)(1,"system-utility-icon",35),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw(2);return u.KtG(t.addCategory())})),u.qZA()()}2&e&&(u.xp6(1),u.Q6J("icon","add")("size","xx-small"))}const Xo=function(e){return{width:e}},ea=function(e){return{"slds-border--right":e}};function ta(e,t){if(1&e&&(u.TgZ(0,"div",24),u.YNc(1,jo,8,8,"div",25),u.YNc(2,Wo,2,2,"div",26),u.qZA()),2&e){const e=t.$implicit,i=t.index,s=u.oxw();u.Q6J("ngStyle",u.VKq(4,Xo,100/s.levels.length+"%"))("ngClass",u.VKq(6,ea,i<s.max_levels-1)),u.xp6(1),u.Q6J("ngForOf",e),u.xp6(1),u.Q6J("ngIf",0==i)}}function ia(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"article",37)(1,"div",38)(2,"header",17)(3,"h2"),u._uU(4,"Edit Category"),u.qZA()(),u.TgZ(5,"system-utility-icon",35),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw();return u.KtG(t.removeCategory(t.edit_category))})),u.qZA()(),u.TgZ(6,"div",39)(7,"div",40)(8,"label",3),u._uU(9,"Name:"),u.qZA(),u.TgZ(10,"div",41)(11,"input",42),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw();return u.KtG(i.edit_category.name=t)})),u.qZA()()(),u.TgZ(12,"div",40)(13,"label",3),u._uU(14,"Key:"),u.qZA(),u.TgZ(15,"div",41)(16,"input",42),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw();return u.KtG(i.edit_category.keyname=t)})),u.qZA()()(),u.TgZ(17,"div",40)(18,"div",43)(19,"div",44)(20,"span",45)(21,"input",46),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw();return u.KtG(i.edit_category.favorite=t)})),u.qZA(),u.TgZ(22,"label",47),u._UZ(23,"span",48),u.TgZ(24,"span",3),u._uU(25,"Favorite"),u.qZA()()(),u.TgZ(26,"span",45)(27,"input",49),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw();return u.KtG(i.edit_category.selectable=t)})),u.qZA(),u.TgZ(28,"label",50),u._UZ(29,"span",48),u.TgZ(30,"span",3),u._uU(31,"Selectable"),u.qZA()()()()()()()()}if(2&e){const e=u.oxw();u.xp6(5),u.Q6J("icon","close")("size","xx-small"),u.xp6(6),u.Q6J("ngModel",e.edit_category.name),u.xp6(5),u.Q6J("ngModel",e.edit_category.keyname),u.xp6(5),u.Q6J("ngModel",e.edit_category.favorite),u.xp6(6),u.Q6J("ngModel",e.edit_category.selectable)}}let sa=(()=>{var e;class SelectTreeComponent{constructor(e,t,i,n,l,o,a){(0,s.Z)(this,"backend",void 0),(0,s.Z)(this,"metadata",void 0),(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"config",void 0),(0,s.Z)(this,"utils",void 0),(0,s.Z)(this,"toast",void 0),(0,s.Z)(this,"modalservice",void 0),(0,s.Z)(this,"currentSelectTree",""),(0,s.Z)(this,"category_tree",[]),(0,s.Z)(this,"levels",[]),(0,s.Z)(this,"max_levels",4),(0,s.Z)(this,"loading",!0),(0,s.Z)(this,"selected_categorys",[]),(0,s.Z)(this,"edit_category",null),(0,s.Z)(this,"service_queues",[]),(0,s.Z)(this,"trees",[]),this.backend=e,this.metadata=t,this.language=i,this.config=n,this.utils=l,this.toast=o,this.modalservice=a,this.loadTrees(!0)}addTree(){this.modalservice.openModal("SelectTreeAddDialog").subscribe((e=>{e.instance.tree$.subscribe((e=>{this.updateTree(e)}))}))}updateTree(e){this.loadTrees(),this.currentSelectTree=e.id,this.loadSelectTree(this.currentSelectTree)}loadTrees(e=!1){this.config.getData("select_trees")||this.backend.getRequest("configuration/spiceui/core/selecttree/trees").subscribe((t=>{this.trees=t,e&&(this.trees.length>0?(this.currentSelectTree=this.trees[0].id,this.loadSelectTree(this.currentSelectTree)):this.loading=!1)}))}loadSelectTree(e){this.edit_category=null,this.backend.getRequest("configuration/spiceui/core/selecttree/tree/"+e).subscribe((e=>{this.config.setData("select_tree",e),this.initializeTree(e)}))}initializeTree(e){this.category_tree=e;for(let e=0;e<this.max_levels;e++)this.levels[e]=[];this.levels[0]=this.category_tree,this.loading=!1}resetLevels(e=0){for(let t=e;t<this.max_levels;t++)this.levels[t]=[];this.selected_categorys.splice(e,this.max_levels-e)}select(e){this.selected_categorys[e.level]=e,e.childs?(this.levels[e.level+1]=e.childs,this.resetLevels(e.level+2)):this.resetLevels(e.level+1)}addCategory(e=null){let t={id:this.utils.generateGuid(),name:"new Field...",keyname:null,parent_id:null,tree:this.currentSelectTree,selectable:0,favorite:0,level:0};e?(e.childs||(e.childs=[]),t.parent_id=e.id,t.level=e.level+1,t.level>this.max_levels&&(this.max_levels=t.level),e.childs.push(t),this.levels[e.level+1]=e.childs):(this.category_tree.push(t),this.levels[0]=this.category_tree),this.select(t),this.edit(t)}removeCategory(e){if(e.childs){if(!confirm("Are you sure you want to delete this Category? There are "+e.childs.length+" Subcategories which will be get deleted too!"))return!1}e==this.edit_category&&(this.edit_category=null);let t=0;for(let s of this.category_tree){if(s==e)return this.category_tree.splice(t,1),!0;i(s,e),t++}function i(e,t){if(e.childs)for(let s=0;s<e.childs.length;s++){if(e.childs[s]==t)return e.childs.splice(s,1),!0;i(e.childs[s],t)}return!1}}edit(e){this.selected_categorys[e.level]=e,this.edit_category=e}save(){this.backend.postRequest("configuration/spiceui/core/selecttree/tree",null,this.category_tree).subscribe((e=>{this.toast.sendToast("changes saved")}),(e=>{this.toast.sendAlert("saving failed!"),console.error(e)}))}isCategorySelected(e){for(let t of this.selected_categorys)if(t.id==e.id)return!0;return!1}}return e=SelectTreeComponent,(0,s.Z)(SelectTreeComponent,"ɵfac",(function(t){return new(t||e)(u.Y36(h.y),u.Y36(f.Pu),u.Y36(b.d),u.Y36(M.C),u.Y36(Z.A),u.Y36(v.A),u.Y36(x.o))})),(0,s.Z)(SelectTreeComponent,"ɵcmp",u.Xpm({type:e,selectors:[["ng-component"]],decls:26,vars:8,consts:[[1,"slds-p-around--small","slds-border--bottom"],[1,"slds-grid","slds-grid--vertical-align-center","slds-form--inline"],[1,"slds-form-element"],[1,"slds-form-element__label"],["label","LBL_TREE"],[1,"slds-form-element__control",2,"min-width","250px"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","disabled","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],[1,"slds-form-element","slds-col--bump-left"],["type","button",1,"slds-button","slds-button_icon","slds-button_icon-border-filled",3,"click"],[3,"icon","size"],[1,"slds-grid","slds-grid--align-spread","slds-p-around--medium"],[1,"slds-text-heading--medium"],[1,"slds-button","slds-button--brand",3,"click"],[1,"slds-card","slds-m-around--small"],[1,"slds-card__header"],[1,"slds-has-flexi-truncate"],[1,"slds-card__body","slds-card__body_inner","slds-grid"],["class","slds-p-around--small slds-align--absolute-center",4,"ngIf"],["class","slds-col slds-size--1-of-2",3,"ngStyle","ngClass",4,"ngFor","ngForOf"],["class","slds-card slds-m-around--small slds-size--1-of-4 slds-theme--shade slds-theme_alert-texture",4,"ngIf"],[3,"value"],[1,"slds-p-around--small","slds-align--absolute-center"],[1,"slds-col","slds-size--1-of-2",3,"ngStyle","ngClass"],[3,"ngClass",4,"ngFor","ngForOf"],["class","slds-p-around--xx-small",4,"ngIf"],[3,"ngClass"],[1,"slds-grid","slds-grid--vertical-align-center","slds-p-around--xx-small",3,"mouseenter"],[1,"slds-truncate",2,"cursor","pointer",3,"click"],["class","slds-m-left--small",3,"icon","size",4,"ngIf"],[1,"slds-col--bump-left"],["style","cursor:pointer;",3,"icon","size","click",4,"ngIf"],[3,"icon","size",4,"ngIf"],[1,"slds-m-left--small",3,"icon","size"],[2,"cursor","pointer",3,"icon","size","click"],[1,"slds-p-around--xx-small"],[1,"slds-card","slds-m-around--small","slds-size--1-of-4","slds-theme--shade","slds-theme_alert-texture"],[1,"slds-card__header","slds-grid"],[1,"slds-card__body","slds-card__body_inner"],[1,"slds-form-element","slds-m-vertical--xxx-small"],[1,"slds-form-element__control"],["type","text",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-form-element","slds-p-top--small"],[1,"slds-form-element__control","slds-grid"],[1,"slds-checkbox"],["type","checkbox","name","options","id","checkbox-42",3,"ngModel","ngModelChange"],["for","checkbox-42",1,"slds-checkbox__label"],[1,"slds-checkbox_faux"],["type","checkbox","name","options","id","checkbox-49",3,"ngModel","ngModelChange"],["for","checkbox-49",1,"slds-checkbox__label"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"label",3),u._UZ(4,"system-label",4),u.qZA(),u.TgZ(5,"div",5)(6,"div",6)(7,"select",7),u.NdJ("ngModelChange",(function(e){return t.currentSelectTree=e}))("change",(function(){return t.loadSelectTree(t.currentSelectTree)})),u.YNc(8,Ho,2,2,"option",8),u.qZA()()()(),u.TgZ(9,"div",9)(10,"button",10),u.NdJ("click",(function(){return t.addTree()})),u._UZ(11,"system-utility-icon",11),u.qZA()()()(),u.TgZ(12,"div",12)(13,"h2",13),u._uU(14,"Select Tree"),u.qZA(),u.TgZ(15,"button",14),u.NdJ("click",(function(){return t.save()})),u._uU(16,"Save"),u.qZA()(),u.TgZ(17,"article",15)(18,"div",16)(19,"header",17)(20,"h2"),u._uU(21,"Service Category Tree"),u.qZA()()(),u.TgZ(22,"div",18),u.YNc(23,Ko,2,0,"div",19),u.YNc(24,ta,3,8,"div",20),u.qZA()(),u.YNc(25,ia,32,6,"article",21)),2&e&&(u.xp6(7),u.Q6J("ngModel",t.currentSelectTree)("disabled",0==t.trees.length),u.xp6(1),u.Q6J("ngForOf",t.trees),u.xp6(3),u.Q6J("icon","add")("size","x-small"),u.xp6(12),u.Q6J("ngIf",t.loading),u.xp6(1),u.Q6J("ngForOf",t.levels),u.xp6(1),u.Q6J("ngIf",t.edit_category))},dependencies:[n.mk,n.sg,n.O5,n.PC,l.YN,l.Kr,l.Fj,l.Wl,l.EJ,l.JJ,l.On,L._,ol.W,m.r],encapsulation:2})),SelectTreeComponent})(),na=(()=>{var e;class SelectTreeAddDialog{constructor(e,t,i,n,l){(0,s.Z)(this,"backend",void 0),(0,s.Z)(this,"metadata",void 0),(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"modelutilities",void 0),(0,s.Z)(this,"utils",void 0),(0,s.Z)(this,"tree",null),(0,s.Z)(this,"tree$",new u.vpe),(0,s.Z)(this,"addType","fieldset"),(0,s.Z)(this,"addName",""),(0,s.Z)(this,"fieldsettype","custom"),(0,s.Z)(this,"self",void 0),this.backend=e,this.metadata=t,this.language=i,this.modelutilities=n,this.utils=l}closeDialog(){this.self.destroy()}add(){this.tree={id:this.utils.generateGuid(),name:this.addName},this.backend.postRequest("configuration/spiceui/core/selecttree/newtree",null,this.tree).subscribe((e=>{this.tree$.emit(this.tree),this.self.destroy()}),(e=>{console.error(e)}))}}return e=SelectTreeAddDialog,(0,s.Z)(SelectTreeAddDialog,"ɵfac",(function(t){return new(t||e)(u.Y36(h.y),u.Y36(f.Pu),u.Y36(b.d),u.Y36(Z.A),u.Y36(Z.A))})),(0,s.Z)(SelectTreeAddDialog,"ɵcmp",u.Xpm({type:e,selectors:[["selecttree-add-dialog"]],inputs:{tree:"tree"},outputs:{tree$:"tree"},decls:18,vars:3,consts:[["role","dialog","tabindex","-1","aria-labelledby","header43",1,"slds-modal","slds-fade-in-open"],[1,"slds-modal__container"],[1,"slds-modal__header"],["title","Close",1,"slds-button","slds-modal__close","slds-button--icon-inverse",3,"click"],[3,"icon","size"],["id","header43",1,"slds-text-heading--medium"],["label","LBL_ADD_TREE"],[1,"slds-modal__content","slds-p-around--medium"],[1,"slds-form-element","slds-m-top--small"],[1,"slds-form-element__label"],["label","LBL_TREE_NAME"],[1,"slds-form-element__control"],["type","text","placeholder","name",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-modal__footer"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_ADD"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),u.NdJ("click",(function(){return t.closeDialog()})),u._UZ(4,"system-button-icon",4),u.qZA(),u.TgZ(5,"h2",5),u._UZ(6,"system-label",6),u.qZA()(),u.TgZ(7,"div",7)(8,"div",8)(9,"label",9),u._UZ(10,"system-label",10),u.qZA(),u.TgZ(11,"div",11)(12,"input",12),u.NdJ("ngModelChange",(function(e){return t.addName=e})),u.qZA()()()(),u.TgZ(13,"div",13)(14,"button",14),u.NdJ("click",(function(){return t.closeDialog()})),u._UZ(15,"system-label",15),u.qZA(),u.TgZ(16,"button",16),u.NdJ("click",(function(){return t.add()})),u._UZ(17,"system-label",17),u.qZA()()()()),2&e&&(u.xp6(4),u.Q6J("icon","close")("size","large"),u.xp6(8),u.Q6J("ngModel",t.addName))},dependencies:[l.Fj,l.JJ,l.On,T.J,L._],encapsulation:2})),SelectTreeAddDialog})();var la=i(5399),oa=i(8807),aa=i(2400);function da(e,t){1&e&&(u.TgZ(0,"div"),u._UZ(1,"system-spinner"),u.qZA())}function ra(e,t){1&e&&(u.TgZ(0,"div",10),u._UZ(1,"system-utility-icon",11),u.TgZ(2,"div",12)(3,"p"),u._uU(4,"all fine!"),u.qZA()()())}function ca(e,t){if(1&e&&(u.TgZ(0,"tr")(1,"td"),u._UZ(2,"system-checkbox",15),u.qZA(),u.TgZ(3,"td"),u._uU(4),u.qZA(),u.TgZ(5,"td"),u._uU(6),u.qZA()()),2&e){const e=t.$implicit;u.xp6(2),u.Q6J("disabled",!0),u.xp6(2),u.Oqu(e.id),u.xp6(2),u.Oqu(e.name)}}function ga(e,t){if(1&e&&(u.TgZ(0,"div")(1,"p"),u._uU(2),u.qZA(),u.TgZ(3,"table",13)(4,"thead")(5,"tr"),u._UZ(6,"th"),u.TgZ(7,"th"),u._uU(8,"ID"),u.qZA(),u.TgZ(9,"th"),u._uU(10,"Name"),u.qZA()()(),u.TgZ(11,"tbody"),u.YNc(12,ca,7,3,"tr",14),u.qZA()()()),2&e){const e=u.oxw().$implicit;u.xp6(2),u.Oqu(e.description),u.xp6(10),u.Q6J("ngForOf",e.records)}}function ua(e,t){if(1&e&&(u.TgZ(0,"system-card",7),u._UZ(1,"system-card-header",8),u.TgZ(2,"system-card-body"),u.YNc(3,ra,5,0,"div",9),u.YNc(4,ga,13,2,"div",4),u.qZA()()),2&e){const e=t.$implicit;u.xp6(1),u.Q6J("title",e.table),u.xp6(2),u.Q6J("ngIf",!e.records),u.xp6(1),u.Q6J("ngIf",e.records&&e.records.length>0)}}function ma(e,t){if(1&e&&(u.TgZ(0,"div")(1,"div",5)(2,"p"),u._uU(3),u.qZA()(),u.YNc(4,ua,5,3,"system-card",6),u.qZA()),2&e){const e=u.oxw();u.xp6(3),u.AsE("",e.results.total_checks," Checks are made and found ",e.results.total_records," Records:"),u.xp6(1),u.Q6J("ngForOf",e.results.checks)}}let pa=(()=>{var e;class ConfigCleaner{constructor(e,t,i,n){(0,s.Z)(this,"backend",void 0),(0,s.Z)(this,"metadata",void 0),(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"utils",void 0),(0,s.Z)(this,"results",[]),(0,s.Z)(this,"is_loading",!1),this.backend=e,this.metadata=t,this.language=i,this.utils=n}diagnose(e){this.is_loading=!0,this.backend.getRequest(`admin/cleanup/configs/check/${e}`).subscribe((e=>{this.results=e,this.is_loading=!1}))}}return e=ConfigCleaner,(0,s.Z)(ConfigCleaner,"ɵfac",(function(t){return new(t||e)(u.Y36(h.y),u.Y36(f.Pu),u.Y36(b.d),u.Y36(Z.A))})),(0,s.Z)(ConfigCleaner,"ɵcmp",u.Xpm({type:e,selectors:[["language-label-manager"]],decls:6,vars:2,consts:[[1,"slds-p-around--medium"],[1,"slds-m-around--medium"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_INCOMPLETE_RECORDS"],[4,"ngIf"],[1,"slds-box","slds-m-bottom--medium"],["class","slds-m-bottom--medium",4,"ngFor","ngForOf"],[1,"slds-m-bottom--medium"],[3,"title"],["class","slds-inline_icon_text slds-grid",4,"ngIf"],[1,"slds-inline_icon_text","slds-grid"],["icon","check","size","x-small"],[1,"slds-col","slds-align-middle","slds-text-color_success"],[1,"slds-table","slds-table--bordered"],[4,"ngFor","ngForOf"],[3,"disabled"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0)(1,"div",1)(2,"button",2),u.NdJ("click",(function(){return t.diagnose("incomplete")})),u._UZ(3,"system-label",3),u.qZA()(),u.YNc(4,da,2,0,"div",4),u.YNc(5,ma,5,3,"div",4),u.qZA()),2&e&&(u.xp6(4),u.Q6J("ngIf",t.is_loading),u.xp6(1),u.Q6J("ngIf",t.results&&t.results.total_checks>0))},dependencies:[n.sg,n.O5,la.x,oa.I,aa.Q,Q.U,L._,ol.W,m.r],encapsulation:2})),ConfigCleaner})();function ha(e,t){1&e&&(u.TgZ(0,"div"),u._UZ(1,"system-spinner"),u.qZA())}let fa=(()=>{var e;class StyleCacheCleaner{constructor(e,t,i){(0,s.Z)(this,"backend",void 0),(0,s.Z)(this,"toast",void 0),(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"is_loading",!1),this.backend=e,this.toast=t,this.language=i}cleanCache(){this.is_loading=!0,this.backend.getRequest("admin/cleanup/stylecache").subscribe((e=>{e?this.toast.sendToast(this.language.getLabel("LBL_CACHE_FILE_DELETED"),"success"):this.toast.sendToast(this.language.getLabel("LBL_CACHE_FILE_NOT_FOUND"),"info"),this.is_loading=!1}))}}return e=StyleCacheCleaner,(0,s.Z)(StyleCacheCleaner,"ɵfac",(function(t){return new(t||e)(u.Y36(h.y),u.Y36(v.A),u.Y36(b.d))})),(0,s.Z)(StyleCacheCleaner,"ɵcmp",u.Xpm({type:e,selectors:[["style-cache-cleaner"]],decls:5,vars:1,consts:[[1,"slds-p-around--medium"],[1,"slds-m-around--medium"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_CLEAN_STYLE_CACHE"],[4,"ngIf"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0)(1,"div",1)(2,"button",2),u.NdJ("click",(function(){return t.cleanCache()})),u._UZ(3,"system-label",3),u.qZA()(),u.YNc(4,ha,2,0,"div",4),u.qZA()),2&e&&(u.xp6(4),u.Q6J("ngIf",t.is_loading))},dependencies:[n.O5,L._,ol.W],encapsulation:2})),StyleCacheCleaner})();function ba(e,t){if(1&e&&(u.TgZ(0,"option",21),u._uU(1),u.qZA()),2&e){const e=t.$implicit;u.s9C("value",e.class),u.xp6(1),u.Oqu(e.class)}}function Za(e,t){if(1&e&&(u.TgZ(0,"option",21),u._uU(1),u.qZA()),2&e){const e=t.$implicit;u.s9C("value",e.id),u.xp6(1),u.Oqu(e.name)}}function _a(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"tr")(1,"td",15)(2,"select",16),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw().$implicit;return u.KtG(i.bean=t)})),u.YNc(3,ba,2,2,"option",17),u.qZA()(),u.TgZ(4,"td",18)(5,"select",16),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw().$implicit;return u.KtG(i.calendar=t)})),u.YNc(6,Za,2,2,"option",17),u.qZA()(),u.TgZ(7,"td",19)(8,"button",20),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw().$implicit,i=u.oxw();return u.KtG(i.removeMapping(t.id))})),u._uU(9,"X "),u.qZA()()()}if(2&e){const e=u.oxw().$implicit,t=u.oxw();u.xp6(2),u.Q6J("disabled",0==t.beans.length)("ngModel",e.bean),u.xp6(1),u.Q6J("ngForOf",t.beans),u.xp6(2),u.Q6J("disabled",0==t.calendars.length)("ngModel",e.calendar),u.xp6(1),u.Q6J("ngForOf",t.calendars)}}function ya(e,t){if(1&e&&(u.ynx(0),u.YNc(1,_a,10,6,"tr",14),u.BQk()),2&e){const e=t.$implicit;u.xp6(1),u.Q6J("ngIf",!e.deleted)}}let va=(()=>{var e;class GoogleCalendarManager{constructor(e,t,i,n){(0,s.Z)(this,"backend",void 0),(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"model",void 0),(0,s.Z)(this,"toast",void 0),(0,s.Z)(this,"beans",[]),(0,s.Z)(this,"calendars",[]),(0,s.Z)(this,"beanMappings",[]),this.backend=e,this.language=t,this.model=i,this.toast=n,this.getBeans(),this.getCalendars(),this.getBeanMappings()}saveBeanMappings(){let e={bean_mappings:this.beanMappings};this.backend.postRequest("channels/groupware/gsuite/calendar/beanmappings",{},e).subscribe((e=>{this.toast.sendToast("Bean Mappings saved")}))}startSync(){this.backend.getRequest("channels/groupware/gsuite/calendar/sync").subscribe((e=>{1==e.result?this.toast.sendToast("Google Calendar synchronization started.","success"):this.toast.sendToast(e.error,"error")}))}addMapping(){this.beanMappings||(this.beanMappings=[]),this.beanMappings.push({id:this.model.generateGuid(),deleted:!1,bean:{module:"",class:""},calendar:{id:"",name:""}})}removeMapping(e){this.beanMappings.forEach((t=>{t.id===e&&(t.deleted=!0)}))}getBeans(){let e=new pn.x;return this.backend.getRequest("channels/groupware/gsuite/calendar/beans").subscribe((t=>{!0===t.result&&(this.beans=t.beans),e.next(t),e.complete()}),(e=>{})),e.asObservable()}getCalendars(){let e=new pn.x;return this.backend.getRequest("channels/groupware/gsuite/calendar/calendars").subscribe((t=>{!0===t.result&&(this.calendars=t.calendars),e.next(t),e.complete()}),(e=>{})),e.asObservable()}getBeanMappings(){let e=new pn.x;return this.backend.getRequest("channels/groupware/gsuite/calendar/beanmappings").subscribe((t=>{!0===t.result&&(this.beanMappings=Object.keys(t.bean_mappings).map((e=>t.bean_mappings[e]))),e.next(t),e.complete()}),(e=>{})),e.asObservable()}}return e=GoogleCalendarManager,(0,s.Z)(GoogleCalendarManager,"ɵfac",(function(t){return new(t||e)(u.Y36(h.y),u.Y36(b.d),u.Y36(Ql.o),u.Y36(v.A))})),(0,s.Z)(GoogleCalendarManager,"ɵcmp",u.Xpm({type:e,selectors:[["google-calendar-manager"]],features:[u._Bn([Ql.o,$i.e])],decls:20,vars:1,consts:[[1,"slds-grid","slds-form--inline","slds-p-around--small","slds-border--bottom"],[1,"slds-form-element","slds-col--bump-left"],["role","group",1,"slds-button-group"],["type","button",1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_START_SYNC"],["label","LBL_ADD"],["type","button",1,"slds-button","slds-button--brand",3,"click"],["label","LBL_SAVE"],[1,"slds-table","slds-table_bordered","slds-table_cell-buffer"],[1,"slds-text-title"],["scope","col"],["title","Bean",1,"slds-truncate"],["title","Calendar",1,"slds-truncate"],[4,"ngFor","ngForOf"],[4,"ngIf"],["scope","row","data-label","Class"],["type","text",1,"slds-select","ng-pristine","ng-valid",3,"disabled","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["scope","row","data-label","Method"],["scope","row"],[1,"slds-button","slds-button_destructive",3,"click"],[3,"value"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),u.NdJ("click",(function(){return t.startSync()})),u._UZ(4,"system-label",4),u.qZA(),u.TgZ(5,"button",3),u.NdJ("click",(function(){return t.addMapping()})),u._UZ(6,"system-label",5),u.qZA(),u.TgZ(7,"button",6),u.NdJ("click",(function(){return t.saveBeanMappings()})),u._UZ(8,"system-label",7),u.qZA()()()(),u.TgZ(9,"table",8)(10,"thead")(11,"tr",9)(12,"th",10)(13,"div",11),u._uU(14,"Bean"),u.qZA()(),u.TgZ(15,"th",10)(16,"div",12),u._uU(17,"Calendar"),u.qZA()()()(),u.TgZ(18,"tbody"),u.YNc(19,ya,2,1,"ng-container",13),u.qZA()()),2&e&&(u.xp6(19),u.Q6J("ngForOf",t.beanMappings))},dependencies:[n.sg,n.O5,l.YN,l.Kr,l.EJ,l.JJ,l.On,L._],encapsulation:2})),GoogleCalendarManager})();var xa=i(1135),Ma=i(2422),Aa=i(8026),Ta=i(1061);const La=["downloadlink"],qa=["fileupload"];function Ca(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div")(1,"div",33),u._uU(2,'Upload and import the file "'),u.TgZ(3,"b"),u._uU(4),u.qZA(),u._uU(5,'"?'),u.qZA(),u.TgZ(6,"div")(7,"button",34),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw(2);return u.KtG(t.uploadFile())})),u._uU(8),u.qZA()()()}if(2&e){const e=u.oxw(2);u.xp6(4),u.Oqu(e.filename),u.xp6(4),u.Oqu(e.lang.getLabel("LBL_UPLOAD_AND_IMPORT"))}}function Ja(e,t){if(1&e&&(u.TgZ(0,"system-progress-bar",35),u._uU(1,' Upload of file "'),u.TgZ(2,"b"),u._uU(3),u.qZA(),u._uU(4,'" … '),u.qZA()),2&e){const e=u.oxw(2);u.Q6J("progress",e.uploadProgress),u.xp6(3),u.Oqu(e.filename)}}function Na(e,t){1&e&&(u.TgZ(0,"div")(1,"b"),u._uU(2,"Importing …"),u.qZA()())}function ka(e,t){if(1&e&&(u.TgZ(0,"div")(1,"b"),u._uU(2,"Import successful"),u.qZA(),u._uU(3),u._UZ(4,"br"),u._uU(5),u.qZA()),2&e){const e=u.oxw(2);u.xp6(3),u.AsE(": ",e.importResponse.numberLinesInserted," records inserted into ",e.importResponse.numberAffectedTables," tables. "),u.xp6(2),u.AsE('Before import a backup of the affected tables has been made to folder "',e.importResponse.backupLocation,'". It will be automatically deleted after ',e.importResponse.backupPeriod," days. ")}}function wa(e,t){if(1&e&&(u.TgZ(0,"div")(1,"b"),u._uU(2,"Import failed"),u.qZA(),u._uU(3),u.qZA()),2&e){const e=u.oxw(2);u.xp6(3),u.hij(". No record has been inserted. Reason: ",e.importErrorMessage," ")}}function Ua(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div")(1,"div",8)(2,"div",23)(3,"div",24)(4,"input",25),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw();return u.KtG(i.ignoreUnknownTables=t)})),u.qZA(),u.TgZ(5,"label",26),u._UZ(6,"span",27),u.TgZ(7,"span",9),u._uU(8,"Ignore unknown tables and do the import anyway. In case the input data contains tables that are unknown to the system."),u.qZA()()()()(),u.TgZ(9,"div",8)(10,"div",23)(11,"div",24)(12,"input",28),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw();return u.KtG(i.keepAssignedUser=t)})),u.qZA(),u.TgZ(13,"label",29),u._UZ(14,"span",27),u.TgZ(15,"span",9),u._uU(16,"Keep assigned user. Otherwise, the records will be assigned to "),u.TgZ(17,"i"),u._uU(18,"you"),u.qZA(),u._uU(19,"."),u.qZA()()()()(),u.TgZ(20,"div",8)(21,"div",23)(22,"div",24)(23,"input",30),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw();return u.KtG(i.keepEnteredModifiedInfo=t)})),u.qZA(),u.TgZ(24,"label",31),u._UZ(25,"span",27),u.TgZ(26,"span",9),u._uU(27,"Keep entered/modified info. Otherwise, "),u.TgZ(28,"i"),u._uU(29,"you"),u.qZA(),u._uU(30," will be noted in the record - with the "),u.TgZ(31,"i"),u._uU(32,"current"),u.qZA(),u._uU(33," time stamp."),u.qZA()()()()(),u.YNc(34,Ca,9,2,"div",19),u.YNc(35,Ja,5,2,"system-progress-bar",32),u.YNc(36,Na,3,0,"div",19),u.YNc(37,ka,6,4,"div",19),u.YNc(38,wa,4,1,"div",19),u.qZA()}if(2&e){const e=u.oxw();u.xp6(4),u.Q6J("ngModel",e.ignoreUnknownTables)("disabled",e.isAfterUpload||e.isUploading),u.xp6(8),u.Q6J("ngModel",e.keepAssignedUser)("disabled",e.isAfterUpload||e.isUploading),u.xp6(11),u.Q6J("ngModel",e.keepEnteredModifiedInfo)("disabled",e.isAfterUpload||e.isUploading),u.xp6(11),u.Q6J("ngIf",!e.isAfterUpload&&!e.isUploading),u.xp6(1),u.Q6J("ngIf",e.isUploading||e.isAfterUpload),u.xp6(1),u.Q6J("ngIf",e.isImporting),u.xp6(1),u.Q6J("ngIf",!0===e.importOK),u.xp6(1),u.Q6J("ngIf",!1===e.importOK)}}function Ea(e,t){1&e&&u._UZ(0,"system-spinner",36)}function Da(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div",39)(1,"button",40),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw(2);return u.KtG(t.changeExportSettings=!0)})),u._uU(2,"change export settings …"),u.qZA()()}}function Oa(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div",51)(1,"div",52)(2,"div",24)(3,"input",53),u.NdJ("ngModelChange",(function(t){const i=u.CHM(e).$implicit;return u.KtG(i.include=t)})),u.qZA(),u.TgZ(4,"label",54),u._UZ(5,"span",27),u.TgZ(6,"span",55),u._uU(7),u.qZA()()()()()}if(2&e){const e=t.$implicit,i=t.index;u.xp6(3),u.MGl("id","table",i,""),u.Q6J("ngModel",e.include),u.xp6(1),u.MGl("for","table",i,""),u.xp6(3),u.Oqu(e.name)}}function Ia(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"span")(1,"a",56),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw(3);return u.KtG(t.showBlacklistedTables=!t.showBlacklistedTables)})),u._uU(2,"[show/hide]"),u.qZA(),u._uU(3),u.qZA()}if(2&e){const e=u.oxw(3);u.xp6(3),u.hij('. If necessary use the following input field "',e.lang.getLabel("LBL_ADDITIONAL_TABLES"),'".')}}function Qa(e,t){if(1&e&&(u.TgZ(0,"span"),u._uU(1),u.qZA()),2&e){const e=u.oxw(3);u.xp6(1),u.Oqu(e.blacklistedTables.join(", "))}}function Sa(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div")(1,"div",41)(2,"button",42),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw(2);return u.KtG(t.selectAll(!0))})),u._uU(3),u.qZA(),u.TgZ(4,"button",42),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw(2);return u.KtG(t.selectCustom(!0))})),u._uU(5),u.qZA(),u.TgZ(6,"button",42),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw(2);return u.KtG(t.selectAll(!1))})),u._uU(7),u.qZA()(),u.TgZ(8,"div",43),u.YNc(9,Oa,8,4,"div",44),u.qZA(),u.TgZ(10,"div",33)(11,"div")(12,"b"),u._uU(13),u.qZA(),u._uU(14,", because they may not be exported/imported "),u.YNc(15,Ia,4,1,"span",19),u.qZA(),u.YNc(16,Qa,2,1,"span",19),u.qZA(),u.TgZ(17,"div",45)(18,"label",46),u._uU(19),u.qZA(),u.TgZ(20,"div",47)(21,"input",48),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw(2);return u.KtG(i.additionalTables=t)})),u.qZA(),u.TgZ(22,"button",49),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw(2);return u.KtG(t.additionalTables="")})),u._UZ(23,"system-button-icon",50),u.qZA()()()()}if(2&e){const e=u.oxw(2);u.xp6(3),u.Oqu(e.lang.getLabel("LBL_SELECT_ALL")),u.xp6(2),u.Oqu(e.lang.getLabel("LBL_SELECT_CUSTOM_ONLY")),u.xp6(2),u.Oqu(e.lang.getLabel("LBL_DESELECT_ALL")),u.xp6(2),u.Q6J("ngForOf",e.selectableTables),u.xp6(4),u.hij("",e.blacklistedTables.length," tables are not listed"),u.xp6(2),u.Q6J("ngIf",e.blacklistedTables.length),u.xp6(1),u.Q6J("ngIf",e.showBlacklistedTables),u.xp6(3),u.Oqu(e.lang.getLabel("LBL_ADDITIONAL_TABLES")),u.xp6(2),u.Q6J("ngModel",e.additionalTables),u.xp6(2),u.Q6J("icon","clear")("size","small")}}function Ba(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div"),u.YNc(1,Da,3,0,"div",37),u.YNc(2,Sa,24,11,"div",19),u.TgZ(3,"div")(4,"button",38),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw();return u.KtG(t.exportTables())})),u._uU(5),u.qZA()()()}if(2&e){const e=u.oxw();u.xp6(1),u.Q6J("ngIf",!e.changeExportSettings),u.xp6(1),u.Q6J("ngIf",e.changeExportSettings),u.xp6(2),u.Q6J("disabled",0===e.numberOfSelectedTables&&""===e.additionalTables||e.isDownloading),u.xp6(1),u.Oqu(e.lang.getLabel("LBL_EXPORT"))}}const Fa=function(e){return{"slds-is-active":e}},Ya=function(e){return{"slds-hide":e}},Ra=function(e){return{"slds-has-drag-over":e}};let Ga=(()=>{var e;class ConfigTransfer{constructor(e,t,i,n,l,o){(0,s.Z)(this,"backend",void 0),(0,s.Z)(this,"metadata",void 0),(0,s.Z)(this,"lang",void 0),(0,s.Z)(this,"prefs",void 0),(0,s.Z)(this,"modalservice",void 0),(0,s.Z)(this,"toast",void 0),(0,s.Z)(this,"tabToShow","i"),(0,s.Z)(this,"selectableTables",[]),(0,s.Z)(this,"blacklistedTables",[]),(0,s.Z)(this,"additionalTables",""),(0,s.Z)(this,"tablenamesLoaded",!1),(0,s.Z)(this,"showBlacklistedTables",!1),(0,s.Z)(this,"isLoadingTablenames",!1),(0,s.Z)(this,"isDownloading",!1),(0,s.Z)(this,"exportErrorID",void 0),(0,s.Z)(this,"exportErrorMessage",void 0),(0,s.Z)(this,"downloadlink",void 0),(0,s.Z)(this,"loadUrl",void 0),(0,s.Z)(this,"fileName","export.gz"),(0,s.Z)(this,"changeExportSettings",!1),(0,s.Z)(this,"fileFromBrowser",void 0),(0,s.Z)(this,"uploadProgress",void 0),(0,s.Z)(this,"isUploading",!1),(0,s.Z)(this,"isImporting",!1),(0,s.Z)(this,"isAfterUpload",!1),(0,s.Z)(this,"dropErrorMessageCode",null),(0,s.Z)(this,"importOK",null),(0,s.Z)(this,"importResponse",void 0),(0,s.Z)(this,"importErrorMessage",void 0),(0,s.Z)(this,"importErrorID",void 0),(0,s.Z)(this,"ignoreUnknownTables",!1),(0,s.Z)(this,"keepAssignedUser",!1),(0,s.Z)(this,"keepEnteredModifiedInfo",!1),(0,s.Z)(this,"fileupload",void 0),(0,s.Z)(this,"isDragOver",!1),this.backend=e,this.metadata=t,this.lang=i,this.prefs=n,this.modalservice=l,this.toast=o}showExport(){"e"!==this.tabToShow&&(this.tablenamesLoaded||this.isLoadingTablenames||(this.isLoadingTablenames=!0,this.backend.getRequest("configuration/transfer/tablenames").subscribe((e=>{e.selectableTables.forEach((e=>{this.selectableTables.push({name:e,include:!0})})),e.blacklistedTables.forEach((e=>{this.blacklistedTables.push(e)})),this.isLoadingTablenames=!1,this.tablenamesLoaded=!0}))),this.tabToShow="e")}showImport(){this.tabToShow="i"}exportTables(){this.isDownloading=!0,this.exportErrorID&&(this.toast.clearToast(this.exportErrorID),this.exportErrorID=null);let e=[];this.selectableTables.forEach((t=>{t.include&&e.push(t.name)})),this.fileName="spicecrm-cfg-"+moment().format("YYYYMMDD-HHmm")+".gz",this.backend.getDownloadPostRequestFile("configuration/transfer/export",{},{selectedTables:e,additionalTables:this.additionalTables}).subscribe((e=>{this.downloadlink.element.nativeElement.href=e,this.downloadlink.element.nativeElement.click(),this.isDownloading=!1}),(e=>{this.isDownloading=!1,this.exportErrorID=this.toast.sendToast(this.lang.getLabel("ERR_EXPORT_FAILED"),"error",this.exportErrorMessage=e.error.message)}))}selectAll(e){this.selectableTables.forEach((t=>{t.include=e}))}selectCustom(e){let t=/custom/;this.selectableTables.forEach((i=>{i.include=!e,t.test(i.name)&&(i.include=e)}))}get numberOfSelectedTables(){let e=0;return this.selectableTables.forEach((t=>t.include&&e++)),e}uploadFile(){this.modalservice.confirm("You are about to upload a file and import its data into the database. This will change the existing database. Do you really want to do this?",this.lang.getLabel("LBL_WARNING"),"warning").subscribe((e=>{if(e){this.isUploading=!0,this.importOK=null;let e=new xa.X(0);e.subscribe((e=>{this.uploadProgress=e,100===e&&(this.isImporting=!0)})),this.readFileFromFilesystem(this.fileFromBrowser).subscribe((t=>{this.backend.postRequestWithProgress("configuration/transfer/import",null,{file:t,ignoreUnknownTables:this.ignoreUnknownTables,keepAssignedUser:this.keepAssignedUser,keepEnteredModifiedInfo:this.keepEnteredModifiedInfo},e).subscribe((e=>{this.isAfterUpload=this.importOK=!0,this.isImporting=this.isUploading=!1,this.importResponse=e}),(e=>{this.isAfterUpload=!0,this.importOK=!1,this.isImporting=this.isUploading=!1,this.importErrorID=this.toast.sendToast(this.lang.getLabel("ERR_IMPORT_FAILED"),"error",this.importErrorMessage=e.error.error.message)}))}))}}))}get filename(){return this.fileFromBrowser?this.fileFromBrowser.name:""}fileSelectionChange(){return 1===this.fileupload.element.nativeElement.files.length&&(this.fileFromBrowser=this.fileupload.element.nativeElement.files[0]),this.fileSelectedOrDropped(),this.fileupload.element.nativeElement.value=null,!1}fileSelectedOrDropped(){this.isAfterUpload=this.isUploading=!1,this.importOK=null,this.importErrorID&&(this.toast.clearToast(this.importErrorID),this.importErrorID=null)}get fileReadyForUpload(){return this.fileFromBrowser&&!0}readFileFromFilesystem(e){let t=new pn.x,i=new FileReader;return i.onloadend=()=>{let e=i.result.toString();e=e.substring(e.indexOf("base64,")+7),t.next(e),t.complete()},i.readAsDataURL(e),t.asObservable()}onDrop(e){if(e.preventDefault(),this.isDragOver=!1,e.dataTransfer.items){if(1!==e.dataTransfer.items.length||"file"!==e.dataTransfer.items[0].kind)return void this.showDropError();const t=e.dataTransfer.items[0].getAsFile();if("gz"!==t.name.split(".").pop())return void this.showDropError();this.fileFromBrowser=t}else{if(1!==e.dataTransfer.files.length)return;if("gz"!==e.dataTransfer.files[0].name.split(".").pop())return void this.showDropError();this.fileFromBrowser=e.dataTransfer.files[0]}this.dropErrorMessageCode&&this.toast.clearToast(this.dropErrorMessageCode),this.fileSelectedOrDropped()}showDropError(){this.dropErrorMessageCode&&this.toast.clearToast(this.dropErrorMessageCode),this.dropErrorMessageCode=this.toast.sendToast('You can drop only a file. One file. With the extension "gz".',"error",null,!1,this.dropErrorMessageCode)}onDragOver(e){e.preventDefault(),e.stopPropagation(),e.dataTransfer.dropEffect="copy",this.isDragOver=!0}onDragLeave(){this.isDragOver=!1}}return e=ConfigTransfer,(0,s.Z)(ConfigTransfer,"ɵfac",(function(t){return new(t||e)(u.Y36(h.y),u.Y36(f.Pu),u.Y36(b.d),u.Y36(Ma.z),u.Y36(x.o),u.Y36(v.A))})),(0,s.Z)(ConfigTransfer,"ɵcmp",u.Xpm({type:e,selectors:[["ng-component"]],viewQuery:function(e,t){if(1&e&&(u.Gf(La,7,u.s_b),u.Gf(qa,7,u.s_b)),2&e){let e;u.iGM(e=u.CRH())&&(t.downloadlink=e.first),u.iGM(e=u.CRH())&&(t.fileupload=e.first)}},decls:34,vars:30,consts:[[1,"slds-m-horizontal--medium","slds-m-top--medium","slds-m-bottom--small"],[1,"slds-text-heading--medium"],[1,"slds-tabs_default","slds-tabs_medium"],["role","tablist",1,"slds-tabs_default__nav"],["title","Item One","role","presentation",1,"slds-tabs_default__item",3,"ngClass"],["href","javascript:void(0);",1,"slds-tabs_default__link",3,"click"],["title","Item Two","role","presentation",1,"slds-tabs_default__item",3,"ngClass"],[1,"slds-tabs_default__content",3,"ngClass"],[1,"slds-form-element"],[1,"slds-form-element__label"],[1,"slds-form-element__control"],[1,"slds-file-selector","slds-file-selector_files",3,"drop","dragover","dragleave"],[1,"slds-file-selector__dropzone",3,"ngClass"],["accept",".gz","type","file","id","config-file-upload-input",1,"slds-file-selector__input","slds-assistive-text",3,"disabled","click","change"],["fileupload",""],["for","config-file-upload-input",1,"slds-file-selector__body"],[1,"slds-file-selector__button","slds-button","slds-button_neutral"],[3,"icon","size","addclasses"],[1,"slds-file-selector__text","slds-medium-show"],[4,"ngIf"],["class","slds-m-top--x-large","style","display:block",4,"ngIf"],[2,"display","none",3,"href","download"],["downloadlink",""],[1,"slds-form-element__control","slds-m-vertical--medium"],[1,"slds-checkbox"],["type","checkbox","id","cbIgnoreUnknownTables",3,"ngModel","disabled","ngModelChange"],["for","cbIgnoreUnknownTables",1,"slds-checkbox__label"],[1,"slds-checkbox_faux"],["type","checkbox","id","cbKeepAssignedUser",3,"ngModel","disabled","ngModelChange"],["for","cbKeepAssignedUser",1,"slds-checkbox__label"],["type","checkbox","id","cbKeepEnteredModifiedData",3,"ngModel","disabled","ngModelChange"],["for","cbKeepEnteredModifiedData",1,"slds-checkbox__label"],["class","slds-m-vertical--medium","size","large",3,"progress",4,"ngIf"],[1,"slds-m-vertical--medium"],[1,"slds-button","slds-button--brand",3,"click"],["size","large",1,"slds-m-vertical--medium",3,"progress"],[1,"slds-m-top--x-large",2,"display","block"],["class","slds-m-bottom--medium",4,"ngIf"],[1,"slds-button","slds-button--brand",3,"disabled","click"],[1,"slds-m-bottom--medium"],[1,"slds-button","slds-button--neutral",3,"click"],["role","group",1,"slds-button-group","slds-m-bottom--medium"],[1,"slds-button","slds-button_neutral",3,"click"],["system-multi-select-checkboxes","",2,"column-width","270px","column-gap","1em"],["class","slds-form-element","style","z-index:1",4,"ngFor","ngForOf"],[1,"slds-form-element","slds-m-vertical--medium"],["for","additionalTables",1,"slds-form-element__label"],[1,"slds-form-element__control","slds-input-has-icon","slds-input-has-icon_right"],["id","additionalTables","type","text",1,"slds-input",3,"ngModel","ngModelChange"],["title","Clear",1,"slds-button","slds-button_icon","slds-input__icon","slds-input__icon_right",3,"click"],[3,"icon","size"],[1,"slds-form-element",2,"z-index","1"],[1,"slds-form-element__control","slds-m-bottom--xxx-small"],["type","checkbox","name","selectableTables",3,"id","ngModel","ngModelChange"],[1,"slds-checkbox__label",3,"for"],[1,"slds-form-element__label",2,"display","inline-block"],["href","javascript:void(0)",3,"click"]],template:function(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div",0)(1,"h2",1),u._uU(2),u.qZA(),u.TgZ(3,"p"),u._uU(4,"Export and import configuration data from/into database. Also usable for backup."),u.qZA(),u.TgZ(5,"div",2)(6,"ul",3)(7,"li",4)(8,"a",5),u.NdJ("click",(function(){return t.showImport()})),u._uU(9),u.qZA()(),u.TgZ(10,"li",6)(11,"a",5),u.NdJ("click",(function(){return t.showExport()})),u._uU(12),u.qZA()()(),u.TgZ(13,"div",7)(14,"div",8)(15,"span",9),u._uU(16),u.qZA(),u.TgZ(17,"div",10)(18,"div",11),u.NdJ("drop",(function(e){return t.onDrop(e)}))("dragover",(function(e){return t.onDragOver(e)}))("dragleave",(function(){return t.onDragLeave()})),u.TgZ(19,"div",12)(20,"input",13,14),u.NdJ("click",(function(){u.CHM(e);const t=u.MAs(21);return u.KtG(t.value=null)}))("change",(function(){return t.fileSelectionChange()})),u.qZA(),u.TgZ(22,"label",15)(23,"span",16),u._UZ(24,"system-button-icon",17),u._uU(25),u.qZA(),u.TgZ(26,"span",18),u._uU(27),u.qZA()()()()()(),u.YNc(28,Ua,39,11,"div",19),u.qZA(),u.TgZ(29,"div",7),u.YNc(30,Ea,1,0,"system-spinner",20),u.YNc(31,Ba,6,4,"div",19),u.qZA()(),u._UZ(32,"a",21,22),u.qZA()}2&e&&(u.xp6(2),u.Oqu(t.lang.getLabel("LBL_CONFIGURATION_TRANSFER")),u.xp6(5),u.Q6J("ngClass",u.VKq(20,Fa,"i"===t.tabToShow)),u.xp6(2),u.Oqu(t.lang.getLabel("LBL_IMPORT")),u.xp6(1),u.Q6J("ngClass",u.VKq(22,Fa,"e"===t.tabToShow)),u.xp6(2),u.Oqu(t.lang.getLabel("LBL_EXPORT")),u.xp6(1),u.Q6J("ngClass",u.VKq(24,Ya,"i"!==t.tabToShow)),u.xp6(3),u.Oqu(t.lang.getLabel("LBL_CONFIGURATION_FILE")),u.xp6(3),u.Q6J("ngClass",u.VKq(26,Ra,t.isDragOver)),u.xp6(1),u.Q6J("disabled",t.isUploading),u.xp6(4),u.Q6J("icon","upload")("size","small")("addclasses","slds-button__icon_left"),u.xp6(1),u.hij(" ",t.lang.getLabel("LBL_SELECT_FILE"),""),u.xp6(2),u.Oqu(t.lang.getLabel("LBL_OR_DROP_FILE_HERE")),u.xp6(1),u.Q6J("ngIf",t.fileReadyForUpload),u.xp6(1),u.Q6J("ngClass",u.VKq(28,Ya,"e"!==t.tabToShow)),u.xp6(1),u.Q6J("ngIf",t.isLoadingTablenames),u.xp6(1),u.Q6J("ngIf",!t.isLoadingTablenames),u.xp6(1),u.Q6J("href",t.loadUrl,u.LSH)("download",t.fileName))},dependencies:[n.mk,n.sg,n.O5,l.Fj,l.Wl,l.JJ,l.On,T.J,Aa.J,ol.W,Ta.Q],encapsulation:2})),ConfigTransfer})();var Ha=i(8574);const Ka=["treecontainer"],za=["addconfigcontainer"];function Va(e,t){if(1&e&&(u.TgZ(0,"option",52),u._uU(1),u.qZA()),2&e){const e=t.$implicit;u.Q6J("value",e),u.xp6(1),u.Oqu(e)}}function Pa(e,t){1&e&&(u.TgZ(0,"div",53),u._UZ(1,"system-spinner"),u.qZA())}function $a(e,t){if(1&e&&(u.TgZ(0,"div",54),u._uU(1),u.qZA()),2&e){const e=u.oxw();u.xp6(1),u.AsE(" ",e.selectedComponent.component," / ",e.selectedComponent.role_name," ")}}const ja=function(e){return{"slds-hidden":e}},Wa=function(e){return{"slds-is-active":e}};let Xa=(()=>{var e;class ModuleConfigManager{constructor(e,t,i,n,l,o,a,d){(0,s.Z)(this,"backend",void 0),(0,s.Z)(this,"metadata",void 0),(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"toast",void 0),(0,s.Z)(this,"modalservice",void 0),(0,s.Z)(this,"configuration",void 0),(0,s.Z)(this,"view",void 0),(0,s.Z)(this,"modal",void 0),(0,s.Z)(this,"component",""),(0,s.Z)(this,"configValues",{}),(0,s.Z)(this,"crActive",!1),(0,s.Z)(this,"change_request_required",!1),(0,s.Z)(this,"edit_mode",""),(0,s.Z)(this,"allowCopyButton",!0),(0,s.Z)(this,"allowGlobalModal",!1),(0,s.Z)(this,"sysModules",[]),(0,s.Z)(this,"sysRoles",{}),(0,s.Z)(this,"currentModule",""),(0,s.Z)(this,"currentComponent",""),(0,s.Z)(this,"selectedId",""),(0,s.Z)(this,"selectedComponent",{}),(0,s.Z)(this,"newComponent",{}),(0,s.Z)(this,"componentTree",[]),(0,s.Z)(this,"currentTableActive",""),(0,s.Z)(this,"componentModuleList",[]),(0,s.Z)(this,"treelist",[]),(0,s.Z)(this,"initialized",!1),(0,s.Z)(this,"treecontainer",void 0),(0,s.Z)(this,"addconfigcontainer",void 0),this.backend=e,this.metadata=t,this.language=i,this.toast=n,this.modalservice=l,this.configuration=o,this.view=a,this.modal=d;let r=this.metadata.getRoles();this.sysRoles["*"]="*";for(let e of r)this.sysRoles[e.id]=e.name;this.sysModules=this.metadata.getModules(),this.sysModules.sort(),this.initialized=!0,this.currentModule="*",this.selectedModule(),this.checkMode()}get getAllowCopyButton(){return(0!==Object.keys(this.selectedComponent).length||this.selectedComponent.constructor!==Object)&&this.allowCopyButton}checkMode(){this.edit_mode=this.configuration.getCapabilityConfig("core").edit_mode,this.change_request_required=!!this.configuration.getCapabilityConfig("systemdeployment").change_request_required,"none"!=this.edit_mode&&"custom"!=this.edit_mode&&"all"!=this.edit_mode&&(this.edit_mode="custom"),this.change_request_required?this.backend.getRequest("module/SystemDeploymentCRs/active").subscribe((e=>{""==e.id?(this.setNoneMode(),this.toast.sendToast(this.language.getLabel("LBL_ACTIVATE_CR_WARNING"),"warning",null,3)):"all"==this.edit_mode?this.setAllMode():"custom"==this.edit_mode?this.setCustomMode():this.setNoneMode()})):"all"==this.edit_mode?this.setAllMode():"custom"==this.edit_mode?this.setCustomMode():this.setNoneMode()}setNoneMode(){this.view.setViewMode(),this.allowCopyButton=!1}setCustomMode(){"custom"==this.currentTableActive||"default_custom"==this.currentTableActive?this.view.setEditMode():this.view.setViewMode()}setAllMode(){this.allowGlobalModal=!0,this.view.setEditMode()}selectedModule(){this.currentComponent="",this.componentTree=[],this.selectedComponent={},"*"==this.currentModule?"default_custom"==this.currentTableActive?this.loadDefaultCustom():this.loadDefault():"custom"==this.currentTableActive?this.loadCustom():this.loadGlobal()}loadGlobal(){this.modal.openModal("SystemLoadingModal").subscribe((e=>{this.selectedComponent={},this.currentTableActive="global",this.checkMode(),"*"!=this.currentModule?this.backend.getRequest("configuration/configurator/entries/sysuicomponentmoduleconf").subscribe((t=>{this.buildTreeList(t),e.instance.self.destroy()})):(this.loadDefault(),e.instance.self.destroy())}))}loadCustom(){this.modal.openModal("SystemLoadingModal").subscribe((e=>{this.selectedComponent={},this.currentTableActive="custom",this.checkMode(),"*"!=this.currentModule?this.backend.getRequest("configuration/configurator/entries/sysuicustomcomponentmoduleconf").subscribe((t=>{this.buildTreeList(t),e.instance.self.destroy()})):(this.loadDefaultCustom(),e.instance.self.destroy())}))}loadDefault(){this.modal.openModal("SystemLoadingModal").subscribe((e=>{this.currentTableActive="default",this.backend.getRequest("configuration/configurator/entries/sysuicomponentdefaultconf").subscribe((t=>{this.buildTreeList(t),e.instance.self.destroy()}))}))}loadDefaultCustom(){this.modal.openModal("SystemLoadingModal").subscribe((e=>{this.currentTableActive="default_custom",this.backend.getRequest("configuration/configurator/entries/sysuicustomcomponentdefaultconf").subscribe((t=>{this.buildTreeList(t),e.instance.self.destroy()}))}))}buildTreeList(e){let t=[];for(let i of e)if(i.module==this.currentModule||"*"==this.currentModule){this.componentModuleList.push(i);let e=this.checkRoleName(i.role_id),s={};s={id:i.id,parent_id:i.component,clickable:!0,name:e},this.newComponent&&this.newComponent.id==i.id&&(s.selected=!0,this.selectedOutputItem(s.id)),t.push(s);let n=0;for(let e of t)i.component==e.id&&(n=1);if(0==n){let e=i.component;this.metadata.getSystemComponents().length>0&&this.metadata.getSystemComponents().find((e=>e.component===i.component))&&"1"==this.metadata.getSystemComponents().find((e=>e.component===i.component)).deprecated&&(e+=" | dep."),t.push({id:i.component,parent_id:null,clickable:!1,name:e})}}return this.newComponent={},t.sort(((e,t)=>e.name>t.name?1:-1)),this.treelist=t,t}checkRoleName(e){let t="";return t=this.sysRoles[e]?this.sysRoles[e]:e,t}selectedOutputItem(e){for(let t of this.componentModuleList)if(t.id==e){"string"==typeof t.componentconfig&&(t.componentconfig=JSON.parse(t.componentconfig));this.checkRoleName(t.role_id);this.selectedComponent=t,this.component=t.component,this.configValues=t.componentconfig}}saveChanges(){this.modal.openModal("SystemLoadingModal").subscribe((e=>{if(this.selectedComponent.componentconfig){switch(this.selectedComponent.componentconfig=JSON.stringify(this.selectedComponent.componentconfig),delete this.selectedComponent.role_name,this.currentTableActive){case"default":this.backend.postRequest("configuration/configurator/sysuicomponentdefaultconf/"+this.selectedComponent.id,{},{config:this.selectedComponent}).subscribe((t=>{"success"==t.status&&(e.instance.self.destroy(),this.toast.sendToast("changes saved"))}));break;case"default_custom":this.backend.postRequest("configuration/configurator/sysuicustomcomponentdefaultconf/"+this.selectedComponent.id,{},{config:this.selectedComponent}).subscribe((t=>{"success"==t.status&&(e.instance.self.destroy(),this.toast.sendToast("changes saved"))}));break;case"global":this.backend.postRequest("configuration/configurator/sysuicomponentmoduleconf/"+this.selectedComponent.id,{},{config:this.selectedComponent}).subscribe((t=>{"success"==t.status&&(e.instance.self.destroy(),this.toast.sendToast("changes saved"))}));break;case"custom":this.backend.postRequest("configuration/configurator/sysuicustomcomponentmoduleconf/"+this.selectedComponent.id,{},{config:this.selectedComponent}).subscribe((t=>{"success"==t.status&&(e.instance.self.destroy(),this.toast.sendToast("changes saved"))}));break;default:e.instance.self.destroy()}this.selectedComponent.componentconfig=JSON.parse(this.selectedComponent.componentconfig)}}))}addConf(){this.modalservice.openModal("ModuleConfigAddDialog").subscribe((e=>{e.instance.mode="add","default_custom"==this.currentTableActive||"custom"==this.currentTableActive?e.instance.currentType="custom":"all"==this.edit_mode?e.instance.currentType="global":e.instance.currentType="custom",e.instance.currentModule=this.currentModule,e.instance.allowGlobal=this.allowGlobalModal,e.instance.response$.subscribe((e=>{this.response(e)}))}))}copyConf(){this.modalservice.openModal("ModuleConfigAddDialog").subscribe((e=>{e.instance.mode="copy",e.instance.currentComponent=this.selectedComponent,e.instance.currentRole=this.selectedComponent.role_id,e.instance.currentModule=this.currentModule,e.instance.allowGlobal=this.allowGlobalModal,e.instance.response$.subscribe((e=>{this.response(e)}))}))}response(e){e.module?this.currentModule=e.module:this.currentModule="*","sysuicomponentdefaultconf"==e.table||"sysuicomponentmoduleconf"==e.table?this.currentTableActive="global":this.currentTableActive="custom","sysuicustomcomponentdefaultconf"==e.table&&(this.currentTableActive="default_custom"),"sysuicustomcomponentmoduleconf"==e.table&&(this.currentTableActive="custom"),"sysuicomponentdefaultconf"==e.table&&(this.currentTableActive="default"),"sysuicomponentmoduleconf"==e.table&&(this.currentTableActive="global"),this.newComponent=e,this.selectedModule()}}return e=ModuleConfigManager,(0,s.Z)(ModuleConfigManager,"ɵfac",(function(t){return new(t||e)(u.Y36(h.y),u.Y36(f.Pu),u.Y36(b.d),u.Y36(v.A),u.Y36(x.o),u.Y36(M.C),u.Y36($i.e),u.Y36(x.o))})),(0,s.Z)(ModuleConfigManager,"ɵcmp",u.Xpm({type:e,selectors:[["moduleconfig-manager"]],viewQuery:function(e,t){if(1&e&&(u.Gf(Ka,7,u.s_b),u.Gf(za,7,u.s_b)),2&e){let e;u.iGM(e=u.CRH())&&(t.treecontainer=e.first),u.iGM(e=u.CRH())&&(t.addconfigcontainer=e.first)}},features:[u._Bn([$i.e])],decls:56,vars:25,consts:[["system-to-bottom-noscroll",""],[1,"slds-p-around--medium","slds-theme--shade"],[1,"slds-page-header__row"],[1,"slds-page-header__col-title"],[1,"slds-media"],["icon","custom19","sprite","custom"],[1,"slds-media__body"],[1,"slds-page-header__name"],[1,"slds-page-header__name-title"],[1,"slds-page-header__title","slds-truncate"],["label","LBL_CONFIGURATION_MANAGER"],[1,"slds-page-header__name-meta","slds-grid"],[1,"slds-grid","slds-form--inline","slds-p-around--small","slds-border--bottom"],[1,"slds-form-element"],[1,"slds-form-element__label"],["label","LBL_MODULE"],[1,"slds-form-element__control"],[1,"slds-select_container",2,"min-width","250px"],[1,"slds-select",3,"ngModel","disabled","ngModelChange","change"],["value","*"],[3,"value",4,"ngFor","ngForOf"],["class","slds-align_absolute-center slds-p-around--large",4,"ngIf"],[1,"slds-grid",3,"ngClass"],[1,"slds-size--2-of-5","slds-border--right"],["role","application",1,"slds-tree_container",2,"max-width","none"],[1,"slds-tabs_default",2,"background-color","transparent"],["role","tablist",1,"slds-tabs_default__nav"],["title","Item One","role","presentation",1,"slds-tabs_default__item","slds-is-active",3,"ngClass"],[1,"slds-grid","slds-grid--vertical-align-center"],["icon","global","size","x-small"],["href","javascript:void(0);","role","tab","tabindex","0","id","tab-default-1__item",1,"slds-tabs_default__link",3,"click"],["label","LBL_GLOBAL"],["title","Item Two","role","presentation",1,"slds-tabs_default__item",3,"ngClass"],["icon","custom","size","x-small"],["href","javascript:void(0);","role","tab","tabindex","-1","aria-selected","false","aria-controls","tab-default-2","id","tab-default-2__item",1,"slds-tabs_default__link",3,"click"],["label","LBL_CUSTOM"],["role","tabpanel",1,"slds-tabs_default__content","slds-p-vertical_none"],["treecontainer",""],["system-to-bottom","",1,"slds-scrollable_y","slds-border_bottom",3,"marginBottom"],[3,"sourceList","selectedItem","selectedItemChange"],[1,"slds-p-around--small","slds-align--absolute-center"],["addconfigcontainer",""],["title","add item",1,"slds-button","slds-button--icon",3,"disabled","click"],[3,"icon","size","addclasses"],[1,"slds-size--3-of-5","slds-p-horizontal--small","slds-p-top--x-small"],["class","slds-text-heading_small",4,"ngIf"],[1,"slds-col--bump-left"],["type","button",1,"slds-m-bottom_small","slds-col--bump-left","slds-button","slds-button--neutral",3,"disabled","click"],["label","LBL_COPY"],["type","button",1,"slds-m-bottom_small","slds-col--bump-left","slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_SAVE"],[3,"component","configValues"],[3,"value"],[1,"slds-align_absolute-center","slds-p-around--large"],[1,"slds-text-heading_small"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),u._UZ(5,"system-icon",5),u.TgZ(6,"div",6)(7,"div",7)(8,"div",8)(9,"h1")(10,"span",9),u._UZ(11,"system-label",10),u.qZA()()()(),u._UZ(12,"div",11),u.qZA()()()()(),u.TgZ(13,"div",12)(14,"div",13)(15,"label",14),u._UZ(16,"system-label",15),u.qZA(),u.TgZ(17,"div",16)(18,"div",17)(19,"select",18),u.NdJ("ngModelChange",(function(e){return t.currentModule=e}))("change",(function(){return t.selectedModule()})),u.TgZ(20,"option",19),u._uU(21,"*"),u.qZA(),u.YNc(22,Va,2,2,"option",20),u.qZA()()()()(),u.YNc(23,Pa,2,0,"div",21),u.TgZ(24,"div",22)(25,"div",23)(26,"div",24)(27,"div",25)(28,"ul",26)(29,"li",27)(30,"div",28),u._UZ(31,"system-custom-icon",29),u.TgZ(32,"a",30),u.NdJ("click",(function(){return t.loadGlobal()})),u._UZ(33,"system-label",31),u.qZA()()(),u.TgZ(34,"li",32)(35,"div",28),u._UZ(36,"system-custom-icon",33),u.TgZ(37,"a",34),u.NdJ("click",(function(){return t.loadCustom()})),u._UZ(38,"system-label",35),u.qZA()()()(),u.TgZ(39,"div",36,37)(41,"div",38)(42,"system-tree",39),u.NdJ("selectedItemChange",(function(e){return t.selectedOutputItem(e)})),u.qZA()(),u.TgZ(43,"div",40,41)(45,"button",42),u.NdJ("click",(function(){return t.addConf()})),u._UZ(46,"system-utility-icon",43),u.qZA()()()()()(),u.TgZ(47,"div",44)(48,"div",28),u.YNc(49,$a,2,2,"div",45),u.TgZ(50,"div",46)(51,"button",47),u.NdJ("click",(function(){return t.copyConf()})),u._UZ(52,"system-label",48),u.qZA(),u.TgZ(53,"button",49),u.NdJ("click",(function(){return t.saveChanges()})),u._UZ(54,"system-label",50),u.qZA()()(),u._UZ(55,"workbench-config",51),u.qZA()()()),2&e&&(u.xp6(19),u.Q6J("ngModel",t.currentModule)("disabled",!t.initialized),u.xp6(3),u.Q6J("ngForOf",t.sysModules),u.xp6(1),u.Q6J("ngIf",!t.initialized),u.xp6(1),u.Q6J("ngClass",u.VKq(19,ja,!t.initialized)),u.xp6(5),u.Q6J("ngClass",u.VKq(21,Wa,"global"==t.currentTableActive||"default"==t.currentTableActive)),u.xp6(5),u.Q6J("ngClass",u.VKq(23,Wa,"custom"==t.currentTableActive||"default_custom"==t.currentTableActive)),u.xp6(7),u.Q6J("marginBottom",45),u.xp6(1),u.Q6J("sourceList",t.treelist)("selectedItem",t.selectedComponent.id),u.xp6(3),u.Q6J("disabled",!t.view.isEditMode()),u.xp6(1),u.Q6J("icon","new")("size","xx-small")("addclasses","slds-section__title-action-icon slds-button__icon slds-button__icon_left"),u.xp6(3),u.Q6J("ngIf",t.selectedComponent.component),u.xp6(2),u.Q6J("disabled",!t.getAllowCopyButton),u.xp6(2),u.Q6J("disabled",!t.view.isEditMode()||!(null!=t.selectedComponent&&t.selectedComponent.id)),u.xp6(2),u.Q6J("component",t.component)("configValues",t.configValues))},dependencies:[n.mk,n.sg,n.O5,l.YN,l.Kr,l.EJ,l.JJ,l.On,ji.$,$e.f,L._,ol.W,Ha.O,m.r,w.H,C.t,es],encapsulation:2})),ModuleConfigManager})();var ed=i(3385),td=i(3543);function id(e,t){1&e&&u._UZ(0,"system-label",19)}function sd(e,t){1&e&&u._UZ(0,"system-label",20)}function nd(e,t){if(1&e&&(u.TgZ(0,"option",21),u._UZ(1,"system-label",22),u.qZA()),2&e){const e=t.$implicit;u.Q6J("value",e.value),u.xp6(1),u.Q6J("label",e.text)}}function ld(e,t){1&e&&(u.TgZ(0,"div",23)(1,"span",24),u._uU(2,"warning"),u.qZA(),u.TgZ(3,"span",25),u.O4$(),u.TgZ(4,"svg",26),u._UZ(5,"use",27),u.qZA()(),u.kcU(),u.TgZ(6,"h2"),u._UZ(7,"system-label",28),u.qZA()())}function od(e,t){1&e&&(u.TgZ(0,"div",29),u._UZ(1,"system-label",30),u.qZA())}function ad(e,t){1&e&&(u.TgZ(0,"span"),u._UZ(1,"system-label",31),u.qZA())}function dd(e,t){1&e&&(u.TgZ(0,"span"),u._UZ(1,"system-label",32),u.qZA())}let rd=(()=>{var e;class ModuleConfigAddDialog{constructor(e,t,i,n,l,o,a){(0,s.Z)(this,"backend",void 0),(0,s.Z)(this,"metadata",void 0),(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"modelutilities",void 0),(0,s.Z)(this,"utils",void 0),(0,s.Z)(this,"toast",void 0),(0,s.Z)(this,"configuration",void 0),(0,s.Z)(this,"mode",""),(0,s.Z)(this,"currentComponent",void 0),(0,s.Z)(this,"currentRole",""),(0,s.Z)(this,"currentType","custom"),(0,s.Z)(this,"currentModule",""),(0,s.Z)(this,"allowGlobal",!1),(0,s.Z)(this,"response$",new u.vpe),(0,s.Z)(this,"showDeprecatedWarning",!1),(0,s.Z)(this,"self",void 0),(0,s.Z)(this,"types",[{value:"custom",text:"LBL_CUSTOM"},{value:"global",text:"LBL_GLOBAL"}]),(0,s.Z)(this,"compSelectList",[]),(0,s.Z)(this,"compselecteditem",void 0),(0,s.Z)(this,"compDisabled",!1),(0,s.Z)(this,"moduleSelectList",[]),(0,s.Z)(this,"moduleselecteditem",void 0),(0,s.Z)(this,"roleSelectList",[]),(0,s.Z)(this,"roleselecteditem",void 0),this.backend=e,this.metadata=t,this.language=i,this.modelutilities=n,this.utils=l,this.toast=o,this.configuration=a}get roleSelectedItem(){return this.roleselecteditem}set roleSelectedItem(e){this.roleselecteditem=e}get moduleSelectedItem(){return this.moduleselecteditem}set moduleSelectedItem(e){this.moduleselecteditem=e}get compSelectedItem(){return this.compselecteditem}set compSelectedItem(e){this.compselecteditem=e,this.showDeprecatedWarning=!0,this.showDeprecatedWarning="1"==e.deprecated}ngOnInit(){this.allowGlobal||this.types.pop(),this.moduleSelectList=[{id:"*",name:"*"}],this.mode in{add:!0,copy:!0}&&"*"==this.currentModule&&(this.moduleSelectedItem={id:"*",name:"*"});let e=this.metadata.getModules();e.sort();for(let t of e)this.moduleSelectList.push({id:t,name:t}),this.mode in{add:!0,copy:!0}&&t==this.currentModule&&(this.moduleSelectedItem={id:t,name:t});this.roleSelectList=[{id:"*",name:"*",group:"global"}],this.roleSelectedItem={id:"*",name:"*",group:"global"};let t=this.metadata.getSysRoles();for(let e of t)this.roleSelectList.push({id:e.id,name:e.name,group:e.scope}),"copy"==this.mode&&e.id==this.currentRole&&(this.roleSelectedItem={id:e.id,name:e.name,group:"global"});let i=this.configuration.getData("components");for(let e in i)this.compSelectList.push({id:e,name:e,deprecated:"1"==i[e].deprecated});this.compSelectList.sort(((e,t)=>e.name.localeCompare(t.name))),"copy"==this.mode&&(this.compDisabled=!0,this.compSelectedItem={id:this.currentComponent.id,name:this.currentComponent.component})}validate(){if("*"==this.currentModule){if(this.compSelectedItem&&this.roleSelectedItem&&this.currentType)return!1}else if(this.compSelectedItem&&this.moduleSelectedItem&&this.roleSelectedItem&&this.currentType)return!1;return!0}sortArray(e){return e.sort(((e,t)=>{let i=e.name.toLowerCase(),s=t.name.toLowerCase();return i<s?-1:i>s?1:0})),e}closeDialog(){this.self.destroy()}save(){let e=this.currentType,t="",i={},s=this.modelutilities.generateGuid();if(this.currentComponent){let e=JSON.stringify(this.currentComponent.componentconfig);i={component:this.currentComponent.component,componentconfig:e}}else i={component:this.compSelectedItem.name,componentconfig:"{}"};i.id=s,i.role_id=this.roleSelectedItem.id,"*"!=i.module&&(i.module=this.moduleSelectedItem.name),"custom"==e&&"*"==i.module&&(t="sysuicustomcomponentdefaultconf"),"custom"==e&&"*"!=i.module&&(t="sysuicustomcomponentmoduleconf"),"global"==e&&"*"==i.module&&(t="sysuicomponentdefaultconf"),"global"==e&&"*"!=i.module&&(t="sysuicomponentmoduleconf"),this.saveComponent(i,t)}saveComponent(e,t){e.type=this.currentType;let i,s="";"*"==e.module?(s="componentdefaultalreadyexists",i="componentdefaultconfigs",delete e.module):(s="componentmodulealreadyexists",i="componentmoduleconfigs"),this.backend.getRequest("configuration/spiceui/core/"+s,e).subscribe((i=>{delete e.type,0==i?this.backend.postRequest("configuration/configurator/"+t+"/"+e.id,null,{config:e}).subscribe((i=>{this.toast.sendToast("saved"),e.table=t,this.response$.emit(e),this.self.destroy()}),(e=>{this.toast.sendAlert("saving failed!"),console.error(e)})):this.toast.sendAlert("Configuration already exists!")}),(e=>{this.toast.sendAlert("Saving configuration failed!"),console.error(e)}))}}return e=ModuleConfigAddDialog,(0,s.Z)(ModuleConfigAddDialog,"ɵfac",(function(t){return new(t||e)(u.Y36(h.y),u.Y36(f.Pu),u.Y36(b.d),u.Y36(Z.A),u.Y36(Z.A),u.Y36(v.A),u.Y36(M.C))})),(0,s.Z)(ModuleConfigAddDialog,"ɵcmp",u.Xpm({type:e,selectors:[["moduleconfig-add-dialog"]],inputs:{mode:"mode",currentComponent:"currentComponent",currentRole:"currentRole",currentType:"currentType",currentModule:"currentModule",allowGlobal:"allowGlobal"},outputs:{response$:"response"},decls:23,vars:20,consts:[[3,"close"],["label","LBL_COPY_COMPONENT",4,"ngIf"],["label","LBL_ADD_COMPONENT",4,"ngIf"],[2,"overflow","visible",3,"scrollable"],[1,"slds-form-element"],[1,"slds-form-element__label"],["label","LBL_SCOPE"],[1,"slds-form-element__control"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"selectList","ngModel","label","ngModelChange"],[3,"selectList","ngModel","disabled","label","ngModelChange"],["class","slds-notify slds-notify_alert slds-theme_alert-texture slds-theme_warning","role","alert",4,"ngIf"],["class","slds-text-align_center slds-p-vertical_small slds-text-heading_small",4,"ngIf"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"disabled","click"],[4,"ngIf"],["label","LBL_COPY_COMPONENT"],["label","LBL_ADD_COMPONENT"],[3,"value"],[3,"label"],["role","alert",1,"slds-notify","slds-notify_alert","slds-theme_alert-texture","slds-theme_warning"],[1,"slds-assistive-text"],["title","Description of icon when needed",1,"slds-icon_container","slds-icon-utility-warning","slds-m-right_x-small"],["aria-hidden","true",1,"slds-icon","slds-icon_x-small"],[0,"xlink","href","/assets/icons/utility-sprite/svg/symbols.svg#warning"],["label","LBL_DEPRECATED_MSG"],[1,"slds-text-align_center","slds-p-vertical_small","slds-text-heading_small"],["label","LBL_NOTE_COPY_CONFIG_INFO"],["label","LBL_ADD"],["label","LBL_COPY"]],template:function(e,t){1&e&&(u.TgZ(0,"system-modal")(1,"system-modal-header",0),u.NdJ("close",(function(){return t.closeDialog()})),u.YNc(2,id,1,0,"system-label",1),u.YNc(3,sd,1,0,"system-label",2),u.qZA(),u.TgZ(4,"system-modal-content",3)(5,"div",4)(6,"label",5),u._UZ(7,"system-label",6),u.qZA(),u.TgZ(8,"div",7)(9,"div",8)(10,"select",9),u.NdJ("ngModelChange",(function(e){return t.currentType=e})),u.YNc(11,nd,2,2,"option",10),u.qZA()()()(),u.TgZ(12,"system-select",11),u.NdJ("ngModelChange",(function(e){return t.moduleSelectedItem=e})),u.qZA(),u.TgZ(13,"system-select",12),u.NdJ("ngModelChange",(function(e){return t.compSelectedItem=e})),u.qZA(),u.YNc(14,ld,8,0,"div",13),u.TgZ(15,"system-select",11),u.NdJ("ngModelChange",(function(e){return t.roleSelectedItem=e})),u.qZA(),u.YNc(16,od,2,0,"div",14),u.qZA(),u.TgZ(17,"system-modal-footer")(18,"button",15),u.NdJ("click",(function(){return t.closeDialog()})),u._UZ(19,"system-label",16),u.qZA(),u.TgZ(20,"button",17),u.NdJ("click",(function(){return t.save()})),u.YNc(21,ad,2,0,"span",18),u.YNc(22,dd,2,0,"span",18),u.qZA()()()),2&e&&(u.xp6(2),u.Q6J("ngIf","copy"==t.mode),u.xp6(1),u.Q6J("ngIf","add"==t.mode),u.xp6(1),u.Q6J("scrollable",!1),u.xp6(6),u.Q6J("ngModel",t.currentType),u.xp6(1),u.Q6J("ngForOf",t.types),u.xp6(1),u.Q6J("selectList",t.moduleSelectList)("ngModel",t.moduleSelectedItem)("label","LBL_MODULE"),u.xp6(1),u.Q6J("selectList",t.compSelectList)("ngModel",t.compSelectedItem)("disabled",t.compDisabled)("label","LBL_COMPONENT"),u.xp6(1),u.Q6J("ngIf",t.showDeprecatedWarning),u.xp6(1),u.Q6J("selectList",t.roleSelectList)("ngModel",t.roleSelectedItem)("label","LBL_ROLE"),u.xp6(1),u.Q6J("ngIf","copy"==t.mode),u.xp6(4),u.Q6J("disabled",t.validate()),u.xp6(1),u.Q6J("ngIf","add"==t.mode),u.xp6(1),u.Q6J("ngIf","copy"==t.mode))},dependencies:[n.sg,n.O5,l.YN,l.Kr,l.EJ,l.JJ,l.On,L._,nt.j,lt.x,ot.p,at.y,td.R],encapsulation:2})),ModuleConfigAddDialog})();function cd(e,t){if(1&e&&(u.TgZ(0,"option",30),u._uU(1),u.qZA()),2&e){const e=t.$implicit;u.Q6J("value",e),u.xp6(1),u.hij("",e," ")}}function gd(e,t){1&e&&(u.TgZ(0,"option",31),u._UZ(1,"system-label",32),u.qZA())}let ud=(()=>{var e;class FieldsetManagerCopyDialog{constructor(e,t){(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"metadata",void 0),(0,s.Z)(this,"fieldset",void 0),(0,s.Z)(this,"edit_mode",""),(0,s.Z)(this,"response",new pn.x),(0,s.Z)(this,"modules",[]),(0,s.Z)(this,"currentName",""),(0,s.Z)(this,"currentType",""),(0,s.Z)(this,"currentModule",""),(0,s.Z)(this,"self",void 0),this.language=e,this.metadata=t,this.modules=this.metadata.getModules().sort()}ngOnInit(){this.currentName=this.fieldset.name+" (custom)",this.currentModule=this.fieldset.module,"all"==this.edit_mode?this.currentType=this.fieldset.type:this.currentType="custom"}close(){this.response.next(void 0),this.response.complete(),this.self.destroy()}onModalEscX(){this.close()}copy(){this.response.next({fieldset:this.fieldset,type:this.currentType,module:this.currentModule,name:this.currentName})}validate(){return!(this.fieldset&&this.currentModule&&this.currentType)}}return e=FieldsetManagerCopyDialog,(0,s.Z)(FieldsetManagerCopyDialog,"ɵfac",(function(t){return new(t||e)(u.Y36(b.d),u.Y36(f.Pu))})),(0,s.Z)(FieldsetManagerCopyDialog,"ɵcmp",u.Xpm({type:e,selectors:[["fieldsetmanager-copy-dialog"]],inputs:{fieldset:"fieldset",edit_mode:"edit_mode"},outputs:{response:"response"},decls:36,vars:9,consts:[["role","dialog","tabindex","-1","aria-labelledby","header43",1,"slds-modal","slds-fade-in-open"],[1,"slds-modal__container"],[1,"slds-modal__header","slds-theme--shade"],["title","Close",1,"slds-button","slds-modal__close","slds-button--icon-inverse",3,"click"],[3,"icon","size"],["id","header43",1,"slds-text-heading--medium"],["label","LBL_COPY"],[1,"slds-modal__content","slds-p-around--medium"],[1,"slds-form-element"],[1,"slds-form-element__label"],["label","LBL_MODULE"],[1,"slds-form-element__control",2,"min-width","250px"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","disabled","ngModelChange"],["value","*"],[3,"value",4,"ngFor","ngForOf"],["label","LBL_SCOPE"],[1,"slds-form-element__control"],[1,"slds-select",3,"ngModel","ngModelChange"],["value","custom"],["label","LBL_CUSTOM"],["value","global",4,"ngIf"],[1,"slds-form-element","slds-m-top--small"],["label","LBL_FIELDSET"],["type","text","placeholder","name",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-modal__footer"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_SAVE"],[3,"value"],["value","global"],["label","LBL_GLOBAL"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),u.NdJ("click",(function(){return t.close()})),u._UZ(4,"system-button-icon",4),u.qZA(),u.TgZ(5,"h2",5),u._UZ(6,"system-label",6),u.qZA()(),u.TgZ(7,"div",7)(8,"div",8)(9,"label",9),u._UZ(10,"system-label",10),u.qZA(),u.TgZ(11,"div",11)(12,"div",12)(13,"select",13),u.NdJ("ngModelChange",(function(e){return t.currentModule=e})),u.TgZ(14,"option",14),u._uU(15,"*"),u.qZA(),u.YNc(16,cd,2,2,"option",15),u.qZA()()()(),u.TgZ(17,"div",8)(18,"label",9),u._UZ(19,"system-label",16),u.qZA(),u.TgZ(20,"div",17)(21,"div",12)(22,"select",18),u.NdJ("ngModelChange",(function(e){return t.currentType=e})),u.TgZ(23,"option",19),u._UZ(24,"system-label",20),u.qZA(),u.YNc(25,gd,2,0,"option",21),u.qZA()()()(),u.TgZ(26,"div",22)(27,"label",9),u._UZ(28,"system-label",23),u.qZA(),u.TgZ(29,"div",17)(30,"input",24),u.NdJ("ngModelChange",(function(e){return t.currentName=e})),u.qZA()()()(),u.TgZ(31,"div",25)(32,"button",26),u.NdJ("click",(function(){return t.close()})),u._UZ(33,"system-label",27),u.qZA(),u.TgZ(34,"button",28),u.NdJ("click",(function(){return t.copy()})),u._UZ(35,"system-label",29),u.qZA()()()()),2&e&&(u.xp6(4),u.Q6J("icon","close")("size","large"),u.xp6(9),u.Q6J("ngModel",t.currentModule)("disabled",0==t.modules.length),u.xp6(3),u.Q6J("ngForOf",t.modules),u.xp6(6),u.Q6J("ngModel",t.currentType),u.xp6(3),u.Q6J("ngIf","all"==t.edit_mode),u.xp6(5),u.Q6J("ngModel",t.currentName),u.xp6(4),u.Q6J("disabled",t.validate()))},dependencies:[n.sg,n.O5,l.YN,l.Kr,l.Fj,l.EJ,l.JJ,l.On,T.J,L._],encapsulation:2})),FieldsetManagerCopyDialog})(),md=(()=>{var e;class WorkbenchConfigOptionFieldset{constructor(e,t){(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"view",void 0),(0,s.Z)(this,"option",{}),(0,s.Z)(this,"configValues",{}),this.language=e,this.view=t}}return e=WorkbenchConfigOptionFieldset,(0,s.Z)(WorkbenchConfigOptionFieldset,"ɵfac",(function(t){return new(t||e)(u.Y36(b.d),u.Y36($i.e))})),(0,s.Z)(WorkbenchConfigOptionFieldset,"ɵcmp",u.Xpm({type:e,selectors:[["workbench-config-option-fieldset"]],decls:3,vars:4,consts:[[1,"slds-form-element","slds-m-vertical--xxx-small"],[3,"option","description"],[3,"ngModel","disabled","ngModelChange"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0),u._UZ(1,"workbench-config-label",1),u.TgZ(2,"system-input-fieldset",2),u.NdJ("ngModelChange",(function(e){return t.configValues[t.option.option]=e})),u.qZA()()),2&e&&(u.xp6(1),u.Q6J("option",t.option.option)("description",t.option.description),u.xp6(1),u.Q6J("ngModel",t.configValues[t.option.option])("disabled",!t.view.isEditMode()))},dependencies:[l.JJ,l.On,Zs.a,ed.R],encapsulation:2})),WorkbenchConfigOptionFieldset})();var pd=i(3673);let hd=(()=>{var e;class WorkbenchConfigOptionModulefilter{constructor(e,t,i,n){(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"metadata",void 0),(0,s.Z)(this,"cdRef",void 0),(0,s.Z)(this,"view",void 0),(0,s.Z)(this,"configValues",[]),(0,s.Z)(this,"option",{}),(0,s.Z)(this,"modules",[]),(0,s.Z)(this,"modulefilters",[]),(0,s.Z)(this,"module",""),this.language=e,this.metadata=t,this.cdRef=i,this.view=n}ngAfterViewInit(){this.modulefilters=this.metadata.getModuleFilters(),this.modules=this.metadata.getModules(),this.modules.sort(),this.configValues[this.option.option]&&this.metadata.getModuleFilter(this.configValues[this.option.option])&&(this.module=this.metadata.getModuleFilter(this.configValues[this.option.option]).module),this.cdRef.detectChanges()}}return e=WorkbenchConfigOptionModulefilter,(0,s.Z)(WorkbenchConfigOptionModulefilter,"ɵfac",(function(t){return new(t||e)(u.Y36(b.d),u.Y36(f.Pu),u.Y36(u.sBO),u.Y36($i.e))})),(0,s.Z)(WorkbenchConfigOptionModulefilter,"ɵcmp",u.Xpm({type:e,selectors:[["workbench-config-option-module-filter"]],decls:3,vars:4,consts:[[1,"slds-form-element","slds-m-vertical--xxx-small"],[3,"option","description"],[3,"ngModel","disabled","ngModelChange"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0),u._UZ(1,"workbench-config-label",1),u.TgZ(2,"system-input-module-filter",2),u.NdJ("ngModelChange",(function(e){return t.configValues[t.option.option]=e})),u.qZA()()),2&e&&(u.xp6(1),u.Q6J("option",t.option.option)("description",t.option.description),u.xp6(1),u.Q6J("ngModel",t.configValues[t.option.option])("disabled",!t.view.isEditMode()))},dependencies:[l.JJ,l.On,pd.l,ed.R],encapsulation:2})),WorkbenchConfigOptionModulefilter})();var fd=i(4728);let bd=(()=>{var e;class WorkbenchConfigOptionActionset{constructor(e,t){(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"view",void 0),(0,s.Z)(this,"configValues",[]),(0,s.Z)(this,"option",{}),this.language=e,this.view=t}}return e=WorkbenchConfigOptionActionset,(0,s.Z)(WorkbenchConfigOptionActionset,"ɵfac",(function(t){return new(t||e)(u.Y36(b.d),u.Y36($i.e))})),(0,s.Z)(WorkbenchConfigOptionActionset,"ɵcmp",u.Xpm({type:e,selectors:[["workbench-config-option-actionset"]],decls:3,vars:4,consts:[[1,"slds-form-element","slds-m-vertical--xxx-small"],[3,"option","description"],[3,"ngModel","disabled","ngModelChange"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0),u._UZ(1,"workbench-config-label",1),u.TgZ(2,"system-input-actionset",2),u.NdJ("ngModelChange",(function(e){return t.configValues[t.option.option]=e})),u.qZA()()),2&e&&(u.xp6(1),u.Q6J("option",t.option.option)("description",t.option.description),u.xp6(1),u.Q6J("ngModel",t.configValues[t.option.option])("disabled",!t.view.isEditMode()))},dependencies:[l.JJ,l.On,fd.Q,ed.R],encapsulation:2})),WorkbenchConfigOptionActionset})(),Zd=(()=>{var e;class WorkbenchConfigOptionBoolean{constructor(e){(0,s.Z)(this,"view",void 0),(0,s.Z)(this,"configValues",[]),(0,s.Z)(this,"option",{}),(0,s.Z)(this,"objtype",""),(0,s.Z)(this,"showInfo",!1),this.view=e}}return e=WorkbenchConfigOptionBoolean,(0,s.Z)(WorkbenchConfigOptionBoolean,"ɵfac",(function(t){return new(t||e)(u.Y36($i.e))})),(0,s.Z)(WorkbenchConfigOptionBoolean,"ɵcmp",u.Xpm({type:e,selectors:[["workbench-config-option-boolean"]],decls:7,vars:6,consts:[[1,"slds-form-element","slds-p-vertical--x-small"],[1,"slds-form-element__control","slds-grid","slds-grid--vertical-align-center"],[1,"slds-checkbox"],["type","checkbox","name","options",1,"slds-float_left",3,"disabled","id","ngModel","ngModelChange"],[1,"slds-checkbox__label"],[1,"slds-checkbox_faux"],[3,"option","description"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"input",3),u.NdJ("ngModelChange",(function(e){return t.configValues[t.option.option]=e})),u.qZA(),u.TgZ(4,"label",4),u._UZ(5,"span",5),u.qZA()(),u._UZ(6,"workbench-config-label",6),u.qZA()()),2&e&&(u.xp6(3),u.Q6J("disabled",!t.view.isEditMode())("id",t.option.option)("ngModel",t.configValues[t.option.option]),u.xp6(1),u.uIk("for",t.option.option),u.xp6(2),u.Q6J("option",t.option.option)("description",t.option.description))},dependencies:[l.Wl,l.JJ,l.On,ed.R],encapsulation:2})),WorkbenchConfigOptionBoolean})();var _d=i(4665);let yd=(()=>{var e;class WorkbenchConfigOptionComponentset{constructor(e,t){(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"view",void 0),(0,s.Z)(this,"configValues",[]),(0,s.Z)(this,"option",{}),this.language=e,this.view=t}}return e=WorkbenchConfigOptionComponentset,(0,s.Z)(WorkbenchConfigOptionComponentset,"ɵfac",(function(t){return new(t||e)(u.Y36(b.d),u.Y36($i.e))})),(0,s.Z)(WorkbenchConfigOptionComponentset,"ɵcmp",u.Xpm({type:e,selectors:[["workbench-config-option-componentset"]],decls:3,vars:4,consts:[[1,"slds-form-element","slds-m-vertical--xxx-small"],[3,"option","description"],[3,"ngModel","disabled","ngModelChange"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0),u._UZ(1,"workbench-config-label",1),u.TgZ(2,"system-input-componentset",2),u.NdJ("ngModelChange",(function(e){return t.configValues[t.option.option]=e})),u.qZA()()),2&e&&(u.xp6(1),u.Q6J("option",t.option.option)("description",t.option.description),u.xp6(1),u.Q6J("ngModel",t.configValues[t.option.option])("disabled",!t.view.isEditMode()))},dependencies:[l.JJ,l.On,_d.C,ed.R],encapsulation:2})),WorkbenchConfigOptionComponentset})(),vd=(()=>{var e;class WorkbenchConfigOptionModule{constructor(e,t,i,n,l,o,a,d){(0,s.Z)(this,"backend",void 0),(0,s.Z)(this,"metadata",void 0),(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"modelutilities",void 0),(0,s.Z)(this,"broadcast",void 0),(0,s.Z)(this,"toast",void 0),(0,s.Z)(this,"cdRef",void 0),(0,s.Z)(this,"view",void 0),(0,s.Z)(this,"configValues",void 0),(0,s.Z)(this,"option",{}),(0,s.Z)(this,"objtype",""),(0,s.Z)(this,"modules",[]),this.backend=e,this.metadata=t,this.language=i,this.modelutilities=n,this.broadcast=l,this.toast=o,this.cdRef=a,this.view=d}ngAfterViewInit(){this.modules=this.metadata.getModules().sort(),this.cdRef.detectChanges()}}return e=WorkbenchConfigOptionModule,(0,s.Z)(WorkbenchConfigOptionModule,"ɵfac",(function(t){return new(t||e)(u.Y36(h.y),u.Y36(f.Pu),u.Y36(b.d),u.Y36(Z.A),u.Y36(ui.f),u.Y36(v.A),u.Y36(u.sBO),u.Y36($i.e))})),(0,s.Z)(WorkbenchConfigOptionModule,"ɵcmp",u.Xpm({type:e,selectors:[["workbench-config-option-componentset"]],inputs:{configValues:"configValues"},decls:3,vars:3,consts:[[1,"slds-form-element","slds-m-vertical--xxx-small"],[3,"option","description"],[3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0),u._UZ(1,"workbench-config-label",1),u.TgZ(2,"system-input-module",2),u.NdJ("ngModelChange",(function(e){return t.configValues[t.option.option]=e})),u.qZA()()),2&e&&(u.xp6(1),u.Q6J("option",t.option.option)("description",t.option.description),u.xp6(1),u.Q6J("ngModel",t.configValues[t.option.option]))},dependencies:[l.JJ,l.On,Un.a,ed.R],encapsulation:2})),WorkbenchConfigOptionModule})(),xd=(()=>{var e;class WorkbenchConfigOptionDefault{constructor(e){(0,s.Z)(this,"view",void 0),(0,s.Z)(this,"configValues",[]),(0,s.Z)(this,"option",{}),(0,s.Z)(this,"showInfo",!1),this.view=e}get optionValue(){return this.configValues[this.option.option]}set optionValue(e){this.configValues[this.option.option]=e}}return e=WorkbenchConfigOptionDefault,(0,s.Z)(WorkbenchConfigOptionDefault,"ɵfac",(function(t){return new(t||e)(u.Y36($i.e))})),(0,s.Z)(WorkbenchConfigOptionDefault,"ɵcmp",u.Xpm({type:e,selectors:[["workbench-config-option-default"]],inputs:{configValues:"configValues"},decls:4,vars:4,consts:[[1,"slds-form-element","slds-m-vertical--xxx-small"],[3,"option","description"],[1,"slds-form-element__control"],["type","text",1,"slds-input",3,"disabled","ngModel","ngModelChange"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0),u._UZ(1,"workbench-config-label",1),u.TgZ(2,"div",2)(3,"input",3),u.NdJ("ngModelChange",(function(e){return t.optionValue=e})),u.qZA()()()),2&e&&(u.xp6(1),u.Q6J("option",t.option.option)("description",t.option.description),u.xp6(2),u.Q6J("disabled",!t.view.isEditMode())("ngModel",t.optionValue))},dependencies:[l.Fj,l.JJ,l.On,ed.R],encapsulation:2})),WorkbenchConfigOptionDefault})(),Md=(()=>{var e;class WorkbenchConfigOptionLabel{constructor(e){(0,s.Z)(this,"view",void 0),(0,s.Z)(this,"configValues",[]),(0,s.Z)(this,"option",{}),this.view=e}}return e=WorkbenchConfigOptionLabel,(0,s.Z)(WorkbenchConfigOptionLabel,"ɵfac",(function(t){return new(t||e)(u.Y36($i.e))})),(0,s.Z)(WorkbenchConfigOptionLabel,"ɵcmp",u.Xpm({type:e,selectors:[["workbench-config-option-label"]],decls:3,vars:3,consts:[[1,"slds-form-element","slds-m-vertical--xxx-small"],[3,"option","description"],[3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0),u._UZ(1,"workbench-config-label",1),u.TgZ(2,"system-input-label",2),u.NdJ("ngModelChange",(function(e){return t.configValues[t.option.option]=e})),u.qZA()()),2&e&&(u.xp6(1),u.Q6J("option",t.option.option)("description",t.option.description),u.xp6(1),u.Q6J("ngModel",t.configValues[t.option.option]))},dependencies:[l.JJ,l.On,S.$,ed.R],encapsulation:2})),WorkbenchConfigOptionLabel})();var Ad=i(8973);let Td=(()=>{var e;class WorkbenchConfigOptionMethod{constructor(e,t){(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"view",void 0),(0,s.Z)(this,"option",{}),(0,s.Z)(this,"configValues",{}),this.language=e,this.view=t}}return e=WorkbenchConfigOptionMethod,(0,s.Z)(WorkbenchConfigOptionMethod,"ɵfac",(function(t){return new(t||e)(u.Y36(b.d),u.Y36($i.e))})),(0,s.Z)(WorkbenchConfigOptionMethod,"ɵcmp",u.Xpm({type:e,selectors:[["workbench-config-option-method"]],decls:3,vars:4,consts:[[1,"slds-form-element","slds-m-vertical--xxx-small"],[3,"option","description"],[3,"ngModel","disabled","ngModelChange"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0),u._UZ(1,"workbench-config-label",1),u.TgZ(2,"system-input-backend-method",2),u.NdJ("ngModelChange",(function(e){return t.configValues[t.option.option]=e})),u.qZA()()),2&e&&(u.xp6(1),u.Q6J("option",t.option.option)("description",t.option.description),u.xp6(1),u.Q6J("ngModel",t.configValues[t.option.option])("disabled",!t.view.isEditMode()))},dependencies:[l.JJ,l.On,Ad.N,ed.R],encapsulation:2})),WorkbenchConfigOptionMethod})();function Ld(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"button",7),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw();return u.KtG(t.editModalRepo())})),u._UZ(1,"system-utility-icon",8),u.qZA()}if(2&e){const e=u.oxw();u.Q6J("disabled",!e.view.isEditMode()),u.xp6(1),u.Q6J("icon","edit")("size","x-small")}}function qd(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div",16)(1,"div",17),u._UZ(2,"system-utility-icon",18),u.TgZ(3,"input",19),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw();return u.KtG(i.objectFilter=t)})),u.qZA()(),u.TgZ(4,"button",20),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw();return u.KtG(t.addObjRepo())})),u._UZ(5,"system-label",21),u.qZA()()}if(2&e){const e=u.oxw();u.xp6(3),u.Q6J("ngModel",e.objectFilter),u.xp6(1),u.Q6J("disabled",!e.view.isEditMode())}}const Cd=function(e){return{"slds-theme--shade":e}};function Jd(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"li",22),u.NdJ("click",(function(){const t=u.CHM(e).$implicit,i=u.oxw();return u.KtG(i.clickObjRepo(t))})),u._uU(1),u.qZA()}if(2&e){const e=t.$implicit,i=u.oxw();u.Q6J("ngClass",u.VKq(2,Cd,i.checkCurrentObjRepo(e.id))),u.xp6(1),u.hij(" ",e.object," ")}}function Nd(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div",24)(1,"label",2),u._UZ(2,"system-label",42),u.qZA(),u.TgZ(3,"div",26)(4,"system-richtext-editor",50),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw(2);return u.KtG(i.currentObjRepo.description=t)})),u.qZA()()()}if(2&e){const e=u.oxw(2);u.xp6(4),u.Q6J("ngModel",e.currentObjRepo.description)}}function kd(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div",24)(1,"label",2),u._UZ(2,"system-label",42),u.qZA(),u.TgZ(3,"div",51)(4,"iframe",52),u.NdJ("change",(function(t){u.CHM(e);const i=u.oxw(2);return u.KtG(i.currentObjRepo.description=t)})),u.qZA()()()}if(2&e){const e=u.oxw(2);u.xp6(4),u.Q6J("srcdoc",e.currentObjRepo.description,u.oJD)}}function wd(e,t){if(1&e&&(u.TgZ(0,"option",66),u._uU(1),u.qZA()),2&e){const e=t.$implicit;u.Q6J("value",e),u.xp6(1),u.Oqu(e)}}function Ud(e,t){if(1&e){const e=u.EpF();u.ynx(0),u.TgZ(1,"tr",53)(2,"td",54)(3,"span",55)(4,"div",56)(5,"input",57),u.NdJ("ngModelChange",(function(t){const i=u.CHM(e).$implicit;return u.KtG(i.name=t)})),u.qZA()()()(),u.TgZ(6,"td",58)(7,"span",55)(8,"div",26)(9,"div",59)(10,"select",60),u.NdJ("ngModelChange",(function(t){const i=u.CHM(e).$implicit;return u.KtG(i.type=t)})),u.YNc(11,wd,2,2,"option",61),u.qZA()()()()(),u.TgZ(12,"td",62)(13,"span",55)(14,"div",56)(15,"input",57),u.NdJ("ngModelChange",(function(t){const i=u.CHM(e).$implicit;return u.KtG(i.description=t)})),u.qZA()()()(),u.TgZ(16,"td",63)(17,"div",64)(18,"button",65),u.NdJ("click",(function(){const t=u.CHM(e).index,i=u.oxw(2);return u.KtG(i.deleteConfig(t))})),u._UZ(19,"system-button-icon",46),u.qZA()()()(),u.BQk()}if(2&e){const e=t.$implicit,i=u.oxw(2);u.xp6(5),u.Q6J("disabled",!i.view.isEditMode())("ngModel",e.name),u.xp6(5),u.Q6J("disabled",!i.view.isEditMode())("ngModel",e.type),u.xp6(1),u.Q6J("ngForOf",i.fieldTypeList),u.xp6(4),u.Q6J("disabled",!i.view.isEditMode())("ngModel",e.description),u.xp6(3),u.Q6J("disabled",!i.view.isEditMode()),u.xp6(1),u.Q6J("icon","delete")}}function Ed(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div",23)(1,"div",24)(2,"label",2),u._UZ(3,"system-label",25),u.qZA(),u.TgZ(4,"div",26)(5,"input",27),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw();return u.KtG(i.currentObjRepo.object=t)})),u.qZA()()(),u.TgZ(6,"div",24)(7,"label",2),u._UZ(8,"system-label",28),u.qZA(),u.TgZ(9,"div",26)(10,"input",27),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw();return u.KtG(i.currentObjRepo.component=t)})),u.qZA()()(),u.TgZ(11,"label",29)(12,"input",30),u.NdJ("change",(function(){u.CHM(e);const t=u.oxw();return u.KtG(t.updateDeprecated())})),u.qZA(),u._UZ(13,"span",31),u.TgZ(14,"span",2),u._UZ(15,"system-label",32),u.qZA()(),u.YNc(16,Nd,5,1,"div",33),u.YNc(17,kd,5,1,"div",33),u.TgZ(18,"div",34)(19,"label",2),u._UZ(20,"system-label",35),u.qZA(),u.TgZ(21,"table",36)(22,"thead")(23,"tr",37)(24,"th",38)(25,"span",39),u._UZ(26,"system-label",40),u.qZA()(),u.TgZ(27,"th",38)(28,"span",39),u._UZ(29,"system-label",41),u.qZA()(),u.TgZ(30,"th",38)(31,"span",39),u._UZ(32,"system-label",42),u.qZA()(),u._UZ(33,"th",38),u.qZA()(),u.TgZ(34,"tbody"),u.YNc(35,Ud,20,9,"ng-container",43),u.qZA()(),u.TgZ(36,"div",44)(37,"button",45),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw();return u.KtG(t.addConfig())})),u._UZ(38,"system-button-icon",46),u.qZA()()(),u.TgZ(39,"div",47)(40,"button",48),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw();return u.KtG(t.saveChanges())})),u._UZ(41,"system-label",49),u.qZA()()()}if(2&e){const e=u.oxw();u.xp6(5),u.Q6J("disabled",!e.view.isEditMode())("ngModel",e.currentObjRepo.object),u.xp6(5),u.Q6J("disabled",!e.view.isEditMode())("ngModel",e.currentObjRepo.component),u.xp6(2),u.Q6J("disabled",!e.view.isEditMode())("ngModel",e.getDeprecatedBool(e.currentObjRepo.deprecated)),u.xp6(4),u.Q6J("ngIf",e.view.isEditMode()),u.xp6(1),u.Q6J("ngIf",!e.view.isEditMode()),u.xp6(18),u.Q6J("ngForOf",e.currentConfigArray),u.xp6(2),u.Q6J("disabled",!e.view.isEditMode()),u.xp6(1),u.Q6J("icon","new"),u.xp6(2),u.Q6J("disabled",!e.view.isEditMode())}}let Dd=(()=>{var e;class ObjectRepositoryManagerFilter{transform(e,t){if(!t)return e;let i=[];for(let s of e)s.object.toLowerCase().indexOf(t.toLowerCase())>=0&&i.push(s);return i}}return e=ObjectRepositoryManagerFilter,(0,s.Z)(ObjectRepositoryManagerFilter,"ɵfac",(function(t){return new(t||e)})),(0,s.Z)(ObjectRepositoryManagerFilter,"ɵpipe",u.Yjl({name:"objectrepositorymanagerfilter",type:e,pure:!0})),ObjectRepositoryManagerFilter})(),Od=(()=>{var e;class ObjectRepositoryManager{constructor(e,t,i,n,l,o,a,d,r){(0,s.Z)(this,"backend",void 0),(0,s.Z)(this,"metadata",void 0),(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"modalservice",void 0),(0,s.Z)(this,"modelutilities",void 0),(0,s.Z)(this,"modal",void 0),(0,s.Z)(this,"toast",void 0),(0,s.Z)(this,"configurationService",void 0),(0,s.Z)(this,"view",void 0),(0,s.Z)(this,"treelist",[]),(0,s.Z)(this,"edit_mode","custom"),(0,s.Z)(this,"change_request_required",!1),(0,s.Z)(this,"crNoneActive",!1),(0,s.Z)(this,"moduleReposSelect",[]),(0,s.Z)(this,"moduleRepos",[]),(0,s.Z)(this,"modulereposselecteditem",{}),(0,s.Z)(this,"objrepoList",[]),(0,s.Z)(this,"configList",{}),(0,s.Z)(this,"currentConfigArray",[]),(0,s.Z)(this,"objectFilter",""),(0,s.Z)(this,"fieldTypeList",["string","label","boolean","fieldset","actionset","componentset","module","modulefilter"]),(0,s.Z)(this,"newRepo",{}),(0,s.Z)(this,"emptyRepo",{component:"",componentconfig:"",description:"",id:"",module:"",object:"",package:""}),(0,s.Z)(this,"currentModule",{}),(0,s.Z)(this,"newModule",{}),(0,s.Z)(this,"emptyModule",{id:"",module:"",path:"",description:"",package:"",version:"",scope:"custom"}),(0,s.Z)(this,"currentObjRepo",{}),this.backend=e,this.metadata=t,this.language=i,this.modalservice=n,this.modelutilities=l,this.modal=o,this.toast=a,this.configurationService=d,this.view=r,this.backend.getRequest("configuration/configurator/entries/sysuimodulerepository").subscribe((e=>{for(let t of e){this.moduleRepos.push(t);let e={};e={id:t.id,name:t.module,group:"global"},this.moduleReposSelect.push(e)}this.moduleReposSelect=Object.assign([],this.moduleReposSelect)})),this.backend.getRequest("configuration/configurator/entries/sysuicustommodulerepository").subscribe((e=>{for(let t of e){this.moduleRepos.push(t);let e={};e={id:t.id,name:t.module,group:"custom"},this.moduleReposSelect.push(e)}this.moduleReposSelect=Object.assign([],this.moduleReposSelect)})),this.checkMode()}set moduleReposSelectedItem(e){this.modulereposselecteditem=e,"global"==e.group?this.backend.getRequest("configuration/configurator/entries/sysuiobjectrepository").subscribe((t=>{this.objrepoList=[];for(let i of t)e.id==i.module&&this.objrepoList.push(i)})):"custom"==e.group?this.backend.getRequest("configuration/configurator/entries/sysuicustomobjectrepository").subscribe((t=>{this.objrepoList=[];for(let i of t)e.id==i.module&&this.objrepoList.push(i)})):console.error("Damaged item!"),this.objrepoList.sort(((e,t)=>e.object<t.object?1:-1));for(let t of this.moduleRepos)t.id==e.id&&(this.currentModule=t,this.currentModule.scope=e.group);this.checkMode()}get moduleReposSelectedItem(){return this.modulereposselecteditem}updateField(e){this.currentObjRepo.description=e}updateDeprecated(){this.currentObjRepo.deprecated="1"==this.currentObjRepo.deprecated?"0":"1"}checkMode(){this.edit_mode=this.configurationService.getCapabilityConfig("core").edit_mode,this.change_request_required=this.configurationService.getCapabilityConfig("systemdeployment").change_request_required,"none"!=this.edit_mode&&"custom"!=this.edit_mode&&"all"!=this.edit_mode&&(this.edit_mode="custom"),this.change_request_required?this.backend.getRequest("module/SystemDeploymentCRs/active").subscribe((e=>{""==e.id?(this.setNoneMode(),this.crNoneActive=!0,this.toast.sendToast(this.language.getLabel("LBL_ACTIVATE_CR_WARNING"),"warning",null,3)):(this.crNoneActive=!1,"all"==this.edit_mode?this.setAllMode():"custom"==this.edit_mode?this.setCustomMode():this.setNoneMode())})):(this.crNoneActive=!1,"all"==this.edit_mode?this.setAllMode():"custom"==this.edit_mode?this.setCustomMode():this.setNoneMode())}setNoneMode(){this.view.setViewMode()}setCustomMode(){"custom"==this.currentModule.scope?this.view.setEditMode():this.view.setViewMode()}setAllMode(){this.view.setEditMode()}clickObjRepo(e){this.currentObjRepo=e,this.currentConfigArray=[];try{this.configList=JSON.parse(this.currentObjRepo.componentconfig);let e=0;for(let t in this.configList)if(this.configList.hasOwnProperty(t)){let i;i=this.configList[t].description?this.configList[t].description:"";let s={id:e,name:t,type:this.configList[t].type,description:i};this.currentConfigArray.push(s),e++}}catch(e){console.warn("JSON is invalid or empty!")}}checkCurrentObjRepo(e){return this.currentObjRepo.id==e}addConfig(){this.currentConfigArray.push({id:this.currentConfigArray.length+1,name:"",type:""})}deleteConfig(e){this.currentConfigArray.splice(e,1)}saveChanges(){this.modal.openModal("SystemLoadingModal").subscribe((e=>{let t={},i=[...this.currentConfigArray],s=!0;for(let e of i)if(""!=e.type&&""!=e.name){let i={};i["type"]=e.type;let s="description";e.description?i[s]=e.description:i[s]="",t[e.name]=i}else s=!1;if(s){this.currentObjRepo.componentconfig=JSON.stringify(t);let i="";i="global"==this.currentModule.scope?"sysuiobjectrepository":"sysuicustomobjectrepository",this.backend.postRequest("configuration/configurator/"+i+"/"+this.currentObjRepo.id,null,{config:this.currentObjRepo}).subscribe((t=>{for(let e in this.objrepoList)this.objrepoList[e].id==this.currentObjRepo.id&&(this.objrepoList[e]=this.currentObjRepo);e.instance.self.destroy(),this.toast.sendToast("changes saved")}))}else e.instance.self.destroy(),this.toast.sendToast("Empty configuration!")}))}addObjRepo(){this.modalservice.openModal("ObjectRepositoryManagerAddRepo").subscribe((e=>{this.newRepo={...this.emptyRepo},e.instance.objRepo=this.newRepo,e.instance.closedialog.subscribe((e=>{e&&this.modal.openModal("SystemLoadingModal").subscribe((e=>{this.newRepo.id=this.modelutilities.generateGuid(),this.newRepo.module=this.currentModule.id;let t="";t="global"==this.currentModule.scope?"sysuiobjectrepository":"sysuicustomobjectrepository",this.backend.postRequest("configuration/configurator/"+t+"/"+this.newRepo.id,null,{config:this.newRepo}).subscribe((t=>{this.objrepoList.push(this.newRepo),this.currentObjRepo=this.newRepo,e.instance.self.destroy(),this.toast.sendToast("changes saved")}))}))}))}))}addModalRepo(e="add"){this.modalservice.openModal("ObjectRepositoryManagerAddModule").subscribe((t=>{"edit"==e?(this.newModule={...this.currentModule},t.instance.moduleRepo=this.newModule):(this.newModule={...this.emptyModule},t.instance.moduleRepo=this.newModule),t.instance.mode=e,t.instance.edit_mode=this.edit_mode,t.instance.closedialog.subscribe((t=>{t&&this.modal.openModal("SystemLoadingModal").subscribe((t=>{""==this.newModule.id&&(this.newModule.id=this.modelutilities.generateGuid());let i="",s="";"global"==this.newModule.scope?(i="sysuimodulerepository",s="global"):(i="sysuicustommodulerepository",s="custom"),delete this.newModule.scope,this.backend.postRequest("configuration/configurator/"+i+"/"+this.newModule.id,null,{config:this.newModule}).subscribe((i=>{let n={id:this.newModule.id,name:this.newModule.module,group:s};if(this.newModule.scope=s,"add"==e)this.moduleReposSelect.push(n),this.moduleRepos.push(this.newModule),this.moduleReposSelectedItem=n;else{for(let e in this.moduleReposSelect)this.moduleReposSelect[e].id==n.id&&(this.moduleReposSelect[e]=n);for(let e of this.moduleRepos)e.id==this.newModule.id&&(e=this.newModule)}this.currentModule=this.newModule,this.moduleReposSelect=Object.assign([],this.moduleReposSelect),this.moduleReposSelectedItem=n,t.instance.self.destroy(),this.toast.sendToast("changes saved")}))}))}))}))}editModalRepo(){this.addModalRepo("edit")}exportRepoList(){this.modalservice.openModal("ObjectRepositoryExport")}getDeprecatedBool(e){return"1"==e}}return e=ObjectRepositoryManager,(0,s.Z)(ObjectRepositoryManager,"ɵfac",(function(t){return new(t||e)(u.Y36(h.y),u.Y36(f.Pu),u.Y36(b.d),u.Y36(x.o),u.Y36(Z.A),u.Y36(x.o),u.Y36(v.A),u.Y36(M.C),u.Y36($i.e))})),(0,s.Z)(ObjectRepositoryManager,"ɵcmp",u.Xpm({type:e,selectors:[["objectrepository-manager"]],features:[u._Bn([$i.e])],decls:22,vars:19,consts:[[1,"slds-grid","slds-form--inline","slds-p-around--small","slds-border--bottom"],[1,"slds-form-element"],[1,"slds-form-element__label"],[1,"slds-form-element__control",2,"width","400px"],[2,"width","100%",3,"listHeight","selectList","ngModel","ngModelChange"],[1,"slds-form-element","slds-col--bump-left"],["type","button","class","slds-button slds-button_icon slds-button_icon-border-filled",3,"disabled","click",4,"ngIf"],["type","button",1,"slds-button","slds-button_icon","slds-button_icon-border-filled",3,"disabled","click"],[3,"icon","size"],["type","button",1,"slds-button","slds-button--neutral",3,"click"],[1,"slds-grid"],[1,"slds-size--2-of-5","slds-p-horizontal--small","slds-border--right"],["class","slds-p-around--small slds-grid slds-grid_align-spread slds-grid_vertical-align-center slds-gutters",4,"ngIf"],["system-to-bottom","",1,"slds-has-dividers_around-space"],["class","slds-item",3,"ngClass","click",4,"ngFor","ngForOf"],["system-to-bottom","","class","slds-size--3-of-5 slds-p-horizontal--small",4,"ngIf"],[1,"slds-p-around--small","slds-grid","slds-grid_align-spread","slds-grid_vertical-align-center","slds-gutters"],[1,"slds-grow","slds-form-element__control","slds-input-has-icon","slds-input-has-icon_right","slds-p-right--xx-small"],["icon","filterList","addclasses","slds-input__icon slds-input__icon--left"],["type","text",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-button","slds-button_neutral",3,"disabled","click"],["label","LBL_ADD"],[1,"slds-item",3,"ngClass","click"],["system-to-bottom","",1,"slds-size--3-of-5","slds-p-horizontal--small"],[1,"slds-form-element","slds-m-vertical_medium"],["label","LBL_OBJECT"],[1,"slds-form-element__control"],["type","text",1,"slds-input",3,"disabled","ngModel","ngModelChange"],["label","LBL_COMPONENT"],["for","deprecated",1,"slds-checkbox"],["type","checkbox","id","deprecated",3,"disabled","ngModel","change"],[1,"slds-checkbox--faux"],["label","LBL_DEPRECATED"],["class","slds-form-element slds-m-vertical_medium",4,"ngIf"],[1,"slds-table_edit_container","slds-is-relative"],["label","LBL_CONFIGURATION"],["role","grid",1,"slds-table","slds-table_bordered",2,"width","100%"],[1,"slds-line-height_reset"],["scope","col"],["title","Name",1,"slds-truncate"],["label","LBL_NAME"],["label","LBL_TYPE"],["label","LBL_DESCRIPTION"],[4,"ngFor","ngForOf"],[1,"slds-p-around--small","slds-align--absolute-center","slds-border--bottom"],["title","add item",1,"slds-button","slds-button--icon",3,"disabled","click"],[3,"icon"],[1,"slds-text-align--right","slds-p-vertical--x-small"],["type","button",1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_SAVE"],[3,"ngModel","ngModelChange"],[1,"slds-form-element__control","slds-box","slds-scrollable_y",2,"background-color","#ecebea","background-color","#ecebea","max-height","300px"],["width","100%","height","100%","frameborder","0","seamless","true","sandbox","",3,"srcdoc","change"],[1,"slds-hint-parent"],["role","gridcell",1,"slds-cell-edit",2,"width","30%"],[1,"slds-grid","slds-grid_align-spread"],[1,"slds-form-element__control",2,"width","100%"],["aria-describedby","error-message","type","text",1,"slds-input",3,"disabled","ngModel","ngModelChange"],["role","gridcell",1,"slds-cell-edit",2,"width","12%"],[1,"slds-select_container"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["role","gridcell",1,"slds-cell-edit",2,"width","100%"],["role","gridcell",1,"slds-cell-edit"],[1,"slds-p-around--small","slds-align--absolute-center","slds-float_right"],["title","delete item",1,"slds-button","slds-button--icon",3,"disabled","click"],[3,"value"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0)(1,"div",1)(2,"label",2),u._uU(3,"Module"),u.qZA(),u.TgZ(4,"div",3)(5,"system-select",4),u.NdJ("ngModelChange",(function(e){return t.moduleReposSelectedItem=e})),u.qZA()()(),u.TgZ(6,"div",5),u.YNc(7,Ld,2,3,"button",6),u.ALo(8,"json"),u.TgZ(9,"button",7),u.NdJ("click",(function(){return t.addModalRepo()})),u._UZ(10,"system-utility-icon",8),u.qZA(),u.TgZ(11,"button",9),u.NdJ("click",(function(){return t.exportRepoList()})),u._uU(12,"EXP"),u.qZA()()(),u.TgZ(13,"div",10)(14,"div",11),u.YNc(15,qd,6,2,"div",12),u.ALo(16,"json"),u.TgZ(17,"ul",13),u.YNc(18,Jd,2,4,"li",14),u.ALo(19,"objectrepositorymanagerfilter"),u.qZA()(),u.YNc(20,Ed,42,12,"div",15),u.ALo(21,"json"),u.qZA()),2&e&&(u.xp6(5),u.Q6J("listHeight","10")("selectList",t.moduleReposSelect)("ngModel",t.moduleReposSelectedItem),u.xp6(2),u.Q6J("ngIf","{}"!=u.lcZ(8,10,t.currentModule)),u.xp6(2),u.Q6J("disabled","none"==t.edit_mode),u.xp6(1),u.Q6J("icon","add")("size","x-small"),u.xp6(5),u.Q6J("ngIf","{}"!=u.lcZ(16,12,t.currentModule)),u.xp6(3),u.Q6J("ngForOf",u.xi3(19,14,t.objrepoList,t.objectFilter)),u.xp6(2),u.Q6J("ngIf","{}"!=u.lcZ(21,17,t.currentObjRepo)))},dependencies:[n.mk,n.sg,n.O5,l.YN,l.Kr,l.Fj,l.Wl,l.EJ,l.JJ,l.On,T.J,L._,Oi.z,td.R,m.r,w.H,n.Ts,Dd],encapsulation:2})),ObjectRepositoryManager})(),Id=(()=>{var e;class ObjectRepositoryManagerAddRepo{constructor(e,t,i){(0,s.Z)(this,"backend",void 0),(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"modelutilities",void 0),(0,s.Z)(this,"closedialog",new u.vpe),(0,s.Z)(this,"objRepo",{component:"",componentconfig:"",description:"",id:"",module:"",object:"",package:""}),(0,s.Z)(this,"currentObject",""),(0,s.Z)(this,"currentComponent",""),(0,s.Z)(this,"addType","fieldsetadd"),(0,s.Z)(this,"addName",""),(0,s.Z)(this,"addFieldset",""),(0,s.Z)(this,"fieldsettype","custom"),(0,s.Z)(this,"moduleFields",[]),(0,s.Z)(this,"self",void 0),this.backend=e,this.language=t,this.modelutilities=i}ngOnInit(){}closeDialog(){this.self.destroy()}onModalEscX(){this.closeDialog()}add(){this.closedialog.emit(!0),this.self.destroy()}copyObject(){this.objRepo.component=this.objRepo.object}}return e=ObjectRepositoryManagerAddRepo,(0,s.Z)(ObjectRepositoryManagerAddRepo,"ɵfac",(function(t){return new(t||e)(u.Y36(h.y),u.Y36(b.d),u.Y36(Z.A))})),(0,s.Z)(ObjectRepositoryManagerAddRepo,"ɵcmp",u.Xpm({type:e,selectors:[["objectrepositorymanager-add-repo"]],inputs:{objRepo:"objRepo"},outputs:{closedialog:"closedialog"},decls:25,vars:7,consts:[["role","dialog","tabindex","-1","aria-labelledby","header43",1,"slds-modal","slds-fade-in-open"],[1,"slds-modal__container"],[1,"slds-modal__header","slds-theme--shade"],["title","Close",1,"slds-button","slds-modal__close","slds-button--icon-inverse",3,"click"],[3,"icon","size"],["id","header43",1,"slds-text-heading--medium"],["label","LBL_ADD_REPOSITORY"],[1,"slds-modal__content","slds-p-around--medium"],[1,"slds-form-element","slds-m-top--small"],[1,"slds-form-element__label"],["label","LBL_OBJECT"],[1,"slds-form-element__control"],["type","text","placeholder","",1,"slds-input",3,"ngModel","ngModelChange"],["for","text-input-id-1",1,"slds-form-element__label"],["label","LBL_COMPONENT"],[1,"slds-form-element__control","slds-input-has-icon","slds-input-has-icon_right"],["type","text","id","text-input-id-1","placeholder","",1,"slds-input",3,"ngModel","ngModelChange"],["title","add item",1,"slds-button","slds-button_icon","slds-input__icon","slds-input__icon_right",3,"click"],[3,"icon","size","addclasses"],[1,"slds-modal__footer"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_ADD"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),u.NdJ("click",(function(){return t.closeDialog()})),u._UZ(4,"system-button-icon",4),u.qZA(),u.TgZ(5,"h2",5),u._UZ(6,"system-label",6),u.qZA()(),u.TgZ(7,"div",7)(8,"div",8)(9,"label",9),u._UZ(10,"system-label",10),u.qZA(),u.TgZ(11,"div",11)(12,"input",12),u.NdJ("ngModelChange",(function(e){return t.objRepo.object=e})),u.qZA()()(),u.TgZ(13,"div",8)(14,"label",13),u._UZ(15,"system-label",14),u.qZA(),u.TgZ(16,"div",15)(17,"input",16),u.NdJ("ngModelChange",(function(e){return t.objRepo.component=e})),u.qZA(),u.TgZ(18,"button",17),u.NdJ("click",(function(){return t.copyObject()})),u._UZ(19,"system-utility-icon",18),u.qZA()()()(),u.TgZ(20,"div",19)(21,"button",20),u.NdJ("click",(function(){return t.closeDialog()})),u._UZ(22,"system-label",21),u.qZA(),u.TgZ(23,"button",22),u.NdJ("click",(function(){return t.add()})),u._UZ(24,"system-label",23),u.qZA()()()()),2&e&&(u.xp6(4),u.Q6J("icon","close")("size","large"),u.xp6(8),u.Q6J("ngModel",t.objRepo.object),u.xp6(5),u.Q6J("ngModel",t.objRepo.component),u.xp6(2),u.Q6J("icon","redo")("size","xx-small")("addclasses","slds-section__title-action-icon slds-button__icon slds-button__icon_left"))},dependencies:[l.Fj,l.JJ,l.On,T.J,L._,m.r],encapsulation:2})),ObjectRepositoryManagerAddRepo})();function Qd(e,t){1&e&&(u.TgZ(0,"h2",21),u._UZ(1,"system-label",22),u.qZA())}function Sd(e,t){1&e&&(u.TgZ(0,"h2",23),u._UZ(1,"system-label",24),u.qZA())}function Bd(e,t){if(1&e&&(u.TgZ(0,"option",28),u._uU(1),u.qZA()),2&e){const e=t.$implicit;u.Q6J("ngValue",e),u.xp6(1),u.Oqu(e)}}function Fd(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div",9)(1,"label",10),u._uU(2,"Scope"),u.qZA(),u.TgZ(3,"div",12)(4,"div",25)(5,"select",26),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw();return u.KtG(i.moduleRepo.scope=t)})),u.YNc(6,Bd,2,2,"option",27),u.qZA()()()()}if(2&e){const e=u.oxw();u.xp6(5),u.Q6J("ngModel",e.moduleRepo.scope),u.xp6(1),u.Q6J("ngForOf",e.scopes)}}function Yd(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"button",29),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw();return u.KtG(t.add())})),u._UZ(1,"system-label",30),u.qZA()}}function Rd(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"button",29),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw();return u.KtG(t.add())})),u._UZ(1,"system-label",31),u.qZA()}}let Gd=(()=>{var e;class ObjectRepositoryManagerAddModule{constructor(e,t,i){(0,s.Z)(this,"backend",void 0),(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"modelutilities",void 0),(0,s.Z)(this,"closedialog",new u.vpe),(0,s.Z)(this,"mode","add"),(0,s.Z)(this,"edit_mode","custom"),(0,s.Z)(this,"moduleRepo",{id:"",module:"",path:"",description:"",package:"",version:"",scope:"custom"}),(0,s.Z)(this,"self",void 0),(0,s.Z)(this,"scopes",["custom","global"]),this.backend=e,this.language=t,this.modelutilities=i}ngOnInit(){"custom"==this.edit_mode?this.scopes=["custom"]:this.scopes=["custom","global"]}closeDialog(){this.self.destroy()}onModalEscX(){this.closeDialog()}add(){this.closedialog.emit(!0),this.self.destroy()}updateField(e){this.moduleRepo.description=e}}return e=ObjectRepositoryManagerAddModule,(0,s.Z)(ObjectRepositoryManagerAddModule,"ɵfac",(function(t){return new(t||e)(u.Y36(h.y),u.Y36(b.d),u.Y36(Z.A))})),(0,s.Z)(ObjectRepositoryManagerAddModule,"ɵcmp",u.Xpm({type:e,selectors:[["objectrepositorymanager-add-module"]],inputs:{mode:"mode",edit_mode:"edit_mode",moduleRepo:"moduleRepo"},outputs:{closedialog:"closedialog"},decls:29,vars:10,consts:[["role","dialog","tabindex","-1","aria-labelledby","header43",1,"slds-modal","slds-fade-in-open"],[1,"slds-modal__container"],[1,"slds-modal__header","slds-theme--shade"],["title","Close",1,"slds-button","slds-modal__close","slds-button--icon-inverse",3,"click"],[3,"icon","size"],["id","header43","class","slds-text-heading--medium",4,"ngIf"],["id","header44","class","slds-text-heading--medium",4,"ngIf"],[1,"slds-modal__content","slds-p-around--medium"],["class","slds-form-element slds-m-top--small",4,"ngIf"],[1,"slds-form-element","slds-m-top--small"],[1,"slds-form-element__label"],["label","LBL_NAME"],[1,"slds-form-element__control"],["type","text","placeholder","",1,"slds-input",3,"ngModel","ngModelChange"],["label","LBL_PATH"],["label","LBL_DESCRIPTION"],[3,"ngModel","ngModelChange"],[1,"slds-modal__footer"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],["class","slds-button slds-button--brand",3,"click",4,"ngIf"],["id","header43",1,"slds-text-heading--medium"],["label","LBL_ADD_Module"],["id","header44",1,"slds-text-heading--medium"],["label","LBL_EDIT_Module"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_ADD"],["label","LBL_SAVE"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),u.NdJ("click",(function(){return t.closeDialog()})),u._UZ(4,"system-button-icon",4),u.qZA(),u.YNc(5,Qd,2,0,"h2",5),u.YNc(6,Sd,2,0,"h2",6),u.qZA(),u.TgZ(7,"div",7),u.YNc(8,Fd,7,2,"div",8),u.TgZ(9,"div",9)(10,"label",10),u._UZ(11,"system-label",11),u.qZA(),u.TgZ(12,"div",12)(13,"input",13),u.NdJ("ngModelChange",(function(e){return t.moduleRepo.module=e})),u.qZA()()(),u.TgZ(14,"div",9)(15,"label",10),u._UZ(16,"system-label",14),u.qZA(),u.TgZ(17,"div",12)(18,"input",13),u.NdJ("ngModelChange",(function(e){return t.moduleRepo.path=e})),u.qZA()()(),u.TgZ(19,"div",9)(20,"label",10),u._UZ(21,"system-label",15),u.qZA(),u.TgZ(22,"div",12)(23,"system-richtext-editor",16),u.NdJ("ngModelChange",(function(e){return t.moduleRepo.description=e})),u.qZA()()()(),u.TgZ(24,"div",17)(25,"button",18),u.NdJ("click",(function(){return t.closeDialog()})),u._UZ(26,"system-label",19),u.qZA(),u.YNc(27,Yd,2,0,"button",20),u.YNc(28,Rd,2,0,"button",20),u.qZA()()()),2&e&&(u.xp6(4),u.Q6J("icon","close")("size","large"),u.xp6(1),u.Q6J("ngIf","add"==t.mode),u.xp6(1),u.Q6J("ngIf","edit"==t.mode),u.xp6(2),u.Q6J("ngIf","add"==t.mode),u.xp6(5),u.Q6J("ngModel",t.moduleRepo.module),u.xp6(5),u.Q6J("ngModel",t.moduleRepo.path),u.xp6(5),u.Q6J("ngModel",t.moduleRepo.description),u.xp6(4),u.Q6J("ngIf","add"==t.mode),u.xp6(1),u.Q6J("ngIf","edit"==t.mode))},dependencies:[n.sg,n.O5,l.YN,l.Kr,l.Fj,l.EJ,l.JJ,l.On,T.J,L._,Oi.z],styles:["[_nghost-%COMP%]   .mce-ico[_ngcontent-%COMP%]{color:#54698d;font-size:12px}","[_nghost-%COMP%]   .mce-text[_ngcontent-%COMP%]{color:#54698d;font-size:12px}","[_nghost-%COMP%]   .mce-btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#54698d;font-size:12px}","[_nghost-%COMP%]   .mce-tinymce[_ngcontent-%COMP%]{border-radius:4px}","[_nghost-%COMP%]   .mce-widget[_ngcontent-%COMP%]{font-family:Titillium Web,sans-serif}"]})),ObjectRepositoryManagerAddModule})();const Hd=["inputField"];function Kd(e,t){1&e&&u._UZ(0,"system-spinner")}function zd(e,t){if(1&e&&(u.TgZ(0,"div",4)(1,"div",5),u._UZ(2,"input",6,7),u.qZA()()),2&e){const e=u.oxw();u.xp6(2),u.s9C("value",e.repostring)}}let Vd=(()=>{var e;class ObjectRepositoryExport{constructor(e,t,i){(0,s.Z)(this,"lang",void 0),(0,s.Z)(this,"backend",void 0),(0,s.Z)(this,"toast",void 0),(0,s.Z)(this,"self",void 0),(0,s.Z)(this,"isLoading",!1),(0,s.Z)(this,"repostring",void 0),(0,s.Z)(this,"inputField",void 0),this.lang=e,this.backend=t,this.toast=i}ngOnInit(){this.isLoading=!0,this.backend.getRequest("configuration/configurator/objectrepository").subscribe((e=>{this.repostring=e.repostring,this.isLoading=!1,window.setTimeout((()=>this.inputField.nativeElement.select()),500)}),(()=>{this.isLoading=!1,this.toast.sendToast("Error loading data!","error")}))}closeModal(){this.self.destroy()}onModalEscX(){this.closeModal()}}return e=ObjectRepositoryExport,(0,s.Z)(ObjectRepositoryExport,"ɵfac",(function(t){return new(t||e)(u.Y36(b.d),u.Y36(h.y),u.Y36(v.A))})),(0,s.Z)(ObjectRepositoryExport,"ɵcmp",u.Xpm({type:e,selectors:[["objectrepositoryexport"]],viewQuery:function(e,t){if(1&e&&u.Gf(Hd,7),2&e){let e;u.iGM(e=u.CRH())&&(t.inputField=e.first)}},decls:9,vars:3,consts:[[3,"close"],[4,"ngIf"],["class","slds-text-align--center slds-grid",4,"ngIf"],[1,"slds-button","slds-button--neutral",3,"click"],[1,"slds-text-align--center","slds-grid"],[1,"slds-m-right--medium",2,"width","100%"],["type","text",1,"slds-input",2,"width","100%",3,"value"],["inputField",""]],template:function(e,t){1&e&&(u.TgZ(0,"system-modal")(1,"system-modal-header",0),u.NdJ("close",(function(){return t.closeModal()})),u._uU(2,"Object Repository Export"),u.qZA(),u.TgZ(3,"system-modal-content"),u.YNc(4,Kd,1,0,"system-spinner",1),u.YNc(5,zd,4,1,"div",2),u.qZA(),u.TgZ(6,"system-modal-footer")(7,"button",3),u.NdJ("click",(function(){return t.closeModal()})),u._uU(8),u.qZA()()()),2&e&&(u.xp6(4),u.Q6J("ngIf",t.isLoading),u.xp6(1),u.Q6J("ngIf",!t.isLoading),u.xp6(3),u.Oqu(t.lang.getLabel("LBL_CLOSE")))},dependencies:[n.O5,nt.j,lt.x,ot.p,at.y,ol.W],encapsulation:2})),ObjectRepositoryExport})();var Pd=i(4846),$d=i(2006),jd=i(8280),Wd=i(6538),Xd=i(4730);function er(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"a",27),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw().$implicit,i=u.oxw();return u.KtG(i.valueClicked$.emit({type:"date_entered",value:t.date_entered}))})),u._UZ(1,"system-display-datetime",28),u.qZA()}if(2&e){const e=u.oxw().$implicit;u.xp6(1),u.Q6J("date",e.date_entered)}}function tr(e,t){if(1&e&&u._UZ(0,"system-display-datetime",28),2&e){const e=u.oxw().$implicit;u.Q6J("date",e.date_entered)}}function ir(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"a",27),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw().$implicit,i=u.oxw();return u.KtG(i.valueClicked$.emit({type:"pid",value:t.pid}))})),u._uU(1),u.qZA()}if(2&e){const e=u.oxw().$implicit;u.xp6(1),u.Oqu(e.pid)}}function sr(e,t){if(1&e&&(u.ynx(0),u._uU(1),u.BQk()),2&e){const e=u.oxw().$implicit;u.xp6(1),u.Oqu(e.pid)}}function nr(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"a",27),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw().$implicit,i=u.oxw();return u.KtG(i.valueClicked$.emit({type:"transaction_id",value:t.transaction_id}))})),u._uU(1),u.qZA()}if(2&e){const e=u.oxw().$implicit;u.xp6(1),u.Oqu(e.transaction_id)}}function lr(e,t){if(1&e&&(u.ynx(0),u._uU(1),u.BQk()),2&e){const e=u.oxw().$implicit;u.xp6(1),u.Oqu(e.transaction_id)}}function or(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"a",27),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw().$implicit,i=u.oxw();return u.KtG(i.valueClicked$.emit({type:"user",value:{user_id:t.user_id,user_name:t.user_name}}))})),u._uU(1),u.qZA()}if(2&e){const e=u.oxw().$implicit;u.xp6(1),u.Oqu(e.user_name)}}function ar(e,t){if(1&e&&(u.ynx(0),u._uU(1),u.BQk()),2&e){const e=u.oxw().$implicit;u.xp6(1),u.Oqu(e.user_name)}}function dr(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"a",27),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw().$implicit,i=u.oxw();return u.KtG(i.valueClicked$.emit({type:"log_level",value:t.log_level}))})),u._uU(1),u.qZA()}if(2&e){const e=u.oxw().$implicit;u.xp6(1),u.Oqu(e.log_level)}}function rr(e,t){if(1&e&&(u.ynx(0),u._uU(1),u.BQk()),2&e){const e=u.oxw().$implicit;u.xp6(1),u.Oqu(e.log_level)}}function cr(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"a",27),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw().$implicit,i=u.oxw();return u.KtG(i.valueClicked$.emit({type:"log_sublevel",value:t.log_sublevel}))})),u._uU(1),u.qZA()}if(2&e){const e=u.oxw().$implicit;u.xp6(1),u.Oqu(e.log_sublevel)}}function gr(e,t){if(1&e&&(u.ynx(0),u._uU(1),u.BQk()),2&e){const e=u.oxw().$implicit;u.xp6(1),u.Oqu(e.log_sublevel)}}function ur(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"tr")(1,"td"),u.YNc(2,er,2,1,"a",20),u.YNc(3,tr,1,1,"system-display-datetime",21),u.qZA(),u.TgZ(4,"td",22),u.YNc(5,ir,2,1,"a",20),u.YNc(6,sr,2,1,"ng-container",23),u.qZA(),u.TgZ(7,"td"),u.YNc(8,nr,2,1,"a",20),u.YNc(9,lr,2,1,"ng-container",23),u.qZA(),u.TgZ(10,"td"),u.YNc(11,or,2,1,"a",20),u.YNc(12,ar,2,1,"ng-container",23),u.qZA(),u.TgZ(13,"td"),u.YNc(14,dr,2,1,"a",20),u.YNc(15,rr,2,1,"ng-container",23),u.qZA(),u.TgZ(16,"td"),u.YNc(17,cr,2,1,"a",20),u.YNc(18,gr,2,1,"ng-container",23),u.qZA(),u.TgZ(19,"td")(20,"div",24),u._uU(21),u.qZA()(),u.TgZ(22,"td")(23,"button",25),u.NdJ("click",(function(){const t=u.CHM(e).index,i=u.oxw();return u.KtG(i.showEntryInModal(t))})),u._UZ(24,"system-button-icon",26),u.qZA()()()}if(2&e){const e=t.$implicit,i=u.oxw();u.xp6(2),u.Q6J("ngIf",!i.valuesNotClickable),u.xp6(1),u.Q6J("ngIf",i.valuesNotClickable),u.xp6(2),u.Q6J("ngIf",!i.valuesNotClickable),u.xp6(1),u.Q6J("ngIf",i.valuesNotClickable),u.xp6(2),u.Q6J("ngIf",!i.valuesNotClickable),u.xp6(1),u.Q6J("ngIf",i.valuesNotClickable),u.xp6(2),u.Q6J("ngIf",!i.valuesNotClickable),u.xp6(1),u.Q6J("ngIf",i.valuesNotClickable),u.xp6(2),u.Q6J("ngIf",!i.valuesNotClickable),u.xp6(1),u.Q6J("ngIf",i.valuesNotClickable),u.xp6(2),u.Q6J("ngIf",!i.valuesNotClickable),u.xp6(1),u.Q6J("ngIf",i.valuesNotClickable),u.xp6(3),u.Oqu(e.description)}}function mr(e,t){1&e&&(u.TgZ(0,"div",29)(1,"system-illustration-no-records"),u._UZ(2,"system-label",30),u.qZA()())}const pr=function(){return{opacity:0}},hr=function(){return{opacity:.33}};let fr=(()=>{var e;class CRMLogViewerList{constructor(e,t,i,n,l,o){(0,s.Z)(this,"backend",void 0),(0,s.Z)(this,"metadata",void 0),(0,s.Z)(this,"lang",void 0),(0,s.Z)(this,"prefs",void 0),(0,s.Z)(this,"modalservice",void 0),(0,s.Z)(this,"toast",void 0),(0,s.Z)(this,"filter",{loglevel:"",subloglevel:"",pid:"",user_id:"",text:"",transaction_id:"",end:void 0}),(0,s.Z)(this,"period",{type:"",begin:{year:"",month:"",day:"",hour:""},end:{year:"",month:"",day:"",hour:""},duration:""}),(0,s.Z)(this,"load$",void 0),(0,s.Z)(this,"valuesNotClickable",!1),(0,s.Z)(this,"countEntries$",new xa.X(0)),(0,s.Z)(this,"limit",void 0),(0,s.Z)(this,"valueClicked$",new u.vpe),(0,s.Z)(this,"entries",[]),(0,s.Z)(this,"toastId",""),(0,s.Z)(this,"isLoading",!1),(0,s.Z)(this,"isLoaded",!1),(0,s.Z)(this,"isInitialLoaded",!1),this.backend=e,this.metadata=t,this.lang=i,this.prefs=n,this.modalservice=l,this.toast=o}ngOnInit(){this.load$?this.load$.subscribe((()=>{this.loadData()})):this.loadData()}loadData(){if(this.isLoading)return;this.isLoaded=!1,this.isLoading=!0;let e={loglevel:this.filter.loglevel?this.filter.loglevel:void 0,subloglevel:this.filter.subloglevel?this.filter.subloglevel:void 0,pid:this.filter.pid?this.filter.pid:void 0,user_id:this.filter.user_id?this.filter.user_id:void 0,text:this.filter.text?this.filter.text:void 0,transaction_id:this.filter.transaction_id?this.filter.transaction_id:void 0,end:this.filter.end?this.filter.end.utc().format("YYYY-MM-DD HH:mm:ss"):void 0,limit:this.limit};this.toast.clearToast(this.toastId),this.backend.getRequest("admin/crmlog/entries",e).subscribe((e=>{this.entries=e.entries,this.countEntries$.next(e.totalCount),this.isLoading=!1,this.isInitialLoaded=!0}),(e=>{this.toast.sendToast("Error loading log data!","error"),this.isLoading=!1}))}showEntryInModal(e){this.modalservice.openModal("CRMLogViewerModal").subscribe((t=>{t.instance.entry=this.entries[e],t.instance.user_name=this.entries[e].user_name}))}}return e=CRMLogViewerList,(0,s.Z)(CRMLogViewerList,"ɵfac",(function(t){return new(t||e)(u.Y36(h.y),u.Y36(f.Pu),u.Y36(b.d),u.Y36(Ma.z),u.Y36(x.o),u.Y36(v.A))})),(0,s.Z)(CRMLogViewerList,"ɵcmp",u.Xpm({type:e,selectors:[["crm-log-viewer-list"]],inputs:{filter:"filter",period:"period",load$:["load","load$"],valuesNotClickable:"valuesNotClickable",limit:"limit"},outputs:{countEntries$:"countEntries$",valueClicked$:"valueClicked"},decls:25,vars:7,consts:[[1,"slds-section","slds-is-open",3,"ngStyle"],[1,"slds-section__content","slds-m-bottom_medium","slds-grid","slds-grid_vertical",2,"padding-top","0"],["system-to-bottom","",1,"slds-grid","slds-grid_vertical","slds-border--top","slds-scrollable--y",3,"system-overlay-loading-spinner"],[1,"slds-table","slds-table--striped","slds-table--bordered","slds-table--fixed-layout","slds-table--col-bordered","slds-table--striped","slds-table_header-fixed",3,"ngStyle"],[2,"width","7.5rem"],["label","LBL_DATE",1,"slds-th__action"],[1,"slds-text-align--right",2,"width","3.5rem"],[1,"slds-th__action"],[1,"slds-text-align--right",2,"width","17rem"],["label","LBL_TRANSACTION",1,"slds-th__action"],[1,"slds-resizable",2,"width","4.5rem"],["label","LBL_USER",1,"slds-th__action"],[2,"width","3rem"],["label","LBL_LEVEL",1,"slds-th__action"],["label","LBL_SUBLEVEL",1,"slds-th__action"],[1,"slds-resizable",2,"width","100%"],["label","LBL_TEXT",1,"slds-th__action"],[2,"width","2.5rem"],[4,"ngFor","ngForOf"],["class","slds-height_full slds-align--absolute-center",4,"ngIf"],[3,"click",4,"ngIf"],[3,"date",4,"ngIf"],[1,"slds-text-align--right"],[4,"ngIf"],[1,"slds-truncate","slds-text-font_monospace"],[1,"slds-button","slds-button--icon-border","slds-button_icon-small",3,"click"],["icon","expand"],[3,"click"],[3,"date"],[1,"slds-height_full","slds-align--absolute-center"],["label","LBL_NO_RECORDS_FOUND"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"table",3)(4,"thead")(5,"tr")(6,"th",4),u._UZ(7,"system-label",5),u.qZA(),u.TgZ(8,"th",6)(9,"span",7),u._uU(10,"PID"),u.qZA()(),u.TgZ(11,"th",8),u._UZ(12,"system-label",9),u.qZA(),u.TgZ(13,"th",10),u._UZ(14,"system-label",11),u.qZA(),u.TgZ(15,"th",12),u._UZ(16,"system-label",13),u.qZA(),u.TgZ(17,"th",12),u._UZ(18,"system-label",14),u.qZA(),u.TgZ(19,"th",15),u._UZ(20,"system-label",16),u.qZA(),u._UZ(21,"th",17),u.qZA()(),u.TgZ(22,"tbody"),u.YNc(23,ur,25,13,"tr",18),u.qZA()(),u.YNc(24,mr,3,0,"div",19),u.qZA()()()),2&e&&(u.Q6J("ngStyle",t.isInitialLoaded?void 0:u.DdM(5,pr)),u.xp6(2),u.Q6J("system-overlay-loading-spinner",t.isLoading),u.xp6(1),u.Q6J("ngStyle",t.isLoading?u.DdM(6,hr):void 0),u.xp6(20),u.Q6J("ngForOf",t.entries),u.xp6(1),u.Q6J("ngIf",0==t.entries.length))},dependencies:[n.sg,n.O5,n.PC,T.J,Wd.a,Xd.C,L._,w.H,$s._],encapsulation:2})),CRMLogViewerList})(),br=(()=>{var e;class CRMLogViewer{setNow(){this.filter.end=new moment}set filterUser(e){if(!e)return this.filter.user_id="",void(this.filterUserName=void 0);const t=e.split("::");this.filter.user_id=t[0],this.filterUserName=t[1]}get filterUser(){if(this.filter.user_id)return this.filter.user_id+"::"+this.filterUserName}constructor(e,t,i,n,l){(0,s.Z)(this,"lang",void 0),(0,s.Z)(this,"backend",void 0),(0,s.Z)(this,"modal",void 0),(0,s.Z)(this,"toast",void 0),(0,s.Z)(this,"userpreferences",void 0),(0,s.Z)(this,"filter",{loglevel:"",subloglevel:"",pid:"",user_id:"",text:"",transaction_id:"",end:void 0}),(0,s.Z)(this,"filterUserName",void 0),(0,s.Z)(this,"limit",250),(0,s.Z)(this,"load$",new u.vpe),(0,s.Z)(this,"countEntries",void 0),this.lang=e,this.backend=t,this.modal=i,this.toast=n,this.userpreferences=l}canLoad(){return!(this.filter.pid&&!this.filter.pid.match(/\d$/))}buttonLoad(){this.load$.emit()}valueClicked(e,t){switch(e){case"date_entered":this.filter.end=new moment.utc(t).tz(this.userpreferences.toUse.timezone);break;case"transaction_id":this.filter.transaction_id=t;break;case"user":this.filter.user_id=t.user_id,this.filterUserName=t.user_name;break;case"log_level":this.filter.loglevel=t;break;case"log_sublevel":this.filter.subloglevel=t;break;case"pid":this.filter.pid=t.toString()}}truncate(){this.modal.prompt("confirm","Truncate the API log and delete all entries?","Empty the API Log?").subscribe((e=>{e&&this.backend.deleteRequest("admin/crmlog").subscribe((()=>{this.load$.emit()}),(()=>{this.toast.sendToast("Error truncating log","error")}))}))}}return e=CRMLogViewer,(0,s.Z)(CRMLogViewer,"ɵfac",(function(t){return new(t||e)(u.Y36(b.d),u.Y36(h.y),u.Y36(x.o),u.Y36(v.A),u.Y36(Ma.z))})),(0,s.Z)(CRMLogViewer,"ɵcmp",u.Xpm({type:e,selectors:[["ng-component"]],decls:91,vars:17,consts:[[2,"height","100%"],["titlelabel","LBL_CRM_LOG_VIEWER","icon","custom:custom62"],["label","LBL_RECORDS"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_TRUNCATE"],[1,"slds-button","slds-button_brand",3,"click"],["label","LBL_LOAD"],[1,"slds-section","slds-is-open","slds-m-bottom--medium"],[1,"slds-section__content","slds-m-horizontal_medium","slds-m-bottom_medium",2,"padding-top","0","margin-bottom","0"],[1,"slds-grid","slds-grid_vertical-align-center","slds-m-bottom_xxx-small",2,"padding-top","0"],[1,"slds-col","slds-size--5-of-12"],[1,"slds-form-element__label"],["label","LBL_END"],[1,"slds-grid","slds-grid--vertical-align-center","slds-p-right--small"],[1,"slds-grow",3,"ngModel","ngModelChange"],[1,"slds-grow","slds-p-horizontal--xx-small",3,"ngModel","ngModelChange"],["system-title","LBL_NOW","icon","clock","size","x-small",3,"click"],[1,"slds-col","slds-size--1-of-12","slds-p-right_x-small"],["label","LBL_ROWS"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],[1,"slds-form-element","slds-p-right_x-small","slds-size--3-of-12"],["for","pid",1,"slds-form-element__label"],[1,"slds-form-element__control","slds-input-has-icon","slds-input-has-icon_right"],["id","pid","system-trim-input","","type","text","size","5",1,"slds-input","slds-text-align_right",3,"ngModel","ngModelChange"],[1,"slds-button","slds-button_icon","slds-input__icon","slds-input__icon_right",3,"click"],["icon","clear","addclasses","slds-icon-text-light"],[1,"slds-form-element","slds-size--3-of-12"],["for","transaction_id",1,"slds-form-element__label"],["system-trim-input","","id","transaction_id","type","text",1,"slds-input","slds-text-align_right",3,"ngModel","ngModelChange"],[1,"slds-grid","slds-grid_vertical-align-end","slds-m-bottom_xxx-small",2,"padding-top","0"],[1,"slds-p-right_x-small","slds-size--1-of-4"],["module","Users","nameField","user_name",3,"ngModel","ngModelChange"],[1,"slds-form-element","slds-p-right_x-small","slds-size--1-of-4"],["label","LBL_LOGFILE_LEVEL"],[1,"slds-form-element__control"],["value",""],["label","LBL_ALL"],["value","debug"],["label","LBL_LOGLEVEL_DEBUG"],["value","info"],["label","LBL_LOGLEVEL_INFO"],["value","error"],["label","LBL_LOGLEVEL_ERROR"],["value","warn"],["label","LBL_LOGLEVEL_WARN"],["value","security"],["label","LBL_LOGLEVEL_SECURITY"],["value","fatal"],["label","LBL_LOGLEVEL_FATAL"],["value","sql"],["label","LBL_LOGLEVEL_SQL"],["value","slowsql"],["label","LBL_LOGLEVEL_SLOWSQL"],["value","developer"],["label","LBL_LOGLEVEL_DEVELOPER"],[1,"slds-form-element","slds-size--1-of-4","slds-p-right_x-small"],["system-trim-input","","type","text",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-form-element","slds-size--1-of-4"],[3,"load","filter","limit","countEntries$","valueClicked"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0)(1,"workbench-header",1),u._uU(2),u._UZ(3,"system-label",2),u._uU(4,") "),u.TgZ(5,"workbench-header-controls")(6,"button",3),u.NdJ("click",(function(){return t.truncate()})),u._UZ(7,"system-label",4),u.qZA(),u.TgZ(8,"button",5),u.NdJ("click",(function(){return t.buttonLoad()})),u._UZ(9,"system-label",6),u.qZA()()(),u.TgZ(10,"div",7)(11,"div",8)(12,"div",9)(13,"div",10)(14,"label",11),u._UZ(15,"system-label",12),u.qZA(),u.TgZ(16,"div",13)(17,"system-input-date",14),u.NdJ("ngModelChange",(function(e){return t.filter.end=e})),u.qZA(),u.TgZ(18,"system-input-time",15),u.NdJ("ngModelChange",(function(e){return t.filter.end=e})),u.qZA(),u.TgZ(19,"system-utility-icon",16),u.NdJ("click",(function(){return t.setNow()})),u.qZA()()(),u.TgZ(20,"div",17)(21,"label",11),u._UZ(22,"system-label",18),u.qZA(),u.TgZ(23,"div",19)(24,"select",20),u.NdJ("ngModelChange",(function(e){return t.limit=e})),u.TgZ(25,"option"),u._uU(26,"250"),u.qZA(),u.TgZ(27,"option"),u._uU(28,"500"),u.qZA(),u.TgZ(29,"option"),u._uU(30,"1000"),u.qZA()()()(),u.TgZ(31,"div",21)(32,"label",22),u._uU(33),u.qZA(),u.TgZ(34,"div",23)(35,"input",24),u.NdJ("ngModelChange",(function(e){return t.filter.pid=e})),u.qZA(),u.TgZ(36,"button",25),u.NdJ("click",(function(){return t.filter.pid=""})),u._UZ(37,"system-button-icon",26),u.qZA()()(),u.TgZ(38,"div",27)(39,"label",28),u._uU(40),u.qZA(),u.TgZ(41,"div",23)(42,"input",29),u.NdJ("ngModelChange",(function(e){return t.filter.transaction_id=e})),u.qZA(),u.TgZ(43,"button",25),u.NdJ("click",(function(){return t.filter.transaction_id=""})),u._UZ(44,"system-button-icon",26),u.qZA()()()(),u.TgZ(45,"div",30)(46,"div",31)(47,"label",11),u._uU(48),u.qZA(),u.TgZ(49,"system-input-relate",32),u.NdJ("ngModelChange",(function(e){return t.filterUser=e})),u.qZA()(),u.TgZ(50,"div",33)(51,"label",11),u._UZ(52,"system-label",34),u.qZA(),u.TgZ(53,"div",35)(54,"div",19)(55,"select",20),u.NdJ("ngModelChange",(function(e){return t.filter.loglevel=e})),u.TgZ(56,"option",36),u._UZ(57,"system-label",37),u.qZA(),u.TgZ(58,"option",38),u._UZ(59,"system-label",39),u.qZA(),u.TgZ(60,"option",40),u._UZ(61,"system-label",41),u.qZA(),u.TgZ(62,"option",42),u._UZ(63,"system-label",43),u.qZA(),u.TgZ(64,"option",44),u._UZ(65,"system-label",45),u.qZA(),u.TgZ(66,"option",46),u._UZ(67,"system-label",47),u.qZA(),u.TgZ(68,"option",48),u._UZ(69,"system-label",49),u.qZA(),u.TgZ(70,"option",50),u._UZ(71,"system-label",51),u.qZA(),u.TgZ(72,"option",52),u._UZ(73,"system-label",53),u.qZA(),u.TgZ(74,"option",54),u._UZ(75,"system-label",55),u.qZA()()()()(),u.TgZ(76,"div",56)(77,"label",11),u._uU(78,"Sub Log Level"),u.qZA(),u.TgZ(79,"div",23)(80,"input",57),u.NdJ("ngModelChange",(function(e){return t.filter.subloglevel=e})),u.qZA(),u.TgZ(81,"button",25),u.NdJ("click",(function(){return t.filter.subloglevel=""})),u._UZ(82,"system-button-icon",26),u.qZA()()(),u.TgZ(83,"div",58)(84,"label",11),u._uU(85,"Text"),u.qZA(),u.TgZ(86,"div",23)(87,"input",57),u.NdJ("ngModelChange",(function(e){return t.filter.text=e})),u.qZA(),u.TgZ(88,"button",25),u.NdJ("click",(function(){return t.filter.text=""})),u._UZ(89,"system-button-icon",26),u.qZA()()()()()(),u.TgZ(90,"crm-log-viewer-list",59),u.NdJ("countEntries$",(function(e){return t.countEntries=e}))("valueClicked",(function(e){return t.valueClicked(e.type,e.value)})),u.qZA()()),2&e&&(u.xp6(2),u.hij(" (",t.countEntries," "),u.xp6(6),u.uIk("disabled",!t.canLoad()||null),u.xp6(9),u.Q6J("ngModel",t.filter.end),u.xp6(1),u.Q6J("ngModel",t.filter.end),u.xp6(6),u.Q6J("ngModel",t.limit),u.xp6(9),u.Oqu(t.lang.getLabel("LBL_PROCESS_ID")),u.xp6(2),u.Q6J("ngModel",t.filter.pid),u.xp6(5),u.Oqu(t.lang.getLabel("LBL_TRANSACTION")),u.xp6(2),u.Q6J("ngModel",t.filter.transaction_id),u.xp6(6),u.Oqu(t.lang.getLabel("LBL_USER")),u.xp6(1),u.Q6J("ngModel",t.filterUser),u.xp6(6),u.Q6J("ngModel",t.filter.loglevel),u.xp6(25),u.Q6J("ngModel",t.filter.subloglevel),u.xp6(7),u.Q6J("ngModel",t.filter.text),u.xp6(3),u.Q6J("load",t.load$)("filter",t.filter)("limit",t.limit))},dependencies:[l.YN,l.Kr,l.Fj,l.EJ,l.JJ,l.On,T.J,dn.z,Pd.z,$d.H,L._,m.r,jd.t,U.S,Xe,tt,fr],encapsulation:2})),CRMLogViewer})();function Zr(e,t){1&e&&u._UZ(0,"system-spinner",9)}function _r(e,t){if(1&e&&(u.TgZ(0,"div",10),u._uU(1),u.qZA()),2&e){const e=u.oxw();u.xp6(1),u.Oqu(e.entry.fullDescription)}}function yr(e,t){if(1&e&&(u.TgZ(0,"pre",11),u._uU(1),u.qZA()),2&e){const e=u.oxw();u.xp6(1),u.Oqu(e.formattedJson)}}let vr=(()=>{var e;class CRMLogViewerModal{constructor(e,t,i,n){(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"backend",void 0),(0,s.Z)(this,"toast",void 0),(0,s.Z)(this,"prefs",void 0),(0,s.Z)(this,"entry",void 0),(0,s.Z)(this,"user_name",""),(0,s.Z)(this,"isLoaded",!1),(0,s.Z)(this,"isLoading",!0),(0,s.Z)(this,"jsonResponse",void 0),(0,s.Z)(this,"self",void 0),this.language=e,this.backend=t,this.toast=i,this.prefs=n}ngOnInit(){this.entry.fullDescription?this.isLoading=!(this.isLoaded=!0):this.loadFullData()}loadFullData(){this.backend.getRequest("admin/crmlog/entry/"+this.entry.id).subscribe({next:e=>{this.isLoaded=!0,this.isLoading=!1,this.entry.fullDescription=e.entry.description;try{this.jsonResponse=JSON.parse(e.entry.description)}catch(e){this.jsonResponse=!1}},error:()=>{this.toast.sendToast("Error loading entry of log file!","error","Entry "+this.entry.id+" of CRM log couldn´t be fetched.",!1),this.isLoading=!1}})}get formattedJson(){return JSON.stringify(this.jsonResponse,null,"\t")}closeModal(){this.self.destroy()}onModalEscX(){this.closeModal()}}return e=CRMLogViewerModal,(0,s.Z)(CRMLogViewerModal,"ɵfac",(function(t){return new(t||e)(u.Y36(b.d),u.Y36(h.y),u.Y36(v.A),u.Y36(Ma.z))})),(0,s.Z)(CRMLogViewerModal,"ɵcmp",u.Xpm({type:e,selectors:[["ng-component"]],inputs:{entry:"entry",user_name:"user_name"},decls:11,vars:7,consts:[["size","large"],[3,"close"],[3,"date"],[2,"height","100%"],["class","slds-m-top--medium","style","display:block",4,"ngIf"],["class","slds-m-bottom--x-small slds-m-horizontal--x-small slds-text-font_monospace","style","overflow-wrap:break-word",4,"ngIf"],["class","slds-m-bottom--x-small slds-m-horizontal--x-small slds-text-font_monospace","style","overflow-wrap:break-word;white-space: pre-wrap;",4,"ngIf"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CLOSE"],[1,"slds-m-top--medium",2,"display","block"],[1,"slds-m-bottom--x-small","slds-m-horizontal--x-small","slds-text-font_monospace",2,"overflow-wrap","break-word"],[1,"slds-m-bottom--x-small","slds-m-horizontal--x-small","slds-text-font_monospace",2,"overflow-wrap","break-word","white-space","pre-wrap"]],template:function(e,t){1&e&&(u.TgZ(0,"system-modal",0)(1,"system-modal-header",1),u.NdJ("close",(function(){return t.closeModal()})),u._UZ(2,"system-display-datetime",2),u._uU(3),u.qZA(),u.TgZ(4,"system-modal-content",3),u.YNc(5,Zr,1,0,"system-spinner",4),u.YNc(6,_r,2,1,"div",5),u.YNc(7,yr,2,1,"pre",6),u.qZA(),u.TgZ(8,"system-modal-footer")(9,"button",7),u.NdJ("click",(function(){return t.closeModal()})),u._UZ(10,"system-label",8),u.qZA()()()),2&e&&(u.xp6(2),u.Q6J("date",t.entry.date_entered),u.xp6(1),u.lnq(" • ",t.entry.pid," • ",t.user_name," • ",t.entry.log_level,""),u.xp6(2),u.Q6J("ngIf",t.isLoading),u.xp6(1),u.Q6J("ngIf",t.isLoaded&&!t.jsonResponse),u.xp6(1),u.Q6J("ngIf",t.isLoaded&&t.jsonResponse))},dependencies:[n.O5,Wd.a,L._,nt.j,lt.x,ot.p,at.y,ol.W],encapsulation:2})),CRMLogViewerModal})(),xr=(()=>{var e;class CRMLogViewerListModal{constructor(e){(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"filter",void 0),(0,s.Z)(this,"crmLogId",void 0),(0,s.Z)(this,"self",void 0),this.language=e}closeModal(){this.self.destroy()}onModalEscX(){this.closeModal()}}return e=CRMLogViewerListModal,(0,s.Z)(CRMLogViewerListModal,"ɵfac",(function(t){return new(t||e)(u.Y36(b.d))})),(0,s.Z)(CRMLogViewerListModal,"ɵcmp",u.Xpm({type:e,selectors:[["ng-component"]],inputs:{filter:"filter",crmLogId:"crmLogId"},decls:8,vars:3,consts:[["size","large"],[3,"close"],[2,"height","100%"],[3,"filter","valuesNotClickable"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CLOSE"]],template:function(e,t){1&e&&(u.TgZ(0,"system-modal",0)(1,"system-modal-header",1),u.NdJ("close",(function(){return t.closeModal()})),u._uU(2),u.qZA(),u.TgZ(3,"system-modal-content",2),u._UZ(4,"crm-log-viewer-list",3),u.qZA(),u.TgZ(5,"system-modal-footer")(6,"button",4),u.NdJ("click",(function(){return t.closeModal()})),u._UZ(7,"system-label",5),u.qZA()()()),2&e&&(u.xp6(2),u.hij("CRM Log Entries for API Request ",t.crmLogId,""),u.xp6(2),u.Q6J("filter",t.filter)("valuesNotClickable",!0))},dependencies:[L._,nt.j,lt.x,ot.p,at.y,fr],encapsulation:2})),CRMLogViewerListModal})();var Mr=i(4270);function Ar(e,t){if(1&e&&(u.TgZ(0,"option"),u._uU(1),u.qZA()),2&e){const e=t.$implicit;u.xp6(1),u.Oqu(e)}}function Tr(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div",63)(1,"div",64)(2,"div",22)(3,"select",23),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw();return u.KtG(i.logtable=t)})),u.TgZ(4,"option"),u._uU(5,"sysapilog"),u.qZA(),u.YNc(6,Ar,2,1,"option",30),u.qZA()()()()}if(2&e){const e=u.oxw();u.xp6(3),u.Q6J("ngModel",e.logtable),u.xp6(3),u.Q6J("ngForOf",e.logtables)}}function Lr(e,t){if(1&e&&(u.TgZ(0,"option"),u._uU(1),u.qZA()),2&e){const e=t.$implicit;u.xp6(1),u.Oqu(e)}}const qr=function(e){return{"slds-theme--error":e}};function Cr(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"tr",65)(1,"td"),u._UZ(2,"system-display-datetime",66),u.qZA(),u.TgZ(3,"td")(4,"div",67),u._uU(5),u.qZA()(),u.TgZ(6,"td")(7,"div",67),u._uU(8),u.qZA()(),u.TgZ(9,"td")(10,"div",67)(11,"a",68),u.NdJ("click",(function(){const t=u.CHM(e).$implicit,i=u.oxw();return u.KtG(i.valueClicked("route",t.route))})),u._uU(12),u.qZA()()(),u.TgZ(13,"td",69)(14,"div",67)(15,"a",68),u.NdJ("click",(function(){const t=u.CHM(e).$implicit,i=u.oxw();return u.KtG(i.valueClicked("method",t.method))})),u._uU(16),u.qZA()()(),u.TgZ(17,"td",69),u._uU(18),u.qZA(),u.TgZ(19,"td",70)(20,"a",68),u.NdJ("click",(function(){const t=u.CHM(e).$implicit,i=u.oxw();return u.KtG(i.valueClicked("status",t.http_status_code))})),u._uU(21),u.qZA()(),u.TgZ(22,"td",69),u._UZ(23,"system-display-number",71),u.qZA(),u.TgZ(24,"td")(25,"div",67),u._uU(26),u.qZA()(),u.TgZ(27,"td")(28,"div",67),u._uU(29),u.qZA()(),u.TgZ(30,"td")(31,"button",72),u.NdJ("click",(function(){const t=u.CHM(e).$implicit,i=u.oxw();return u.KtG(i.showEntryInModal(t))})),u._UZ(32,"system-button-icon",73),u.qZA()()()}if(2&e){const e=t.$implicit;u.Q6J("ngClass",u.VKq(13,qr,e.http_status_code<200||e.http_status_code>=300)),u.xp6(2),u.Q6J("date",e.date_entered),u.xp6(3),u.Oqu(e.user_name),u.xp6(3),u.Oqu(e.transaction_id),u.xp6(4),u.Oqu(e.route),u.xp6(4),u.Oqu(e.method),u.xp6(2),u.Oqu(e.direction),u.xp6(3),u.Oqu(e.http_status_code),u.xp6(2),u.Q6J("number",e.runtime),u.xp6(3),u.Oqu(e.request_args),u.xp6(3),u.Oqu(e.request_params),u.xp6(3),u.Q6J("icon","expand")("size","medium")}}function Jr(e,t){1&e&&(u.TgZ(0,"div",74)(1,"system-illustration-no-records"),u._UZ(2,"system-label",75),u.qZA()())}let Nr=(()=>{var e;class APIlogViewer{set filterUser(e){if(!e)return this.filter.userId="",void(this.filterUserName=void 0);const t=e.split("::");this.filter.userId=t[0],this.filterUserName=t[1]}get filterUser(){if(this.filter.userId)return this.filter.userId+"::"+this.filterUserName}get logtable(){return this._logtable}set logtable(e){e!=this._logtable&&(this._logtable=e,this.entries=[])}constructor(e,t,i){(0,s.Z)(this,"backend",void 0),(0,s.Z)(this,"modal",void 0),(0,s.Z)(this,"toast",void 0),(0,s.Z)(this,"methods",["CONNECT","DELETE","GET","HEAD","OPTIONS","POST","PATCH","PUT","SOAP","TRACE"]),(0,s.Z)(this,"limit","250"),(0,s.Z)(this,"entries",[]),(0,s.Z)(this,"filter",{method:"",session_id:"",userId:"",term:"",ip:"",route:"",status:"",direction:""}),(0,s.Z)(this,"filterUserName",void 0),(0,s.Z)(this,"dateEnd",void 0),(0,s.Z)(this,"isLoading",!1),(0,s.Z)(this,"logtables",[]),(0,s.Z)(this,"_logtable","sysapilog"),this.backend=e,this.modal=t,this.toast=i,this.getAPILogTables()}getAPILogTables(){this.backend.getRequest("admin/apilog/logtables").subscribe({next:e=>{this.logtables=e}})}setNow(){this.dateEnd=new moment}loadData(){if(!this.isLoading){this.isLoading=!0;let e={limit:this.limit,logtable:this.logtable};this.filter.method&&(e.method=this.filter.method),this.filter.route&&(e.route=this.filter.route),this.filter.userId&&(e.user_id=this.filter.userId),this.filter.term&&(e.filter=this.filter.term),this.filter.ip&&(e.ip=this.filter.ip),this.filter.status&&(e.status=this.filter.status),this.filter.session_id&&(e.session_id=this.filter.session_id),this.filter.direction&&(e.direction=this.filter.direction),this.dateEnd&&(e.end=this.dateEnd?.utc().format("YYYY-MM-DD HH:mm:ss")),this.backend.getRequest("admin/apilog",e).subscribe({next:e=>{this.entries=e.entries,this.isLoading=!1},error:e=>{this.toast.sendToast("Error loading log data!","error"),this.isLoading=!1}})}}buttonLoad(){this.loadData()}truncate(){this.modal.prompt("confirm","Truncate the API log and delete all entries?","Truncate API Log").subscribe((e=>{e&&(this.backend.deleteRequest("admin/apilog").subscribe((()=>{this.isLoading=!1,this.loadData()}),(()=>{this.toast.sendToast("Error truncating log","error"),this.isLoading=!1})),this.isLoading=!0)}))}showEntryInModal(e){this.modal.openModal("APIlogViewerModal").subscribe((t=>{t.instance.entry=e,t.instance.logtable=this.logtable}))}showCRMlog(e){this.modal.openModal("CRMLogViewerListModal").subscribe((t=>{t.instance.filter={transaction_id:e}}))}valueClicked(e,t){switch(e){case"route":this.filter.route=t;break;case"method":this.filter.method=t;break;case"status":this.filter.status=t;break;case"dir":this.filter.direction=t}}}return e=APIlogViewer,(0,s.Z)(APIlogViewer,"ɵfac",(function(t){return new(t||e)(u.Y36(h.y),u.Y36(x.o),u.Y36(v.A))})),(0,s.Z)(APIlogViewer,"ɵcmp",u.Xpm({type:e,selectors:[["ng-component"]],decls:116,vars:18,consts:[["titlelabel","LBL_API_LOG_VIEWER","icon","custom:custom62"],["label","LBL_RECORDS"],[1,"slds-grid","slds-grid--vertical-align-center"],["class","slds-form-element slds-m-right--small",4,"ngIf"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_LOAD"],["system-to-bottom-noscroll","",3,"system-overlay-loading-spinner"],[1,"slds-section","slds-is-open","slds-p-around--xx-small"],[1,"slds-grid","slds-grid--vertical-align-end","slds-gutters_direct-xxx-small"],[1,"slds-col","slds-size--1-of-4"],[1,"slds-form-element__label"],["label","LBL_ROUTE"],[1,"slds-form-element__control","slds-input-has-icon","slds-input-has-icon_right"],["type","text","system-trim-input","",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-button","slds-button_icon","slds-input__icon","slds-input__icon_right",3,"click"],["icon","clear","addclasses","slds-icon-text-light"],["label","LBL_FILTER"],["label","LBL_END"],[1,"slds-grow",3,"ngModel","ngModelChange"],[1,"slds-grow","slds-p-horizontal--xx-small",3,"ngModel","ngModelChange"],["system-title","LBL_NOW","icon","clock","size","x-small",3,"click"],["label","LBL_ROWS"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],[1,"slds-grid","slds-gutters_direct-xxx-small"],[1,"slds-col","slds-size--1-of-8"],["label","LBL_USER"],["module","Users","nameField","user_name",3,"ngModel","ngModelChange"],["label","LBL_METHOD"],["value",""],[4,"ngFor","ngForOf"],["label","LBL_DIRECTION"],["value","I"],["label","LBL_DIRECTION_I"],["value","O"],["label","LBL_DIRECTION_O"],["label","LBL_STATUS"],["type","text","system-trim-input","","size","3",1,"slds-input",3,"ngModel","ngModelChange"],["label","LBL_IP_ADDRESS"],["label","LBL_SESSION_ID"],["system-to-bottom","",1,"slds-border--top"],[1,"slds-table","slds-table--bordered","slds-table--fixed-layout","slds-table--col-bordered","slds-no-row-hover","slds-table_header-fixed"],[2,"width","8rem"],["label","LBL_DATE",1,"slds-th__action"],[1,"slds-resizable",2,"width","8rem"],["label","LBL_USER",1,"slds-th__action"],["label","LBL_TRANSACTION_ID",1,"slds-th__action"],[1,"slds-resizable"],["label","LBL_ROUTE",1,"slds-th__action"],[2,"width","4rem"],["label","LBL_METHOD",1,"slds-th__action"],[1,"slds-text-align_center",2,"width","2rem"],["icon","signpost","size","x-small"],[2,"width","3rem"],["label","LBL_STATUS",1,"slds-th__action"],[1,"slds-text-align_center",2,"width","3rem"],["icon","clock","size","x-small"],["label","LBL_ROUTE_ARGUMENTS",1,"slds-th__action"],["label","LBL_URL_PARAMETERS",1,"slds-th__action"],[2,"width","2.5rem"],["tbody",""],[3,"ngClass",4,"ngFor","ngForOf"],["class","slds-height_full slds-align--absolute-center",4,"ngIf"],[1,"slds-form-element","slds-m-right--small"],[1,"slds-form-element__control"],[3,"ngClass"],[3,"date"],[1,"slds-truncate"],[3,"click"],[1,"slds-text-align--center"],[1,"slds-text-align--right","status"],["system-display-number-nodigits","",3,"number"],[1,"slds-button","slds-button--icon-border","slds-button_icon-small",3,"click"],[3,"icon","size"],[1,"slds-height_full","slds-align--absolute-center"],["label","LBL_NO_RECORDS_FOUND"]],template:function(e,t){1&e&&(u.TgZ(0,"workbench-header",0),u._uU(1),u._UZ(2,"system-label",1),u._uU(3,") "),u.TgZ(4,"workbench-header-controls")(5,"div",2),u.YNc(6,Tr,7,2,"div",3),u.TgZ(7,"button",4),u.NdJ("click",(function(){return t.buttonLoad()})),u._UZ(8,"system-label",5),u.qZA()()()(),u.TgZ(9,"div",6)(10,"div",7)(11,"div",8)(12,"div",9)(13,"label",10),u._UZ(14,"system-label",11),u.qZA(),u.TgZ(15,"div",12)(16,"input",13),u.NdJ("ngModelChange",(function(e){return t.filter.route=e})),u.qZA(),u.TgZ(17,"button",14),u.NdJ("click",(function(){return t.filter.route=""})),u._UZ(18,"system-button-icon",15),u.qZA()()(),u.TgZ(19,"div",9)(20,"label",10),u._UZ(21,"system-label",16),u.qZA(),u.TgZ(22,"div",12)(23,"input",13),u.NdJ("ngModelChange",(function(e){return t.filter.term=e})),u.qZA(),u.TgZ(24,"button",14),u.NdJ("click",(function(){return t.filter.term=""})),u._UZ(25,"system-button-icon",15),u.qZA()()(),u.TgZ(26,"div",9)(27,"label",10),u._UZ(28,"system-label",17),u.qZA(),u.TgZ(29,"div",2)(30,"system-input-date",18),u.NdJ("ngModelChange",(function(e){return t.dateEnd=e})),u.qZA(),u.TgZ(31,"system-input-time",19),u.NdJ("ngModelChange",(function(e){return t.dateEnd=e})),u.qZA(),u.TgZ(32,"system-utility-icon",20),u.NdJ("click",(function(){return t.setNow()})),u.qZA()()(),u.TgZ(33,"div",9)(34,"label",10),u._UZ(35,"system-label",21),u.qZA(),u.TgZ(36,"div",22)(37,"select",23),u.NdJ("ngModelChange",(function(e){return t.limit=e})),u.TgZ(38,"option"),u._uU(39,"250"),u.qZA(),u.TgZ(40,"option"),u._uU(41,"500"),u.qZA(),u.TgZ(42,"option"),u._uU(43,"1000"),u.qZA()()()()(),u.TgZ(44,"div",24)(45,"div",25)(46,"label",10),u._UZ(47,"system-label",26),u.qZA(),u.TgZ(48,"system-input-relate",27),u.NdJ("ngModelChange",(function(e){return t.filterUser=e})),u.qZA()(),u.TgZ(49,"div",25)(50,"label",10),u._UZ(51,"system-label",28),u.qZA(),u.TgZ(52,"div",22)(53,"select",23),u.NdJ("ngModelChange",(function(e){return t.filter.method=e})),u._UZ(54,"option",29),u.YNc(55,Lr,2,1,"option",30),u.qZA()()(),u.TgZ(56,"div",25)(57,"label",10),u._UZ(58,"system-label",31),u.qZA(),u.TgZ(59,"div",22)(60,"select",23),u.NdJ("ngModelChange",(function(e){return t.filter.direction=e})),u._UZ(61,"option"),u.TgZ(62,"option",32),u._UZ(63,"system-label",33),u.qZA(),u.TgZ(64,"option",34),u._UZ(65,"system-label",35),u.qZA()()()(),u.TgZ(66,"div",25)(67,"label",10),u._UZ(68,"system-label",36),u.qZA(),u.TgZ(69,"div",12)(70,"input",37),u.NdJ("ngModelChange",(function(e){return t.filter.status=e})),u.qZA(),u.TgZ(71,"button",14),u.NdJ("click",(function(){return t.filter.status=""})),u._UZ(72,"system-button-icon",15),u.qZA()()(),u.TgZ(73,"div",9)(74,"label",10),u._UZ(75,"system-label",38),u.qZA(),u.TgZ(76,"div",12)(77,"input",13),u.NdJ("ngModelChange",(function(e){return t.filter.ip=e})),u.qZA(),u.TgZ(78,"button",14),u.NdJ("click",(function(){return t.filter.ip=""})),u._UZ(79,"system-button-icon",15),u.qZA()()(),u.TgZ(80,"div",9)(81,"label",10),u._UZ(82,"system-label",39),u.qZA(),u.TgZ(83,"div",12)(84,"input",13),u.NdJ("ngModelChange",(function(e){return t.filter.session_id=e})),u.qZA(),u.TgZ(85,"button",14),u.NdJ("click",(function(){return t.filter.session_id=""})),u._UZ(86,"system-button-icon",15),u.qZA()()()()(),u.TgZ(87,"div",40)(88,"table",41)(89,"thead")(90,"tr")(91,"th",42),u._UZ(92,"system-label",43),u.qZA(),u.TgZ(93,"th",44),u._UZ(94,"system-label",45),u.qZA(),u.TgZ(95,"th",44),u._UZ(96,"system-label",46),u.qZA(),u.TgZ(97,"th",47),u._UZ(98,"system-label",48),u.qZA(),u.TgZ(99,"th",49),u._UZ(100,"system-label",50),u.qZA(),u.TgZ(101,"th",51),u._UZ(102,"system-utility-icon",52),u.qZA(),u.TgZ(103,"th",53),u._UZ(104,"system-label",54),u.qZA(),u.TgZ(105,"th",55),u._UZ(106,"system-utility-icon",56),u.qZA(),u.TgZ(107,"th",47),u._UZ(108,"system-label",57),u.qZA(),u.TgZ(109,"th",47),u._UZ(110,"system-label",58),u.qZA(),u._UZ(111,"th",59),u.qZA()(),u.TgZ(112,"tbody",null,60),u.YNc(114,Cr,33,15,"tr",61),u.qZA()(),u.YNc(115,Jr,3,0,"div",62),u.qZA()()),2&e&&(u.xp6(1),u.hij(" (",t.entries.length," "),u.xp6(5),u.Q6J("ngIf",t.logtables.length>0),u.xp6(1),u.Q6J("disabled",t.isLoading),u.xp6(2),u.Q6J("system-overlay-loading-spinner",t.isLoading),u.xp6(7),u.Q6J("ngModel",t.filter.route),u.xp6(7),u.Q6J("ngModel",t.filter.term),u.xp6(7),u.Q6J("ngModel",t.dateEnd),u.xp6(1),u.Q6J("ngModel",t.dateEnd),u.xp6(6),u.Q6J("ngModel",t.limit),u.xp6(11),u.Q6J("ngModel",t.filterUser),u.xp6(5),u.Q6J("ngModel",t.filter.method),u.xp6(2),u.Q6J("ngForOf",t.methods),u.xp6(5),u.Q6J("ngModel",t.filter.direction),u.xp6(10),u.Q6J("ngModel",t.filter.status),u.xp6(7),u.Q6J("ngModel",t.filter.ip),u.xp6(7),u.Q6J("ngModel",t.filter.session_id),u.xp6(30),u.Q6J("ngForOf",t.entries),u.xp6(1),u.Q6J("ngIf",!t.isLoading&&0==t.entries.length))},dependencies:[n.mk,n.sg,n.O5,l.YN,l.Kr,l.Fj,l.EJ,l.JJ,l.On,T.J,Wd.a,Mr.G,Xd.C,dn.z,Pd.z,$d.H,L._,m.r,w.H,C.t,jd.t,$s._,U.S,Xe,tt],encapsulation:2})),APIlogViewer})();var kr=i(2067);function wr(e,t){1&e&&u._UZ(0,"system-spinner",7)}const Ur=function(e){return{"slds-is-active":e}};function Er(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"li",10),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw(2);return u.KtG(t.activeTab="post")})),u.TgZ(1,"a",11),u._UZ(2,"system-label",44),u.qZA()()}if(2&e){const e=u.oxw(2);u.Q6J("ngClass",u.VKq(1,Ur,"post"==e.activeTab))}}function Dr(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"li",10),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw(2);return u.KtG(t.activeTab="response")})),u.TgZ(1,"a",11),u._UZ(2,"system-label",45),u.qZA()()}if(2&e){const e=u.oxw(2);u.Q6J("ngClass",u.VKq(1,Ur,"response"==e.activeTab))}}function Or(e,t){if(1&e&&(u.TgZ(0,"tr",48)(1,"td")(2,"div",19),u._uU(3),u.qZA()(),u.TgZ(4,"td")(5,"div",19),u._uU(6),u.qZA()()()),2&e){const e=t.$implicit;u.xp6(3),u.Oqu(e.name),u.xp6(3),u.Oqu(e.value)}}function Ir(e,t){if(1&e&&(u.TgZ(0,"div",46)(1,"h3",39),u._UZ(2,"system-label",47),u.qZA(),u.TgZ(3,"table",16)(4,"thead")(5,"tr",17)(6,"th",18)(7,"div",19),u._UZ(8,"system-label",20),u.qZA()(),u.TgZ(9,"th",21)(10,"div",19),u._UZ(11,"system-label",22),u.qZA()()()(),u.TgZ(12,"tbody"),u.YNc(13,Or,7,2,"tr",41),u.qZA()()()),2&e){const e=u.oxw(2);u.xp6(13),u.Q6J("ngForOf",e.requestArguments)}}function Qr(e,t){if(1&e&&(u.TgZ(0,"tr",48)(1,"td")(2,"div",19),u._uU(3),u.qZA()(),u.TgZ(4,"td")(5,"div",19),u._uU(6),u.qZA()()()),2&e){const e=t.$implicit;u.xp6(3),u.Oqu(e.name),u.xp6(3),u.Oqu(e.value)}}function Sr(e,t){if(1&e&&(u.TgZ(0,"div",46)(1,"h3",39),u._UZ(2,"system-label",49),u.qZA(),u.TgZ(3,"table",16)(4,"thead")(5,"tr",17)(6,"th",18)(7,"div",19),u._UZ(8,"system-label",20),u.qZA()(),u.TgZ(9,"th",21)(10,"div",19),u._UZ(11,"system-label",22),u.qZA()()()(),u.TgZ(12,"tbody"),u.YNc(13,Qr,7,2,"tr",41),u.qZA()()()),2&e){const e=u.oxw(2);u.xp6(13),u.Q6J("ngForOf",e.requestParams)}}function Br(e,t){if(1&e&&(u.TgZ(0,"tr",48)(1,"td")(2,"div",19),u._uU(3),u.qZA()(),u.TgZ(4,"td")(5,"div",19),u._uU(6),u.qZA()()()),2&e){const e=t.$implicit;u.xp6(3),u.Oqu(e.name),u.xp6(3),u.Oqu(e.value)}}function Fr(e,t){if(1&e&&(u.TgZ(0,"tr",48)(1,"td")(2,"div",19),u._uU(3),u.qZA()(),u.TgZ(4,"td")(5,"div",19),u._uU(6),u.qZA()()()),2&e){const e=t.$implicit;u.xp6(3),u.Oqu(e.name),u.xp6(3),u.Oqu(e.value)}}function Yr(e,t){if(1&e&&(u.ynx(0),u.TgZ(1,"h3",39),u._UZ(2,"system-label",50),u.qZA(),u.TgZ(3,"table",16)(4,"thead")(5,"tr",17)(6,"th",18)(7,"div",19),u._UZ(8,"system-label",20),u.qZA()(),u.TgZ(9,"th",21)(10,"div",19),u._UZ(11,"system-label",22),u.qZA()()()(),u.TgZ(12,"tbody"),u.YNc(13,Fr,7,2,"tr",41),u.qZA()(),u.BQk()),2&e){const e=u.oxw(2);u.xp6(13),u.Q6J("ngForOf",e.responseHeaders)}}function Rr(e,t){if(1&e&&(u.TgZ(0,"tr",48)(1,"td")(2,"div",19),u._uU(3),u.qZA()(),u.TgZ(4,"td")(5,"div",19),u._uU(6),u.qZA()()()),2&e){const e=t.$implicit;u.xp6(3),u.Oqu(e.name),u.xp6(3),u.Oqu(e.value)}}function Gr(e,t){if(1&e&&(u.TgZ(0,"div")(1,"table",16)(2,"thead")(3,"tr",17)(4,"th",18)(5,"div",19),u._UZ(6,"system-label",20),u.qZA()(),u.TgZ(7,"th",21)(8,"div",19),u._UZ(9,"system-label",22),u.qZA()()()(),u.TgZ(10,"tbody"),u.YNc(11,Rr,7,2,"tr",41),u.qZA()()()),2&e){const e=u.oxw(3);u.xp6(11),u.Q6J("ngForOf",e.formattedRequest())}}function Hr(e,t){if(1&e&&(u.TgZ(0,"div",54)(1,"pre",55),u._uU(2),u.qZA()()),2&e){const e=u.oxw(3);u.xp6(2),u.Oqu(e.formattedRequest())}}const Kr=function(e){return{"slds-hide":e}};function zr(e,t){if(1&e&&(u.TgZ(0,"div",15),u.ynx(1,51),u.YNc(2,Gr,12,1,"div",52),u.YNc(3,Hr,3,1,"div",53),u.BQk(),u.qZA()),2&e){const e=u.oxw(2);u.Q6J("ngClass",u.VKq(3,Kr,"post"!=e.activeTab)),u.xp6(1),u.Q6J("ngSwitch",e.determineContentType(e._requestheaders)),u.xp6(1),u.Q6J("ngSwitchCase","application/x-www-form-urlencoded")}}function Vr(e,t){1&e&&(u.TgZ(0,"div"),u._uU(1," url encoded "),u.qZA())}function Pr(e,t){if(1&e&&(u.TgZ(0,"div",54)(1,"pre",55),u._uU(2),u.qZA()()),2&e){const e=u.oxw(3);u.xp6(2),u.Oqu(e.formattedResponse())}}function $r(e,t){if(1&e&&(u.TgZ(0,"div",15),u.ynx(1,51),u.YNc(2,Vr,2,0,"div",52),u.YNc(3,Pr,3,1,"div",53),u.BQk(),u.qZA()),2&e){const e=u.oxw(2);u.Q6J("ngClass",u.VKq(3,Kr,"response"!=e.activeTab)),u.xp6(1),u.Q6J("ngSwitch",e.determineContentType(e._responseheaders)),u.xp6(1),u.Q6J("ngSwitchCase","application/x-www-form-urlencoded")}}function jr(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div",8)(1,"ul",9)(2,"li",10),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw();return u.KtG(t.activeTab="record")})),u.TgZ(3,"a",11),u._UZ(4,"system-label",12),u.qZA()(),u.TgZ(5,"li",10),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw();return u.KtG(t.activeTab="headers")})),u.TgZ(6,"a",11),u._UZ(7,"system-label",13),u.qZA()(),u.YNc(8,Er,3,3,"li",14),u.YNc(9,Dr,3,3,"li",14),u.qZA(),u.TgZ(10,"div",15)(11,"table",16)(12,"thead")(13,"tr",17)(14,"th",18)(15,"div",19),u._UZ(16,"system-label",20),u.qZA()(),u.TgZ(17,"th",21)(18,"div",19),u._UZ(19,"system-label",22),u.qZA()()()(),u.TgZ(20,"tbody")(21,"tr")(22,"td"),u._UZ(23,"system-label",23),u.qZA(),u.TgZ(24,"td"),u._uU(25),u.qZA()(),u.TgZ(26,"tr")(27,"td"),u._UZ(28,"system-label",24),u.qZA(),u.TgZ(29,"td"),u._uU(30),u.qZA()(),u.TgZ(31,"tr")(32,"td"),u._UZ(33,"system-label",25),u.qZA(),u.TgZ(34,"td"),u._uU(35),u.qZA()(),u.TgZ(36,"tr")(37,"td"),u._UZ(38,"system-label",26),u.qZA(),u.TgZ(39,"td"),u._UZ(40,"system-display-datetime",27),u.qZA()(),u.TgZ(41,"tr")(42,"td"),u._UZ(43,"system-label",28),u.qZA(),u.TgZ(44,"td"),u._uU(45),u.qZA()(),u.TgZ(46,"tr")(47,"td"),u._UZ(48,"system-label",29),u.qZA(),u.TgZ(49,"td"),u._uU(50),u.qZA()(),u.TgZ(51,"tr")(52,"td"),u._UZ(53,"system-label",30),u.qZA(),u.TgZ(54,"td"),u._uU(55),u.qZA()(),u.TgZ(56,"tr")(57,"td"),u._UZ(58,"system-label",31),u.qZA(),u.TgZ(59,"td"),u._uU(60),u.qZA()(),u.TgZ(61,"tr")(62,"td"),u._UZ(63,"system-label",32),u.qZA(),u.TgZ(64,"td"),u._uU(65),u.qZA()(),u.TgZ(66,"tr")(67,"td"),u._UZ(68,"system-label",33),u.qZA(),u.TgZ(69,"td"),u._uU(70),u.qZA()(),u.TgZ(71,"tr")(72,"td"),u._UZ(73,"system-label",34),u.qZA(),u.TgZ(74,"td",35),u._uU(75),u.qZA()(),u.TgZ(76,"tr")(77,"td"),u._UZ(78,"system-label",36),u.qZA(),u.TgZ(79,"td"),u._uU(80),u.qZA()(),u.TgZ(81,"tr")(82,"td"),u._UZ(83,"system-label",37),u.qZA(),u.TgZ(84,"td"),u._uU(85),u.qZA()()()(),u.YNc(86,Ir,14,1,"div",38),u.YNc(87,Sr,14,1,"div",38),u.qZA(),u.TgZ(88,"div",15)(89,"h3",39),u._UZ(90,"system-label",40),u.qZA(),u.TgZ(91,"table",16)(92,"thead")(93,"tr",17)(94,"th",18)(95,"div",19),u._UZ(96,"system-label",20),u.qZA()(),u.TgZ(97,"th",21)(98,"div",19),u._UZ(99,"system-label",22),u.qZA()()()(),u.TgZ(100,"tbody"),u.YNc(101,Br,7,2,"tr",41),u.qZA()(),u.YNc(102,Yr,14,1,"ng-container",42),u.qZA(),u.YNc(103,zr,4,5,"div",43),u.YNc(104,$r,4,5,"div",43),u.qZA()}if(2&e){const e=u.oxw();u.xp6(2),u.Q6J("ngClass",u.VKq(25,Ur,"record"==e.activeTab)),u.xp6(3),u.Q6J("ngClass",u.VKq(27,Ur,"headers"==e.activeTab)),u.xp6(3),u.Q6J("ngIf",e.hasRequest),u.xp6(1),u.Q6J("ngIf",e.hasResponse),u.xp6(1),u.Q6J("ngClass",u.VKq(29,Kr,"record"!=e.activeTab)),u.xp6(15),u.Oqu(e.entry.id),u.xp6(5),u.Oqu(e.record.transaction_id),u.xp6(5),u.Oqu(e.record.session_id),u.xp6(5),u.Q6J("date",e.entry.date_entered),u.xp6(5),u.Oqu(e.entry.direction),u.xp6(5),u.Oqu(e.entry.http_status_code),u.xp6(5),u.Oqu(e.entry.method),u.xp6(5),u.Oqu(e.entry.runtime),u.xp6(5),u.Oqu(e.entry.user_name),u.xp6(5),u.Oqu(e.entry.route),u.xp6(5),u.Oqu(e.record.url),u.xp6(5),u.Oqu(e.record.ip),u.xp6(5),u.Oqu(e.record.response_error),u.xp6(1),u.Q6J("ngIf",e.requestArguments.length>0),u.xp6(1),u.Q6J("ngIf",e.requestParams.length>0),u.xp6(1),u.Q6J("ngClass",u.VKq(31,Kr,"headers"!=e.activeTab)),u.xp6(13),u.Q6J("ngForOf",e.requestHeaders),u.xp6(1),u.Q6J("ngIf",e.record.response_headers),u.xp6(1),u.Q6J("ngIf",e.hasRequest),u.xp6(1),u.Q6J("ngIf",e.hasResponse)}}let Wr=(()=>{var e;class APIlogViewerModal{constructor(e,t,i,n){(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"backend",void 0),(0,s.Z)(this,"toast",void 0),(0,s.Z)(this,"libloader",void 0),(0,s.Z)(this,"self",void 0),(0,s.Z)(this,"entry",void 0),(0,s.Z)(this,"record",{}),(0,s.Z)(this,"_requestheaders",{}),(0,s.Z)(this,"_responseheaders",{}),(0,s.Z)(this,"isLoading",!0),(0,s.Z)(this,"logtable","sysapilog"),(0,s.Z)(this,"beautifyenabled",!1),(0,s.Z)(this,"activeTab","record"),this.language=e,this.backend=t,this.toast=i,this.libloader=n,this.libloader.loadLib("jsbeautify").subscribe((e=>{this.beautifyenabled=!0}))}ngOnInit(){this.loadFullData()}loadFullData(){this.isLoading=!0,this.backend.getRequest(`admin/apilog/${this.entry.id}`,{logtable:this.logtable}).subscribe({next:e=>{this.isLoading=!1,this.record=e,this.setRequestHeaders(),this.setResponseHeaders()},error:e=>{this.toast.sendToast("Error loading entry of log file!","error","Entry "+this.entry.id+" of REST log couldn´t be fetched.",!1),this.isLoading=!1,this.close()}})}setRequestHeaders(){try{let e=JSON.parse(this.record.request_headers);e&&(this._requestheaders=e)}catch(e){this._requestheaders={}}}setResponseHeaders(){try{let e=JSON.parse(this.record.response_headers);e&&(this._responseheaders=e)}catch(e){this._responseheaders={}}}get requestHeaders(){if(this.record.request_headers)try{let e=[],t=JSON.parse(this.record.request_headers);for(let i in t)e.push({name:i,value:t[i]});return e}catch(e){return[]}return[]}get responseHeaders(){if(this.record.response_headers)try{let e=[],t=JSON.parse(this.record.response_headers);for(let i in t)e.push({name:i,value:t[i]});return e}catch(e){return[]}return[]}get requestArguments(){if(this.record.request_args)try{let e=[],t=JSON.parse(this.record.request_args);for(let i in t)e.push({name:i,value:t[i]});return e}catch(e){return[]}return[]}get requestParams(){if(this.record.request_params)try{let e=[],t=JSON.parse(this.record.request_params);for(let i in t)e.push({name:i,value:t[i]});return e}catch(e){return[]}return[]}get hasRequest(){return this.record.request_body&&"{}"!=this.record.request_body}get hasResponse(){return this.record.response_body&&"{}"!=this.record.response_body}close(){this.self.destroy()}determineContentType(e){let t="application/json";for(let i in e)if("content-type"==i.toLowerCase()){t=(_.isArray(e[i])?e[i][0].toLowerCase().trim():e[i].toLowerCase().trim()).split(";")[0].trim();break}return t}formattedResponse(){return this.getFormattedBody(this.determineContentType(this._responseheaders),this.record.response_body)}formattedRequest(){return this.getFormattedBody(this.determineContentType(this._requestheaders),this.record.request_body)}getFormattedBody(e,t){switch(e){case"application/json":return JSON.stringify(JSON.parse(t),null,"\t");case"application/x-ndjson":let e=[],i=t.split("\n");for(let t of i)t&&e.push(JSON.stringify(JSON.parse(t),null,"\t"));return e.join("\r\n\r\n");case"application/x-www-form-urlencoded":let s=[],n=t.split("&");for(let e of n){let t=e.split("=");s.push({name:t[0],value:decodeURIComponent(t[1].replaceAll("+"," "))})}return s;case"text/xml":case"application/xml":return html_beautify(t,{indent_size:4,indent_char:" ",indent_with_tabs:!1,end_with_newline:!1,indent_level:0,preserve_newlines:!0,max_preserve_newlines:10,space_in_paren:!1,space_in_empty_paren:!1,unindent_chained_methods:!1,break_chained_methods:!1,keep_array_indentation:!1,unescape_strings:!1,wrap_line_length:100,e4x:!1,comma_first:!1,operator_position:"before-newline",indent_empty_lines:!1,templating:["auto"]});default:return t}}formatted(e){try{return JSON.stringify(JSON.parse(this.record[e]),null,"\t")}catch(t){return this.record[e]}}}return e=APIlogViewerModal,(0,s.Z)(APIlogViewerModal,"ɵfac",(function(t){return new(t||e)(u.Y36(b.d),u.Y36(h.y),u.Y36(v.A),u.Y36(kr.$))})),(0,s.Z)(APIlogViewerModal,"ɵcmp",u.Xpm({type:e,selectors:[["ng-component"]],inputs:{entry:"entry"},decls:9,vars:3,consts:[["size","large"],[3,"close"],["system-modal-content-grow","","margin","none"],["class","slds-m-top--medium","style","display:block",4,"ngIf"],["class","slds-tabs_default",4,"ngIf"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CLOSE"],[1,"slds-m-top--medium",2,"display","block"],[1,"slds-tabs_default"],["role","tablist",1,"slds-tabs_default__nav"],[1,"slds-tabs_default__item",3,"ngClass","click"],[1,"slds-tabs_default__link"],["label","LBL_RECORD"],["label","LBL_HEADERS"],["class","slds-tabs_default__item",3,"ngClass","click",4,"ngIf"],[1,"slds-tabs_default__content","slds-show",3,"ngClass"],[1,"slds-table","slds-table_cell-buffer","slds-table_bordered","slds-table--fixed-layout"],[1,"slds-line-height_reset"],["scope","col",1,"slds-size--1-of-4"],[1,"slds-truncate"],["label","LBL_NAME"],["scope","col",1,"slds-size--3-of-4"],["label","LBL_VALUE"],["label","LBL_ID"],["label","LBL_TRANSACTIONID"],["label","LBL_SESSIONID"],["label","LBL_DATE"],[3,"date"],["label","LBL_DIRECTION"],["label","LBL_STATUS"],["label","LBL_METHOD"],["label","LBL_RUNTIME"],["label","LBL_USER"],["label","LBL_ROUTE"],["label","LBL_URL"],[2,"white-space","normal","word-break","break-all"],["label","LBL_IP"],["label","LBL_ERROR"],["class","slds-p-vertical--small",4,"ngIf"],[1,"slds-p-around--x-small"],["label","LBL_REQUEST_HEADERS"],["class","slds-hint-parent",4,"ngFor","ngForOf"],[4,"ngIf"],["class","slds-tabs_default__content slds-show",3,"ngClass",4,"ngIf"],["label","LBL_REQUEST"],["label","LBL_RESPONSE"],[1,"slds-p-vertical--small"],["label","LBL_REQUEST_ARGUMENTS"],[1,"slds-hint-parent"],["label","LBL_REQUEST_PARAMS"],["label","LBL_RESPONSE_HEADERS"],[3,"ngSwitch"],[4,"ngSwitchCase"],["class","slds-m-horizontal--x-small slds-box slds-theme--shade",4,"ngSwitchDefault"],[1,"slds-m-horizontal--x-small","slds-box","slds-theme--shade"],[1,"slds-text-font_monospace",2,"overflow-wrap","break-word","white-space","pre-wrap"]],template:function(e,t){1&e&&(u.TgZ(0,"system-modal",0)(1,"system-modal-header",1),u.NdJ("close",(function(){return t.close()})),u._uU(2),u.qZA(),u.TgZ(3,"system-modal-content",2),u.YNc(4,wr,1,0,"system-spinner",3),u.YNc(5,jr,105,33,"div",4),u.qZA(),u.TgZ(6,"system-modal-footer")(7,"button",5),u.NdJ("click",(function(){return t.close()})),u._UZ(8,"system-label",6),u.qZA()()()),2&e&&(u.xp6(2),u.Oqu(t.entry.route),u.xp6(2),u.Q6J("ngIf",t.isLoading),u.xp6(1),u.Q6J("ngIf",!t.isLoading))},dependencies:[n.mk,n.sg,n.O5,n.RF,n.n9,n.ED,Wd.a,L._,nt.j,lt.x,ot.p,at.y,ol.W],encapsulation:2})),APIlogViewerModal})();function Xr(e,t){if(1&e&&(u.TgZ(0,"option",14),u._uU(1),u.qZA()),2&e){const e=t.$implicit;u.Q6J("value",e),u.xp6(1),u.Oqu(e)}}function ec(e,t){1&e&&(u.TgZ(0,"div",15),u._UZ(1,"system-spinner"),u.qZA())}function tc(e,t){1&e&&(u.TgZ(0,"div",15),u._UZ(1,"system-label",16),u.qZA())}function ic(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"li",31)(1,"a",32),u.NdJ("click",(function(){const t=u.CHM(e).$implicit,i=u.oxw(2);return u.KtG(i.goDetail(t))})),u._uU(2),u.qZA(),u.TgZ(3,"button",33),u.NdJ("click",(function(){const t=u.CHM(e).$implicit,i=u.oxw(2);return u.KtG(i.remove(t))})),u._UZ(4,"system-button-icon",34),u.qZA()()}if(2&e){const e=t.$implicit;u.xp6(2),u.Oqu(e.name)}}function sc(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"li",31)(1,"a",32),u.NdJ("click",(function(){const t=u.CHM(e).$implicit,i=u.oxw(2);return u.KtG(i.goDetail(t))})),u._uU(2),u.qZA(),u.TgZ(3,"button",35),u.NdJ("click",(function(){const t=u.CHM(e).$implicit,i=u.oxw(2);return u.KtG(i.remove(t))})),u._UZ(4,"system-button-icon",34),u.qZA()()}if(2&e){const e=t.$implicit;u.xp6(2),u.Oqu(e.name)}}function nc(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div",17)(1,"ul",18)(2,"li",19)(3,"a",20),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw();return u.KtG(t.activeTab="custom")})),u._UZ(4,"system-label",21),u.qZA()(),u.TgZ(5,"li",19)(6,"a",22),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw();return u.KtG(t.activeTab="global")})),u._UZ(7,"system-label",23),u.qZA()()(),u.TgZ(8,"div",24)(9,"ul",25),u.YNc(10,ic,5,1,"li",26),u.qZA(),u.TgZ(11,"div",27)(12,"button",28),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw();return u.KtG(t.add("custom"))})),u._UZ(13,"system-button-icon",29),u.qZA()()(),u.TgZ(14,"div",30)(15,"ul",25),u.YNc(16,sc,5,1,"li",26),u.qZA(),u.TgZ(17,"div",27)(18,"button",28),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw();return u.KtG(t.add("global"))})),u._UZ(19,"system-button-icon",29),u.qZA()()()()}if(2&e){const e=u.oxw();u.xp6(2),u.ekj("slds-is-active","custom"==e.activeTab),u.Q6J("title",e.language.getLabel("LBL_CUSTOM")),u.xp6(3),u.ekj("slds-is-active","global"==e.activeTab),u.Q6J("title",e.language.getLabel("LBL_GLOBAL")),u.xp6(3),u.Q6J("ngClass","custom"==e.activeTab?"slds-show":"slds-hide"),u.xp6(2),u.Q6J("ngForOf",e.customModulefilters),u.xp6(1),u.ekj("slds-border--top",e.customModulefilters.length>0),u.xp6(3),u.Q6J("ngClass","global"==e.activeTab?"slds-show":"slds-hide"),u.xp6(2),u.Q6J("ngForOf",e.modulefilters),u.xp6(1),u.ekj("slds-border--top",e.modulefilters.length>0)}}let lc=(()=>{var e;class ModuleFilterBuilderFilters{constructor(e,t,i,n,l){(0,s.Z)(this,"backend",void 0),(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"metadata",void 0),(0,s.Z)(this,"modelutilities",void 0),(0,s.Z)(this,"session",void 0),(0,s.Z)(this,"loading",!1),(0,s.Z)(this,"_module",""),(0,s.Z)(this,"modules",void 0),(0,s.Z)(this,"filters",[]),(0,s.Z)(this,"activeTab","global"),(0,s.Z)(this,"filter",new u.vpe),this.backend=e,this.language=t,this.metadata=i,this.modelutilities=n,this.session=l,this.modules=this.metadata.getModules(),this.modules.sort()}get module(){return this._module}set module(e){e!=this._module&&(this._module=e,this.filter.emit(null),this.loadLists())}get modulefilters(){return this.filters.filter((e=>"global"==e.scope))}get customModulefilters(){return this.filters.filter((e=>"custom"==e.scope))}goDetail(e){this.filter.emit(e)}loadLists(){this.filters=[],this.module&&(this.loading=!0,this.backend.getRequest("configuration/sysmodulefilters/"+this.module).subscribe((e=>{this.filters=e,this.loading=!1})))}add(e){let t={id:this.modelutilities.generateGuid(),module:this.module,filterdefs:null,created_by_id:this.session.authData.userId,name:"new filter",scope:e,package:"",version:""};this.filters.push(t),this.filter.emit(t)}remove(e){this.metadata.removeModuleFilter(e.id),this.backend.deleteRequest("configuration/sysmodulefilters/"+e.module+"/"+e.id),this.filters=this.filters.filter((t=>t.id!=e.id)),this.filter.emit(void 0)}}return e=ModuleFilterBuilderFilters,(0,s.Z)(ModuleFilterBuilderFilters,"ɵfac",(function(t){return new(t||e)(u.Y36(h.y),u.Y36(b.d),u.Y36(f.Pu),u.Y36(Z.A),u.Y36(fl.n))})),(0,s.Z)(ModuleFilterBuilderFilters,"ɵcmp",u.Xpm({type:e,selectors:[["module-builder-filters"]],outputs:{filter:"filter"},decls:15,vars:5,consts:[[1,"slds-border--right"],[1,"slds-p-around--x-small","slds-border--bottom"],[1,"slds-form-element","slds-grid","slds-grid--vertical-align-center"],["for","moduleselect",1,"slds-form-element__label"],["label","LBL_MODULE"],[1,"slds-form-element__control","slds-col"],[1,"slds-select_container"],["id","moduleselect",1,"slds-select",3,"ngModel","ngModelChange"],["value",""],["label","LBL_SELECT"],[3,"value",4,"ngFor","ngForOf"],["system-to-bottom",""],["class","slds-align--absolute-center slds-height_full",4,"ngIf"],["class","slds-tabs_default","style","background-color: transparent",4,"ngIf"],[3,"value"],[1,"slds-align--absolute-center","slds-height_full"],["label","LBL_MAKE_SELECTION"],[1,"slds-tabs_default",2,"background-color","transparent"],["role","tablist",1,"slds-tabs_default__nav"],["role","presentation",1,"slds-tabs_default__item","slds-text-title--caps",3,"title"],["href","javascript:void(0);","role","tab","tabindex","0","aria-selected","true","aria-controls","tab-custom","id","tab-custom-item",1,"slds-tabs_default__link",3,"click"],["label","LBL_CUSTOM"],["href","javascript:void(0);","role","tab","tabindex","-1","aria-selected","false","aria-controls","tab-global","id","tab-global-item",1,"slds-tabs_default__link",3,"click"],["label","LBL_GLOBAL"],["id","tab-custom","role","tabpanel","aria-labelledby","tab-custom-item",1,"slds-tabs_default__content","slds-p-around--none",3,"ngClass"],[1,"slds-has-dividers_around-space","slds-p-around--x-small"],["class","slds-grid slds-grid--align-spread slds-item",4,"ngFor","ngForOf"],[1,"slds-p-around--x-small"],[1,"slds-align--absolute-center","slds-button","slds-button--icon","slds-button--icon-border",2,"border-radius","50%",3,"click"],["icon","add","size","medium"],["id","tab-global","role","tabpanel","aria-labelledby","tab-global-item",1,"slds-tabs_default__content","slds-p-around--none",3,"ngClass"],[1,"slds-grid","slds-grid--align-spread","slds-item"],["href","javascript:void(0);",1,"slds-text-link_reset",3,"click"],[1,"slds-button","slds-button--icon","slds-col_bump-left",3,"click"],["icon","clear"],[1,"slds-button","slds-button--icon",3,"click"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"label",3),u._UZ(4,"system-label",4),u.qZA(),u.TgZ(5,"div",5)(6,"div",6)(7,"select",7),u.NdJ("ngModelChange",(function(e){return t.module=e})),u.TgZ(8,"option",8),u._UZ(9,"system-label",9),u.qZA(),u.YNc(10,Xr,2,2,"option",10),u.qZA()()()()(),u.TgZ(11,"div",11),u.YNc(12,ec,2,0,"div",12),u.YNc(13,tc,2,0,"div",12),u.YNc(14,nc,20,14,"div",13),u.qZA()()),2&e&&(u.xp6(7),u.Q6J("ngModel",t.module),u.xp6(3),u.Q6J("ngForOf",t.modules),u.xp6(2),u.Q6J("ngIf",t.loading),u.xp6(1),u.Q6J("ngIf",!t.module&&!t.loading),u.xp6(1),u.Q6J("ngIf",t.module&&!t.loading))},dependencies:[n.mk,n.sg,n.O5,l.YN,l.Kr,l.EJ,l.JJ,l.On,T.J,L._,ol.W,w.H],encapsulation:2})),ModuleFilterBuilderFilters})();var oc=i(3617);function ac(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div")(1,"div",1)(2,"div",2)(3,"label",3),u._UZ(4,"system-label",4),u.qZA(),u.TgZ(5,"div",5)(6,"div",6)(7,"input",7),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw();return u.KtG(i.filter.name=t)})),u.qZA()()()(),u.TgZ(8,"div",2)(9,"label",3),u._UZ(10,"system-label",8),u.qZA(),u.TgZ(11,"div",5)(12,"div",6)(13,"input",7),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw();return u.KtG(i.filter.package=t)})),u.qZA()()()(),u.TgZ(14,"div",2)(15,"label",3),u._UZ(16,"system-label",9),u.qZA(),u.TgZ(17,"div",5)(18,"div",6)(19,"input",7),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw();return u.KtG(i.filter.version=t)})),u.qZA()()()(),u.TgZ(20,"div",2)(21,"label",3),u._UZ(22,"system-label",10),u.qZA(),u.TgZ(23,"div",5)(24,"div",6)(25,"input",11),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw();return u.KtG(i.filter.id=t)})),u.qZA()()()()(),u.TgZ(26,"div",12)(27,"div",13)(28,"h2",14),u._UZ(29,"system-label",15),u.qZA(),u.TgZ(30,"ul"),u._UZ(31,"system-filter-builder-expression-group",16),u.qZA(),u.TgZ(32,"h2",14),u._UZ(33,"system-label",17),u.qZA(),u.TgZ(34,"div",18)(35,"system-input-backend-method",19),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw();return u.KtG(i.filter.filtermethod=t)})),u.qZA()(),u.TgZ(36,"div",20)(37,"button",21),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw();return u.KtG(t.save())})),u._UZ(38,"system-label",22),u.qZA()()()()()}if(2&e){const e=u.oxw();u.xp6(7),u.Q6J("ngModel",e.filter.name),u.xp6(6),u.Q6J("ngModel",e.filter.package),u.xp6(6),u.Q6J("ngModel",e.filter.version),u.xp6(6),u.Q6J("ngModel",e.filter.id)("disabled",1),u.xp6(6),u.Q6J("filtergroup",e.primaryGroup)("module",e.filter.module),u.xp6(4),u.Q6J("ngModel",e.filter.filtermethod)}}let dc=(()=>{var e;class ModuleFilterBuilderFilterDetails{constructor(e,t,i,n){(0,s.Z)(this,"backend",void 0),(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"metadata",void 0),(0,s.Z)(this,"toast",void 0),(0,s.Z)(this,"filter",void 0),(0,s.Z)(this,"primaryGroup",{logicaloperator:"and",groupscope:"all",conditions:[]}),this.backend=e,this.language=t,this.metadata=i,this.toast=n}ngOnChanges(){this.filter&&(this.filter.filterdefs?this.primaryGroup="string"==typeof this.filter.filterdefs?JSON.parse(this.filter.filterdefs):this.filter.filterdefs:this.primaryGroup={logicaloperator:"and",conditions:[]})}save(){this.cleangroup(this.primaryGroup),this.filter.filterdefs=this.primaryGroup,this.metadata.setModuleFilter(this.filter.id,this.filter.name,this.filter.module,this.filter.type),this.backend.postRequest("configuration/sysmodulefilters/"+this.filter.module+"/"+this.filter.id,{},this.filter).subscribe((e=>this.toast.sendToast(this.language.getLabel("LBL_DATA_SAVED")+".","success")))}cleangroup(e){for(let t of e.conditions){let i=e.conditions.indexOf(t);!0===t.deleted?e.conditions.splice(i,1):t.conditions&&this.cleangroup(e.conditions[i])}}}return e=ModuleFilterBuilderFilterDetails,(0,s.Z)(ModuleFilterBuilderFilterDetails,"ɵfac",(function(t){return new(t||e)(u.Y36(h.y),u.Y36(b.d),u.Y36(f.Pu),u.Y36(v.A))})),(0,s.Z)(ModuleFilterBuilderFilterDetails,"ɵcmp",u.Xpm({type:e,selectors:[["module-builder-filter-details"]],inputs:{filter:"filter"},features:[u.TTD],decls:1,vars:1,consts:[[4,"ngIf"],[1,"slds-p-vertical--x-small","slds-grid","slds-grid--vertical-align-center","slds-border--bottom"],[1,"slds-col","slds-grid","slds-grid--vertical-align-center","slds-size--1-of-4","slds-p-horizontal--x-small"],[1,"slds-form-element__label"],["label","LBL_NAME"],[1,"slds-form-element","slds-col"],[1,"slds-form-element__control"],["type","text",1,"slds-input",3,"ngModel","ngModelChange"],["label","LBL_PACKAGE"],["label","LBL_VERSION"],["label","LBL_ID"],["type","text",1,"slds-input",3,"ngModel","disabled","ngModelChange"],[1,"slds-p-around--x-small"],["system-to-bottom","",1,"slds-expression"],[1,"slds-expression__title"],["label","LBL_CONDITIONS"],[3,"filtergroup","module"],["label","LBL_METHOD"],[1,"slds-p-around--xx-small"],[3,"ngModel","ngModelChange"],[1,"slds-expression__buttons"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_SAVE"]],template:function(e,t){1&e&&u.YNc(0,ac,39,8,"div",0),2&e&&u.Q6J("ngIf",t.filter)},dependencies:[n.O5,l.Fj,l.JJ,l.On,oc.s,Ad.N,L._,w.H],encapsulation:2})),ModuleFilterBuilderFilterDetails})(),rc=(()=>{var e;class ModuleFilterBuilder{constructor(){(0,s.Z)(this,"filter",void 0)}}return e=ModuleFilterBuilder,(0,s.Z)(ModuleFilterBuilder,"ɵfac",(function(t){return new(t||e)})),(0,s.Z)(ModuleFilterBuilder,"ɵcmp",u.Xpm({type:e,selectors:[["ng-component"]],decls:4,vars:1,consts:[["titlelabel","LBL_FILTERBUILDER"],[1,"slds-grid"],[1,"slds-size--1-of-4",3,"filter"],[1,"slds-size--3-of-4",3,"filter"]],template:function(e,t){1&e&&(u._UZ(0,"workbench-header",0),u.TgZ(1,"div",1)(2,"module-builder-filters",2),u.NdJ("filter",(function(e){return t.filter=e})),u.qZA(),u._UZ(3,"module-builder-filter-details",3),u.qZA()),2&e&&(u.xp6(3),u.Q6J("filter",t.filter))},dependencies:[Xe,lc,dc],encapsulation:2})),ModuleFilterBuilder})();function cc(e,t){if(1&e&&(u.TgZ(0,"option",14),u._uU(1),u.qZA()),2&e){const e=t.$implicit;u.Q6J("value",e),u.xp6(1),u.Oqu(e)}}function gc(e,t){1&e&&(u.TgZ(0,"div",15),u._UZ(1,"system-spinner"),u.qZA())}function uc(e,t){1&e&&(u.TgZ(0,"div",15),u._UZ(1,"system-label",16),u.qZA())}function mc(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"li",31)(1,"a",32),u.NdJ("click",(function(){const t=u.CHM(e).$implicit,i=u.oxw(2);return u.KtG(i.goDetail(t))})),u._uU(2),u.qZA(),u.TgZ(3,"button",33),u.NdJ("click",(function(){const t=u.CHM(e).$implicit,i=u.oxw(2);return u.KtG(i.remove(t.id))})),u._UZ(4,"system-button-icon",34),u.qZA()()}if(2&e){const e=t.$implicit;u.xp6(2),u.Oqu(e.name)}}function pc(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"li",31)(1,"a",32),u.NdJ("click",(function(){const t=u.CHM(e).$implicit,i=u.oxw(2);return u.KtG(i.goDetail(t))})),u._uU(2),u.qZA(),u.TgZ(3,"button",35),u.NdJ("click",(function(){const t=u.CHM(e).$implicit,i=u.oxw(2);return u.KtG(i.remove(t.id))})),u._UZ(4,"system-button-icon",34),u.qZA()()}if(2&e){const e=t.$implicit;u.xp6(2),u.Oqu(e.name)}}function hc(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div",17)(1,"ul",18)(2,"li",19)(3,"a",20),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw();return u.KtG(t.activeTab="custom")})),u._UZ(4,"system-label",21),u.qZA()(),u.TgZ(5,"li",19)(6,"a",22),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw();return u.KtG(t.activeTab="global")})),u._UZ(7,"system-label",23),u.qZA()()(),u.TgZ(8,"div",24)(9,"ul",25),u.YNc(10,mc,5,1,"li",26),u.qZA(),u.TgZ(11,"div",27)(12,"button",28),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw();return u.KtG(t.add("custom"))})),u._UZ(13,"system-button-icon",29),u.qZA()()(),u.TgZ(14,"div",30)(15,"ul",25),u.YNc(16,pc,5,1,"li",26),u.qZA(),u.TgZ(17,"div",27)(18,"button",28),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw();return u.KtG(t.add("global"))})),u._UZ(19,"system-button-icon",29),u.qZA()()()()}if(2&e){const e=u.oxw();u.xp6(2),u.ekj("slds-is-active","custom"==e.activeTab),u.Q6J("title",e.language.getLabel("LBL_CUSTOM")),u.xp6(3),u.ekj("slds-is-active","global"==e.activeTab),u.Q6J("title",e.language.getLabel("LBL_GLOBAL")),u.xp6(3),u.Q6J("ngClass","custom"==e.activeTab?"slds-show":"slds-hide"),u.xp6(2),u.Q6J("ngForOf",e.customModuleDashlets),u.xp6(1),u.ekj("slds-border--top",e.customModuleDashlets.length>0),u.xp6(3),u.Q6J("ngClass","global"==e.activeTab?"slds-show":"slds-hide"),u.xp6(2),u.Q6J("ngForOf",e.moduleDashlets),u.xp6(1),u.ekj("slds-border--top",e.moduleDashlets.length>0)}}let fc=(()=>{var e;class DashletGeneratorDashlets{constructor(e,t,i,n){(0,s.Z)(this,"backend",void 0),(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"metadata",void 0),(0,s.Z)(this,"modelutilities",void 0),(0,s.Z)(this,"loading",!1),(0,s.Z)(this,"_module",""),(0,s.Z)(this,"modules",void 0),(0,s.Z)(this,"dashlets",[]),(0,s.Z)(this,"activeTab","global"),(0,s.Z)(this,"dashlet",new u.vpe),this.backend=e,this.language=t,this.metadata=i,this.modelutilities=n,this.modules=this.metadata.getModules(),this.modules.sort()}ngOnInit(){this.loading=!0,this.backend.getRequest("module/Dashboards/dashlets").subscribe((e=>{this.dashlets=e,this.loading=!1}))}get module(){return this._module}set module(e){e!=this._module&&(this._module=e,this.dashlet.emit(null))}get moduleDashlets(){return this.dashlets.filter((e=>e.module==this.module&&"global"==e.type))}get customModuleDashlets(){return this.dashlets.filter((e=>e.module==this.module&&"custom"==e.type))}goDetail(e){this.dashlet.emit(e)}add(e){let t={id:this.modelutilities.generateGuid(),name:"new dashlet",component:"DashboardGenericDashlet",module:this.module,type:e,componentconfig:null,icon:"",description:"",acl_action:"",label:""};this.dashlets.push(t),this.dashlet.emit(t)}remove(e){this.backend.deleteRequest("module/Dashboards/dashlets/"+e),this.dashlets=this.dashlets.filter((t=>t.id!=e)),this.dashlet.emit(void 0)}}return e=DashletGeneratorDashlets,(0,s.Z)(DashletGeneratorDashlets,"ɵfac",(function(t){return new(t||e)(u.Y36(h.y),u.Y36(b.d),u.Y36(f.Pu),u.Y36(Z.A))})),(0,s.Z)(DashletGeneratorDashlets,"ɵcmp",u.Xpm({type:e,selectors:[["dashlet-generator-dashlets"]],outputs:{dashlet:"dashlet"},decls:15,vars:5,consts:[[1,"slds-border--right"],[1,"slds-p-around--x-small","slds-border--bottom"],[1,"slds-form-element","slds-grid","slds-grid--vertical-align-center"],["for","moduleselect",1,"slds-form-element__label"],["label","LBL_MODULE"],[1,"slds-form-element__control","slds-col"],[1,"slds-select_container"],["id","moduleselect",1,"slds-select",3,"ngModel","ngModelChange"],["value",""],["label","LBL_SELECT"],[3,"value",4,"ngFor","ngForOf"],["system-to-bottom",""],["class","slds-align--absolute-center slds-height_full",4,"ngIf"],["class","slds-tabs_default","style","background-color: transparent",4,"ngIf"],[3,"value"],[1,"slds-align--absolute-center","slds-height_full"],["label","LBL_MAKE_SELECTION"],[1,"slds-tabs_default",2,"background-color","transparent"],["role","tablist",1,"slds-tabs_default__nav"],["role","presentation",1,"slds-tabs_default__item","slds-text-title--caps",3,"title"],["href","javascript:void(0);","role","tab","tabindex","0","aria-selected","true","aria-controls","tab-custom","id","tab-custom-item",1,"slds-tabs_default__link",3,"click"],["label","LBL_CUSTOM"],["href","javascript:void(0);","role","tab","tabindex","-1","aria-selected","false","aria-controls","tab-global","id","tab-global-item",1,"slds-tabs_default__link",3,"click"],["label","LBL_GLOBAL"],["id","tab-custom","role","tabpanel","aria-labelledby","tab-custom-item",1,"slds-tabs_default__content","slds-p-around--none",3,"ngClass"],[1,"slds-has-dividers_around-space","slds-p-around--x-small"],["class","slds-grid slds-grid--align-spread slds-item",4,"ngFor","ngForOf"],[1,"slds-p-around--x-small"],[1,"slds-align--absolute-center","slds-button","slds-button--icon","slds-button--icon-border",2,"border-radius","50%",3,"click"],["icon","add","size","medium"],["id","tab-global","role","tabpanel","aria-labelledby","tab-global-item",1,"slds-tabs_default__content","slds-p-around--none",3,"ngClass"],[1,"slds-grid","slds-grid--align-spread","slds-item"],["href","javascript:void(0);",1,"slds-text-link_reset",3,"click"],[1,"slds-button","slds-button--icon","slds-col_bump-left",3,"click"],["icon","clear"],[1,"slds-button","slds-button--icon",3,"click"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"label",3),u._UZ(4,"system-label",4),u.qZA(),u.TgZ(5,"div",5)(6,"div",6)(7,"select",7),u.NdJ("ngModelChange",(function(e){return t.module=e})),u.TgZ(8,"option",8),u._UZ(9,"system-label",9),u.qZA(),u.YNc(10,cc,2,2,"option",10),u.qZA()()()()(),u.TgZ(11,"div",11),u.YNc(12,gc,2,0,"div",12),u.YNc(13,uc,2,0,"div",12),u.YNc(14,hc,20,14,"div",13),u.qZA()()),2&e&&(u.xp6(7),u.Q6J("ngModel",t.module),u.xp6(3),u.Q6J("ngForOf",t.modules),u.xp6(2),u.Q6J("ngIf",t.loading),u.xp6(1),u.Q6J("ngIf",!t.module&&!t.loading),u.xp6(1),u.Q6J("ngIf",t.module&&!t.loading))},dependencies:[n.mk,n.sg,n.O5,l.YN,l.Kr,l.EJ,l.JJ,l.On,T.J,L._,ol.W,w.H],encapsulation:2})),DashletGeneratorDashlets})();function bc(e,t){if(1&e&&(u.TgZ(0,"option",36),u._uU(1),u.qZA()),2&e){const e=t.$implicit;u.Q6J("value",e.id),u.xp6(1),u.Oqu(e.module)}}function Zc(e,t){if(1&e&&(u.TgZ(0,"option",36),u._uU(1),u.qZA()),2&e){const e=t.$implicit;u.Q6J("value",e.component),u.xp6(1),u.Oqu(e.component)}}function _c(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div")(1,"div",1)(2,"div",2)(3,"div",3)(4,"label",4),u._UZ(5,"system-label",5),u.qZA(),u.TgZ(6,"div",6)(7,"div",7)(8,"select",8),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw();return u.KtG(i.sysModule=t)})),u.YNc(9,bc,2,2,"option",9),u.qZA()()(),u.TgZ(10,"label",10),u._UZ(11,"system-label",11),u.qZA(),u.TgZ(12,"div",6)(13,"div",7)(14,"select",12),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw();return u.KtG(i.dashlet.component=t)})),u.YNc(15,Zc,2,2,"option",9),u.qZA()()()()()(),u.TgZ(16,"div",13)(17,"div",14)(18,"div",15)(19,"label",4),u._UZ(20,"system-label",16),u.qZA(),u.TgZ(21,"div",17)(22,"input",18),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw();return u.KtG(i.dashlet.name=t)})),u.qZA()()(),u.TgZ(23,"div",19)(24,"label",4),u._uU(25,"Label"),u.qZA(),u.TgZ(26,"system-input-label",20),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw();return u.KtG(i.dashlet.label=t)})),u.qZA()()(),u.TgZ(27,"div",14)(28,"div",15)(29,"label",4),u._UZ(30,"system-label",21),u.qZA(),u.TgZ(31,"div",17)(32,"input",18),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw();return u.KtG(i.dashlet.package=t)})),u.qZA()()(),u.TgZ(33,"div",15)(34,"label",4),u._UZ(35,"system-label",22),u.qZA(),u.TgZ(36,"div",17)(37,"input",18),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw();return u.KtG(i.dashlet.version=t)})),u.qZA()()()(),u.TgZ(38,"div",14)(39,"div",15)(40,"label",4),u._UZ(41,"system-label",23),u.qZA(),u.TgZ(42,"div",17)(43,"input",18),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw();return u.KtG(i.dashlet.icon=t)})),u.qZA()()(),u.TgZ(44,"div",15)(45,"label",4),u._UZ(46,"system-label",24),u.qZA(),u.TgZ(47,"div",17)(48,"input",18),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw();return u.KtG(i.dashlet.acl_action=t)})),u.qZA()()()(),u.TgZ(49,"div",25)(50,"label",4),u._UZ(51,"system-label",26),u.qZA(),u.TgZ(52,"div",27)(53,"textarea",28),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw();return u.KtG(i.dashlet.description=t)})),u.qZA()()(),u.TgZ(54,"div",29)(55,"div",30),u._UZ(56,"system-label",31),u.qZA(),u._UZ(57,"workbench-config",32),u.qZA(),u.TgZ(58,"div",33)(59,"button",34),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw();return u.KtG(t.save())})),u._UZ(60,"system-label",35),u.qZA()()()()}if(2&e){const e=u.oxw();u.xp6(8),u.Q6J("ngModel",e.sysModule),u.xp6(1),u.Q6J("ngForOf",e.sysModules),u.xp6(5),u.Q6J("ngModel",e.dashlet.component)("disabled",!e.sysModule),u.xp6(1),u.Q6J("ngForOf",e.components),u.xp6(7),u.Q6J("ngModel",e.dashlet.name),u.xp6(4),u.Q6J("ngModel",e.dashlet.label),u.xp6(6),u.Q6J("ngModel",e.dashlet.package),u.xp6(5),u.Q6J("ngModel",e.dashlet.version),u.xp6(6),u.Q6J("ngModel",e.dashlet.icon),u.xp6(5),u.Q6J("ngModel",e.dashlet.acl_action),u.xp6(5),u.Q6J("ngModel",e.dashlet.description),u.xp6(4),u.Q6J("component",e.dashlet.component)("configValues",e.configValues)}}let yc=(()=>{var e;class DashletGeneratorDashletDetails{constructor(e,t,i,n,l){(0,s.Z)(this,"backend",void 0),(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"metadata",void 0),(0,s.Z)(this,"toast",void 0),(0,s.Z)(this,"view",void 0),(0,s.Z)(this,"dashlet",void 0),(0,s.Z)(this,"sysModule",void 0),(0,s.Z)(this,"sysModules",[]),(0,s.Z)(this,"configValues",{}),this.backend=e,this.language=t,this.metadata=i,this.toast=n,this.view=l,this.view.setEditMode(),this.sysModules=this.metadata.getSystemModules()}get components(){return this.metadata.getSystemComponents(this.sysModule)}ngOnChanges(){if(this.dashlet){let e=this.metadata.getSystemComponents().find((e=>e.component==this.dashlet.component));this.sysModule=e?e.module:void 0,this.configValues=this.dashlet.componentconfig?JSON.parse(this.dashlet.componentconfig):{}}}save(){this.dashlet.componentconfig=JSON.stringify(this.configValues),this.backend.postRequest("module/Dashboards/dashlets/"+this.dashlet.id,{},this.dashlet).subscribe((e=>this.toast.sendToast(this.language.getLabel("LBL_DATA_SAVED")+".","success")))}}return e=DashletGeneratorDashletDetails,(0,s.Z)(DashletGeneratorDashletDetails,"ɵfac",(function(t){return new(t||e)(u.Y36(h.y),u.Y36(b.d),u.Y36(f.Pu),u.Y36(v.A),u.Y36($i.e))})),(0,s.Z)(DashletGeneratorDashletDetails,"ɵcmp",u.Xpm({type:e,selectors:[["dashlet_generator_dashlet-details"]],inputs:{dashlet:"dashlet"},features:[u._Bn([$i.e]),u.TTD],decls:1,vars:1,consts:[[4,"ngIf"],[1,"slds-p-around--x-small","slds-border--bottom"],[1,"slds-form-element","slds-size--1-of-3","slds-form-element","slds-size--1-of-3","slds-grid","slds-grid--vertical-align-center"],[1,"slds-grid","slds-grid--vertical-align-center"],[1,"slds-form-element__label"],["label","LBL_MODULE"],[1,"slds-form-element__control","slds-size--1-of-2"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"slds-form-element__label","slds-m-left--small"],["label","LBL_COMPONENT"],[1,"slds-select",3,"ngModel","disabled","ngModelChange"],[1,"slds-p-around--x-small"],[1,"slds-grid","slds-gutters_direct-xx-small"],[1,"slds-form-element","slds-col","slds-size--1-of-2"],["label","LBL_NAME"],[1,"slds-form-element__control"],["type","text",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-form-element","slds-size--1-of-2"],[3,"ngModel","ngModelChange"],["label","LBL_PACKAGE"],["label","LBL_VERSION"],["label","LBL_ICON"],["label","LBL_ACL_ACTION"],[1,"slds-form-element","slds-size--1-of-1"],["label","LBL_DESCRIPTION"],[1,"slds-m-vertical--small","slds-text-title_bold"],[1,"slds-textarea",2,"max-height","400px","min-height","30px",3,"ngModel","ngModelChange"],[1,"slds-size--1-of-1","slds-border--top","slds-border--bottom","slds-form-element","slds-m-top--medium","slds-p-bottom--medium"],[1,"slds-text-title_bold","slds-m-vertical--small"],["label","LBL_CONFIGURATION"],[3,"component","configValues"],[1,"slds-align--absolute-center","slds-p-top--medium"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_SAVE"],[3,"value"]],template:function(e,t){1&e&&u.YNc(0,_c,61,14,"div",0),2&e&&u.Q6J("ngIf",t.dashlet)},dependencies:[n.sg,n.O5,l.YN,l.Kr,l.Fj,l.EJ,l.JJ,l.On,S.$,L._,es],encapsulation:2})),DashletGeneratorDashletDetails})(),vc=(()=>{var e;class DashletGenerator{constructor(){(0,s.Z)(this,"dashlet",void 0)}}return e=DashletGenerator,(0,s.Z)(DashletGenerator,"ɵfac",(function(t){return new(t||e)})),(0,s.Z)(DashletGenerator,"ɵcmp",u.Xpm({type:e,selectors:[["ng-component"]],decls:4,vars:1,consts:[["titlelabel","LBL_DASHLET_GENERATOR"],[1,"slds-grid"],[1,"slds-size--1-of-4",3,"dashlet"],[1,"slds-size--3-of-4",3,"dashlet"]],template:function(e,t){1&e&&(u._UZ(0,"workbench-header",0),u.TgZ(1,"div",1)(2,"dashlet-generator-dashlets",2),u.NdJ("dashlet",(function(e){return t.dashlet=e})),u.qZA(),u._UZ(3,"dashlet_generator_dashlet-details",3),u.qZA()),2&e&&(u.xp6(3),u.Q6J("dashlet",t.dashlet))},dependencies:[Xe,fc,yc],encapsulation:2})),DashletGenerator})();function xc(e,t){if(1&e&&(u.ynx(0),u.TgZ(1,"td"),u._uU(2),u.qZA(),u.TgZ(3,"td"),u._uU(4),u.qZA(),u.TgZ(5,"td"),u._uU(6),u.qZA(),u.TgZ(7,"td"),u._uU(8),u.qZA(),u.TgZ(9,"td"),u._uU(10),u.qZA(),u.TgZ(11,"td"),u._uU(12),u.qZA(),u.BQk()),2&e){const e=u.oxw().$implicit;u.xp6(2),u.Oqu(e.route),u.xp6(2),u.Oqu(e.method),u.xp6(2),u.Oqu(e.user_id),u.xp6(2),u.Oqu(e.ip),u.xp6(2),u.Oqu(e.direction),u.xp6(2),u.Oqu(e.logtable)}}function Mc(e,t){if(1&e&&(u.TgZ(0,"option"),u._uU(1),u.qZA()),2&e){const e=t.$implicit;u.xp6(1),u.Oqu(e)}}function Ac(e,t){if(1&e&&(u.TgZ(0,"option"),u._uU(1),u.qZA()),2&e){const e=t.$implicit;u.xp6(1),u.Oqu(e)}}function Tc(e,t){if(1&e){const e=u.EpF();u.ynx(0),u.TgZ(1,"td")(2,"input",23),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw().$implicit;return u.KtG(i.route=t)})),u.qZA()(),u.TgZ(3,"td")(4,"div",24)(5,"div",25)(6,"div",26)(7,"select",27),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw().$implicit;return u.KtG(i.method=t)})),u.TgZ(8,"option"),u._uU(9,"*"),u.qZA(),u.YNc(10,Mc,2,1,"option",18),u.qZA()()()()(),u.TgZ(11,"td")(12,"input",23),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw().$implicit;return u.KtG(i.user_id=t)})),u.qZA()(),u.TgZ(13,"td")(14,"input",23),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw().$implicit;return u.KtG(i.ip=t)})),u.qZA()(),u.TgZ(15,"td")(16,"div",24)(17,"div",25)(18,"div",26)(19,"select",27),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw().$implicit;return u.KtG(i.direction=t)})),u.TgZ(20,"option"),u._uU(21,"*"),u.qZA(),u.TgZ(22,"option"),u._uU(23,"O"),u.qZA(),u.TgZ(24,"option"),u._uU(25,"I"),u.qZA()()()()()(),u.TgZ(26,"td")(27,"div",24)(28,"div",25)(29,"div",26)(30,"select",27),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw().$implicit;return u.KtG(i.logtable=t)})),u._UZ(31,"option"),u.YNc(32,Ac,2,1,"option",18),u.qZA()()()()(),u.BQk()}if(2&e){const e=u.oxw().$implicit,t=u.oxw();u.xp6(2),u.Q6J("ngModel",e.route),u.xp6(5),u.Q6J("ngModel",e.method),u.xp6(3),u.Q6J("ngForOf",t.methods),u.xp6(2),u.Q6J("ngModel",e.user_id),u.xp6(2),u.Q6J("ngModel",e.ip),u.xp6(5),u.Q6J("ngModel",e.direction),u.xp6(11),u.Q6J("ngModel",e.logtable),u.xp6(2),u.Q6J("ngForOf",t.logtables)}}function Lc(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"button",28),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw().$implicit,i=u.oxw();return u.KtG(i.toggleActive(t.id))})),u._UZ(1,"system-utility-icon",29),u.qZA()}if(2&e){const e=u.oxw().$implicit;u.xp6(1),u.Q6J("colorclass",e.is_active?"slds-icon-text-success":"slds-icon-text-light")}}function qc(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"button",28),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw().$implicit;return u.KtG(t.editing=!0)})),u._UZ(1,"system-button-icon",30),u.qZA()}2&e&&(u.xp6(1),u.Q6J("icon","edit")("size","small"))}function Cc(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"button",28),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw().$implicit,i=u.oxw();return u.KtG(i.delete(t.id))})),u._UZ(1,"system-button-icon",30),u.qZA()}2&e&&(u.xp6(1),u.Q6J("icon","delete")("size","small"))}function Jc(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"button",28),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw().$implicit,i=u.oxw();return u.KtG(i.save(t))})),u._UZ(1,"system-button-icon",30),u.qZA()}2&e&&(u.xp6(1),u.Q6J("icon","check")("size","small"))}function Nc(e,t){if(1&e&&(u.TgZ(0,"tr"),u.YNc(1,xc,13,6,"ng-container",20),u.YNc(2,Tc,33,8,"ng-container",20),u.TgZ(3,"td")(4,"div",21),u.YNc(5,Lc,2,1,"button",22),u.YNc(6,qc,2,2,"button",22),u.YNc(7,Cc,2,2,"button",22),u.YNc(8,Jc,2,2,"button",22),u.qZA()()()),2&e){const e=t.$implicit;u.xp6(1),u.Q6J("ngIf",!e.editing),u.xp6(1),u.Q6J("ngIf",e.editing),u.xp6(3),u.Q6J("ngIf",!e.editing),u.xp6(1),u.Q6J("ngIf",!e.editing),u.xp6(1),u.Q6J("ngIf",!e.editing),u.xp6(1),u.Q6J("ngIf",e.editing)}}function kc(e,t){1&e&&(u.TgZ(0,"div",31)(1,"system-illustration-no-records"),u._UZ(2,"system-label",32),u.qZA()())}let wc=(()=>{var e;class APIlogConfig{constructor(e,t,i,n){(0,s.Z)(this,"backend",void 0),(0,s.Z)(this,"modal",void 0),(0,s.Z)(this,"modelutilities",void 0),(0,s.Z)(this,"toast",void 0),(0,s.Z)(this,"methods",["CONNECT","DELETE","GET","HEAD","OPTIONS","POST","PATCH","PUT","SOAP","TRACE"]),(0,s.Z)(this,"entries",[]),(0,s.Z)(this,"logtables",[]),(0,s.Z)(this,"isLoading",!1),this.backend=e,this.modal=t,this.modelutilities=i,this.toast=n,this.loadData()}loadData(){this.isLoading=!0,this.backend.getRequest("admin/apilog/config").subscribe({next:e=>{this.entries=e,this.isLoading=!1},error:()=>{this.isLoading=!1}}),this.backend.getRequest("admin/apilog/logtables").subscribe({next:e=>{this.logtables=e}})}addEntry(){let e=this.modelutilities.generateGuid(),t={route:"*",method:"*",user_id:"*",ip:"*",direction:"*",is_active:0};this.backend.postRequest(`admin/apilog/config/${e}`,{},t).subscribe({next:()=>{t.id=e,t.editing=!0,this.entries.push(t)}})}toggleActive(e){let t=this.entries.find((t=>t.id==e)).is_active;this.backend.putRequest(`admin/apilog/config/${e}/activate/${t?0:1}`).subscribe({next:()=>{this.entries.find((t=>t.id==e)).is_active=!t}})}delete(e){this.backend.deleteRequest(`admin/apilog/config/${e}`).subscribe({next:()=>{this.entries.splice(this.entries.findIndex((t=>t.id==e)),1)}})}save(e){let t={route:e.route,method:e.method,user_id:e.user_id,ip:e.ip,direction:e.direction,logtable:e.logtable,is_active:e.is_active};this.backend.postRequest(`admin/apilog/config/${e.id}`,{},t).subscribe({next:()=>{e.editing=!1}})}}return e=APIlogConfig,(0,s.Z)(APIlogConfig,"ɵfac",(function(t){return new(t||e)(u.Y36(h.y),u.Y36(x.o),u.Y36(Z.A),u.Y36(v.A))})),(0,s.Z)(APIlogConfig,"ɵcmp",u.Xpm({type:e,selectors:[["apilog-config"]],decls:27,vars:4,consts:[["titlelabel","LBL_API_LOG_CONFIGURATION","icon","custom:custom62"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_ADD"],["system-to-bottom-noscroll","",3,"system-overlay-loading-spinner"],["system-to-bottom","",1,"slds-border--top"],[1,"slds-table","slds-table--bordered","slds-table--fixed-layout","slds-no-row-hover","slds-table_header-fixed"],[2,"width","8rem"],["label","LBL_ROUTE",1,"slds-th__action"],[2,"width","4rem"],["label","LBL_METHOD",1,"slds-th__action"],["label","LBL_USER",1,"slds-th__action"],["label","LBL_IP_ADDRESS",1,"slds-th__action"],[2,"width","2rem"],["label","LBL_DIRECTION",1,"slds-th__action"],[2,"width","6rem"],["label","LBL_LOGTABLE",1,"slds-th__action"],["label","LBL_ACTION",1,"slds-th__action"],["tbody",""],[4,"ngFor","ngForOf"],["class","slds-height_full slds-align--absolute-center",4,"ngIf"],[4,"ngIf"],["role","group",1,"slds-button-group","slds-float--right"],["class","slds-button slds-button--icon-border",3,"click",4,"ngIf"],[1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-form-element"],[1,"slds-form-element__control"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],[1,"slds-button","slds-button--icon-border",3,"click"],["icon","light_bulb","size","x-small",3,"colorclass"],[3,"icon","size"],[1,"slds-height_full","slds-align--absolute-center"],["label","LBL_NO_RECORDS_FOUND"]],template:function(e,t){1&e&&(u.TgZ(0,"workbench-header",0)(1,"workbench-header-controls")(2,"button",1),u.NdJ("click",(function(){return t.addEntry()})),u._UZ(3,"system-label",2),u.qZA()()(),u.TgZ(4,"div",3)(5,"div",4)(6,"table",5)(7,"thead")(8,"tr")(9,"th",6),u._UZ(10,"system-label",7),u.qZA(),u.TgZ(11,"th",8),u._UZ(12,"system-label",9),u.qZA(),u.TgZ(13,"th",6),u._UZ(14,"system-label",10),u.qZA(),u.TgZ(15,"th",6),u._UZ(16,"system-label",11),u.qZA(),u.TgZ(17,"th",12),u._UZ(18,"system-label",13),u.qZA(),u.TgZ(19,"th",14),u._UZ(20,"system-label",15),u.qZA(),u.TgZ(21,"th",8),u._UZ(22,"system-label",16),u.qZA()()(),u.TgZ(23,"tbody",null,17),u.YNc(25,Nc,9,6,"tr",18),u.qZA()(),u.YNc(26,kc,3,0,"div",19),u.qZA()()),2&e&&(u.xp6(2),u.Q6J("disabled",t.isLoading),u.xp6(2),u.Q6J("system-overlay-loading-spinner",t.isLoading),u.xp6(21),u.Q6J("ngForOf",t.entries),u.xp6(1),u.Q6J("ngIf",!t.isLoading&&0==t.entries.length))},dependencies:[n.sg,n.O5,l.YN,l.Kr,l.Fj,l.EJ,l.JJ,l.On,T.J,Xd.C,L._,m.r,w.H,C.t,$s._,Xe,tt],encapsulation:2})),APIlogConfig})();function Uc(e,t){1&e&&(u.TgZ(0,"option",31),u._UZ(1,"system-label",32),u.qZA())}function Ec(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div",1)(1,"div",15)(2,"label",3)(3,"abbr",4),u._uU(4,"* "),u.qZA(),u._UZ(5,"system-label",33),u.qZA(),u.TgZ(6,"div",10)(7,"select",34),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw();return u.KtG(i.dictionarydefinition.sysdictionary_contenttype=t)})),u.TgZ(8,"option",35),u._uU(9,"config"),u.qZA(),u.TgZ(10,"option",36),u._uU(11,"custom config"),u.qZA()()()()()}if(2&e){const e=u.oxw();u.xp6(7),u.Q6J("ngModel",e.dictionarydefinition.sysdictionary_contenttype)}}let Dc=(()=>{var e;class DictionaryManagerEditDefinitionModal{constructor(e,t,i){(0,s.Z)(this,"dictionarymanager",void 0),(0,s.Z)(this,"metadata",void 0),(0,s.Z)(this,"modelutilities",void 0),(0,s.Z)(this,"self",void 0),(0,s.Z)(this,"dictionarydefinition",void 0),this.dictionarymanager=e,this.metadata=t,this.modelutilities=i}close(){this.self.destroy()}save(){this.dictionarymanager.dictionarydefinitions.some((e=>e.id==this.dictionarydefinition.id&&(e.package=this.dictionarydefinition.package,e.version=this.dictionarydefinition.version,e.sysdictionary_contenttype=this.dictionarydefinition.sysdictionary_contenttype,!0))),this.close()}}return e=DictionaryManagerEditDefinitionModal,(0,s.Z)(DictionaryManagerEditDefinitionModal,"ɵfac",(function(t){return new(t||e)(u.Y36(A),u.Y36(f.Pu),u.Y36(Z.A))})),(0,s.Z)(DictionaryManagerEditDefinitionModal,"ɵcmp",u.Xpm({type:e,selectors:[["ng-component"]],decls:58,vars:13,consts:[[3,"close"],[1,"slds-grid"],[1,"slds-form-element__control","slds-size--1-of-2","slds-p-right--xxx-small"],[1,"slds-form-element__label"],[1,"slds-required"],["label","LBL_NAME"],[3,"ngModel","disabled","ngModelChange"],["label","LBL_TABLE"],[1,"slds-form-element__control","slds-size--1-of-4","slds-p-left--xxx-small"],["label","LBL_SCOPE"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","disabled","ngModelChange"],["value","g",4,"ngIf"],["value","c"],["label","LBL_CUSTOM"],[1,"slds-large-size--1-of-4","slds-p-right--xxx-small","slds-form-element__control"],["label","LBL_TYPE"],["value","module"],["value","metadata"],["value","template"],[1,"slds-size--1-of-4","slds-p-right--xxx-small","slds-form-element__control"],["label","LBL_PACKAGE"],[3,"ngModel","ngModelChange"],[1,"slds-size--1-of-4","slds-p-left--xxx-small","slds-form-element__control"],["label","LBL_VERSION"],["class","slds-grid",4,"ngIf"],["label","LBL_COMMENT"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CLOSE"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_SAVE"],["value","g"],["label","LBL_GLOBAL"],["label","LBL_CONTENT_TYPE"],[1,"slds-select",3,"ngModel","ngModelChange"],["value","config"],["value","custom_config"]],template:function(e,t){1&e&&(u.TgZ(0,"system-modal")(1,"system-modal-header",0),u.NdJ("close",(function(){return t.close()})),u._uU(2,"Add Dictionary Definition"),u.qZA(),u.TgZ(3,"system-modal-content")(4,"div",1)(5,"div",2)(6,"label",3)(7,"abbr",4),u._uU(8,"* "),u.qZA(),u._UZ(9,"system-label",5),u.qZA(),u.TgZ(10,"system-input-text",6),u.NdJ("ngModelChange",(function(e){return t.dictionarydefinition.name=e})),u.qZA()(),u.TgZ(11,"div",2)(12,"label",3),u._UZ(13,"system-label",7),u.qZA(),u.TgZ(14,"system-input-text",6),u.NdJ("ngModelChange",(function(e){return t.dictionarydefinition.tablename=e})),u.qZA()()(),u.TgZ(15,"div",1)(16,"div",8)(17,"label",3)(18,"abbr",4),u._uU(19,"* "),u.qZA(),u._UZ(20,"system-label",9),u.qZA(),u.TgZ(21,"div",10)(22,"select",11),u.NdJ("ngModelChange",(function(e){return t.dictionarydefinition.scope=e})),u.YNc(23,Uc,2,0,"option",12),u.TgZ(24,"option",13),u._UZ(25,"system-label",14),u.qZA()()()(),u.TgZ(26,"div",15)(27,"label",3)(28,"abbr",4),u._uU(29,"* "),u.qZA(),u._UZ(30,"system-label",16),u.qZA(),u.TgZ(31,"div",10)(32,"select",11),u.NdJ("ngModelChange",(function(e){return t.dictionarydefinition.sysdictionary_type=e})),u.TgZ(33,"option",17),u._uU(34,"module"),u.qZA(),u.TgZ(35,"option",18),u._uU(36,"metadata"),u.qZA(),u.TgZ(37,"option",19),u._uU(38,"template"),u.qZA(),u.TgZ(39,"option",19),u._uU(40,"relationship"),u.qZA()()()(),u.TgZ(41,"div",20)(42,"label",3),u._UZ(43,"system-label",21),u.qZA(),u.TgZ(44,"system-input-text",22),u.NdJ("ngModelChange",(function(e){return t.dictionarydefinition.package=e})),u.qZA()(),u.TgZ(45,"div",23)(46,"label",3),u._UZ(47,"system-label",24),u.qZA(),u.TgZ(48,"system-input-text",22),u.NdJ("ngModelChange",(function(e){return t.dictionarydefinition.version=e})),u.qZA()()(),u.YNc(49,Ec,12,1,"div",25),u.TgZ(50,"label",3),u._UZ(51,"system-label",26),u.qZA(),u.TgZ(52,"system-richtext-editor",22),u.NdJ("ngModelChange",(function(e){return t.dictionarydefinition.description=e})),u.qZA()(),u.TgZ(53,"system-modal-footer")(54,"button",27),u.NdJ("click",(function(){return t.close()})),u._UZ(55,"system-label",28),u.qZA(),u.TgZ(56,"button",29),u.NdJ("click",(function(){return t.save()})),u._UZ(57,"system-label",30),u.qZA()()()),2&e&&(u.xp6(10),u.Q6J("ngModel",t.dictionarydefinition.name)("disabled",!0),u.xp6(4),u.Q6J("ngModel",t.dictionarydefinition.tablename)("disabled",!0),u.xp6(8),u.Q6J("ngModel",t.dictionarydefinition.scope)("disabled",!0),u.xp6(1),u.Q6J("ngIf","all"==t.dictionarymanager.changescope),u.xp6(9),u.Q6J("ngModel",t.dictionarydefinition.sysdictionary_type)("disabled",!0),u.xp6(12),u.Q6J("ngModel",t.dictionarydefinition.package),u.xp6(4),u.Q6J("ngModel",t.dictionarydefinition.version),u.xp6(1),u.Q6J("ngIf","metadata"==t.dictionarydefinition.sysdictionary_type),u.xp6(3),u.Q6J("ngModel",t.dictionarydefinition.description))},dependencies:[n.O5,l.YN,l.Kr,l.EJ,l.JJ,l.On,J.Z,L._,nt.j,lt.x,ot.p,at.y,Oi.z],encapsulation:2})),DictionaryManagerEditDefinitionModal})();function Oc(e,t){if(1&e&&(u.TgZ(0,"option",42),u._uU(1),u.qZA()),2&e){const e=t.$implicit;u.Q6J("value",e.id),u.xp6(1),u.hij("",e.module," ")}}function Ic(e,t){if(1&e){const e=u.EpF();u.ynx(0),u.TgZ(1,"tr",29)(2,"td",30)(3,"span",31)(4,"div",32)(5,"div",33)(6,"div",34)(7,"select",35),u.NdJ("ngModelChange",(function(t){const i=u.CHM(e).$implicit;return u.KtG(i.module_id=t)}))("change",(function(){u.CHM(e);const t=u.oxw(2);return u.KtG(t.canSaveOnInit=!0)})),u.YNc(8,Oc,2,2,"option",36),u.qZA()()()()()(),u.TgZ(9,"td",30)(10,"span",31)(11,"div",32)(12,"input",37),u.NdJ("ngModelChange",(function(t){const i=u.CHM(e).$implicit;return u.KtG(i.module_field=t)}))("keydown",(function(){u.CHM(e);const t=u.oxw(2);return u.KtG(t.canSaveOnInit=!0)})),u.qZA()()()(),u.TgZ(13,"td",30)(14,"span",31)(15,"div",32)(16,"input",37),u.NdJ("ngModelChange",(function(t){const i=u.CHM(e).$implicit;return u.KtG(i.module_field_c1=t)}))("keydown",(function(){u.CHM(e);const t=u.oxw(2);return u.KtG(t.canSaveOnInit=!0)})),u.qZA()()()(),u.TgZ(17,"td",30)(18,"span",31)(19,"div",32)(20,"input",37),u.NdJ("ngModelChange",(function(t){const i=u.CHM(e).$implicit;return u.KtG(i.module_field_c2=t)}))("keydown",(function(){u.CHM(e);const t=u.oxw(2);return u.KtG(t.canSaveOnInit=!0)})),u.qZA()()()(),u.TgZ(21,"td",30)(22,"span",31)(23,"div",32)(24,"input",37),u.NdJ("ngModelChange",(function(t){const i=u.CHM(e).$implicit;return u.KtG(i.module_field_c3=t)}))("keydown",(function(){u.CHM(e);const t=u.oxw(2);return u.KtG(t.canSaveOnInit=!0)})),u.qZA()()()(),u.TgZ(25,"td",30)(26,"span",31)(27,"div",32)(28,"input",37),u.NdJ("ngModelChange",(function(t){const i=u.CHM(e).$implicit;return u.KtG(i.module_field_c4=t)}))("keydown",(function(){u.CHM(e);const t=u.oxw(2);return u.KtG(t.canSaveOnInit=!0)})),u.qZA()()()(),u.TgZ(29,"td",38)(30,"div",39)(31,"button",40),u.NdJ("click",(function(){const t=u.CHM(e).index,i=u.oxw(2);return u.KtG(i.deleteConfig(t))})),u._UZ(32,"system-button-icon",41),u.qZA()()()(),u.BQk()}if(2&e){const e=t.$implicit,i=u.oxw(2);u.xp6(7),u.Q6J("disabled",i.loading)("ngModel",e.module_id),u.xp6(1),u.Q6J("ngForOf",i.sysModules),u.xp6(4),u.Q6J("disabled",i.loading)("ngModel",e.module_field),u.xp6(4),u.Q6J("disabled",i.loading)("ngModel",e.module_field_c1),u.xp6(4),u.Q6J("disabled",i.loading)("ngModel",e.module_field_c2),u.xp6(4),u.Q6J("disabled",i.loading)("ngModel",e.module_field_c3),u.xp6(4),u.Q6J("disabled",i.loading)("ngModel",e.module_field_c4),u.xp6(3),u.Q6J("disabled",i.loading),u.xp6(1),u.Q6J("icon","delete")}}function Qc(e,t){if(1&e&&(u.TgZ(0,"table",13)(1,"thead")(2,"tr",14)(3,"th",15)(4,"span",16),u._UZ(5,"system-label",17),u.qZA()(),u.TgZ(6,"th",15)(7,"span",18),u._UZ(8,"system-label",19),u.qZA()(),u.TgZ(9,"th",15)(10,"span",20),u._UZ(11,"system-label",21),u.qZA()(),u.TgZ(12,"th",15)(13,"span",22),u._UZ(14,"system-label",23),u.qZA()(),u.TgZ(15,"th",15)(16,"span",24),u._UZ(17,"system-label",25),u.qZA()(),u.TgZ(18,"th",15)(19,"span",26),u._UZ(20,"system-label",27),u.qZA()(),u._UZ(21,"th",15),u.qZA()(),u.TgZ(22,"tbody"),u.YNc(23,Ic,33,15,"ng-container",28),u.qZA()()),2&e){const e=u.oxw();u.xp6(23),u.Q6J("ngForOf",e.categoriesInputArray)}}function Sc(e,t){1&e&&u._UZ(0,"system-label",43)}let Bc=(()=>{var e;class CategoryTreeManagerLinkModal{constructor(e,t,i){(0,s.Z)(this,"backend",void 0),(0,s.Z)(this,"model",void 0),(0,s.Z)(this,"modal",void 0),(0,s.Z)(this,"self",void 0),(0,s.Z)(this,"loading",!1),(0,s.Z)(this,"activeTreeId",void 0),(0,s.Z)(this,"categoriesInputArray",[]),(0,s.Z)(this,"sysModules",[]),(0,s.Z)(this,"canSaveOnInit",!1),this.backend=e,this.model=t,this.modal=i,this.backend.getRequest("system/spiceui/admin/modules").subscribe((e=>{this.sysModules=e}))}ngOnInit(){this.getTreeLinks()}getTreeLinks(){this.loading=!0;let e=this.modal.await("loading...");this.backend.getRequest(`configuration/spiceui/core/categorytrees/${this.activeTreeId}/links`).subscribe({next:t=>{this.categoriesInputArray=t,this.loading=!1,e.emit(!0)},error:()=>{this.loading=!1,e.emit(!0)}})}addConfig(){this.canSaveOnInit=!0,this.categoriesInputArray.push({id:this.categoriesInputArray.length+1,module_id:"",module_field:"",module_field_c1:"",module_field_c2:"",module_field_c3:"",module_field_c4:""})}deleteConfig(e){this.canSaveOnInit=!0,this.categoriesInputArray.splice(e,1)}get canSave(){let e=this.categoriesInputArray.find((e=>""==e.module_id||""==e.module_field));return""==e?.module_id||""==e?.module_field}saveChanges(){let e=this.modal.await("saving..."),t=new RegExp(/^[{]?[0-9a-fA-F]{8}-([0-9a-fA-F]{4}-){3}[0-9a-fA-F]{12}[}]?$/),i=this.categoriesInputArray.map((e=>({id:t.test(e.id)?e.id:this.model.generateGuid(),module_id:e.module_id,module_field:e.module_field,syscategorytree_id:this.activeTreeId,module_field_c1:e.module_field_c1,module_field_c2:e.module_field_c2,module_field_c3:e.module_field_c3,module_field_c4:e.module_field_c4})));this.backend.postRequest(`configuration/spiceui/core/categorytrees/${this.activeTreeId}/links`,{},i).subscribe({next:()=>{e.emit(!0),this.loading=!1,this.close()},error:()=>{e.emit(!0),this.loading=!1}})}close(){this.self.destroy()}}return e=CategoryTreeManagerLinkModal,(0,s.Z)(CategoryTreeManagerLinkModal,"ɵfac",(function(t){return new(t||e)(u.Y36(h.y),u.Y36(Ql.o),u.Y36(x.o))})),(0,s.Z)(CategoryTreeManagerLinkModal,"ɵcmp",u.Xpm({type:e,selectors:[["category-tree-manager-link-modal"]],features:[u._Bn([Ql.o])],decls:16,vars:4,consts:[[3,"close"],["label","LBL_LINK_TREE_CATEGORIES"],["margin","none"],[1,"slds-table_edit_container","slds-is-relative"],["class","slds-table slds-table_bordered","role","grid","style","width: 100%;",4,"ngIf","ngIfElse"],["notLinkTree",""],[1,"slds-text-align--right","slds-p-vertical--x-small"],["type","button",1,"slds-button","slds-button--brand","slds-float--left",3,"disabled","click"],["label","LBL_ADD"],["type","button",1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],["type","button",1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_SAVE"],["role","grid",1,"slds-table","slds-table_bordered",2,"width","100%"],[1,"slds-line-height_reset"],["scope","col"],["title","Model",1,"slds-truncate"],["label","LBL_MODEL"],["title","module field",1,"slds-truncate"],["label","LBL_MODULE_FIELD"],["title","syscategory 1",1,"slds-truncate"],["label","LBL_SYS_CAT_1"],["title","syscategory 2",1,"slds-truncate"],["label","LBL_SYS_CAT_2"],["title","syscategory 3",1,"slds-truncate"],["label","LBL_SYS_CAT_3"],["title","syscategory 4",1,"slds-truncate"],["label","LBL_SYS_CAT_4"],[4,"ngFor","ngForOf"],[1,"slds-hint-parent"],["role","gridcell",1,"slds-cell-edit",2,"width","16%"],[1,"slds-grid","slds-grid_align-spread"],[1,"slds-form-element__control",2,"width","100%"],[1,"slds-form-element__control",2,"min-width","250px"],[1,"slds-select_container"],[1,"slds-select",3,"disabled","ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],["aria-describedby","error-message","type","text",1,"slds-input",3,"disabled","ngModel","ngModelChange","keydown"],["role","gridcell",1,"slds-cell-edit"],[1,"slds-p-around--small","slds-align--absolute-center","slds-float_right"],["title","delete item",1,"slds-button","slds-button--icon",3,"disabled","click"],[3,"icon"],[3,"value"],["label","LBL_PLEASE_ADD_LINK_TREE_CATEGORIES",1,"slds-align--absolute-center","slds-is-relative","slds-p-around--xx-large"]],template:function(e,t){if(1&e&&(u.TgZ(0,"system-modal")(1,"system-modal-header",0),u.NdJ("close",(function(){return t.close()})),u._UZ(2,"system-label",1),u.qZA(),u.TgZ(3,"system-modal-content",2)(4,"div",3),u.YNc(5,Qc,24,1,"table",4),u.YNc(6,Sc,1,0,"ng-template",null,5,u.W1O),u.qZA()(),u.TgZ(8,"system-modal-footer")(9,"div",6)(10,"button",7),u.NdJ("click",(function(){return t.addConfig()})),u._UZ(11,"system-label",8),u.qZA(),u.TgZ(12,"button",9),u.NdJ("click",(function(){return t.close()})),u._UZ(13,"system-label",10),u.qZA(),u.TgZ(14,"button",11),u.NdJ("click",(function(){return t.saveChanges()})),u._UZ(15,"system-label",12),u.qZA()()()()),2&e){const e=u.MAs(7);u.xp6(5),u.Q6J("ngIf",t.categoriesInputArray.length)("ngIfElse",e),u.xp6(5),u.Q6J("disabled",t.loading),u.xp6(4),u.Q6J("disabled",t.canSave||!t.canSaveOnInit||0==t.categoriesInputArray.length)}},dependencies:[n.sg,n.O5,l.YN,l.Kr,l.Fj,l.EJ,l.JJ,l.On,T.J,L._,nt.j,lt.x,ot.p,at.y],encapsulation:2})),CategoryTreeManagerLinkModal})();var Fc=i(3814),Yc=i(6271);function Rc(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"li",20),u._UZ(1,"system-utility-icon",21),u.TgZ(2,"a",22),u.NdJ("click",(function(){const t=u.CHM(e).$implicit,i=u.oxw();return u.KtG(i.handleSelectedItemChange(t.id))})),u._uU(3),u.qZA(),u.TgZ(4,"div",23)(5,"button",24),u.NdJ("click",(function(){const t=u.CHM(e).$implicit,i=u.oxw();return u.KtG(i.editRole(t.id))})),u._UZ(6,"system-button-icon",25),u.qZA(),u.TgZ(7,"button",24),u.NdJ("click",(function(){const t=u.CHM(e).$implicit,i=u.oxw();return u.KtG(i.deleteRole(t.id))})),u._UZ(8,"system-button-icon",26),u.qZA()()()}if(2&e){const e=t.$implicit;u.xp6(1),u.Q6J("icon","global"==e.scope?"world":"people"),u.xp6(2),u.Oqu(e.name)}}function Gc(e,t){if(1&e&&u._UZ(0,"system-utility-icon",41),2&e){const e=u.oxw().$implicit;u.Q6J("icon","global"==e.scope?"world":"people")}}const Hc=function(){return{icon:"people",value:"custom"}},Kc=function(){return{icon:"world",value:"global"}},zc=function(e,t){return[e,t]};function Vc(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"system-input-radio-button-group",42),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw().$implicit;return u.KtG(i.scope=t)})),u.qZA()}if(2&e){const e=u.oxw().$implicit,t=u.oxw();u.Q6J("disabled",!t.editableRoleScope)("ngModel",e.scope)("inputOptions",u.WLB(5,zc,u.DdM(3,Hc),u.DdM(4,Kc)))}}function Pc(e,t){if(1&e&&(u.TgZ(0,"div",12),u._uU(1),u.qZA()),2&e){const e=u.oxw().$implicit;u.xp6(1),u.Oqu(e.module)}}function $c(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"system-input-module",43),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw().$implicit;return u.KtG(i.module=t)})),u.qZA()}if(2&e){const e=u.oxw().$implicit,t=u.oxw();u.Q6J("filterModules",t.filterModules)("ngModel",e.module)}}function jc(e,t){if(1&e&&(u.TgZ(0,"div",12),u._uU(1),u.qZA()),2&e){const e=u.oxw().$implicit;u.xp6(1),u.Oqu(e.version)}}function Wc(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"input",44),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw().$implicit;return u.KtG(i.version=t)})),u.qZA()}if(2&e){const e=u.oxw().$implicit;u.Q6J("ngModel",e.version)}}function Xc(e,t){if(1&e&&(u.TgZ(0,"div",12),u._uU(1),u.qZA()),2&e){const e=u.oxw().$implicit;u.xp6(1),u.Oqu(e.package)}}function eg(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"input",44),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw().$implicit;return u.KtG(i.package=t)})),u.qZA()}if(2&e){const e=u.oxw().$implicit;u.Q6J("ngModel",e.package)}}function tg(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div",45)(1,"button",46),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw().$implicit,i=u.MAs(1),s=u.oxw();return u.KtG(s.deleteRoleModule(t,i))})),u._UZ(2,"system-button-icon",26),u.qZA()()}}function ig(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div",45)(1,"button",47),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw().index,i=u.MAs(1),s=u.oxw();return u.KtG(s.cancelEditing(i,t))})),u._UZ(2,"system-button-icon",48),u.qZA(),u.TgZ(3,"button",47),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw().$implicit,i=u.MAs(1),s=u.oxw();return u.KtG(s.saveRoleModule(t,i))})),u._UZ(4,"system-button-icon",49),u.qZA()()}}const sg=function(){return{editable:!0}};function ng(e,t){if(1&e&&(u.TgZ(0,"tr",27,28)(2,"td",29),u._UZ(3,"system-utility-icon",30),u.YNc(4,Gc,1,1,"system-utility-icon",31),u.TgZ(5,"span",32),u.YNc(6,Vc,1,8,"system-input-radio-button-group",33),u.qZA()(),u.TgZ(7,"td",34),u.YNc(8,Pc,2,1,"div",35),u.YNc(9,$c,1,2,"system-input-module",36),u.qZA(),u.TgZ(10,"td",34),u.YNc(11,jc,2,1,"div",35),u.YNc(12,Wc,1,1,"input",37),u.qZA(),u.TgZ(13,"td",34),u.YNc(14,Xc,2,1,"div",35),u.YNc(15,eg,1,1,"input",37),u.qZA(),u.TgZ(16,"td",38)(17,"div",39),u.YNc(18,tg,3,0,"div",40),u.YNc(19,ig,5,0,"div",40),u.qZA()()()),2&e){const e=t.$implicit,i=u.MAs(1);u.Q6J("system-view-provider",u.DdM(13,sg)),u.xp6(3),u.Q6J("icon","rows")("size","x-small"),u.xp6(1),u.Q6J("ngIf","edit"!=i.view.mode||!!e.id),u.xp6(2),u.Q6J("ngIf","edit"==i.view.mode&&!e.id),u.xp6(2),u.Q6J("ngIf","edit"!=i.view.mode),u.xp6(1),u.Q6J("ngIf","edit"==i.view.mode),u.xp6(2),u.Q6J("ngIf","edit"!=i.view.mode),u.xp6(1),u.Q6J("ngIf","edit"==i.view.mode),u.xp6(2),u.Q6J("ngIf","edit"!=i.view.mode),u.xp6(1),u.Q6J("ngIf","edit"==i.view.mode),u.xp6(3),u.Q6J("ngIf","edit"!=i.view.mode),u.xp6(1),u.Q6J("ngIf","edit"==i.view.mode)}}let lg=(()=>{var e;class RoleMenuManager{constructor(e,t,i,n,l){(0,s.Z)(this,"backend",void 0),(0,s.Z)(this,"modal",void 0),(0,s.Z)(this,"toast",void 0),(0,s.Z)(this,"cdRef",void 0),(0,s.Z)(this,"injector",void 0),(0,s.Z)(this,"roles",[]),(0,s.Z)(this,"selectedRoleId",void 0),(0,s.Z)(this,"roleModules",[]),(0,s.Z)(this,"isLoading",!1),(0,s.Z)(this,"editableRoleScope",void 0),(0,s.Z)(this,"filterModules",[]),(0,s.Z)(this,"viewProviders",void 0),(0,s.Z)(this,"roleModulesBackup",{}),this.backend=e,this.modal=t,this.toast=i,this.cdRef=n,this.injector=l}saveRoleModule(e,t){t.view.setViewMode(),delete this.roleModulesBackup[e.id],e.id||(e.id=this.backend.modelutilities.generateGuid()),e.sysuirole_id=this.selectedRoleId;const i="global"==e.scope?"sysuirolemodules":"sysuicustomrolemodules",s={...e};delete s.scope,this.backend.postRequest(`configuration/configurator/${i}/${e.id}`,null,{config:s}).subscribe({next:()=>{this.toast.sendToast("LBL_DATA_SAVED","success")}})}deleteRoleModule(e,t){t.view.setViewMode();const i="custom"==e.scope?"sysuicustomrolemodules":"sysuirolemodules";this.backend.deleteRequest(`configuration/configurator/${i}/${e.id}`).subscribe((()=>{this.toast.sendToast("MSG_SUCCESSFULLY_DELETED","success")})),this.roleModules=this.roleModules.filter((t=>t.id!=e.id)),this.saveSequence()}addRoleModule(){const e={id:"",sysuirole_id:this.selectedRoleId,module:"",sequence:this.roleModules.length,version:"",package:"",scope:"custom"};this.roleModules.push(e),this.cdRef.detectChanges(),this.viewProviders.last.view.setEditMode()}ngOnInit(){this.loadRoles()}loadRoleModules(e){this.isLoading=!0,this.cdRef.detectChanges(),this.backend.getRequest(`configuration/spiceui/core/rolemodules/${e}`).subscribe({next:e=>{this.isLoading=!1,this.roleModules=e.sort(((e,t)=>e.sequence-t.sequence)),this.filterModules=this.roleModules.map((e=>e.module))}})}handleSelectedItemChange(e){this.loadRoleModules(e),this.editableRoleScope="global"==this.roles.find((t=>t.id==e)).scope,this.selectedRoleId=this.roles.find((t=>t.id==e)).id}startEditing(e,t){this.roleModulesBackup[t.id]={...t},e.view.setEditMode()}cancelEditing(e,t){this.roleModules[t].id?this.roleModules[t]=this.roleModulesBackup[this.roleModules[t].id]:this.roleModules.splice(t,1),e.view.setViewMode()}deleteRole(e){const t=this.roles.find((t=>t.id==e)),i="global"==t.scope?"sysuiroles":"sysuicustomroles";this.backend.deleteRequest(`configuration/configurator/${i}/${t.id}`).subscribe((()=>{this.toast.sendToast("MSG_SUCCESSFULLY_DELETED","success")})),this.roles=this.roles.filter((e=>e.id!=t.id))}editRole(e){const t=this.roles.find((t=>t.id==e));this.openEditRoleModal(t)}openEditRoleModal(e){this.modal.openModal("RoleMenuManagerEditRoleModal").subscribe((t=>{const i=this.roles.indexOf(e);e&&(t.instance.newRole={...e}),t.instance.save$.subscribe({next:t=>{e?this.roles.splice(i,1,t):this.roles.push(t)}})}))}addRole(){this.openEditRoleModal()}loadRoles(){this.isLoading=!0,this.cdRef.detectChanges(),this.backend.getRequest("configuration/spiceui/core/roles").subscribe({next:e=>{this.isLoading=!1,this.roles=e.map((e=>({...e}))),this.handleSelectedItemChange(e[0].id)}})}drop(e){(0,g.bA)(e.container.data,e.previousIndex,e.currentIndex),this.saveSequence()}saveSequence(){this.roleModules.forEach(((e,t)=>{e.sequence=t}));const e=this.roleModules.filter((e=>"global"==e.scope)).map((e=>{const t={...e};return delete t.scope,t}));e.length>0&&this.backend.postRequest("configuration/configurator/sysuirolemodules",null,{config:e});const t=this.roleModules.filter((e=>"custom"==e.scope)).map((e=>{const t={...e};return delete t.scope,t}));t.length>0&&this.backend.postRequest("configuration/configurator/sysuicustomrolemodules",null,{config:t})}}return e=RoleMenuManager,(0,s.Z)(RoleMenuManager,"ɵfac",(function(t){return new(t||e)(u.Y36(h.y),u.Y36(x.o),u.Y36(v.A),u.Y36(u.sBO),u.Y36(u.zs3))})),(0,s.Z)(RoleMenuManager,"ɵcmp",u.Xpm({type:e,selectors:[["role-menu-manager"]],viewQuery:function(e,t){if(1&e&&u.Gf(Fc.V,5),2&e){let e;u.iGM(e=u.CRH())&&(t.viewProviders=e)}},decls:30,vars:4,consts:[["titlelabel","LBL_ROLE_MENU_MANAGER"],["system-to-bottom-noscroll","",1,"slds-grid",3,"system-overlay-loading-spinner"],[1,"slds-size--1-of-5","slds-scrollable--y","slds-tabs_default__content","slds-p-around--none","slds-border--right"],[1,"slds-has-dividers_around-space","slds-p-around--x-small"],["class","slds-grid slds-grid--align-spread slds-item",4,"ngFor","ngForOf"],[1,"slds-align--absolute-center","slds-border--top","slds-p-around--small",2,"position","sticky","bottom","0"],[1,"slds-align--absolute-center","slds-button","slds-button--icon","slds-button--icon-border",2,"border-radius","50%",3,"click"],["icon","add","size","medium"],[1,"slds-size--4-of-5","slds-scrollable--y"],[1,"slds-table","slds-table--bordered","slds-table--cell-buffer","slds-table--fixed-layout","slds-text-align_center"],[1,"slds-line-height_reset"],["scope","col",1,"slds-text-align_left",2,"width","8rem"],[1,"slds-truncate"],["scope","col",1,"slds-text-align_left"],["label","LBL_MODULE"],["label","LBL_VERSION"],["label","LBL_PACKAGE"],["scope","col",1,"slds-cell_action-mode"],["cdkDropList","",1,"dragboundary",3,"cdkDropListData","cdkDropListDropped"],["class","slds-hint-parent","cdkDrag","","cdkDragBoundary",".dragboundary",3,"system-view-provider",4,"ngFor","ngForOf"],[1,"slds-grid","slds-grid--align-spread","slds-item"],["size","x-small",1,"slds-p-around--xx-small",3,"icon"],["href","javascript:void(0);",1,"slds-text-link_reset","slds-text-align_center","slds-p-around--xx-small",3,"click"],[1,"slds-button","slds-button--icon","slds-col_bump-left"],[1,"slds-button","slds-button--icon",3,"click"],["icon","edit","size","small"],["icon","delete","size","small"],["cdkDrag","","cdkDragBoundary",".dragboundary",1,"slds-hint-parent",3,"system-view-provider"],["viewProvider","system-view-provider"],[1,"slds-text-align_left",2,"width","8rem"],["cdkDragHandle","",1,"slds-p-right--xx-small",2,"cursor","move",3,"icon","size"],["style","width:4.25rem","size","x-small",3,"icon",4,"ngIf"],[1,"slds-form-element__control"],[3,"disabled","ngModel","inputOptions","ngModelChange",4,"ngIf"],[1,"slds-text-align_left"],["class","slds-truncate",4,"ngIf"],[3,"filterModules","ngModel","ngModelChange",4,"ngIf"],["class","slds-input",3,"ngModel","ngModelChange",4,"ngIf"],[1,"slds-text-align_center"],[1,"slds-truncate","slds-cell_action-mode"],["role","group","class","slds-button slds-float--right ng-star-inserted",4,"ngIf"],["size","x-small",2,"width","4.25rem",3,"icon"],[3,"disabled","ngModel","inputOptions","ngModelChange"],[3,"filterModules","ngModel","ngModelChange"],[1,"slds-input",3,"ngModel","ngModelChange"],["role","group",1,"slds-button","slds-float--right","ng-star-inserted"],[1,"slds-button","slds-button--icon","slds-p-around--xx-small",3,"click"],[1,"slds-button","slds-button--icon-border",3,"click"],["icon","close","size","small"],["icon","check","size","small"]],template:function(e,t){1&e&&(u.TgZ(0,"workbench-header",0),u._UZ(1,"workbench-header-controls"),u.qZA(),u.TgZ(2,"div",1)(3,"div",2)(4,"ul",3),u.YNc(5,Rc,9,2,"li",4),u.qZA(),u.TgZ(6,"div",5)(7,"button",6),u.NdJ("click",(function(){return t.addRole()})),u._UZ(8,"system-button-icon",7),u.qZA()()(),u.TgZ(9,"div",8)(10,"table",9)(11,"thead")(12,"tr",10)(13,"th",11),u._UZ(14,"div",12),u.qZA(),u.TgZ(15,"th",13)(16,"div",12),u._UZ(17,"system-label",14),u.qZA()(),u.TgZ(18,"th",13)(19,"div",12),u._UZ(20,"system-label",15),u.qZA()(),u.TgZ(21,"th",13)(22,"div",12),u._UZ(23,"system-label",16),u.qZA()(),u._UZ(24,"th",17),u.qZA()(),u.TgZ(25,"tbody",18),u.NdJ("cdkDropListDropped",(function(e){return t.drop(e)})),u.YNc(26,ng,20,14,"tr",19),u.qZA()(),u.TgZ(27,"div",5)(28,"button",6),u.NdJ("click",(function(){return t.addRoleModule()})),u._UZ(29,"system-button-icon",7),u.qZA()()()()),2&e&&(u.xp6(2),u.Q6J("system-overlay-loading-spinner",t.isLoading),u.xp6(3),u.Q6J("ngForOf",t.roles),u.xp6(20),u.Q6J("cdkDropListData",t.roleModules),u.xp6(1),u.Q6J("ngForOf",t.roleModules))},dependencies:[n.sg,n.O5,l.Fj,l.JJ,l.On,T.J,Un.a,Yc.p,L._,m.r,C.t,Fc.V,$s._,g.Wj,g.Zt,g.Bh,Xe,tt],encapsulation:2})),RoleMenuManager})();var og=i(3934),ag=i(3095);let dg=(()=>{var e;class RoleMenuManagerEditRoleModal{constructor(e,t,i,n,l){(0,s.Z)(this,"metadata",void 0),(0,s.Z)(this,"modelutilities",void 0),(0,s.Z)(this,"backend",void 0),(0,s.Z)(this,"toast",void 0),(0,s.Z)(this,"modal",void 0),(0,s.Z)(this,"self",void 0),(0,s.Z)(this,"newRole",{id:"",identifier:"",name:"",label:"",icon:"",systemdefault:!1,portaldefault:!1,showsearch:!0,showfavorites:!0,description:"",default_dashboard:"",default_dashboardset:"",version:"",package:"",scope:"custom",scope_icon:"",systemTreeDefs:{}}),(0,s.Z)(this,"save$",new pn.x),(0,s.Z)(this,"radioOptions",[{label:"custom",value:"custom"},{label:"global",value:"global"}]),this.metadata=e,this.modelutilities=t,this.backend=i,this.toast=n,this.modal=l}close(){this.self.destroy()}canSave(){return!!(this.newRole.name&&this.newRole.label&&this.newRole.identifier)}saveRole(){this.newRole.id||(this.newRole.id=this.modelutilities.generateGuid());const e="custom"==this.newRole.scope?"sysuicustomroles":"sysuiroles",t={...this.newRole};delete t.scope,delete t.scope_icon,delete t.systemTreeDefs;let i=this.modal.await("LBL_LOADING");this.backend.postRequest(`configuration/configurator/${e}/${this.newRole.id}`,null,{config:t}).subscribe({next:()=>{this.newRole.scope_icon="custom"==this.newRole.scope?"people":"world",this.save$.next(this.newRole),this.save$.complete(),i.emit(!0),this.toast.sendToast("LBL_DATA_SAVED","success")}}),this.self.destroy()}}return e=RoleMenuManagerEditRoleModal,(0,s.Z)(RoleMenuManagerEditRoleModal,"ɵfac",(function(t){return new(t||e)(u.Y36(f.Pu),u.Y36(Z.A),u.Y36(h.y),u.Y36(v.A),u.Y36(x.o))})),(0,s.Z)(RoleMenuManagerEditRoleModal,"ɵcmp",u.Xpm({type:e,selectors:[["role-menu-manager-edit-role-modal"]],decls:73,vars:21,consts:[[3,"close"],["label","LBL_ROLE"],[1,"slds-height_full"],[1,"slds-form-element__control"],[1,"slds-form-element__label"],["label","LBL_SCOPE"],[3,"ngModel","inputOptions","disabled","ngModelChange"],[1,"slds-grid"],[1,"slds-form-element__control","slds-size--1-of-4","slds-p-right--xxx-small"],[1,"slds-required"],["label","LBL_NAME"],[3,"ngModel","ngModelChange"],["label","LBL_LABEL"],["label","LBL_IDENTIFIER"],["maxlength","3",3,"ngModel","ngModelChange"],["label","LBL_ICON"],[1,"slds-grid","slds-m-top--medium"],[3,"ngModel","asinteger","ngModelChange"],["label","LBL_SYSTEM_DEFAULT"],["label","LBL_PORTAL_DEFAULT"],["label","LBL_SHOW_SEARCH"],["label","LBL_SHOW_FAVORITES"],[1,"slds-form-element__control","slds-size--4-of-4","slds-p-right--xxx-small"],["label","LBL_DESCRIPTION"],[1,"slds-textarea","slds-scrollable--y","slds-m-vertical--xx-small","ng-untouched","ng-pristine","ng-valid",2,"min-height","80px","max-height","300px","height","80px",3,"ngModel","ngModelChange"],["label","LBL_DEFAULT_DASHBOARD"],["label","LBL_DEFAULT_DASHBOARD_SET"],["label","LBL_VERSION"],["label","LBL_PACKAGE"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CLOSE"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_SAVE"]],template:function(e,t){1&e&&(u.TgZ(0,"system-modal")(1,"system-modal-header",0),u.NdJ("close",(function(){return t.close()})),u._UZ(2,"system-label",1),u.qZA(),u.TgZ(3,"system-modal-content")(4,"div",2)(5,"div",3)(6,"label",4),u._UZ(7,"system-label",5),u.qZA(),u.TgZ(8,"system-input-radio-button-group",6),u.NdJ("ngModelChange",(function(e){return t.newRole.scope=e})),u.qZA()(),u.TgZ(9,"div",7)(10,"div",8)(11,"label",4)(12,"abbr",9),u._uU(13,"* "),u.qZA(),u._UZ(14,"system-label",10),u.qZA(),u.TgZ(15,"system-input-text",11),u.NdJ("ngModelChange",(function(e){return t.newRole.name=e})),u.qZA()(),u.TgZ(16,"div",8)(17,"label",4)(18,"abbr",9),u._uU(19,"* "),u.qZA(),u._UZ(20,"system-label",12),u.qZA(),u.TgZ(21,"system-input-label",11),u.NdJ("ngModelChange",(function(e){return t.newRole.label=e})),u.qZA()()(),u.TgZ(22,"div",7)(23,"div",8)(24,"label",4)(25,"abbr",9),u._uU(26,"* "),u.qZA(),u._UZ(27,"system-label",13),u.qZA(),u.TgZ(28,"system-input-text",14),u.NdJ("ngModelChange",(function(e){return t.newRole.identifier=e})),u.qZA()(),u.TgZ(29,"div",8)(30,"label",4),u._UZ(31,"system-label",15),u.qZA(),u.TgZ(32,"system-input-text",11),u.NdJ("ngModelChange",(function(e){return t.newRole.icon=e})),u.qZA()()(),u.TgZ(33,"div",16)(34,"div",8)(35,"system-checkbox",17),u.NdJ("ngModelChange",(function(e){return t.newRole.systemdefault=e})),u._UZ(36,"system-label",18),u.qZA()(),u.TgZ(37,"div",8)(38,"system-checkbox",17),u.NdJ("ngModelChange",(function(e){return t.newRole.portaldefault=e})),u._UZ(39,"system-label",19),u.qZA()(),u.TgZ(40,"div",8)(41,"system-checkbox",17),u.NdJ("ngModelChange",(function(e){return t.newRole.showsearch=e})),u._UZ(42,"system-label",20),u.qZA()(),u.TgZ(43,"div",8)(44,"system-checkbox",17),u.NdJ("ngModelChange",(function(e){return t.newRole.showfavorites=e})),u._UZ(45,"system-label",21),u.qZA()()(),u.TgZ(46,"div",22)(47,"label",4),u._UZ(48,"system-label",23),u.qZA(),u.TgZ(49,"textarea",24),u.NdJ("ngModelChange",(function(e){return t.newRole.description=e})),u.qZA()(),u.TgZ(50,"div",7)(51,"div",8)(52,"label",4),u._UZ(53,"system-label",25),u.qZA(),u.TgZ(54,"system-input-dashboard",11),u.NdJ("ngModelChange",(function(e){return t.newRole.default_dashboard=e})),u.qZA()(),u.TgZ(55,"div",8)(56,"label",4),u._UZ(57,"system-label",26),u.qZA(),u.TgZ(58,"system-input-dashboardset",11),u.NdJ("ngModelChange",(function(e){return t.newRole.default_dashboardset=e})),u.qZA()()(),u.TgZ(59,"div",7)(60,"div",8)(61,"label",4),u._UZ(62,"system-label",27),u.qZA(),u.TgZ(63,"system-input-text",11),u.NdJ("ngModelChange",(function(e){return t.newRole.version=e})),u.qZA()(),u.TgZ(64,"div",8)(65,"label",4),u._UZ(66,"system-label",28),u.qZA(),u.TgZ(67,"system-input-text",11),u.NdJ("ngModelChange",(function(e){return t.newRole.package=e})),u.qZA()()()()(),u.TgZ(68,"system-modal-footer")(69,"button",29),u.NdJ("click",(function(){return t.close()})),u._UZ(70,"system-label",30),u.qZA(),u.TgZ(71,"button",31),u.NdJ("click",(function(){return t.saveRole()})),u._UZ(72,"system-label",32),u.qZA()()()),2&e&&(u.xp6(8),u.Q6J("ngModel",t.newRole.scope)("inputOptions",t.radioOptions)("disabled",!!t.newRole.id),u.xp6(7),u.Q6J("ngModel",t.newRole.name),u.xp6(6),u.Q6J("ngModel",t.newRole.label),u.xp6(7),u.Q6J("ngModel",t.newRole.identifier),u.xp6(4),u.Q6J("ngModel",t.newRole.icon),u.xp6(3),u.Q6J("ngModel",t.newRole.systemdefault)("asinteger",!0),u.xp6(3),u.Q6J("ngModel",t.newRole.portaldefault)("asinteger",!0),u.xp6(3),u.Q6J("ngModel",t.newRole.showsearch)("asinteger",!0),u.xp6(3),u.Q6J("ngModel",t.newRole.showfavorites)("asinteger",!0),u.xp6(5),u.Q6J("ngModel",t.newRole.description),u.xp6(5),u.Q6J("ngModel",t.newRole.default_dashboard),u.xp6(4),u.Q6J("ngModel",t.newRole.default_dashboardset),u.xp6(5),u.Q6J("ngModel",t.newRole.version),u.xp6(4),u.Q6J("ngModel",t.newRole.package),u.xp6(4),u.Q6J("disabled",!t.canSave()))},dependencies:[l.Fj,l.JJ,l.nD,l.On,Q.U,J.Z,S.$,Yc.p,L._,nt.j,lt.x,ot.p,at.y,og.l,ag.F],encapsulation:2})),RoleMenuManagerEditRoleModal})();function rg(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div",10)(1,"div",11)(2,"label",12)(3,"abbr",13),u._uU(4,"* "),u.qZA(),u._UZ(5,"system-label",14),u.qZA(),u.TgZ(6,"system-input-password",15),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw();return u.KtG(i.loginDetails.token=t)})),u.qZA()()()}if(2&e){const e=u.oxw();u.xp6(6),u.Q6J("ngModel",e.loginDetails.token)}}function cg(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div",10)(1,"div",16)(2,"label",12)(3,"abbr",13),u._uU(4,"* "),u.qZA(),u._UZ(5,"system-label",17),u.qZA(),u.TgZ(6,"system-input-text",15),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw();return u.KtG(i.loginDetails.username=t)})),u.qZA()(),u.TgZ(7,"div",16)(8,"label",12)(9,"abbr",13),u._uU(10,"* "),u.qZA(),u._UZ(11,"system-label",18),u.qZA(),u.TgZ(12,"system-input-password",15),u.NdJ("ngModelChange",(function(t){u.CHM(e);const i=u.oxw();return u.KtG(i.loginDetails.password=t)})),u.qZA()()()}if(2&e){const e=u.oxw();u.xp6(6),u.Q6J("ngModel",e.loginDetails.username),u.xp6(6),u.Q6J("ngModel",e.loginDetails.password)}}function gg(e,t){if(1&e&&(u.TgZ(0,"div",19),u._uU(1),u.qZA()),2&e){const e=t.$implicit;u.xp6(1),u.hij("",e," ")}}let ug=(()=>{var e;class GitPullFromRepository{constructor(e,t,i){(0,s.Z)(this,"backend",void 0),(0,s.Z)(this,"toast",void 0),(0,s.Z)(this,"modal",void 0),(0,s.Z)(this,"loginFormChosen",[{label:"username",value:"username"},{label:"token",value:"token"}]),(0,s.Z)(this,"loginDetails",{username:"",password:"",token:"",loginOption:"token"}),(0,s.Z)(this,"data",void 0),(0,s.Z)(this,"passwordCondition",!0),(0,s.Z)(this,"tokenCondition",!0),(0,s.Z)(this,"usernameCondition",!0),(0,s.Z)(this,"emailCondition",!0),(0,s.Z)(this,"pwRegexp",new RegExp("(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.{6,})")),(0,s.Z)(this,"gitHubTokenRegexp",new RegExp("^ghp_[a-zA-Z0-9]{36}$")),(0,s.Z)(this,"userRegexp",new RegExp("^[a-zA-Z0-9-]+$")),(0,s.Z)(this,"emailRegexp",new RegExp("^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$")),this.backend=e,this.toast=t,this.modal=i}loginCheck(){this.passwordCondition=this.loginDetails.password.length>0&&this.pwRegexp.test(this.loginDetails.password),this.tokenCondition=this.loginDetails.token.length>0&&(this.gitHubTokenRegexp.test(this.loginDetails.token)||this.pwRegexp.test(this.loginDetails.token)),this.usernameCondition=this.userRegexp.test(this.loginDetails.username)||this.emailRegexp.test(this.loginDetails.username)}pullFromRepository(e){if(this.loginCheck(),"token"==this.loginDetails.loginOption)if(this.tokenCondition){let t=this.modal.await("LBL_LOADING");delete this.loginDetails.username,delete this.loginDetails.password,delete this.loginDetails.loginOption,this.backend.postRequest("admin/repair/pull",null,e).subscribe((e=>{this.data=e.output,t.emit(!0),this.toast.sendToast("LBL_DATA_SAVED","success")}))}else this.tokenCondition||this.toast.sendToast("token is empty or incorrect","error");else if("username"==this.loginDetails.loginOption)if(this.usernameCondition&&this.passwordCondition){let t=this.modal.await("LBL_LOADING");this.backend.postRequest("admin/repair/pull",null,e).subscribe((e=>{this.data=e.output,t.emit(!0),this.toast.sendToast("LBL_DATA_SAVED","success")}))}else this.usernameCondition||this.passwordCondition?this.usernameCondition?this.passwordCondition||this.toast.sendToast("password is empty or incorrect","error"):this.toast.sendToast("username is empty or incorrect","error"):this.toast.sendToast("username and password is empty or incorrect","error")}}return e=GitPullFromRepository,(0,s.Z)(GitPullFromRepository,"ɵfac",(function(t){return new(t||e)(u.Y36(h.y),u.Y36(v.A),u.Y36(x.o))})),(0,s.Z)(GitPullFromRepository,"ɵcmp",u.Xpm({type:e,selectors:[["git-pull-from-repository"]],decls:13,vars:5,consts:[["titlelabel","LBL_PULL_FROM_GIT_REPOSITORY"],[1,"slds-button","slds-button_brand",3,"click"],["label","LBL_GIT_PULL"],[1,"slds-form-element__control","slds-p-around--small"],[1,"slds-text-heading--small","slds-p-around--small"],[1,"slds-form-element__control","slds-p-left--small"],[3,"ngModel","inputOptions","ngModelChange"],["class","slds-grid slds-grid--vertical-align-center slds-p-around--small",4,"ngIf","ngIfElse"],["username",""],["class","slds-form-element__control slds-p-around--small slds-scrollable--y slds-m-left_small",4,"ngFor","ngForOf"],[1,"slds-grid","slds-grid--vertical-align-center","slds-p-around--small"],[1,"slds-form-element__control","slds-size--2-of-4","slds-p-around--small"],[1,"slds-form-element__label"],[1,"slds-required"],["label","LBL_AUTH_TOKEN"],[3,"ngModel","ngModelChange"],[1,"slds-form-element__control","slds-size--1-of-4","slds-p-around--small"],["label","LBL_USER_NAME"],["label","LBL_PASSWORD"],[1,"slds-form-element__control","slds-p-around--small","slds-scrollable--y","slds-m-left_small"]],template:function(e,t){if(1&e&&(u.TgZ(0,"workbench-header",0)(1,"workbench-header-controls")(2,"button",1),u.NdJ("click",(function(){return t.pullFromRepository(t.loginDetails)})),u._UZ(3,"system-label",2),u.qZA()()(),u.TgZ(4,"div",3)(5,"h3",4),u._uU(6," Login Options "),u.qZA(),u.TgZ(7,"div",5)(8,"system-input-radio-button-group",6),u.NdJ("ngModelChange",(function(e){return t.loginDetails.loginOption=e})),u.qZA()()(),u.YNc(9,rg,7,1,"div",7),u.YNc(10,cg,13,2,"ng-template",null,8,u.W1O),u.YNc(12,gg,2,1,"div",9)),2&e){const e=u.MAs(11);u.xp6(8),u.Q6J("ngModel",t.loginDetails.loginOption)("inputOptions",t.loginFormChosen),u.xp6(1),u.Q6J("ngIf","token"==t.loginDetails.loginOption)("ngIfElse",e),u.xp6(3),u.Q6J("ngForOf",t.data)}},dependencies:[n.sg,n.O5,l.JJ,l.On,J.Z,ho.Z,Yc.p,L._,Xe,tt],encapsulation:2})),GitPullFromRepository})();function mg(e,t){if(1&e&&(u.TgZ(0,"div",2),u._uU(1),u.qZA()),2&e){const e=t.$implicit;u.xp6(1),u.Oqu(e)}}let pg=(()=>{var e;class GitStatusOfRepository{ngOnInit(){this.gitStatusRepository()}constructor(e,t,i){(0,s.Z)(this,"backend",void 0),(0,s.Z)(this,"toast",void 0),(0,s.Z)(this,"modal",void 0),(0,s.Z)(this,"data",void 0),this.backend=e,this.toast=t,this.modal=i}gitStatusRepository(){let e=this.modal.await("LBL_LOADING");this.backend.postRequest("admin/repair/status",null).subscribe((t=>{this.data=t.output,e.emit(!0)}))}}return e=GitStatusOfRepository,(0,s.Z)(GitStatusOfRepository,"ɵfac",(function(t){return new(t||e)(u.Y36(h.y),u.Y36(v.A),u.Y36(x.o))})),(0,s.Z)(GitStatusOfRepository,"ɵcmp",u.Xpm({type:e,selectors:[["git-status-of-repository"]],decls:2,vars:1,consts:[["titlelabel","LBL_GIT_STATUS"],["class","slds-form-element__control slds-p-around--medium slds-scrollable--y",4,"ngFor","ngForOf"],[1,"slds-form-element__control","slds-p-around--medium","slds-scrollable--y"]],template:function(e,t){1&e&&(u._UZ(0,"workbench-header",0),u.YNc(1,mg,2,1,"div",1)),2&e&&(u.xp6(1),u.Q6J("ngForOf",t.data))},dependencies:[n.sg,Xe],encapsulation:2})),GitStatusOfRepository})();function hg(e,t){if(1&e&&(u.TgZ(0,"option",15),u._uU(1),u.qZA()),2&e){const e=t.$implicit;u.Q6J("value",e),u.xp6(1),u.Oqu(e)}}let fg=(()=>{var e;class HooksManager{constructor(e){(0,s.Z)(this,"metadata",void 0),(0,s.Z)(this,"hook",void 0),(0,s.Z)(this,"activeTab","logic"),(0,s.Z)(this,"_module","*"),(0,s.Z)(this,"modules",void 0),(0,s.Z)(this,"hooksManager",[{label:"Logic Hooks",value:"logic"},{label:"Web Hooks",value:"web"}]),this.metadata=e,this.modules=this.metadata.getModules(),this.modules.sort()}get module(){return this._module}set module(e){e!=this._module&&(this._module=e)}}return e=HooksManager,(0,s.Z)(HooksManager,"ɵfac",(function(t){return new(t||e)(u.Y36(f.Pu))})),(0,s.Z)(HooksManager,"ɵcmp",u.Xpm({type:e,selectors:[["hooks-manager"]],decls:18,vars:4,consts:[["titlelabel","LBL_HOOKS_MANAGER"],[1,"slds-form-element__control","slds-grid","slds-p-left--small"],[1,"slds-p-right--small"],[1,"slds-form-element","slds-grid","slds-grid--vertical-align-center","slds-size--4-of-4"],["for","moduleselect",1,"slds-form-element__label"],["label","LBL_MODULE"],[1,"slds-form-element__control"],[1,"slds-select_container"],["id","moduleselect",1,"slds-select",3,"ngModel","ngModelChange"],["value","*"],[3,"value",4,"ngFor","ngForOf"],[1,"slds-tabs_default",2,"background-color","transparent"],[1,"slds-grid",3,"ngClass"],[1,"slds-size--1-of-1"],[3,"ngClass"],[3,"value"]],template:function(e,t){1&e&&(u.TgZ(0,"workbench-header",0)(1,"workbench-header-controls")(2,"div",1)(3,"div",2)(4,"div",3)(5,"label",4),u._UZ(6,"system-label",5),u.qZA(),u.TgZ(7,"div",6)(8,"div",7)(9,"select",8),u.NdJ("ngModelChange",(function(e){return t.module=e})),u.TgZ(10,"option",9),u._uU(11,"*"),u.qZA(),u.YNc(12,hg,2,2,"option",10),u.qZA()()()()()()()(),u.TgZ(13,"div",11)(14,"div",12),u._UZ(15,"hooks-manager-hooks",13),u.qZA(),u.TgZ(16,"div",14),u._UZ(17,"web-hooks-manager",13),u.qZA()()),2&e&&(u.xp6(9),u.Q6J("ngModel",t.module),u.xp6(3),u.Q6J("ngForOf",t.modules),u.xp6(2),u.Q6J("ngClass","logic"==t.activeTab?"slds-show":"slds-hide"),u.xp6(2),u.Q6J("ngClass","web"==t.activeTab?"slds-show":"slds-hide"))},encapsulation:2})),HooksManager})();function bg(e,t){1&e&&(u.TgZ(0,"div",23),u._UZ(1,"system-spinner"),u.qZA())}function Zg(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"tr",24)(1,"td",6),u._UZ(2,"system-utility-icon",25),u.TgZ(3,"system-utility-icon",26),u.NdJ("click",(function(t){const i=u.CHM(e).$implicit,s=u.oxw();return u.KtG(s.toggleValue(t,i))})),u.qZA()(),u.TgZ(4,"td",27)(5,"div",7),u._uU(6),u.qZA()(),u.TgZ(7,"td",27)(8,"div",7),u._uU(9),u.qZA()(),u.TgZ(10,"td",28)(11,"div",7),u._uU(12),u.qZA()(),u.TgZ(13,"td",27)(14,"div",29),u._uU(15),u.qZA()(),u.TgZ(16,"td",27)(17,"div",7),u._uU(18),u.qZA()(),u.TgZ(19,"td",30)(20,"button",31),u.NdJ("click",(function(){const t=u.CHM(e).$implicit,i=u.oxw();return u.KtG(i.editHook(t.id))})),u._UZ(21,"system-button-icon",32),u.qZA(),u.TgZ(22,"button",31),u.NdJ("click",(function(){const t=u.CHM(e).$implicit,i=u.oxw();return u.KtG(i.deleteHook(t.id))})),u._UZ(23,"system-button-icon",33),u.qZA()()()}if(2&e){const e=t.$implicit,i=u.oxw();u.xp6(2),u.Q6J("icon","global"==e.type?"world":"people"),u.xp6(1),u.Q6J("colorclass",i.getStatusColor(e)),u.xp6(3),u.Oqu(e.module),u.xp6(3),u.Oqu(e.event),u.xp6(3),u.Oqu(e.hook_index),u.xp6(3),u.Oqu(e.hook_class),u.xp6(3),u.Oqu(e.hook_method)}}let _g=(()=>{var e;class HooksManagerHooks{constructor(e,t,i,n,l,o,a){(0,s.Z)(this,"backend",void 0),(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"metadata",void 0),(0,s.Z)(this,"modelutilities",void 0),(0,s.Z)(this,"toast",void 0),(0,s.Z)(this,"modal",void 0),(0,s.Z)(this,"hooksManager",void 0),(0,s.Z)(this,"loading",!1),(0,s.Z)(this,"hooks",[]),this.backend=e,this.language=t,this.metadata=i,this.modelutilities=n,this.toast=l,this.modal=o,this.hooksManager=a}ngOnInit(){this.getLogicHooks()}getLogicHooks(){this.loading=!0,this.backend.getRequest("configuration/spiceui/core/module/hooks").subscribe((e=>{this.hooks=e,this.loading=!1}))}get allModuleHooks(){return"*"==this.hooksManager._module?this.hooks:this.hooks.filter((e=>e.module==this.hooksManager.module))}deleteHook(e){this.modal.confirm("MSG_DELETE_RECORD","MSG_DELETE_RECORD").subscribe({next:t=>{if(t){const t=this.hooks.find((t=>t.id==e)),i="global"==t.type?"syshooks":"syscustomhooks";this.backend.deleteRequest(`configuration/configurator/${i}/${t.id}`).subscribe((()=>{this.toast.sendToast("MSG_SUCCESSFULLY_DELETED","success")})),this.hooks=this.hooks.filter((e=>e.id!=t.id))}}})}editHook(e){const t=this.hooks.find((t=>t.id==e));this.openEditHookModal(t)}openEditHookModal(e){this.modal.openModal("HooksManagerHooksEditModal").subscribe((t=>{const i=this.hooks.indexOf(e);e&&(t.instance.newLogicHook={...e}),t.instance.save$.subscribe({next:t=>{e?this.hooks.splice(i,1,t):this.hooks.push(t)}})}))}addLogicHook(){this.openEditHookModal()}getStatusColor(e){return 1==e.hook_active?"slds-icon-text-success":0==e.hook_active?"slds-icon-text-light":void 0}toggleValue(e,t){e.stopPropagation();const i=1==t.hook_active?"MSG_DEACTIVATE":"MSG_ACTIVATE",s=1==t.hook_active?"LBL_DEACTIVATED":"LBL_ACTIVATED";this.modal.confirm(i,i).subscribe({next:e=>{if(e){t.hook_active=1==t.hook_active?0:1;const e="global"==t.type?"syshooks":"syscustomhooks",i={...t};delete i.type,this.backend.postRequest(`configuration/configurator/${e}/${t.id}`,null,{config:i}).subscribe({next:()=>{this.toast.sendToast(s,"success")}})}}})}}return e=HooksManagerHooks,(0,s.Z)(HooksManagerHooks,"ɵfac",(function(t){return new(t||e)(u.Y36(h.y),u.Y36(b.d),u.Y36(f.Pu),u.Y36(Z.A),u.Y36(v.A),u.Y36(x.o),u.Y36(fg))})),(0,s.Z)(HooksManagerHooks,"ɵcmp",u.Xpm({type:e,selectors:[["hooks-manager-hooks"]],decls:31,vars:2,consts:[["system-to-bottom-noscroll",""],["class","slds-align--absolute-center slds-height_full",4,"ngIf"],[1,"slds-tabs_default",2,"background-color","transparent"],["system-to-bottom","",1,"slds-size--4-of-4","slds-scrollable--y"],[1,"slds-table","slds-table--bordered","slds-table--cell-buffer","slds-table--fixed-layout","slds-text-align_center","slds-table--header-fixed"],[1,""],["scope","col",1,"slds-text-align_left",2,"width","5rem"],[1,"slds-truncate"],["scope","col",1,"slds-text-align_left"],[1,"slds-truncate","slds-m-left--x-small","slds-m-vertical--xx-small"],["label","LBL_MODULE"],[1,"slds-truncate","slds-m-left--x-small"],["label","LBL_EVENT"],["scope","col",1,"slds-text-align_center",2,"width","5rem"],["label","LBL_INDEX"],["scope","col",1,"slds-text-align_left",2,"width","40rem"],["label","LBL_CLASS"],["label","LBL_METHOD"],["scope","col",1,"slds-text-align_right"],["class","slds-hint-parent",4,"ngFor","ngForOf"],[1,"slds-p-around--x-small"],[1,"slds-align--absolute-center","slds-button","slds-button--icon",2,"border-radius","50%",3,"click"],["icon","add","size","medium"],[1,"slds-align--absolute-center","slds-height_full"],[1,"slds-hint-parent"],["size","x-small",1,"slds-p-right--small",3,"icon"],["size","xx-small","icon","light_bulb",1,"slds-p-right--xx-small","slds-button","slds-button--icon","slds-col_bump-left",3,"colorclass","click"],[1,"slds-text-align_left"],[1,"slds-text-align_center",2,"width","5rem"],[1,"slds-wrap"],[1,"slds-text-align_right"],[1,"slds-button","slds-button--icon","slds-col_bump-left","--slds-c-button-color-border",3,"click"],["icon","edit"],["icon","clear"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0),u.YNc(1,bg,2,0,"div",1),u.TgZ(2,"div",2)(3,"div",3)(4,"table",4)(5,"thead")(6,"tr",5)(7,"th",6),u._UZ(8,"div",7),u.qZA(),u.TgZ(9,"th",8)(10,"div",9),u._UZ(11,"system-label",10),u.qZA()(),u.TgZ(12,"th",8)(13,"div",11),u._UZ(14,"system-label",12),u.qZA()(),u.TgZ(15,"th",13)(16,"div",7),u._UZ(17,"system-label",14),u.qZA()(),u.TgZ(18,"th",15)(19,"div",11),u._UZ(20,"system-label",16),u.qZA()(),u.TgZ(21,"th",8)(22,"div",11),u._UZ(23,"system-label",17),u.qZA()(),u.TgZ(24,"th",18),u._UZ(25,"div",7),u.qZA()()(),u.TgZ(26,"tbody"),u.YNc(27,Zg,24,7,"tr",19),u.qZA()(),u.TgZ(28,"div",20)(29,"button",21),u.NdJ("click",(function(){return t.addLogicHook()})),u._UZ(30,"system-button-icon",22),u.qZA()()()()()),2&e&&(u.xp6(1),u.Q6J("ngIf",t.loading),u.xp6(26),u.Q6J("ngForOf",t.allModuleHooks))},dependencies:[n.sg,n.O5,T.J,L._,ol.W,m.r,w.H,C.t],encapsulation:2})),HooksManagerHooks})();function yg(e,t){if(1&e&&(u.TgZ(0,"option",28),u._uU(1),u.qZA()),2&e){const e=t.$implicit;u.Q6J("value",e),u.xp6(1),u.Oqu(e)}}let vg=(()=>{var e;class HooksManagerHooksEditModal{constructor(e,t,i,n,l,o){(0,s.Z)(this,"backend",void 0),(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"metadata",void 0),(0,s.Z)(this,"modelutilities",void 0),(0,s.Z)(this,"toast",void 0),(0,s.Z)(this,"modal",void 0),(0,s.Z)(this,"self",void 0),(0,s.Z)(this,"hooks",[]),(0,s.Z)(this,"events",["before_relationship_add","after_relationship_add","before_relationship_delete","after_relationship_delete","before_save","after_save","before_retrieve","after_retrieve","before_delete","after_delete","before_restore","after_restore","after_save_completed","before_logout"]),(0,s.Z)(this,"classMethod",""),(0,s.Z)(this,"newLogicHook",{id:"",module:"",type:"custom",event:"before_relationship_add",hook_include:"",hook_index:0,hook_class:"",hook_method:"",hook_active:1,description:"",version:"",package:""}),(0,s.Z)(this,"save$",new pn.x),(0,s.Z)(this,"radioOptions",[{label:"custom",value:"custom"},{label:"global",value:"global"}]),this.backend=e,this.language=t,this.metadata=i,this.modelutilities=n,this.toast=l,this.modal=o}ngOnInit(){this.newLogicHook.hook_class&&this.newLogicHook.hook_method&&(this.classMethod=`${this.newLogicHook.hook_class}->${this.newLogicHook.hook_method}`)}close(){this.self.destroy()}canSave(){return!!(this.newLogicHook.module&&this.newLogicHook.event&&this.newLogicHook.package&&this.newLogicHook.version&&this.classMethod)}saveHook(){this.newLogicHook.id||(this.newLogicHook.id=this.modelutilities.generateGuid()),this.newLogicHook.type||(this.newLogicHook.type="custom");const e="custom"==this.newLogicHook.type?"syscustomhooks":"syshooks";if([this.newLogicHook.hook_class,this.newLogicHook.hook_method]=this.classMethod.split("->"),this.newLogicHook.hook_method){const t={...this.newLogicHook};delete t.type;let i=this.modal.await("LBL_LOADING");this.backend.postRequest(`configuration/configurator/${e}/${this.newLogicHook.id}`,null,{config:t}).subscribe({next:()=>{this.save$.next(this.newLogicHook),this.save$.complete(),i.emit(!0),this.toast.sendToast("LBL_DATA_SAVED","success")}}),this.self.destroy()}else this.toast.sendToast("LBL_METHOD_EMPTY","warning")}}return e=HooksManagerHooksEditModal,(0,s.Z)(HooksManagerHooksEditModal,"ɵfac",(function(t){return new(t||e)(u.Y36(h.y),u.Y36(b.d),u.Y36(f.Pu),u.Y36(Z.A),u.Y36(v.A),u.Y36(x.o))})),(0,s.Z)(HooksManagerHooksEditModal,"ɵcmp",u.Xpm({type:e,selectors:[["hooks-manager-hooks-edit-modal"]],decls:62,vars:12,consts:[[3,"close"],["label","LBL_LOGIC_HOOK"],[1,"slds-grid"],[1,"slds-form-element__control","slds-size--1-of-4","slds-p-right--xxx-small"],[1,"slds-form-element__label"],[1,"slds-required"],["label","LBL_SCOPE"],[1,"slds-form-element__control"],[3,"ngModel","inputOptions","disabled","ngModelChange"],["label","LBL_MODULE"],[3,"ngModel","ngModelChange"],["label","LBL_EVENT"],["id","eventselect",1,"slds-select",3,"ngModel","ngModelChange"],["value","select"],[3,"value",4,"ngFor","ngForOf"],["label","LBL_INDEX"],[1,"slds-form-element__control","slds-size--4-of-4"],["label","LBL_CLASS"],[1,"slds-form-element__control","slds-size--4-of-4","slds-p-right--xxx-small"],["label","LBL_DESCRIPTION"],[1,"slds-textarea","slds-scrollable--y","slds-m-vertical--xx-small","ng-untouched","ng-pristine","ng-valid",2,"min-height","80px","max-height","300px","height","80px",3,"ngModel","ngModelChange"],[1,"slds-form-element__control","slds-size--2-of-4","slds-p-right--xxx-small"],["label","LBL_VERSION"],["label","LBL_PACKAGE"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CLOSE"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_SAVE"],[3,"value"]],template:function(e,t){1&e&&(u.TgZ(0,"system-modal")(1,"system-modal-header",0),u.NdJ("close",(function(){return t.close()})),u._UZ(2,"system-label",1),u.qZA(),u.TgZ(3,"system-modal-content")(4,"div",2)(5,"div",3)(6,"label",4)(7,"abbr",5),u._uU(8,"* "),u.qZA(),u._UZ(9,"system-label",6),u.qZA(),u.TgZ(10,"div",7)(11,"system-input-radio-button-group",8),u.NdJ("ngModelChange",(function(e){return t.newLogicHook.type=e})),u.qZA()()(),u.TgZ(12,"div",3)(13,"label",4)(14,"abbr",5),u._uU(15,"* "),u.qZA(),u._UZ(16,"system-label",9),u.qZA(),u.TgZ(17,"system-input-module",10),u.NdJ("ngModelChange",(function(e){return t.newLogicHook.module=e})),u.qZA()(),u.TgZ(18,"div",3)(19,"label",4)(20,"abbr",5),u._uU(21,"* "),u.qZA(),u._UZ(22,"system-label",11),u.qZA(),u.TgZ(23,"select",12),u.NdJ("ngModelChange",(function(e){return t.newLogicHook.event=e})),u.TgZ(24,"option",13),u._uU(25,"select"),u.qZA(),u.YNc(26,yg,2,2,"option",14),u.qZA()(),u.TgZ(27,"div",3)(28,"label",4)(29,"abbr",5),u._uU(30,"* "),u.qZA(),u._UZ(31,"system-label",15),u.qZA(),u.TgZ(32,"system-input-text",10),u.NdJ("ngModelChange",(function(e){return t.newLogicHook.hook_index=e})),u.qZA()()(),u.TgZ(33,"div",2)(34,"div",16)(35,"label",4)(36,"abbr",5),u._uU(37,"* "),u.qZA(),u._UZ(38,"system-label",17),u.qZA(),u.TgZ(39,"system-input-backend-method",10),u.NdJ("ngModelChange",(function(e){return t.classMethod=e})),u.qZA()()(),u.TgZ(40,"div",18)(41,"label",4),u._UZ(42,"system-label",19),u.qZA(),u.TgZ(43,"textarea",20),u.NdJ("ngModelChange",(function(e){return t.newLogicHook.description=e})),u.qZA()(),u.TgZ(44,"div",2)(45,"div",21)(46,"label",4)(47,"abbr",5),u._uU(48,"* "),u.qZA(),u._UZ(49,"system-label",22),u.qZA(),u.TgZ(50,"system-input-text",10),u.NdJ("ngModelChange",(function(e){return t.newLogicHook.version=e})),u.qZA()(),u.TgZ(51,"div",21)(52,"label",4)(53,"abbr",5),u._uU(54,"* "),u.qZA(),u._UZ(55,"system-label",23),u.qZA(),u.TgZ(56,"system-input-text",10),u.NdJ("ngModelChange",(function(e){return t.newLogicHook.package=e})),u.qZA()()()(),u.TgZ(57,"system-modal-footer")(58,"button",24),u.NdJ("click",(function(){return t.close()})),u._UZ(59,"system-label",25),u.qZA(),u.TgZ(60,"button",26),u.NdJ("click",(function(){return t.saveHook()})),u._UZ(61,"system-label",27),u.qZA()()()),2&e&&(u.xp6(11),u.Q6J("ngModel",t.newLogicHook.type)("inputOptions",t.radioOptions)("disabled",!!t.newLogicHook.id),u.xp6(6),u.Q6J("ngModel",t.newLogicHook.module),u.xp6(6),u.Q6J("ngModel",t.newLogicHook.event),u.xp6(3),u.Q6J("ngForOf",t.events),u.xp6(6),u.Q6J("ngModel",t.newLogicHook.hook_index),u.xp6(7),u.Q6J("ngModel",t.classMethod),u.xp6(4),u.Q6J("ngModel",t.newLogicHook.description),u.xp6(7),u.Q6J("ngModel",t.newLogicHook.version),u.xp6(6),u.Q6J("ngModel",t.newLogicHook.package),u.xp6(4),u.Q6J("disabled",!t.canSave()))},dependencies:[n.sg,l.YN,l.Kr,l.Fj,l.EJ,l.JJ,l.On,J.Z,Un.a,Yc.p,Ad.N,L._,nt.j,lt.x,ot.p,at.y],encapsulation:2})),HooksManagerHooksEditModal})();var xg=i(727);function Mg(e,t){1&e&&(u.TgZ(0,"div",21),u._UZ(1,"system-spinner"),u.qZA())}function Ag(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"tr",22)(1,"td",23)(2,"system-utility-icon",24),u.NdJ("click",(function(t){const i=u.CHM(e).$implicit,s=u.oxw();return u.KtG(s.toggleValue(t,i))})),u.qZA()(),u.TgZ(3,"td",25)(4,"div",7),u._uU(5),u.qZA()(),u.TgZ(6,"td",25)(7,"div",7),u._uU(8),u.qZA()(),u.TgZ(9,"td",25)(10,"div",7),u._uU(11),u.qZA()(),u.TgZ(12,"td",26),u._UZ(13,"system-checkbox",27),u.qZA(),u.TgZ(14,"td",28)(15,"button",29),u.NdJ("click",(function(){const t=u.CHM(e).$implicit,i=u.oxw();return u.KtG(i.searchWithModal(t))})),u._UZ(16,"system-button-icon",30),u.qZA(),u.TgZ(17,"button",29),u.NdJ("click",(function(){const t=u.CHM(e).$implicit,i=u.oxw();return u.KtG(i.editWebHook(t.id))})),u._UZ(18,"system-button-icon",31),u.qZA(),u.TgZ(19,"button",29),u.NdJ("click",(function(){const t=u.CHM(e).$implicit,i=u.oxw();return u.KtG(i.deleteWebHook(t.id))})),u._UZ(20,"system-button-icon",32),u.qZA()()()}if(2&e){const e=t.$implicit,i=u.oxw();u.xp6(2),u.Q6J("colorclass",i.getStatusColor(e)),u.xp6(3),u.Oqu(e.module),u.xp6(3),u.Oqu(e.event),u.xp6(3),u.Oqu(e.url),u.xp6(2),u.Q6J("ngModel",e.send_data)("asinteger",!0)("disabled",!0)}}let Tg=(()=>{var e;class WebHooksManager{constructor(e,t,i,n,l,o,a){(0,s.Z)(this,"backend",void 0),(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"metadata",void 0),(0,s.Z)(this,"modelutilities",void 0),(0,s.Z)(this,"toast",void 0),(0,s.Z)(this,"modal",void 0),(0,s.Z)(this,"hooksManager",void 0),(0,s.Z)(this,"loading",!1),(0,s.Z)(this,"webHooks",[]),(0,s.Z)(this,"subscriptions",new xg.w0),this.backend=e,this.language=t,this.metadata=i,this.modelutilities=n,this.toast=l,this.modal=o,this.hooksManager=a}ngOnInit(){this.getWebHooks()}getWebHooks(){this.loading=!0,this.backend.getRequest("configuration/spiceui/core/module/syswebhooks").subscribe((e=>{this.webHooks=e,this.loading=!1}))}get allWebHooks(){return"*"==this.hooksManager._module?this.webHooks:this.webHooks.filter((e=>e.module==this.hooksManager._module))}deleteWebHook(e){this.modal.confirm("MSG_DELETE_RECORD","MSG_DELETE_RECORD").subscribe({next:t=>{if(t){const t=this.webHooks.find((t=>t.id==e));this.backend.deleteRequest(`configuration/configurator/syswebhooks/${t.id}`).subscribe((()=>{this.toast.sendToast("MSG_SUCCESSFULLY_DELETED","success")})),this.webHooks=this.webHooks.filter((e=>e.id!=t.id))}}})}editWebHook(e){const t=this.webHooks.find((t=>t.id==e));this.openEditWebHookModal(t)}openEditWebHookModal(e){this.modal.openModal("WebHooksManagerEditModal").subscribe((t=>{const i=this.webHooks.indexOf(e);e&&(t.instance.newWebHook={...e}),t.instance.save$.subscribe({next:t=>{e?this.webHooks.splice(i,1,t):this.webHooks.push(t)}})}))}addWebHook(){this.openEditWebHookModal()}getStatusColor(e){return 1==e.active?"slds-icon-text-success":0==e.active?"slds-icon-text-light":void 0}toggleValue(e,t){e.stopPropagation();const i=1==t.active?"MSG_DEACTIVATE":"MSG_ACTIVATE",s=1==t.active?"LBL_DEACTIVATED":"LBL_ACTIVATED";this.modal.confirm(i,i).subscribe({next:e=>{if(e){t.active=1==t.active?0:1;const e="syswebhooks";this.backend.postRequest(`configuration/configurator/${e}/${t.id}`,null,{config:t}).subscribe({next:()=>{this.toast.sendToast(s,"success")}})}}})}callWebHooks(e){let t=this.modal.await("LBL_SENDING");this.backend.postRequest("system/webhook",null,e).subscribe((e=>{let i=1==e.result.success?"MSG_SUCCESSFULLY_EXECUTED":"LBL_ERROR",s="Status Code: "+e.result.output.toString();t.emit(!0),this.modal.info(s,i)}))}searchWithModal(e){this.modal.openModal("ObjectModalModuleLookup").subscribe((t=>{t.instance.module=e.module,t.instance.multiselect=!1,t.instance.selectedItems.subscribe((t=>{t.length&&(e={webHook:e,id:t[0].id},this.callWebHooks(e))}))}))}ngOnDestroy(){this.subscriptions.unsubscribe()}}return e=WebHooksManager,(0,s.Z)(WebHooksManager,"ɵfac",(function(t){return new(t||e)(u.Y36(h.y),u.Y36(b.d),u.Y36(f.Pu),u.Y36(Z.A),u.Y36(v.A),u.Y36(x.o),u.Y36(fg))})),(0,s.Z)(WebHooksManager,"ɵcmp",u.Xpm({type:e,selectors:[["web-hooks-manager"]],decls:28,vars:2,consts:[["system-to-bottom-noscroll",""],["class","slds-align--absolute-center slds-height_full",4,"ngIf"],[1,"slds-tabs_default",2,"background-color","transparent"],["system-to-bottom","",1,"slds-size--4-of-4","slds-scrollable--y"],[1,"slds-table","slds-table--bordered","slds-table--cell-buffer","slds-table--fixed-layout","slds-text-align_center","slds-table--header-fixed"],[1,"slds-line-height_reset"],["scope","col",1,"slds-text-align_left",2,"width","4.25rem"],[1,"slds-truncate"],["scope","col",1,"slds-text-align_left"],[1,"slds-truncate","slds-m-left--x-small","slds-m-vertical--xx-small"],["label","LBL_MODULE"],[1,"slds-truncate","slds-m-left--x-small"],["label","LBL_EVENT"],["label","LBL_URL"],["scope","col",1,"slds-text-align_center"],["label","LBL_SEND_DATA"],["scope","col",1,"slds-text-align_right"],["class","slds-hint-parent",4,"ngFor","ngForOf"],[1,"slds-p-around--x-small"],[1,"slds-align--absolute-center","slds-button","slds-button--icon",3,"click"],["icon","add","size","medium",2,"border-radius","50%"],[1,"slds-align--absolute-center","slds-height_full"],[1,"slds-hint-parent"],[1,"slds-text-align_left",2,"width","4.25rem"],["size","xx-small","icon","light_bulb",1,"slds-p-right--xx-small","slds-button","slds-button--icon","slds-col_bump-left",3,"colorclass","click"],[1,"slds-text-align_left"],[1,"slds-text-align_center"],[3,"ngModel","asinteger","disabled"],[1,"slds-text-align_right"],[1,"slds-button","slds-button--icon","slds-col_bump-left","--slds-c-button-color-border",3,"click"],["icon","broadcast"],["icon","edit"],["icon","clear"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0),u.YNc(1,Mg,2,0,"div",1),u.TgZ(2,"div",2)(3,"div",3)(4,"table",4)(5,"thead")(6,"tr",5)(7,"th",6),u._UZ(8,"div",7),u.qZA(),u.TgZ(9,"th",8)(10,"div",9),u._UZ(11,"system-label",10),u.qZA()(),u.TgZ(12,"th",8)(13,"div",11),u._UZ(14,"system-label",12),u.qZA()(),u.TgZ(15,"th",8)(16,"div",11),u._UZ(17,"system-label",13),u.qZA()(),u.TgZ(18,"th",14)(19,"div",11),u._UZ(20,"system-label",15),u.qZA()(),u.TgZ(21,"th",16),u._UZ(22,"div",11),u.qZA()()(),u.TgZ(23,"tbody"),u.YNc(24,Ag,21,7,"tr",17),u.qZA()(),u.TgZ(25,"div",18)(26,"button",19),u.NdJ("click",(function(){return t.addWebHook()})),u._UZ(27,"system-button-icon",20),u.qZA()()()()()),2&e&&(u.xp6(1),u.Q6J("ngIf",t.loading),u.xp6(23),u.Q6J("ngForOf",t.allWebHooks))},dependencies:[n.sg,n.O5,l.JJ,l.On,T.J,Q.U,L._,ol.W,m.r,w.H,C.t],encapsulation:2})),WebHooksManager})();function Lg(e,t){if(1&e&&(u.TgZ(0,"option",30),u._uU(1),u.qZA()),2&e){const e=t.$implicit;u.Q6J("value",e),u.xp6(1),u.Oqu(e)}}let qg=(()=>{var e;class WebHooksManagerEditModal{constructor(e,t,i,n,l,o,a){(0,s.Z)(this,"backend",void 0),(0,s.Z)(this,"language",void 0),(0,s.Z)(this,"metadata",void 0),(0,s.Z)(this,"modelutilities",void 0),(0,s.Z)(this,"toast",void 0),(0,s.Z)(this,"modal",void 0),(0,s.Z)(this,"WebHooksManager",void 0),(0,s.Z)(this,"self",void 0),(0,s.Z)(this,"hooks",[]),(0,s.Z)(this,"events",["create","update","delete"]),(0,s.Z)(this,"urlCondition",!0),(0,s.Z)(this,"urlRegexp",new RegExp("(https?:\\/\\/(www\\.)?[-a-zA-Z0-9@:%._\\+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b([-a-zA-Z0-9()@:%_\\+.~#?&//=]*))")),(0,s.Z)(this,"newWebHook",{id:"",module:"",event:"create",url:"",active:1,send_data:!1,modulefilter_id:"",fieldset_id:"",ssl_verifypeer:!0,ssl_verifyhost:!0}),(0,s.Z)(this,"save$",new pn.x),this.backend=e,this.language=t,this.metadata=i,this.modelutilities=n,this.toast=l,this.modal=o,this.WebHooksManager=a}close(){this.self.destroy()}canSave(){return this.urlCondition=this.newWebHook.url.length>0&&this.urlRegexp.test(this.newWebHook.url),!!(this.newWebHook.module&&this.newWebHook.event&&this.newWebHook.url&&this.urlCondition)}saveHook(){this.newWebHook.id||(this.newWebHook.id=this.modelutilities.generateGuid());let e=this.modal.await("LBL_LOADING");this.backend.postRequest(`configuration/configurator/syswebhooks/${this.newWebHook.id}`,null,{config:this.newWebHook}).subscribe({next:()=>{this.save$.next(this.newWebHook),this.save$.complete(),e.emit(!0),this.toast.sendToast("LBL_DATA_SAVED","success")}}),this.self.destroy()}}return e=WebHooksManagerEditModal,(0,s.Z)(WebHooksManagerEditModal,"ɵfac",(function(t){return new(t||e)(u.Y36(h.y),u.Y36(b.d),u.Y36(f.Pu),u.Y36(Z.A),u.Y36(v.A),u.Y36(x.o),u.Y36(Tg))})),(0,s.Z)(WebHooksManagerEditModal,"ɵcmp",u.Xpm({type:e,selectors:[["web-hooks-manager-edit-modal"]],features:[u._Bn([Tg,fg])],decls:51,vars:14,consts:[[3,"close"],["label","LBL_WEB_HOOK"],[1,"slds-grid"],[1,"slds-form-element__control","slds-size--1-of-4","slds-p-right--xxx-small"],[1,"slds-form-element__label"],[1,"slds-required"],["label","LBL_MODULE"],[3,"ngModel","ngModelChange"],["label","LBL_EVENT"],["id","eventselect",1,"slds-select",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"slds-form-element__control","slds-size--2-of-4","slds-p-right--xxx-small"],["label","LBL_URL"],[1,"slds-grid","slds-m-top--x-small","slds-p-around--small"],[1,"slds-form-element__control","slds-size--1-of-4"],[3,"ngModel","asinteger","ngModelChange"],["label","LBL_SEND_DATA"],["label","LBL_VERIFY_PEER"],["label","LBL_VERIFY_HOST"],["label","LBL_MODULE_FILTER"],[1,"slds-grow",3,"ngModel","ngModelChange"],[1,"slds-form-element__label","slds-p-bottom--xxx-small"],["label","LBL_FIELDSET"],[1,"slds-button","slds-button--neutral",3,"disabled","click"],["icon","broadcast",1,"slds-m-right--small"],["label","LBL_TEST"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CLOSE"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_SAVE"],[3,"value"]],template:function(e,t){1&e&&(u.TgZ(0,"system-modal")(1,"system-modal-header",0),u.NdJ("close",(function(){return t.close()})),u._UZ(2,"system-label",1),u.qZA(),u.TgZ(3,"system-modal-content")(4,"div",2)(5,"div",3)(6,"label",4)(7,"abbr",5),u._uU(8,"* "),u.qZA(),u._UZ(9,"system-label",6),u.qZA(),u.TgZ(10,"system-input-module",7),u.NdJ("ngModelChange",(function(e){return t.newWebHook.module=e})),u.qZA()(),u.TgZ(11,"div",3)(12,"label",4)(13,"abbr",5),u._uU(14,"* "),u.qZA(),u._UZ(15,"system-label",8),u.qZA(),u.TgZ(16,"select",9),u.NdJ("ngModelChange",(function(e){return t.newWebHook.event=e})),u.YNc(17,Lg,2,2,"option",10),u.qZA()(),u.TgZ(18,"div",11)(19,"label",4)(20,"abbr",5),u._uU(21,"* "),u.qZA(),u._UZ(22,"system-label",12),u.qZA(),u.TgZ(23,"system-input-text",7),u.NdJ("ngModelChange",(function(e){return t.newWebHook.url=e})),u.qZA()()(),u.TgZ(24,"div",13)(25,"div",14)(26,"system-checkbox",15),u.NdJ("ngModelChange",(function(e){return t.newWebHook.send_data=e})),u._UZ(27,"system-label",16),u.qZA()(),u.TgZ(28,"div",14)(29,"system-checkbox",15),u.NdJ("ngModelChange",(function(e){return t.newWebHook.ssl_verifypeer=e})),u._UZ(30,"system-label",17),u.qZA()(),u.TgZ(31,"div",14)(32,"system-checkbox",15),u.NdJ("ngModelChange",(function(e){return t.newWebHook.ssl_verifyhost=e})),u._UZ(33,"system-label",18),u.qZA()()(),u.TgZ(34,"div",2)(35,"div",11)(36,"label",4),u._UZ(37,"system-label",19),u.qZA(),u.TgZ(38,"system-input-module-filter",20),u.NdJ("ngModelChange",(function(e){return t.newWebHook.modulefilter_id=e})),u.qZA()(),u.TgZ(39,"div",11)(40,"label",21),u._UZ(41,"system-label",22),u.qZA(),u.TgZ(42,"system-input-fieldset",20),u.NdJ("ngModelChange",(function(e){return t.newWebHook.fieldset_id=e})),u.qZA()()()(),u.TgZ(43,"system-modal-footer")(44,"button",23),u.NdJ("click",(function(){return t.WebHooksManager.searchWithModal(t.newWebHook)})),u._UZ(45,"system-button-icon",24)(46,"system-label",25),u.qZA(),u.TgZ(47,"button",26),u.NdJ("click",(function(){return t.close()})),u._UZ(48,"system-label",27),u.qZA(),u.TgZ(49,"button",28),u.NdJ("click",(function(){return t.saveHook()})),u._UZ(50,"system-label",29),u.qZA()()()),2&e&&(u.xp6(10),u.Q6J("ngModel",t.newWebHook.module),u.xp6(6),u.Q6J("ngModel",t.newWebHook.event),u.xp6(1),u.Q6J("ngForOf",t.events),u.xp6(6),u.Q6J("ngModel",t.newWebHook.url),u.xp6(3),u.Q6J("ngModel",t.newWebHook.send_data)("asinteger",!0),u.xp6(3),u.Q6J("ngModel",t.newWebHook.ssl_verifypeer)("asinteger",!0),u.xp6(3),u.Q6J("ngModel",t.newWebHook.ssl_verifyhost)("asinteger",!0),u.xp6(6),u.Q6J("ngModel",t.newWebHook.modulefilter_id),u.xp6(4),u.Q6J("ngModel",t.newWebHook.fieldset_id),u.xp6(2),u.Q6J("disabled",!t.canSave()),u.xp6(5),u.Q6J("disabled",!t.canSave()))},dependencies:[n.sg,l.YN,l.Kr,l.EJ,l.JJ,l.On,T.J,Q.U,J.Z,Zs.a,Un.a,pd.l,L._,nt.j,lt.x,ot.p,at.y],encapsulation:2})),WebHooksManagerEditModal})(),Cg=(()=>{var e;class WorkbenchModule{}return e=WorkbenchModule,(0,s.Z)(WorkbenchModule,"ɵfac",(function(t){return new(t||e)})),(0,s.Z)(WorkbenchModule,"ɵmod",u.oAB({type:e})),(0,s.Z)(WorkbenchModule,"ɵinj",u.cJS({imports:[n.ez,l.u5,o.SystemComponents,a.o,d.ObjectFields,r.ObjectComponents,c.GlobalComponents,g._t]})),WorkbenchModule})();("undefined"==typeof ngJitMode||ngJitMode)&&u.kYT(Cg,{declarations:[on,gn,Bc,mn,Di,hi,yi,Ei,Mi,Ji,Qi,Fi,Ri,Gi,Hi,st,I,Pe,X,H,p,mt,Rt,Dc,Xt,Te,Ze,ii,si,ie,ni,re,li,ue,Se,ci,ke,Ke,bs,Wi,ls,As,Ls,ud,Ks,Us,Ps,Cn,hn,Xe,tt,ed.R,xd,md,hd,yd,vd,bd,Zd,Md,Td,wn,On,nl,Yn,Kn,ll,pl,kl,Ol,Yl,Wl,Ol,Lo,so,mo,Uo,No,po,fo,bo,Zo,_o,yo,vo,xo,To,Ao,Io,wl,Go,sa,na,Xa,rd,es,pa,fa,va,Od,Dd,Id,Vd,Gd,br,fr,vr,xr,wc,Nr,Wr,wc,rc,lc,dc,vc,fc,yc,Ga,lg,dg,ug,pg,fg,_g,vg,Tg,qg],imports:[n.ez,l.u5,o.SystemComponents,a.o,d.ObjectFields,r.ObjectComponents,c.GlobalComponents,g._t],exports:[wl,ed.R]}),u.B6R(Yn,[n.sg,l.YN,l.Kr,l.Fj,l.EJ,l.JJ,l.On,T.J,L._],[ll]),u.B6R(Kn,[n.sg,l.YN,l.Kr,l.Fj,l.wV,l.EJ,l.JJ,l.qQ,l.Fd,l.On,T.J,L._],[ll]),u.B6R(fg,[n.mk,n.sg,l.YN,l.Kr,l.EJ,l.JJ,l.On,L._,Xe,tt,_g,Tg],[])}}]);