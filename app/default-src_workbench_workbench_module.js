/*!
 * 
 *                     SpiceCRM
 *
 *                     release: 2024.01.001
 *
 *                     date: 2024-06-07 18:53:45
 *
 *                     build: 2024.01.001.1717779225604
 *
 */
"use strict";(self.webpackChunkcore=self.webpackChunkcore||[]).push([["default-src_workbench_workbench_module_ts"],{57302:(e,t,s)=>{s.d(t,{y:()=>r});var i=s(54438),n=s(60177),l=s(25863),o=s(32062);function a(e,t){if(1&e&&(i.j41(0,"div",9)(1,"div",10),i.EFF(2),i.k0s()()),2&e){const e=i.XpG(2);i.R7$(2),i.JRh(e.description)}}function d(e,t){if(1&e){const e=i.RV6();i.j41(0,"div",3)(1,"div",4)(2,"div",5)(3,"button",6),i.bIt("mouseenter",(function(){i.eBV(e);const t=i.XpG();return i.Njj(t.showInfo=!0)}))("mouseleave",(function(){i.eBV(e);const t=i.XpG();return i.Njj(t.showInfo=!1)})),i.nrm(4,"system-button-icon",7),i.k0s()()(),i.DNE(5,a,3,1,"div",8),i.k0s()}if(2&e){const e=i.XpG();i.R7$(4),i.Y8G("size","small")("icon","info"),i.R7$(),i.Y8G("ngIf",e.showInfo)}}let r=(()=>{class WorkbenchConfigLabel{constructor(){this.option="",this.description="",this.showInfo=!1}static#e=this.ɵfac=function(e){return new(e||WorkbenchConfigLabel)};static#t=this.ɵcmp=i.VBU({type:WorkbenchConfigLabel,selectors:[["workbench-config-label"]],inputs:{option:"option",description:"description"},decls:3,vars:2,consts:[[1,"slds-grid","slds-grid--vertical-align-center"],[1,"slds-form-element__label",3,"label"],["class","slds-is-relative",4,"ngIf"],[1,"slds-is-relative"],[1,"slds-form-element"],[1,"slds-form-element__icon","slds-align-middle"],["aria-describedby","help",1,"slds-button","slds-button_icon","slds-button","slds-button_icon",3,"mouseenter","mouseleave"],[3,"size","icon"],["class","slds-popover slds-popover_tooltip slds-nubbin_bottom-left slds-rise-from-ground slds-is-absolute","role","tooltip","style","bottom: 25px; left: -17px; min-width: 320px; min-height: 30px; height:auto",4,"ngIf"],["role","tooltip",1,"slds-popover","slds-popover_tooltip","slds-nubbin_bottom-left","slds-rise-from-ground","slds-is-absolute",2,"bottom","25px","left","-17px","min-width","320px","min-height","30px","height","auto"],[1,"slds-popover__body","slds-scrollable_y","slds-cell-wrap"]],template:function(e,t){1&e&&(i.j41(0,"div",0),i.nrm(1,"system-label",1),i.DNE(2,d,6,3,"div",2),i.k0s()),2&e&&(i.R7$(),i.Y8G("label",t.option),i.R7$(),i.Y8G("ngIf",t.description))},dependencies:[n.bT,l.t,o.W],encapsulation:2})}return WorkbenchConfigLabel})()},85609:(e,t,s)=>{s.r(t),s.d(t,{WorkbenchModule:()=>Sg});var i=s(60177),n=s(84341),l=s(70569),o=s(71341),a=s(7745),d=s(37328),r=s(12948),c=s(18039),m=s(54438),u=s(18521);let g=(()=>{class DictionaryManagerItemStatus{constructor(){this._disabled=!1}set disabled(e){this._disabled=!1!==e}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}getStatusColor(){switch(this.status){case"a":return"slds-icon-text-success";case"i":return"slds-icon-text-light";default:return"slds-icon-text-warning"}}writeValue(e){this.status=e}toggleValue(e){this._disabled||(e.stopPropagation(),"a"===this.status?this.status="i":this.status="a",this.onChange(this.status))}static#e=this.ɵfac=function(e){return new(e||DictionaryManagerItemStatus)};static#t=this.ɵcmp=m.VBU({type:DictionaryManagerItemStatus,selectors:[["dictionary-manager-item-status"]],inputs:{disabled:"disabled"},features:[m.Jv_([{provide:n.kq,useExisting:(0,m.Rfq)((()=>DictionaryManagerItemStatus)),multi:!0}])],decls:1,vars:1,consts:[["size","xx-small","icon","light_bulb",1,"slds-p-right--xx-small",3,"colorclass","click"]],template:function(e,t){1&e&&(m.j41(0,"system-utility-icon",0),m.bIt("click",(function(e){return t.toggleValue(e)})),m.k0s()),2&e&&m.Y8G("colorclass",t.getStatusColor())},dependencies:[u.B],encapsulation:2})}return DictionaryManagerItemStatus})();var h=s(21413),p=s(49722),f=s(83935),b=s(69904),y=s(92462),k=s(60968),v=s(41081),R=s(50531),M=s(53584);let j=(()=>{class dictionarymanager{constructor(e,t,s,i,n,l,o,a){this.backend=e,this.metadata=t,this.language=s,this.modelutilities=i,this.navigation=n,this.toast=l,this.modal=o,this.configurationService=a,this.reservedwords=[],this.keywords=[],this.changescope="none",this.domaindefinitions=[],this.domainfields=[],this.dictionarydefinitions=[],this.dictionaryitems=[],this.dictionaryfields=[],this.dictionarydatabasefields=[],this.dictionaryrelationshiptypes=[],this.dictionaryrelationships=[],this.dictionaryrelationshippolymorphs=[],this.dictionaryrelationshipfields=[],this.dictionaryrelationshiprelatefields=[],this.dictionaryindexes=[],this.dictionaryindexitems=[],this.loadDictionaryDefinitions(),this.loadDictionaryFields(),this.loadWords(),this.changescope=this.configurationService.getCapabilityConfig("core").edit_mode}updateRelationshipInArray(e){const t=this.dictionaryrelationships.findIndex((t=>t.id==e.id));this.dictionaryrelationships[t]={...e},this.dictionaryrelationships=[...this.dictionaryrelationships]}pushNewRelationshipToArray(e){this.dictionaryrelationships=[...this.dictionaryrelationships,{...e}]}isDirty(){let e=!1;if(!this.loaded)return e;const t=JSON.parse(this.loaded);return["dictionarydefinitions","dictionaryitems","dictionaryrelationships","dictionaryrelationshiprelatefields","dictionaryindexes","dictionaryindexitem"].forEach((s=>{Array.isArray(this[s])&&this[s].forEach((i=>{const n=t[s].find((e=>e.id==i.id));(!n||n&&JSON.stringify(n)!=JSON.stringify(i))&&(e=!0)}))})),e}get currentDictionaryScope(){return this.currentDictionaryDefinition?this.dictionarydefinitions.find((e=>e.id==this.currentDictionaryDefinition)).scope:"g"}promptDelete(e){let t=new h.B;return this.modal.openModal("DictionaryManagerDeleteModal").subscribe({next:s=>{s.instance.message=e,s.instance.responseSubject=t}}),t.asObservable()}currentIsTemplate(){return this.currentDictionaryDefinition&&"template"==this.dictionarydefinitions.find((e=>e.id==this.currentDictionaryDefinition))?.sysdictionary_type}getCurrentDefinition(){return this.currentDictionaryDefinition?this.dictionarydefinitions.find((e=>e.id==this.currentDictionaryDefinition)):null}loadDictionaryDefinitions(){let e=this.modal.await("LBL_LOADING");this.backend.getRequest("dictionary/definitions").subscribe({next:t=>{this.domaindefinitions=t.domaindefinitions,this.domainfields=t.domainfields,this.dictionarydefinitions=t.dictionarydefinitions,this.dictionaryitems=t.dictionaryitems,this.dictionaryrelationshiptypes=t.dictionaryrelationshiptypes,this.dictionaryrelationships=t.dictionaryrelationships,this.dictionaryrelationshippolymorphs=t.dictionaryrelationshippolymorphs,this.dictionaryrelationshiprelatefields=t.dictionaryrelationshiprelatefields,this.dictionaryrelationshipfields=t.dictionaryrelationshipfields,this.dictionaryindexes=t.dictionaryindexes,this.dictionaryindexitems=t.dictionaryindexitems,this.settings=t.settings,this.loaded=JSON.stringify(t),e.emit(!0)},error:()=>{e.emit(!0)}})}loadDictionaryFields(){this.backend.getRequest("dictionary/fields").subscribe({next:e=>{this.dictionaryfields=e}})}loadDatabaseFields(e){this.dictionarydatabasefields=[],this.currentIsTemplate()||this.backend.getRequest(`dictionary/columns/${e}`).subscribe({next:e=>{this.dictionarydatabasefields=e}})}loadWords(){this.configurationService.getData("spicewords")?(this.reservedwords=this.configurationService.getData("spicewords").reservedwords,this.keywords=this.configurationService.getData("spicewords").keywords):this.backend.getRequest("dictionary/spicewords").subscribe((e=>{this.reservedwords=e.reservedwords,this.keywords=e.keywords,this.configurationService.setData("spicewords",e)}))}canChange(e){return!0}get defaultScope(){return"all"==this.changescope?"g":"c"}getStatusColor(e){switch(e){case"a":return"slds-icon-text-success";case"i":return"slds-icon-text-light";default:return"slds-icon-text-warning"}}getDomainName(e){let t=this.domaindefinitions.find((t=>t.id==e));return t?t.name:e}getDictionaryDefinitionName(e){let t=this.dictionarydefinitions.find((t=>t.id==e));return t?t.name:e}getDictionaryItemName(e){let t=this.dictionaryitems.find((t=>t.id==e));return t?t.name:e}getDictionaryDefinitionItems(e){let t=[];for(let s of this.dictionaryitems.filter((t=>t.sysdictionarydefinition_id==e)).sort(((e,t)=>e.sequence>t.sequence?1:-1)))s.sysdictionary_ref_id&&s.sysdictionary_ref_id!=e?t=t.concat(this.getDictionaryDefinitionItems(s.sysdictionary_ref_id)):s.sysdictionary_ref_id||t.push(s);return t}save(){let e=this.determineChangedRecords();this.backend.postRequest("dictionary/definitions",{},e).subscribe({next:e=>{this.loaded=JSON.stringify(e),this.toast.sendToast(this.language.getLabel("LBL_DATA_SAVED"),"success")},error:()=>{this.toast.sendToast(this.language.getLabel("ERR_FAILED_TO_EXECUTE"),"error")}})}determineChangedRecords(){let e=JSON.parse(this.loaded),t={dictionarydefinitions:[],dictionaryitems:[],dictionaryrelationships:[],dictionaryrelationshiprelatefields:[],dictionaryindexes:[],dictionaryindexitems:[]};for(let s in t)for(let i of this[s]){let n=e[s].find((e=>e.id==i.id));(!n||n&&JSON.stringify(n)!=JSON.stringify(i))&&t[s].push(i)}return t}repairDictionary(e){let t=this.modal.await("LBL_EXECUTING");this.dictionarydefinitions.find((t=>t.id==e));this.backend.putRequest(`dictionary/definition/${e}/repair`).subscribe({next:e=>{e.success?(this.handleAfterActivate(),this.toast.sendToast(this.language.getLabel("LBL_DICTIONARY_REPAIRED"),"success",e.sql,!e.sql)):this.toast.sendToast(this.language.getLabel("LBL_NO_DATA"),"error",e.msg),t.emit(!0)},error:()=>{this.toast.sendToast(this.language.getLabel("ERROR repairing dictonaray"),"error"),t.emit(!0)}})}reshuffleDictionary(e,t){let s=this.modal.await("LBL_EXECUTING");this.dictionarydefinitions.find((t=>t.id==e));this.backend.putRequest(`dictionary/definition/${e}/reshuffle`,{},t).subscribe({next:e=>{e.success?this.toast.sendToast(this.language.getLabel("LBL_DICTIONARY_reshuffled"),"success",e.sql,!e.sql):this.toast.sendToast(this.language.getLabel("LBL_NO_DATA"),"error",e.msg),s.emit(!0)},error:()=>{this.toast.sendToast(this.language.getLabel("ERROR reshuffling dictonaray"),"error"),s.emit(!0)}})}repairDictionaryOld(e){let t=this.modal.await("LBL_REPAIRING"),s=this.dictionarydefinitions.find((t=>t.id==e));this.backend.postRequest("admin/repair/dictionary",{},{dictionaries:[s.name]}).subscribe({next:e=>{e.success?this.toast.sendToast(this.language.getLabel("LBL_DICTIONARY_REPAIRED"),"success",e.sql,!e.sql):this.toast.sendToast(this.language.getLabel("LBL_NO_DATA"),"error",e.msg),t.emit(!0)},error:()=>{this.toast.sendToast(this.language.getLabel("ERROR repairing dictonaray"),"error"),t.emit(!0)}})}handleAfterActivate(){this.configurationService.reloadTaskData("fielddefs")}repairTemplateRelatedDictionaries(){this.modal.confirm("MSG_REPAIR_DICTIONARY_TEMPLATE_RELATED_DICTIONARIES","MSG_REPAIR_DICTIONARY_TEMPLATE_RELATED_DICTIONARIES").subscribe((e=>{if(!e)return;const t=this.modal.await("LBL_REPAIRING");this.backend.putRequest(`dictionary/template/${this.currentDictionaryDefinition}/repairrelated`).subscribe({next:()=>{t.next(!0),t.complete(),this.toast.sendToast("LBL_DICTIONARY_REPAIRED","success")},error:e=>{t.next(!0),t.complete(),this.toast.sendToast(`${this.language.getLabel("ERROR repairing dictionary")}: ${e.error.error.message}`,"error")}})}))}ngOnDestroy(){}static#e=this.ɵfac=function(e){return new(e||dictionarymanager)(m.KVO(p.H),m.KVO(f.yu),m.KVO(b.B),m.KVO(y.g),m.KVO(k.L),m.KVO(v.o),m.KVO(R.y),m.KVO(M.i))};static#t=this.ɵprov=m.jDH({token:dictionarymanager,factory:dictionarymanager.ɵfac})}return dictionarymanager})();var L=s(25863),x=s(32062),I=s(80256),D=s(30991),E=s(10727),C=s(63940),F=s(28933);const G=["itemscontainer"],$=e=>({"slds-is-selected":e});function B(e,t){if(1&e){const e=m.RV6();m.j41(0,"tr",36),m.bIt("dblclick",(function(){m.eBV(e);const t=m.XpG();return m.Njj(t.isExpanded=!1)}))("click",(function(){const t=m.eBV(e).$implicit,s=m.XpG();return m.Njj(s.setCurrentDictionaryDefinition(t.id))})),m.j41(1,"td"),m.nrm(2,"system-utility-icon",37),m.j41(3,"dictionary-manager-item-status",38),m.bIt("ngModelChange",(function(t){const s=m.eBV(e).$implicit,i=m.XpG();return m.Njj(i.setStatus(s,t))})),m.k0s()(),m.j41(4,"td",39)(5,"div",40),m.EFF(6),m.k0s()(),m.j41(7,"td",41)(8,"div",40),m.EFF(9),m.k0s()(),m.j41(10,"td",42)(11,"div",40),m.EFF(12),m.k0s()(),m.j41(13,"td")(14,"button",21),m.bIt("click",(function(){const t=m.eBV(e).$implicit,s=m.XpG();return m.Njj(s.editDictionaryDefinition(t))})),m.nrm(15,"system-button-icon",43),m.k0s(),m.j41(16,"button",44),m.bIt("click",(function(){const t=m.eBV(e).$implicit,s=m.XpG();return m.Njj(s.delete(t.id))})),m.nrm(17,"system-button-icon",45),m.k0s()()()}if(2&e){const e=t.$implicit,s=m.XpG();m.Y8G("ngClass",m.eq3(7,$,s.dictionarymanager.currentDictionaryDefinition==e.id)),m.R7$(2),m.Y8G("icon","g"==e.scope?"world":"people"),m.R7$(),m.Y8G("ngModel",e.status),m.R7$(3),m.JRh(e.name),m.R7$(3),m.JRh(e.tablename),m.R7$(3),m.JRh(e.sysdictionary_type),m.R7$(4),m.Y8G("disabled","a"==e.status||!s.dictionarymanager.canChange(e.scope))}}function N(e,t){if(1&e){const e=m.RV6();m.j41(0,"div",46)(1,"system-utility-icon",47),m.bIt("click",(function(t){m.eBV(e);const s=m.XpG();return m.Njj(s.addDictionaryDefinition(t))})),m.k0s()()}}let S=(()=>{class DictionaryManagerDefinitions{constructor(e,t,s,i,n,l,o){this.dictionarymanager=e,this.metadata=t,this.language=s,this.modal=i,this.injector=n,this.modelutilities=l,this.backend=o,this.definitionfiltertype="",this.definitionfilterscope="",this.definitionfilterstatus="",this.repairing=!1,this._isExpanded=!1,this.expanded=new m.bkB}get isExpanded(){return this._isExpanded}set isExpanded(e){this._isExpanded=e,this.expanded.emit(this._isExpanded)}get dictionarydefinitions(){return this.dictionarymanager.dictionarydefinitions.filter((e=>e.id==this.dictionarymanager.currentDictionaryDefinition||!!e.name&&((!this.definitionfiltertype||e.sysdictionary_type==this.definitionfiltertype)&&(!(this.definitionfilterterm&&!(e.name.toLowerCase().indexOf(this.definitionfilterterm.toLowerCase())>=0||e.tablename&&e.tablename.toLowerCase().indexOf(this.definitionfilterterm.toLowerCase())>=0))&&((""==this.definitionfilterscope||e.scope==this.definitionfilterscope)&&(""==this.definitionfilterstatus||e.status==this.definitionfilterstatus)))))).sort(((e,t)=>e.name.localeCompare(t.name)))}setStatus(e,t){let s;switch(t){case"a":s=this.modal.await("LBL_EXECUTING"),this.backend.postRequest(`dictionary/definition/${e.id}/activate`).subscribe({next:()=>{this.dictionarymanager.handleAfterActivate(),e.status=t,this.dictionarymanager.dictionaryitems.filter((t=>t.sysdictionarydefinition_id==e.id&&"a"!=t.status)).forEach((e=>e.status="a")),this.dictionarymanager.dictionaryindexes.filter((t=>t.sysdictionarydefinition_id==e.id&&"a"!=t.status)).forEach((e=>e.status="a")),s.emit(!0)},error:()=>{s.emit(!0)}});break;case"i":s=this.modal.await("LBL_EXECUTING"),this.backend.deleteRequest(`dictionary/definition/${e.id}/activate`).subscribe({next:()=>{this.dictionarymanager.handleAfterActivate(),e.status=t,this.dictionarymanager.dictionaryitems.filter((t=>t.sysdictionarydefinition_id==e.id&&"a"==t.status)).forEach((e=>e.status="i")),this.dictionarymanager.dictionaryindexes.filter((t=>t.sysdictionarydefinition_id==e.id&&"a"==t.status)).forEach((e=>e.status="i")),s.emit(!0)},error:()=>{s.emit(!0)}});break;default:e.status=t}}trackByFn(e,t){return t.id}setCurrentDictionaryDefinition(e){e!=this.dictionarymanager.currentDictionaryDefinition&&(this.dictionarymanager.currentDictionaryDefinition=e,this.dictionarymanager.currentDictionaryItem=null,this.dictionarymanager.currentDictionaryIndex=null,this.dictionarymanager.currentDictionaryRelationship=null,this.dictionarymanager.loadDatabaseFields(this.dictionarymanager.dictionarydefinitions.find((t=>t.id==e)).tablename))}addDictionaryDefinition(e){e.stopPropagation(),this.modal.openModal("DictionaryManagerAddDefinitionModal",!0,this.injector).subscribe({next:e=>{e.instance.newDefinitionID.subscribe({next:e=>{this.setCurrentDictionaryDefinition(e);let t=this.itemscontainer.element.nativeElement.scrollHeight,s=this.dictionarydefinitions.findIndex((t=>t.id==e)),i=t/this.dictionarydefinitions.length*s;this.itemscontainer.element.nativeElement.scrollTo(0,i)}})}})}delete(e){this.dictionarymanager.promptDelete("MSG_DELETE_DEFINITION").subscribe({next:t=>{let s={};"drop"==t&&(s.drop=1);let i=this.modal.await("LBL_DELETING");this.backend.deleteRequest(`dictionary/definition/${e}`,s).subscribe({next:()=>{this.dictionarymanager.currentDictionaryDefinition==e&&this.dictionarymanager.currentDictionaryDefinition;let t=this.dictionarymanager.dictionarydefinitions.findIndex((t=>t.id==e));this.dictionarymanager.dictionarydefinitions.splice(t,1),this.dictionarymanager.dictionaryitems.filter((t=>t.sysdictionarydefinition_id==e)).forEach((e=>this.dictionarymanager.dictionaryitems.splice(this.dictionarymanager.dictionaryitems.indexOf(e),1))),this.dictionarymanager.dictionaryindexes.filter((t=>t.sysdictionarydefinition_id==e)).forEach((e=>this.dictionarymanager.dictionaryindexes.splice(this.dictionarymanager.dictionaryindexes.indexOf(e),1))),i.emit(!0)},error:()=>{i.emit(!0)}})}})}editDictionaryDefinition(e){this.modal.openModal("DictionaryManagerEditDefinitionModal",!0,this.injector).subscribe((t=>{t.instance.dictionarydefinition=e}))}static#e=this.ɵfac=function(e){return new(e||DictionaryManagerDefinitions)(m.rXU(j),m.rXU(f.yu),m.rXU(b.B),m.rXU(R.y),m.rXU(m.zZn),m.rXU(y.g),m.rXU(p.H))};static#t=this.ɵcmp=m.VBU({type:DictionaryManagerDefinitions,selectors:[["dictionary-manager-definitions"]],viewQuery:function(e,t){if(1&e&&m.GBs(G,7,m.c1b),2&e){let e;m.mGM(e=m.lsd())&&(t.itemscontainer=e.first)}},outputs:{expanded:"expanded"},decls:45,vars:9,consts:[[1,"slds-p-around--xx-small","slds-grid","slds-grid--vertical-align-center","slds-theme--default"],["placeholder","LBL_SEARCH","autocomplete","off",1,"slds-grow",3,"ngModel","showClear","ngModelChange"],[1,"slds-p-left--xx-small",3,"ngModel","ngModelChange"],["value","g","icon","world"],["value","c","icon","people"],["value","d","icon","light_bulb","colorclass","slds-icon-text-warning"],["value","a","icon","light_bulb","colorclass","slds-icon-text-success"],["value","i","icon","light_bulb","colorclass","slds-icon-text-light"],[1,"slds-select_container","slds-p-left--xx-small"],[1,"slds-select",3,"ngModel","ngModelChange"],["value",""],["label","LBL_ALL"],["value","module"],["label","LBL_MODULE"],["value","metadata"],["label","LBL_METADATA"],["value","template"],["label","LBL_TEMPLATE"],["value","relationship"],["label","LBL_RELATIONSHIP"],[1,"slds-p-horizontal--x-small"],[1,"slds-button","slds-button--icon",3,"click"],[3,"icon"],["system-to-bottom","","marginBottom","45",1,"slds-border--top","slds-scrollable"],["itemscontainer",""],[1,"slds-table","slds-table--fixed-layout","slds-table_bordered","slds-table--header-fixed"],[1,"slds-line-height_reset"],["scope","col",2,"width","2.5rem"],["scope","col",1,""],[1,"slds-truncate","slds-th__action","slds-p-horizontal--x-small"],["label","LBL_NAME"],["label","LBL_TABLE"],["label","LBL_TYPE"],["scope","col",2,"width","3rem"],["class","slds-hint-parent",3,"ngClass","dblclick","click",4,"ngFor","ngForOf","ngForTrackBy"],["class","ng-star-inserted slds-align--absolute-center slds-border--top slds-p-around--small slds-theme--default",4,"ngIf"],[1,"slds-hint-parent",3,"ngClass","dblclick","click"],["size","xx-small",1,"slds-p-right--xx-small",3,"icon"],[3,"ngModel","ngModelChange"],["data-label","Dictionary"],[1,"slds-truncate"],["data-label","Table"],["data-label","Type"],["size","xx-small","icon","edit"],[1,"slds-button","slds-button--icon",3,"disabled","click"],["size","xx-small","icon","delete"],[1,"ng-star-inserted","slds-align--absolute-center","slds-border--top","slds-p-around--small","slds-theme--default"],["icon","new","size","x-small",3,"click"]],template:function(e,t){1&e&&(m.j41(0,"div",0)(1,"system-input-text",1),m.mxI("ngModelChange",(function(e){return m.DH7(t.definitionfilterterm,e)||(t.definitionfilterterm=e),e})),m.k0s(),m.j41(2,"system-select-icon",2),m.mxI("ngModelChange",(function(e){return m.DH7(t.definitionfilterscope,e)||(t.definitionfilterscope=e),e})),m.nrm(3,"system-select-icon-item")(4,"system-select-icon-item",3)(5,"system-select-icon-item",4),m.k0s(),m.j41(6,"system-select-icon",2),m.mxI("ngModelChange",(function(e){return m.DH7(t.definitionfilterstatus,e)||(t.definitionfilterstatus=e),e})),m.nrm(7,"system-select-icon-item")(8,"system-select-icon-item",5)(9,"system-select-icon-item",6)(10,"system-select-icon-item",7),m.k0s(),m.j41(11,"div",8)(12,"select",9),m.mxI("ngModelChange",(function(e){return m.DH7(t.definitionfiltertype,e)||(t.definitionfiltertype=e),e})),m.j41(13,"option",10),m.nrm(14,"system-label",11),m.k0s(),m.j41(15,"option",12),m.nrm(16,"system-label",13),m.k0s(),m.j41(17,"option",14),m.nrm(18,"system-label",15),m.k0s(),m.j41(19,"option",16),m.nrm(20,"system-label",17),m.k0s(),m.j41(21,"option",18),m.nrm(22,"system-label",19),m.k0s()()(),m.j41(23,"div",20)(24,"button",21),m.bIt("click",(function(){return t.isExpanded=!t.isExpanded})),m.nrm(25,"system-button-icon",22),m.k0s()()(),m.j41(26,"div",23,24)(28,"table",25)(29,"thead")(30,"tr",26),m.nrm(31,"th",27),m.j41(32,"th",28)(33,"div",29),m.nrm(34,"system-label",30),m.k0s()(),m.j41(35,"th",28)(36,"div",29),m.nrm(37,"system-label",31),m.k0s()(),m.j41(38,"th",28)(39,"div",29),m.nrm(40,"system-label",32),m.k0s()(),m.nrm(41,"th",33),m.k0s()(),m.j41(42,"tbody"),m.DNE(43,B,18,9,"tr",34),m.k0s()()(),m.DNE(44,N,2,0,"div",35)),2&e&&(m.R7$(),m.R50("ngModel",t.definitionfilterterm),m.Y8G("showClear",!0),m.R7$(),m.R50("ngModel",t.definitionfilterscope),m.R7$(4),m.R50("ngModel",t.definitionfilterstatus),m.R7$(6),m.R50("ngModel",t.definitionfiltertype),m.R7$(13),m.Y8G("icon",t._isExpanded?"chevronleft":"chevronright"),m.R7$(18),m.Y8G("ngForOf",t.dictionarydefinitions)("ngForTrackBy",t.trackByFn),m.R7$(),m.Y8G("ngIf","none"!=t.dictionarymanager.changescope))},dependencies:[i.YU,i.Sq,i.bT,n.xH,n.y7,n.wz,n.BC,n.vS,L.t,D.H,x.W,u.B,E.Z,C.i,F.b,g],encapsulation:2})}return DictionaryManagerDefinitions})();var w=s(22465),T=s(69139);function A(e,t){if(1&e){const e=m.RV6();m.j41(0,"button",6),m.bIt("click",(function(){m.eBV(e);const t=m.XpG(2);return m.Njj(t.cloneDefinition())})),m.nrm(1,"system-label",22),m.k0s()}}function Y(e,t){if(1&e){const e=m.RV6();m.j41(0,"system-utility-icon",23),m.bIt("click",(function(t){m.eBV(e);const s=m.XpG(2);return m.Njj(s.activateAll(t))})),m.k0s()}}function O(e,t){1&e&&m.nrm(0,"system-utility-icon",36),2&e&&m.Y8G("icon","rows")("size","x-small")}function X(e,t){if(1&e){const e=m.RV6();m.j41(0,"button",37),m.bIt("click",(function(){m.eBV(e);const t=m.XpG().$implicit,s=m.XpG(2);return m.Njj(s.editDictionaryItem(t))})),m.nrm(1,"system-button-icon",38),m.k0s()}}const V=e=>({"slds-is-selected":e});function U(e,t){if(1&e){const e=m.RV6();m.qex(0),m.j41(1,"tr",24),m.bIt("click",(function(){m.eBV(e);const t=m.XpG().$implicit,s=m.XpG(2);return m.Njj(s.setActiveId(t.id))}))("dblclick",(function(){m.eBV(e);const t=m.XpG(3);return m.Njj(t.detailsExpanded=!t.detailsExpanded)})),m.nrm(2,"td"),m.j41(3,"td",29)(4,"div",14),m.EFF(5),m.k0s()(),m.j41(6,"td",30)(7,"div",14),m.EFF(8),m.k0s()(),m.j41(9,"td")(10,"div",14),m.EFF(11),m.k0s()(),m.nrm(12,"td"),m.k0s(),m.bVm()}if(2&e){const e=t.$implicit,s=m.XpG().$implicit,i=m.XpG(2);m.R7$(),m.Y8G("ngClass",m.eq3(5,V,i.dictionarymanager.currentDictionaryItem==s.id))("cdkDragDisabled",!i.canShuffle),m.R7$(4),m.JRh(e.name),m.R7$(3),m.JRh(i.dictionarymanager.getDomainName(e.sysdomaindefinition_id)),m.R7$(3),m.JRh(i.dictionarymanager.getDictionaryDefinitionName(s.sysdictionary_ref_id))}}function H(e,t){if(1&e){const e=m.RV6();m.qex(0),m.j41(1,"tr",24),m.bIt("click",(function(){const t=m.eBV(e).$implicit,s=m.XpG(2);return m.Njj(s.setActiveId(t.id))}))("dblclick",(function(){m.eBV(e);const t=m.XpG(2);return m.Njj(t.detailsExpanded=!t.detailsExpanded)})),m.j41(2,"td"),m.DNE(3,O,1,2,"system-utility-icon",25),m.nrm(4,"system-utility-icon",26),m.j41(5,"dictionary-manager-item-status",27,28),m.bIt("ngModelChange",(function(t){const s=m.eBV(e).$implicit,i=m.sdS(6),n=m.XpG(2);return m.Njj(n.setStatus(s,t,i))})),m.k0s()(),m.j41(7,"td",29)(8,"div",14),m.EFF(9),m.k0s()(),m.j41(10,"td",30)(11,"div",14),m.EFF(12),m.k0s()(),m.j41(13,"td")(14,"div",14),m.EFF(15),m.k0s()(),m.j41(16,"td",31)(17,"div",32),m.DNE(18,X,2,0,"button",33),m.j41(19,"button",34),m.bIt("click",(function(){const t=m.eBV(e).$implicit,s=m.XpG(2);return m.Njj(s.deleteDictionaryItem(t.id))})),m.nrm(20,"system-button-icon",35),m.k0s()()()(),m.DNE(21,U,13,7,"ng-container",20),m.bVm()}if(2&e){const e=t.$implicit,s=m.XpG(2);m.R7$(),m.Y8G("ngClass",m.eq3(12,V,s.dictionarymanager.currentDictionaryItem==e.id))("cdkDragDisabled",!s.canShuffle),m.R7$(2),m.Y8G("ngIf",s.canShuffle),m.R7$(),m.Y8G("icon","g"==e.scope?"world":"people"),m.R7$(),m.Y8G("disabled","a"!=s.definitionStatus)("ngModel",e.status),m.R7$(4),m.JRh(e.name),m.R7$(3),m.JRh(s.dictionarymanager.getDomainName(e.sysdomaindefinition_id)),m.R7$(3),m.JRh(s.dictionarymanager.getDictionaryDefinitionName(e.sysdictionary_ref_id)),m.R7$(3),m.Y8G("ngIf",!e.sysdictionary_ref_id),m.R7$(),m.Y8G("disabled","a"==e.status),m.R7$(2),m.Y8G("ngForOf",s.getTemplateItems(e.sysdictionary_ref_id))}}function z(e,t){if(1&e){const e=m.RV6();m.j41(0,"button",37),m.bIt("click",(function(){m.eBV(e);const t=m.XpG(3);return m.Njj(t.cloneDefinition())})),m.nrm(1,"system-button-icon",41),m.k0s()}}function q(e,t){if(1&e){const e=m.RV6();m.j41(0,"div",39)(1,"button",37),m.bIt("click",(function(){m.eBV(e);const t=m.XpG(2);return m.Njj(t.addDictionaryItem())})),m.nrm(2,"system-button-icon",40),m.k0s(),m.DNE(3,z,2,0,"button",33),m.k0s()}if(2&e){const e=m.XpG(2);m.R7$(3),m.Y8G("ngIf",0==e.dictionaryitems.length)}}function P(e,t){if(1&e){const e=m.RV6();m.qex(0),m.j41(1,"div",3)(2,"system-input-text",4),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.filterterm,t)||(s.filterterm=t),m.Njj(t)})),m.k0s(),m.DNE(3,A,2,0,"button",5),m.j41(4,"button",6),m.bIt("click",(function(){m.eBV(e);const t=m.XpG();return m.Njj(t.addDictionaryItem())})),m.nrm(5,"system-label",7),m.k0s()(),m.j41(6,"div",8)(7,"table",9)(8,"thead")(9,"tr",10)(10,"th",11),m.DNE(11,Y,1,0,"system-utility-icon",12),m.k0s(),m.j41(12,"th",13)(13,"div",14),m.nrm(14,"system-label",15),m.k0s()(),m.j41(15,"th",13)(16,"div",14),m.nrm(17,"system-label",16),m.k0s()(),m.j41(18,"th",13)(19,"div",14),m.nrm(20,"system-label",17),m.k0s()(),m.nrm(21,"th",18),m.k0s()(),m.j41(22,"tbody",19),m.bIt("cdkDropListDropped",(function(t){m.eBV(e);const s=m.XpG();return m.Njj(s.drop(t))})),m.DNE(23,H,22,14,"ng-container",20),m.k0s()(),m.DNE(24,q,4,1,"div",21),m.k0s(),m.bVm()}if(2&e){const e=m.XpG();m.R7$(2),m.R50("ngModel",e.filterterm),m.Y8G("showClear",!0),m.R7$(),m.Y8G("ngIf",0==e.dictionaryitems.length),m.R7$(8),m.Y8G("ngIf",e.hasDraftItems),m.R7$(12),m.Y8G("ngForOf",e.dictionaryitems),m.R7$(),m.Y8G("ngIf","none"!=e.dictionarymanager.changescope)}}function J(e,t){1&e&&(m.j41(0,"div",42),m.nrm(1,"system-label",43),m.k0s())}let W=(()=>{class DictionaryManagerItems{constructor(e,t,s,i,n,l,o){this.dictionarymanager=e,this.backend=t,this.metadata=s,this.language=i,this.modal=n,this.injector=l,this.modelutilities=o,this.detailsExpanded=!1}get canShuffle(){return this.dictionarymanager.canChange(this.dictionarymanager.dictionarydefinitions.find((e=>e.id==this.dictionarymanager.currentDictionaryDefinition))?.scope)}get dictionaryitems(){return this.dictionarymanager.currentDictionaryDefinition?this.dictionarymanager.dictionaryitems.filter((e=>(e.id==this.dictionarymanager.currentDictionaryItem||!this.filterterm||e.name.toLowerCase().indexOf(this.filterterm.toLowerCase())>=0)&&e.sysdictionarydefinition_id==this.dictionarymanager.currentDictionaryDefinition)).sort(((e,t)=>e.sequence>t.sequence?1:-1)):[]}getTemplateItems(e){return e?this.dictionarymanager.dictionaryitems.filter((t=>t.sysdictionarydefinition_id==e)).sort(((e,t)=>e.sequence>t.sequence?1:-1)):[]}get itemsliststyle(){return{height:`calc(100% - ${this.detailsExpanded?458:79}px`}}get definitionStatus(){return this.dictionarymanager.dictionarydefinitions.find((e=>e.id==this.dictionarymanager.currentDictionaryDefinition)).status}addDictionaryItem(){this.modal.openModal("DictionaryManagerAddItemModal",!0,this.injector)}cloneDefinition(){this.modal.openModal("DictionaryManagerCloneDefinitionModal",!0,this.injector)}editDictionaryItem(e){this.modal.openModal("DictionaryManagerItemDetails",!0,this.injector).subscribe({next:t=>{t.instance.dictionaryitem=e}})}deleteDictionaryItem(e){this.dictionarymanager.promptDelete("MSG_DELETE_DICTIONARYITEM").subscribe({next:t=>{let s={};"drop"==t&&(s.drop=1);let i=this.modal.await("LBL_DELETING");this.backend.deleteRequest(`dictionary/item/${e}`,s).subscribe({next:()=>{let t=this.dictionarymanager.dictionaryitems.findIndex((t=>t.id==e));this.dictionarymanager.dictionaryitems.splice(t,1),i.emit(!0)},error:()=>{i.emit(!0)}})}})}drop(e){let t=this.dictionaryitems,s=this.getSanitizedItemIndex(e.previousIndex),i=this.getSanitizedItemIndex(e.currentIndex),n=t.splice(s,1);t.splice(i,0,n[0]);let l=this.modal.await("LBL_SAVING");this.backend.postRequest("dictionary/items/sequence",{},{items:t.map((e=>e.id))}).subscribe({next:()=>{let e=0;for(let s of t)s.sequence=e,e++;l.emit(!0)},error:()=>{l.emit(!0)}})}getSanitizedItemIndex(e){let t=[];for(let e of this.dictionaryitems){t.push(e.id);for(let s of this.getTemplateItems(e.sysdictionary_ref_id))t.push(e.id)}return this.dictionaryitems.findIndex((s=>s.id==t[e]))}setActiveId(e){this.dictionarymanager.currentDictionaryItem=e,this.dictionaryitem=this.dictionarymanager.dictionaryitems.find((t=>t.id==e))}get hasDraftItems(){return this.dictionaryitems.filter((e=>"d"==e.status)).length>0}activateAll(e){e.stopPropagation(),e.preventDefault(),this.modal.confirm("MSG_ACTIVATE_ALL","MSG_ACTIVATE_ALL").subscribe({next:e=>{e&&this.dictionaryitems.filter((e=>"d"==e.status)).forEach((e=>e.status="a"))}})}setStatus(e,t,s){let i;switch(t){case"a":i=this.modal.await("LBL_EXECUTING"),this.backend.postRequest(`dictionary/item/${e.id}/activate`).subscribe({next:()=>{this.dictionarymanager.handleAfterActivate(),e.status=t,i.emit(!0)},error:()=>{this.modal.toast.sendToast("ERR_FAILED_TO_EXECUTE","error"),s.status=e.status,i.emit(!0)}});break;case"i":i=this.modal.await("LBL_EXECUTING"),this.backend.deleteRequest(`dictionary/item/${e.id}/activate`).subscribe({next:()=>{this.dictionarymanager.handleAfterActivate(),e.status=t,i.emit(!0)},error:()=>{i.emit(!0)}});break;default:e.status=t}}static#e=this.ɵfac=function(e){return new(e||DictionaryManagerItems)(m.rXU(j),m.rXU(p.H),m.rXU(f.yu),m.rXU(b.B),m.rXU(R.y),m.rXU(m.zZn),m.rXU(y.g))};static#t=this.ɵcmp=m.VBU({type:DictionaryManagerItems,selectors:[["dictionary-manager-items"]],decls:4,vars:2,consts:[["system-to-bottom-noscroll",""],[4,"ngIf","ngIfElse"],["selectdefinition",""],[1,"slds-grid","slds-grid_vertical-align-center","slds-grid--align-spread","slds-p-around--xx-small","slds-theme--shade","slds-border--bottom"],["placeholder","LBL_FILTER","autocomplete","off",1,"slds-col--bump-right",3,"ngModel","showClear","ngModelChange"],["class","slds-button slds-button--neutral",3,"click",4,"ngIf"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_ADD"],["system-to-bottom",""],[1,"slds-table","slds-table--fixed-layout","slds-table_bordered"],[1,"slds-line-height_reset"],["scope","col",1,"slds-text-align--right",2,"width","4rem"],["class","slds-p-right--xx-small","icon","light_bulb","colorclass","slds-icon-text-warning","size","xx-small",3,"click",4,"ngIf"],["scope","col",1,""],[1,"slds-truncate"],["label","LBL_NAME"],["label","LBL_DOMAIN"],["label","LBL_TEMPLATE"],["scope","col",2,"width","3rem"],["cdkDropList","",1,"dragboundary",3,"cdkDropListDropped"],[4,"ngFor","ngForOf"],["class","slds-align--absolute-center slds-p-around--small",4,"ngIf"],["label","LBL_CLONE"],["icon","light_bulb","colorclass","slds-icon-text-warning","size","xx-small",1,"slds-p-right--xx-small",3,"click"],["cdkDrag","","cdkDragBoundary",".dragboundary",1,"slds-hint-parent",3,"ngClass","cdkDragDisabled","click","dblclick"],["class","slds-p-right--xx-small","cdkDragHandle","","style","cursor:move",3,"icon","size",4,"ngIf"],["size","xx-small",1,"slds-p-right--xx-small",3,"icon"],[3,"disabled","ngModel","ngModelChange"],["statusComponent",""],["data-label","Domain"],["data-label","Type"],[1,""],[1,"slds-grid","slds-grid_vertical-align-center","slds-grid--align-end"],["class","slds-button slds-button--icon",3,"click",4,"ngIf"],[1,"slds-button","slds-button--icon",3,"disabled","click"],["icon","delete"],["cdkDragHandle","",1,"slds-p-right--xx-small",2,"cursor","move",3,"icon","size"],[1,"slds-button","slds-button--icon",3,"click"],["icon","edit"],[1,"slds-align--absolute-center","slds-p-around--small"],["icon","new"],["icon","copy"],[1,"slds-size--1-of-1","slds-height_full","slds-align--absolute-center"],["label","LBL_SELECT_A_DICTIONARYDEFINITION"]],template:function(e,t){if(1&e&&(m.j41(0,"div",0),m.DNE(1,P,25,6,"ng-container",1)(2,J,2,0,"ng-template",null,2,m.C5r),m.k0s()),2&e){const e=m.sdS(3);m.R7$(),m.Y8G("ngIf",t.dictionarymanager.currentDictionaryDefinition)("ngIfElse",e)}},dependencies:[i.YU,i.Sq,i.bT,n.BC,n.vS,L.t,D.H,x.W,u.B,F.b,T.p,c.O7,c.T1,c.Fb,g],encapsulation:2})}return DictionaryManagerItems})(),K=(()=>{class DictionaryFilterRelationshipPipe{transform(e,t){return t?e.filter((e=>0==e.deleted&&(e.lhs_sysdictionarydefinition_id==t||e.rhs_sysdictionarydefinition_id==t||e.join_sysdictionarydefinition_id==t))).sort(((e,t)=>e.name.localeCompare(t.name))):[]}static#e=this.ɵfac=function(e){return new(e||DictionaryFilterRelationshipPipe)};static#t=this.ɵpipe=m.EJ8({name:"dictionaryFilterRelationship",type:DictionaryFilterRelationshipPipe,pure:!0})}return DictionaryFilterRelationshipPipe})(),Q=(()=>{class DictionaryFilterRelationshipTemplatePipe{transform(e,t,s){let i=[];for(let n of s.filter((e=>e.sysdictionary_ref_id&&e.sysdictionarydefinition_id==t))){let t=e.filter((e=>0==e.deleted&&(e.lhs_sysdictionarydefinition_id==n.sysdictionary_ref_id||e.rhs_sysdictionarydefinition_id==n.sysdictionary_ref_id)));t.length>0&&i.push({relatedTemplateId:n.sysdictionary_ref_id,relationships:t})}return i}static#e=this.ɵfac=function(e){return new(e||DictionaryFilterRelationshipTemplatePipe)};static#t=this.ɵpipe=m.EJ8({name:"dictionaryFilterRelationshipTemplate",type:DictionaryFilterRelationshipTemplatePipe,pure:!0})}return DictionaryFilterRelationshipTemplatePipe})();const Z=e=>({"slds-is-selected":e});function ee(e,t){if(1&e){const e=m.RV6();m.j41(0,"tr",17),m.bIt("click",(function(){const t=m.eBV(e).$implicit,s=m.XpG(2);return m.Njj(s.setActiveId(t.id))})),m.j41(1,"td"),m.nrm(2,"system-utility-icon",18),m.j41(3,"dictionary-manager-item-status",19),m.bIt("ngModelChange",(function(t){const s=m.eBV(e).$implicit,i=m.XpG(2);return m.Njj(i.setStatus(s,t))})),m.k0s()(),m.j41(4,"td",20)(5,"div",7),m.EFF(6),m.k0s()(),m.nrm(7,"td"),m.j41(8,"td",21)(9,"div",7)(10,"span",22),m.EFF(11),m.k0s()()(),m.j41(12,"td",23)(13,"div",7),m.EFF(14),m.k0s()(),m.j41(15,"td",24)(16,"div",7),m.EFF(17),m.k0s()(),m.j41(18,"td",25)(19,"button",26),m.bIt("click",(function(t){const s=m.eBV(e).$implicit,i=m.XpG(2);return m.Njj(i.editDictionaryRelationship(t,s))})),m.nrm(20,"system-button-icon",27),m.k0s(),m.j41(21,"button",28),m.bIt("click",(function(t){const s=m.eBV(e).$implicit,i=m.XpG(2);return m.Njj(i.deleteDictionaryRelationship(t,s.id))})),m.nrm(22,"system-button-icon",29),m.k0s()()()}if(2&e){const e=t.$implicit,s=m.XpG(2);m.Y8G("ngClass",m.eq3(12,Z,s.dictionarymanager.currentDictionaryRelationship==e.id)),m.R7$(2),m.Y8G("icon","g"==e.scope?"world":"people"),m.R7$(),m.Y8G("ngModel",e.status),m.R7$(3),m.Lme("",e.name," / ",e.relationship_name,""),m.R7$(5),m.JRh(e.relationship_type),m.R7$(3),m.Lme("",s.dictionarymanager.getDictionaryDefinitionName(e.lhs_sysdictionarydefinition_id)," / ",s.dictionarymanager.getDictionaryItemName(e.lhs_sysdictionaryitem_id),""),m.R7$(3),m.Lme("",s.dictionarymanager.getDictionaryDefinitionName(e.rhs_sysdictionarydefinition_id)," / ",s.dictionarymanager.getDictionaryItemName(e.rhs_sysdictionaryitem_id),""),m.R7$(3),m.Y8G("icon","a"==e.status?"preview":"edit"),m.R7$(),m.Y8G("disabled","a"==e.status||!s.dictionarymanager.canChange(e.scope))}}function te(e,t){if(1&e){const e=m.RV6();m.j41(0,"tr",17),m.bIt("click",(function(){const t=m.eBV(e).$implicit,s=m.XpG(3);return m.Njj(s.setActiveId(t.id))})),m.j41(1,"td"),m.nrm(2,"system-utility-icon",18)(3,"dictionary-manager-item-status",30),m.k0s(),m.j41(4,"td",20)(5,"div",7),m.EFF(6),m.k0s()(),m.j41(7,"td")(8,"div",7),m.EFF(9),m.k0s()(),m.j41(10,"td",21)(11,"div",7)(12,"span",22),m.EFF(13),m.k0s()()(),m.j41(14,"td",23)(15,"div",7),m.EFF(16),m.k0s()(),m.j41(17,"td",24)(18,"div",7),m.EFF(19),m.k0s()(),m.j41(20,"td",25)(21,"div",31)(22,"button",26),m.bIt("click",(function(t){const s=m.eBV(e).$implicit,i=m.XpG(3);return m.Njj(i.editDictionaryRelationship(t,s))})),m.nrm(23,"system-button-icon",32),m.k0s()()()()}if(2&e){const e=t.$implicit,s=m.XpG().$implicit,i=m.XpG(2);m.Y8G("ngClass",m.eq3(12,Z,i.dictionarymanager.currentDictionaryRelationship==e.id)),m.R7$(2),m.Y8G("icon","g"==e.scope?"world":"people"),m.R7$(),m.Y8G("ngModel",e.status)("disabled",!0),m.R7$(3),m.Lme("",i.translateRelationshipName(e.name)," / ",i.translateRelationshipName(e.relationship_name),""),m.R7$(3),m.JRh(i.dictionarymanager.getDictionaryDefinitionName(s.relatedTemplateId)),m.R7$(4),m.JRh(e.relationship_type),m.R7$(3),m.Lme("",i.dictionarymanager.getDictionaryDefinitionName(e.lhs_sysdictionarydefinition_id)," / ",i.dictionarymanager.getDictionaryItemName(e.lhs_sysdictionaryitem_id),""),m.R7$(3),m.Lme("",i.dictionarymanager.getDictionaryDefinitionName(e.rhs_sysdictionarydefinition_id)," / ",i.dictionarymanager.getDictionaryItemName(e.rhs_sysdictionaryitem_id),"")}}function se(e,t){if(1&e&&(m.j41(0,"tbody"),m.DNE(1,te,24,14,"tr",14),m.k0s()),2&e){const e=t.$implicit;m.R7$(),m.Y8G("ngForOf",e.relationships)}}function ie(e,t){if(1&e){const e=m.RV6();m.j41(0,"div",33)(1,"system-utility-icon",34),m.bIt("click",(function(t){m.eBV(e);const s=m.XpG(2);return m.Njj(s.addDictionaryRelationship(t))})),m.k0s()()}}function ne(e,t){if(1&e&&(m.j41(0,"div",2)(1,"table",3)(2,"thead")(3,"tr",4),m.nrm(4,"th",5),m.j41(5,"th",6)(6,"div",7),m.nrm(7,"system-label",8),m.k0s()(),m.j41(8,"th",6)(9,"div",7),m.nrm(10,"system-label",9),m.k0s()(),m.j41(11,"th",6)(12,"div",7),m.nrm(13,"system-label",10),m.k0s()(),m.j41(14,"th",6)(15,"div",7),m.nrm(16,"system-label",11),m.k0s()(),m.j41(17,"th",6)(18,"div",7),m.nrm(19,"system-label",12),m.k0s()(),m.nrm(20,"th",13),m.k0s()(),m.j41(21,"tbody"),m.DNE(22,ee,23,14,"tr",14),m.nI1(23,"dictionaryFilterRelationship"),m.k0s(),m.DNE(24,se,2,1,"tbody",15),m.nI1(25,"dictionaryFilterRelationshipTemplate"),m.k0s(),m.DNE(26,ie,2,0,"div",16),m.k0s()),2&e){const e=m.XpG();m.R7$(22),m.Y8G("ngForOf",m.i5U(23,3,e.dictionarymanager.dictionaryrelationships,e.dictionarymanager.currentDictionaryDefinition)),m.R7$(2),m.Y8G("ngForOf",m.brH(25,6,e.dictionarymanager.dictionaryrelationships,e.dictionarymanager.currentDictionaryDefinition,e.dictionarymanager.dictionaryitems)),m.R7$(2),m.Y8G("ngIf","none"!=e.dictionarymanager.changescope)}}function le(e,t){1&e&&(m.j41(0,"div",35),m.nrm(1,"system-label",36),m.k0s())}let oe=(()=>{class DictionaryManagerRelationships{constructor(e,t,s,i,n,l,o){this.dictionarymanager=e,this.backend=t,this.metadata=s,this.language=i,this.modal=n,this.injector=l,this.modelutilities=o}get dictionaryrelationships(){return this.dictionarymanager.currentDictionaryDefinition?this.dictionarymanager.dictionaryrelationships.filter((e=>0==e.deleted&&(e.lhs_sysdictionarydefinition_id==this.dictionarymanager.currentDictionaryDefinition||e.rhs_sysdictionarydefinition_id==this.dictionarymanager.currentDictionaryDefinition||e.join_sysdictionarydefinition_id==this.dictionarymanager.currentDictionaryDefinition))).sort(((e,t)=>e.name.localeCompare(t.name))):[]}get dictionaryRelationshipsForTemplates(){let e=[];for(let t of this.dictionarymanager.dictionaryitems.filter((e=>e.sysdictionary_ref_id&&e.sysdictionarydefinition_id==this.dictionarymanager.currentDictionaryDefinition))){let s=this.dictionarymanager.dictionaryrelationships.filter((e=>0==e.deleted&&(e.lhs_sysdictionarydefinition_id==t.sysdictionary_ref_id||e.rhs_sysdictionarydefinition_id==t.sysdictionary_ref_id)));s.length>0&&e.push({relatedTemplateId:t.sysdictionary_ref_id,relationships:s})}return e}translateRelationshipName(e){return e.replace("{tablename}",this.dictionarymanager.getCurrentDefinition().tablename)}addDictionaryRelationship(e){e.stopPropagation(),this.modal.openModal("DictionaryManagerRelationshipAdd",!0,this.injector)}editDictionaryRelationship(e,t){e.stopPropagation();let s=this.dictionarymanager.dictionaryrelationshiptypes.find((e=>e.name==t.relationship_type));this.modal.openModal(s.component_edit,!0,this.injector).subscribe((e=>{e.instance.dictionaryRelationship=t}))}deleteDictionaryRelationship(e,t){e.stopPropagation(),this.modal.prompt("confirm",this.language.getLabel("MSG_DELETE_RECORD","","long"),this.language.getLabel("MSG_DELETE_RECORD")).subscribe((e=>{e&&this.backend.deleteRequest(`dictionary/relationship/${t}`).subscribe({next:e=>{this.dictionarymanager.dictionaryrelationships=this.dictionarymanager.dictionaryrelationships.filter((e=>e.id!=t)),this.dictionarymanager.currentDictionaryRelationship==t&&(this.dictionarymanager.currentDictionaryRelationship,this.currentRelationship=null)}})}))}isLeft(e){return e.lhs_sysdictionarydefinition_id==this.dictionarymanager.currentDictionaryDefinition}setActiveId(e){this.dictionarymanager.currentDictionaryRelationship=e,this.currentRelationship=this.dictionarymanager.dictionaryrelationships.find((t=>t.id==e))}setStatus(e,t){let s;switch(t){case"a":s=this.modal.await("LBL_EXECUTING"),this.backend.postRequest(`dictionary/relationship/${e.id}/activate`).subscribe({next:()=>{this.dictionarymanager.handleAfterActivate(),e.status=t,s.emit(!0)},error:()=>{s.emit(!0)}});break;case"i":s=this.modal.await("LBL_EXECUTING"),this.backend.deleteRequest(`dictionary/relationship/${e.id}/activate`).subscribe({next:()=>{this.dictionarymanager.handleAfterActivate(),e.status=t,s.emit(!0)},error:()=>{s.emit(!0)}});break;default:e.status=t}}trackByFn(e,t){return t}static#e=this.ɵfac=function(e){return new(e||DictionaryManagerRelationships)(m.rXU(j),m.rXU(p.H),m.rXU(f.yu),m.rXU(b.B),m.rXU(R.y),m.rXU(m.zZn),m.rXU(y.g))};static#t=this.ɵcmp=m.VBU({type:DictionaryManagerRelationships,selectors:[["dictionary-manager-relationships"]],decls:3,vars:2,consts:[["system-to-bottom-noscroll","",4,"ngIf","ngIfElse"],["selectdefinition",""],["system-to-bottom-noscroll",""],[1,"slds-table","slds-table--fixed-layout","slds-table_bordered"],[1,"slds-line-height_reset"],["scope","col",2,"width","3.5rem"],["scope","col",1,""],[1,"slds-truncate"],["label","LBL_NAME"],["label","LBL_TEMPLATE"],["label","LBL_TYPE"],["label","LBL_LEFT"],["label","LBL_RIGHT"],["scope","col",2,"width","3rem"],["class","slds-hint-parent",3,"ngClass","click",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],["class","slds-align--absolute-center slds-p-around--small",4,"ngIf"],[1,"slds-hint-parent",3,"ngClass","click"],["size","xx-small",1,"slds-p-right--xx-small",3,"icon"],[3,"ngModel","ngModelChange"],["data-label","NAME"],["data-label","Type"],[1,"slds-p-horizontal--x-small"],["data-label","Left"],["data-label","Right"],[1,""],[1,"slds-button","slds-button--icon",3,"click"],["size","xx-small",3,"icon"],[1,"slds-button","slds-button--icon",3,"disabled","click"],["size","xx-small","icon","delete"],[3,"ngModel","disabled"],[1,"slds-grid","slds-grid--align-end"],["size","xx-small","icon","preview"],[1,"slds-align--absolute-center","slds-p-around--small"],["icon","new","size","x-small",3,"click"],["system-to-bottom-noscroll","",1,"slds-size--1-of-1","slds-height_full","slds-align--absolute-center"],["label","LBL_SELECT_A_DICTIONARYDEFINITION"]],template:function(e,t){if(1&e&&m.DNE(0,ne,27,10,"div",0)(1,le,2,0,"ng-template",null,1,m.C5r),2&e){const e=m.sdS(2);m.Y8G("ngIf",t.dictionarymanager.currentDictionaryDefinition)("ngIfElse",e)}},dependencies:[i.YU,i.Sq,i.bT,n.BC,n.vS,L.t,x.W,u.B,T.p,g,K,Q],encapsulation:2})}return DictionaryManagerRelationships})();function ae(e,t){if(1&e){const e=m.RV6();m.j41(0,"system-utility-icon",22),m.bIt("click",(function(t){m.eBV(e);const s=m.XpG().$implicit,i=m.XpG(2);return m.Njj(i.deleteIndex(t,s.id))})),m.k0s()}}function de(e,t){1&e&&m.nrm(0,"system-utility-icon",23)}const re=e=>({"slds-is-selected":e});function ce(e,t){if(1&e){const e=m.RV6();m.j41(0,"tr",16),m.bIt("click",(function(){const t=m.eBV(e).$implicit,s=m.XpG(2);return m.Njj(s.setActiveId(t.id))})),m.j41(1,"td"),m.nrm(2,"system-utility-icon",17),m.j41(3,"dictionary-manager-item-status",18),m.bIt("ngModelChange",(function(t){const s=m.eBV(e).$implicit,i=m.XpG(2);return m.Njj(i.setStatus(s,t))})),m.k0s()(),m.j41(4,"td")(5,"div",7),m.EFF(6),m.k0s()(),m.nrm(7,"td"),m.j41(8,"td")(9,"div",7),m.EFF(10),m.k0s()(),m.j41(11,"td")(12,"div",7),m.EFF(13),m.k0s()(),m.j41(14,"td",19),m.DNE(15,ae,1,0,"system-utility-icon",20)(16,de,1,0,"system-utility-icon",21),m.k0s()()}if(2&e){const e=t.$implicit,s=m.XpG(2);m.Y8G("ngClass",m.eq3(9,re,s.dictionarymanager.currentDictionaryIndex==e.id)),m.R7$(2),m.Y8G("icon","g"==e.scope?"world":"people"),m.R7$(),m.Y8G("disabled","a"!=s.definitionStatus)("ngModel",e.status),m.R7$(3),m.JRh(e.name),m.R7$(4),m.JRh(e.indextype),m.R7$(3),m.JRh(s.getIndexFields(e.id)),m.R7$(2),m.Y8G("ngIf","a"!=e.status),m.R7$(),m.Y8G("ngIf","a"==e.status)}}function me(e,t){if(1&e&&(m.j41(0,"tr",25),m.nrm(1,"td"),m.j41(2,"td")(3,"div",7),m.EFF(4),m.k0s()(),m.j41(5,"td")(6,"div",7),m.EFF(7),m.k0s()(),m.j41(8,"td")(9,"div",7),m.EFF(10),m.k0s()(),m.j41(11,"td")(12,"div",7),m.EFF(13),m.k0s()(),m.nrm(14,"td"),m.k0s()),2&e){const e=t.$implicit,s=m.XpG().$implicit,i=m.XpG(2);m.R7$(4),m.JRh(i.translateIndexName(e.name)),m.R7$(3),m.JRh(i.dictionarymanager.getDictionaryDefinitionName(s.relatedTemplateId)),m.R7$(3),m.JRh(e.indextype),m.R7$(3),m.JRh(i.getIndexFields(e.id))}}function ue(e,t){if(1&e&&(m.j41(0,"tbody"),m.DNE(1,me,15,4,"tr",24),m.k0s()),2&e){const e=t.$implicit;m.R7$(),m.Y8G("ngForOf",e.indexes)}}function ge(e,t){if(1&e){const e=m.RV6();m.j41(0,"div",26)(1,"system-utility-icon",27),m.bIt("click",(function(t){m.eBV(e);const s=m.XpG(2);return m.Njj(s.addIndex(t))})),m.k0s()()}}function he(e,t){if(1&e&&(m.qex(0),m.j41(1,"table",3)(2,"thead")(3,"tr",4),m.nrm(4,"th",5),m.j41(5,"th",6)(6,"div",7),m.nrm(7,"system-label",8),m.k0s()(),m.j41(8,"th",6)(9,"div",7),m.nrm(10,"system-label",9),m.k0s()(),m.j41(11,"th",6)(12,"div",7),m.nrm(13,"system-label",10),m.k0s()(),m.j41(14,"th",6)(15,"div",7),m.nrm(16,"system-label",11),m.k0s()(),m.nrm(17,"th",12),m.k0s()(),m.j41(18,"tbody"),m.DNE(19,ce,17,11,"tr",13),m.k0s(),m.DNE(20,ue,2,1,"tbody",14),m.k0s(),m.DNE(21,ge,2,0,"div",15),m.bVm()),2&e){const e=m.XpG();m.R7$(19),m.Y8G("ngForOf",e.dictionaryIndexes),m.R7$(),m.Y8G("ngForOf",e.dictionaryIndexesForTemplates),m.R7$(),m.Y8G("ngIf","none"!=e.dictionarymanager.changescope)}}function pe(e,t){1&e&&(m.j41(0,"div",28),m.nrm(1,"system-label",29),m.k0s())}let fe=(()=>{class DictionaryManagerIndexes{constructor(e,t,s,i,n,l,o){this.dictionarymanager=e,this.backend=t,this.metadata=s,this.language=i,this.modal=n,this.injector=l,this.modelutilities=o}get dictionaryIndexes(){if(!this.dictionarymanager.currentDictionaryDefinition)return[];return this.dictionarymanager.dictionaryindexes.filter((e=>e.sysdictionarydefinition_id==this.dictionarymanager.currentDictionaryDefinition)).sort(((e,t)=>e.name.localeCompare(t.name)?1:-1))}get dictionaryIndexesForTemplates(){let e=[];for(let t of this.dictionarymanager.dictionaryitems.filter((e=>e.sysdictionary_ref_id&&e.sysdictionarydefinition_id==this.dictionarymanager.currentDictionaryDefinition))){let s=this.dictionarymanager.dictionaryindexes.filter((e=>e.sysdictionarydefinition_id==t.sysdictionary_ref_id));s.length>0&&e.push({relatedTemplateId:t.sysdictionary_ref_id,indexes:s})}return e}get definitionStatus(){return this.dictionarymanager.dictionarydefinitions.find((e=>e.id==this.dictionarymanager.currentDictionaryDefinition)).status}setStatus(e,t){let s;switch(t){case"a":s=this.modal.await("LBL_EXECUTING"),this.backend.postRequest(`dictionary/index/${e.id}/activate`).subscribe({next:()=>{this.dictionarymanager.handleAfterActivate(),e.status=t,s.emit(!0)},error:()=>{s.emit(!0)}});break;case"i":s=this.modal.await("LBL_EXECUTING"),this.backend.deleteRequest(`dictionary/index/${e.id}/activate`).subscribe({next:()=>{this.dictionarymanager.handleAfterActivate(),e.status=t,s.emit(!0)},error:()=>{s.emit(!0)}});break;default:e.status=t}}translateIndexName(e){return e.replace("{tablename}",this.dictionarymanager.getCurrentDefinition().tablename)}addIndex(e){e.stopPropagation(),this.modal.openModal("DictionaryManagerIndexAddType",!0,this.injector)}deleteIndex(e,t){e.stopPropagation(),this.modal.prompt("confirm",this.language.getLabel("MSG_DELETE_RECORD","","long"),this.language.getLabel("MSG_DELETE_RECORD")).subscribe((e=>{if(e){let e=this.modal.await("LBL_DELETING");this.backend.deleteRequest(`dictionary/index/${t}`).subscribe({next:s=>{let i=this.dictionarymanager.dictionaryindexes.findIndex((e=>e.id==t));this.dictionarymanager.dictionaryindexes.splice(i,1),this.dictionarymanager.dictionaryindexitems.filter((e=>e.sysdictionaryindex_id==t)).forEach((e=>{let t=this.dictionarymanager.dictionaryindexitems.findIndex((t=>t.id==e.id));this.dictionarymanager.dictionaryindexitems.splice(t,1)})),e.emit(!0)},error:()=>{e.emit(!0)}})}}))}getIndexFields(e){let t=[];for(let s of this.dictionarymanager.dictionaryindexitems.filter((t=>t.sysdictionaryindex_id==e)).sort(((e,t)=>e.sequence>t.sequence?1:-1))){let e=this.dictionarymanager.dictionaryitems.find((e=>e.id==s.sysdictionaryitem_id))?.name;e&&t.push(e)}return t.join()}setActiveId(e){this.dictionarymanager.currentDictionaryIndex=e}static#e=this.ɵfac=function(e){return new(e||DictionaryManagerIndexes)(m.rXU(j),m.rXU(p.H),m.rXU(f.yu),m.rXU(b.B),m.rXU(R.y),m.rXU(m.zZn),m.rXU(y.g))};static#t=this.ɵcmp=m.VBU({type:DictionaryManagerIndexes,selectors:[["dictionary-manager-indexes"]],decls:4,vars:2,consts:[["system-to-bottom",""],[4,"ngIf","ngIfElse"],["selectdefinition",""],[1,"slds-table","slds-table--fixed-layout","slds-table_bordered"],[1,"slds-line-height_reset"],["scope","col",2,"width","2.5rem"],["scope","col",1,""],[1,"slds-truncate"],["label","LBL_NAME"],["label","LBL_TEMPLATE"],["label","LBL_TYPE"],["label","LBL_ITEMS"],["scope","col",2,"width","2rem"],["class","slds-hint-parent",3,"ngClass","click",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],["class","slds-align--absolute-center slds-p-around--small",4,"ngIf"],[1,"slds-hint-parent",3,"ngClass","click"],["size","xx-small",1,"slds-p-right--xx-small",3,"icon"],[3,"disabled","ngModel","ngModelChange"],[1,"slds-align--absolute-center",2,"width","2rem"],["size","xx-small","icon","delete",3,"click",4,"ngIf"],["size","xx-small","icon","delete","colorclass","slds-icon-text-light",4,"ngIf"],["size","xx-small","icon","delete",3,"click"],["size","xx-small","icon","delete","colorclass","slds-icon-text-light"],["class","slds-hint-parent",4,"ngFor","ngForOf"],[1,"slds-hint-parent"],[1,"slds-align--absolute-center","slds-p-around--small"],["icon","new","size","x-small",3,"click"],[1,"slds-size--1-of-1","slds-height_full","slds-align--absolute-center"],["label","LBL_SELECT_A_DICTIONARYDEFINITION"]],template:function(e,t){if(1&e&&(m.j41(0,"div",0),m.DNE(1,he,22,3,"ng-container",1)(2,pe,2,0,"ng-template",null,2,m.C5r),m.k0s()),2&e){const e=m.sdS(3);m.R7$(),m.Y8G("ngIf",t.dictionarymanager.currentDictionaryDefinition)("ngIfElse",e)}},dependencies:[i.YU,i.Sq,i.bT,n.BC,n.vS,x.W,u.B,F.b,g],encapsulation:2})}return DictionaryManagerIndexes})();var be=s(84359);function ye(e,t){if(1&e&&(m.j41(0,"div",28),m.EFF(1),m.k0s()),2&e){const e=m.XpG().$implicit,t=m.XpG(2);m.R7$(),m.JRh(t.translateDomainField(t.getDomainFields(e.sysdomaindefinition_id)[0].name,e))}}function _e(e,t){1&e&&m.nrm(0,"div",28)}function ke(e,t){if(1&e&&(m.j41(0,"div",28),m.EFF(1),m.k0s()),2&e){const e=m.XpG().$implicit,t=m.XpG(2);m.R7$(),m.JRh(t.getRefDefinitionName(e.sysdictionarydefinition_id))}}function ve(e,t){if(1&e&&(m.j41(0,"div",28),m.EFF(1),m.k0s()),2&e){const e=m.XpG().$implicit,t=m.XpG(2);m.R7$(),m.JRh(t.getRelationshipName(e.sysdictionaryrelationship_id))}}function Re(e,t){if(1&e&&m.nrm(0,"system-checkbox",34),2&e){const e=m.XpG().$implicit;m.Y8G("ngModel",e.database)}}function Me(e,t){if(1&e&&m.nrm(0,"system-checkbox",34),2&e){const e=m.XpG().$implicit;m.Y8G("ngModel",e.database)}}function je(e,t){if(1&e&&(m.j41(0,"tr",37),m.nrm(1,"td",27)(2,"td",29),m.j41(3,"td",30)(4,"div",28),m.EFF(5),m.k0s()(),m.nrm(6,"td",38),m.j41(7,"td",33),m.nrm(8,"system-checkbox",34),m.k0s(),m.j41(9,"td",33),m.nrm(10,"system-checkbox",34),m.k0s(),m.j41(11,"td",33),m.DNE(12,Me,1,1,"system-checkbox",35),m.k0s()()),2&e){const e=t.$implicit,s=m.XpG().$implicit,i=m.XpG(2);m.R7$(5),m.JRh(i.translateDomainField(e.name,s)),m.R7$(3),m.Y8G("ngModel",e.defined),m.R7$(2),m.Y8G("ngModel",e.cached),m.R7$(2),m.Y8G("ngIf","non-db"!=e.dbtype)}}function Le(e,t){if(1&e&&(m.qex(0),m.j41(1,"tr",26)(2,"td",27)(3,"div",28),m.EFF(4),m.k0s()(),m.j41(5,"td",29)(6,"div",28),m.EFF(7),m.k0s()(),m.j41(8,"td",30),m.DNE(9,ye,2,1,"div",31)(10,_e,1,0,"div",31),m.k0s(),m.j41(11,"td",32),m.DNE(12,ke,2,1,"div",31)(13,ve,2,1,"div",31),m.k0s(),m.j41(14,"td",33),m.nrm(15,"system-checkbox",34),m.k0s(),m.j41(16,"td",33),m.nrm(17,"system-checkbox",34),m.k0s(),m.j41(18,"td",33),m.DNE(19,Re,1,1,"system-checkbox",35),m.k0s()(),m.DNE(20,je,13,4,"tr",36),m.bVm()),2&e){const e=t.$implicit,s=m.XpG(2);m.R7$(),m.Y8G("ngClass",s.getRowClass(e)),m.R7$(3),m.JRh(e.name),m.R7$(3),m.JRh(s.dictionarymanager.getDomainName(e.sysdomaindefinition_id)),m.R7$(2),m.Y8G("ngIf",s.getDomainFields(e.sysdomaindefinition_id)[0]),m.R7$(),m.Y8G("ngIf",!s.getDomainFields(e.sysdomaindefinition_id)[0]),m.R7$(2),m.Y8G("ngIf",e.sysdictionarydefinition_id!=s.dictionarymanager.currentDictionaryDefinition),m.R7$(),m.Y8G("ngIf",e.sysdictionaryrelationship_id),m.R7$(2),m.Y8G("ngModel",e.defined),m.R7$(2),m.Y8G("ngModel",e.cached),m.R7$(2),m.Y8G("ngIf",!e.non_db),m.R7$(),m.Y8G("ngForOf",e.addFields)}}function xe(e,t){if(1&e&&(m.qex(0),m.j41(1,"table",13)(2,"thead")(3,"tr",14)(4,"th",15)(5,"div",16),m.nrm(6,"system-label",17),m.k0s()(),m.j41(7,"th",15)(8,"div",16),m.nrm(9,"system-label",18),m.k0s()(),m.j41(10,"th",15)(11,"div",16),m.nrm(12,"system-label",19),m.k0s()(),m.j41(13,"th",15)(14,"div",16),m.nrm(15,"system-label",20),m.k0s()(),m.j41(16,"th",21),m.nrm(17,"system-utility-icon",22),m.k0s(),m.j41(18,"th",21),m.nrm(19,"system-utility-icon",23),m.k0s(),m.j41(20,"th",21),m.nrm(21,"system-utility-icon",24),m.k0s()()(),m.j41(22,"tbody"),m.DNE(23,Le,21,11,"ng-container",25),m.k0s()(),m.bVm()),2&e){const e=m.XpG();m.R7$(23),m.Y8G("ngForOf",e.dictionaryitems)("ngForTrackBy",e.trackByFn)}}function Ie(e,t){1&e&&(m.j41(0,"div",39),m.nrm(1,"system-label",40),m.k0s())}let De=(()=>{class DictionaryManagerFields{constructor(e,t,s,i,n,l){this.dictionarymanager=e,this.metadata=t,this.language=s,this.modal=i,this.injector=n,this.modelutilities=l,this.filterterm="",this.filterdbonly=!1}get dictionaryitems(){if(!this.dictionarymanager.currentDictionaryDefinition)return[];let e=[...this.dictionarymanager.getDictionaryDefinitionItems(this.dictionarymanager.currentDictionaryDefinition).filter((e=>"a"==e.status))];e.forEach((e=>{let t=this.getDomainFields(e.sysdomaindefinition_id,!0);"non-db"==t[0]?.dbtype&&(e.non_db=1),e.defined=!0,e.cached=!1,e.database=!1,e.addFields=this.getDomainFields(e.sysdomaindefinition_id,!1),e.addFields.forEach((e=>{e.defined=!0,e.cached=!1,e.database=!1}))}));let t=this.dictionarymanager.dictionaryfields.find((e=>e.sysdictionarydefinition_id==this.dictionarymanager.currentDictionaryDefinition));return t?.fields&&t.fields.forEach((t=>{let s=e.find((e=>e.name==t.fieldname||e.addFields&&e.addFields.find((s=>this.translateDomainField(s.name,e)==t.fieldname))));s?s.name==t.fieldname?s.cached=!0:s.addFields.find((e=>this.translateDomainField(e.name,s)==t.fieldname)).cached=!0:e.push({id:t.id,name:t.fieldname,scope:"g",status:"a",non_db:"non-db"==t.fielddefinition?.source?1:0,sequence:e.length+1,sysdictionarydefinition_id:this.dictionarymanager.currentDictionaryDefinition,sysdictionaryrelationship_id:t.sysdictionaryrelationship_id,defined:!!t.sysdictionaryrelationship_id,cached:!0,database:!1})})),this.dictionarymanager.dictionarydatabasefields.forEach((t=>{let s=e.find((e=>e.name==t.name||e.addFields&&e.addFields.find((s=>this.translateDomainField(s.name,e)==t.name))));s?s.name==t.name?s.database=!0:s.addFields.find((e=>this.translateDomainField(e.name,s)==t.name)).database=!0:e.push({id:"",name:t.name,scope:"g",status:"a",sequence:e.length+1,sysdictionarydefinition_id:this.dictionarymanager.currentDictionaryDefinition,defined:!1,cached:!1,database:!0})})),e.filter((e=>!(this.filterdbonly&&e.non_db&&!e.addFields)&&(!this.filterterm||-1!=e.name.indexOf(this.filterterm))))}getRowClass(e){return e.defined&&e.cached&&(e.non_db||e.database)?"slds-theme--success":!e.database||e.defined||e.cached?"slds-theme--warning":"slds-theme--error"}getDomainFields(e,t=!0){let s=this.dictionarymanager.domainfields.filter((t=>t.sysdomaindefinition_id==e)).sort(((e,t)=>e.sequence>t.sequence?1:-1));return s?t?s.slice(0,1):s.slice(1):[]}get canRepair(){return this.dictionaryitems.filter((e=>!e.non_db&&!e.database||e.defined&&!e.cached)).length>0}repairDictionaryDefinition(){this.dictionarymanager.repairDictionary(this.dictionarymanager.currentDictionaryDefinition)}reshuffleDictionaryDefinition(){this.dictionarymanager.reshuffleDictionary(this.dictionarymanager.currentDictionaryDefinition,this.dictionaryitems.map((e=>e.name)))}reload(){this.dictionarymanager.loadDatabaseFields(this.dictionarymanager.dictionarydefinitions.find((e=>e.id==this.dictionarymanager.currentDictionaryDefinition)).tablename),this.dictionarymanager.loadDictionaryFields()}get canDelete(){return this.dictionaryitems.filter((e=>e.database&&!e.defined&&!e.cached)).length>0}deleteDictionaryColumns(){this.modal.openModal("DictionaryManagerDeleteFieldsModal",!0,this.injector).subscribe({next:e=>{e.instance.items=this.dictionaryitems.filter((e=>e.database&&!e.defined&&!e.cached))}})}getRefDefinitionName(e){return e!=this.dictionarymanager.currentDictionaryDefinition?this.dictionarymanager.dictionarydefinitions.find((t=>t.id==e))?.name:""}getRelationshipName(e){return this.dictionarymanager.dictionaryrelationships.find((t=>t.id==e))?.relationship_name}translateDomainField(e,t){return e.replace("{sysdictionaryitems.name}",t.name)}trackByFn(e,t){return t.id}static#e=this.ɵfac=function(e){return new(e||DictionaryManagerFields)(m.rXU(j),m.rXU(f.yu),m.rXU(b.B),m.rXU(R.y),m.rXU(m.zZn),m.rXU(y.g))};static#t=this.ɵcmp=m.VBU({type:DictionaryManagerFields,selectors:[["dictionary-manager-fields"]],decls:16,vars:6,consts:[[1,"slds-grid","slds-grid_vertical-align-center","slds-p-around--xx-small","slds-theme--shade","slds-border--bottom"],["placeholder","LBL_FILTER","autocomplete","off",3,"ngModel","showClear","ngModelChange"],[1,"slds-p-left--x-small","slds-col--bump-right",3,"ngModel","ngModelChange"],[1,"slds-button","slds-button--neutral",3,"disabled","click"],["label","LBL_DELETE_COLUMNS"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_REPAIR"],["label","LBL_RESHUFFLE"],[1,"slds-button","slds-button--neutral","slds-button--icon-border","slds-button--icon",3,"click"],["icon","sync"],["system-to-bottom",""],[4,"ngIf","ngIfElse"],["selectdefinition",""],[1,"slds-table","slds-table_cell-buffer","slds-table_bordered","slds-table--header-fixed","slds-no-row-hover"],[1,"slds-line-height_reset"],["scope","col",1,""],[1,"slds-truncate","slds-th__action"],["label","LBL_NAME"],["label","LBL_DOMAIN"],["label","LBL_FIELD"],["label","LBL_SOURCE"],["scope","col",2,"width","30px"],["icon","builder","size","xx-small","title","LBL_FIELD_DEFINED_IN_DICTIONARY",1,"slds-th__action"],["icon","file","size","xx-small","title","LBL_FIELD_DEFINED_IN_DICTIONARY_CACHE",1,"slds-th__action"],["icon","database","size","xx-small","title","LBL_FIELD_DEFINED_IN_DATABASE_TABLE",1,"slds-th__action"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"slds-hint-parent",3,"ngClass"],["data-label","Name"],[1,"slds-truncate"],["data-label","Domain"],["data-label","Field"],["class","slds-truncate",4,"ngIf"],["data-label","Source"],[1,"slds-text-align--center"],["disabled","",3,"ngModel"],["disabled","",3,"ngModel",4,"ngIf"],["class","slds-hint-parent",4,"ngFor","ngForOf"],[1,"slds-hint-parent"],["data-label","Template"],[1,"slds-size--1-of-1","slds-height_full","slds-align--absolute-center"],["label","LBL_SELECT_A_DICTIONARYDEFINITION"]],template:function(e,t){if(1&e&&(m.j41(0,"div",0)(1,"system-input-text",1),m.mxI("ngModelChange",(function(e){return m.DH7(t.filterterm,e)||(t.filterterm=e),e})),m.k0s(),m.j41(2,"system-checkbox",2),m.mxI("ngModelChange",(function(e){return m.DH7(t.filterdbonly,e)||(t.filterdbonly=e),e})),m.EFF(3,"exclude non-db"),m.k0s(),m.j41(4,"button",3),m.bIt("click",(function(){return t.deleteDictionaryColumns()})),m.nrm(5,"system-label",4),m.k0s(),m.j41(6,"button",5),m.bIt("click",(function(){return t.repairDictionaryDefinition()})),m.nrm(7,"system-label",6),m.k0s(),m.j41(8,"button",5),m.bIt("click",(function(){return t.reshuffleDictionaryDefinition()})),m.nrm(9,"system-label",7),m.k0s(),m.j41(10,"button",8),m.bIt("click",(function(){return t.reload()})),m.nrm(11,"system-button-icon",9),m.k0s()(),m.j41(12,"div",10),m.DNE(13,xe,24,2,"ng-container",11)(14,Ie,2,0,"ng-template",null,12,m.C5r),m.k0s()),2&e){const e=m.sdS(15);m.R7$(),m.R50("ngModel",t.filterterm),m.Y8G("showClear",!0),m.R7$(),m.R50("ngModel",t.filterdbonly),m.R7$(2),m.Y8G("disabled",!t.canDelete),m.R7$(9),m.Y8G("ngIf",t.dictionarymanager.currentDictionaryDefinition)("ngIfElse",e)}},dependencies:[i.YU,i.Sq,i.bT,n.BC,n.vS,L.t,be.f,D.H,x.W,u.B,F.b],encapsulation:2})}return DictionaryManagerFields})();const Ee=e=>({"slds-is-active":e});function Ce(e,t){if(1&e){const e=m.RV6();m.j41(0,"li",2),m.bIt("click",(function(){m.eBV(e);const t=m.XpG();return m.Njj(t.scope="fields")})),m.j41(1,"a",3),m.nrm(2,"system-label",12),m.k0s()()}if(2&e){const e=m.XpG();m.Y8G("ngClass",m.eq3(1,Ee,"fields"==e.scope))}}function Fe(e,t){if(1&e){const e=m.RV6();m.j41(0,"li",13)(1,"button",14),m.bIt("click",(function(){m.eBV(e);const t=m.XpG();return m.Njj(t.dictionarymanager.repairTemplateRelatedDictionaries())})),m.nrm(2,"system-button-icon",15),m.k0s()()}}const Ge=e=>({"slds-hide":e});function $e(e,t){if(1&e&&(m.j41(0,"div",9),m.nrm(1,"dictionary-manager-fields"),m.k0s()),2&e){const e=m.XpG();m.Y8G("ngClass",m.eq3(1,Ge,"fields"!=e.scope))}}let Be=(()=>{class DictionaryManagerDefinitionTabs{constructor(e,t,s,i,n,l){this.dictionarymanager=e,this.metadata=t,this.language=s,this.modal=i,this.injector=n,this.modelutilities=l,this._scope="items"}get isTemplate(){return this.dictionarymanager.currentIsTemplate()}get scope(){return this.isTemplate&&"fields"==this._scope?"items":this._scope}set scope(e){this._scope=e}static#e=this.ɵfac=function(e){return new(e||DictionaryManagerDefinitionTabs)(m.rXU(j),m.rXU(f.yu),m.rXU(b.B),m.rXU(R.y),m.rXU(m.zZn),m.rXU(y.g))};static#t=this.ɵcmp=m.VBU({type:DictionaryManagerDefinitionTabs,selectors:[["dictionary-manager-definition-tabs"]],decls:23,vars:21,consts:[[1,"slds-tabs_default"],["role","tablist",1,"slds-tabs_default__nav"],["role","presentation",1,"slds-tabs_default__item",3,"ngClass","click"],["href","javascript:void(0);","role","tab",1,"slds-tabs_default__link"],["label","LBL_ITEMS"],["label","LBL_RELATIONSHIPS"],["label","LBL_INDEXES"],["class","slds-tabs_default__item","role","presentation",3,"ngClass","click",4,"ngIf"],["class","slds-align-middle slds-grid slds-grid--align-end slds-grow","role","presentation",4,"ngIf"],["role","tabpanel",1,"slds-tabs_default__content","slds-p-around--none",3,"ngClass"],[1,"slds-height_full"],["class","slds-tabs_default__content slds-p-around--none","role","tabpanel",3,"ngClass",4,"ngIf"],["label","LBL_FIELDS"],["role","presentation",1,"slds-align-middle","slds-grid","slds-grid--align-end","slds-grow"],["system-title","MSG_REPAIR_DICTIONARY_TEMPLATE_RELATED_DICTIONARIES",1,"slds-button","slds-button--icon","slds-m-right--x-small",3,"click"],["icon","custom_apps"]],template:function(e,t){1&e&&(m.j41(0,"div",0)(1,"ul",1)(2,"li",2),m.bIt("click",(function(){return t.scope="items"})),m.j41(3,"a",3),m.nrm(4,"system-label",4),m.k0s()(),m.j41(5,"li",2),m.bIt("click",(function(){return t.scope="relationships"})),m.j41(6,"a",3),m.nrm(7,"system-label",5),m.k0s()(),m.j41(8,"li",2),m.bIt("click",(function(){return t.scope="indexes"})),m.j41(9,"a",3),m.nrm(10,"system-label",6),m.k0s()(),m.DNE(11,Ce,3,3,"li",7)(12,Fe,3,0,"li",8),m.k0s(),m.j41(13,"div",9)(14,"div",10),m.nrm(15,"dictionary-manager-items"),m.k0s()(),m.j41(16,"div",9)(17,"div",10),m.nrm(18,"dictionary-manager-relationships"),m.k0s()(),m.j41(19,"div",9)(20,"div",10),m.nrm(21,"dictionary-manager-indexes"),m.k0s()(),m.DNE(22,$e,2,3,"div",11),m.k0s()),2&e&&(m.R7$(2),m.Y8G("ngClass",m.eq3(9,Ee,"items"==t.scope)),m.R7$(3),m.Y8G("ngClass",m.eq3(11,Ee,"relationships"==t.scope)),m.R7$(3),m.Y8G("ngClass",m.eq3(13,Ee,"indexes"==t.scope)),m.R7$(3),m.Y8G("ngIf",!t.isTemplate),m.R7$(),m.Y8G("ngIf",t.isTemplate),m.R7$(),m.Y8G("ngClass",m.eq3(15,Ge,"items"!=t.scope)),m.R7$(3),m.Y8G("ngClass",m.eq3(17,Ge,"relationships"!=t.scope)),m.R7$(3),m.Y8G("ngClass",m.eq3(19,Ge,"indexes"!=t.scope)),m.R7$(3),m.Y8G("ngIf",!t.isTemplate))},dependencies:[i.YU,i.bT,L.t,x.W,w.L,W,oe,fe,De],encapsulation:2})}return DictionaryManagerDefinitionTabs})();var Ne=s(68823);const Se=["*",[["workbench-header-controls"]]],we=["*","workbench-header-controls"];let Te=(()=>{class WorkbenchHeader{constructor(e){this.language=e,this.icon="custom"}static#e=this.ɵfac=function(e){return new(e||WorkbenchHeader)(m.rXU(b.B))};static#t=this.ɵcmp=m.VBU({type:WorkbenchHeader,selectors:[["workbench-header"]],inputs:{titlelabel:"titlelabel",icon:"icon"},ngContentSelectors:we,decls:14,vars:2,consts:[[1,"slds-p-around--medium","slds-theme--shade","slds-border--bottom"],[1,"slds-page-header__row"],[1,"slds-page-header__col-title"],[1,"slds-media"],[3,"icon"],[1,"slds-media__body"],[1,"slds-page-header__name"],[1,"slds-page-header__name-title"],[1,"slds-page-header__title","slds-truncate"],[3,"label"],[1,"slds-page-header__name-meta"]],template:function(e,t){1&e&&(m.NAR(Se),m.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),m.nrm(4,"system-icon",4),m.j41(5,"div",5)(6,"div",6)(7,"div",7)(8,"h1")(9,"span",8),m.nrm(10,"system-label",9),m.k0s()()()(),m.j41(11,"p",10),m.SdG(12),m.k0s()()()(),m.SdG(13,1),m.k0s()()),2&e&&(m.R7$(4),m.Y8G("icon",t.icon),m.R7$(6),m.Y8G("label",t.titlelabel))},dependencies:[Ne.J,x.W],encapsulation:2})}return WorkbenchHeader})();const Ae=["*"];let Ye=(()=>{class WorkbenchHeaderControls{static#e=this.ɵfac=function(e){return new(e||WorkbenchHeaderControls)};static#t=this.ɵcmp=m.VBU({type:WorkbenchHeaderControls,selectors:[["workbench-header-controls"]],ngContentSelectors:Ae,decls:4,vars:0,consts:[[1,"slds-page-header__col-actions"],[1,"slds-page-header__controls"],[1,"slds-page-header__control"]],template:function(e,t){1&e&&(m.NAR(),m.j41(0,"div",0)(1,"div",1)(2,"div",2),m.SdG(3),m.k0s()()())},encapsulation:2})}return WorkbenchHeaderControls})();function Oe(e,t){if(1&e){const e=m.RV6();m.j41(0,"li",6),m.bIt("click",(function(){m.eBV(e);const t=m.XpG();return m.Njj(t.generateSystem())})),m.j41(1,"a",7)(2,"span",8),m.nrm(3,"system-label",17),m.k0s()()()}}function Xe(e,t){if(1&e){const e=m.RV6();m.j41(0,"li",6),m.bIt("click",(function(){m.eBV(e);const t=m.XpG();return m.Njj(t.migrate())})),m.j41(1,"a",7)(2,"span",8),m.nrm(3,"system-label",18),m.k0s()()()}}function Ve(e,t){1&e&&(m.j41(0,"div",19),m.nrm(1,"dictionary-manager-definition-tabs"),m.k0s())}const Ue=(e,t)=>({"slds-size--1-of-3":e,"slds-size--1-of-1":t});let He=(()=>{class DictionaryManager{constructor(e,t,s,i,n,l){this.dictionarymanager=e,this.modal=t,this.backend=s,this.toast=i,this.injector=n,this.configurationService=l,this.definitionsExpanded=!1}migrate(){this.modal.openModal("DictionaryManagerMigrateDefinitionModal",!0,this.injector)}repairDB(){let e=this.modal.await("LBL_LOADING");this.backend.getRequest("admin/repair/sql").subscribe((t=>{e.emit(!0);let s=t.sql,i=t.wholeSQL;t&&this.modal.openModal("AdministrationDictRepairModal",!0,this.injector).subscribe((e=>{e.instance.sql=s,e.instance.wholeSQL=i}))}))}repairDBnew(){this.modal.openModal("DictionaryManagerRepairAll",!0,this.injector)}generateSystem(){let e=this.modal.await("LBL_GENERATING");this.backend.putRequest("dictionary/generatesystem").subscribe({next:()=>{e.emit(!0)},error:()=>{e.emit(!0)}})}repairDBCache(){this.modal.confirm("are you sure you want to rebuild the dictionary data cache?","rebuild dictionary Cache").subscribe({next:e=>{if(e){let e=this.modal.await("LBL_LOADING");this.backend.getRequest("admin/repair/cachedb").subscribe((t=>{e.emit(!0),t?(this.toast.sendToast("LBL_CACHE_REPAIRED","success"),this.configurationService.data.startupMode="normal",this.configurationService.reloadTaskData("fielddefs")):this.toast.sendToast("LBL_ERROR","error")}))}}})}convertCharset(){this.modal.openModal("AdministrationDictRepairConvertDBCharsetModal",!0,this.injector)}repairDBColumns(){this.modal.openModal("AdministrationDictRepairDbColumnsModal",!0,this.injector)}static#e=this.ɵfac=function(e){return new(e||DictionaryManager)(m.rXU(j),m.rXU(R.y),m.rXU(p.H),m.rXU(v.o),m.rXU(m.zZn),m.rXU(M.i))};static#t=this.ɵcmp=m.VBU({type:DictionaryManager,selectors:[["dictionary-manager"]],features:[m.Jv_([j])],decls:25,vars:7,consts:[["titlelabel","LBL_DICTIONARY_MANAGER","icon","data_model"],["system-dropdown-trigger","",1,"slds-dropdown-trigger","slds-dropdown-trigger_click","slds-button_last"],[1,"slds-button","slds-button_icon","slds-button_icon-border-filled"],["icon","down"],[1,"slds-dropdown","slds-dropdown_right","slds-dropdown_actions"],["role","menu",1,"slds-dropdown__list"],["role","presentation",1,"slds-dropdown__item",3,"click"],["href","javascript:void(null)","role","menuitem"],[1,"slds-truncate"],["label","LBL_REPAIR"],["label","LBL_CONVERT_DB_CHARSET"],["label","LBL_REPAIR_DBCOLUMNS"],["class","slds-dropdown__item","role","presentation",3,"click",4,"ngIf"],[1,"slds-grid"],[1,"slds-size--1-of-3",3,"ngClass"],[3,"expanded"],["class","slds-size--2-of-3 slds-theme--default",4,"ngIf"],["label","LBL_GENERATE_SYSTEM"],["label","LBL_MIGRATE"],[1,"slds-size--2-of-3","slds-theme--default"]],template:function(e,t){1&e&&(m.j41(0,"workbench-header",0)(1,"workbench-header-controls")(2,"div",1)(3,"button",2),m.nrm(4,"system-button-icon",3),m.k0s(),m.j41(5,"div",4)(6,"ul",5)(7,"li",6),m.bIt("click",(function(){return t.repairDBnew()})),m.j41(8,"a",7)(9,"span",8),m.nrm(10,"system-label",9),m.k0s()()(),m.j41(11,"li",6),m.bIt("click",(function(){return t.convertCharset()})),m.j41(12,"a",7)(13,"span",8),m.nrm(14,"system-label",10),m.k0s()()(),m.j41(15,"li",6),m.bIt("click",(function(){return t.repairDBColumns()})),m.j41(16,"a",7)(17,"span",8),m.nrm(18,"system-label",11),m.k0s()()(),m.DNE(19,Oe,4,0,"li",12)(20,Xe,4,0,"li",12),m.k0s()()()()(),m.j41(21,"div",13)(22,"div",14)(23,"dictionary-manager-definitions",15),m.bIt("expanded",(function(e){return t.definitionsExpanded=e})),m.k0s()(),m.DNE(24,Ve,2,0,"div",16),m.k0s()),2&e&&(m.R7$(19),m.Y8G("ngIf",null==t.dictionarymanager.settings?null:t.dictionarymanager.settings.create_system_file_enabled),m.R7$(),m.Y8G("ngIf",null==t.dictionarymanager.settings?null:t.dictionarymanager.settings.migration_enabled),m.R7$(2),m.Y8G("ngClass",m.l_i(4,Ue,!t.definitionsExpanded,t.definitionsExpanded)),m.R7$(2),m.Y8G("ngIf",!t.definitionsExpanded))},dependencies:[i.YU,i.bT,L.t,x.W,I.q,S,Be,Te,Ye],encapsulation:2})}return DictionaryManager})();var ze=s(6764),qe=s(40713),Pe=s(25028),Je=s(88418),We=s(83524);function Ke(e,t){if(1&e&&(m.j41(0,"div",29)(1,"label",5),m.nrm(2,"system-label",30),m.k0s(),m.nrm(3,"input",31),m.k0s()),2&e){const e=m.XpG();m.R7$(3),m.Y8G("ngModel",e.dictionarymanager.getDomainName(e.dictionaryitem.sysdomaindefinition_id))}}function Qe(e,t){if(1&e&&(m.j41(0,"div",32)(1,"label",5),m.nrm(2,"system-label",33),m.k0s(),m.nrm(3,"input",31),m.k0s()),2&e){const e=m.XpG();m.R7$(3),m.Y8G("ngModel",e.dictionarymanager.getDictionaryDefinitionName(e.dictionaryitem.sysdictionary_ref_id))}}function Ze(e,t){if(1&e){const e=m.RV6();m.qex(0),m.j41(1,"div")(2,"label",5),m.nrm(3,"system-label",34),m.k0s(),m.j41(4,"system-input-label",35),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.dictionaryitem.label,t)||(s.dictionaryitem.label=t),m.Njj(t)})),m.k0s()(),m.j41(5,"div",36)(6,"div",37)(7,"label",5),m.nrm(8,"system-label",38),m.k0s(),m.j41(9,"system-input-label",35),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.dictionaryitem.labelinputhelper,t)||(s.dictionaryitem.labelinputhelper=t),m.Njj(t)})),m.k0s()(),m.j41(10,"div",39)(11,"label",5),m.nrm(12,"system-label",40),m.k0s(),m.j41(13,"system-input-text",35),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.dictionaryitem.default_value,t)||(s.dictionaryitem.default_value=t),m.Njj(t)})),m.k0s()()(),m.j41(14,"div",36)(15,"div",41)(16,"system-checkbox",42),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.dictionaryitem.required,t)||(s.dictionaryitem.required=t),m.Njj(t)})),m.nrm(17,"system-label",43),m.k0s()(),m.j41(18,"div",41)(19,"system-checkbox",42),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.dictionaryitem.non_db,t)||(s.dictionaryitem.non_db=t),m.Njj(t)})),m.nrm(20,"system-label",44),m.k0s()()(),m.j41(21,"div",45)(22,"label",5),m.nrm(23,"system-label",46),m.k0s(),m.j41(24,"div",4)(25,"system-input-text",47),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.dictionaryitem.description,t)||(s.dictionaryitem.description=t),m.Njj(t)})),m.k0s()()(),m.bVm()}if(2&e){const e=m.XpG();m.R7$(4),m.R50("ngModel",e.dictionaryitem.label),m.R7$(5),m.R50("ngModel",e.dictionaryitem.labelinputhelper),m.R7$(4),m.R50("ngModel",e.dictionaryitem.default_value),m.R7$(3),m.R50("ngModel",e.dictionaryitem.required),m.Y8G("asinteger",!0),m.R7$(3),m.R50("ngModel",e.dictionaryitem.non_db),m.Y8G("asinteger",!0),m.R7$(6),m.R50("ngModel",e.dictionaryitem.description)}}let et=(()=>{class DictionaryManagerItemDetails{constructor(e,t,s,i,n){this.dictionarymanager=e,this.modal=t,this.backend=s,this.metadata=i,this.language=n}ngOnInit(){this.backup=JSON.stringify(this.dictionaryitem)}save(){if(!this.canSave)return;let e=this.modal.await("LBL_SAVING");const t={...this.dictionaryitem};delete t.addFields,delete t.cached,delete t.database,delete t.defined,this.backend.postRequest(`dictionary/item/${this.dictionaryitem.id}`,{},t).subscribe({next:()=>{e.emit(!0),e.complete(),this.close()},error:()=>{e.emit(!0),e.complete()}}),this.self.destroy()}get canSave(){let e=!1,t=JSON.parse(this.backup);return Object.keys(t).forEach((s=>{if(t[s]!=this.dictionaryitem[s])return e=!0,!0})),e}close(){this.dictionaryitem=JSON.parse(this.backup),this.self.destroy()}static#e=this.ɵfac=function(e){return new(e||DictionaryManagerItemDetails)(m.rXU(j),m.rXU(R.y),m.rXU(p.H),m.rXU(f.yu),m.rXU(b.B))};static#t=this.ɵcmp=m.VBU({type:DictionaryManagerItemDetails,selectors:[["dictionary-manager-item-details"]],inputs:{dictionaryitem:"dictionaryitem"},decls:39,vars:9,consts:[[3,"close"],[1,"slds-p-around--x-small"],[1,"slds-grid"],[1,"slds-size--1-of-2","slds-form-element","slds-m-around--xxx-small"],[1,"slds-form-element__control"],[1,"slds-form-element__label"],["label","LBL_NAME"],["disabled","",3,"maxlength","ngModel","ngModelChange"],[1,"slds-size--1-of-4","slds-form-element","slds-m-around--xxx-small"],["class","slds-form-element__control slds-p-right--xx-small",4,"ngIf"],["class","slds-form-element__control slds-p-left--xx-small",4,"ngIf"],[1,"slds-size--1-of-4","slds-form-element__control","slds-m-around--xxx-small"],["label","LBL_SCOPE"],[1,"slds-select_container"],["disabled","",1,"slds-select",3,"ngModel","ngModelChange"],["value","g"],["label","LBL_GLOBAL"],["value","c"],["label","LBL_CUSTOM"],[4,"ngIf"],[1,"slds-grid","slds-m-vertical--xxx-small","slds-gutters_direct-xx-small"],[1,"slds-col","slds-size--1-of-2","slds-form-element"],["label","LBL_VERSION"],["type","text",1,"slds-input",3,"ngModel","ngModelChange"],["label","LBL_PACKAGE"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_SAVE"],[1,"slds-form-element__control","slds-p-right--xx-small"],["label","LBL_DOMAIN"],["type","text","disabled","",1,"slds-input",3,"ngModel"],[1,"slds-form-element__control","slds-p-left--xx-small"],["label","LBL_TEMPLATE"],["label","LBL_LABEL"],[3,"ngModel","ngModelChange"],[1,"slds-grid","slds-p-vertical--xx-small"],[1,"slds-size--1-of-2","slds-form-element__control","slds-p-right--xx-small"],["label","LBL_INPUT_HELPER"],[1,"slds-size--1-of-2","slds-form-element__control","slds-p-left--xx-small"],["label","LBL_DEFAULT_VALUE"],[1,"slds-size--1-of-3","slds-form-element__control"],[3,"ngModel","asinteger","ngModelChange"],["label","LBL_REQUIRED"],["label","LBL_NON_DB"],[1,"slds-form-element","slds-m-vertical--xxx-small"],["label","LBL_COMMENT"],["maxlength","150",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(m.j41(0,"system-modal")(1,"system-modal-header",0),m.bIt("close",(function(){return t.close()})),m.k0s(),m.j41(2,"system-modal-content")(3,"div",1)(4,"div",2)(5,"div",3)(6,"div",4)(7,"label",5),m.nrm(8,"system-label",6),m.k0s(),m.j41(9,"system-input-text",7),m.mxI("ngModelChange",(function(e){return m.DH7(t.dictionaryitem.name,e)||(t.dictionaryitem.name=e),e})),m.k0s()()(),m.j41(10,"div",8),m.DNE(11,Ke,4,1,"div",9)(12,Qe,4,1,"div",10),m.k0s(),m.j41(13,"div",11)(14,"label",5),m.nrm(15,"system-label",12),m.k0s(),m.j41(16,"div",13)(17,"select",14),m.mxI("ngModelChange",(function(e){return m.DH7(t.dictionaryitem.scope,e)||(t.dictionaryitem.scope=e),e})),m.j41(18,"option",15),m.nrm(19,"system-label",16),m.k0s(),m.j41(20,"option",17),m.nrm(21,"system-label",18),m.k0s()()()()(),m.DNE(22,Ze,26,8,"ng-container",19),m.j41(23,"div",20)(24,"div",21)(25,"label",5),m.nrm(26,"system-label",22),m.k0s(),m.j41(27,"div",4)(28,"input",23),m.mxI("ngModelChange",(function(e){return m.DH7(t.dictionaryitem.version,e)||(t.dictionaryitem.version=e),e})),m.k0s()()(),m.j41(29,"div",21)(30,"label",5),m.nrm(31,"system-label",24),m.k0s(),m.j41(32,"div",4)(33,"input",23),m.mxI("ngModelChange",(function(e){return m.DH7(t.dictionaryitem.package,e)||(t.dictionaryitem.package=e),e})),m.k0s()()()()()(),m.j41(34,"system-modal-footer")(35,"button",25),m.bIt("click",(function(){return t.close()})),m.nrm(36,"system-label",26),m.k0s(),m.j41(37,"button",27),m.bIt("click",(function(){return t.save()})),m.nrm(38,"system-label",28),m.k0s()()()),2&e&&(m.R7$(9),m.Y8G("maxlength",128),m.R50("ngModel",t.dictionaryitem.name),m.R7$(2),m.Y8G("ngIf",t.dictionaryitem.sysdomaindefinition_id),m.R7$(),m.Y8G("ngIf",t.dictionaryitem.sysdictionary_ref_id),m.R7$(5),m.R50("ngModel",t.dictionaryitem.scope),m.R7$(5),m.Y8G("ngIf",t.dictionaryitem.sysdomaindefinition_id),m.R7$(6),m.R50("ngModel",t.dictionaryitem.version),m.R7$(5),m.R50("ngModel",t.dictionaryitem.package),m.R7$(4),m.Y8G("disabled",!t.canSave))},dependencies:[i.bT,n.xH,n.y7,n.me,n.wz,n.BC,n.tU,n.vS,be.f,D.H,ze.w,x.W,qe.D,Pe.I,Je.Q,We.C],encapsulation:2})}return DictionaryManagerItemDetails})();function tt(e,t){if(1&e&&(m.j41(0,"div",41),m.EFF(1),m.k0s()),2&e){const e=t.$implicit;m.R7$(),m.JRh(e.message)}}function st(e,t){if(1&e&&(m.j41(0,"div",41),m.EFF(1),m.k0s()),2&e){const e=t.$implicit;m.R7$(),m.JRh(e.message)}}function it(e,t){1&e&&(m.j41(0,"option",42),m.nrm(1,"system-label",43),m.k0s())}function nt(e,t){if(1&e&&(m.j41(0,"div",41),m.EFF(1),m.k0s()),2&e){const e=t.$implicit;m.R7$(),m.JRh(e.message)}}const lt=e=>({"slds-has-error":e});let ot=(()=>{class DictionaryManagerAddDefinitionModal{constructor(e,t,s,i,n,l,o,a){this.dictionarymanager=e,this.backend=t,this.metadata=s,this.modal=i,this.modelutilities=n,this.language=l,this.configurationService=o,this.injector=a,this.messages=[],this.newDefinitionID=new m.bkB,this.dictionarydefinition={id:this.modelutilities.generateGuid(),name:"",tablename:"",sysdictionary_type:void 0,scope:this.dictionarymanager.defaultScope,status:"d"}}close(){this.self.destroy()}getMessages(e){return this.messages.filter((t=>t.field==e))}get canSave(){return this.messages=[],this.dictionarydefinition.name||this.messages.push({field:"name",message:"name must be entered"}),this.dictionarydefinition.sysdictionary_type?"module"!=this.dictionarydefinition.sysdictionary_type||this.sysModule||this.messages.push({field:"sysdictionary_type",message:"module must be selected for type module"}):this.messages.push({field:"sysdictionary_type",message:"type must be specified"}),"template"==this.dictionarydefinition.sysdictionary_type||this.dictionarydefinition.tablename||this.messages.push({field:"tablename",message:"tablename must be entered"}),this.dictionarymanager.dictionarydefinitions.find((e=>e.name==this.dictionarydefinition.name))&&this.messages.push({field:"name",message:"name exists already"}),this.dictionarydefinition.tablename&&this.dictionarymanager.dictionarydefinitions.find((e=>e.tablename==this.dictionarydefinition.tablename))&&this.messages.push({field:"tablename",message:"table exists already"}),this.dictionarydefinition.tablename&&this.dictionarymanager.reservedwords&&this.dictionarymanager.reservedwords.indexOf(this.dictionarydefinition.tablename.toUpperCase())>=0&&this.messages.push({field:"tablename",message:"tablename cannot be used (reserved word)"}),0==this.messages.length}save(){if(this.canSave){let e=this.modal.await("LBL_SAVING");this.dictionarydefinition.id=this.modelutilities.generateGuid(),this.backend.postRequest(`dictionary/definition/${this.dictionarydefinition.id}`,{},this.dictionarydefinition).subscribe({next:t=>{this.handleTypeModuleSave(),this.dictionarymanager.dictionarydefinitions.push(this.dictionarydefinition),this.newDefinitionID.emit(this.dictionarydefinition.id),e.emit(!0),this.close()},error:()=>{e.emit(!0)}})}}handleTypeModuleSave(){if("module"!=this.dictionarydefinition.sysdictionary_type)return;const e=this.metadata.getModuleDefs(this.sysModule),t="global"==e.scope?"sysmodules":"syscustommodules",s={config:{id:e.id,sysdictionarydefinition_id:this.dictionarydefinition.id}};this.backend.postRequest(`configuration/configurator/${t}/${e.id}`,{},s).subscribe((()=>{this.configurationService.reloadTaskData("sysdictionarydefinitions")}))}handleTypeChange(e){if("module"!=e)return;const t=this.metadata.getModules().map((e=>({value:e,display:this.language.getModuleName(e)})));this.modal.prompt("input","LBL_SELECT_MODULE","LBL_SELECT_MODULE","default",void 0,t).subscribe((e=>{e&&(this.sysModule=e)}))}static#e=this.ɵfac=function(e){return new(e||DictionaryManagerAddDefinitionModal)(m.rXU(j),m.rXU(p.H),m.rXU(f.yu),m.rXU(R.y),m.rXU(y.g),m.rXU(b.B),m.rXU(M.i),m.rXU(m.zZn))};static#t=this.ɵcmp=m.VBU({type:DictionaryManagerAddDefinitionModal,selectors:[["dictionary-manager-add-definition-modal"]],outputs:{newDefinitionID:"newDefinitionID"},decls:81,vars:21,consts:[[3,"close"],[1,"slds-grid","slds-grid_vertical-align-center"],[1,"slds-form-element__control","slds-size--1-of-2","slds-p-right--xxx-small",3,"ngClass"],[1,"slds-form-element__label"],[1,"slds-required"],["label","LBL_NAME"],[3,"ngModel","ngModelChange"],["class","slds-form-element__help",4,"ngFor","ngForOf"],["label","LBL_TABLE"],[1,"slds-grid","slds-grid_vertical-align-center","slds-grid--align-spread"],[1,"slds-form-element__control","slds-size--1-of-4","slds-p-right--xxx-small"],["label","LBL_SCOPE"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],["value","g",4,"ngIf"],["value","c"],["label","LBL_CUSTOM"],[1,"slds-large-size--1-of-4","slds-p-horizontal--xxx-small","slds-form-element",3,"ngClass"],["label","LBL_TYPE"],[1,"slds-form-element__control"],["value","module"],["value","metadata"],["value","template"],["value","relationship"],["value","system"],[1,"slds-size--1-of-4","slds-p-horizontal--xxx-small","slds-form-element__control"],["label","LBL_PACKAGE"],["label","LBL_VERSION"],[1,"slds-p-vertical--xx-small"],["label","LBL_CONTENT_TYPE"],["value","masterdata"],["value","transactionaldata"],["value","logs"],["value","config"],["value","custom_config"],["label","LBL_COMMENT"],[1,"slds-textarea",3,"ngModel"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CLOSE"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_SAVE"],[1,"slds-form-element__help"],["value","g"],["label","LBL_GLOBAL"]],template:function(e,t){1&e&&(m.j41(0,"system-modal")(1,"system-modal-header",0),m.bIt("close",(function(){return t.close()})),m.EFF(2,"Add Dictionary Definition"),m.k0s(),m.j41(3,"system-modal-content")(4,"div",1)(5,"div",2)(6,"label",3)(7,"abbr",4),m.EFF(8,"* "),m.k0s(),m.nrm(9,"system-label",5),m.k0s(),m.j41(10,"system-input-text",6),m.mxI("ngModelChange",(function(e){return m.DH7(t.dictionarydefinition.name,e)||(t.dictionarydefinition.name=e),e})),m.k0s(),m.DNE(11,tt,2,1,"div",7),m.k0s(),m.j41(12,"div",2)(13,"label",3),m.nrm(14,"system-label",8),m.k0s(),m.j41(15,"system-input-text",6),m.mxI("ngModelChange",(function(e){return m.DH7(t.dictionarydefinition.tablename,e)||(t.dictionarydefinition.tablename=e),e})),m.k0s(),m.DNE(16,st,2,1,"div",7),m.k0s()(),m.j41(17,"div",9)(18,"div",10)(19,"label",3)(20,"abbr",4),m.EFF(21,"* "),m.k0s(),m.nrm(22,"system-label",11),m.k0s(),m.j41(23,"div",12)(24,"select",13),m.mxI("ngModelChange",(function(e){return m.DH7(t.dictionarydefinition.scope,e)||(t.dictionarydefinition.scope=e),e})),m.DNE(25,it,2,0,"option",14),m.j41(26,"option",15),m.nrm(27,"system-label",16),m.k0s()()()(),m.j41(28,"div",17)(29,"label",3)(30,"abbr",4),m.EFF(31,"* "),m.k0s(),m.nrm(32,"system-label",18),m.k0s(),m.j41(33,"div",19)(34,"div",12)(35,"select",13),m.mxI("ngModelChange",(function(e){return m.DH7(t.dictionarydefinition.sysdictionary_type,e)||(t.dictionarydefinition.sysdictionary_type=e),e})),m.bIt("ngModelChange",(function(e){return t.handleTypeChange(e)})),m.j41(36,"option",20),m.EFF(37,"module"),m.k0s(),m.j41(38,"option",21),m.EFF(39,"metadata"),m.k0s(),m.j41(40,"option",22),m.EFF(41,"template"),m.k0s(),m.j41(42,"option",23),m.EFF(43,"relationship"),m.k0s(),m.j41(44,"option",24),m.EFF(45,"system"),m.k0s()()()(),m.DNE(46,nt,2,1,"div",7),m.k0s(),m.j41(47,"div",25)(48,"label",3),m.nrm(49,"system-label",26),m.k0s(),m.j41(50,"system-input-text",6),m.mxI("ngModelChange",(function(e){return m.DH7(t.dictionarydefinition.package,e)||(t.dictionarydefinition.package=e),e})),m.k0s()(),m.j41(51,"div",25)(52,"label",3),m.nrm(53,"system-label",27),m.k0s(),m.j41(54,"system-input-text",6),m.mxI("ngModelChange",(function(e){return m.DH7(t.dictionarydefinition.version,e)||(t.dictionarydefinition.version=e),e})),m.k0s()()(),m.j41(55,"div",28)(56,"label",3)(57,"abbr",4),m.EFF(58,"* "),m.k0s(),m.nrm(59,"system-label",29),m.k0s(),m.j41(60,"div",12)(61,"select",13),m.mxI("ngModelChange",(function(e){return m.DH7(t.dictionarydefinition.sysdictionary_contenttype,e)||(t.dictionarydefinition.sysdictionary_contenttype=e),e})),m.j41(62,"option",30),m.EFF(63,"Masterdata"),m.k0s(),m.j41(64,"option",31),m.EFF(65,"tramsactional Data"),m.k0s(),m.j41(66,"option",32),m.EFF(67,"Logs"),m.k0s(),m.j41(68,"option",33),m.EFF(69,"Configuration"),m.k0s(),m.j41(70,"option",34),m.EFF(71,"custom Configuration"),m.k0s()()()(),m.j41(72,"div",28)(73,"label",3),m.nrm(74,"system-label",35),m.k0s(),m.nrm(75,"textarea",36),m.k0s()(),m.j41(76,"system-modal-footer")(77,"button",37),m.bIt("click",(function(){return t.close()})),m.nrm(78,"system-label",38),m.k0s(),m.j41(79,"button",39),m.bIt("click",(function(){return t.save()})),m.nrm(80,"system-label",40),m.k0s()()()),2&e&&(m.R7$(5),m.Y8G("ngClass",m.eq3(15,lt,t.getMessages("name").length>0)),m.R7$(5),m.R50("ngModel",t.dictionarydefinition.name),m.R7$(),m.Y8G("ngForOf",t.getMessages("name")),m.R7$(),m.Y8G("ngClass",m.eq3(17,lt,t.getMessages("tablename").length>0)),m.R7$(3),m.R50("ngModel",t.dictionarydefinition.tablename),m.R7$(),m.Y8G("ngForOf",t.getMessages("tablename")),m.R7$(8),m.R50("ngModel",t.dictionarydefinition.scope),m.R7$(),m.Y8G("ngIf","all"==t.dictionarymanager.changescope),m.R7$(3),m.Y8G("ngClass",m.eq3(19,lt,t.getMessages("sysdictionary_type").length>0)),m.R7$(7),m.R50("ngModel",t.dictionarydefinition.sysdictionary_type),m.R7$(11),m.Y8G("ngForOf",t.getMessages("sysdictionary_type")),m.R7$(4),m.R50("ngModel",t.dictionarydefinition.package),m.R7$(4),m.R50("ngModel",t.dictionarydefinition.version),m.R7$(7),m.R50("ngModel",t.dictionarydefinition.sysdictionary_contenttype),m.R7$(14),m.Y8G("ngModel",t.dictionarydefinition.description))},dependencies:[i.YU,i.Sq,i.bT,n.xH,n.y7,n.me,n.wz,n.BC,n.vS,D.H,x.W,qe.D,Pe.I,Je.Q,We.C],encapsulation:2})}return DictionaryManagerAddDefinitionModal})();var at=s(66589),dt=s(86262),rt=s(41587);function ct(e,t){if(1&e){const e=m.RV6();m.j41(0,"tr",21),m.bIt("dblclick",(function(){m.eBV(e);const t=m.XpG(3);return m.Njj(t.goDetails())}))("click",(function(){const t=m.eBV(e).$implicit,s=m.XpG(3);return m.Njj(s.selectedtable=t.sysdictionarytablename)})),m.j41(1,"td"),m.nrm(2,"system-input-radio",22),m.k0s(),m.j41(3,"td")(4,"div",23),m.EFF(5),m.k0s()(),m.j41(6,"td")(7,"div",23),m.EFF(8),m.k0s()(),m.j41(9,"td"),m.nrm(10,"system-checkbox",24),m.k0s(),m.j41(11,"td"),m.nrm(12,"system-checkbox",24),m.k0s()()}if(2&e){const e=t.$implicit,s=m.XpG(3);m.R7$(2),m.Y8G("value",e.sysdictionarytablename)("ngModel",s.selectedtable),m.R7$(3),m.JRh(e.sysdictionaryname),m.R7$(3),m.JRh(e.sysdictionarytablename),m.R7$(2),m.Y8G("ngModel","1"==e.sysdictionarytableaudited),m.R7$(2),m.Y8G("ngModel",!!e.sysdictionarydefinition_id)}}function mt(e,t){if(1&e&&(m.j41(0,"div",13)(1,"table",14)(2,"thead")(3,"tr",15),m.nrm(4,"th",16),m.j41(5,"th",17)(6,"div",18),m.EFF(7,"Dictionaryname"),m.k0s()(),m.j41(8,"th",17)(9,"div",18),m.EFF(10,"Tablename"),m.k0s()(),m.j41(11,"th",19)(12,"div",18),m.EFF(13,"audited"),m.k0s()(),m.j41(14,"th",19)(15,"div",18),m.EFF(16,"defined"),m.k0s()()()(),m.j41(17,"tbody"),m.DNE(18,ct,13,6,"tr",20),m.k0s()()()),2&e){const e=m.XpG(2);m.R7$(18),m.Y8G("ngForOf",e._tables)}}function ut(e,t){1&e&&(m.j41(0,"option",59),m.nrm(1,"system-label",60),m.k0s())}function gt(e,t){if(1&e){const e=m.RV6();m.j41(0,"div",25)(1,"div",26)(2,"div",27)(3,"label",28),m.nrm(4,"system-label",29),m.k0s(),m.j41(5,"system-input-text",30),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG(2);return m.DH7(s.dictionarydefinition.name,t)||(s.dictionarydefinition.name=t),m.Njj(t)})),m.k0s()(),m.j41(6,"div",27)(7,"label",28),m.nrm(8,"system-label",31),m.k0s(),m.j41(9,"system-input-text",30),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG(2);return m.DH7(s.dictionarydefinition.tablename,t)||(s.dictionarydefinition.tablename=t),m.Njj(t)})),m.k0s()()(),m.j41(10,"div",26)(11,"div",32)(12,"label",28)(13,"abbr",33),m.EFF(14,"* "),m.k0s(),m.nrm(15,"system-label",34),m.k0s(),m.j41(16,"div",35)(17,"select",36),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG(2);return m.DH7(s.dictionarydefinition.scope,t)||(s.dictionarydefinition.scope=t),m.Njj(t)})),m.DNE(18,ut,2,0,"option",37),m.j41(19,"option",38),m.nrm(20,"system-label",39),m.k0s()()()(),m.j41(21,"div",40)(22,"label",28)(23,"abbr",33),m.EFF(24,"* "),m.k0s(),m.nrm(25,"system-label",41),m.k0s(),m.j41(26,"div",35)(27,"select",36),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG(2);return m.DH7(s.dictionarydefinition.sysdictionary_type,t)||(s.dictionarydefinition.sysdictionary_type=t),m.Njj(t)})),m.j41(28,"option",42),m.EFF(29,"module"),m.k0s(),m.j41(30,"option",43),m.EFF(31,"metadata"),m.k0s(),m.j41(32,"option",44),m.EFF(33,"template"),m.k0s(),m.j41(34,"option",44),m.EFF(35,"relationship"),m.k0s()()()(),m.j41(36,"div",45)(37,"label",28),m.nrm(38,"system-label",46),m.k0s(),m.j41(39,"system-input-text",47),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG(2);return m.DH7(s.dictionarydefinition.package,t)||(s.dictionarydefinition.package=t),m.Njj(t)})),m.k0s()(),m.j41(40,"div",48)(41,"label",28),m.nrm(42,"system-label",49),m.k0s(),m.j41(43,"system-input-text",47),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG(2);return m.DH7(s.dictionarydefinition.version,t)||(s.dictionarydefinition.version=t),m.Njj(t)})),m.k0s()()(),m.j41(44,"div",26)(45,"div",50)(46,"label",28)(47,"abbr",33),m.EFF(48,"* "),m.k0s(),m.nrm(49,"system-label",51),m.k0s(),m.j41(50,"div",35)(51,"select",36),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG(2);return m.DH7(s.dictionarydefinition.sysdictionary_contenttype,t)||(s.dictionarydefinition.sysdictionary_contenttype=t),m.Njj(t)})),m.j41(52,"option",52),m.EFF(53,"Masterdata"),m.k0s(),m.j41(54,"option",53),m.EFF(55,"tramsactional Data"),m.k0s(),m.j41(56,"option",54),m.EFF(57,"Logs"),m.k0s(),m.j41(58,"option",55),m.EFF(59,"Configuration"),m.k0s(),m.j41(60,"option",56),m.EFF(61,"custom Configuration"),m.k0s()()()()(),m.j41(62,"label",28),m.nrm(63,"system-label",57),m.k0s(),m.nrm(64,"system-input-text",58),m.k0s()}if(2&e){const e=m.XpG(2);m.R7$(5),m.R50("ngModel",e.dictionarydefinition.name),m.R7$(4),m.R50("ngModel",e.dictionarydefinition.tablename),m.R7$(8),m.R50("ngModel",e.dictionarydefinition.scope),m.R7$(),m.Y8G("ngIf","all"==e.dictionarymanager.changescope),m.R7$(9),m.R50("ngModel",e.dictionarydefinition.sysdictionary_type),m.R7$(12),m.R50("ngModel",e.dictionarydefinition.package),m.R7$(4),m.R50("ngModel",e.dictionarydefinition.version),m.R7$(8),m.R50("ngModel",e.dictionarydefinition.sysdictionary_contenttype),m.R7$(13),m.Y8G("ngModel",e.dictionarydefinition.description)}}function ht(e,t){if(1&e&&(m.j41(0,"span"),m.EFF(1),m.k0s()),2&e){const e=m.XpG(2).$implicit;m.R7$(),m.SpI("(",e.fielddefinition.len,")")}}function pt(e,t){1&e&&(m.j41(0,"option",59),m.nrm(1,"system-label",60),m.k0s())}function ft(e,t){if(1&e&&m.nrm(0,"system-select-option",72),2&e){const e=t.$implicit;m.Y8G("value",e.id)("display",e.name)}}function bt(e,t){if(1&e){const e=m.RV6();m.j41(0,"tr")(1,"td")(2,"system-checkbox",67),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG().$implicit;return m.DH7(s.selected,t)||(s.selected=t),m.Njj(t)})),m.k0s()(),m.j41(3,"td")(4,"div",23),m.EFF(5),m.k0s()(),m.j41(6,"td"),m.nrm(7,"system-checkbox",24),m.k0s(),m.j41(8,"td")(9,"div",23),m.EFF(10),m.DNE(11,ht,2,1,"span",66),m.k0s()(),m.j41(12,"td"),m.nrm(13,"system-checkbox",24),m.k0s(),m.j41(14,"td")(15,"div",35)(16,"select",68),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG().$implicit;return m.DH7(s.scope,t)||(s.scope=t),m.Njj(t)})),m.DNE(17,pt,2,0,"option",37),m.j41(18,"option",38),m.nrm(19,"system-label",39),m.k0s()()()(),m.j41(20,"td")(21,"system-input-label",67),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG().$implicit;return m.DH7(s.fielddefinition.vname,t)||(s.fielddefinition.vname=t),m.Njj(t)})),m.k0s()(),m.j41(22,"td")(23,"system-checkbox",67),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG().$implicit;return m.DH7(s.fielddefinition.required,t)||(s.fielddefinition.required=t),m.Njj(t)})),m.k0s()(),m.j41(24,"td")(25,"system-select",69),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG().$implicit;return m.DH7(s.sysdomaindefinition_id,t)||(s.sysdomaindefinition_id=t),m.Njj(t)})),m.DNE(26,ft,1,2,"system-select-option",70),m.k0s()(),m.j41(27,"td")(28,"button",71),m.bIt("click",(function(){m.eBV(e);const t=m.XpG().$implicit;return m.Njj(t.showdetails=!t.showdetails)})),m.nrm(29,"system-button-icon",64),m.k0s()()()}if(2&e){const e=m.XpG().$implicit,t=m.XpG(3);m.R7$(2),m.Y8G("disabled",!!e.sysdomainfield_id),m.R50("ngModel",e.selected),m.R7$(3),m.JRh(e.fieldname),m.R7$(2),m.Y8G("ngModel",!!e.sysdomainfield_id),m.R7$(3),m.JRh(e.fieldtype),m.R7$(),m.Y8G("ngIf",e.fielddefinition.len),m.R7$(2),m.Y8G("ngModel",e.fielddefinition.source&&"non-db"==e.fielddefinition.source),m.R7$(3),m.Y8G("disabled",!!e.sysdomainfield_id),m.R50("ngModel",e.scope),m.R7$(),m.Y8G("ngIf","all"==t.dictionarymanager.changescope&&"g"==t.dictionarydefinition.scope),m.R7$(4),m.Y8G("disabled",!!e.sysdomainfield_id),m.R50("ngModel",e.fielddefinition.vname),m.R7$(2),m.Y8G("disabled",!!e.sysdomainfield_id),m.R50("ngModel",e.fielddefinition.required),m.R7$(2),m.Y8G("disabled",!!e.sysdomainfield_id)("idOnly",!0),m.R50("ngModel",e.sysdomaindefinition_id),m.R7$(),m.Y8G("ngForOf",t.domains),m.R7$(3),m.Y8G("icon",e.showdetails?"chevronup":"chevrondown")}}function yt(e,t){if(1&e&&(m.j41(0,"tr"),m.nrm(1,"td"),m.j41(2,"td",73),m.EFF(3),m.k0s(),m.j41(4,"td",75),m.EFF(5),m.k0s()()),2&e){const e=t.$implicit;m.R7$(3),m.SpI(" ",e.key," "),m.R7$(2),m.SpI(" ",e.value," ")}}function _t(e,t){if(1&e){const e=m.RV6();m.qex(0),m.j41(1,"tr"),m.nrm(2,"td"),m.j41(3,"td",73),m.EFF(4," package / version "),m.k0s(),m.j41(5,"td",74)(6,"system-input-text",67),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG().$implicit;return m.DH7(s.package,t)||(s.package=t),m.Njj(t)})),m.k0s()(),m.j41(7,"td",74)(8,"system-input-text",67),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG().$implicit;return m.DH7(s.version,t)||(s.version=t),m.Njj(t)})),m.k0s()()(),m.j41(9,"tr"),m.nrm(10,"td"),m.j41(11,"td",73),m.EFF(12," Comment "),m.k0s(),m.j41(13,"td",75)(14,"system-input-text",67),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG().$implicit;return m.DH7(s.fielddefinition.comment,t)||(s.fielddefinition.comment=t),m.Njj(t)})),m.k0s()()(),m.j41(15,"tr"),m.nrm(16,"td"),m.j41(17,"td",73),m.EFF(18," audited "),m.k0s(),m.j41(19,"td",75)(20,"system-checkbox",67),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG().$implicit;return m.DH7(s.fielddefinition.audited,t)||(s.fielddefinition.audited=t),m.Njj(t)})),m.k0s()()(),m.j41(21,"tr"),m.nrm(22,"td"),m.j41(23,"td",73),m.EFF(24," reportable "),m.k0s(),m.j41(25,"td",75)(26,"system-checkbox",67),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG().$implicit;return m.DH7(s.fielddefinition.reportable,t)||(s.fielddefinition.reportable=t),m.Njj(t)})),m.k0s()()(),m.j41(27,"tr"),m.nrm(28,"td"),m.j41(29,"td",73),m.EFF(30," duplicate merge "),m.k0s(),m.j41(31,"td",75)(32,"system-checkbox",67),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG().$implicit;return m.DH7(s.fielddefinition.duplicate_merge,t)||(s.fielddefinition.duplicate_merge=t),m.Njj(t)})),m.k0s()()(),m.DNE(33,yt,6,2,"tr",65),m.bVm()}if(2&e){const e=m.XpG().$implicit,t=m.XpG(3);m.R7$(6),m.Y8G("disabled",!!e.sysdomainfield_id),m.R50("ngModel",e.package),m.R7$(2),m.Y8G("disabled",!!e.sysdomainfield_id),m.R50("ngModel",e.version),m.R7$(6),m.Y8G("disabled",!!e.sysdomainfield_id),m.R50("ngModel",e.fielddefinition.comment),m.R7$(6),m.Y8G("disabled",!!e.sysdomainfield_id),m.R50("ngModel",e.fielddefinition.audited),m.R7$(6),m.Y8G("disabled",!!e.sysdomainfield_id),m.R50("ngModel",e.fielddefinition.reportable),m.R7$(6),m.Y8G("disabled",!!e.sysdomainfield_id),m.R50("ngModel",e.fielddefinition.duplicate_merge),m.R7$(),m.Y8G("ngForOf",t.getFieldDefinitions(e.fielddefinition))}}function kt(e,t){if(1&e&&(m.qex(0),m.DNE(1,bt,30,19,"tr",66)(2,_t,34,13,"ng-container",66),m.bVm()),2&e){const e=t.$implicit,s=m.XpG(3);m.R7$(),m.Y8G("ngIf",!s.filterundefined||!e.sysdomainfield_id),m.R7$(),m.Y8G("ngIf",e.showdetails)}}function vt(e,t){if(1&e){const e=m.RV6();m.j41(0,"div",13)(1,"table",14)(2,"thead")(3,"tr",15)(4,"th",16)(5,"system-checkbox",61),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG(2);return m.DH7(s.allSelected,t)||(s.allSelected=t),m.Njj(t)})),m.k0s()(),m.j41(6,"th",17)(7,"div",18),m.EFF(8,"name"),m.k0s()(),m.j41(9,"th",16)(10,"div",62),m.EFF(11,"defined"),m.k0s()(),m.j41(12,"th",17)(13,"div",62),m.EFF(14,"type"),m.k0s()(),m.j41(15,"th",16)(16,"div",62),m.EFF(17,"non DB"),m.k0s()(),m.j41(18,"th",17)(19,"div",62),m.EFF(20,"scope"),m.k0s()(),m.j41(21,"th",17)(22,"div",62),m.EFF(23,"label"),m.k0s()(),m.j41(24,"th",17)(25,"div",62),m.EFF(26,"required"),m.k0s()(),m.j41(27,"th",17)(28,"div",62),m.EFF(29,"domain"),m.k0s()(),m.j41(30,"th",16)(31,"button",63),m.bIt("click",(function(){m.eBV(e);const t=m.XpG(2);return m.Njj(t.toggleAllDetails())})),m.nrm(32,"system-button-icon",64),m.k0s()()()(),m.j41(33,"tbody"),m.DNE(34,kt,3,2,"ng-container",65),m.k0s()()()}if(2&e){const e=m.XpG(2);m.R7$(5),m.R50("ngModel",e.allSelected),m.R7$(27),m.Y8G("icon",e.allExpanded?"chevronup":"chevrondown"),m.R7$(2),m.Y8G("ngForOf",e.fields)}}function Rt(e,t){1&e&&(m.j41(0,"option",59),m.nrm(1,"system-label",60),m.k0s())}function Mt(e,t){if(1&e){const e=m.RV6();m.j41(0,"tr")(1,"td")(2,"system-checkbox",67),m.mxI("ngModelChange",(function(t){const s=m.eBV(e).$implicit;return m.DH7(s.selected,t)||(s.selected=t),m.Njj(t)})),m.k0s()(),m.j41(3,"td")(4,"system-input-text",47),m.mxI("ngModelChange",(function(t){const s=m.eBV(e).$implicit;return m.DH7(s.name,t)||(s.name=t),m.Njj(t)})),m.k0s()(),m.j41(5,"td")(6,"div",35)(7,"select",36),m.mxI("ngModelChange",(function(t){const s=m.eBV(e).$implicit;return m.DH7(s.type,t)||(s.type=t),m.Njj(t)})),m.j41(8,"option",77),m.EFF(9,"primary"),m.k0s(),m.j41(10,"option",78),m.EFF(11,"index"),m.k0s(),m.j41(12,"option",79),m.EFF(13,"unique"),m.k0s()()()(),m.j41(14,"td")(15,"div",35)(16,"select",36),m.mxI("ngModelChange",(function(t){const s=m.eBV(e).$implicit;return m.DH7(s.scope,t)||(s.scope=t),m.Njj(t)})),m.DNE(17,Rt,2,0,"option",37),m.j41(18,"option",38),m.nrm(19,"system-label",39),m.k0s()()()(),m.j41(20,"td")(21,"system-input-text",47),m.mxI("ngModelChange",(function(t){const s=m.eBV(e).$implicit;return m.DH7(s.package,t)||(s.package=t),m.Njj(t)})),m.k0s()(),m.j41(22,"td")(23,"system-input-text",47),m.mxI("ngModelChange",(function(t){const s=m.eBV(e).$implicit;return m.DH7(s.version,t)||(s.version=t),m.Njj(t)})),m.k0s()(),m.j41(24,"td"),m.EFF(25),m.k0s()()}if(2&e){const e=t.$implicit,s=m.XpG(3);m.R7$(2),m.Y8G("disabled",!s.canAddIndex(e.fields)),m.R50("ngModel",e.selected),m.R7$(2),m.R50("ngModel",e.name),m.R7$(3),m.R50("ngModel",e.type),m.R7$(9),m.R50("ngModel",e.scope),m.R7$(),m.Y8G("ngIf","all"==s.dictionarymanager.changescope&&"g"==s.dictionarydefinition.scope),m.R7$(4),m.R50("ngModel",e.package),m.R7$(2),m.R50("ngModel",e.version),m.R7$(2),m.JRh(e.fields.join(", "))}}function jt(e,t){if(1&e&&(m.j41(0,"div",13)(1,"table",14)(2,"thead")(3,"tr",15),m.nrm(4,"th",16),m.j41(5,"th",17)(6,"div",76),m.EFF(7,"name"),m.k0s()(),m.j41(8,"th",17)(9,"div",76),m.EFF(10,"type"),m.k0s()(),m.j41(11,"th",17)(12,"div",76),m.EFF(13,"scope"),m.k0s()(),m.j41(14,"th",17)(15,"div",76),m.EFF(16,"package"),m.k0s()(),m.j41(17,"th",17)(18,"div",76),m.EFF(19,"version"),m.k0s()(),m.j41(20,"th",17)(21,"div",76),m.EFF(22,"fields"),m.k0s()()()(),m.j41(23,"tbody"),m.DNE(24,Mt,26,9,"tr",65),m.k0s()()()),2&e){const e=m.XpG(2);m.R7$(24),m.Y8G("ngForOf",e.indices)}}function Lt(e,t){if(1&e&&(m.j41(0,"option",81),m.EFF(1),m.k0s()),2&e){const e=t.$implicit;m.Y8G("ngValue",e.id),m.R7$(),m.JRh(e.name)}}function xt(e,t){1&e&&(m.j41(0,"option",59),m.nrm(1,"system-label",60),m.k0s())}function It(e,t){if(1&e){const e=m.RV6();m.j41(0,"tr")(1,"td")(2,"system-checkbox",67),m.mxI("ngModelChange",(function(t){const s=m.eBV(e).$implicit;return m.DH7(s.selected,t)||(s.selected=t),m.Njj(t)})),m.k0s()(),m.j41(3,"td")(4,"system-input-text",30),m.mxI("ngModelChange",(function(t){const s=m.eBV(e).$implicit;return m.DH7(s.name,t)||(s.name=t),m.Njj(t)})),m.k0s()(),m.j41(5,"td")(6,"div",35)(7,"select",36),m.mxI("ngModelChange",(function(t){const s=m.eBV(e).$implicit;return m.DH7(s.sysdictionary_ref_id,t)||(s.sysdictionary_ref_id=t),m.Njj(t)})),m.DNE(8,Lt,2,2,"option",80),m.k0s()()(),m.j41(9,"td")(10,"div",35)(11,"select",36),m.mxI("ngModelChange",(function(t){const s=m.eBV(e).$implicit;return m.DH7(s.scope,t)||(s.scope=t),m.Njj(t)})),m.DNE(12,xt,2,0,"option",37),m.j41(13,"option",38),m.nrm(14,"system-label",39),m.k0s()()()(),m.j41(15,"td")(16,"system-input-text",47),m.mxI("ngModelChange",(function(t){const s=m.eBV(e).$implicit;return m.DH7(s.package,t)||(s.package=t),m.Njj(t)})),m.k0s()(),m.j41(17,"td")(18,"system-input-text",47),m.mxI("ngModelChange",(function(t){const s=m.eBV(e).$implicit;return m.DH7(s.version,t)||(s.version=t),m.Njj(t)})),m.k0s()()()}if(2&e){const e=t.$implicit,s=m.XpG(3);m.R7$(2),m.Y8G("disabled",!e.sysdictionary_ref_id),m.R50("ngModel",e.selected),m.R7$(2),m.R50("ngModel",e.name),m.R7$(3),m.R50("ngModel",e.sysdictionary_ref_id),m.R7$(),m.Y8G("ngForOf",s.definedtemplates),m.R7$(3),m.R50("ngModel",e.scope),m.R7$(),m.Y8G("ngIf","all"==s.dictionarymanager.changescope&&"g"==s.dictionarydefinition.scope),m.R7$(4),m.R50("ngModel",e.package),m.R7$(2),m.R50("ngModel",e.version)}}function Dt(e,t){if(1&e&&(m.j41(0,"div",13)(1,"table",14)(2,"thead")(3,"tr",15),m.nrm(4,"th",16),m.j41(5,"th",17)(6,"div",76),m.EFF(7,"name"),m.k0s()(),m.j41(8,"th",17)(9,"div",76),m.EFF(10,"template"),m.k0s()(),m.j41(11,"th",17)(12,"div",76),m.EFF(13,"scope"),m.k0s()(),m.j41(14,"th",17)(15,"div",76),m.EFF(16,"package"),m.k0s()(),m.j41(17,"th",17)(18,"div",76),m.EFF(19,"version"),m.k0s()()()(),m.j41(20,"tbody"),m.DNE(21,It,19,9,"tr",65),m.k0s()()()),2&e){const e=m.XpG(2);m.R7$(21),m.Y8G("ngForOf",e.templates)}}function Et(e,t){if(1&e){const e=m.RV6();m.j41(0,"system-input-text",82),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG(2);return m.DH7(s.filterterm,t)||(s.filterterm=t),m.Njj(t)})),m.k0s()}if(2&e){const e=m.XpG(2);m.Y8G("showClear",!0),m.R50("ngModel",e.filterterm)}}function Ct(e,t){if(1&e){const e=m.RV6();m.j41(0,"system-checkbox",83),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG(2);return m.DH7(s.filterundefined,t)||(s.filterundefined=t),m.Njj(t)})),m.EFF(1,"undefined onyl"),m.k0s()}if(2&e){const e=m.XpG(2);m.R50("ngModel",e.filterundefined)}}function Ft(e,t){if(1&e){const e=m.RV6();m.j41(0,"button",84),m.bIt("click",(function(){m.eBV(e);const t=m.XpG(2);return m.Njj(t.goDetails())})),m.nrm(1,"system-label",85),m.k0s()}if(2&e){const e=m.XpG(2);m.Y8G("disabled",!e.selectedtable)}}function Gt(e,t){if(1&e){const e=m.RV6();m.j41(0,"button",84),m.bIt("click",(function(){m.eBV(e);const t=m.XpG(2);return m.Njj(t.goFields(!0))})),m.nrm(1,"system-label",85),m.k0s()}if(2&e){const e=m.XpG(2);m.Y8G("disabled",!e.detailsComplete)}}function $t(e,t){if(1&e){const e=m.RV6();m.j41(0,"button",86),m.bIt("click",(function(){m.eBV(e);const t=m.XpG(2);return m.Njj(t.goFields())})),m.nrm(1,"system-label",87),m.k0s()}}function Bt(e,t){if(1&e){const e=m.RV6();m.j41(0,"button",86),m.bIt("click",(function(){m.eBV(e);const t=m.XpG(2);return m.Njj(t.goIndices())})),m.nrm(1,"system-label",88),m.k0s()}}function Nt(e,t){if(1&e){const e=m.RV6();m.j41(0,"button",86),m.bIt("click",(function(){m.eBV(e);const t=m.XpG(2);return m.Njj(t.goTemplates())})),m.nrm(1,"system-label",89),m.k0s()}}function St(e,t){if(1&e){const e=m.RV6();m.j41(0,"button",90),m.bIt("click",(function(){m.eBV(e);const t=m.XpG(2);return m.Njj(t.add())})),m.nrm(1,"system-label",91),m.k0s()}if(2&e){const e=m.XpG(2);m.Y8G("disabled",!e.canAdd)}}function wt(e,t){if(1&e){const e=m.RV6();m.j41(0,"system-modal",1)(1,"system-modal-header",2),m.bIt("close",(function(){m.eBV(e);const t=m.XpG();return m.Njj(t.close())})),m.EFF(2,"Migrate Dictionary Definition"),m.k0s(),m.j41(3,"system-modal-content",3),m.DNE(4,mt,19,1,"div",4)(5,gt,65,9,"div",5)(6,vt,35,3,"div",4)(7,jt,25,1,"div",4)(8,Dt,22,1,"div",4),m.k0s(),m.j41(9,"system-modal-footer")(10,"div",6)(11,"div",7),m.DNE(12,Et,1,2,"system-input-text",8)(13,Ct,2,1,"system-checkbox",9),m.k0s(),m.DNE(14,Ft,2,1,"button",10)(15,Gt,2,1,"button",10)(16,$t,2,0,"button",11)(17,Bt,2,0,"button",11)(18,Nt,2,0,"button",11)(19,St,2,1,"button",12),m.k0s()()()}if(2&e){const e=m.XpG();m.R7$(4),m.Y8G("ngIf","tables"==e.view),m.R7$(),m.Y8G("ngIf","details"==e.view),m.R7$(),m.Y8G("ngIf","fields"==e.view),m.R7$(),m.Y8G("ngIf","indices"==e.view),m.R7$(),m.Y8G("ngIf","templates"==e.view),m.R7$(4),m.Y8G("ngIf","tables"==e.view),m.R7$(),m.Y8G("ngIf","fields"==e.view||"tables"==e.view),m.R7$(),m.Y8G("ngIf","tables"==e.view),m.R7$(),m.Y8G("ngIf","details"==e.view),m.R7$(),m.Y8G("ngIf","indices"==e.view||"templates"==e.view),m.R7$(),m.Y8G("ngIf","fields"==e.view||"templates"==e.view),m.R7$(),m.Y8G("ngIf","fields"==e.view||"indices"==e.view),m.R7$(),m.Y8G("ngIf","indices"==e.view||"fields"==e.view||"templates"==e.view)}}let Tt=(()=>{class DictionaryManagerMigrateDefinitionModal{constructor(e,t,s,i,n){this.backend=e,this.modal=t,this.modelutilities=s,this.toast=i,this.dictionarymanager=n,this.currentVersion="2024.01.001",this.currentPackage="system",this.loading=!0,this.tables=[],this.filterundefined=!1,this.fields=[],this.indices=[],this.templates=[],this.domains=[],this.definedtemplates=[],this._selectedtable="",this.view="tables",this.systemdefinitions=["audited","name","vname","comment","required","type","len","reportable","duplicate_merge","sysdomainfield_id","source"]}ngOnInit(){let e=this.modal.await("LBL_LOADING");this.dictionarydefinition={id:this.modelutilities.generateGuid(),name:"",tablename:"",sysdictionary_type:"module",scope:this.dictionarymanager.defaultScope,status:"d"},this.backend.getRequest("dictionary/fields").subscribe({next:t=>{this.tables=t,this.tables.sort(((e,t)=>e.sysdictionarytablename.localeCompare(t.sysdictionarytablename))),e.emit(!0),this.loading=!1},error:()=>{e.emit(!0),this.close()}});for(let e of this.dictionarymanager.domaindefinitions)this.domains.push({id:e.id,name:e.name});this.domains.sort(((e,t)=>e.name.localeCompare(t.name)>0?1:-1));for(let e of this.dictionarymanager.dictionarydefinitions.filter((e=>"template"==e.sysdictionary_type)))this.definedtemplates.push({id:e.id,name:e.name});this.definedtemplates.sort(((e,t)=>e.name.localeCompare(t.name)>0?1:-1))}loadVardefs(e){this.backend.getRequest(`dictionary/vardefs/${e}`).subscribe({next:t=>{if(t[e].indices){let s=Object.keys(t[e].indices);for(let i of s)t[e].indices[i].scope=this.dictionarydefinition.scope,t[e].indices[i].package=this.dictionarydefinition.package,t[e].indices[i].version=this.dictionarydefinition.version,this.indices.push(t[e].indices[i])}if(t[e].templates){let s=Object.keys(t[e].templates);for(let e of s){let t=this.definedtemplates.find((t=>t.name==e));this.templates.push({name:e,sysdictionary_ref_id:t?t.id:void 0,scope:this.dictionarydefinition.scope,package:this.dictionarydefinition.package,version:this.dictionarydefinition.version})}}}})}get _tables(){return this.filterterm||this.filterundefined?this.tables.filter((e=>!(this.filterterm&&!(e.sysdictionarytablename.toLowerCase().indexOf(this.filterterm.toLowerCase())>=0)||this.filterundefined&&e.sysdictionarydefinition_id))):this.tables}get _fields(){return this.filterundefined?this.fields.filter((e=>!e.sysdomainfield_id)):this.fields}getFieldDefinitions(e){if(!e)return[];let t=Object.keys(e),s=[];for(let i of t)this.systemdefinitions.indexOf(i)>=0||s.push({key:i,value:e[i]});return s}get selectedtable(){return this._selectedtable}set selectedtable(e){this._selectedtable=e;let t=this.tables.find((t=>t.sysdictionarytablename==e));if(t){if(this.fields=t.fields,this.autoMapFields(),t.sysdictionarydefinition_id){this.dictionarydefinition.id=t.sysdictionarydefinition_id;let e=this.dictionarymanager.dictionarydefinitions.find((e=>e.id==t.sysdictionarydefinition_id));this.dictionarydefinition.scope=e.scope,this.dictionarydefinition.package=e.package,this.dictionarydefinition.version=e.version}else this.dictionarydefinition.id=this.modelutilities.generateGuid(),this.dictionarydefinition.scope=void 0,this.dictionarydefinition.package=this.currentPackage,this.dictionarydefinition.version=this.currentVersion;this.dictionarydefinition.name=t.sysdictionaryname,this.dictionarydefinition.tablename=t.sysdictionarytablename}}autoMapFields(){this.fields.forEach((e=>{e.sysdomainfield_id||(e.sysdomaindefinition_id=this.mapFieldTypeToDomain(e)),e.fielddefinition.vname||(e.fielddefinition.vname=`LBL_${e.fielddefinition.name.toUpperCase()}`),e.version||(e.version=this.currentVersion),e.package||(e.package=this.currentPackage),e.scope||(e.scope="g")}))}mapFieldTypeToDomain(e){let t=e.fieldtype;switch(e.fieldtype){case"varchar":t="varchar255",36==e.fielddefinition.len||"id"==e.name?t="guid":"version"==e.fieldname?t="varchar15":"package"==e.fieldname?t="varchar50":isNaN(e.fielddefinition.len)||(t=e.fieldtype+e.fielddefinition.len);break;case"id":t="guid";break;case"int":1==e.fielddefinition.len&&(t="smallint")}return this.domains.find((e=>e.name==t))?.id}get allExpanded(){return this.fields.length==this.fields.filter((e=>!0===e.showdetails)).length}toggleAllDetails(){let e=this.allExpanded;for(let t of this.fields)t.showdetails=!e}get allSelected(){return this.fields.filter((e=>!e.sysdomainfield_id)).length==this.fields.filter((e=>!0===e.selected&&!e.sysdomainfield_id)).length}set allSelected(e){for(let t of this.fields)t.sysdomainfield_id||(t.selected=e)}goDetails(){this.selectedtable&&(this.tables.find((e=>e.sysdictionarydefinition_id==this.dictionarydefinition.id))?this.goFields(!0):this.view="details")}get detailsComplete(){return this.dictionarydefinition.name&&this.dictionarydefinition.tablename&&this.dictionarydefinition.scope}goFields(e=!1){if(this.view="fields",e){for(let e of this.fields.filter((e=>!e.sysdomaindefinition_id)))e.scope=this.dictionarydefinition.scope,e.package=this.dictionarydefinition.package,e.version=this.dictionarydefinition.version;this.loadVardefs(this.dictionarydefinition.name)}}goIndices(){this.view="indices"}goTemplates(){this.view="templates"}close(){this.self.destroy()}canAddIndex(e){for(let t of e)if(!this.fields.find((e=>(e.selected||!!e.sysdomainfield_id)&&e.fieldname==t)))return!1;return!0}canAddTemplate(e){return!!this.dictionarymanager.dictionarydefinitions.find((t=>t.name==e&&"template"==t.sysdictionary_type))}get canAdd(){return this.fields.some((e=>e.selected&&!!e.sysdomaindefinition_id))&&!this.fields.some((e=>e.selected&&!e.sysdomaindefinition_id))||this.indices.some((e=>e.selected))||this.templates.some((e=>e.selected))}add(){this.dictionarymanager.dictionarydefinitions.find((e=>e.id==this.dictionarydefinition.id))||this.backend.postRequest(`dictionary/definition/${this.dictionarydefinition.id}`,{},this.dictionarydefinition).subscribe({next:e=>{this.toast.sendToast("added definitions","success"),this.dictionarymanager.dictionarydefinitions.push(this.dictionarydefinition)},error:()=>{this.toast.sendToast("error adding definitions","error")}});let e=this.fields.filter((e=>!!e.sysdomainfield_id)).length,t=[];for(let s of this.templates.filter((e=>e.selected))){let i={id:this.modelutilities.generateGuid(),sysdictionarydefinition_id:this.dictionarydefinition.id,sysdictionary_ref_id:s.sysdictionary_ref_id,name:s.name,exclude_from_audited:0,default_value:"",required:0,scope:s.scope?s.scope:this.dictionarydefinition.scope,status:"d",sequence:e};e++,t.push(i)}let s={};for(let i of this._fields.filter((e=>e.selected))){let n=this.modelutilities.generateGuid(),l={id:n,sysdictionarydefinition_id:this.dictionarydefinition.id,sysdomaindefinition_id:i.sysdomaindefinition_id,name:i.fieldname,non_db:0,exclude_from_audited:i.fielddefinition.audited?0:1,default_value:"",required:i.fielddefinition.required?1:0,scope:i.scope?i.scope:this.dictionarydefinition.scope,status:"d",sequence:e,package:i.package,version:i.version,label:i.fielddefinition.vname,description:i.fielddefinition.comment};e++,s[i.fieldname]=n,t.push(l)}t.length>0&&this.backend.postRequest("dictionary/items",{},{items:t}).subscribe({next:()=>{this.toast.sendToast("added items","success"),this.dictionarymanager.dictionaryitems=this.dictionarymanager.dictionaryitems.concat(t),this.addIndices(s)},error:()=>{this.toast.sendToast("error adding items","error")}}),this.close()}addIndices(e){let t=this.dictionarymanager.getDictionaryDefinitionItems(this.dictionarydefinition.id);for(let s of this.indices.filter((e=>e.selected))){let i=this.modelutilities.generateGuid(),n={id:i,name:s.name,indextype:s.type,package:s.package,scope:s.scope,version:s.version,sysdictionarydefinition_id:this.dictionarydefinition.id,status:"d"};this.dictionarymanager.dictionaryindexes.push(n);let l=0;for(let n of s.fields)this.dictionarymanager.dictionaryindexitems.push({id:this.modelutilities.generateGuid(),scope:s.scope,status:"d",package:s.package,version:s.version,sysdictionaryindex_id:i,sysdictionaryitem_id:e[n]?e[n]:t.find((e=>e.name==n)).id,sequence:l}),l++;this.backend.postRequest(`dictionary/index/${i}`,{},{index:n,items:this.dictionarymanager.dictionaryindexitems.filter((e=>e.sysdictionaryindex_id==i))}).subscribe({next:e=>{this.toast.sendToast("added indices","success")},error:()=>{this.toast.sendToast("error adding indices","error")}})}}static#e=this.ɵfac=function(e){return new(e||DictionaryManagerMigrateDefinitionModal)(m.rXU(p.H),m.rXU(R.y),m.rXU(y.g),m.rXU(v.o),m.rXU(j))};static#t=this.ɵcmp=m.VBU({type:DictionaryManagerMigrateDefinitionModal,selectors:[["dictionary-manager-migratedefinition-modal"]],decls:1,vars:1,consts:[["size","large",4,"ngIf"],["size","large"],[3,"close"],["margin","none"],["style","height: 80vh",4,"ngIf"],["class","slds-p-around--x-small",4,"ngIf"],[1,"slds-grid","slds-grid--vertical-align-center"],[1,"slds-col--bump-right","slds-grid","slds-grid--vertical-align-center"],["class","slds-m-horizontal--xx-small",3,"showClear","ngModel","ngModelChange",4,"ngIf"],["class","slds-m-horizontal--xx-small",3,"ngModel","ngModelChange",4,"ngIf"],["class","slds-button slds-button--neutral slds-m-horizontal--xx-small",3,"disabled","click",4,"ngIf"],["class","slds-button slds-button--neutral slds-m-horizontal--xx-small",3,"click",4,"ngIf"],["class","slds-button slds-button--brand slds-m-horizontal--xx-small",3,"disabled","click",4,"ngIf"],[2,"height","80vh"],[1,"slds-table","slds-table--header-fixed"],[1,"slds-line-height_reset"],["scope","col",2,"width","2rem"],["scope","col"],[1,"slds-truncate","slds-m-around--xx-small"],["scope","col",2,"width","4rem"],[3,"dblclick","click",4,"ngFor","ngForOf"],[3,"dblclick","click"],["name","migratedid",3,"value","ngModel"],[1,"slds-truncate"],["disabled","",3,"ngModel"],[1,"slds-p-around--x-small"],[1,"slds-grid"],[1,"slds-form-element__control","slds-size--1-of-2","slds-p-right--xxx-small"],[1,"slds-form-element__label"],["label","LBL_NAME"],["disabled","",3,"ngModel","ngModelChange"],["label","LBL_TABLE"],[1,"slds-form-element__control","slds-size--1-of-4","slds-p-left--xxx-small"],[1,"slds-required"],["label","LBL_SCOPE"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],["value","g",4,"ngIf"],["value","c"],["label","LBL_CUSTOM"],[1,"slds-large-size--1-of-4","slds-p-right--xxx-small","slds-form-element__control"],["label","LBL_TYPE"],["value","module"],["value","metadata"],["value","template"],[1,"slds-size--1-of-4","slds-p-right--xxx-small","slds-form-element__control"],["label","LBL_PACKAGE"],[3,"ngModel","ngModelChange"],[1,"slds-size--1-of-4","slds-p-left--xxx-small","slds-form-element__control"],["label","LBL_VERSION"],[1,"slds-large-size--1-of-2","slds-p-right--xxx-small","slds-form-element__control"],["label","LBL_CONTENT_TYPE"],["value","masterdata"],["value","transactionaldata"],["value","logs"],["value","config"],["value","custom_config"],["label","LBL_COMMENT"],["maxlength","150",3,"ngModel"],["value","g"],["label","LBL_GLOBAL"],[1,"slds-m-around--x-small",3,"ngModel","ngModelChange"],[1,"slds-truncateslds-m-around--xx-small"],[1,"slds-button","slds-button--icon","slds-m-around--x-small",3,"click"],[3,"icon"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"disabled","ngModel","ngModelChange"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],[3,"disabled","idOnly","ngModel","ngModelChange"],[3,"value","display",4,"ngFor","ngForOf"],[1,"slds-button","slds-button--icon",3,"click"],[3,"value","display"],["colspan","2"],["colspan","3"],["colspan","6"],[1,"slds-truncate","slds-p-around--xx-small"],["value","primary"],["value","index"],["value","unique"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"],[1,"slds-m-horizontal--xx-small",3,"showClear","ngModel","ngModelChange"],[1,"slds-m-horizontal--xx-small",3,"ngModel","ngModelChange"],[1,"slds-button","slds-button--neutral","slds-m-horizontal--xx-small",3,"disabled","click"],["label","LBL_NEXT"],[1,"slds-button","slds-button--neutral","slds-m-horizontal--xx-small",3,"click"],["label","LBL_FIELDS"],["label","LBL_INDICES"],["label","LBL_TEMPLATES"],[1,"slds-button","slds-button--brand","slds-m-horizontal--xx-small",3,"disabled","click"],["label","LBL_ADD"]],template:function(e,t){1&e&&m.DNE(0,wt,20,13,"system-modal",0),2&e&&m.Y8G("ngIf",!t.loading)},dependencies:[i.Sq,i.bT,n.xH,n.y7,n.wz,n.BC,n.tU,n.vS,L.t,be.f,D.H,ze.w,at.J,x.W,qe.D,Pe.I,Je.Q,We.C,dt.i,rt.t],encapsulation:2})}return DictionaryManagerMigrateDefinitionModal})();function At(e,t){if(1&e&&(m.j41(0,"div",34),m.EFF(1),m.k0s()),2&e){const e=t.$implicit;m.R7$(),m.JRh(e.message)}}function Yt(e,t){if(1&e&&m.nrm(0,"system-select-option",35),2&e){const e=t.$implicit;m.Y8G("value",e.id)("display",e.name)}}function Ot(e,t){if(1&e&&(m.j41(0,"div",34),m.EFF(1),m.k0s()),2&e){const e=t.$implicit;m.R7$(),m.JRh(e.message)}}const Xt=e=>({"slds-has-error":e});function Vt(e,t){if(1&e){const e=m.RV6();m.j41(0,"div",6)(1,"div",27)(2,"label",8)(3,"abbr",9),m.EFF(4,"* "),m.k0s(),m.nrm(5,"system-label",28),m.k0s(),m.j41(6,"system-input-text",18),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.dictionaryitem.name,t)||(s.dictionaryitem.name=t),m.Njj(t)})),m.k0s(),m.DNE(7,At,2,1,"div",29),m.k0s(),m.j41(8,"div",30)(9,"label",8)(10,"abbr",9),m.EFF(11,"* "),m.k0s(),m.nrm(12,"system-label",31),m.k0s(),m.j41(13,"system-select",32),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.dictionaryitem.sysdomaindefinition_id,t)||(s.dictionaryitem.sysdomaindefinition_id=t),m.Njj(t)})),m.DNE(14,Yt,1,2,"system-select-option",33),m.k0s(),m.DNE(15,Ot,2,1,"div",29),m.k0s()()}if(2&e){const e=m.XpG();m.R7$(),m.Y8G("ngClass",m.eq3(7,Xt,e.getMessages("name").length>0)),m.R7$(5),m.R50("ngModel",e.dictionaryitem.name),m.R7$(),m.Y8G("ngForOf",e.getMessages("name")),m.R7$(),m.Y8G("ngClass",m.eq3(9,Xt,e.getMessages("sysdomaindefinition_id").length>0)),m.R7$(5),m.R50("ngModel",e.dictionaryitem.sysdomaindefinition_id),m.R7$(),m.Y8G("ngForOf",e.domains),m.R7$(),m.Y8G("ngForOf",e.getMessages("sysdomaindefinition_id"))}}function Ut(e,t){if(1&e&&m.nrm(0,"system-select-option",35),2&e){const e=t.$implicit;m.Y8G("value",e.id)("display",e.name)}}function Ht(e,t){if(1&e&&(m.j41(0,"div",34),m.EFF(1),m.k0s()),2&e){const e=t.$implicit;m.R7$(),m.JRh(e.message)}}function zt(e,t){if(1&e){const e=m.RV6();m.j41(0,"div",36)(1,"label",8)(2,"abbr",9),m.EFF(3,"* "),m.k0s(),m.nrm(4,"system-label",37),m.k0s(),m.j41(5,"system-select",32),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.dictionaryitem.sysdictionary_ref_id,t)||(s.dictionaryitem.sysdictionary_ref_id=t),m.Njj(t)})),m.DNE(6,Ut,1,2,"system-select-option",33),m.k0s(),m.DNE(7,Ht,2,1,"div",29),m.k0s()}if(2&e){const e=m.XpG();m.Y8G("ngClass",m.eq3(4,Xt,e.getMessages("sysdictionary_ref_id").length>0)),m.R7$(5),m.R50("ngModel",e.dictionaryitem.sysdictionary_ref_id),m.R7$(),m.Y8G("ngForOf",e.templates),m.R7$(),m.Y8G("ngForOf",e.getMessages("sysdictionary_ref_id"))}}function qt(e,t){1&e&&(m.j41(0,"option",38),m.nrm(1,"system-label",39),m.k0s())}let Pt=(()=>{class DictionaryManagerAddItemModal{constructor(e,t,s,i,n){this.dictionarymanager=e,this.backend=t,this.modal=s,this.metadata=i,this.modelutilities=n,this.domains=[],this.templates=[],this.itemtype="i",this.messages=[]}ngOnInit(){this.dictionaryitem={id:this.modelutilities.generateGuid(),sysdictionarydefinition_id:this.dictionarymanager.currentDictionaryDefinition,name:"",non_db:0,exclude_from_audited:0,default_value:"",required:0,scope:this.dictionarymanager.currentDictionaryScope,status:"d",sequence:this.dictionarymanager.dictionaryitems.filter((e=>e.sysdictionarydefinition_id==this.dictionarymanager.currentDictionaryDefinition)).length};for(let e of this.dictionarymanager.domaindefinitions)e.name&&this.domains.push({id:e.id,name:e.name});this.domains.sort(((e,t)=>e.name.localeCompare(t.name)>0?1:-1));for(let e of this.dictionarymanager.dictionarydefinitions)"template"==e.sysdictionary_type&&this.templates.push({id:e.id,name:e.name});this.templates.sort(((e,t)=>e.name.localeCompare(t.name)>0?1:-1)),"g"==this.dictionaryitem.scope&&"all"!=this.dictionarymanager.changescope&&(this.dictionaryitem.scope="c"),this.currentType=this.dictionarymanager.dictionarydefinitions.find((e=>e.id==this.dictionarymanager.currentDictionaryDefinition)).sysdictionary_type}close(){this.self.destroy()}getMessages(e){return this.messages.filter((t=>t.field==e))}get canSave(){return this.messages=[],"i"!=this.itemtype||this.dictionaryitem.name||this.messages.push({field:"name",message:"please specifiy the name"}),"i"!=this.itemtype||this.dictionaryitem.sysdomaindefinition_id||this.messages.push({field:"sysdomaindefinition_id",message:"please select a domain"}),"i"==this.itemtype&&this.dictionaryitem.name&&this.dictionarymanager.dictionaryitems.find((e=>e.name==this.dictionaryitem.name&&e.sysdictionarydefinition_id==this.dictionarymanager.currentDictionaryDefinition))&&this.messages.push({field:"name",message:"name already used"}),this.dictionaryitem.name&&this.dictionarymanager.reservedwords&&this.dictionarymanager.reservedwords.indexOf(this.dictionaryitem.name.toUpperCase())>=0&&this.messages.push({field:"name",message:"name cannot be used (reserved word)"}),"t"!=this.itemtype||this.dictionaryitem.sysdictionary_ref_id||this.messages.push({field:"sysdictionary_ref_id",message:"no ref id defined"}),"t"==this.itemtype&&this.dictionaryitem.sysdictionary_ref_id&&this.dictionarymanager.dictionaryitems.find((e=>e.sysdictionary_ref_id==this.dictionaryitem.sysdictionary_ref_id&&e.sysdictionarydefinition_id==this.dictionarymanager.currentDictionaryDefinition))&&this.messages.push({field:"sysdictionary_ref_id",message:"ref id already used in dictionary definition"}),0==this.messages.length}save(){if(this.canSave){"i"==this.itemtype?this.dictionaryitem.sysdictionary_ref_id=null:(this.dictionaryitem.name=this.templates.find((e=>e.id==this.dictionaryitem.sysdictionary_ref_id)).name,this.dictionaryitem.sysdomaindefinition_id=null),this.dictionaryitem.id=this.modelutilities.generateGuid(),this.dictionaryitem.sysdictionarydefinition_id=this.dictionarymanager.currentDictionaryDefinition;let e=this.modal.await("LBL_SAVING");this.backend.postRequest(`dictionary/item/${this.dictionaryitem.id}`,{},this.dictionaryitem).subscribe({next:t=>{this.dictionarymanager.dictionaryitems.push(this.dictionaryitem),e.emit(!0),this.close()},error:()=>{e.emit(!0)}})}}static#e=this.ɵfac=function(e){return new(e||DictionaryManagerAddItemModal)(m.rXU(j),m.rXU(p.H),m.rXU(R.y),m.rXU(f.yu),m.rXU(y.g))};static#t=this.ɵcmp=m.VBU({type:DictionaryManagerAddItemModal,selectors:[["ng-component"]],decls:37,vars:11,consts:[[3,"close"],["label","LBL_ADD_DICTIONARY_ITEM"],["name","select","value","i",3,"ngModel","ngModelChange"],["name","select","value","t",3,"disabled","ngModel","ngModelChange"],["class","slds-grid",4,"ngIf"],["class","slds-form-element__control",3,"ngClass",4,"ngIf"],[1,"slds-grid"],[1,"slds-form-element__control","slds-size--1-of-2","slds-p-right--xxx-small"],[1,"slds-form-element__label"],[1,"slds-required"],["label","LBL_SCOPE"],[1,"slds-select_container"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],["value","g",4,"ngIf"],["value","c"],["label","LBL_CUSTOM"],[1,"slds-size--1-of-4","slds-p-horizontal--xxx-small","slds-form-element__control"],["label","LBL_PACKAGE"],[3,"ngModel","ngModelChange"],[1,"slds-size--1-of-4","slds-p-left--xxx-small","slds-form-element__control"],["label","LBL_VERSION"],["label","LBL_COMMENT"],["maxlength","150",3,"ngModel"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CLOSE"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_SAVE"],[1,"slds-form-element__control","slds-size--1-of-2","slds-p-right--xxx-small",3,"ngClass"],["label","LBL_NAME"],["class","slds-form-element__help",4,"ngFor","ngForOf"],[1,"slds-large-size--1-of-2","slds-p-left--xxx-small","slds-form-element__control",3,"ngClass"],["label","LBL_DOMAIN"],["system-select-id-only","",3,"ngModel","ngModelChange"],[3,"value","display",4,"ngFor","ngForOf"],[1,"slds-form-element__help"],[3,"value","display"],[1,"slds-form-element__control",3,"ngClass"],["label","LBL_TEMPLATE"],["value","g"],["label","LBL_GLOBAL"]],template:function(e,t){1&e&&(m.j41(0,"system-modal")(1,"system-modal-header",0),m.bIt("close",(function(){return t.close()})),m.nrm(2,"system-label",1),m.k0s(),m.j41(3,"system-modal-content")(4,"system-input-radio",2),m.mxI("ngModelChange",(function(e){return m.DH7(t.itemtype,e)||(t.itemtype=e),e})),m.EFF(5,"Item"),m.k0s(),m.j41(6,"system-input-radio",3),m.mxI("ngModelChange",(function(e){return m.DH7(t.itemtype,e)||(t.itemtype=e),e})),m.EFF(7,"template"),m.k0s(),m.DNE(8,Vt,16,11,"div",4)(9,zt,8,6,"div",5),m.j41(10,"div",6)(11,"div",7)(12,"label",8)(13,"abbr",9),m.EFF(14,"* "),m.k0s(),m.nrm(15,"system-label",10),m.k0s(),m.j41(16,"div",11)(17,"select",12),m.mxI("ngModelChange",(function(e){return m.DH7(t.dictionaryitem.scope,e)||(t.dictionaryitem.scope=e),e})),m.DNE(18,qt,2,0,"option",13),m.j41(19,"option",14),m.nrm(20,"system-label",15),m.k0s()()()(),m.j41(21,"div",16)(22,"label",8),m.nrm(23,"system-label",17),m.k0s(),m.j41(24,"system-input-text",18),m.mxI("ngModelChange",(function(e){return m.DH7(t.dictionaryitem.package,e)||(t.dictionaryitem.package=e),e})),m.k0s()(),m.j41(25,"div",19)(26,"label",8),m.nrm(27,"system-label",20),m.k0s(),m.j41(28,"system-input-text",18),m.mxI("ngModelChange",(function(e){return m.DH7(t.dictionaryitem.version,e)||(t.dictionaryitem.version=e),e})),m.k0s()()(),m.j41(29,"label",8),m.nrm(30,"system-label",21),m.k0s(),m.nrm(31,"system-input-text",22),m.k0s(),m.j41(32,"system-modal-footer")(33,"button",23),m.bIt("click",(function(){return t.close()})),m.nrm(34,"system-label",24),m.k0s(),m.j41(35,"button",25),m.bIt("click",(function(){return t.save()})),m.nrm(36,"system-label",26),m.k0s()()()),2&e&&(m.R7$(4),m.R50("ngModel",t.itemtype),m.R7$(2),m.Y8G("disabled","template"==t.currentType&&t.templates.length>0),m.R50("ngModel",t.itemtype),m.R7$(2),m.Y8G("ngIf","i"==t.itemtype),m.R7$(),m.Y8G("ngIf","t"==t.itemtype),m.R7$(8),m.Y8G("disabled","c"==t.dictionarymanager.currentDictionaryScope),m.R50("ngModel",t.dictionaryitem.scope),m.R7$(),m.Y8G("ngIf","all"==t.dictionarymanager.changescope),m.R7$(6),m.R50("ngModel",t.dictionaryitem.package),m.R7$(4),m.R50("ngModel",t.dictionaryitem.version),m.R7$(3),m.Y8G("ngModel",t.dictionaryitem.description))},dependencies:[i.YU,i.Sq,i.bT,n.xH,n.y7,n.wz,n.BC,n.tU,n.vS,D.H,at.J,x.W,qe.D,Pe.I,Je.Q,We.C,dt.i,rt.t],encapsulation:2})}return DictionaryManagerAddItemModal})();function Jt(e,t){if(1&e&&(m.j41(0,"option",35),m.EFF(1),m.k0s()),2&e){const e=t.$implicit;m.Y8G("value",e.id),m.R7$(),m.JRh(e.name)}}function Wt(e,t){if(1&e&&(m.j41(0,"option",35),m.EFF(1),m.k0s()),2&e){const e=t.$implicit;m.Y8G("value",e.id),m.R7$(),m.JRh(e.name)}}function Kt(e,t){if(1&e){const e=m.RV6();m.j41(0,"tr",36)(1,"td")(2,"div",26),m.nrm(3,"input",9),m.k0s()(),m.j41(4,"td")(5,"div",26),m.nrm(6,"input",9),m.k0s()(),m.j41(7,"td")(8,"div",26)(9,"input",37),m.mxI("ngModelChange",(function(t){const s=m.eBV(e).$implicit;return m.DH7(s.relationship_name,t)||(s.relationship_name=t),m.Njj(t)})),m.k0s()()(),m.j41(10,"td"),m.nrm(11,"system-utility-icon",38),m.k0s(),m.j41(12,"td")(13,"button",39),m.nrm(14,"system-button-icon",40),m.k0s()()()}if(2&e){const e=t.$implicit,s=m.XpG();m.R7$(3),m.Y8G("ngModel",s.dictionarymanager.getDictionaryDefinitionName(e.lhs_sysdictionarydefinition_id)),m.R7$(3),m.Y8G("ngModel",s.dictionarymanager.getDictionaryItemName(e.lhs_sysdictionaryitem_id)),m.R7$(3),m.R50("ngModel",e.relationship_name),m.R7$(2),m.Y8G("icon","g"==e.scope?"world":"people")}}let Qt=(()=>{class DictionaryManagerRelationshipContainerOneToManyPolymorph{constructor(e,t,s,i,n,l,o){this.dictionarymanager=e,this.backend=t,this.metadata=s,this.language=i,this.modal=n,this.injector=l,this.modelutilities=o,this.rhs_items=[],this.relationshipPolymorphs=[],this.readonly=!1}ngOnInit(){this.loadItems()}get relatedIds(){return[]}addRelated(){this.modal.openModal("DictionaryManagerRelationshipContainerOneToManyPolymorphAddRelated",!0,this.injector).subscribe({next:e=>{e.instance.relationship_id=this.relationship.id,e.instance.relationshipscope=this.relationship.scope,e.instance.newrelated.subscribe({next:e=>{let t=this.dictionarymanager.dictionarydefinitions.find((e=>e.id==this.relationship.rhs_sysdictionarydefinition_id)),s=this.dictionarymanager.dictionarydefinitions.find((t=>t.id==e.lhs_sysdictionarydefinition_id));e.relationship_name=s.tablename+"_"+t.tablename,this.relationshipPolymorphs.push(e)}})}})}loadItems(){this.rhs_items=this.dictionarymanager.getDictionaryDefinitionItems(this.relationship.rhs_sysdictionarydefinition_id)}static#e=this.ɵfac=function(e){return new(e||DictionaryManagerRelationshipContainerOneToManyPolymorph)(m.rXU(j),m.rXU(p.H),m.rXU(f.yu),m.rXU(b.B),m.rXU(R.y),m.rXU(m.zZn),m.rXU(y.g))};static#t=this.ɵcmp=m.VBU({type:DictionaryManagerRelationshipContainerOneToManyPolymorph,selectors:[["dictionary-manager-relationship-container-onetomanypolymorph"]],inputs:{relationship:"relationship",relationshipPolymorphs:"relationshipPolymorphs",readonly:"readonly"},decls:68,vars:18,consts:[[1,"slds-p-around--xx-small"],[1,"slds-grid"],[1,"slds-size--1-of-2","slds-p-right--xx-small","slds-form-element"],[1,"slds-form-element__label"],["label","LBL_NAME"],[1,"slds-form-element__control"],[1,"slds-input",3,"disabled","ngModel","ngModelChange"],[1,"slds-size--1-of-2","slds-p-horizontal--xx-small","slds-form-element"],["label","LBL_RHS_DICTIONARYDEFINITION"],["disabled","",1,"slds-input",3,"ngModel"],[1,"slds-size--1-of-2","slds-p-left--xx-small","slds-form-element"],["label","LBL_RHS_SYSDICTIONARYITEM_ID"],[1,"slds-select_container"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["label","LBL_LHS_SYSDICTIONARYITEM_TYPE"],["label","LBL_RHS_LINKNAME"],["label","LBL_RHS_LINKLABEL"],[3,"disabled","ngModel","ngModelChange"],["label","LBL_LHS_LINKNAME"],["label","LBL_LHS_LINKLABEL"],[1,"slds-p-vertical--x-small"],[1,"slds-box--border"],[1,"slds-table","slds-table--fixed-layout","slds-table_bordered","slds-no-row-hover"],[1,"slds-line-height_reset"],["scope","col",1,""],[1,"slds-truncate"],["label","LBL_MODULE"],["label","LBL_DICTIONARYITEM"],["label","LBL_RELATIONSHIP_NAME"],["scope","col",2,"width","2rem"],["class","slds-hint-parent",4,"ngFor","ngForOf"],[1,"slds-size--1-of-1","slds-p-around--x-small","slds-align--absolute-center"],[1,"slds-button","slds-button--icon",3,"click"],["icon","new"],[3,"value"],[1,"slds-hint-parent"],[1,"slds-input",3,"ngModel","ngModelChange"],["size","xx-small",1,"slds-p-right--xx-small",3,"icon"],[1,"slds-button","slds-button--icon"],["icon","delete"]],template:function(e,t){1&e&&(m.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"label",3),m.nrm(4,"system-label",4),m.k0s(),m.j41(5,"div",5)(6,"input",6),m.mxI("ngModelChange",(function(e){return m.DH7(t.relationship.name,e)||(t.relationship.name=e),e})),m.k0s()()(),m.j41(7,"div",7)(8,"label",3),m.nrm(9,"system-label",8),m.k0s(),m.j41(10,"div",5),m.nrm(11,"input",9),m.k0s()()(),m.j41(12,"div",1)(13,"div",10)(14,"label",3),m.nrm(15,"system-label",11),m.k0s(),m.j41(16,"div",12)(17,"select",13),m.mxI("ngModelChange",(function(e){return m.DH7(t.relationship.rhs_sysdictionaryitem_id,e)||(t.relationship.rhs_sysdictionaryitem_id=e),e})),m.DNE(18,Jt,2,2,"option",14),m.k0s()()(),m.j41(19,"div",10)(20,"label",3),m.nrm(21,"system-label",15),m.k0s(),m.j41(22,"div",12)(23,"select",13),m.mxI("ngModelChange",(function(e){return m.DH7(t.relationship.relationship_role_column,e)||(t.relationship.relationship_role_column=e),e})),m.DNE(24,Wt,2,2,"option",14),m.k0s()()()(),m.j41(25,"div",1)(26,"div",2)(27,"label",3),m.nrm(28,"system-label",16),m.k0s(),m.j41(29,"div",5)(30,"input",6),m.mxI("ngModelChange",(function(e){return m.DH7(t.relationship.rhs_linkname,e)||(t.relationship.rhs_linkname=e),e})),m.k0s()()(),m.j41(31,"div",2)(32,"label",3),m.nrm(33,"system-label",17),m.k0s(),m.j41(34,"div",5)(35,"system-input-label",18),m.mxI("ngModelChange",(function(e){return m.DH7(t.relationship.rhs_linklabel,e)||(t.relationship.rhs_linklabel=e),e})),m.k0s()()()(),m.j41(36,"div",1)(37,"div",2)(38,"label",3),m.nrm(39,"system-label",19),m.k0s(),m.j41(40,"div",5)(41,"input",6),m.mxI("ngModelChange",(function(e){return m.DH7(t.relationship.lhs_linkname,e)||(t.relationship.lhs_linkname=e),e})),m.k0s()()(),m.j41(42,"div",2)(43,"label",3),m.nrm(44,"system-label",20),m.k0s(),m.j41(45,"div",5)(46,"system-input-label",18),m.mxI("ngModelChange",(function(e){return m.DH7(t.relationship.lhs_linklabel,e)||(t.relationship.lhs_linklabel=e),e})),m.k0s()()()(),m.j41(47,"div",21)(48,"div",22)(49,"table",23)(50,"thead")(51,"tr",24)(52,"th",25)(53,"div",26),m.nrm(54,"system-label",27),m.k0s()(),m.j41(55,"th",25)(56,"div",26),m.nrm(57,"system-label",28),m.k0s()(),m.j41(58,"th",25)(59,"div",26),m.nrm(60,"system-label",29),m.k0s()(),m.nrm(61,"th",30)(62,"th",30),m.k0s()(),m.j41(63,"tbody"),m.DNE(64,Kt,15,4,"tr",31),m.k0s()(),m.j41(65,"div",32)(66,"button",33),m.bIt("click",(function(){return t.addRelated()})),m.nrm(67,"system-button-icon",34),m.k0s()()()()()),2&e&&(m.R7$(6),m.Y8G("disabled",t.readonly),m.R50("ngModel",t.relationship.name),m.R7$(5),m.Y8G("ngModel",t.dictionarymanager.getDictionaryDefinitionName(t.relationship.rhs_sysdictionarydefinition_id)),m.R7$(6),m.Y8G("disabled",t.readonly),m.R50("ngModel",t.relationship.rhs_sysdictionaryitem_id),m.R7$(),m.Y8G("ngForOf",t.rhs_items),m.R7$(5),m.Y8G("disabled",t.readonly),m.R50("ngModel",t.relationship.relationship_role_column),m.R7$(),m.Y8G("ngForOf",t.rhs_items),m.R7$(6),m.Y8G("disabled",t.readonly),m.R50("ngModel",t.relationship.rhs_linkname),m.R7$(5),m.Y8G("disabled",t.readonly),m.R50("ngModel",t.relationship.rhs_linklabel),m.R7$(6),m.Y8G("disabled",t.readonly),m.R50("ngModel",t.relationship.lhs_linkname),m.R7$(5),m.Y8G("disabled",t.readonly),m.R50("ngModel",t.relationship.lhs_linklabel),m.R7$(18),m.Y8G("ngForOf",t.relationshipPolymorphs))},dependencies:[i.Sq,n.xH,n.y7,n.me,n.wz,n.BC,n.vS,L.t,ze.w,x.W,u.B],encapsulation:2})}return DictionaryManagerRelationshipContainerOneToManyPolymorph})();function Zt(e,t){if(1&e&&(m.j41(0,"option",25),m.EFF(1),m.k0s()),2&e){const e=t.$implicit;m.Y8G("value",e.id),m.R7$(),m.JRh(e.name)}}function es(e,t){if(1&e&&(m.j41(0,"option",25),m.EFF(1),m.k0s()),2&e){const e=t.$implicit;m.Y8G("value",e.id),m.R7$(),m.JRh(e.name)}}let ts=(()=>{class DictionaryManagerRelationshipContainerOneToMany{constructor(e,t,s,i,n,l){this.dictionarymanager=e,this.metadata=t,this.language=s,this.modal=i,this.injector=n,this.modelutilities=l,this.lhs_items=[],this.rhs_items=[],this.relationshiprelatefields=[],this.readonly=!1,this.relatedIds=[]}ngOnInit(){this.loadItems(),this.loadRelationshipFields()}loadItems(){this.lhs_items=this.dictionarymanager.getDictionaryDefinitionItems(this.relationship.lhs_sysdictionarydefinition_id),this.rhs_items=this.dictionarymanager.getDictionaryDefinitionItems(this.relationship.rhs_sysdictionarydefinition_id)}loadRelationshipFields(){this.relationshiprelatefields=this.dictionarymanager.dictionaryrelationshiprelatefields.filter((e=>e.relationship_id==this.relationship.id))}static#e=this.ɵfac=function(e){return new(e||DictionaryManagerRelationshipContainerOneToMany)(m.rXU(j),m.rXU(f.yu),m.rXU(b.B),m.rXU(R.y),m.rXU(m.zZn),m.rXU(y.g))};static#t=this.ɵcmp=m.VBU({type:DictionaryManagerRelationshipContainerOneToMany,selectors:[["dictionary-manager-relationship-container-onetomany"]],inputs:{relationship:"relationship",readonly:"readonly"},decls:72,vars:24,consts:[[1,"slds-p-around--xx-small"],[1,"slds-grid"],[1,"slds-size--1-of-2","slds-p-right--xx-small","slds-form-element"],[1,"slds-form-element__label"],["label","LBL_NAME"],[1,"slds-form-element__control"],[1,"slds-input",3,"disabled","ngModel","ngModelChange"],[1,"slds-size--1-of-2","slds-p-left--xx-small","slds-form-element"],["label","LBL_RELATIONSHIP_NAME"],["label","LBL_LHS_DICTIONARYDEFINITION"],["disabled","",1,"slds-input",3,"ngModel"],["label","LBL_RHS_DICTIONARYDEFINITION"],["label","LBL_LHS_SYSDICTIONARYITEM"],[1,"slds-select_container"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["label","LBL_RHS_SYSDICTIONARYITEM"],["label","LBL_LHS_LINKNAME"],["label","LBL_RHS_LINKNAME"],["label","LBL_LHS_LINKLABEL"],[3,"disabled","ngModel","ngModelChange"],["label","LBL_RHS_LINKLABEL"],[1,"slds-size--1-of-2"],["label","LBL_RHS_RELATENAME"],["label","LBL_RHS_RELATELABEL"],[3,"value"]],template:function(e,t){1&e&&(m.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"label",3),m.nrm(4,"system-label",4),m.k0s(),m.j41(5,"div",5)(6,"input",6),m.mxI("ngModelChange",(function(e){return m.DH7(t.relationship.name,e)||(t.relationship.name=e),e})),m.k0s()()(),m.j41(7,"div",7)(8,"label",3),m.nrm(9,"system-label",8),m.k0s(),m.j41(10,"div",5)(11,"input",6),m.mxI("ngModelChange",(function(e){return m.DH7(t.relationship.relationship_name,e)||(t.relationship.relationship_name=e),e})),m.k0s()()()(),m.j41(12,"div",1)(13,"div",2)(14,"label",3),m.nrm(15,"system-label",9),m.k0s(),m.j41(16,"div",5),m.nrm(17,"input",10),m.k0s()(),m.j41(18,"div",7)(19,"label",3),m.nrm(20,"system-label",11),m.k0s(),m.j41(21,"div",5),m.nrm(22,"input",10),m.k0s()()(),m.j41(23,"div",1)(24,"div",2)(25,"label",3),m.nrm(26,"system-label",12),m.k0s(),m.j41(27,"div",13)(28,"select",14),m.mxI("ngModelChange",(function(e){return m.DH7(t.relationship.lhs_sysdictionaryitem_id,e)||(t.relationship.lhs_sysdictionaryitem_id=e),e})),m.DNE(29,Zt,2,2,"option",15),m.k0s()()(),m.j41(30,"div",7)(31,"label",3),m.nrm(32,"system-label",16),m.k0s(),m.j41(33,"div",13)(34,"select",14),m.mxI("ngModelChange",(function(e){return m.DH7(t.relationship.rhs_sysdictionaryitem_id,e)||(t.relationship.rhs_sysdictionaryitem_id=e),e})),m.DNE(35,es,2,2,"option",15),m.k0s()()()(),m.j41(36,"div",1)(37,"div",2)(38,"label",3),m.nrm(39,"system-label",17),m.k0s(),m.j41(40,"div",5)(41,"input",6),m.mxI("ngModelChange",(function(e){return m.DH7(t.relationship.lhs_linkname,e)||(t.relationship.lhs_linkname=e),e})),m.k0s()()(),m.j41(42,"div",7)(43,"label",3),m.nrm(44,"system-label",18),m.k0s(),m.j41(45,"div",5)(46,"input",6),m.mxI("ngModelChange",(function(e){return m.DH7(t.relationship.rhs_linkname,e)||(t.relationship.rhs_linkname=e),e})),m.k0s()()()(),m.j41(47,"div",1)(48,"div",2)(49,"label",3),m.nrm(50,"system-label",19),m.k0s(),m.j41(51,"div",5)(52,"system-input-label",20),m.mxI("ngModelChange",(function(e){return m.DH7(t.relationship.lhs_linklabel,e)||(t.relationship.lhs_linklabel=e),e})),m.k0s()()(),m.j41(53,"div",7)(54,"label",3),m.nrm(55,"system-label",21),m.k0s(),m.j41(56,"div",5)(57,"system-input-label",20),m.mxI("ngModelChange",(function(e){return m.DH7(t.relationship.rhs_linklabel,e)||(t.relationship.rhs_linklabel=e),e})),m.k0s()()()(),m.j41(58,"div",1),m.nrm(59,"div",22),m.j41(60,"div",22)(61,"label",3),m.nrm(62,"system-label",23),m.k0s(),m.j41(63,"div",5)(64,"input",6),m.mxI("ngModelChange",(function(e){return m.DH7(t.relationship.rhs_relatename,e)||(t.relationship.rhs_relatename=e),e})),m.k0s()()()(),m.j41(65,"div",1),m.nrm(66,"div",22),m.j41(67,"div",22)(68,"label",3),m.nrm(69,"system-label",24),m.k0s(),m.j41(70,"div",5)(71,"system-input-label",20),m.mxI("ngModelChange",(function(e){return m.DH7(t.relationship.rhs_relatelabel,e)||(t.relationship.rhs_relatelabel=e),e})),m.k0s()()()()()),2&e&&(m.R7$(6),m.Y8G("disabled",t.readonly),m.R50("ngModel",t.relationship.name),m.R7$(5),m.Y8G("disabled",t.readonly),m.R50("ngModel",t.relationship.relationship_name),m.R7$(6),m.Y8G("ngModel",t.dictionarymanager.getDictionaryDefinitionName(t.relationship.lhs_sysdictionarydefinition_id)),m.R7$(5),m.Y8G("ngModel",t.dictionarymanager.getDictionaryDefinitionName(t.relationship.rhs_sysdictionarydefinition_id)),m.R7$(6),m.Y8G("disabled",t.readonly),m.R50("ngModel",t.relationship.lhs_sysdictionaryitem_id),m.R7$(),m.Y8G("ngForOf",t.lhs_items),m.R7$(5),m.Y8G("disabled",t.readonly),m.R50("ngModel",t.relationship.rhs_sysdictionaryitem_id),m.R7$(),m.Y8G("ngForOf",t.rhs_items),m.R7$(6),m.Y8G("disabled",t.readonly),m.R50("ngModel",t.relationship.lhs_linkname),m.R7$(5),m.Y8G("disabled",t.readonly),m.R50("ngModel",t.relationship.rhs_linkname),m.R7$(6),m.Y8G("disabled",t.readonly),m.R50("ngModel",t.relationship.lhs_linklabel),m.R7$(5),m.Y8G("disabled",t.readonly),m.R50("ngModel",t.relationship.rhs_linklabel),m.R7$(7),m.Y8G("disabled",t.readonly),m.R50("ngModel",t.relationship.rhs_relatename),m.R7$(7),m.Y8G("disabled",t.readonly),m.R50("ngModel",t.relationship.rhs_relatelabel))},dependencies:[i.Sq,n.xH,n.y7,n.me,n.wz,n.BC,n.vS,ze.w,x.W],encapsulation:2})}return DictionaryManagerRelationshipContainerOneToMany})();function ss(e,t){if(1&e&&(m.j41(0,"option",15),m.EFF(1),m.k0s()),2&e){const e=t.$implicit;m.Y8G("value",e.id),m.R7$(),m.JRh(e.name)}}let is=(()=>{class DictionaryManagerRelationshipContainerEmailAddress{constructor(e,t,s,i,n,l){this.dictionarymanager=e,this.metadata=t,this.language=s,this.modal=i,this.injector=n,this.modelutilities=l,this.lhs_items=[],this.readonly=!1}ngOnInit(){this.loadItems()}loadItems(){this.lhs_items=this.dictionarymanager.getDictionaryDefinitionItems(this.relationship.lhs_sysdictionarydefinition_id)}static#e=this.ɵfac=function(e){return new(e||DictionaryManagerRelationshipContainerEmailAddress)(m.rXU(j),m.rXU(f.yu),m.rXU(b.B),m.rXU(R.y),m.rXU(m.zZn),m.rXU(y.g))};static#t=this.ɵcmp=m.VBU({type:DictionaryManagerRelationshipContainerEmailAddress,selectors:[["dictionary-manager-relationship-container-emailaddress"]],inputs:{relationship:"relationship",readonly:"readonly"},decls:24,vars:8,consts:[[1,"slds-p-around--xx-small"],[1,"slds-grid"],[1,"slds-size--1-of-2","slds-p-right--xx-small","slds-form-element"],[1,"slds-form-element__label"],["label","LBL_NAME"],[1,"slds-form-element__control"],[1,"slds-input",3,"disabled","ngModel","ngModelChange"],[1,"slds-size--1-of-2","slds-p-left--xx-small","slds-form-element"],["label","LBL_RELATIONSHIP_NAME"],["label","LBL_LHS_DICTIONARYDEFINITION"],["disabled","",1,"slds-input",3,"ngModel"],["label","LBL_LHS_SYSDICTIONARYITEM"],[1,"slds-select_container"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){1&e&&(m.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"label",3),m.nrm(4,"system-label",4),m.k0s(),m.j41(5,"div",5)(6,"input",6),m.mxI("ngModelChange",(function(e){return m.DH7(t.relationship.name,e)||(t.relationship.name=e),e})),m.k0s()()(),m.j41(7,"div",7)(8,"label",3),m.nrm(9,"system-label",8),m.k0s(),m.j41(10,"div",5)(11,"input",6),m.mxI("ngModelChange",(function(e){return m.DH7(t.relationship.relationship_name,e)||(t.relationship.relationship_name=e),e})),m.k0s()()()(),m.j41(12,"div",1)(13,"div",7)(14,"label",3),m.nrm(15,"system-label",9),m.k0s(),m.j41(16,"div",5),m.nrm(17,"input",10),m.k0s()(),m.j41(18,"div",7)(19,"label",3),m.nrm(20,"system-label",11),m.k0s(),m.j41(21,"div",12)(22,"select",13),m.mxI("ngModelChange",(function(e){return m.DH7(t.relationship.lhs_sysdictionaryitem_id,e)||(t.relationship.lhs_sysdictionaryitem_id=e),e})),m.DNE(23,ss,2,2,"option",14),m.k0s()()()()()),2&e&&(m.R7$(6),m.Y8G("disabled",t.readonly),m.R50("ngModel",t.relationship.name),m.R7$(5),m.Y8G("disabled",t.readonly),m.R50("ngModel",t.relationship.relationship_name),m.R7$(6),m.Y8G("ngModel",t.dictionarymanager.getDictionaryDefinitionName(t.relationship.lhs_sysdictionarydefinition_id)),m.R7$(5),m.Y8G("disabled",t.readonly),m.R50("ngModel",t.relationship.lhs_sysdictionaryitem_id),m.R7$(),m.Y8G("ngForOf",t.lhs_items))},dependencies:[i.Sq,n.xH,n.y7,n.me,n.wz,n.BC,n.vS,x.W],encapsulation:2})}return DictionaryManagerRelationshipContainerEmailAddress})();var ns=s(2187);function ls(e,t){if(1&e&&(m.j41(0,"option",27),m.EFF(1),m.k0s()),2&e){const e=t.$implicit;m.Y8G("value",e.id),m.R7$(),m.JRh(e.name)}}function os(e,t){if(1&e&&(m.j41(0,"option",27),m.EFF(1),m.k0s()),2&e){const e=t.$implicit;m.Y8G("value",e.id),m.R7$(),m.JRh(e.name)}}function as(e,t){if(1&e&&(m.j41(0,"option",27),m.EFF(1),m.k0s()),2&e){const e=t.$implicit;m.Y8G("value",e.id),m.R7$(),m.JRh(e.name)}}function ds(e,t){if(1&e&&(m.j41(0,"option",27),m.EFF(1),m.k0s()),2&e){const e=t.$implicit;m.Y8G("value",e.id),m.R7$(),m.JRh(e.name)}}function rs(e,t){if(1&e&&(m.j41(0,"option",27),m.EFF(1),m.k0s()),2&e){const e=t.$implicit;m.Y8G("value",e.id),m.R7$(),m.JRh(e.name)}}function cs(e,t){if(1&e&&(m.j41(0,"option",27),m.EFF(1),m.k0s()),2&e){const e=t.$implicit;m.Y8G("value",e.id),m.R7$(),m.JRh(e.name)}}function ms(e,t){if(1&e&&m.nrm(0,"input",44),2&e){const e=m.XpG().$implicit;m.Y8G("disabled",!0)("ngModel",e.name)}}function us(e,t){if(1&e&&(m.qex(0),m.DNE(1,ms,1,2,"input",43),m.bVm()),2&e){const e=t.$implicit,s=m.XpG().$implicit;m.R7$(),m.Y8G("ngIf",e.id==s.id)}}function gs(e,t){if(1&e){const e=m.RV6();m.j41(0,"div",33)(1,"div",34)(2,"div",35)(3,"label",3),m.nrm(4,"system-label",36),m.k0s(),m.j41(5,"div",5)(6,"input",6),m.mxI("ngModelChange",(function(t){const s=m.eBV(e).$implicit;return m.DH7(s.rightField.map_to_fieldname,t)||(s.rightField.map_to_fieldname=t),m.Njj(t)})),m.k0s()()(),m.j41(7,"div",37)(8,"label",3),m.nrm(9,"system-label",26),m.k0s(),m.j41(10,"div",5),m.DNE(11,us,2,1,"ng-container",38),m.k0s()(),m.j41(12,"div",35)(13,"label",3),m.nrm(14,"system-label",39),m.k0s(),m.j41(15,"div",5)(16,"input",6),m.mxI("ngModelChange",(function(t){const s=m.eBV(e).$implicit;return m.DH7(s.leftField.map_to_fieldname,t)||(s.leftField.map_to_fieldname=t),m.Njj(t)})),m.k0s()()()(),m.j41(17,"div",40)(18,"button",41),m.bIt("click",(function(){const t=m.eBV(e).$implicit,s=m.XpG();return m.Njj(s.deleteJoinTableFieldMapping(t.id))})),m.nrm(19,"system-button-icon",42),m.k0s()()()}if(2&e){const e=t.$implicit,s=m.XpG();m.R7$(6),m.Y8G("disabled",s.readonly),m.R50("ngModel",e.rightField.map_to_fieldname),m.R7$(5),m.Y8G("ngForOf",s.join_items),m.R7$(5),m.Y8G("disabled",s.readonly),m.R50("ngModel",e.leftField.map_to_fieldname),m.R7$(2),m.Y8G("disabled",s.readonly)}}function hs(e,t){if(1&e){const e=m.RV6();m.j41(0,"button",41),m.bIt("click",(function(){m.eBV(e);const t=m.XpG();return m.Njj(t.addNewJoinTableFieldMapping())})),m.nrm(1,"system-button-icon",45),m.k0s()}if(2&e){const e=m.XpG();m.Y8G("disabled",!e.join_sysdictionarydefinition_id)}}let ps=(()=>{class DictionaryManagerRelationshipContainerManyToMany{constructor(e,t,s,i,n,l){this.dictionarymanager=e,this.metadata=t,this.language=s,this.modal=i,this.injector=n,this.modelutilities=l,this.lhs_items=[],this.rhs_items=[],this.join_items=[],this.relationshipFields=[],this.relationshipFieldsPerItem=[],this.readonly=!1,this.relationsTables=[],this.getRelationshipTables()}get join_sysdictionarydefinition_id(){return this.relationship.join_sysdictionarydefinition_id}set join_sysdictionarydefinition_id(e){e!=this.relationship.join_sysdictionarydefinition_id&&(this.relationship.join_sysdictionarydefinition_id=e,this.relationship.join_rhs_sysdictionaryitem_id=null,this.relationship.join_lhs_sysdictionaryitem_id=null,this.loadJoinItems())}ngOnChanges(){this.buildRelationshipFieldsPerItem()}ngOnInit(){this.loadItems(),this.loadJoinItems()}getRelationshipTables(){this.relationsTables=this.dictionarymanager.dictionarydefinitions.filter((e=>"relationship"==e.sysdictionary_type||"metadata"==e.sysdictionary_type)).sort(((e,t)=>e.name.localeCompare(t.name)))}buildRelationshipFieldsPerItem(){if(!this.relationship||0==this.relationshipFields.length)return;const e={};this.relationshipFields.forEach((t=>{1!=t.deleted&&(e[t.sysdictionaryitem_id]||(e[t.sysdictionaryitem_id]={id:t.sysdictionaryitem_id}),t.sysdictionarydefinition_id==this.relationship.lhs_sysdictionarydefinition_id?e[t.sysdictionaryitem_id].leftField=t:e[t.sysdictionaryitem_id].rightField=t)})),this.relationshipFieldsPerItem=Object.values(e),this.relationshipFieldsPerItem.forEach((e=>{e.leftField||(e.leftField=this.generateRelationshipField(e.id,this.relationship.lhs_sysdictionarydefinition_id),this.relationshipFields.push(e.leftField)),e.rightField||(e.rightField=this.generateRelationshipField(e.id,this.relationship.rhs_sysdictionarydefinition_id),this.relationshipFields.push(e.rightField))}))}loadJoinItems(){this.relationship.join_sysdictionarydefinition_id?this.join_items=this.dictionarymanager.getDictionaryDefinitionItems(this.relationship.join_sysdictionarydefinition_id):this.join_items=[]}loadItems(){this.lhs_items=this.dictionarymanager.getDictionaryDefinitionItems(this.relationship.lhs_sysdictionarydefinition_id),this.rhs_items=this.dictionarymanager.getDictionaryDefinitionItems(this.relationship.rhs_sysdictionarydefinition_id)}addNewJoinTableFieldMapping(){const e=this.join_items.filter((e=>!["id","deleted"].some((t=>t==e.name))&&this.relationship.join_lhs_sysdictionaryitem_id!=e.id&&this.relationship.join_rhs_sysdictionaryitem_id!=e.id&&!this.relationshipFieldsPerItem.some((t=>t.id==e.id)))).map((e=>({value:e.id,display:e.name})));this.modal.prompt("input","LBL_MAKE_SELECTION","LBL_DICTIONARY_ITEM","default",void 0,e).subscribe((e=>{if(!e)return;const t=this.generateRelationshipField(e,this.relationship.lhs_sysdictionarydefinition_id),s=this.generateRelationshipField(e,this.relationship.rhs_sysdictionarydefinition_id);this.relationshipFields.push(t,s),this.relationshipFieldsPerItem.push({id:e,leftField:t,rightField:s})}))}deleteJoinTableFieldMapping(e){this.relationshipFields.forEach(((t,s)=>{if(t.sysdictionaryitem_id!=e)return!1;t.isNew?this.relationshipFields.splice(s,1):t.deleted=1})),this.relationshipFieldsPerItem=this.relationshipFieldsPerItem.filter((t=>t.id!=e))}generateRelationshipField(e,t){return{sysdictionarydefinition_id:t,id:this.modelutilities.generateGuid(),scope:this.relationship.scope,status:"d",sysdictionaryrelationship_id:this.relationship.id,map_to_fieldname:"",sysdictionaryitem_id:e,deleted:0,isNew:!0}}static#e=this.ɵfac=function(e){return new(e||DictionaryManagerRelationshipContainerManyToMany)(m.rXU(j),m.rXU(f.yu),m.rXU(b.B),m.rXU(R.y),m.rXU(m.zZn),m.rXU(y.g))};static#t=this.ɵcmp=m.VBU({type:DictionaryManagerRelationshipContainerManyToMany,selectors:[["dictionary-manager-relationship-container-manytomany"]],inputs:{relationship:"relationship",relationshipFields:"relationshipFields",readonly:"readonly"},features:[m.OA$],decls:95,vars:37,consts:[[1,"slds-p-around--xx-small"],[1,"slds-grid"],[1,"slds-size--1-of-2","slds-p-right--xx-small","slds-form-element"],[1,"slds-form-element__label"],["label","LBL_NAME"],[1,"slds-form-element__control"],[1,"slds-input",3,"disabled","ngModel","ngModelChange"],[1,"slds-size--1-of-2","slds-p-left--xx-small","slds-form-element"],["label","LBL_RELATIONSHIP_NAME"],["label","LBL_LHS_DICTIONARYDEFINITION"],["disabled","",1,"slds-input",3,"ngModel"],["label","LBL_RHS_DICTIONARYDEFINITION"],["label","LBL_LHS_SYSDICTIONARYITEM"],[1,"slds-select_container"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["label","LBL_RHS_SYSDICTIONARYITEM"],["label","LBL_LHS_LINKNAME"],["label","LBL_RHS_LINKNAME"],["label","LBL_LHS_LINKLABEL"],[3,"disabled","ngModel","ngModelChange"],["label","LBL_RHS_LINKLABEL"],[1,"slds-size--1-of-1","slds-p-right--xx-small","slds-form-element"],["label","LBL_JOIN_DICTIONARYDEFINITION_ID"],["label","LBL_JOIN_LHS_SYSDICTIONARYITEM"],["label","LBL_JOIN_RHS_SYSDICTIONARYITEM"],["label","LBL_RELATIONSHIP_ROLE_COLUMN"],[3,"value"],["label","LBL_RELATIONSHIP_ROLE_COLUMN_VALUE"],["tabtitle","LBL_JOIN_TABLE_ROLE_FIELDS_MAPPING",3,"expanded"],["class","slds-grid slds-grid--vertical-align-end",4,"ngFor","ngForOf"],[1,"slds-align--absolute-center","slds-p-around--small"],["class","slds-button slds-button--icon",3,"disabled","click",4,"ngIf"],[1,"slds-grid","slds-grid--vertical-align-end"],[1,"slds-grid","slds-grow"],[1,"slds-size--1-of-3","slds-p-left--xx-small","slds-form-element"],["label","LBL_MAP_TO_FIELD_NAME_LEFT"],[1,"slds-size--1-of-3","slds-p-horizontal--xx-small","slds-form-element"],[4,"ngFor","ngForOf"],["label","LBL_MAP_TO_FIELD_NAME_RIGHT"],[1,"slds-p-bottom--x-small","slds-p-horizontal--small"],[1,"slds-button","slds-button--icon",3,"disabled","click"],["icon","delete"],["class","slds-input",3,"disabled","ngModel",4,"ngIf"],[1,"slds-input",3,"disabled","ngModel"],["icon","add"]],template:function(e,t){1&e&&(m.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"label",3),m.nrm(4,"system-label",4),m.k0s(),m.j41(5,"div",5)(6,"input",6),m.mxI("ngModelChange",(function(e){return m.DH7(t.relationship.name,e)||(t.relationship.name=e),e})),m.k0s()()(),m.j41(7,"div",7)(8,"label",3),m.nrm(9,"system-label",8),m.k0s(),m.j41(10,"div",5)(11,"input",6),m.mxI("ngModelChange",(function(e){return m.DH7(t.relationship.relationship_name,e)||(t.relationship.relationship_name=e),e})),m.k0s()()()(),m.j41(12,"div",1)(13,"div",2)(14,"label",3),m.nrm(15,"system-label",9),m.k0s(),m.j41(16,"div",5),m.nrm(17,"input",10),m.k0s()(),m.j41(18,"div",7)(19,"label",3),m.nrm(20,"system-label",11),m.k0s(),m.j41(21,"div",5),m.nrm(22,"input",10),m.k0s()()(),m.j41(23,"div",1)(24,"div",2)(25,"label",3),m.nrm(26,"system-label",12),m.k0s(),m.j41(27,"div",13)(28,"select",14),m.mxI("ngModelChange",(function(e){return m.DH7(t.relationship.lhs_sysdictionaryitem_id,e)||(t.relationship.lhs_sysdictionaryitem_id=e),e})),m.DNE(29,ls,2,2,"option",15),m.k0s()()(),m.j41(30,"div",7)(31,"label",3),m.nrm(32,"system-label",16),m.k0s(),m.j41(33,"div",13)(34,"select",14),m.mxI("ngModelChange",(function(e){return m.DH7(t.relationship.rhs_sysdictionaryitem_id,e)||(t.relationship.rhs_sysdictionaryitem_id=e),e})),m.DNE(35,os,2,2,"option",15),m.k0s()()()(),m.j41(36,"div",1)(37,"div",2)(38,"label",3),m.nrm(39,"system-label",17),m.k0s(),m.j41(40,"div",5)(41,"input",6),m.mxI("ngModelChange",(function(e){return m.DH7(t.relationship.lhs_linkname,e)||(t.relationship.lhs_linkname=e),e})),m.k0s()()(),m.j41(42,"div",7)(43,"label",3),m.nrm(44,"system-label",18),m.k0s(),m.j41(45,"div",5)(46,"input",6),m.mxI("ngModelChange",(function(e){return m.DH7(t.relationship.rhs_linkname,e)||(t.relationship.rhs_linkname=e),e})),m.k0s()()()(),m.j41(47,"div",1)(48,"div",2)(49,"label",3),m.nrm(50,"system-label",19),m.k0s(),m.j41(51,"div",5)(52,"system-input-label",20),m.mxI("ngModelChange",(function(e){return m.DH7(t.relationship.lhs_linklabel,e)||(t.relationship.lhs_linklabel=e),e})),m.k0s()()(),m.j41(53,"div",7)(54,"label",3),m.nrm(55,"system-label",21),m.k0s(),m.j41(56,"div",5)(57,"system-input-label",20),m.mxI("ngModelChange",(function(e){return m.DH7(t.relationship.rhs_linklabel,e)||(t.relationship.rhs_linklabel=e),e})),m.k0s()()()(),m.j41(58,"div",1)(59,"div",22)(60,"label",3),m.nrm(61,"system-label",23),m.k0s(),m.j41(62,"div",13)(63,"select",14),m.mxI("ngModelChange",(function(e){return m.DH7(t.join_sysdictionarydefinition_id,e)||(t.join_sysdictionarydefinition_id=e),e})),m.DNE(64,as,2,2,"option",15),m.k0s()()()(),m.j41(65,"div",1)(66,"div",2)(67,"label",3),m.nrm(68,"system-label",24),m.k0s(),m.j41(69,"div",13)(70,"select",14),m.mxI("ngModelChange",(function(e){return m.DH7(t.relationship.join_lhs_sysdictionaryitem_id,e)||(t.relationship.join_lhs_sysdictionaryitem_id=e),e})),m.DNE(71,ds,2,2,"option",15),m.k0s()()(),m.j41(72,"div",7)(73,"label",3),m.nrm(74,"system-label",25),m.k0s(),m.j41(75,"div",13)(76,"select",14),m.mxI("ngModelChange",(function(e){return m.DH7(t.relationship.join_rhs_sysdictionaryitem_id,e)||(t.relationship.join_rhs_sysdictionaryitem_id=e),e})),m.DNE(77,rs,2,2,"option",15),m.k0s()()()(),m.j41(78,"div",1)(79,"div",2)(80,"label",3),m.nrm(81,"system-label",26),m.k0s(),m.j41(82,"div",13)(83,"select",14),m.mxI("ngModelChange",(function(e){return m.DH7(t.relationship.relationship_role_column,e)||(t.relationship.relationship_role_column=e),e})),m.nrm(84,"option",27),m.DNE(85,cs,2,2,"option",15),m.k0s()()(),m.j41(86,"div",7)(87,"label",3),m.nrm(88,"system-label",28),m.k0s(),m.j41(89,"div",5)(90,"input",6),m.mxI("ngModelChange",(function(e){return m.DH7(t.relationship.relationship_role_column_value,e)||(t.relationship.relationship_role_column_value=e),e})),m.k0s()()()()(),m.j41(91,"system-collapsable-tab",29),m.DNE(92,gs,20,6,"div",30),m.j41(93,"div",31),m.DNE(94,hs,2,1,"button",32),m.k0s()()),2&e&&(m.R7$(6),m.Y8G("disabled",t.readonly),m.R50("ngModel",t.relationship.name),m.R7$(5),m.Y8G("disabled",t.readonly),m.R50("ngModel",t.relationship.relationship_name),m.R7$(6),m.Y8G("ngModel",t.dictionarymanager.getDictionaryDefinitionName(t.relationship.lhs_sysdictionarydefinition_id)),m.R7$(5),m.Y8G("ngModel",t.dictionarymanager.getDictionaryDefinitionName(t.relationship.rhs_sysdictionarydefinition_id)),m.R7$(6),m.Y8G("disabled",t.readonly),m.R50("ngModel",t.relationship.lhs_sysdictionaryitem_id),m.R7$(),m.Y8G("ngForOf",t.lhs_items),m.R7$(5),m.Y8G("disabled",t.readonly),m.R50("ngModel",t.relationship.rhs_sysdictionaryitem_id),m.R7$(),m.Y8G("ngForOf",t.rhs_items),m.R7$(6),m.Y8G("disabled",t.readonly),m.R50("ngModel",t.relationship.lhs_linkname),m.R7$(5),m.Y8G("disabled",t.readonly),m.R50("ngModel",t.relationship.rhs_linkname),m.R7$(6),m.Y8G("disabled",t.readonly),m.R50("ngModel",t.relationship.lhs_linklabel),m.R7$(5),m.Y8G("disabled",t.readonly),m.R50("ngModel",t.relationship.rhs_linklabel),m.R7$(6),m.Y8G("disabled",t.readonly),m.R50("ngModel",t.join_sysdictionarydefinition_id),m.R7$(),m.Y8G("ngForOf",t.relationsTables),m.R7$(6),m.Y8G("disabled",!t.join_sysdictionarydefinition_id||t.readonly),m.R50("ngModel",t.relationship.join_lhs_sysdictionaryitem_id),m.R7$(),m.Y8G("ngForOf",t.join_items),m.R7$(5),m.Y8G("disabled",!t.join_sysdictionarydefinition_id||t.readonly),m.R50("ngModel",t.relationship.join_rhs_sysdictionaryitem_id),m.R7$(),m.Y8G("ngForOf",t.join_items),m.R7$(6),m.Y8G("disabled",!t.join_sysdictionarydefinition_id||t.readonly),m.R50("ngModel",t.relationship.relationship_role_column),m.R7$(2),m.Y8G("ngForOf",t.join_items),m.R7$(5),m.Y8G("disabled",!t.relationship.relationship_role_column||t.readonly),m.R50("ngModel",t.relationship.relationship_role_column_value),m.R7$(),m.Y8G("expanded",!1),m.R7$(),m.Y8G("ngForOf",t.relationshipFieldsPerItem),m.R7$(2),m.Y8G("ngIf",!t.readonly))},dependencies:[i.Sq,i.bT,n.xH,n.y7,n.me,n.wz,n.BC,n.vS,L.t,ns.p,ze.w,x.W],encapsulation:2})}return DictionaryManagerRelationshipContainerManyToMany})();function fs(e,t){if(1&e&&(m.j41(0,"option",25),m.EFF(1),m.k0s()),2&e){const e=t.$implicit;m.Y8G("value",e.id),m.R7$(),m.JRh(e.name)}}function bs(e,t){if(1&e&&(m.j41(0,"option",25),m.EFF(1),m.k0s()),2&e){const e=t.$implicit;m.Y8G("value",e.id),m.R7$(),m.JRh(e.name)}}let ys=(()=>{class DictionaryManagerRelationshipContainerParent{constructor(e,t,s,i,n,l){this.dictionarymanager=e,this.metadata=t,this.language=s,this.modal=i,this.injector=n,this.modelutilities=l,this.lhs_items=[],this.rhs_items=[],this.relationshiprelatefields=[]}ngOnInit(){this.loadItems(),this.loadRelationshipFields()}loadItems(){this.lhs_items=this.dictionarymanager.getDictionaryDefinitionItems(this.relationship.lhs_sysdictionarydefinition_id),this.rhs_items=this.dictionarymanager.getDictionaryDefinitionItems(this.relationship.rhs_sysdictionarydefinition_id)}loadRelationshipFields(){this.relationshiprelatefields=this.dictionarymanager.dictionaryrelationshiprelatefields.filter((e=>e.relationship_id==this.relationship.id))}get rhs_sysdictionaryitem_id(){return this.relationship.rhs_sysdictionaryitem_id}set rhs_sysdictionaryitem_id(e){this.relationship.rhs_sysdictionaryitem_id=e,this.relationship.rhs_relatename=this.rhs_items.find((t=>t.id==e)).name+"_name"}static#e=this.ɵfac=function(e){return new(e||DictionaryManagerRelationshipContainerParent)(m.rXU(j),m.rXU(f.yu),m.rXU(b.B),m.rXU(R.y),m.rXU(m.zZn),m.rXU(y.g))};static#t=this.ɵcmp=m.VBU({type:DictionaryManagerRelationshipContainerParent,selectors:[["dictionary-manager-relationship-container-parent"]],inputs:{relationship:"relationship"},decls:65,vars:13,consts:[[1,"slds-p-around--xx-small"],[1,"slds-grid"],[1,"slds-size--1-of-2","slds-p-right--xx-small","slds-form-element"],[1,"slds-form-element__label"],["label","LBL_NAME"],[1,"slds-form-element__control"],[1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-size--1-of-2","slds-p-left--xx-small","slds-form-element"],["label","LBL_RELATIONSHIP_NAME"],["label","LBL_LHS_DICTIONARYDEFINITION"],["disabled","",1,"slds-input",3,"ngModel"],["label","LBL_RHS_DICTIONARYDEFINITION"],["label","LBL_LHS_SYSDICTIONARYITEM"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["label","LBL_RHS_SYSDICTIONARYITEM"],["label","LBL_LHS_LINKNAME"],["label","LBL_RHS_LINKNAME"],["label","LBL_LHS_LINKLABEL"],[3,"ngModel","ngModelChange"],["label","LBL_RHS_LINKLABEL"],[1,"slds-size--1-of-2"],["label","LBL_RHS_RELATENAME"],["disabled","",1,"slds-input",3,"ngModel","ngModelChange"],[3,"value"]],template:function(e,t){1&e&&(m.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"label",3),m.nrm(4,"system-label",4),m.k0s(),m.j41(5,"div",5)(6,"input",6),m.mxI("ngModelChange",(function(e){return m.DH7(t.relationship.name,e)||(t.relationship.name=e),e})),m.k0s()()(),m.j41(7,"div",7)(8,"label",3),m.nrm(9,"system-label",8),m.k0s(),m.j41(10,"div",5)(11,"input",6),m.mxI("ngModelChange",(function(e){return m.DH7(t.relationship.relationship_name,e)||(t.relationship.relationship_name=e),e})),m.k0s()()()(),m.j41(12,"div",1)(13,"div",2)(14,"label",3),m.nrm(15,"system-label",9),m.k0s(),m.j41(16,"div",5),m.nrm(17,"input",10),m.k0s()(),m.j41(18,"div",7)(19,"label",3),m.nrm(20,"system-label",11),m.k0s(),m.j41(21,"div",5),m.nrm(22,"input",10),m.k0s()()(),m.j41(23,"div",1)(24,"div",2)(25,"label",3),m.nrm(26,"system-label",12),m.k0s(),m.j41(27,"div",13)(28,"select",14),m.mxI("ngModelChange",(function(e){return m.DH7(t.relationship.lhs_sysdictionaryitem_id,e)||(t.relationship.lhs_sysdictionaryitem_id=e),e})),m.DNE(29,fs,2,2,"option",15),m.k0s()()(),m.j41(30,"div",7)(31,"label",3),m.nrm(32,"system-label",16),m.k0s(),m.j41(33,"div",13)(34,"select",14),m.mxI("ngModelChange",(function(e){return m.DH7(t.rhs_sysdictionaryitem_id,e)||(t.rhs_sysdictionaryitem_id=e),e})),m.DNE(35,bs,2,2,"option",15),m.k0s()()()(),m.j41(36,"div",1)(37,"div",2)(38,"label",3),m.nrm(39,"system-label",17),m.k0s(),m.j41(40,"div",5)(41,"input",6),m.mxI("ngModelChange",(function(e){return m.DH7(t.relationship.lhs_linkname,e)||(t.relationship.lhs_linkname=e),e})),m.k0s()()(),m.j41(42,"div",7)(43,"label",3),m.nrm(44,"system-label",18),m.k0s(),m.j41(45,"div",5)(46,"input",6),m.mxI("ngModelChange",(function(e){return m.DH7(t.relationship.rhs_linkname,e)||(t.relationship.rhs_linkname=e),e})),m.k0s()()()(),m.j41(47,"div",1)(48,"div",2)(49,"label",3),m.nrm(50,"system-label",19),m.k0s(),m.j41(51,"div",5)(52,"system-input-label",20),m.mxI("ngModelChange",(function(e){return m.DH7(t.relationship.lhs_linklabel,e)||(t.relationship.lhs_linklabel=e),e})),m.k0s()()(),m.j41(53,"div",7)(54,"label",3),m.nrm(55,"system-label",21),m.k0s(),m.j41(56,"div",5)(57,"system-input-label",20),m.mxI("ngModelChange",(function(e){return m.DH7(t.relationship.rhs_linklabel,e)||(t.relationship.rhs_linklabel=e),e})),m.k0s()()()(),m.j41(58,"div",1),m.nrm(59,"div",22),m.j41(60,"div",22)(61,"label",3),m.nrm(62,"system-label",23),m.k0s(),m.j41(63,"div",5)(64,"input",24),m.mxI("ngModelChange",(function(e){return m.DH7(t.relationship.rhs_relatename,e)||(t.relationship.rhs_relatename=e),e})),m.k0s()()()()()),2&e&&(m.R7$(6),m.R50("ngModel",t.relationship.name),m.R7$(5),m.R50("ngModel",t.relationship.relationship_name),m.R7$(6),m.Y8G("ngModel",t.dictionarymanager.getDictionaryDefinitionName(t.relationship.lhs_sysdictionarydefinition_id)),m.R7$(5),m.Y8G("ngModel",t.dictionarymanager.getDictionaryDefinitionName(t.relationship.rhs_sysdictionarydefinition_id)),m.R7$(6),m.R50("ngModel",t.relationship.lhs_sysdictionaryitem_id),m.R7$(),m.Y8G("ngForOf",t.lhs_items),m.R7$(5),m.R50("ngModel",t.rhs_sysdictionaryitem_id),m.R7$(),m.Y8G("ngForOf",t.rhs_items),m.R7$(6),m.R50("ngModel",t.relationship.lhs_linkname),m.R7$(5),m.R50("ngModel",t.relationship.rhs_linkname),m.R7$(6),m.R50("ngModel",t.relationship.lhs_linklabel),m.R7$(5),m.R50("ngModel",t.relationship.rhs_linklabel),m.R7$(7),m.R50("ngModel",t.relationship.rhs_relatename))},dependencies:[i.Sq,n.xH,n.y7,n.me,n.wz,n.BC,n.vS,ze.w,x.W],encapsulation:2})}return DictionaryManagerRelationshipContainerParent})();function _s(e,t){if(1&e&&(m.j41(0,"option",25),m.EFF(1),m.k0s()),2&e){const e=t.$implicit;m.Y8G("value",e.id),m.R7$(),m.JRh(e.name)}}let ks=(()=>{class DictionaryManagerRelationshipContainerUser{constructor(e){this.dictionarymanager=e,this.readonly=!1,this.rhsItems=[]}ngOnChanges(e){e.relationship&&(this.rhsItems=this.dictionarymanager.getDictionaryDefinitionItems(this.relationship.rhs_sysdictionarydefinition_id))}get relationshipName(){return this.relationship.relationship_name.replace(/\{tablename}_|_user/g,"")}set relationshipName(e){this.relationship.relationship_name=`{tablename}_${e}_user`,this.generateRelationshipFields(e)}generateRelationshipFields(e){this.relationship.rhs_linkname=`${e}_user_link`,this.relationship.rhs_relatename=`${e}_user_name`,this.relationship.rhs_sysdictionaryitem_id=this.rhsItems.find((t=>t.name==e+"_user_id"))?.id}static#e=this.ɵfac=function(e){return new(e||DictionaryManagerRelationshipContainerUser)(m.rXU(j))};static#t=this.ɵcmp=m.VBU({type:DictionaryManagerRelationshipContainerUser,selectors:[["dictionary-manager-relationship-container-user"]],inputs:{readonly:"readonly",relationship:"relationship"},features:[m.OA$],decls:51,vars:16,consts:[[1,"slds-p-around--xx-small"],[1,"slds-grid"],[1,"slds-size--1-of-2","slds-p-right--xx-small","slds-form-element"],[1,"slds-form-element__label"],["label","LBL_NAME"],[1,"slds-form-element__control"],[1,"slds-input",3,"disabled","ngModel","ngModelChange"],[1,"slds-size--1-of-2","slds-p-left--xx-small","slds-form-element"],["label","LBL_RELATIONSHIP_NAME"],[1,"slds-form-element__control","slds-input-has-fixed-addon"],[1,"slds-form-element__addon"],["label","LBL_RHS_DICTIONARYDEFINITION"],["disabled","",1,"slds-input",3,"ngModel"],["label","LBL_RHS_SYSDICTIONARYITEM"],[1,"slds-select_container"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["label","LBL_RHS_LINKNAME"],[1,"slds-input",3,"disabled","ngModel"],["label","LBL_RHS_LINKLABEL"],[3,"disabled","ngModel","ngModelChange"],[1,"slds-size--1-of-2"],["label","LBL_RHS_RELATENAME"],[1,"slds-p-left--xx-small","slds-size--1-of-2"],["label","LBL_RHS_RELATELABEL"],[3,"value"]],template:function(e,t){1&e&&(m.j41(0,"div")(1,"div",0)(2,"div",1)(3,"div",2)(4,"label",3),m.nrm(5,"system-label",4),m.k0s(),m.j41(6,"div",5)(7,"input",6),m.mxI("ngModelChange",(function(e){return m.DH7(t.relationship.name,e)||(t.relationship.name=e),e})),m.k0s()()(),m.j41(8,"div",7)(9,"label",3),m.nrm(10,"system-label",8),m.k0s(),m.j41(11,"div",9)(12,"span",10),m.EFF(13,"{tablename}_"),m.k0s(),m.j41(14,"input",6),m.mxI("ngModelChange",(function(e){return m.DH7(t.relationshipName,e)||(t.relationshipName=e),e})),m.k0s(),m.j41(15,"span",10),m.EFF(16,"_user"),m.k0s()()()(),m.j41(17,"div",1)(18,"div",7)(19,"label",3),m.nrm(20,"system-label",11),m.k0s(),m.j41(21,"div",5),m.nrm(22,"input",12),m.k0s()(),m.j41(23,"div",7)(24,"label",3),m.nrm(25,"system-label",13),m.k0s(),m.j41(26,"div",14)(27,"select",15),m.mxI("ngModelChange",(function(e){return m.DH7(t.relationship.rhs_sysdictionaryitem_id,e)||(t.relationship.rhs_sysdictionaryitem_id=e),e})),m.DNE(28,_s,2,2,"option",16),m.k0s()()()(),m.j41(29,"div",1)(30,"div",7)(31,"label",3),m.nrm(32,"system-label",17),m.k0s(),m.j41(33,"div",5),m.nrm(34,"input",18),m.k0s()(),m.j41(35,"div",7)(36,"label",3),m.nrm(37,"system-label",19),m.k0s(),m.j41(38,"div",5)(39,"system-input-label",20),m.mxI("ngModelChange",(function(e){return m.DH7(t.relationship.rhs_linklabel,e)||(t.relationship.rhs_linklabel=e),e})),m.k0s()()()(),m.j41(40,"div",1)(41,"div",21)(42,"label",3),m.nrm(43,"system-label",22),m.k0s(),m.j41(44,"div",5)(45,"input",6),m.mxI("ngModelChange",(function(e){return m.DH7(t.relationship.rhs_relatename,e)||(t.relationship.rhs_relatename=e),e})),m.k0s()()(),m.j41(46,"div",23)(47,"label",3),m.nrm(48,"system-label",24),m.k0s(),m.j41(49,"div",5)(50,"system-input-label",20),m.mxI("ngModelChange",(function(e){return m.DH7(t.relationship.rhs_relatelabel,e)||(t.relationship.rhs_relatelabel=e),e})),m.k0s()()()()()()),2&e&&(m.R7$(7),m.Y8G("disabled",t.readonly),m.R50("ngModel",t.relationship.name),m.R7$(7),m.Y8G("disabled",t.readonly),m.R50("ngModel",t.relationshipName),m.R7$(8),m.Y8G("ngModel",t.dictionarymanager.getDictionaryDefinitionName(t.relationship.rhs_sysdictionarydefinition_id)),m.R7$(5),m.Y8G("disabled",t.readonly),m.R50("ngModel",t.relationship.rhs_sysdictionaryitem_id),m.R7$(),m.Y8G("ngForOf",t.rhsItems),m.R7$(6),m.Y8G("disabled",t.readonly)("ngModel",t.relationship.rhs_linkname),m.R7$(5),m.Y8G("disabled",t.readonly),m.R50("ngModel",t.relationship.rhs_linklabel),m.R7$(6),m.Y8G("disabled",t.readonly),m.R50("ngModel",t.relationship.rhs_relatename),m.R7$(5),m.Y8G("disabled",t.readonly),m.R50("ngModel",t.relationship.rhs_relatelabel))},dependencies:[i.Sq,n.xH,n.y7,n.me,n.wz,n.BC,n.vS,ze.w,x.W],encapsulation:2})}return DictionaryManagerRelationshipContainerUser})();function vs(e,t){if(1&e&&m.nrm(0,"dictionary-manager-relationship-container-emailaddress",12),2&e){const e=m.XpG();m.Y8G("readonly",e.readonly)("relationship",e.dictionaryRelationship)}}function Rs(e,t){if(1&e&&m.nrm(0,"dictionary-manager-relationship-container-onetomany",12),2&e){const e=m.XpG();m.Y8G("readonly",e.readonly)("relationship",e.dictionaryRelationship)}}function Ms(e,t){if(1&e&&m.nrm(0,"dictionary-manager-relationship-container-onetomanypolymorph",13),2&e){const e=m.XpG();m.Y8G("readonly",e.readonly)("relationship",e.dictionaryRelationship)("relationshipPolymorphs",e.dictionaryRelationshipPolymorphs)}}function js(e,t){if(1&e&&m.nrm(0,"dictionary-manager-relationship-container-manytomany",14),2&e){const e=m.XpG();m.Y8G("readonly",e.readonly)("relationshipFields",e.dictionaryRelationshipFields)("relationship",e.dictionaryRelationship)}}function Ls(e,t){if(1&e&&m.nrm(0,"dictionary-manager-relationship-container-parent",15),2&e){const e=m.XpG();m.Y8G("relationship",e.dictionaryRelationship)}}function xs(e,t){if(1&e&&m.nrm(0,"dictionary-manager-relationship-container-user",12),2&e){const e=m.XpG();m.Y8G("readonly",e.readonly)("relationship",e.dictionaryRelationship)}}let Is=(()=>{class DictionaryManagerRelationshipsDetails{constructor(e,t){this.dictionarymanager=e,this.backend=t,this.dictionaryRelationshipPolymorphs=[]}ngOnInit(){this.backup=JSON.stringify(this.dictionaryRelationship),this.dictionaryRelationshipPolymorphs=this.dictionarymanager.dictionaryrelationshippolymorphs.filter((e=>e.relationship_id==this.dictionaryRelationship.id)),this.dictionaryRelationshipFields=this.dictionarymanager.dictionaryrelationshipfields.filter((e=>e.sysdictionaryrelationship_id==this.dictionaryRelationship.id))}get readonly(){return"a"==this.dictionaryRelationship.status||this.dictionaryRelationship.rhs_sysdictionarydefinition_id!=this.dictionarymanager.currentDictionaryDefinition&&this.dictionaryRelationship.lhs_sysdictionarydefinition_id!=this.dictionarymanager.currentDictionaryDefinition&&this.dictionaryRelationship.join_sysdictionarydefinition_id!=this.dictionarymanager.currentDictionaryDefinition}close(){this.dictionaryRelationship=JSON.parse(this.backup),this.dictionarymanager.updateRelationshipInArray(this.dictionaryRelationship),this.self.destroy()}save(){const e=this.dictionaryRelationshipFields.filter((e=>!!e.map_to_fieldname||!e.isNew)).map((e=>(e.isNew||e.map_to_fieldname||(e.deleted=1),delete e.isNew,e)));this.backend.postRequest(`dictionary/relationship/${this.dictionaryRelationship.id}`,{},{relationship:this.dictionaryRelationship,relationshipFields:e}).subscribe({next:()=>{this.dictionarymanager.updateRelationshipInArray(this.dictionaryRelationship),this.dictionarymanager.dictionaryrelationshipfields=e,this.self.destroy()}})}static#e=this.ɵfac=function(e){return new(e||DictionaryManagerRelationshipsDetails)(m.rXU(j),m.rXU(p.H))};static#t=this.ɵcmp=m.VBU({type:DictionaryManagerRelationshipsDetails,selectors:[["dictionary-manager-relationships-details"]],inputs:{dictionaryRelationship:"dictionaryRelationship",dictionaryRelationshipFields:"dictionaryRelationshipFields"},decls:16,vars:8,consts:[[3,"close"],["label","LBL_RELATIONSHIP"],["margin","none"],[3,"ngSwitch"],[3,"readonly","relationship",4,"ngSwitchCase"],[3,"readonly","relationship","relationshipPolymorphs",4,"ngSwitchCase"],[3,"readonly","relationshipFields","relationship",4,"ngSwitchCase"],[3,"relationship",4,"ngSwitchCase"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_SAVE"],[3,"readonly","relationship"],[3,"readonly","relationship","relationshipPolymorphs"],[3,"readonly","relationshipFields","relationship"],[3,"relationship"]],template:function(e,t){1&e&&(m.j41(0,"system-modal")(1,"system-modal-header",0),m.bIt("close",(function(){return t.close()})),m.nrm(2,"system-label",1),m.k0s(),m.j41(3,"system-modal-content",2),m.qex(4,3),m.DNE(5,vs,1,2,"dictionary-manager-relationship-container-emailaddress",4)(6,Rs,1,2,"dictionary-manager-relationship-container-onetomany",4)(7,Ms,1,3,"dictionary-manager-relationship-container-onetomanypolymorph",5)(8,js,1,3,"dictionary-manager-relationship-container-manytomany",6)(9,Ls,1,1,"dictionary-manager-relationship-container-parent",7)(10,xs,1,2,"dictionary-manager-relationship-container-user",4),m.bVm(),m.k0s(),m.j41(11,"system-modal-footer")(12,"button",8),m.bIt("click",(function(){return t.close()})),m.nrm(13,"system-label",9),m.k0s(),m.j41(14,"button",10),m.bIt("click",(function(){return t.save()})),m.nrm(15,"system-label",11),m.k0s()()()),2&e&&(m.R7$(4),m.Y8G("ngSwitch",t.dictionaryRelationship.relationship_type),m.R7$(),m.Y8G("ngSwitchCase","email-address"),m.R7$(),m.Y8G("ngSwitchCase","one-to-many"),m.R7$(),m.Y8G("ngSwitchCase","one-to-many-polymorph"),m.R7$(),m.Y8G("ngSwitchCase","many-to-many"),m.R7$(),m.Y8G("ngSwitchCase","parent"),m.R7$(),m.Y8G("ngSwitchCase","user"),m.R7$(4),m.Y8G("disabled",t.readonly))},dependencies:[i.ux,i.e1,x.W,qe.D,Pe.I,Je.Q,We.C,Qt,ts,is,ps,ys,ks],encapsulation:2})}return DictionaryManagerRelationshipsDetails})();function Ds(e,t){if(1&e){const e=m.RV6();m.j41(0,"system-input-radio",17),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.selectedType,t)||(s.selectedType=t),m.Njj(t)})),m.nrm(1,"system-label",18),m.k0s()}if(2&e){const e=t.$implicit,s=m.XpG();m.R50("ngModel",s.selectedType),m.Y8G("value",e.id),m.R7$(),m.Y8G("label",e.label)}}function Es(e,t){1&e&&(m.j41(0,"option",19),m.nrm(1,"system-label",20),m.k0s())}let Cs=(()=>{class DictionaryManagerRelationshipAdd{constructor(e,t,s){this.dictionarymanager=e,this.modal=t,this.injector=s,this.related_ids=[]}ngOnInit(){this.related_ids=this.dictionarymanager.dictionarydefinitions.filter((e=>"module"==e.sysdictionary_type)).sort(((e,t)=>e.name.localeCompare(t.name))),this.scope=this.dictionarymanager.currentDictionaryScope}close(){this.self.destroy()}add(){let e=this.dictionarymanager.dictionaryrelationshiptypes.find((e=>e.id==this.selectedType));this.modal.openModal(e.component_add,!0,this.injector).subscribe((t=>{t.instance.relationship.scope=this.scope,t.instance.type=e})),this.close()}static#e=this.ɵfac=function(e){return new(e||DictionaryManagerRelationshipAdd)(m.rXU(j),m.rXU(R.y),m.rXU(m.zZn))};static#t=this.ɵcmp=m.VBU({type:DictionaryManagerRelationshipAdd,selectors:[["ng-component"]],decls:21,vars:5,consts:[[3,"close"],["label","LBL_ADD_RELATIONSHIP"],[1,"slds-p-around--small"],["name","relationshiptype",3,"ngModel","value","ngModelChange",4,"ngFor","ngForOf"],[1,"slds-form-element__control","slds-p-around--xx-small"],[1,"slds-form-element__label"],[1,"slds-required"],["label","LBL_SCOPE"],[1,"slds-select_container"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],["value","g",4,"ngIf"],["value","c"],["label","LBL_CUSTOM"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_ADD"],["name","relationshiptype",3,"ngModel","value","ngModelChange"],[3,"label"],["value","g"],["label","LBL_GLOBAL"]],template:function(e,t){1&e&&(m.j41(0,"system-modal")(1,"system-modal-header",0),m.bIt("close",(function(){return t.close()})),m.nrm(2,"system-label",1),m.k0s(),m.j41(3,"system-modal-content")(4,"div",2),m.DNE(5,Ds,2,3,"system-input-radio",3),m.k0s(),m.j41(6,"div",4)(7,"label",5)(8,"abbr",6),m.EFF(9,"* "),m.k0s(),m.nrm(10,"system-label",7),m.k0s(),m.j41(11,"div",8)(12,"select",9),m.mxI("ngModelChange",(function(e){return m.DH7(t.scope,e)||(t.scope=e),e})),m.DNE(13,Es,2,0,"option",10),m.j41(14,"option",11),m.nrm(15,"system-label",12),m.k0s()()()()(),m.j41(16,"system-modal-footer")(17,"button",13),m.bIt("click",(function(){return t.close()})),m.nrm(18,"system-label",14),m.k0s(),m.j41(19,"button",15),m.bIt("click",(function(){return t.add()})),m.nrm(20,"system-label",16),m.k0s()()()),2&e&&(m.R7$(5),m.Y8G("ngForOf",t.dictionarymanager.dictionaryrelationshiptypes),m.R7$(7),m.Y8G("disabled","c"==t.dictionarymanager.currentDictionaryScope),m.R50("ngModel",t.scope),m.R7$(),m.Y8G("ngIf","all"==t.dictionarymanager.changescope),m.R7$(6),m.Y8G("disabled",!t.selectedType))},dependencies:[i.Sq,i.bT,n.xH,n.y7,n.wz,n.BC,n.vS,at.J,x.W,qe.D,Pe.I,Je.Q,We.C],encapsulation:2})}return DictionaryManagerRelationshipAdd})();function Fs(e,t){if(1&e){const e=m.RV6();m.j41(0,"system-input-radio",10),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG(2);return m.DH7(s.relatedId,t)||(s.relatedId=t),m.Njj(t)})),m.EFF(1),m.k0s()}if(2&e){const e=t.$implicit,s=m.XpG(2);m.R50("ngModel",s.relatedId),m.Y8G("value",e.id),m.R7$(),m.JRh(e.name)}}function Gs(e,t){if(1&e&&(m.j41(0,"div",8),m.DNE(1,Fs,2,3,"system-input-radio",9),m.k0s()),2&e){const e=m.XpG();m.R7$(),m.Y8G("ngForOf",e.relatedIds)}}function $s(e,t){if(1&e&&m.nrm(0,"dictionary-manager-relationship-container-onetomany",11),2&e){const e=m.XpG();m.Y8G("relationship",e.relationship)}}function Bs(e,t){if(1&e){const e=m.RV6();m.j41(0,"button",12),m.bIt("click",(function(){m.eBV(e);const t=m.XpG();return m.Njj(t.setRelated())})),m.nrm(1,"system-label",13),m.k0s()}}function Ns(e,t){if(1&e){const e=m.RV6();m.j41(0,"button",12),m.bIt("click",(function(){m.eBV(e);const t=m.XpG();return m.Njj(t.add())})),m.nrm(1,"system-label",14),m.k0s()}}let Ss=(()=>{class DictionaryManagerRelationshipAddOneToMany{constructor(e,t,s,i,n,l,o){this.dictionarymanager=e,this.backend=t,this.metadata=s,this.language=i,this.modal=n,this.injector=l,this.modelutilities=o,this.type=null,this.relationship={id:this.modelutilities.generateGuid(),name:"",scope:"c",relationship_name:"",lhs_sysdictionarydefinition_id:"",lhs_sysdictionaryitem_id:"",lhs_linkname:"",lhs_linklabel:"",lhs_duplicatemerge:1,rhs_sysdictionarydefinition_id:"",rhs_sysdictionaryitem_id:"",rhs_linkname:"",rhs_linklabel:"",rhs_duplicatemerge:0,rhs_relatename:"",rhs_relatelabel:"",relationship_type:"",deleted:0,status:"d"}}ngOnInit(){}get relatedIds(){return this.dictionarymanager.dictionarydefinitions.filter((e=>"module"==e.sysdictionary_type)).sort(((e,t)=>e.name.localeCompare(t.name)))}setRelated(){this.setDefaults()}get hasRelated(){switch(this.type.name){case"one-to-many":return!!this.relationship.rhs_sysdictionarydefinition_id;case"many-to-one":return!!this.relationship.lhs_sysdictionarydefinition_id}}setDefaults(){switch(this.relationship.relationship_type=this.type.name,this.type.name){case"one-to-many":this.relationship.rhs_sysdictionarydefinition_id=this.relatedId,this.relationship.lhs_sysdictionarydefinition_id=this.dictionarymanager.currentDictionaryDefinition;break;case"many-to-one":this.relationship.lhs_sysdictionarydefinition_id=this.relatedId,this.relationship.rhs_sysdictionarydefinition_id=this.dictionarymanager.currentDictionaryDefinition}this.relationship.name=this.dictionarymanager.dictionarydefinitions.find((e=>e.id==this.relationship.lhs_sysdictionarydefinition_id)).tablename.toLowerCase(),this.relationship.relationship_name=this.dictionarymanager.dictionarydefinitions.find((e=>e.id==this.relationship.lhs_sysdictionarydefinition_id)).tablename.toLowerCase()+"_"+this.dictionarymanager.dictionarydefinitions.find((e=>e.id==this.relationship.rhs_sysdictionarydefinition_id)).tablename.toLowerCase();let e=this.dictionarymanager.getDictionaryDefinitionItems(this.relationship.lhs_sysdictionarydefinition_id).find((e=>"id"==e.name));e&&(this.relationship.lhs_sysdictionaryitem_id=e.id),this.relationship.rhs_linkname=this.dictionarymanager.getDictionaryDefinitionName(this.relationship.lhs_sysdictionarydefinition_id).toLowerCase(),this.relationship.rhs_relatename=this.dictionarymanager.getDictionaryDefinitionName(this.relationship.lhs_sysdictionarydefinition_id).toLowerCase()+"_name",this.relationship.lhs_linkname=this.dictionarymanager.dictionarydefinitions.find((e=>e.id==this.relationship.rhs_sysdictionarydefinition_id)).tablename.toLowerCase()}close(){this.self.destroy()}add(){this.backend.postRequest(`dictionary/relationship/${this.relationship.id}`,{},{relationship:this.relationship}).subscribe({next:e=>{this.dictionarymanager.pushNewRelationshipToArray(this.relationship),this.close()}})}static#e=this.ɵfac=function(e){return new(e||DictionaryManagerRelationshipAddOneToMany)(m.rXU(j),m.rXU(p.H),m.rXU(f.yu),m.rXU(b.B),m.rXU(R.y),m.rXU(m.zZn),m.rXU(y.g))};static#t=this.ɵcmp=m.VBU({type:DictionaryManagerRelationshipAddOneToMany,selectors:[["ng-component"]],decls:11,vars:5,consts:[[3,"size"],[3,"close"],["label","LBL_ONE_TO_MANY"],["class","slds-grid slds-grid--vertical",4,"ngIf"],[3,"relationship",4,"ngIf"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],["class","slds-button slds-button--brand",3,"click",4,"ngIf"],[1,"slds-grid","slds-grid--vertical"],["name","relatedid",3,"ngModel","value","ngModelChange",4,"ngFor","ngForOf"],["name","relatedid",3,"ngModel","value","ngModelChange"],[3,"relationship"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_NEXT"],["label","LBL_ADD"]],template:function(e,t){1&e&&(m.j41(0,"system-modal",0)(1,"system-modal-header",1),m.bIt("close",(function(){return t.close()})),m.nrm(2,"system-label",2),m.k0s(),m.j41(3,"system-modal-content"),m.DNE(4,Gs,2,1,"div",3)(5,$s,1,1,"dictionary-manager-relationship-container-onetomany",4),m.k0s(),m.j41(6,"system-modal-footer")(7,"button",5),m.bIt("click",(function(){return t.close()})),m.nrm(8,"system-label",6),m.k0s(),m.DNE(9,Bs,2,0,"button",7)(10,Ns,2,0,"button",7),m.k0s()()),2&e&&(m.Y8G("size",t.hasRelated?"medium":"small"),m.R7$(4),m.Y8G("ngIf",!t.hasRelated),m.R7$(),m.Y8G("ngIf",t.hasRelated),m.R7$(4),m.Y8G("ngIf",!t.hasRelated),m.R7$(),m.Y8G("ngIf",t.hasRelated))},dependencies:[i.Sq,i.bT,n.BC,n.vS,at.J,x.W,qe.D,Pe.I,Je.Q,We.C,ts],encapsulation:2})}return DictionaryManagerRelationshipAddOneToMany})();function ws(e,t){if(1&e&&(m.j41(0,"option",18),m.EFF(1),m.k0s()),2&e){const e=t.$implicit;m.Y8G("value",e.id),m.R7$(),m.JRh(e.name)}}function Ts(e,t){if(1&e&&(m.j41(0,"option",18),m.EFF(1),m.k0s()),2&e){const e=t.$implicit;m.Y8G("value",e.id),m.R7$(),m.JRh(e.name)}}function As(e,t){if(1&e){const e=m.RV6();m.j41(0,"div",8)(1,"div",9)(2,"label",10),m.nrm(3,"system-label",11),m.k0s(),m.j41(4,"div",12)(5,"div",13)(6,"select",14),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.lhsRelatedId,t)||(s.lhsRelatedId=t),m.Njj(t)})),m.DNE(7,ws,2,2,"option",15),m.k0s()()()(),m.j41(8,"div",9)(9,"label",10),m.nrm(10,"system-label",16),m.k0s(),m.j41(11,"div",12)(12,"div",13)(13,"select",17),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.rhsRelatedId,t)||(s.rhsRelatedId=t),m.Njj(t)})),m.DNE(14,Ts,2,2,"option",15),m.k0s()()()()()}if(2&e){const e=m.XpG();m.R7$(6),m.Y8G("disabled",e.currentIsModule),m.R50("ngModel",e.lhsRelatedId),m.R7$(),m.Y8G("ngForOf",e.relatedIds),m.R7$(6),m.R50("ngModel",e.rhsRelatedId),m.R7$(),m.Y8G("ngForOf",e.relatedIds)}}function Ys(e,t){if(1&e&&m.nrm(0,"dictionary-manager-relationship-container-manytomany",19),2&e){const e=m.XpG();m.Y8G("relationshipFields",e.relationshipFields)("relationship",e.relationship)}}function Os(e,t){if(1&e){const e=m.RV6();m.j41(0,"button",20),m.bIt("click",(function(){m.eBV(e);const t=m.XpG();return m.Njj(t.setRelated())})),m.nrm(1,"system-label",21),m.k0s()}}function Xs(e,t){if(1&e){const e=m.RV6();m.j41(0,"button",20),m.bIt("click",(function(){m.eBV(e);const t=m.XpG();return m.Njj(t.add())})),m.nrm(1,"system-label",22),m.k0s()}}let Vs=(()=>{class DictionaryManagerRelationshipAddManyToMany{constructor(e,t,s,i,n,l,o){this.dictionarymanager=e,this.backend=t,this.metadata=s,this.language=i,this.modal=n,this.injector=l,this.modelutilities=o,this.type=null,this.relationshipFields=[],this.relationship={id:this.modelutilities.generateGuid(),name:"",scope:"c",relationship_name:"",lhs_sysdictionarydefinition_id:"",lhs_sysdictionaryitem_id:"",lhs_linkname:"",lhs_linklabel:"",lhs_duplicatemerge:1,rhs_sysdictionarydefinition_id:"",rhs_sysdictionaryitem_id:"",rhs_linkname:"",rhs_linklabel:"",rhs_duplicatemerge:0,rhs_relatename:"",rhs_relatelabel:"",relationship_type:"many-to-many",deleted:0,status:"d"}}ngOnInit(){this.currentIsModule&&(this.lhsRelatedId=this.dictionarymanager.currentDictionaryDefinition),"metadata"!=this.dictionarymanager.getCurrentDefinition()?.sysdictionary_type&&"relationship"!=this.dictionarymanager.getCurrentDefinition()?.sysdictionary_type||(this.relationship.join_sysdictionarydefinition_id=this.dictionarymanager.currentDictionaryDefinition)}get currentIsModule(){return"module"==this.dictionarymanager.getCurrentDefinition().sysdictionary_type}get relatedIds(){return this.dictionarymanager.dictionarydefinitions.filter((e=>"module"==e.sysdictionary_type)).sort(((e,t)=>e.name.localeCompare(t.name)))}setRelated(){this.setDefaults()}get hasRelated(){return!!this.relationship.lhs_sysdictionarydefinition_id&&!!this.relationship.rhs_sysdictionarydefinition_id}setDefaults(){this.relationship.lhs_sysdictionarydefinition_id=this.lhsRelatedId,this.relationship.rhs_sysdictionarydefinition_id=this.rhsRelatedId,this.relationship.relationship_name=this.dictionarymanager.dictionarydefinitions.find((e=>e.id==this.relationship.lhs_sysdictionarydefinition_id)).tablename.toLowerCase()+"_"+this.dictionarymanager.dictionarydefinitions.find((e=>e.id==this.relationship.rhs_sysdictionarydefinition_id)).tablename.toLowerCase(),this.relationship.name=this.relationship.relationship_name;let e=this.dictionarymanager.getDictionaryDefinitionItems(this.relationship.lhs_sysdictionarydefinition_id).find((e=>"id"==e.name));e&&(this.relationship.lhs_sysdictionaryitem_id=e.id),this.relationship.lhs_linkname=this.dictionarymanager.dictionarydefinitions.find((e=>e.id==this.relationship.rhs_sysdictionarydefinition_id)).tablename.toLowerCase();let t=this.dictionarymanager.getDictionaryDefinitionItems(this.relationship.rhs_sysdictionarydefinition_id).find((e=>"id"==e.name));t&&(this.relationship.rhs_sysdictionaryitem_id=t.id),this.relationship.rhs_linkname=this.dictionarymanager.getDictionaryDefinitionName(this.relationship.lhs_sysdictionarydefinition_id).toLowerCase()}close(){this.self.destroy()}add(){const e=this.relationshipFields.filter((e=>!!e.map_to_fieldname||!e.isNew)).map((e=>(e.isNew||e.map_to_fieldname||(e.deleted=1),delete e.isNew,e)));this.backend.postRequest(`dictionary/relationship/${this.relationship.id}`,{},{relationship:this.relationship,relationshipFields:e}).subscribe({next:e=>{this.dictionarymanager.pushNewRelationshipToArray(this.relationship),this.dictionarymanager.dictionaryrelationshipfields.push(...this.relationshipFields),this.close()}})}static#e=this.ɵfac=function(e){return new(e||DictionaryManagerRelationshipAddManyToMany)(m.rXU(j),m.rXU(p.H),m.rXU(f.yu),m.rXU(b.B),m.rXU(R.y),m.rXU(m.zZn),m.rXU(y.g))};static#t=this.ɵcmp=m.VBU({type:DictionaryManagerRelationshipAddManyToMany,selectors:[["ng-component"]],inputs:{relationshipFields:"relationshipFields"},decls:11,vars:5,consts:[[3,"size"],[3,"close"],["label","LBL_MANY_TO_MANY"],["class","slds-grid",4,"ngIf"],["isNew","",3,"relationshipFields","relationship",4,"ngIf"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],["class","slds-button slds-button--brand",3,"click",4,"ngIf"],[1,"slds-grid"],[1,"slds-size--1-of-2","slds-p-horizontal--xx-small","slds-form-element"],[1,"slds-form-element__label"],["label","LBL_LEFT_SIDE"],[1,"slds-form-element__control"],[1,"slds-select_container"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["label","LBL_RIGHT_SIDE"],[1,"slds-select",3,"ngModel","ngModelChange"],[3,"value"],["isNew","",3,"relationshipFields","relationship"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_NEXT"],["label","LBL_ADD"]],template:function(e,t){1&e&&(m.j41(0,"system-modal",0)(1,"system-modal-header",1),m.bIt("close",(function(){return t.close()})),m.nrm(2,"system-label",2),m.k0s(),m.j41(3,"system-modal-content"),m.DNE(4,As,15,5,"div",3)(5,Ys,1,2,"dictionary-manager-relationship-container-manytomany",4),m.k0s(),m.j41(6,"system-modal-footer")(7,"button",5),m.bIt("click",(function(){return t.close()})),m.nrm(8,"system-label",6),m.k0s(),m.DNE(9,Os,2,0,"button",7)(10,Xs,2,0,"button",7),m.k0s()()),2&e&&(m.Y8G("size",t.hasRelated?"medium":"small"),m.R7$(4),m.Y8G("ngIf",!t.hasRelated),m.R7$(),m.Y8G("ngIf",t.hasRelated),m.R7$(4),m.Y8G("ngIf",!t.hasRelated),m.R7$(),m.Y8G("ngIf",t.hasRelated))},dependencies:[i.Sq,i.bT,n.xH,n.y7,n.wz,n.BC,n.vS,x.W,qe.D,Pe.I,Je.Q,We.C,ps],encapsulation:2})}return DictionaryManagerRelationshipAddManyToMany})(),Us=(()=>{class DictionaryManagerRelationshipAddOneToManyPolymorph{constructor(e,t,s,i,n,l,o){this.dictionarymanager=e,this.backend=t,this.metadata=s,this.language=i,this.modal=n,this.injector=l,this.modelutilities=o,this.type=null,this.relationshipPolymorphs=[],this.relationship={id:this.modelutilities.generateGuid(),name:"",scope:"c",relationship_name:"",lhs_sysdictionarydefinition_id:"",lhs_sysdictionaryitem_id:"",lhs_linkname:"",lhs_linklabel:"",lhs_duplicatemerge:1,rhs_sysdictionarydefinition_id:"",rhs_sysdictionaryitem_id:"",rhs_linkname:"",rhs_linklabel:"",rhs_duplicatemerge:0,rhs_relatename:"",rhs_relatelabel:"",relationship_type:"",deleted:0,status:"d"}}ngOnInit(){this.setDefaults()}get relatedIds(){return this.dictionarymanager.dictionarydefinitions.filter((e=>"module"==e.sysdictionary_type)).sort(((e,t)=>e.name.localeCompare(t.name)))}setDefaults(){this.relationship.relationship_type="one-to-many-polymorph",this.relationship.rhs_sysdictionarydefinition_id=this.dictionarymanager.currentDictionaryDefinition,this.relationship.name="parent";let e=this.dictionarymanager.getDictionaryDefinitionItems(this.relationship.rhs_sysdictionarydefinition_id).find((e=>"parent_id"==e.name));e&&(this.relationship.rhs_sysdictionaryitem_id=e.id);let t=this.dictionarymanager.getDictionaryDefinitionItems(this.relationship.rhs_sysdictionarydefinition_id).find((e=>"parent_type"==e.name));t&&(this.relationship.relationship_role_column=t.id)}close(){this.self.destroy()}add(){this.backend.postRequest(`dictionary/relationship/${this.relationship.id}`,{},{relationship:this.relationship,relationshippolymorphs:this.relationshipPolymorphs}).subscribe({next:e=>{this.dictionarymanager.pushNewRelationshipToArray(this.relationship),this.close()}})}static#e=this.ɵfac=function(e){return new(e||DictionaryManagerRelationshipAddOneToManyPolymorph)(m.rXU(j),m.rXU(p.H),m.rXU(f.yu),m.rXU(b.B),m.rXU(R.y),m.rXU(m.zZn),m.rXU(y.g))};static#t=this.ɵcmp=m.VBU({type:DictionaryManagerRelationshipAddOneToManyPolymorph,selectors:[["ng-component"]],decls:10,vars:2,consts:[[3,"close"],["label","LBL_ONE_TO_MANY_POLYMORPH"],[3,"relationship","relationshipPolymorphs"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_ADD"]],template:function(e,t){1&e&&(m.j41(0,"system-modal")(1,"system-modal-header",0),m.bIt("close",(function(){return t.close()})),m.nrm(2,"system-label",1),m.k0s(),m.j41(3,"system-modal-content"),m.nrm(4,"dictionary-manager-relationship-container-onetomanypolymorph",2),m.k0s(),m.j41(5,"system-modal-footer")(6,"button",3),m.bIt("click",(function(){return t.close()})),m.nrm(7,"system-label",4),m.k0s(),m.j41(8,"button",5),m.bIt("click",(function(){return t.add()})),m.nrm(9,"system-label",6),m.k0s()()()),2&e&&(m.R7$(4),m.Y8G("relationship",t.relationship)("relationshipPolymorphs",t.relationshipPolymorphs))},dependencies:[x.W,qe.D,Pe.I,Je.Q,We.C,Qt],encapsulation:2})}return DictionaryManagerRelationshipAddOneToManyPolymorph})();var Hs=s(10063);function zs(e,t){if(1&e&&(m.j41(0,"option",24),m.EFF(1),m.k0s()),2&e){const e=t.$implicit;m.Y8G("value",e.id),m.R7$(),m.JRh(e.name)}}function qs(e,t){if(1&e&&(m.j41(0,"option",24),m.EFF(1),m.k0s()),2&e){const e=t.$implicit;m.Y8G("value",e.id),m.R7$(),m.JRh(e.name)}}function Ps(e,t){1&e&&(m.j41(0,"option",25),m.nrm(1,"system-label",26),m.k0s())}let Js=(()=>{class DictionaryManagerRelationshipContainerOneToManyPolymorphAddRelated{constructor(e,t,s,i,n,l){this.dictionarymanager=e,this.metadata=t,this.language=s,this.modal=i,this.injector=n,this.modelutilities=l,this.scope="g",this.lhs_items=[],this.newrelated=new m.bkB}get relatedIds(){return this.dictionarymanager.dictionarydefinitions.filter((e=>"module"==e.sysdictionary_type)).sort(((e,t)=>e.name.localeCompare(t.name)))}get lhsRelatedId(){return this._lhsRelatedId}set lhsRelatedId(e){this._lhsRelatedId=e,this.lhs_sysdictionaryitem_id="",this.lhs_items=this.dictionarymanager.getDictionaryDefinitionItems(e)}ngOnInit(){this.scope="all"==this.dictionarymanager.changescope?this.relationshipscope:"c"}save(){let e={id:this.modelutilities.generateGuid(),relationship_id:this.relationship_id,lhs_sysdictionarydefinition_id:this._lhsRelatedId,lhs_sysdictionaryitem_id:this.lhs_sysdictionaryitem_id,scope:this.scope,package:this.package,version:this.version};this.newrelated.emit(e),this.close()}close(){this.self.destroy()}static#e=this.ɵfac=function(e){return new(e||DictionaryManagerRelationshipContainerOneToManyPolymorphAddRelated)(m.rXU(j),m.rXU(f.yu),m.rXU(b.B),m.rXU(R.y),m.rXU(m.zZn),m.rXU(y.g))};static#t=this.ɵcmp=m.VBU({type:DictionaryManagerRelationshipContainerOneToManyPolymorphAddRelated,selectors:[["dictionary-manager-relationship-container-onetomanypolymorph-addrelated"]],outputs:{newrelated:"newrelated"},decls:39,vars:11,consts:[["size","small"],[3,"close"],[1,"slds-form-element"],[1,"slds-form-element__label"],["label","LBL_RIGHT_SIDE"],[1,"slds-form-element__control"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["label","LBL_RHS_SYSDICTIONARYITEM"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],[1,"slds-form-element__control","slds-p-around--xx-small"],[1,"slds-required"],["label","LBL_SCOPE"],["value","g",4,"ngIf"],["value","c"],["label","LBL_CUSTOM"],["label","LBL_PACKAGE"],[3,"ngModel","ngModelChange"],["label","LBL_VERSION"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CLOSE"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_ADD"],[3,"value"],["value","g"],["label","LBL_GLOBAL"]],template:function(e,t){1&e&&(m.j41(0,"system-modal",0)(1,"system-modal-header-empty",1),m.bIt("close",(function(){return t.close()})),m.k0s(),m.j41(2,"system-modal-content")(3,"div",2)(4,"label",3),m.nrm(5,"system-label",4),m.k0s(),m.j41(6,"div",5)(7,"div",6)(8,"select",7),m.mxI("ngModelChange",(function(e){return m.DH7(t.lhsRelatedId,e)||(t.lhsRelatedId=e),e})),m.DNE(9,zs,2,2,"option",8),m.k0s()()()(),m.j41(10,"div",2)(11,"label",3),m.nrm(12,"system-label",9),m.k0s(),m.j41(13,"div",6)(14,"select",10),m.mxI("ngModelChange",(function(e){return m.DH7(t.lhs_sysdictionaryitem_id,e)||(t.lhs_sysdictionaryitem_id=e),e})),m.DNE(15,qs,2,2,"option",8),m.k0s()()(),m.j41(16,"div",11)(17,"label",3)(18,"abbr",12),m.EFF(19,"* "),m.k0s(),m.nrm(20,"system-label",13),m.k0s(),m.j41(21,"div",6)(22,"select",10),m.mxI("ngModelChange",(function(e){return m.DH7(t.scope,e)||(t.scope=e),e})),m.DNE(23,Ps,2,0,"option",14),m.j41(24,"option",15),m.nrm(25,"system-label",16),m.k0s()()()(),m.j41(26,"div",11)(27,"label",3),m.nrm(28,"system-label",17),m.k0s(),m.j41(29,"system-input-text",18),m.mxI("ngModelChange",(function(e){return m.DH7(t.package,e)||(t.package=e),e})),m.k0s()(),m.j41(30,"div",11)(31,"label",3),m.nrm(32,"system-label",19),m.k0s(),m.j41(33,"system-input-text",18),m.mxI("ngModelChange",(function(e){return m.DH7(t.version,e)||(t.version=e),e})),m.k0s()()(),m.j41(34,"system-modal-footer")(35,"button",20),m.bIt("click",(function(){return t.close()})),m.nrm(36,"system-label",21),m.k0s(),m.j41(37,"button",22),m.bIt("click",(function(){return t.save()})),m.nrm(38,"system-label",23),m.k0s()()()),2&e&&(m.R7$(8),m.R50("ngModel",t.lhsRelatedId),m.R7$(),m.Y8G("ngForOf",t.relatedIds),m.R7$(5),m.Y8G("disabled",!t._lhsRelatedId),m.R50("ngModel",t.lhs_sysdictionaryitem_id),m.R7$(),m.Y8G("ngForOf",t.lhs_items),m.R7$(7),m.Y8G("disabled","c"==t.relationshipscope),m.R50("ngModel",t.scope),m.R7$(),m.Y8G("ngIf","all"==t.dictionarymanager.changescope),m.R7$(6),m.R50("ngModel",t.package),m.R7$(4),m.R50("ngModel",t.version),m.R7$(4),m.Y8G("disabled",!t.lhs_sysdictionaryitem_id))},dependencies:[i.Sq,i.bT,n.xH,n.y7,n.wz,n.BC,n.vS,D.H,x.W,qe.D,Pe.I,Je.Q,Hs.b],encapsulation:2})}return DictionaryManagerRelationshipContainerOneToManyPolymorphAddRelated})(),Ws=(()=>{class DictionaryManagerRelationshipAddParent{constructor(e,t,s,i,n,l){this.dictionarymanager=e,this.metadata=t,this.language=s,this.modal=i,this.injector=n,this.modelutilities=l,this.relationship={id:this.modelutilities.generateGuid(),name:"",scope:"c",relationship_name:"",lhs_sysdictionarydefinition_id:"",lhs_sysdictionaryitem_id:"",lhs_linkname:"",lhs_linklabel:"",lhs_duplicatemerge:1,rhs_sysdictionarydefinition_id:"",rhs_sysdictionaryitem_id:"",rhs_linkname:"",rhs_linklabel:"",rhs_duplicatemerge:0,rhs_relatename:"",rhs_relatelabel:"",relationship_type:"parent",deleted:0,status:"d"}}ngOnInit(){this.setDefaults()}setDefaults(){this.relationship.name=this.dictionarymanager.dictionarydefinitions.find((e=>e.id==this.relationship.lhs_sysdictionarydefinition_id)).tablename.toLowerCase(),this.relationship.relationship_name=this.dictionarymanager.dictionarydefinitions.find((e=>e.id==this.relationship.lhs_sysdictionarydefinition_id)).tablename.toLowerCase()+"_"+this.dictionarymanager.dictionarydefinitions.find((e=>e.id==this.relationship.rhs_sysdictionarydefinition_id)).tablename.toLowerCase();let e=this.dictionarymanager.getDictionaryDefinitionItems(this.relationship.lhs_sysdictionarydefinition_id).find((e=>"id"==e.name));e&&(this.relationship.lhs_sysdictionaryitem_id=e.id),this.relationship.rhs_linkname=this.dictionarymanager.getDictionaryDefinitionName(this.relationship.lhs_sysdictionarydefinition_id).toLowerCase(),this.relationship.lhs_linkname=this.dictionarymanager.dictionarydefinitions.find((e=>e.id==this.relationship.rhs_sysdictionarydefinition_id)).tablename.toLowerCase()}close(){this.self.destroy()}add(){this.dictionarymanager.dictionaryrelationships.push({...this.relationship}),this.close()}static#e=this.ɵfac=function(e){return new(e||DictionaryManagerRelationshipAddParent)(m.rXU(j),m.rXU(f.yu),m.rXU(b.B),m.rXU(R.y),m.rXU(m.zZn),m.rXU(y.g))};static#t=this.ɵcmp=m.VBU({type:DictionaryManagerRelationshipAddParent,selectors:[["ng-component"]],decls:10,vars:1,consts:[[3,"close"],["label","LBL_PARENT"],[3,"relationship"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_ADD"]],template:function(e,t){1&e&&(m.j41(0,"system-modal")(1,"system-modal-header",0),m.bIt("close",(function(){return t.close()})),m.nrm(2,"system-label",1),m.k0s(),m.j41(3,"system-modal-content"),m.nrm(4,"dictionary-manager-relationship-container-parent",2),m.k0s(),m.j41(5,"system-modal-footer")(6,"button",3),m.bIt("click",(function(){return t.close()})),m.nrm(7,"system-label",4),m.k0s(),m.j41(8,"button",5),m.bIt("click",(function(){return t.add()})),m.nrm(9,"system-label",6),m.k0s()()()),2&e&&(m.R7$(4),m.Y8G("relationship",t.relationship))},dependencies:[x.W,qe.D,Pe.I,Je.Q,We.C,ys],encapsulation:2})}return DictionaryManagerRelationshipAddParent})();function Ks(e,t){1&e&&(m.j41(0,"option",30),m.nrm(1,"system-label",31),m.k0s())}function Qs(e,t){if(1&e&&(m.j41(0,"div",41)(1,"span",42),m.EFF(2),m.k0s()()),2&e){const e=t.$implicit;m.Y8G("cdkDragData",e),m.R7$(2),m.JRh(e.name)}}function Zs(e,t){if(1&e&&(m.j41(0,"div",41)(1,"span",42),m.EFF(2),m.k0s()()),2&e){const e=t.$implicit;m.Y8G("cdkDragData",e),m.R7$(2),m.JRh(e.name)}}const ei=e=>[e];function ti(e,t){if(1&e){const e=m.RV6();m.j41(0,"div",2)(1,"div",32)(2,"span",4),m.nrm(3,"system-label",33),m.k0s(),m.j41(4,"div",34,35),m.bIt("cdkDropListDropped",(function(t){m.eBV(e);const s=m.XpG();return m.Njj(s.onFieldDrop(t))})),m.DNE(6,Qs,3,2,"div",36),m.k0s()(),m.j41(7,"div",37)(8,"span",4),m.nrm(9,"system-label",38),m.k0s(),m.j41(10,"div",39,40),m.bIt("cdkDropListDropped",(function(t){m.eBV(e);const s=m.XpG();return m.Njj(s.onFieldDrop(t))})),m.DNE(12,Zs,3,2,"div",36),m.k0s()()()}if(2&e){const e=m.sdS(5),t=m.sdS(11),s=m.XpG();m.R7$(4),m.Y8G("cdkDropListData",s.availableDictionaryItems)("cdkDropListConnectedTo",m.eq3(6,ei,t)),m.R7$(2),m.Y8G("ngForOf",s.availableDictionaryItems),m.R7$(4),m.Y8G("cdkDropListData",s.indexDictionaryItems)("cdkDropListConnectedTo",m.eq3(8,ei,e)),m.R7$(2),m.Y8G("ngForOf",s.indexDictionaryItems)}}function si(e,t){if(1&e&&(m.j41(0,"option",48),m.EFF(1),m.k0s()),2&e){const e=t.$implicit;m.Y8G("ngValue",e.id),m.R7$(),m.JRh(e.name)}}function ii(e,t){if(1&e&&(m.j41(0,"option",48),m.EFF(1),m.k0s()),2&e){const e=t.$implicit;m.Y8G("ngValue",e.id),m.R7$(),m.JRh(e.name)}}function ni(e,t){if(1&e&&(m.j41(0,"option",48),m.EFF(1),m.k0s()),2&e){const e=t.$implicit;m.Y8G("ngValue",e.id),m.R7$(),m.JRh(e.name)}}function li(e,t){if(1&e){const e=m.RV6();m.j41(0,"div",2)(1,"div",32)(2,"div",43)(3,"label",4),m.EFF(4,"Item"),m.k0s(),m.j41(5,"div",44)(6,"div",10)(7,"select",45),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.dictionaryItemId,t)||(s.dictionaryItemId=t),m.Njj(t)})),m.DNE(8,si,2,2,"option",46),m.k0s()()()()(),m.j41(9,"div",47)(10,"div",43)(11,"label",4),m.EFF(12,"foreign Definition"),m.k0s(),m.j41(13,"div",44)(14,"div",10)(15,"select",45),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.dictionaryForeignDefinitionId,t)||(s.dictionaryForeignDefinitionId=t),m.Njj(t)})),m.DNE(16,ii,2,2,"option",46),m.k0s()()()()(),m.j41(17,"div",47)(18,"div",43)(19,"label",4),m.EFF(20,"Foreign Item"),m.k0s(),m.j41(21,"div",44)(22,"div",10)(23,"select",16),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.dictionaryForeignItemId,t)||(s.dictionaryForeignItemId=t),m.Njj(t)})),m.DNE(24,ni,2,2,"option",46),m.k0s()()()()()()}if(2&e){const e=m.XpG();m.R7$(7),m.R50("ngModel",e.dictionaryItemId),m.R7$(),m.Y8G("ngForOf",e.availableDictionaryItems),m.R7$(7),m.R50("ngModel",e.dictionaryForeignDefinitionId),m.R7$(),m.Y8G("ngForOf",e.foreignDefinitions),m.R7$(7),m.Y8G("disabled",!e.dictionaryForeignDefinitionId),m.R50("ngModel",e.dictionaryForeignItemId),m.R7$(),m.Y8G("ngForOf",e.foreignItems)}}let oi=(()=>{class DictionaryManagerIndexAdd{constructor(e,t,s,i,n){this.backend=e,this.modal=t,this.dictionarymanager=s,this.injector=i,this.modelutilities=n,this.availableDictionaryItems=[],this.indexDictionaryItems=[];let l=this.dictionarymanager.dictionarydefinitions.find((e=>e.id==this.dictionarymanager.currentDictionaryDefinition)).tablename;this.index={id:this.modelutilities.generateGuid(),name:"idx_"+(l||"{tablename}")+"_",sysdictionarydefinition_id:this.dictionarymanager.currentDictionaryDefinition,status:"d",scope:this.dictionarymanager.currentDictionaryScope,indextype:"index"},this.availableDictionaryItems=this.dictionarymanager.getDictionaryDefinitionItems(this.dictionarymanager.currentDictionaryDefinition).sort(((e,t)=>e.name.localeCompare(t.name)))}get foreignDefinitions(){return this.dictionarymanager.dictionarydefinitions.filter((e=>"template"!=e.sysdictionary_type)).sort(((e,t)=>e.name.localeCompare(t.name)))}get foreignItems(){return this.dictionarymanager.getDictionaryDefinitionItems(this.dictionaryForeignDefinitionId).sort(((e,t)=>e.name.localeCompare(t.name)))}ngOnInit(){switch(this.index.indextype){case"primary":this.index.name+="pk";break;case"foreign":this.index.name=this.index.name.replace("idx_","idx_fk_"),this.defaultName=this.index.name;break;default:this.defaultName=this.index.name}}close(){this.self.destroy()}get canAdd(){return!!this.index.name&&(this.index.name!=this.defaultName&&(!(this.dictionarymanager.dictionaryindexes.filter((e=>e.name==this.index.name&&("template"!=this.dictionarymanager.getCurrentDefinition().sysdictionary_type||this.dictionarymanager.currentDictionaryDefinition==e.sysdictionarydefinition_id))).length>0)&&(("foreign"==this.index.indextype||0!=this.indexDictionaryItems.length)&&!!("foreign"!=this.index.indextype||this.dictionaryItemId&&this.dictionaryForeignItemId))))}add(){let e=[];if("foreign"===this.index.indextype)e.push({id:this.modelutilities.generateGuid(),scope:this.index.scope,status:this.index.status,sysdictionaryindex_id:this.index.id,sysdictionaryitem_id:this.dictionaryItemId,sysdictionaryforeigndefinition_id:this.dictionaryForeignDefinitionId,sysdictionaryforeignitem_id:this.dictionaryForeignItemId,sequence:0});else{let t=0;for(let s of this.indexDictionaryItems)e.push({id:this.modelutilities.generateGuid(),scope:this.index.scope,status:this.index.status,sysdictionaryindex_id:this.index.id,sysdictionaryitem_id:s.id,sequence:t}),t++}let t=this.modal.await("LBL_SAVING");this.backend.postRequest(`dictionary/index/${this.index.id}`,{},{index:this.index,items:e}).subscribe({next:s=>{this.dictionarymanager.dictionaryindexes.push({...this.index}),e.forEach((e=>this.dictionarymanager.dictionaryindexitems.push(e))),t.emit(!0),this.close()},error:()=>{t.emit(!0)}})}onFieldDrop(e){let t=e.previousContainer.data.splice(e.previousIndex,1);e.container.data.splice(e.currentIndex,0,t[0])}static#e=this.ɵfac=function(e){return new(e||DictionaryManagerIndexAdd)(m.rXU(p.H),m.rXU(R.y),m.rXU(j),m.rXU(m.zZn),m.rXU(y.g))};static#t=this.ɵcmp=m.VBU({type:DictionaryManagerIndexAdd,selectors:[["ng-component"]],decls:50,vars:11,consts:[[3,"close"],["label","LBL_ADD_INDEX"],[1,"slds-grid"],[1,"slds-form-element__control","slds-size--1-of-2","slds-p-right--xxx-small"],[1,"slds-form-element__label"],[1,"slds-required"],["label","LBL_NAME"],[3,"maxlength","ngModel","ngModelChange"],[1,"slds-large-size--1-of-2","slds-p-left--xxx-small","slds-form-element__control"],["label","LBL_TYPE"],[1,"slds-select_container"],["disabled","",1,"slds-select",3,"ngModel","ngModelChange"],["value","index"],["value","unique"],["value","foreign"],["label","LBL_SCOPE"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],["value","g",4,"ngIf"],["value","c"],["label","LBL_CUSTOM"],[1,"slds-size--1-of-4","slds-p-horizontal--xxx-small","slds-form-element__control"],["label","LBL_PACKAGE"],[3,"ngModel","ngModelChange"],[1,"slds-size--1-of-4","slds-p-left--xxx-small","slds-form-element__control"],["label","LBL_VERSION"],["class","slds-grid",4,"ngIf"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_ADD"],["value","g"],["label","LBL_GLOBAL"],[1,"slds-form-element","slds-p-right--x-small","slds-size--1-of-2"],["label","LBL_AVAILABLE_ITEMS"],["cdkDropList","",1,"slds-picklist","slds-picklist__options","slds-size--1-of-1",2,"height","50vh",3,"cdkDropListData","cdkDropListConnectedTo","cdkDropListDropped"],["listOne","cdkDropList"],["cdkDrag","","class","slds-drag--preview slds-picklist__item",3,"cdkDragData",4,"ngFor","ngForOf"],[1,"slds-form-element","slds-p-left--x-small","slds-size--1-of-2"],["label","LBL_INDEX_ITEMS"],["cdkDropList","",1,"slds-picklist","slds-picklist__options","slds-size--1-of-1","cdk-drag",2,"height","50vh",3,"cdkDropListData","cdkDropListConnectedTo","cdkDropListDropped"],["listTwo","cdkDropList"],["cdkDrag","",1,"slds-drag--preview","slds-picklist__item",3,"cdkDragData"],[1,"slds-truncate"],[1,"slds-form-element"],[1,"slds-form-element__control"],[1,"slds-select",3,"ngModel","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"slds-form-element","slds-p-right--x-small","slds-size--1-of-4"],[3,"ngValue"]],template:function(e,t){1&e&&(m.j41(0,"system-modal")(1,"system-modal-header",0),m.bIt("close",(function(){return t.close()})),m.nrm(2,"system-label",1),m.k0s(),m.j41(3,"system-modal-content")(4,"div",2)(5,"div",3)(6,"label",4)(7,"abbr",5),m.EFF(8,"* "),m.k0s(),m.nrm(9,"system-label",6),m.k0s(),m.j41(10,"system-input-text",7),m.mxI("ngModelChange",(function(e){return m.DH7(t.index.name,e)||(t.index.name=e),e})),m.k0s()(),m.j41(11,"div",8)(12,"label",4)(13,"abbr",5),m.EFF(14,"* "),m.k0s(),m.nrm(15,"system-label",9),m.k0s(),m.j41(16,"div",10)(17,"select",11),m.mxI("ngModelChange",(function(e){return m.DH7(t.index.indextype,e)||(t.index.indextype=e),e})),m.j41(18,"option",12),m.EFF(19,"index"),m.k0s(),m.j41(20,"option",13),m.EFF(21,"unique"),m.k0s(),m.j41(22,"option",14),m.EFF(23,"foreign"),m.k0s()()()()(),m.j41(24,"div",2)(25,"div",3)(26,"label",4)(27,"abbr",5),m.EFF(28,"* "),m.k0s(),m.nrm(29,"system-label",15),m.k0s(),m.j41(30,"div",10)(31,"select",16),m.mxI("ngModelChange",(function(e){return m.DH7(t.index.scope,e)||(t.index.scope=e),e})),m.DNE(32,Ks,2,0,"option",17),m.j41(33,"option",18),m.nrm(34,"system-label",19),m.k0s()()()(),m.j41(35,"div",20)(36,"label",4),m.nrm(37,"system-label",21),m.k0s(),m.j41(38,"system-input-text",22),m.mxI("ngModelChange",(function(e){return m.DH7(t.index.package,e)||(t.index.package=e),e})),m.k0s()(),m.j41(39,"div",23)(40,"label",4),m.nrm(41,"system-label",24),m.k0s(),m.j41(42,"system-input-text",22),m.mxI("ngModelChange",(function(e){return m.DH7(t.index.version,e)||(t.index.version=e),e})),m.k0s()()(),m.DNE(43,ti,13,10,"div",25)(44,li,25,7,"div",25),m.k0s(),m.j41(45,"system-modal-footer")(46,"button",26),m.bIt("click",(function(){return t.close()})),m.nrm(47,"system-label",27),m.k0s(),m.j41(48,"button",28),m.bIt("click",(function(){return t.add()})),m.nrm(49,"system-label",29),m.k0s()()()),2&e&&(m.R7$(10),m.Y8G("maxlength",128),m.R50("ngModel",t.index.name),m.R7$(7),m.R50("ngModel",t.index.indextype),m.R7$(14),m.Y8G("disabled","c"==t.dictionarymanager.currentDictionaryScope),m.R50("ngModel",t.index.scope),m.R7$(),m.Y8G("ngIf","all"==t.dictionarymanager.changescope),m.R7$(6),m.R50("ngModel",t.index.package),m.R7$(4),m.R50("ngModel",t.index.version),m.R7$(),m.Y8G("ngIf","foreign"!=t.index.indextype),m.R7$(),m.Y8G("ngIf","foreign"==t.index.indextype),m.R7$(4),m.Y8G("disabled",!t.canAdd))},dependencies:[i.Sq,i.bT,n.xH,n.y7,n.wz,n.BC,n.tU,n.vS,D.H,x.W,qe.D,Pe.I,Je.Q,We.C,c.O7,c.T1],encapsulation:2})}return DictionaryManagerIndexAdd})(),ai=(()=>{class DictionaryManagerIndexAddType{constructor(e,t,s){this.dictionarymanager=e,this.injector=t,this.modal=s,this.indextype="",this.primaryindexdefined=!1,this.primaryindexdefined=this.dictionarymanager.dictionaryindexes.filter((e=>e.sysdictionarydefinition_id==this.dictionarymanager.currentDictionaryDefinition&&"primary"==e.indextype)).length>0}close(){this.self.destroy()}add(){this.modal.openModal("DictionaryManagerIndexAdd",!0,this.injector).subscribe({next:e=>{e.instance.index.indextype=this.indextype}}),this.close()}static#e=this.ɵfac=function(e){return new(e||DictionaryManagerIndexAddType)(m.rXU(j),m.rXU(m.zZn),m.rXU(R.y))};static#t=this.ɵcmp=m.VBU({type:DictionaryManagerIndexAddType,selectors:[["ng-component"]],decls:16,vars:3,consts:[["size","small"],[3,"close"],["label","LBL_CHOOSE_TYPE"],[1,"slds-grid","slds-grid--vertical"],["name","indextype","value","index",3,"ngModel","ngModelChange"],["name","indextype","value","unique",3,"ngModel","ngModelChange"],["name","indextype","value","foreign",3,"ngModel","ngModelChange"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_ADD"]],template:function(e,t){1&e&&(m.j41(0,"system-modal",0)(1,"system-modal-header",1),m.bIt("close",(function(){return t.close()})),m.nrm(2,"system-label",2),m.k0s(),m.j41(3,"system-modal-content")(4,"div",3)(5,"system-input-radio",4),m.mxI("ngModelChange",(function(e){return m.DH7(t.indextype,e)||(t.indextype=e),e})),m.EFF(6,"index"),m.k0s(),m.j41(7,"system-input-radio",5),m.mxI("ngModelChange",(function(e){return m.DH7(t.indextype,e)||(t.indextype=e),e})),m.EFF(8,"unique"),m.k0s(),m.j41(9,"system-input-radio",6),m.mxI("ngModelChange",(function(e){return m.DH7(t.indextype,e)||(t.indextype=e),e})),m.EFF(10,"foreign"),m.k0s()()(),m.j41(11,"system-modal-footer")(12,"button",7),m.bIt("click",(function(){return t.close()})),m.nrm(13,"system-label",8),m.k0s(),m.j41(14,"button",9),m.bIt("click",(function(){return t.add()})),m.nrm(15,"system-label",10),m.k0s()()()),2&e&&(m.R7$(5),m.R50("ngModel",t.indextype),m.R7$(2),m.R50("ngModel",t.indextype),m.R7$(2),m.R50("ngModel",t.indextype))},dependencies:[n.BC,n.vS,at.J,x.W,qe.D,Pe.I,Je.Q,We.C],encapsulation:2})}return DictionaryManagerIndexAddType})();function di(e,t){1&e&&(m.j41(0,"option",28),m.nrm(1,"system-label",29),m.k0s())}function ri(e,t){if(1&e&&(m.j41(0,"div",39)(1,"span",40),m.EFF(2),m.k0s()()),2&e){const e=t.$implicit;m.Y8G("cdkDragData",e),m.R7$(2),m.JRh(e.name)}}function ci(e,t){if(1&e&&(m.j41(0,"div",39)(1,"span",40),m.EFF(2),m.k0s()()),2&e){const e=t.$implicit;m.Y8G("cdkDragData",e),m.R7$(2),m.JRh(e.name)}}const mi=e=>[e];function ui(e,t){if(1&e){const e=m.RV6();m.j41(0,"div",5)(1,"div",30)(2,"span",7),m.nrm(3,"system-label",31),m.k0s(),m.j41(4,"div",32,33),m.bIt("cdkDropListDropped",(function(t){m.eBV(e);const s=m.XpG(2);return m.Njj(s.onFieldDrop(t))})),m.DNE(6,ri,3,2,"div",34),m.k0s()(),m.j41(7,"div",35)(8,"span",7),m.nrm(9,"system-label",36),m.k0s(),m.j41(10,"div",37,38),m.bIt("cdkDropListDropped",(function(t){m.eBV(e);const s=m.XpG(2);return m.Njj(s.onFieldDrop(t))})),m.DNE(12,ci,3,2,"div",34),m.k0s()()()}if(2&e){const e=m.sdS(5),t=m.sdS(11),s=m.XpG(2);m.R7$(4),m.Y8G("cdkDropListData",s.availableDictionaryItems)("cdkDropListConnectedTo",m.eq3(6,mi,t)),m.R7$(2),m.Y8G("ngForOf",s.availableDictionaryItems),m.R7$(4),m.Y8G("cdkDropListData",s.indexDictionaryItems)("cdkDropListConnectedTo",m.eq3(8,mi,e)),m.R7$(2),m.Y8G("ngForOf",s.indexDictionaryItems)}}function gi(e,t){if(1&e&&(m.j41(0,"option",47),m.EFF(1),m.k0s()),2&e){const e=t.$implicit;m.Y8G("ngValue",e.id),m.R7$(),m.JRh(e.name)}}function hi(e,t){if(1&e&&(m.j41(0,"option",47),m.EFF(1),m.k0s()),2&e){const e=t.$implicit;m.Y8G("ngValue",e.id),m.R7$(),m.JRh(e.name)}}function pi(e,t){if(1&e&&(m.j41(0,"option",47),m.EFF(1),m.k0s()),2&e){const e=t.$implicit;m.Y8G("ngValue",e.id),m.R7$(),m.JRh(e.name)}}function fi(e,t){if(1&e){const e=m.RV6();m.j41(0,"div",5)(1,"div",30)(2,"div",41)(3,"label",7),m.EFF(4,"Item"),m.k0s(),m.j41(5,"div",42)(6,"div",12)(7,"select",43),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG(2);return m.DH7(s.dictionaryItemId,t)||(s.dictionaryItemId=t),m.Njj(t)})),m.DNE(8,gi,2,2,"option",44),m.k0s()()()()(),m.j41(9,"div",45)(10,"div",41)(11,"label",7),m.EFF(12,"foreign Definition"),m.k0s(),m.j41(13,"div",42)(14,"div",12)(15,"select",43),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG(2);return m.DH7(s.dictionaryForeignDefinitionId,t)||(s.dictionaryForeignDefinitionId=t),m.Njj(t)})),m.DNE(16,hi,2,2,"option",44),m.k0s()()()()(),m.j41(17,"div",45)(18,"div",41)(19,"label",7),m.EFF(20,"Foreign Item"),m.k0s(),m.j41(21,"div",42)(22,"div",12)(23,"select",46),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG(2);return m.DH7(s.dictionaryForeignItemId,t)||(s.dictionaryForeignItemId=t),m.Njj(t)})),m.DNE(24,pi,2,2,"option",44),m.k0s()()()()()()}if(2&e){const e=m.XpG(2);m.R7$(7),m.R50("ngModel",e.dictionaryItemId),m.R7$(),m.Y8G("ngForOf",e.availableDictionaryItems),m.R7$(7),m.R50("ngModel",e.dictionaryForeignDefinitionId),m.R7$(),m.Y8G("ngForOf",e.foreignDefinitions),m.R7$(7),m.Y8G("disabled",!e.dictionaryForeignDefinitionId),m.R50("ngModel",e.dictionaryForeignItemId),m.R7$(),m.Y8G("ngForOf",e.foreignItems)}}function bi(e,t){if(1&e){const e=m.RV6();m.j41(0,"div")(1,"div",1),m.nrm(2,"system-label",2),m.k0s(),m.j41(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"label",7),m.nrm(8,"system-label",8),m.k0s(),m.j41(9,"system-input-text",9),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.index.name,t)||(s.index.name=t),m.Njj(t)})),m.k0s()(),m.j41(10,"div",10)(11,"label",7),m.nrm(12,"system-label",11),m.k0s(),m.j41(13,"div",12)(14,"select",13),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.index.indextype,t)||(s.index.indextype=t),m.Njj(t)})),m.j41(15,"option",14),m.EFF(16,"primary"),m.k0s(),m.j41(17,"option",15),m.EFF(18,"index"),m.k0s(),m.j41(19,"option",16),m.EFF(20,"unique"),m.k0s(),m.j41(21,"option",17),m.EFF(22,"foreign"),m.k0s()()()()(),m.j41(23,"div",5)(24,"div",6)(25,"label",7),m.nrm(26,"system-label",18),m.k0s(),m.j41(27,"div",12)(28,"select",13),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.index.scope,t)||(s.index.scope=t),m.Njj(t)})),m.DNE(29,di,2,0,"option",19),m.j41(30,"option",20),m.nrm(31,"system-label",21),m.k0s()()()(),m.j41(32,"div",22)(33,"label",7),m.nrm(34,"system-label",23),m.k0s(),m.j41(35,"system-input-text",24),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.index.package,t)||(s.index.package=t),m.Njj(t)})),m.k0s()(),m.j41(36,"div",25)(37,"label",7),m.nrm(38,"system-label",26),m.k0s(),m.j41(39,"system-input-text",24),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.index.version,t)||(s.index.version=t),m.Njj(t)})),m.k0s()()(),m.DNE(40,ui,13,10,"div",27)(41,fi,25,7,"div",27),m.k0s()()()}if(2&e){const e=m.XpG();m.R7$(9),m.R50("ngModel",e.index.name),m.R7$(5),m.R50("ngModel",e.index.indextype),m.R7$(14),m.R50("ngModel",e.index.scope),m.R7$(),m.Y8G("ngIf","all"==e.dictionarymanager.changescope),m.R7$(6),m.R50("ngModel",e.index.package),m.R7$(4),m.R50("ngModel",e.index.version),m.R7$(),m.Y8G("ngIf","foreign"!=e.index.indextype),m.R7$(),m.Y8G("ngIf","foreign"==e.index.indextype)}}let yi=(()=>{class DictionaryManagerIndexDetails{constructor(e,t,s,i,n,l){this.dictionarymanager=e,this.metadata=t,this.language=s,this.modal=i,this.injector=n,this.modelutilities=l,this.availableDictionaryItems=[],this.indexDictionaryItems=[]}ngOnChanges(e){if(this.indexid)if(this.index=this.dictionarymanager.dictionaryindexes.find((e=>e.id==this.indexid)),this.availableDictionaryItems=this.dictionarymanager.getDictionaryDefinitionItems(this.dictionarymanager.currentDictionaryDefinition),"foreign"===this.index.indextype){let e=this.dictionarymanager.dictionaryindexitems.find((e=>e.sysdictionaryindex_id==this.indexid));this.dictionaryItemId=e.sysdictionaryitem_id,this.dictionaryForeignItemId=e.sysdictionaryforeignitem_id;let t=this.dictionarymanager.dictionaryitems.find((e=>e.id==this.dictionaryForeignItemId));this.dictionaryForeignDefinitionId=t.sysdictionarydefinition_id}else{this.indexDictionaryItems=[];let e=this.dictionarymanager.dictionaryindexitems.filter((e=>e.sysdictionaryindex_id==this.indexid)).sort(((e,t)=>e.sequence>t.sequence?1:-1));for(let t of e){let e=this.availableDictionaryItems.findIndex((e=>e.id==t.sysdictionaryitem_id));this.indexDictionaryItems.push(this.availableDictionaryItems.splice(e,1)[0])}}else this.index=null}get foreignItems(){return this.dictionarymanager.getDictionaryDefinitionItems(this.dictionaryForeignDefinitionId).sort(((e,t)=>e.name.localeCompare(t.name)))}get foreignDefinitions(){return this.dictionarymanager.dictionarydefinitions.filter((e=>"template"!=e.sysdictionary_type)).sort(((e,t)=>e.name.localeCompare(t.name)))}onFieldDrop(e){let t=e.previousContainer.data.splice(e.previousIndex,1);e.container.data.splice(e.currentIndex,0,t[0]);let s=this.dictionarymanager.dictionaryindexitems.filter((e=>e.sysdictionaryindex_id==this.indexid)),i=0,n=[];for(let e of this.indexDictionaryItems){let t=s.find((t=>t.sysdictionaryitem_id==e.id));if(t)t.sequence=i,n.push(t.id);else{let t=this.modelutilities.generateGuid();this.dictionarymanager.dictionaryindexitems.push({id:t,scope:this.index.scope,status:this.index.status,sysdictionaryindex_id:this.index.id,sysdictionaryitem_id:e.id,sequence:i}),n.push(t)}i++}}static#e=this.ɵfac=function(e){return new(e||DictionaryManagerIndexDetails)(m.rXU(j),m.rXU(f.yu),m.rXU(b.B),m.rXU(R.y),m.rXU(m.zZn),m.rXU(y.g))};static#t=this.ɵcmp=m.VBU({type:DictionaryManagerIndexDetails,selectors:[["dictionary-manager-index-details"]],inputs:{indexid:"indexid"},features:[m.OA$],decls:1,vars:1,consts:[[4,"ngIf"],[1,"slds-text-heading--small","slds-p-around--x-small","slds-theme--shade"],["label","LBL_INDEX_DETAILS"],["system-to-bottom",""],[1,"slds-p-around--x-small"],[1,"slds-grid"],[1,"slds-form-element__control","slds-size--1-of-2","slds-p-right--xxx-small"],[1,"slds-form-element__label"],["label","LBL_NAME"],["disabled","",3,"ngModel","ngModelChange"],[1,"slds-large-size--1-of-2","slds-p-left--xxx-small","slds-form-element__control"],["label","LBL_TYPE"],[1,"slds-select_container"],["disabled","",1,"slds-select",3,"ngModel","ngModelChange"],["value","primary"],["value","index"],["value","unique"],["value","foreign"],["label","LBL_SCOPE"],["value","g",4,"ngIf"],["value","c"],["label","LBL_CUSTOM"],[1,"slds-size--1-of-4","slds-p-horizontal--xxx-small","slds-form-element__control"],["label","LBL_PACKAGE"],[3,"ngModel","ngModelChange"],[1,"slds-size--1-of-4","slds-p-left--xxx-small","slds-form-element__control"],["label","LBL_VERSION"],["class","slds-grid",4,"ngIf"],["value","g"],["label","LBL_GLOBAL"],[1,"slds-form-element","slds-p-right--x-small","slds-size--1-of-2"],["label","LBL_AVAILABLE_ITEMS"],["cdkDropList","",1,"slds-picklist","slds-picklist__options","slds-size--1-of-1",3,"cdkDropListData","cdkDropListConnectedTo","cdkDropListDropped"],["listOne","cdkDropList"],["cdkDrag","","class","slds-drag--preview slds-picklist__item",3,"cdkDragData",4,"ngFor","ngForOf"],[1,"slds-form-element","slds-p-left--x-small","slds-size--1-of-2"],["label","LBL_INDEX_ITEMS"],["cdkDropList","",1,"slds-picklist","slds-picklist__options","slds-size--1-of-1","cdk-drag",3,"cdkDropListData","cdkDropListConnectedTo","cdkDropListDropped"],["listTwo","cdkDropList"],["cdkDrag","",1,"slds-drag--preview","slds-picklist__item",3,"cdkDragData"],[1,"slds-truncate"],[1,"slds-form-element"],[1,"slds-form-element__control"],[1,"slds-select",3,"ngModel","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"slds-form-element","slds-p-right--x-small","slds-size--1-of-4"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],[3,"ngValue"]],template:function(e,t){1&e&&m.DNE(0,bi,42,8,"div",0),2&e&&m.Y8G("ngIf",t.indexid)},dependencies:[i.Sq,i.bT,n.xH,n.y7,n.wz,n.BC,n.vS,D.H,x.W,F.b,c.O7,c.T1],encapsulation:2})}return DictionaryManagerIndexDetails})();function _i(e,t){if(1&e){const e=m.RV6();m.j41(0,"system-checkbox",9),m.mxI("ngModelChange",(function(t){const s=m.eBV(e).$implicit;return m.DH7(s.selected,t)||(s.selected=t),m.Njj(t)})),m.EFF(1),m.k0s()}if(2&e){const e=t.$implicit;m.R50("ngModel",e.selected),m.R7$(),m.JRh(e.name)}}let ki=(()=>{class DictionaryManagerDeleteFieldsModal{constructor(e,t,s){this.dictionarymanager=e,this.backend=t,this.modal=s,this.items=[]}get canDelete(){return this.items.filter((e=>e.selected)).length>0}delete(){let e=this.items.filter((e=>e.selected)).map((e=>e.name)),t=this.dictionarymanager.dictionarydefinitions.find((e=>e.id==this.dictionarymanager.currentDictionaryDefinition)).tablename;this.backend.deleteRequest(`dictionary/columns/${t}`,{fields:e}).subscribe({next:e=>{this.close()}})}close(){this.self.destroy()}static#e=this.ɵfac=function(e){return new(e||DictionaryManagerDeleteFieldsModal)(m.rXU(j),m.rXU(p.H),m.rXU(R.y))};static#t=this.ɵcmp=m.VBU({type:DictionaryManagerDeleteFieldsModal,selectors:[["dictionary-manager-deletefields-modal"]],decls:11,vars:1,consts:[["size","small"],[3,"close"],["label","LBL_DELETE_COLUMNS"],[1,"slds-grid","slds-grid_vertical"],[3,"ngModel","ngModelChange",4,"ngFor","ngForOf"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_DELETE"],[3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(m.j41(0,"system-modal",0)(1,"system-modal-header",1),m.bIt("close",(function(){return t.close()})),m.nrm(2,"system-label",2),m.k0s(),m.j41(3,"system-modal-content")(4,"div",3),m.DNE(5,_i,2,2,"system-checkbox",4),m.k0s()(),m.j41(6,"system-modal-footer")(7,"button",5),m.bIt("click",(function(){return t.close()})),m.nrm(8,"system-label",6),m.k0s(),m.j41(9,"button",7),m.bIt("click",(function(){return t.delete()})),m.nrm(10,"system-label",8),m.k0s()()()),2&e&&(m.R7$(5),m.Y8G("ngForOf",t.items))},dependencies:[i.Sq,n.BC,n.vS,be.f,x.W,qe.D,Pe.I,Je.Q,We.C],encapsulation:2})}return DictionaryManagerDeleteFieldsModal})(),vi=(()=>{class DictionaryManagerDeleteModal{constructor(){this.dropitem=!1}delete(){this.responseSubject.next(this.dropitem?"drop":"delete"),this.close()}close(){this.responseSubject.complete(),this.self.destroy()}static#e=this.ɵfac=function(e){return new(e||DictionaryManagerDeleteModal)};static#t=this.ɵcmp=m.VBU({type:DictionaryManagerDeleteModal,selectors:[["dictionary-manager-delete-modal"]],decls:15,vars:2,consts:[["size","prompt"],[3,"close"],[3,"label"],["icon","warning","size","small","colorclass","slds-icon-text-error"],["label","LBL_DROP_ITEM","length","long"],[1,"slds-grid","slds-grid_vertical-align-center","slds-grid--align-spread"],[3,"ngModel","ngModelChange"],["label","LBL_DROP_ITEM"],[1,"slds-col--bump-left","slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-col--bump-left","slds-button","slds-button--brand",3,"click"],["label","LBL_DELETE"]],template:function(e,t){1&e&&(m.j41(0,"system-modal",0)(1,"system-modal-header-empty",1),m.bIt("close",(function(){return t.close()})),m.k0s(),m.j41(2,"system-modal-header"),m.nrm(3,"system-label",2),m.k0s(),m.j41(4,"system-modal-content"),m.nrm(5,"system-utility-icon",3)(6,"system-label",4),m.k0s(),m.j41(7,"system-modal-footer")(8,"div",5)(9,"system-checkbox",6),m.mxI("ngModelChange",(function(e){return m.DH7(t.dropitem,e)||(t.dropitem=e),e})),m.nrm(10,"system-label",7),m.k0s(),m.j41(11,"button",8),m.bIt("click",(function(){return t.close()})),m.nrm(12,"system-label",9),m.k0s(),m.j41(13,"button",10),m.bIt("click",(function(){return t.delete()})),m.nrm(14,"system-label",11),m.k0s()()()()),2&e&&(m.R7$(3),m.Y8G("label",t.message),m.R7$(6),m.R50("ngModel",t.dropitem))},dependencies:[n.BC,n.vS,be.f,x.W,qe.D,Pe.I,Je.Q,We.C,Hs.b,u.B],encapsulation:2})}return DictionaryManagerDeleteModal})(),Ri=(()=>{class domainmanager{constructor(e,t,s,i,n,l){this.backend=e,this.metadata=t,this.modal=s,this.toast=i,this.language=n,this.modelutilities=l,this.domaindefinitions=[],this.domainfields=[],this.domainfieldvalidations=[],this.domainfieldvalidationvalues=[],this.languagelabels=[],this.languagetranslations=[],this.languagecustomlabels=[],this.languagecustomtranslations=[],this.dbtypes=["non-db","varchar","char","text","shorttext","mediumtext","longtext","date","datetime","int","tinyint","bigint","double","bool","float","json","enum","blob","longblob"],this.fieldtypes=[],this.loadDomains();for(let e in this.metadata.fieldTypeMappings)this.fieldtypes.push(e);this.fieldtypes.sort()}reloadLanguageData(){this.language.loadLanguage()}loadDomains(){let e=this.modal.await("LBL_LOADING");this.backend.getRequest("dictionary/domains").subscribe({next:t=>{this.domaindefinitions=t.domaindefinitions,this.domainfields=t.domainfields,this.domainfieldvalidations=t.domainfieldvalidations,this.domainfieldvalidationvalues=t.domainfieldvalidationvalues,this.loaded=JSON.stringify(t),e.emit(!0)},error:()=>{e.emit(!0)}})}getCurrentDefinition(){return this.currentDomainDefinition?this.domaindefinitions.find((e=>e.id==this.currentDomainDefinition)):void 0}getValidationById(e){return this.domainfieldvalidations.find((t=>t.id==e))}getValidationValuesdById(e){Array.isArray(this.domainfieldvalidationvalues)||(this.domainfieldvalidationvalues=[]);let t=this.domainfieldvalidationvalues.filter((t=>t.sysdomainfieldvalidation_id==e&&"c"==t.scope)),s=this.domainfieldvalidationvalues.filter((t=>t.sysdomainfieldvalidation_id==e&&"c"!=t.scope));for(let e of s)-1==t.findIndex((t=>t.enumvalue==e.enumvalue))&&t.push(e);return t}getStatusColor(e){switch(e){case"a":return"slds-icon-text-success";case"i":return"slds-icon-text-light";default:return"slds-icon-text-warning"}}save(){let e=this.determineChangedRecords();this.languagelabels.length>0&&(e.languagelabels=this.languagelabels,e.languagetranslations=this.languagetranslations),this.languagecustomlabels.length>0&&(e.languagecustomlabels=this.languagecustomlabels,e.languagecustomtranslations=this.languagecustomtranslations),this.backend.postRequest("dictionary/domains",{},e).subscribe({next:()=>{this.toast.sendToast("LBL_SAVED","success")},error:()=>{this.toast.sendToast("ERROR saving domains","error")}})}determineChangedRecords(){let e=JSON.parse(this.loaded),t={domaindefinitions:[],domainfields:[],domainfieldvalidations:[],domainfieldvalidationvalues:[]};for(let s in t)for(let i of this[s]){let n=e[s].find((e=>e.id==i.id));(!n||n&&JSON.stringify(n)!=JSON.stringify(i))&&t[s].push(i)}return t}static#e=this.ɵfac=function(e){return new(e||domainmanager)(m.KVO(p.H),m.KVO(f.yu),m.KVO(R.y),m.KVO(v.o),m.KVO(b.B),m.KVO(y.g))};static#t=this.ɵprov=m.jDH({token:domainmanager,factory:domainmanager.ɵfac})}return domainmanager})();var Mi=s(40553);const ji=["itemscontainer"];function Li(e,t){if(1&e&&(m.j41(0,"option",26),m.EFF(1),m.k0s()),2&e){const e=t.$implicit;m.Y8G("value",e),m.R7$(),m.JRh(e)}}const xi=e=>({"slds-is-selected":e});function Ii(e,t){if(1&e){const e=m.RV6();m.j41(0,"tr",27),m.bIt("click",(function(){const t=m.eBV(e).$implicit,s=m.XpG();return m.Njj(s.setCurrentDomainDefintion(t.id))})),m.j41(1,"td"),m.nrm(2,"system-utility-icon",28),m.j41(3,"dictionary-manager-item-status",29),m.bIt("ngModelChange",(function(t){const s=m.eBV(e).$implicit,i=m.XpG();return m.Njj(i.setStatus(s,t))})),m.k0s()(),m.j41(4,"td",30)(5,"div",31),m.EFF(6),m.k0s()(),m.j41(7,"td",32)(8,"div",31),m.EFF(9),m.k0s()(),m.j41(10,"td",33)(11,"button",34),m.bIt("click",(function(){const t=m.eBV(e).$implicit,s=m.XpG();return m.Njj(s.deleteDomainDefinition(t.id))})),m.nrm(12,"system-button-icon",35),m.k0s()()()}if(2&e){const e=t.$implicit,s=m.XpG();m.Y8G("ngClass",m.eq3(6,xi,s.domainmanager.currentDomainDefinition==e.id)),m.R7$(2),m.Y8G("icon","g"==e.scope?"world":"people"),m.R7$(),m.Y8G("ngModel",e.status),m.R7$(3),m.JRh(e.name),m.R7$(3),m.JRh(e.fieldtype),m.R7$(2),m.Y8G("disabled","a"==e.status)}}let Di=(()=>{class DomainManagerDefinitions{constructor(e,t,s,i,n,l,o,a,d){this.domainmanager=e,this.backend=t,this.metadata=s,this.language=i,this.modelutilities=n,this.broadcast=l,this.toast=o,this.modal=a,this.injector=d,this.definitionfilterscope="",this.definitionfilterstatus="",this.definitionsfiltertype=""}get domaindefinitions(){return this.domainmanager.domaindefinitions.filter((e=>e.id==this.domainmanager.currentDomainDefinition||(!this.definitionfilterterm||e.name.toLowerCase().indexOf(this.definitionfilterterm.toLowerCase())>=0)&&((""==this.definitionfilterscope||e.scope==this.definitionfilterscope)&&((""==this.definitionfilterstatus||e.status==this.definitionfilterstatus)&&(""==this.definitionsfiltertype||e.fieldtype==this.definitionsfiltertype))))).sort(((e,t)=>e.name.localeCompare(t.name)))}trackByFn(e,t){return t.id}setCurrentDomainDefintion(e){this.domainmanager.currentDomainDefinition=e,this.domainmanager.currentDomainField=null}addDomainDefinition(e){e.stopPropagation(),this.modal.openModal("DomainManagerAddDefinitionModal",!0,this.injector).subscribe({next:e=>{e.instance.newDefinitionID.subscribe({next:e=>{this.setCurrentDomainDefintion(e);let t=this.itemscontainer.element.nativeElement.scrollHeight,s=this.domaindefinitions.findIndex((t=>t.id==e)),i=t/this.domaindefinitions.length*s;this.itemscontainer.element.nativeElement.scrollTo(0,i)}})}})}deleteDomainDefinition(e){this.modal.prompt("confirm",this.language.getLabel("MSG_DELETE_RECORD","","long"),this.language.getLabel("MSG_DELETE_RECORD")).subscribe((t=>{t&&this.backend.deleteRequest(`dictionary/domaindefinition/${e}`).subscribe({next:t=>{let s=this.domainmanager.domaindefinitions.findIndex((t=>t.id==e));this.domainmanager.domaindefinitions.splice(s,1),this.domainmanager.currentDomainDefinition==e&&(this.domainmanager.currentDomainDefinition,this.domainmanager.currentDomainField)}})}))}setStatus(e,t){let s;switch(t){case"a":s=this.modal.await("LBL_EXECUTING"),this.backend.postRequest(`dictionary/domaindefinition/${e.id}/activate`).subscribe({next:()=>{e.status=t,this.domainmanager.domainfields.filter((t=>t.sysdomaindefinition_id==e.id)).forEach((e=>e.status=t)),s.emit(!0)},error:()=>{s.emit(!0)}});break;case"i":s=this.modal.await("LBL_EXECUTING"),this.backend.deleteRequest(`dictionary/domaindefinition/${e.id}/activate`).subscribe({next:()=>{e.status=t,this.domainmanager.domainfields.filter((t=>t.sysdomaindefinition_id==e.id)).forEach((e=>e.status=t)),s.emit(!0)},error:()=>{s.emit(!0)}});break;default:e.status=t}}static#e=this.ɵfac=function(e){return new(e||DomainManagerDefinitions)(m.rXU(Ri),m.rXU(p.H),m.rXU(f.yu),m.rXU(b.B),m.rXU(y.g),m.rXU(Mi.m),m.rXU(v.o),m.rXU(R.y),m.rXU(m.zZn))};static#t=this.ɵcmp=m.VBU({type:DomainManagerDefinitions,selectors:[["domain-manager-definitions"]],viewQuery:function(e,t){if(1&e&&m.GBs(ji,7,m.c1b),2&e){let e;m.mGM(e=m.lsd())&&(t.itemscontainer=e.first)}},decls:33,vars:7,consts:[[1,"slds-p-around--xx-small","slds-grid","slds-grid--vertical-align-center","slds-border--bottom"],["placeholder","LBL_SEARCH",1,"slds-grow",3,"ngModel","ngModelChange"],[1,"slds-p-left--xx-small",3,"ngModel","ngModelChange"],["value","g","icon","world"],["value","c","icon","people"],["value","d","icon","light_bulb","colorclass","slds-icon-text-warning"],["value","a","icon","light_bulb","colorclass","slds-icon-text-success"],["value","i","icon","light_bulb","colorclass","slds-icon-text-light"],[1,"slds-select_container","slds-p-left--xx-small"],[1,"slds-select",3,"ngModel","ngModelChange"],["value",""],["label","LBL_ALL"],[3,"value",4,"ngFor","ngForOf"],["system-to-bottom","","marginBottom","45"],["itemscontainer",""],[1,"slds-table","slds-table--fixed-layout","slds-table_bordered","slds-table--header-fixed"],[1,"slds-line-height_reset"],["scope","col",2,"width","2.5rem"],["scope","col",1,""],[1,"slds-truncate","slds-p-around--xx-small"],["label","LBL_DOMAIN"],["label","LBL_TYPE"],["scope","col",2,"width","2rem"],["class","slds-hint-parent",3,"ngClass","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"slds-align--absolute-center","slds-border--top","slds-p-around--small","slds-theme--shade",2,"position","sticky","bottom","0"],["icon","new","size","x-small",2,"cursor","pointer",3,"click"],[3,"value"],[1,"slds-hint-parent",3,"ngClass","click"],["size","xx-small",1,"slds-p-right--xx-small",3,"icon"],[3,"ngModel","ngModelChange"],["data-label","Domain"],[1,"slds-truncate"],["data-label","Type"],[2,"width","2rem"],[1,"slds-button","slds-button--icon",3,"disabled","click"],["icon","delete"]],template:function(e,t){1&e&&(m.j41(0,"div",0)(1,"system-input-text",1),m.mxI("ngModelChange",(function(e){return m.DH7(t.definitionfilterterm,e)||(t.definitionfilterterm=e),e})),m.k0s(),m.j41(2,"system-select-icon",2),m.mxI("ngModelChange",(function(e){return m.DH7(t.definitionfilterscope,e)||(t.definitionfilterscope=e),e})),m.nrm(3,"system-select-icon-item")(4,"system-select-icon-item",3)(5,"system-select-icon-item",4),m.k0s(),m.j41(6,"system-select-icon",2),m.mxI("ngModelChange",(function(e){return m.DH7(t.definitionfilterstatus,e)||(t.definitionfilterstatus=e),e})),m.nrm(7,"system-select-icon-item")(8,"system-select-icon-item",5)(9,"system-select-icon-item",6)(10,"system-select-icon-item",7),m.k0s(),m.j41(11,"div",8)(12,"select",9),m.mxI("ngModelChange",(function(e){return m.DH7(t.definitionsfiltertype,e)||(t.definitionsfiltertype=e),e})),m.j41(13,"option",10),m.nrm(14,"system-label",11),m.k0s(),m.DNE(15,Li,2,2,"option",12),m.k0s()()(),m.j41(16,"div",13,14)(18,"table",15)(19,"thead")(20,"tr",16),m.nrm(21,"th",17),m.j41(22,"th",18)(23,"div",19),m.nrm(24,"system-label",20),m.k0s()(),m.j41(25,"th",18)(26,"div",19),m.nrm(27,"system-label",21),m.k0s()(),m.nrm(28,"th",22),m.k0s()(),m.j41(29,"tbody"),m.DNE(30,Ii,13,8,"tr",23),m.k0s()()(),m.j41(31,"div",24)(32,"system-utility-icon",25),m.bIt("click",(function(e){return t.addDomainDefinition(e)})),m.k0s()()),2&e&&(m.R7$(),m.R50("ngModel",t.definitionfilterterm),m.R7$(),m.R50("ngModel",t.definitionfilterscope),m.R7$(4),m.R50("ngModel",t.definitionfilterstatus),m.R7$(6),m.R50("ngModel",t.definitionsfiltertype),m.R7$(3),m.Y8G("ngForOf",t.domainmanager.fieldtypes),m.R7$(15),m.Y8G("ngForOf",t.domaindefinitions)("ngForTrackBy",t.trackByFn))},dependencies:[i.YU,i.Sq,n.xH,n.y7,n.wz,n.BC,n.vS,L.t,D.H,x.W,u.B,E.Z,C.i,F.b,g],encapsulation:2})}return DomainManagerDefinitions})();function Ei(e,t){if(1&e){const e=m.RV6();m.j41(0,"div",39)(1,"div",29),m.EFF(2),m.k0s(),m.j41(3,"button",22),m.bIt("click",(function(){m.eBV(e);const t=m.XpG().$implicit,s=m.XpG(2);return m.Njj(s.unlinkValidation(t))})),m.nrm(4,"system-button-icon",40),m.k0s()()}if(2&e){const e=m.XpG().$implicit,t=m.XpG(2);m.R7$(2),m.JRh(t.validationName(e.sysdomainfieldvalidation_id))}}const Ci=e=>({"slds-is-selected":e});function Fi(e,t){if(1&e){const e=m.RV6();m.j41(0,"tr",24),m.bIt("click",(function(){const t=m.eBV(e).$implicit,s=m.XpG(2);return m.Njj(s.domainmanager.currentDomainField=t.id)})),m.j41(1,"td"),m.nrm(2,"system-utility-icon",25),m.j41(3,"system-utility-icon",26),m.bIt("click",(function(t){const s=m.eBV(e).$implicit,i=m.XpG(2);return m.Njj(i.customizeDomainField(t,s))})),m.k0s(),m.j41(4,"dictionary-manager-item-status",27),m.bIt("ngModelChange",(function(t){const s=m.eBV(e).$implicit,i=m.XpG(2);return m.Njj(i.setStatus(s,t))})),m.k0s()(),m.j41(5,"td",28)(6,"div",29),m.EFF(7),m.k0s()(),m.j41(8,"td",30)(9,"div",29),m.EFF(10),m.k0s()(),m.j41(11,"td",30)(12,"div",29),m.EFF(13),m.k0s()(),m.j41(14,"td",30)(15,"div",29),m.EFF(16),m.k0s()(),m.j41(17,"td",31),m.nrm(18,"system-checkbox",32),m.k0s(),m.j41(19,"td",31),m.DNE(20,Ei,5,1,"div",33),m.k0s(),m.j41(21,"td")(22,"button",34),m.bIt("click",(function(){const t=m.eBV(e).$implicit,s=m.XpG(2);return m.Njj(s.showValidation(t))})),m.nrm(23,"system-button-icon",35),m.k0s(),m.j41(24,"button",22),m.bIt("click",(function(){const t=m.eBV(e).$implicit,s=m.XpG(2);return m.Njj(s.showDetails(t))})),m.nrm(25,"system-button-icon",36),m.k0s(),m.j41(26,"button",37),m.bIt("click",(function(){const t=m.eBV(e).$implicit,s=m.XpG(2);return m.Njj(s.deleteDomainField(t.id))})),m.nrm(27,"system-button-icon",38),m.k0s()()()}if(2&e){const e=t.$implicit,s=m.XpG(2);m.Y8G("ngClass",m.eq3(12,Ci,s.domainmanager.currentDomainField==e.id)),m.R7$(2),m.Y8G("icon","rows")("size","x-small"),m.R7$(),m.Y8G("icon","g"==e.scope?"world":"people"),m.R7$(),m.Y8G("ngModel",e.status),m.R7$(3),m.JRh(e.name),m.R7$(3),m.JRh(e.dbtype),m.R7$(3),m.JRh(e.fieldtype),m.R7$(3),m.JRh(e.len),m.R7$(2),m.Y8G("ngModel","1"==e.required),m.R7$(2),m.Y8G("ngIf",e.sysdomainfieldvalidation_id),m.R7$(6),m.Y8G("disabled","a"==e.status)}}function Gi(e,t){if(1&e){const e=m.RV6();m.j41(0,"div",2)(1,"table",3)(2,"thead")(3,"tr",4),m.nrm(4,"th",5),m.j41(5,"th",6)(6,"div",7),m.nrm(7,"system-label",8),m.k0s()(),m.j41(8,"th",6)(9,"div",7),m.nrm(10,"system-label",9),m.k0s()(),m.j41(11,"th",6)(12,"div",7),m.nrm(13,"system-label",10),m.k0s()(),m.j41(14,"th",11)(15,"div",7),m.nrm(16,"system-label",12),m.k0s()(),m.j41(17,"th",13)(18,"div",7),m.nrm(19,"system-label",14),m.k0s()(),m.j41(20,"th",6)(21,"div",7),m.nrm(22,"system-label",15),m.k0s()(),m.j41(23,"th",16)(24,"button",17),m.bIt("click",(function(){m.eBV(e);const t=m.XpG();return m.Njj(t.repairRelatedDictionaryItems())})),m.nrm(25,"system-button-icon",18),m.k0s()()()(),m.j41(26,"tbody",19),m.bIt("cdkDropListDropped",(function(t){m.eBV(e);const s=m.XpG();return m.Njj(s.drop(t))})),m.DNE(27,Fi,28,14,"tr",20),m.k0s()(),m.j41(28,"div",21)(29,"button",22),m.bIt("click",(function(){m.eBV(e);const t=m.XpG();return m.Njj(t.addDomainField())})),m.nrm(30,"system-button-icon",23),m.k0s()()()}if(2&e){const e=m.XpG();m.R7$(27),m.Y8G("ngForOf",e.domainfields)("ngForTrackBy",e.trackByFn)}}function $i(e,t){1&e&&(m.j41(0,"div",41),m.nrm(1,"system-label",42),m.k0s())}let Bi=(()=>{class DomainManagerFields{constructor(e,t,s,i,n,l,o,a,d){this.domainmanager=e,this.backend=t,this.metadata=s,this.language=i,this.modelutilities=n,this.broadcast=l,this.toast=o,this.modal=a,this.injector=d}get domainfields(){let e=this.domainmanager.domainfields.filter((e=>e.sysdomaindefinition_id==this.domainmanager.currentDomainDefinition&&"c"==e.scope));for(let t of this.domainmanager.domainfields.filter((e=>e.sysdomaindefinition_id==this.domainmanager.currentDomainDefinition&&"c"!=e.scope)))-1==e.findIndex((e=>e.name==t.name))&&e.push(t);return e.sort(((e,t)=>e.sequence>t.sequence?1:-1))}drop(e){let t=this.domainfields,s=t.splice(e.previousIndex,1);t.splice(e.currentIndex,0,s[0]);let i=0;for(let e of t)e.sequence=i,i++}addDomainField(){this.modal.openModal("DomainManagerAddFieldModal",!0,this.injector)}showDetails(e){this.modal.openModal("DomainManagerFieldDetails",!0,this.injector).subscribe({next:t=>{t.instance.field=e}})}validationName(e){return e?this.domainmanager.getValidationById(e)?.name:""}unlinkValidation(e){this.modal.prompt("confirm","MSG_UNLINK_VALIDATION","MSG_UNLINK_VALIDATION").subscribe({next:t=>{t&&(e.sysdomainfieldvalidation_id="",this.updateDomainField(e))}})}showValidation(e){e.sysdomainfieldvalidation_id?this.modal.openModal("DomainManagerFieldValidation",!0,this.injector).subscribe({next:t=>{t.instance.field=e}}):this.modal.openModal("DomainManagerSelectValidation",!0,this.injector).subscribe({next:t=>{t.instance.validation.subscribe({next:t=>{"new"==t?this.modal.openModal("DomainManagerAddValidation",!0,this.injector).subscribe({next:t=>{t.instance.validation.subscribe({next:t=>{e.sysdomainfieldvalidation_id=t,this.updateDomainField(e)}})}}):(e.sysdomainfieldvalidation_id=t,this.updateDomainField(e))}})}})}deleteDomainField(e){this.modal.prompt("confirm",this.language.getLabel("MSG_DELETE_RECORD","","long"),this.language.getLabel("MSG_DELETE_RECORD")).subscribe((t=>{t&&this.backend.deleteRequest(`dictionary/domainfield/${e}`).subscribe({next:t=>{let s=this.domainmanager.domainfields.findIndex((t=>t.id==e));this.domainmanager.domainfields.splice(s,1),this.domainmanager.currentDomainField==e&&this.domainmanager.currentDomainField}})}))}customizeDomainField(e,t){e.stopPropagation(),"g"==t.scope&&this.modal.prompt("confirm","Customize the Field?","Customize").subscribe((e=>{if(e){let e={...t};e.id=this.modelutilities.generateGuid(),e.scope="c",this.domainmanager.domainfields.push(e),this.domainmanager.currentDomainField=e.id,this.domainmanager.currentDomainScope=e.scope}}))}setStatus(e,t){let s;switch(t){case"a":s=this.modal.await("LBL_EXECUTING"),this.backend.postRequest(`dictionary/domainfield/${e.id}/activate`).subscribe({next:()=>{e.status=t,s.emit(!0)},error:()=>{s.emit(!0)}});break;case"i":s=this.modal.await("LBL_EXECUTING"),this.backend.deleteRequest(`dictionary/domainfield/${e.id}/activate`).subscribe({next:()=>{e.status=t,s.emit(!0)},error:()=>{s.emit(!0)}});break;default:e.status=t}}updateDomainField(e){this.backend.postRequest(`dictionary/domainfield/${e.id}`,{},e).subscribe({next:e=>{this.toast.sendToast("LBL_SAVED","info")}})}trackByFn(e,t){return t.id}repairRelatedDictionaryItems(){this.modal.confirm("MSG_REPAIR_DOMAIN_DEFINITION_DICTIONARY_RELATED","MSG_REPAIR_DOMAIN_DEFINITION_DICTIONARY_RELATED").subscribe((e=>{e&&this.backend.postRequest(`dictionary/domaindefinition/${this.domainmanager.currentDomainDefinition}/repairrelated`).subscribe({next:()=>{this.toast.sendToast("LBL_DICTIONARY_REPAIRED","success")}})}))}static#e=this.ɵfac=function(e){return new(e||DomainManagerFields)(m.rXU(Ri),m.rXU(p.H),m.rXU(f.yu),m.rXU(b.B),m.rXU(y.g),m.rXU(Mi.m),m.rXU(v.o),m.rXU(R.y),m.rXU(m.zZn))};static#t=this.ɵcmp=m.VBU({type:DomainManagerFields,selectors:[["domain-manager-fields"]],decls:3,vars:2,consts:[["system-to-bottom","",4,"ngIf","ngIfElse"],["selectdomain",""],["system-to-bottom",""],[1,"slds-table","slds-table--fixed-layout","slds-table_bordered","slds-table--header-fixed","slds-border--top"],[1,"slds-line-height_reset"],["scope","col",2,"width","4rem"],["scope","col"],[1,"slds-truncate","slds-p-around--xx-small"],["label","LBL_FIELD"],["label","LBL_DBTYPE"],["label","LBL_TYPE"],["scope","col",2,"width","5rem"],["label","LBL_LENGTH"],["scope","col",2,"width","3rem"],["label","LBL_REQUIRED"],["label","LBL_VALIDATION"],["scope","col",1,"slds-text-align--right",2,"width","4rem"],["system-title","MSG_REPAIR_DOMAIN_DEFINITION_DICTIONARY_RELATED",1,"slds-button","slds-button--icon","slds-m-right--x-small",3,"click"],["icon","custom_apps"],["cdkDropList","",1,"dragboundary",3,"cdkDropListDropped"],["class","slds-hint-parent","cdkDrag","","cdkDragBoundary",".dragboundary",3,"ngClass","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"slds-align--absolute-center","slds-p-around--small"],[1,"slds-button","slds-button--icon",3,"click"],["icon","new"],["cdkDrag","","cdkDragBoundary",".dragboundary",1,"slds-hint-parent",3,"ngClass","click"],["cdkDragHandle","",1,"slds-p-right--xx-small",2,"cursor","move",3,"icon","size"],["size","xx-small",1,"slds-p-right--xx-small",3,"icon","click"],[3,"ngModel","ngModelChange"],["data-label","Domain"],[1,"slds-truncate"],["data-label","Type"],["data-label","Type",1,"slds-p-vertical--none"],["disabled","",3,"ngModel"],["class","slds-grid slds-grid--vertical-align-center",4,"ngIf"],[1,"slds-col--bump-left","slds-button","slds-button--icon",3,"click"],["icon","survey"],["icon","edit"],[1,"slds-button","slds-button--icon",3,"disabled","click"],["icon","delete"],[1,"slds-grid","slds-grid--vertical-align-center"],["icon","unlinked"],["system-to-bottom-noscroll","",1,"slds-size--1-of-1","slds-align--absolute-center"],["label","LBL_SELECT_A_DOMAIN"]],template:function(e,t){if(1&e&&m.DNE(0,Gi,31,2,"div",0)(1,$i,2,0,"ng-template",null,1,m.C5r),2&e){const e=m.sdS(2);m.Y8G("ngIf",t.domainmanager.currentDomainDefinition)("ngIfElse",e)}},dependencies:[i.YU,i.Sq,i.bT,n.BC,n.vS,L.t,be.f,x.W,u.B,F.b,T.p,w.L,c.O7,c.T1,c.Fb,g],encapsulation:2})}return DomainManagerFields})(),Ni=(()=>{class DomainManager{constructor(e,t,s,i,n,l,o,a,d){this.domainmanager=e,this.backend=t,this.metadata=s,this.language=i,this.modelutilities=n,this.broadcast=l,this.toast=o,this.modal=a,this.injector=d,this.expanded=!1}save(){this.domainmanager.save()}get listHeight(){return{height:`${this.expanded?"25":"50"}%`}}get detailsHeight(){return{height:`${this.expanded?"75":"50"}%`}}repairCustomENUMs(){this.modal.confirm("are you sure you want to migrate all old legacy Cache language files","migrate Labels").subscribe({next:e=>{if(e){let e=this.modal.await("LBL_LOADING");this.backend.postRequest("admin/repair/custom/enum").subscribe((t=>{e.emit(!0),t?this.toast.sendToast("LBL_CACHE_REPAIRED","success"):this.toast.sendToast("LBL_ERROR","error")}))}}})}static#e=this.ɵfac=function(e){return new(e||DomainManager)(m.rXU(Ri),m.rXU(p.H),m.rXU(f.yu),m.rXU(b.B),m.rXU(y.g),m.rXU(Mi.m),m.rXU(v.o),m.rXU(R.y),m.rXU(m.zZn))};static#t=this.ɵcmp=m.VBU({type:DomainManager,selectors:[["domain-manager"]],features:[m.Jv_([f.yu,Ri])],decls:17,vars:0,consts:[["titlelabel","LBL_DOMAIN_MANAGER","icon","dataset"],["system-dropdown-trigger","",1,"slds-dropdown-trigger","slds-dropdown-trigger_click","slds-button_last"],[1,"slds-button","slds-button_icon","slds-button_icon-border-filled"],["icon","down"],[1,"slds-dropdown","slds-dropdown_right","slds-dropdown_actions"],["role","menu",1,"slds-dropdown__list"],["role","presentation",1,"slds-dropdown__item",3,"click"],["href","javascript:void(null)","role","menuitem"],[1,"slds-truncate"],["label","LBL_REPAIR_CUSTOM_CACHE"],[1,"slds-grid"],[1,"slds-size--1-of-3"],["system-to-bottom-noscroll","",1,"slds-size--2-of-3","slds-theme--default","slds-border--left"],["system-to-bottom",""]],template:function(e,t){1&e&&(m.j41(0,"workbench-header",0)(1,"workbench-header-controls")(2,"div",1)(3,"button",2),m.nrm(4,"system-button-icon",3),m.k0s(),m.j41(5,"div",4)(6,"ul",5)(7,"li",6),m.bIt("click",(function(){return t.repairCustomENUMs()})),m.j41(8,"a",7)(9,"span",8),m.nrm(10,"system-label",9),m.k0s()()()()()()()(),m.j41(11,"div",10)(12,"div",11),m.nrm(13,"domain-manager-definitions"),m.k0s(),m.j41(14,"div",12)(15,"div",13),m.nrm(16,"domain-manager-fields"),m.k0s()()())},dependencies:[L.t,x.W,I.q,F.b,T.p,Di,Bi,Te,Ye],encapsulation:2})}return DomainManager})();function Si(e,t){if(1&e&&(m.j41(0,"option",39),m.EFF(1),m.k0s()),2&e){const e=t.$implicit;m.Y8G("ngValue",e),m.R7$(),m.JRh(e)}}function wi(e,t){if(1&e&&(m.j41(0,"option",40),m.EFF(1),m.k0s()),2&e){const e=t.$implicit;m.Y8G("value",e),m.R7$(),m.JRh(e)}}let Ti=(()=>{class DomainManagerFieldDetails{constructor(e,t,s,i){this.backend=e,this.metadata=t,this.language=s,this.domainmanager=i,this.field={},this._field={}}ngOnInit(){this._field=JSON.parse(JSON.stringify(this.field))}get required(){return"1"==this.field.required}set required(e){this.field.required=e?"1":"0"}save(){this.backend.postRequest(`dictionary/domainfield/${this._field.id}`,{},this._field).subscribe({next:e=>{Object.getOwnPropertyNames(this._field).forEach((e=>{this.field[e]=this._field[e]})),this.close()}}),this.self.destroy()}close(){this.self.destroy()}static#e=this.ɵfac=function(e){return new(e||DomainManagerFieldDetails)(m.rXU(p.H),m.rXU(f.yu),m.rXU(b.B),m.rXU(Ri))};static#t=this.ɵcmp=m.VBU({type:DomainManagerFieldDetails,selectors:[["domain-manager-field-details"]],decls:68,vars:13,consts:[[3,"close"],["label","LBL_DETAIL"],[1,"slds-grid"],[1,"slds-size--2-of-4","slds-form-element","slds-m-vertical--xxx-small"],[1,"slds-form-element__control"],[1,"slds-form-element__label"],["label","LBL_NAME"],["type","text","disabled","",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-size--1-of-4","slds-form-element__control","slds-size--1-of-4","slds-m-vertical--xxx-small","slds-p-left--x-small"],["label","LBL_DBTYPE"],[1,"slds-select_container"],["disabled","",1,"slds-select",3,"ngModel","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],["label","LBL_SCOPE"],["value","g"],["label","LBL_GLOBAL"],["value","c"],["label","LBL_CUSTOM"],[1,"slds-size--1-of-4","slds-form-element","slds-m-vertical--xxx-small"],["label","LBL_TYPE"],[1,"slds-select",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["label","LBL_LABEL"],[3,"ngModel","ngModelChange"],["label","LBL_LENGTH"],["type","text",1,"slds-input",3,"ngModel","ngModelChange"],["label","LBL_REQUIRED"],[3,"asinteger","ngModel","ngModelChange"],[1,"slds-form-element","slds-m-vertical--xxx-small"],["label","LBL_COMMENT"],[1,"slds-textarea",3,"ngModel","ngModelChange"],[1,"slds-grid","slds-m-vertical--xxx-small","slds-gutters_direct-xx-small"],[1,"slds-col","slds-size--1-of-2","slds-form-element"],["label","LBL_VERSION"],["label","LBL_PACKAGE"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CLOSE"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_SAVE"],[3,"ngValue"],[3,"value"]],template:function(e,t){1&e&&(m.j41(0,"system-modal")(1,"system-modal-header",0),m.bIt("close",(function(){return t.close()})),m.nrm(2,"system-label",1),m.k0s(),m.j41(3,"system-modal-content")(4,"div",2)(5,"div",3)(6,"div",4)(7,"label",5),m.nrm(8,"system-label",6),m.k0s(),m.j41(9,"input",7),m.mxI("ngModelChange",(function(e){return m.DH7(t._field.name,e)||(t._field.name=e),e})),m.k0s()()(),m.j41(10,"div",8)(11,"label",5),m.nrm(12,"system-label",9),m.k0s(),m.j41(13,"div",10)(14,"select",11),m.mxI("ngModelChange",(function(e){return m.DH7(t._field.dbtype,e)||(t._field.dbtype=e),e})),m.DNE(15,Si,2,2,"option",12),m.k0s()()(),m.j41(16,"div",8)(17,"label",5),m.nrm(18,"system-label",13),m.k0s(),m.j41(19,"div",10)(20,"select",11),m.mxI("ngModelChange",(function(e){return m.DH7(t._field.scope,e)||(t._field.scope=e),e})),m.j41(21,"option",14),m.nrm(22,"system-label",15),m.k0s(),m.j41(23,"option",16),m.nrm(24,"system-label",17),m.k0s()()()()(),m.j41(25,"div",2)(26,"div",18)(27,"label",5),m.nrm(28,"system-label",19),m.k0s(),m.j41(29,"div",10)(30,"select",20),m.mxI("ngModelChange",(function(e){return m.DH7(t._field.fieldtype,e)||(t._field.fieldtype=e),e})),m.DNE(31,wi,2,2,"option",21),m.k0s()()(),m.j41(32,"div",18)(33,"label",5),m.nrm(34,"system-label",22),m.k0s(),m.j41(35,"system-input-label",23),m.mxI("ngModelChange",(function(e){return m.DH7(t._field.label,e)||(t._field.label=e),e})),m.k0s()(),m.j41(36,"div",18)(37,"label",5),m.nrm(38,"system-label",24),m.k0s(),m.j41(39,"div",4)(40,"input",25),m.mxI("ngModelChange",(function(e){return m.DH7(t._field.len,e)||(t._field.len=e),e})),m.k0s()()(),m.j41(41,"div",18)(42,"label",5),m.nrm(43,"system-label",26),m.k0s(),m.j41(44,"div",4)(45,"system-checkbox",27),m.mxI("ngModelChange",(function(e){return m.DH7(t.required,e)||(t.required=e),e})),m.EFF(46,"required"),m.k0s()()()(),m.j41(47,"div",28)(48,"label",5),m.nrm(49,"system-label",29),m.k0s(),m.j41(50,"div",4)(51,"textarea",30),m.mxI("ngModelChange",(function(e){return m.DH7(t._field.description,e)||(t._field.description=e),e})),m.k0s()()(),m.j41(52,"div",31)(53,"div",32)(54,"label",5),m.nrm(55,"system-label",33),m.k0s(),m.j41(56,"div",4)(57,"input",25),m.mxI("ngModelChange",(function(e){return m.DH7(t._field.version,e)||(t._field.version=e),e})),m.k0s()()(),m.j41(58,"div",32)(59,"label",5),m.nrm(60,"system-label",34),m.k0s(),m.j41(61,"div",4)(62,"input",25),m.mxI("ngModelChange",(function(e){return m.DH7(t._field.package,e)||(t._field.package=e),e})),m.k0s()()()()(),m.j41(63,"system-modal-footer")(64,"button",35),m.bIt("click",(function(){return t.close()})),m.nrm(65,"system-label",36),m.k0s(),m.j41(66,"button",37),m.bIt("click",(function(){return t.save()})),m.nrm(67,"system-label",38),m.k0s()()()),2&e&&(m.R7$(9),m.R50("ngModel",t._field.name),m.R7$(5),m.R50("ngModel",t._field.dbtype),m.R7$(),m.Y8G("ngForOf",t.domainmanager.dbtypes),m.R7$(5),m.R50("ngModel",t._field.scope),m.R7$(10),m.R50("ngModel",t._field.fieldtype),m.R7$(),m.Y8G("ngForOf",t.domainmanager.fieldtypes),m.R7$(4),m.R50("ngModel",t._field.label),m.R7$(5),m.R50("ngModel",t._field.len),m.R7$(5),m.Y8G("asinteger",!0),m.R50("ngModel",t.required),m.R7$(6),m.R50("ngModel",t._field.description),m.R7$(6),m.R50("ngModel",t._field.version),m.R7$(5),m.R50("ngModel",t._field.package))},dependencies:[i.Sq,n.xH,n.y7,n.me,n.wz,n.BC,n.vS,be.f,ze.w,x.W,qe.D,Pe.I,Je.Q,We.C],encapsulation:2})}return DomainManagerFieldDetails})();function Ai(e,t){1&e&&(m.j41(0,"th",37)(1,"div",38),m.EFF(2,"value"),m.k0s()())}function Yi(e,t){1&e&&(m.j41(0,"th",37)(1,"div",38),m.EFF(2,"valuetype"),m.k0s()())}function Oi(e,t){1&e&&(m.j41(0,"th",37)(1,"div",38),m.EFF(2,"label"),m.k0s()())}function Xi(e,t){1&e&&(m.j41(0,"th",37)(1,"div",38),m.EFF(2,"comment"),m.k0s()())}function Vi(e,t){1&e&&(m.j41(0,"th",37)(1,"div",38),m.EFF(2,"version"),m.k0s()())}function Ui(e,t){1&e&&(m.j41(0,"th",37)(1,"div",38),m.EFF(2,"package"),m.k0s()())}const Hi=e=>({"slds-has-error":e});function zi(e,t){if(1&e){const e=m.RV6();m.j41(0,"td")(1,"input",48),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG().$implicit;return m.DH7(s.enumvalue,t)||(s.enumvalue=t),m.Njj(t)})),m.k0s()()}if(2&e){const e=m.XpG().$implicit,t=m.XpG();m.R7$(),m.Y8G("disabled","d"!=e.status),m.R50("ngModel",e.enumvalue),m.Y8G("ngClass",m.eq3(3,Hi,t.hasDuplicate(e)))}}function qi(e,t){if(1&e){const e=m.RV6();m.j41(0,"td")(1,"select",49),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG().$implicit;return m.DH7(s.valuetype,t)||(s.valuetype=t),m.Njj(t)})),m.j41(2,"option",50),m.nrm(3,"system-label",51),m.k0s(),m.j41(4,"option",52),m.nrm(5,"system-label",53),m.k0s()()()}if(2&e){const e=m.XpG().$implicit;m.R7$(),m.R50("ngModel",e.valuetype)}}function Pi(e,t){if(1&e){const e=m.RV6();m.j41(0,"td")(1,"system-input-label",43),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG().$implicit;return m.DH7(s.label,t)||(s.label=t),m.Njj(t)})),m.k0s()()}if(2&e){const e=m.XpG().$implicit;m.R7$(),m.R50("ngModel",e.label)}}function Ji(e,t){if(1&e){const e=m.RV6();m.j41(0,"td")(1,"input",54),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG().$implicit;return m.DH7(s.description,t)||(s.description=t),m.Njj(t)})),m.k0s()()}if(2&e){const e=m.XpG().$implicit;m.R7$(),m.R50("ngModel",e.description)}}function Wi(e,t){if(1&e){const e=m.RV6();m.j41(0,"td")(1,"input",54),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG().$implicit;return m.DH7(s.version,t)||(s.version=t),m.Njj(t)})),m.k0s()()}if(2&e){const e=m.XpG().$implicit;m.R7$(),m.R50("ngModel",e.version)}}function Ki(e,t){if(1&e){const e=m.RV6();m.j41(0,"td")(1,"input",54),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG().$implicit;return m.DH7(s.package,t)||(s.package=t),m.Njj(t)})),m.k0s()()}if(2&e){const e=m.XpG().$implicit;m.R7$(),m.R50("ngModel",e.package)}}function Qi(e,t){if(1&e){const e=m.RV6();m.j41(0,"tr",39)(1,"td",40),m.nrm(2,"system-utility-icon",41),m.j41(3,"system-utility-icon",42),m.bIt("click",(function(t){const s=m.eBV(e).$implicit,i=m.XpG();return m.Njj(i.customizeValidationValue(t,s))})),m.k0s(),m.j41(4,"dictionary-manager-item-status",43),m.mxI("ngModelChange",(function(t){const s=m.eBV(e).$implicit;return m.DH7(s.status,t)||(s.status=t),m.Njj(t)})),m.k0s()(),m.DNE(5,zi,2,5,"td",44)(6,qi,6,1,"td",44)(7,Pi,2,1,"td",44)(8,Ji,2,1,"td",44)(9,Wi,2,1,"td",44)(10,Ki,2,1,"td",44),m.j41(11,"td",45)(12,"button",46),m.bIt("click",(function(){const t=m.eBV(e).$implicit,s=m.XpG();return m.Njj(s.deleteValidation(t))})),m.nrm(13,"system-button-icon",47),m.k0s()()()}if(2&e){const e=t.$implicit,s=m.XpG();m.R7$(2),m.Y8G("icon","rows")("size","x-small"),m.R7$(),m.Y8G("icon","g"==e.scope?"world":"people"),m.R7$(),m.R50("ngModel",e.status),m.R7$(),m.Y8G("ngIf","enum"==s.validation.validation_type||"options"==s.validation.validation_type),m.R7$(),m.Y8G("ngIf","extended"==s.view),m.R7$(),m.Y8G("ngIf","core"==s.view),m.R7$(),m.Y8G("ngIf","core"==s.view),m.R7$(),m.Y8G("ngIf","extended"==s.view),m.R7$(),m.Y8G("ngIf","extended"==s.view),m.R7$(2),m.Y8G("disabled","a"==e.status)}}let Zi=(()=>{class DomainManagerFieldValidation{constructor(e,t,s,i,n){this.domainmanager=e,this.backend=t,this.modelutilities=s,this.modal=i,this.injector=n,this.field={},this.view="core",this.validationvalues=[],this.deletedValidationIds=[]}ngOnInit(){this.validation=this.domainmanager.getValidationById(this.field.sysdomainfieldvalidation_id),this.validationvalues=this.domainmanager.getValidationValuesdById(this.field.sysdomainfieldvalidation_id).sort(((e,t)=>+e.sequence>+t.sequence?1:-1))}switchView(e){switch(e.preventDefault(),e.stopPropagation(),this.view){case"core":this.view="extended";break;case"extended":this.view="core"}}addValidationValue(e){e.stopPropagation(),this.modal.openModal("DomainManagerAddValidationValueModal",!0,this.injector).subscribe((e=>{e.instance.fieldvalidationvalues=this.validationvalues,e.instance.fieldvalidation=this.validation,e.instance.validationValue.subscribe({next:e=>{this.validationvalues.push(e)}})}))}deleteValidation(e){"a"!=e.status&&this.modal.prompt("confirm","MSG_DELETE_RECORD","MSG_DELETE_RECORD").subscribe((t=>{if(t){let t=this.validationvalues.findIndex((t=>t.id==e.id));if(t>=0){const s="c"!=e.scope?void 0:this.domainmanager.domainfieldvalidationvalues.find((t=>t.enumvalue==e.enumvalue&&"g"==t.scope));this.deletedValidationIds.push(e.id),this.validationvalues.splice(t,1),s&&this.validationvalues.splice(t,0,s)}}}))}customizeValidationValue(e,t){e.stopPropagation(),"g"==t.scope&&this.modal.prompt("confirm","Customize the Domain?","Customize").subscribe((e=>{if(e){let e={...t};e.id=this.modelutilities.generateGuid(),e.scope="c",this.domainmanager.currentDomainScope=e.scope;const s=this.validationvalues.findIndex((e=>e.id==t.id));this.validationvalues.splice(s,1,e)}}))}drop(e){let t=this.validationvalues,s=t.splice(e.previousIndex,1);t.splice(e.currentIndex,0,s[0]);let i=0;for(let e of t)e.sequence=i,i++}hasDuplicate(e){return!!this.validationvalues.find((t=>t.id!=e.id&&t.enumvalue==e.enumvalue))}get hasDuplicates(){let e=!1;for(let t of this.validationvalues)if(this.hasDuplicate(t)){e=!0;break}return e}get canSave(){return!this.hasDuplicates}save(){this.backend.postRequest(`dictionary/domainvalidation/${this.field.sysdomainfieldvalidation_id}/values`,{},this.validationvalues).subscribe({next:e=>{this.validationvalues.forEach((e=>{let t=this.domainmanager.domainfieldvalidationvalues.find((t=>t.id==e.id));t?Object.getOwnPropertyNames(e).forEach((s=>t[s]=e[s])):this.domainmanager.domainfieldvalidationvalues.push(e)})),this.domainmanager.domainfieldvalidationvalues=this.domainmanager.domainfieldvalidationvalues.filter((e=>!this.deletedValidationIds.some((t=>e.id==t)))),this.domainmanager.reloadLanguageData(),this.close()}})}close(){this.self.destroy()}static#e=this.ɵfac=function(e){return new(e||DomainManagerFieldValidation)(m.rXU(Ri),m.rXU(p.H),m.rXU(y.g),m.rXU(R.y),m.rXU(m.zZn))};static#t=this.ɵcmp=m.VBU({type:DomainManagerFieldValidation,selectors:[["domain-manager-field-validation"]],decls:49,vars:12,consts:[[3,"close"],["label","LBL_VALIDATION"],["margin","none","system-modal-content-grow",""],[2,"height","100%"],[1,"slds-grid","slds-gutters_direct-xx-small","slds-p-around--x-small"],[1,"slds-form-element__control","slds-size--1-of-3","slds-p-left--xxx-small"],[1,"slds-form-element__label"],[1,"slds-required"],["label","LBL_SCOPE"],[1,"slds-select_container"],["disabled","",1,"slds-select",3,"ngModel","ngModelChange"],["value","g"],["label","LBL_GLOBAL"],["value","c"],["label","LBL_CUSTOM"],[1,"slds-col","slds-grow","slds-form-element"],["label","LBL_NAME"],[1,"slds-form-element__control","slds-input-has-icon","slds-input-has-icon_right"],["type","text","disabled","",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-col","slds-size--1-of-4","slds-form-element"],["label","LBL_TYPE"],[1,"slds-form-element__control"],[1,"slds-scrollable--y",2,"height","calc(100% - 117px)"],[1,"slds-table","slds-table--fixed-layout","slds-table_bordered","slds-table--header-fixed"],[1,"slds-line-height_reset"],["scope","col",2,"width","4rem"],["class","","scope","col",4,"ngIf"],["scope","col",1,"slds-text-align--center",2,"width","2rem"],["size","x-small",3,"icon","click"],["cdkDropList","",1,"dragboundary",3,"cdkDropListDropped"],["class","slds-hint-parent","cdkDrag","","cdkDragBoundary",".dragboundary",4,"ngFor","ngForOf"],[1,"slds-align--absolute-center","slds-p-around--small","slds-theme--shade","slds-border--top"],["icon","new","size","x-small",3,"click"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CLOSE"],[1,"slds-button","slds-button--neutral",3,"disabled","click"],["label","LBL_SAVE"],["scope","col",1,""],[1,"slds-truncate","slds-th__action","slds-p-horizontal--x-small"],["cdkDrag","","cdkDragBoundary",".dragboundary",1,"slds-hint-parent"],[1,"slds-grid","slds-align--absolute-center",2,"min-height","40px"],["cdkDragHandle","",1,"slds-p-right--xx-small",2,"cursor","move",3,"icon","size"],["size","xx-small",1,"slds-p-right--xx-small",3,"icon","click"],[3,"ngModel","ngModelChange"],[4,"ngIf"],[1,"slds-text-align--center",2,"min-height","40px"],[1,"slds-button","slds-button--icon",3,"disabled","click"],["icon","delete"],["type","text",1,"slds-input",3,"disabled","ngModel","ngClass","ngModelChange"],[1,"slds-select",3,"ngModel","ngModelChange"],["value","string"],["label","LBL_STRING"],["value","integer"],["label","LBL_INTEGER"],["type","text",1,"slds-input",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(m.j41(0,"system-modal")(1,"system-modal-header",0),m.bIt("close",(function(){return t.close()})),m.nrm(2,"system-label",1),m.k0s(),m.j41(3,"system-modal-content",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"label",6)(8,"abbr",7),m.EFF(9,"* "),m.k0s(),m.nrm(10,"system-label",8),m.k0s(),m.j41(11,"div",9)(12,"select",10),m.mxI("ngModelChange",(function(e){return m.DH7(t.validation.scope,e)||(t.validation.scope=e),e})),m.j41(13,"option",11),m.nrm(14,"system-label",12),m.k0s(),m.j41(15,"option",13),m.nrm(16,"system-label",14),m.k0s()()()(),m.j41(17,"div",15)(18,"label",6),m.nrm(19,"system-label",16),m.k0s(),m.j41(20,"div",17)(21,"input",18),m.mxI("ngModelChange",(function(e){return m.DH7(t.validation.name,e)||(t.validation.name=e),e})),m.k0s()()(),m.j41(22,"div",19)(23,"label",6),m.nrm(24,"system-label",20),m.k0s(),m.j41(25,"div",21)(26,"input",18),m.mxI("ngModelChange",(function(e){return m.DH7(t.validation.validation_type,e)||(t.validation.validation_type=e),e})),m.k0s()()()(),m.j41(27,"div",22)(28,"table",23)(29,"thead")(30,"tr",24),m.nrm(31,"th",25),m.DNE(32,Ai,3,0,"th",26)(33,Yi,3,0,"th",26)(34,Oi,3,0,"th",26)(35,Xi,3,0,"th",26)(36,Vi,3,0,"th",26)(37,Ui,3,0,"th",26),m.j41(38,"th",27)(39,"system-utility-icon",28),m.bIt("click",(function(e){return t.switchView(e)})),m.k0s()()()(),m.j41(40,"tbody",29),m.bIt("cdkDropListDropped",(function(e){return t.drop(e)})),m.DNE(41,Qi,14,11,"tr",30),m.k0s()()(),m.j41(42,"div",31)(43,"system-utility-icon",32),m.bIt("click",(function(e){return t.addValidationValue(e)})),m.k0s()()()(),m.j41(44,"system-modal-footer")(45,"button",33),m.bIt("click",(function(){return t.close()})),m.nrm(46,"system-label",34),m.k0s(),m.j41(47,"button",35),m.bIt("click",(function(){return t.save()})),m.nrm(48,"system-label",36),m.k0s()()()),2&e&&(m.R7$(12),m.R50("ngModel",t.validation.scope),m.R7$(9),m.R50("ngModel",t.validation.name),m.R7$(5),m.R50("ngModel",t.validation.validation_type),m.R7$(6),m.Y8G("ngIf","enum"==t.validation.validation_type||"options"==t.validation.validation_type),m.R7$(),m.Y8G("ngIf","extended"==t.view),m.R7$(),m.Y8G("ngIf","core"==t.view),m.R7$(),m.Y8G("ngIf","core"==t.view),m.R7$(),m.Y8G("ngIf","extended"==t.view),m.R7$(),m.Y8G("ngIf","extended"==t.view),m.R7$(2),m.Y8G("icon","extended"==t.view?"chevronleft":"chevronright"),m.R7$(2),m.Y8G("ngForOf",t.validationvalues),m.R7$(6),m.Y8G("disabled",!t.canSave))},dependencies:[i.YU,i.Sq,i.bT,n.xH,n.y7,n.me,n.wz,n.BC,n.vS,L.t,ze.w,x.W,qe.D,Pe.I,Je.Q,We.C,u.B,c.O7,c.T1,c.Fb,g],encapsulation:2})}return DomainManagerFieldValidation})();const en=e=>({"slds-is-active":e}),tn=e=>({"slds-hide":e});function sn(e,t){if(1&e){const e=m.RV6();m.j41(0,"div",3)(1,"ul",4)(2,"li",5),m.bIt("click",(function(){m.eBV(e);const t=m.XpG();return m.Njj(t.tabScope="details")})),m.j41(3,"a",6),m.nrm(4,"system-label",7),m.k0s()(),m.j41(5,"li",8),m.bIt("click",(function(){m.eBV(e);const t=m.XpG();return m.Njj(t.tabScope="validations")})),m.j41(6,"a",9),m.nrm(7,"system-label",10),m.k0s()()(),m.j41(8,"div",11),m.nrm(9,"domain-manager-field-details"),m.k0s(),m.j41(10,"div",11),m.nrm(11,"domain-manager-field-validation",12),m.k0s(),m.j41(12,"div",13),m.bIt("click",(function(t){m.eBV(e);const s=m.XpG();return m.Njj(s.toggleExpanded(t))})),m.nrm(13,"system-utility-icon",14),m.k0s()()}if(2&e){const e=m.XpG();m.R7$(2),m.Y8G("ngClass",m.eq3(5,en,"details"==e.tabScope)),m.R7$(3),m.Y8G("ngClass",m.eq3(7,en,"validations"==e.tabScope)),m.R7$(3),m.Y8G("ngClass",m.eq3(9,tn,"details"!=e.tabScope)),m.R7$(2),m.Y8G("ngClass",m.eq3(11,tn,"validations"!=e.tabScope)),m.R7$(3),m.Y8G("icon",e._isexpanded?"chevrondown":"chevronup")}}function nn(e,t){1&e&&(m.j41(0,"div",15),m.nrm(1,"system-label",16),m.k0s())}let ln=(()=>{class DomainManagerFieldTabs{constructor(e,t,s,i,n,l,o,a,d){this.domainmanager=e,this.backend=t,this.metadata=s,this.language=i,this.modelutilities=n,this.broadcast=l,this.toast=o,this.modal=a,this.injector=d,this.tabScope="details",this._isexpanded=!1,this.expanded=new m.bkB}get domainfields(){return this.domainmanager.domainfields}get currentField(){return this.domainfields.find((e=>e.id==this.domainmanager.currentDomainField))}toggleExpanded(e){e.preventDefault(),e.stopPropagation(),this._isexpanded=!this._isexpanded,this.expanded.emit(this._isexpanded)}static#e=this.ɵfac=function(e){return new(e||DomainManagerFieldTabs)(m.rXU(Ri),m.rXU(p.H),m.rXU(f.yu),m.rXU(b.B),m.rXU(y.g),m.rXU(Mi.m),m.rXU(v.o),m.rXU(R.y),m.rXU(m.zZn))};static#t=this.ɵcmp=m.VBU({type:DomainManagerFieldTabs,selectors:[["domain-manager-field-tabs"]],outputs:{expanded:"expanded"},decls:4,vars:2,consts:[[1,"slds-border--top",2,"height","100%"],["class","slds-tabs_default slds-is-relative","style","height: 100%",4,"ngIf","ngIfElse"],["selectfield",""],[1,"slds-tabs_default","slds-is-relative",2,"height","100%"],["role","tablist",1,"slds-tabs_default__nav","slds-grow"],["title","Item One","role","presentation",1,"slds-tabs_default__item",3,"ngClass","click"],["href","javascript:void(0);","role","tab","tabindex","0",1,"slds-tabs_default__link"],["label","LBL_DETAILS"],["title","Item Two","role","presentation",1,"slds-tabs_default__item",3,"ngClass","click"],["href","javascript:void(0);","role","tab","tabindex","-1",1,"slds-tabs_default__link"],["label","LBL_VALIDATION"],["role","tabpanel",1,"slds-tabs_default__content","slds-show","slds-p-around--none",2,"height","calc(100% - 40px)",3,"ngClass"],[2,"height","100%"],[1,"slds-is-absolute","slds-m-around--x-small",2,"top","0px","right","0px",3,"click"],["size","x-small",3,"icon"],["system-to-bottom-noscroll","",1,"slds-size--1-of-1","slds-height_full","slds-align--absolute-center"],["label","LBL_SELECT_A_FIELD"]],template:function(e,t){if(1&e&&(m.j41(0,"div",0),m.DNE(1,sn,14,13,"div",1)(2,nn,2,0,"ng-template",null,2,m.C5r),m.k0s()),2&e){const e=m.sdS(3);m.R7$(),m.Y8G("ngIf",t.domainmanager.currentDomainField)("ngIfElse",e)}},dependencies:[i.YU,i.bT,x.W,u.B,T.p,Ti,Zi],encapsulation:2})}return DomainManagerFieldTabs})();function on(e,t){if(1&e&&(m.j41(0,"option",28),m.EFF(1),m.k0s()),2&e){const e=t.$implicit;m.Y8G("value",e),m.R7$(),m.JRh(e)}}let an=(()=>{class DomainManagerAddDefinitionModal{constructor(e,t,s,i){this.domainmanager=e,this.backend=t,this.metadata=s,this.modelutilities=i,this.newDefinitionID=new m.bkB,this.domaindefinition={id:this.modelutilities.generateGuid(),name:"",fieldtype:"",scope:"c",status:"d"}}close(){this.self.destroy()}get canSave(){return this.domaindefinition.name&&this.domaindefinition.fieldtype&&!this.domainmanager.domaindefinitions.find((e=>e.name==this.domaindefinition.name))}save(){this.canSave&&this.backend.postRequest(`dictionary/domaindefinition/${this.domaindefinition.id}`,{},this.domaindefinition).subscribe({next:e=>{this.domainmanager.domaindefinitions.push(this.domaindefinition),this.newDefinitionID.emit(this.domaindefinition.id),this.close()}})}static#e=this.ɵfac=function(e){return new(e||DomainManagerAddDefinitionModal)(m.rXU(Ri),m.rXU(p.H),m.rXU(f.yu),m.rXU(y.g))};static#t=this.ɵcmp=m.VBU({type:DomainManagerAddDefinitionModal,selectors:[["domain-manager-add-definition-modal"]],outputs:{newDefinitionID:"newDefinitionID"},decls:47,vars:8,consts:[[3,"close"],[1,"slds-grid"],[1,"slds-form-element__control","slds-size--3-of-4","slds-p-right--xxx-small"],[1,"slds-form-element__label"],[1,"slds-required"],["label","LBL_NAME"],[3,"ngModel","ngModelChange"],[1,"slds-form-element__control","slds-size--1-of-4","slds-p-left--xxx-small"],["label","LBL_SCOPE"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],["value","g"],["label","LBL_GLOBAL"],["value","c"],["label","LBL_CUSTOM"],[1,"slds-large-size--1-of-2","slds-p-right--xxx-small","slds-form-element__control"],["label","LBL_TYPE"],[3,"value",4,"ngFor","ngForOf"],[1,"slds-size--1-of-4","slds-p-right--xxx-small","slds-form-element__control"],["label","LBL_PACKAGE"],[1,"slds-size--1-of-4","slds-p-left--xxx-small","slds-form-element__control"],["label","LBL_VERSION"],["label","LBL_COMMENT"],[1,"slds-textarea",3,"ngModel"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CLOSE"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_SAVE"],[3,"value"]],template:function(e,t){1&e&&(m.j41(0,"system-modal")(1,"system-modal-header",0),m.bIt("close",(function(){return t.close()})),m.EFF(2,"Add Domain Definition"),m.k0s(),m.j41(3,"system-modal-content")(4,"div",1)(5,"div",2)(6,"label",3)(7,"abbr",4),m.EFF(8,"* "),m.k0s(),m.nrm(9,"system-label",5),m.k0s(),m.j41(10,"system-input-text",6),m.mxI("ngModelChange",(function(e){return m.DH7(t.domaindefinition.name,e)||(t.domaindefinition.name=e),e})),m.k0s()(),m.j41(11,"div",7)(12,"label",3)(13,"abbr",4),m.EFF(14,"* "),m.k0s(),m.nrm(15,"system-label",8),m.k0s(),m.j41(16,"div",9)(17,"select",10),m.mxI("ngModelChange",(function(e){return m.DH7(t.domaindefinition.scope,e)||(t.domaindefinition.scope=e),e})),m.j41(18,"option",11),m.nrm(19,"system-label",12),m.k0s(),m.j41(20,"option",13),m.nrm(21,"system-label",14),m.k0s()()()()(),m.j41(22,"div",1)(23,"div",15)(24,"label",3)(25,"abbr",4),m.EFF(26,"* "),m.k0s(),m.nrm(27,"system-label",16),m.k0s(),m.j41(28,"div",9)(29,"select",10),m.mxI("ngModelChange",(function(e){return m.DH7(t.domaindefinition.fieldtype,e)||(t.domaindefinition.fieldtype=e),e})),m.DNE(30,on,2,2,"option",17),m.k0s()()(),m.j41(31,"div",18)(32,"label",3),m.nrm(33,"system-label",19),m.k0s(),m.j41(34,"system-input-text",6),m.mxI("ngModelChange",(function(e){return m.DH7(t.domaindefinition.package,e)||(t.domaindefinition.package=e),e})),m.k0s()(),m.j41(35,"div",20)(36,"label",3),m.nrm(37,"system-label",21),m.k0s(),m.j41(38,"system-input-text",6),m.mxI("ngModelChange",(function(e){return m.DH7(t.domaindefinition.version,e)||(t.domaindefinition.version=e),e})),m.k0s()()(),m.j41(39,"label",3),m.nrm(40,"system-label",22),m.k0s(),m.nrm(41,"textarea",23),m.k0s(),m.j41(42,"system-modal-footer")(43,"button",24),m.bIt("click",(function(){return t.close()})),m.nrm(44,"system-label",25),m.k0s(),m.j41(45,"button",26),m.bIt("click",(function(){return t.save()})),m.nrm(46,"system-label",27),m.k0s()()()),2&e&&(m.R7$(10),m.R50("ngModel",t.domaindefinition.name),m.R7$(7),m.R50("ngModel",t.domaindefinition.scope),m.R7$(12),m.R50("ngModel",t.domaindefinition.fieldtype),m.R7$(),m.Y8G("ngForOf",t.domainmanager.fieldtypes),m.R7$(4),m.R50("ngModel",t.domaindefinition.package),m.R7$(4),m.R50("ngModel",t.domaindefinition.version),m.R7$(3),m.Y8G("ngModel",t.domaindefinition.description),m.R7$(4),m.Y8G("disabled",!t.canSave))},dependencies:[i.Sq,n.xH,n.y7,n.me,n.wz,n.BC,n.vS,D.H,x.W,qe.D,Pe.I,Je.Q,We.C],encapsulation:2})}return DomainManagerAddDefinitionModal})();function dn(e,t){if(1&e&&(m.j41(0,"option",37),m.EFF(1),m.k0s()),2&e){const e=t.$implicit;m.Y8G("value",e),m.R7$(),m.JRh(e)}}function rn(e,t){if(1&e&&(m.j41(0,"option",37),m.EFF(1),m.k0s()),2&e){const e=t.$implicit;m.Y8G("value",e),m.R7$(),m.JRh(e)}}let cn=(()=>{class DomainManagerAddFieldModal{constructor(e,t,s,i){this.domainmanager=e,this.backend=t,this.metadata=s,this.modelutilities=i}ngOnInit(){this.domainDefiniton=this.domainmanager.getCurrentDefinition(),this.domainfield={dbtype:void 0,id:this.modelutilities.generateGuid(),sysdomaindefinition_id:this.domainmanager.currentDomainDefinition,sysdomainfieldvalidation_id:"",name:"{sysdictionaryitems.name}",fieldtype:"",scope:this.domainDefiniton.scope,sequence:this.domainmanager.domainfields.filter((e=>e.sysdomaindefinition_id==this.domainmanager.currentDomainDefinition)).length,required:0,exclude_from_index:0,status:"d"}}close(){this.self.destroy()}get canSave(){return this.domainfield.name&&this.domainfield.dbtype&&!this.domainmanager.domainfields.find((e=>e.name==this.domainfield.name&&e.sysdomaindefinition_id==this.domainmanager.currentDomainDefinition))}save(){this.canSave&&this.backend.postRequest(`dictionary/domainfield/${this.domainfield.id}`,{},this.domainfield).subscribe({next:e=>{this.domainmanager.domainfields.push(this.domainfield),this.close()}})}static#e=this.ɵfac=function(e){return new(e||DomainManagerAddFieldModal)(m.rXU(Ri),m.rXU(p.H),m.rXU(f.yu),m.rXU(y.g))};static#t=this.ɵcmp=m.VBU({type:DomainManagerAddFieldModal,selectors:[["ng-component"]],decls:66,vars:16,consts:[[3,"close"],[1,"slds-grid"],[1,"slds-form-element__control","slds-size--3-of-4","slds-p-right--xxx-small"],[1,"slds-form-element__label"],[1,"slds-required"],["label","LBL_NAME"],[3,"ngModel","ngModelChange"],[1,"slds-form-element__control","slds-size--1-of-4","slds-p-left--xxx-small"],["label","LBL_SCOPE"],[1,"slds-select_container"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],["value","g"],["label","LBL_GLOBAL"],["value","c"],["label","LBL_CUSTOM"],[1,"slds-large-size--1-of-5","slds-p-right--xxx-small","slds-form-element__control"],["label","LBL_DBTYPE"],[1,"slds-select",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"slds-form-element__control","slds-size--1-of-5","slds-p-horizontal--xxx-small"],["label","LBL_LENGTH"],[1,"slds-large-size--1-of-5","slds-p-horizontal--xxx-small","slds-form-element__control"],["label","LBL_REQUIRED"],[3,"asinteger","ngModel","ngModelChange"],["label","LBL_EXCLUDE_FROM_INDEX"],[1,"slds-large-size--1-of-5","slds-p-left--xxx-small","slds-form-element__control"],["label","LBL_RENDERING_TYPE"],[1,"slds-size--1-of-2","slds-p-right--xxx-small","slds-form-element__control"],["label","LBL_PACKAGE"],[1,"slds-size--1-of-2","slds-p-left--xxx-small","slds-form-element__control"],["label","LBL_VERSION"],["label","LBL_COMMENT"],[1,"slds-textarea",3,"ngModel"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CLOSE"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_SAVE"],[3,"value"]],template:function(e,t){1&e&&(m.j41(0,"system-modal")(1,"system-modal-header",0),m.bIt("close",(function(){return t.close()})),m.EFF(2,"Add Domain Field"),m.k0s(),m.j41(3,"system-modal-content")(4,"div",1)(5,"div",2)(6,"label",3)(7,"abbr",4),m.EFF(8,"* "),m.k0s(),m.nrm(9,"system-label",5),m.k0s(),m.j41(10,"system-input-text",6),m.mxI("ngModelChange",(function(e){return m.DH7(t.domainfield.name,e)||(t.domainfield.name=e),e})),m.k0s()(),m.j41(11,"div",7)(12,"label",3)(13,"abbr",4),m.EFF(14,"* "),m.k0s(),m.nrm(15,"system-label",8),m.k0s(),m.j41(16,"div",9)(17,"select",10),m.mxI("ngModelChange",(function(e){return m.DH7(t.domainfield.scope,e)||(t.domainfield.scope=e),e})),m.j41(18,"option",11),m.nrm(19,"system-label",12),m.k0s(),m.j41(20,"option",13),m.nrm(21,"system-label",14),m.k0s()()()()(),m.j41(22,"div",1)(23,"div",15)(24,"label",3)(25,"abbr",4),m.EFF(26,"* "),m.k0s(),m.nrm(27,"system-label",16),m.k0s(),m.j41(28,"div",9)(29,"select",17),m.mxI("ngModelChange",(function(e){return m.DH7(t.domainfield.dbtype,e)||(t.domainfield.dbtype=e),e})),m.DNE(30,dn,2,2,"option",18),m.k0s()()(),m.j41(31,"div",19)(32,"label",3),m.nrm(33,"system-label",20),m.k0s(),m.j41(34,"system-input-text",6),m.mxI("ngModelChange",(function(e){return m.DH7(t.domainfield.len,e)||(t.domainfield.len=e),e})),m.k0s()(),m.j41(35,"div",21)(36,"label",3),m.nrm(37,"system-label",22),m.k0s(),m.j41(38,"system-checkbox",23),m.mxI("ngModelChange",(function(e){return m.DH7(t.domainfield.required,e)||(t.domainfield.required=e),e})),m.k0s()(),m.j41(39,"div",21)(40,"label",3),m.nrm(41,"system-label",24),m.k0s(),m.j41(42,"system-checkbox",23),m.mxI("ngModelChange",(function(e){return m.DH7(t.domainfield.exclude_from_index,e)||(t.domainfield.exclude_from_index=e),e})),m.k0s()(),m.j41(43,"div",25)(44,"label",3),m.nrm(45,"system-label",26),m.k0s(),m.j41(46,"div",9)(47,"select",17),m.mxI("ngModelChange",(function(e){return m.DH7(t.domainfield.fieldtype,e)||(t.domainfield.fieldtype=e),e})),m.DNE(48,rn,2,2,"option",18),m.k0s()()()(),m.j41(49,"div",1)(50,"div",27)(51,"label",3),m.nrm(52,"system-label",28),m.k0s(),m.j41(53,"system-input-text",6),m.mxI("ngModelChange",(function(e){return m.DH7(t.domainfield.package,e)||(t.domainfield.package=e),e})),m.k0s()(),m.j41(54,"div",29)(55,"label",3),m.nrm(56,"system-label",30),m.k0s(),m.j41(57,"system-input-text",6),m.mxI("ngModelChange",(function(e){return m.DH7(t.domainfield.version,e)||(t.domainfield.version=e),e})),m.k0s()()(),m.j41(58,"label",3),m.nrm(59,"system-label",31),m.k0s(),m.nrm(60,"textarea",32),m.k0s(),m.j41(61,"system-modal-footer")(62,"button",33),m.bIt("click",(function(){return t.close()})),m.nrm(63,"system-label",34),m.k0s(),m.j41(64,"button",35),m.bIt("click",(function(){return t.save()})),m.nrm(65,"system-label",36),m.k0s()()()),2&e&&(m.R7$(10),m.R50("ngModel",t.domainfield.name),m.R7$(7),m.Y8G("disabled","c"==t.domainDefiniton.scope),m.R50("ngModel",t.domainfield.scope),m.R7$(12),m.R50("ngModel",t.domainfield.dbtype),m.R7$(),m.Y8G("ngForOf",t.domainmanager.dbtypes),m.R7$(4),m.R50("ngModel",t.domainfield.len),m.R7$(4),m.Y8G("asinteger",!0),m.R50("ngModel",t.domainfield.required),m.R7$(4),m.Y8G("asinteger",!0),m.R50("ngModel",t.domainfield.exclude_from_index),m.R7$(5),m.R50("ngModel",t.domainfield.fieldtype),m.R7$(),m.Y8G("ngForOf",t.domainmanager.fieldtypes),m.R7$(5),m.R50("ngModel",t.domainfield.package),m.R7$(4),m.R50("ngModel",t.domainfield.version),m.R7$(3),m.Y8G("ngModel",t.domainfield.description),m.R7$(4),m.Y8G("disabled",!t.canSave))},dependencies:[i.Sq,n.xH,n.y7,n.me,n.wz,n.BC,n.vS,be.f,D.H,x.W,qe.D,Pe.I,Je.Q,We.C],encapsulation:2})}return DomainManagerAddFieldModal})();function mn(e,t){if(1&e){const e=m.RV6();m.j41(0,"tr",17),m.bIt("click",(function(){const t=m.eBV(e).$implicit,s=m.XpG();return m.Njj(s.selectValidation(t.id))})),m.j41(1,"td"),m.nrm(2,"system-utility-icon",18),m.j41(3,"dictionary-manager-item-status",19),m.mxI("ngModelChange",(function(t){const s=m.eBV(e).$implicit;return m.DH7(s.status,t)||(s.status=t),m.Njj(t)})),m.k0s()(),m.j41(4,"td"),m.EFF(5),m.k0s(),m.j41(6,"td"),m.EFF(7),m.k0s()()}if(2&e){const e=t.$implicit;m.R7$(2),m.Y8G("icon","g"==e.scope?"world":"people"),m.R7$(),m.R50("ngModel",e.status),m.R7$(2),m.JRh(e.name),m.R7$(2),m.JRh(e.validation_type)}}let un=(()=>{class DomainManagerSelectValidation{constructor(e){this.domainmanager=e,this._validations=[],this.validation=new m.bkB,this._validations=e.domainfieldvalidations.sort(((e,t)=>e.name>t.name?1:-1))}get validations(){return this.filterterm?this._validations.filter((e=>e.name.toLowerCase().indexOf(this.filterterm.toLowerCase())>=0)):this._validations}selectValidation(e){this.validation.emit(e),this.close()}new(){this.validation.emit("new"),this.close()}close(){this.self.destroy()}static#e=this.ɵfac=function(e){return new(e||DomainManagerSelectValidation)(m.rXU(Ri))};static#t=this.ɵcmp=m.VBU({type:DomainManagerSelectValidation,selectors:[["domain-manager-select-validation"]],outputs:{validation:"validation"},decls:23,vars:3,consts:[[3,"close"],["label","LBL_SELECT_VALIDATION"],["margin","none",3,"grow"],[1,"slds-table","slds-table--bordered","slds-table--fixed-layout","slds-table--header-fixed","slds-max-medium-table_stacked-horizontal"],[1,"slds-text-title--caps"],["scope","col",2,"width","3rem"],["scope","col"],[1,"slds-th__action","slds-truncate"],["label","LBL_NAME"],["label","LBL_TYPE"],[3,"click",4,"ngFor","ngForOf"],[1,"slds-grid","slds-grid--vertical-align-center"],["placeholder","LBL_FILTER",1,"slds-col--bump-right",3,"ngModel","ngModelChange"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_NEW"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[3,"click"],["size","xx-small",1,"slds-p-right--xx-small",3,"icon"],[3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(m.j41(0,"system-modal")(1,"system-modal-header",0),m.bIt("close",(function(){return t.close()})),m.nrm(2,"system-label",1),m.k0s(),m.j41(3,"system-modal-content",2)(4,"table",3)(5,"thead")(6,"tr",4),m.nrm(7,"th",5),m.j41(8,"th",6)(9,"span",7),m.nrm(10,"system-label",8),m.k0s()(),m.j41(11,"th",6)(12,"span",7),m.nrm(13,"system-label",9),m.k0s()()()(),m.j41(14,"tbody"),m.DNE(15,mn,8,4,"tr",10),m.k0s()()(),m.j41(16,"system-modal-footer")(17,"div",11)(18,"system-input-text",12),m.mxI("ngModelChange",(function(e){return m.DH7(t.filterterm,e)||(t.filterterm=e),e})),m.k0s(),m.j41(19,"button",13),m.bIt("click",(function(){return t.new()})),m.nrm(20,"system-label",14),m.k0s(),m.j41(21,"button",15),m.bIt("click",(function(){return t.close()})),m.nrm(22,"system-label",16),m.k0s()()()()),2&e&&(m.R7$(3),m.Y8G("grow",!0),m.R7$(12),m.Y8G("ngForOf",t.validations),m.R7$(3),m.R50("ngModel",t.filterterm))},dependencies:[i.Sq,n.BC,n.vS,D.H,x.W,qe.D,Pe.I,Je.Q,We.C,u.B,g],encapsulation:2})}return DomainManagerSelectValidation})(),gn=(()=>{class DomainManagerAddValidation{constructor(e,t,s){this.domainmanager=e,this.backend=t,this.modelutilities=s,this.validation=new m.bkB,this.fieldvalidation={name:"",order_by:void 0,sort_flag:void 0,status:"a",validation_type:"enum",scope:"c",id:this.modelutilities.generateGuid()}}selectValidation(e){this.domainmanager.domainfields.find((e=>e.id==this.domainmanager.currentDomainField)).sysdomainfieldvalidation_id=e,this.close()}add(){this.backend.postRequest(`dictionary/domainvalidation/${this.fieldvalidation.id}`,{},this.fieldvalidation).subscribe({next:e=>{this.domainmanager.domainfieldvalidations.push(this.fieldvalidation),this.validation.emit(this.fieldvalidation.id),this.close()}})}close(){this.self.destroy()}static#e=this.ɵfac=function(e){return new(e||DomainManagerAddValidation)(m.rXU(Ri),m.rXU(p.H),m.rXU(y.g))};static#t=this.ɵcmp=m.VBU({type:DomainManagerAddValidation,selectors:[["ng-component"]],outputs:{validation:"validation"},decls:51,vars:6,consts:[[3,"close"],["label","LBL_ADD_VALIDATION"],[1,"slds-grid"],[1,"slds-form-element__control","slds-size--3-of-4","slds-p-right--xxx-small"],[1,"slds-form-element__label"],[1,"slds-required"],["label","LBL_NAME"],[3,"ngModel","ngModelChange"],[1,"slds-form-element__control","slds-size--1-of-4","slds-p-left--xxx-small"],["label","LBL_SCOPE"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],["value","g"],["label","LBL_GLOBAL"],["value","c"],["label","LBL_CUSTOM"],[1,"slds-large-size--1-of-2","slds-p-right--xxx-small","slds-form-element__control"],["label","LBL_TYPE"],["value","options"],["label","LBL_OPTIONS"],["value","range"],["label","LBL_RANGE"],[1,"slds-size--1-of-4","slds-p-right--xxx-small","slds-form-element__control"],["label","LBL_PACKAGE"],[1,"slds-size--1-of-4","slds-p-left--xxx-small","slds-form-element__control"],["label","LBL_VERSION"],["label","LBL_COMMENT"],[1,"slds-textarea",3,"ngModel"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],["label","LBL_ADD"]],template:function(e,t){1&e&&(m.EFF(0,"this.fieldvalidation.status = 'a';\n"),m.j41(1,"system-modal")(2,"system-modal-header",0),m.bIt("close",(function(){return t.close()})),m.nrm(3,"system-label",1),m.k0s(),m.j41(4,"system-modal-content")(5,"div",2)(6,"div",3)(7,"label",4)(8,"abbr",5),m.EFF(9,"* "),m.k0s(),m.nrm(10,"system-label",6),m.k0s(),m.j41(11,"system-input-text",7),m.mxI("ngModelChange",(function(e){return m.DH7(t.fieldvalidation.name,e)||(t.fieldvalidation.name=e),e})),m.k0s()(),m.j41(12,"div",8)(13,"label",4)(14,"abbr",5),m.EFF(15,"* "),m.k0s(),m.nrm(16,"system-label",9),m.k0s(),m.j41(17,"div",10)(18,"select",11),m.mxI("ngModelChange",(function(e){return m.DH7(t.fieldvalidation.scope,e)||(t.fieldvalidation.scope=e),e})),m.j41(19,"option",12),m.nrm(20,"system-label",13),m.k0s(),m.j41(21,"option",14),m.nrm(22,"system-label",15),m.k0s()()()()(),m.j41(23,"div",2)(24,"div",16)(25,"label",4)(26,"abbr",5),m.EFF(27,"* "),m.k0s(),m.nrm(28,"system-label",17),m.k0s(),m.j41(29,"div",10)(30,"select",11),m.mxI("ngModelChange",(function(e){return m.DH7(t.fieldvalidation.validation_type,e)||(t.fieldvalidation.validation_type=e),e})),m.j41(31,"option",18),m.nrm(32,"system-label",19),m.k0s(),m.j41(33,"option",20),m.nrm(34,"system-label",21),m.k0s()()()(),m.j41(35,"div",22)(36,"label",4),m.nrm(37,"system-label",23),m.k0s(),m.j41(38,"system-input-text",7),m.mxI("ngModelChange",(function(e){return m.DH7(t.fieldvalidation.package,e)||(t.fieldvalidation.package=e),e})),m.k0s()(),m.j41(39,"div",24)(40,"label",4),m.nrm(41,"system-label",25),m.k0s(),m.j41(42,"system-input-text",7),m.mxI("ngModelChange",(function(e){return m.DH7(t.fieldvalidation.version,e)||(t.fieldvalidation.version=e),e})),m.k0s()()(),m.j41(43,"label",4),m.nrm(44,"system-label",26),m.k0s(),m.nrm(45,"textarea",27),m.k0s(),m.j41(46,"system-modal-footer")(47,"button",28),m.bIt("click",(function(){return t.close()})),m.nrm(48,"system-label",29),m.k0s(),m.j41(49,"button",28),m.bIt("click",(function(){return t.add()})),m.nrm(50,"system-label",30),m.k0s()()()),2&e&&(m.R7$(11),m.R50("ngModel",t.fieldvalidation.name),m.R7$(7),m.R50("ngModel",t.fieldvalidation.scope),m.R7$(12),m.R50("ngModel",t.fieldvalidation.validation_type),m.R7$(8),m.R50("ngModel",t.fieldvalidation.package),m.R7$(4),m.R50("ngModel",t.fieldvalidation.version),m.R7$(3),m.Y8G("ngModel",t.fieldvalidation.description))},dependencies:[n.xH,n.y7,n.me,n.wz,n.BC,n.vS,D.H,x.W,qe.D,Pe.I,Je.Q,We.C],encapsulation:2})}return DomainManagerAddValidation})(),hn=(()=>{class DomainManagerAddValidationValueModal{constructor(e,t){this.domainmanager=e,this.modelutilities=t,this.validationValue=new m.bkB}ngOnInit(){this.fieldvalidationvalue={id:this.modelutilities.generateGuid(),scope:this.fieldvalidation.scope,sysdomainfieldvalidation_id:this.fieldvalidation.id,sequence:this.fieldvalidationvalues.length,status:"d",valuetype:"string",enumvalue:void 0}}get isDuplicate(){return!!this.fieldvalidationvalues.find((e=>e.enumvalue==this.fieldvalidationvalue.enumvalue))}add(){this.validationValue.emit(this.fieldvalidationvalue),this.close()}close(){this.self.destroy()}static#e=this.ɵfac=function(e){return new(e||DomainManagerAddValidationValueModal)(m.rXU(Ri),m.rXU(y.g))};static#t=this.ɵcmp=m.VBU({type:DomainManagerAddValidationValueModal,selectors:[["domain-manager-add-validationvalue-modal"]],outputs:{validationValue:"validationValue"},decls:49,vars:10,consts:[[3,"close"],["label","LBL_ADD_VALIDATION"],[1,"slds-grid"],[1,"slds-form-element__control","slds-size--1-of-2","slds-p-right--xx-small"],[1,"slds-form-element__label"],["label","LBL_VALUE_TYPE"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],["value","string"],["label","LBL_STRING"],["value","int"],["label","LBL_INTEGER"],[1,"slds-form-element__control","slds-size--1-of-2","slds-p-left--xx-small"],["label","LBL_SCOPE"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],["value","g"],["label","LBL_GLOBAL"],["value","c"],["label","LBL_CUSTOM"],["label","LBL_VALUE"],[3,"haserror","ngModel","ngModelChange"],[1,"slds-size--1-of-2","slds-p-left--xx-small","slds-form-element__control"],["label","LBL_LABEL"],[3,"ngModel","ngModelChange"],[1,"slds-size--1-of-2","slds-p-right--xx-small","slds-form-element__control"],["label","LBL_PACKAGE"],["label","LBL_VERSION"],["label","LBL_COMMENT"],[1,"slds-textarea",3,"ngModel"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--neutral",3,"disabled","click"],["label","LBL_ADD"]],template:function(e,t){1&e&&(m.j41(0,"system-modal")(1,"system-modal-header",0),m.bIt("close",(function(){return t.close()})),m.nrm(2,"system-label",1),m.k0s(),m.j41(3,"system-modal-content")(4,"div",2)(5,"div",3)(6,"label",4),m.nrm(7,"system-label",5),m.k0s(),m.j41(8,"div",6)(9,"select",7),m.mxI("ngModelChange",(function(e){return m.DH7(t.fieldvalidationvalue.valuetype,e)||(t.fieldvalidationvalue.valuetype=e),e})),m.j41(10,"option",8),m.nrm(11,"system-label",9),m.k0s(),m.j41(12,"option",10),m.nrm(13,"system-label",11),m.k0s()()()(),m.j41(14,"div",12)(15,"label",4),m.nrm(16,"system-label",13),m.k0s(),m.j41(17,"div",6)(18,"select",14),m.mxI("ngModelChange",(function(e){return m.DH7(t.fieldvalidationvalue.scope,e)||(t.fieldvalidationvalue.scope=e),e})),m.j41(19,"option",15),m.nrm(20,"system-label",16),m.k0s(),m.j41(21,"option",17),m.nrm(22,"system-label",18),m.k0s()()()()(),m.j41(23,"div",2)(24,"div",3)(25,"label",4),m.nrm(26,"system-label",19),m.k0s(),m.j41(27,"system-input-text",20),m.mxI("ngModelChange",(function(e){return m.DH7(t.fieldvalidationvalue.enumvalue,e)||(t.fieldvalidationvalue.enumvalue=e),e})),m.k0s()(),m.j41(28,"div",21)(29,"label",4),m.nrm(30,"system-label",22),m.k0s(),m.j41(31,"system-input-label",23),m.mxI("ngModelChange",(function(e){return m.DH7(t.fieldvalidationvalue.label,e)||(t.fieldvalidationvalue.label=e),e})),m.k0s()()(),m.j41(32,"div",2)(33,"div",24)(34,"label",4),m.nrm(35,"system-label",25),m.k0s(),m.j41(36,"system-input-text",23),m.mxI("ngModelChange",(function(e){return m.DH7(t.fieldvalidationvalue.package,e)||(t.fieldvalidationvalue.package=e),e})),m.k0s()(),m.j41(37,"div",21)(38,"label",4),m.nrm(39,"system-label",26),m.k0s(),m.j41(40,"system-input-text",23),m.mxI("ngModelChange",(function(e){return m.DH7(t.fieldvalidationvalue.version,e)||(t.fieldvalidationvalue.version=e),e})),m.k0s()()(),m.j41(41,"label",4),m.nrm(42,"system-label",27),m.k0s(),m.nrm(43,"textarea",28),m.k0s(),m.j41(44,"system-modal-footer")(45,"button",29),m.bIt("click",(function(){return t.close()})),m.nrm(46,"system-label",30),m.k0s(),m.j41(47,"button",31),m.bIt("click",(function(){return t.add()})),m.nrm(48,"system-label",32),m.k0s()()()),2&e&&(m.R7$(9),m.R50("ngModel",t.fieldvalidationvalue.valuetype),m.R7$(9),m.Y8G("disabled","c"==t.fieldvalidation.scope),m.R50("ngModel",t.fieldvalidationvalue.scope),m.R7$(9),m.Y8G("haserror",t.isDuplicate),m.R50("ngModel",t.fieldvalidationvalue.enumvalue),m.R7$(4),m.R50("ngModel",t.fieldvalidationvalue.label),m.R7$(5),m.R50("ngModel",t.fieldvalidationvalue.package),m.R7$(4),m.R50("ngModel",t.fieldvalidationvalue.version),m.R7$(3),m.Y8G("ngModel",t.fieldvalidationvalue.description),m.R7$(4),m.Y8G("disabled",t.isDuplicate))},dependencies:[n.xH,n.y7,n.me,n.wz,n.BC,n.vS,D.H,ze.w,x.W,qe.D,Pe.I,Je.Q,We.C],encapsulation:2})}return DomainManagerAddValidationValueModal})();var pn=s(10467),fn=s(9350),bn=s(47707);function yn(e,t){const s="object"==typeof t;return new Promise(((i,n)=>{const l=new bn.Ms({next:e=>{i(e),l.unsubscribe()},error:n,complete:()=>{s?i(t.defaultValue):n(new fn.G)}});e.subscribe(l)}))}var _n=s(41731),kn=s(49380);let vn=(()=>{class FieldsetManagerFieldsetDetails{constructor(e,t,s,i){this.backend=e,this.metadata=t,this.language=s,this.view=i,this.fieldset={},this.currentFieldSet={},this.currentFieldSetConfig={}}ngOnChanges(e){this.fieldset.isViewMode?this.view.setViewMode():this.view.setEditMode();try{this.metadata.getFieldSetItems(this.fieldset.fieldset).some((e=>{if(e.id==this.fieldset.id)return this.currentFieldSet=this.metadata.getFieldset(e.fieldset),this.currentFieldSetConfig=e.fieldconfig,!0}))}catch(e){this.currentFieldSet={}}}get fieldsetname(){try{let e;return this.metadata.getFieldSetItems(this.fieldset.fieldset).some((t=>{if(t.id==this.fieldset.id)return e=t,!0})),this.metadata.getFieldsetName(e.fieldset)}catch(e){return""}}set fieldsetname(e){}static#e=this.ɵfac=function(e){return new(e||FieldsetManagerFieldsetDetails)(m.rXU(p.H),m.rXU(f.yu),m.rXU(b.B),m.rXU(_n.U))};static#t=this.ɵcmp=m.VBU({type:FieldsetManagerFieldsetDetails,selectors:[["fieldsetmanager-fieldset-details"]],inputs:{fieldset:"fieldset"},features:[m.Jv_([_n.U]),m.OA$],decls:48,vars:15,consts:[[1,"slds-form-element","slds-m-bottom--x-small"],[1,"slds-form-element__label"],["label","LBL_NAME"],[1,"slds-form-element__control"],["type","text",1,"slds-input",3,"disabled","ngModel","ngModelChange"],["type","text","disabled","",1,"slds-input",3,"ngModel"],[1,"slds-form-element","slds-m-vertical--x-small"],["label","LBL_PACKAGE"],["label","LBL_VERSION"],["label","LBL_FORMCLASS"],[1,"slds-checkbox"],["name","options","id","cbDirection","value","vertical","type","checkbox",3,"disabled","checked","change"],["for","cbDirection",1,"slds-checkbox__label"],[1,"slds-checkbox_faux"],["label","LBL_VERTICAL"],[1,"slds-form-element","slds-m-top--x-small"],["label","LBL_WIDTH"]],template:function(e,t){1&e&&(m.j41(0,"div",0)(1,"label",1),m.nrm(2,"system-label",2),m.k0s(),m.j41(3,"div",3)(4,"input",4),m.mxI("ngModelChange",(function(e){return m.DH7(t.currentFieldSet.name,e)||(t.currentFieldSet.name=e),e})),m.k0s()()(),m.j41(5,"div",0)(6,"label",1),m.EFF(7,"ID of Parent Fieldset"),m.k0s(),m.j41(8,"div",3),m.nrm(9,"input",5),m.k0s()(),m.j41(10,"div",0)(11,"label",1),m.EFF(12,"ID of Parent Fieldset Element"),m.k0s(),m.j41(13,"div",3),m.nrm(14,"input",5),m.k0s()(),m.j41(15,"div",0)(16,"label",1),m.EFF(17,"ID of Fieldset"),m.k0s(),m.j41(18,"div",3),m.nrm(19,"input",5),m.k0s()(),m.j41(20,"div",6)(21,"label",1),m.nrm(22,"system-label",7),m.k0s(),m.j41(23,"div",3)(24,"input",4),m.mxI("ngModelChange",(function(e){return m.DH7(t.currentFieldSet.package,e)||(t.currentFieldSet.package=e),e})),m.k0s()()(),m.j41(25,"div",6)(26,"label",1),m.nrm(27,"system-label",8),m.k0s(),m.j41(28,"div",3)(29,"input",4),m.mxI("ngModelChange",(function(e){return m.DH7(t.currentFieldSet.version,e)||(t.currentFieldSet.version=e),e})),m.k0s()()(),m.j41(30,"div",6)(31,"label",1),m.nrm(32,"system-label",9),m.k0s(),m.j41(33,"div",3)(34,"input",4),m.mxI("ngModelChange",(function(e){return m.DH7(t.currentFieldSetConfig.formclass,e)||(t.currentFieldSetConfig.formclass=e),e})),m.k0s()()(),m.j41(35,"div",6)(36,"span",10)(37,"input",11),m.bIt("change",(function(){return t.currentFieldSetConfig.direction="vertical"===t.currentFieldSetConfig.direction?null:"vertical"})),m.k0s(),m.j41(38,"label",12),m.nrm(39,"span",13),m.j41(40,"span",1),m.nrm(41,"system-label",14),m.k0s()()()(),m.j41(42,"div",15)(43,"label",1),m.nrm(44,"system-label",16),m.EFF(45," (number of parts, leave blank for 1)"),m.k0s(),m.j41(46,"div",3)(47,"input",4),m.mxI("ngModelChange",(function(e){return m.DH7(t.currentFieldSetConfig.width,e)||(t.currentFieldSetConfig.width=e),e})),m.k0s()()()),2&e&&(m.R7$(4),m.Y8G("disabled",!t.view.isEditMode()),m.R50("ngModel",t.currentFieldSet.name),m.R7$(5),m.Y8G("ngModel",t.fieldset.fieldset),m.R7$(5),m.Y8G("ngModel",t.fieldset.id),m.R7$(5),m.Y8G("ngModel",t.currentFieldSet.id),m.R7$(5),m.Y8G("disabled",!t.view.isEditMode()),m.R50("ngModel",t.currentFieldSet.package),m.R7$(5),m.Y8G("disabled",!t.view.isEditMode()),m.R50("ngModel",t.currentFieldSet.version),m.R7$(5),m.Y8G("disabled",!t.view.isEditMode()),m.R50("ngModel",t.currentFieldSetConfig.formclass),m.R7$(3),m.Y8G("disabled",!t.view.isEditMode())("checked","vertical"===t.currentFieldSetConfig.direction),m.R7$(10),m.Y8G("disabled",!t.view.isEditMode()),m.R50("ngModel",t.currentFieldSetConfig.width))},dependencies:[n.me,n.BC,n.vS,x.W],encapsulation:2})}return FieldsetManagerFieldsetDetails})();var Rn=s(59851);const Mn=["optionscontainer"];let jn=(()=>{class WorkbenchConfig{constructor(e,t,s){this.backend=e,this.metadata=t,this.language=s,this.component="",this.configValues={},this.configOptions=[],this.optionsElements=[]}ngOnChanges(e){for(let e of this.optionsElements)e.destroy();this.optionsElements=[],this.configOptions=[];let t=this.metadata.getComponentConfigOptions(this.component);for(let e in t)this.configOptions.push({option:e,type:t[e].type?t[e].type:"string",description:t[e].description?t[e].description:""});for(let e of this.configOptions){let t="";t="WorkbenchConfigOption"+(e.type.charAt(0).toUpperCase()+e.type.slice(1)),this.metadata.checkComponent(t)||(t="WorkbenchConfigOptionDefault"),this.metadata.addComponent(t,this.optionscontainer).subscribe((t=>{this.optionsElements.push(t),t.instance.option=e,t.instance.configValues=this.configValues}))}}static#e=this.ɵfac=function(e){return new(e||WorkbenchConfig)(m.rXU(p.H),m.rXU(f.yu),m.rXU(b.B))};static#t=this.ɵcmp=m.VBU({type:WorkbenchConfig,selectors:[["workbench-config"]],viewQuery:function(e,t){if(1&e&&m.GBs(Mn,7,m.c1b),2&e){let e;m.mGM(e=m.lsd())&&(t.optionscontainer=e.first)}},inputs:{component:"component",configValues:"configValues"},features:[m.OA$],decls:2,vars:0,consts:[["optionscontainer",""]],template:function(e,t){1&e&&m.nrm(0,"div",null,0)},encapsulation:2})}return WorkbenchConfig})();function Ln(e,t){if(1&e){const e=m.RV6();m.j41(0,"system-input-label",51),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.configValues.label,t)||(s.configValues.label=t),m.Njj(t)})),m.k0s()}if(2&e){const e=m.XpG();m.R50("ngModel",e.configValues.label)}}function xn(e,t){if(1&e){const e=m.RV6();m.j41(0,"input",52),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.configValues.label,t)||(s.configValues.label=t),m.Njj(t)})),m.k0s()}if(2&e){const e=m.XpG();m.R50("ngModel",e.configValues.label)}}function In(e,t){if(1&e){const e=m.RV6();m.j41(0,"div",0)(1,"div",36)(2,"div",53)(3,"label",1),m.nrm(4,"system-label",54),m.k0s(),m.nrm(5,"system-icon-help-text",55),m.j41(6,"input",38),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.configValues.sortfield,t)||(s.configValues.sortfield=t),m.Njj(t)})),m.k0s()(),m.j41(7,"div",53)(8,"label",1),m.nrm(9,"system-label",56),m.k0s(),m.j41(10,"div",40)(11,"select",41),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.configValues.sortordersequence,t)||(s.configValues.sortordersequence=t),m.Njj(t)})),m.j41(12,"option",57),m.EFF(13,"ASC -> DESC"),m.k0s(),m.j41(14,"option",58),m.EFF(15,"DESC -> ASC"),m.k0s()()()()()()}if(2&e){const e=m.XpG();m.R7$(6),m.Y8G("disabled",!e.view.isEditMode()),m.R50("ngModel",e.configValues.sortfield),m.R7$(5),m.Y8G("disabled",!e.view.isEditMode()),m.R50("ngModel",e.configValues.sortordersequence)}}function Dn(e,t){if(1&e&&(m.j41(0,"option"),m.EFF(1),m.k0s()),2&e){const e=t.$implicit;m.R7$(),m.JRh(e)}}let En=(()=>{class FieldsetManagerFieldDetails{constructor(e,t,s,i){this.backend=e,this.metadata=t,this.language=s,this.view=i,this.field={},this.currentField={},this.fieldtypes=[],this.component="",this.configValues={},this.fieldtypes=this.metadata.getFieldTypes(),this.fieldtypes.sort(),this.fieldtypes.unshift("")}ngOnChanges(e){this.field.isViewMode?this.view.setViewMode():this.view.setEditMode();try{this.metadata.getFieldSetItems(this.field.fieldset).some((e=>{if(e.id==this.field.id)return this.currentField=e,this.component=this.metadata.getFieldTypeComponent(e.fieldconfig.fieldtype),this.configValues=e.fieldconfig,!0}))}catch(e){this.currentField={}}}get configValuesLabel(){let e=null;return"label"in this.configValues&&null!=this.configValues.label&&(e={name:this.configValues.label}),e}set configValuesLabel(e){this.configValues.label=null!=e?e.name:null}configValuesLabelEmit(e){this.configValuesLabel=e}get InputConfig(){return{option:"name",type:"label",description:""}}getFieldConfig(){if(this.configValues.fieldtype){let e=this.metadata.getFieldTypeComponent(this.configValues.fieldtype),t=this.metadata.getComponentConfigOptions(e),s=[];for(let e in t)s.push(e);return s}return[]}selectFieldType(){this.component=this.metadata.getFieldTypeComponent(this.configValues.fieldtype)}static#e=this.ɵfac=function(e){return new(e||FieldsetManagerFieldDetails)(m.rXU(p.H),m.rXU(f.yu),m.rXU(b.B),m.rXU(_n.U))};static#t=this.ɵcmp=m.VBU({type:FieldsetManagerFieldDetails,selectors:[["fieldsetmanager-field-details"]],inputs:{field:"field"},features:[m.Jv_([_n.U]),m.OA$],decls:87,vars:31,consts:[[1,"slds-form-element","slds-m-vertical--xxx-small"],[1,"slds-form-element__label"],["label","LBL_NAME"],[1,"slds-form-element__control","slds-input-has-icon","slds-input-has-icon--right"],["type","text","placeholder","name",1,"slds-input",3,"disabled","ngModel","ngModelChange"],[1,"slds-form-element","slds-m-bottom--x-small"],[1,"slds-form-element__control"],["type","text","disabled","",1,"slds-input",3,"ngModel"],["label","LBL_PACKAGE"],["type","text","placeholder","package",1,"slds-input",3,"disabled","ngModel","ngModelChange"],["label","LBL_VERSION"],["type","text","placeholder","version",1,"slds-input",3,"disabled","ngModel","ngModelChange"],[1,"slds-form-element","slds-m-vertical--xx-small"],["label","LBL_LABEL"],[3,"ngModel","ngModelChange",4,"ngIf"],["class","slds-input","disabled","",3,"ngModel","ngModelChange",4,"ngIf"],[1,"slds-form-element__legend","slds-form-element__label"],["label","LBL_OPTIONS"],["for","link",1,"slds-checkbox"],["type","checkbox","id","link",3,"disabled","ngModel","ngModelChange"],[1,"slds-checkbox--faux"],["label","LBL_LINK"],["for","default",1,"slds-checkbox"],["type","checkbox","id","default",3,"disabled","ngModel","ngModelChange"],["label","LBL_HIDDEN"],["for","hidelabel",1,"slds-checkbox"],["type","checkbox","id","hidelabel",3,"disabled","ngModel","ngModelChange"],["label","LBL_HIDE_LABEL"],["for","readonly",1,"slds-checkbox"],["type","checkbox","id","readonly",3,"disabled","ngModel","ngModelChange"],["label","LBL_READONLY"],["for","sortable",1,"slds-checkbox"],["type","checkbox","id","sortable",3,"disabled","ngModel","ngModelChange"],["label","LBL_SORTABLE"],["class","slds-form-element slds-m-vertical--xxx-small",4,"ngIf"],["label","LBL_WIDTH"],[1,"slds-grid","slds-gutters_xx-small"],[1,"slds-col","slds-form-element__control","slds-size--3-of-4"],["type","text",1,"slds-input",3,"disabled","ngModel","ngModelChange"],[1,"slds-col","slds-form-element__control","slds-size--1-of-4"],[1,"slds-select_container"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],["value",""],["value","px"],["value","rem"],["value","%"],["label","LBL_REQUIREDMODELSTATE"],["label","LBL_FIELDTYPE"],[1,"slds-select",3,"disabled","ngModel","ngModelChange","change"],[4,"ngFor","ngForOf"],[3,"component","configValues"],[3,"ngModel","ngModelChange"],["disabled","",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-col","slds-form-element__control","slds-size--2-of-4"],["label","LBL_SORTFIELD_NAME"],["helpText","HLP_SORTFIELD_NAME"],["label","LBL_SORTORDERSEQUENCE"],["value","0"],["value","1"]],template:function(e,t){1&e&&(m.j41(0,"div",0)(1,"label",1),m.nrm(2,"system-label",2),m.k0s(),m.j41(3,"div",3)(4,"input",4),m.mxI("ngModelChange",(function(e){return m.DH7(t.currentField.field,e)||(t.currentField.field=e),e})),m.k0s()()(),m.j41(5,"div",5)(6,"label",1),m.EFF(7,"ID"),m.k0s(),m.j41(8,"div",6),m.nrm(9,"input",7),m.k0s()(),m.j41(10,"div",0)(11,"label",1),m.nrm(12,"system-label",8),m.k0s(),m.j41(13,"div",3)(14,"input",9),m.mxI("ngModelChange",(function(e){return m.DH7(t.currentField.package,e)||(t.currentField.package=e),e})),m.k0s()()(),m.j41(15,"div",0)(16,"label",1),m.nrm(17,"system-label",10),m.k0s(),m.j41(18,"div",3)(19,"input",11),m.mxI("ngModelChange",(function(e){return m.DH7(t.currentField.version,e)||(t.currentField.version=e),e})),m.k0s()()(),m.j41(20,"div",12)(21,"label",1),m.nrm(22,"system-label",13),m.k0s(),m.DNE(23,Ln,1,1,"system-input-label",14)(24,xn,1,1,"input",15),m.k0s(),m.j41(25,"fieldset",0)(26,"legend",16),m.nrm(27,"system-label",17),m.k0s(),m.j41(28,"div",6)(29,"label",18)(30,"input",19),m.mxI("ngModelChange",(function(e){return m.DH7(t.configValues.link,e)||(t.configValues.link=e),e})),m.k0s(),m.nrm(31,"span",20),m.j41(32,"span",1),m.nrm(33,"system-label",21),m.k0s()(),m.j41(34,"label",22)(35,"input",23),m.mxI("ngModelChange",(function(e){return m.DH7(t.configValues.hidden,e)||(t.configValues.hidden=e),e})),m.k0s(),m.nrm(36,"span",20),m.j41(37,"span",1),m.nrm(38,"system-label",24),m.k0s()(),m.j41(39,"label",25)(40,"input",26),m.mxI("ngModelChange",(function(e){return m.DH7(t.configValues.hidelabel,e)||(t.configValues.hidelabel=e),e})),m.k0s(),m.nrm(41,"span",20),m.j41(42,"span",1),m.nrm(43,"system-label",27),m.k0s()(),m.j41(44,"label",28)(45,"input",29),m.mxI("ngModelChange",(function(e){return m.DH7(t.configValues.readonly,e)||(t.configValues.readonly=e),e})),m.k0s(),m.nrm(46,"span",20),m.j41(47,"span",1),m.nrm(48,"system-label",30),m.k0s()(),m.j41(49,"label",31)(50,"input",32),m.mxI("ngModelChange",(function(e){return m.DH7(t.configValues.sortable,e)||(t.configValues.sortable=e),e})),m.k0s(),m.nrm(51,"span",20),m.j41(52,"span",1),m.nrm(53,"system-label",33),m.k0s()()()(),m.DNE(54,In,16,4,"div",34),m.j41(55,"div",0)(56,"label",1),m.nrm(57,"system-label",35),m.EFF(58," (number of parts, leave blank for 1)"),m.k0s(),m.j41(59,"div",36)(60,"div",37)(61,"input",38),m.mxI("ngModelChange",(function(e){return m.DH7(t.configValues.width,e)||(t.configValues.width=e),e})),m.k0s()(),m.j41(62,"div",39)(63,"div",40)(64,"select",41),m.mxI("ngModelChange",(function(e){return m.DH7(t.configValues.widthdimension,e)||(t.configValues.widthdimension=e),e})),m.j41(65,"option",42),m.EFF(66,"units"),m.k0s(),m.j41(67,"option",43),m.EFF(68,"px"),m.k0s(),m.j41(69,"option",44),m.EFF(70,"rem"),m.k0s(),m.j41(71,"option",45),m.EFF(72,"%"),m.k0s()()()()()(),m.j41(73,"div",0)(74,"label",1),m.nrm(75,"system-label",46),m.EFF(76," if this field is conditional to a specific model state"),m.k0s(),m.j41(77,"div",6)(78,"input",38),m.mxI("ngModelChange",(function(e){return m.DH7(t.configValues.requiredmodelstate,e)||(t.configValues.requiredmodelstate=e),e})),m.k0s()()(),m.j41(79,"div",0)(80,"label",1),m.nrm(81,"system-label",47),m.k0s(),m.j41(82,"div",6)(83,"div",40)(84,"select",48),m.mxI("ngModelChange",(function(e){return m.DH7(t.configValues.fieldtype,e)||(t.configValues.fieldtype=e),e})),m.bIt("change",(function(){return t.selectFieldType()})),m.DNE(85,Dn,2,1,"option",49),m.k0s()()()(),m.nrm(86,"workbench-config",50)),2&e&&(m.R7$(4),m.Y8G("disabled",!t.view.isEditMode()),m.R50("ngModel",t.currentField.field),m.R7$(5),m.Y8G("ngModel",t.currentField.id),m.R7$(5),m.Y8G("disabled",!t.view.isEditMode()),m.R50("ngModel",t.currentField.package),m.R7$(5),m.Y8G("disabled",!t.view.isEditMode()),m.R50("ngModel",t.currentField.version),m.R7$(4),m.Y8G("ngIf",t.view.isEditMode()),m.R7$(),m.Y8G("ngIf",!t.view.isEditMode()),m.R7$(6),m.Y8G("disabled",!t.view.isEditMode()),m.R50("ngModel",t.configValues.link),m.R7$(5),m.Y8G("disabled",!t.view.isEditMode()),m.R50("ngModel",t.configValues.hidden),m.R7$(5),m.Y8G("disabled",!t.view.isEditMode()),m.R50("ngModel",t.configValues.hidelabel),m.R7$(5),m.Y8G("disabled",!t.view.isEditMode()),m.R50("ngModel",t.configValues.readonly),m.R7$(5),m.Y8G("disabled",!t.view.isEditMode()),m.R50("ngModel",t.configValues.sortable),m.R7$(4),m.Y8G("ngIf",t.configValues.sortable),m.R7$(7),m.Y8G("disabled",!t.view.isEditMode()),m.R50("ngModel",t.configValues.width),m.R7$(3),m.Y8G("disabled",!t.view.isEditMode()),m.R50("ngModel",t.configValues.widthdimension),m.R7$(14),m.Y8G("disabled",!t.view.isEditMode()),m.R50("ngModel",t.configValues.requiredmodelstate),m.R7$(6),m.Y8G("disabled",!t.view.isEditMode()),m.R50("ngModel",t.configValues.fieldtype),m.R7$(),m.Y8G("ngForOf",t.fieldtypes),m.R7$(),m.Y8G("component",t.component)("configValues",t.configValues))},dependencies:[i.Sq,i.bT,n.xH,n.y7,n.me,n.Zm,n.wz,n.BC,n.vS,ze.w,x.W,Rn.N,jn],encapsulation:2})}return FieldsetManagerFieldDetails})();function Cn(e,t){if(1&e&&(m.j41(0,"option",19),m.EFF(1),m.k0s()),2&e){const e=t.$implicit;m.Y8G("value",e),m.R7$(),m.SpI("",e," ")}}function Fn(e,t){if(1&e&&(m.j41(0,"option",22),m.EFF(1),m.k0s()),2&e){const e=t.$implicit;m.Y8G("ngValue",e.id),m.R7$(),m.SpI("",e.name," ")}}function Gn(e,t){if(1&e&&(m.j41(0,"optgroup",20),m.DNE(1,Fn,2,2,"option",21),m.k0s()),2&e){const e=m.XpG();m.Y8G("label","custom"+e.language.getLabel("LBL_FIELDSET")),m.R7$(),m.Y8G("ngForOf",e.getFieldSets("custom"))}}function $n(e,t){if(1&e&&(m.j41(0,"option",22),m.EFF(1),m.k0s()),2&e){const e=t.$implicit;m.Y8G("ngValue",e.id),m.R7$(),m.SpI("",e.name," ")}}function Bn(e,t){if(1&e&&(m.j41(0,"optgroup",20),m.DNE(1,$n,2,2,"option",21),m.k0s()),2&e){const e=m.XpG();m.Y8G("label","global"+e.language.getLabel("LBL_FIELDSET")),m.R7$(),m.Y8G("ngForOf",e.getFieldSets("global"))}}function Nn(e,t){if(1&e&&m.nrm(0,"system-custom-icon",61),2&e){const e=m.XpG().$implicit,t=m.XpG(2);m.Y8G("icon",t.getDisplayType(e))}}const Sn=e=>({"slds-theme--shade":e});function wn(e,t){if(1&e){const e=m.RV6();m.j41(0,"li",51),m.bIt("click",(function(){const t=m.eBV(e).$implicit,s=m.XpG(2);return m.Njj(s.selectItem(t,s.getDisplayType(t)))})),m.j41(1,"div",52),m.DNE(2,Nn,1,1,"system-custom-icon",53),m.j41(3,"div",54)(4,"a",55),m.EFF(5),m.k0s()(),m.j41(6,"div",56)(7,"button",43),m.bIt("click",(function(){const t=m.eBV(e).$implicit,s=m.XpG(2);return m.Njj(s.addItem(t.item.fieldset))})),m.nrm(8,"system-button-icon",44),m.k0s(),m.j41(9,"button",57),m.bIt("click",(function(){const t=m.eBV(e).$implicit,s=m.XpG(2);return m.Njj(s.openCopyModal(t))})),m.nrm(10,"system-button-icon",44),m.k0s(),m.j41(11,"button",58),m.bIt("click",(function(){const t=m.eBV(e).$implicit,s=m.XpG(2);return m.Njj(s.unlinkItem(t))})),m.nrm(12,"system-button-icon",44),m.k0s(),m.j41(13,"button",59),m.bIt("click",(function(){const t=m.eBV(e).$implicit,s=m.XpG(2);return m.Njj(s.moveDown(t))})),m.nrm(14,"system-button-icon",44),m.k0s(),m.j41(15,"button",60),m.bIt("click",(function(){const t=m.eBV(e).$implicit,s=m.XpG(2);return m.Njj(s.moveUp(t))})),m.nrm(16,"system-button-icon",44),m.k0s()()()()}if(2&e){const e=t.$implicit,s=m.XpG(2);m.Y8G("ngClass",m.eq3(14,Sn,s.isSelected(e.id))),m.BMQ("aria-level",e.level),m.R7$(2),m.Y8G("ngIf",""!=s.getDisplayType(e)),m.R7$(3),m.JRh(s.getDisplayName(e)),m.R7$(2),m.Y8G("disabled",!s.view.isEditMode()||"field"==e.type||e.customModeGlobalField),m.R7$(),m.Y8G("icon","new"),m.R7$(),m.Y8G("disabled",!s.view.isEditMode()||"field"==e.type),m.R7$(),m.Y8G("icon","copy"),m.R7$(),m.Y8G("disabled",!s.view.isEditMode()||"global"==e.parentScope&&"field"==e.type),m.R7$(),m.Y8G("icon","remove_link"),m.R7$(),m.Y8G("disabled",!s.view.isEditMode()||e.index+1==e.count||e.customModeGlobalField),m.R7$(),m.Y8G("icon","down"),m.R7$(),m.Y8G("disabled",!s.view.isEditMode()||0==e.index||e.customModeGlobalField),m.R7$(),m.Y8G("icon","up")}}function Tn(e,t){if(1&e&&m.nrm(0,"fieldsetmanager-fieldset-details",62),2&e){const e=m.XpG(2);m.Y8G("fieldset",e.selectedItem)}}function An(e,t){if(1&e&&m.nrm(0,"fieldsetmanager-field-details",63),2&e){const e=m.XpG(2);m.Y8G("field",e.selectedItem)}}function Yn(e,t){if(1&e){const e=m.RV6();m.j41(0,"div",23)(1,"div",24)(2,"div",25)(3,"div",26)(4,"label",4),m.nrm(5,"system-label",27),m.k0s(),m.j41(6,"div",28),m.nrm(7,"system-utility-icon",29)(8,"input",30),m.k0s()(),m.j41(9,"div",26)(10,"label",4),m.nrm(11,"system-label",31),m.k0s(),m.j41(12,"div",32)(13,"input",33),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.currentFieldSetName,t)||(s.currentFieldSetName=t),m.Njj(t)})),m.k0s()()(),m.j41(14,"div",26)(15,"label",4),m.nrm(16,"system-label",34),m.k0s(),m.j41(17,"div",32)(18,"input",33),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.currentFieldSetPackage,t)||(s.currentFieldSetPackage=t),m.Njj(t)})),m.k0s()()(),m.j41(19,"div",26)(20,"label",4),m.nrm(21,"system-label",35),m.k0s(),m.j41(22,"div",32)(23,"input",33),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.currentFieldSetVersion,t)||(s.currentFieldSetVersion=t),m.Njj(t)})),m.k0s()()(),m.j41(24,"div",26)(25,"label",4),m.nrm(26,"system-label",36),m.k0s(),m.j41(27,"div",32),m.nrm(28,"input",30),m.k0s()()()(),m.j41(29,"div",37)(30,"div",38)(31,"div",39)(32,"ul",40),m.DNE(33,wn,17,16,"li",41),m.k0s()(),m.j41(34,"div",42)(35,"button",43),m.bIt("click",(function(){m.eBV(e);const t=m.XpG();return m.Njj(t.addItem())})),m.nrm(36,"system-button-icon",44),m.k0s()()(),m.j41(37,"div",45),m.DNE(38,Tn,1,1,"fieldsetmanager-fieldset-details",46)(39,An,1,1,"fieldsetmanager-field-details",47),m.k0s()(),m.j41(40,"div",48)(41,"button",49),m.bIt("click",(function(){m.eBV(e);const t=m.XpG();return m.Njj(t.saveChanges())})),m.nrm(42,"system-label",50),m.k0s()()()}if(2&e){const e=m.XpG();m.R7$(7),m.Y8G("icon","global"==e.fieldSetType?"world":"user"),m.R7$(),m.Y8G("ngModel",e.fieldSetType),m.R7$(5),m.Y8G("disabled",!e.view.isEditMode()),m.R50("ngModel",e.currentFieldSetName),m.R7$(5),m.Y8G("disabled",!e.view.isEditMode()),m.R50("ngModel",e.currentFieldSetPackage),m.R7$(5),m.Y8G("disabled",!e.view.isEditMode()),m.R50("ngModel",e.currentFieldSetVersion),m.R7$(5),m.Y8G("ngModel",e.currentFieldSet),m.R7$(5),m.Y8G("ngForOf",e.currentFieldSetItems),m.R7$(2),m.Y8G("disabled",!e.view.isEditMode()),m.R7$(),m.Y8G("icon","new"),m.R7$(2),m.Y8G("ngIf","fieldset"==e.selectedItem.type),m.R7$(),m.Y8G("ngIf","field"==e.selectedItem.type),m.R7$(2),m.Y8G("disabled",!e.view.isEditMode())}}let On=(()=>{class FieldsetManager{constructor(e,t,s,i,n,l,o,a,d,r){this.backend=e,this.metadata=t,this.language=s,this.modelutilities=i,this.broadcast=n,this.toast=l,this.modalservice=o,this.configurationService=a,this.view=d,this.modal=r,this.edit_mode="custom",this.allowBarButtons=!0,this.crNoneActive=!1,this.change_request_required=!1,this.modules=[],this.currentModule="*",this.currentFieldSet="",this.currentFieldSetItems=[],this.selectedItem={type:"",fieldset:"",id:"",isViewMode:!1},this.showFieldSetDetails=!1,this.modules=this.metadata.getModules().sort(),this.checkMode()}get currentFieldSetName(){return this.metadata.getFieldset(this.currentFieldSet).name}set currentFieldSetName(e){this.metadata.setFieldset(this.currentFieldSet,{name:e,package:this.currentFieldSetPackage,version:this.currentFieldSetVersion})}get currentFieldSetPackage(){return this.metadata.getFieldset(this.currentFieldSet).package}set currentFieldSetPackage(e){this.metadata.setFieldset(this.currentFieldSet,{name:this.currentFieldSetName,package:e,version:this.currentFieldSetVersion})}get currentFieldSetVersion(){return this.metadata.getFieldset(this.currentFieldSet).version}set currentFieldSetVersion(e){this.metadata.setFieldset(this.currentFieldSet,{name:this.currentFieldSetName,package:this.currentFieldSetPackage,version:e})}get showDetailIcon(){return this.showFieldSetDetails?"chevronup":"chevrondown"}toggleDetail(){this.showFieldSetDetails=!this.showFieldSetDetails}get fieldSetType(){return this.currentFieldSet?this.metadata.getFieldset(this.currentFieldSet).type:""}getFieldSets(e){if(e){let t=[],s=this.metadata.getFieldSets(this.currentModule);for(let i of s)i.type==e&&t.push(i);return t}return this.metadata.getFieldSets(this.currentModule)}checkMode(){this.edit_mode=this.configurationService.getCapabilityConfig("core").edit_mode,this.change_request_required=!!this.configurationService.getCapabilityConfig("systemdeployment").change_request_required,"none"!=this.edit_mode&&"custom"!=this.edit_mode&&"all"!=this.edit_mode&&(this.edit_mode="custom"),this.change_request_required?this.backend.getRequest("module/SystemDeploymentCRs/active").subscribe((e=>{""==e.id?(this.setNoneMode(),this.crNoneActive=!0,this.toast.sendToast(this.language.getLabel("LBL_ACTIVATE_CR_WARNING"),"warning",null,3)):(this.crNoneActive=!1,"all"==this.edit_mode?this.setAllMode():"custom"==this.edit_mode?this.setCustomMode():this.setNoneMode())})):(this.crNoneActive=!1,"all"==this.edit_mode?this.setAllMode():"custom"==this.edit_mode?this.setCustomMode():this.setNoneMode())}setNoneMode(){this.view.setViewMode(),this.allowBarButtons=!1}setCustomMode(){"custom"==this.fieldSetType?this.view.setEditMode():this.view.setViewMode()}setAllMode(){this.view.setEditMode()}loadCurrentFieldset(){this.selectedItem={type:"",fieldset:"",id:""},this.checkMode(),this.currentFieldSetItems=[],this.addFieldSetItems(this.currentFieldSet,0,this.fieldSetType)}addItem(e=""){this.modalservice.openModal("FieldsetManagerAddDialog").subscribe((t=>{t.instance.metadata=this.metadata,t.instance.module=this.currentModule,t.instance.fieldsettype=this.fieldSetType,t.instance.edit_mode=this.edit_mode,t.instance.parent=e||this.currentFieldSet,t.instance.closedialog.subscribe((e=>{e&&this.loadCurrentFieldset()}))}))}unlinkItem(e){this.metadata.removeFieldsetItem(e.fieldset,e.item)&&(this.selectedItem={type:"",fieldset:"",id:""},this.loadCurrentFieldset())}editFieldset(){this.modalservice.openModal("FieldsetManagerEditDialog").subscribe((e=>{e.instance.fieldset=this.currentFieldSet,e.instance.edit_mode=this.edit_mode,e.instance.closedialog.subscribe((e=>{if(!1!==e){if(""!=this.currentFieldSet)this.metadata.setFieldset(this.currentFieldSet,{name:e.name,type:e.type});else{let t=this.modelutilities.generateGuid();this.metadata.addFieldset(t,this.currentModule,e.name,e.type),this.currentFieldSet=t}this.checkMode()}}))}))}addFieldset(){this.currentFieldSet="",this.currentFieldSetItems=[],this.editFieldset()}reset(){this.currentFieldSet="",this.currentFieldSetItems=[],this.selectedItem={type:"",fieldset:"",id:""}}addFieldSetItems(e,t=0,s="global"){let i=this.metadata.getFieldSetItems(e);i.forEach(((n,l)=>{let o=!1;if("custom"!=this.edit_mode||this.crNoneActive?("none"==this.edit_mode||this.crNoneActive)&&(o=!0):"global"==s&&(o=!0),n.field){let a={level:t+1,type:"field",fieldset:e,id:n.id,name:n.field,index:l,count:i.length,item:n,parentScope:s,customModeGlobalField:o};this.currentFieldSetItems.push(a)}else if(n.fieldset){let o=!1;if("custom"!=this.edit_mode||this.crNoneActive)("none"==this.edit_mode||this.crNoneActive)&&(o=!0);else{let e=this.metadata.getFieldset(n.fieldset);e&&"global"==e.type&&(o=!0)}let a={level:t+1,type:"fieldset",fieldset:e,id:n.id,name:this.metadata.getFieldsetName(n.fieldset),index:l,count:i.length,item:n,parentScope:s,customModeGlobalField:o};this.currentFieldSetItems.push(a),this.addFieldSetItems(n.fieldset,t+1,this.getDisplayType(a))}}))}getDisplayName(e){return"field"==e.type?e.item.field:"fieldset"==e.type?this.metadata.getFieldsetName(e.item.fieldset):void 0}getDisplayType(e){if("fieldset"==e.type){let t=this.metadata.getFieldset(e.item.fieldset);if(t)return t.type}}isSelected(e){return e==this.selectedItem.id}selectItem(e,t){this.selectedItem={type:e.type,fieldset:e.fieldset,id:e.id,isViewMode:e.customModeGlobalField}}moveDown(e){let t=this.metadata.getFieldSetItems(e.fieldset),s=0;if(t.some(((t,i)=>{if(t.id==e.id)return s=i,!0})),s<t.length-1){let e=t.splice(s,1);t.splice(s+1,0,e[0]);let i=0;for(let e of t)e.sequence=i,i++;this.loadCurrentFieldset()}}moveUp(e){let t=this.metadata.getFieldSetItems(e.fieldset),s=0;if(t.some(((t,i)=>{if(t.id==e.id)return s=i,!0})),s>0){let e=t.splice(s,1);t.splice(s-1,0,e[0]);let i=0;for(let e of t)e.sequence=i,i++;this.loadCurrentFieldset()}}allowEdit(){return""!=this.currentFieldSet}findTable(e){let t;return t="global"==e?{fieldsetTable:"sysuifieldsets",itemsTable:"sysuifieldsetsitems"}:{fieldsetTable:"sysuicustomfieldsets",itemsTable:"sysuicustomfieldsetsitems"},t}openCopyModal(e){var t=this;return(0,pn.A)((function*(){const s=e?e.item.fieldset:t.currentFieldSet,i=yield yn(t.modalservice.openModal("FieldsetManagerCopyDialog"));var n;i.instance.fieldset=t.metadata.getFieldset(s),i.instance.edit_mode=t.edit_mode,i.instance.response.subscribe({next:(n=(0,pn.A)((function*(s){if(!s)return;const n=t.modal.await("LBL_PROCESSING");(yield t.checkExisting(s.module,s.type,s.name))?(n.next(!0),n.complete(),t.toast.sendAlert("Fieldset already exists!")):(i.instance.close(),t.copyFieldset(s,n,e))})),function(e){return n.apply(this,arguments)})})}))()}checkExisting(e,t,s){const i={module:e,type:t,name:s};return yn(this.backend.getRequest("configuration/spiceui/core/fieldsetalreadyexists",i))}copyFieldset(e,t,s){const i=this.modelutilities.generateGuid();s&&(s.item.fieldset=i);const n={[i]:this.copyFieldsetToMetadata(i,e)},l={add:n};this.backend.postRequest("configuration/spiceui/core/fieldsets",{},{add:n}).subscribe({next:()=>{t.next(!0),t.complete(),this.broadcast.broadcastMessage("metadata.updatefieldsets",l),this.toast.sendToast("LBL_DATA_SAVED","success"),s||(this.currentModule=e.module,this.currentFieldSet=i,this.currentFieldSetName=e.name),this.loadCurrentFieldset()},error:()=>{t.next(!1),t.complete(),this.broadcast.broadcastMessage("metadata.updatefieldsets",{delete:n}),this.toast.sendToast("ERR_FAILED_TO_EXECUTE","error")}})}copyFieldsetToMetadata(e,t){return this.metadata.addFieldset(e,t.module,t.name,t.type),t.fieldset.items.forEach((t=>{t.fieldset?this.metadata.addFieldsetToFieldset(this.modelutilities.generateGuid(),e,t.fieldset,t.fieldconfig):this.metadata.addFieldToFieldset(this.modelutilities.generateGuid(),e,t.field,t.fieldconfig)})),this.metadata.getFieldset(e)}saveChanges(){this.modal.openModal("SystemLoadingModal").subscribe((e=>{this.backend.getRequest("configuration/spiceui/core/fieldsets").subscribe((t=>{let s=this.metadata.getRawFieldSets(),i={},n={},l={};for(let e in s)t.fieldsets[e]?(JSON.stringify(s[e])!==JSON.stringify(t.fieldsets[e])&&(n[e]=s[e]),delete t.fieldsets[e]):i[e]=s[e];l=t.fieldsets;let o={add:i,update:n,delete:l};this.backend.postRequest("configuration/spiceui/core/fieldsets",{},o).subscribe((t=>{this.broadcast.broadcastMessage("metadata.updatefieldsets",o),e.instance.self.destroy(),this.toast.sendToast("changes saved")}))}))}))}get getAllowCopyButton(){return!!this.currentFieldSet&&this.allowBarButtons}static#e=this.ɵfac=function(e){return new(e||FieldsetManager)(m.rXU(p.H),m.rXU(f.yu),m.rXU(b.B),m.rXU(y.g),m.rXU(Mi.m),m.rXU(v.o),m.rXU(R.y),m.rXU(M.i),m.rXU(_n.U),m.rXU(R.y))};static#t=this.ɵcmp=m.VBU({type:FieldsetManager,selectors:[["fieldset-manager"]],features:[m.Jv_([_n.U])],decls:28,vars:12,consts:[["titlelabel","LBL_FIELDSET_MANAGER"],[1,"slds-p-around--small","slds-border--bottom"],[1,"slds-grid","slds-grid--vertical-align-center","slds-form--inline"],[1,"slds-form-element"],[1,"slds-form-element__label"],["label","LBL_MODULE"],[1,"slds-form-element__control",2,"min-width","250px"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","disabled","ngModelChange","change"],["value","*"],[3,"value",4,"ngFor","ngForOf"],["label","LBL_FIELDSET"],[3,"label",4,"ngIf"],[1,"slds-form-element","slds-col--bump-left"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_COPY"],["type","button",1,"slds-button","slds-button_icon","slds-button_icon-border-filled",3,"disabled","click"],[3,"icon","size"],["class","slds-theme--default",4,"ngIf"],[3,"value"],[3,"label"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"],[1,"slds-theme--default"],[1,"slds-p-around--small","slds-border--bottom","slds-theme--default"],[1,"slds-grid","slds-grid--vertical-align-end"],[1,"slds-form-element","slds-p-right--x-small","slds-size--1-of-5"],["label","LBL_SCOPE"],[1,"slds-form-element__control","slds-input-has-icon","slds-input-has-icon_left"],["addclasses","slds-icon slds-input__icon slds-input__icon_left slds-icon-text-default",3,"icon"],["type","text","disabled","",1,"slds-input",3,"ngModel"],["label","LBL_NAME"],[1,"slds-form-element__control"],["type","text",1,"slds-input",3,"disabled","ngModel","ngModelChange"],["label","LBL_PACKAGE"],["label","LBL_VERSION"],["label","LBL_ID"],[1,"slds-grid"],["system-to-bottom","","marginBottom","57",1,"slds-size--3-of-5","slds-p-horizontal--small","slds-p-top--x-small","slds-border--right"],["role","application",1,"slds-tree_container",2,"max-width","none"],["role","tree","aria-labelledby","treeheading",1,"slds-tree"],["role","treeitem",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"slds-p-around--small","slds-align--absolute-center","slds-border--top","slds-m-top--small"],["title","add item",1,"slds-button","slds-button--icon",3,"disabled","click"],[3,"icon"],[1,"slds-size--2-of-5","slds-p-horizontal--small","slds-p-vertical--x-small"],[3,"fieldset",4,"ngIf"],[3,"field",4,"ngIf"],[1,"slds-text-align--right","slds-p-around--small","slds-border--top"],["type","button",1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_SAVE"],["role","treeitem",3,"ngClass","click"],[1,"slds-tree__item","slds-grid","slds-grid--vertical-align-center"],["size","x-small",3,"icon",4,"ngIf"],[2,"white-space","nowrap"],["href","javascript:void(0);","role","presentation",1,"slds-truncate"],[1,"slds-col_bump-left"],["title","customize",1,"slds-button","slds-button--icon",3,"disabled","click"],["title","unlink item",1,"slds-button","slds-button--icon","||","customModeGlobalField",3,"disabled","click"],["title","move down",1,"slds-button","slds-button--icon",3,"disabled","click"],["title","move up",1,"slds-button","slds-button--icon",3,"disabled","click"],["size","x-small",3,"icon"],[3,"fieldset"],[3,"field"]],template:function(e,t){1&e&&(m.nrm(0,"workbench-header",0),m.j41(1,"div",1)(2,"div",2)(3,"div",3)(4,"label",4),m.nrm(5,"system-label",5),m.k0s(),m.j41(6,"div",6)(7,"div",7)(8,"select",8),m.mxI("ngModelChange",(function(e){return m.DH7(t.currentModule,e)||(t.currentModule=e),e})),m.bIt("change",(function(){return t.reset()})),m.j41(9,"option",9),m.EFF(10,"*"),m.k0s(),m.DNE(11,Cn,2,2,"option",10),m.k0s()()()(),m.j41(12,"div",3)(13,"label",4),m.nrm(14,"system-label",11),m.k0s(),m.j41(15,"div",6)(16,"div",7)(17,"select",8),m.mxI("ngModelChange",(function(e){return m.DH7(t.currentFieldSet,e)||(t.currentFieldSet=e),e})),m.bIt("change",(function(){return t.loadCurrentFieldset()})),m.nrm(18,"option"),m.DNE(19,Gn,2,2,"optgroup",12)(20,Bn,2,2,"optgroup",12),m.k0s()()()(),m.j41(21,"div",13)(22,"button",14),m.bIt("click",(function(){return t.openCopyModal()})),m.j41(23,"span"),m.nrm(24,"system-label",15),m.k0s()(),m.j41(25,"button",16),m.bIt("click",(function(){return t.addFieldset()})),m.nrm(26,"system-utility-icon",17),m.k0s()()()(),m.DNE(27,Yn,43,15,"div",18)),2&e&&(m.R7$(8),m.R50("ngModel",t.currentModule),m.Y8G("disabled",0==t.modules.length),m.R7$(3),m.Y8G("ngForOf",t.modules),m.R7$(6),m.R50("ngModel",t.currentFieldSet),m.Y8G("disabled",0==t.getFieldSets().length),m.R7$(2),m.Y8G("ngIf",t.getFieldSets("custom").length>0),m.R7$(),m.Y8G("ngIf",t.getFieldSets("global").length>0),m.R7$(2),m.Y8G("disabled",!t.allowBarButtons),m.R7$(3),m.Y8G("disabled",!t.allowBarButtons),m.R7$(),m.Y8G("icon","add")("size","x-small"),m.R7$(),m.Y8G("ngIf",t.currentFieldSet))},dependencies:[i.YU,i.Sq,i.bT,n.xH,n.y7,n.me,n.wz,n.BC,n.vS,L.t,kn.k,x.W,u.B,F.b,vn,En,Te],encapsulation:2})}return FieldsetManager})();var Xn=s(96700);function Vn(e,t){if(1&e&&(m.j41(0,"option"),m.EFF(1),m.k0s()),2&e){const e=t.$implicit;m.R7$(),m.JRh(e)}}function Un(e,t){if(1&e){const e=m.RV6();m.j41(0,"div",27)(1,"label",13),m.nrm(2,"system-label",28),m.k0s(),m.j41(3,"div",29)(4,"div",30)(5,"select",31),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.addName,t)||(s.addName=t),m.Njj(t)})),m.DNE(6,Vn,2,1,"option",32),m.k0s()()(),m.j41(7,"div",33)(8,"label",13),m.nrm(9,"system-label",34),m.k0s(),m.j41(10,"div",29)(11,"input",35),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.addName,t)||(s.addName=t),m.Njj(t)})),m.k0s()()()()}if(2&e){const e=m.XpG();m.R7$(5),m.R50("ngModel",e.addName),m.R7$(),m.Y8G("ngForOf",e.getFieldNames()),m.R7$(5),m.R50("ngModel",e.addName)}}function Hn(e,t){1&e&&(m.j41(0,"option",40),m.nrm(1,"system-label",41),m.k0s())}function zn(e,t){if(1&e){const e=m.RV6();m.j41(0,"div",27)(1,"label",13),m.nrm(2,"system-label",36),m.k0s(),m.j41(3,"div",29)(4,"div",30)(5,"select",31),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.fieldsettype,t)||(s.fieldsettype=t),m.Njj(t)})),m.DNE(6,Hn,2,0,"option",37),m.j41(7,"option",38),m.nrm(8,"system-label",39),m.k0s()()()(),m.j41(9,"div",33)(10,"label",13),m.nrm(11,"system-label",34),m.k0s(),m.j41(12,"div",29)(13,"input",35),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.addName,t)||(s.addName=t),m.Njj(t)})),m.k0s()()()()}if(2&e){const e=m.XpG();m.R7$(5),m.R50("ngModel",e.fieldsettype),m.R7$(),m.Y8G("ngIf","all"==e.edit_mode),m.R7$(7),m.R50("ngModel",e.addName)}}function qn(e,t){if(1&e){const e=m.RV6();m.j41(0,"div",27)(1,"label",13),m.nrm(2,"system-label",42),m.k0s(),m.j41(3,"div",29)(4,"system-input-fieldset",43),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.addFieldset,t)||(s.addFieldset=t),m.Njj(t)})),m.k0s()()()}if(2&e){const e=m.XpG();m.R7$(4),m.R50("ngModel",e.addFieldset)}}let Pn=(()=>{class FieldsetManagerAddDialog{constructor(e,t,s,i){this.backend=e,this.language=t,this.modelutilities=s,this.metadata=i,this.closedialog=new m.bkB,this.module="*",this.parent="",this.edit_mode="",this.addType="fieldsetadd",this.addName="",this.addFieldset="",this.fieldsettype="custom",this.moduleFields=[]}ngOnInit(){this.module&&"*"!=this.module&&(this.moduleFields=this.metadata.getModuleFields(this.module))}closeDialog(){this.self.destroy()}onModalEscX(){this.closeDialog()}add(){switch(this.addType){case"fieldsetadd":let e=this.modelutilities.generateGuid();this.metadata.addFieldset(e,this.module,this.addName,this.fieldsettype),this.metadata.addFieldsetToFieldset(this.modelutilities.generateGuid(),this.parent,e);break;case"fieldsetselect":this.metadata.addFieldsetToFieldset(this.modelutilities.generateGuid(),this.parent,this.addFieldset);break;case"field":this.modelutilities.generateGuid();this.metadata.addFieldToFieldset(this.modelutilities.generateGuid(),this.parent,this.addName)}this.closedialog.emit(!0),this.self.destroy()}getFieldNames(){let e=[];for(let t in this.moduleFields)e.push(t);return e.sort(),e}get fieldsets(){return this.metadata.getFieldSets()}static#e=this.ɵfac=function(e){return new(e||FieldsetManagerAddDialog)(m.rXU(p.H),m.rXU(b.B),m.rXU(y.g),m.rXU(f.yu))};static#t=this.ɵcmp=m.VBU({type:FieldsetManagerAddDialog,selectors:[["fieldsetmanager-add-dialog"]],inputs:{module:"module",parent:"parent",edit_mode:"edit_mode"},outputs:{closedialog:"closedialog"},decls:35,vars:8,consts:[["role","dialog","tabindex","-1","aria-labelledby","header43",1,"slds-modal","slds-fade-in-open"],[1,"slds-modal__container"],[1,"slds-modal__header","slds-theme--shade"],["title","Close",1,"slds-button","slds-modal__close","slds-button--icon-inverse",3,"click"],[3,"icon","size"],["id","header43",1,"slds-text-heading--medium"],["label","LBL_ADD_ITEM"],[1,"slds-modal__content","slds-p-around--medium"],[1,"slds-grid","slds-col--bump-left"],[1,"slds-radio"],["type","radio","name","addType","value","fieldsetadd","id","fieldsetaddradio",3,"ngModel","ngModelChange"],["for","fieldsetaddradio",1,"slds-radio__label"],[1,"slds-radio_faux"],[1,"slds-form-element__label"],["label","LBL_ADD_FIELDSET"],["type","radio","name","addType","value","fieldsetselect","id","fieldsetselectradio",3,"ngModel","ngModelChange"],["for","fieldsetselectradio",1,"slds-radio__label"],["label","LBL_SELECT_FIELDSET"],["type","radio","name","addType","value","field","id","fieldradio",3,"ngModel","ngModelChange"],["for","fieldradio",1,"slds-radio__label"],["label","LBL_FIELD"],["class","slds-form-element",4,"ngIf"],[1,"slds-modal__footer"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_ADD"],[1,"slds-form-element"],["label","LBL_FIELDNAME"],[1,"slds-form-element__control"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],[1,"slds-form-element","slds-m-top--small"],["label","LBL_ITEM_NAME"],["type","text","placeholder","name",1,"slds-input",3,"ngModel","ngModelChange"],["label","LBL_SCOPE"],["value","global",4,"ngIf"],["value","custom"],["label","LBL_CUSTOM"],["value","global"],["label","LBL_GLOBAL"],["label","LBL_FIELDSET"],[3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(m.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),m.bIt("click",(function(){return t.closeDialog()})),m.nrm(4,"system-button-icon",4),m.k0s(),m.j41(5,"h2",5),m.nrm(6,"system-label",6),m.k0s()(),m.j41(7,"div",7)(8,"div",8)(9,"span",9)(10,"input",10),m.mxI("ngModelChange",(function(e){return m.DH7(t.addType,e)||(t.addType=e),e})),m.k0s(),m.j41(11,"label",11),m.nrm(12,"span",12),m.j41(13,"span",13),m.nrm(14,"system-label",14),m.k0s()()(),m.j41(15,"span",9)(16,"input",15),m.mxI("ngModelChange",(function(e){return m.DH7(t.addType,e)||(t.addType=e),e})),m.k0s(),m.j41(17,"label",16),m.nrm(18,"span",12),m.j41(19,"span",13),m.nrm(20,"system-label",17),m.k0s()()(),m.j41(21,"span",9)(22,"input",18),m.mxI("ngModelChange",(function(e){return m.DH7(t.addType,e)||(t.addType=e),e})),m.k0s(),m.j41(23,"label",19),m.nrm(24,"span",12),m.j41(25,"span",13),m.nrm(26,"system-label",20),m.k0s()()()(),m.DNE(27,Un,12,3,"div",21)(28,zn,14,3,"div",21)(29,qn,5,1,"div",21),m.k0s(),m.j41(30,"div",22)(31,"button",23),m.bIt("click",(function(){return t.closeDialog()})),m.nrm(32,"system-label",24),m.k0s(),m.j41(33,"button",25),m.bIt("click",(function(){return t.add()})),m.nrm(34,"system-label",26),m.k0s()()()()),2&e&&(m.R7$(4),m.Y8G("icon","close")("size","large"),m.R7$(6),m.R50("ngModel",t.addType),m.R7$(6),m.R50("ngModel",t.addType),m.R7$(6),m.R50("ngModel",t.addType),m.R7$(5),m.Y8G("ngIf","field"==t.addType),m.R7$(),m.Y8G("ngIf","fieldsetadd"==t.addType),m.R7$(),m.Y8G("ngIf","fieldsetselect"==t.addType))},dependencies:[i.Sq,i.bT,n.xH,n.y7,n.me,n.wz,n.Fm,n.BC,n.vS,L.t,Xn.W,x.W],encapsulation:2})}return FieldsetManagerAddDialog})();function Jn(e,t){1&e&&(m.j41(0,"option",24),m.nrm(1,"system-label",25),m.k0s())}let Wn=(()=>{class FieldsetManagerEditDialog{constructor(e,t,s,i,n){this.backend=e,this.metadata=t,this.language=s,this.modelutilities=i,this.configurationService=n,this.fieldset="",this.edit_mode="",this.closedialog=new m.bkB,this.fieldsetname="",this.fieldsettype="",this.adding=!1,this.globalEdit=!1,this.modalTitle="",this.modalTitle=this.language.getAppLanglabel("LBL_EDIT")}ngOnInit(){this.fieldset?(this.fieldsetname=this.metadata.getFieldsetName(this.fieldset),this.fieldsettype=this.metadata.getFieldset(this.fieldset).type,this.adding=!1):(this.modalTitle=this.language.getAppLanglabel("LBL_ADD"),this.fieldsettype="custom",this.adding=!0)}closeDialog(){this.self.destroy()}onModalEscX(){this.closeDialog()}add(){this.closedialog.emit({name:this.fieldsetname,type:this.fieldsettype}),this.self.destroy()}static#e=this.ɵfac=function(e){return new(e||FieldsetManagerEditDialog)(m.rXU(p.H),m.rXU(f.yu),m.rXU(b.B),m.rXU(y.g),m.rXU(M.i))};static#t=this.ɵcmp=m.VBU({type:FieldsetManagerEditDialog,selectors:[["fieldsetmanager-edit-dialog"]],inputs:{fieldset:"fieldset",edit_mode:"edit_mode"},outputs:{closedialog:"closedialog"},decls:27,vars:8,consts:[["role","dialog","tabindex","-1","aria-labelledby","header43",1,"slds-modal","slds-fade-in-open"],[1,"slds-modal__container"],[1,"slds-modal__header","slds-theme--shade"],["title","Close",1,"slds-button","slds-modal__close","slds-button--icon-inverse",3,"click"],[3,"icon","size"],["id","header43",1,"slds-text-heading--medium"],[1,"slds-modal__content","slds-p-around--medium"],[1,"slds-form-element","slds-m-top--small"],[1,"slds-form-element__label"],["label","LBL_ITEM_NAME"],[1,"slds-form-element__control"],["type","text","placeholder","name",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-form-element"],["label","LBL_SCOPE"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","disabled","ngModelChange"],["value","global",4,"ngIf"],["value","custom"],["label","LBL_CUSTOM"],[1,"slds-modal__footer"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_SAVE"],["value","global"],["label","LBL_GLOBAL"]],template:function(e,t){1&e&&(m.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),m.bIt("click",(function(){return t.closeDialog()})),m.nrm(4,"system-button-icon",4),m.k0s(),m.j41(5,"h2",5),m.EFF(6),m.k0s()(),m.j41(7,"div",6)(8,"div",7)(9,"label",8),m.nrm(10,"system-label",9),m.k0s(),m.j41(11,"div",10)(12,"input",11),m.mxI("ngModelChange",(function(e){return m.DH7(t.fieldsetname,e)||(t.fieldsetname=e),e})),m.k0s()()(),m.j41(13,"div",12)(14,"label",8),m.nrm(15,"system-label",13),m.k0s(),m.j41(16,"div",10)(17,"div",14)(18,"select",15),m.mxI("ngModelChange",(function(e){return m.DH7(t.fieldsettype,e)||(t.fieldsettype=e),e})),m.DNE(19,Jn,2,0,"option",16),m.j41(20,"option",17),m.nrm(21,"system-label",18),m.k0s()()()()()(),m.j41(22,"div",19)(23,"button",20),m.bIt("click",(function(){return t.closeDialog()})),m.nrm(24,"system-label",21),m.k0s(),m.j41(25,"button",22),m.bIt("click",(function(){return t.add()})),m.nrm(26,"system-label",23),m.k0s()()()()),2&e&&(m.R7$(4),m.Y8G("icon","close")("size","large"),m.R7$(2),m.JRh(t.modalTitle),m.R7$(6),m.R50("ngModel",t.fieldsetname),m.R7$(6),m.R50("ngModel",t.fieldsettype),m.Y8G("disabled",!t.adding),m.R7$(),m.Y8G("ngIf","all"==t.edit_mode),m.R7$(6),m.Y8G("disabled",""==t.fieldsetname))},dependencies:[i.bT,n.xH,n.y7,n.me,n.wz,n.BC,n.vS,L.t,x.W],encapsulation:2})}return FieldsetManagerEditDialog})();function Kn(e,t){if(1&e&&(m.j41(0,"option",11),m.EFF(1),m.k0s()),2&e){const e=t.$implicit;m.Y8G("value",e.value),m.R7$(),m.JRh(e.display)}}function Qn(e,t){if(1&e&&(m.j41(0,"option",11),m.EFF(1),m.k0s()),2&e){const e=t.$implicit;m.Y8G("value",e.id),m.R7$(),m.JRh(e.module)}}function Zn(e,t){if(1&e&&(m.j41(0,"option",11),m.EFF(1),m.k0s()),2&e){const e=t.$implicit,s=m.XpG(2);m.Y8G("value",e.component),m.R7$(),m.JRh(s.componentName(e))}}function el(e,t){if(1&e){const e=m.RV6();m.j41(0,"system-input-label",41),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG(2);return m.DH7(s.action.actionconfig.label,t)||(s.action.actionconfig.label=t),m.Njj(t)})),m.k0s()}if(2&e){const e=m.XpG(2);m.R50("ngModel",e.action.actionconfig.label)}}function tl(e,t){if(1&e){const e=m.RV6();m.j41(0,"system-input-label",41),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG(2);return m.DH7(s.action.actionconfig.group,t)||(s.action.actionconfig.group=t),m.Njj(t)})),m.k0s()}if(2&e){const e=m.XpG(2);m.R50("ngModel",e.action.actionconfig.group)}}function sl(e,t){if(1&e){const e=m.RV6();m.j41(0,"fieldset",1)(1,"legend",2),m.nrm(2,"system-label",3),m.k0s(),m.j41(3,"div",4)(4,"div",5)(5,"label",6),m.nrm(6,"system-label",7),m.k0s(),m.j41(7,"div",4)(8,"div",8)(9,"select",9,10),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.action.action,t)||(s.action.action=t),m.Njj(t)})),m.bIt("change",(function(){m.eBV(e);const t=m.XpG();return m.Njj(t.setActionComponent())})),m.nrm(11,"option",11),m.DNE(12,Kn,2,2,"option",12),m.k0s()()()(),m.j41(13,"div",13)(14,"div",14)(15,"label",6),m.nrm(16,"system-label",15),m.k0s(),m.j41(17,"div",4)(18,"div",16)(19,"select",17),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.systemmodule,t)||(s.systemmodule=t),m.Njj(t)})),m.DNE(20,Qn,2,2,"option",12),m.k0s()()()(),m.j41(21,"div",18)(22,"label",6),m.nrm(23,"system-label",3),m.k0s(),m.j41(24,"div",4)(25,"div",16)(26,"select",19),m.bIt("change",(function(){m.eBV(e);const t=m.XpG();return m.Njj(t.setComponent())})),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.localcomponent,t)||(s.localcomponent=t),m.Njj(t)})),m.j41(27,"option"),m.EFF(28,"-"),m.k0s(),m.DNE(29,Zn,2,2,"option",12),m.k0s()()()()()(),m.j41(30,"legend",2),m.nrm(31,"system-label",20),m.k0s(),m.j41(32,"div",4)(33,"div",21)(34,"label",6),m.EFF(35,"ID"),m.k0s(),m.j41(36,"div",4),m.nrm(37,"input",22),m.k0s()(),m.j41(38,"div",23)(39,"label",6),m.nrm(40,"system-label",24),m.k0s(),m.j41(41,"div",25)(42,"input",26),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.action.package,t)||(s.action.package=t),m.Njj(t)})),m.k0s()()(),m.j41(43,"div",23)(44,"label",6),m.nrm(45,"system-label",27),m.k0s(),m.j41(46,"div",25)(47,"input",28),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.action.version,t)||(s.action.version=t),m.Njj(t)})),m.k0s()()()(),m.j41(48,"legend",2),m.nrm(49,"system-label",29),m.k0s(),m.j41(50,"div",4)(51,"div",30)(52,"label",6),m.nrm(53,"system-label",31),m.k0s(),m.DNE(54,el,1,1,"system-input-label",32),m.k0s(),m.j41(55,"div",30)(56,"label",6),m.nrm(57,"system-label",33),m.k0s(),m.DNE(58,tl,1,1,"system-input-label",32),m.k0s(),m.j41(59,"div",30)(60,"label",6),m.nrm(61,"system-label",34),m.k0s(),m.j41(62,"input",35),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.action.actionconfig.addclasses,t)||(s.action.actionconfig.addclasses=t),m.Njj(t)})),m.k0s()(),m.j41(63,"fieldset",23)(64,"div",4)(65,"label",36)(66,"input",37),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.action.singlebutton,t)||(s.action.singlebutton=t),m.Njj(t)})),m.k0s(),m.nrm(67,"span",38),m.j41(68,"span",6),m.nrm(69,"system-label",39),m.k0s()()()(),m.nrm(70,"workbench-config",40),m.k0s()()}if(2&e){const e=m.XpG();m.R7$(9),m.Y8G("disabled",!e.view.isEditMode()),m.R50("ngModel",e.action.action),m.R7$(3),m.Y8G("ngForOf",e.standardActions),m.R7$(7),m.Y8G("disabled",!e.view.isEditMode()||""!=e.action.action&&!!e.action.action),m.R50("ngModel",e.systemmodule),m.R7$(),m.Y8G("ngForOf",e.systemmodules),m.R7$(6),m.Y8G("disabled",!e.view.isEditMode()||""!=e.action.action&&!!e.action.action),m.R50("ngModel",e.localcomponent),m.R7$(3),m.Y8G("ngForOf",e.components),m.R7$(8),m.Y8G("ngModel",e.action.id),m.R7$(5),m.Y8G("disabled",!e.view.isEditMode()),m.R50("ngModel",e.action.package),m.R7$(5),m.Y8G("disabled",!e.view.isEditMode()),m.R50("ngModel",e.action.version),m.R7$(7),m.Y8G("ngIf",e.view.isEditMode()),m.R7$(4),m.Y8G("ngIf",e.view.isEditMode()),m.R7$(4),m.Y8G("disabled",!e.view.isEditMode()),m.R50("ngModel",e.action.actionconfig.addclasses),m.R7$(4),m.Y8G("disabled",!e.view.isEditMode()),m.R50("ngModel",e.action.singlebutton),m.R7$(4),m.Y8G("component",e.configContainerComponentName)("configValues",e.action.actionconfig)}}let il=(()=>{class ActionsetManagerActionDetails{constructor(e,t,s,i){this.backend=e,this.metadata=t,this.language=s,this.view=i,this.action={},this.component="",this.component_backup="",this.localcomponent="",this.systemmodule="",this.systemmodules=[],this.standardActions=[{display:"NEW",value:"NEW",component:"ObjectActionNewButton"},{display:"DUPLICATE",value:"DUPLICATE",component:"ObjectActionDuplicateButton"},{display:"NEWRELATED",value:"NEWRELATED",component:"ObjectActionNewrelatedButton"},{display:"EDIT",value:"EDIT",component:"ObjectActionEditButton"},{display:"DELETE",value:"DELETE",component:"ObjectActionDeleteButton"},{display:"AUDIT",value:"AUDIT",component:"ObjectActionAuditlogButton"},{display:"IMPORT",value:"IMPORT",component:"SpiceImporterImportButton"},{display:"MAIL",value:"MAIL",component:"ObjectActionBeanToMailButton"},{display:"PRINT",value:"PRINT",component:"ObjectActionOutputBeanButton"},{display:"ROUTE",value:"ROUTE",component:"GlobalNavigationMenuItemActionRoute"},{display:"SELECT",value:"SELECT",component:"ObjectActionSelectButton"},{display:"OPEN",value:"OPEN",component:"ObjectActionOpenButton"},{display:"CANCEL",value:"CANCEL",component:"ObjectActionCancelButton"},{display:"SAVE",value:"SAVE",component:"ObjectActionSaveButton"},{display:"SAVERELATED",value:"SAVERELATED",component:"ObjectActionSaveRelatedButton"}],this.systemmodules=this.metadata.getSystemModules()}ngOnChanges(e){this.action&&(this.action.isViewMode?this.view.setViewMode():this.view.setEditMode(),this.localcomponent=this.action.component,this.component_backup=this.localcomponent,this.setActionComponent())}get configContainerComponentName(){return this.action.component??this.standardActions.find((e=>e.value==this.action.action)).component}get components(){return this.metadata.getSystemComponents(this.systemmodule)}componentName(e){return e?"1"==e.deprecated?e.component+" | dep.":e.component:""}setActionComponent(){this.action.action?this.localcomponent=this.standardActions.find((e=>e.value===this.action.action)).component:this.localcomponent=this.component_backup,this.systemmodule=this.metadata.getSystemModuleByComponent(this.localcomponent)}setComponent(){this.action.component=this.localcomponent}static#e=this.ɵfac=function(e){return new(e||ActionsetManagerActionDetails)(m.rXU(p.H),m.rXU(f.yu),m.rXU(b.B),m.rXU(_n.U))};static#t=this.ɵcmp=m.VBU({type:ActionsetManagerActionDetails,selectors:[["actionsetmanager-action-details"]],inputs:{action:"action"},features:[m.Jv_([_n.U]),m.OA$],decls:1,vars:1,consts:[["class","slds-form-element slds-form-element_compound",4,"ngIf"],[1,"slds-form-element","slds-form-element_compound"],[1,"slds-form-element__legend","slds-form-element__label","slds-m-vertical_small"],["label","LBL_COMPONENT"],[1,"slds-form-element__control"],[1,"slds-form-element"],[1,"slds-form-element__label"],["label","LBL_STANDARD_ACTION"],[1,"slds-select_container","slds-m-vertical--xx-small"],[1,"slds-select",3,"disabled","ngModel","ngModelChange","change"],["focus",""],[3,"value"],[3,"value",4,"ngFor","ngForOf"],[1,"slds-grid"],[1,"slds-form-element","slds-size--1-of-2","slds-p-right--xx-small"],["label","LBL_MODULE"],[1,"slds-select_container"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],[1,"slds-form-element","slds-size--1-of-2","slds-p-left--xx-small"],[1,"slds-select",3,"disabled","ngModel","change","ngModelChange"],["label","LBL_INFORMATION"],[1,"slds-form-element","slds-m-bottom--x-small"],["type","text","disabled","",1,"slds-input",3,"ngModel"],[1,"slds-form-element","slds-m-vertical--xxx-small"],["label","LBL_PACKAGE"],[1,"slds-form-element__control","slds-input-has-icon","slds-input-has-icon--right"],["type","text","placeholder","package",1,"slds-input",3,"disabled","ngModel","ngModelChange"],["label","LBL_VERSION"],["type","text","placeholder","version",1,"slds-input",3,"disabled","ngModel","ngModelChange"],["label","LBL_OPTIONS"],[1,"slds-form-element","slds-m-vertical--xx-small"],["label","LBL_LABEL"],[3,"ngModel","ngModelChange",4,"ngIf"],["label","LBL_GROUP"],["label","LBL_ADD_CLASS"],["type","text",1,"slds-input",3,"disabled","ngModel","ngModelChange"],["for","link",1,"slds-checkbox"],["type","checkbox","id","link",3,"disabled","ngModel","ngModelChange"],[1,"slds-checkbox--faux"],["label","LBL_SINGLEBUTTON"],[3,"component","configValues"],[3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&m.DNE(0,sl,71,22,"fieldset",0),2&e&&m.Y8G("ngIf",t.action)},dependencies:[i.Sq,i.bT,n.xH,n.y7,n.me,n.Zm,n.wz,n.BC,n.vS,ze.w,x.W,jn],encapsulation:2})}return ActionsetManagerActionDetails})();function nl(e,t){if(1&e&&(m.j41(0,"option",18),m.EFF(1),m.k0s()),2&e){const e=t.$implicit;m.Y8G("value",e.module),m.R7$(),m.SpI("",e.module," ")}}function ll(e,t){if(1&e&&(m.j41(0,"option",21),m.EFF(1),m.k0s()),2&e){const e=t.$implicit;m.Y8G("ngValue",e.id),m.R7$(),m.SpI("",e.name," ")}}function ol(e,t){if(1&e&&(m.j41(0,"optgroup",19),m.DNE(1,ll,2,2,"option",20),m.k0s()),2&e){const e=m.XpG();m.Y8G("label","custom"+e.language.getLabel("LBL_ACTIONSET")),m.R7$(),m.Y8G("ngForOf",e.getActionSets("custom"))}}function al(e,t){if(1&e&&(m.j41(0,"option",21),m.EFF(1),m.k0s()),2&e){const e=t.$implicit;m.Y8G("ngValue",e.id),m.R7$(),m.SpI("",e.name," ")}}function dl(e,t){if(1&e&&(m.j41(0,"optgroup",19),m.DNE(1,al,2,2,"option",20),m.k0s()),2&e){const e=m.XpG();m.Y8G("label","global"+e.language.getLabel("LBL_ACTIONSET")),m.R7$(),m.Y8G("ngForOf",e.getActionSets("global"))}}function rl(e,t){if(1&e){const e=m.RV6();m.j41(0,"button",22),m.bIt("click",(function(){m.eBV(e);const t=m.XpG();return m.Njj(t.copy())})),m.j41(1,"span"),m.nrm(2,"system-label",23),m.k0s()()}if(2&e){const e=m.XpG();m.Y8G("disabled",!e.allowBarButtons)}}function cl(e,t){if(1&e){const e=m.RV6();m.j41(0,"button",24),m.bIt("click",(function(){m.eBV(e);const t=m.XpG();return m.Njj(t.addActionset())})),m.nrm(1,"system-utility-icon",25),m.k0s()}if(2&e){const e=m.XpG();m.Y8G("disabled",!e.allowBarButtons),m.R7$(),m.Y8G("icon","add")("size","x-small")}}function ml(e,t){if(1&e){const e=m.RV6();m.j41(0,"button",26),m.bIt("click",(function(){m.eBV(e);const t=m.XpG();return m.Njj(t.saveChanges())})),m.nrm(1,"system-label",27),m.k0s()}if(2&e){const e=m.XpG();m.Y8G("disabled",!e.view.isEditMode())}}function ul(e,t){if(1&e){const e=m.RV6();m.j41(0,"button",26),m.bIt("click",(function(){m.eBV(e);const t=m.XpG();return m.Njj(t.deleteChanges())})),m.nrm(1,"system-label",28),m.k0s()}if(2&e){const e=m.XpG();m.Y8G("disabled",!e.view.isEditMode())}}const gl=e=>({"slds-theme--shade":e});function hl(e,t){if(1&e){const e=m.RV6();m.j41(0,"div",61),m.bIt("click",(function(){const t=m.eBV(e).$implicit,s=m.XpG(2);return m.Njj(s.selectItem(t))})),m.nrm(1,"system-utility-icon",62),m.j41(2,"a",63),m.EFF(3),m.k0s(),m.j41(4,"div",64)(5,"button",65),m.bIt("click",(function(){const t=m.eBV(e).$implicit,s=m.XpG(2);return m.Njj(s.deleteItem(t))})),m.nrm(6,"system-button-icon",58),m.k0s()()()}if(2&e){const e=t.$implicit,s=m.XpG(2);m.Y8G("ngClass",m.eq3(6,gl,e.id==s.selectedItemID)),m.R7$(),m.Y8G("icon","rows")("size","x-small"),m.R7$(2),m.JRh(s.getDisplayName(e)),m.R7$(2),m.Y8G("disabled",!s.view.isEditMode()),m.R7$(),m.Y8G("icon","delete")}}function pl(e,t){if(1&e){const e=m.RV6();m.j41(0,"div",29)(1,"div",30)(2,"div",31)(3,"div",32)(4,"label",4),m.nrm(5,"system-label",33),m.k0s(),m.j41(6,"div",34),m.nrm(7,"system-custom-icon",35)(8,"input",36),m.k0s()(),m.j41(9,"div",32)(10,"label",4),m.nrm(11,"system-label",37),m.k0s(),m.j41(12,"div",38)(13,"div",39)(14,"select",40),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.currentActionSet.grouped,t)||(s.currentActionSet.grouped=t),m.Njj(t)})),m.j41(15,"option",41),m.nrm(16,"system-label",42),m.k0s(),m.j41(17,"option",43),m.nrm(18,"system-label",44),m.k0s(),m.j41(19,"option",45),m.nrm(20,"system-label",46),m.k0s()()()()(),m.j41(21,"div",32)(22,"label",4),m.nrm(23,"system-label",47),m.k0s(),m.j41(24,"div",38)(25,"input",48),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.currentActionSet.name,t)||(s.currentActionSet.name=t),m.Njj(t)})),m.k0s()()(),m.j41(26,"div",32)(27,"label",4),m.nrm(28,"system-label",49),m.k0s(),m.j41(29,"div",38)(30,"input",48),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.currentActionSet.package,t)||(s.currentActionSet.package=t),m.Njj(t)})),m.k0s()()(),m.j41(31,"div",32)(32,"label",4),m.nrm(33,"system-label",50),m.k0s(),m.j41(34,"div",38)(35,"input",48),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.currentActionSet.version,t)||(s.currentActionSet.version=t),m.Njj(t)})),m.k0s()()(),m.j41(36,"div",32)(37,"label",4),m.nrm(38,"system-label",51),m.k0s(),m.j41(39,"div",38),m.nrm(40,"input",36),m.k0s()()()(),m.j41(41,"div",52)(42,"div",53)(43,"div",54),m.bIt("cdkDropListDropped",(function(t){m.eBV(e);const s=m.XpG();return m.Njj(s.drop(t))})),m.DNE(44,hl,7,8,"div",55),m.k0s(),m.j41(45,"div",56)(46,"button",57),m.bIt("click",(function(){m.eBV(e);const t=m.XpG();return m.Njj(t.addActionsetItem())})),m.nrm(47,"system-button-icon",58),m.k0s()()(),m.j41(48,"div",59),m.nrm(49,"actionsetmanager-action-details",60),m.k0s()()()}if(2&e){const e=m.XpG();m.R7$(7),m.Y8G("icon",e.currentActionSet.type),m.R7$(),m.Y8G("ngModel",e.currentActionSet.type),m.R7$(6),m.Y8G("disabled",!e.view.isEditMode()),m.R50("ngModel",e.currentActionSet.grouped),m.R7$(11),m.Y8G("disabled",!e.view.isEditMode()),m.R50("ngModel",e.currentActionSet.name),m.R7$(5),m.Y8G("disabled",!e.view.isEditMode()),m.R50("ngModel",e.currentActionSet.package),m.R7$(5),m.Y8G("disabled",!e.view.isEditMode()),m.R50("ngModel",e.currentActionSet.version),m.R7$(5),m.Y8G("ngModel",e.currentActionSet.id),m.R7$(4),m.Y8G("ngForOf",e.currentActionSet.actions),m.R7$(2),m.Y8G("disabled",!e.view.isEditMode()),m.R7$(),m.Y8G("icon","new"),m.R7$(2),m.Y8G("action",e.selectedItem)}}let fl=(()=>{class ActionsetManager{constructor(e,t,s,i,n,l,o,a,d,r){this.backend=e,this.metadata=t,this.language=s,this.modelutilities=i,this.broadcast=n,this.toast=l,this.modalservice=o,this.configurationService=a,this.view=d,this.modal=r,this.edit_mode="custom",this.allowBarButtons=!0,this.crNoneActive=!1,this.change_request_required=!1,this.sysModules=[],this.currentModule="*",this.currentActionSet={id:"",module:"",name:"",package:"",type:"",actions:[],isnew:!1},this.actionSetBackup="",this.selectedItem=null,this.selectedItemID="",this.showActionSetDetails=!1,this.backend.getRequest("system/spiceui/admin/modules").subscribe((e=>{this.sysModules=e})),this.checkMode()}getActionSets(e=null){let t=[];if(e){let s=this.metadata.getActionSets(this.currentModule);for(let i of s)i.type==e&&t.push(i)}else t=this.metadata.getActionSets(this.currentModule);return t}checkMode(){this.edit_mode=this.configurationService.getCapabilityConfig("core").edit_mode,this.change_request_required=!!this.configurationService.getCapabilityConfig("systemdeployment").change_request_required,"none"!=this.edit_mode&&"custom"!=this.edit_mode&&"all"!=this.edit_mode&&(this.edit_mode="custom"),this.change_request_required?this.backend.getRequest("module/SystemDeploymentCRs/active").subscribe((e=>{""==e.id?(this.setNoneMode(),this.crNoneActive=!0,this.toast.sendToast(this.language.getLabel("LBL_ACTIVATE_CR_WARNING"),"warning",null,3)):(this.crNoneActive=!1,"all"==this.edit_mode?this.setAllMode():"custom"==this.edit_mode?this.setCustomMode():this.setNoneMode())})):(this.crNoneActive=!1,"all"==this.edit_mode?this.setAllMode():"custom"==this.edit_mode?this.setCustomMode():this.setNoneMode())}setNoneMode(){this.view.setViewMode(),this.allowBarButtons=!1}setCustomMode(){"custom"==this.currentActionSet.type?this.view.setEditMode():this.view.setViewMode()}setAllMode(){this.view.setEditMode()}get checkForChanges(){return this.checkForChangesFunction()}checkForChangesFunction(){return""!=this.currentActionSet.id&&(this.checkMode(),JSON.stringify(this.currentActionSet)!=this.actionSetBackup)}selectCurrentActionset(){if(this.currentActionSet.id){let e=this.currentActionSet.id;""!=this.actionSetBackup?(this.currentActionSet.id=JSON.parse(this.actionSetBackup).id,JSON.stringify(this.actionSetBackup),this.checkForChangesFunction()?this.modal.confirm("LBL_ALL_CHANGES_WOULD_BE_DELETED.","LBL_ARE_YOU_SURE").subscribe((t=>{t&&(this.deleteChanges(),this.loadCurrentActionset(e))})):this.loadCurrentActionset(e)):this.loadCurrentActionset(e)}}loadCurrentActionset(e){this.selectedItem=null,this.checkMode(),this.currentActionSet=this.metadata.getActionSet(e),this.actionSetBackup=JSON.stringify({...this.currentActionSet}),this.currentActionSet&&this.currentActionSet.actions&&this.currentActionSet.actions.length>0&&this.selectItem(this.currentActionSet.actions[0])}addActionsetItem(){let e={action:"NEW",component:null,id:this.modelutilities.generateGuid(),sequence:this.currentActionSet.actions.length,singlebutton:!1,package:this.currentActionSet.package,version:this.currentActionSet.version,actionconfig:{},parentScope:this.currentActionSet.type};this.currentActionSet.actions.push(e),this.metadata.setActionSetItems(this.currentActionSet.id,this.currentActionSet.actions),this.selectItem(e)}deleteItem(e){this.modal.confirm("LBL_ARE_YOU_SURE","LBL_REMOVE_ITEM").subscribe((t=>{t&&this.currentActionSet.actions.splice(this.currentActionSet.actions.map((e=>e.id)).indexOf(e.id),1)}))}addActionset(){this.modalservice.openModal("ActionsetManagerAddDialog").subscribe((e=>{e.instance.sysModules=this.sysModules,e.instance.actionsetModule=this.currentModule,e.instance.mode="add",e.instance.edit_mode=this.edit_mode,e.instance.actionsetName="",e.instance.closedialog.subscribe((e=>{if(e){let t=this.modelutilities.generateGuid();this.currentActionSet.actions=[],this.metadata.setActionSet(t,{module:e.module,name:e.name,type:e.type,actions:this.currentActionSet.actions}),this.reset(),this.currentModule=e.module,this.currentActionSet.id=t,this.currentActionSet.module=e.module,this.currentActionSet.name=e.name,this.currentActionSet.type=e.type,this.currentActionSet.actions=[],this.currentActionSet.package="",this.currentActionSet.isnew=!0}}))}))}selectModule(){let e=this.currentActionSet.module;""!=this.actionSetBackup?(this.currentActionSet.module=JSON.parse(this.actionSetBackup).module,JSON.stringify(this.actionSetBackup),this.checkForChangesFunction()?this.modal.confirm("LBL_ALL_CHANGES_WOULD_BE_DELETED.","LBL_ARE_YOU_SURE").subscribe((t=>{t&&(this.deleteChanges(),this.currentActionSet.module=e)})):this.currentActionSet.module=e):this.currentActionSet.module=e}reset(){this.currentActionSet={id:"",module:"",name:"",package:"",type:"",actions:[]},this.selectedItem=null,this.selectedItemID=""}getDisplayName(e){let t=e.action?e.action:e.component;return e.actionconfig.label?t+" ("+this.language.getLabel(e.actionconfig.label)+")":t}isSelected(e){return e==this.selectedItem.id}selectItem(e){this.selectedItemID=e.id;for(let t of this.currentActionSet.actions)t.id==e.id&&(this.selectedItem=t)}drop(e){this.currentActionSet.actions.splice(e.currentIndex,0,this.currentActionSet.actions.splice(e.previousIndex,1)[0]);let t=0;for(let e of this.currentActionSet.actions)e.sequence=t,t++}deleteChanges(){this.currentActionSet.isnew?(this.metadata.removeActionset(this.currentActionSet.id),this.reset(),this.actionSetBackup=""):(this.currentActionSet={...JSON.parse(this.actionSetBackup)},this.metadata.setActionSet(this.currentActionSet.id,this.currentActionSet),this.currentActionSet.actions.length>0&&this.selectItem(this.currentActionSet.actions[0]))}saveChanges(){this.modal.openModal("SystemLoadingModal").subscribe((e=>{let t={},s={};this.currentActionSet.isnew&&(t[this.currentActionSet.id]=this.currentActionSet),this.currentActionSet.isnew||(s[this.currentActionSet.id]=this.currentActionSet);let i={add:t,update:s,delete:{}};this.backend.postRequest("configuration/spiceui/core/actionsets",{},i).subscribe((t=>{t?(this.broadcast.broadcastMessage("metadata.updateactionsets",i),e.instance.self.destroy(),this.toast.sendToast("changes saved"),this.loadCurrentActionset(this.currentActionSet.id),this.configurationService.reloadTaskData("actionsets")):(e.instance.self.destroy(),this.toast.sendToast(this.language.getLabel("ERR_FAILED_TO_EXECUTE"),"error"))}))}))}copy(){this.modalservice.openModal("ActionsetManagerAddDialog").subscribe((e=>{e.instance.sysModules=this.sysModules,e.instance.actionsetModule=this.currentModule,e.instance.mode="copy",e.instance.edit_mode=this.edit_mode,e.instance.actionsetName=this.currentActionSet.name+" (custom)",e.instance.closedialog.subscribe((e=>{if(e){let t=this.modelutilities.generateGuid(),s=JSON.parse(JSON.stringify(this.currentActionSet.actions));this.metadata.setActionSet(t,{module:e.module,name:e.name,type:e.type,actions:s});for(let e of s)e.id=this.modelutilities.generateGuid();this.reset(),this.currentModule=e.module,this.currentActionSet.id=t,this.currentActionSet.module=e.module,this.currentActionSet.name=e.name,this.currentActionSet.type=e.type,this.currentActionSet.actions=s,this.currentActionSet.isnew=!0,this.view.setEditMode()}}))}))}static#e=this.ɵfac=function(e){return new(e||ActionsetManager)(m.rXU(p.H),m.rXU(f.yu),m.rXU(b.B),m.rXU(y.g),m.rXU(Mi.m),m.rXU(v.o),m.rXU(R.y),m.rXU(M.i),m.rXU(_n.U),m.rXU(R.y))};static#t=this.ɵcmp=m.VBU({type:ActionsetManager,selectors:[["actionset-manager"]],features:[m.Jv_([_n.U])],decls:27,vars:12,consts:[["titlelabel","LBL_ACTIONSET_MANAGER"],[1,"slds-p-around--small","slds-border--bottom"],[1,"slds-grid","slds-grid--vertical-align-center","slds-form--inline"],[1,"slds-form-element"],[1,"slds-form-element__label"],["label","LBL_MODULE"],[1,"slds-form-element__control",2,"min-width","250px"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","disabled","ngModelChange","change"],["value","*"],[3,"value",4,"ngFor","ngForOf"],["label","LBL_ACTIONSET"],[3,"label",4,"ngIf"],[1,"slds-form-element","slds-col--bump-left"],["class","slds-button slds-button--brand",3,"disabled","click",4,"ngIf"],["type","button","class","slds-button slds-button_icon slds-button_icon-border-filled",3,"disabled","click",4,"ngIf"],["type","button","class","slds-button slds-button--brand",3,"disabled","click",4,"ngIf"],["class","slds-theme--default",4,"ngIf"],[3,"value"],[3,"label"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_COPY"],["type","button",1,"slds-button","slds-button_icon","slds-button_icon-border-filled",3,"disabled","click"],[3,"icon","size"],["type","button",1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_SAVE"],["label","LBL_CANCEL"],[1,"slds-theme--default"],[1,"slds-p-around--small","slds-border--bottom","slds-theme--default"],[1,"slds-grid","slds-grid--vertical-align-end"],[1,"slds-form-element","slds-p-right--x-small","slds-size--1-of-6"],["label","LBL_SCOPE"],[1,"slds-form-element__control","slds-input-has-icon","slds-input-has-icon_left"],["size","x-small","addclasses","slds-input__icon slds-input__icon_left",3,"icon"],["type","text","disabled","",1,"slds-input",3,"ngModel"],["label","LBL_GROUPED"],[1,"slds-form-element__control"],[1,"slds-select_container","slds-m-vertical--xx-small"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],["value","no"],["label","LBL_NO"],["value","vertical"],["label","LBL_VERTICAL"],["value","horizontal"],["label","LBL_HORIZONTAL"],["label","LBL_NAME"],["type","text",1,"slds-input",3,"disabled","ngModel","ngModelChange"],["label","LBL_PACKAGE"],["label","LBL_VERSION"],["label","LBL_ID"],["system-to-bottom-noscroll","",1,"slds-grid"],["system-to-bottom","",1,"slds-size--3-of-5","slds-p-horizontal--small","slds-p-top--x-small","slds-border--right"],["role","application","cdkDropList","",1,"slds-tree_container","dragboundary",2,"max-width","none",3,"cdkDropListDropped"],["class","slds-p-vertical--xx-small slds-grid slds-grid--align-spread slds-grid--vertical-align-center","cdkDrag","","cdkDragBoundary",".dragboundary",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"slds-p-around--small","slds-align--absolute-center","slds-border--top","slds-m-top--small"],["title","add item",1,"slds-button","slds-button--icon",3,"disabled","click"],[3,"icon"],["system-to-bottom","",1,"slds-size--2-of-5","slds-p-horizontal--small","slds-p-vertical--x-small"],[3,"action"],["cdkDrag","","cdkDragBoundary",".dragboundary",1,"slds-p-vertical--xx-small","slds-grid","slds-grid--align-spread","slds-grid--vertical-align-center",3,"ngClass","click"],["cdkDragHandle","",1,"slds-p-right--xx-small",2,"cursor","move",3,"icon","size"],["href","javascript:void(0);","role","presentation",1,"slds-truncate"],[1,"slds-col--bump-left"],["title","unlink item",1,"slds-button","slds-button--icon",3,"disabled","click"]],template:function(e,t){1&e&&(m.nrm(0,"workbench-header",0),m.j41(1,"div",1)(2,"div",2)(3,"div",3)(4,"label",4),m.nrm(5,"system-label",5),m.k0s(),m.j41(6,"div",6)(7,"div",7)(8,"select",8),m.mxI("ngModelChange",(function(e){return m.DH7(t.currentModule,e)||(t.currentModule=e),e})),m.bIt("change",(function(){return t.selectModule()})),m.j41(9,"option",9),m.EFF(10,"*"),m.k0s(),m.DNE(11,nl,2,2,"option",10),m.k0s()()()(),m.j41(12,"div",3)(13,"label",4),m.nrm(14,"system-label",11),m.k0s(),m.j41(15,"div",6)(16,"div",7)(17,"select",8),m.mxI("ngModelChange",(function(e){return m.DH7(t.currentActionSet.id,e)||(t.currentActionSet.id=e),e})),m.bIt("change",(function(){return t.selectCurrentActionset()})),m.nrm(18,"option"),m.DNE(19,ol,2,2,"optgroup",12)(20,dl,2,2,"optgroup",12),m.k0s()()()(),m.j41(21,"div",13),m.DNE(22,rl,3,1,"button",14)(23,cl,2,3,"button",15)(24,ml,2,1,"button",16)(25,ul,2,1,"button",16),m.k0s()()(),m.DNE(26,pl,50,15,"div",17)),2&e&&(m.R7$(8),m.R50("ngModel",t.currentModule),m.Y8G("disabled",0==t.sysModules.length),m.R7$(3),m.Y8G("ngForOf",t.sysModules),m.R7$(6),m.R50("ngModel",t.currentActionSet.id),m.Y8G("disabled",0==t.getActionSets().length),m.R7$(2),m.Y8G("ngIf",t.getActionSets("custom").length>0),m.R7$(),m.Y8G("ngIf",t.getActionSets("global").length>0),m.R7$(2),m.Y8G("ngIf",!t.checkForChanges&&""!=t.currentActionSet.id),m.R7$(),m.Y8G("ngIf",!t.checkForChanges),m.R7$(),m.Y8G("ngIf",t.checkForChanges&&""!=t.currentActionSet.id),m.R7$(),m.Y8G("ngIf",t.checkForChanges&&""!=t.currentActionSet.id),m.R7$(),m.Y8G("ngIf",""!=t.currentActionSet.id))},dependencies:[i.YU,i.Sq,i.bT,n.xH,n.y7,n.me,n.wz,n.BC,n.vS,L.t,kn.k,x.W,u.B,F.b,T.p,c.O7,c.T1,c.Fb,il,Te],encapsulation:2})}return ActionsetManager})();function bl(e,t){if(1&e&&(m.j41(0,"option",29),m.EFF(1),m.k0s()),2&e){const e=t.$implicit;m.Y8G("value",e.module),m.R7$(),m.SpI("",e.module," ")}}function yl(e,t){1&e&&(m.j41(0,"option",30),m.nrm(1,"system-label",31),m.k0s())}let _l=(()=>{class ActionsetManagerAddDialog{constructor(e,t,s){this.backend=e,this.metadata=t,this.language=s,this.sysModules=[],this.actionsetModule="",this.mode="",this.edit_mode="",this.actionsetName="",this.closedialog=new m.bkB,this.actionsetType="custom",this.globalEdit=!1,this.modalTitle=""}ngOnInit(){"copy"==this.mode?this.modalTitle=this.language.getLabel("LBL_COPY_ACTIONSET"):this.modalTitle=this.language.getLabel("LBL_NEW_ACTIONSET")}closeDialog(){this.self.destroy()}onModalEscX(){this.closeDialog()}add(){this.closedialog.emit({name:this.actionsetName,type:this.actionsetType,module:this.actionsetModule}),this.self.destroy()}static#e=this.ɵfac=function(e){return new(e||ActionsetManagerAddDialog)(m.rXU(p.H),m.rXU(f.yu),m.rXU(b.B))};static#t=this.ɵcmp=m.VBU({type:ActionsetManagerAddDialog,selectors:[["actionsetmanager-add-dialog"]],inputs:{sysModules:"sysModules",actionsetModule:"actionsetModule",mode:"mode",edit_mode:"edit_mode",actionsetName:"actionsetName"},outputs:{closedialog:"closedialog"},decls:36,vars:10,consts:[["role","dialog","tabindex","-1","aria-labelledby","header43",1,"slds-modal","slds-fade-in-open"],[1,"slds-modal__container"],[1,"slds-modal__header","slds-theme--shade"],["title","Close",1,"slds-button","slds-modal__close","slds-button--icon-inverse",3,"click"],[3,"icon","size"],["id","header43",1,"slds-text-heading--medium"],[1,"slds-modal__content","slds-p-around--medium"],[1,"slds-form-element"],[1,"slds-form-element__label"],["label","LBL_MODULE"],[1,"slds-form-element__control",2,"min-width","250px"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","disabled","ngModelChange"],["value","*"],[3,"value",4,"ngFor","ngForOf"],[1,"slds-form-element","slds-m-top--small"],["label","LBL_ITEM_NAME"],[1,"slds-form-element__control"],["type","text","placeholder","name",1,"slds-input",3,"ngModel","ngModelChange"],["label","LBL_TYPE"],[1,"slds-select",3,"ngModel","ngModelChange"],["value","global",4,"ngIf"],["value","custom"],["label","LBL_CUSTOM"],[1,"slds-modal__footer"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_ADD"],[3,"value"],["value","global"],["label","LBL_GLOBAL"]],template:function(e,t){1&e&&(m.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),m.bIt("click",(function(){return t.closeDialog()})),m.nrm(4,"system-button-icon",4),m.k0s(),m.j41(5,"h2",5),m.EFF(6),m.k0s()(),m.j41(7,"div",6)(8,"div",7)(9,"label",8),m.nrm(10,"system-label",9),m.k0s(),m.j41(11,"div",10)(12,"div",11)(13,"select",12),m.mxI("ngModelChange",(function(e){return m.DH7(t.actionsetModule,e)||(t.actionsetModule=e),e})),m.j41(14,"option",13),m.EFF(15,"*"),m.k0s(),m.DNE(16,bl,2,2,"option",14),m.k0s()()()(),m.j41(17,"div",15)(18,"label",8),m.nrm(19,"system-label",16),m.k0s(),m.j41(20,"div",17)(21,"input",18),m.mxI("ngModelChange",(function(e){return m.DH7(t.actionsetName,e)||(t.actionsetName=e),e})),m.k0s()()(),m.j41(22,"div",7)(23,"label",8),m.nrm(24,"system-label",19),m.k0s(),m.j41(25,"div",17)(26,"div",11)(27,"select",20),m.mxI("ngModelChange",(function(e){return m.DH7(t.actionsetType,e)||(t.actionsetType=e),e})),m.DNE(28,yl,2,0,"option",21),m.j41(29,"option",22),m.nrm(30,"system-label",23),m.k0s()()()()()(),m.j41(31,"div",24)(32,"button",25),m.bIt("click",(function(){return t.closeDialog()})),m.nrm(33,"system-label",26),m.k0s(),m.j41(34,"button",27),m.bIt("click",(function(){return t.add()})),m.nrm(35,"system-label",28),m.k0s()()()()),2&e&&(m.R7$(4),m.Y8G("icon","close")("size","large"),m.R7$(2),m.JRh(t.modalTitle),m.R7$(7),m.R50("ngModel",t.actionsetModule),m.Y8G("disabled",0==t.sysModules.length),m.R7$(3),m.Y8G("ngForOf",t.sysModules),m.R7$(5),m.R50("ngModel",t.actionsetName),m.R7$(6),m.R50("ngModel",t.actionsetType),m.R7$(),m.Y8G("ngIf","all"==t.edit_mode),m.R7$(6),m.Y8G("disabled",""==t.actionsetName))},dependencies:[i.Sq,i.bT,n.xH,n.y7,n.me,n.wz,n.BC,n.vS,L.t,x.W],encapsulation:2})}return ActionsetManagerAddDialog})();var kl=s(32130);function vl(e,t){if(1&e&&(m.j41(0,"option",18),m.EFF(1),m.k0s()),2&e){const e=t.$implicit;m.Y8G("value",e.id),m.R7$(),m.JRh(e.name)}}function Rl(e,t){if(1&e){const e=m.RV6();m.qex(0),m.j41(1,"button",28),m.bIt("click",(function(){m.eBV(e);const t=m.XpG().$implicit,s=m.XpG(2);return m.Njj(s.editNode(t))})),m.nrm(2,"system-button-icon",34),m.k0s(),m.j41(3,"button",30),m.bIt("click",(function(){m.eBV(e);const t=m.XpG().$implicit,s=m.XpG(2);return m.Njj(s.deleteNode(t))})),m.nrm(4,"system-button-icon",35),m.k0s(),m.bVm()}}const Ml=e=>({"slds-theme--shade":e}),jl=e=>({opacity:e}),Ll=e=>({"slds-hidden":e});function xl(e,t){if(1&e){const e=m.RV6();m.j41(0,"div",25),m.bIt("click",(function(){const t=m.eBV(e).$implicit,s=m.XpG().index,i=m.XpG();return m.Njj(i.setSelectedNodeID(s,t.id))})),m.j41(1,"div",26),m.EFF(2),m.k0s(),m.DNE(3,Rl,5,0,"ng-container",27),m.j41(4,"button",28),m.bIt("click",(function(){const t=m.eBV(e).$implicit;return m.Njj(t.favorite=!t.favorite)})),m.nrm(5,"system-button-icon",29),m.k0s(),m.j41(6,"button",30),m.bIt("click",(function(){const t=m.eBV(e).$implicit;return m.Njj(t.selectable=!t.selectable)})),m.nrm(7,"system-button-icon",31),m.k0s(),m.j41(8,"button",32),m.bIt("click",(function(){const t=m.eBV(e).$implicit,s=m.XpG().index,i=m.XpG();return m.Njj(i.setSelectedNodeID(s,t.id))})),m.nrm(9,"system-button-icon",33),m.k0s()()}if(2&e){const e=t.$implicit,s=m.XpG().$implicit,i=m.XpG();m.Y8G("ngClass",m.eq3(9,Ml,s==e.id)),m.R7$(),m.Y8G("ngClass",i.getNodeStyle(e)),m.R7$(),m.Lme("",e.node_name," (",e.node_key,")"),m.R7$(),m.Y8G("ngIf",s==e.id),m.R7$(2),m.Y8G("ngStyle",m.eq3(11,jl,e.favorite?1:.3)),m.R7$(2),m.Y8G("ngStyle",m.eq3(13,jl,e.selectable?1:.3))("icon",e.selectable?"linked":"unlinked"),m.R7$(),m.Y8G("ngClass",m.eq3(15,Ll,!i.hasChildren(e.id)))}}const Il=e=>({"slds-border--right":e});function Dl(e,t){if(1&e){const e=m.RV6();m.j41(0,"div",19)(1,"div",20),m.DNE(2,xl,10,17,"div",21),m.k0s(),m.j41(3,"div",22)(4,"button",23),m.bIt("click",(function(){const t=m.eBV(e).index,s=m.XpG();return m.Njj(s.addNode(t))})),m.nrm(5,"system-button-icon",24),m.k0s()()()}if(2&e){const e=t.index,s=m.XpG();m.Y8G("ngClass",m.eq3(3,Il,e<3)),m.R7$(2),m.Y8G("ngForOf",s.getNodes(e)),m.R7$(2),m.Y8G("disabled",!s.addEnabled(e))}}let El=(()=>{class CategoryTreeManager{constructor(e,t,s,i,n,l,o,a){this.backend=e,this.metadata=t,this.language=s,this.config=i,this.utils=n,this.toast=l,this.modal=o,this.injector=a,this.loading=!1,this.activeTreeNodes=[],this.categoryTrees=[],this.selectedTreeNodes=[null,null,null,null],this.loadTrees()}addTree(){this.modal.openModal("CategoryTreeAddModal",!0,this.injector).subscribe((e=>{e.instance.categoryTrees=this.categoryTrees,e.instance.action.subscribe((t=>{"save"==t&&(this.activeTree=e.instance.newActiveTreeId)}))}))}linkTree(){this.modal.openModal("CategoryTreeManagerLinkModal",!0,this.injector).subscribe((e=>{e.instance.activeTreeId=this.activeTree}))}get activeTree(){return this._activeTree}set activeTree(e){this._activeTree=e,this.loadActiveTree()}hasChildren(e){return this.activeTreeNodes.filter((t=>t.parent_id==e)).length>0}loadTrees(){this.loading=!0,this.config.getData("select_trees")||this.backend.getRequest("configuration/spiceui/core/categorytrees").subscribe((e=>{this.loading=!1,this.categoryTrees=e,this.categoryTrees.length>0&&(this.activeTree=this.categoryTrees[0].id)}),(e=>{this.loading=!1,this.toast.sendToast("Error Loading Data","error")}))}loadActiveTree(){this.loading=!0,this.activeTreeNodes=[],this.selectedTreeNodes=[null,null,null,null],this.backend.getRequest(`configuration/spiceui/core/categorytrees/${this.activeTree}/categorytreenodes`,{all:!0}).subscribe((e=>{this.activeTreeNodes=e,this.activeTreeNodesBackup=JSON.stringify(e),this.loading=!1}),(e=>{this.loading=!1,this.toast.sendToast("Error Loading Data","error")}))}getNodeStyle(e){if("c"==e.node_status)return"slds-text-color_success";let t=new moment;return"i"==e.node_status||t.isBefore(e.valid_from)||t.isAfter(e.valid_to)?"slds-text-color_error":""}setSelectedNodeID(e,t){if(this.selectedTreeNodes[e]!=t)for(this.selectedTreeNodes[e]=t,e++;e<=3;)this.selectedTreeNodes[e]=null,e++}addEnabled(e){return 0===e?!!this.activeTree:!!this.selectedTreeNodes[e-1]}getNodes(e){return 0===e?this.activeTreeNodes.filter((e=>0==e.deleted&&!e.parent_id)).sort(((e,t)=>parseFloat(e.node_key)>parseFloat(t.node_key)?1:-1)):this.selectedTreeNodes[e-1]?this.activeTreeNodes.filter((t=>0==t.deleted&&t.parent_id==this.selectedTreeNodes[e-1])).sort(((e,t)=>parseFloat(e.node_key)>parseFloat(t.node_key)?1:-1)):[]}editNode(e){let t={...e};this.modal.openModal("CategoryTreeManagerNode").subscribe((s=>{s.instance.node=t,s.instance.nodes=this.activeTreeNodes.filter((t=>!e.parent_id&&!t.parent_id||e.parent_id&&t.parent_id==e.parent_id)),s.instance.addParamsComponent=this.categoryTrees.find((e=>e.id==this.activeTree)).add_params_component,s.instance.action.subscribe((s=>{s&&(e.node_name=t.node_name,e.node_description=t.node_description,e.node_key=t.node_key,e.selectable=t.selectable,e.favorite=t.favorite,e.add_params=t.add_params,e.valid_from=t.valid_from,e.valid_to=t.valid_to,e.node_status=t.node_status,e.deleted=0)}))}))}deleteNode(e){this.modal.confirm("MSG_DELETE_NODE","MSG_DELETE_NODE").subscribe((t=>{t&&(e.deleted=1,this.deleteChildren(e))}))}deleteChildren(e){let t=this.activeTreeNodes.filter((t=>t.parent_id==e.id&&0==t.deleted));for(let e of t)e.deleted=1,this.deleteChildren(e)}getNextNumber(e){let t=0,s=this.activeTreeNodes.filter((t=>!e&&!t.parent_id||e&&t.parent_id==e));for(let e of s){let s=parseInt(e.node_key,10);s>t&&(t=s)}return t+1}addNode(e){let t={id:this.utils.generateGuid(),node_name:null,node_description:null,node_key:this.getNextNumber(this.selectedTreeNodes[e-1]),parent_id:0==e?null:this.selectedTreeNodes[e-1],syscategorytree_id:this.activeTree,selectable:!0,node_status:"c",favorite:!1,deleted:0};this.modal.openModal("CategoryTreeManagerNode").subscribe((e=>{e.instance.node=t,e.instance.nodes=this.activeTreeNodes.filter((e=>!t.parent_id&&!e.parent_id||t.parent_id&&e.parent_id==t.parent_id)),e.instance.addParamsComponent=this.categoryTrees.find((e=>e.id==this.activeTree)).add_params_component,e.instance.action.subscribe((e=>{e&&this.activeTreeNodes.push(t)}))}))}get isDirty(){return this.changedNodes.length>0}get changedNodes(){let e=[];if(this.activeTreeNodesBackup){let t=JSON.parse(this.activeTreeNodesBackup);for(let s of this.activeTreeNodes){let i=t.find((e=>e.id==s.id));(!i||i&&!_.isEqual(i,s))&&e.push(s)}}return e}revertChanges(){this.loadActiveTree()}save(){let e=this.changedNodes;e.length>0&&this.backend.postRequest(`configuration/spiceui/core/categorytrees/${this.activeTree}/categorytreenodes`,null,e).subscribe((e=>{this.toast.sendToast("changes saved"),this.activeTreeNodesBackup=JSON.stringify(this.activeTreeNodes)}),(e=>{this.toast.sendAlert("saving failed!","error"),console.error(e)}))}static#e=this.ɵfac=function(e){return new(e||CategoryTreeManager)(m.rXU(p.H),m.rXU(f.yu),m.rXU(b.B),m.rXU(M.i),m.rXU(y.g),m.rXU(v.o),m.rXU(R.y),m.rXU(m.zZn))};static#t=this.ɵcmp=m.VBU({type:CategoryTreeManager,selectors:[["categgory-tree-manager"]],decls:22,vars:10,consts:[["titlelabel","LBL_CATEGORY_TREES","icon","strategy"],[1,"slds-grid","slds-grid--vertical-align-center"],[1,"slds-form-element__label"],["label","LBL_TREE"],[1,"slds-form-element__control","slds-p-right--small",2,"min-width","280px"],["disabled","true",3,"ngModel","ngModelChange"],[1,"slds-form-element__control","slds-p-right--small",2,"min-width","250px"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","disabled","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"slds-button","slds-button_icon","slds-button_icon-border-filled",3,"disabled","click"],["icon","add"],["icon","link"],["icon","undo"],["icon","save"],["system-to-bottom-noscroll","",1,"slds-p-around--small","slds-theme--default",3,"system-overlay-loading-spinner"],[1,"slds-box--border","slds-grid","slds-height_full"],["style","min-height: 250px","class","slds-size--1-of-4 slds-is-relative slds-p-bottom--x-large",3,"ngClass",4,"ngFor","ngForOf"],[3,"value"],[1,"slds-size--1-of-4","slds-is-relative","slds-p-bottom--x-large",2,"min-height","250px",3,"ngClass"],[1,"slds-scrollable--y",2,"height","calc(100% - 10px)"],["class","slds-m-around--xx-small slds-p-around--xx-small slds-grid",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"slds-p-vertical--small","slds-align--absolute-center"],[1,"slds-button","slds-button--icon",3,"disabled","click"],["icon","new"],[1,"slds-m-around--xx-small","slds-p-around--xx-small","slds-grid",3,"ngClass","click"],[1,"slds-truncate",3,"ngClass"],[4,"ngIf"],[1,"slds-col--bump-left","slds-button","slds-button--icon",3,"click"],["icon","favorite",3,"ngStyle"],[1,"slds-button","slds-button--icon",3,"click"],[3,"ngStyle","icon"],[1,"slds-button","slds-button--icon",3,"ngClass","click"],["icon","chevronright"],["icon","edit"],["icon","delete"]],template:function(e,t){1&e&&(m.j41(0,"workbench-header",0)(1,"workbench-header-controls")(2,"div",1)(3,"label",2),m.nrm(4,"system-label",3),m.k0s(),m.j41(5,"div",4)(6,"system-input-text",5),m.mxI("ngModelChange",(function(e){return m.DH7(t.activeTree,e)||(t.activeTree=e),e})),m.k0s()(),m.j41(7,"div",6)(8,"div",7)(9,"select",8),m.mxI("ngModelChange",(function(e){return m.DH7(t.activeTree,e)||(t.activeTree=e),e})),m.DNE(10,vl,2,2,"option",9),m.k0s()()(),m.j41(11,"button",10),m.bIt("click",(function(){return t.addTree()})),m.nrm(12,"system-button-icon",11),m.k0s(),m.j41(13,"button",10),m.bIt("click",(function(){return t.linkTree()})),m.nrm(14,"system-button-icon",12),m.k0s(),m.j41(15,"button",10),m.bIt("click",(function(){return t.revertChanges()})),m.nrm(16,"system-button-icon",13),m.k0s(),m.j41(17,"button",10),m.bIt("click",(function(){return t.save()})),m.nrm(18,"system-button-icon",14),m.k0s()()()(),m.j41(19,"div",15)(20,"div",16),m.DNE(21,Dl,6,5,"div",17),m.k0s()()),2&e&&(m.R7$(6),m.R50("ngModel",t.activeTree),m.R7$(3),m.R50("ngModel",t.activeTree),m.Y8G("disabled",0==t.categoryTrees.length||t.isDirty),m.R7$(),m.Y8G("ngForOf",t.categoryTrees),m.R7$(),m.Y8G("disabled",t.isDirty),m.R7$(2),m.Y8G("disabled",!t.activeTree),m.R7$(2),m.Y8G("disabled",!t.isDirty),m.R7$(2),m.Y8G("disabled",!t.isDirty),m.R7$(2),m.Y8G("system-overlay-loading-spinner",t.loading),m.R7$(2),m.Y8G("ngForOf",t.selectedTreeNodes))},dependencies:[i.YU,i.Sq,i.bT,i.B3,n.xH,n.y7,n.wz,n.BC,n.vS,L.t,D.H,x.W,T.p,kl.M,Te,Ye],encapsulation:2})}return CategoryTreeManager})();var Cl=s(10650),Fl=s(26024);const Gl=e=>({addParams:e});function $l(e,t){if(1&e&&(m.j41(0,"div"),m.nrm(1,"system-dynamic-component",38),m.k0s()),2&e){const e=m.XpG();m.R7$(),m.Y8G("component",e.addParamsComponent)("componentattributes",m.eq3(2,Gl,e.addParams))}}let Bl=(()=>{class CategoryTreeManagerNode{constructor(){this.node={},this.nodes=[],this.action=new m.bkB}get canSave(){let e=new RegExp(/([1-9][0-9]*)|0/);return this.node.node_name&&this.node.node_key&&e.test(this.node.node_key)&&this.keyUnique}get keyUnique(){return this.node.node_key&&0==this.nodes.filter((e=>e.node_key==this.node.node_key&&e.id!=this.node.id)).length}ngOnInit(){this.addParams=this.node.add_params??{},this.node.valid_from=moment(this.node.valid_from),this.node.valid_to=moment(this.node.valid_to)}save(){this.node.add_params=this.addParams,this.node.valid_from=this.node.valid_from.format("YYYY-MM-DD HH:mm:ss"),this.node.valid_to=this.node.valid_to.format("YYYY-MM-DD HH:mm:ss"),this.action.emit(!0),this.self.destroy()}close(){this.action.emit(!1),this.self.destroy()}static#e=this.ɵfac=function(e){return new(e||CategoryTreeManagerNode)};static#t=this.ɵcmp=m.VBU({type:CategoryTreeManagerNode,selectors:[["categgory-tree-manager-node"]],decls:65,vars:10,consts:[[3,"close"],["label","LBL_TREE_NODE"],[1,"slds-grid","slds-grid--vertical"],[1,"slds-form-element"],[1,"slds-form-element__label"],["title","required",1,"slds-required"],["label","LBL_NAME"],[1,"slds-form-element__control"],[3,"ngModel","ngModelChange"],[1,"slds-grid"],[1,"slds-form-element","slds-size--1-of-4","slds-p-right--xx-small"],["label","LBL_KEY"],["type","text","required","",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-form-element","slds-size--1-of-4","slds-p-left--xx-small"],["label","LBL_STATUS"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],["value","c"],["label","LBL_STATUS_CREATED"],["value","a"],["label","LBL_STATUS_ACTIVE"],["value","i"],["label","LBL_STATUS_INACTIVE"],["label","LBL_SELECTABLE"],[1,"slds-form-element__control","slds-p-vertical--xx-small"],[1,"slds-form-element","slds-size--1-of-4"],["label","LBL_FAVORITE"],[1,"slds-form-element","slds-size--1-of-2","slds-p-right--xx-small"],["label","LBL_VALID_FROM"],[1,"slds-form-element","slds-size--1-of-2","slds-p-left--xx-small"],["label","LBL_VALID_TO"],["label","LBL_DESCRIPTION"],[1,"slds-textarea",3,"ngModel","ngModelChange"],[4,"ngIf"],[1,"slds-button","slds-button_neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button_brand",3,"disabled","click"],["label","LBL_SAVE"],[3,"component","componentattributes"]],template:function(e,t){1&e&&(m.j41(0,"system-modal")(1,"system-modal-header",0),m.bIt("close",(function(){return t.close()})),m.nrm(2,"system-label",1),m.k0s(),m.j41(3,"system-modal-content")(4,"div",2)(5,"div",3)(6,"label",4)(7,"abbr",5),m.EFF(8,"* "),m.k0s(),m.nrm(9,"system-label",6),m.k0s(),m.j41(10,"div",7)(11,"system-input-label",8),m.mxI("ngModelChange",(function(e){return m.DH7(t.node.node_name,e)||(t.node.node_name=e),e})),m.k0s()()(),m.j41(12,"div",9)(13,"div",10)(14,"label",4)(15,"abbr",5),m.EFF(16,"* "),m.k0s(),m.nrm(17,"system-label",11),m.k0s(),m.j41(18,"div",7)(19,"input",12),m.mxI("ngModelChange",(function(e){return m.DH7(t.node.node_key,e)||(t.node.node_key=e),e})),m.k0s()()(),m.j41(20,"div",13)(21,"label",4)(22,"abbr",5),m.EFF(23,"* "),m.k0s(),m.nrm(24,"system-label",14),m.k0s(),m.j41(25,"div",15)(26,"select",16),m.mxI("ngModelChange",(function(e){return m.DH7(t.node.node_status,e)||(t.node.node_status=e),e})),m.j41(27,"option",17),m.nrm(28,"system-label",18),m.k0s(),m.j41(29,"option",19),m.nrm(30,"system-label",20),m.k0s(),m.j41(31,"option",21),m.nrm(32,"system-label",22),m.k0s()()()(),m.j41(33,"div",13)(34,"label",4),m.nrm(35,"system-label",23),m.k0s(),m.j41(36,"div",24)(37,"system-checkbox",8),m.mxI("ngModelChange",(function(e){return m.DH7(t.node.selectable,e)||(t.node.selectable=e),e})),m.k0s()()(),m.j41(38,"div",25)(39,"label",4),m.nrm(40,"system-label",26),m.k0s(),m.j41(41,"div",24)(42,"system-checkbox",8),m.mxI("ngModelChange",(function(e){return m.DH7(t.node.favorite,e)||(t.node.favorite=e),e})),m.k0s()()()(),m.j41(43,"div",9)(44,"div",27)(45,"label",4),m.nrm(46,"system-label",28),m.k0s(),m.j41(47,"div",7)(48,"system-input-date",8),m.mxI("ngModelChange",(function(e){return m.DH7(t.node.valid_from,e)||(t.node.valid_from=e),e})),m.k0s()()(),m.j41(49,"div",29)(50,"label",4),m.nrm(51,"system-label",30),m.k0s(),m.j41(52,"div",7)(53,"system-input-date",8),m.mxI("ngModelChange",(function(e){return m.DH7(t.node.valid_to,e)||(t.node.valid_to=e),e})),m.k0s()()()(),m.j41(54,"div")(55,"label",4),m.nrm(56,"system-label",31),m.k0s(),m.j41(57,"div",7)(58,"textarea",32),m.mxI("ngModelChange",(function(e){return m.DH7(t.node.node_description,e)||(t.node.node_description=e),e})),m.k0s()()()(),m.DNE(59,$l,2,4,"div",33),m.k0s(),m.j41(60,"system-modal-footer")(61,"button",34),m.bIt("click",(function(){return t.close()})),m.nrm(62,"system-label",35),m.k0s(),m.j41(63,"button",36),m.bIt("click",(function(){return t.save()})),m.nrm(64,"system-label",37),m.k0s()()()),2&e&&(m.R7$(11),m.R50("ngModel",t.node.node_name),m.R7$(8),m.R50("ngModel",t.node.node_key),m.R7$(7),m.R50("ngModel",t.node.node_status),m.R7$(11),m.R50("ngModel",t.node.selectable),m.R7$(5),m.R50("ngModel",t.node.favorite),m.R7$(6),m.R50("ngModel",t.node.valid_from),m.R7$(5),m.R50("ngModel",t.node.valid_to),m.R7$(5),m.R50("ngModel",t.node.node_description),m.R7$(),m.Y8G("ngIf",t.addParamsComponent),m.R7$(4),m.Y8G("disabled",!t.canSave))},dependencies:[i.bT,n.xH,n.y7,n.me,n.wz,n.BC,n.YS,n.vS,be.f,Cl.s,Fl.M,ze.w,x.W,qe.D,Pe.I,Je.Q,We.C],encapsulation:2})}return CategoryTreeManagerNode})();function Nl(e,t){if(1&e&&(m.j41(0,"option",21),m.EFF(1),m.k0s()),2&e){const e=t.$implicit;m.Y8G("value",e.component),m.R7$(),m.JRh(e.component)}}let Sl=(()=>{class CategoryTreeAddModal{constructor(e,t,s,i,n,l,o){this.metadata=e,this.language=t,this.backend=s,this.utils=i,this.toast=n,this.modal=l,this.broadcast=o,this.componentconfig={},this.components=[],this.categoryTrees=[],this.action=new m.bkB}ngOnInit(){this.componentconfig=this.metadata.getComponentConfig("CategoryTreeAddModal"),this.getComponentsList()}getComponentsList(){this.components=this.metadata.getComponentSetObjects(this.componentconfig.componentset)}close(){this.self.destroy()}get disabled(){if(!this.name)return!0}get value(){return this.selectedComponent}set value(e){this.selectedComponent=e}save(){const e=this.modal.await("LBL_SAVING_DATA");this.newActiveTreeId=this.utils.generateGuid(),this.backend.postRequest(`configuration/spiceui/core/categorytrees/${this.newActiveTreeId}`,{},{id:this.newActiveTreeId,name:this.name,add_params_component:this.selectedComponent}).subscribe({next:()=>{let t={id:this.newActiveTreeId,name:this.name,add_params_component:this.selectedComponent};this.categoryTrees.push(t),this.action.emit("save"),e.emit(!0),this.close(),this.toast.sendToast("LBL_CATEGORYTREE_SAVED","success")},error:()=>{e.emit(!0),this.toast.sendToast("LBL_SAVING_ERROR","error")}})}static#e=this.ɵfac=function(e){return new(e||CategoryTreeAddModal)(m.rXU(f.yu),m.rXU(b.B),m.rXU(p.H),m.rXU(y.g),m.rXU(v.o),m.rXU(R.y),m.rXU(Mi.m))};static#t=this.ɵcmp=m.VBU({type:CategoryTreeAddModal,selectors:[["category-tree-add-modal"]],decls:25,vars:5,consts:[[3,"close"],["label","MSG_ENTER_TREE_NAME"],["margin","medium"],[1,"slds-grid","slds-grid--vertical","slds-p-top--medium","slds-p-bottom--medium"],[1,"slds-grid"],[1,"slds-form-element","slds-size--1-of-2","slds-p-right--xx-small"],[1,"slds-form-element__label"],[1,"slds-required"],["label","LBL_NAME"],[3,"ngModel","ngModelChange"],[1,"slds-form-element","slds-size--1-of-2","slds-p-left--xx-small"],["label","LBL_SELECT_COMPONENT"],[1,"slds-select_container"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"slds-text-align--right","slds-p-vertical--x-small"],["type","button",1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],["type","button",1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_SAVE"],[3,"value"]],template:function(e,t){1&e&&(m.j41(0,"system-modal")(1,"system-modal-header",0),m.bIt("close",(function(){return t.close()})),m.nrm(2,"system-label",1),m.k0s(),m.j41(3,"system-modal-content",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"label",6)(8,"abbr",7),m.EFF(9,"* "),m.k0s(),m.nrm(10,"system-label",8),m.k0s(),m.j41(11,"system-input-text",9),m.mxI("ngModelChange",(function(e){return m.DH7(t.name,e)||(t.name=e),e})),m.k0s()(),m.j41(12,"div",10)(13,"label",6),m.nrm(14,"system-label",11),m.k0s(),m.j41(15,"div",12)(16,"select",13),m.mxI("ngModelChange",(function(e){return m.DH7(t.value,e)||(t.value=e),e})),m.nrm(17,"option",14),m.DNE(18,Nl,2,2,"option",15),m.k0s()()()()()(),m.j41(19,"system-modal-footer")(20,"div",16)(21,"button",17),m.bIt("click",(function(){return t.close()})),m.nrm(22,"system-label",18),m.k0s(),m.j41(23,"button",19),m.bIt("click",(function(){return t.save()})),m.nrm(24,"system-label",20),m.k0s()()()()),2&e&&(m.R7$(11),m.R50("ngModel",t.name),m.R7$(5),m.Y8G("disabled",0==t.components.length),m.R50("ngModel",t.value),m.R7$(2),m.Y8G("ngForOf",t.components),m.R7$(5),m.Y8G("disabled",t.disabled))},dependencies:[i.Sq,n.xH,n.y7,n.wz,n.BC,n.vS,D.H,x.W,qe.D,Pe.I,Je.Q,We.C],encapsulation:2})}return CategoryTreeAddModal})(),wl=(()=>{class ComponentsetManagerComponentsetDetails{constructor(e,t){this.view=e,this.language=t,this.component={},this.configcomponent="",this.configValues={},this.selectedComponent={}}ngOnChanges(e){this.component.component&&(this.selectComponent(this.component),this.configcomponent=this.component.component,this.configValues=this.component.componentconfig)}selectComponent(e){e.id?this.selectedComponent=e:this.selectedComponent={}}static#e=this.ɵfac=function(e){return new(e||ComponentsetManagerComponentsetDetails)(m.rXU(_n.U),m.rXU(b.B))};static#t=this.ɵcmp=m.VBU({type:ComponentsetManagerComponentsetDetails,selectors:[["componentsetmanager-componentset-details"]],inputs:{component:"component"},features:[m.OA$],decls:17,vars:7,consts:[[1,"slds-grid"],[1,"slds-form-element","slds-size_2-of-4"],[1,"slds-form-element__label"],["label","LBL_COMPONENT"],[1,"slds-form-element__control"],["disabled","","type","text",1,"slds-input",3,"ngModel"],[1,"slds-form-element","slds-size_1-of-4","slds-p-left_x-small"],["label","LBL_PACKAGE"],["type","text",1,"slds-input",3,"disabled","ngModel","ngModelChange"],["label","LBL_VERSION"],[3,"component","configValues"]],template:function(e,t){1&e&&(m.j41(0,"div",0)(1,"div",1)(2,"label",2),m.nrm(3,"system-label",3),m.k0s(),m.j41(4,"div",4),m.nrm(5,"input",5),m.k0s()(),m.j41(6,"div",6)(7,"label",2),m.nrm(8,"system-label",7),m.k0s(),m.j41(9,"div",4)(10,"input",8),m.mxI("ngModelChange",(function(e){return m.DH7(t.component.package,e)||(t.component.package=e),e})),m.k0s()()(),m.j41(11,"div",6)(12,"label",2),m.nrm(13,"system-label",9),m.k0s(),m.j41(14,"div",4)(15,"input",8),m.mxI("ngModelChange",(function(e){return m.DH7(t.component.version,e)||(t.component.version=e),e})),m.k0s()()()(),m.nrm(16,"workbench-config",10)),2&e&&(m.R7$(5),m.Y8G("ngModel",t.component.component),m.R7$(5),m.Y8G("disabled",!t.view.isEditMode()),m.R50("ngModel",t.component.package),m.R7$(5),m.Y8G("disabled",!t.view.isEditMode()),m.R50("ngModel",t.component.version),m.R7$(),m.Y8G("component",t.configcomponent)("configValues",t.configValues))},dependencies:[n.me,n.BC,n.vS,x.W,jn],encapsulation:2})}return ComponentsetManagerComponentsetDetails})();function Tl(e,t){if(1&e&&(m.j41(0,"option",20),m.EFF(1),m.k0s()),2&e){const e=t.$implicit;m.Y8G("value",e),m.R7$(),m.SpI("",e," ")}}function Al(e,t){if(1&e&&(m.j41(0,"option",23),m.EFF(1),m.k0s()),2&e){const e=t.$implicit;m.Y8G("ngValue",e.id),m.R7$(),m.SpI(" ",e.name," ")}}function Yl(e,t){if(1&e&&(m.j41(0,"optgroup",21),m.DNE(1,Al,2,2,"option",22),m.k0s()),2&e){const e=m.XpG();m.R7$(),m.Y8G("ngForOf",e.getComponentSets("custom"))}}function Ol(e,t){if(1&e&&(m.j41(0,"option",23),m.EFF(1),m.k0s()),2&e){const e=t.$implicit;m.Y8G("ngValue",e.id),m.R7$(),m.SpI(" ",e.name," ")}}function Xl(e,t){if(1&e&&(m.j41(0,"optgroup",24),m.DNE(1,Ol,2,2,"option",22),m.k0s()),2&e){const e=m.XpG();m.R7$(),m.Y8G("ngForOf",e.getComponentSets("global"))}}function Vl(e,t){if(1&e){const e=m.RV6();m.j41(0,"button",17),m.bIt("click",(function(){m.eBV(e);const t=m.XpG();return m.Njj(t.duplicateComponentset())})),m.nrm(1,"system-utility-icon",25),m.k0s()}if(2&e){const e=m.XpG();m.Y8G("disabled",!e.allowBarButtons||!e.currentComponentSet)}}function Ul(e,t){if(1&e&&(m.j41(0,"a",57),m.EFF(1),m.k0s()),2&e){const e=m.XpG().$implicit,t=m.XpG(2);m.R7$(),m.Lme(" ",e.component," ",t.getComponentSetItemName(e)," ")}}function Hl(e,t){if(1&e&&(m.j41(0,"div",58)(1,"a",57),m.nrm(2,"system-icon",59),m.j41(3,"del",60),m.EFF(4),m.k0s()()()),2&e){const e=m.XpG().$implicit,t=m.XpG(2);m.R7$(2),m.Y8G("icon","warning")("sprite","utility")("size","x-small")("addclasses","slds-m-vertical--xxx-small slds-m-horizontal--xx-small"),m.R7$(2),m.Lme("",e.component," ",t.getComponentSetItemName(e),"")}}const zl=e=>({"slds-theme--shade":e});function ql(e,t){if(1&e){const e=m.RV6();m.j41(0,"div",51),m.bIt("click",(function(){const t=m.eBV(e).$implicit,s=m.XpG(2);return m.Njj(s.selectItem(t))})),m.nrm(1,"system-utility-icon",52),m.DNE(2,Ul,2,2,"a",53)(3,Hl,5,6,"div",54),m.j41(4,"div",55)(5,"button",56),m.bIt("click",(function(){const t=m.eBV(e).$implicit,s=m.XpG(2);return m.Njj(s.deleteComponent(t))})),m.nrm(6,"system-button-icon",45),m.k0s()()()}if(2&e){const e=t.$implicit,s=m.XpG(2);m.Y8G("ngClass",m.eq3(7,zl,s.isSelected(e.id))),m.R7$(),m.Y8G("icon","rows")("size","x-small"),m.R7$(),m.Y8G("ngIf",!s.componentDeprecated(e)),m.R7$(),m.Y8G("ngIf",s.componentDeprecated(e)),m.R7$(2),m.Y8G("disabled",!s.view.isEditMode()),m.R7$(),m.Y8G("icon","delete")}}function Pl(e,t){if(1&e&&m.nrm(0,"componentsetmanager-componentset-details",61),2&e){const e=m.XpG(2);m.Y8G("component",e.selectedComponent)}}function Jl(e,t){if(1&e){const e=m.RV6();m.j41(0,"div",26)(1,"div",27)(2,"div",28)(3,"div",29)(4,"label",4),m.nrm(5,"system-label",30),m.k0s(),m.j41(6,"div",31),m.nrm(7,"system-utility-icon",32)(8,"input",33),m.k0s()(),m.j41(9,"div",29)(10,"label",4),m.nrm(11,"system-label",34),m.k0s(),m.j41(12,"div",6)(13,"input",35),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.currentComponentSetName,t)||(s.currentComponentSetName=t),m.Njj(t)})),m.k0s()()(),m.j41(14,"div",29)(15,"label",4),m.nrm(16,"system-label",36),m.k0s(),m.j41(17,"div",6)(18,"input",35),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.currentComponentSetPackage,t)||(s.currentComponentSetPackage=t),m.Njj(t)})),m.k0s()()(),m.j41(19,"div",29)(20,"label",4),m.nrm(21,"system-label",37),m.k0s(),m.j41(22,"div",6)(23,"input",35),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.currentComponentSetVersion,t)||(s.currentComponentSetVersion=t),m.Njj(t)})),m.k0s()()(),m.j41(24,"div",29)(25,"label",4),m.nrm(26,"system-label",38),m.k0s(),m.j41(27,"div",6),m.nrm(28,"input",33),m.k0s()()()(),m.j41(29,"div",39)(30,"div",40)(31,"div",41),m.bIt("cdkDropListDropped",(function(t){m.eBV(e);const s=m.XpG();return m.Njj(s.drop(t))})),m.DNE(32,ql,7,9,"div",42),m.k0s(),m.j41(33,"div",43)(34,"button",44),m.bIt("click",(function(){m.eBV(e);const t=m.XpG();return m.Njj(t.addComponent())})),m.nrm(35,"system-button-icon",45),m.k0s()()(),m.j41(36,"div",46),m.DNE(37,Pl,1,1,"componentsetmanager-componentset-details",47),m.k0s()(),m.j41(38,"div",48)(39,"button",49),m.bIt("click",(function(){m.eBV(e);const t=m.XpG();return m.Njj(t.saveChanges())})),m.nrm(40,"system-label",50),m.k0s()()()}if(2&e){const e=m.XpG();m.R7$(7),m.Y8G("icon","global"==e.componentSetType?"world":"user"),m.R7$(),m.Y8G("ngModel",e.componentSetType),m.R7$(5),m.Y8G("disabled",!e.view.isEditMode()),m.R50("ngModel",e.currentComponentSetName),m.R7$(5),m.Y8G("disabled",!e.view.isEditMode()),m.R50("ngModel",e.currentComponentSetPackage),m.R7$(5),m.Y8G("disabled",!e.view.isEditMode()),m.R50("ngModel",e.currentComponentSetVersion),m.R7$(5),m.Y8G("ngModel",e.currentComponentSet),m.R7$(4),m.Y8G("ngForOf",e.getComponentSetItems()),m.R7$(2),m.Y8G("disabled",!e.view.isEditMode()),m.R7$(),m.Y8G("icon","new"),m.R7$(2),m.Y8G("ngIf",e.selectedId),m.R7$(2),m.Y8G("disabled",!e.view.isEditMode())}}let Wl=(()=>{class ComponentsetManager{constructor(e,t,s,i,n,l,o,a,d){this.backend=e,this.metadata=t,this.language=s,this.modelutilities=i,this.broadcast=n,this.toast=l,this.modalservice=o,this.view=a,this.configurationService=d,this.edit_mode="custom",this.allowBarButtons=!0,this.change_request_required=!1,this.modules=[],this.currentModule="*",this.currentComponentSet="",this.currentComponentSetItems=[],this.selectedId="",this.selectedComponent={},this.showAddDialog=!1,this.showComponentsetDetails=!1,this.modules=this.metadata.getModules(),this.modules.sort(),this.checkMode()}checkMode(){this.edit_mode=this.configurationService.getCapabilityConfig("core").edit_mode,this.change_request_required=!!this.configurationService.getCapabilityConfig("systemdeployment").change_request_required,"none"!=this.edit_mode&&"custom"!=this.edit_mode&&"all"!=this.edit_mode&&(this.edit_mode="custom"),this.change_request_required?this.backend.getRequest("module/SystemDeploymentCRs/active").subscribe((e=>{""==e.id?(this.setNoneMode(),this.toast.sendToast(this.language.getLabel("LBL_ACTIVATE_CR_WARNING"),"warning",null,3)):"all"==this.edit_mode?this.setAllMode():"custom"==this.edit_mode?this.setCustomMode():this.setNoneMode()})):"all"==this.edit_mode?this.setAllMode():"custom"==this.edit_mode?this.setCustomMode():this.setNoneMode()}setNoneMode(){this.view.setViewMode(),this.allowBarButtons=!1}setCustomMode(){"custom"==this.componentSetType?this.view.setEditMode():this.view.setViewMode()}setAllMode(){this.view.setEditMode()}get showDetailIcon(){return this.showComponentsetDetails?"chevronup":"chevrondown"}toggleDetail(){this.showComponentsetDetails=!this.showComponentsetDetails}get componentSetType(){return this.currentComponentSet?this.metadata.getComponentSet(this.currentComponentSet).type:""}get currentComponentSetPackage(){return this.metadata.getComponentSet(this.currentComponentSet).package}set currentComponentSetPackage(e){this.metadata.getComponentSet(this.currentComponentSet).package=e}get currentComponentSetVersion(){return this.metadata.getComponentSet(this.currentComponentSet).version}set currentComponentSetVersion(e){this.metadata.getComponentSet(this.currentComponentSet).version=e}get currentComponentSetName(){return this.metadata.getComponentSet(this.currentComponentSet).name}set currentComponentSetName(e){this.metadata.getComponentSet(this.currentComponentSet).name=e}componentDeprecated(e){if(!e||e&&!e.component)return!1;return"1"==this.metadata.getSystemComponents(e.module).find((t=>t.component===e.component)).deprecated}getComponentSetItemName(e){return e.componentconfig.name?`(${this.language.getLabel(e.componentconfig.name)})`:e.componentconfig.object?`(${this.language.getModuleName(e.componentconfig.object)})`:void 0}getComponentSets(e){if(e){let t=[],s=this.metadata.getComponentSets(this.currentModule);for(let i of s)i.type==e&&t.push(i);return t}return this.metadata.getComponentSets(this.currentModule)}getComponentSetItems(){return this.currentComponentSet?this.metadata.getComponentSetObjects(this.currentComponentSet):[]}selectItem(e){this.selectedId=e.id,this.selectedComponent=e}isSelected(e){return e==this.selectedId}getComponentsetConfig(){if(this.selectedComponent.componentconfig)return JSON.stringify(this.selectedComponent.componentconfig)}reset(){this.selectedId="",this.selectedComponent={},this.currentComponentSet=""}selectComponentSet(){this.checkMode(),this.selectedId="",this.selectedComponent={}}addComponent(){this.showAddDialog=!0,this.modalservice.openModal("ComponentsetManagerAddDialog").subscribe((e=>{e.instance.module=this.currentModule,e.instance.parent=this.currentComponentSet}))}addComponentset(){this.editComponentset()}duplicateComponentset(){let e=this.currentComponentSet;this.editComponentset(!0).subscribe({next:t=>{let s=this.metadata.getComponentSetObjects(e);for(let e of s)this.metadata.addComponentToComponentset(this.modelutilities.generateGuid(),t.id,e.component,e.componentconfig);this.saveChanges()}})}editComponentset(e=!1){let t=new h.B;return this.modalservice.openModal("ComponentsetManagerEditDialog").subscribe((s=>{s.instance.componentset=this.currentComponentSet,s.instance.edit_mode=this.edit_mode,s.instance.showModuleField=e,s.instance.module=this.currentModule,s.instance.closedialog.subscribe((s=>{if(!1!==s)if(this.reset(),""===this.currentComponentSet){let i=this.modelutilities.generateGuid();e&&(this.currentModule=s.module),this.metadata.addComponentSet(i,this.currentModule,s.name,s.type),this.currentComponentSet=i,this.checkMode(),t.next({id:i,type:s.type})}else{this.metadata.getComponentSet(this.currentComponentSet).name=s.name}t.complete()}))})),t.asObservable()}deleteComponent(e){let t=this.metadata.getComponentSetObjects(this.currentComponentSet);t.splice(t.findIndex((t=>t.id==e.id)),1)}drop(e){let t=this.metadata.getComponentSetObjects(this.currentComponentSet);t.splice(e.currentIndex,0,t.splice(e.previousIndex,1)[0]);let s=0;for(let e of t)e.sequence=s,s++}saveChanges(){this.backend.getRequest("configuration/spiceui/core/components").subscribe((e=>{let t=this.metadata.getRawComponentSets(),s={},i={},n={};for(let n in t)e.componentsets[n]?(JSON.stringify(t[n])!==JSON.stringify(e.componentsets[n])&&(i[n]=t[n]),delete e.componentsets[n]):s[n]=t[n];n=e.componentsets;let l={add:s,update:i,delete:n};this.backend.postRequest("configuration/spiceui/core/componentsets",{},l).subscribe((e=>{this.configurationService.setData("componentsets",t),this.toast.sendToast("changes saved")}))}))}static#e=this.ɵfac=function(e){return new(e||ComponentsetManager)(m.rXU(p.H),m.rXU(f.yu),m.rXU(b.B),m.rXU(y.g),m.rXU(Mi.m),m.rXU(v.o),m.rXU(R.y),m.rXU(_n.U),m.rXU(M.i))};static#t=this.ɵcmp=m.VBU({type:ComponentsetManager,selectors:[["componentset-manager"]],features:[m.Jv_([_n.U])],decls:26,vars:12,consts:[["titlelabel","LBL_COMPONENTSETSET_MANAGER"],[1,"slds-p-around--small","slds-border--bottom"],[1,"slds-grid","slds-grid--vertical-align-center","slds-form--inline"],[1,"slds-form-element"],[1,"slds-form-element__label"],["label","LBL_MODULE"],[1,"slds-form-element__control"],[1,"slds-select_container",2,"min-width","250px"],[1,"slds-select",3,"ngModel","disabled","ngModelChange","change"],["value","*"],[3,"value",4,"ngFor","ngForOf"],[1,"slds-form-element__control",2,"min-width","250px"],[1,"slds-select_container"],["label","custom Componentsets",4,"ngIf"],["label","global Componentsets",4,"ngIf"],[1,"slds-button-group","slds-col--bump-left"],["type","button","class","slds-button slds-button_icon slds-button_icon-border-filled",3,"disabled","click",4,"ngIf"],["type","button",1,"slds-button","slds-button_icon","slds-button_icon-border-filled",3,"disabled","click"],[3,"icon","size"],["class","slds-theme--default",4,"ngIf"],[3,"value"],["label","custom Componentsets"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"],["label","global Componentsets"],["icon","copy","size","x-small"],[1,"slds-theme--default"],[1,"slds-p-around--small","slds-border--bottom","slds-theme--default"],[1,"slds-grid","slds-grid--vertical-align-end"],[1,"slds-form-element","slds-p-right--x-small","slds-size--1-of-5"],["label","LBL_SCOPE"],[1,"slds-form-element__control","slds-input-has-icon","slds-input-has-icon_left"],["addclasses","slds-icon slds-input__icon slds-input__icon_left slds-icon-text-default",3,"icon"],["type","text","disabled","",1,"slds-input",3,"ngModel"],["label","LBL_NAME"],["type","text",1,"slds-input",3,"disabled","ngModel","ngModelChange"],["label","LBL_PACKAGE"],["label","LBL_VERSION"],["label","LBL_ID"],[1,"slds-grid"],[1,"slds-size--2-of-5","slds-p-horizontal--small","slds-p-top--x-small","slds-border--right"],["role","application","cdkDropList","",1,"dragboundary",2,"max-width","none",3,"cdkDropListDropped"],["class","slds-p-vertical--xx-small slds-grid slds-grid--align-spread slds-grid--vertical-align-center","cdkDrag","","cdkDragBoundary",".dragboundary",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"slds-p-around--small","slds-align--absolute-center","slds-border--top","slds-m-top--small"],["title","add item",1,"slds-button","slds-button--icon",3,"disabled","click"],[3,"icon"],[1,"slds-size--3-of-5","slds-p-horizontal--small","slds-p-vertical--x-small"],[3,"component",4,"ngIf"],[1,"slds-text-align--right","slds-p-around--small","slds-border--top"],["type","button",1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_SAVE"],["cdkDrag","","cdkDragBoundary",".dragboundary",1,"slds-p-vertical--xx-small","slds-grid","slds-grid--align-spread","slds-grid--vertical-align-center",3,"ngClass","click"],["cdkDragHandle","",1,"slds-p-right--xx-small",2,"cursor","move",3,"icon","size"],["href","javascript:void(0);","role","presentation","class","slds-truncate",4,"ngIf"],["class","slds-clearfix",4,"ngIf"],[1,"slds-col--bump-left"],["title","unlink item",1,"slds-button","slds-button--icon",3,"disabled","click"],["href","javascript:void(0);","role","presentation",1,"slds-truncate"],[1,"slds-clearfix"],[1,"slds-float_left",3,"icon","sprite","size","addclasses"],[1,"slds-float_left"],[3,"component"]],template:function(e,t){1&e&&(m.nrm(0,"workbench-header",0),m.j41(1,"div",1)(2,"div",2)(3,"div",3)(4,"label",4),m.nrm(5,"system-label",5),m.k0s(),m.j41(6,"div",6)(7,"div",7)(8,"select",8),m.mxI("ngModelChange",(function(e){return m.DH7(t.currentModule,e)||(t.currentModule=e),e})),m.bIt("change",(function(){return t.reset()})),m.j41(9,"option",9),m.EFF(10,"*"),m.k0s(),m.DNE(11,Tl,2,2,"option",10),m.k0s()()()(),m.j41(12,"div",3)(13,"label",4),m.EFF(14,"Componentset"),m.k0s(),m.j41(15,"div",11)(16,"div",12)(17,"select",8),m.mxI("ngModelChange",(function(e){return m.DH7(t.currentComponentSet,e)||(t.currentComponentSet=e),e})),m.bIt("change",(function(){return t.selectComponentSet()})),m.nrm(18,"option"),m.DNE(19,Yl,2,1,"optgroup",13)(20,Xl,2,1,"optgroup",14),m.k0s()()()(),m.j41(21,"div",15),m.DNE(22,Vl,2,1,"button",16),m.j41(23,"button",17),m.bIt("click",(function(){return t.addComponentset()})),m.nrm(24,"system-utility-icon",18),m.k0s()()()(),m.DNE(25,Jl,41,14,"div",19)),2&e&&(m.R7$(8),m.R50("ngModel",t.currentModule),m.Y8G("disabled",0==t.modules.length),m.R7$(3),m.Y8G("ngForOf",t.modules),m.R7$(6),m.R50("ngModel",t.currentComponentSet),m.Y8G("disabled",0==t.getComponentSets().length),m.R7$(2),m.Y8G("ngIf",t.getComponentSets("custom").length>0),m.R7$(),m.Y8G("ngIf",t.getComponentSets("global").length>0),m.R7$(2),m.Y8G("ngIf",t.currentComponentSet),m.R7$(),m.Y8G("disabled",!t.allowBarButtons),m.R7$(),m.Y8G("icon","add")("size","x-small"),m.R7$(),m.Y8G("ngIf",t.currentComponentSet))},dependencies:[i.YU,i.Sq,i.bT,n.xH,n.y7,n.me,n.wz,n.BC,n.vS,L.t,Ne.J,x.W,u.B,c.O7,c.T1,c.Fb,wl,Te],encapsulation:2})}return ComponentsetManager})();function Kl(e,t){if(1&e&&(m.j41(0,"option",20),m.EFF(1),m.k0s()),2&e){const e=t.$implicit;m.Y8G("value",e.id),m.R7$(),m.JRh(e.module)}}function Ql(e,t){if(1&e){const e=m.RV6();m.j41(0,"option",21),m.bIt("dblclick",(function(){m.eBV(e);const t=m.XpG();return m.Njj(t.add())})),m.EFF(1),m.k0s()}if(2&e){const e=t.$implicit,s=m.XpG();m.Y8G("value",e.component),m.R7$(),m.JRh(s.componentName(e))}}function Zl(e,t){1&e&&(m.j41(0,"div",22)(1,"span",23),m.EFF(2,"warning"),m.k0s(),m.j41(3,"span",24),m.qSk(),m.j41(4,"svg",25),m.nrm(5,"use",26),m.k0s()(),m.joV(),m.j41(6,"h2"),m.nrm(7,"system-label",27),m.k0s()())}let eo=(()=>{class ComponentsetManagerAddDialog{constructor(e,t,s,i){this.backend=e,this.metadata=t,this.language=s,this.modelutilities=i,this.module="",this.parent="",this.component="",this.systemmodule="",this.systemmodules=[],this.showDeprecatedWarning=!1,this.systemmodules=this.metadata.getSystemModules()}get components(){return this.componentFilter?this.metadata.getSystemComponents(this.systemmodule).filter((e=>e.component.toLowerCase().indexOf(this.componentFilter.toLowerCase())>=0)):this.metadata.getSystemComponents(this.systemmodule)}get filteredmodules(){return this.moduleFilter?this.systemmodules.filter((e=>e.module.toLowerCase().indexOf(this.moduleFilter.toLowerCase())>=0)):this.systemmodules}componentName(e){return e?"1"==e.deprecated?e.component+" | dep.":e.component:""}cancelDialog(){this.self.destroy()}onModalEscX(){this.cancelDialog()}add(){this.metadata.addComponentToComponentset(this.modelutilities.generateGuid(),this.parent,this.component),this.self.destroy()}checkDep(e){"1"==this.components.find((t=>t.component===e)).deprecated?this.showDeprecatedWarning=!0:this.showDeprecatedWarning=!1}static#e=this.ɵfac=function(e){return new(e||ComponentsetManagerAddDialog)(m.rXU(p.H),m.rXU(f.yu),m.rXU(b.B),m.rXU(y.g))};static#t=this.ɵcmp=m.VBU({type:ComponentsetManagerAddDialog,selectors:[["componensetmanager-add-dialog"]],inputs:{module:"module",parent:"parent"},decls:27,vars:8,consts:[["size","medium"],[3,"close"],["label","LBL_ADD_COMPONENT"],[1,"slds-grid"],[1,"slds-form-element","slds-size--1-of-2","slds-p-right--xx-small"],[1,"slds-form-element__label"],["label","LBL_MODULE"],[1,"slds-input","slds-m-bottom--small",3,"ngModel","ngModelChange"],[1,"slds-form-element__control"],[1,"slds-select_container"],["size","20",1,"slds-select",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"slds-form-element","slds-size--1-of-2","slds-p-left--xx-small"],["label","LBL_COMPONENT"],[3,"value","dblclick",4,"ngFor","ngForOf"],["class","slds-notify slds-notify_alert slds-theme_alert-texture slds-theme_warning","role","alert",4,"ngIf"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_ADD"],[3,"value"],[3,"value","dblclick"],["role","alert",1,"slds-notify","slds-notify_alert","slds-theme_alert-texture","slds-theme_warning"],[1,"slds-assistive-text"],["title","Description of icon when needed",1,"slds-icon_container","slds-icon-utility-warning","slds-m-right_x-small"],["aria-hidden","true",1,"slds-icon","slds-icon_x-small"],[0,"xlink","href","/assets/icons/utility-sprite/svg/symbols.svg#warning"],["label","LBL_DEPRECATED_MSG"]],template:function(e,t){1&e&&(m.j41(0,"system-modal",0)(1,"system-modal-header",1),m.bIt("close",(function(){return t.cancelDialog()})),m.nrm(2,"system-label",2),m.k0s(),m.j41(3,"system-modal-content")(4,"div",3)(5,"div",4)(6,"label",5),m.nrm(7,"system-label",6),m.k0s(),m.j41(8,"input",7),m.mxI("ngModelChange",(function(e){return m.DH7(t.moduleFilter,e)||(t.moduleFilter=e),e})),m.k0s(),m.j41(9,"div",8)(10,"div",9)(11,"select",10),m.mxI("ngModelChange",(function(e){return m.DH7(t.systemmodule,e)||(t.systemmodule=e),e})),m.DNE(12,Kl,2,2,"option",11),m.k0s()()()(),m.j41(13,"div",12)(14,"label",5),m.nrm(15,"system-label",13),m.k0s(),m.j41(16,"input",7),m.mxI("ngModelChange",(function(e){return m.DH7(t.componentFilter,e)||(t.componentFilter=e),e})),m.k0s(),m.j41(17,"div",8)(18,"div",9)(19,"select",10),m.mxI("ngModelChange",(function(e){return m.DH7(t.component,e)||(t.component=e),e})),m.bIt("ngModelChange",(function(){return t.checkDep(t.component)})),m.DNE(20,Ql,2,2,"option",14),m.k0s()()()()(),m.DNE(21,Zl,8,0,"div",15),m.k0s(),m.j41(22,"system-modal-footer")(23,"button",16),m.bIt("click",(function(){return t.cancelDialog()})),m.nrm(24,"system-label",17),m.k0s(),m.j41(25,"button",18),m.bIt("click",(function(){return t.add()})),m.nrm(26,"system-label",19),m.k0s()()()),2&e&&(m.R7$(8),m.R50("ngModel",t.moduleFilter),m.R7$(3),m.R50("ngModel",t.systemmodule),m.R7$(),m.Y8G("ngForOf",t.filteredmodules),m.R7$(4),m.R50("ngModel",t.componentFilter),m.R7$(3),m.R50("ngModel",t.component),m.R7$(),m.Y8G("ngForOf",t.components),m.R7$(),m.Y8G("ngIf",t.showDeprecatedWarning),m.R7$(4),m.Y8G("disabled",!t.component))},dependencies:[i.Sq,i.bT,n.xH,n.y7,n.me,n.wz,n.BC,n.vS,x.W,qe.D,Pe.I,Je.Q,We.C],encapsulation:2})}return ComponentsetManagerAddDialog})();var to=s(60940);function so(e,t){if(1&e){const e=m.RV6();m.j41(0,"div",12)(1,"label",9),m.EFF(2,"Module"),m.k0s(),m.j41(3,"system-input-module",22),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.module,t)||(s.module=t),m.Njj(t)})),m.k0s()()}if(2&e){const e=m.XpG();m.R7$(3),m.R50("ngModel",e.module),m.Y8G("displayAsterisk",!0)}}function io(e,t){1&e&&(m.j41(0,"option",23),m.EFF(1,"Global"),m.k0s())}let no=(()=>{class ComponentsetManagerEditDialog{constructor(e,t){this.metadata=e,this.language=t,this.closedialog=new m.bkB,this.componentset="",this.edit_mode="",this.componentsetname="",this.componentsettype="custom",this.module="*",this.showModuleField=!1}ngOnInit(){if(this.showModuleField){let e=this.metadata.getComponentSet(this.componentset);this.componentsetname=e.name+" (custom)"}}cancelDialog(){this.closedialog.emit(!1),this.self.destroy()}onModalEscX(){this.cancelDialog()}add(){this.closedialog.emit({name:this.componentsetname,type:this.componentsettype,module:this.module}),this.self.destroy()}static#e=this.ɵfac=function(e){return new(e||ComponentsetManagerEditDialog)(m.rXU(f.yu),m.rXU(b.B))};static#t=this.ɵcmp=m.VBU({type:ComponentsetManagerEditDialog,selectors:[["componensetmanager-edit-dialog"]],inputs:{componentset:"componentset",edit_mode:"edit_mode"},outputs:{closedialog:"closedialog"},decls:28,vars:6,consts:[["role","dialog","tabindex","-1","aria-labelledby","header43",1,"slds-modal","slds-fade-in-open"],[1,"slds-modal__container"],[1,"slds-modal__header","slds-theme--shade"],["title","Close",1,"slds-button","slds-modal__close","slds-button--icon-inverse",3,"click"],[3,"icon","size"],["id","header43",1,"slds-text-heading--medium"],[1,"slds-modal__content","slds-p-around--medium"],["class","slds-form-element",4,"ngIf"],[1,"slds-form-element","slds-m-top--small"],[1,"slds-form-element__label"],[1,"slds-form-element__control"],["type","text","placeholder","name",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-form-element"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],["value","global",4,"ngIf"],["value","custom"],[1,"slds-modal__footer"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_SAVE"],[3,"ngModel","displayAsterisk","ngModelChange"],["value","global"]],template:function(e,t){1&e&&(m.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),m.bIt("click",(function(){return t.cancelDialog()})),m.nrm(4,"system-button-icon",4),m.k0s(),m.j41(5,"h2",5),m.EFF(6,"Add Componentset"),m.k0s()(),m.j41(7,"div",6),m.DNE(8,so,4,2,"div",7),m.j41(9,"div",8)(10,"label",9),m.EFF(11,"Componentset Name"),m.k0s(),m.j41(12,"div",10)(13,"input",11),m.mxI("ngModelChange",(function(e){return m.DH7(t.componentsetname,e)||(t.componentsetname=e),e})),m.k0s()()(),m.j41(14,"div",12)(15,"label",9),m.EFF(16,"type"),m.k0s(),m.j41(17,"div",10)(18,"div",13)(19,"select",14),m.mxI("ngModelChange",(function(e){return m.DH7(t.componentsettype,e)||(t.componentsettype=e),e})),m.DNE(20,io,2,0,"option",15),m.j41(21,"option",16),m.EFF(22,"Custom"),m.k0s()()()()()(),m.j41(23,"div",17)(24,"button",18),m.bIt("click",(function(){return t.cancelDialog()})),m.nrm(25,"system-label",19),m.k0s(),m.j41(26,"button",20),m.bIt("click",(function(){return t.add()})),m.nrm(27,"system-label",21),m.k0s()()()()),2&e&&(m.R7$(4),m.Y8G("icon","close")("size","large"),m.R7$(4),m.Y8G("ngIf",t.showModuleField),m.R7$(5),m.R50("ngModel",t.componentsetname),m.R7$(6),m.R50("ngModel",t.componentsettype),m.R7$(),m.Y8G("ngIf","all"==t.edit_mode))},dependencies:[i.bT,n.xH,n.y7,n.me,n.wz,n.BC,n.vS,L.t,to.u,x.W],encapsulation:2})}return ComponentsetManagerEditDialog})();var lo=s(55480),oo=s(79413);function ao(e,t){if(1&e&&(m.j41(0,"option",20),m.EFF(1),m.k0s()),2&e){const e=t.$implicit;m.FS9("value",e),m.R7$(),m.JRh(e)}}function ro(e,t){if(1&e&&(m.j41(0,"option",20),m.EFF(1),m.k0s()),2&e){const e=t.$implicit;m.FS9("value",e.value),m.R7$(),m.JRh(e.display)}}function co(e,t){if(1&e){const e=m.RV6();m.j41(0,"tr",12)(1,"td")(2,"div",13)(3,"select",14),m.mxI("ngModelChange",(function(t){const s=m.eBV(e).$implicit;return m.DH7(s.fieldname,t)||(s.fieldname=t),m.Njj(t)})),m.DNE(4,ao,2,2,"option",15),m.k0s()()(),m.j41(5,"td")(6,"div",13)(7,"select",14),m.mxI("ngModelChange",(function(t){const s=m.eBV(e).$implicit;return m.DH7(s.comparator,t)||(s.comparator=t),m.Njj(t)})),m.DNE(8,ro,2,2,"option",15),m.k0s()()(),m.j41(9,"td")(10,"div",16)(11,"textarea",17),m.bIt("ngModelChange",(function(t){const s=m.eBV(e).$implicit;return m.Njj(s.valuations=t)})),m.nI1(12,"maybejson"),m.k0s()()(),m.j41(13,"td")(14,"button",18),m.bIt("click",(function(){const t=m.eBV(e).$implicit,s=m.XpG();return m.Njj(s.removeCondition(t.id))})),m.nrm(15,"system-button-icon",19),m.k0s()()()}if(2&e){const e=t.$implicit,s=m.XpG();m.R7$(3),m.R50("ngModel",e.fieldname),m.R7$(),m.Y8G("ngForOf",s.fieldname_options),m.R7$(3),m.R50("ngModel",e.comparator),m.R7$(),m.Y8G("ngForOf",s.comparator_options),m.R7$(3),m.Y8G("ngModel",m.bMT(12,7,e.valuations)),m.R7$(4),m.Y8G("icon","delete")("size","small")}}let mo=(()=>{class ValidationRulesConditions{constructor(e,t,s){this.metadata=e,this.language=t,this.utils=s,this.comparator_options=[],this.fieldname_options=[]}ngOnInit(){this.comparator_options=this.language.getDisplayOptions("comparators_dom",!0);for(let e in this.metadata.getModuleFields(this.data.module))this.fieldname_options.push(e);this.fieldname_options.sort(),this.data.conditions.sort(((e,t)=>!!e.fieldname&&e.fieldname.localeCompare(t.fieldname)))}get conditions(){return this.data.conditions.filter((e=>1!=e.deleted))}addCondition(){return this.data.conditions.push({id:this.utils.generateGuid(),sysuimodelvalidation_id:this.data.id,isnewrecord:!0})}removeCondition(e){let t=this.data.conditions.findIndex((t=>t.id==e));return this.data.conditions[t]._is_new_record?this.data.conditions.splice(t,1):this.data.conditions[t].deleted=1,!0}static#e=this.ɵfac=function(e){return new(e||ValidationRulesConditions)(m.rXU(f.yu),m.rXU(b.B),m.rXU(y.g))};static#t=this.ɵcmp=m.VBU({type:ValidationRulesConditions,selectors:[["validationrules-conditions"]],inputs:{data:"data"},decls:15,vars:1,consts:[[1,"slds-table","slds-table--bordered","slds-table--cell-buffer"],[1,"slds-text-title--caps"],["scope","col",2,"width","2rem"],["label","LBL_FIELD"],["scope","col",2,"width","1rem"],["label","LBL_OPERATOR"],["scope","col",2,"width","4rem"],["label","LBL_VALUE"],["class","slds-theme--shade",4,"ngFor","ngForOf"],[1,"slds-grid","slds-grid--align-spread","slds-p-around--medium"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_ADD"],[1,"slds-theme--shade"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"slds-form-element__control"],[1,"slds-textarea",3,"ngModel","ngModelChange"],[1,"slds-button","slds-button--negative",3,"click"],[3,"icon","size"],[3,"value"]],template:function(e,t){1&e&&(m.j41(0,"table",0)(1,"thead")(2,"tr",1)(3,"th",2),m.nrm(4,"system-label",3),m.k0s(),m.j41(5,"th",4),m.nrm(6,"system-label",5),m.k0s(),m.j41(7,"th",6),m.nrm(8,"system-label",7),m.k0s(),m.nrm(9,"th",4),m.k0s()(),m.j41(10,"tbody"),m.DNE(11,co,16,9,"tr",8),m.k0s()(),m.j41(12,"div",9)(13,"button",10),m.bIt("click",(function(){return t.addCondition()})),m.nrm(14,"system-label",11),m.k0s()()),2&e&&(m.R7$(11),m.Y8G("ngForOf",t.conditions))},encapsulation:2})}return ValidationRulesConditions})();function uo(e,t){if(1&e&&(m.j41(0,"option",18),m.EFF(1),m.k0s()),2&e){const e=t.$implicit;m.FS9("value",e),m.R7$(),m.JRh(e)}}function go(e,t){if(1&e&&(m.j41(0,"option",18),m.EFF(1),m.k0s()),2&e){const e=t.$implicit;m.FS9("value",e),m.R7$(),m.JRh(e)}}function ho(e,t){if(1&e){const e=m.RV6();m.j41(0,"tr",9)(1,"td")(2,"div",10)(3,"select",11),m.mxI("ngModelChange",(function(t){const s=m.eBV(e).$implicit;return m.DH7(s.fieldname,t)||(s.fieldname=t),m.Njj(t)})),m.nrm(4,"option"),m.DNE(5,uo,2,2,"option",12),m.k0s()()(),m.j41(6,"td")(7,"div",10)(8,"select",11),m.mxI("ngModelChange",(function(t){const s=m.eBV(e).$implicit;return m.DH7(s.action,t)||(s.action=t),m.Njj(t)})),m.DNE(9,go,2,2,"option",12),m.k0s()()(),m.j41(10,"td")(11,"div",13)(12,"textarea",14),m.bIt("ngModelChange",(function(t){const s=m.eBV(e).$implicit;return m.Njj(s.params=t)})),m.nI1(13,"maybejson"),m.k0s()()(),m.j41(14,"td")(15,"div",13)(16,"input",15),m.mxI("ngModelChange",(function(t){const s=m.eBV(e).$implicit;return m.DH7(s.priority,t)||(s.priority=t),m.Njj(t)})),m.k0s()()(),m.j41(17,"td")(18,"button",16),m.bIt("click",(function(){const t=m.eBV(e).$implicit,s=m.XpG();return m.Njj(s.removeAction(t.id))})),m.nrm(19,"system-button-icon",17),m.k0s()()()}if(2&e){const e=t.$implicit,s=m.XpG();m.R7$(3),m.R50("ngModel",e.fieldname),m.R7$(2),m.Y8G("ngForOf",s.fieldname_options),m.R7$(3),m.R50("ngModel",e.action),m.R7$(),m.Y8G("ngForOf",s.action_options),m.R7$(3),m.Y8G("ngModel",m.bMT(13,8,e.params)),m.R7$(4),m.R50("ngModel",e.priority),m.R7$(3),m.Y8G("icon","delete")("size","small")}}let po=(()=>{class ValidationRulesActions{constructor(e,t,s){this.metadata=e,this.language=t,this.utils=s,this.action_options=["set_value","set_value_from_field","set_value_from_user","set_model_state","set_model_alert","set_stati","set_message","error","warning","notice","hide","show","require","readonly"],this.fieldname_options=[]}ngOnInit(){for(let e in this.metadata.getModuleFields(this.data.module))this.fieldname_options.push(e);this.fieldname_options.sort(),this.data.actions.sort(((e,t)=>!!e.fieldname&&e.fieldname.localeCompare(t.fieldname)))}get actions(){return this.data.actions.filter((e=>1!=e.deleted))}addAction(){return this.data.actions.push({id:this.utils.generateGuid(),sysuimodelvalidation_id:this.data.id,isnewrecord:!0})}removeAction(e){let t=this.data.actions.findIndex((t=>t.id==e));return this.data.actions[t].isnewrecord?this.data.actions.splice(t,1):this.data.actions[t].deleted=1,!0}static#e=this.ɵfac=function(e){return new(e||ValidationRulesActions)(m.rXU(f.yu),m.rXU(b.B),m.rXU(y.g))};static#t=this.ɵcmp=m.VBU({type:ValidationRulesActions,selectors:[["validationrules-actions"]],inputs:{data:"data"},decls:17,vars:1,consts:[[1,"slds-table","slds-table--bordered","slds-table--cell-buffer"],[1,"slds-text-title--caps"],["scope","col",2,"width","2rem"],["scope","col",2,"width","1rem"],["scope","col",2,"width","4rem"],["class","slds-theme--shade",4,"ngFor","ngForOf"],[1,"slds-grid","slds-grid--align-spread","slds-p-around--medium"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_ADD"],[1,"slds-theme--shade"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"slds-form-element__control"],[1,"slds-textarea",3,"ngModel","ngModelChange"],["type","number","min","0","max","99",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-button","slds-button--negative",3,"click"],[3,"icon","size"],[3,"value"]],template:function(e,t){1&e&&(m.j41(0,"table",0)(1,"thead")(2,"tr",1)(3,"th",2),m.EFF(4,"Fieldname"),m.k0s(),m.j41(5,"th",3),m.EFF(6,"Action"),m.k0s(),m.j41(7,"th",4),m.EFF(8,"Parameter(s)"),m.k0s(),m.j41(9,"th",3),m.EFF(10,"Priority"),m.k0s(),m.nrm(11,"th",3),m.k0s()(),m.j41(12,"tbody"),m.DNE(13,ho,20,10,"tr",5),m.k0s()(),m.j41(14,"div",6)(15,"button",7),m.bIt("click",(function(){return t.addAction()})),m.nrm(16,"system-label",8),m.k0s()()),2&e&&(m.R7$(13),m.Y8G("ngForOf",t.actions))},encapsulation:2})}return ValidationRulesActions})();function fo(e,t){if(1&e&&(m.j41(0,"option",12),m.EFF(1),m.k0s()),2&e){const e=t.$implicit;m.Y8G("value",e),m.R7$(),m.JRh(e)}}const bo=e=>({"slds-text-color_error":e});function yo(e,t){if(1&e&&(m.j41(0,"option",15),m.EFF(1),m.k0s()),2&e){const e=t.$implicit;m.Y8G("value",e.id)("ngClass",m.eq3(3,bo,!e.active)),m.R7$(),m.JRh(e.name)}}function _o(e,t){if(1&e){const e=m.RV6();m.j41(0,"div",2)(1,"label",3),m.nrm(2,"system-label",13),m.k0s(),m.j41(3,"div",5)(4,"div",6)(5,"select",7),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.current_rule,t)||(s.current_rule=t),m.Njj(t)})),m.nrm(6,"option"),m.DNE(7,yo,2,5,"option",14),m.k0s()()()()}if(2&e){const e=m.XpG();m.R7$(5),m.R50("ngModel",e.current_rule),m.R7$(2),m.Y8G("ngForOf",e.rules)}}function ko(e,t){if(1&e){const e=m.RV6();m.j41(0,"div",16)(1,"div",17)(2,"button",18),m.bIt("click",(function(){m.eBV(e);const t=m.XpG();return m.Njj(t.addValidationRule())})),m.nrm(3,"system-label",19),m.k0s(),m.j41(4,"button",20),m.bIt("click",(function(){m.eBV(e);const t=m.XpG();return m.Njj(t.removeCurrentValidationRule())})),m.nrm(5,"system-label",21),m.k0s(),m.j41(6,"button",20),m.bIt("click",(function(){m.eBV(e);const t=m.XpG();return m.Njj(t.cancel())})),m.nrm(7,"system-label",22),m.k0s(),m.j41(8,"button",23),m.bIt("click",(function(){m.eBV(e);const t=m.XpG();return m.Njj(t.save())})),m.nrm(9,"system-label",24),m.k0s()()()}if(2&e){const e=m.XpG();m.R7$(4),m.Y8G("disabled",!e.current_rule),m.R7$(2),m.Y8G("disabled",!e.current_rule),m.R7$(2),m.Y8G("disabled",!e.current_rule)}}function vo(e,t){if(1&e&&(m.j41(0,"option",12),m.EFF(1),m.k0s()),2&e){const e=t.$implicit;m.FS9("value",e.value),m.R7$(),m.JRh(e.display)}}function Ro(e,t){if(1&e){const e=m.RV6();m.j41(0,"div",36)(1,"div",37)(2,"div",38)(3,"label",3),m.nrm(4,"system-label",39),m.k0s(),m.j41(5,"div",40)(6,"input",41),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG(2);return m.DH7(s.current_rule_data.name,t)||(s.current_rule_data.name=t),m.Njj(t)})),m.k0s()()(),m.j41(7,"div",42)(8,"div",43)(9,"label",3),m.nrm(10,"system-label",44),m.k0s(),m.j41(11,"div",40)(12,"system-checkbox",45),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG(2);return m.DH7(s.current_rule_data.active,t)||(s.current_rule_data.active=t),m.Njj(t)})),m.k0s()()(),m.j41(13,"div",2)(14,"label",3),m.nrm(15,"system-label",46),m.k0s(),m.j41(16,"system-checkbox-group",47),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG(2);return m.DH7(s.current_rule_data.onevents,t)||(s.current_rule_data.onevents=t),m.Njj(t)})),m.j41(17,"system-checkbox-group-checkbox",48),m.nrm(18,"system-label",49),m.k0s(),m.j41(19,"system-checkbox-group-checkbox",50),m.nrm(20,"system-label",51),m.k0s()()()(),m.j41(21,"div",38)(22,"label",3),m.nrm(23,"system-label",52),m.k0s(),m.j41(24,"div",40)(25,"select",7),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG(2);return m.DH7(s.current_rule_data.logicoperator,t)||(s.current_rule_data.logicoperator=t),m.Njj(t)})),m.DNE(26,vo,2,2,"option",8),m.k0s()()(),m.j41(27,"div",38)(28,"label",3),m.nrm(29,"system-label",53),m.k0s(),m.j41(30,"div",40)(31,"input",54),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG(2);return m.DH7(s.current_rule_data.priority,t)||(s.current_rule_data.priority=t),m.Njj(t)})),m.k0s()()()()()}if(2&e){const e=m.XpG(2);m.R7$(6),m.R50("ngModel",e.current_rule_data.name),m.R7$(6),m.R50("ngModel",e.current_rule_data.active),m.R7$(4),m.R50("ngModel",e.current_rule_data.onevents),m.R7$(9),m.R50("ngModel",e.current_rule_data.logicoperator),m.R7$(),m.Y8G("ngForOf",e.logicoperator_options),m.R7$(5),m.R50("ngModel",e.current_rule_data.priority)}}function Mo(e,t){if(1&e&&(m.j41(0,"div",55),m.nrm(1,"validationrules-conditions",56),m.k0s()),2&e){const e=m.XpG(2);m.R7$(),m.Y8G("data",e.current_rule_data)}}function jo(e,t){if(1&e&&(m.j41(0,"div",57),m.nrm(1,"validationrules-actions",56),m.k0s()),2&e){const e=m.XpG(2);m.R7$(),m.Y8G("data",e.current_rule_data)}}const Lo=e=>({"slds-active":e});function xo(e,t){if(1&e){const e=m.RV6();m.j41(0,"div",25)(1,"div",26)(2,"ul",27)(3,"li",28),m.bIt("click",(function(){m.eBV(e);const t=m.XpG();return m.Njj(t.current_tab="details")})),m.j41(4,"a",29),m.nrm(5,"system-label",30),m.k0s()(),m.j41(6,"li",28),m.bIt("click",(function(){m.eBV(e);const t=m.XpG();return m.Njj(t.current_tab="conditions")})),m.j41(7,"a",29),m.nrm(8,"system-label",31),m.k0s()(),m.j41(9,"li",28),m.bIt("click",(function(){m.eBV(e);const t=m.XpG();return m.Njj(t.current_tab="actions")})),m.j41(10,"a",29),m.nrm(11,"system-label",32),m.k0s()()(),m.DNE(12,Ro,32,6,"div",33)(13,Mo,2,1,"div",34)(14,jo,2,1,"div",35),m.k0s()()}if(2&e){const e=m.XpG();m.R7$(3),m.Y8G("ngClass",m.eq3(6,Lo,"details"==e.current_tab||!e.current_tab)),m.R7$(3),m.Y8G("ngClass",m.eq3(8,Lo,"conditions"==e.current_tab)),m.R7$(3),m.Y8G("ngClass",m.eq3(10,Lo,"actions"==e.current_tab)),m.R7$(3),m.Y8G("ngIf","details"==e.current_tab),m.R7$(),m.Y8G("ngIf","conditions"==e.current_tab),m.R7$(),m.Y8G("ngIf","actions"==e.current_tab)}}let Io=(()=>{class ValidationRulesManager{constructor(e,t,s,i,n,l){this.backend=e,this.metadata=t,this.language=s,this.utils=i,this.toast=n,this.configurationService=l,this.rules=[],this._backup_rules=[],this._current_rule_data={},this.logicoperator_options=[],this.current_tab="details",this.logicoperator_options=this.language.getDisplayOptions("logicoperators_dom",!0)}get modules(){return this.metadata.getModules().sort()}set current_module(e){this._current_module=e,this.rules=this.metadata.getModuleValidations(e),this.rules.sort(((e,t)=>e.name.localeCompare(t.name))),this.copyRulesToBackup(),this.current_rule=null}get current_module(){return this._current_module}get current_rule(){return this._current_rule}set current_rule(e){this._current_rule=e,this._current_rule_data=this.getCurrentRuleData()}get current_rule_data(){return this._current_rule_data}getCurrentRuleData(){if(this.rules){const e=this.rules.find((e=>e.id==this._current_rule));return e?.onevents&&"string"==typeof e.onevents&&(e.onevents=e.onevents.split(",")),e}return""}removeCurrentValidationRule(){this.backend.deleteRequest("configuration/spiceui/core/modelvalidations/"+this.current_rule).subscribe((e=>(this.toast.sendToast("rule removed"),this.removeRule(this.current_rule),this.configurationService.reloadTaskData("validationrules"),!0)),(e=>(this.toast.sendToast("removing rule failed!"),console.error(e),!1)))}save(){let e=this.current_rule_data;Array.isArray(e.onevents)&&(e.onevents=e.onevents.join(",")),this.backend.postRequest("configuration/spiceui/core/modelvalidations",{},e).subscribe((t=>{this.current_rule_data.isnewrecord=!1;let s=this._backup_rules.findIndex((e=>e.id==this._current_rule));this._backup_rules[s]={...e},this.rules.sort(((e,t)=>e.name.localeCompare(t.name))),this.configurationService.reloadTaskData("validationrules"),this.toast.sendToast("changes saved")}),(e=>{this.toast.sendAlert("saving changes failed!"),console.error(e)}))}cancel(){this.current_rule_data.isnewrecord?this.removeRule(this.current_rule):this.resetCurrentRuleData()}addValidationRule(){this.rules.push({id:this.utils.generateGuid(),module:this.current_module,active:1,actions:[],conditions:[],isnewrecord:!0}),this.current_rule=this.rules[this.rules.length-1].id}removeRule(e=this.current_rule){let t=this.rules.findIndex((t=>t.id==e));return this.rules.splice(t,1),this.current_rule==e&&(this.current_rule=null),!0}resetCurrentRuleData(){let e=this._backup_rules.find((e=>e.id==this._current_rule));this._current_rule_data={...e}}copyRulesToBackup(){this._backup_rules=[];for(let e of this.rules)this._backup_rules.push({...e})}static#e=this.ɵfac=function(e){return new(e||ValidationRulesManager)(m.rXU(p.H),m.rXU(f.yu),m.rXU(b.B),m.rXU(y.g),m.rXU(v.o),m.rXU(M.i))};static#t=this.ɵcmp=m.VBU({type:ValidationRulesManager,selectors:[["validation-rules-manager"]],decls:13,vars:5,consts:[["titlelabel","LBL_VALIDATIONRULES_MANAGER"],[1,"slds-grid","slds-form--inline","slds-p-around--small","slds-border--bottom"],[1,"slds-form-element"],[1,"slds-form-element__label"],["label","LBL_MODULE"],[1,"slds-form-element__control",2,"min-width","250px"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["class","slds-form-element",4,"ngIf"],["class","slds-form-element slds-col--bump-left",4,"ngIf"],["class","slds-grid",4,"ngIf"],[3,"value"],["label","LBL_RULE"],[3,"value","ngClass",4,"ngFor","ngForOf"],[3,"value","ngClass"],[1,"slds-form-element","slds-col--bump-left"],["role","group",1,"slds-button-group"],["type","button",1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_ADD"],["type","button",1,"slds-button","slds-button--neutral",3,"disabled","click"],["label","LBL_DELETE"],["label","LBL_CANCEL"],["type","button",1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_SAVE"],[1,"slds-grid"],[1,"slds-tabs_default"],["role","tablist",1,"slds-tabs_default__nav"],["role","presentation",1,"slds-tabs--default__item","slds-text-title--caps",3,"ngClass","click"],["href","javascript:void(0);","role","tab","aria-selected","false",1,"slds-tabs--default__link"],["label","LBL_DETAILS"],["label","LBL_CONDITIONS"],["label","LBL_ACTIONS"],["id","tab-default-1","class","slds-tabs_default__content","role","tabpanel",4,"ngIf"],["id","tab-default-2","class","slds-tabs_default__content","role","tabpanel",4,"ngIf"],["id","tab-default-3","class","slds-tabs_default__content","role","tabpanel",4,"ngIf"],["id","tab-default-1","role","tabpanel",1,"slds-tabs_default__content"],[1,"slds-size--3-of-5","slds-p-horizontal--small","slds-p-top--x-small"],[1,"slds-form-element","slds-m-vertical--xxx-small"],["label","LBL_NAME"],[1,"slds-form-element__control"],["type","text",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-grid","slds-m-vertical--small"],[1,"slds-form-element","slds-m-right_xx-large"],["label","LBL_ACTIVE"],[3,"ngModel","ngModelChange"],["label","LBL_ON_EVENTS"],[1,"spice-display-block",3,"ngModel","ngModelChange"],["value","initialize"],["label","LBL_INITIALIZE"],["value","change"],["label","LBL_CHANGE"],["label","LBL_OPERATOR"],["label","LBL_PRIORITY"],["type","number","min","0","max","99",1,"slds-input",3,"ngModel","ngModelChange"],["id","tab-default-2","role","tabpanel",1,"slds-tabs_default__content"],[3,"data"],["id","tab-default-3","role","tabpanel",1,"slds-tabs_default__content"]],template:function(e,t){1&e&&(m.nrm(0,"workbench-header",0),m.j41(1,"div",1)(2,"div",2)(3,"label",3),m.nrm(4,"system-label",4),m.k0s(),m.j41(5,"div",5)(6,"div",6)(7,"select",7),m.mxI("ngModelChange",(function(e){return m.DH7(t.current_module,e)||(t.current_module=e),e})),m.nrm(8,"option"),m.DNE(9,fo,2,2,"option",8),m.k0s()()()(),m.DNE(10,_o,8,2,"div",9)(11,ko,10,3,"div",10),m.k0s(),m.DNE(12,xo,15,12,"div",11)),2&e&&(m.R7$(7),m.R50("ngModel",t.current_module),m.R7$(2),m.Y8G("ngForOf",t.modules),m.R7$(),m.Y8G("ngIf",t.current_module),m.R7$(),m.Y8G("ngIf",t.current_module),m.R7$(),m.Y8G("ngIf",t.current_rule))},dependencies:[i.YU,i.Sq,i.bT,n.xH,n.y7,n.me,n.Q0,n.wz,n.BC,n.VZ,n.zX,n.vS,be.f,lo.G,oo.h,x.W,Te,mo,po],encapsulation:2})}return ValidationRulesManager})(),Do=(()=>{class MaybeJsonPipe extends i.TG{transform(e){return e instanceof Array||e instanceof Object?super.transform(e):e}static#e=this.ɵfac=(()=>{let e;return function(t){return(e||(e=m.xGo(MaybeJsonPipe)))(t||MaybeJsonPipe)}})();static#t=this.ɵpipe=m.EJ8({name:"maybejson",type:MaybeJsonPipe,pure:!0})}return MaybeJsonPipe})();var Eo=s(48717);function Co(e,t){if(1&e&&(m.j41(0,"div",26),m.EFF(1," Untranslated records: "),m.j41(2,"span",27),m.EFF(3),m.k0s()()),2&e){const e=m.XpG();m.R7$(3),m.JRh(null==e.labels?null:e.labels.length)}}function Fo(e,t){if(1&e&&(m.j41(0,"option",28),m.EFF(1),m.k0s()),2&e){const e=t.$implicit;m.Y8G("ngValue",e.language),m.R7$(),m.JRh(e.text)}}function Go(e,t){1&e&&(m.j41(0,"div",29),m.nrm(1,"system-spinner"),m.k0s())}function $o(e,t){if(1&e){const e=m.RV6();m.j41(0,"button",52),m.bIt("click",(function(){m.eBV(e);const t=m.XpG().$implicit,s=m.XpG();return m.Njj(s.translate(t))})),m.nrm(1,"system-label",53),m.k0s()}}function Bo(e,t){if(1&e){const e=m.RV6();m.j41(0,"div")(1,"div",30)(2,"div",31)(3,"h2",32),m.nrm(4,"system-label",33),m.EFF(5,": "),m.j41(6,"span",34),m.EFF(7),m.k0s()()(),m.j41(8,"div",35)(9,"div",36)(10,"div",37)(11,"div",12)(12,"label"),m.nrm(13,"system-label",38),m.EFF(14,":"),m.k0s(),m.nrm(15,"input",14),m.k0s(),m.j41(16,"div",12)(17,"label"),m.nrm(18,"system-label",39),m.EFF(19,":"),m.k0s(),m.nrm(20,"input",40),m.k0s(),m.j41(21,"div",12)(22,"label"),m.nrm(23,"system-label",41),m.EFF(24,":"),m.k0s(),m.nrm(25,"textarea",42),m.k0s()(),m.j41(26,"div",43)(27,"div",12)(28,"label"),m.nrm(29,"system-label",38),m.EFF(30,":"),m.k0s(),m.j41(31,"input",44),m.mxI("ngModelChange",(function(t){const s=m.eBV(e).$implicit;return m.DH7(s.translation_short,t)||(s.translation_short=t),m.Njj(t)})),m.k0s()(),m.j41(32,"div",12)(33,"label")(34,"abbr",34),m.EFF(35,"*"),m.k0s(),m.nrm(36,"system-label",39),m.EFF(37,":"),m.k0s(),m.j41(38,"input",45),m.mxI("ngModelChange",(function(t){const s=m.eBV(e).$implicit;return m.DH7(s.translation_default,t)||(s.translation_default=t),m.Njj(t)})),m.k0s()(),m.j41(39,"div",12)(40,"label"),m.nrm(41,"system-label",41),m.EFF(42,":"),m.k0s(),m.j41(43,"textarea",46),m.mxI("ngModelChange",(function(t){const s=m.eBV(e).$implicit;return m.DH7(s.translation_long,t)||(s.translation_long=t),m.Njj(t)})),m.k0s()()()(),m.j41(44,"div",47)(45,"div",48),m.DNE(46,$o,2,0,"button",49),m.j41(47,"button",50),m.bIt("click",(function(){const t=m.eBV(e).$implicit,s=m.XpG();return m.Njj(s.save(t))})),m.nrm(48,"system-label",51),m.k0s()()()()()()}if(2&e){const e=t.$implicit,s=m.XpG();m.R7$(7),m.JRh(s.language.getLangText(e.name)),m.R7$(8),m.Y8G("value",s.getLabelSpecificLength(e.name,"short")),m.R7$(5),m.Y8G("value",s.language.getLabel(e.name)),m.R7$(5),m.Y8G("value",s.getLabelSpecificLength(e.name,"long")),m.R7$(6),m.R50("ngModel",e.translation_short),m.R7$(7),m.R50("ngModel",e.translation_default),m.R7$(5),m.R50("ngModel",e.translation_long),m.R7$(3),m.Y8G("ngIf",s.cantranslate),m.R7$(),m.Y8G("disabled",!s.canSave(e))}}function No(e,t){1&e&&(m.j41(0,"div",29),m.nrm(1,"system-label",54),m.k0s())}function So(e,t){1&e&&(m.j41(0,"div",29),m.nrm(1,"system-label",55),m.k0s())}let wo=(()=>{class LanguageTranslationsManager{constructor(e,t,s,i,n){this.backend=e,this.metadata=t,this.language=s,this.utils=i,this.toast=n,this.labels=[],this.currentScope="global",this.selectedLanguage="",this.isLoading=!1,this.cantranslate=!1,this.backend.getRequest("syslanguage/labels/translate/cantranslate").subscribe({next:e=>{this.cantranslate=e.cantranslate}})}get scope(){return this.currentScope}set scope(e){this.currentScope=e,this.getTranslations()}get languages(){return this.language.getAvialableLanguages().filter((e=>e.language!=this.language.currentlanguage))}get selectedLanguageText(){return this.language.getLangText(this.language.currentlanguage)}translate(e){let t=["default"],s=[this.language.getLabel(e.name)],i=this.getLabelSpecificLength(e.name,"short");i&&(s.push(i),t.push("short"));let n=this.getLabelSpecificLength(e.name,"long");n&&(s.push(n),t.push("long"));let l=this.language.currentlanguage.substring(0,2),o=this.selectedLanguage.substring(0,2);this.backend.postRequest(`syslanguage/labels/translate/${l}/${o}`,{},{labels:s}).subscribe({next:s=>{s.data.translations&&s.data.translations.forEach(((s,i)=>{e["translation_"+t[i]]=s.translatedText}))}})}save(e){let t="global"==this.scope?"global_translations":"custom_translations",s={id:e.id,name:e.name,scope:this.scope,[t]:[{id:this.utils.generateGuid(),syslanguagelabel_id:e.id,syslanguage:this.selectedLanguage,translation_default:e.translation_default,translation_short:e.translation_short,translation_long:e.translation_long}]};this.backend.postRequest("configuration/syslanguages/labels",null,[s]).subscribe((t=>{this.language.addLabel(e.name,e.translation_default,e.translation_short,e.translation_long),this.labels=this.labels.filter((t=>t.id!=e.id)),this.toast.sendToast(this.language.getLabel("LBL_DATA_SAVED"),"success")}))}getLabelSpecificLength(e,t){let s=this.language.getLabel(e),i=this.language.getLabel(e,"",t);return i!=s?i:""}getTranslations(){this.labels=[],0!=this.selectedLanguage.length&&(this.isLoading=!0,this.backend.getRequest(`configuration/syslanguage/${this.selectedLanguage}/${this.scope}/labels/untranslated`).subscribe((e=>{this.labels=e,this.isLoading=!1}),(e=>this.isLoading=!1)))}canSave(e){return e.translation_default&&e.translation_default.length>0}trackByFn(e,t){return t.id}static#e=this.ɵfac=function(e){return new(e||LanguageTranslationsManager)(m.rXU(p.H),m.rXU(f.yu),m.rXU(b.B),m.rXU(y.g),m.rXU(v.o))};static#t=this.ɵcmp=m.VBU({type:LanguageTranslationsManager,selectors:[["language-translations-manager"]],decls:35,vars:19,consts:[[1,"slds-border--bottom","slds-form--inline","slds-grid","slds-grid--vertical-align-end","slds-p-around--small"],["class","slds-text-heading--label",4,"ngIf"],[1,"slds-grid","slds-grid--vertical-align-center","slds-col--bump-left"],[1,"slds-radio"],["type","radio","name","translation_scope","id","scope_global","value","global",3,"ngModel","disabled","ngModelChange"],["for","scope_global",1,"slds-radio__label"],[1,"slds-radio_faux"],[1,"slds-form-element__label"],["label","LBL_GLOBAL"],["type","radio","name","translation_scope","id","scope_custom","value","custom",3,"ngModel","disabled","ngModelChange"],["for","scope_custom",1,"slds-radio__label"],["label","LBL_CUSTOM"],[1,"slds-form-element"],[1,"slds-form-element__control"],["type","text","disabled","",1,"slds-input",3,"value"],["icon","sort","size","xx-small","addclasses","slds-path__trigger_open",1,"slds-m-right--x-small"],[1,"slds-form-element__control","slds-p-right--x-small"],[1,"slds-select_container",2,"min-width","150px"],[1,"slds-select",3,"ngModel","disabled","ngModelChange","change"],[3,"ngValue",4,"ngFor","ngForOf"],["role","group",1,"slds-button-group"],[1,"slds-button","slds-button--icon-border",3,"disabled","click"],["icon","refresh"],["system-to-bottom","",1,"slds-size--1-of-1","spice-scrollbar"],["class","slds-align_absolute-center","style","height: 100%;",4,"ngIf"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"slds-text-heading--label"],[1,"slds-text-color--error"],[3,"ngValue"],[1,"slds-align_absolute-center",2,"height","100%"],[1,"slds-card","slds-m-around--small"],[1,"slds-card__header"],[1,"slds-text-heading--small"],["label","LBL_LABEL"],[1,"slds-required"],[1,"slds-card__body","slds-p-around--small",2,"margin-bottom","0"],[1,"slds-grid"],[1,"slds-size--1-of-2","slds-p-right--small"],["label","LBL_TEXT_SHORT"],["label","LBL_DEFAULT"],["type","text","required","required","disabled","",1,"slds-input",3,"value"],["label","LBL_TEXT_LONG"],["disabled","",1,"slds-textarea",3,"value"],[1,"slds-size--1-of-2"],["type","text",1,"slds-input",3,"ngModel","ngModelChange"],["type","text","required","required",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-textarea",3,"ngModel","ngModelChange"],[1,"slds-grid","slds-p-top--x-small"],[1,"slds-col--bump-left"],["type","button","class","slds-button slds-button--neutral",3,"click",4,"ngIf"],["type","button",1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_SAVE"],["type","button",1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_GOOGLE_TRANSLATE"],["label","LBL_MAKE_SELECTION"],["label","LBL_NO_ENTRIES"]],template:function(e,t){1&e&&(m.j41(0,"div",0),m.DNE(1,Co,4,1,"div",1),m.j41(2,"div",2)(3,"div")(4,"span",3)(5,"input",4),m.mxI("ngModelChange",(function(e){return m.DH7(t.scope,e)||(t.scope=e),e})),m.k0s(),m.j41(6,"label",5),m.nrm(7,"span",6),m.j41(8,"span",7),m.nrm(9,"system-label",8),m.k0s()()(),m.j41(10,"span",3)(11,"input",9),m.mxI("ngModelChange",(function(e){return m.DH7(t.scope,e)||(t.scope=e),e})),m.k0s(),m.j41(12,"label",10),m.nrm(13,"span",6),m.j41(14,"span",7),m.nrm(15,"system-label",11),m.k0s()()()(),m.j41(16,"div",12)(17,"div",13),m.nrm(18,"input",14),m.k0s()(),m.nrm(19,"system-utility-icon",15),m.j41(20,"div",16)(21,"div",17)(22,"select",18),m.mxI("ngModelChange",(function(e){return m.DH7(t.selectedLanguage,e)||(t.selectedLanguage=e),e})),m.bIt("change",(function(){return t.getTranslations()})),m.nrm(23,"option"),m.DNE(24,Fo,2,2,"option",19),m.k0s()()(),m.j41(25,"div",12)(26,"div",20)(27,"button",21),m.bIt("click",(function(){return t.getTranslations()})),m.nrm(28,"system-button-icon",22),m.k0s()()()()(),m.j41(29,"div",23),m.DNE(30,Go,2,0,"div",24)(31,Bo,49,9,"div",25),m.nI1(32,"slice"),m.DNE(33,No,2,0,"div",24)(34,So,2,0,"div",24),m.k0s()),2&e&&(m.R7$(),m.Y8G("ngIf",!t.isLoading&&(null==t.selectedLanguage?null:t.selectedLanguage.length)>0&&(null==t.labels?null:t.labels.length)),m.R7$(4),m.R50("ngModel",t.scope),m.Y8G("disabled",t.isLoading),m.R7$(6),m.R50("ngModel",t.scope),m.Y8G("disabled",t.isLoading),m.R7$(7),m.Y8G("value",t.selectedLanguageText),m.R7$(4),m.R50("ngModel",t.selectedLanguage),m.Y8G("disabled",t.isLoading),m.R7$(2),m.Y8G("ngForOf",t.languages),m.R7$(3),m.Y8G("disabled",t.isLoading),m.R7$(3),m.Y8G("ngIf",t.isLoading),m.R7$(),m.Y8G("ngForOf",m.brH(32,15,t.labels,0,100))("ngForTrackBy",t.trackByFn),m.R7$(2),m.Y8G("ngIf",!t.isLoading&&0==t.selectedLanguage.length),m.R7$(),m.Y8G("ngIf",!t.isLoading&&(null==t.selectedLanguage?null:t.selectedLanguage.length)>0&&0==(null==t.labels?null:t.labels.length)))},dependencies:[i.Sq,i.bT,n.xH,n.y7,n.me,n.wz,n.Fm,n.BC,n.YS,n.vS,L.t,x.W,Eo.P,u.B,F.b,i.P9],encapsulation:2})}return LanguageTranslationsManager})();var To=s(4921),Ao=s(29994),Yo=s(63983);function Oo(e,t){if(1&e){const e=m.RV6();m.j41(0,"div",16)(1,"div",17)(2,"button",18),m.bIt("click",(function(){m.eBV(e);const t=m.XpG();return m.Njj(t.addLabel())})),m.nrm(3,"system-label",19),m.k0s()()()}}function Xo(e,t){1&e&&m.nrm(0,"system-spinner")}function Vo(e,t){1&e&&(m.j41(0,"span",37),m.EFF(1,"custom"),m.k0s())}function Uo(e,t){if(1&e){const e=m.RV6();m.j41(0,"system-utility-icon",38),m.bIt("click",(function(){m.eBV(e);const t=m.XpG().$implicit,s=m.XpG(2);return m.Njj(s.deleteLabel(t))})),m.k0s()}2&e&&m.Y8G("icon","close")("size","xx-small")}const Ho=e=>({"slds-theme_inverse":e});function zo(e,t){if(1&e){const e=m.RV6();m.j41(0,"li",34),m.bIt("click",(function(){const t=m.eBV(e).$implicit,s=m.XpG(2);return m.Njj(s.selected_label=t)})),m.j41(1,"div",22)(2,"span"),m.EFF(3),m.k0s(),m.DNE(4,Vo,2,0,"span",35),m.j41(5,"div",25),m.DNE(6,Uo,1,2,"system-utility-icon",36),m.k0s()()()}if(2&e){const e=t.$implicit,s=m.XpG(2);m.Y8G("ngClass",m.eq3(4,Ho,e==s.selected_label)),m.R7$(3),m.JRh(e.name),m.R7$(),m.Y8G("ngIf","custom"==e.scope),m.R7$(2),m.Y8G("ngIf",e==s.selected_label)}}function qo(e,t){if(1&e){const e=m.RV6();m.j41(0,"article")(1,"div",27)(2,"div",53)(3,"h2"),m.EFF(4),m.k0s()(),m.j41(5,"div",28)(6,"div",1)(7,"label"),m.EFF(8,"short:"),m.k0s(),m.j41(9,"input",54),m.mxI("ngModelChange",(function(t){const s=m.eBV(e).$implicit;return m.DH7(s.translation_short,t)||(s.translation_short=t),m.Njj(t)})),m.k0s()(),m.j41(10,"div",1)(11,"label")(12,"abbr",55),m.EFF(13,"*"),m.k0s(),m.EFF(14,"default:"),m.k0s(),m.j41(15,"input",56),m.mxI("ngModelChange",(function(t){const s=m.eBV(e).$implicit;return m.DH7(s.translation_default,t)||(s.translation_default=t),m.Njj(t)})),m.k0s()(),m.j41(16,"div",1)(17,"label"),m.EFF(18,"long:"),m.k0s(),m.j41(19,"textarea",57),m.mxI("ngModelChange",(function(t){const s=m.eBV(e).$implicit;return m.DH7(s.translation_long,t)||(s.translation_long=t),m.Njj(t)})),m.k0s()()()()()}if(2&e){const e=t.$implicit,s=m.XpG(3);m.R7$(4),m.JRh(s.getLangText(e.syslanguage)),m.R7$(5),m.R50("ngModel",e.translation_short),m.R7$(6),m.R50("ngModel",e.translation_default),m.R7$(4),m.R50("ngModel",e.translation_long)}}function Po(e,t){if(1&e&&(m.j41(0,"option",64),m.EFF(1),m.k0s()),2&e){const e=t.$implicit;m.FS9("value",e.language),m.R7$(),m.JRh(e.text)}}function Jo(e,t){if(1&e){const e=m.RV6();m.j41(0,"div",20)(1,"div",58)(2,"div",59)(3,"select",60,61),m.DNE(5,Po,2,2,"option",62),m.k0s()()(),m.j41(6,"button",63),m.bIt("click",(function(){m.eBV(e);const t=m.sdS(4),s=m.XpG(3);return m.Njj(s.addTranslation(s.translation_scope,t.value))})),m.nrm(7,"system-label",19),m.k0s()()}if(2&e){const e=m.XpG(3);m.R7$(5),m.Y8G("ngForOf",e.getMissingLanguages()),m.R7$(),m.Mz_("title","",e.language.getLabel("LBL_ADD_TRANSLATION"),"...")}}function Wo(e,t){if(1&e){const e=m.RV6();m.j41(0,"div",39)(1,"div",40)(2,"h2",23),m.nrm(3,"system-label",41),m.EFF(4,":"),m.k0s(),m.j41(5,"div",42)(6,"span",43)(7,"input",44),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG(2);return m.DH7(s.translation_scope,t)||(s.translation_scope=t),m.Njj(t)})),m.k0s(),m.j41(8,"label",45),m.nrm(9,"span",46),m.j41(10,"span",47),m.EFF(11,"global"),m.k0s()()(),m.j41(12,"span",43)(13,"input",48),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG(2);return m.DH7(s.translation_scope,t)||(s.translation_scope=t),m.Njj(t)})),m.k0s(),m.j41(14,"label",49),m.nrm(15,"span",46),m.j41(16,"span",47),m.EFF(17,"custom"),m.k0s()()()()(),m.DNE(18,qo,20,4,"article",50),m.j41(19,"div",20),m.DNE(20,Jo,8,2,"div",15),m.j41(21,"div",25)(22,"button",51),m.bIt("click",(function(){m.eBV(e);const t=m.XpG(2);return m.Njj(t.save())})),m.nrm(23,"system-label",52),m.k0s()()()()}if(2&e){const e=m.XpG(2);m.R7$(7),m.R50("ngModel",e.translation_scope),m.Y8G("disabled","custom"==e.selected_label.scope),m.R7$(6),m.R50("ngModel",e.translation_scope),m.R7$(5),m.Y8G("ngForOf",e.translations),m.R7$(2),m.Y8G("ngIf",e.languages.length>e.translations.length),m.R7$(2),m.Y8G("disabled",e.labels.length<1)}}const Ko=e=>({page:e,limit:20});function Qo(e,t){if(1&e){const e=m.RV6();m.j41(0,"div",20)(1,"div",21)(2,"div",22)(3,"h2",23),m.nrm(4,"system-label",24),m.EFF(5,":"),m.k0s(),m.j41(6,"div",25)(7,"pagination-controls",26),m.mxI("pageChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.page,t)||(s.page=t),m.Njj(t)})),m.k0s()()(),m.j41(8,"article")(9,"div",27)(10,"div",28)(11,"ul",29),m.DNE(12,zo,7,6,"li",30),m.nI1(13,"paginate"),m.k0s()(),m.j41(14,"div",31)(15,"pagination-controls",32),m.mxI("pageChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.page,t)||(s.page=t),m.Njj(t)})),m.k0s()()()()(),m.DNE(16,Wo,24,6,"div",33),m.k0s()}if(2&e){const e=m.XpG();m.R7$(7),m.R50("page",e.page),m.Y8G("limit",20)("total_records",e.labels.length)("variation","short"),m.R7$(5),m.Y8G("ngForOf",m.i5U(13,9,e.labels,m.eq3(12,Ko,e.page))),m.R7$(3),m.R50("page",e.page),m.Y8G("limit",20)("total_records",e.labels.length),m.R7$(),m.Y8G("ngIf",e.selected_label)}}let Zo=(()=>{class LanguageLabelManagerComponent{get selected_label(){return this._selected_label}set selected_label(e){if(this._selected_label=e,e&&0==e[this.translation_scope+"_translations"].length){for(let t of this.scopes)if(e[t+"_translations"].length>0){this.translation_scope=t;break}e[this.translation_scope+"_translations"].sort(((e,t)=>e.syslanguage==this.language.languagedata.languages.default||e.syslanguage<t.syslanguage?-1:e.syslanguage>t.syslanguage?1:void 0))}}constructor(e,t,s,i,n,l,o,a){this.backend=e,this.metadata=t,this.language=s,this.utils=i,this.toast=n,this.footer=l,this.modalservice=o,this.sessionservice=a,this.search_term="",this.labels=[],this.languages=[],this._selected_label=null,this.is_searching=!1,this.page=1,this.translation_scope="global",this.scopes=["global","custom"],this.languages=this.language.getAvialableLanguages()}showRefModal(){this.modalservice.openModal("LanguageLabelReferenceConfigModal")}get translations(){return this.selected_label[`${this.translation_scope}_translations`]}search(e=null){if(this.page=1,!(e=e||this.search_term))return!1;this.selected_label=null,this.is_searching=!0,this.backend.getRequest("configuration/syslanguages/labels/search/"+this.search_term).subscribe((e=>{this.labels=e,this.is_searching=!1}))}addTranslation(e,t=null){if(this.selected_label[e+"_translations"]||(this.selected_label[e+"_translations"]=[]),!t){t=this.getMissingLanguages(e)[0]}this.selected_label[e+"_translations"].push({id:this.utils.generateGuid(),syslanguagelabel_id:this.selected_label.id,syslanguage:t})}getMissingLanguages(e=null){e||(e=this.translation_scope);let t=[];for(let e of this.languages)this.translations.find((t=>t.syslanguage==e.language))||t.push(e);return t}addLabel(){let e={id:this.utils.generateGuid(),name:"",scope:"custom",custom_translations:[],global_translations:[]};e.custom_translations.push({id:this.utils.generateGuid(),syslanguagelabel_id:e.id,syslanguage:this.language.currentlanguage}),this.selected_label=e,this.labels.push(e),this.modalservice.openModal("LanguageLabelModal").subscribe((e=>{e.instance.label=this.selected_label,e.instance.label$.subscribe((e=>{this.selected_label=e})),e.instance.close$.subscribe((e=>{this.closeModal(e)}))}))}deleteLabel(e){this.modalservice.confirm(this.language.getLabel("LBL_DELETE_LABEL_TEXT"),this.language.getLabel("LBL_DELETE_LABEL_TITLE")).subscribe((t=>{t&&this.backend.deleteRequest("configuration/syslanguages/labels/"+e.id+"/"+e.source).subscribe((t=>{for(let t=0;t<this.labels.length;t++){this.labels[t].id==e.id&&this.labels.splice(t,1)}this.selected_label=null}))}))}save(){this.backend.postRequest("configuration/syslanguages/labels",null,[this.selected_label]).subscribe((e=>{let t=this.getcurrentLanguageTranslations();this.language.addLabel(this.selected_label.name,t.default,t.short,t.long),this.toast.sendToast("Label saved!")}))}getcurrentLanguageTranslations(){let e=this.translations,t={default:"",short:"",long:""};return e.some((e=>{if(e.syslanguage==this.language.currentlanguage)return t.default=e.translation_default,t.short=e.translation_short,t.long=e.translation_long,!0})),t}closeModal(e){switch(e){case"cancel":for(let e=0;e<this.labels.length;e++){let t=this.labels[e];""!=t.name&&t.id!=this.selected_label.id||this.labels.splice(e,1)}break;case"save":this.translation_scope=this.selected_label.scope}}sortTranslations(e,t){return e.syslanguage==this.language.languagedata.languages.default||e.syslanguage<t.syslanguage?-1:e.syslanguage>t.syslanguage?1:0}getLangText(e){return this.language.getLangText(e)}filesToDB(){this.modalservice.confirm("Transfering custom labels from language files will change your database content and might destroy/overwrite existing language data in your database! Do you really want to do this?","Caution!","warning").subscribe((e=>{if(e){let e=this.modalservice.await("Transfering language data from files to database …");this.backend.postRequest("configuration/syslanguages/filesToDB",{},{confirmed:!0}).subscribe((t=>{e.emit(),this.modalservice.info("Language data successfully transfered ("+t.countLabels+" labels with "+t.countTranslations+" translations). Look into console for more details.","Done","success"),console.info(t)}),(t=>{e.emit(),this.toast.sendToast("Error transfering language data.","error")}))}}))}static#e=this.ɵfac=function(e){return new(e||LanguageLabelManagerComponent)(m.rXU(p.H),m.rXU(f.yu),m.rXU(b.B),m.rXU(y.g),m.rXU(v.o),m.rXU(To.q),m.rXU(R.y),m.rXU(Ao.d))};static#t=this.ɵcmp=m.VBU({type:LanguageLabelManagerComponent,selectors:[["language-label-manager"]],decls:18,vars:6,consts:[[1,"slds-grid","slds-form--inline","slds-p-around--small","slds-border--bottom"],[1,"slds-form-element"],[1,"slds-form-element__control"],["type","search","placeholder","search here...",1,"slds-input",3,"ngModel","ngModelChange","keyup.enter"],[1,"slds-button","slds-button--neutral",3,"disabled","click"],[1,"slds-grid","slds-grid--vertical-align-center","slds-m-horizontal--xx-small",2,"cursor","pointer"],[1,"slds-truncate","slds-grow","slds-align-middle"],["label","LBL_ENABLE_INLINE_EDIT"],[1,"slds-checkbox_toggle","slds-grid"],[1,"slds-form-element__label","slds-m-bottom_none"],["type","checkbox",3,"ngModel","ngModelChange"],["aria-live","assertive",1,"slds-checkbox_faux_container"],[1,"slds-checkbox_faux",2,"cursor","initial"],["class","slds-form-element slds-col--bump-left",4,"ngIf"],[4,"ngIf"],["class","slds-grid",4,"ngIf"],[1,"slds-form-element","slds-col--bump-left"],["role","group",1,"slds-button-group"],["type","button",1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_ADD"],[1,"slds-grid"],[1,"slds-size--2-of-5","slds-p-around--small"],[1,"slds-grid","slds-grid--vertical-align-center"],[1,"slds-p-vertical--small","slds-text-heading--small"],["label","LBL_LABELS"],[1,"slds-col--bump-left"],[3,"page","limit","total_records","variation","pageChange"],[1,"slds-card","slds-m-bottom--small"],[1,"slds-card__body","slds-p-around--small"],[1,"slds-has-dividers_bottom-space"],["class","slds-item","style","cursor: pointer;",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"slds-card__footer"],[3,"page","limit","total_records","pageChange"],["class","slds-size--3-of-5 slds-p-around--small",4,"ngIf"],[1,"slds-item",2,"cursor","pointer",3,"ngClass","click"],["class","slds-text-color_weak",4,"ngIf"],[3,"icon","size","click",4,"ngIf"],[1,"slds-text-color_weak"],[3,"icon","size","click"],[1,"slds-size--3-of-5","slds-p-around--small"],[1,"slds-grid","slds-grid--vertical-align-center","slds-p-bottom--small"],["label","LBL_TRANSLATIONS"],[1,"slds-grid","slds-col--bump-left"],[1,"slds-radio"],["type","radio","name","translation_scope","id","translation_scope_global","value","global",3,"ngModel","disabled","ngModelChange"],["for","translation_scope_global",1,"slds-radio__label"],[1,"slds-radio_faux"],[1,"slds-form-element__label"],["type","radio","name","translation_scope","id","translation_scope_custom","value","custom",3,"ngModel","ngModelChange"],["for","translation_scope_custom",1,"slds-radio__label"],[4,"ngFor","ngForOf"],["type","button",1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_SAVE"],[1,"slds-card__header"],["type","text",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-required"],["type","text","required","required",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-textarea",3,"ngModel","ngModelChange"],[1,"slds-form-element__control","slds-p-right--x-small"],[1,"slds-select_container"],[1,"slds-select"],["add_translation_language",""],[3,"value",4,"ngFor","ngForOf"],[1,"slds-button","slds-button--neutral",3,"title","click"],[3,"value"]],template:function(e,t){1&e&&(m.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"input",3),m.mxI("ngModelChange",(function(e){return m.DH7(t.search_term,e)||(t.search_term=e),e})),m.bIt("keyup.enter",(function(){return t.search()})),m.k0s()(),m.j41(4,"button",4),m.bIt("click",(function(){return t.search()})),m.EFF(5,"search"),m.k0s()(),m.j41(6,"div",5)(7,"div",6),m.nrm(8,"system-label",7),m.k0s(),m.j41(9,"div",1)(10,"label",8),m.nrm(11,"span",9),m.j41(12,"input",10),m.mxI("ngModelChange",(function(e){return m.DH7(t.language.inlineEditEnabled,e)||(t.language.inlineEditEnabled=e),e})),m.k0s(),m.j41(13,"span",11),m.nrm(14,"span",12),m.k0s()()()(),m.DNE(15,Oo,4,0,"div",13),m.k0s(),m.DNE(16,Xo,1,0,"system-spinner",14)(17,Qo,17,14,"div",15)),2&e&&(m.R7$(3),m.R50("ngModel",t.search_term),m.R7$(),m.Y8G("disabled",!t.search_term),m.R7$(8),m.R50("ngModel",t.language.inlineEditEnabled),m.R7$(3),m.Y8G("ngIf",!0),m.R7$(),m.Y8G("ngIf",t.is_searching),m.R7$(),m.Y8G("ngIf",t.labels.length>0&&!t.is_searching))},dependencies:[i.YU,i.Sq,i.bT,n.xH,n.y7,n.me,n.Zm,n.Fm,n.BC,n.YS,n.vS,Yo.e,x.W,Eo.P,u.B,Yo.j],encapsulation:2})}return LanguageLabelManagerComponent})(),ea=(()=>{class SortPipe{transform(e,t=((e,t)=>e>t?1:-1)){return e.sort(t)}static#e=this.ɵfac=function(e){return new(e||SortPipe)};static#t=this.ɵpipe=m.EJ8({name:"sort",type:SortPipe,pure:!0})}return SortPipe})();function ta(e,t){if(1&e){const e=m.RV6();m.j41(0,"article")(1,"div",24)(2,"div",25)(3,"h2"),m.EFF(4),m.k0s()(),m.j41(5,"div",26)(6,"div",27)(7,"label"),m.EFF(8,"short:"),m.k0s(),m.j41(9,"input",28),m.mxI("ngModelChange",(function(t){const s=m.eBV(e).$implicit;return m.DH7(s.translation_short,t)||(s.translation_short=t),m.Njj(t)})),m.k0s()(),m.j41(10,"div",27)(11,"label")(12,"abbr",5),m.EFF(13,"*"),m.k0s(),m.EFF(14,"default:"),m.k0s(),m.j41(15,"input",29),m.mxI("ngModelChange",(function(t){const s=m.eBV(e).$implicit;return m.DH7(s.translation_default,t)||(s.translation_default=t),m.Njj(t)})),m.k0s()(),m.j41(16,"div",27)(17,"label"),m.EFF(18,"long:"),m.k0s(),m.j41(19,"textarea",30),m.mxI("ngModelChange",(function(t){const s=m.eBV(e).$implicit;return m.DH7(s.translation_long,t)||(s.translation_long=t),m.Njj(t)})),m.k0s()()()()()}if(2&e){const e=t.$implicit,s=m.XpG();m.R7$(4),m.JRh(s.getLangText(e.syslanguage)),m.R7$(5),m.R50("ngModel",e.translation_short),m.R7$(6),m.R50("ngModel",e.translation_default),m.R7$(4),m.R50("ngModel",e.translation_long)}}function sa(e,t){if(1&e&&(m.j41(0,"option",38),m.EFF(1),m.k0s()),2&e){const e=t.$implicit;m.FS9("value",e.language),m.R7$(),m.JRh(e.text)}}function ia(e,t){if(1&e){const e=m.RV6();m.j41(0,"div",3)(1,"div",31)(2,"div",32)(3,"select",33,34),m.DNE(5,sa,2,2,"option",35),m.k0s()()(),m.j41(6,"button",36),m.bIt("click",(function(){m.eBV(e);const t=m.sdS(4),s=m.XpG();return m.Njj(s.addTranslation(t.value))})),m.nrm(7,"system-label",37),m.k0s()()}if(2&e){const e=m.XpG();m.R7$(5),m.Y8G("ngForOf",e.getMissingLanguages()),m.R7$(),m.Mz_("title","",e.language.getLabel("LBL_ADD_TRANSLATION"),"...")}}let na=(()=>{class LanguageLabelModal{constructor(e,t,s){this.utils=e,this.language=t,this.backend=s,this.label={},this.label$=new m.bkB,this.close$=new m.bkB,this.languages=[],this.languages=this.language.getAvialableLanguages(!0)}get translations(){return this.label[this.label.scope+"_translations"]||[]}set translations(e){this.label[this.label.scope+"_translations"]=e}get name(){return this.label?this.label.name:""}set name(e){e=e.toUpperCase().trim().replace("-","_"),this.label.name=e}get scope(){return this.label?this.label.scope:""}set scope(e){this.label[e+"_translations"]=this.translations,this.translations=[],this.label.scope=e}validate(){if(!this.label.name)return!1;if(/[^A-Z_0-9]/.test(this.label.name))return!1;for(let e of this.translations)if(!e.translation_default)return!1;return!0}save(){if(this.label.name=this.label.name.toUpperCase(),!this.validate())return!1;this.backend.postRequest("configuration/syslanguages/labels",null,[this.label]).subscribe((e=>{this.label$.emit(this.label),this.close$.emit("save");let t=this.getcurrentLanguageTranslations();this.language.addLabel(this.label.name,t.default,t.short,t.long),this.self&&this.self.destroy()}))}getcurrentLanguageTranslations(){let e=this.translations,t={default:"",short:"",long:""};return e.some((e=>{if(e.syslanguage==this.language.currentlanguage)return t.default=e.translation_default,t.short=e.translation_short,t.long=e.translation_long,!0})),t}cancelDialog(){this.label={},this.label$.emit(null),this.close$.emit("cancel"),this.self.destroy()}onModalEscX(){this.cancelDialog()}addTranslation(e=null){if(!e){e=this.getMissingLanguages()[0]}this.label[this.label.scope+"_translations"].push({id:this.utils.generateGuid(),syslanguagelabel_id:this.label.id,syslanguage:e})}getMissingLanguages(e=null){e||(e=this.scope);let t=[];for(let e of this.languages)this.translations.find((t=>t.syslanguage==e.language))||t.push(e);return t}getLangText(e){return this.language.getLangText(e)}static#e=this.ɵfac=function(e){return new(e||LanguageLabelModal)(m.rXU(y.g),m.rXU(b.B),m.rXU(p.H))};static#t=this.ɵcmp=m.VBU({type:LanguageLabelModal,selectors:[["language-label-modal"]],inputs:{label:"label"},outputs:{label$:"label",close$:"close"},decls:37,vars:6,consts:[["size","large"],[3,"close"],["label","LBL_EDIT"],[1,"slds-grid"],[1,"slds-form-element","slds-size--3-of-4"],[1,"slds-required"],["label","LBL_NAME"],["type","text","placeholder","only A-Z, 0-9 and _ are allowed!",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-form-element","slds-size--1-of-4","slds-p-around--small"],[1,"slds-form-element__control"],[1,"slds-radio"],["type","radio","id","radio-3","value","global",3,"ngModel","ngModelChange"],["for","radio-3",1,"slds-radio__label"],[1,"slds-radio_faux"],[1,"slds-form-element__label"],["type","radio","id","radio-4","value","custom",3,"ngModel","ngModelChange"],["for","radio-4",1,"slds-radio__label"],["label","LBL_TRANSLATIONS"],[4,"ngFor","ngForOf"],["class","slds-grid",4,"ngIf"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_SAVE"],[1,"slds-card","slds-m-bottom--small"],[1,"slds-card__header"],[1,"slds-card__body","slds-p-around--small"],[1,"slds-form-element"],["type","text",1,"slds-input",3,"ngModel","ngModelChange"],["type","text","required","required",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-textarea",3,"ngModel","ngModelChange"],[1,"slds-form-element__control","slds-p-right--x-small"],[1,"slds-select_container"],[1,"slds-select"],["add_translation_language",""],[3,"value",4,"ngFor","ngForOf"],[1,"slds-button","slds-button--neutral",3,"title","click"],["label","LBL_ADD"],[3,"value"]],template:function(e,t){1&e&&(m.j41(0,"system-modal",0)(1,"system-modal-header",1),m.bIt("close",(function(){return t.cancelDialog()})),m.nrm(2,"system-label",2),m.k0s(),m.j41(3,"system-modal-content")(4,"div",3)(5,"div",4)(6,"label")(7,"abbr",5),m.EFF(8,"*"),m.k0s(),m.nrm(9,"system-label",6),m.EFF(10,":"),m.k0s(),m.j41(11,"input",7),m.mxI("ngModelChange",(function(e){return m.DH7(t.name,e)||(t.name=e),e})),m.k0s()(),m.j41(12,"div",8)(13,"div",9)(14,"span",10)(15,"input",11),m.mxI("ngModelChange",(function(e){return m.DH7(t.scope,e)||(t.scope=e),e})),m.k0s(),m.j41(16,"label",12),m.nrm(17,"span",13),m.j41(18,"span",14),m.EFF(19,"global"),m.k0s()()(),m.j41(20,"span",10)(21,"input",15),m.mxI("ngModelChange",(function(e){return m.DH7(t.scope,e)||(t.scope=e),e})),m.k0s(),m.j41(22,"label",16),m.nrm(23,"span",13),m.j41(24,"span",14),m.EFF(25,"custom"),m.k0s()()()()()(),m.j41(26,"div")(27,"h2"),m.nrm(28,"system-label",17),m.EFF(29,":"),m.k0s(),m.DNE(30,ta,20,4,"article",18)(31,ia,8,2,"div",19),m.k0s()(),m.j41(32,"system-modal-footer")(33,"button",20),m.bIt("click",(function(){return t.cancelDialog()})),m.nrm(34,"system-label",21),m.k0s(),m.j41(35,"button",22),m.bIt("click",(function(){return t.save()})),m.nrm(36,"system-label",23),m.k0s()()()),2&e&&(m.R7$(11),m.R50("ngModel",t.name),m.R7$(4),m.R50("ngModel",t.scope),m.R7$(6),m.R50("ngModel",t.scope),m.R7$(9),m.Y8G("ngForOf",t.translations),m.R7$(),m.Y8G("ngIf",t.languages.length>t.translations.length),m.R7$(4),m.Y8G("disabled",!t.validate()))},dependencies:[i.Sq,i.bT,n.xH,n.y7,n.me,n.Fm,n.BC,n.YS,n.vS,x.W,qe.D,Pe.I,Je.Q,We.C],encapsulation:2})}return LanguageLabelModal})();var la=s(75103),oa=s(35911),aa=s(44261),da=s(98427),ra=s(3719);const ca=e=>({module:"Mailboxes",data:e});function ma(e,t){if(1&e){const e=m.RV6();m.j41(0,"li",1),m.bIt("click",(function(){const t=m.eBV(e).$implicit,s=m.XpG();return m.Njj(s.setSelectedMailbox(t))})),m.j41(1,"div",2),m.nrm(2,"system-utility-icon",3),m.j41(3,"a",4),m.EFF(4),m.k0s()(),m.j41(5,"div",5),m.nrm(6,"object-record-fieldset",6),m.k0s()()}if(2&e){const e=t.$implicit,s=t.first,i=m.XpG();m.xc7("margin-top",s?"0":"0.5rem"),m.AVh("slds-theme--shade",e.id==i.selectedMailboxId),m.Y8G("system-model-provider",m.eq3(11,ca,e)),m.R7$(),m.xc7("font-weight",e.id==i.selectedMailboxId?"bold":"400"),m.Y8G("title",e.name),m.R7$(3),m.JRh(e.name),m.R7$(2),m.Y8G("fieldset",i.listfieldset)("direction","horizontal")}}let ua=(()=>{class MailboxesManagerList{constructor(e,t,s,i,n,l,o,a,d,r){this.modellist=e,this.backend=t,this.footer=s,this.language=i,this.metadata=n,this.modelutils=l,this.modelutilities=o,this.toast=a,this.view=d,this.configuration=r,this.selectedMailboxChange=new m.bkB,this.renderedview=[],this.view.isEditable=!0,this.configuration.getData("mailboxtransports")||(this.configuration.setData("mailboxtransports",[]),this.backend.getRequest("module/Mailboxes/transports").subscribe((e=>{this.configuration.setData("mailboxtransports",e)})));let c=this.metadata.getComponentConfig("MailboxesManager","Mailboxes");this.headeractionset=c.actionset,this.listfieldset=c.listfieldset}get mailboxes(){return this.modellist.listData.list.sort(((e,t)=>e.name.localeCompare(t.name)))}setSelectedMailbox(e){this.selectedMailboxId=e.id,this.selectedMailboxChange.emit(e)}cleanView(){for(let e of this.renderedview)e.destroy()}reset(){this.view.setViewMode()}static#e=this.ɵfac=function(e){return new(e||MailboxesManagerList)(m.rXU(la.K),m.rXU(p.H),m.rXU(To.q),m.rXU(b.B),m.rXU(f.yu),m.rXU(y.g),m.rXU(y.g),m.rXU(v.o),m.rXU(_n.U),m.rXU(M.i))};static#t=this.ɵcmp=m.VBU({type:MailboxesManagerList,selectors:[["mailboxes-manager-list"]],outputs:{selectedMailboxChange:"selectedMailboxChange"},features:[m.Jv_([_n.U])],decls:1,vars:1,consts:[["class","slds-item slds-m-bottom--xxx-small slds-card slds-p-around--xx-small",3,"system-model-provider","slds-theme--shade","margin-top","click",4,"ngFor","ngForOf"],[1,"slds-item","slds-m-bottom--xxx-small","slds-card","slds-p-around--xx-small",3,"system-model-provider","click"],[1,"slds-truncate","slds-grid","slds-grid_align-left",3,"title"],["size","x-small","icon","archive",1,"slds-p-around--xx-small"],["href","javascript:void(0);",1,"slds-text-link_reset","slds-text-align_center","slds-p-around--xx-small"],[1,"slds-grid","slds-grid--align-spread"],[3,"fieldset","direction"]],template:function(e,t){1&e&&m.DNE(0,ma,7,13,"li",0),2&e&&m.Y8G("ngForOf",t.mailboxes)},dependencies:[i.Sq,u.B,da.v,ra.D],encapsulation:2})}return MailboxesManagerList})();const ga=["viewcontainer"];let ha=(()=>{class MailboxesManager{constructor(e,t,s,i,n,l,o,a,d,r,c){this.modellist=e,this.backend=t,this.footer=s,this.language=i,this.metadata=n,this.model=l,this.modelutils=o,this.modelutilities=a,this.toast=d,this.view=r,this.configuration=c,this.renderedview=[],this.modellist.initialize("Mailboxes"),this.modellist.getListData(),this.model.module="Mailboxes",this.view.isEditable=!0,this.configuration.getData("mailboxtransports")||(this.configuration.setData("mailboxtransports",[]),this.backend.getRequest("module/Mailboxes/transports").subscribe((e=>{this.configuration.setData("mailboxtransports",e)})));let m=this.metadata.getComponentConfig("MailboxesManager","Mailboxes");this.headeractionset=m.actionset,this.listfieldset=m.listfieldset}handleSelectionChange(e){e?(this.model.id=e.id,this.model.setData(e,!1),this.cleanView(),this.renderedview=[],this.metadata.addComponent("ObjectRecordDetails",this.viewcontainer).subscribe((e=>{this.renderedview.push(e)})),this.metadata.addComponent("ObjectRelateContainer",this.viewcontainer).subscribe((e=>{this.renderedview.push(e)}))):(this.cleanView(),this.model.id="",this.model.initialize())}cleanView(){for(let e of this.renderedview)e.destroy()}reset(){this.view.setViewMode(),this.model.reset(),this.model.module="Mailboxes"}static#e=this.ɵfac=function(e){return new(e||MailboxesManager)(m.rXU(la.K),m.rXU(p.H),m.rXU(To.q),m.rXU(b.B),m.rXU(f.yu),m.rXU(oa.g),m.rXU(y.g),m.rXU(y.g),m.rXU(v.o),m.rXU(_n.U),m.rXU(M.i))};static#t=this.ɵcmp=m.VBU({type:MailboxesManager,selectors:[["mailboxes-manager"]],viewQuery:function(e,t){if(1&e&&m.GBs(ga,7,m.c1b),2&e){let e;m.mGM(e=m.lsd())&&(t.viewcontainer=e.first)}},features:[m.Jv_([oa.g,_n.U,la.K])],decls:11,vars:2,consts:[["titlelabel","LBL_MAILBOX"],[3,"actionset"],["system-to-bottom-noscroll","",1,"slds-grid",3,"system-overlay-loading-spinner"],[1,"slds-size--1-of-5","slds-scrollable--y","slds-theme--default","slds-tabs_default__content","slds-p-around--none","slds-border--right"],[1,"slds-has-dividers_around-space","slds-p-around--x-small"],[3,"selectedMailboxChange"],["listComponent",""],[1,"slds-size--4-of-5","slds-scrollable--y"],["viewcontainer",""]],template:function(e,t){if(1&e&&(m.j41(0,"workbench-header",0)(1,"workbench-header-controls"),m.nrm(2,"object-action-container",1),m.k0s()(),m.j41(3,"div",2)(4,"div",3)(5,"ul",4)(6,"mailboxes-manager-list",5,6),m.bIt("selectedMailboxChange",(function(e){return t.handleSelectionChange(e)})),m.k0s()()(),m.j41(8,"div",7),m.nrm(9,"div",null,8),m.k0s()()),2&e){const e=m.sdS(7);m.R7$(2),m.Y8G("actionset",t.headeractionset),m.R7$(),m.Y8G("system-overlay-loading-spinner",e.modellist.isLoading)}},dependencies:[T.p,kl.M,aa.l,Te,Ye,ua],encapsulation:2})}return MailboxesManager})();var pa=s(13921),fa=s(57363),ba=s(766),ya=s(66935),_a=s(89166);function ka(e,t){if(1&e&&m.nrm(0,"field-label",3),2&e){const e=m.XpG();m.Y8G("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function va(e,t){if(1&e&&(m.j41(0,"field-generic-display",4),m.EFF(1),m.k0s()),2&e){const e=m.XpG();m.Y8G("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig)("fieldid",e.fieldid),m.R7$(),m.SpI(" ",e.getValue(),"\n")}}function Ra(e,t){if(1&e&&(m.j41(0,"option",12),m.nrm(1,"system-label",13),m.k0s()),2&e){const e=t.$implicit;m.Y8G("value",e.name),m.R7$(),m.Y8G("label",e.label)}}function Ma(e,t){if(1&e){const e=m.RV6();m.j41(0,"div",5)(1,"div",6)(2,"div",7)(3,"select",8,9),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.value,t)||(s.value=t),m.Njj(t)})),m.DNE(5,Ra,2,2,"option",10),m.k0s()(),m.nrm(6,"field-messages",11),m.k0s()()}if(2&e){const e=m.XpG();m.R7$(),m.Y8G("ngClass",e.getFieldClass()),m.R7$(2),m.R50("ngModel",e.value),m.R7$(2),m.Y8G("ngForOf",e.transportoptions),m.R7$(),m.Y8G("fieldname",e.fieldname)}}let ja=(()=>{class MailboxesTransportsEnum extends pa.s{constructor(e,t,s,i,n,l){super(e,t,s,i,n),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=n,this.configuration=l}getValue(){let e=this.configuration.getData("mailboxtransports").find((e=>e.name==this.value));return e?this.language.getLabel(e.label):this.value}get transportoptions(){return this.configuration.getData("mailboxtransports")}static#e=this.ɵfac=function(e){return new(e||MailboxesTransportsEnum)(m.rXU(oa.g),m.rXU(_n.U),m.rXU(b.B),m.rXU(f.yu),m.rXU(fa.Ix),m.rXU(M.i))};static#t=this.ɵcmp=m.VBU({type:MailboxesTransportsEnum,selectors:[["ng-component"]],features:[m.Vt3],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig","fieldid",4,"ngIf"],["class","slds-form-element",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig","fieldid"],[1,"slds-form-element"],[1,"slds-form-element__control",3,"ngClass"],[1,"slds-select_container","slds-m-vertical--xx-small"],[1,"slds-select",3,"ngModel","ngModelChange"],["focus",""],[3,"value",4,"ngFor","ngForOf"],[3,"fieldname"],[3,"value"],[3,"label"]],template:function(e,t){1&e&&m.DNE(0,ka,1,2,"field-label",0)(1,va,2,5,"field-generic-display",1)(2,Ma,7,4,"div",2),2&e&&(m.Y8G("ngIf",t.displayLabel),m.R7$(),m.Y8G("ngIf",!t.isEditMode()),m.R7$(),m.Y8G("ngIf",t.isEditMode()))},dependencies:[i.YU,i.Sq,i.bT,n.xH,n.y7,n.wz,n.BC,n.vS,x.W,ba.b,ya.K,_a.A],encapsulation:2})}return MailboxesTransportsEnum})();function La(e,t){1&e&&(m.j41(0,"div",6),m.nrm(1,"system-spinner",11),m.j41(2,"span",12),m.nrm(3,"system-label",13),m.k0s()())}function xa(e,t){1&e&&(m.j41(0,"span",12),m.nrm(1,"system-label",17),m.k0s())}function Ia(e,t){if(1&e&&(m.j41(0,"span",18),m.EFF(1),m.k0s()),2&e){const e=m.XpG(2);m.R7$(),m.JRh(e.errorMessage)}}function Da(e,t){if(1&e&&(m.j41(0,"div",6),m.nrm(1,"system-utility-icon",14),m.DNE(2,xa,2,0,"span",15)(3,Ia,2,1,"span",16),m.k0s()),2&e){const e=m.XpG();m.R7$(),m.Y8G("icon",e.validConnection?"check":"error")("colorclass",e.validConnection?"slds-icon-text-success":"slds-icon-text-error"),m.R7$(),m.Y8G("ngIf",e.validConnection),m.R7$(),m.Y8G("ngIf",!!e.errorMessage)}}let Ea=(()=>{class MailboxesmanagerTestModal{constructor(e,t,s,i){this.backend=e,this.language=t,this.model=s,this.session=i,this.self={},this.isvalid=new m.bkB,this.testemailaddress="",this.testing=!1,this.tested=!1,this.testtype="email"}ngOnInit(){if("sms"===this.testtype);else this.testemailaddress=this.session.authData.email}testConnection(){this.testing=!0,this.testemailaddress=this.testemailaddress.trim();let e=this.model.utils.spiceModel2backend("Mailboxes",this.model.data);this.backend.postRequest("module/Mailboxes/test",{},{data:e,test_email:this.testemailaddress}).subscribe({next:e=>{!0===e.result?this.validConnection=!0:(this.validConnection=!1,this.errorMessage=e.errors),this.tested=!0,this.testing=!1},error:e=>{this.tested=!1,this.testing=!1,this.validConnection=void 0,this.errorMessage=e.error?.error?.message??e.error?.message}})}close(){this.isvalid.emit(this.validConnection),this.self.destroy()}onModalEscX(){this.close()}get testtypelabel(){return this.language.getLabel("email"==this.testtype?"LBL_EMAIL":"LBL_SMS")}static#e=this.ɵfac=function(e){return new(e||MailboxesmanagerTestModal)(m.rXU(p.H),m.rXU(b.B),m.rXU(oa.g),m.rXU(Ao.d))};static#t=this.ɵcmp=m.VBU({type:MailboxesmanagerTestModal,selectors:[["ng-component"]],decls:17,vars:7,consts:[[3,"close"],["label","LBL_TEST"],[1,"slds-form-element","slds-size--1-of-1"],[1,"slds-truncate","slds-form-element__label"],["label","LBL_DESTINATION_ADDRESS"],["type","text",1,"slds-input",3,"disabled","ngModel","ngModelChange"],[1,"slds-grid","slds-grid--vertical-align-center"],["class","slds-grid slds-grid--vertical-align-center",4,"ngIf"],[1,"slds-button","slds-col--bump-left","slds-button--neutral",3,"disabled","click"],["label","LBL_CLOSE"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["size","10"],[1,"slds-p-horizontal--xx-small"],["label","LBL_TESTING"],["size","x-small",3,"icon","colorclass"],["class","slds-p-horizontal--xx-small",4,"ngIf"],["class","slds-p-horizontal--xx-small slds-text-color--error",4,"ngIf"],["label","LBL_OK"],[1,"slds-p-horizontal--xx-small","slds-text-color--error"]],template:function(e,t){1&e&&(m.j41(0,"system-modal")(1,"system-modal-header",0),m.bIt("close",(function(){return t.close()})),m.nrm(2,"system-label",1),m.EFF(3),m.k0s(),m.j41(4,"system-modal-content")(5,"div",2)(6,"label",3),m.nrm(7,"system-label",4),m.k0s(),m.j41(8,"input",5),m.mxI("ngModelChange",(function(e){return m.DH7(t.testemailaddress,e)||(t.testemailaddress=e),e})),m.k0s()()(),m.j41(9,"system-modal-footer")(10,"div",6),m.DNE(11,La,4,0,"div",7)(12,Da,4,4,"div",7),m.j41(13,"button",8),m.bIt("click",(function(){return t.close()})),m.nrm(14,"system-label",9),m.k0s(),m.j41(15,"button",10),m.bIt("click",(function(){return t.testConnection()})),m.nrm(16,"system-label",1),m.k0s()()()()),2&e&&(m.R7$(3),m.SpI(" ",t.testtypelabel,""),m.R7$(5),m.Y8G("disabled",t.testing),m.R50("ngModel",t.testemailaddress),m.R7$(3),m.Y8G("ngIf",t.testing),m.R7$(),m.Y8G("ngIf",!(t.testing||void 0===t.validConnection&&!t.errorMessage)),m.R7$(),m.Y8G("disabled",!t.validConnection),m.R7$(2),m.Y8G("disabled",0===t.testemailaddress.trim().length))},dependencies:[i.bT,n.me,n.BC,n.vS,x.W,qe.D,Pe.I,Je.Q,We.C,Eo.P,u.B],encapsulation:2})}return MailboxesmanagerTestModal})();function Ca(e,t){if(1&e){const e=m.RV6();m.j41(0,"div",10)(1,"label",11),m.nrm(2,"system-label",12),m.k0s(),m.j41(3,"input",13),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.testemailaddress,t)||(s.testemailaddress=t),m.Njj(t)})),m.k0s()()}if(2&e){const e=m.XpG();m.R7$(3),m.R50("ngModel",e.testemailaddress)}}function Fa(e,t){if(1&e&&m.nrm(0,"system-utility-icon",17),2&e){const e=m.XpG(2);m.Y8G("icon",e.imapIcon)("colorclass",e.imapStatus?"slds-icon-text-success":"slds-icon-text-error")}}function Ga(e,t){if(1&e&&(m.j41(0,"div",14)(1,"div"),m.nrm(2,"system-label",15),m.k0s(),m.DNE(3,Fa,1,2,"system-utility-icon",16),m.k0s()),2&e){const e=m.XpG();m.R7$(3),m.Y8G("ngIf",void 0!==e.imapStatus)}}function $a(e,t){if(1&e&&m.nrm(0,"system-utility-icon",17),2&e){const e=m.XpG(2);m.Y8G("icon",e.smtpIcon)("colorclass",e.smtpStatus?"slds-icon-text-success":"slds-icon-text-error")}}function Ba(e,t){if(1&e&&(m.j41(0,"div",14)(1,"div"),m.nrm(2,"system-label",18),m.k0s(),m.DNE(3,$a,1,2,"system-utility-icon",16),m.k0s()),2&e){const e=m.XpG();m.R7$(3),m.Y8G("ngIf",void 0!==e.smtpStatus)}}function Na(e,t){1&e&&(m.j41(0,"div",4),m.nrm(1,"system-spinner",19),m.j41(2,"span",20),m.nrm(3,"system-label",21),m.k0s()())}function Sa(e,t){if(1&e&&(m.j41(0,"span",24),m.EFF(1),m.k0s()),2&e){const e=m.XpG(2);m.R7$(),m.JRh(e.errorMessage)}}function wa(e,t){if(1&e&&(m.j41(0,"div",4),m.nrm(1,"system-utility-icon",22),m.DNE(2,Sa,2,1,"span",23),m.k0s()),2&e){const e=m.XpG();m.R7$(),m.Y8G("icon",e.validConnection?"check":"error")("colorclass",e.validConnection?"slds-icon-text-success":"slds-icon-text-error"),m.R7$(),m.Y8G("ngIf",!!e.errorMessage)}}let Ta=(()=>{class MailboxesmanagerTestIMAPModal{constructor(e,t,s,i){this.backend=e,this.language=t,this.model=s,this.session=i,this.self={},this.isvalid=new m.bkB,this.testemailaddress="",this.testing=!1,this.tested=!1,this.testemailaddress=this.session.authData.email}get isInbound(){return!!this.model.getFieldValue("inbound_comm")}get isOutbound(){let e=this.model.getFieldValue("outbound_comm");return!(!e||"no"==e)}testConnection(){this.testing=!0;let e=this.model.utils.spiceModel2backend("Mailboxes",this.model.data);this.backend.postRequest("module/Mailboxes/test",{},{data:e,test_email:this.testemailaddress}).subscribe({next:e=>{this.validConnection=!0,this.isInbound&&(!0!==e.imap.result&&(this.validConnection=!1),e.imap?.errors||e.errors?(this.imapStatus=!1,this.errorMessage=e.errors??e.imap.errors):this.imapStatus=!0),this.isOutbound&&(e.smtp?.errors||e.errors?(this.smtpStatus=!1,this.validConnection=!1,this.errorMessage=e.errors??e.smtp.errors):this.smtpStatus=!0),this.tested=!0,this.testing=!1},error:e=>{this.testing=!1,this.validConnection=void 0,this.errorMessage=e.error?.error?.message??e.error?.message}})}close(){void 0!==this.validConnection&&this.isvalid.emit(this.validConnection),this.self.destroy()}get imapIcon(){return this.imapStatus?"check":"error"}get smtpIcon(){return this.smtpStatus?"check":"error"}onModalEscX(){this.close()}static#e=this.ɵfac=function(e){return new(e||MailboxesmanagerTestIMAPModal)(m.rXU(p.H),m.rXU(b.B),m.rXU(oa.g),m.rXU(Ao.d))};static#t=this.ɵcmp=m.VBU({type:MailboxesmanagerTestIMAPModal,selectors:[["ng-component"]],decls:15,vars:5,consts:[[3,"close"],["class","slds-form-element slds-size--1-of-1",4,"ngIf"],[1,"slds-p-vertical--x-small"],["class","slds-grid slds-grid_vertical-align-center slds-p-vertical--xxx-small",4,"ngIf"],[1,"slds-grid","slds-grid--vertical-align-center"],["class","slds-grid slds-grid--vertical-align-center",4,"ngIf"],[1,"slds-col--bump-left","slds-button","slds-button--neutral",3,"click"],["label","LBL_CLOSE"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_TEST"],[1,"slds-form-element","slds-size--1-of-1"],[1,"slds-truncate","slds-form-element__label"],["label","LBL_TEST_EMAIL"],["type","text",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-grid","slds-grid_vertical-align-center","slds-p-vertical--xxx-small"],["label","LBL_IMAP"],["size","xx-small","class","slds-m-left--xx-small",3,"icon","colorclass",4,"ngIf"],["size","xx-small",1,"slds-m-left--xx-small",3,"icon","colorclass"],["label","LBL_SMTP"],["size","10"],[1,"slds-p-horizontal--xx-small"],["label","LBL_TESTING"],["size","x-small",3,"icon","colorclass"],["class","slds-p-horizontal--xx-small slds-text-color--error",4,"ngIf"],[1,"slds-p-horizontal--xx-small","slds-text-color--error"]],template:function(e,t){1&e&&(m.j41(0,"system-modal")(1,"system-modal-header",0),m.bIt("close",(function(){return t.close()})),m.k0s(),m.j41(2,"system-modal-content"),m.DNE(3,Ca,4,1,"div",1),m.j41(4,"div",2),m.DNE(5,Ga,4,1,"div",3)(6,Ba,4,1,"div",3),m.k0s()(),m.j41(7,"system-modal-footer")(8,"div",4),m.DNE(9,Na,4,0,"div",5)(10,wa,3,3,"div",5),m.j41(11,"button",6),m.bIt("click",(function(){return t.close()})),m.nrm(12,"system-label",7),m.k0s(),m.j41(13,"button",8),m.bIt("click",(function(){return t.testConnection()})),m.nrm(14,"system-label",9),m.k0s()()()()),2&e&&(m.R7$(3),m.Y8G("ngIf",t.isOutbound),m.R7$(2),m.Y8G("ngIf",t.isInbound),m.R7$(),m.Y8G("ngIf",t.isOutbound),m.R7$(3),m.Y8G("ngIf",t.testing),m.R7$(),m.Y8G("ngIf",!(t.testing||void 0===t.validConnection&&!t.errorMessage)))},dependencies:[i.bT,n.me,n.BC,n.vS,x.W,qe.D,Pe.I,Je.Q,We.C,Eo.P,u.B],encapsulation:2})}return MailboxesmanagerTestIMAPModal})(),Aa=(()=>{class MailboxesGmailTrafficManager{constructor(e,t,s,i,n,l,o){this.backend=e,this.language=t,this.model=s,this.modal=i,this.toast=n,this.view=l,this.injector=o;let a=this.model.getField("settings");(!a||a&&0==a.length)&&this.model.setField("settings",{gmail_user_name:"",gmail_email_address:"",gmail_delete_emails:!1})}get isInbound(){return!!this.model.getFieldValue("inbound_comm")}get isOutbound(){return"no"!=this.model.getFieldValue("outbound_comm")}getMailboxes(){let e=new h.B,t=this.model.utils.spiceModel2backend("Mailboxes",this.model.data);return this.backend.postRequest("module/Mailboxes/gmail/labels",{},{data:t}).subscribe((t=>{!0===t.result?e.next(t):e.next(!1),e.complete()})),e.asObservable()}testConnection(){this.modal.openModal("MailboxesmanagerTestModal",!0,this.injector)}static#e=this.ɵfac=function(e){return new(e||MailboxesGmailTrafficManager)(m.rXU(p.H),m.rXU(b.B),m.rXU(oa.g),m.rXU(R.y),m.rXU(v.o),m.rXU(_n.U),m.rXU(m.zZn))};static#t=this.ɵcmp=m.VBU({type:MailboxesGmailTrafficManager,selectors:[["mailboxes-gmail-traffic-manager"]],decls:20,vars:7,consts:[[1,"slds-m-vertical--xx-small","slds-box--border"],[1,"slds-p-around--x-small"],["label","LBL_GMAIL"],[1,"slds-grid","slds-p-vertical--xx-small"],[1,"slds-form-element","slds-size--1-of-2","slds-p-right--xx-small"],[1,"slds-truncate","slds-form-element__label"],["label","LBL_EMAIL_ADDRESS"],["type","text",1,"slds-input",3,"ngModel","disabled","ngModelChange"],[1,"slds-form-element","slds-size--1-of-2","slds-p-left--xx-small"],["label","LBL_USER_NAME"],[3,"disabled","ngModel","ngModelChange"],["label","LBL_DELETE_REMOTE"],["type","button",1,"slds-col--bump-left","slds-button","slds-button--neutral",3,"disabled","click"],["label","LBL_TEST_CONNECTION"]],template:function(e,t){1&e&&(m.j41(0,"div",0)(1,"div",1)(2,"h1"),m.nrm(3,"system-label",2),m.k0s(),m.j41(4,"div",3)(5,"div",4)(6,"label",5),m.nrm(7,"system-label",6),m.k0s(),m.j41(8,"input",7),m.mxI("ngModelChange",(function(e){return m.DH7(t.model.data.settings.gmail_email_address,e)||(t.model.data.settings.gmail_email_address=e),e})),m.k0s()(),m.j41(9,"div",8)(10,"label",5),m.nrm(11,"system-label",9),m.k0s(),m.j41(12,"input",7),m.mxI("ngModelChange",(function(e){return m.DH7(t.model.data.settings.gmail_user_name,e)||(t.model.data.settings.gmail_user_name=e),e})),m.k0s()()(),m.j41(13,"div",3)(14,"div",4)(15,"system-checkbox",10),m.mxI("ngModelChange",(function(e){return m.DH7(t.model.data.settings.gmail_delete_emails,e)||(t.model.data.settings.gmail_delete_emails=e),e})),m.nrm(16,"system-label",11),m.k0s()()(),m.j41(17,"div",3)(18,"button",12),m.bIt("click",(function(){return t.testConnection()})),m.nrm(19,"system-label",13),m.k0s()()()()),2&e&&(m.R7$(8),m.R50("ngModel",t.model.data.settings.gmail_email_address),m.Y8G("disabled",!t.view.isEditMode()),m.R7$(4),m.R50("ngModel",t.model.data.settings.gmail_user_name),m.Y8G("disabled",!t.view.isEditMode()),m.R7$(3),m.Y8G("disabled",!t.view.isEditMode()),m.R50("ngModel",t.model.data.settings.gmail_delete_emails),m.R7$(3),m.Y8G("disabled",!t.view.isEditMode()))},dependencies:[n.me,n.BC,n.vS,be.f,x.W],encapsulation:2})}return MailboxesGmailTrafficManager})();var Ya=s(40145);let Oa=(()=>{class MailboxesMailgunTrafficManager{constructor(e,t,s,i,n){this.language=e,this.injector=t,this.model=s,this.modal=i,this.view=n;let l=this.model.getField("settings");(!l||l&&0==l.length)&&this.model.setField("settings",{api_key:"",domain:"",imap_pop3_display_name:"",imap_pop3_username:"",reply_to:"",region:""})}testConnection(){this.modal.openModal("MailboxesmanagerTestModal",!0,this.injector)}static#e=this.ɵfac=function(e){return new(e||MailboxesMailgunTrafficManager)(m.rXU(b.B),m.rXU(m.zZn),m.rXU(oa.g),m.rXU(R.y),m.rXU(_n.U))};static#t=this.ɵcmp=m.VBU({type:MailboxesMailgunTrafficManager,selectors:[["mailboxes-mailgun-traffic-manager"]],decls:38,vars:13,consts:[[1,"slds-m-vertical--xx-small","slds-box--border"],[1,"slds-p-around--x-small"],["label","LBL_MAILGUN"],[1,"slds-grid","slds-p-vertical--xx-small"],[1,"slds-form-element","slds-size--1-of-2","slds-p-right--xx-small"],[1,"slds-truncate","slds-form-element__label"],["label","LBL_DISPLAY_NAME"],["type","text",1,"slds-input",3,"disabled","ngModel","ngModelChange"],[1,"slds-form-element","slds-size--1-of-2","slds-p-left--xx-small"],["label","LBL_DOMAIN"],["type","text",1,"slds-input","ng-pristine",3,"ngModel","disabled","ngModelChange"],["label","LBL_USER_NAME"],["type","text",1,"slds-input",3,"ngModel","disabled","ngModelChange"],["label","LBL_REPLY_TO"],["label","LBL_REGION"],["type","text",1,"slds-select",3,"disabled","ngModel","ngModelChange"],["value","eu"],["label","LBL_EU"],["value","us"],["label","LBL_USA"],["label","LBL_API_KEY"],[3,"ngModel","disabled","ngModelChange"],["type","button",1,"slds-col--bump-left","slds-button","slds-button--neutral",3,"disabled","click"],["label","LBL_TEST_CONNECTION"]],template:function(e,t){1&e&&(m.j41(0,"div",0)(1,"div",1)(2,"h1"),m.nrm(3,"system-label",2),m.k0s(),m.j41(4,"div",3)(5,"div",4)(6,"label",5),m.nrm(7,"system-label",6),m.k0s(),m.j41(8,"input",7),m.mxI("ngModelChange",(function(e){return m.DH7(t.model.data.settings.imap_pop3_display_name,e)||(t.model.data.settings.imap_pop3_display_name=e),e})),m.k0s()(),m.j41(9,"div",8)(10,"label",5),m.nrm(11,"system-label",9),m.k0s(),m.j41(12,"input",10),m.mxI("ngModelChange",(function(e){return m.DH7(t.model.data.settings.domain,e)||(t.model.data.settings.domain=e),e})),m.k0s()()(),m.j41(13,"div",3)(14,"div",4)(15,"label",5),m.nrm(16,"system-label",11),m.k0s(),m.j41(17,"input",12),m.mxI("ngModelChange",(function(e){return m.DH7(t.model.data.settings.imap_pop3_username,e)||(t.model.data.settings.imap_pop3_username=e),e})),m.k0s()(),m.j41(18,"div",4)(19,"label",5),m.nrm(20,"system-label",13),m.k0s(),m.j41(21,"input",7),m.mxI("ngModelChange",(function(e){return m.DH7(t.model.data.settings.reply_to,e)||(t.model.data.settings.reply_to=e),e})),m.k0s()()(),m.j41(22,"div",3)(23,"div",4)(24,"label",5),m.nrm(25,"system-label",14),m.k0s(),m.j41(26,"select",15),m.mxI("ngModelChange",(function(e){return m.DH7(t.model.data.settings.region,e)||(t.model.data.settings.region=e),e})),m.j41(27,"option",16),m.nrm(28,"system-label",17),m.k0s(),m.j41(29,"option",18),m.nrm(30,"system-label",19),m.k0s()()(),m.j41(31,"div",8)(32,"label",5),m.nrm(33,"system-label",20),m.k0s(),m.j41(34,"system-input-password",21),m.mxI("ngModelChange",(function(e){return m.DH7(t.model.data.settings.api_key,e)||(t.model.data.settings.api_key=e),e})),m.k0s()()(),m.j41(35,"div",3)(36,"button",22),m.bIt("click",(function(){return t.testConnection()})),m.nrm(37,"system-label",23),m.k0s()()()()),2&e&&(m.R7$(8),m.Y8G("disabled",!t.view.isEditMode()),m.R50("ngModel",t.model.data.settings.imap_pop3_display_name),m.R7$(4),m.R50("ngModel",t.model.data.settings.domain),m.Y8G("disabled",!t.view.isEditMode()),m.R7$(5),m.R50("ngModel",t.model.data.settings.imap_pop3_username),m.Y8G("disabled",!t.view.isEditMode()),m.R7$(4),m.Y8G("disabled",!t.view.isEditMode()),m.R50("ngModel",t.model.data.settings.reply_to),m.R7$(5),m.Y8G("disabled",!t.view.isEditMode()),m.R50("ngModel",t.model.data.settings.region),m.R7$(8),m.R50("ngModel",t.model.data.settings.api_key),m.Y8G("disabled",!t.view.isEditMode()),m.R7$(2),m.Y8G("disabled",!t.view.isEditMode()))},dependencies:[n.xH,n.y7,n.me,n.wz,n.BC,n.vS,Ya.B,x.W],encapsulation:2})}return MailboxesMailgunTrafficManager})(),Xa=(()=>{class MailboxesSendgridTrafficManager{constructor(e,t,s,i,n){this.language=e,this.model=t,this.modal=s,this.view=i,this.injector=n;let l=this.model.getField("settings");(!l||l&&0==l.length)&&(this.model.data.settings={api_key:"",imap_pop3_display_name:"",imap_pop3_username:"",reply_to:""})}testConnection(){this.modal.openModal("MailboxesmanagerTestModal",!0,this.injector)}static#e=this.ɵfac=function(e){return new(e||MailboxesSendgridTrafficManager)(m.rXU(b.B),m.rXU(oa.g),m.rXU(R.y),m.rXU(_n.U),m.rXU(m.zZn))};static#t=this.ɵcmp=m.VBU({type:MailboxesSendgridTrafficManager,selectors:[["mailboxes-sendgrid-traffic-manager"]],decls:25,vars:9,consts:[[1,"slds-m-vertical--xx-small","slds-box--border"],[1,"slds-p-around--x-small"],["label","LBL_SENDGRID"],[1,"slds-grid","slds-p-vertical--xx-small"],[1,"slds-form-element","slds-size--1-of-2","slds-p-right--xx-small"],[1,"slds-truncate","slds-form-element__label"],["label","LBL_DISPLAY_NAME"],["type","text",1,"slds-input","ng-pristine","ng-valid",3,"disabled","ngModel","ngModelChange"],[1,"slds-form-element","slds-size--1-of-2","slds-p-left--xx-small"],["label","LBL_REPLY_TO"],["label","LBL_USER_NAME"],["label","LBL_API_KEY"],[3,"disabled","ngModel","ngModelChange"],["type","button",1,"slds-col--bump-left","slds-button","slds-button--neutral",3,"disabled","click"],["label","LBL_SEND_TEST_EMAIL"]],template:function(e,t){1&e&&(m.j41(0,"div",0)(1,"div",1)(2,"h1"),m.nrm(3,"system-label",2),m.k0s(),m.j41(4,"div",3)(5,"div",4)(6,"label",5),m.nrm(7,"system-label",6),m.k0s(),m.j41(8,"input",7),m.mxI("ngModelChange",(function(e){return m.DH7(t.model.data.settings.imap_pop3_display_name,e)||(t.model.data.settings.imap_pop3_display_name=e),e})),m.k0s()(),m.j41(9,"div",8)(10,"label",5),m.nrm(11,"system-label",9),m.k0s(),m.j41(12,"input",7),m.mxI("ngModelChange",(function(e){return m.DH7(t.model.data.settings.reply_to,e)||(t.model.data.settings.reply_to=e),e})),m.k0s()()(),m.j41(13,"div",3)(14,"div",4)(15,"label",5),m.nrm(16,"system-label",10),m.k0s(),m.j41(17,"input",7),m.mxI("ngModelChange",(function(e){return m.DH7(t.model.data.settings.imap_pop3_username,e)||(t.model.data.settings.imap_pop3_username=e),e})),m.k0s()(),m.j41(18,"div",8)(19,"label",5),m.nrm(20,"system-label",11),m.k0s(),m.j41(21,"system-input-password",12),m.mxI("ngModelChange",(function(e){return m.DH7(t.model.data.settings.api_key,e)||(t.model.data.settings.api_key=e),e})),m.k0s()()(),m.j41(22,"div",3)(23,"button",13),m.bIt("click",(function(){return t.testConnection()})),m.nrm(24,"system-label",14),m.k0s()()()()),2&e&&(m.R7$(8),m.Y8G("disabled",!t.view.isEditMode()),m.R50("ngModel",t.model.data.settings.imap_pop3_display_name),m.R7$(4),m.Y8G("disabled",!t.view.isEditMode()),m.R50("ngModel",t.model.data.settings.reply_to),m.R7$(5),m.Y8G("disabled",!t.view.isEditMode()),m.R50("ngModel",t.model.data.settings.imap_pop3_username),m.R7$(4),m.Y8G("disabled",!t.view.isEditMode()),m.R50("ngModel",t.model.data.settings.api_key),m.R7$(2),m.Y8G("disabled",!t.view.isEditMode()))},dependencies:[n.me,n.BC,n.vS,Ya.B,x.W],encapsulation:2})}return MailboxesSendgridTrafficManager})(),Va=(()=>{class MailboxesSendinblueTrafficManager{constructor(e,t,s,i,n){this.language=e,this.model=t,this.modal=s,this.view=i,this.injector=n;let l=this.model.getField("settings");(!l||l&&0==l.length)&&(this.model.data.settings={api_key:"",sender_name:"",sender_address:"",reply_to:""})}testConnection(){this.modal.openModal("MailboxesmanagerTestModal",!0,this.injector)}static#e=this.ɵfac=function(e){return new(e||MailboxesSendinblueTrafficManager)(m.rXU(b.B),m.rXU(oa.g),m.rXU(R.y),m.rXU(_n.U),m.rXU(m.zZn))};static#t=this.ɵcmp=m.VBU({type:MailboxesSendinblueTrafficManager,selectors:[["mailboxes-sendinblue-traffic-manager"]],decls:25,vars:9,consts:[[1,"slds-m-vertical--xx-small","slds-box--border"],[1,"slds-p-around--x-small"],["label","LBL_SENDGRID"],[1,"slds-grid","slds-p-vertical--xx-small"],[1,"slds-form-element","slds-size--1-of-2","slds-p-right--xx-small"],[1,"slds-truncate","slds-form-element__label"],["label","LBL_SENDER_NAME"],["type","text",1,"slds-input","ng-pristine","ng-valid",3,"disabled","ngModel","ngModelChange"],[1,"slds-form-element","slds-size--1-of-2","slds-p-left--xx-small"],["label","LBL_SENDER_ADDRESS"],["label","LBL_REPLY_TO"],["label","LBL_API_KEY"],[3,"disabled","ngModel","ngModelChange"],["type","button",1,"slds-col--bump-left","slds-button","slds-button--neutral",3,"disabled","click"],["label","LBL_SEND_TEST_EMAIL"]],template:function(e,t){1&e&&(m.j41(0,"div",0)(1,"div",1)(2,"h1"),m.nrm(3,"system-label",2),m.k0s(),m.j41(4,"div",3)(5,"div",4)(6,"label",5),m.nrm(7,"system-label",6),m.k0s(),m.j41(8,"input",7),m.mxI("ngModelChange",(function(e){return m.DH7(t.model.data.settings.sender_name,e)||(t.model.data.settings.sender_name=e),e})),m.k0s()(),m.j41(9,"div",8)(10,"label",5),m.nrm(11,"system-label",9),m.k0s(),m.j41(12,"input",7),m.mxI("ngModelChange",(function(e){return m.DH7(t.model.data.settings.sender_address,e)||(t.model.data.settings.sender_address=e),e})),m.k0s()()(),m.j41(13,"div",3)(14,"div",8)(15,"label",5),m.nrm(16,"system-label",10),m.k0s(),m.j41(17,"input",7),m.mxI("ngModelChange",(function(e){return m.DH7(t.model.data.settings.reply_to,e)||(t.model.data.settings.reply_to=e),e})),m.k0s()(),m.j41(18,"div",8)(19,"label",5),m.nrm(20,"system-label",11),m.k0s(),m.j41(21,"system-input-password",12),m.mxI("ngModelChange",(function(e){return m.DH7(t.model.data.settings.api_key,e)||(t.model.data.settings.api_key=e),e})),m.k0s()()(),m.j41(22,"div",3)(23,"button",13),m.bIt("click",(function(){return t.testConnection()})),m.nrm(24,"system-label",14),m.k0s()()()()),2&e&&(m.R7$(8),m.Y8G("disabled",!t.view.isEditMode()),m.R50("ngModel",t.model.data.settings.sender_name),m.R7$(4),m.Y8G("disabled",!t.view.isEditMode()),m.R50("ngModel",t.model.data.settings.sender_address),m.R7$(5),m.Y8G("disabled",!t.view.isEditMode()),m.R50("ngModel",t.model.data.settings.reply_to),m.R7$(4),m.Y8G("disabled",!t.view.isEditMode()),m.R50("ngModel",t.model.data.settings.api_key),m.R7$(2),m.Y8G("disabled",!t.view.isEditMode()))},dependencies:[n.me,n.BC,n.vS,Ya.B,x.W],encapsulation:2})}return MailboxesSendinblueTrafficManager})(),Ua=(()=>{class MailboxesTwillioTrafficManager{constructor(e,t,s,i,n){this.language=e,this.model=t,this.modal=s,this.view=i,this.injector=n;let l=this.model.getField("settings");(!l||l&&0==l.length)&&(this.model.data.settings={account_sid:"",auth_token:"",phone_number_from:""})}testConnection(){this.modal.openModal("MailboxesmanagerTestModal",!0,this.injector)}static#e=this.ɵfac=function(e){return new(e||MailboxesTwillioTrafficManager)(m.rXU(b.B),m.rXU(oa.g),m.rXU(R.y),m.rXU(_n.U),m.rXU(m.zZn))};static#t=this.ɵcmp=m.VBU({type:MailboxesTwillioTrafficManager,selectors:[["mailboxes-twillio-traffic-manager"]],decls:26,vars:10,consts:[[1,"slds-m-vertical--xx-small","slds-box--border"],[1,"slds-p-around--x-small"],[1,"slds-grid","slds-p-vertical--xx-small"],[1,"slds-form-element","slds-size--1-of-4"],[1,"slds-truncate","slds-form-element__label"],["label","LBL_ACCOUNT_SID"],[3,"disabled","ngModel","ngModelChange"],[1,"slds-form-element","slds-size--1-of-4","slds-p-left--x-small"],["label","LBL_AUTH_TOKEN"],["label","LBL_PHONE_NUMBER_FROM"],["type","text",1,"slds-input",3,"disabled","ngModel","ngModelChange"],[1,"slds-form-element__label"],["label","LBL_STATUS"],["label","LBL_NO_STATUS_CALLBACKS"],[3,"helpText"],[1,"slds-grid","slds-p-vertical--xx-small","slds-grid","slds-grid--vertical-align-center","slds-grid--align-spread"],["label","LBL_TWILIO_APILOG","length","long"],["type","button",1,"slds-col--bump-left","slds-button","slds-button--neutral",3,"disabled","click"],["label","LBL_SEND_TEST_SMS"]],template:function(e,t){1&e&&(m.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"label",4),m.nrm(5,"system-label",5),m.k0s(),m.j41(6,"system-input-password",6),m.mxI("ngModelChange",(function(e){return m.DH7(t.model.data.settings.account_sid,e)||(t.model.data.settings.account_sid=e),e})),m.k0s()(),m.j41(7,"div",7)(8,"label",4),m.nrm(9,"system-label",8),m.k0s(),m.j41(10,"system-input-password",6),m.mxI("ngModelChange",(function(e){return m.DH7(t.model.data.settings.auth_token,e)||(t.model.data.settings.auth_token=e),e})),m.k0s()(),m.j41(11,"div",7)(12,"label",4),m.nrm(13,"system-label",9),m.k0s(),m.j41(14,"input",10),m.mxI("ngModelChange",(function(e){return m.DH7(t.model.data.settings.phone_number_from,e)||(t.model.data.settings.phone_number_from=e),e})),m.k0s()(),m.j41(15,"div",7)(16,"div")(17,"label",11),m.nrm(18,"system-label",12),m.k0s()(),m.j41(19,"system-checkbox",6),m.mxI("ngModelChange",(function(e){return m.DH7(t.model.data.settings.no_status_callbacks,e)||(t.model.data.settings.no_status_callbacks=e),e})),m.nrm(20,"system-label",13)(21,"system-icon-help-text",14),m.k0s()()(),m.j41(22,"div",15),m.nrm(23,"system-label",16),m.j41(24,"button",17),m.bIt("click",(function(){return t.testConnection()})),m.nrm(25,"system-label",18),m.k0s()()()()),2&e&&(m.R7$(6),m.Y8G("disabled",!t.view.isEditMode()),m.R50("ngModel",t.model.data.settings.account_sid),m.R7$(4),m.Y8G("disabled",!t.view.isEditMode()),m.R50("ngModel",t.model.data.settings.auth_token),m.R7$(4),m.Y8G("disabled",!t.view.isEditMode()),m.R50("ngModel",t.model.data.settings.phone_number_from),m.R7$(5),m.Y8G("disabled",!t.view.isEditMode()),m.R50("ngModel",t.model.data.settings.no_status_callbacks),m.R7$(2),m.Y8G("helpText",t.language.getLabel("LBL_NO_STATUS_CALLBACKS","","long")),m.R7$(3),m.Y8G("disabled",!t.view.isEditMode()))},dependencies:[n.me,n.BC,n.vS,be.f,Ya.B,x.W,Rn.N],encapsulation:2})}return MailboxesTwillioTrafficManager})(),Ha=(()=>{class MailboxesA1SmsTrafficManager{constructor(e,t,s,i,n){this.language=e,this.model=t,this.modal=s,this.view=i,this.injector=n;let l=this.model.getField("settings");(!l||l&&0==l.length)&&this.model.setField("settings",{a1_username:"",a1_password:"",a1_sender:""})}testConnection(){this.modal.openModal("MailboxesmanagerTestModal",!0,this.injector)}static#e=this.ɵfac=function(e){return new(e||MailboxesA1SmsTrafficManager)(m.rXU(b.B),m.rXU(oa.g),m.rXU(R.y),m.rXU(_n.U),m.rXU(m.zZn))};static#t=this.ɵcmp=m.VBU({type:MailboxesA1SmsTrafficManager,selectors:[["mailboxes-a1sms-traffic-manager"]],decls:20,vars:7,consts:[[1,"slds-m-vertical--xx-small","slds-box--border"],[1,"slds-p-around--x-small"],["label","LBL_A1"],[1,"slds-grid","slds-p-vertical--xx-small"],[1,"slds-form-element","slds-size--1-of-3","slds-p-right--xx-small"],[1,"slds-truncate","slds-form-element__label"],["label","LBL_USERNAME"],[3,"disabled","ngModel","ngModelChange"],[1,"slds-form-element","slds-size--1-of-3","slds-p-left--xx-small"],["label","LBL_PASSWORD"],["label","LBL_SENDER"],["type","text",1,"slds-input",3,"disabled","ngModel","ngModelChange"],["type","button",1,"slds-col--bump-left","slds-button","slds-button--neutral",3,"disabled","click"],["label","LBL_SEND_TEST_SMS"]],template:function(e,t){1&e&&(m.j41(0,"div",0)(1,"div",1)(2,"h1"),m.nrm(3,"system-label",2),m.k0s(),m.j41(4,"div",3)(5,"div",4)(6,"label",5),m.nrm(7,"system-label",6),m.k0s(),m.j41(8,"system-input-password",7),m.mxI("ngModelChange",(function(e){return m.DH7(t.model.data.settings.a1_username,e)||(t.model.data.settings.a1_username=e),e})),m.k0s()(),m.j41(9,"div",8)(10,"label",5),m.nrm(11,"system-label",9),m.k0s(),m.j41(12,"system-input-password",7),m.mxI("ngModelChange",(function(e){return m.DH7(t.model.data.settings.a1_password,e)||(t.model.data.settings.a1_password=e),e})),m.k0s()(),m.j41(13,"div",8)(14,"label",5),m.nrm(15,"system-label",10),m.k0s(),m.j41(16,"input",11),m.mxI("ngModelChange",(function(e){return m.DH7(t.model.data.settings.a1_sender,e)||(t.model.data.settings.a1_sender=e),e})),m.k0s()()(),m.j41(17,"div",3)(18,"button",12),m.bIt("click",(function(){return t.testConnection()})),m.nrm(19,"system-label",13),m.k0s()()()()),2&e&&(m.R7$(8),m.Y8G("disabled",!t.view.isEditMode()),m.R50("ngModel",t.model.data.settings.a1_username),m.R7$(4),m.Y8G("disabled",!t.view.isEditMode()),m.R50("ngModel",t.model.data.settings.a1_password),m.R7$(4),m.Y8G("disabled",!t.view.isEditMode()),m.R50("ngModel",t.model.data.settings.a1_sender),m.R7$(2),m.Y8G("disabled",!t.view.isEditMode()))},dependencies:[n.me,n.BC,n.vS,Ya.B,x.W],encapsulation:2})}return MailboxesA1SmsTrafficManager})(),za=(()=>{class MailboxesA1TrafficManager{constructor(e,t,s,i,n,l,o,a){this.metadata=e,this.language=t,this.backend=s,this.model=i,this.modal=n,this.toast=l,this.view=o,this.ViewContainerRef=a,this.valid_connection=!1}ngOnInit(){0===this.model.getField("settings").length&&this.model.setField("settings",{api_key:"",imap_pop3_display_name:"",imap_pop3_username:"",reply_to:""})}testConnection(){this.modal.openModal("MailboxesmanagerTestModal",!0,this.ViewContainerRef.injector)}static#e=this.ɵfac=function(e){return new(e||MailboxesA1TrafficManager)(m.rXU(f.yu),m.rXU(b.B),m.rXU(p.H),m.rXU(oa.g),m.rXU(R.y),m.rXU(v.o),m.rXU(_n.U),m.rXU(m.c1b))};static#t=this.ɵcmp=m.VBU({type:MailboxesA1TrafficManager,selectors:[["mailboxes-a1-traffic-manager"]],inputs:{valid_connection:"valid_connection"},decls:19,vars:7,consts:[[1,"slds-p-horizontal--medium","slds-p-vertical--small"],["label","LBL_SMS_GATEWAY"],[1,"slds-grid","slds-p-vertical--xx-small"],[1,"slds-form-element","slds-size--1-of-3","slds-p-right--xx-small"],[1,"slds-truncate","slds-form-element__label"],["label","LBL_CONSUMER_KEY"],["type","text",1,"slds-input","ng-pristine","ng-valid",3,"disabled","ngModel","ngModelChange"],[1,"slds-form-element","slds-size--1-of-3","slds-p-left--xx-small"],["label","LBL_CONSUMER_SECRET"],["label","LBL_PHONE_NUMBER_FROM"],["type","button",1,"slds-col--bump-left","slds-button","slds-button--neutral",3,"disabled","click"],["label","LBL_SEND_TEST_EMAIL"]],template:function(e,t){1&e&&(m.j41(0,"div",0)(1,"h1"),m.nrm(2,"system-label",1),m.k0s(),m.j41(3,"div",2)(4,"div",3)(5,"label",4),m.nrm(6,"system-label",5),m.k0s(),m.j41(7,"input",6),m.mxI("ngModelChange",(function(e){return m.DH7(t.model.data.settings.consumer_key,e)||(t.model.data.settings.consumer_key=e),e})),m.k0s()(),m.j41(8,"div",7)(9,"label",4),m.nrm(10,"system-label",8),m.k0s(),m.j41(11,"input",6),m.mxI("ngModelChange",(function(e){return m.DH7(t.model.data.settings.consumer_secret,e)||(t.model.data.settings.consumer_secret=e),e})),m.k0s()(),m.j41(12,"div",7)(13,"label",4),m.nrm(14,"system-label",9),m.k0s(),m.j41(15,"input",6),m.mxI("ngModelChange",(function(e){return m.DH7(t.model.data.settings.phone_number_from,e)||(t.model.data.settings.phone_number_from=e),e})),m.k0s()()(),m.j41(16,"div",2)(17,"button",10),m.bIt("click",(function(){return t.testConnection()})),m.nrm(18,"system-label",11),m.k0s()()()),2&e&&(m.R7$(7),m.Y8G("disabled",!t.view.isEditMode()),m.R50("ngModel",t.model.data.settings.consumer_key),m.R7$(4),m.Y8G("disabled",!t.view.isEditMode()),m.R50("ngModel",t.model.data.settings.consumer_secret),m.R7$(4),m.Y8G("disabled",!t.view.isEditMode()),m.R50("ngModel",t.model.data.settings.phone_number_from),m.R7$(2),m.Y8G("disabled",t.valid_connection))},dependencies:[n.me,n.BC,n.vS,x.W],encapsulation:2})}return MailboxesA1TrafficManager})(),qa=(()=>{class MailboxesEWSTrafficManager{constructor(e,t,s,i,n,l){this.language=e,this.injector=t,this.model=s,this.modal=i,this.view=n,this.backend=l;let o=this.model.getField("settings");(!o||o&&0==o.length)&&this.model.setField("settings",{ews_host:"",ews_username:"",ews_password:"",ews_email:"",ews_folder:"",ews_subscriptionid:"",ews_push:!1})}testConnection(){this.modal.openModal("MailboxesmanagerTestModal",!0,this.injector)}getMailboxes(){let e=new h.B,t=this.model.utils.spiceModel2backend("Mailboxes",this.model.data);return this.backend.postRequest("module/Mailboxes/ews/folders",{},{data:t}).subscribe((t=>{!0===t.result?e.next(t):e.next(!1),e.complete()})),e.asObservable()}displayFoldersModal(){let e=this.modal.await("loading folders");this.getMailboxes().subscribe((t=>{e.emit(!0),!1!==t&&this.modal.openModal("MailboxesEWSSelectFoldersModal",!0,this.injector).subscribe((e=>{e.instance.setMailboxes(t.mailboxes)}))}),(t=>{e.emit(!0)}))}get foldername(){return this.model.getField("settings").ews_folder?this.model.getField("settings").ews_folder.name:""}static#e=this.ɵfac=function(e){return new(e||MailboxesEWSTrafficManager)(m.rXU(b.B),m.rXU(m.zZn),m.rXU(oa.g),m.rXU(R.y),m.rXU(_n.U),m.rXU(p.H))};static#t=this.ɵcmp=m.VBU({type:MailboxesEWSTrafficManager,selectors:[["mailboxes-mailgun-ews-manager"]],decls:42,vars:13,consts:[[1,"slds-m-vertical--xx-small","slds-box--border"],[1,"slds-p-around--x-small"],["label","LBL_EWS"],[1,"slds-grid","slds-p-vertical--xx-small"],[1,"slds-form-element","slds-size--1-of-1"],[1,"slds-truncate","slds-form-element__label"],["label","LBL_HOST"],["type","text",1,"slds-input",3,"disabled","ngModel","ngModelChange"],[1,"slds-form-element","slds-size--1-of-2","slds-p-right--xx-small"],["label","LBL_USER_NAME"],["type","text",1,"slds-input",3,"ngModel","disabled","ngModelChange"],[1,"slds-form-element","slds-size--1-of-2","slds-p-left--xx-small"],["label","LBL_PASSWORD"],[3,"ngModel","disabled","ngModelChange"],["label","LBL_MAILBOX_EMAIL"],["label","LBL_MAILBOX_FOLDER"],["type","text","disabled","",1,"slds-input",3,"ngModel"],["label","LBL_PUSH"],[3,"ngModel","ngModelChange"],["label","LBL_SUBSCRIPTION"],["type","text","disabled","",1,"slds-input",3,"ngModel","ngModelChange"],["type","button",1,"slds-col--bump-left","slds-button","slds-button--neutral",3,"disabled","click"],["label","LBL_EWS_SELECT_FOLDERS"],["label","LBL_TEST_CONNECTION"]],template:function(e,t){1&e&&(m.j41(0,"div",0)(1,"div",1)(2,"h1"),m.nrm(3,"system-label",2),m.k0s(),m.j41(4,"div",3)(5,"div",4)(6,"label",5),m.nrm(7,"system-label",6),m.k0s(),m.j41(8,"input",7),m.mxI("ngModelChange",(function(e){return m.DH7(t.model.data.settings.ews_host,e)||(t.model.data.settings.ews_host=e),e})),m.k0s()()(),m.j41(9,"div",3)(10,"div",8)(11,"label",5),m.nrm(12,"system-label",9),m.k0s(),m.j41(13,"input",10),m.mxI("ngModelChange",(function(e){return m.DH7(t.model.data.settings.ews_username,e)||(t.model.data.settings.ews_username=e),e})),m.k0s()(),m.j41(14,"div",11)(15,"label",5),m.nrm(16,"system-label",12),m.k0s(),m.j41(17,"system-input-password",13),m.mxI("ngModelChange",(function(e){return m.DH7(t.model.data.settings.ews_password,e)||(t.model.data.settings.ews_password=e),e})),m.k0s()()(),m.j41(18,"div",3)(19,"div",8)(20,"label",5),m.nrm(21,"system-label",14),m.k0s(),m.j41(22,"input",10),m.mxI("ngModelChange",(function(e){return m.DH7(t.model.data.settings.ews_email,e)||(t.model.data.settings.ews_email=e),e})),m.k0s()(),m.j41(23,"div",11)(24,"label",5),m.nrm(25,"system-label",15),m.k0s(),m.nrm(26,"input",16),m.k0s()(),m.j41(27,"div",3)(28,"div",8)(29,"label",5),m.nrm(30,"system-label",17),m.k0s(),m.j41(31,"div")(32,"system-checkbox",18),m.mxI("ngModelChange",(function(e){return m.DH7(t.model.data.settings.ews_push,e)||(t.model.data.settings.ews_push=e),e})),m.k0s()()(),m.j41(33,"div",11)(34,"label",5),m.nrm(35,"system-label",19),m.k0s(),m.j41(36,"input",20),m.mxI("ngModelChange",(function(e){return m.DH7(t.model.data.settings.ews_subscriptionid,e)||(t.model.data.settings.ews_subscriptionid=e),e})),m.k0s()()(),m.j41(37,"div",3)(38,"button",21),m.bIt("click",(function(){return t.displayFoldersModal()})),m.nrm(39,"system-label",22),m.k0s(),m.j41(40,"button",21),m.bIt("click",(function(){return t.testConnection()})),m.nrm(41,"system-label",23),m.k0s()()()()),2&e&&(m.R7$(8),m.Y8G("disabled",!t.view.isEditMode()),m.R50("ngModel",t.model.data.settings.ews_host),m.R7$(5),m.R50("ngModel",t.model.data.settings.ews_username),m.Y8G("disabled",!t.view.isEditMode()),m.R7$(4),m.R50("ngModel",t.model.data.settings.ews_password),m.Y8G("disabled",!t.view.isEditMode()),m.R7$(5),m.R50("ngModel",t.model.data.settings.ews_email),m.Y8G("disabled",!t.view.isEditMode()),m.R7$(4),m.Y8G("ngModel",t.foldername),m.R7$(6),m.R50("ngModel",t.model.data.settings.ews_push),m.R7$(4),m.R50("ngModel",t.model.data.settings.ews_subscriptionid),m.R7$(2),m.Y8G("disabled",!t.view.isEditMode()),m.R7$(2),m.Y8G("disabled",!t.view.isEditMode()))},dependencies:[n.me,n.BC,n.vS,be.f,Ya.B,x.W],encapsulation:2})}return MailboxesEWSTrafficManager})();function Pa(e,t){if(1&e&&(m.j41(0,"option",10),m.EFF(1),m.k0s()),2&e){const e=t.$implicit;m.FS9("value",e.id),m.R7$(),m.JRh(e.name)}}let Ja=(()=>{class MailboxesEWSSelectFoldersModal{constructor(e,t){this.language=e,this.model=t,this.mailboxes=[]}setMailboxes(e){this.mailboxes=e}get mailbox(){try{return this.model.getField("settings").ews_folder.id}catch(e){return""}}set mailbox(e){let t=this.model.getField("settings");t.ews_folder=this.mailboxes.find((t=>t.id==e)),this.model.setField("settings",t)}close(){this.self.destroy()}static#e=this.ɵfac=function(e){return new(e||MailboxesEWSSelectFoldersModal)(m.rXU(b.B),m.rXU(oa.g))};static#t=this.ɵcmp=m.VBU({type:MailboxesEWSSelectFoldersModal,selectors:[["mailbox-folders-modal"]],decls:14,vars:4,consts:[[3,"close"],[1,"slds-grid","slds-wrap","slds-grid--pull-padded"],[1,"slds-col"],[1,"slds-form-element"],[1,"slds-truncate","slds-form-element__label"],["label","LBL_INBOX_FOLDER"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_OK"],[3,"value"]],template:function(e,t){1&e&&(m.j41(0,"system-modal")(1,"system-modal-header",0),m.bIt("close",(function(){return t.close()})),m.EFF(2),m.k0s(),m.j41(3,"system-modal-content")(4,"div",1)(5,"div",2)(6,"div",3)(7,"label",4),m.nrm(8,"system-label",5),m.k0s(),m.j41(9,"select",6),m.mxI("ngModelChange",(function(e){return m.DH7(t.mailbox,e)||(t.mailbox=e),e})),m.DNE(10,Pa,2,2,"option",7),m.k0s()()()()(),m.j41(11,"system-modal-footer")(12,"button",8),m.bIt("click",(function(){return t.close()})),m.nrm(13,"system-label",9),m.k0s()()()),2&e&&(m.R7$(2),m.JRh(t.language.getLabel(t.model.module,"LBL_MAILBOX_FOLDERS")),m.R7$(7),m.Y8G("disabled",0==t.mailboxes.length),m.R50("ngModel",t.mailbox),m.R7$(),m.Y8G("ngForOf",t.mailboxes))},dependencies:[i.Sq,n.xH,n.y7,n.wz,n.BC,n.vS,x.W,qe.D,Pe.I,Je.Q,We.C],encapsulation:2})}return MailboxesEWSSelectFoldersModal})(),Wa=(()=>{class MailboxesImpersonatedEWSTrafficManager{constructor(e,t,s,i,n,l){this.language=e,this.injector=t,this.model=s,this.modal=i,this.view=n,this.backend=l;let o=this.model.getField("settings");(!o||o&&0==o.length)&&(this.model.data.settings={user_name:""})}testConnection(){this.modal.openModal("MailboxesmanagerTestModal",!0,this.injector)}getMailboxes(){let e=new h.B,t=this.model.utils.spiceModel2backend("Mailboxes",this.model.data);return this.backend.postRequest("module/Mailboxes/ews/folders",{},{data:t}).subscribe((t=>{!0===t.result?e.next(t):e.next(!1),e.complete()})),e.asObservable()}static#e=this.ɵfac=function(e){return new(e||MailboxesImpersonatedEWSTrafficManager)(m.rXU(b.B),m.rXU(m.zZn),m.rXU(oa.g),m.rXU(R.y),m.rXU(_n.U),m.rXU(p.H))};static#t=this.ɵcmp=m.VBU({type:MailboxesImpersonatedEWSTrafficManager,selectors:[["ng-component"]],decls:12,vars:3,consts:[[1,"slds-m-vertical--xx-small","slds-box--border"],[1,"slds-p-around--x-small"],["label","LBL_IMPERSONATED_EWS"],[1,"slds-grid","slds-p-vertical--xx-small"],[1,"slds-form-element","slds-size--1-of-1"],[1,"slds-truncate","slds-form-element__label"],["label","LBL_USER_NAME"],["type","text",1,"slds-input",3,"disabled","ngModel","ngModelChange"],["type","button",1,"slds-col--bump-left","slds-button","slds-button--neutral",3,"disabled","click"],["label","LBL_TEST_CONNECTION"]],template:function(e,t){1&e&&(m.j41(0,"div",0)(1,"div",1)(2,"h1"),m.nrm(3,"system-label",2),m.k0s(),m.j41(4,"div",3)(5,"div",4)(6,"label",5),m.nrm(7,"system-label",6),m.k0s(),m.j41(8,"input",7),m.mxI("ngModelChange",(function(e){return m.DH7(t.model.data.settings.user_name,e)||(t.model.data.settings.user_name=e),e})),m.k0s()()(),m.j41(9,"div",3)(10,"button",8),m.bIt("click",(function(){return t.testConnection()})),m.nrm(11,"system-label",9),m.k0s()()()()),2&e&&(m.R7$(8),m.Y8G("disabled",!t.view.isEditMode()),m.R50("ngModel",t.model.data.settings.user_name),m.R7$(2),m.Y8G("disabled",!t.view.isEditMode()))},dependencies:[n.me,n.BC,n.vS,x.W],encapsulation:2})}return MailboxesImpersonatedEWSTrafficManager})(),Ka=(()=>{class MailboxManagerAddDialog{constructor(e,t,s,i,n){this.backend=e,this.metadata=t,this.language=s,this.modelutilities=i,this.model=n,this.closedialog=new m.bkB,this.mailbox_name="",this.self=null,this.saving=!1}closeDialog(){this.closedialog.emit(!1),this.self.destroy()}add(){this.model.module="Mailboxes",this.model.id=this.modelutilities.generateGuid(),this.model.setField("name",this.mailbox_name),this.saving=!0,this.model.save().subscribe((()=>{this.closedialog.emit(this.model.data),this.self.destroy()}))}getComponents(){return this.metadata.getSystemComponents()}static#e=this.ɵfac=function(e){return new(e||MailboxManagerAddDialog)(m.rXU(p.H),m.rXU(f.yu),m.rXU(b.B),m.rXU(y.g),m.rXU(oa.g))};static#t=this.ɵcmp=m.VBU({type:MailboxManagerAddDialog,selectors:[["mailboxmanager-add-dialog"]],inputs:{mailboxes:"mailboxes"},features:[m.Jv_([oa.g])],decls:15,vars:4,consts:[[3,"close"],["label","LBL_ADD"],["label","LBL_MAILBOX"],[1,"slds-form-element"],[1,"slds-form-element__label"],[1,"slds-form-element__control"],["type","text","placeholder","name",1,"slds-input",3,"ngModel","disabled","ngModelChange"],[1,"slds-button","slds-button--neutral",3,"disabled","click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"disabled","click"]],template:function(e,t){1&e&&(m.j41(0,"system-modal")(1,"system-modal-header",0),m.bIt("close",(function(){return t.closeDialog()})),m.nrm(2,"system-label",1)(3,"system-label",2),m.k0s(),m.j41(4,"system-modal-content")(5,"div",3)(6,"label",4),m.nrm(7,"system-label",2),m.k0s(),m.j41(8,"div",5)(9,"input",6),m.mxI("ngModelChange",(function(e){return m.DH7(t.mailbox_name,e)||(t.mailbox_name=e),e})),m.k0s()()()(),m.j41(10,"system-modal-footer")(11,"button",7),m.bIt("click",(function(){return t.closeDialog()})),m.nrm(12,"system-label",8),m.k0s(),m.j41(13,"button",9),m.bIt("click",(function(){return t.add()})),m.nrm(14,"system-label",1),m.k0s()()()),2&e&&(m.R7$(9),m.R50("ngModel",t.mailbox_name),m.Y8G("disabled",t.saving),m.R7$(2),m.Y8G("disabled",t.saving),m.R7$(2),m.Y8G("disabled",t.saving))},dependencies:[n.me,n.BC,n.vS,x.W,qe.D,Pe.I,Je.Q,We.C],encapsulation:2})}return MailboxManagerAddDialog})();function Qa(e,t){if(1&e&&(m.j41(0,"option",12),m.EFF(1),m.k0s()),2&e){const e=t.$implicit;m.FS9("value",e),m.R7$(),m.JRh(e)}}function Za(e,t){if(1&e&&(m.j41(0,"option",12),m.EFF(1),m.k0s()),2&e){const e=t.$implicit;m.FS9("value",e),m.R7$(),m.JRh(e)}}function ed(e,t){if(1&e&&(m.j41(0,"option",12),m.EFF(1),m.k0s()),2&e){const e=t.$implicit;m.FS9("value",e),m.R7$(),m.JRh(e)}}let td=(()=>{class MailboxesIMAPSMTPSelectFoldersModal{constructor(e,t){this.language=e,this.model=t,this.mailboxes=[]}setMailboxes(e){this.mailboxes=e}close(){this.self.destroy()}static#e=this.ɵfac=function(e){return new(e||MailboxesIMAPSMTPSelectFoldersModal)(m.rXU(b.B),m.rXU(oa.g))};static#t=this.ɵcmp=m.VBU({type:MailboxesIMAPSMTPSelectFoldersModal,selectors:[["mailbox-folders-modal"]],decls:24,vars:10,consts:[[3,"close"],[1,"slds-grid","slds-wrap","slds-grid--pull-padded"],[1,"slds-col"],[1,"slds-form-element"],[1,"slds-truncate","slds-form-element__label"],["label","LBL_INBOX_FOLDER"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["label","LBL_SENT_FOLDER"],["label","LBL_TRASH_FOLDER"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_OK"],[3,"value"]],template:function(e,t){1&e&&(m.j41(0,"system-modal")(1,"system-modal-header",0),m.bIt("close",(function(){return t.close()})),m.EFF(2),m.k0s(),m.j41(3,"system-modal-content")(4,"div",1)(5,"div",2)(6,"div",3)(7,"label",4),m.nrm(8,"system-label",5),m.k0s(),m.j41(9,"select",6),m.mxI("ngModelChange",(function(e){return m.DH7(t.model.data.settings.imap_inbox_dir,e)||(t.model.data.settings.imap_inbox_dir=e),e})),m.DNE(10,Qa,2,2,"option",7),m.k0s()(),m.j41(11,"div",3)(12,"label",4),m.nrm(13,"system-label",8),m.k0s(),m.j41(14,"select",6),m.mxI("ngModelChange",(function(e){return m.DH7(t.model.data.settings.imap_sent_dir,e)||(t.model.data.settings.imap_sent_dir=e),e})),m.DNE(15,Za,2,2,"option",7),m.k0s()(),m.j41(16,"div",3)(17,"label",4),m.nrm(18,"system-label",9),m.k0s(),m.j41(19,"select",6),m.mxI("ngModelChange",(function(e){return m.DH7(t.model.data.settings.imap_trash_dir,e)||(t.model.data.settings.imap_trash_dir=e),e})),m.DNE(20,ed,2,2,"option",7),m.k0s()()()()(),m.j41(21,"system-modal-footer")(22,"button",10),m.bIt("click",(function(){return t.close()})),m.nrm(23,"system-label",11),m.k0s()()()),2&e&&(m.R7$(2),m.JRh(t.language.getLabel(t.model.module,"LBL_MAILBOX_FOLDERS")),m.R7$(7),m.Y8G("disabled",0==t.mailboxes.length),m.R50("ngModel",t.model.data.settings.imap_inbox_dir),m.R7$(),m.Y8G("ngForOf",t.mailboxes),m.R7$(4),m.Y8G("disabled",0==t.mailboxes.length),m.R50("ngModel",t.model.data.settings.imap_sent_dir),m.R7$(),m.Y8G("ngForOf",t.mailboxes),m.R7$(4),m.Y8G("disabled",0==t.mailboxes.length),m.R50("ngModel",t.model.data.settings.imap_trash_dir),m.R7$(),m.Y8G("ngForOf",t.mailboxes))},dependencies:[i.Sq,n.xH,n.y7,n.wz,n.BC,n.vS,x.W,qe.D,Pe.I,Je.Q,We.C],encapsulation:2})}return MailboxesIMAPSMTPSelectFoldersModal})();function sd(e,t){if(1&e){const e=m.RV6();m.j41(0,"div",0)(1,"div",1)(2,"h1"),m.nrm(3,"system-label",19),m.k0s(),m.j41(4,"div",20)(5,"div",8)(6,"label",5),m.nrm(7,"system-label",21),m.k0s(),m.j41(8,"select",22),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.model.data.settings.imap_pop3_protocol_type,t)||(s.model.data.settings.imap_pop3_protocol_type=t),m.Njj(t)})),m.j41(9,"option",23),m.nrm(10,"system-label",19),m.k0s(),m.j41(11,"option",24),m.nrm(12,"system-label",25),m.k0s()()(),m.j41(13,"div",10)(14,"label",5),m.nrm(15,"system-label",26),m.k0s(),m.j41(16,"input",27),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.model.data.settings.imap_pop3_host,t)||(s.model.data.settings.imap_pop3_host=t),m.Njj(t)})),m.k0s()()(),m.j41(17,"div",20)(18,"div",8)(19,"label",5),m.nrm(20,"system-label",28),m.k0s(),m.j41(21,"input",27),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.model.data.settings.imap_pop3_port,t)||(s.model.data.settings.imap_pop3_port=t),m.Njj(t)})),m.k0s()(),m.j41(22,"div",10)(23,"label",5),m.nrm(24,"system-label",29),m.k0s(),m.j41(25,"select",22),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.model.data.settings.imap_pop3_encryption,t)||(s.model.data.settings.imap_pop3_encryption=t),m.Njj(t)})),m.j41(26,"option",30),m.nrm(27,"system-label",31),m.k0s(),m.j41(28,"option",32),m.nrm(29,"system-label",33),m.k0s(),m.j41(30,"option",34),m.nrm(31,"system-label",35),m.k0s()()()(),m.j41(32,"div",36)(33,"div",37)(34,"label",5),m.nrm(35,"system-label",38),m.k0s(),m.nrm(36,"input",39),m.k0s(),m.j41(37,"div",37)(38,"label",5),m.nrm(39,"system-label",40),m.k0s(),m.nrm(40,"input",39),m.k0s(),m.j41(41,"div",37)(42,"label",5),m.nrm(43,"system-label",41),m.k0s(),m.nrm(44,"input",39),m.k0s()(),m.j41(45,"div",36)(46,"div",10)(47,"div",37)(48,"label",5),m.nrm(49,"system-label",42),m.k0s()(),m.j41(50,"div",37)(51,"system-checkbox",43),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.model.data.settings.imap_delete_after_fetch,t)||(s.model.data.settings.imap_delete_after_fetch=t),m.Njj(t)})),m.k0s()()()(),m.j41(52,"div",15)(53,"button",44),m.bIt("click",(function(){m.eBV(e);const t=m.XpG();return m.Njj(t.displayFoldersModal())})),m.nrm(54,"system-label",45),m.k0s()()()()}if(2&e){const e=m.XpG();m.R7$(8),m.Y8G("disabled",!e.view.isEditMode()),m.R50("ngModel",e.model.data.settings.imap_pop3_protocol_type),m.R7$(8),m.R50("ngModel",e.model.data.settings.imap_pop3_host),m.Y8G("disabled",!e.view.isEditMode()),m.R7$(5),m.R50("ngModel",e.model.data.settings.imap_pop3_port),m.Y8G("disabled",!e.view.isEditMode()),m.R7$(4),m.Y8G("disabled",!e.view.isEditMode()),m.R50("ngModel",e.model.data.settings.imap_pop3_encryption),m.R7$(11),m.Y8G("ngModel",e.model.data.settings.imap_inbox_dir),m.R7$(4),m.Y8G("ngModel",e.model.data.settings.imap_sent_dir),m.R7$(4),m.Y8G("ngModel",e.model.data.settings.imap_trash_dir),m.R7$(7),m.Y8G("disabled",!e.view.isEditMode()),m.R50("ngModel",e.model.data.settings.imap_delete_after_fetch),m.R7$(2),m.Y8G("disabled",!e.view.isEditMode())}}function id(e,t){if(1&e){const e=m.RV6();m.j41(0,"div",0)(1,"div",1)(2,"h1"),m.nrm(3,"system-label",46),m.k0s(),m.j41(4,"div",20)(5,"div",8)(6,"label",5),m.nrm(7,"system-label",26),m.k0s(),m.j41(8,"input",27),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.model.data.settings.smtp_host,t)||(s.model.data.settings.smtp_host=t),m.Njj(t)})),m.k0s()(),m.j41(9,"div",10)(10,"div",37)(11,"label",5),m.nrm(12,"system-label",47),m.k0s()(),m.j41(13,"div",37)(14,"system-checkbox",48),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.model.data.settings.smtp_auth,t)||(s.model.data.settings.smtp_auth=t),m.Njj(t)})),m.k0s()()()(),m.j41(15,"div",20)(16,"div",8)(17,"label",5),m.nrm(18,"system-label",28),m.k0s(),m.j41(19,"input",27),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.model.data.settings.smtp_port,t)||(s.model.data.settings.smtp_port=t),m.Njj(t)})),m.k0s()(),m.j41(20,"div",10)(21,"label",5),m.nrm(22,"system-label",29),m.k0s(),m.j41(23,"select",22),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.model.data.settings.smtp_encryption,t)||(s.model.data.settings.smtp_encryption=t),m.Njj(t)})),m.j41(24,"option",30),m.nrm(25,"system-label",31),m.k0s(),m.j41(26,"option",32),m.nrm(27,"system-label",33),m.k0s(),m.j41(28,"option",34),m.nrm(29,"system-label",35),m.k0s()()()(),m.j41(30,"div",20)(31,"div",8)(32,"label",5),m.nrm(33,"system-label",49),m.k0s(),m.j41(34,"input",27),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.model.data.settings.reply_to,t)||(s.model.data.settings.reply_to=t),m.Njj(t)})),m.k0s()()(),m.j41(35,"div",20)(36,"div",50)(37,"div",37)(38,"system-checkbox",12),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.model.data.settings.smtp_verify_peer,t)||(s.model.data.settings.smtp_verify_peer=t),m.Njj(t)})),m.k0s()()(),m.j41(39,"div",50)(40,"div",37)(41,"system-checkbox",12),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.model.data.smtp_verify_peer_name,t)||(s.model.data.smtp_verify_peer_name=t),m.Njj(t)})),m.nrm(42,"system-label",51),m.k0s()()(),m.j41(43,"div",50)(44,"div",37)(45,"system-checkbox",12),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.model.data.allow_external_delete,t)||(s.model.data.allow_external_delete=t),m.Njj(t)})),m.nrm(46,"system-label",52),m.k0s()()(),m.j41(47,"div",50)(48,"div",37)(49,"system-checkbox",12),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.model.data.smtp_allow_self_signed,t)||(s.model.data.smtp_allow_self_signed=t),m.Njj(t)})),m.nrm(50,"system-label",53),m.k0s()()()()()()}if(2&e){const e=m.XpG();m.R7$(8),m.R50("ngModel",e.model.data.settings.smtp_host),m.Y8G("disabled",!e.view.isEditMode()),m.R7$(6),m.Y8G("disabled",!e.view.isEditMode()),m.R50("ngModel",e.model.data.settings.smtp_auth),m.R7$(5),m.R50("ngModel",e.model.data.settings.smtp_port),m.Y8G("disabled",!e.view.isEditMode()),m.R7$(4),m.Y8G("disabled",!e.view.isEditMode()),m.R50("ngModel",e.model.data.settings.smtp_encryption),m.R7$(11),m.R50("ngModel",e.model.data.settings.reply_to),m.Y8G("disabled",!e.view.isEditMode()),m.R7$(4),m.Y8G("disabled",!e.view.isEditMode()),m.R50("ngModel",e.model.data.settings.smtp_verify_peer),m.R7$(3),m.Y8G("disabled",!e.view.isEditMode()),m.R50("ngModel",e.model.data.smtp_verify_peer_name),m.R7$(4),m.Y8G("disabled",!e.view.isEditMode()),m.R50("ngModel",e.model.data.allow_external_delete),m.R7$(4),m.Y8G("disabled",!e.view.isEditMode()),m.R50("ngModel",e.model.data.smtp_allow_self_signed)}}let nd=(()=>{class MailboxesImapSmtpTrafficManager{constructor(e,t,s,i,n,l,o){this.backend=e,this.language=t,this.model=s,this.modal=i,this.toast=n,this.view=l,this.injector=o;let a=this.model.getField("settings");(!a||a&&0==a.length)&&this.model.setField("settings",{imap_inbox_dir:"",imap_pop3_display_name:"",imap_pop3_encryption:"",imap_pop3_host:"",imap_pop3_password:"",imap_pop3_port:"",imap_pop3_protocol_type:"",imap_pop3_username:"",imap_sent_dir:"",imap_trash_dir:"",imap_delete_after_fetch:"",smtp_allow_self_signed:"",smtp_auth:"",smtp_encryption:"",smtp_host:"",smtp_port:"",smtp_verify_peer:"",smtp_verify_peer_name:"",reply_to:"",shared_mailbox_auth_user:"",shared_mailbox_user:""})}get isInbound(){return!!this.model.getFieldValue("inbound_comm")}get isOutbound(){return"no"!=this.model.getFieldValue("outbound_comm")}getMailboxes(){let e=new h.B,t=this.model.utils.spiceModel2backend("Mailboxes",this.model.data);return this.backend.postRequest("module/Mailboxes/imap/folders",{},{data:t}).subscribe((t=>{!0===t.result?e.next(t):e.next(!1),e.complete()})),e.asObservable()}displayFoldersModal(){let e=this.modal.await("loading folders");this.getMailboxes().subscribe((t=>{e.emit(!0),!1!==t&&this.modal.openModal("MailboxesIMAPSMTPSelectFoldersModal",!0,this.injector).subscribe((e=>{e.instance.setMailboxes(t.mailboxes)}),(e=>{this.toast.sendToast(e)}))}))}testConnection(){this.modal.openModal("MailboxesmanagerTestIMAPModal",!0,this.injector)}static#e=this.ɵfac=function(e){return new(e||MailboxesImapSmtpTrafficManager)(m.rXU(p.H),m.rXU(b.B),m.rXU(oa.g),m.rXU(R.y),m.rXU(v.o),m.rXU(_n.U),m.rXU(m.zZn))};static#t=this.ɵcmp=m.VBU({type:MailboxesImapSmtpTrafficManager,selectors:[["mailboxes-imap-smtp-traffic-manager"]],decls:32,vars:12,consts:[[1,"slds-m-vertical--xx-small","slds-box--border"],[1,"slds-p-around--x-small"],["label","LBL_USER"],[1,"slds-grid"],[1,"slds-form-element","slds-size--1-of-1"],[1,"slds-truncate","slds-form-element__label"],["label","LBL_DISPLAY_NAME"],["type","text",1,"slds-input",3,"disabled","ngModel","ngModelChange"],[1,"slds-form-element","slds-size--1-of-2","slds-p-right--xx-small"],["label","LBL_USER_NAME"],[1,"slds-form-element","slds-size--1-of-2","slds-p-left--xx-small"],["label","LBL_PASSWORD"],[3,"disabled","ngModel","ngModelChange"],["label","LBL_SHARED_MAILBOX_AUTH_USER"],["label","LBL_SHARED_MAILBOX_USER"],[1,"slds-grid","slds-p-vertical--small"],["type","button",1,"slds-col--bump-left","slds-button","slds-button--neutral",3,"click"],["label","LBL_TEST_CONNECTION"],["class","slds-m-vertical--xx-small slds-box--border",4,"ngIf"],["label","LBL_IMAP"],[1,"slds-grid","slds-p-vertical--xx-small"],["label","LBL_PROTOCOL_TYPE"],["type","text",1,"slds-select","ng-pristine","ng-valid",3,"disabled","ngModel","ngModelChange"],["value","imap"],["value","pop3"],["label","LBL_POP3"],["label","LBL_HOST"],["type","text",1,"slds-input",3,"ngModel","disabled","ngModelChange"],["label","LBL_PORT"],["label","LBL_ENCRYPTION"],["value","none"],["label","LBL_NOENCRYPTION"],["value","ssl"],["label","LBL_SSL"],["value","tls"],["label","LBL_TLS"],[1,"slds-grid--vertical","slds-p-vertical--xx-small"],[1,"slds-form-element"],["label","LBL_INBOX_FOLDER"],["disabled","",1,"slds-input",3,"ngModel"],["label","LBL_SENT_FOLDER"],["label","LBL_TRASH_FOLDER"],["label","LBL_IMAP_DELETE_AFTER_FETCH"],["id","imap_delete_after_fetch",3,"disabled","ngModel","ngModelChange"],["type","button",1,"slds-col--bump-left","slds-button","slds-button--neutral",3,"disabled","click"],["label","LBL_IMAP_SELECT_FOLDERS"],["label","LBL_SMTP"],["label","LBL_AUTHENTICATION"],["id","smtp_auth",3,"disabled","ngModel","ngModelChange"],["label","LBL_REPLY_TO"],[1,"slds-form-element","slds-size--1-of-4"],["label","LBL_SMTP_VERIFY_PEER_NAME"],["label","LBL_IMAP_SMTP_ALLOW_EXTERNAL_DELETE"],["label","LBL_SMTP_ALLOW_SELF_SIGNED"]],template:function(e,t){1&e&&(m.j41(0,"div",0)(1,"div",1)(2,"h1"),m.nrm(3,"system-label",2),m.k0s(),m.j41(4,"div",3)(5,"div",4)(6,"label",5),m.nrm(7,"system-label",6),m.k0s(),m.j41(8,"input",7),m.mxI("ngModelChange",(function(e){return m.DH7(t.model.data.settings.imap_pop3_display_name,e)||(t.model.data.settings.imap_pop3_display_name=e),e})),m.k0s()()(),m.j41(9,"div",3)(10,"div",8)(11,"label",5),m.nrm(12,"system-label",9),m.k0s(),m.j41(13,"input",7),m.mxI("ngModelChange",(function(e){return m.DH7(t.model.data.settings.imap_pop3_username,e)||(t.model.data.settings.imap_pop3_username=e),e})),m.k0s()(),m.j41(14,"div",10)(15,"label",5),m.nrm(16,"system-label",11),m.k0s(),m.j41(17,"system-input-password",12),m.mxI("ngModelChange",(function(e){return m.DH7(t.model.data.settings.imap_pop3_password,e)||(t.model.data.settings.imap_pop3_password=e),e})),m.k0s()()(),m.j41(18,"div",3)(19,"div",8)(20,"label",5),m.nrm(21,"system-label",13),m.k0s(),m.j41(22,"input",7),m.mxI("ngModelChange",(function(e){return m.DH7(t.model.data.settings.shared_mailbox_auth_user,e)||(t.model.data.settings.shared_mailbox_auth_user=e),e})),m.k0s()(),m.j41(23,"div",8)(24,"label",5),m.nrm(25,"system-label",14),m.k0s(),m.j41(26,"input",7),m.mxI("ngModelChange",(function(e){return m.DH7(t.model.data.settings.shared_mailbox_user,e)||(t.model.data.settings.shared_mailbox_user=e),e})),m.k0s()()(),m.j41(27,"div",15)(28,"button",16),m.bIt("click",(function(){return t.testConnection()})),m.nrm(29,"system-label",17),m.k0s()()()(),m.DNE(30,sd,55,14,"div",18)(31,id,51,18,"div",18)),2&e&&(m.R7$(8),m.Y8G("disabled",!t.view.isEditMode()),m.R50("ngModel",t.model.data.settings.imap_pop3_display_name),m.R7$(5),m.Y8G("disabled",!t.view.isEditMode()),m.R50("ngModel",t.model.data.settings.imap_pop3_username),m.R7$(4),m.Y8G("disabled",!t.view.isEditMode()),m.R50("ngModel",t.model.data.settings.imap_pop3_password),m.R7$(5),m.Y8G("disabled",!t.view.isEditMode()),m.R50("ngModel",t.model.data.settings.shared_mailbox_auth_user),m.R7$(4),m.Y8G("disabled",!t.view.isEditMode()),m.R50("ngModel",t.model.data.settings.shared_mailbox_user),m.R7$(4),m.Y8G("ngIf",t.isInbound),m.R7$(),m.Y8G("ngIf",t.isOutbound))},dependencies:[i.bT,n.xH,n.y7,n.me,n.wz,n.BC,n.vS,be.f,Ya.B,x.W],encapsulation:2})}return MailboxesImapSmtpTrafficManager})();var ld=s(12883),od=s(15091);function ad(e,t){if(1&e&&m.nrm(0,"system-dynamic-component",4),2&e){const e=m.XpG();m.Y8G("component",e.transportcomponent)}}let dd=(()=>{class MailboxesTransportManager{constructor(e,t,s,i,n){this.metadata=e,this.language=t,this.model=s,this.view=i,this.configuration=n}get transportcomponent(){let e=this.model.getField("transport");if(!e)return;let t=this.configuration.getData("mailboxtransports").find((t=>t.name==e));return t?t.component:void 0}static#e=this.ɵfac=function(e){return new(e||MailboxesTransportManager)(m.rXU(f.yu),m.rXU(b.B),m.rXU(oa.g),m.rXU(_n.U),m.rXU(M.i))};static#t=this.ɵcmp=m.VBU({type:MailboxesTransportManager,selectors:[["mailboxes-transport-manager"]],decls:4,vars:1,consts:[["titlelabel","LBL_TRANSPORT"],[1,"slds-p-around--x-small"],["field","transport"],[3,"component",4,"ngIf"],[3,"component"]],template:function(e,t){1&e&&(m.j41(0,"system-section",0)(1,"div",1),m.nrm(2,"field-container",2),m.DNE(3,ad,1,1,"system-dynamic-component",3),m.k0s()()),2&e&&(m.R7$(3),m.Y8G("ngIf",t.transportcomponent))},dependencies:[i.bT,Cl.s,ld.v,od.y],encapsulation:2})}return MailboxesTransportManager})();function rd(e,t){if(1&e&&(m.j41(0,"option",22),m.EFF(1),m.k0s()),2&e){const e=t.$implicit;m.FS9("value",e.processor_class),m.R7$(),m.SpI(" ",e.name," ")}}function cd(e,t){if(1&e&&(m.j41(0,"option",22),m.EFF(1),m.k0s()),2&e){const e=t.$implicit;m.FS9("value",e),m.R7$(),m.SpI(" ",e," ")}}function md(e,t){if(1&e&&(m.qex(0),m.DNE(1,cd,2,2,"option",14),m.bVm()),2&e){const e=m.XpG(2).$implicit,t=m.XpG(2);m.R7$(),m.Y8G("ngForOf",t.getProcessorMethods(e.processor_class))}}function ud(e,t){if(1&e){const e=m.RV6();m.j41(0,"tr")(1,"input",11),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG().$implicit;return m.DH7(s.id,t)||(s.id=t),m.Njj(t)})),m.k0s(),m.j41(2,"td",12)(3,"select",13),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG().$implicit;return m.DH7(s.processor_class,t)||(s.processor_class=t),m.Njj(t)})),m.DNE(4,rd,2,2,"option",14),m.k0s()(),m.j41(5,"td",15)(6,"select",13),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG().$implicit;return m.DH7(s.processor_method,t)||(s.processor_method=t),m.Njj(t)})),m.DNE(7,md,2,1,"ng-container",10),m.k0s()(),m.j41(8,"td",16)(9,"input",17),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG().$implicit;return m.DH7(s.priority,t)||(s.priority=t),m.Njj(t)})),m.k0s()(),m.j41(10,"td",18)(11,"input",19),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG().$implicit;return m.DH7(s.stop_on_success,t)||(s.stop_on_success=t),m.Njj(t)})),m.k0s()(),m.j41(12,"td",20)(13,"button",21),m.bIt("click",(function(){m.eBV(e);const t=m.XpG().$implicit,s=m.XpG(2);return m.Njj(s.removeProcessor(t.id))})),m.EFF(14,"X "),m.k0s()()()}if(2&e){const e=m.XpG().$implicit,t=m.XpG(2);m.R7$(),m.R50("ngModel",e.id),m.R7$(2),m.Y8G("disabled",0==t.processors.length),m.R50("ngModel",e.processor_class),m.R7$(),m.Y8G("ngForOf",t.processors),m.R7$(2),m.Y8G("disabled",!e.processor_class),m.R50("ngModel",e.processor_method),m.R7$(),m.Y8G("ngIf",e.processor_class),m.R7$(2),m.R50("ngModel",e.priority),m.R7$(2),m.R50("ngModel",e.stop_on_success)}}function gd(e,t){if(1&e&&(m.qex(0),m.DNE(1,ud,15,9,"tr",10),m.bVm()),2&e){const e=t.$implicit;m.R7$(),m.Y8G("ngIf",!e.deleted)}}function hd(e,t){if(1&e&&(m.j41(0,"table",2)(1,"thead")(2,"tr",3)(3,"th",4)(4,"div",5),m.EFF(5,"Class"),m.k0s()(),m.j41(6,"th",4)(7,"div",6),m.EFF(8,"Method"),m.k0s()(),m.j41(9,"th",4)(10,"div",7),m.EFF(11,"Priority"),m.k0s()(),m.j41(12,"th",4)(13,"div",8),m.EFF(14,"Stop on success "),m.k0s()()()(),m.j41(15,"tbody"),m.DNE(16,gd,2,1,"ng-container",9),m.k0s()()),2&e){const e=m.XpG();m.R7$(16),m.Y8G("ngForOf",e.model.data.mailbox_processors)}}let pd=(()=>{class MailboxesProcessors{constructor(e,t,s,i,n){this.metadata=e,this.language=t,this.backend=s,this.model=i,this.view=n,this.processors=[],this.model.module="Mailboxes",this.view.isEditable=!0,this.view.setEditMode(),this.getProcessors()}addProcessor(){this.model.getField("mailbox_processors")||this.model.setField("mailbox_processors",[]),this.model.getField("mailbox_processors").push({id:this.model.generateGuid(),class:"",method:"",priority:"",stop_on_success:"",deleted:!1})}removeProcessor(e){this.model.getField("mailbox_processors").forEach((function(t){t.id===e&&(t.deleted=!0)}))}get processorsvisible(){return this.model.getField("mailbox_processors").length>0}getProcessorMethods(e){for(let t of this.processors)if(t.processor_class==e)return t.methods;return[]}getProcessors(){let e=new h.B;return this.backend.getRequest("module/Mailboxes/processors").subscribe((t=>{!0===t.result&&(this.processors=t.processors),e.next(t),e.complete()})),e.asObservable()}static#e=this.ɵfac=function(e){return new(e||MailboxesProcessors)(m.rXU(f.yu),m.rXU(b.B),m.rXU(p.H),m.rXU(oa.g),m.rXU(_n.U))};static#t=this.ɵcmp=m.VBU({type:MailboxesProcessors,selectors:[["mailboxes-processors"]],decls:3,vars:1,consts:[["class","slds-table slds-table_bordered slds-table_cell-buffer",4,"ngIf"],["type","button",1,"slds-col--bump-left","slds-button","slds-button--neutral",3,"click"],[1,"slds-table","slds-table_bordered","slds-table_cell-buffer"],[1,"slds-text-title"],["scope","col"],["title","Class",1,"slds-truncate"],["title","Method",1,"slds-truncate"],["title","Priority",1,"slds-truncate"],["title","Stop on success",1,"slds-truncate"],[4,"ngFor","ngForOf"],[4,"ngIf"],["type","hidden",3,"ngModel","ngModelChange"],["scope","row","data-label","Class"],["type","text",1,"slds-select","ng-pristine","ng-valid",3,"disabled","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["scope","row","data-label","Method"],["scope","row","data-label","Priority"],["title","Priority",1,"slds-input","ng-pristine","ng-valid","ng-touched",3,"ngModel","ngModelChange"],["scope","row","data-label","Stop on success"],["title","Stop on success",1,"slds-input","ng-pristine","ng-valid","ng-touched",3,"ngModel","ngModelChange"],["scope","row"],[1,"slds-button","slds-button_destructive",3,"click"],[3,"value"]],template:function(e,t){1&e&&(m.DNE(0,hd,17,1,"table",0),m.j41(1,"button",1),m.bIt("click",(function(){return t.addProcessor()})),m.EFF(2," Add Processor\n"),m.k0s()),2&e&&m.Y8G("ngIf",t.processorsvisible)},dependencies:[i.Sq,i.bT,n.xH,n.y7,n.me,n.wz,n.BC,n.vS],encapsulation:2})}return MailboxesProcessors})();function fd(e,t){if(1&e&&(m.j41(0,"option",22),m.EFF(1),m.k0s()),2&e){const e=t.$implicit;m.Y8G("value",e.id),m.R7$(),m.SpI("",e.name," ")}}function bd(e,t){1&e&&(m.j41(0,"div",23),m.nrm(1,"system-spinner"),m.k0s())}function yd(e,t){1&e&&m.nrm(0,"system-utility-icon",34),2&e&&m.Y8G("icon","favorite")("size","xx-small")}function _d(e,t){if(1&e){const e=m.RV6();m.j41(0,"system-utility-icon",35),m.bIt("click",(function(){m.eBV(e);const t=m.XpG().$implicit,s=m.XpG(2);return m.Njj(s.addCategory(t))})),m.k0s()}2&e&&m.Y8G("icon","add")("size","xx-small")}function kd(e,t){1&e&&m.nrm(0,"system-utility-icon",11),2&e&&m.Y8G("icon","chevronright")("size","xx-small")}const vd=(e,t)=>({"slds-theme--shade":e,"slds-theme_alert-texture":t});function Rd(e,t){if(1&e){const e=m.RV6();m.j41(0,"div",27)(1,"div",28),m.bIt("mouseenter",(function(){const t=m.eBV(e).$implicit,s=m.XpG(2);return m.Njj(s.select(t))})),m.j41(2,"span",29),m.bIt("click",(function(){const t=m.eBV(e).$implicit,s=m.XpG(2);return m.Njj(s.edit(t))})),m.EFF(3),m.k0s(),m.DNE(4,yd,1,2,"system-utility-icon",30),m.j41(5,"div",31),m.DNE(6,_d,1,2,"system-utility-icon",32)(7,kd,1,2,"system-utility-icon",33),m.k0s()()()}if(2&e){const e=t.$implicit,s=m.XpG(2);m.Y8G("ngClass",m.l_i(5,vd,s.isCategorySelected(e)||e==s.edit_category,e==s.edit_category)),m.R7$(3),m.JRh(e.name),m.R7$(),m.Y8G("ngIf",1==e.favorite),m.R7$(2),m.Y8G("ngIf",e.level<s.max_levels-1),m.R7$(),m.Y8G("ngIf",e.childs)}}function Md(e,t){if(1&e){const e=m.RV6();m.j41(0,"div",36)(1,"system-utility-icon",35),m.bIt("click",(function(){m.eBV(e);const t=m.XpG(2);return m.Njj(t.addCategory())})),m.k0s()()}2&e&&(m.R7$(),m.Y8G("icon","add")("size","xx-small"))}const jd=e=>({width:e}),Ld=e=>({"slds-border--right":e});function xd(e,t){if(1&e&&(m.j41(0,"div",24),m.DNE(1,Rd,8,8,"div",25)(2,Md,2,2,"div",26),m.k0s()),2&e){const e=t.$implicit,s=t.index,i=m.XpG();m.Y8G("ngStyle",m.eq3(4,jd,100/i.levels.length+"%"))("ngClass",m.eq3(6,Ld,s<i.max_levels-1)),m.R7$(),m.Y8G("ngForOf",e),m.R7$(),m.Y8G("ngIf",0==s)}}function Id(e,t){if(1&e){const e=m.RV6();m.j41(0,"article",37)(1,"div",38)(2,"header",17)(3,"h2"),m.EFF(4,"Edit Category"),m.k0s()(),m.j41(5,"system-utility-icon",35),m.bIt("click",(function(){m.eBV(e);const t=m.XpG();return m.Njj(t.removeCategory(t.edit_category))})),m.k0s()(),m.j41(6,"div",39)(7,"div",40)(8,"label",3),m.EFF(9,"Name:"),m.k0s(),m.j41(10,"div",41)(11,"input",42),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.edit_category.name,t)||(s.edit_category.name=t),m.Njj(t)})),m.k0s()()(),m.j41(12,"div",40)(13,"label",3),m.EFF(14,"Key:"),m.k0s(),m.j41(15,"div",41)(16,"input",42),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.edit_category.keyname,t)||(s.edit_category.keyname=t),m.Njj(t)})),m.k0s()()(),m.j41(17,"div",40)(18,"div",43)(19,"div",44)(20,"span",45)(21,"input",46),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.edit_category.favorite,t)||(s.edit_category.favorite=t),m.Njj(t)})),m.k0s(),m.j41(22,"label",47),m.nrm(23,"span",48),m.j41(24,"span",3),m.EFF(25,"Favorite"),m.k0s()()(),m.j41(26,"span",45)(27,"input",49),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.edit_category.selectable,t)||(s.edit_category.selectable=t),m.Njj(t)})),m.k0s(),m.j41(28,"label",50),m.nrm(29,"span",48),m.j41(30,"span",3),m.EFF(31,"Selectable"),m.k0s()()()()()()()()}if(2&e){const e=m.XpG();m.R7$(5),m.Y8G("icon","close")("size","xx-small"),m.R7$(6),m.R50("ngModel",e.edit_category.name),m.R7$(5),m.R50("ngModel",e.edit_category.keyname),m.R7$(5),m.R50("ngModel",e.edit_category.favorite),m.R7$(6),m.R50("ngModel",e.edit_category.selectable)}}let Dd=(()=>{class SelectTreeComponent{constructor(e,t,s,i,n,l,o){this.backend=e,this.metadata=t,this.language=s,this.config=i,this.utils=n,this.toast=l,this.modalservice=o,this.currentSelectTree="",this.category_tree=[],this.levels=[],this.max_levels=4,this.loading=!0,this.selected_categorys=[],this.edit_category=null,this.service_queues=[],this.trees=[],this.loadTrees(!0)}addTree(){this.modalservice.openModal("SelectTreeAddDialog").subscribe((e=>{e.instance.tree$.subscribe((e=>{this.updateTree(e)}))}))}updateTree(e){this.loadTrees(),this.currentSelectTree=e.id,this.loadSelectTree(this.currentSelectTree)}loadTrees(e=!1){this.config.getData("select_trees")||this.backend.getRequest("configuration/spiceui/core/selecttree/trees").subscribe((t=>{this.trees=t,e&&(this.trees.length>0?(this.currentSelectTree=this.trees[0].id,this.loadSelectTree(this.currentSelectTree)):this.loading=!1)}))}loadSelectTree(e){this.edit_category=null,this.backend.getRequest("configuration/spiceui/core/selecttree/tree/"+e).subscribe((e=>{this.config.setData("select_tree",e),this.initializeTree(e)}))}initializeTree(e){this.category_tree=e;for(let e=0;e<this.max_levels;e++)this.levels[e]=[];this.levels[0]=this.category_tree,this.loading=!1}resetLevels(e=0){for(let t=e;t<this.max_levels;t++)this.levels[t]=[];this.selected_categorys.splice(e,this.max_levels-e)}select(e){this.selected_categorys[e.level]=e,e.childs?(this.levels[e.level+1]=e.childs,this.resetLevels(e.level+2)):this.resetLevels(e.level+1)}addCategory(e=null){let t={id:this.utils.generateGuid(),name:"new Field...",keyname:null,parent_id:null,tree:this.currentSelectTree,selectable:0,favorite:0,level:0};e?(e.childs||(e.childs=[]),t.parent_id=e.id,t.level=e.level+1,t.level>this.max_levels&&(this.max_levels=t.level),e.childs.push(t),this.levels[e.level+1]=e.childs):(this.category_tree.push(t),this.levels[0]=this.category_tree),this.select(t),this.edit(t)}removeCategory(e){if(e.childs){if(!confirm("Are you sure you want to delete this Category? There are "+e.childs.length+" Subcategories which will be get deleted too!"))return!1}e==this.edit_category&&(this.edit_category=null);let t=0;for(let i of this.category_tree){if(i==e)return this.category_tree.splice(t,1),!0;s(i,e),t++}function s(e,t){if(e.childs)for(let i=0;i<e.childs.length;i++){if(e.childs[i]==t)return e.childs.splice(i,1),!0;s(e.childs[i],t)}return!1}}edit(e){this.selected_categorys[e.level]=e,this.edit_category=e}save(){this.backend.postRequest("configuration/spiceui/core/selecttree/tree",null,this.category_tree).subscribe((e=>{this.config.reloadTaskData("select_tree"),this.toast.sendToast("changes saved")}),(e=>{this.toast.sendAlert("saving failed!"),console.error(e)}))}isCategorySelected(e){for(let t of this.selected_categorys)if(t.id==e.id)return!0;return!1}static#e=this.ɵfac=function(e){return new(e||SelectTreeComponent)(m.rXU(p.H),m.rXU(f.yu),m.rXU(b.B),m.rXU(M.i),m.rXU(y.g),m.rXU(v.o),m.rXU(R.y))};static#t=this.ɵcmp=m.VBU({type:SelectTreeComponent,selectors:[["ng-component"]],decls:26,vars:8,consts:[[1,"slds-p-around--small","slds-border--bottom"],[1,"slds-grid","slds-grid--vertical-align-center","slds-form--inline"],[1,"slds-form-element"],[1,"slds-form-element__label"],["label","LBL_TREE"],[1,"slds-form-element__control",2,"min-width","250px"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","disabled","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],[1,"slds-form-element","slds-col--bump-left"],["type","button",1,"slds-button","slds-button_icon","slds-button_icon-border-filled",3,"click"],[3,"icon","size"],[1,"slds-grid","slds-grid--align-spread","slds-p-around--medium"],[1,"slds-text-heading--medium"],[1,"slds-button","slds-button--brand",3,"click"],[1,"slds-card","slds-m-around--small"],[1,"slds-card__header"],[1,"slds-has-flexi-truncate"],[1,"slds-card__body","slds-card__body_inner","slds-grid"],["class","slds-p-around--small slds-align--absolute-center",4,"ngIf"],["class","slds-col slds-size--1-of-2",3,"ngStyle","ngClass",4,"ngFor","ngForOf"],["class","slds-card slds-m-around--small slds-size--1-of-4 slds-theme--shade slds-theme_alert-texture",4,"ngIf"],[3,"value"],[1,"slds-p-around--small","slds-align--absolute-center"],[1,"slds-col","slds-size--1-of-2",3,"ngStyle","ngClass"],[3,"ngClass",4,"ngFor","ngForOf"],["class","slds-p-around--xx-small",4,"ngIf"],[3,"ngClass"],[1,"slds-grid","slds-grid--vertical-align-center","slds-p-around--xx-small",3,"mouseenter"],[1,"slds-truncate",2,"cursor","pointer",3,"click"],["class","slds-m-left--small",3,"icon","size",4,"ngIf"],[1,"slds-col--bump-left"],["style","cursor:pointer;",3,"icon","size","click",4,"ngIf"],[3,"icon","size",4,"ngIf"],[1,"slds-m-left--small",3,"icon","size"],[2,"cursor","pointer",3,"icon","size","click"],[1,"slds-p-around--xx-small"],[1,"slds-card","slds-m-around--small","slds-size--1-of-4","slds-theme--shade","slds-theme_alert-texture"],[1,"slds-card__header","slds-grid"],[1,"slds-card__body","slds-card__body_inner"],[1,"slds-form-element","slds-m-vertical--xxx-small"],[1,"slds-form-element__control"],["type","text",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-form-element","slds-p-top--small"],[1,"slds-form-element__control","slds-grid"],[1,"slds-checkbox"],["type","checkbox","name","options","id","checkbox-42",3,"ngModel","ngModelChange"],["for","checkbox-42",1,"slds-checkbox__label"],[1,"slds-checkbox_faux"],["type","checkbox","name","options","id","checkbox-49",3,"ngModel","ngModelChange"],["for","checkbox-49",1,"slds-checkbox__label"]],template:function(e,t){1&e&&(m.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"label",3),m.nrm(4,"system-label",4),m.k0s(),m.j41(5,"div",5)(6,"div",6)(7,"select",7),m.mxI("ngModelChange",(function(e){return m.DH7(t.currentSelectTree,e)||(t.currentSelectTree=e),e})),m.bIt("change",(function(){return t.loadSelectTree(t.currentSelectTree)})),m.DNE(8,fd,2,2,"option",8),m.k0s()()()(),m.j41(9,"div",9)(10,"button",10),m.bIt("click",(function(){return t.addTree()})),m.nrm(11,"system-utility-icon",11),m.k0s()()()(),m.j41(12,"div",12)(13,"h2",13),m.EFF(14,"Select Tree"),m.k0s(),m.j41(15,"button",14),m.bIt("click",(function(){return t.save()})),m.EFF(16,"Save"),m.k0s()(),m.j41(17,"article",15)(18,"div",16)(19,"header",17)(20,"h2"),m.EFF(21,"Service Category Tree"),m.k0s()()(),m.j41(22,"div",18),m.DNE(23,bd,2,0,"div",19)(24,xd,3,8,"div",20),m.k0s()(),m.DNE(25,Id,32,6,"article",21)),2&e&&(m.R7$(7),m.R50("ngModel",t.currentSelectTree),m.Y8G("disabled",0==t.trees.length),m.R7$(),m.Y8G("ngForOf",t.trees),m.R7$(3),m.Y8G("icon","add")("size","x-small"),m.R7$(12),m.Y8G("ngIf",t.loading),m.R7$(),m.Y8G("ngForOf",t.levels),m.R7$(),m.Y8G("ngIf",t.edit_category))},dependencies:[i.YU,i.Sq,i.bT,i.B3,n.xH,n.y7,n.me,n.Zm,n.wz,n.BC,n.vS,x.W,Eo.P,u.B],encapsulation:2})}return SelectTreeComponent})(),Ed=(()=>{class SelectTreeAddDialog{constructor(e,t,s,i,n){this.backend=e,this.metadata=t,this.language=s,this.modelutilities=i,this.utils=n,this.tree=null,this.tree$=new m.bkB,this.addType="fieldset",this.addName="",this.fieldsettype="custom"}closeDialog(){this.self.destroy()}add(){this.tree={id:this.utils.generateGuid(),name:this.addName},this.backend.postRequest("configuration/spiceui/core/selecttree/newtree",null,this.tree).subscribe((e=>{this.tree$.emit(this.tree),this.self.destroy()}),(e=>{console.error(e)}))}static#e=this.ɵfac=function(e){return new(e||SelectTreeAddDialog)(m.rXU(p.H),m.rXU(f.yu),m.rXU(b.B),m.rXU(y.g),m.rXU(y.g))};static#t=this.ɵcmp=m.VBU({type:SelectTreeAddDialog,selectors:[["selecttree-add-dialog"]],inputs:{tree:"tree"},outputs:{tree$:"tree"},decls:18,vars:3,consts:[["role","dialog","tabindex","-1","aria-labelledby","header43",1,"slds-modal","slds-fade-in-open"],[1,"slds-modal__container"],[1,"slds-modal__header"],["title","Close",1,"slds-button","slds-modal__close","slds-button--icon-inverse",3,"click"],[3,"icon","size"],["id","header43",1,"slds-text-heading--medium"],["label","LBL_ADD_TREE"],[1,"slds-modal__content","slds-p-around--medium"],[1,"slds-form-element","slds-m-top--small"],[1,"slds-form-element__label"],["label","LBL_TREE_NAME"],[1,"slds-form-element__control"],["type","text","placeholder","name",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-modal__footer"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_ADD"]],template:function(e,t){1&e&&(m.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),m.bIt("click",(function(){return t.closeDialog()})),m.nrm(4,"system-button-icon",4),m.k0s(),m.j41(5,"h2",5),m.nrm(6,"system-label",6),m.k0s()(),m.j41(7,"div",7)(8,"div",8)(9,"label",9),m.nrm(10,"system-label",10),m.k0s(),m.j41(11,"div",11)(12,"input",12),m.mxI("ngModelChange",(function(e){return m.DH7(t.addName,e)||(t.addName=e),e})),m.k0s()()()(),m.j41(13,"div",13)(14,"button",14),m.bIt("click",(function(){return t.closeDialog()})),m.nrm(15,"system-label",15),m.k0s(),m.j41(16,"button",16),m.bIt("click",(function(){return t.add()})),m.nrm(17,"system-label",17),m.k0s()()()()),2&e&&(m.R7$(4),m.Y8G("icon","close")("size","large"),m.R7$(8),m.R50("ngModel",t.addName))},dependencies:[n.me,n.BC,n.vS,L.t,x.W],encapsulation:2})}return SelectTreeAddDialog})();var Cd=s(6576),Fd=s(32864),Gd=s(45245);function $d(e,t){1&e&&(m.j41(0,"div"),m.nrm(1,"system-spinner"),m.k0s())}function Bd(e,t){1&e&&(m.j41(0,"div",10),m.nrm(1,"system-utility-icon",11),m.j41(2,"div",12)(3,"p"),m.EFF(4,"all fine!"),m.k0s()()())}function Nd(e,t){if(1&e&&(m.j41(0,"tr")(1,"td"),m.nrm(2,"system-checkbox",15),m.k0s(),m.j41(3,"td"),m.EFF(4),m.k0s(),m.j41(5,"td"),m.EFF(6),m.k0s()()),2&e){const e=t.$implicit;m.R7$(2),m.Y8G("disabled",!0),m.R7$(2),m.JRh(e.id),m.R7$(2),m.JRh(e.name)}}function Sd(e,t){if(1&e&&(m.j41(0,"div")(1,"p"),m.EFF(2),m.k0s(),m.j41(3,"table",13)(4,"thead")(5,"tr"),m.nrm(6,"th"),m.j41(7,"th"),m.EFF(8,"ID"),m.k0s(),m.j41(9,"th"),m.EFF(10,"Name"),m.k0s()()(),m.j41(11,"tbody"),m.DNE(12,Nd,7,3,"tr",14),m.k0s()()()),2&e){const e=m.XpG().$implicit;m.R7$(2),m.JRh(e.description),m.R7$(10),m.Y8G("ngForOf",e.records)}}function wd(e,t){if(1&e&&(m.j41(0,"system-card",7),m.nrm(1,"system-card-header",8),m.j41(2,"system-card-body"),m.DNE(3,Bd,5,0,"div",9)(4,Sd,13,2,"div",4),m.k0s()()),2&e){const e=t.$implicit;m.R7$(),m.Y8G("title",e.table),m.R7$(2),m.Y8G("ngIf",!e.records),m.R7$(),m.Y8G("ngIf",e.records&&e.records.length>0)}}function Td(e,t){if(1&e&&(m.j41(0,"div")(1,"div",5)(2,"p"),m.EFF(3),m.k0s()(),m.DNE(4,wd,5,3,"system-card",6),m.k0s()),2&e){const e=m.XpG();m.R7$(3),m.Lme("",e.results.total_checks," Checks are made and found ",e.results.total_records," Records:"),m.R7$(),m.Y8G("ngForOf",e.results.checks)}}let Ad=(()=>{class ConfigCleaner{constructor(e,t,s,i){this.backend=e,this.metadata=t,this.language=s,this.utils=i,this.results=[],this.is_loading=!1}diagnose(e){this.is_loading=!0,this.backend.getRequest(`admin/cleanup/configs/check/${e}`).subscribe((e=>{this.results=e,this.is_loading=!1}))}static#e=this.ɵfac=function(e){return new(e||ConfigCleaner)(m.rXU(p.H),m.rXU(f.yu),m.rXU(b.B),m.rXU(y.g))};static#t=this.ɵcmp=m.VBU({type:ConfigCleaner,selectors:[["config-cleaner"]],decls:6,vars:2,consts:[[1,"slds-p-around--medium"],[1,"slds-m-around--medium"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_INCOMPLETE_RECORDS"],[4,"ngIf"],[1,"slds-box","slds-m-bottom--medium"],["class","slds-m-bottom--medium",4,"ngFor","ngForOf"],[1,"slds-m-bottom--medium"],[3,"title"],["class","slds-inline_icon_text slds-grid",4,"ngIf"],[1,"slds-inline_icon_text","slds-grid"],["icon","check","size","x-small"],[1,"slds-col","slds-align-middle","slds-text-color_success"],[1,"slds-table","slds-table--bordered"],[4,"ngFor","ngForOf"],[3,"disabled"]],template:function(e,t){1&e&&(m.j41(0,"div",0)(1,"div",1)(2,"button",2),m.bIt("click",(function(){return t.diagnose("incomplete")})),m.nrm(3,"system-label",3),m.k0s()(),m.DNE(4,$d,2,0,"div",4)(5,Td,5,3,"div",4),m.k0s()),2&e&&(m.R7$(4),m.Y8G("ngIf",t.is_loading),m.R7$(),m.Y8G("ngIf",t.results&&t.results.total_checks>0))},dependencies:[i.Sq,i.bT,Cd.a,Fd.I,Gd.V,be.f,x.W,Eo.P,u.B],encapsulation:2})}return ConfigCleaner})();function Yd(e,t){1&e&&(m.j41(0,"div"),m.nrm(1,"system-spinner"),m.k0s())}let Od=(()=>{class StyleCacheCleaner{constructor(e,t,s){this.backend=e,this.toast=t,this.language=s,this.is_loading=!1}cleanCache(){this.is_loading=!0,this.backend.getRequest("admin/cleanup/stylecache").subscribe((e=>{e?this.toast.sendToast(this.language.getLabel("LBL_CACHE_FILE_DELETED"),"success"):this.toast.sendToast(this.language.getLabel("LBL_CACHE_FILE_NOT_FOUND"),"info"),this.is_loading=!1}))}static#e=this.ɵfac=function(e){return new(e||StyleCacheCleaner)(m.rXU(p.H),m.rXU(v.o),m.rXU(b.B))};static#t=this.ɵcmp=m.VBU({type:StyleCacheCleaner,selectors:[["style-cache-cleaner"]],decls:5,vars:1,consts:[[1,"slds-p-around--medium"],[1,"slds-m-around--medium"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_CLEAN_STYLE_CACHE"],[4,"ngIf"]],template:function(e,t){1&e&&(m.j41(0,"div",0)(1,"div",1)(2,"button",2),m.bIt("click",(function(){return t.cleanCache()})),m.nrm(3,"system-label",3),m.k0s()(),m.DNE(4,Yd,2,0,"div",4),m.k0s()),2&e&&(m.R7$(4),m.Y8G("ngIf",t.is_loading))},dependencies:[i.bT,x.W,Eo.P],encapsulation:2})}return StyleCacheCleaner})();function Xd(e,t){if(1&e&&(m.j41(0,"option",21),m.EFF(1),m.k0s()),2&e){const e=t.$implicit;m.FS9("value",e.class),m.R7$(),m.JRh(e.class)}}function Vd(e,t){if(1&e&&(m.j41(0,"option",21),m.EFF(1),m.k0s()),2&e){const e=t.$implicit;m.FS9("value",e.id),m.R7$(),m.JRh(e.name)}}function Ud(e,t){if(1&e){const e=m.RV6();m.j41(0,"tr")(1,"td",15)(2,"select",16),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG().$implicit;return m.DH7(s.bean,t)||(s.bean=t),m.Njj(t)})),m.DNE(3,Xd,2,2,"option",17),m.k0s()(),m.j41(4,"td",18)(5,"select",16),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG().$implicit;return m.DH7(s.calendar,t)||(s.calendar=t),m.Njj(t)})),m.DNE(6,Vd,2,2,"option",17),m.k0s()(),m.j41(7,"td",19)(8,"button",20),m.bIt("click",(function(){m.eBV(e);const t=m.XpG().$implicit,s=m.XpG();return m.Njj(s.removeMapping(t.id))})),m.EFF(9,"X "),m.k0s()()()}if(2&e){const e=m.XpG().$implicit,t=m.XpG();m.R7$(2),m.Y8G("disabled",0==t.beans.length),m.R50("ngModel",e.bean),m.R7$(),m.Y8G("ngForOf",t.beans),m.R7$(2),m.Y8G("disabled",0==t.calendars.length),m.R50("ngModel",e.calendar),m.R7$(),m.Y8G("ngForOf",t.calendars)}}function Hd(e,t){if(1&e&&(m.qex(0),m.DNE(1,Ud,10,6,"tr",14),m.bVm()),2&e){const e=t.$implicit;m.R7$(),m.Y8G("ngIf",!e.deleted)}}let zd=(()=>{class GoogleCalendarManager{constructor(e,t,s,i){this.backend=e,this.language=t,this.model=s,this.toast=i,this.beans=[],this.calendars=[],this.beanMappings=[],this.getBeans(),this.getCalendars(),this.getBeanMappings()}saveBeanMappings(){let e={bean_mappings:this.beanMappings};this.backend.postRequest("channels/groupware/gsuite/calendar/beanmappings",{},e).subscribe((e=>{this.toast.sendToast("Bean Mappings saved")}))}startSync(){this.backend.getRequest("channels/groupware/gsuite/calendar/sync").subscribe((e=>{1==e.result?this.toast.sendToast("Google Calendar synchronization started.","success"):this.toast.sendToast(e.error,"error")}))}addMapping(){this.beanMappings||(this.beanMappings=[]),this.beanMappings.push({id:this.model.generateGuid(),deleted:!1,bean:{module:"",class:""},calendar:{id:"",name:""}})}removeMapping(e){this.beanMappings.forEach((t=>{t.id===e&&(t.deleted=!0)}))}getBeans(){let e=new h.B;return this.backend.getRequest("channels/groupware/gsuite/calendar/beans").subscribe((t=>{!0===t.result&&(this.beans=t.beans),e.next(t),e.complete()}),(e=>{})),e.asObservable()}getCalendars(){let e=new h.B;return this.backend.getRequest("channels/groupware/gsuite/calendar/calendars").subscribe((t=>{!0===t.result&&(this.calendars=t.calendars),e.next(t),e.complete()}),(e=>{})),e.asObservable()}getBeanMappings(){let e=new h.B;return this.backend.getRequest("channels/groupware/gsuite/calendar/beanmappings").subscribe((t=>{!0===t.result&&(this.beanMappings=Object.keys(t.bean_mappings).map((e=>t.bean_mappings[e]))),e.next(t),e.complete()}),(e=>{})),e.asObservable()}static#e=this.ɵfac=function(e){return new(e||GoogleCalendarManager)(m.rXU(p.H),m.rXU(b.B),m.rXU(oa.g),m.rXU(v.o))};static#t=this.ɵcmp=m.VBU({type:GoogleCalendarManager,selectors:[["google-calendar-manager"]],features:[m.Jv_([oa.g,_n.U])],decls:20,vars:1,consts:[[1,"slds-grid","slds-form--inline","slds-p-around--small","slds-border--bottom"],[1,"slds-form-element","slds-col--bump-left"],["role","group",1,"slds-button-group"],["type","button",1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_START_SYNC"],["label","LBL_ADD"],["type","button",1,"slds-button","slds-button--brand",3,"click"],["label","LBL_SAVE"],[1,"slds-table","slds-table_bordered","slds-table_cell-buffer"],[1,"slds-text-title"],["scope","col"],["title","Bean",1,"slds-truncate"],["title","Calendar",1,"slds-truncate"],[4,"ngFor","ngForOf"],[4,"ngIf"],["scope","row","data-label","Class"],["type","text",1,"slds-select","ng-pristine","ng-valid",3,"disabled","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["scope","row","data-label","Method"],["scope","row"],[1,"slds-button","slds-button_destructive",3,"click"],[3,"value"]],template:function(e,t){1&e&&(m.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),m.bIt("click",(function(){return t.startSync()})),m.nrm(4,"system-label",4),m.k0s(),m.j41(5,"button",3),m.bIt("click",(function(){return t.addMapping()})),m.nrm(6,"system-label",5),m.k0s(),m.j41(7,"button",6),m.bIt("click",(function(){return t.saveBeanMappings()})),m.nrm(8,"system-label",7),m.k0s()()()(),m.j41(9,"table",8)(10,"thead")(11,"tr",9)(12,"th",10)(13,"div",11),m.EFF(14,"Bean"),m.k0s()(),m.j41(15,"th",10)(16,"div",12),m.EFF(17,"Calendar"),m.k0s()()()(),m.j41(18,"tbody"),m.DNE(19,Hd,2,1,"ng-container",13),m.k0s()()),2&e&&(m.R7$(19),m.Y8G("ngForOf",t.beanMappings))},dependencies:[i.Sq,i.bT,n.xH,n.y7,n.wz,n.BC,n.vS,x.W],encapsulation:2})}return GoogleCalendarManager})();var qd=s(84412),Pd=s(48849),Jd=s(37804),Wd=s(62335);const Kd=["downloadlink"],Qd=["fileupload"];function Zd(e,t){if(1&e){const e=m.RV6();m.j41(0,"li",24)(1,"button",25),m.bIt("click",(function(){m.eBV(e);const t=m.XpG();return m.Njj(t.exportSystemPackage())})),m.nrm(2,"system-button-icon",26),m.k0s()()}}function er(e,t){if(1&e){const e=m.RV6();m.j41(0,"div")(1,"div",37),m.EFF(2,'Upload and import the file "'),m.j41(3,"b"),m.EFF(4),m.k0s(),m.EFF(5,'"?'),m.k0s(),m.j41(6,"div")(7,"button",38),m.bIt("click",(function(){m.eBV(e);const t=m.XpG(2);return m.Njj(t.uploadFile())})),m.EFF(8),m.k0s()()()}if(2&e){const e=m.XpG(2);m.R7$(4),m.JRh(e.filename),m.R7$(4),m.JRh(e.lang.getLabel("LBL_UPLOAD_AND_IMPORT"))}}function tr(e,t){if(1&e&&(m.j41(0,"system-progress-bar",39),m.EFF(1,' Upload of file "'),m.j41(2,"b"),m.EFF(3),m.k0s(),m.EFF(4,'" … '),m.k0s()),2&e){const e=m.XpG(2);m.Y8G("progress",e.uploadProgress),m.R7$(3),m.JRh(e.filename)}}function sr(e,t){1&e&&(m.j41(0,"div")(1,"b"),m.EFF(2,"Importing …"),m.k0s()())}function ir(e,t){if(1&e&&(m.j41(0,"div")(1,"b"),m.EFF(2,"Import successful"),m.k0s(),m.EFF(3),m.nrm(4,"br"),m.EFF(5),m.k0s()),2&e){const e=m.XpG(2);m.R7$(3),m.Lme(": ",e.importResponse.numberLinesInserted," records inserted into ",e.importResponse.numberAffectedTables," tables. "),m.R7$(2),m.Lme('Before import a backup of the affected tables has been made to folder "',e.importResponse.backupLocation,'". It will be automatically deleted after ',e.importResponse.backupPeriod," days. ")}}function nr(e,t){if(1&e&&(m.j41(0,"div")(1,"b"),m.EFF(2,"Import failed"),m.k0s(),m.EFF(3),m.k0s()),2&e){const e=m.XpG(2);m.R7$(3),m.SpI(". No record has been inserted. Reason: ",e.importErrorMessage," ")}}function lr(e,t){if(1&e){const e=m.RV6();m.j41(0,"div")(1,"div",9)(2,"div",27)(3,"div",28)(4,"input",29),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.ignoreUnknownTables,t)||(s.ignoreUnknownTables=t),m.Njj(t)})),m.k0s(),m.j41(5,"label",30),m.nrm(6,"span",31),m.j41(7,"span",10),m.EFF(8,"Ignore unknown tables and do the import anyway. In case the input data contains tables that are unknown to the system."),m.k0s()()()()(),m.j41(9,"div",9)(10,"div",27)(11,"div",28)(12,"input",32),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.keepAssignedUser,t)||(s.keepAssignedUser=t),m.Njj(t)})),m.k0s(),m.j41(13,"label",33),m.nrm(14,"span",31),m.j41(15,"span",10),m.EFF(16,"Keep assigned user. Otherwise, the records will be assigned to "),m.j41(17,"i"),m.EFF(18,"you"),m.k0s(),m.EFF(19,"."),m.k0s()()()()(),m.j41(20,"div",9)(21,"div",27)(22,"div",28)(23,"input",34),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.keepEnteredModifiedInfo,t)||(s.keepEnteredModifiedInfo=t),m.Njj(t)})),m.k0s(),m.j41(24,"label",35),m.nrm(25,"span",31),m.j41(26,"span",10),m.EFF(27,"Keep entered/modified info. Otherwise, "),m.j41(28,"i"),m.EFF(29,"you"),m.k0s(),m.EFF(30," will be noted in the record - with the "),m.j41(31,"i"),m.EFF(32,"current"),m.k0s(),m.EFF(33," time stamp."),m.k0s()()()()(),m.DNE(34,er,9,2,"div",20)(35,tr,5,2,"system-progress-bar",36)(36,sr,3,0,"div",20)(37,ir,6,4,"div",20)(38,nr,4,1,"div",20),m.k0s()}if(2&e){const e=m.XpG();m.R7$(4),m.R50("ngModel",e.ignoreUnknownTables),m.Y8G("disabled",e.isAfterUpload||e.isUploading),m.R7$(8),m.R50("ngModel",e.keepAssignedUser),m.Y8G("disabled",e.isAfterUpload||e.isUploading),m.R7$(11),m.R50("ngModel",e.keepEnteredModifiedInfo),m.Y8G("disabled",e.isAfterUpload||e.isUploading),m.R7$(11),m.Y8G("ngIf",!e.isAfterUpload&&!e.isUploading),m.R7$(),m.Y8G("ngIf",e.isUploading||e.isAfterUpload),m.R7$(),m.Y8G("ngIf",e.isImporting),m.R7$(),m.Y8G("ngIf",!0===e.importOK),m.R7$(),m.Y8G("ngIf",!1===e.importOK)}}function or(e,t){1&e&&m.nrm(0,"system-spinner",40)}function ar(e,t){if(1&e){const e=m.RV6();m.j41(0,"div",43)(1,"button",44),m.bIt("click",(function(){m.eBV(e);const t=m.XpG(2);return m.Njj(t.changeExportSettings=!0)})),m.EFF(2,"change export settings …"),m.k0s()()}}function dr(e,t){if(1&e){const e=m.RV6();m.j41(0,"div",59)(1,"div",60)(2,"div",28)(3,"input",61),m.mxI("ngModelChange",(function(t){const s=m.eBV(e).$implicit;return m.DH7(s.include,t)||(s.include=t),m.Njj(t)})),m.k0s(),m.j41(4,"label",62),m.nrm(5,"span",31),m.j41(6,"span",63),m.EFF(7),m.k0s()()()()()}if(2&e){const e=t.$implicit,s=t.index;m.R7$(3),m.Mz_("id","table",s,""),m.R50("ngModel",e.include),m.R7$(),m.Mz_("for","table",s,""),m.R7$(3),m.JRh(e.name)}}function rr(e,t){if(1&e){const e=m.RV6();m.j41(0,"span")(1,"a",64),m.bIt("click",(function(){m.eBV(e);const t=m.XpG(3);return m.Njj(t.showBlacklistedTables=!t.showBlacklistedTables)})),m.EFF(2,"[show/hide]"),m.k0s(),m.EFF(3),m.k0s()}if(2&e){const e=m.XpG(3);m.R7$(3),m.SpI('. If necessary use the following input field "',e.lang.getLabel("LBL_ADDITIONAL_TABLES"),'".')}}function cr(e,t){if(1&e&&(m.j41(0,"span"),m.EFF(1),m.k0s()),2&e){const e=m.XpG(3);m.R7$(),m.JRh(e.blacklistedTables.join(", "))}}function mr(e,t){if(1&e){const e=m.RV6();m.j41(0,"div")(1,"div",45)(2,"button",46),m.bIt("click",(function(){m.eBV(e);const t=m.XpG(2);return m.Njj(t.selectAll(!0))})),m.EFF(3),m.k0s(),m.j41(4,"button",46),m.bIt("click",(function(){m.eBV(e);const t=m.XpG(2);return m.Njj(t.selectCustom(!0))})),m.EFF(5),m.k0s(),m.j41(6,"button",46),m.bIt("click",(function(){m.eBV(e);const t=m.XpG(2);return m.Njj(t.selectAll(!1))})),m.EFF(7),m.k0s()(),m.j41(8,"div",47),m.DNE(9,dr,8,4,"div",48),m.k0s(),m.j41(10,"div",37)(11,"div")(12,"b"),m.EFF(13),m.k0s(),m.EFF(14,", because they may not be exported/imported "),m.DNE(15,rr,4,1,"span",20),m.k0s(),m.DNE(16,cr,2,1,"span",20),m.k0s(),m.j41(17,"div",49)(18,"label",50),m.EFF(19),m.k0s(),m.j41(20,"div",51)(21,"input",52),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG(2);return m.DH7(s.additionalTables,t)||(s.additionalTables=t),m.Njj(t)})),m.k0s(),m.j41(22,"button",53),m.bIt("click",(function(){m.eBV(e);const t=m.XpG(2);return m.Njj(t.additionalTables="")})),m.nrm(23,"system-button-icon",54),m.k0s()()(),m.j41(24,"div",49)(25,"label",55),m.EFF(26),m.k0s(),m.j41(27,"div",51)(28,"input",56),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG(2);return m.DH7(s.selectedPackages,t)||(s.selectedPackages=t),m.Njj(t)})),m.k0s(),m.j41(29,"button",53),m.bIt("click",(function(){m.eBV(e);const t=m.XpG(2);return m.Njj(t.selectedPackages="")})),m.nrm(30,"system-button-icon",54),m.k0s()()(),m.j41(31,"div",49)(32,"label",57),m.EFF(33),m.k0s(),m.j41(34,"div",11)(35,"input",58),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG(2);return m.DH7(s.fileName,t)||(s.fileName=t),m.Njj(t)})),m.k0s()()()()}if(2&e){const e=m.XpG(2);m.R7$(3),m.JRh(e.lang.getLabel("LBL_SELECT_ALL")),m.R7$(2),m.JRh(e.lang.getLabel("LBL_SELECT_CUSTOM_ONLY")),m.R7$(2),m.JRh(e.lang.getLabel("LBL_DESELECT_ALL")),m.R7$(2),m.Y8G("ngForOf",e.selectableTables),m.R7$(4),m.SpI("",e.blacklistedTables.length," tables are not listed"),m.R7$(2),m.Y8G("ngIf",e.blacklistedTables.length),m.R7$(),m.Y8G("ngIf",e.showBlacklistedTables),m.R7$(3),m.JRh(e.lang.getLabel("LBL_ADDITIONAL_TABLES")),m.R7$(2),m.R50("ngModel",e.additionalTables),m.R7$(2),m.Y8G("icon","clear")("size","small"),m.R7$(3),m.JRh(e.lang.getLabel("LBL_PACKAGES")),m.R7$(2),m.R50("ngModel",e.selectedPackages),m.R7$(2),m.Y8G("icon","clear")("size","small"),m.R7$(3),m.JRh(e.lang.getLabel("LBL_FILE_NAME")),m.R7$(2),m.R50("ngModel",e.fileName)}}function ur(e,t){if(1&e){const e=m.RV6();m.j41(0,"div"),m.DNE(1,ar,3,0,"div",41)(2,mr,36,17,"div",20),m.j41(3,"div")(4,"button",42),m.bIt("click",(function(){m.eBV(e);const t=m.XpG();return m.Njj(t.exportTables())})),m.EFF(5),m.k0s()()()}if(2&e){const e=m.XpG();m.R7$(),m.Y8G("ngIf",!e.changeExportSettings),m.R7$(),m.Y8G("ngIf",e.changeExportSettings),m.R7$(2),m.Y8G("disabled",0===e.numberOfSelectedTables&&""===e.additionalTables||e.isDownloading),m.R7$(),m.JRh(e.lang.getLabel("LBL_EXPORT"))}}const gr=e=>({"slds-is-active":e}),hr=e=>({"slds-hide":e}),pr=e=>({"slds-has-drag-over":e});let fr=(()=>{class ConfigTransfer{constructor(e,t,s,i,n,l,o){this.backend=e,this.metadata=t,this.lang=s,this.prefs=i,this.configurationService=n,this.modalservice=l,this.toast=o,this.tabToShow="i",this.selectableTables=[],this.blacklistedTables=[],this.additionalTables="",this.tablenamesLoaded=!1,this.showBlacklistedTables=!1,this.isLoadingTablenames=!1,this.isDownloading=!1,this.loadUrl=void 0,this.fileName="spicecrm-cfg-"+moment().format("YYYYMMDD-HHmm")+".gz",this.changeExportSettings=!1,this.isUploading=!1,this.isImporting=!1,this.isAfterUpload=!1,this.dropErrorMessageCode=null,this.importOK=null,this.ignoreUnknownTables=!1,this.keepAssignedUser=!1,this.keepEnteredModifiedInfo=!1,this.isDragOver=!1}showExport(){"e"!==this.tabToShow&&(this.loadTableNames(),this.tabToShow="e")}loadTableNames(){return new Promise((e=>{if(this.tablenamesLoaded||this.isLoadingTablenames)return e(!0);this.isLoadingTablenames=!0,this.backend.getRequest("configuration/transfer/tablenames").subscribe((t=>{t.selectableTables.forEach((e=>{this.selectableTables.push({name:e,include:!0})})),t.blacklistedTables.forEach((e=>{this.blacklistedTables.push(e)})),e(!0),this.isLoadingTablenames=!1,this.tablenamesLoaded=!0}))}))}showImport(){this.tabToShow="i"}exportSystemPackage(){this.loadTableNames().then((()=>{this.selectableTables.forEach((e=>{e.name.includes("custom")||(e.include=!0)})),this.selectedPackages="system",this.additionalTables="spiceaclstandardactions",this.fileName="system-package.gz",this.exportTables()}))}exportTables(){this.isDownloading=!0,this.exportErrorID&&(this.toast.clearToast(this.exportErrorID),this.exportErrorID=null);let e=[];this.selectableTables.forEach((t=>{t.include&&e.push(t.name)})),this.fileName||(this.fileName="spicecrm-cfg-"+moment().format("YYYYMMDD-HHmm")+".gz"),this.backend.getDownloadPostRequestFile("configuration/transfer/export",{},{selectedTables:e,additionalTables:this.additionalTables,packages:this.selectedPackages}).subscribe((e=>{this.downloadlink.element.nativeElement.href=e,this.downloadlink.element.nativeElement.click(),this.isDownloading=!1}),(e=>{this.isDownloading=!1,this.exportErrorID=this.toast.sendToast(this.lang.getLabel("ERR_EXPORT_FAILED"),"error",this.exportErrorMessage=e.error.message)}))}selectAll(e){this.selectableTables.forEach((t=>{t.include=e}))}selectCustom(e){let t=/custom/;this.selectableTables.forEach((s=>{s.include=!e,t.test(s.name)&&(s.include=e)}))}get numberOfSelectedTables(){let e=0;return this.selectableTables.forEach((t=>t.include&&e++)),e}uploadFile(){this.modalservice.confirm("You are about to upload a file and import its data into the database. This will change the existing database. Do you really want to do this?",this.lang.getLabel("LBL_WARNING"),"warning").subscribe((e=>{if(e){this.isUploading=!0,this.importOK=null;let e=new qd.t(0);e.subscribe((e=>{this.uploadProgress=e,100===e&&(this.isImporting=!0)})),this.readFileFromFilesystem(this.fileFromBrowser).subscribe((t=>{this.backend.postRequestWithProgress("configuration/transfer/import",null,{file:t,ignoreUnknownTables:this.ignoreUnknownTables,keepAssignedUser:this.keepAssignedUser,keepEnteredModifiedInfo:this.keepEnteredModifiedInfo},e).subscribe((e=>{this.isAfterUpload=this.importOK=!0,this.isImporting=this.isUploading=!1,this.importResponse=e}),(e=>{this.isAfterUpload=!0,this.importOK=!1,this.isImporting=this.isUploading=!1,this.importErrorID=this.toast.sendToast(this.lang.getLabel("ERR_IMPORT_FAILED"),"error",this.importErrorMessage=e.error.error.message)}))}))}}))}get filename(){return this.fileFromBrowser?this.fileFromBrowser.name:""}fileSelectionChange(){return 1===this.fileupload.element.nativeElement.files.length&&(this.fileFromBrowser=this.fileupload.element.nativeElement.files[0]),this.fileSelectedOrDropped(),this.fileupload.element.nativeElement.value=null,!1}fileSelectedOrDropped(){this.isAfterUpload=this.isUploading=!1,this.importOK=null,this.importErrorID&&(this.toast.clearToast(this.importErrorID),this.importErrorID=null)}get fileReadyForUpload(){return this.fileFromBrowser&&!0}readFileFromFilesystem(e){let t=new h.B,s=new FileReader;return s.onloadend=()=>{let e=s.result.toString();e=e.substring(e.indexOf("base64,")+7),t.next(e),t.complete()},s.readAsDataURL(e),t.asObservable()}onDrop(e){if(e.preventDefault(),this.isDragOver=!1,e.dataTransfer.items){if(1!==e.dataTransfer.items.length||"file"!==e.dataTransfer.items[0].kind)return void this.showDropError();const t=e.dataTransfer.items[0].getAsFile();if("gz"!==t.name.split(".").pop())return void this.showDropError();this.fileFromBrowser=t}else{if(1!==e.dataTransfer.files.length)return;if("gz"!==e.dataTransfer.files[0].name.split(".").pop())return void this.showDropError();this.fileFromBrowser=e.dataTransfer.files[0]}this.dropErrorMessageCode&&this.toast.clearToast(this.dropErrorMessageCode),this.fileSelectedOrDropped()}showDropError(){this.dropErrorMessageCode&&this.toast.clearToast(this.dropErrorMessageCode),this.dropErrorMessageCode=this.toast.sendToast('You can drop only a file. One file. With the extension "gz".',"error",null,!1,this.dropErrorMessageCode)}onDragOver(e){e.preventDefault(),e.stopPropagation(),e.dataTransfer.dropEffect="copy",this.isDragOver=!0}onDragLeave(){this.isDragOver=!1}static#e=this.ɵfac=function(e){return new(e||ConfigTransfer)(m.rXU(p.H),m.rXU(f.yu),m.rXU(b.B),m.rXU(Pd.S),m.rXU(M.i),m.rXU(R.y),m.rXU(v.o))};static#t=this.ɵcmp=m.VBU({type:ConfigTransfer,selectors:[["ng-component"]],viewQuery:function(e,t){if(1&e&&(m.GBs(Kd,7,m.c1b),m.GBs(Qd,7,m.c1b)),2&e){let e;m.mGM(e=m.lsd())&&(t.downloadlink=e.first),m.mGM(e=m.lsd())&&(t.fileupload=e.first)}},decls:35,vars:31,consts:[[1,"slds-m-horizontal--medium","slds-m-top--medium","slds-m-bottom--small"],[1,"slds-text-heading--medium"],[1,"slds-tabs_default","slds-tabs_medium"],["role","tablist",1,"slds-tabs_default__nav"],["title","Item One","role","presentation",1,"slds-tabs_default__item",3,"ngClass"],["href","javascript:void(0);",1,"slds-tabs_default__link",3,"click"],["title","Item Two","role","presentation",1,"slds-tabs_default__item",3,"ngClass"],["class","slds-align-middle slds-grid slds-grid--align-end slds-grow","role","presentation",4,"ngIf"],[1,"slds-tabs_default__content",3,"ngClass"],[1,"slds-form-element"],[1,"slds-form-element__label"],[1,"slds-form-element__control"],[1,"slds-file-selector","slds-file-selector_files",3,"drop","dragover","dragleave"],[1,"slds-file-selector__dropzone",3,"ngClass"],["accept",".gz","type","file","id","config-file-upload-input",1,"slds-file-selector__input","slds-assistive-text",3,"disabled","click","change"],["fileupload",""],["for","config-file-upload-input",1,"slds-file-selector__body"],[1,"slds-file-selector__button","slds-button","slds-button_neutral"],[3,"icon","size","addclasses"],[1,"slds-file-selector__text","slds-medium-show"],[4,"ngIf"],["class","slds-m-top--x-large","style","display:block",4,"ngIf"],[2,"display","none",3,"href","download"],["downloadlink",""],["role","presentation",1,"slds-align-middle","slds-grid","slds-grid--align-end","slds-grow"],["system-title","MSG_EXPORT_SYSTEM_PACKAGE",1,"slds-button","slds-button--icon","slds-m-right--x-small",3,"click"],["icon","custom_apps"],[1,"slds-form-element__control","slds-m-vertical--medium"],[1,"slds-checkbox"],["type","checkbox","id","cbIgnoreUnknownTables",3,"ngModel","disabled","ngModelChange"],["for","cbIgnoreUnknownTables",1,"slds-checkbox__label"],[1,"slds-checkbox_faux"],["type","checkbox","id","cbKeepAssignedUser",3,"ngModel","disabled","ngModelChange"],["for","cbKeepAssignedUser",1,"slds-checkbox__label"],["type","checkbox","id","cbKeepEnteredModifiedData",3,"ngModel","disabled","ngModelChange"],["for","cbKeepEnteredModifiedData",1,"slds-checkbox__label"],["class","slds-m-vertical--medium","size","large",3,"progress",4,"ngIf"],[1,"slds-m-vertical--medium"],[1,"slds-button","slds-button--brand",3,"click"],["size","large",1,"slds-m-vertical--medium",3,"progress"],[1,"slds-m-top--x-large",2,"display","block"],["class","slds-m-bottom--medium",4,"ngIf"],[1,"slds-button","slds-button--brand",3,"disabled","click"],[1,"slds-m-bottom--medium"],[1,"slds-button","slds-button--neutral",3,"click"],["role","group",1,"slds-button-group","slds-m-bottom--medium"],[1,"slds-button","slds-button_neutral",3,"click"],["system-multi-select-checkboxes","",2,"column-width","270px","column-gap","1em"],["class","slds-form-element","style","z-index:1",4,"ngFor","ngForOf"],[1,"slds-form-element","slds-m-vertical--medium"],["for","additionalTables",1,"slds-form-element__label"],[1,"slds-form-element__control","slds-input-has-icon","slds-input-has-icon_right"],["id","additionalTables","type","text",1,"slds-input",3,"ngModel","ngModelChange"],["title","Clear",1,"slds-button","slds-button_icon","slds-input__icon","slds-input__icon_right",3,"click"],[3,"icon","size"],["for","confTransferSelectedPackages",1,"slds-form-element__label"],["id","confTransferSelectedPackages","type","text",1,"slds-input",3,"ngModel","ngModelChange"],["for","confTransferFileName",1,"slds-form-element__label"],["id","confTransferFileName","type","text",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-form-element",2,"z-index","1"],[1,"slds-form-element__control","slds-m-bottom--xxx-small"],["type","checkbox","name","selectableTables",3,"id","ngModel","ngModelChange"],[1,"slds-checkbox__label",3,"for"],[1,"slds-form-element__label",2,"display","inline-block"],["href","javascript:void(0)",3,"click"]],template:function(e,t){if(1&e){const e=m.RV6();m.j41(0,"div",0)(1,"h2",1),m.EFF(2),m.k0s(),m.j41(3,"p"),m.EFF(4,"Export and import configuration data from/into database. Also usable for backup."),m.k0s(),m.j41(5,"div",2)(6,"ul",3)(7,"li",4)(8,"a",5),m.bIt("click",(function(){return t.showImport()})),m.EFF(9),m.k0s()(),m.j41(10,"li",6)(11,"a",5),m.bIt("click",(function(){return t.showExport()})),m.EFF(12),m.k0s()(),m.DNE(13,Zd,3,0,"li",7),m.k0s(),m.j41(14,"div",8)(15,"div",9)(16,"span",10),m.EFF(17),m.k0s(),m.j41(18,"div",11)(19,"div",12),m.bIt("drop",(function(e){return t.onDrop(e)}))("dragover",(function(e){return t.onDragOver(e)}))("dragleave",(function(){return t.onDragLeave()})),m.j41(20,"div",13)(21,"input",14,15),m.bIt("click",(function(){m.eBV(e);const t=m.sdS(22);return m.Njj(t.value=null)}))("change",(function(){return t.fileSelectionChange()})),m.k0s(),m.j41(23,"label",16)(24,"span",17),m.nrm(25,"system-button-icon",18),m.EFF(26),m.k0s(),m.j41(27,"span",19),m.EFF(28),m.k0s()()()()()(),m.DNE(29,lr,39,11,"div",20),m.k0s(),m.j41(30,"div",8),m.DNE(31,or,1,0,"system-spinner",21)(32,ur,6,4,"div",20),m.k0s()(),m.nrm(33,"a",22,23),m.k0s()}2&e&&(m.R7$(2),m.JRh(t.lang.getLabel("LBL_CONFIGURATION_TRANSFER")),m.R7$(5),m.Y8G("ngClass",m.eq3(21,gr,"i"===t.tabToShow)),m.R7$(2),m.JRh(t.lang.getLabel("LBL_IMPORT")),m.R7$(),m.Y8G("ngClass",m.eq3(23,gr,"e"===t.tabToShow)),m.R7$(2),m.JRh(t.lang.getLabel("LBL_EXPORT")),m.R7$(),m.Y8G("ngIf",t.configurationService.getCapabilityConfig("configtransfer").export_system_package_enabled),m.R7$(),m.Y8G("ngClass",m.eq3(25,hr,"i"!==t.tabToShow)),m.R7$(3),m.JRh(t.lang.getLabel("LBL_CONFIGURATION_FILE")),m.R7$(3),m.Y8G("ngClass",m.eq3(27,pr,t.isDragOver)),m.R7$(),m.Y8G("disabled",t.isUploading),m.R7$(4),m.Y8G("icon","upload")("size","small")("addclasses","slds-button__icon_left"),m.R7$(),m.SpI(" ",t.lang.getLabel("LBL_SELECT_FILE"),""),m.R7$(2),m.JRh(t.lang.getLabel("LBL_OR_DROP_FILE_HERE")),m.R7$(),m.Y8G("ngIf",t.fileReadyForUpload),m.R7$(),m.Y8G("ngClass",m.eq3(29,hr,"e"!==t.tabToShow)),m.R7$(),m.Y8G("ngIf",t.isLoadingTablenames),m.R7$(),m.Y8G("ngIf",!t.isLoadingTablenames),m.R7$(),m.Y8G("href",t.loadUrl,m.B4B)("download",t.fileName))},dependencies:[i.YU,i.Sq,i.bT,n.me,n.Zm,n.BC,n.vS,L.t,Jd.Y,Eo.P,w.L,Wd.p],encapsulation:2})}return ConfigTransfer})();var br=s(32298);const yr=["treecontainer"],_r=["addconfigcontainer"];function kr(e,t){if(1&e&&(m.j41(0,"option",53),m.EFF(1),m.k0s()),2&e){const e=t.$implicit;m.Y8G("value",e),m.R7$(),m.JRh(e)}}function vr(e,t){1&e&&(m.j41(0,"div",54),m.nrm(1,"system-spinner"),m.k0s())}function Rr(e,t){if(1&e&&(m.j41(0,"div",55),m.EFF(1),m.k0s()),2&e){const e=m.XpG();m.R7$(),m.Lme(" ",e.selectedComponent.component," / ",e.selectedComponent.role_name," ")}}function Mr(e,t){if(1&e){const e=m.RV6();m.j41(0,"div",56)(1,"div",57)(2,"label",14),m.nrm(3,"system-label",58),m.k0s(),m.j41(4,"input",59),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.selectedComponent.package,t)||(s.selectedComponent.package=t),m.Njj(t)})),m.k0s()(),m.j41(5,"div",60)(6,"label",14),m.nrm(7,"system-label",61),m.k0s(),m.j41(8,"input",59),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.selectedComponent.version,t)||(s.selectedComponent.version=t),m.Njj(t)})),m.k0s()()()}if(2&e){const e=m.XpG();m.R7$(4),m.Y8G("disabled",!e.view.isEditMode()),m.R50("ngModel",e.selectedComponent.package),m.R7$(4),m.Y8G("disabled",!e.view.isEditMode()),m.R50("ngModel",e.selectedComponent.version)}}const jr=e=>({"slds-hidden":e}),Lr=e=>({"slds-is-active":e});let xr=(()=>{class ModuleConfigManager{constructor(e,t,s,i,n,l,o,a){this.backend=e,this.metadata=t,this.language=s,this.toast=i,this.modalservice=n,this.configuration=l,this.view=o,this.modal=a,this.component="",this.configValues={},this.crActive=!1,this.change_request_required=!1,this.edit_mode="",this.allowCopyButton=!0,this.allowGlobalModal=!1,this.sysModules=[],this.sysRoles={},this.currentModule="",this.currentComponent="",this.selectedId="",this.selectedComponent={},this.newComponent={},this.componentTree=[],this.currentTableActive="",this.componentModuleList=[],this.treelist=[],this.initialized=!1;let d=this.metadata.getRoles();this.sysRoles["*"]="*";for(let e of d)this.sysRoles[e.id]=e.name;this.sysModules=this.metadata.getModules(),this.sysModules.sort(),this.initialized=!0,this.currentModule="*",this.selectedModule(),this.checkMode()}get getAllowCopyButton(){return(0!==Object.keys(this.selectedComponent).length||this.selectedComponent.constructor!==Object)&&this.allowCopyButton}checkMode(){this.edit_mode=this.configuration.getCapabilityConfig("core").edit_mode,this.change_request_required=!!this.configuration.getCapabilityConfig("systemdeployment").change_request_required,"none"!=this.edit_mode&&"custom"!=this.edit_mode&&"all"!=this.edit_mode&&(this.edit_mode="custom"),this.change_request_required?this.backend.getRequest("module/SystemDeploymentCRs/active").subscribe((e=>{""==e.id?(this.setNoneMode(),this.toast.sendToast(this.language.getLabel("LBL_ACTIVATE_CR_WARNING"),"warning",null,3)):"all"==this.edit_mode?this.setAllMode():"custom"==this.edit_mode?this.setCustomMode():this.setNoneMode()})):"all"==this.edit_mode?this.setAllMode():"custom"==this.edit_mode?this.setCustomMode():this.setNoneMode()}setNoneMode(){this.view.setViewMode(),this.allowCopyButton=!1}setCustomMode(){"custom"==this.currentTableActive||"default_custom"==this.currentTableActive?this.view.setEditMode():this.view.setViewMode()}setAllMode(){this.allowGlobalModal=!0,this.view.setEditMode()}selectedModule(){this.currentComponent="",this.componentTree=[],this.selectedComponent={},"*"==this.currentModule?"default_custom"==this.currentTableActive?this.loadDefaultCustom():this.loadDefault():"custom"==this.currentTableActive?this.loadCustom():this.loadGlobal()}loadGlobal(){this.modal.openModal("SystemLoadingModal").subscribe((e=>{this.selectedComponent={},this.currentTableActive="global",this.checkMode(),"*"!=this.currentModule?this.backend.getRequest("configuration/configurator/entries/sysuicomponentmoduleconf").subscribe((t=>{this.buildTreeList(t),e.instance.self.destroy()})):(this.loadDefault(),e.instance.self.destroy())}))}loadCustom(){this.modal.openModal("SystemLoadingModal").subscribe((e=>{this.selectedComponent={},this.currentTableActive="custom",this.checkMode(),"*"!=this.currentModule?this.backend.getRequest("configuration/configurator/entries/sysuicustomcomponentmoduleconf").subscribe((t=>{this.buildTreeList(t),e.instance.self.destroy()})):(this.loadDefaultCustom(),e.instance.self.destroy())}))}loadDefault(){this.modal.openModal("SystemLoadingModal").subscribe((e=>{this.currentTableActive="default",this.backend.getRequest("configuration/configurator/entries/sysuicomponentdefaultconf").subscribe((t=>{this.buildTreeList(t),e.instance.self.destroy()}))}))}loadDefaultCustom(){this.modal.openModal("SystemLoadingModal").subscribe((e=>{this.currentTableActive="default_custom",this.backend.getRequest("configuration/configurator/entries/sysuicustomcomponentdefaultconf").subscribe((t=>{this.buildTreeList(t),e.instance.self.destroy()}))}))}buildTreeList(e){let t=[];for(let s of e)if(s.module==this.currentModule||"*"==this.currentModule){this.componentModuleList.push(s);let e=this.checkRoleName(s.role_id),i={};i={id:s.id,parent_id:s.component,clickable:!0,name:e},this.newComponent&&this.newComponent.id==s.id&&(i.selected=!0,this.selectedOutputItem(i.id)),t.push(i);let n=0;for(let e of t)s.component==e.id&&(n=1);if(0==n){let e=s.component;this.metadata.getSystemComponents().length>0&&this.metadata.getSystemComponents().find((e=>e.component===s.component))&&"1"==this.metadata.getSystemComponents().find((e=>e.component===s.component)).deprecated&&(e+=" | dep."),t.push({id:s.component,parent_id:null,clickable:!1,name:e})}}return this.newComponent={},t.sort(((e,t)=>e.name>t.name?1:-1)),this.treelist=t,t}checkRoleName(e){let t="";return t=this.sysRoles[e]?this.sysRoles[e]:e,t}selectedOutputItem(e){for(let t of this.componentModuleList)if(t.id==e){"string"==typeof t.componentconfig&&(t.componentconfig=JSON.parse(t.componentconfig));this.checkRoleName(t.role_id);this.selectedComponent=t,this.component=t.component,this.configValues=t.componentconfig}}saveChanges(){this.modal.openModal("SystemLoadingModal").subscribe((e=>{if(this.selectedComponent.componentconfig){switch(this.selectedComponent.componentconfig=JSON.stringify(this.selectedComponent.componentconfig),delete this.selectedComponent.role_name,this.currentTableActive){case"default":this.backend.postRequest("configuration/configurator/sysuicomponentdefaultconf/"+this.selectedComponent.id,{},{config:this.selectedComponent}).subscribe((t=>{"success"==t.status&&(this.configuration.reloadTaskData("componentdefaultconfigs"),e.instance.self.destroy(),this.toast.sendToast("changes saved"))}));break;case"default_custom":this.backend.postRequest("configuration/configurator/sysuicustomcomponentdefaultconf/"+this.selectedComponent.id,{},{config:this.selectedComponent}).subscribe((t=>{"success"==t.status&&(this.configuration.reloadTaskData("componentdefaultconfigs"),e.instance.self.destroy(),this.toast.sendToast("changes saved"))}));break;case"global":this.backend.postRequest("configuration/configurator/sysuicomponentmoduleconf/"+this.selectedComponent.id,{},{config:this.selectedComponent}).subscribe((t=>{"success"==t.status&&(this.configuration.reloadTaskData("componentmoduleconfigs"),e.instance.self.destroy(),this.toast.sendToast("changes saved"))}));break;case"custom":this.backend.postRequest("configuration/configurator/sysuicustomcomponentmoduleconf/"+this.selectedComponent.id,{},{config:this.selectedComponent}).subscribe((t=>{"success"==t.status&&(this.configuration.reloadTaskData("componentmoduleconfigs"),e.instance.self.destroy(),this.toast.sendToast("changes saved"))}));break;default:e.instance.self.destroy()}this.selectedComponent.componentconfig=JSON.parse(this.selectedComponent.componentconfig),this.selectedOutputItem(this.selectedComponent.id)}}))}addConf(){this.modalservice.openModal("ModuleConfigAddDialog").subscribe((e=>{e.instance.mode="add","default_custom"==this.currentTableActive||"custom"==this.currentTableActive?e.instance.currentType="custom":"all"==this.edit_mode?e.instance.currentType="global":e.instance.currentType="custom",e.instance.currentModule=this.currentModule,e.instance.allowGlobal=this.allowGlobalModal,e.instance.response$.subscribe((e=>{this.response(e)}))}))}copyConf(){this.modalservice.openModal("ModuleConfigAddDialog").subscribe((e=>{e.instance.mode="copy",e.instance.currentComponent=this.selectedComponent,e.instance.currentRole=this.selectedComponent.role_id,e.instance.currentModule=this.currentModule,e.instance.allowGlobal=this.allowGlobalModal,e.instance.response$.subscribe((e=>{this.response(e)}))}))}response(e){e.module?this.currentModule=e.module:this.currentModule="*","sysuicomponentdefaultconf"==e.table||"sysuicomponentmoduleconf"==e.table?this.currentTableActive="global":this.currentTableActive="custom","sysuicustomcomponentdefaultconf"==e.table&&(this.currentTableActive="default_custom"),"sysuicustomcomponentmoduleconf"==e.table&&(this.currentTableActive="custom"),"sysuicomponentdefaultconf"==e.table&&(this.currentTableActive="default"),"sysuicomponentmoduleconf"==e.table&&(this.currentTableActive="global"),this.newComponent=e,this.selectedModule()}static#e=this.ɵfac=function(e){return new(e||ModuleConfigManager)(m.rXU(p.H),m.rXU(f.yu),m.rXU(b.B),m.rXU(v.o),m.rXU(R.y),m.rXU(M.i),m.rXU(_n.U),m.rXU(R.y))};static#t=this.ɵcmp=m.VBU({type:ModuleConfigManager,selectors:[["moduleconfig-manager"]],viewQuery:function(e,t){if(1&e&&(m.GBs(yr,7,m.c1b),m.GBs(_r,7,m.c1b)),2&e){let e;m.mGM(e=m.lsd())&&(t.treecontainer=e.first),m.mGM(e=m.lsd())&&(t.addconfigcontainer=e.first)}},features:[m.Jv_([_n.U])],decls:57,vars:26,consts:[["system-to-bottom-noscroll",""],[1,"slds-p-around--medium","slds-theme--shade"],[1,"slds-page-header__row"],[1,"slds-page-header__col-title"],[1,"slds-media"],["icon","custom19","sprite","custom"],[1,"slds-media__body"],[1,"slds-page-header__name"],[1,"slds-page-header__name-title"],[1,"slds-page-header__title","slds-truncate"],["label","LBL_CONFIGURATION_MANAGER"],[1,"slds-page-header__name-meta","slds-grid"],[1,"slds-grid","slds-form--inline","slds-p-around--small","slds-border--bottom"],[1,"slds-form-element"],[1,"slds-form-element__label"],["label","LBL_MODULE"],[1,"slds-form-element__control"],[1,"slds-select_container",2,"min-width","250px"],[1,"slds-select",3,"ngModel","disabled","ngModelChange","change"],["value","*"],[3,"value",4,"ngFor","ngForOf"],["class","slds-align_absolute-center slds-p-around--large",4,"ngIf"],[1,"slds-grid",3,"ngClass"],[1,"slds-size--2-of-5","slds-border--right"],["role","application",1,"slds-tree_container",2,"max-width","none"],[1,"slds-tabs_default",2,"background-color","transparent"],["role","tablist",1,"slds-tabs_default__nav"],["title","Item One","role","presentation",1,"slds-tabs_default__item","slds-is-active",3,"ngClass"],[1,"slds-grid","slds-grid--vertical-align-center"],["icon","global","size","x-small"],["href","javascript:void(0);","role","tab","tabindex","0","id","tab-default-1__item",1,"slds-tabs_default__link",3,"click"],["label","LBL_GLOBAL"],["title","Item Two","role","presentation",1,"slds-tabs_default__item",3,"ngClass"],["icon","custom","size","x-small"],["href","javascript:void(0);","role","tab","tabindex","-1","aria-selected","false","aria-controls","tab-default-2","id","tab-default-2__item",1,"slds-tabs_default__link",3,"click"],["label","LBL_CUSTOM"],["role","tabpanel",1,"slds-tabs_default__content","slds-p-vertical_none"],["treecontainer",""],["system-to-bottom","",1,"slds-scrollable_y","slds-border_bottom",3,"marginBottom"],[3,"sourceList","selectedItem","selectedItemChange"],[1,"slds-p-around--small","slds-align--absolute-center"],["addconfigcontainer",""],["title","add item",1,"slds-button","slds-button--icon",3,"disabled","click"],[3,"icon","size","addclasses"],[1,"slds-size--3-of-5","slds-p-horizontal--small","slds-p-top--x-small"],["class","slds-text-heading_small",4,"ngIf"],[1,"slds-col--bump-left"],["type","button",1,"slds-m-bottom_small","slds-col--bump-left","slds-button","slds-button--neutral",3,"disabled","click"],["label","LBL_COPY"],["type","button",1,"slds-m-bottom_small","slds-col--bump-left","slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_SAVE"],["class","slds-grid slds-grid--vertical-align-center slds-m-vertical--xxx-small",4,"ngIf"],[3,"component","configValues"],[3,"value"],[1,"slds-align_absolute-center","slds-p-around--large"],[1,"slds-text-heading_small"],[1,"slds-grid","slds-grid--vertical-align-center","slds-m-vertical--xxx-small"],[1,"slds-size--1-of-2","slds-p-right--xx-small"],["label","LBL_PACKAGE"],["type","text",1,"slds-input",3,"disabled","ngModel","ngModelChange"],[1,"slds-size--1-of-2","slds-p-left--xx-small"],["label","LBL_VERSION"]],template:function(e,t){1&e&&(m.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),m.nrm(5,"system-icon",5),m.j41(6,"div",6)(7,"div",7)(8,"div",8)(9,"h1")(10,"span",9),m.nrm(11,"system-label",10),m.k0s()()()(),m.nrm(12,"div",11),m.k0s()()()()(),m.j41(13,"div",12)(14,"div",13)(15,"label",14),m.nrm(16,"system-label",15),m.k0s(),m.j41(17,"div",16)(18,"div",17)(19,"select",18),m.mxI("ngModelChange",(function(e){return m.DH7(t.currentModule,e)||(t.currentModule=e),e})),m.bIt("change",(function(){return t.selectedModule()})),m.j41(20,"option",19),m.EFF(21,"*"),m.k0s(),m.DNE(22,kr,2,2,"option",20),m.k0s()()()()(),m.DNE(23,vr,2,0,"div",21),m.j41(24,"div",22)(25,"div",23)(26,"div",24)(27,"div",25)(28,"ul",26)(29,"li",27)(30,"div",28),m.nrm(31,"system-custom-icon",29),m.j41(32,"a",30),m.bIt("click",(function(){return t.loadGlobal()})),m.nrm(33,"system-label",31),m.k0s()()(),m.j41(34,"li",32)(35,"div",28),m.nrm(36,"system-custom-icon",33),m.j41(37,"a",34),m.bIt("click",(function(){return t.loadCustom()})),m.nrm(38,"system-label",35),m.k0s()()()(),m.j41(39,"div",36,37)(41,"div",38)(42,"system-tree",39),m.bIt("selectedItemChange",(function(e){return t.selectedOutputItem(e)})),m.k0s()(),m.j41(43,"div",40,41)(45,"button",42),m.bIt("click",(function(){return t.addConf()})),m.nrm(46,"system-utility-icon",43),m.k0s()()()()()(),m.j41(47,"div",44)(48,"div",28),m.DNE(49,Rr,2,2,"div",45),m.j41(50,"div",46)(51,"button",47),m.bIt("click",(function(){return t.copyConf()})),m.nrm(52,"system-label",48),m.k0s(),m.j41(53,"button",49),m.bIt("click",(function(){return t.saveChanges()})),m.nrm(54,"system-label",50),m.k0s()()(),m.DNE(55,Mr,9,4,"div",51),m.nrm(56,"workbench-config",52),m.k0s()()()),2&e&&(m.R7$(19),m.R50("ngModel",t.currentModule),m.Y8G("disabled",!t.initialized),m.R7$(3),m.Y8G("ngForOf",t.sysModules),m.R7$(),m.Y8G("ngIf",!t.initialized),m.R7$(),m.Y8G("ngClass",m.eq3(20,jr,!t.initialized)),m.R7$(5),m.Y8G("ngClass",m.eq3(22,Lr,"global"==t.currentTableActive||"default"==t.currentTableActive)),m.R7$(5),m.Y8G("ngClass",m.eq3(24,Lr,"custom"==t.currentTableActive||"default_custom"==t.currentTableActive)),m.R7$(7),m.Y8G("marginBottom",45),m.R7$(),m.Y8G("sourceList",t.treelist)("selectedItem",t.selectedComponent.id),m.R7$(3),m.Y8G("disabled",!t.view.isEditMode()),m.R7$(),m.Y8G("icon","new")("size","xx-small")("addclasses","slds-section__title-action-icon slds-button__icon slds-button__icon_left"),m.R7$(3),m.Y8G("ngIf",t.selectedComponent.component),m.R7$(2),m.Y8G("disabled",!t.getAllowCopyButton),m.R7$(2),m.Y8G("disabled",!t.view.isEditMode()||!(null!=t.selectedComponent&&t.selectedComponent.id)),m.R7$(2),m.Y8G("ngIf",null==t.selectedComponent?null:t.selectedComponent.id),m.R7$(),m.Y8G("component",t.component)("configValues",t.configValues))},dependencies:[i.YU,i.Sq,i.bT,n.xH,n.y7,n.me,n.wz,n.BC,n.vS,kn.k,Ne.J,x.W,Eo.P,br.S,u.B,F.b,T.p,jn],encapsulation:2})}return ModuleConfigManager})();var Ir=s(57302);function Dr(e,t){1&e&&m.nrm(0,"system-label",24)}function Er(e,t){1&e&&m.nrm(0,"system-label",25)}function Cr(e,t){if(1&e&&(m.j41(0,"option",26),m.nrm(1,"system-label",27),m.k0s()),2&e){const e=t.$implicit;m.Y8G("value",e.value),m.R7$(),m.Y8G("label",e.text)}}function Fr(e,t){if(1&e&&m.nrm(0,"system-select-option",28),2&e){const e=t.$implicit;m.Y8G("value",e.id)("display",e.name)}}function Gr(e,t){if(1&e&&m.nrm(0,"system-select-option",28),2&e){const e=t.$implicit;m.Y8G("value",e.id)("display",e.name)}}function $r(e,t){1&e&&(m.j41(0,"div",29)(1,"span",30),m.EFF(2,"warning"),m.k0s(),m.j41(3,"span",31),m.qSk(),m.j41(4,"svg",32),m.nrm(5,"use",33),m.k0s()(),m.joV(),m.j41(6,"h2"),m.nrm(7,"system-label",34),m.k0s()())}function Br(e,t){if(1&e&&m.nrm(0,"system-select-option",35),2&e){const e=t.$implicit;m.Y8G("value",e.id)("display",e.name)("group",e.group)}}function Nr(e,t){if(1&e){const e=m.RV6();m.j41(0,"div",36)(1,"div",37)(2,"label",5),m.nrm(3,"system-label",38),m.k0s(),m.j41(4,"input",39),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.compSelectedItem.package,t)||(s.compSelectedItem.package=t),m.Njj(t)})),m.k0s()(),m.j41(5,"div",40)(6,"label",5),m.nrm(7,"system-label",41),m.k0s(),m.j41(8,"input",39),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.compSelectedItem.version,t)||(s.compSelectedItem.version=t),m.Njj(t)})),m.k0s()()()}if(2&e){const e=m.XpG();m.R7$(4),m.R50("ngModel",e.compSelectedItem.package),m.R7$(4),m.R50("ngModel",e.compSelectedItem.version)}}function Sr(e,t){1&e&&(m.j41(0,"div",42),m.nrm(1,"system-label",43),m.k0s())}function wr(e,t){1&e&&(m.j41(0,"span"),m.nrm(1,"system-label",44),m.k0s())}function Tr(e,t){1&e&&(m.j41(0,"span"),m.nrm(1,"system-label",45),m.k0s())}let Ar=(()=>{class ModuleConfigAddDialog{constructor(e,t,s,i,n,l,o){this.backend=e,this.metadata=t,this.language=s,this.modelutilities=i,this.utils=n,this.toast=l,this.configuration=o,this.mode="",this.currentRole="",this.currentType="custom",this.currentModule="",this.allowGlobal=!1,this.response$=new m.bkB,this.showDeprecatedWarning=!1,this.types=[{value:"custom",text:"LBL_CUSTOM"},{value:"global",text:"LBL_GLOBAL"}],this.compSelectList=[],this.compDisabled=!1,this.moduleSelectList=[],this.roleSelectList=[]}get roleSelectedItem(){return this.roleselecteditem}set roleSelectedItem(e){this.roleselecteditem=e}get moduleSelectedItem(){return this.moduleselecteditem}set moduleSelectedItem(e){this.moduleselecteditem=e}get compSelectedItem(){return this.compselecteditem}set compSelectedItem(e){this.compselecteditem=e,this.showDeprecatedWarning=!0,this.showDeprecatedWarning="1"==e.deprecated}ngOnInit(){this.allowGlobal||this.types.pop(),this.moduleSelectList=[{id:"*",name:"*"}],this.mode in{add:!0,copy:!0}&&"*"==this.currentModule&&(this.moduleSelectedItem={id:"*",name:"*"});let e=this.metadata.getModules();e.sort();for(let t of e)this.moduleSelectList.push({id:t,name:t}),this.mode in{add:!0,copy:!0}&&t==this.currentModule&&(this.moduleSelectedItem={id:t,name:t});this.roleSelectList=[{id:"*",name:"*",group:"global"}],this.roleSelectedItem={id:"*",name:"*",group:"global"};let t=this.metadata.getSysRoles();for(let e of t)this.roleSelectList.push({id:e.id,name:e.name,group:e.scope}),"copy"==this.mode&&e.id==this.currentRole&&(this.roleSelectedItem={id:e.id,name:e.name,group:"global"});let s=this.configuration.getData("components");for(let e in s)this.compSelectList.push({id:e,name:e,deprecated:"1"==s[e].deprecated});this.compSelectList.sort(((e,t)=>e.name.localeCompare(t.name))),"copy"==this.mode&&(this.compDisabled=!0,this.compSelectedItem={id:this.currentComponent.id,name:this.currentComponent.component,version:this.currentComponent.version,package:this.currentComponent.package})}validate(){if("*"==this.currentModule){if(this.compSelectedItem&&this.roleSelectedItem&&this.currentType)return!1}else if(this.compSelectedItem&&this.moduleSelectedItem&&this.roleSelectedItem&&this.currentType)return!1;return!0}sortArray(e){return e.sort(((e,t)=>{let s=e.name.toLowerCase(),i=t.name.toLowerCase();return s<i?-1:s>i?1:0})),e}closeDialog(){this.self.destroy()}save(){let e=this.currentType,t="",s={},i=this.modelutilities.generateGuid();if(this.currentComponent){let e=JSON.stringify(this.currentComponent.componentconfig);s={component:this.currentComponent.component,componentconfig:e,package:this.currentComponent.package,version:this.currentComponent.version}}else s={component:this.compSelectedItem.name,componentconfig:"{}"};s.id=i,s.role_id=this.roleSelectedItem.id,"*"!=s.module&&(s.module=this.moduleSelectedItem.name),"custom"==e&&"*"==s.module&&(t="sysuicustomcomponentdefaultconf"),"custom"==e&&"*"!=s.module&&(t="sysuicustomcomponentmoduleconf"),"global"==e&&"*"==s.module&&(t="sysuicomponentdefaultconf"),"global"==e&&"*"!=s.module&&(t="sysuicomponentmoduleconf"),this.saveComponent(s,t)}saveComponent(e,t){e.type=this.currentType;let s,i="";"*"==e.module?(i="componentdefaultalreadyexists",s="componentdefaultconfigs",delete e.module):(i="componentmodulealreadyexists",s="componentmoduleconfigs"),this.backend.getRequest("configuration/spiceui/core/"+i,e).subscribe((i=>{delete e.type,0==i?this.backend.postRequest("configuration/configurator/"+t+"/"+e.id,null,{config:e}).subscribe((i=>{this.configuration.reloadTaskData(s),this.toast.sendToast("saved"),e.table=t,this.response$.emit(e),this.self.destroy()}),(e=>{this.toast.sendAlert("saving failed!"),console.error(e)})):this.toast.sendAlert("Configuration already exists!")}),(e=>{this.toast.sendAlert("Saving configuration failed!"),console.error(e)}))}static#e=this.ɵfac=function(e){return new(e||ModuleConfigAddDialog)(m.rXU(p.H),m.rXU(f.yu),m.rXU(b.B),m.rXU(y.g),m.rXU(y.g),m.rXU(v.o),m.rXU(M.i))};static#t=this.ɵcmp=m.VBU({type:ModuleConfigAddDialog,selectors:[["moduleconfig-add-dialog"]],inputs:{mode:"mode",currentComponent:"currentComponent",currentRole:"currentRole",currentType:"currentType",currentModule:"currentModule",allowGlobal:"allowGlobal"},outputs:{response$:"response"},decls:30,vars:21,consts:[[3,"close"],["label","LBL_COPY_COMPONENT",4,"ngIf"],["label","LBL_ADD_COMPONENT",4,"ngIf"],[2,"overflow","visible",3,"scrollable"],[1,"slds-form-element","slds-p-vertical_x-small"],[1,"slds-form-element__label"],["label","LBL_SCOPE"],[1,"slds-form-element__control"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"slds-p-vertical_x-small"],[1,"slds-p-vertical_x-small",3,"ngModel","label","ngModelChange"],[3,"value","display",4,"ngFor","ngForOf"],[3,"ngModel","disabled","label","ngModelChange"],["class","slds-notify slds-notify_alert slds-theme_alert-texture slds-theme_warning slds-p-vertical_x-small","role","alert",4,"ngIf"],[3,"ngModel","label","ngModelChange"],[3,"value","display","group",4,"ngFor","ngForOf"],["class","slds-grid slds-grid--vertical-align-center slds-m-vertical--xxx-small",4,"ngIf"],["class","slds-text-align_center slds-p-vertical_small slds-text-heading_small",4,"ngIf"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"disabled","click"],[4,"ngIf"],["label","LBL_COPY_COMPONENT"],["label","LBL_ADD_COMPONENT"],[3,"value"],[3,"label"],[3,"value","display"],["role","alert",1,"slds-notify","slds-notify_alert","slds-theme_alert-texture","slds-theme_warning","slds-p-vertical_x-small"],[1,"slds-assistive-text"],["title","Description of icon when needed",1,"slds-icon_container","slds-icon-utility-warning","slds-m-right_x-small"],["aria-hidden","true",1,"slds-icon","slds-icon_x-small"],[0,"xlink","href","/assets/icons/utility-sprite/svg/symbols.svg#warning"],["label","LBL_DEPRECATED_MSG"],[3,"value","display","group"],[1,"slds-grid","slds-grid--vertical-align-center","slds-m-vertical--xxx-small"],[1,"slds-size--1-of-2","slds-p-right--xx-small"],["label","LBL_PACKAGE"],["type","text",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-size--1-of-2","slds-p-left--xx-small"],["label","LBL_VERSION"],[1,"slds-text-align_center","slds-p-vertical_small","slds-text-heading_small"],["label","LBL_NOTE_COPY_CONFIG_INFO"],["label","LBL_ADD"],["label","LBL_COPY"]],template:function(e,t){1&e&&(m.j41(0,"system-modal")(1,"system-modal-header",0),m.bIt("close",(function(){return t.closeDialog()})),m.DNE(2,Dr,1,0,"system-label",1)(3,Er,1,0,"system-label",2),m.k0s(),m.j41(4,"system-modal-content",3)(5,"div",4)(6,"label",5),m.nrm(7,"system-label",6),m.k0s(),m.j41(8,"div",7)(9,"div",8)(10,"select",9),m.mxI("ngModelChange",(function(e){return m.DH7(t.currentType,e)||(t.currentType=e),e})),m.DNE(11,Cr,2,2,"option",10),m.k0s()()()(),m.j41(12,"div",11)(13,"system-select",12),m.mxI("ngModelChange",(function(e){return m.DH7(t.moduleSelectedItem,e)||(t.moduleSelectedItem=e),e})),m.DNE(14,Fr,1,2,"system-select-option",13),m.k0s()(),m.j41(15,"div",11)(16,"system-select",14),m.mxI("ngModelChange",(function(e){return m.DH7(t.compSelectedItem,e)||(t.compSelectedItem=e),e})),m.DNE(17,Gr,1,2,"system-select-option",13),m.k0s()(),m.DNE(18,$r,8,0,"div",15),m.j41(19,"div",11)(20,"system-select",16),m.mxI("ngModelChange",(function(e){return m.DH7(t.roleSelectedItem,e)||(t.roleSelectedItem=e),e})),m.DNE(21,Br,1,3,"system-select-option",17),m.k0s()(),m.DNE(22,Nr,9,2,"div",18)(23,Sr,2,0,"div",19),m.k0s(),m.j41(24,"system-modal-footer")(25,"button",20),m.bIt("click",(function(){return t.closeDialog()})),m.nrm(26,"system-label",21),m.k0s(),m.j41(27,"button",22),m.bIt("click",(function(){return t.save()})),m.DNE(28,wr,2,0,"span",23)(29,Tr,2,0,"span",23),m.k0s()()()),2&e&&(m.R7$(2),m.Y8G("ngIf","copy"==t.mode),m.R7$(),m.Y8G("ngIf","add"==t.mode),m.R7$(),m.Y8G("scrollable",!1),m.R7$(6),m.R50("ngModel",t.currentType),m.R7$(),m.Y8G("ngForOf",t.types),m.R7$(2),m.R50("ngModel",t.moduleSelectedItem),m.Y8G("label","LBL_MODULE"),m.R7$(),m.Y8G("ngForOf",t.moduleSelectList),m.R7$(2),m.R50("ngModel",t.compSelectedItem),m.Y8G("disabled",t.compDisabled)("label","LBL_COMPONENT"),m.R7$(),m.Y8G("ngForOf",t.compSelectList),m.R7$(),m.Y8G("ngIf",t.showDeprecatedWarning),m.R7$(2),m.R50("ngModel",t.roleSelectedItem),m.Y8G("label","LBL_ROLE"),m.R7$(),m.Y8G("ngForOf",t.roleSelectList),m.R7$(),m.Y8G("ngIf","copy"==t.mode),m.R7$(),m.Y8G("ngIf","copy"==t.mode),m.R7$(4),m.Y8G("disabled",t.validate()),m.R7$(),m.Y8G("ngIf","add"==t.mode),m.R7$(),m.Y8G("ngIf","copy"==t.mode))},dependencies:[i.Sq,i.bT,n.xH,n.y7,n.me,n.wz,n.BC,n.vS,x.W,qe.D,Pe.I,Je.Q,We.C,dt.i,rt.t],encapsulation:2})}return ModuleConfigAddDialog})();function Yr(e,t){if(1&e&&(m.j41(0,"option",30),m.EFF(1),m.k0s()),2&e){const e=t.$implicit;m.Y8G("value",e),m.R7$(),m.SpI("",e," ")}}function Or(e,t){1&e&&(m.j41(0,"option",31),m.nrm(1,"system-label",32),m.k0s())}let Xr=(()=>{class FieldsetManagerCopyDialog{constructor(e,t){this.language=e,this.metadata=t,this.edit_mode="",this.response=new h.B,this.modules=[],this.currentName="",this.currentType="",this.currentModule="",this.modules=this.metadata.getModules().sort()}ngOnInit(){this.currentName=this.fieldset.name+" (custom)",this.currentModule=this.fieldset.module,"all"==this.edit_mode?this.currentType=this.fieldset.type:this.currentType="custom"}close(){this.response.next(void 0),this.response.complete(),this.self.destroy()}onModalEscX(){this.close()}copy(){this.response.next({fieldset:this.fieldset,type:this.currentType,module:this.currentModule,name:this.currentName})}validate(){return!(this.fieldset&&this.currentModule&&this.currentType)}static#e=this.ɵfac=function(e){return new(e||FieldsetManagerCopyDialog)(m.rXU(b.B),m.rXU(f.yu))};static#t=this.ɵcmp=m.VBU({type:FieldsetManagerCopyDialog,selectors:[["fieldsetmanager-copy-dialog"]],inputs:{fieldset:"fieldset",edit_mode:"edit_mode"},outputs:{response:"response"},decls:36,vars:9,consts:[["role","dialog","tabindex","-1","aria-labelledby","header43",1,"slds-modal","slds-fade-in-open"],[1,"slds-modal__container"],[1,"slds-modal__header","slds-theme--shade"],["title","Close",1,"slds-button","slds-modal__close","slds-button--icon-inverse",3,"click"],[3,"icon","size"],["id","header43",1,"slds-text-heading--medium"],["label","LBL_COPY"],[1,"slds-modal__content","slds-p-around--medium"],[1,"slds-form-element"],[1,"slds-form-element__label"],["label","LBL_MODULE"],[1,"slds-form-element__control",2,"min-width","250px"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","disabled","ngModelChange"],["value","*"],[3,"value",4,"ngFor","ngForOf"],["label","LBL_SCOPE"],[1,"slds-form-element__control"],[1,"slds-select",3,"ngModel","ngModelChange"],["value","custom"],["label","LBL_CUSTOM"],["value","global",4,"ngIf"],[1,"slds-form-element","slds-m-top--small"],["label","LBL_FIELDSET"],["type","text","placeholder","name",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-modal__footer"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_SAVE"],[3,"value"],["value","global"],["label","LBL_GLOBAL"]],template:function(e,t){1&e&&(m.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),m.bIt("click",(function(){return t.close()})),m.nrm(4,"system-button-icon",4),m.k0s(),m.j41(5,"h2",5),m.nrm(6,"system-label",6),m.k0s()(),m.j41(7,"div",7)(8,"div",8)(9,"label",9),m.nrm(10,"system-label",10),m.k0s(),m.j41(11,"div",11)(12,"div",12)(13,"select",13),m.mxI("ngModelChange",(function(e){return m.DH7(t.currentModule,e)||(t.currentModule=e),e})),m.j41(14,"option",14),m.EFF(15,"*"),m.k0s(),m.DNE(16,Yr,2,2,"option",15),m.k0s()()()(),m.j41(17,"div",8)(18,"label",9),m.nrm(19,"system-label",16),m.k0s(),m.j41(20,"div",17)(21,"div",12)(22,"select",18),m.mxI("ngModelChange",(function(e){return m.DH7(t.currentType,e)||(t.currentType=e),e})),m.j41(23,"option",19),m.nrm(24,"system-label",20),m.k0s(),m.DNE(25,Or,2,0,"option",21),m.k0s()()()(),m.j41(26,"div",22)(27,"label",9),m.nrm(28,"system-label",23),m.k0s(),m.j41(29,"div",17)(30,"input",24),m.mxI("ngModelChange",(function(e){return m.DH7(t.currentName,e)||(t.currentName=e),e})),m.k0s()()()(),m.j41(31,"div",25)(32,"button",26),m.bIt("click",(function(){return t.close()})),m.nrm(33,"system-label",27),m.k0s(),m.j41(34,"button",28),m.bIt("click",(function(){return t.copy()})),m.nrm(35,"system-label",29),m.k0s()()()()),2&e&&(m.R7$(4),m.Y8G("icon","close")("size","large"),m.R7$(9),m.R50("ngModel",t.currentModule),m.Y8G("disabled",0==t.modules.length),m.R7$(3),m.Y8G("ngForOf",t.modules),m.R7$(6),m.R50("ngModel",t.currentType),m.R7$(3),m.Y8G("ngIf","all"==t.edit_mode),m.R7$(5),m.R50("ngModel",t.currentName),m.R7$(4),m.Y8G("disabled",t.validate()))},dependencies:[i.Sq,i.bT,n.xH,n.y7,n.me,n.wz,n.BC,n.vS,L.t,x.W],encapsulation:2})}return FieldsetManagerCopyDialog})(),Vr=(()=>{class WorkbenchConfigOptionFieldset{constructor(e,t){this.language=e,this.view=t,this.option={},this.configValues={}}static#e=this.ɵfac=function(e){return new(e||WorkbenchConfigOptionFieldset)(m.rXU(b.B),m.rXU(_n.U))};static#t=this.ɵcmp=m.VBU({type:WorkbenchConfigOptionFieldset,selectors:[["workbench-config-option-fieldset"]],decls:3,vars:4,consts:[[1,"slds-form-element","slds-m-vertical--xxx-small"],[3,"option","description"],[3,"ngModel","disabled","ngModelChange"]],template:function(e,t){1&e&&(m.j41(0,"div",0),m.nrm(1,"workbench-config-label",1),m.j41(2,"system-input-fieldset",2),m.mxI("ngModelChange",(function(e){return m.DH7(t.configValues[t.option.option],e)||(t.configValues[t.option.option]=e),e})),m.k0s()()),2&e&&(m.R7$(),m.Y8G("option",t.option.option)("description",t.option.description),m.R7$(),m.R50("ngModel",t.configValues[t.option.option]),m.Y8G("disabled",!t.view.isEditMode()))},dependencies:[n.BC,n.vS,Xn.W,Ir.y],encapsulation:2})}return WorkbenchConfigOptionFieldset})();var Ur=s(21534);let Hr=(()=>{class WorkbenchConfigOptionModulefilter{constructor(e,t,s,i){this.language=e,this.metadata=t,this.cdRef=s,this.view=i,this.configValues=[],this.option={},this.modules=[],this.modulefilters=[],this.module=""}ngAfterViewInit(){this.modulefilters=this.metadata.getModuleFilters(),this.modules=this.metadata.getModules(),this.modules.sort(),this.configValues[this.option.option]&&this.metadata.getModuleFilter(this.configValues[this.option.option])&&(this.module=this.metadata.getModuleFilter(this.configValues[this.option.option]).module),this.cdRef.detectChanges()}static#e=this.ɵfac=function(e){return new(e||WorkbenchConfigOptionModulefilter)(m.rXU(b.B),m.rXU(f.yu),m.rXU(m.gRc),m.rXU(_n.U))};static#t=this.ɵcmp=m.VBU({type:WorkbenchConfigOptionModulefilter,selectors:[["workbench-config-option-module-filter"]],decls:3,vars:4,consts:[[1,"slds-form-element","slds-m-vertical--xxx-small"],[3,"option","description"],[3,"ngModel","disabled","ngModelChange"]],template:function(e,t){1&e&&(m.j41(0,"div",0),m.nrm(1,"workbench-config-label",1),m.j41(2,"system-input-module-filter",2),m.mxI("ngModelChange",(function(e){return m.DH7(t.configValues[t.option.option],e)||(t.configValues[t.option.option]=e),e})),m.k0s()()),2&e&&(m.R7$(),m.Y8G("option",t.option.option)("description",t.option.description),m.R7$(),m.R50("ngModel",t.configValues[t.option.option]),m.Y8G("disabled",!t.view.isEditMode()))},dependencies:[n.BC,n.vS,Ur.c,Ir.y],encapsulation:2})}return WorkbenchConfigOptionModulefilter})();var zr=s(63252);let qr=(()=>{class WorkbenchConfigOptionActionset{constructor(e,t){this.language=e,this.view=t,this.configValues=[],this.option={}}static#e=this.ɵfac=function(e){return new(e||WorkbenchConfigOptionActionset)(m.rXU(b.B),m.rXU(_n.U))};static#t=this.ɵcmp=m.VBU({type:WorkbenchConfigOptionActionset,selectors:[["workbench-config-option-actionset"]],decls:3,vars:4,consts:[[1,"slds-form-element","slds-m-vertical--xxx-small"],[3,"option","description"],[3,"ngModel","disabled","ngModelChange"]],template:function(e,t){1&e&&(m.j41(0,"div",0),m.nrm(1,"workbench-config-label",1),m.j41(2,"system-input-actionset",2),m.mxI("ngModelChange",(function(e){return m.DH7(t.configValues[t.option.option],e)||(t.configValues[t.option.option]=e),e})),m.k0s()()),2&e&&(m.R7$(),m.Y8G("option",t.option.option)("description",t.option.description),m.R7$(),m.R50("ngModel",t.configValues[t.option.option]),m.Y8G("disabled",!t.view.isEditMode()))},dependencies:[n.BC,n.vS,zr.m,Ir.y],encapsulation:2})}return WorkbenchConfigOptionActionset})(),Pr=(()=>{class WorkbenchConfigOptionBoolean{constructor(e){this.view=e,this.configValues=[],this.option={},this.objtype="",this.showInfo=!1}static#e=this.ɵfac=function(e){return new(e||WorkbenchConfigOptionBoolean)(m.rXU(_n.U))};static#t=this.ɵcmp=m.VBU({type:WorkbenchConfigOptionBoolean,selectors:[["workbench-config-option-boolean"]],decls:7,vars:6,consts:[[1,"slds-form-element","slds-p-vertical--x-small"],[1,"slds-form-element__control","slds-grid","slds-grid--vertical-align-center"],[1,"slds-checkbox"],["type","checkbox","name","options",1,"slds-float_left",3,"disabled","id","ngModel","ngModelChange"],[1,"slds-checkbox__label"],[1,"slds-checkbox_faux"],[3,"option","description"]],template:function(e,t){1&e&&(m.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"input",3),m.mxI("ngModelChange",(function(e){return m.DH7(t.configValues[t.option.option],e)||(t.configValues[t.option.option]=e),e})),m.k0s(),m.j41(4,"label",4),m.nrm(5,"span",5),m.k0s()(),m.nrm(6,"workbench-config-label",6),m.k0s()()),2&e&&(m.R7$(3),m.Y8G("disabled",!t.view.isEditMode())("id",t.option.option),m.R50("ngModel",t.configValues[t.option.option]),m.R7$(),m.BMQ("for",t.option.option),m.R7$(2),m.Y8G("option",t.option.option)("description",t.option.description))},dependencies:[n.Zm,n.BC,n.vS,Ir.y],encapsulation:2})}return WorkbenchConfigOptionBoolean})();var Jr=s(70585);let Wr=(()=>{class WorkbenchConfigOptionComponentset{constructor(e,t){this.language=e,this.view=t,this.configValues=[],this.option={}}static#e=this.ɵfac=function(e){return new(e||WorkbenchConfigOptionComponentset)(m.rXU(b.B),m.rXU(_n.U))};static#t=this.ɵcmp=m.VBU({type:WorkbenchConfigOptionComponentset,selectors:[["workbench-config-option-componentset"]],decls:3,vars:4,consts:[[1,"slds-form-element","slds-m-vertical--xxx-small"],[3,"option","description"],[3,"ngModel","disabled","ngModelChange"]],template:function(e,t){1&e&&(m.j41(0,"div",0),m.nrm(1,"workbench-config-label",1),m.j41(2,"system-input-componentset",2),m.mxI("ngModelChange",(function(e){return m.DH7(t.configValues[t.option.option],e)||(t.configValues[t.option.option]=e),e})),m.k0s()()),2&e&&(m.R7$(),m.Y8G("option",t.option.option)("description",t.option.description),m.R7$(),m.R50("ngModel",t.configValues[t.option.option]),m.Y8G("disabled",!t.view.isEditMode()))},dependencies:[n.BC,n.vS,Jr.n,Ir.y],encapsulation:2})}return WorkbenchConfigOptionComponentset})(),Kr=(()=>{class WorkbenchConfigOptionModule{constructor(e,t,s,i,n,l,o,a){this.backend=e,this.metadata=t,this.language=s,this.modelutilities=i,this.broadcast=n,this.toast=l,this.cdRef=o,this.view=a,this.option={},this.objtype="",this.modules=[]}ngAfterViewInit(){this.modules=this.metadata.getModules().sort(),this.cdRef.detectChanges()}static#e=this.ɵfac=function(e){return new(e||WorkbenchConfigOptionModule)(m.rXU(p.H),m.rXU(f.yu),m.rXU(b.B),m.rXU(y.g),m.rXU(Mi.m),m.rXU(v.o),m.rXU(m.gRc),m.rXU(_n.U))};static#t=this.ɵcmp=m.VBU({type:WorkbenchConfigOptionModule,selectors:[["workbench-config-option-componentset"]],inputs:{configValues:"configValues"},decls:3,vars:3,consts:[[1,"slds-form-element","slds-m-vertical--xxx-small"],[3,"option","description"],[3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(m.j41(0,"div",0),m.nrm(1,"workbench-config-label",1),m.j41(2,"system-input-module",2),m.mxI("ngModelChange",(function(e){return m.DH7(t.configValues[t.option.option],e)||(t.configValues[t.option.option]=e),e})),m.k0s()()),2&e&&(m.R7$(),m.Y8G("option",t.option.option)("description",t.option.description),m.R7$(),m.R50("ngModel",t.configValues[t.option.option]))},dependencies:[n.BC,n.vS,to.u,Ir.y],encapsulation:2})}return WorkbenchConfigOptionModule})(),Qr=(()=>{class WorkbenchConfigOptionDefault{constructor(e){this.view=e,this.configValues=[],this.option={},this.showInfo=!1}get optionValue(){return this.configValues[this.option.option]}set optionValue(e){this.configValues[this.option.option]=e}static#e=this.ɵfac=function(e){return new(e||WorkbenchConfigOptionDefault)(m.rXU(_n.U))};static#t=this.ɵcmp=m.VBU({type:WorkbenchConfigOptionDefault,selectors:[["workbench-config-option-default"]],inputs:{configValues:"configValues"},decls:4,vars:4,consts:[[1,"slds-form-element","slds-m-vertical--xxx-small"],[3,"option","description"],[1,"slds-form-element__control"],["type","text",1,"slds-input",3,"disabled","ngModel","ngModelChange"]],template:function(e,t){1&e&&(m.j41(0,"div",0),m.nrm(1,"workbench-config-label",1),m.j41(2,"div",2)(3,"input",3),m.mxI("ngModelChange",(function(e){return m.DH7(t.optionValue,e)||(t.optionValue=e),e})),m.k0s()()()),2&e&&(m.R7$(),m.Y8G("option",t.option.option)("description",t.option.description),m.R7$(2),m.Y8G("disabled",!t.view.isEditMode()),m.R50("ngModel",t.optionValue))},dependencies:[n.me,n.BC,n.vS,Ir.y],encapsulation:2})}return WorkbenchConfigOptionDefault})(),Zr=(()=>{class WorkbenchConfigOptionLabel{constructor(e){this.view=e,this.configValues=[],this.option={}}static#e=this.ɵfac=function(e){return new(e||WorkbenchConfigOptionLabel)(m.rXU(_n.U))};static#t=this.ɵcmp=m.VBU({type:WorkbenchConfigOptionLabel,selectors:[["workbench-config-option-label"]],decls:3,vars:3,consts:[[1,"slds-form-element","slds-m-vertical--xxx-small"],[3,"option","description"],[3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(m.j41(0,"div",0),m.nrm(1,"workbench-config-label",1),m.j41(2,"system-input-label",2),m.mxI("ngModelChange",(function(e){return m.DH7(t.configValues[t.option.option],e)||(t.configValues[t.option.option]=e),e})),m.k0s()()),2&e&&(m.R7$(),m.Y8G("option",t.option.option)("description",t.option.description),m.R7$(),m.R50("ngModel",t.configValues[t.option.option]))},dependencies:[n.BC,n.vS,ze.w,Ir.y],encapsulation:2})}return WorkbenchConfigOptionLabel})();var ec=s(41239);let tc=(()=>{class WorkbenchConfigOptionMethod{constructor(e,t){this.language=e,this.view=t,this.option={},this.configValues={}}static#e=this.ɵfac=function(e){return new(e||WorkbenchConfigOptionMethod)(m.rXU(b.B),m.rXU(_n.U))};static#t=this.ɵcmp=m.VBU({type:WorkbenchConfigOptionMethod,selectors:[["workbench-config-option-method"]],decls:3,vars:4,consts:[[1,"slds-form-element","slds-m-vertical--xxx-small"],[3,"option","description"],[3,"ngModel","disabled","ngModelChange"]],template:function(e,t){1&e&&(m.j41(0,"div",0),m.nrm(1,"workbench-config-label",1),m.j41(2,"system-input-backend-method",2),m.mxI("ngModelChange",(function(e){return m.DH7(t.configValues[t.option.option],e)||(t.configValues[t.option.option]=e),e})),m.k0s()()),2&e&&(m.R7$(),m.Y8G("option",t.option.option)("description",t.option.description),m.R7$(),m.R50("ngModel",t.configValues[t.option.option]),m.Y8G("disabled",!t.view.isEditMode()))},dependencies:[n.BC,n.vS,ec.H,Ir.y],encapsulation:2})}return WorkbenchConfigOptionMethod})();var sc=s(34411);function ic(e,t){if(1&e&&m.nrm(0,"system-select-option",17),2&e){const e=t.$implicit;m.Y8G("value",e.id)("display",e.name)("group",e.group)}}function nc(e,t){if(1&e){const e=m.RV6();m.j41(0,"button",8),m.bIt("click",(function(){m.eBV(e);const t=m.XpG();return m.Njj(t.editModalRepo())})),m.nrm(1,"system-utility-icon",9),m.k0s()}if(2&e){const e=m.XpG();m.Y8G("disabled",!e.view.isEditMode()),m.R7$(),m.Y8G("icon","edit")("size","x-small")}}function lc(e,t){if(1&e){const e=m.RV6();m.j41(0,"div",18)(1,"div",19),m.nrm(2,"system-utility-icon",20),m.j41(3,"input",21),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.objectFilter,t)||(s.objectFilter=t),m.Njj(t)})),m.k0s()(),m.j41(4,"button",22),m.bIt("click",(function(){m.eBV(e);const t=m.XpG();return m.Njj(t.addObjRepo())})),m.nrm(5,"system-label",23),m.k0s()()}if(2&e){const e=m.XpG();m.R7$(3),m.R50("ngModel",e.objectFilter),m.R7$(),m.Y8G("disabled",!e.view.isEditMode())}}const oc=e=>({"slds-theme--shade":e});function ac(e,t){if(1&e){const e=m.RV6();m.j41(0,"li",24),m.bIt("click",(function(){const t=m.eBV(e).$implicit,s=m.XpG();return m.Njj(s.clickObjRepo(t))})),m.EFF(1),m.k0s()}if(2&e){const e=t.$implicit,s=m.XpG();m.Y8G("ngClass",m.eq3(2,oc,s.checkCurrentObjRepo(e.id))),m.R7$(),m.SpI(" ",e.object," ")}}function dc(e,t){if(1&e){const e=m.RV6();m.j41(0,"div",26)(1,"label",2),m.nrm(2,"system-label",44),m.k0s(),m.j41(3,"div",28)(4,"system-richtext-editor",52),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG(2);return m.DH7(s.currentObjRepo.description,t)||(s.currentObjRepo.description=t),m.Njj(t)})),m.k0s()()()}if(2&e){const e=m.XpG(2);m.R7$(4),m.R50("ngModel",e.currentObjRepo.description)}}function rc(e,t){if(1&e){const e=m.RV6();m.j41(0,"div",26)(1,"label",2),m.nrm(2,"system-label",44),m.k0s(),m.j41(3,"div",53)(4,"iframe",54),m.bIt("change",(function(t){m.eBV(e);const s=m.XpG(2);return m.Njj(s.currentObjRepo.description=t)})),m.k0s()()()}if(2&e){const e=m.XpG(2);m.R7$(4),m.Y8G("srcdoc",e.currentObjRepo.description,m.npT)}}function cc(e,t){if(1&e&&(m.j41(0,"option",68),m.EFF(1),m.k0s()),2&e){const e=t.$implicit;m.Y8G("value",e),m.R7$(),m.JRh(e)}}function mc(e,t){if(1&e){const e=m.RV6();m.qex(0),m.j41(1,"tr",55)(2,"td",56)(3,"span",57)(4,"div",58)(5,"input",59),m.mxI("ngModelChange",(function(t){const s=m.eBV(e).$implicit;return m.DH7(s.name,t)||(s.name=t),m.Njj(t)})),m.k0s()()()(),m.j41(6,"td",60)(7,"span",57)(8,"div",28)(9,"div",61)(10,"select",62),m.mxI("ngModelChange",(function(t){const s=m.eBV(e).$implicit;return m.DH7(s.type,t)||(s.type=t),m.Njj(t)})),m.DNE(11,cc,2,2,"option",63),m.k0s()()()()(),m.j41(12,"td",64)(13,"span",57)(14,"div",58)(15,"input",59),m.mxI("ngModelChange",(function(t){const s=m.eBV(e).$implicit;return m.DH7(s.description,t)||(s.description=t),m.Njj(t)})),m.k0s()()()(),m.j41(16,"td",65)(17,"div",66)(18,"button",67),m.bIt("click",(function(){const t=m.eBV(e).index,s=m.XpG(2);return m.Njj(s.deleteConfig(t))})),m.nrm(19,"system-button-icon",48),m.k0s()()()(),m.bVm()}if(2&e){const e=t.$implicit,s=m.XpG(2);m.R7$(5),m.Y8G("disabled",!s.view.isEditMode()),m.R50("ngModel",e.name),m.R7$(5),m.Y8G("disabled",!s.view.isEditMode()),m.R50("ngModel",e.type),m.R7$(),m.Y8G("ngForOf",s.fieldTypeList),m.R7$(4),m.Y8G("disabled",!s.view.isEditMode()),m.R50("ngModel",e.description),m.R7$(3),m.Y8G("disabled",!s.view.isEditMode()),m.R7$(),m.Y8G("icon","delete")}}function uc(e,t){if(1&e){const e=m.RV6();m.j41(0,"div",25)(1,"div",26)(2,"label",2),m.nrm(3,"system-label",27),m.k0s(),m.j41(4,"div",28)(5,"input",29),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.currentObjRepo.object,t)||(s.currentObjRepo.object=t),m.Njj(t)})),m.k0s()()(),m.j41(6,"div",26)(7,"label",2),m.nrm(8,"system-label",30),m.k0s(),m.j41(9,"div",28)(10,"input",29),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.currentObjRepo.component,t)||(s.currentObjRepo.component=t),m.Njj(t)})),m.k0s()()(),m.j41(11,"label",31)(12,"input",32),m.bIt("change",(function(){m.eBV(e);const t=m.XpG();return m.Njj(t.updateDeprecated())})),m.k0s(),m.nrm(13,"span",33),m.j41(14,"span",2),m.nrm(15,"system-label",34),m.k0s()(),m.DNE(16,dc,5,1,"div",35)(17,rc,5,1,"div",35),m.j41(18,"div",36)(19,"label",2),m.nrm(20,"system-label",37),m.k0s(),m.j41(21,"table",38)(22,"thead")(23,"tr",39)(24,"th",40)(25,"span",41),m.nrm(26,"system-label",42),m.k0s()(),m.j41(27,"th",40)(28,"span",41),m.nrm(29,"system-label",43),m.k0s()(),m.j41(30,"th",40)(31,"span",41),m.nrm(32,"system-label",44),m.k0s()(),m.nrm(33,"th",40),m.k0s()(),m.j41(34,"tbody"),m.DNE(35,mc,20,9,"ng-container",45),m.k0s()(),m.j41(36,"div",46)(37,"button",47),m.bIt("click",(function(){m.eBV(e);const t=m.XpG();return m.Njj(t.addConfig())})),m.nrm(38,"system-button-icon",48),m.k0s()()(),m.j41(39,"div",49)(40,"button",50),m.bIt("click",(function(){m.eBV(e);const t=m.XpG();return m.Njj(t.saveChanges())})),m.nrm(41,"system-label",51),m.k0s()()()}if(2&e){const e=m.XpG();m.R7$(5),m.Y8G("disabled",!e.view.isEditMode()),m.R50("ngModel",e.currentObjRepo.object),m.R7$(5),m.Y8G("disabled",!e.view.isEditMode()),m.R50("ngModel",e.currentObjRepo.component),m.R7$(2),m.Y8G("disabled",!e.view.isEditMode())("ngModel",e.getDeprecatedBool(e.currentObjRepo.deprecated)),m.R7$(4),m.Y8G("ngIf",e.view.isEditMode()),m.R7$(),m.Y8G("ngIf",!e.view.isEditMode()),m.R7$(18),m.Y8G("ngForOf",e.currentConfigArray),m.R7$(2),m.Y8G("disabled",!e.view.isEditMode()),m.R7$(),m.Y8G("icon","new"),m.R7$(2),m.Y8G("disabled",!e.view.isEditMode())}}let gc=(()=>{class ObjectRepositoryManagerFilter{transform(e,t){if(!t)return e;let s=[];for(let i of e)i.object.toLowerCase().indexOf(t.toLowerCase())>=0&&s.push(i);return s}static#e=this.ɵfac=function(e){return new(e||ObjectRepositoryManagerFilter)};static#t=this.ɵpipe=m.EJ8({name:"objectrepositorymanagerfilter",type:ObjectRepositoryManagerFilter,pure:!0})}return ObjectRepositoryManagerFilter})(),hc=(()=>{class ObjectRepositoryManager{constructor(e,t,s,i,n,l,o,a,d){this.backend=e,this.metadata=t,this.language=s,this.modalservice=i,this.modelutilities=n,this.modal=l,this.toast=o,this.configurationService=a,this.view=d,this.treelist=[],this.edit_mode="custom",this.change_request_required=!1,this.crNoneActive=!1,this.moduleReposSelect=[],this.moduleRepos=[],this.modulereposselecteditem={},this.objrepoList=[],this.configList={},this.currentConfigArray=[],this.objectFilter="",this.fieldTypeList=["string","label","boolean","fieldset","actionset","componentset","module","modulefilter"],this.newRepo={},this.emptyRepo={component:"",componentconfig:"",description:"",id:"",module:"",object:"",package:""},this.currentModule={},this.newModule={},this.emptyModule={id:"",module:"",path:"",description:"",package:"",version:"",scope:"custom"},this.currentObjRepo={},this.backend.getRequest("configuration/configurator/entries/sysuimodulerepository").subscribe((e=>{for(let t of e){this.moduleRepos.push(t);const e={id:t.id,name:t.module,group:"global"};this.moduleReposSelect.push(e)}this.moduleReposSelect=Object.assign([],this.moduleReposSelect)})),this.backend.getRequest("configuration/configurator/entries/sysuicustommodulerepository").subscribe((e=>{for(let t of e){this.moduleRepos.push(t);const e={id:t.id,name:t.module,group:"custom"};this.moduleReposSelect.push(e)}this.moduleReposSelect=Object.assign([],this.moduleReposSelect)})),this.checkMode()}set moduleReposSelectedItem(e){this.modulereposselecteditem=e,"global"==e.group?this.backend.getRequest("configuration/configurator/entries/sysuiobjectrepository").subscribe((t=>{this.objrepoList=[];for(let s of t)e.id==s.module&&this.objrepoList.push(s)})):"custom"==e.group?this.backend.getRequest("configuration/configurator/entries/sysuicustomobjectrepository").subscribe((t=>{this.objrepoList=[];for(let s of t)e.id==s.module&&this.objrepoList.push(s)})):console.error("Damaged item!"),this.objrepoList.sort(((e,t)=>e.object<t.object?1:-1));for(let t of this.moduleRepos)t.id==e.id&&(this.currentModule=t,this.currentModule.scope=e.group);this.checkMode()}get moduleReposSelectedItem(){return this.modulereposselecteditem}updateField(e){this.currentObjRepo.description=e}updateDeprecated(){this.currentObjRepo.deprecated="1"==this.currentObjRepo.deprecated?"0":"1"}checkMode(){this.edit_mode=this.configurationService.getCapabilityConfig("core").edit_mode,this.change_request_required=this.configurationService.getCapabilityConfig("systemdeployment").change_request_required,"none"!=this.edit_mode&&"custom"!=this.edit_mode&&"all"!=this.edit_mode&&(this.edit_mode="custom"),this.change_request_required?this.backend.getRequest("module/SystemDeploymentCRs/active").subscribe((e=>{""==e.id?(this.setNoneMode(),this.crNoneActive=!0,this.toast.sendToast(this.language.getLabel("LBL_ACTIVATE_CR_WARNING"),"warning",null,3)):(this.crNoneActive=!1,"all"==this.edit_mode?this.setAllMode():"custom"==this.edit_mode?this.setCustomMode():this.setNoneMode())})):(this.crNoneActive=!1,"all"==this.edit_mode?this.setAllMode():"custom"==this.edit_mode?this.setCustomMode():this.setNoneMode())}setNoneMode(){this.view.setViewMode()}setCustomMode(){"custom"==this.currentModule.scope?this.view.setEditMode():this.view.setViewMode()}setAllMode(){this.view.setEditMode()}clickObjRepo(e){this.currentObjRepo=e,this.currentConfigArray=[];try{this.configList=JSON.parse(this.currentObjRepo.componentconfig);let e=0;for(let t in this.configList)if(this.configList.hasOwnProperty(t)){let s;s=this.configList[t].description?this.configList[t].description:"";let i={id:e,name:t,type:this.configList[t].type,description:s};this.currentConfigArray.push(i),e++}}catch(e){console.warn("JSON is invalid or empty!")}}checkCurrentObjRepo(e){return this.currentObjRepo.id==e}addConfig(){this.currentConfigArray.push({id:this.currentConfigArray.length+1,name:"",type:""})}deleteConfig(e){this.currentConfigArray.splice(e,1)}saveChanges(){this.modal.openModal("SystemLoadingModal").subscribe((e=>{let t={},s=[...this.currentConfigArray],i=!0;for(let e of s)if(""!=e.type&&""!=e.name){let s={};s["type"]=e.type;let i="description";e.description?s[i]=e.description:s[i]="",t[e.name]=s}else i=!1;if(i){this.currentObjRepo.componentconfig=JSON.stringify(t);let s="";s="global"==this.currentModule.scope?"sysuiobjectrepository":"sysuicustomobjectrepository",this.backend.postRequest("configuration/configurator/"+s+"/"+this.currentObjRepo.id,null,{config:this.currentObjRepo}).subscribe((t=>{for(let e in this.objrepoList)this.objrepoList[e].id==this.currentObjRepo.id&&(this.objrepoList[e]=this.currentObjRepo);this.configurationService.reloadTaskData("components"),e.instance.self.destroy(),this.toast.sendToast("changes saved")}))}else e.instance.self.destroy(),this.toast.sendToast("Empty configuration!")}))}addObjRepo(){this.modalservice.openModal("ObjectRepositoryManagerAddRepo").subscribe((e=>{this.newRepo={...this.emptyRepo},e.instance.objRepo=this.newRepo,e.instance.closedialog.subscribe((e=>{e&&this.modal.openModal("SystemLoadingModal").subscribe((e=>{this.newRepo.id=this.modelutilities.generateGuid(),this.newRepo.module=this.currentModule.id;let t="";t="global"==this.currentModule.scope?"sysuiobjectrepository":"sysuicustomobjectrepository",this.backend.postRequest("configuration/configurator/"+t+"/"+this.newRepo.id,null,{config:this.newRepo}).subscribe((t=>{this.objrepoList.push(this.newRepo),this.configurationService.reloadTaskData("components"),this.currentObjRepo=this.newRepo,e.instance.self.destroy(),this.toast.sendToast("changes saved")}))}))}))}))}addModalRepo(e="add"){this.modalservice.openModal("ObjectRepositoryManagerAddModule").subscribe((t=>{"edit"==e?(this.newModule={...this.currentModule},t.instance.moduleRepo=this.newModule):(this.newModule={...this.emptyModule},t.instance.moduleRepo=this.newModule),t.instance.mode=e,t.instance.edit_mode=this.edit_mode,t.instance.closedialog.subscribe((t=>{t&&this.modal.openModal("SystemLoadingModal").subscribe((t=>{""==this.newModule.id&&(this.newModule.id=this.modelutilities.generateGuid());let s="",i="";"global"==this.newModule.scope?(s="sysuimodulerepository",i="global"):(s="sysuicustommodulerepository",i="custom"),delete this.newModule.scope,this.backend.postRequest("configuration/configurator/"+s+"/"+this.newModule.id,null,{config:this.newModule}).subscribe((s=>{let n={id:this.newModule.id,name:this.newModule.module,group:i};if(this.newModule.scope=i,"add"==e)this.moduleReposSelect.push(n),this.moduleRepos.push(this.newModule),this.moduleReposSelectedItem=n;else{for(let e in this.moduleReposSelect)this.moduleReposSelect[e].id==n.id&&(this.moduleReposSelect[e]=n);for(let e of this.moduleRepos)e.id==this.newModule.id&&(e=this.newModule)}this.currentModule=this.newModule,this.moduleReposSelect=Object.assign([],this.moduleReposSelect),this.moduleReposSelectedItem=n,this.configurationService.reloadTaskData("modules"),t.instance.self.destroy(),this.toast.sendToast("changes saved")}))}))}))}))}editModalRepo(){this.addModalRepo("edit")}exportRepoList(){this.modalservice.openModal("ObjectRepositoryExport")}getDeprecatedBool(e){return"1"==e}static#e=this.ɵfac=function(e){return new(e||ObjectRepositoryManager)(m.rXU(p.H),m.rXU(f.yu),m.rXU(b.B),m.rXU(R.y),m.rXU(y.g),m.rXU(R.y),m.rXU(v.o),m.rXU(M.i),m.rXU(_n.U))};static#t=this.ɵcmp=m.VBU({type:ObjectRepositoryManager,selectors:[["objectrepository-manager"]],features:[m.Jv_([_n.U])],decls:23,vars:19,consts:[[1,"slds-grid","slds-form--inline","slds-p-around--small","slds-border--bottom"],[1,"slds-form-element"],[1,"slds-form-element__label"],[1,"slds-form-element__control",2,"width","400px"],[2,"width","100%",3,"listHeight","ngModel","ngModelChange"],[3,"value","display","group",4,"ngFor","ngForOf"],[1,"slds-form-element","slds-col--bump-left"],["type","button","class","slds-button slds-button_icon slds-button_icon-border-filled",3,"disabled","click",4,"ngIf"],["type","button",1,"slds-button","slds-button_icon","slds-button_icon-border-filled",3,"disabled","click"],[3,"icon","size"],["type","button",1,"slds-button","slds-button--neutral",3,"click"],[1,"slds-grid"],[1,"slds-size--2-of-5","slds-p-horizontal--small","slds-border--right"],["class","slds-p-around--small slds-grid slds-grid_align-spread slds-grid_vertical-align-center slds-gutters",4,"ngIf"],["system-to-bottom","",1,"slds-has-dividers_around-space"],["class","slds-item",3,"ngClass","click",4,"ngFor","ngForOf"],["system-to-bottom","","class","slds-size--3-of-5 slds-p-horizontal--small",4,"ngIf"],[3,"value","display","group"],[1,"slds-p-around--small","slds-grid","slds-grid_align-spread","slds-grid_vertical-align-center","slds-gutters"],[1,"slds-grow","slds-form-element__control","slds-input-has-icon","slds-input-has-icon_right","slds-p-right--xx-small"],["icon","filterList","addclasses","slds-input__icon slds-input__icon--left"],["type","text",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-button","slds-button_neutral",3,"disabled","click"],["label","LBL_ADD"],[1,"slds-item",3,"ngClass","click"],["system-to-bottom","",1,"slds-size--3-of-5","slds-p-horizontal--small"],[1,"slds-form-element","slds-m-vertical_medium"],["label","LBL_OBJECT"],[1,"slds-form-element__control"],["type","text",1,"slds-input",3,"disabled","ngModel","ngModelChange"],["label","LBL_COMPONENT"],["for","deprecated",1,"slds-checkbox"],["type","checkbox","id","deprecated",3,"disabled","ngModel","change"],[1,"slds-checkbox--faux"],["label","LBL_DEPRECATED"],["class","slds-form-element slds-m-vertical_medium",4,"ngIf"],[1,"slds-table_edit_container","slds-is-relative"],["label","LBL_CONFIGURATION"],["role","grid",1,"slds-table","slds-table_bordered",2,"width","100%"],[1,"slds-line-height_reset"],["scope","col"],["title","Name",1,"slds-truncate"],["label","LBL_NAME"],["label","LBL_TYPE"],["label","LBL_DESCRIPTION"],[4,"ngFor","ngForOf"],[1,"slds-p-around--small","slds-align--absolute-center","slds-border--bottom"],["title","add item",1,"slds-button","slds-button--icon",3,"disabled","click"],[3,"icon"],[1,"slds-text-align--right","slds-p-vertical--x-small"],["type","button",1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_SAVE"],[3,"ngModel","ngModelChange"],[1,"slds-form-element__control","slds-box","slds-scrollable_y",2,"background-color","#ecebea","background-color","#ecebea","max-height","300px"],["width","100%","height","100%","frameborder","0","seamless","true","sandbox","",3,"srcdoc","change"],[1,"slds-hint-parent"],["role","gridcell",1,"slds-cell-edit",2,"width","30%"],[1,"slds-grid","slds-grid_align-spread"],[1,"slds-form-element__control",2,"width","100%"],["aria-describedby","error-message","type","text",1,"slds-input",3,"disabled","ngModel","ngModelChange"],["role","gridcell",1,"slds-cell-edit",2,"width","12%"],[1,"slds-select_container"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["role","gridcell",1,"slds-cell-edit",2,"width","100%"],["role","gridcell",1,"slds-cell-edit"],[1,"slds-p-around--small","slds-align--absolute-center","slds-float_right"],["title","delete item",1,"slds-button","slds-button--icon",3,"disabled","click"],[3,"value"]],template:function(e,t){1&e&&(m.j41(0,"div",0)(1,"div",1)(2,"label",2),m.EFF(3,"Module"),m.k0s(),m.j41(4,"div",3)(5,"system-select",4),m.mxI("ngModelChange",(function(e){return m.DH7(t.moduleReposSelectedItem,e)||(t.moduleReposSelectedItem=e),e})),m.DNE(6,ic,1,3,"system-select-option",5),m.k0s()()(),m.j41(7,"div",6),m.DNE(8,nc,2,3,"button",7),m.nI1(9,"json"),m.j41(10,"button",8),m.bIt("click",(function(){return t.addModalRepo()})),m.nrm(11,"system-utility-icon",9),m.k0s(),m.j41(12,"button",10),m.bIt("click",(function(){return t.exportRepoList()})),m.EFF(13,"EXP"),m.k0s()()(),m.j41(14,"div",11)(15,"div",12),m.DNE(16,lc,6,2,"div",13),m.nI1(17,"json"),m.j41(18,"ul",14),m.DNE(19,ac,2,4,"li",15),m.nI1(20,"objectrepositorymanagerfilter"),m.k0s()(),m.DNE(21,uc,42,12,"div",16),m.nI1(22,"json"),m.k0s()),2&e&&(m.R7$(5),m.Y8G("listHeight","10"),m.R50("ngModel",t.moduleReposSelectedItem),m.R7$(),m.Y8G("ngForOf",t.moduleReposSelect),m.R7$(2),m.Y8G("ngIf","{}"!=m.bMT(9,10,t.currentModule)),m.R7$(2),m.Y8G("disabled","none"==t.edit_mode),m.R7$(),m.Y8G("icon","add")("size","x-small"),m.R7$(5),m.Y8G("ngIf","{}"!=m.bMT(17,12,t.currentModule)),m.R7$(3),m.Y8G("ngForOf",m.i5U(20,14,t.objrepoList,t.objectFilter)),m.R7$(2),m.Y8G("ngIf","{}"!=m.bMT(22,17,t.currentObjRepo)))},dependencies:[i.YU,i.Sq,i.bT,n.xH,n.y7,n.me,n.Zm,n.wz,n.BC,n.vS,L.t,x.W,sc.K,dt.i,u.B,rt.t,F.b,i.TG,gc],encapsulation:2})}return ObjectRepositoryManager})(),pc=(()=>{class ObjectRepositoryManagerAddRepo{constructor(e,t,s){this.backend=e,this.language=t,this.modelutilities=s,this.closedialog=new m.bkB,this.objRepo={component:"",componentconfig:"",description:"",id:"",module:"",object:"",package:""},this.currentObject="",this.currentComponent="",this.addType="fieldsetadd",this.addName="",this.addFieldset="",this.fieldsettype="custom",this.moduleFields=[]}ngOnInit(){}closeDialog(){this.self.destroy()}onModalEscX(){this.closeDialog()}add(){this.closedialog.emit(!0),this.self.destroy()}copyObject(){this.objRepo.component=this.objRepo.object}static#e=this.ɵfac=function(e){return new(e||ObjectRepositoryManagerAddRepo)(m.rXU(p.H),m.rXU(b.B),m.rXU(y.g))};static#t=this.ɵcmp=m.VBU({type:ObjectRepositoryManagerAddRepo,selectors:[["objectrepositorymanager-add-repo"]],inputs:{objRepo:"objRepo"},outputs:{closedialog:"closedialog"},decls:25,vars:7,consts:[["role","dialog","tabindex","-1","aria-labelledby","header43",1,"slds-modal","slds-fade-in-open"],[1,"slds-modal__container"],[1,"slds-modal__header","slds-theme--shade"],["title","Close",1,"slds-button","slds-modal__close","slds-button--icon-inverse",3,"click"],[3,"icon","size"],["id","header43",1,"slds-text-heading--medium"],["label","LBL_ADD_REPOSITORY"],[1,"slds-modal__content","slds-p-around--medium"],[1,"slds-form-element","slds-m-top--small"],[1,"slds-form-element__label"],["label","LBL_OBJECT"],[1,"slds-form-element__control"],["type","text","placeholder","",1,"slds-input",3,"ngModel","ngModelChange"],["for","text-input-id-1",1,"slds-form-element__label"],["label","LBL_COMPONENT"],[1,"slds-form-element__control","slds-input-has-icon","slds-input-has-icon_right"],["type","text","id","text-input-id-1","placeholder","",1,"slds-input",3,"ngModel","ngModelChange"],["title","add item",1,"slds-button","slds-button_icon","slds-input__icon","slds-input__icon_right",3,"click"],[3,"icon","size","addclasses"],[1,"slds-modal__footer"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_ADD"]],template:function(e,t){1&e&&(m.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),m.bIt("click",(function(){return t.closeDialog()})),m.nrm(4,"system-button-icon",4),m.k0s(),m.j41(5,"h2",5),m.nrm(6,"system-label",6),m.k0s()(),m.j41(7,"div",7)(8,"div",8)(9,"label",9),m.nrm(10,"system-label",10),m.k0s(),m.j41(11,"div",11)(12,"input",12),m.mxI("ngModelChange",(function(e){return m.DH7(t.objRepo.object,e)||(t.objRepo.object=e),e})),m.k0s()()(),m.j41(13,"div",8)(14,"label",13),m.nrm(15,"system-label",14),m.k0s(),m.j41(16,"div",15)(17,"input",16),m.mxI("ngModelChange",(function(e){return m.DH7(t.objRepo.component,e)||(t.objRepo.component=e),e})),m.k0s(),m.j41(18,"button",17),m.bIt("click",(function(){return t.copyObject()})),m.nrm(19,"system-utility-icon",18),m.k0s()()()(),m.j41(20,"div",19)(21,"button",20),m.bIt("click",(function(){return t.closeDialog()})),m.nrm(22,"system-label",21),m.k0s(),m.j41(23,"button",22),m.bIt("click",(function(){return t.add()})),m.nrm(24,"system-label",23),m.k0s()()()()),2&e&&(m.R7$(4),m.Y8G("icon","close")("size","large"),m.R7$(8),m.R50("ngModel",t.objRepo.object),m.R7$(5),m.R50("ngModel",t.objRepo.component),m.R7$(2),m.Y8G("icon","redo")("size","xx-small")("addclasses","slds-section__title-action-icon slds-button__icon slds-button__icon_left"))},dependencies:[n.me,n.BC,n.vS,L.t,x.W,u.B],encapsulation:2})}return ObjectRepositoryManagerAddRepo})();function fc(e,t){1&e&&(m.j41(0,"h2",21),m.nrm(1,"system-label",22),m.k0s())}function bc(e,t){1&e&&(m.j41(0,"h2",23),m.nrm(1,"system-label",24),m.k0s())}function yc(e,t){if(1&e&&(m.j41(0,"option",28),m.EFF(1),m.k0s()),2&e){const e=t.$implicit;m.Y8G("ngValue",e),m.R7$(),m.JRh(e)}}function _c(e,t){if(1&e){const e=m.RV6();m.j41(0,"div",9)(1,"label",10),m.EFF(2,"Scope"),m.k0s(),m.j41(3,"div",12)(4,"div",25)(5,"select",26),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.moduleRepo.scope,t)||(s.moduleRepo.scope=t),m.Njj(t)})),m.DNE(6,yc,2,2,"option",27),m.k0s()()()()}if(2&e){const e=m.XpG();m.R7$(5),m.R50("ngModel",e.moduleRepo.scope),m.R7$(),m.Y8G("ngForOf",e.scopes)}}function kc(e,t){if(1&e){const e=m.RV6();m.j41(0,"button",29),m.bIt("click",(function(){m.eBV(e);const t=m.XpG();return m.Njj(t.add())})),m.nrm(1,"system-label",30),m.k0s()}}function vc(e,t){if(1&e){const e=m.RV6();m.j41(0,"button",29),m.bIt("click",(function(){m.eBV(e);const t=m.XpG();return m.Njj(t.add())})),m.nrm(1,"system-label",31),m.k0s()}}let Rc=(()=>{class ObjectRepositoryManagerAddModule{constructor(e,t,s){this.backend=e,this.language=t,this.modelutilities=s,this.closedialog=new m.bkB,this.mode="add",this.edit_mode="custom",this.moduleRepo={id:"",module:"",path:"",description:"",package:"",version:"",scope:"custom"},this.scopes=["custom","global"]}ngOnInit(){"custom"==this.edit_mode?this.scopes=["custom"]:this.scopes=["custom","global"]}closeDialog(){this.self.destroy()}onModalEscX(){this.closeDialog()}add(){this.closedialog.emit(!0),this.self.destroy()}updateField(e){this.moduleRepo.description=e}static#e=this.ɵfac=function(e){return new(e||ObjectRepositoryManagerAddModule)(m.rXU(p.H),m.rXU(b.B),m.rXU(y.g))};static#t=this.ɵcmp=m.VBU({type:ObjectRepositoryManagerAddModule,selectors:[["objectrepositorymanager-add-module"]],inputs:{mode:"mode",edit_mode:"edit_mode",moduleRepo:"moduleRepo"},outputs:{closedialog:"closedialog"},decls:29,vars:10,consts:[["role","dialog","tabindex","-1","aria-labelledby","header43",1,"slds-modal","slds-fade-in-open"],[1,"slds-modal__container"],[1,"slds-modal__header","slds-theme--shade"],["title","Close",1,"slds-button","slds-modal__close","slds-button--icon-inverse",3,"click"],[3,"icon","size"],["id","header43","class","slds-text-heading--medium",4,"ngIf"],["id","header44","class","slds-text-heading--medium",4,"ngIf"],[1,"slds-modal__content","slds-p-around--medium"],["class","slds-form-element slds-m-top--small",4,"ngIf"],[1,"slds-form-element","slds-m-top--small"],[1,"slds-form-element__label"],["label","LBL_NAME"],[1,"slds-form-element__control"],["type","text","placeholder","",1,"slds-input",3,"ngModel","ngModelChange"],["label","LBL_PATH"],["label","LBL_DESCRIPTION"],[3,"ngModel","ngModelChange"],[1,"slds-modal__footer"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],["class","slds-button slds-button--brand",3,"click",4,"ngIf"],["id","header43",1,"slds-text-heading--medium"],["label","LBL_ADD_Module"],["id","header44",1,"slds-text-heading--medium"],["label","LBL_EDIT_Module"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_ADD"],["label","LBL_SAVE"]],template:function(e,t){1&e&&(m.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),m.bIt("click",(function(){return t.closeDialog()})),m.nrm(4,"system-button-icon",4),m.k0s(),m.DNE(5,fc,2,0,"h2",5)(6,bc,2,0,"h2",6),m.k0s(),m.j41(7,"div",7),m.DNE(8,_c,7,2,"div",8),m.j41(9,"div",9)(10,"label",10),m.nrm(11,"system-label",11),m.k0s(),m.j41(12,"div",12)(13,"input",13),m.mxI("ngModelChange",(function(e){return m.DH7(t.moduleRepo.module,e)||(t.moduleRepo.module=e),e})),m.k0s()()(),m.j41(14,"div",9)(15,"label",10),m.nrm(16,"system-label",14),m.k0s(),m.j41(17,"div",12)(18,"input",13),m.mxI("ngModelChange",(function(e){return m.DH7(t.moduleRepo.path,e)||(t.moduleRepo.path=e),e})),m.k0s()()(),m.j41(19,"div",9)(20,"label",10),m.nrm(21,"system-label",15),m.k0s(),m.j41(22,"div",12)(23,"system-richtext-editor",16),m.mxI("ngModelChange",(function(e){return m.DH7(t.moduleRepo.description,e)||(t.moduleRepo.description=e),e})),m.k0s()()()(),m.j41(24,"div",17)(25,"button",18),m.bIt("click",(function(){return t.closeDialog()})),m.nrm(26,"system-label",19),m.k0s(),m.DNE(27,kc,2,0,"button",20)(28,vc,2,0,"button",20),m.k0s()()()),2&e&&(m.R7$(4),m.Y8G("icon","close")("size","large"),m.R7$(),m.Y8G("ngIf","add"==t.mode),m.R7$(),m.Y8G("ngIf","edit"==t.mode),m.R7$(2),m.Y8G("ngIf","add"==t.mode),m.R7$(5),m.R50("ngModel",t.moduleRepo.module),m.R7$(5),m.R50("ngModel",t.moduleRepo.path),m.R7$(5),m.R50("ngModel",t.moduleRepo.description),m.R7$(4),m.Y8G("ngIf","add"==t.mode),m.R7$(),m.Y8G("ngIf","edit"==t.mode))},dependencies:[i.Sq,i.bT,n.xH,n.y7,n.me,n.wz,n.BC,n.vS,L.t,x.W,sc.K],styles:["\n\n\n\n\n\n\n\n\n\n\n[_nghost-%COMP%]   .mce-ico[_ngcontent-%COMP%]{color:#54698d;font-size:12px}","\n\n\n\n\n\n\n\n\n\n\n[_nghost-%COMP%]   .mce-text[_ngcontent-%COMP%]{color:#54698d;font-size:12px}","\n\n\n\n\n\n\n\n\n\n\n[_nghost-%COMP%]   .mce-btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#54698d;font-size:12px}","\n\n\n\n\n\n\n\n\n\n\n[_nghost-%COMP%]   .mce-tinymce[_ngcontent-%COMP%]{border-radius:4px}","\n\n\n\n\n\n\n\n\n\n\n[_nghost-%COMP%]   .mce-widget[_ngcontent-%COMP%]{font-family:Titillium Web,sans-serif}"]})}return ObjectRepositoryManagerAddModule})();const Mc=["inputField"];function jc(e,t){1&e&&m.nrm(0,"system-spinner")}function Lc(e,t){if(1&e&&(m.j41(0,"div",4)(1,"div",5),m.nrm(2,"input",6,7),m.k0s()()),2&e){const e=m.XpG();m.R7$(2),m.FS9("value",e.repostring)}}let xc=(()=>{class ObjectRepositoryExport{constructor(e,t,s){this.lang=e,this.backend=t,this.toast=s,this.isLoading=!1}ngOnInit(){this.isLoading=!0,this.backend.getRequest("configuration/configurator/objectrepository").subscribe((e=>{this.repostring=e.repostring,this.isLoading=!1,window.setTimeout((()=>this.inputField.nativeElement.select()),500)}),(()=>{this.isLoading=!1,this.toast.sendToast("Error loading data!","error")}))}closeModal(){this.self.destroy()}onModalEscX(){this.closeModal()}static#e=this.ɵfac=function(e){return new(e||ObjectRepositoryExport)(m.rXU(b.B),m.rXU(p.H),m.rXU(v.o))};static#t=this.ɵcmp=m.VBU({type:ObjectRepositoryExport,selectors:[["objectrepositoryexport"]],viewQuery:function(e,t){if(1&e&&m.GBs(Mc,7),2&e){let e;m.mGM(e=m.lsd())&&(t.inputField=e.first)}},decls:9,vars:3,consts:[[3,"close"],[4,"ngIf"],["class","slds-text-align--center slds-grid",4,"ngIf"],[1,"slds-button","slds-button--neutral",3,"click"],[1,"slds-text-align--center","slds-grid"],[1,"slds-m-right--medium",2,"width","100%"],["type","text",1,"slds-input",2,"width","100%",3,"value"],["inputField",""]],template:function(e,t){1&e&&(m.j41(0,"system-modal")(1,"system-modal-header",0),m.bIt("close",(function(){return t.closeModal()})),m.EFF(2,"Object Repository Export"),m.k0s(),m.j41(3,"system-modal-content"),m.DNE(4,jc,1,0,"system-spinner",1)(5,Lc,4,1,"div",2),m.k0s(),m.j41(6,"system-modal-footer")(7,"button",3),m.bIt("click",(function(){return t.closeModal()})),m.EFF(8),m.k0s()()()),2&e&&(m.R7$(4),m.Y8G("ngIf",t.isLoading),m.R7$(),m.Y8G("ngIf",!t.isLoading),m.R7$(3),m.JRh(t.lang.getLabel("LBL_CLOSE")))},dependencies:[i.bT,qe.D,Pe.I,Je.Q,We.C,Eo.P],encapsulation:2})}return ObjectRepositoryExport})();var Ic=s(13957),Dc=s(64029),Ec=s(20883),Cc=s(16435),Fc=s(58461);function Gc(e,t){if(1&e){const e=m.RV6();m.j41(0,"a",27),m.bIt("click",(function(){m.eBV(e);const t=m.XpG().$implicit,s=m.XpG();return m.Njj(s.valueClicked$.emit({type:"date_entered",value:t.date_entered}))})),m.nrm(1,"system-display-datetime",28),m.k0s()}if(2&e){const e=m.XpG().$implicit;m.R7$(),m.Y8G("date",e.date_entered)}}function $c(e,t){if(1&e&&m.nrm(0,"system-display-datetime",28),2&e){const e=m.XpG().$implicit;m.Y8G("date",e.date_entered)}}function Bc(e,t){if(1&e){const e=m.RV6();m.j41(0,"a",27),m.bIt("click",(function(){m.eBV(e);const t=m.XpG().$implicit,s=m.XpG();return m.Njj(s.valueClicked$.emit({type:"pid",value:t.pid}))})),m.EFF(1),m.k0s()}if(2&e){const e=m.XpG().$implicit;m.R7$(),m.JRh(e.pid)}}function Nc(e,t){if(1&e&&(m.qex(0),m.EFF(1),m.bVm()),2&e){const e=m.XpG().$implicit;m.R7$(),m.JRh(e.pid)}}function Sc(e,t){if(1&e){const e=m.RV6();m.j41(0,"a",27),m.bIt("click",(function(){m.eBV(e);const t=m.XpG().$implicit,s=m.XpG();return m.Njj(s.valueClicked$.emit({type:"transaction_id",value:t.transaction_id}))})),m.EFF(1),m.k0s()}if(2&e){const e=m.XpG().$implicit;m.R7$(),m.JRh(e.transaction_id)}}function wc(e,t){if(1&e&&(m.qex(0),m.EFF(1),m.bVm()),2&e){const e=m.XpG().$implicit;m.R7$(),m.JRh(e.transaction_id)}}function Tc(e,t){if(1&e){const e=m.RV6();m.j41(0,"a",27),m.bIt("click",(function(){m.eBV(e);const t=m.XpG().$implicit,s=m.XpG();return m.Njj(s.valueClicked$.emit({type:"user",value:{user_id:t.user_id,user_name:t.user_name}}))})),m.EFF(1),m.k0s()}if(2&e){const e=m.XpG().$implicit;m.R7$(),m.JRh(e.user_name)}}function Ac(e,t){if(1&e&&(m.qex(0),m.EFF(1),m.bVm()),2&e){const e=m.XpG().$implicit;m.R7$(),m.JRh(e.user_name)}}function Yc(e,t){if(1&e){const e=m.RV6();m.j41(0,"a",27),m.bIt("click",(function(){m.eBV(e);const t=m.XpG().$implicit,s=m.XpG();return m.Njj(s.valueClicked$.emit({type:"log_level",value:t.log_level}))})),m.EFF(1),m.k0s()}if(2&e){const e=m.XpG().$implicit;m.R7$(),m.JRh(e.log_level)}}function Oc(e,t){if(1&e&&(m.qex(0),m.EFF(1),m.bVm()),2&e){const e=m.XpG().$implicit;m.R7$(),m.JRh(e.log_level)}}function Xc(e,t){if(1&e){const e=m.RV6();m.j41(0,"a",27),m.bIt("click",(function(){m.eBV(e);const t=m.XpG().$implicit,s=m.XpG();return m.Njj(s.valueClicked$.emit({type:"log_sublevel",value:t.log_sublevel}))})),m.EFF(1),m.k0s()}if(2&e){const e=m.XpG().$implicit;m.R7$(),m.JRh(e.log_sublevel)}}function Vc(e,t){if(1&e&&(m.qex(0),m.EFF(1),m.bVm()),2&e){const e=m.XpG().$implicit;m.R7$(),m.JRh(e.log_sublevel)}}function Uc(e,t){if(1&e){const e=m.RV6();m.j41(0,"tr")(1,"td"),m.DNE(2,Gc,2,1,"a",20)(3,$c,1,1,"system-display-datetime",21),m.k0s(),m.j41(4,"td",22),m.DNE(5,Bc,2,1,"a",20)(6,Nc,2,1,"ng-container",23),m.k0s(),m.j41(7,"td"),m.DNE(8,Sc,2,1,"a",20)(9,wc,2,1,"ng-container",23),m.k0s(),m.j41(10,"td"),m.DNE(11,Tc,2,1,"a",20)(12,Ac,2,1,"ng-container",23),m.k0s(),m.j41(13,"td"),m.DNE(14,Yc,2,1,"a",20)(15,Oc,2,1,"ng-container",23),m.k0s(),m.j41(16,"td"),m.DNE(17,Xc,2,1,"a",20)(18,Vc,2,1,"ng-container",23),m.k0s(),m.j41(19,"td")(20,"div",24),m.EFF(21),m.k0s()(),m.j41(22,"td")(23,"button",25),m.bIt("click",(function(){const t=m.eBV(e).index,s=m.XpG();return m.Njj(s.showEntryInModal(t))})),m.nrm(24,"system-button-icon",26),m.k0s()()()}if(2&e){const e=t.$implicit,s=m.XpG();m.R7$(2),m.Y8G("ngIf",!s.valuesNotClickable),m.R7$(),m.Y8G("ngIf",s.valuesNotClickable),m.R7$(2),m.Y8G("ngIf",!s.valuesNotClickable),m.R7$(),m.Y8G("ngIf",s.valuesNotClickable),m.R7$(2),m.Y8G("ngIf",!s.valuesNotClickable),m.R7$(),m.Y8G("ngIf",s.valuesNotClickable),m.R7$(2),m.Y8G("ngIf",!s.valuesNotClickable),m.R7$(),m.Y8G("ngIf",s.valuesNotClickable),m.R7$(2),m.Y8G("ngIf",!s.valuesNotClickable),m.R7$(),m.Y8G("ngIf",s.valuesNotClickable),m.R7$(2),m.Y8G("ngIf",!s.valuesNotClickable),m.R7$(),m.Y8G("ngIf",s.valuesNotClickable),m.R7$(3),m.JRh(e.description)}}function Hc(e,t){1&e&&(m.j41(0,"div",29)(1,"system-illustration-no-records"),m.nrm(2,"system-label",30),m.k0s()())}const zc=()=>({opacity:0}),qc=()=>({opacity:.33});let Pc=(()=>{class CRMLogViewerList{constructor(e,t,s,i,n,l){this.backend=e,this.metadata=t,this.lang=s,this.prefs=i,this.modalservice=n,this.toast=l,this.filter={loglevel:"",subloglevel:"",pid:"",user_id:"",text:"",transaction_id:"",end:void 0},this.period={type:"",begin:{year:"",month:"",day:"",hour:""},end:{year:"",month:"",day:"",hour:""},duration:""},this.valuesNotClickable=!1,this.countEntries$=new qd.t(0),this.valueClicked$=new m.bkB,this.entries=[],this.toastId="",this.isLoading=!1,this.isLoaded=!1,this.isInitialLoaded=!1}ngOnInit(){this.load$?this.load$.subscribe((()=>{this.loadData()})):this.loadData()}loadData(){if(this.isLoading)return;this.isLoaded=!1,this.isLoading=!0;let e={loglevel:this.filter.loglevel?this.filter.loglevel:void 0,subloglevel:this.filter.subloglevel?this.filter.subloglevel:void 0,pid:this.filter.pid?this.filter.pid:void 0,user_id:this.filter.user_id?this.filter.user_id:void 0,text:this.filter.text?this.filter.text:void 0,transaction_id:this.filter.transaction_id?this.filter.transaction_id:void 0,end:this.filter.end?this.filter.end.utc().format("YYYY-MM-DD HH:mm:ss"):void 0,limit:this.limit};this.toast.clearToast(this.toastId),this.backend.getRequest("admin/crmlog/entries",e).subscribe((e=>{this.entries=e.entries,this.countEntries$.next(e.totalCount),this.isLoading=!1,this.isInitialLoaded=!0}),(e=>{this.toast.sendToast("Error loading log data!","error"),this.isLoading=!1}))}showEntryInModal(e){this.modalservice.openModal("CRMLogViewerModal").subscribe((t=>{t.instance.entry=this.entries[e],t.instance.user_name=this.entries[e].user_name}))}static#e=this.ɵfac=function(e){return new(e||CRMLogViewerList)(m.rXU(p.H),m.rXU(f.yu),m.rXU(b.B),m.rXU(Pd.S),m.rXU(R.y),m.rXU(v.o))};static#t=this.ɵcmp=m.VBU({type:CRMLogViewerList,selectors:[["crm-log-viewer-list"]],inputs:{filter:"filter",period:"period",load$:[m.Mj6.None,"load","load$"],valuesNotClickable:"valuesNotClickable",limit:"limit"},outputs:{countEntries$:"countEntries$",valueClicked$:"valueClicked"},decls:25,vars:7,consts:[[1,"slds-section","slds-is-open",3,"ngStyle"],[1,"slds-section__content","slds-m-bottom_medium","slds-grid","slds-grid_vertical",2,"padding-top","0"],["system-to-bottom","",1,"slds-grid","slds-grid_vertical","slds-border--top","slds-scrollable--y",3,"system-overlay-loading-spinner"],[1,"slds-table","slds-table--striped","slds-table--bordered","slds-table--fixed-layout","slds-table--col-bordered","slds-table--striped","slds-table_header-fixed",3,"ngStyle"],[2,"width","7.5rem"],["label","LBL_DATE",1,"slds-th__action"],[1,"slds-text-align--right",2,"width","3.5rem"],[1,"slds-th__action"],[1,"slds-text-align--right",2,"width","17rem"],["label","LBL_TRANSACTION",1,"slds-th__action"],[1,"slds-resizable",2,"width","4.5rem"],["label","LBL_USER",1,"slds-th__action"],[2,"width","3rem"],["label","LBL_LEVEL",1,"slds-th__action"],["label","LBL_SUBLEVEL",1,"slds-th__action"],[1,"slds-resizable",2,"width","100%"],["label","LBL_TEXT",1,"slds-th__action"],[2,"width","2.5rem"],[4,"ngFor","ngForOf"],["class","slds-height_full slds-align--absolute-center",4,"ngIf"],[3,"click",4,"ngIf"],[3,"date",4,"ngIf"],[1,"slds-text-align--right"],[4,"ngIf"],[1,"slds-truncate","slds-text-font_monospace"],[1,"slds-button","slds-button--icon-border","slds-button_icon-small",3,"click"],["icon","expand"],[3,"click"],[3,"date"],[1,"slds-height_full","slds-align--absolute-center"],["label","LBL_NO_RECORDS_FOUND"]],template:function(e,t){1&e&&(m.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"table",3)(4,"thead")(5,"tr")(6,"th",4),m.nrm(7,"system-label",5),m.k0s(),m.j41(8,"th",6)(9,"span",7),m.EFF(10,"PID"),m.k0s()(),m.j41(11,"th",8),m.nrm(12,"system-label",9),m.k0s(),m.j41(13,"th",10),m.nrm(14,"system-label",11),m.k0s(),m.j41(15,"th",12),m.nrm(16,"system-label",13),m.k0s(),m.j41(17,"th",12),m.nrm(18,"system-label",14),m.k0s(),m.j41(19,"th",15),m.nrm(20,"system-label",16),m.k0s(),m.nrm(21,"th",17),m.k0s()(),m.j41(22,"tbody"),m.DNE(23,Uc,25,13,"tr",18),m.k0s()(),m.DNE(24,Hc,3,0,"div",19),m.k0s()()()),2&e&&(m.Y8G("ngStyle",t.isInitialLoaded?void 0:m.lJ4(5,zc)),m.R7$(2),m.Y8G("system-overlay-loading-spinner",t.isLoading),m.R7$(),m.Y8G("ngStyle",t.isLoading?m.lJ4(6,qc):void 0),m.R7$(20),m.Y8G("ngForOf",t.entries),m.R7$(),m.Y8G("ngIf",0==t.entries.length))},dependencies:[i.Sq,i.bT,i.B3,L.t,Cc.f,Fc.b,x.W,F.b,kl.M],encapsulation:2})}return CRMLogViewerList})(),Jc=(()=>{class CRMLogViewer{setNow(){this.filter.end=new moment}set filterUser(e){if(!e)return this.filter.user_id="",void(this.filterUserName=void 0);const t=e.split("::");this.filter.user_id=t[0],this.filterUserName=t[1]}get filterUser(){if(this.filter.user_id)return this.filter.user_id+"::"+this.filterUserName}constructor(e,t,s,i,n){this.lang=e,this.backend=t,this.modal=s,this.toast=i,this.userpreferences=n,this.filter={loglevel:"",subloglevel:"",pid:"",user_id:"",text:"",transaction_id:"",end:void 0},this.limit=250,this.load$=new m.bkB}canLoad(){return!(this.filter.pid&&!this.filter.pid.match(/\d$/))}buttonLoad(){this.load$.emit()}valueClicked(e,t){switch(e){case"date_entered":this.filter.end=new moment.utc(t).tz(this.userpreferences.toUse.timezone);break;case"transaction_id":this.filter.transaction_id=t;break;case"user":this.filter.user_id=t.user_id,this.filterUserName=t.user_name;break;case"log_level":this.filter.loglevel=t;break;case"log_sublevel":this.filter.subloglevel=t;break;case"pid":this.filter.pid=t.toString()}}truncate(){this.modal.prompt("confirm","Truncate the API log and delete all entries?","Empty the API Log?").subscribe((e=>{e&&this.backend.deleteRequest("admin/crmlog").subscribe((()=>{this.load$.emit()}),(()=>{this.toast.sendToast("Error truncating log","error")}))}))}static#e=this.ɵfac=function(e){return new(e||CRMLogViewer)(m.rXU(b.B),m.rXU(p.H),m.rXU(R.y),m.rXU(v.o),m.rXU(Pd.S))};static#t=this.ɵcmp=m.VBU({type:CRMLogViewer,selectors:[["ng-component"]],decls:91,vars:17,consts:[[2,"height","100%"],["titlelabel","LBL_CRM_LOG_VIEWER","icon","custom:custom62"],["label","LBL_RECORDS"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_TRUNCATE"],[1,"slds-button","slds-button_brand",3,"click"],["label","LBL_LOAD"],[1,"slds-section","slds-is-open","slds-m-bottom--medium"],[1,"slds-section__content","slds-m-horizontal_medium","slds-m-bottom_medium",2,"padding-top","0","margin-bottom","0"],[1,"slds-grid","slds-grid_vertical-align-center","slds-m-bottom_xxx-small",2,"padding-top","0"],[1,"slds-col","slds-size--5-of-12"],[1,"slds-form-element__label"],["label","LBL_END"],[1,"slds-grid","slds-grid--vertical-align-center","slds-p-right--small"],[1,"slds-grow",3,"ngModel","ngModelChange"],[1,"slds-grow","slds-p-horizontal--xx-small",3,"ngModel","ngModelChange"],["system-title","LBL_NOW","icon","clock","size","x-small",3,"click"],[1,"slds-col","slds-size--1-of-12","slds-p-right_x-small"],["label","LBL_ROWS"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],[1,"slds-form-element","slds-p-right_x-small","slds-size--3-of-12"],["for","pid",1,"slds-form-element__label"],[1,"slds-form-element__control","slds-input-has-icon","slds-input-has-icon_right"],["id","pid","system-trim-input","","type","text","size","5",1,"slds-input","slds-text-align_right",3,"ngModel","ngModelChange"],[1,"slds-button","slds-button_icon","slds-input__icon","slds-input__icon_right",3,"click"],["icon","clear","addclasses","slds-icon-text-light"],[1,"slds-form-element","slds-size--3-of-12"],["for","transaction_id",1,"slds-form-element__label"],["system-trim-input","","id","transaction_id","type","text",1,"slds-input","slds-text-align_right",3,"ngModel","ngModelChange"],[1,"slds-grid","slds-grid_vertical-align-end","slds-m-bottom_xxx-small",2,"padding-top","0"],[1,"slds-p-right_x-small","slds-size--1-of-4"],["module","Users","nameField","user_name",3,"ngModel","ngModelChange"],[1,"slds-form-element","slds-p-right_x-small","slds-size--1-of-4"],["label","LBL_LOGFILE_LEVEL"],[1,"slds-form-element__control"],["value",""],["label","LBL_ALL"],["value","debug"],["label","LBL_LOGLEVEL_DEBUG"],["value","info"],["label","LBL_LOGLEVEL_INFO"],["value","error"],["label","LBL_LOGLEVEL_ERROR"],["value","warn"],["label","LBL_LOGLEVEL_WARN"],["value","security"],["label","LBL_LOGLEVEL_SECURITY"],["value","fatal"],["label","LBL_LOGLEVEL_FATAL"],["value","sql"],["label","LBL_LOGLEVEL_SQL"],["value","slowsql"],["label","LBL_LOGLEVEL_SLOWSQL"],["value","developer"],["label","LBL_LOGLEVEL_DEVELOPER"],[1,"slds-form-element","slds-size--1-of-4","slds-p-right_x-small"],["system-trim-input","","type","text",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-form-element","slds-size--1-of-4"],[3,"load","filter","limit","countEntries$","valueClicked"]],template:function(e,t){1&e&&(m.j41(0,"div",0)(1,"workbench-header",1),m.EFF(2),m.nrm(3,"system-label",2),m.EFF(4,") "),m.j41(5,"workbench-header-controls")(6,"button",3),m.bIt("click",(function(){return t.truncate()})),m.nrm(7,"system-label",4),m.k0s(),m.j41(8,"button",5),m.bIt("click",(function(){return t.buttonLoad()})),m.nrm(9,"system-label",6),m.k0s()()(),m.j41(10,"div",7)(11,"div",8)(12,"div",9)(13,"div",10)(14,"label",11),m.nrm(15,"system-label",12),m.k0s(),m.j41(16,"div",13)(17,"system-input-date",14),m.mxI("ngModelChange",(function(e){return m.DH7(t.filter.end,e)||(t.filter.end=e),e})),m.k0s(),m.j41(18,"system-input-time",15),m.mxI("ngModelChange",(function(e){return m.DH7(t.filter.end,e)||(t.filter.end=e),e})),m.k0s(),m.j41(19,"system-utility-icon",16),m.bIt("click",(function(){return t.setNow()})),m.k0s()()(),m.j41(20,"div",17)(21,"label",11),m.nrm(22,"system-label",18),m.k0s(),m.j41(23,"div",19)(24,"select",20),m.mxI("ngModelChange",(function(e){return m.DH7(t.limit,e)||(t.limit=e),e})),m.j41(25,"option"),m.EFF(26,"250"),m.k0s(),m.j41(27,"option"),m.EFF(28,"500"),m.k0s(),m.j41(29,"option"),m.EFF(30,"1000"),m.k0s()()()(),m.j41(31,"div",21)(32,"label",22),m.EFF(33),m.k0s(),m.j41(34,"div",23)(35,"input",24),m.mxI("ngModelChange",(function(e){return m.DH7(t.filter.pid,e)||(t.filter.pid=e),e})),m.k0s(),m.j41(36,"button",25),m.bIt("click",(function(){return t.filter.pid=""})),m.nrm(37,"system-button-icon",26),m.k0s()()(),m.j41(38,"div",27)(39,"label",28),m.EFF(40),m.k0s(),m.j41(41,"div",23)(42,"input",29),m.mxI("ngModelChange",(function(e){return m.DH7(t.filter.transaction_id,e)||(t.filter.transaction_id=e),e})),m.k0s(),m.j41(43,"button",25),m.bIt("click",(function(){return t.filter.transaction_id=""})),m.nrm(44,"system-button-icon",26),m.k0s()()()(),m.j41(45,"div",30)(46,"div",31)(47,"label",11),m.EFF(48),m.k0s(),m.j41(49,"system-input-relate",32),m.mxI("ngModelChange",(function(e){return m.DH7(t.filterUser,e)||(t.filterUser=e),e})),m.k0s()(),m.j41(50,"div",33)(51,"label",11),m.nrm(52,"system-label",34),m.k0s(),m.j41(53,"div",35)(54,"div",19)(55,"select",20),m.mxI("ngModelChange",(function(e){return m.DH7(t.filter.loglevel,e)||(t.filter.loglevel=e),e})),m.j41(56,"option",36),m.nrm(57,"system-label",37),m.k0s(),m.j41(58,"option",38),m.nrm(59,"system-label",39),m.k0s(),m.j41(60,"option",40),m.nrm(61,"system-label",41),m.k0s(),m.j41(62,"option",42),m.nrm(63,"system-label",43),m.k0s(),m.j41(64,"option",44),m.nrm(65,"system-label",45),m.k0s(),m.j41(66,"option",46),m.nrm(67,"system-label",47),m.k0s(),m.j41(68,"option",48),m.nrm(69,"system-label",49),m.k0s(),m.j41(70,"option",50),m.nrm(71,"system-label",51),m.k0s(),m.j41(72,"option",52),m.nrm(73,"system-label",53),m.k0s(),m.j41(74,"option",54),m.nrm(75,"system-label",55),m.k0s()()()()(),m.j41(76,"div",56)(77,"label",11),m.EFF(78,"Sub Log Level"),m.k0s(),m.j41(79,"div",23)(80,"input",57),m.mxI("ngModelChange",(function(e){return m.DH7(t.filter.subloglevel,e)||(t.filter.subloglevel=e),e})),m.k0s(),m.j41(81,"button",25),m.bIt("click",(function(){return t.filter.subloglevel=""})),m.nrm(82,"system-button-icon",26),m.k0s()()(),m.j41(83,"div",58)(84,"label",11),m.EFF(85,"Text"),m.k0s(),m.j41(86,"div",23)(87,"input",57),m.mxI("ngModelChange",(function(e){return m.DH7(t.filter.text,e)||(t.filter.text=e),e})),m.k0s(),m.j41(88,"button",25),m.bIt("click",(function(){return t.filter.text=""})),m.nrm(89,"system-button-icon",26),m.k0s()()()()()(),m.j41(90,"crm-log-viewer-list",59),m.bIt("countEntries$",(function(e){return t.countEntries=e}))("valueClicked",(function(e){return t.valueClicked(e.type,e.value)})),m.k0s()()),2&e&&(m.R7$(2),m.SpI(" (",t.countEntries," "),m.R7$(6),m.BMQ("disabled",!t.canLoad()||null),m.R7$(9),m.R50("ngModel",t.filter.end),m.R7$(),m.R50("ngModel",t.filter.end),m.R7$(6),m.R50("ngModel",t.limit),m.R7$(9),m.JRh(t.lang.getLabel("LBL_PROCESS_ID")),m.R7$(2),m.R50("ngModel",t.filter.pid),m.R7$(5),m.JRh(t.lang.getLabel("LBL_TRANSACTION")),m.R7$(2),m.R50("ngModel",t.filter.transaction_id),m.R7$(6),m.JRh(t.lang.getLabel("LBL_USER")),m.R7$(),m.R50("ngModel",t.filterUser),m.R7$(6),m.R50("ngModel",t.filter.loglevel),m.R7$(25),m.R50("ngModel",t.filter.subloglevel),m.R7$(7),m.R50("ngModel",t.filter.text),m.R7$(3),m.Y8G("load",t.load$)("filter",t.filter)("limit",t.limit))},dependencies:[n.xH,n.y7,n.me,n.wz,n.BC,n.vS,L.t,Fl.M,Ic.$,Dc.T,x.W,u.B,Ec.D,w.L,Te,Ye,Pc],encapsulation:2})}return CRMLogViewer})();function Wc(e,t){1&e&&m.nrm(0,"system-spinner",9)}function Kc(e,t){if(1&e&&(m.j41(0,"div",10),m.EFF(1),m.k0s()),2&e){const e=m.XpG();m.R7$(),m.JRh(e.entry.fullDescription)}}function Qc(e,t){if(1&e&&(m.j41(0,"pre",11),m.EFF(1),m.k0s()),2&e){const e=m.XpG();m.R7$(),m.JRh(e.formattedJson)}}let Zc=(()=>{class CRMLogViewerModal{constructor(e,t,s,i){this.language=e,this.backend=t,this.toast=s,this.prefs=i,this.user_name="",this.isLoaded=!1,this.isLoading=!0}ngOnInit(){this.entry.fullDescription?this.isLoading=!(this.isLoaded=!0):this.loadFullData()}loadFullData(){this.backend.getRequest("admin/crmlog/entry/"+this.entry.id).subscribe({next:e=>{this.isLoaded=!0,this.isLoading=!1,this.entry.fullDescription=e.entry.description;try{this.jsonResponse=JSON.parse(e.entry.description)}catch(e){this.jsonResponse=!1}},error:()=>{this.toast.sendToast("Error loading entry of log file!","error","Entry "+this.entry.id+" of CRM log couldn´t be fetched.",!1),this.isLoading=!1}})}get formattedJson(){return JSON.stringify(this.jsonResponse,null,"\t")}closeModal(){this.self.destroy()}onModalEscX(){this.closeModal()}static#e=this.ɵfac=function(e){return new(e||CRMLogViewerModal)(m.rXU(b.B),m.rXU(p.H),m.rXU(v.o),m.rXU(Pd.S))};static#t=this.ɵcmp=m.VBU({type:CRMLogViewerModal,selectors:[["ng-component"]],inputs:{entry:"entry",user_name:"user_name"},decls:11,vars:7,consts:[["size","large"],[3,"close"],[3,"date"],[2,"height","100%"],["class","slds-m-top--medium","style","display:block",4,"ngIf"],["class","slds-m-bottom--x-small slds-m-horizontal--x-small slds-text-font_monospace","style","overflow-wrap:break-word",4,"ngIf"],["class","slds-m-bottom--x-small slds-m-horizontal--x-small slds-text-font_monospace","style","overflow-wrap:break-word;white-space: pre-wrap;",4,"ngIf"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CLOSE"],[1,"slds-m-top--medium",2,"display","block"],[1,"slds-m-bottom--x-small","slds-m-horizontal--x-small","slds-text-font_monospace",2,"overflow-wrap","break-word"],[1,"slds-m-bottom--x-small","slds-m-horizontal--x-small","slds-text-font_monospace",2,"overflow-wrap","break-word","white-space","pre-wrap"]],template:function(e,t){1&e&&(m.j41(0,"system-modal",0)(1,"system-modal-header",1),m.bIt("close",(function(){return t.closeModal()})),m.nrm(2,"system-display-datetime",2),m.EFF(3),m.k0s(),m.j41(4,"system-modal-content",3),m.DNE(5,Wc,1,0,"system-spinner",4)(6,Kc,2,1,"div",5)(7,Qc,2,1,"pre",6),m.k0s(),m.j41(8,"system-modal-footer")(9,"button",7),m.bIt("click",(function(){return t.closeModal()})),m.nrm(10,"system-label",8),m.k0s()()()),2&e&&(m.R7$(2),m.Y8G("date",t.entry.date_entered),m.R7$(),m.E5c(" • ",t.entry.pid," • ",t.user_name," • ",t.entry.log_level,""),m.R7$(2),m.Y8G("ngIf",t.isLoading),m.R7$(),m.Y8G("ngIf",t.isLoaded&&!t.jsonResponse),m.R7$(),m.Y8G("ngIf",t.isLoaded&&t.jsonResponse))},dependencies:[i.bT,Cc.f,x.W,qe.D,Pe.I,Je.Q,We.C,Eo.P],encapsulation:2})}return CRMLogViewerModal})(),em=(()=>{class CRMLogViewerListModal{constructor(e){this.language=e}closeModal(){this.self.destroy()}onModalEscX(){this.closeModal()}static#e=this.ɵfac=function(e){return new(e||CRMLogViewerListModal)(m.rXU(b.B))};static#t=this.ɵcmp=m.VBU({type:CRMLogViewerListModal,selectors:[["ng-component"]],inputs:{filter:"filter",crmLogId:"crmLogId"},decls:8,vars:3,consts:[["size","large"],[3,"close"],[2,"height","100%"],[3,"filter","valuesNotClickable"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CLOSE"]],template:function(e,t){1&e&&(m.j41(0,"system-modal",0)(1,"system-modal-header",1),m.bIt("close",(function(){return t.closeModal()})),m.EFF(2),m.k0s(),m.j41(3,"system-modal-content",2),m.nrm(4,"crm-log-viewer-list",3),m.k0s(),m.j41(5,"system-modal-footer")(6,"button",4),m.bIt("click",(function(){return t.closeModal()})),m.nrm(7,"system-label",5),m.k0s()()()),2&e&&(m.R7$(2),m.SpI("CRM Log Entries for API Request ",t.crmLogId,""),m.R7$(2),m.Y8G("filter",t.filter)("valuesNotClickable",!0))},dependencies:[x.W,qe.D,Pe.I,Je.Q,We.C,Pc],encapsulation:2})}return CRMLogViewerListModal})();var tm=s(38431);function sm(e,t){if(1&e&&(m.j41(0,"option"),m.EFF(1),m.k0s()),2&e){const e=t.$implicit;m.R7$(),m.JRh(e)}}function im(e,t){if(1&e){const e=m.RV6();m.j41(0,"div",65)(1,"div",66)(2,"div",27)(3,"select",28),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.logtable,t)||(s.logtable=t),m.Njj(t)})),m.j41(4,"option"),m.EFF(5,"sysapilog"),m.k0s(),m.DNE(6,sm,2,1,"option",30),m.k0s()()()()}if(2&e){const e=m.XpG();m.R7$(3),m.R50("ngModel",e.logtable),m.R7$(3),m.Y8G("ngForOf",e.logtables)}}function nm(e,t){if(1&e&&(m.j41(0,"option"),m.EFF(1),m.k0s()),2&e){const e=t.$implicit;m.R7$(),m.JRh(e)}}const lm=e=>({"slds-theme--error":e});function om(e,t){if(1&e){const e=m.RV6();m.j41(0,"tr",67)(1,"td"),m.nrm(2,"system-display-datetime",68),m.k0s(),m.j41(3,"td")(4,"div",69),m.EFF(5),m.k0s()(),m.j41(6,"td")(7,"div",69),m.EFF(8),m.k0s()(),m.j41(9,"td")(10,"div",69)(11,"a",70),m.bIt("click",(function(){const t=m.eBV(e).$implicit,s=m.XpG();return m.Njj(s.valueClicked("route",t.route))})),m.EFF(12),m.k0s()()(),m.j41(13,"td",71)(14,"div",69)(15,"a",70),m.bIt("click",(function(){const t=m.eBV(e).$implicit,s=m.XpG();return m.Njj(s.valueClicked("method",t.method))})),m.EFF(16),m.k0s()()(),m.j41(17,"td",71),m.EFF(18),m.k0s(),m.j41(19,"td",72)(20,"a",70),m.bIt("click",(function(){const t=m.eBV(e).$implicit,s=m.XpG();return m.Njj(s.valueClicked("status",t.http_status_code))})),m.EFF(21),m.k0s()(),m.j41(22,"td",71),m.nrm(23,"system-display-number",73),m.k0s(),m.j41(24,"td")(25,"div",69),m.EFF(26),m.k0s()(),m.j41(27,"td")(28,"div",69),m.EFF(29),m.k0s()(),m.j41(30,"td")(31,"button",74),m.bIt("click",(function(){const t=m.eBV(e).$implicit,s=m.XpG();return m.Njj(s.showEntryInModal(t))})),m.nrm(32,"system-button-icon",75),m.k0s()()()}if(2&e){const e=t.$implicit;m.Y8G("ngClass",m.eq3(13,lm,e.http_status_code<200||e.http_status_code>=300)),m.R7$(2),m.Y8G("date",e.date_entered),m.R7$(3),m.JRh(e.user_name),m.R7$(3),m.JRh(e.transaction_id),m.R7$(4),m.JRh(e.route),m.R7$(4),m.JRh(e.method),m.R7$(2),m.JRh(e.direction),m.R7$(3),m.JRh(e.http_status_code),m.R7$(2),m.Y8G("number",e.runtime),m.R7$(3),m.JRh(e.request_args),m.R7$(3),m.JRh(e.request_params),m.R7$(3),m.Y8G("icon","expand")("size","medium")}}function am(e,t){1&e&&(m.j41(0,"div",76)(1,"system-illustration-no-records"),m.nrm(2,"system-label",77),m.k0s()())}let dm=(()=>{class APIlogViewer{set filterUser(e){if(!e)return this.filter.userId="",void(this.filterUserName=void 0);const t=e.split("::");this.filter.userId=t[0],this.filterUserName=t[1]}get filterUser(){if(this.filter.userId)return this.filter.userId+"::"+this.filterUserName}get logtable(){return this._logtable}set logtable(e){e!=this._logtable&&(this._logtable=e,this.entries=[])}constructor(e,t,s){this.backend=e,this.modal=t,this.toast=s,this.methods=["CONNECT","DELETE","GET","HEAD","OPTIONS","POST","PATCH","PUT","SOAP","TRACE"],this.limit="250",this.entries=[],this.filter={method:"",session_id:"",userId:"",term:"",ip:"",route:"",status:"",direction:""},this.isLoading=!1,this.logtables=[],this._logtable="sysapilog",this.getAPILogTables()}getAPILogTables(){this.backend.getRequest("admin/apilog/logtables").subscribe({next:e=>{this.logtables=e}})}setNow(e){this[e]=new moment}loadData(){if(!this.isLoading){this.isLoading=!0;let e={limit:this.limit,logtable:this.logtable};this.filter.method&&(e.method=this.filter.method),this.filter.route&&(e.route=this.filter.route),this.filter.userId&&(e.user_id=this.filter.userId),this.filter.term&&(e.filter=this.filter.term),this.filter.ip&&(e.ip=this.filter.ip),this.filter.status&&(e.status=this.filter.status),this.filter.session_id&&(e.session_id=this.filter.session_id),this.filter.direction&&(e.direction=this.filter.direction),this.dateEnd&&(e.end=this.dateEnd?.utc().format("YYYY-MM-DD HH:mm:ss")),this.dateStart&&(e.start=this.dateStart?.utc().format("YYYY-MM-DD HH:mm:ss")),this.backend.getRequest("admin/apilog",e).subscribe({next:e=>{this.entries=e.entries,this.isLoading=!1},error:e=>{this.toast.sendToast("Error loading log data!","error"),this.isLoading=!1}})}}buttonLoad(){this.loadData()}truncate(){this.modal.prompt("confirm","Truncate the API log and delete all entries?","Truncate API Log").subscribe((e=>{e&&(this.backend.deleteRequest("admin/apilog").subscribe((()=>{this.isLoading=!1,this.loadData()}),(()=>{this.toast.sendToast("Error truncating log","error"),this.isLoading=!1})),this.isLoading=!0)}))}showEntryInModal(e){this.modal.openModal("APIlogViewerModal").subscribe((t=>{t.instance.entry=e,t.instance.logtable=this.logtable}))}showCRMlog(e){this.modal.openModal("CRMLogViewerListModal").subscribe((t=>{t.instance.filter={transaction_id:e}}))}valueClicked(e,t){switch(e){case"route":this.filter.route=t;break;case"method":this.filter.method=t;break;case"status":this.filter.status=t;break;case"dir":this.filter.direction=t}}static#e=this.ɵfac=function(e){return new(e||APIlogViewer)(m.rXU(p.H),m.rXU(R.y),m.rXU(v.o))};static#t=this.ɵcmp=m.VBU({type:APIlogViewer,selectors:[["ng-component"]],decls:123,vars:20,consts:[["titlelabel","LBL_API_LOG_VIEWER","icon","custom:custom62"],["label","LBL_RECORDS"],[1,"slds-grid","slds-grid--vertical-align-center"],["class","slds-form-element slds-m-right--small",4,"ngIf"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_LOAD"],["system-to-bottom-noscroll","",3,"system-overlay-loading-spinner"],[1,"slds-section","slds-is-open","slds-p-around--xx-small"],[1,"slds-grid","slds-grid--vertical-align-end","slds-gutters_direct-xxx-small"],[1,"slds-col","slds-size--1-of-4"],[1,"slds-form-element__label"],["label","LBL_ROUTE"],[1,"slds-form-element__control","slds-input-has-icon","slds-input-has-icon_right"],["type","text","system-trim-input","",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-button","slds-button_icon","slds-input__icon","slds-input__icon_right",3,"click"],["icon","clear","addclasses","slds-icon-text-light"],["label","LBL_FILTER"],["label","LBL_START"],[1,"slds-grow",3,"ngModel","ngModelChange"],[1,"slds-grow","slds-p-horizontal--xx-small",3,"ngModel","ngModelChange"],["system-title","LBL_NOW","icon","clock","size","x-small",3,"click"],["label","LBL_END"],[1,"slds-grid","slds-gutters_direct-xxx-small"],[1,"slds-col","slds-size--1-of-8"],["label","LBL_USER"],["module","Users","nameField","user_name",3,"ngModel","ngModelChange"],["label","LBL_METHOD"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],["value",""],[4,"ngFor","ngForOf"],["label","LBL_DIRECTION"],["value","I"],["label","LBL_DIRECTION_I"],["value","O"],["label","LBL_DIRECTION_O"],["label","LBL_STATUS"],["type","text","system-trim-input","","size","3",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-col","slds-size--1-of-6"],["label","LBL_IP_ADDRESS"],["label","LBL_SESSION_ID"],["label","LBL_ROWS"],["system-to-bottom","",1,"slds-border--top"],[1,"slds-table","slds-table--bordered","slds-table--fixed-layout","slds-table--col-bordered","slds-no-row-hover","slds-table_header-fixed"],[2,"width","8rem"],["label","LBL_DATE",1,"slds-th__action"],[1,"slds-resizable",2,"width","8rem"],["label","LBL_USER",1,"slds-th__action"],["label","LBL_TRANSACTION_ID",1,"slds-th__action"],[1,"slds-resizable"],["label","LBL_ROUTE",1,"slds-th__action"],[2,"width","4rem"],["label","LBL_METHOD",1,"slds-th__action"],[1,"slds-text-align_center",2,"width","2rem"],["icon","signpost","size","x-small"],[2,"width","3rem"],["label","LBL_STATUS",1,"slds-th__action"],[1,"slds-text-align_center",2,"width","3rem"],["icon","clock","size","x-small"],["label","LBL_ROUTE_ARGUMENTS",1,"slds-th__action"],["label","LBL_URL_PARAMETERS",1,"slds-th__action"],[2,"width","2.5rem"],["tbody",""],[3,"ngClass",4,"ngFor","ngForOf"],["class","slds-height_full slds-align--absolute-center",4,"ngIf"],[1,"slds-form-element","slds-m-right--small"],[1,"slds-form-element__control"],[3,"ngClass"],[3,"date"],[1,"slds-truncate"],[3,"click"],[1,"slds-text-align--center"],[1,"slds-text-align--right","status"],["system-display-number-nodigits","",3,"number"],[1,"slds-button","slds-button--icon-border","slds-button_icon-small",3,"click"],[3,"icon","size"],[1,"slds-height_full","slds-align--absolute-center"],["label","LBL_NO_RECORDS_FOUND"]],template:function(e,t){1&e&&(m.j41(0,"workbench-header",0),m.EFF(1),m.nrm(2,"system-label",1),m.EFF(3,") "),m.j41(4,"workbench-header-controls")(5,"div",2),m.DNE(6,im,7,2,"div",3),m.j41(7,"button",4),m.bIt("click",(function(){return t.buttonLoad()})),m.nrm(8,"system-label",5),m.k0s()()()(),m.j41(9,"div",6)(10,"div",7)(11,"div",8)(12,"div",9)(13,"label",10),m.nrm(14,"system-label",11),m.k0s(),m.j41(15,"div",12)(16,"input",13),m.mxI("ngModelChange",(function(e){return m.DH7(t.filter.route,e)||(t.filter.route=e),e})),m.k0s(),m.j41(17,"button",14),m.bIt("click",(function(){return t.filter.route=""})),m.nrm(18,"system-button-icon",15),m.k0s()()(),m.j41(19,"div",9)(20,"label",10),m.nrm(21,"system-label",16),m.k0s(),m.j41(22,"div",12)(23,"input",13),m.mxI("ngModelChange",(function(e){return m.DH7(t.filter.term,e)||(t.filter.term=e),e})),m.k0s(),m.j41(24,"button",14),m.bIt("click",(function(){return t.filter.term=""})),m.nrm(25,"system-button-icon",15),m.k0s()()(),m.j41(26,"div",9)(27,"label",10),m.nrm(28,"system-label",17),m.k0s(),m.j41(29,"div",2)(30,"system-input-date",18),m.mxI("ngModelChange",(function(e){return m.DH7(t.dateStart,e)||(t.dateStart=e),e})),m.k0s(),m.j41(31,"system-input-time",19),m.mxI("ngModelChange",(function(e){return m.DH7(t.dateStart,e)||(t.dateStart=e),e})),m.k0s(),m.j41(32,"system-utility-icon",20),m.bIt("click",(function(){return t.setNow("dateStart")})),m.k0s()()(),m.j41(33,"div",9)(34,"label",10),m.nrm(35,"system-label",21),m.k0s(),m.j41(36,"div",2)(37,"system-input-date",18),m.mxI("ngModelChange",(function(e){return m.DH7(t.dateEnd,e)||(t.dateEnd=e),e})),m.k0s(),m.j41(38,"system-input-time",19),m.mxI("ngModelChange",(function(e){return m.DH7(t.dateEnd,e)||(t.dateEnd=e),e})),m.k0s(),m.j41(39,"system-utility-icon",20),m.bIt("click",(function(){return t.setNow("dateEnd")})),m.k0s()()()(),m.j41(40,"div",22)(41,"div",23)(42,"label",10),m.nrm(43,"system-label",24),m.k0s(),m.j41(44,"system-input-relate",25),m.mxI("ngModelChange",(function(e){return m.DH7(t.filterUser,e)||(t.filterUser=e),e})),m.k0s()(),m.j41(45,"div",23)(46,"label",10),m.nrm(47,"system-label",26),m.k0s(),m.j41(48,"div",27)(49,"select",28),m.mxI("ngModelChange",(function(e){return m.DH7(t.filter.method,e)||(t.filter.method=e),e})),m.nrm(50,"option",29),m.DNE(51,nm,2,1,"option",30),m.k0s()()(),m.j41(52,"div",23)(53,"label",10),m.nrm(54,"system-label",31),m.k0s(),m.j41(55,"div",27)(56,"select",28),m.mxI("ngModelChange",(function(e){return m.DH7(t.filter.direction,e)||(t.filter.direction=e),e})),m.nrm(57,"option"),m.j41(58,"option",32),m.nrm(59,"system-label",33),m.k0s(),m.j41(60,"option",34),m.nrm(61,"system-label",35),m.k0s()()()(),m.j41(62,"div",23)(63,"label",10),m.nrm(64,"system-label",36),m.k0s(),m.j41(65,"div",12)(66,"input",37),m.mxI("ngModelChange",(function(e){return m.DH7(t.filter.status,e)||(t.filter.status=e),e})),m.k0s(),m.j41(67,"button",14),m.bIt("click",(function(){return t.filter.status=""})),m.nrm(68,"system-button-icon",15),m.k0s()()(),m.j41(69,"div",38)(70,"label",10),m.nrm(71,"system-label",39),m.k0s(),m.j41(72,"div",12)(73,"input",13),m.mxI("ngModelChange",(function(e){return m.DH7(t.filter.ip,e)||(t.filter.ip=e),e})),m.k0s(),m.j41(74,"button",14),m.bIt("click",(function(){return t.filter.ip=""})),m.nrm(75,"system-button-icon",15),m.k0s()()(),m.j41(76,"div",38)(77,"label",10),m.nrm(78,"system-label",40),m.k0s(),m.j41(79,"div",12)(80,"input",13),m.mxI("ngModelChange",(function(e){return m.DH7(t.filter.session_id,e)||(t.filter.session_id=e),e})),m.k0s(),m.j41(81,"button",14),m.bIt("click",(function(){return t.filter.session_id=""})),m.nrm(82,"system-button-icon",15),m.k0s()()(),m.j41(83,"div",38)(84,"label",10),m.nrm(85,"system-label",41),m.k0s(),m.j41(86,"div",27)(87,"select",28),m.mxI("ngModelChange",(function(e){return m.DH7(t.limit,e)||(t.limit=e),e})),m.j41(88,"option"),m.EFF(89,"250"),m.k0s(),m.j41(90,"option"),m.EFF(91,"500"),m.k0s(),m.j41(92,"option"),m.EFF(93,"1000"),m.k0s()()()()()(),m.j41(94,"div",42)(95,"table",43)(96,"thead")(97,"tr")(98,"th",44),m.nrm(99,"system-label",45),m.k0s(),m.j41(100,"th",46),m.nrm(101,"system-label",47),m.k0s(),m.j41(102,"th",46),m.nrm(103,"system-label",48),m.k0s(),m.j41(104,"th",49),m.nrm(105,"system-label",50),m.k0s(),m.j41(106,"th",51),m.nrm(107,"system-label",52),m.k0s(),m.j41(108,"th",53),m.nrm(109,"system-utility-icon",54),m.k0s(),m.j41(110,"th",55),m.nrm(111,"system-label",56),m.k0s(),m.j41(112,"th",57),m.nrm(113,"system-utility-icon",58),m.k0s(),m.j41(114,"th",49),m.nrm(115,"system-label",59),m.k0s(),m.j41(116,"th",49),m.nrm(117,"system-label",60),m.k0s(),m.nrm(118,"th",61),m.k0s()(),m.j41(119,"tbody",null,62),m.DNE(121,om,33,15,"tr",63),m.k0s()(),m.DNE(122,am,3,0,"div",64),m.k0s()()),2&e&&(m.R7$(),m.SpI(" (",t.entries.length," "),m.R7$(5),m.Y8G("ngIf",t.logtables.length>0),m.R7$(),m.Y8G("disabled",t.isLoading),m.R7$(2),m.Y8G("system-overlay-loading-spinner",t.isLoading),m.R7$(7),m.R50("ngModel",t.filter.route),m.R7$(7),m.R50("ngModel",t.filter.term),m.R7$(7),m.R50("ngModel",t.dateStart),m.R7$(),m.R50("ngModel",t.dateStart),m.R7$(6),m.R50("ngModel",t.dateEnd),m.R7$(),m.R50("ngModel",t.dateEnd),m.R7$(6),m.R50("ngModel",t.filterUser),m.R7$(5),m.R50("ngModel",t.filter.method),m.R7$(2),m.Y8G("ngForOf",t.methods),m.R7$(5),m.R50("ngModel",t.filter.direction),m.R7$(10),m.R50("ngModel",t.filter.status),m.R7$(7),m.R50("ngModel",t.filter.ip),m.R7$(7),m.R50("ngModel",t.filter.session_id),m.R7$(7),m.R50("ngModel",t.limit),m.R7$(34),m.Y8G("ngForOf",t.entries),m.R7$(),m.Y8G("ngIf",!t.isLoading&&0==t.entries.length))},dependencies:[i.YU,i.Sq,i.bT,n.xH,n.y7,n.me,n.wz,n.BC,n.vS,L.t,Cc.f,tm.B,Fc.b,Fl.M,Ic.$,Dc.T,x.W,u.B,F.b,T.p,Ec.D,kl.M,w.L,Te,Ye],encapsulation:2})}return APIlogViewer})();var rm=s(82802);function cm(e,t){1&e&&m.nrm(0,"system-spinner",7)}const mm=e=>({"slds-is-active":e});function um(e,t){if(1&e){const e=m.RV6();m.j41(0,"li",10),m.bIt("click",(function(){m.eBV(e);const t=m.XpG(2);return m.Njj(t.activeTab="post")})),m.j41(1,"a",11),m.nrm(2,"system-label",44),m.k0s()()}if(2&e){const e=m.XpG(2);m.Y8G("ngClass",m.eq3(1,mm,"post"==e.activeTab))}}function gm(e,t){if(1&e){const e=m.RV6();m.j41(0,"li",10),m.bIt("click",(function(){m.eBV(e);const t=m.XpG(2);return m.Njj(t.activeTab="response")})),m.j41(1,"a",11),m.nrm(2,"system-label",45),m.k0s()()}if(2&e){const e=m.XpG(2);m.Y8G("ngClass",m.eq3(1,mm,"response"==e.activeTab))}}function hm(e,t){if(1&e&&(m.j41(0,"tr",48)(1,"td")(2,"div",19),m.EFF(3),m.k0s()(),m.j41(4,"td")(5,"div",19),m.EFF(6),m.k0s()()()),2&e){const e=t.$implicit;m.R7$(3),m.JRh(e.name),m.R7$(3),m.JRh(e.value)}}function pm(e,t){if(1&e&&(m.j41(0,"div",46)(1,"h3",39),m.nrm(2,"system-label",47),m.k0s(),m.j41(3,"table",16)(4,"thead")(5,"tr",17)(6,"th",18)(7,"div",19),m.nrm(8,"system-label",20),m.k0s()(),m.j41(9,"th",21)(10,"div",19),m.nrm(11,"system-label",22),m.k0s()()()(),m.j41(12,"tbody"),m.DNE(13,hm,7,2,"tr",41),m.k0s()()()),2&e){const e=m.XpG(2);m.R7$(13),m.Y8G("ngForOf",e.requestArguments)}}function fm(e,t){if(1&e&&(m.j41(0,"tr",48)(1,"td")(2,"div",19),m.EFF(3),m.k0s()(),m.j41(4,"td")(5,"div",19),m.EFF(6),m.k0s()()()),2&e){const e=t.$implicit;m.R7$(3),m.JRh(e.name),m.R7$(3),m.JRh(e.value)}}function bm(e,t){if(1&e&&(m.j41(0,"div",46)(1,"h3",39),m.nrm(2,"system-label",49),m.k0s(),m.j41(3,"table",16)(4,"thead")(5,"tr",17)(6,"th",18)(7,"div",19),m.nrm(8,"system-label",20),m.k0s()(),m.j41(9,"th",21)(10,"div",19),m.nrm(11,"system-label",22),m.k0s()()()(),m.j41(12,"tbody"),m.DNE(13,fm,7,2,"tr",41),m.k0s()()()),2&e){const e=m.XpG(2);m.R7$(13),m.Y8G("ngForOf",e.requestParams)}}function ym(e,t){if(1&e&&(m.j41(0,"tr",48)(1,"td")(2,"div",19),m.EFF(3),m.k0s()(),m.j41(4,"td")(5,"div",19),m.EFF(6),m.k0s()()()),2&e){const e=t.$implicit;m.R7$(3),m.JRh(e.name),m.R7$(3),m.JRh(e.value)}}function _m(e,t){if(1&e&&(m.j41(0,"tr",48)(1,"td")(2,"div",19),m.EFF(3),m.k0s()(),m.j41(4,"td")(5,"div",19),m.EFF(6),m.k0s()()()),2&e){const e=t.$implicit;m.R7$(3),m.JRh(e.name),m.R7$(3),m.JRh(e.value)}}function km(e,t){if(1&e&&(m.qex(0),m.j41(1,"h3",39),m.nrm(2,"system-label",50),m.k0s(),m.j41(3,"table",16)(4,"thead")(5,"tr",17)(6,"th",18)(7,"div",19),m.nrm(8,"system-label",20),m.k0s()(),m.j41(9,"th",21)(10,"div",19),m.nrm(11,"system-label",22),m.k0s()()()(),m.j41(12,"tbody"),m.DNE(13,_m,7,2,"tr",41),m.k0s()(),m.bVm()),2&e){const e=m.XpG(2);m.R7$(13),m.Y8G("ngForOf",e.responseHeaders)}}function vm(e,t){if(1&e&&(m.j41(0,"tr",48)(1,"td")(2,"div",19),m.EFF(3),m.k0s()(),m.j41(4,"td")(5,"div",19),m.EFF(6),m.k0s()()()),2&e){const e=t.$implicit;m.R7$(3),m.JRh(e.name),m.R7$(3),m.JRh(e.value)}}function Rm(e,t){if(1&e&&(m.j41(0,"div")(1,"table",16)(2,"thead")(3,"tr",17)(4,"th",18)(5,"div",19),m.nrm(6,"system-label",20),m.k0s()(),m.j41(7,"th",21)(8,"div",19),m.nrm(9,"system-label",22),m.k0s()()()(),m.j41(10,"tbody"),m.DNE(11,vm,7,2,"tr",41),m.k0s()()()),2&e){const e=m.XpG(3);m.R7$(11),m.Y8G("ngForOf",e.formattedRequest())}}function Mm(e,t){if(1&e&&(m.j41(0,"div",54)(1,"pre",55),m.EFF(2),m.k0s()()),2&e){const e=m.XpG(3);m.R7$(2),m.JRh(e.formattedRequest())}}const jm=e=>({"slds-hide":e});function Lm(e,t){if(1&e&&(m.j41(0,"div",15),m.qex(1,51),m.DNE(2,Rm,12,1,"div",52)(3,Mm,3,1,"div",53),m.bVm(),m.k0s()),2&e){const e=m.XpG(2);m.Y8G("ngClass",m.eq3(3,jm,"post"!=e.activeTab)),m.R7$(),m.Y8G("ngSwitch",e.determineContentType(e._requestheaders)),m.R7$(),m.Y8G("ngSwitchCase","application/x-www-form-urlencoded")}}function xm(e,t){1&e&&(m.j41(0,"div"),m.EFF(1," url encoded "),m.k0s())}function Im(e,t){if(1&e&&(m.j41(0,"div",54)(1,"pre",55),m.EFF(2),m.k0s()()),2&e){const e=m.XpG(3);m.R7$(2),m.JRh(e.formattedResponse())}}function Dm(e,t){if(1&e&&(m.j41(0,"div",15),m.qex(1,51),m.DNE(2,xm,2,0,"div",52)(3,Im,3,1,"div",53),m.bVm(),m.k0s()),2&e){const e=m.XpG(2);m.Y8G("ngClass",m.eq3(3,jm,"response"!=e.activeTab)),m.R7$(),m.Y8G("ngSwitch",e.determineContentType(e._responseheaders)),m.R7$(),m.Y8G("ngSwitchCase","application/x-www-form-urlencoded")}}function Em(e,t){if(1&e){const e=m.RV6();m.j41(0,"div",8)(1,"ul",9)(2,"li",10),m.bIt("click",(function(){m.eBV(e);const t=m.XpG();return m.Njj(t.activeTab="record")})),m.j41(3,"a",11),m.nrm(4,"system-label",12),m.k0s()(),m.j41(5,"li",10),m.bIt("click",(function(){m.eBV(e);const t=m.XpG();return m.Njj(t.activeTab="headers")})),m.j41(6,"a",11),m.nrm(7,"system-label",13),m.k0s()(),m.DNE(8,um,3,3,"li",14)(9,gm,3,3,"li",14),m.k0s(),m.j41(10,"div",15)(11,"table",16)(12,"thead")(13,"tr",17)(14,"th",18)(15,"div",19),m.nrm(16,"system-label",20),m.k0s()(),m.j41(17,"th",21)(18,"div",19),m.nrm(19,"system-label",22),m.k0s()()()(),m.j41(20,"tbody")(21,"tr")(22,"td"),m.nrm(23,"system-label",23),m.k0s(),m.j41(24,"td"),m.EFF(25),m.k0s()(),m.j41(26,"tr")(27,"td"),m.nrm(28,"system-label",24),m.k0s(),m.j41(29,"td"),m.EFF(30),m.k0s()(),m.j41(31,"tr")(32,"td"),m.nrm(33,"system-label",25),m.k0s(),m.j41(34,"td"),m.EFF(35),m.k0s()(),m.j41(36,"tr")(37,"td"),m.nrm(38,"system-label",26),m.k0s(),m.j41(39,"td"),m.nrm(40,"system-display-datetime",27),m.k0s()(),m.j41(41,"tr")(42,"td"),m.nrm(43,"system-label",28),m.k0s(),m.j41(44,"td"),m.EFF(45),m.k0s()(),m.j41(46,"tr")(47,"td"),m.nrm(48,"system-label",29),m.k0s(),m.j41(49,"td"),m.EFF(50),m.k0s()(),m.j41(51,"tr")(52,"td"),m.nrm(53,"system-label",30),m.k0s(),m.j41(54,"td"),m.EFF(55),m.k0s()(),m.j41(56,"tr")(57,"td"),m.nrm(58,"system-label",31),m.k0s(),m.j41(59,"td"),m.EFF(60),m.k0s()(),m.j41(61,"tr")(62,"td"),m.nrm(63,"system-label",32),m.k0s(),m.j41(64,"td"),m.EFF(65),m.k0s()(),m.j41(66,"tr")(67,"td"),m.nrm(68,"system-label",33),m.k0s(),m.j41(69,"td"),m.EFF(70),m.k0s()(),m.j41(71,"tr")(72,"td"),m.nrm(73,"system-label",34),m.k0s(),m.j41(74,"td",35),m.EFF(75),m.k0s()(),m.j41(76,"tr")(77,"td"),m.nrm(78,"system-label",36),m.k0s(),m.j41(79,"td"),m.EFF(80),m.k0s()(),m.j41(81,"tr")(82,"td"),m.nrm(83,"system-label",37),m.k0s(),m.j41(84,"td"),m.EFF(85),m.k0s()()()(),m.DNE(86,pm,14,1,"div",38)(87,bm,14,1,"div",38),m.k0s(),m.j41(88,"div",15)(89,"h3",39),m.nrm(90,"system-label",40),m.k0s(),m.j41(91,"table",16)(92,"thead")(93,"tr",17)(94,"th",18)(95,"div",19),m.nrm(96,"system-label",20),m.k0s()(),m.j41(97,"th",21)(98,"div",19),m.nrm(99,"system-label",22),m.k0s()()()(),m.j41(100,"tbody"),m.DNE(101,ym,7,2,"tr",41),m.k0s()(),m.DNE(102,km,14,1,"ng-container",42),m.k0s(),m.DNE(103,Lm,4,5,"div",43)(104,Dm,4,5,"div",43),m.k0s()}if(2&e){const e=m.XpG();m.R7$(2),m.Y8G("ngClass",m.eq3(25,mm,"record"==e.activeTab)),m.R7$(3),m.Y8G("ngClass",m.eq3(27,mm,"headers"==e.activeTab)),m.R7$(3),m.Y8G("ngIf",e.hasRequest),m.R7$(),m.Y8G("ngIf",e.hasResponse),m.R7$(),m.Y8G("ngClass",m.eq3(29,jm,"record"!=e.activeTab)),m.R7$(15),m.JRh(e.entry.id),m.R7$(5),m.JRh(e.record.transaction_id),m.R7$(5),m.JRh(e.record.session_id),m.R7$(5),m.Y8G("date",e.entry.date_entered),m.R7$(5),m.JRh(e.entry.direction),m.R7$(5),m.JRh(e.entry.http_status_code),m.R7$(5),m.JRh(e.entry.method),m.R7$(5),m.JRh(e.entry.runtime),m.R7$(5),m.JRh(e.entry.user_name),m.R7$(5),m.JRh(e.entry.route),m.R7$(5),m.JRh(e.record.url),m.R7$(5),m.JRh(e.record.ip),m.R7$(5),m.JRh(e.record.response_error),m.R7$(),m.Y8G("ngIf",e.requestArguments.length>0),m.R7$(),m.Y8G("ngIf",e.requestParams.length>0),m.R7$(),m.Y8G("ngClass",m.eq3(31,jm,"headers"!=e.activeTab)),m.R7$(13),m.Y8G("ngForOf",e.requestHeaders),m.R7$(),m.Y8G("ngIf",e.record.response_headers),m.R7$(),m.Y8G("ngIf",e.hasRequest),m.R7$(),m.Y8G("ngIf",e.hasResponse)}}let Cm=(()=>{class APIlogViewerModal{constructor(e,t,s,i){this.language=e,this.backend=t,this.toast=s,this.libloader=i,this.record={},this._requestheaders={},this._responseheaders={},this.isLoading=!0,this.logtable="sysapilog",this.beautifyenabled=!1,this.activeTab="record",this.libloader.loadLib("jsbeautify").subscribe((e=>{this.beautifyenabled=!0}))}ngOnInit(){this.loadFullData()}loadFullData(){this.isLoading=!0,this.backend.getRequest(`admin/apilog/${this.entry.id}`,{logtable:this.logtable}).subscribe({next:e=>{this.isLoading=!1,this.record=e,this.setRequestHeaders(),this.setResponseHeaders()},error:e=>{this.toast.sendToast("Error loading entry of log file!","error","Entry "+this.entry.id+" of REST log couldn´t be fetched.",!1),this.isLoading=!1,this.close()}})}setRequestHeaders(){try{let e=JSON.parse(this.record.request_headers);e&&(this._requestheaders=e)}catch(e){this._requestheaders={}}}setResponseHeaders(){try{let e=JSON.parse(this.record.response_headers);e&&(this._responseheaders=e)}catch(e){this._responseheaders={}}}get requestHeaders(){if(this.record.request_headers)try{let e=[],t=JSON.parse(this.record.request_headers);for(let s in t)e.push({name:s,value:t[s]});return e}catch(e){return[]}return[]}get responseHeaders(){if(this.record.response_headers)try{let e=[],t=JSON.parse(this.record.response_headers);for(let s in t)e.push({name:s,value:t[s]});return e}catch(e){return[]}return[]}get requestArguments(){if(this.record.request_args)try{let e=[],t=JSON.parse(this.record.request_args);for(let s in t)e.push({name:s,value:t[s]});return e}catch(e){return[]}return[]}get requestParams(){if(this.record.request_params)try{let e=[],t=JSON.parse(this.record.request_params);for(let s in t)e.push({name:s,value:t[s]});return e}catch(e){return[]}return[]}get hasRequest(){return this.record.request_body&&"{}"!=this.record.request_body}get hasResponse(){return this.record.response_body&&"{}"!=this.record.response_body}close(){this.self.destroy()}determineContentType(e){let t="application/json";for(let s in e)if("content-type"==s.toLowerCase()){t=(_.isArray(e[s])?e[s][0].toLowerCase().trim():e[s].toLowerCase().trim()).split(";")[0].trim();break}return t}formattedResponse(){return this.getFormattedBody(this.determineContentType(this._responseheaders),this.record.response_body)}formattedRequest(){return this.getFormattedBody(this.determineContentType(this._requestheaders),this.record.request_body)}getFormattedBody(e,t){switch(e){case"application/json":try{return JSON.stringify(JSON.parse(t),null,"\t")}catch(e){return t}break;case"application/x-ndjson":try{let e=[],s=t.split("\n");for(let t of s)t&&e.push(JSON.stringify(JSON.parse(t),null,"\t"));return e.join("\r\n\r\n")}catch(e){return t}break;case"application/x-www-form-urlencoded":let e=[],s=t.split("&");for(let t of s){let s=t.split("=");e.push({name:s[0],value:decodeURIComponent(s[1].replaceAll("+"," "))})}return e;case"text/xml":case"application/xml":return html_beautify(t,{indent_size:4,indent_char:" ",indent_with_tabs:!1,end_with_newline:!1,indent_level:0,preserve_newlines:!0,max_preserve_newlines:10,space_in_paren:!1,space_in_empty_paren:!1,unindent_chained_methods:!1,break_chained_methods:!1,keep_array_indentation:!1,unescape_strings:!1,wrap_line_length:100,e4x:!1,comma_first:!1,operator_position:"before-newline",indent_empty_lines:!1,templating:["auto"]});default:return t}}formatted(e){try{return JSON.stringify(JSON.parse(this.record[e]),null,"\t")}catch(t){return this.record[e]}}static#e=this.ɵfac=function(e){return new(e||APIlogViewerModal)(m.rXU(b.B),m.rXU(p.H),m.rXU(v.o),m.rXU(rm.b))};static#t=this.ɵcmp=m.VBU({type:APIlogViewerModal,selectors:[["ng-component"]],inputs:{entry:"entry"},decls:9,vars:3,consts:[["size","large"],[3,"close"],["system-modal-content-grow","","margin","none"],["class","slds-m-top--medium","style","display:block",4,"ngIf"],["class","slds-tabs_default",4,"ngIf"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CLOSE"],[1,"slds-m-top--medium",2,"display","block"],[1,"slds-tabs_default"],["role","tablist",1,"slds-tabs_default__nav"],[1,"slds-tabs_default__item",3,"ngClass","click"],[1,"slds-tabs_default__link"],["label","LBL_RECORD"],["label","LBL_HEADERS"],["class","slds-tabs_default__item",3,"ngClass","click",4,"ngIf"],[1,"slds-tabs_default__content","slds-show",3,"ngClass"],[1,"slds-table","slds-table_cell-buffer","slds-table_bordered","slds-table--fixed-layout"],[1,"slds-line-height_reset"],["scope","col",1,"slds-size--1-of-4"],[1,"slds-truncate"],["label","LBL_NAME"],["scope","col",1,"slds-size--3-of-4"],["label","LBL_VALUE"],["label","LBL_ID"],["label","LBL_TRANSACTIONID"],["label","LBL_SESSIONID"],["label","LBL_DATE"],[3,"date"],["label","LBL_DIRECTION"],["label","LBL_STATUS"],["label","LBL_METHOD"],["label","LBL_RUNTIME"],["label","LBL_USER"],["label","LBL_ROUTE"],["label","LBL_URL"],[2,"white-space","normal","word-break","break-all"],["label","LBL_IP"],["label","LBL_ERROR"],["class","slds-p-vertical--small",4,"ngIf"],[1,"slds-p-around--x-small"],["label","LBL_REQUEST_HEADERS"],["class","slds-hint-parent",4,"ngFor","ngForOf"],[4,"ngIf"],["class","slds-tabs_default__content slds-show",3,"ngClass",4,"ngIf"],["label","LBL_REQUEST"],["label","LBL_RESPONSE"],[1,"slds-p-vertical--small"],["label","LBL_REQUEST_ARGUMENTS"],[1,"slds-hint-parent"],["label","LBL_REQUEST_PARAMS"],["label","LBL_RESPONSE_HEADERS"],[3,"ngSwitch"],[4,"ngSwitchCase"],["class","slds-m-horizontal--x-small slds-box slds-theme--shade",4,"ngSwitchDefault"],[1,"slds-m-horizontal--x-small","slds-box","slds-theme--shade"],[1,"slds-text-font_monospace","slds-m-around--none",2,"overflow-wrap","break-word","white-space","pre-wrap"]],template:function(e,t){1&e&&(m.j41(0,"system-modal",0)(1,"system-modal-header",1),m.bIt("close",(function(){return t.close()})),m.EFF(2),m.k0s(),m.j41(3,"system-modal-content",2),m.DNE(4,cm,1,0,"system-spinner",3)(5,Em,105,33,"div",4),m.k0s(),m.j41(6,"system-modal-footer")(7,"button",5),m.bIt("click",(function(){return t.close()})),m.nrm(8,"system-label",6),m.k0s()()()),2&e&&(m.R7$(2),m.JRh(t.entry.route),m.R7$(2),m.Y8G("ngIf",t.isLoading),m.R7$(),m.Y8G("ngIf",!t.isLoading))},dependencies:[i.YU,i.Sq,i.bT,i.ux,i.e1,i.fG,Cc.f,x.W,qe.D,Pe.I,Je.Q,We.C,Eo.P],encapsulation:2})}return APIlogViewerModal})();function Fm(e,t){if(1&e&&(m.j41(0,"option",14),m.EFF(1),m.k0s()),2&e){const e=t.$implicit;m.Y8G("value",e),m.R7$(),m.JRh(e)}}function Gm(e,t){1&e&&(m.j41(0,"div",15),m.nrm(1,"system-spinner"),m.k0s())}function $m(e,t){1&e&&(m.j41(0,"div",15),m.nrm(1,"system-label",16),m.k0s())}function Bm(e,t){if(1&e){const e=m.RV6();m.j41(0,"li",31)(1,"a",32),m.bIt("click",(function(){const t=m.eBV(e).$implicit,s=m.XpG(2);return m.Njj(s.goDetail(t))})),m.EFF(2),m.k0s(),m.j41(3,"button",33),m.bIt("click",(function(){const t=m.eBV(e).$implicit,s=m.XpG(2);return m.Njj(s.remove(t))})),m.nrm(4,"system-button-icon",34),m.k0s()()}if(2&e){const e=t.$implicit;m.R7$(2),m.JRh(e.name)}}function Nm(e,t){if(1&e){const e=m.RV6();m.j41(0,"li",31)(1,"a",32),m.bIt("click",(function(){const t=m.eBV(e).$implicit,s=m.XpG(2);return m.Njj(s.goDetail(t))})),m.EFF(2),m.k0s(),m.j41(3,"button",35),m.bIt("click",(function(){const t=m.eBV(e).$implicit,s=m.XpG(2);return m.Njj(s.remove(t))})),m.nrm(4,"system-button-icon",34),m.k0s()()}if(2&e){const e=t.$implicit;m.R7$(2),m.JRh(e.name)}}function Sm(e,t){if(1&e){const e=m.RV6();m.j41(0,"div",17)(1,"ul",18)(2,"li",19)(3,"a",20),m.bIt("click",(function(){m.eBV(e);const t=m.XpG();return m.Njj(t.activeTab="custom")})),m.nrm(4,"system-label",21),m.k0s()(),m.j41(5,"li",19)(6,"a",22),m.bIt("click",(function(){m.eBV(e);const t=m.XpG();return m.Njj(t.activeTab="global")})),m.nrm(7,"system-label",23),m.k0s()()(),m.j41(8,"div",24)(9,"ul",25),m.DNE(10,Bm,5,1,"li",26),m.k0s(),m.j41(11,"div",27)(12,"button",28),m.bIt("click",(function(){m.eBV(e);const t=m.XpG();return m.Njj(t.add("custom"))})),m.nrm(13,"system-button-icon",29),m.k0s()()(),m.j41(14,"div",30)(15,"ul",25),m.DNE(16,Nm,5,1,"li",26),m.k0s(),m.j41(17,"div",27)(18,"button",28),m.bIt("click",(function(){m.eBV(e);const t=m.XpG();return m.Njj(t.add("global"))})),m.nrm(19,"system-button-icon",29),m.k0s()()()()}if(2&e){const e=m.XpG();m.R7$(2),m.AVh("slds-is-active","custom"==e.activeTab),m.Y8G("title",e.language.getLabel("LBL_CUSTOM")),m.R7$(3),m.AVh("slds-is-active","global"==e.activeTab),m.Y8G("title",e.language.getLabel("LBL_GLOBAL")),m.R7$(3),m.Y8G("ngClass","custom"==e.activeTab?"slds-show":"slds-hide"),m.R7$(2),m.Y8G("ngForOf",e.customModulefilters),m.R7$(),m.AVh("slds-border--top",e.customModulefilters.length>0),m.R7$(3),m.Y8G("ngClass","global"==e.activeTab?"slds-show":"slds-hide"),m.R7$(2),m.Y8G("ngForOf",e.modulefilters),m.R7$(),m.AVh("slds-border--top",e.modulefilters.length>0)}}let wm=(()=>{class ModuleFilterBuilderFilters{constructor(e,t,s,i,n,l){this.backend=e,this.language=t,this.metadata=s,this.modelutilities=i,this.session=n,this.configurationService=l,this.loading=!1,this._module="",this.filters=[],this.activeTab="global",this.filter=new m.bkB,this.modules=this.metadata.getModules(),this.modules.sort()}get module(){return this._module}set module(e){e!=this._module&&(this._module=e,this.filter.emit(null),this.loadLists())}get modulefilters(){return this.filters.filter((e=>"global"==e.scope))}get customModulefilters(){return this.filters.filter((e=>"custom"==e.scope))}goDetail(e){this.filter.emit(e)}loadLists(){this.filters=[],this.module&&(this.loading=!0,this.backend.getRequest("configuration/sysmodulefilters/"+this.module).subscribe((e=>{this.filters=e,this.loading=!1})))}add(e){let t={id:this.modelutilities.generateGuid(),module:this.module,filterdefs:null,created_by_id:this.session.authData.userId,name:"new filter",scope:e,package:"",version:""};this.filters.push(t),this.filter.emit(t)}remove(e){this.metadata.removeModuleFilter(e.id),this.backend.deleteRequest("configuration/sysmodulefilters/"+e.module+"/"+e.id).subscribe((()=>{this.configurationService.reloadTaskData("modulefilters")})),this.filters=this.filters.filter((t=>t.id!=e.id)),this.filter.emit(void 0)}static#e=this.ɵfac=function(e){return new(e||ModuleFilterBuilderFilters)(m.rXU(p.H),m.rXU(b.B),m.rXU(f.yu),m.rXU(y.g),m.rXU(Ao.d),m.rXU(M.i))};static#t=this.ɵcmp=m.VBU({type:ModuleFilterBuilderFilters,selectors:[["module-builder-filters"]],outputs:{filter:"filter"},decls:15,vars:5,consts:[[1,"slds-border--right"],[1,"slds-p-around--x-small","slds-border--bottom"],[1,"slds-form-element","slds-grid","slds-grid--vertical-align-center"],["for","moduleselect",1,"slds-form-element__label"],["label","LBL_MODULE"],[1,"slds-form-element__control","slds-col"],[1,"slds-select_container"],["id","moduleselect",1,"slds-select",3,"ngModel","ngModelChange"],["value",""],["label","LBL_SELECT"],[3,"value",4,"ngFor","ngForOf"],["system-to-bottom",""],["class","slds-align--absolute-center slds-height_full",4,"ngIf"],["class","slds-tabs_default","style","background-color: transparent",4,"ngIf"],[3,"value"],[1,"slds-align--absolute-center","slds-height_full"],["label","LBL_MAKE_SELECTION"],[1,"slds-tabs_default",2,"background-color","transparent"],["role","tablist",1,"slds-tabs_default__nav"],["role","presentation",1,"slds-tabs_default__item","slds-text-title--caps",3,"title"],["href","javascript:void(0);","role","tab","tabindex","0","aria-selected","true","aria-controls","tab-custom","id","tab-custom-item",1,"slds-tabs_default__link",3,"click"],["label","LBL_CUSTOM"],["href","javascript:void(0);","role","tab","tabindex","-1","aria-selected","false","aria-controls","tab-global","id","tab-global-item",1,"slds-tabs_default__link",3,"click"],["label","LBL_GLOBAL"],["id","tab-custom","role","tabpanel","aria-labelledby","tab-custom-item",1,"slds-tabs_default__content","slds-p-around--none",3,"ngClass"],[1,"slds-has-dividers_around-space","slds-p-around--x-small"],["class","slds-grid slds-grid--align-spread slds-item",4,"ngFor","ngForOf"],[1,"slds-p-around--x-small"],[1,"slds-align--absolute-center","slds-button","slds-button--icon","slds-button--icon-border",2,"border-radius","50%",3,"click"],["icon","add","size","medium"],["id","tab-global","role","tabpanel","aria-labelledby","tab-global-item",1,"slds-tabs_default__content","slds-p-around--none",3,"ngClass"],[1,"slds-grid","slds-grid--align-spread","slds-item"],["href","javascript:void(0);",1,"slds-text-link_reset",3,"click"],[1,"slds-button","slds-button--icon","slds-col_bump-left",3,"click"],["icon","clear"],[1,"slds-button","slds-button--icon",3,"click"]],template:function(e,t){1&e&&(m.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"label",3),m.nrm(4,"system-label",4),m.k0s(),m.j41(5,"div",5)(6,"div",6)(7,"select",7),m.mxI("ngModelChange",(function(e){return m.DH7(t.module,e)||(t.module=e),e})),m.j41(8,"option",8),m.nrm(9,"system-label",9),m.k0s(),m.DNE(10,Fm,2,2,"option",10),m.k0s()()()()(),m.j41(11,"div",11),m.DNE(12,Gm,2,0,"div",12)(13,$m,2,0,"div",12)(14,Sm,20,14,"div",13),m.k0s()()),2&e&&(m.R7$(7),m.R50("ngModel",t.module),m.R7$(3),m.Y8G("ngForOf",t.modules),m.R7$(2),m.Y8G("ngIf",t.loading),m.R7$(),m.Y8G("ngIf",!t.module&&!t.loading),m.R7$(),m.Y8G("ngIf",t.module&&!t.loading))},dependencies:[i.YU,i.Sq,i.bT,n.xH,n.y7,n.wz,n.BC,n.vS,L.t,x.W,Eo.P,F.b],encapsulation:2})}return ModuleFilterBuilderFilters})();var Tm=s(54742);function Am(e,t){if(1&e){const e=m.RV6();m.j41(0,"div")(1,"div",1)(2,"div",2)(3,"label",3),m.nrm(4,"system-label",4),m.k0s(),m.j41(5,"div",5)(6,"div",6)(7,"input",7),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.filter.name,t)||(s.filter.name=t),m.Njj(t)})),m.k0s()()()(),m.j41(8,"div",2)(9,"label",3),m.nrm(10,"system-label",8),m.k0s(),m.j41(11,"div",5)(12,"div",6)(13,"input",7),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.filter.package,t)||(s.filter.package=t),m.Njj(t)})),m.k0s()()()(),m.j41(14,"div",2)(15,"label",3),m.nrm(16,"system-label",9),m.k0s(),m.j41(17,"div",5)(18,"div",6)(19,"input",7),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.filter.version,t)||(s.filter.version=t),m.Njj(t)})),m.k0s()()()(),m.j41(20,"div",2)(21,"label",3),m.nrm(22,"system-label",10),m.k0s(),m.j41(23,"div",5)(24,"div",6)(25,"input",11),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.filter.id,t)||(s.filter.id=t),m.Njj(t)})),m.k0s()()()()(),m.j41(26,"div",12)(27,"div",13)(28,"h2",14),m.nrm(29,"system-label",15),m.k0s(),m.j41(30,"ul"),m.nrm(31,"system-filter-builder-expression-group",16),m.k0s(),m.j41(32,"h2",14),m.nrm(33,"system-label",17),m.k0s(),m.j41(34,"div",18)(35,"system-input-backend-method",19),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.filter.filtermethod,t)||(s.filter.filtermethod=t),m.Njj(t)})),m.k0s()(),m.j41(36,"div",20)(37,"button",21),m.bIt("click",(function(){m.eBV(e);const t=m.XpG();return m.Njj(t.save())})),m.nrm(38,"system-label",22),m.k0s()()()()()}if(2&e){const e=m.XpG();m.R7$(7),m.R50("ngModel",e.filter.name),m.R7$(6),m.R50("ngModel",e.filter.package),m.R7$(6),m.R50("ngModel",e.filter.version),m.R7$(6),m.R50("ngModel",e.filter.id),m.Y8G("disabled",1),m.R7$(6),m.Y8G("filtergroup",e.primaryGroup)("module",e.filter.module),m.R7$(4),m.R50("ngModel",e.filter.filtermethod)}}let Ym=(()=>{class ModuleFilterBuilderFilterDetails{constructor(e,t,s,i,n){this.backend=e,this.language=t,this.metadata=s,this.toast=i,this.configurationService=n,this.primaryGroup={logicaloperator:"and",groupscope:"all",conditions:[]}}ngOnChanges(){this.filter&&(this.filter.filterdefs?this.primaryGroup="string"==typeof this.filter.filterdefs?JSON.parse(this.filter.filterdefs):this.filter.filterdefs:this.primaryGroup={logicaloperator:"and",conditions:[]})}save(){this.cleangroup(this.primaryGroup),this.filter.filterdefs=this.primaryGroup,this.metadata.setModuleFilter(this.filter.id,this.filter.name,this.filter.module,this.filter.type),this.backend.postRequest("configuration/sysmodulefilters/"+this.filter.module+"/"+this.filter.id,{},this.filter).subscribe((e=>{this.toast.sendToast(this.language.getLabel("LBL_DATA_SAVED")+".","success"),this.configurationService.reloadTaskData("modulefilters")}))}cleangroup(e){for(let t of e.conditions){let s=e.conditions.indexOf(t);!0===t.deleted?e.conditions.splice(s,1):t.conditions&&this.cleangroup(e.conditions[s])}}static#e=this.ɵfac=function(e){return new(e||ModuleFilterBuilderFilterDetails)(m.rXU(p.H),m.rXU(b.B),m.rXU(f.yu),m.rXU(v.o),m.rXU(M.i))};static#t=this.ɵcmp=m.VBU({type:ModuleFilterBuilderFilterDetails,selectors:[["module-builder-filter-details"]],inputs:{filter:"filter"},features:[m.OA$],decls:1,vars:1,consts:[[4,"ngIf"],[1,"slds-p-vertical--x-small","slds-grid","slds-grid--vertical-align-center","slds-border--bottom"],[1,"slds-col","slds-grid","slds-grid--vertical-align-center","slds-size--1-of-4","slds-p-horizontal--x-small"],[1,"slds-form-element__label"],["label","LBL_NAME"],[1,"slds-form-element","slds-col"],[1,"slds-form-element__control"],["type","text",1,"slds-input",3,"ngModel","ngModelChange"],["label","LBL_PACKAGE"],["label","LBL_VERSION"],["label","LBL_ID"],["type","text",1,"slds-input",3,"ngModel","disabled","ngModelChange"],[1,"slds-p-around--x-small"],["system-to-bottom","",1,"slds-expression"],[1,"slds-expression__title"],["label","LBL_CONDITIONS"],[3,"filtergroup","module"],["label","LBL_METHOD"],[1,"slds-p-around--xx-small"],[3,"ngModel","ngModelChange"],[1,"slds-expression__buttons"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_SAVE"]],template:function(e,t){1&e&&m.DNE(0,Am,39,8,"div",0),2&e&&m.Y8G("ngIf",t.filter)},dependencies:[i.bT,n.me,n.BC,n.vS,Tm.y,ec.H,x.W,F.b],encapsulation:2})}return ModuleFilterBuilderFilterDetails})(),Om=(()=>{class ModuleFilterBuilder{static#e=this.ɵfac=function(e){return new(e||ModuleFilterBuilder)};static#t=this.ɵcmp=m.VBU({type:ModuleFilterBuilder,selectors:[["ng-component"]],decls:4,vars:1,consts:[["titlelabel","LBL_FILTERBUILDER"],[1,"slds-grid"],[1,"slds-size--1-of-4",3,"filter"],[1,"slds-size--3-of-4",3,"filter"]],template:function(e,t){1&e&&(m.nrm(0,"workbench-header",0),m.j41(1,"div",1)(2,"module-builder-filters",2),m.bIt("filter",(function(e){return t.filter=e})),m.k0s(),m.nrm(3,"module-builder-filter-details",3),m.k0s()),2&e&&(m.R7$(3),m.Y8G("filter",t.filter))},dependencies:[Te,wm,Ym],encapsulation:2})}return ModuleFilterBuilder})();function Xm(e,t){if(1&e&&(m.j41(0,"option",14),m.EFF(1),m.k0s()),2&e){const e=t.$implicit;m.Y8G("value",e),m.R7$(),m.JRh(e)}}function Vm(e,t){1&e&&(m.j41(0,"div",15),m.nrm(1,"system-spinner"),m.k0s())}function Um(e,t){1&e&&(m.j41(0,"div",15),m.nrm(1,"system-label",16),m.k0s())}function Hm(e,t){if(1&e){const e=m.RV6();m.j41(0,"li",31)(1,"a",32),m.bIt("click",(function(){const t=m.eBV(e).$implicit,s=m.XpG(2);return m.Njj(s.goDetail(t))})),m.EFF(2),m.k0s(),m.j41(3,"button",33),m.bIt("click",(function(){const t=m.eBV(e).$implicit,s=m.XpG(2);return m.Njj(s.remove(t.id))})),m.nrm(4,"system-button-icon",34),m.k0s()()}if(2&e){const e=t.$implicit;m.R7$(2),m.JRh(e.name)}}function zm(e,t){if(1&e){const e=m.RV6();m.j41(0,"li",31)(1,"a",32),m.bIt("click",(function(){const t=m.eBV(e).$implicit,s=m.XpG(2);return m.Njj(s.goDetail(t))})),m.EFF(2),m.k0s(),m.j41(3,"button",35),m.bIt("click",(function(){const t=m.eBV(e).$implicit,s=m.XpG(2);return m.Njj(s.remove(t.id))})),m.nrm(4,"system-button-icon",34),m.k0s()()}if(2&e){const e=t.$implicit;m.R7$(2),m.JRh(e.name)}}function qm(e,t){if(1&e){const e=m.RV6();m.j41(0,"div",17)(1,"ul",18)(2,"li",19)(3,"a",20),m.bIt("click",(function(){m.eBV(e);const t=m.XpG();return m.Njj(t.activeTab="custom")})),m.nrm(4,"system-label",21),m.k0s()(),m.j41(5,"li",19)(6,"a",22),m.bIt("click",(function(){m.eBV(e);const t=m.XpG();return m.Njj(t.activeTab="global")})),m.nrm(7,"system-label",23),m.k0s()()(),m.j41(8,"div",24)(9,"ul",25),m.DNE(10,Hm,5,1,"li",26),m.k0s(),m.j41(11,"div",27)(12,"button",28),m.bIt("click",(function(){m.eBV(e);const t=m.XpG();return m.Njj(t.add("custom"))})),m.nrm(13,"system-button-icon",29),m.k0s()()(),m.j41(14,"div",30)(15,"ul",25),m.DNE(16,zm,5,1,"li",26),m.k0s(),m.j41(17,"div",27)(18,"button",28),m.bIt("click",(function(){m.eBV(e);const t=m.XpG();return m.Njj(t.add("global"))})),m.nrm(19,"system-button-icon",29),m.k0s()()()()}if(2&e){const e=m.XpG();m.R7$(2),m.AVh("slds-is-active","custom"==e.activeTab),m.Y8G("title",e.language.getLabel("LBL_CUSTOM")),m.R7$(3),m.AVh("slds-is-active","global"==e.activeTab),m.Y8G("title",e.language.getLabel("LBL_GLOBAL")),m.R7$(3),m.Y8G("ngClass","custom"==e.activeTab?"slds-show":"slds-hide"),m.R7$(2),m.Y8G("ngForOf",e.customModuleDashlets),m.R7$(),m.AVh("slds-border--top",e.customModuleDashlets.length>0),m.R7$(3),m.Y8G("ngClass","global"==e.activeTab?"slds-show":"slds-hide"),m.R7$(2),m.Y8G("ngForOf",e.moduleDashlets),m.R7$(),m.AVh("slds-border--top",e.moduleDashlets.length>0)}}let Pm=(()=>{class DashletGeneratorDashlets{constructor(e,t,s,i){this.backend=e,this.language=t,this.metadata=s,this.modelutilities=i,this.loading=!1,this._module="",this.dashlets=[],this.activeTab="global",this.dashlet=new m.bkB,this.modules=this.metadata.getModules(),this.modules.sort()}ngOnInit(){this.loading=!0,this.backend.getRequest("module/Dashboards/dashlets").subscribe((e=>{this.dashlets=e,this.loading=!1}))}get module(){return this._module}set module(e){e!=this._module&&(this._module=e,this.dashlet.emit(null))}get moduleDashlets(){return this.dashlets.filter((e=>e.module==this.module&&"global"==e.type))}get customModuleDashlets(){return this.dashlets.filter((e=>e.module==this.module&&"custom"==e.type))}goDetail(e){this.dashlet.emit(e)}add(e){let t={id:this.modelutilities.generateGuid(),name:"new dashlet",component:"DashboardGenericDashlet",module:this.module,type:e,componentconfig:null,icon:"",description:"",acl_action:"",label:""};this.dashlets.push(t),this.dashlet.emit(t)}remove(e){this.backend.deleteRequest("module/Dashboards/dashlets/"+e),this.dashlets=this.dashlets.filter((t=>t.id!=e)),this.dashlet.emit(void 0)}static#e=this.ɵfac=function(e){return new(e||DashletGeneratorDashlets)(m.rXU(p.H),m.rXU(b.B),m.rXU(f.yu),m.rXU(y.g))};static#t=this.ɵcmp=m.VBU({type:DashletGeneratorDashlets,selectors:[["dashlet-generator-dashlets"]],outputs:{dashlet:"dashlet"},decls:15,vars:5,consts:[[1,"slds-border--right"],[1,"slds-p-around--x-small","slds-border--bottom"],[1,"slds-form-element","slds-grid","slds-grid--vertical-align-center"],["for","moduleselect",1,"slds-form-element__label"],["label","LBL_MODULE"],[1,"slds-form-element__control","slds-col"],[1,"slds-select_container"],["id","moduleselect",1,"slds-select",3,"ngModel","ngModelChange"],["value",""],["label","LBL_SELECT"],[3,"value",4,"ngFor","ngForOf"],["system-to-bottom",""],["class","slds-align--absolute-center slds-height_full",4,"ngIf"],["class","slds-tabs_default","style","background-color: transparent",4,"ngIf"],[3,"value"],[1,"slds-align--absolute-center","slds-height_full"],["label","LBL_MAKE_SELECTION"],[1,"slds-tabs_default",2,"background-color","transparent"],["role","tablist",1,"slds-tabs_default__nav"],["role","presentation",1,"slds-tabs_default__item","slds-text-title--caps",3,"title"],["href","javascript:void(0);","role","tab","tabindex","0","aria-selected","true","aria-controls","tab-custom","id","tab-custom-item",1,"slds-tabs_default__link",3,"click"],["label","LBL_CUSTOM"],["href","javascript:void(0);","role","tab","tabindex","-1","aria-selected","false","aria-controls","tab-global","id","tab-global-item",1,"slds-tabs_default__link",3,"click"],["label","LBL_GLOBAL"],["id","tab-custom","role","tabpanel","aria-labelledby","tab-custom-item",1,"slds-tabs_default__content","slds-p-around--none",3,"ngClass"],[1,"slds-has-dividers_around-space","slds-p-around--x-small"],["class","slds-grid slds-grid--align-spread slds-item",4,"ngFor","ngForOf"],[1,"slds-p-around--x-small"],[1,"slds-align--absolute-center","slds-button","slds-button--icon","slds-button--icon-border",2,"border-radius","50%",3,"click"],["icon","add","size","medium"],["id","tab-global","role","tabpanel","aria-labelledby","tab-global-item",1,"slds-tabs_default__content","slds-p-around--none",3,"ngClass"],[1,"slds-grid","slds-grid--align-spread","slds-item"],["href","javascript:void(0);",1,"slds-text-link_reset",3,"click"],[1,"slds-button","slds-button--icon","slds-col_bump-left",3,"click"],["icon","clear"],[1,"slds-button","slds-button--icon",3,"click"]],template:function(e,t){1&e&&(m.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"label",3),m.nrm(4,"system-label",4),m.k0s(),m.j41(5,"div",5)(6,"div",6)(7,"select",7),m.mxI("ngModelChange",(function(e){return m.DH7(t.module,e)||(t.module=e),e})),m.j41(8,"option",8),m.nrm(9,"system-label",9),m.k0s(),m.DNE(10,Xm,2,2,"option",10),m.k0s()()()()(),m.j41(11,"div",11),m.DNE(12,Vm,2,0,"div",12)(13,Um,2,0,"div",12)(14,qm,20,14,"div",13),m.k0s()()),2&e&&(m.R7$(7),m.R50("ngModel",t.module),m.R7$(3),m.Y8G("ngForOf",t.modules),m.R7$(2),m.Y8G("ngIf",t.loading),m.R7$(),m.Y8G("ngIf",!t.module&&!t.loading),m.R7$(),m.Y8G("ngIf",t.module&&!t.loading))},dependencies:[i.YU,i.Sq,i.bT,n.xH,n.y7,n.wz,n.BC,n.vS,L.t,x.W,Eo.P,F.b],encapsulation:2})}return DashletGeneratorDashlets})();function Jm(e,t){if(1&e&&(m.j41(0,"option",36),m.EFF(1),m.k0s()),2&e){const e=t.$implicit;m.Y8G("value",e.id),m.R7$(),m.JRh(e.module)}}function Wm(e,t){if(1&e&&(m.j41(0,"option",36),m.EFF(1),m.k0s()),2&e){const e=t.$implicit;m.Y8G("value",e.component),m.R7$(),m.JRh(e.component)}}function Km(e,t){if(1&e){const e=m.RV6();m.j41(0,"div")(1,"div",1)(2,"div",2)(3,"div",3)(4,"label",4),m.nrm(5,"system-label",5),m.k0s(),m.j41(6,"div",6)(7,"div",7)(8,"select",8),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.sysModule,t)||(s.sysModule=t),m.Njj(t)})),m.DNE(9,Jm,2,2,"option",9),m.k0s()()(),m.j41(10,"label",10),m.nrm(11,"system-label",11),m.k0s(),m.j41(12,"div",6)(13,"div",7)(14,"select",12),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.dashlet.component,t)||(s.dashlet.component=t),m.Njj(t)})),m.DNE(15,Wm,2,2,"option",9),m.k0s()()()()()(),m.j41(16,"div",13)(17,"div",14)(18,"div",15)(19,"label",4),m.nrm(20,"system-label",16),m.k0s(),m.j41(21,"div",17)(22,"input",18),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.dashlet.name,t)||(s.dashlet.name=t),m.Njj(t)})),m.k0s()()(),m.j41(23,"div",19)(24,"label",4),m.EFF(25,"Label"),m.k0s(),m.j41(26,"system-input-label",20),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.dashlet.label,t)||(s.dashlet.label=t),m.Njj(t)})),m.k0s()()(),m.j41(27,"div",14)(28,"div",15)(29,"label",4),m.nrm(30,"system-label",21),m.k0s(),m.j41(31,"div",17)(32,"input",18),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.dashlet.package,t)||(s.dashlet.package=t),m.Njj(t)})),m.k0s()()(),m.j41(33,"div",15)(34,"label",4),m.nrm(35,"system-label",22),m.k0s(),m.j41(36,"div",17)(37,"input",18),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.dashlet.version,t)||(s.dashlet.version=t),m.Njj(t)})),m.k0s()()()(),m.j41(38,"div",14)(39,"div",15)(40,"label",4),m.nrm(41,"system-label",23),m.k0s(),m.j41(42,"div",17)(43,"input",18),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.dashlet.icon,t)||(s.dashlet.icon=t),m.Njj(t)})),m.k0s()()(),m.j41(44,"div",15)(45,"label",4),m.nrm(46,"system-label",24),m.k0s(),m.j41(47,"div",17)(48,"input",18),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.dashlet.acl_action,t)||(s.dashlet.acl_action=t),m.Njj(t)})),m.k0s()()()(),m.j41(49,"div",25)(50,"label",4),m.nrm(51,"system-label",26),m.k0s(),m.j41(52,"div",27)(53,"textarea",28),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.dashlet.description,t)||(s.dashlet.description=t),m.Njj(t)})),m.k0s()()(),m.j41(54,"div",29)(55,"div",30),m.nrm(56,"system-label",31),m.k0s(),m.nrm(57,"workbench-config",32),m.k0s(),m.j41(58,"div",33)(59,"button",34),m.bIt("click",(function(){m.eBV(e);const t=m.XpG();return m.Njj(t.save())})),m.nrm(60,"system-label",35),m.k0s()()()()}if(2&e){const e=m.XpG();m.R7$(8),m.R50("ngModel",e.sysModule),m.R7$(),m.Y8G("ngForOf",e.sysModules),m.R7$(5),m.R50("ngModel",e.dashlet.component),m.Y8G("disabled",!e.sysModule),m.R7$(),m.Y8G("ngForOf",e.components),m.R7$(7),m.R50("ngModel",e.dashlet.name),m.R7$(4),m.R50("ngModel",e.dashlet.label),m.R7$(6),m.R50("ngModel",e.dashlet.package),m.R7$(5),m.R50("ngModel",e.dashlet.version),m.R7$(6),m.R50("ngModel",e.dashlet.icon),m.R7$(5),m.R50("ngModel",e.dashlet.acl_action),m.R7$(5),m.R50("ngModel",e.dashlet.description),m.R7$(4),m.Y8G("component",e.dashlet.component)("configValues",e.configValues)}}let Qm=(()=>{class DashletGeneratorDashletDetails{constructor(e,t,s,i,n){this.backend=e,this.language=t,this.metadata=s,this.toast=i,this.view=n,this.sysModules=[],this.configValues={},this.view.setEditMode(),this.sysModules=this.metadata.getSystemModules()}get components(){return this.metadata.getSystemComponents(this.sysModule)}ngOnChanges(){if(this.dashlet){let e=this.metadata.getSystemComponents().find((e=>e.component==this.dashlet.component));this.sysModule=e?e.module:void 0,this.configValues=this.dashlet.componentconfig?JSON.parse(this.dashlet.componentconfig):{}}}save(){this.dashlet.componentconfig=JSON.stringify(this.configValues),this.backend.postRequest("module/Dashboards/dashlets/"+this.dashlet.id,{},this.dashlet).subscribe((e=>this.toast.sendToast(this.language.getLabel("LBL_DATA_SAVED")+".","success")))}static#e=this.ɵfac=function(e){return new(e||DashletGeneratorDashletDetails)(m.rXU(p.H),m.rXU(b.B),m.rXU(f.yu),m.rXU(v.o),m.rXU(_n.U))};static#t=this.ɵcmp=m.VBU({type:DashletGeneratorDashletDetails,selectors:[["dashlet_generator_dashlet-details"]],inputs:{dashlet:"dashlet"},features:[m.Jv_([_n.U]),m.OA$],decls:1,vars:1,consts:[[4,"ngIf"],[1,"slds-p-around--x-small","slds-border--bottom"],[1,"slds-form-element","slds-size--1-of-3","slds-form-element","slds-size--1-of-3","slds-grid","slds-grid--vertical-align-center"],[1,"slds-grid","slds-grid--vertical-align-center"],[1,"slds-form-element__label"],["label","LBL_MODULE"],[1,"slds-form-element__control","slds-size--1-of-2"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"slds-form-element__label","slds-m-left--small"],["label","LBL_COMPONENT"],[1,"slds-select",3,"ngModel","disabled","ngModelChange"],[1,"slds-p-around--x-small"],[1,"slds-grid","slds-gutters_direct-xx-small"],[1,"slds-form-element","slds-col","slds-size--1-of-2"],["label","LBL_NAME"],[1,"slds-form-element__control"],["type","text",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-form-element","slds-size--1-of-2"],[3,"ngModel","ngModelChange"],["label","LBL_PACKAGE"],["label","LBL_VERSION"],["label","LBL_ICON"],["label","LBL_ACL_ACTION"],[1,"slds-form-element","slds-size--1-of-1"],["label","LBL_DESCRIPTION"],[1,"slds-m-vertical--small","slds-text-title_bold"],[1,"slds-textarea",2,"max-height","400px","min-height","30px",3,"ngModel","ngModelChange"],[1,"slds-size--1-of-1","slds-border--top","slds-border--bottom","slds-form-element","slds-m-top--medium","slds-p-bottom--medium"],[1,"slds-text-title_bold","slds-m-vertical--small"],["label","LBL_CONFIGURATION"],[3,"component","configValues"],[1,"slds-align--absolute-center","slds-p-top--medium"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_SAVE"],[3,"value"]],template:function(e,t){1&e&&m.DNE(0,Km,61,14,"div",0),2&e&&m.Y8G("ngIf",t.dashlet)},dependencies:[i.Sq,i.bT,n.xH,n.y7,n.me,n.wz,n.BC,n.vS,ze.w,x.W,jn],encapsulation:2})}return DashletGeneratorDashletDetails})(),Zm=(()=>{class DashletGenerator{static#e=this.ɵfac=function(e){return new(e||DashletGenerator)};static#t=this.ɵcmp=m.VBU({type:DashletGenerator,selectors:[["ng-component"]],decls:4,vars:1,consts:[["titlelabel","LBL_DASHLET_GENERATOR"],[1,"slds-grid"],[1,"slds-size--1-of-4",3,"dashlet"],[1,"slds-size--3-of-4",3,"dashlet"]],template:function(e,t){1&e&&(m.nrm(0,"workbench-header",0),m.j41(1,"div",1)(2,"dashlet-generator-dashlets",2),m.bIt("dashlet",(function(e){return t.dashlet=e})),m.k0s(),m.nrm(3,"dashlet_generator_dashlet-details",3),m.k0s()),2&e&&(m.R7$(3),m.Y8G("dashlet",t.dashlet))},dependencies:[Te,Pm,Qm],encapsulation:2})}return DashletGenerator})();function eu(e,t){if(1&e&&(m.qex(0),m.j41(1,"td"),m.EFF(2),m.k0s(),m.j41(3,"td"),m.EFF(4),m.k0s(),m.j41(5,"td"),m.EFF(6),m.k0s(),m.j41(7,"td"),m.EFF(8),m.k0s(),m.j41(9,"td"),m.EFF(10),m.k0s(),m.j41(11,"td"),m.EFF(12),m.k0s(),m.bVm()),2&e){const e=m.XpG().$implicit;m.R7$(2),m.JRh(e.route),m.R7$(2),m.JRh(e.method),m.R7$(2),m.JRh(e.user_id),m.R7$(2),m.JRh(e.ip),m.R7$(2),m.JRh(e.direction),m.R7$(2),m.JRh(e.logtable)}}function tu(e,t){if(1&e&&(m.j41(0,"option"),m.EFF(1),m.k0s()),2&e){const e=t.$implicit;m.R7$(),m.JRh(e)}}function su(e,t){if(1&e&&(m.j41(0,"option"),m.EFF(1),m.k0s()),2&e){const e=t.$implicit;m.R7$(),m.JRh(e)}}function iu(e,t){if(1&e){const e=m.RV6();m.qex(0),m.j41(1,"td")(2,"input",23),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG().$implicit;return m.DH7(s.route,t)||(s.route=t),m.Njj(t)})),m.k0s()(),m.j41(3,"td")(4,"div",24)(5,"div",25)(6,"div",26)(7,"select",27),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG().$implicit;return m.DH7(s.method,t)||(s.method=t),m.Njj(t)})),m.j41(8,"option"),m.EFF(9,"*"),m.k0s(),m.DNE(10,tu,2,1,"option",18),m.k0s()()()()(),m.j41(11,"td")(12,"input",23),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG().$implicit;return m.DH7(s.user_id,t)||(s.user_id=t),m.Njj(t)})),m.k0s()(),m.j41(13,"td")(14,"input",23),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG().$implicit;return m.DH7(s.ip,t)||(s.ip=t),m.Njj(t)})),m.k0s()(),m.j41(15,"td")(16,"div",24)(17,"div",25)(18,"div",26)(19,"select",27),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG().$implicit;return m.DH7(s.direction,t)||(s.direction=t),m.Njj(t)})),m.j41(20,"option"),m.EFF(21,"*"),m.k0s(),m.j41(22,"option"),m.EFF(23,"O"),m.k0s(),m.j41(24,"option"),m.EFF(25,"I"),m.k0s()()()()()(),m.j41(26,"td")(27,"div",24)(28,"div",25)(29,"div",26)(30,"select",27),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG().$implicit;return m.DH7(s.logtable,t)||(s.logtable=t),m.Njj(t)})),m.nrm(31,"option"),m.DNE(32,su,2,1,"option",18),m.k0s()()()()(),m.bVm()}if(2&e){const e=m.XpG().$implicit,t=m.XpG();m.R7$(2),m.R50("ngModel",e.route),m.R7$(5),m.R50("ngModel",e.method),m.R7$(3),m.Y8G("ngForOf",t.methods),m.R7$(2),m.R50("ngModel",e.user_id),m.R7$(2),m.R50("ngModel",e.ip),m.R7$(5),m.R50("ngModel",e.direction),m.R7$(11),m.R50("ngModel",e.logtable),m.R7$(2),m.Y8G("ngForOf",t.logtables)}}function nu(e,t){if(1&e){const e=m.RV6();m.j41(0,"button",28),m.bIt("click",(function(){m.eBV(e);const t=m.XpG().$implicit,s=m.XpG();return m.Njj(s.toggleActive(t.id))})),m.nrm(1,"system-utility-icon",29),m.k0s()}if(2&e){const e=m.XpG().$implicit;m.R7$(),m.Y8G("colorclass",e.is_active?"slds-icon-text-success":"slds-icon-text-light")}}function lu(e,t){if(1&e){const e=m.RV6();m.j41(0,"button",28),m.bIt("click",(function(){m.eBV(e);const t=m.XpG().$implicit;return m.Njj(t.editing=!0)})),m.nrm(1,"system-button-icon",30),m.k0s()}2&e&&(m.R7$(),m.Y8G("icon","edit")("size","small"))}function ou(e,t){if(1&e){const e=m.RV6();m.j41(0,"button",28),m.bIt("click",(function(){m.eBV(e);const t=m.XpG().$implicit,s=m.XpG();return m.Njj(s.delete(t.id))})),m.nrm(1,"system-button-icon",30),m.k0s()}2&e&&(m.R7$(),m.Y8G("icon","delete")("size","small"))}function au(e,t){if(1&e){const e=m.RV6();m.j41(0,"button",28),m.bIt("click",(function(){m.eBV(e);const t=m.XpG().$implicit,s=m.XpG();return m.Njj(s.save(t))})),m.nrm(1,"system-button-icon",30),m.k0s()}2&e&&(m.R7$(),m.Y8G("icon","check")("size","small"))}function du(e,t){if(1&e&&(m.j41(0,"tr"),m.DNE(1,eu,13,6,"ng-container",20)(2,iu,33,8,"ng-container",20),m.j41(3,"td")(4,"div",21),m.DNE(5,nu,2,1,"button",22)(6,lu,2,2,"button",22)(7,ou,2,2,"button",22)(8,au,2,2,"button",22),m.k0s()()()),2&e){const e=t.$implicit;m.R7$(),m.Y8G("ngIf",!e.editing),m.R7$(),m.Y8G("ngIf",e.editing),m.R7$(3),m.Y8G("ngIf",!e.editing),m.R7$(),m.Y8G("ngIf",!e.editing),m.R7$(),m.Y8G("ngIf",!e.editing),m.R7$(),m.Y8G("ngIf",e.editing)}}function ru(e,t){1&e&&(m.j41(0,"div",31)(1,"system-illustration-no-records"),m.nrm(2,"system-label",32),m.k0s()())}let cu=(()=>{class APIlogConfig{constructor(e,t,s,i){this.backend=e,this.modal=t,this.modelutilities=s,this.toast=i,this.methods=["CONNECT","DELETE","GET","HEAD","OPTIONS","POST","PATCH","PUT","SOAP","TRACE"],this.entries=[],this.logtables=[],this.isLoading=!1,this.loadData()}loadData(){this.isLoading=!0,this.backend.getRequest("admin/apilog/config").subscribe({next:e=>{this.entries=e,this.isLoading=!1},error:()=>{this.isLoading=!1}}),this.backend.getRequest("admin/apilog/logtables").subscribe({next:e=>{this.logtables=e}})}addEntry(){let e=this.modelutilities.generateGuid(),t={route:"*",method:"*",user_id:"*",ip:"*",direction:"*",is_active:0};this.backend.postRequest(`admin/apilog/config/${e}`,{},t).subscribe({next:()=>{t.id=e,t.editing=!0,this.entries.push(t)}})}toggleActive(e){let t=this.entries.find((t=>t.id==e)).is_active;this.backend.putRequest(`admin/apilog/config/${e}/activate/${t?0:1}`).subscribe({next:()=>{this.entries.find((t=>t.id==e)).is_active=!t}})}delete(e){this.backend.deleteRequest(`admin/apilog/config/${e}`).subscribe({next:()=>{this.entries.splice(this.entries.findIndex((t=>t.id==e)),1)}})}save(e){let t={route:e.route,method:e.method,user_id:e.user_id,ip:e.ip,direction:e.direction,logtable:e.logtable,is_active:e.is_active};this.backend.postRequest(`admin/apilog/config/${e.id}`,{},t).subscribe({next:()=>{e.editing=!1}})}static#e=this.ɵfac=function(e){return new(e||APIlogConfig)(m.rXU(p.H),m.rXU(R.y),m.rXU(y.g),m.rXU(v.o))};static#t=this.ɵcmp=m.VBU({type:APIlogConfig,selectors:[["apilog-config"]],decls:27,vars:4,consts:[["titlelabel","LBL_API_LOG_CONFIGURATION","icon","custom:custom62"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_ADD"],["system-to-bottom-noscroll","",3,"system-overlay-loading-spinner"],["system-to-bottom","",1,"slds-border--top"],[1,"slds-table","slds-table--bordered","slds-table--fixed-layout","slds-no-row-hover","slds-table_header-fixed"],[2,"width","8rem"],["label","LBL_ROUTE",1,"slds-th__action"],[2,"width","4rem"],["label","LBL_METHOD",1,"slds-th__action"],["label","LBL_USER",1,"slds-th__action"],["label","LBL_IP_ADDRESS",1,"slds-th__action"],[2,"width","2rem"],["label","LBL_DIRECTION",1,"slds-th__action"],[2,"width","6rem"],["label","LBL_LOGTABLE",1,"slds-th__action"],["label","LBL_ACTION",1,"slds-th__action"],["tbody",""],[4,"ngFor","ngForOf"],["class","slds-height_full slds-align--absolute-center",4,"ngIf"],[4,"ngIf"],["role","group",1,"slds-button-group","slds-float--right"],["class","slds-button slds-button--icon-border",3,"click",4,"ngIf"],[1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-form-element"],[1,"slds-form-element__control"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],[1,"slds-button","slds-button--icon-border",3,"click"],["icon","light_bulb","size","x-small",3,"colorclass"],[3,"icon","size"],[1,"slds-height_full","slds-align--absolute-center"],["label","LBL_NO_RECORDS_FOUND"]],template:function(e,t){1&e&&(m.j41(0,"workbench-header",0)(1,"workbench-header-controls")(2,"button",1),m.bIt("click",(function(){return t.addEntry()})),m.nrm(3,"system-label",2),m.k0s()()(),m.j41(4,"div",3)(5,"div",4)(6,"table",5)(7,"thead")(8,"tr")(9,"th",6),m.nrm(10,"system-label",7),m.k0s(),m.j41(11,"th",8),m.nrm(12,"system-label",9),m.k0s(),m.j41(13,"th",6),m.nrm(14,"system-label",10),m.k0s(),m.j41(15,"th",6),m.nrm(16,"system-label",11),m.k0s(),m.j41(17,"th",12),m.nrm(18,"system-label",13),m.k0s(),m.j41(19,"th",14),m.nrm(20,"system-label",15),m.k0s(),m.j41(21,"th",8),m.nrm(22,"system-label",16),m.k0s()()(),m.j41(23,"tbody",null,17),m.DNE(25,du,9,6,"tr",18),m.k0s()(),m.DNE(26,ru,3,0,"div",19),m.k0s()()),2&e&&(m.R7$(2),m.Y8G("disabled",t.isLoading),m.R7$(2),m.Y8G("system-overlay-loading-spinner",t.isLoading),m.R7$(21),m.Y8G("ngForOf",t.entries),m.R7$(),m.Y8G("ngIf",!t.isLoading&&0==t.entries.length))},dependencies:[i.Sq,i.bT,n.xH,n.y7,n.me,n.wz,n.BC,n.vS,L.t,Fc.b,x.W,u.B,F.b,T.p,kl.M,Te,Ye],encapsulation:2})}return APIlogConfig})();function mu(e,t){1&e&&(m.j41(0,"option",39),m.nrm(1,"system-label",40),m.k0s())}let uu=(()=>{class DictionaryManagerEditDefinitionModal{constructor(e,t,s,i){this.dictionarymanager=e,this.metadata=t,this.modelutilities=s,this.backend=i}close(){this.self.destroy()}save(){this.dictionarymanager.dictionarydefinitions.some((e=>e.id==this.dictionarydefinition.id&&(e.package=this.dictionarydefinition.package,e.version=this.dictionarydefinition.version,e.sysdictionary_contenttype=this.dictionarydefinition.sysdictionary_contenttype,this.backend.postRequest(`dictionary/definition/${this.dictionarydefinition.id}`,{},this.dictionarydefinition).subscribe({next:e=>{this.close()},error:()=>{this.close()}}),!0)))}static#e=this.ɵfac=function(e){return new(e||DictionaryManagerEditDefinitionModal)(m.rXU(j),m.rXU(f.yu),m.rXU(y.g),m.rXU(p.H))};static#t=this.ɵcmp=m.VBU({type:DictionaryManagerEditDefinitionModal,selectors:[["ng-component"]],decls:75,vars:13,consts:[[3,"close"],[1,"slds-grid"],[1,"slds-form-element__control","slds-size--1-of-2","slds-p-right--xxx-small"],[1,"slds-form-element__label"],[1,"slds-required"],["label","LBL_NAME"],[3,"ngModel","disabled","ngModelChange"],["label","LBL_TABLE"],[1,"slds-form-element__control","slds-size--1-of-4","slds-p-left--xxx-small"],["label","LBL_SCOPE"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","disabled","ngModelChange"],["value","g",4,"ngIf"],["value","c"],["label","LBL_CUSTOM"],[1,"slds-large-size--1-of-4","slds-p-horizontal--xxx-small","slds-form-element__control"],["label","LBL_TYPE"],["value","module"],["value","metadata"],["value","template"],[1,"slds-size--1-of-4","slds-p-horizontal--xxx-small","slds-form-element__control"],["label","LBL_PACKAGE"],[3,"ngModel","ngModelChange"],[1,"slds-size--1-of-4","slds-p-left--xxx-small","slds-form-element__control"],["label","LBL_VERSION"],[1,"slds-p-vertical--xx-small"],["label","LBL_CONTENT_TYPE"],[1,"slds-select",3,"ngModel","ngModelChange"],["value","masterdata"],["value","transactionaldata"],["value","logs"],["value","config"],["value","custom_config"],["label","LBL_COMMENT"],[1,"slds-textarea",3,"ngModel"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CLOSE"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_SAVE"],["value","g"],["label","LBL_GLOBAL"]],template:function(e,t){1&e&&(m.j41(0,"system-modal")(1,"system-modal-header",0),m.bIt("close",(function(){return t.close()})),m.EFF(2,"Edit Dictionary Definition"),m.k0s(),m.j41(3,"system-modal-content")(4,"div",1)(5,"div",2)(6,"label",3)(7,"abbr",4),m.EFF(8,"* "),m.k0s(),m.nrm(9,"system-label",5),m.k0s(),m.j41(10,"system-input-text",6),m.mxI("ngModelChange",(function(e){return m.DH7(t.dictionarydefinition.name,e)||(t.dictionarydefinition.name=e),e})),m.k0s()(),m.j41(11,"div",2)(12,"label",3),m.nrm(13,"system-label",7),m.k0s(),m.j41(14,"system-input-text",6),m.mxI("ngModelChange",(function(e){return m.DH7(t.dictionarydefinition.tablename,e)||(t.dictionarydefinition.tablename=e),e})),m.k0s()()(),m.j41(15,"div",1)(16,"div",8)(17,"label",3)(18,"abbr",4),m.EFF(19,"* "),m.k0s(),m.nrm(20,"system-label",9),m.k0s(),m.j41(21,"div",10)(22,"select",11),m.mxI("ngModelChange",(function(e){return m.DH7(t.dictionarydefinition.scope,e)||(t.dictionarydefinition.scope=e),e})),m.DNE(23,mu,2,0,"option",12),m.j41(24,"option",13),m.nrm(25,"system-label",14),m.k0s()()()(),m.j41(26,"div",15)(27,"label",3)(28,"abbr",4),m.EFF(29,"* "),m.k0s(),m.nrm(30,"system-label",16),m.k0s(),m.j41(31,"div",10)(32,"select",11),m.mxI("ngModelChange",(function(e){return m.DH7(t.dictionarydefinition.sysdictionary_type,e)||(t.dictionarydefinition.sysdictionary_type=e),e})),m.j41(33,"option",17),m.EFF(34,"module"),m.k0s(),m.j41(35,"option",18),m.EFF(36,"metadata"),m.k0s(),m.j41(37,"option",19),m.EFF(38,"template"),m.k0s(),m.j41(39,"option",19),m.EFF(40,"relationship"),m.k0s()()()(),m.j41(41,"div",20)(42,"label",3),m.nrm(43,"system-label",21),m.k0s(),m.j41(44,"system-input-text",22),m.mxI("ngModelChange",(function(e){return m.DH7(t.dictionarydefinition.package,e)||(t.dictionarydefinition.package=e),e})),m.k0s()(),m.j41(45,"div",23)(46,"label",3),m.nrm(47,"system-label",24),m.k0s(),m.j41(48,"system-input-text",22),m.mxI("ngModelChange",(function(e){return m.DH7(t.dictionarydefinition.version,e)||(t.dictionarydefinition.version=e),e})),m.k0s()()(),m.j41(49,"div",25)(50,"label",3)(51,"abbr",4),m.EFF(52,"* "),m.k0s(),m.nrm(53,"system-label",26),m.k0s(),m.j41(54,"div",10)(55,"select",27),m.mxI("ngModelChange",(function(e){return m.DH7(t.dictionarydefinition.sysdictionary_contenttype,e)||(t.dictionarydefinition.sysdictionary_contenttype=e),e})),m.j41(56,"option",28),m.EFF(57,"Masterdata"),m.k0s(),m.j41(58,"option",29),m.EFF(59,"tramsactional Data"),m.k0s(),m.j41(60,"option",30),m.EFF(61,"Logs"),m.k0s(),m.j41(62,"option",31),m.EFF(63,"Configuration"),m.k0s(),m.j41(64,"option",32),m.EFF(65,"custom Configuration"),m.k0s()()()(),m.j41(66,"div",25)(67,"label",3),m.nrm(68,"system-label",33),m.k0s(),m.nrm(69,"textarea",34),m.k0s()(),m.j41(70,"system-modal-footer")(71,"button",35),m.bIt("click",(function(){return t.close()})),m.nrm(72,"system-label",36),m.k0s(),m.j41(73,"button",37),m.bIt("click",(function(){return t.save()})),m.nrm(74,"system-label",38),m.k0s()()()),2&e&&(m.R7$(10),m.R50("ngModel",t.dictionarydefinition.name),m.Y8G("disabled",!0),m.R7$(4),m.R50("ngModel",t.dictionarydefinition.tablename),m.Y8G("disabled",!0),m.R7$(8),m.R50("ngModel",t.dictionarydefinition.scope),m.Y8G("disabled",!0),m.R7$(),m.Y8G("ngIf","all"==t.dictionarymanager.changescope),m.R7$(9),m.R50("ngModel",t.dictionarydefinition.sysdictionary_type),m.Y8G("disabled",!0),m.R7$(12),m.R50("ngModel",t.dictionarydefinition.package),m.R7$(4),m.R50("ngModel",t.dictionarydefinition.version),m.R7$(7),m.R50("ngModel",t.dictionarydefinition.sysdictionary_contenttype),m.R7$(14),m.Y8G("ngModel",t.dictionarydefinition.description))},dependencies:[i.bT,n.xH,n.y7,n.me,n.wz,n.BC,n.vS,D.H,x.W,qe.D,Pe.I,Je.Q,We.C],encapsulation:2})}return DictionaryManagerEditDefinitionModal})();function gu(e,t){if(1&e&&(m.j41(0,"option",39),m.EFF(1),m.k0s()),2&e){const e=t.$implicit;m.Y8G("value",e.id),m.R7$(),m.JRh(e.module)}}function hu(e,t){if(1&e&&(m.j41(0,"option",39),m.EFF(1),m.k0s()),2&e){const e=t.$implicit;m.Y8G("value",e),m.R7$(),m.JRh(e)}}function pu(e,t){if(1&e&&(m.j41(0,"option",39),m.EFF(1),m.k0s()),2&e){const e=t.$implicit;m.Y8G("value",e),m.R7$(),m.JRh(e)}}function fu(e,t){if(1&e&&(m.j41(0,"option",39),m.EFF(1),m.k0s()),2&e){const e=t.$implicit;m.Y8G("value",e),m.R7$(),m.JRh(e)}}function bu(e,t){if(1&e&&(m.j41(0,"option",39),m.EFF(1),m.k0s()),2&e){const e=t.$implicit;m.Y8G("value",e),m.R7$(),m.JRh(e)}}function yu(e,t){if(1&e&&(m.j41(0,"option",39),m.EFF(1),m.k0s()),2&e){const e=t.$implicit;m.Y8G("value",e),m.R7$(),m.JRh(e)}}function _u(e,t){if(1&e){const e=m.RV6();m.j41(0,"tr",30)(1,"td",31)(2,"div",32)(3,"select",33),m.mxI("ngModelChange",(function(t){const s=m.eBV(e).$implicit;return m.DH7(s.module_id,t)||(s.module_id=t),m.Njj(t)})),m.bIt("change",(function(){m.eBV(e);const t=m.XpG(2);return m.Njj(t.canSaveOnInit=!0)})),m.DNE(4,gu,2,2,"option",34),m.k0s()()(),m.j41(5,"td",31)(6,"div",32)(7,"select",35),m.mxI("ngModelChange",(function(t){const s=m.eBV(e).$implicit;return m.DH7(s.module_field,t)||(s.module_field=t),m.Njj(t)})),m.DNE(8,hu,2,2,"option",34),m.k0s()()(),m.j41(9,"td",31)(10,"div",32)(11,"select",35),m.mxI("ngModelChange",(function(t){const s=m.eBV(e).$implicit;return m.DH7(s.module_field_c1,t)||(s.module_field_c1=t),m.Njj(t)})),m.DNE(12,pu,2,2,"option",34),m.k0s()()(),m.j41(13,"td",31)(14,"div",32)(15,"select",35),m.mxI("ngModelChange",(function(t){const s=m.eBV(e).$implicit;return m.DH7(s.module_field_c2,t)||(s.module_field_c2=t),m.Njj(t)})),m.DNE(16,fu,2,2,"option",34),m.k0s()()(),m.j41(17,"td",31)(18,"div",32)(19,"select",35),m.mxI("ngModelChange",(function(t){const s=m.eBV(e).$implicit;return m.DH7(s.module_field_c3,t)||(s.module_field_c3=t),m.Njj(t)})),m.DNE(20,bu,2,2,"option",34),m.k0s()()(),m.j41(21,"td",31)(22,"div",32)(23,"select",35),m.mxI("ngModelChange",(function(t){const s=m.eBV(e).$implicit;return m.DH7(s.module_field_c4,t)||(s.module_field_c4=t),m.Njj(t)})),m.DNE(24,yu,2,2,"option",34),m.k0s()()(),m.j41(25,"td",31)(26,"div",36)(27,"button",37),m.bIt("click",(function(){const t=m.eBV(e).index,s=m.XpG(2);return m.Njj(s.deleteConfig(t))})),m.nrm(28,"system-button-icon",38),m.k0s()()()()}if(2&e){const e=t.$implicit,s=m.XpG(2);m.R7$(3),m.Y8G("disabled",s.loading),m.R50("ngModel",e.module_id),m.R7$(),m.Y8G("ngForOf",s.sysModules),m.R7$(3),m.Y8G("disabled",s.loading||!e.module_id),m.R50("ngModel",e.module_field),m.R7$(),m.Y8G("ngForOf",s.getModuleFields(e.module_id)),m.R7$(3),m.Y8G("disabled",s.loading||!e.module_id),m.R50("ngModel",e.module_field_c1),m.R7$(),m.Y8G("ngForOf",s.getModuleFields(e.module_id)),m.R7$(3),m.Y8G("disabled",s.loading||!e.module_id),m.R50("ngModel",e.module_field_c2),m.R7$(),m.Y8G("ngForOf",s.getModuleFields(e.module_id)),m.R7$(3),m.Y8G("disabled",s.loading||!e.module_id),m.R50("ngModel",e.module_field_c3),m.R7$(),m.Y8G("ngForOf",s.getModuleFields(e.module_id)),m.R7$(3),m.Y8G("disabled",s.loading||!e.module_id),m.R50("ngModel",e.module_field_c4),m.R7$(),m.Y8G("ngForOf",s.getModuleFields(e.module_id)),m.R7$(3),m.Y8G("disabled",s.loading),m.R7$(),m.Y8G("icon","delete")}}function ku(e,t){if(1&e&&(m.j41(0,"table",14)(1,"thead")(2,"tr",15)(3,"th",16)(4,"span",17),m.nrm(5,"system-label",18),m.k0s()(),m.j41(6,"th",16)(7,"span",19),m.nrm(8,"system-label",20),m.k0s()(),m.j41(9,"th",16)(10,"span",21),m.nrm(11,"system-label",22),m.k0s()(),m.j41(12,"th",16)(13,"span",23),m.nrm(14,"system-label",24),m.k0s()(),m.j41(15,"th",16)(16,"span",25),m.nrm(17,"system-label",26),m.k0s()(),m.j41(18,"th",16)(19,"span",27),m.nrm(20,"system-label",28),m.k0s()(),m.nrm(21,"th",16),m.k0s()(),m.j41(22,"tbody"),m.DNE(23,_u,29,20,"tr",29),m.k0s()()),2&e){const e=m.XpG();m.R7$(23),m.Y8G("ngForOf",e.categoriesInputArray)}}function vu(e,t){1&e&&m.nrm(0,"system-label",40)}let Ru=(()=>{class CategoryTreeManagerLinkModal{constructor(e,t,s,i){this.backend=e,this.model=t,this.modal=s,this.metadata=i,this.loading=!1,this.categoriesInputArray=[],this.sysModules=[],this.canSaveOnInit=!1,this.backend.getRequest("system/spiceui/admin/modules").subscribe((e=>{this.sysModules=e}))}ngOnInit(){this.getTreeLinks()}getTreeLinks(){this.loading=!0;let e=this.modal.await("loading...");this.backend.getRequest(`configuration/spiceui/core/categorytrees/${this.activeTreeId}/links`).subscribe({next:t=>{this.categoriesInputArray=t,this.loading=!1,this.canSaveOnInit=0!==t.length,e.emit(!0)},error:()=>{this.loading=!1,e.emit(!0)}})}addConfig(){this.canSaveOnInit=!0,this.categoriesInputArray.push({id:this.categoriesInputArray.length+1,module_id:"",module_field:"",module_field_c1:"",module_field_c2:"",module_field_c3:"",module_field_c4:""})}deleteConfig(e){this.canSaveOnInit=!0,this.categoriesInputArray.splice(e,1)}get canSave(){let e=this.categoriesInputArray.find((e=>""==e.module_id||""==e.module_field));return""==e?.module_id||""==e?.module_field}getModuleFields(e){let t=[];if(!e)return t;let s=this.metadata.getModuleFields(this.sysModules.find((t=>t.id==e)).module);for(let e of Object.keys(s))t.push(s[e].name);return t.sort(((e,t)=>e.localeCompare(t)))}saveChanges(){let e=this.modal.await("saving..."),t=new RegExp(/^[{]?[0-9a-fA-F]{8}-([0-9a-fA-F]{4}-){3}[0-9a-fA-F]{12}[}]?$/),s=this.categoriesInputArray.map((e=>({id:t.test(e.id)?e.id:this.model.generateGuid(),module_id:e.module_id,module_field:e.module_field,syscategorytree_id:this.activeTreeId,module_field_c1:e.module_field_c1,module_field_c2:e.module_field_c2,module_field_c3:e.module_field_c3,module_field_c4:e.module_field_c4})));this.backend.postRequest(`configuration/spiceui/core/categorytrees/${this.activeTreeId}/links`,{},s).subscribe({next:()=>{e.emit(!0),this.loading=!1,this.close()},error:()=>{e.emit(!0),this.loading=!1}})}close(){this.self.destroy()}static#e=this.ɵfac=function(e){return new(e||CategoryTreeManagerLinkModal)(m.rXU(p.H),m.rXU(oa.g),m.rXU(R.y),m.rXU(f.yu))};static#t=this.ɵcmp=m.VBU({type:CategoryTreeManagerLinkModal,selectors:[["category-tree-manager-link-modal"]],features:[m.Jv_([oa.g])],decls:16,vars:4,consts:[["size","large"],[3,"close"],["label","LBL_LINK_TREE_CATEGORIES"],["margin","none"],[1,"slds-table_edit_container","slds-is-relative"],["class","slds-table slds-table_bordered","role","grid","style","width: 100%;",4,"ngIf","ngIfElse"],["notLinkTree",""],[1,"slds-text-align--right","slds-p-vertical--x-small"],["type","button",1,"slds-button","slds-button--brand","slds-float--left",3,"disabled","click"],["label","LBL_ADD"],["type","button",1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],["type","button",1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_SAVE"],["role","grid",1,"slds-table","slds-table_bordered",2,"width","100%"],[1,"slds-line-height_reset"],["scope","col"],["title","Model",1,"slds-truncate"],["label","LBL_MODEL"],["title","module field",1,"slds-truncate"],["label","LBL_MODULE_FIELD"],["title","syscategory 1",1,"slds-truncate"],["label","LBL_SYS_CAT_1"],["title","syscategory 2",1,"slds-truncate"],["label","LBL_SYS_CAT_2"],["title","syscategory 3",1,"slds-truncate"],["label","LBL_SYS_CAT_3"],["title","syscategory 4",1,"slds-truncate"],["label","LBL_SYS_CAT_4"],["class","slds-hint-parent",4,"ngFor","ngForOf"],[1,"slds-hint-parent"],["role","gridcell",1,"slds-cell-edit"],[1,"slds-select_container"],[1,"slds-select",3,"disabled","ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],[1,"slds-p-around--small","slds-align--absolute-center","slds-float_right"],["title","delete item",1,"slds-button","slds-button--icon",3,"disabled","click"],[3,"icon"],[3,"value"],["label","LBL_PLEASE_ADD_LINK_TREE_CATEGORIES",1,"slds-align--absolute-center","slds-is-relative","slds-p-around--xx-large"]],template:function(e,t){if(1&e&&(m.j41(0,"system-modal",0)(1,"system-modal-header",1),m.bIt("close",(function(){return t.close()})),m.nrm(2,"system-label",2),m.k0s(),m.j41(3,"system-modal-content",3)(4,"div",4),m.DNE(5,ku,24,1,"table",5)(6,vu,1,0,"ng-template",null,6,m.C5r),m.k0s()(),m.j41(8,"system-modal-footer")(9,"div",7)(10,"button",8),m.bIt("click",(function(){return t.addConfig()})),m.nrm(11,"system-label",9),m.k0s(),m.j41(12,"button",10),m.bIt("click",(function(){return t.close()})),m.nrm(13,"system-label",11),m.k0s(),m.j41(14,"button",12),m.bIt("click",(function(){return t.saveChanges()})),m.nrm(15,"system-label",13),m.k0s()()()()),2&e){const e=m.sdS(7);m.R7$(5),m.Y8G("ngIf",t.categoriesInputArray.length)("ngIfElse",e),m.R7$(5),m.Y8G("disabled",t.loading),m.R7$(4),m.Y8G("disabled",t.canSave||!t.canSaveOnInit)}},dependencies:[i.Sq,i.bT,n.xH,n.y7,n.wz,n.BC,n.vS,L.t,x.W,qe.D,Pe.I,Je.Q,We.C],encapsulation:2})}return CategoryTreeManagerLinkModal})();var Mu=s(37263),ju=s(39554);const Lu=(e,t)=>t.id,xu=e=>({"slds-theme--inverse":e});function Iu(e,t){if(1&e){const e=m.RV6();m.j41(0,"li",19),m.nrm(1,"system-utility-icon",20),m.j41(2,"div",21)(3,"a",22),m.bIt("click",(function(){const t=m.eBV(e).$implicit,s=m.XpG();return m.Njj(s.handleSelectedItemChange(t.id))})),m.EFF(4),m.k0s()(),m.j41(5,"div",23)(6,"button",24),m.bIt("click",(function(){const t=m.eBV(e).$implicit,s=m.XpG();return m.Njj(s.editRole(t.id))})),m.nrm(7,"system-button-icon",25),m.k0s(),m.j41(8,"button",24),m.bIt("click",(function(){const t=m.eBV(e).$implicit,s=m.XpG();return m.Njj(s.deleteRole(t.id))})),m.nrm(9,"system-button-icon",26),m.k0s()()()}if(2&e){const e=t.$implicit,s=m.XpG();m.Y8G("ngClass",m.eq3(4,xu,e.id==s.selectedRoleId)),m.R7$(),m.Y8G("icon","global"==e.scope?"world":"people"),m.R7$(),m.Y8G("title",e.name),m.R7$(2),m.JRh(e.name)}}function Du(e,t){if(1&e&&m.nrm(0,"system-utility-icon",41),2&e){const e=m.XpG().$implicit;m.Y8G("icon","global"==e.scope?"world":"people")}}const Eu=()=>({icon:"people",value:"custom"}),Cu=()=>({icon:"world",value:"global"}),Fu=(e,t)=>[e,t];function Gu(e,t){if(1&e){const e=m.RV6();m.j41(0,"system-input-radio-button-group",42),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG().$implicit;return m.DH7(s.scope,t)||(s.scope=t),m.Njj(t)})),m.k0s()}if(2&e){const e=m.XpG().$implicit,t=m.XpG();m.Y8G("disabled",!t.editableRoleScope),m.R50("ngModel",e.scope),m.Y8G("inputOptions",m.l_i(5,Fu,m.lJ4(3,Eu),m.lJ4(4,Cu)))}}function $u(e,t){if(1&e&&(m.j41(0,"div",11),m.EFF(1),m.k0s()),2&e){const e=m.XpG().$implicit;m.R7$(),m.JRh(e.module)}}function Bu(e,t){if(1&e){const e=m.RV6();m.j41(0,"system-input-module",43),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG().$implicit;return m.DH7(s.module,t)||(s.module=t),m.Njj(t)})),m.k0s()}if(2&e){const e=m.XpG().$implicit;m.R50("ngModel",e.module)}}function Nu(e,t){if(1&e&&(m.j41(0,"div",11),m.EFF(1),m.k0s()),2&e){const e=m.XpG().$implicit;m.R7$(),m.JRh(e.version)}}function Su(e,t){if(1&e){const e=m.RV6();m.j41(0,"input",44),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG().$implicit;return m.DH7(s.version,t)||(s.version=t),m.Njj(t)})),m.k0s()}if(2&e){const e=m.XpG().$implicit;m.R50("ngModel",e.version)}}function wu(e,t){if(1&e&&(m.j41(0,"div",11),m.EFF(1),m.k0s()),2&e){const e=m.XpG().$implicit;m.R7$(),m.JRh(e.package)}}function Tu(e,t){if(1&e){const e=m.RV6();m.j41(0,"input",44),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG().$implicit;return m.DH7(s.package,t)||(s.package=t),m.Njj(t)})),m.k0s()}if(2&e){const e=m.XpG().$implicit;m.R50("ngModel",e.package)}}function Au(e,t){if(1&e){const e=m.RV6();m.j41(0,"div",45)(1,"button",46),m.bIt("click",(function(){m.eBV(e);const t=m.XpG().$implicit,s=m.sdS(1),i=m.XpG();return m.Njj(i.deleteRoleModule(t,s))})),m.nrm(2,"system-button-icon",26),m.k0s()()}}function Yu(e,t){if(1&e){const e=m.RV6();m.j41(0,"div",45)(1,"button",47),m.bIt("click",(function(){m.eBV(e);const t=m.XpG().$index,s=m.sdS(1),i=m.XpG();return m.Njj(i.cancelEditing(s,t))})),m.nrm(2,"system-button-icon",48),m.k0s(),m.j41(3,"button",47),m.bIt("click",(function(){m.eBV(e);const t=m.XpG().$implicit,s=m.sdS(1),i=m.XpG();return m.Njj(i.saveRoleModule(t,s))})),m.nrm(4,"system-button-icon",49),m.k0s()()}}const Ou=()=>({editable:!0});function Xu(e,t){if(1&e&&(m.j41(0,"tr",27,28)(2,"td",29),m.nrm(3,"system-utility-icon",30),m.DNE(4,Du,1,1,"system-utility-icon",31),m.j41(5,"span",32),m.DNE(6,Gu,1,8,"system-input-radio-button-group",33),m.k0s()(),m.j41(7,"td",34),m.DNE(8,$u,2,1,"div",35)(9,Bu,1,1,"system-input-module",36),m.k0s(),m.j41(10,"td",34),m.DNE(11,Nu,2,1,"div",35)(12,Su,1,1,"input",37),m.k0s(),m.j41(13,"td",34),m.DNE(14,wu,2,1,"div",35)(15,Tu,1,1,"input",37),m.k0s(),m.j41(16,"td",38)(17,"div",39),m.DNE(18,Au,3,0,"div",40)(19,Yu,5,0,"div",40),m.k0s()()()),2&e){const e=t.$implicit,s=m.sdS(1);m.Y8G("system-view-provider",m.lJ4(13,Ou)),m.R7$(3),m.Y8G("icon","rows")("size","x-small"),m.R7$(),m.Y8G("ngIf","edit"!=s.view.mode||!!e.id),m.R7$(2),m.Y8G("ngIf","edit"==s.view.mode&&!e.id),m.R7$(2),m.Y8G("ngIf","edit"!=s.view.mode),m.R7$(),m.Y8G("ngIf","edit"==s.view.mode),m.R7$(2),m.Y8G("ngIf","edit"!=s.view.mode),m.R7$(),m.Y8G("ngIf","edit"==s.view.mode),m.R7$(2),m.Y8G("ngIf","edit"!=s.view.mode),m.R7$(),m.Y8G("ngIf","edit"==s.view.mode),m.R7$(3),m.Y8G("ngIf","edit"!=s.view.mode),m.R7$(),m.Y8G("ngIf","edit"==s.view.mode)}}let Vu=(()=>{class RoleMenuManager{constructor(e,t,s,i,n,l){this.backend=e,this.modal=t,this.toast=s,this.cdRef=i,this.configurationService=n,this.injector=l,this.roles=[],this.roleModules=[],this.isLoading=!1,this.filterModules=[],this.roleModulesBackup={}}saveRoleModule(e,t){t.view.setViewMode(),delete this.roleModulesBackup[e.id],e.id||(e.id=this.backend.modelutilities.generateGuid()),e.sysuirole_id=this.selectedRoleId;const s="global"==e.scope?"sysuirolemodules":"sysuicustomrolemodules",i={...e};delete i.scope,this.backend.postRequest(`configuration/configurator/${s}/${e.id}`,null,{config:i}).subscribe({next:()=>{this.configurationService.reloadTaskData("rolemodules"),this.toast.sendToast("LBL_DATA_SAVED","success")}})}deleteRoleModule(e,t){t.view.setViewMode();const s="custom"==e.scope?"sysuicustomrolemodules":"sysuirolemodules";this.backend.deleteRequest(`configuration/configurator/${s}/${e.id}`).subscribe((()=>{this.configurationService.reloadTaskData("rolemodules"),this.toast.sendToast("MSG_SUCCESSFULLY_DELETED","success")})),this.roleModules=this.roleModules.filter((t=>t.id!=e.id)),this.saveSequence()}addRoleModule(){const e={id:"",sysuirole_id:this.selectedRoleId,module:"",sequence:this.roleModules.length,version:"",package:"",scope:"custom"};this.roleModules.push(e),this.filterModules=this.roleModules.map((e=>e.module)),this.cdRef.detectChanges(),this.viewProviders.last.view.setEditMode()}ngOnInit(){this.loadRoles()}loadRoleModules(e){this.isLoading=!0,this.cdRef.detectChanges(),this.backend.getRequest(`configuration/spiceui/core/rolemodules/${e}`).subscribe({next:e=>{this.isLoading=!1,this.roleModules=e.sort(((e,t)=>e.sequence-t.sequence)),this.filterModules=this.roleModules.map((e=>e.module))}})}handleSelectedItemChange(e){this.loadRoleModules(e),this.editableRoleScope="global"==this.roles.find((t=>t.id==e)).scope,this.selectedRoleId=this.roles.find((t=>t.id==e)).id}startEditing(e,t){this.roleModulesBackup[t.id]={...t},e.view.setEditMode()}cancelEditing(e,t){this.roleModules[t].id?this.roleModules[t]=this.roleModulesBackup[this.roleModules[t].id]:this.roleModules.splice(t,1),e.view.setViewMode()}deleteRole(e){this.modal.confirm("MSG_DELETE_RECORD","MSG_DELETE_RECORD").subscribe({next:t=>{if(t){const t=this.roles.find((t=>t.id==e)),s="global"==t.scope?"sysuiroles":"sysuicustomroles";this.backend.deleteRequest(`configuration/configurator/${s}/${t.id}`).subscribe((()=>{this.configurationService.reloadTaskData("roles"),this.configurationService.reloadTaskData("sysroles"),this.toast.sendToast("MSG_SUCCESSFULLY_DELETED","success")})),this.roles=this.roles.filter((e=>e.id!=t.id))}}})}editRole(e){const t=this.roles.find((t=>t.id==e));this.openEditRoleModal(t)}openEditRoleModal(e){this.modal.openModal("RoleMenuManagerEditRoleModal").subscribe((t=>{const s=this.roles.indexOf(e);e&&(t.instance.newRole={...e}),t.instance.save$.subscribe({next:t=>{e?this.roles.splice(s,1,t):this.roles.push(t)}})}))}addRole(){this.openEditRoleModal()}loadRoles(){this.isLoading=!0,this.cdRef.detectChanges(),this.backend.getRequest("configuration/spiceui/core/roles").subscribe({next:e=>{this.isLoading=!1,this.roles=e.map((e=>({...e}))),this.handleSelectedItemChange(e[0].id)}})}drop(e){(0,c.HD)(e.container.data,e.previousIndex,e.currentIndex),this.saveSequence()}saveSequence(){this.roleModules.forEach(((e,t)=>{e.sequence=t}));const e=this.roleModules.filter((e=>"global"==e.scope)).map((e=>{const t={...e};return delete t.scope,t}));e.length>0&&this.backend.postRequest("configuration/configurator/sysuirolemodules",null,{config:e}).subscribe((()=>{this.configurationService.reloadTaskData("rolemodules")}));const t=this.roleModules.filter((e=>"custom"==e.scope)).map((e=>{const t={...e};return delete t.scope,t}));t.length>0&&this.backend.postRequest("configuration/configurator/sysuicustomrolemodules",null,{config:t}).subscribe((()=>{this.configurationService.reloadTaskData("rolemodules")}))}static#e=this.ɵfac=function(e){return new(e||RoleMenuManager)(m.rXU(p.H),m.rXU(R.y),m.rXU(v.o),m.rXU(m.gRc),m.rXU(M.i),m.rXU(m.zZn))};static#t=this.ɵcmp=m.VBU({type:RoleMenuManager,selectors:[["role-menu-manager"]],viewQuery:function(e,t){if(1&e&&m.GBs(Mu.x,5),2&e){let e;m.mGM(e=m.lsd())&&(t.viewProviders=e)}},decls:32,vars:2,consts:[["titlelabel","LBL_ROLE_MENU_MANAGER"],["system-to-bottom-noscroll","",1,"slds-grid",3,"system-overlay-loading-spinner"],[1,"slds-size--1-of-5","slds-scrollable--y","slds-theme--shade","slds-tabs_default__content","slds-p-around--none","slds-border--right"],[1,"slds-has-dividers_around-space","slds-p-around--x-small"],[1,"slds-align--absolute-center","slds-theme--shade","slds-border--top","slds-p-around--small",2,"position","sticky","bottom","0"],[1,"slds-align--absolute-center","slds-button","slds-button--icon",3,"click"],["icon","new","size","medium"],[1,"slds-size--4-of-5","slds-scrollable--y","slds-theme--shade"],[1,"slds-table","slds-table--bordered","slds-table--cell-buffer","slds-table--fixed-layout","slds-text-align_center"],[1,"slds-line-height_reset"],["scope","col",1,"slds-text-align_left",2,"width","8rem"],[1,"slds-truncate"],["scope","col",1,"slds-text-align_left"],["label","LBL_MODULE"],["label","LBL_VERSION"],["label","LBL_PACKAGE"],["scope","col",1,"slds-cell_action-mode"],["cdkDropList","",1,"dragboundary",3,"cdkDropListData","cdkDropListDropped"],[1,"slds-align--absolute-center","slds-border--top","slds-p-around--small","slds-theme--shade",2,"position","sticky","bottom","0"],[1,"slds-grid","slds-grid--vertical-align-center","slds-grid--align-spread","slds-theme--default","slds-item",3,"ngClass"],["size","x-small",1,"slds-p-around--xx-small",3,"icon"],[1,"slds-truncate",3,"title"],["href","javascript:void(0);",1,"slds-text-link_reset","slds-text-align_center","slds-p-around--xx-small",3,"click"],[1,"slds-button","slds-button--icon","slds-col_bump-left"],[1,"slds-button","slds-button--icon",3,"click"],["icon","edit","size","small"],["icon","delete","size","small"],["cdkDrag","","cdkDragBoundary",".dragboundary",1,"slds-hint-parent",3,"system-view-provider"],["viewProvider","system-view-provider"],[1,"slds-text-align_left",2,"width","8rem"],["cdkDragHandle","",1,"slds-p-right--xx-small",2,"cursor","move",3,"icon","size"],["style","width:4.25rem","size","x-small",3,"icon",4,"ngIf"],[1,"slds-form-element__control"],[3,"disabled","ngModel","inputOptions","ngModelChange",4,"ngIf"],[1,"slds-text-align_left"],["class","slds-truncate",4,"ngIf"],[3,"ngModel","ngModelChange",4,"ngIf"],["class","slds-input",3,"ngModel","ngModelChange",4,"ngIf"],[1,"slds-text-align_center"],[1,"slds-truncate","slds-cell_action-mode"],["role","group","class","slds-button slds-float--right ng-star-inserted",4,"ngIf"],["size","x-small",2,"width","4.25rem",3,"icon"],[3,"disabled","ngModel","inputOptions","ngModelChange"],[3,"ngModel","ngModelChange"],[1,"slds-input",3,"ngModel","ngModelChange"],["role","group",1,"slds-button","slds-float--right","ng-star-inserted"],[1,"slds-button","slds-button--icon","slds-p-around--xx-small",3,"click"],[1,"slds-button","slds-button--icon-border",3,"click"],["icon","close","size","small"],["icon","check","size","small"],["class","slds-grid slds-grid--vertical-align-center slds-grid--align-spread slds-theme--default slds-item",3,"ngClass"],["class","slds-hint-parent","cdkDrag","","cdkDragBoundary",".dragboundary",3,"system-view-provider"]],template:function(e,t){1&e&&(m.j41(0,"workbench-header",0),m.nrm(1,"workbench-header-controls"),m.k0s(),m.j41(2,"div",1)(3,"div",2)(4,"ul",3),m.Z7z(5,Iu,10,6,"li",50,Lu),m.k0s(),m.j41(7,"div",4)(8,"button",5),m.bIt("click",(function(){return t.addRole()})),m.nrm(9,"system-button-icon",6),m.k0s()()(),m.j41(10,"div",7)(11,"table",8)(12,"thead")(13,"tr",9)(14,"th",10),m.nrm(15,"div",11),m.k0s(),m.j41(16,"th",12)(17,"div",11),m.nrm(18,"system-label",13),m.k0s()(),m.j41(19,"th",12)(20,"div",11),m.nrm(21,"system-label",14),m.k0s()(),m.j41(22,"th",12)(23,"div",11),m.nrm(24,"system-label",15),m.k0s()(),m.nrm(25,"th",16),m.k0s()(),m.j41(26,"tbody",17),m.bIt("cdkDropListDropped",(function(e){return t.drop(e)})),m.Z7z(27,Xu,20,14,"tr",51,Lu),m.k0s()(),m.j41(29,"div",18)(30,"button",5),m.bIt("click",(function(){return t.addRoleModule()})),m.nrm(31,"system-button-icon",6),m.k0s()()()()),2&e&&(m.R7$(2),m.Y8G("system-overlay-loading-spinner",t.isLoading),m.R7$(3),m.Dyx(t.roles),m.R7$(21),m.Y8G("cdkDropListData",t.roleModules),m.R7$(),m.Dyx(t.roleModules))},dependencies:[i.YU,i.bT,n.me,n.BC,n.vS,L.t,to.u,ju.s,x.W,u.B,T.p,Mu.x,kl.M,c.O7,c.T1,c.Fb,Te,Ye],encapsulation:2})}return RoleMenuManager})();var Uu=s(73976),Hu=s(75642);let zu=(()=>{class RoleMenuManagerEditRoleModal{constructor(e,t,s,i,n,l){this.metadata=e,this.modelutilities=t,this.backend=s,this.toast=i,this.configurationService=n,this.modal=l,this.newRole={id:"",identifier:"",name:"",label:"",icon:"",systemdefault:!1,portaldefault:!1,showsearch:!0,showfavorites:!0,description:"",default_dashboard:"",default_dashboardset:"",version:"",package:"",scope:"custom",rolescope:"i",scope_icon:"",systemTreeDefs:{}},this.save$=new h.B,this.radioOptions=[{label:"custom",value:"custom"},{label:"global",value:"global"}]}close(){this.self.destroy()}canSave(){return!!(this.newRole.name&&this.newRole.label&&this.newRole.identifier)}saveRole(){this.newRole.id||(this.newRole.id=this.modelutilities.generateGuid());const e="custom"==this.newRole.scope?"sysuicustomroles":"sysuiroles",t={...this.newRole};delete t.scope,delete t.scope_icon,delete t.systemTreeDefs,t.systemdefault=t.systemdefault?1:0;let s=this.modal.await("LBL_LOADING");this.backend.postRequest(`configuration/configurator/${e}/${this.newRole.id}`,null,{config:t}).subscribe({next:()=>{this.newRole.scope_icon="custom"==this.newRole.scope?"people":"world",this.save$.next(this.newRole),this.save$.complete(),s.emit(!0),this.configurationService.reloadTaskData("roles"),this.configurationService.reloadTaskData("sysroles"),this.toast.sendToast("LBL_DATA_SAVED","success")}}),this.self.destroy()}static#e=this.ɵfac=function(e){return new(e||RoleMenuManagerEditRoleModal)(m.rXU(f.yu),m.rXU(y.g),m.rXU(p.H),m.rXU(v.o),m.rXU(M.i),m.rXU(R.y))};static#t=this.ɵcmp=m.VBU({type:RoleMenuManagerEditRoleModal,selectors:[["role-menu-manager-edit-role-modal"]],decls:82,vars:27,consts:[[3,"close"],["label","LBL_ROLE"],[1,"slds-height_full"],[1,"slds-grid","slds-grid--vertical-align-center"],[1,"slds-form-element__control"],[1,"slds-form-element__label"],["label","LBL_SCOPE"],[3,"ngModel","inputOptions","disabled","ngModelChange"],[1,"slds-form-element__control","slds-grid","slds-grid--vertical-align-center"],["label","LBL_APPLICABLE_SCOPE"],[1,"slds-grid"],["value","a",3,"name","ngModel","ngModelChange"],["label","LBL_ALL"],["value","i",3,"name","ngModel","ngModelChange"],["label","LBL_INTERNAL_ONLY"],["value","e",3,"name","ngModel","ngModelChange"],["label","LBL_EXTERNAL_ONLY"],[1,"slds-form-element__control","slds-size--1-of-4","slds-p-right--xxx-small"],[1,"slds-required"],["label","LBL_NAME"],[3,"ngModel","ngModelChange"],["label","LBL_LABEL"],["label","LBL_IDENTIFIER"],["maxlength","3",3,"ngModel","ngModelChange"],["label","LBL_ICON"],[1,"slds-grid","slds-m-top--medium"],[3,"ngModel","asinteger","ngModelChange"],["label","LBL_SYSTEM_DEFAULT"],["label","LBL_PORTAL_DEFAULT"],["label","LBL_SHOW_SEARCH"],["label","LBL_SHOW_FAVORITES"],[1,"slds-grid","slds-m-top--small"],["label","LBL_DEFAULT_DASHBOARD"],["label","LBL_DEFAULT_DASHBOARD_SET"],["label","LBL_VERSION"],["label","LBL_PACKAGE"],[1,"slds-form-element__control","slds-size--4-of-4","slds-p-right--xxx-small","slds-m-top--x-small"],["label","LBL_DESCRIPTION"],[1,"slds-textarea","slds-scrollable--y","slds-m-vertical--xx-small","ng-untouched","ng-pristine","ng-valid",2,"min-height","80px","max-height","300px","height","80px",3,"ngModel","ngModelChange"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CLOSE"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_SAVE"]],template:function(e,t){1&e&&(m.j41(0,"system-modal")(1,"system-modal-header",0),m.bIt("close",(function(){return t.close()})),m.nrm(2,"system-label",1),m.k0s(),m.j41(3,"system-modal-content")(4,"div",2)(5,"div",3)(6,"div",4)(7,"label",5),m.nrm(8,"system-label",6),m.k0s(),m.j41(9,"system-input-radio-button-group",7),m.mxI("ngModelChange",(function(e){return m.DH7(t.newRole.scope,e)||(t.newRole.scope=e),e})),m.k0s()(),m.j41(10,"div",8)(11,"label",5),m.nrm(12,"system-label",9),m.k0s(),m.j41(13,"div",10)(14,"system-input-radio",11),m.mxI("ngModelChange",(function(e){return m.DH7(t.newRole.rolescope,e)||(t.newRole.rolescope=e),e})),m.nrm(15,"system-label",12),m.k0s(),m.j41(16,"system-input-radio",13),m.mxI("ngModelChange",(function(e){return m.DH7(t.newRole.rolescope,e)||(t.newRole.rolescope=e),e})),m.nrm(17,"system-label",14),m.k0s(),m.j41(18,"system-input-radio",15),m.mxI("ngModelChange",(function(e){return m.DH7(t.newRole.rolescope,e)||(t.newRole.rolescope=e),e})),m.nrm(19,"system-label",16),m.k0s()()()(),m.j41(20,"div",10)(21,"div",17)(22,"label",5)(23,"abbr",18),m.EFF(24,"* "),m.k0s(),m.nrm(25,"system-label",19),m.k0s(),m.j41(26,"system-input-text",20),m.mxI("ngModelChange",(function(e){return m.DH7(t.newRole.name,e)||(t.newRole.name=e),e})),m.k0s()(),m.j41(27,"div",17)(28,"label",5)(29,"abbr",18),m.EFF(30,"* "),m.k0s(),m.nrm(31,"system-label",21),m.k0s(),m.j41(32,"system-input-label",20),m.mxI("ngModelChange",(function(e){return m.DH7(t.newRole.label,e)||(t.newRole.label=e),e})),m.k0s()(),m.j41(33,"div",17)(34,"label",5)(35,"abbr",18),m.EFF(36,"* "),m.k0s(),m.nrm(37,"system-label",22),m.k0s(),m.j41(38,"system-input-text",23),m.mxI("ngModelChange",(function(e){return m.DH7(t.newRole.identifier,e)||(t.newRole.identifier=e),e})),m.k0s()(),m.j41(39,"div",17)(40,"label",5),m.nrm(41,"system-label",24),m.k0s(),m.j41(42,"system-input-text",20),m.mxI("ngModelChange",(function(e){return m.DH7(t.newRole.icon,e)||(t.newRole.icon=e),e})),m.k0s()()(),m.j41(43,"div",25)(44,"div",17)(45,"system-checkbox",26),m.mxI("ngModelChange",(function(e){return m.DH7(t.newRole.systemdefault,e)||(t.newRole.systemdefault=e),e})),m.nrm(46,"system-label",27),m.k0s()(),m.j41(47,"div",17)(48,"system-checkbox",26),m.mxI("ngModelChange",(function(e){return m.DH7(t.newRole.portaldefault,e)||(t.newRole.portaldefault=e),e})),m.nrm(49,"system-label",28),m.k0s()(),m.j41(50,"div",17)(51,"system-checkbox",26),m.mxI("ngModelChange",(function(e){return m.DH7(t.newRole.showsearch,e)||(t.newRole.showsearch=e),e})),m.nrm(52,"system-label",29),m.k0s()(),m.j41(53,"div",17)(54,"system-checkbox",26),m.mxI("ngModelChange",(function(e){return m.DH7(t.newRole.showfavorites,e)||(t.newRole.showfavorites=e),e})),m.nrm(55,"system-label",30),m.k0s()()(),m.j41(56,"div",31)(57,"div",17)(58,"label",5),m.nrm(59,"system-label",32),m.k0s(),m.j41(60,"system-input-dashboard",20),m.mxI("ngModelChange",(function(e){return m.DH7(t.newRole.default_dashboard,e)||(t.newRole.default_dashboard=e),e})),m.k0s()(),m.j41(61,"div",17)(62,"label",5),m.nrm(63,"system-label",33),m.k0s(),m.j41(64,"system-input-dashboardset",20),m.mxI("ngModelChange",(function(e){return m.DH7(t.newRole.default_dashboardset,e)||(t.newRole.default_dashboardset=e),e})),m.k0s()(),m.j41(65,"div",17)(66,"label",5),m.nrm(67,"system-label",34),m.k0s(),m.j41(68,"system-input-text",20),m.mxI("ngModelChange",(function(e){return m.DH7(t.newRole.version,e)||(t.newRole.version=e),e})),m.k0s()(),m.j41(69,"div",17)(70,"label",5),m.nrm(71,"system-label",35),m.k0s(),m.j41(72,"system-input-text",20),m.mxI("ngModelChange",(function(e){return m.DH7(t.newRole.package,e)||(t.newRole.package=e),e})),m.k0s()()(),m.j41(73,"div",36)(74,"label",5),m.nrm(75,"system-label",37),m.k0s(),m.j41(76,"textarea",38),m.mxI("ngModelChange",(function(e){return m.DH7(t.newRole.description,e)||(t.newRole.description=e),e})),m.k0s()()()(),m.j41(77,"system-modal-footer")(78,"button",39),m.bIt("click",(function(){return t.close()})),m.nrm(79,"system-label",40),m.k0s(),m.j41(80,"button",41),m.bIt("click",(function(){return t.saveRole()})),m.nrm(81,"system-label",42),m.k0s()()()),2&e&&(m.R7$(9),m.R50("ngModel",t.newRole.scope),m.Y8G("inputOptions",t.radioOptions)("disabled",!!t.newRole.id),m.R7$(5),m.Y8G("name","aclprofilescope"+t.newRole.id),m.R50("ngModel",t.newRole.rolescope),m.R7$(2),m.Y8G("name","aclprofilescope"+t.newRole.id),m.R50("ngModel",t.newRole.rolescope),m.R7$(2),m.Y8G("name","aclprofilescope"+t.newRole.id),m.R50("ngModel",t.newRole.rolescope),m.R7$(8),m.R50("ngModel",t.newRole.name),m.R7$(6),m.R50("ngModel",t.newRole.label),m.R7$(6),m.R50("ngModel",t.newRole.identifier),m.R7$(4),m.R50("ngModel",t.newRole.icon),m.R7$(3),m.R50("ngModel",t.newRole.systemdefault),m.Y8G("asinteger",!0),m.R7$(3),m.R50("ngModel",t.newRole.portaldefault),m.Y8G("asinteger",!0),m.R7$(3),m.R50("ngModel",t.newRole.showsearch),m.Y8G("asinteger",!0),m.R7$(3),m.R50("ngModel",t.newRole.showfavorites),m.Y8G("asinteger",!0),m.R7$(6),m.R50("ngModel",t.newRole.default_dashboard),m.R7$(4),m.R50("ngModel",t.newRole.default_dashboardset),m.R7$(4),m.R50("ngModel",t.newRole.version),m.R7$(4),m.R50("ngModel",t.newRole.package),m.R7$(4),m.R50("ngModel",t.newRole.description),m.R7$(4),m.Y8G("disabled",!t.canSave()))},dependencies:[n.me,n.BC,n.tU,n.vS,be.f,D.H,ze.w,at.J,ju.s,x.W,qe.D,Pe.I,Je.Q,We.C,Uu.Y,Hu.u],encapsulation:2})}return RoleMenuManagerEditRoleModal})();function qu(e,t){if(1&e){const e=m.RV6();m.j41(0,"div",10)(1,"div",11)(2,"label",12)(3,"abbr",13),m.EFF(4,"* "),m.k0s(),m.nrm(5,"system-label",14),m.k0s(),m.j41(6,"system-input-password",15),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.loginDetails.token,t)||(s.loginDetails.token=t),m.Njj(t)})),m.k0s()()()}if(2&e){const e=m.XpG();m.R7$(6),m.R50("ngModel",e.loginDetails.token)}}function Pu(e,t){if(1&e){const e=m.RV6();m.j41(0,"div",10)(1,"div",16)(2,"label",12)(3,"abbr",13),m.EFF(4,"* "),m.k0s(),m.nrm(5,"system-label",17),m.k0s(),m.j41(6,"system-input-text",15),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.loginDetails.username,t)||(s.loginDetails.username=t),m.Njj(t)})),m.k0s()(),m.j41(7,"div",16)(8,"label",12)(9,"abbr",13),m.EFF(10,"* "),m.k0s(),m.nrm(11,"system-label",18),m.k0s(),m.j41(12,"system-input-password",15),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.loginDetails.password,t)||(s.loginDetails.password=t),m.Njj(t)})),m.k0s()()()}if(2&e){const e=m.XpG();m.R7$(6),m.R50("ngModel",e.loginDetails.username),m.R7$(6),m.R50("ngModel",e.loginDetails.password)}}function Ju(e,t){if(1&e&&(m.j41(0,"div",19),m.EFF(1),m.k0s()),2&e){const e=t.$implicit;m.R7$(),m.SpI("",e," ")}}let Wu=(()=>{class GitPullFromRepository{constructor(e,t,s){this.backend=e,this.toast=t,this.modal=s,this.loginFormChosen=[{label:"username",value:"username"},{label:"token",value:"token"}],this.loginDetails={username:"",password:"",token:"",loginOption:"token"},this.passwordCondition=!0,this.tokenCondition=!0,this.usernameCondition=!0,this.emailCondition=!0,this.pwRegexp=new RegExp("(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.{6,})"),this.gitHubTokenRegexp=new RegExp("^ghp_[a-zA-Z0-9]{36}$"),this.userRegexp=new RegExp("^[a-zA-Z0-9-]+$"),this.emailRegexp=new RegExp("^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$")}loginCheck(){this.passwordCondition=this.loginDetails.password.length>0&&this.pwRegexp.test(this.loginDetails.password),this.tokenCondition=this.loginDetails.token.length>0&&(this.gitHubTokenRegexp.test(this.loginDetails.token)||this.pwRegexp.test(this.loginDetails.token)),this.usernameCondition=this.userRegexp.test(this.loginDetails.username)||this.emailRegexp.test(this.loginDetails.username)}pullFromRepository(e){if(this.loginCheck(),"token"==this.loginDetails.loginOption)if(this.tokenCondition){let t=this.modal.await("LBL_LOADING");delete this.loginDetails.username,delete this.loginDetails.password,delete this.loginDetails.loginOption,this.backend.postRequest("admin/repair/pull",null,e).subscribe((e=>{this.data=e.output,t.emit(!0),this.toast.sendToast("LBL_DATA_SAVED","success")}))}else this.tokenCondition||this.toast.sendToast("token is empty or incorrect","error");else if("username"==this.loginDetails.loginOption)if(this.usernameCondition&&this.passwordCondition){let t=this.modal.await("LBL_LOADING");this.backend.postRequest("admin/repair/pull",null,e).subscribe((e=>{this.data=e.output,t.emit(!0),this.toast.sendToast("LBL_DATA_SAVED","success")}))}else this.usernameCondition||this.passwordCondition?this.usernameCondition?this.passwordCondition||this.toast.sendToast("password is empty or incorrect","error"):this.toast.sendToast("username is empty or incorrect","error"):this.toast.sendToast("username and password is empty or incorrect","error")}static#e=this.ɵfac=function(e){return new(e||GitPullFromRepository)(m.rXU(p.H),m.rXU(v.o),m.rXU(R.y))};static#t=this.ɵcmp=m.VBU({type:GitPullFromRepository,selectors:[["git-pull-from-repository"]],decls:13,vars:5,consts:[["titlelabel","LBL_PULL_FROM_GIT_REPOSITORY"],[1,"slds-button","slds-button_brand",3,"click"],["label","LBL_GIT_PULL"],[1,"slds-form-element__control","slds-p-around--small"],[1,"slds-text-heading--small","slds-p-around--small"],[1,"slds-form-element__control","slds-p-left--small"],[3,"ngModel","inputOptions","ngModelChange"],["class","slds-grid slds-grid--vertical-align-center slds-p-around--small",4,"ngIf","ngIfElse"],["username",""],["class","slds-form-element__control slds-p-around--small slds-scrollable--y slds-m-left_small",4,"ngFor","ngForOf"],[1,"slds-grid","slds-grid--vertical-align-center","slds-p-around--small"],[1,"slds-form-element__control","slds-size--2-of-4","slds-p-around--small"],[1,"slds-form-element__label"],[1,"slds-required"],["label","LBL_AUTH_TOKEN"],[3,"ngModel","ngModelChange"],[1,"slds-form-element__control","slds-size--1-of-4","slds-p-around--small"],["label","LBL_USER_NAME"],["label","LBL_PASSWORD"],[1,"slds-form-element__control","slds-p-around--small","slds-scrollable--y","slds-m-left_small"]],template:function(e,t){if(1&e&&(m.j41(0,"workbench-header",0)(1,"workbench-header-controls")(2,"button",1),m.bIt("click",(function(){return t.pullFromRepository(t.loginDetails)})),m.nrm(3,"system-label",2),m.k0s()()(),m.j41(4,"div",3)(5,"h3",4),m.EFF(6," Login Options "),m.k0s(),m.j41(7,"div",5)(8,"system-input-radio-button-group",6),m.mxI("ngModelChange",(function(e){return m.DH7(t.loginDetails.loginOption,e)||(t.loginDetails.loginOption=e),e})),m.k0s()()(),m.DNE(9,qu,7,1,"div",7)(10,Pu,13,2,"ng-template",null,8,m.C5r)(12,Ju,2,1,"div",9)),2&e){const e=m.sdS(11);m.R7$(8),m.R50("ngModel",t.loginDetails.loginOption),m.Y8G("inputOptions",t.loginFormChosen),m.R7$(),m.Y8G("ngIf","token"==t.loginDetails.loginOption)("ngIfElse",e),m.R7$(3),m.Y8G("ngForOf",t.data)}},dependencies:[i.Sq,i.bT,n.BC,n.vS,D.H,Ya.B,ju.s,x.W,Te,Ye],encapsulation:2})}return GitPullFromRepository})();function Ku(e,t){if(1&e&&(m.j41(0,"div",2),m.EFF(1),m.k0s()),2&e){const e=t.$implicit;m.R7$(),m.JRh(e)}}let Qu=(()=>{class GitStatusOfRepository{ngOnInit(){this.gitStatusRepository()}constructor(e,t,s){this.backend=e,this.toast=t,this.modal=s}gitStatusRepository(){let e=this.modal.await("LBL_LOADING");this.backend.postRequest("admin/repair/status",null).subscribe((t=>{this.data=t.output,e.emit(!0)}))}static#e=this.ɵfac=function(e){return new(e||GitStatusOfRepository)(m.rXU(p.H),m.rXU(v.o),m.rXU(R.y))};static#t=this.ɵcmp=m.VBU({type:GitStatusOfRepository,selectors:[["git-status-of-repository"]],decls:2,vars:1,consts:[["titlelabel","LBL_GIT_STATUS"],["class","slds-form-element__control slds-p-around--medium slds-scrollable--y",4,"ngFor","ngForOf"],[1,"slds-form-element__control","slds-p-around--medium","slds-scrollable--y"]],template:function(e,t){1&e&&(m.nrm(0,"workbench-header",0),m.DNE(1,Ku,2,1,"div",1)),2&e&&(m.R7$(),m.Y8G("ngForOf",t.data))},dependencies:[i.Sq,Te],encapsulation:2})}return GitStatusOfRepository})();var Zu=s(91768),eg=s(63755);const tg=["scrollContainer"],sg=["repairRow"];function ig(e,t){if(1&e&&m.nrm(0,"system-utility-icon",46),2&e){const e=m.XpG(2).$implicit;m.Y8G("title",e.sqlerror)}}function ng(e,t){if(1&e){const e=m.RV6();m.j41(0,"button",47),m.bIt("click",(function(){m.eBV(e);const t=m.XpG(2).$implicit,s=m.XpG(2);return m.Njj(s.openFixRequiredModal(t))})),m.nrm(1,"system-button-icon",48),m.k0s()}if(2&e){const e=m.XpG(4);m.Y8G("disabled",e.repairing)}}function lg(e,t){if(1&e){const e=m.RV6();m.j41(0,"div",40),m.DNE(1,ig,1,1,"system-utility-icon",41),m.j41(2,"div",42),m.EFF(3),m.k0s(),m.j41(4,"button",43),m.bIt("click",(function(){m.eBV(e);const t=m.XpG().$implicit,s=m.XpG(2);return m.Njj(s.copyToClipBoard(t.sql))})),m.nrm(5,"system-button-icon",44),m.k0s(),m.DNE(6,ng,2,1,"button",45),m.k0s()}if(2&e){const e=m.XpG().$implicit;m.R7$(),m.Y8G("ngIf",e.sqlerror),m.R7$(),m.Y8G("title",e.sql),m.R7$(),m.JRh(e.sql),m.R7$(3),m.Y8G("ngIf","columnsMismatch"==e.errorCode)}}function og(e,t){if(1&e){const e=m.RV6();m.j41(0,"button",47),m.bIt("click",(function(){m.eBV(e);const t=m.XpG(2).$implicit,s=m.XpG(2);return m.Njj(s.openFixRequiredModal(t))})),m.nrm(1,"system-button-icon",51),m.k0s()}if(2&e){const e=m.XpG(4);m.Y8G("disabled",e.repairing)}}function ag(e,t){if(1&e&&(m.j41(0,"div",49)(1,"div",50),m.EFF(2),m.k0s(),m.DNE(3,og,2,1,"button",45),m.k0s()),2&e){const e=m.XpG().$implicit;m.R7$(2),m.SpI(" ",e.error," "),m.R7$(),m.Y8G("ngIf","columnsMismatch"==e.errorCode)}}const dg=(e,t)=>({"slds-theme--info":e,"slds-theme--error":t});function rg(e,t){if(1&e){const e=m.RV6();m.j41(0,"tr",31,32)(2,"td"),m.nrm(3,"system-utility-icon",33),m.k0s(),m.j41(4,"td"),m.nrm(5,"system-utility-icon",33),m.k0s(),m.j41(6,"td")(7,"div",34),m.EFF(8),m.k0s()(),m.j41(9,"td")(10,"div",35),m.DNE(11,lg,7,4,"div",36)(12,ag,4,2,"div",37),m.j41(13,"div")(14,"button",38),m.bIt("click",(function(){const t=m.eBV(e).$implicit,s=m.XpG(2);return m.Njj(s.runSingleRepair(t))})),m.nrm(15,"system-button-icon",39),m.k0s()()()()()}if(2&e){const e=t.$implicit,s=m.XpG(2);m.Y8G("ngClass",m.l_i(9,dg,"p"==e.status,"e"==e.status)),m.R7$(3),m.Y8G("icon",s.getIcon(e.status))("colorclass",s.iconThemeClass(e)),m.R7$(2),m.Y8G("icon",s.getTypeIcon(e.type))("colorclass",s.iconThemeClass(e)),m.R7$(3),m.JRh(e.name),m.R7$(3),m.Y8G("ngIf","c"==e.status&&e.sql),m.R7$(),m.Y8G("ngIf","e"==e.status),m.R7$(2),m.Y8G("disabled",s.repairing||"p"==e.status)}}function cg(e,t){if(1&e){const e=m.RV6();m.j41(0,"div",52)(1,"div",53)(2,"div",54),m.nrm(3,"system-label",55),m.k0s(),m.j41(4,"div",56)(5,"div",57)(6,"system-checkbox",58),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG(2);return m.DH7(s.itemfilters.definitions,t)||(s.itemfilters.definitions=t),m.Njj(t)})),m.nrm(7,"system-label",59),m.k0s(),m.j41(8,"system-checkbox",58),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG(2);return m.DH7(s.itemfilters.relationships,t)||(s.itemfilters.relationships=t),m.Njj(t)})),m.nrm(9,"system-label",60),m.k0s()()(),m.j41(10,"div",54),m.nrm(11,"system-label",61),m.k0s(),m.j41(12,"div",56)(13,"div",57)(14,"system-checkbox",58),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG(2);return m.DH7(s.actions.fullreset,t)||(s.actions.fullreset=t),m.Njj(t)})),m.nrm(15,"system-label",62),m.k0s()()()()()}if(2&e){const e=m.XpG(2);m.R7$(6),m.Y8G("disabled",e.actions.fullreset),m.R50("ngModel",e.itemfilters.definitions),m.R7$(2),m.Y8G("disabled",e.actions.fullreset),m.R50("ngModel",e.itemfilters.relationships),m.R7$(6),m.Y8G("disabled",!e.itemfilters.definitions||!e.itemfilters.relationships),m.R50("ngModel",e.actions.fullreset)}}function mg(e,t){if(1&e){const e=m.RV6();m.j41(0,"button",63),m.bIt("click",(function(){m.eBV(e);const t=m.XpG(2);return m.Njj(t.start())})),m.nrm(1,"system-button-icon",39),m.k0s()}if(2&e){const e=m.XpG(2);m.Y8G("disabled",0==e.filtereddefinitions.length||e.itemfilters.erroneousDefinitions||e.itemfilters.alteredDefinitions)}}function ug(e,t){if(1&e){const e=m.RV6();m.j41(0,"button",64),m.bIt("click",(function(){m.eBV(e);const t=m.XpG(2);return m.Njj(t.stop())})),m.nrm(1,"system-button-icon",65),m.k0s()}if(2&e){const e=m.XpG(2);m.Y8G("disabled",e.stopped)}}function gg(e,t){if(1&e){const e=m.RV6();m.j41(0,"div",56)(1,"system-checkbox",21),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG(2);return m.DH7(s.itemfilters.erroneousDefinitions,t)||(s.itemfilters.erroneousDefinitions=t),m.Njj(t)})),m.nrm(2,"system-label",66),m.k0s(),m.j41(3,"system-checkbox",21),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG(2);return m.DH7(s.itemfilters.alteredDefinitions,t)||(s.itemfilters.alteredDefinitions=t),m.Njj(t)})),m.nrm(4,"system-label",67),m.k0s()()}if(2&e){const e=m.XpG(2);m.R7$(),m.Y8G("disabled",e.repairing),m.R50("ngModel",e.itemfilters.erroneousDefinitions),m.R7$(2),m.Y8G("disabled",e.repairing),m.R50("ngModel",e.itemfilters.alteredDefinitions)}}function hg(e,t){if(1&e){const e=m.RV6();m.j41(0,"button",68),m.bIt("click",(function(){m.eBV(e);const t=m.XpG(2);return m.Njj(t.copyAllToClipBoard())})),m.nrm(1,"system-button-icon",44),m.k0s()}if(2&e){const e=m.XpG(2);m.Y8G("disabled",e.repairing)}}const pg=e=>({"slds-is-selected":e});function fg(e,t){if(1&e){const e=m.RV6();m.j41(0,"system-modal",1)(1,"system-modal-header",2),m.bIt("close",(function(){m.eBV(e);const t=m.XpG();return m.Njj(t.close())})),m.nrm(2,"system-label",3),m.k0s(),m.j41(3,"system-modal-content",4)(4,"div",5,6)(6,"table",7)(7,"thead")(8,"tr",8),m.nrm(9,"th",9)(10,"th",9),m.j41(11,"th",10)(12,"div",11),m.nrm(13,"system-label",12),m.k0s()(),m.j41(14,"th",13)(15,"div",11),m.nrm(16,"system-label",14),m.k0s()()()(),m.j41(17,"tbody"),m.DNE(18,rg,16,12,"tr",15),m.k0s()()(),m.DNE(19,cg,16,6,"div",16),m.k0s(),m.j41(20,"system-modal-footer")(21,"div",17)(22,"div",18)(23,"button",19),m.bIt("click",(function(){m.eBV(e);const t=m.XpG();return m.Njj(t.displayDetailSetting=!t.displayDetailSetting)})),m.nrm(24,"system-button-icon",20),m.k0s(),m.j41(25,"system-checkbox",21),m.mxI("ngModelChange",(function(t){m.eBV(e);const s=m.XpG();return m.DH7(s.executerSQLs,t)||(s.executerSQLs=t),m.Njj(t)})),m.nrm(26,"system-label",22),m.k0s(),m.DNE(27,mg,2,1,"button",23)(28,ug,2,1,"button",24),m.nrm(29,"system-progress-bar",25),m.j41(30,"div"),m.EFF(31),m.k0s()(),m.j41(32,"div",26),m.DNE(33,gg,5,4,"div",27)(34,hg,2,1,"button",28),m.j41(35,"button",29),m.bIt("click",(function(){m.eBV(e);const t=m.XpG();return m.Njj(t.close())})),m.nrm(36,"system-label",30),m.k0s()()()()()}if(2&e){const e=m.XpG();m.R7$(18),m.Y8G("ngForOf",e.filtereddefinitions)("ngForTrackBy",e.trackByFn),m.R7$(),m.Y8G("ngIf",e.displayDetailSetting),m.R7$(4),m.Y8G("disabled",e.repairing)("ngClass",m.eq3(15,pg,e.displayDetailSetting)),m.R7$(2),m.Y8G("disabled",e.repairing),m.R50("ngModel",e.executerSQLs),m.R7$(2),m.Y8G("ngIf",!e.repairing),m.R7$(),m.Y8G("ngIf",e.repairing),m.R7$(),m.Y8G("progress",e.getProgress())("hideText",!0),m.R7$(2),m.Lme("",e.processedCount,"/",e.filtereddefinitions.length,""),m.R7$(2),m.Y8G("ngIf",e.processedCount>0),m.R7$(),m.Y8G("ngIf",e.canCopySQLs)}}let bg=(()=>{class DictionaryManagerRepairAll{constructor(e,t,s,i,n,l,o){this.dictionarymanager=e,this.backend=t,this.metadata=s,this.toast=i,this.modal=n,this.modelutilities=l,this.injector=o,this.currentRowIndex=0,this.loading=!0,this.definitions=[],this.stopped=!1,this.repairing=!1,this.executerSQLs=!1,this.displayDetailSetting=!1,this.itemfilters={definitions:!0,relationships:!0,erroneousDefinitions:!1,alteredDefinitions:!1},this.actions={fullreset:!0},this.getDefinitions()}get canCopySQLs(){return this.definitions.filter((e=>e.sql)).length>0}getDefinitions(){let e=this.modal.await("LBL_LOADING");this.backend.getRequest("dictionary/repair").subscribe({next:t=>{this.definitions=t.SpiceDictionaryDefinitions.map((e=>({id:e.id,type:"dictionarydefinition",name:e.tablename,status:"n",sql:"",error:""})));let s=t.VardefDictionaryDefinitions.map((e=>({id:e.dictionaryname,type:"vardefdefinition",name:e.table,status:"n",sql:"",error:""})));this.definitions=this.definitions.concat(s).sort(((e,t)=>e.name?.localeCompare(t.name)));let i=t.SpiceDictionaryRelationships.map((e=>({id:e.id,type:"dictionaryrelationship",name:e.relationship_name,template_sysdictionarydefinition_id:e.template_sysdictionarydefinition_id,referencing_sysdictionarydefinition_id:e.referencing_sysdictionarydefinition_id,original_id:e.original_id,status:"n",sql:"",error:""})));i=i.concat(t.VardefDictionaryRelationships.map((e=>({id:e.id,type:"vardefrelationship",name:e.relationship_name,dictionaryname:e.dictionaryname,status:"n",sql:"",error:""})))),this.definitions=this.definitions.concat(i.sort(((e,t)=>e.name?.localeCompare(t.name)))),this.loading=!1,e.emit(!0)},error:()=>{e.emit(!0)}})}get filtereddefinitions(){return this.definitions.filter((e=>{const t=this.itemfilters.alteredDefinitions&&(!!e.sql||"p"==e.status),s=this.itemfilters.erroneousDefinitions&&("e"==e.status||"p"==e.status);if((this.itemfilters.alteredDefinitions||this.itemfilters.erroneousDefinitions)&&!t&&!s)return!1;switch(e.type){case"dictionarydefinition":case"vardefdefinition":return this.itemfilters.definitions;case"vardefrelationship":case"dictionaryrelationship":return this.itemfilters.relationships}}))}trackByFn(e,t){return t.id}dictionaryrelationships(e){return this.dictionarymanager.dictionaryrelationships.filter((t=>"a"==t.status&&(t.lhs_sysdictionarydefinition_id==e||t.rhs_sysdictionarydefinition_id==e||t.join_sysdictionarydefinition_id==e))).sort(((e,t)=>e.name?.localeCompare(t.name)))}dictionaryRelationshipsForTemplates(e){let t=[];for(let s of this.dictionarymanager.dictionaryitems.filter((t=>"a"==t.status&&t.sysdictionary_ref_id&&t.sysdictionarydefinition_id==e))){let e=this.dictionarymanager.dictionaryrelationships.filter((e=>0==e.deleted&&(e.lhs_sysdictionarydefinition_id==s.sysdictionary_ref_id||e.rhs_sysdictionarydefinition_id==s.sysdictionary_ref_id)));e.length>0&&t.push({relatedTemplateId:s.sysdictionary_ref_id,relationships:e})}return t}getProgress(){if(0==this.definitions.length)return 0;let e=this.filtereddefinitions;return Math.round((e.length-e.filter((e=>"n"==e.status)).length)/e.length*100)}get processedCount(){return this.definitions.filter((e=>"n"!=e.status)).length}lineThemeClass(e){return"e"==e.status?"slds-theme--error":"p"==e.status?"slds-theme--info":"c"==e.status&&e.sql?"slds-theme--warning":"c"==e.status?"slds-theme--success":""}iconThemeClass(e){if("e"!=e.status)return"p"==e.status||"e"==e.status?"slds-icon-text-default":"c"==e.status&&e.sql?"slds-icon-text-warning":"c"==e.status?"slds-icon-text-success":"slds-icon-text-light"}start(){this.currentRowIndex=0,this.scrollContainer.nativeElement.scrollTo(0,0),this.displayDetailSetting=!1;let e=this.modal.await("LBL_RESETTING"),t={};this.actions.fullreset&&(t.fullreset=!0),this.backend.putRequest("dictionary/repair/reset",t).subscribe({next:()=>{this.definitions.forEach((e=>{e.status="n",e.sql="",e.sqlerror="",e.error=""})),this.handleNext(),this.repairing=!0,e.emit(!0)},error:()=>{this.toast.sendToast("ERROR resetting Backend","error"),e.emit(!0)}})}stop(){this.actions.fullreset?this.modal.confirm("MSG_WARNING_STOP_REPAIR_ALL_DICTIONARIES","MSG_WARNING_STOP_REPAIR_ALL_DICTIONARIES","warning").subscribe((e=>{e&&(this.stopped=!0)})):this.stopped=!0}handleNext(){if(this.trackScroll(),this.currentRowIndex++,this.stopped)return this.stopped=!1,void(this.repairing=!1);let e=this.filtereddefinitions.find((e=>"n"==e.status));if(e)switch(e.status="p",e.type){case"dictionarydefinition":case"vardefdefinition":this.repairDefinition(e);break;case"vardefrelationship":case"dictionaryrelationship":this.repairRelationship(e)}else this.repairing=!1}trackScroll(){if(!this.repairRow.get(this.currentRowIndex))return;const e=3*this.repairRow.get(this.currentRowIndex).nativeElement.getBoundingClientRect().height,t=this.repairRow.get(this.currentRowIndex).nativeElement.offsetTop+e,s=this.scrollContainer.nativeElement.getBoundingClientRect().height;t<s||this.scrollContainer.nativeElement.scrollTo(0,t-s)}repairDefinition(e,t=!0){let s={};this.executerSQLs&&(s.execute=!0);let i="vardefdefinition"==e.type?"vardef":"definition";this.backend.putRequest(`dictionary/repair/${i}/${e.id}`,s).subscribe({next:s=>{s?(e.status="c",e.sql=s.sql,e.sqlerror=s.sqlerror,e.errorDetails=s.errorDetails,e.errorCode=s.errorCode):e.status="e",t&&this.handleNext()},error:s=>{e.status="e",e.error=s.error?.error?.message,e.errorDetails=s.error?.error?.details,e.errorCode=s.error?.error?.errorCode,t&&this.handleNext()}})}repairRelationship(e,t=!0){let s={},i=e.original_id?e.original_id:e.id;e.referencing_sysdictionarydefinition_id&&(s.referencing_sysdictionarydefinition_id=e.referencing_sysdictionarydefinition_id,s.template_sysdictionarydefinition_id=e.template_sysdictionarydefinition_id);let n="dictionaryrelationship"==e.type?`dictionary/repair/relationship/${i}`:`dictionary/repair/relationship/${e.dictionaryname}/${e.name}`;this.backend.putRequest(n,s).subscribe({next:s=>{e.status=s?"c":"e",t&&this.handleNext()},error:s=>{e.status="e",e.error=s.error?.error?.message,e.errorDetails=s.error?.error?.details,e.errorCode=s.error?.error?.errorCode,t&&this.handleNext()}})}getIcon(e){switch(e){case"p":return"clock";case"c":return"success";case"e":return"error";default:return"orders"}}getTypeIcon(e){switch(e){case"dictionaryrelationship":return"link";case"vardefdefinition":return"file";case"dictionarydefinition":return"database";case"vardefrelationship":return"knowledge_smart_link"}}execute(e){this.modal.confirm(e.sql,"LBL_EXECUTE").subscribe({next:t=>{if(t){let t=this.modal.await("LBL_EXECUTING"),s=Zu.VV.hashStr(e.sql);this.backend.postRequest(`dictionary/repair/sqls/${s}`).subscribe({next:s=>{s.error&&this.toast.sendToast("LBL_SQL_ERROR","error",s.error),t.emit(!0),e.status="p",this.repairDefinition(e,!1)},error:e=>{this.toast.sendToast("LBL_ERROR","error",e.error.error.message),t.emit(!0)}})}}})}copyToClipBoard(e){navigator.clipboard.writeText(e),this.toast.sendToast("LBL_COPIED_TO_CLIPBOARD","info")}copyAllToClipBoard(){navigator.clipboard.writeText(this.definitions.filter((e=>e.sql)).map((e=>e.sql)).join("\r\n")),this.toast.sendToast("LBL_COPIED_TO_CLIPBOARD","info")}close(){this.stopped=!0,this.self.destroy()}openFixRequiredModal(e){this.modal.openStaticModal(eg.p).subscribe((t=>{t.instance.dictionaryName=Object.keys(e.errorDetails)[0],t.instance.mismatch=e.errorDetails,t.instance.response.subscribe({next:t=>{t&&this.runSingleRepair(e)}})}))}runSingleRepair(e){switch(e.status="p",e.type){case"dictionarydefinition":case"vardefdefinition":this.repairDefinition(e,!1);break;case"vardefrelationship":case"dictionaryrelationship":this.repairRelationship(e,!1)}}static#e=this.ɵfac=function(e){return new(e||DictionaryManagerRepairAll)(m.rXU(j),m.rXU(p.H),m.rXU(f.yu),m.rXU(v.o),m.rXU(R.y),m.rXU(y.g),m.rXU(m.zZn))};static#t=this.ɵcmp=m.VBU({type:DictionaryManagerRepairAll,selectors:[["dictionary-manager-repair-all"]],viewQuery:function(e,t){if(1&e&&(m.GBs(tg,5,m.aKT),m.GBs(sg,5)),2&e){let e;m.mGM(e=m.lsd())&&(t.scrollContainer=e.first),m.mGM(e=m.lsd())&&(t.repairRow=e)}},decls:1,vars:1,consts:[["size","large",4,"ngIf"],["size","large"],[3,"close"],["label","LBL_REPAIR_ALL"],["margin","none"],[1,"slds-scrollable--y",2,"height","80vh"],["scrollContainer",""],[1,"slds-table","slds-table--header-fixed","slds-table--fixed-layout","slds-table_bordered"],[1,"slds-line-height_reset"],["scope","col",2,"width","2rem"],["scope","col",2,"width","15rem"],[1,"slds-truncate","slds-p-around--x-small"],["label","LBL_NAME"],["scope","col",1,""],["label","LBL_SQL"],["class","slds-hint-parent spice-hover-display-children",3,"ngClass",4,"ngFor","ngForOf","ngForTrackBy"],["class","slds-is-absolute slds-theme--shade slds-size--1-of-2 slds-box--border","style","bottom:5px; left: 5px;",4,"ngIf"],[1,"slds-grid","slds-grid_vertical-align-center","slds-grid--align-spread"],[1,"slds-size--1-of-2","slds-grid","slds-grid_vertical-align-center"],["system-title","LBL_DETAILS",1,"slds-button","slds-button--icon","slds-button--icon-border",3,"disabled","ngClass","click"],["icon","settings"],[1,"slds-p-around--xx-small",3,"disabled","ngModel","ngModelChange"],["label","LBL_EXECUTE_SQLS"],["class","slds-button slds-button--icon","system-title","LBL_START",3,"disabled","click",4,"ngIf"],["class","slds-button slds-button--icon",3,"disabled","click",4,"ngIf"],[1,"slds-grow","slds-m-horizontal--x-small",3,"progress","hideText"],[1,"slds-size--1-of-2","slds-grid","slds-grid--align-end"],["class","slds-grid",4,"ngIf"],["class","slds-button slds-button--icon-border",3,"disabled","click",4,"ngIf"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CLOSE"],[1,"slds-hint-parent","spice-hover-display-children",3,"ngClass"],["repairRow",""],["size","xx-small",3,"icon","colorclass"],[1,"slds-truncate"],[1,"slds-grid","slds-grid--align-end"],["class","slds-grid slds-grid_vertical-align-center slds-grow","style","min-width: 0",4,"ngIf"],["class","slds-grid slds-grow","style","min-width: 0",4,"ngIf"],["system-title","LBL_RUN_NOW",1,"slds-button","slds-button--icon","slds-m-horizontal--xx-small","spice-hover-child",3,"disabled","click"],["icon","play"],[1,"slds-grid","slds-grid_vertical-align-center","slds-grow",2,"min-width","0"],["class","slds-m-right--xx-small","icon","warning","colorclass","slds-icon-text-error",3,"title",4,"ngIf"],[1,"slds-truncate","slds-grow",2,"min-width","0",3,"title"],[1,"slds-button","slds-button--icon","slds-m-horizontal--xx-small",3,"click"],["icon","copy"],["system-title","LBL_FIX_DB_FIELDS_MISMATCH","class","slds-button slds-button--icon slds-m-horizontal--xx-small",3,"disabled","click",4,"ngIf"],["icon","warning","colorclass","slds-icon-text-error",1,"slds-m-right--xx-small",3,"title"],["system-title","LBL_FIX_DB_FIELDS_MISMATCH",1,"slds-button","slds-button--icon","slds-m-horizontal--xx-small",3,"disabled","click"],["icon","data_transforms"],[1,"slds-grid","slds-grow",2,"min-width","0"],[1,"slds-truncate","slds-grow",2,"min-width","0"],["icon","data_transforms","addclasses","slds-button--icon-inverse"],[1,"slds-is-absolute","slds-theme--shade","slds-size--1-of-2","slds-box--border",2,"bottom","5px","left","5px"],[1,"slds-m-around--small"],[1,"slds-m-vertical--x-small","slds-text-heading--small"],["label","LBL_FILTER"],[1,"slds-grid"],[1,"slds-size--1-of-2","slds-grid","slds-grid_vertical"],[3,"disabled","ngModel","ngModelChange"],["label","LBL_DICTIONARYDEFINITIONS"],["label","LBL_DICTIONARYRELATIONSHIPS"],["label","LBL_SETTINGS"],["label","LBL_FULLRESET"],["system-title","LBL_START",1,"slds-button","slds-button--icon",3,"disabled","click"],[1,"slds-button","slds-button--icon",3,"disabled","click"],["icon","stop"],["label","LBL_ERRONEOUS_DEFINITIONS"],["label","LBL_ALTERED_DEFINITIONS"],[1,"slds-button","slds-button--icon-border",3,"disabled","click"]],template:function(e,t){1&e&&m.DNE(0,fg,37,17,"system-modal",0),2&e&&m.Y8G("ngIf",!t.loading)},dependencies:[i.YU,i.Sq,i.bT,n.BC,n.vS,L.t,be.f,x.W,qe.D,Pe.I,Je.Q,We.C,Jd.Y,u.B,w.L],encapsulation:2})}return DictionaryManagerRepairAll})(),yg=(()=>{class DictionaryManagerRelationshipAddEmailAddress{constructor(e,t,s,i,n,l,o){this.dictionarymanager=e,this.backend=t,this.metadata=s,this.language=i,this.modal=n,this.injector=l,this.modelutilities=o,this.type=null,this.relationship={id:this.modelutilities.generateGuid(),name:"",scope:"c",relationship_name:"",lhs_sysdictionarydefinition_id:"",lhs_sysdictionaryitem_id:"",lhs_linkname:"",lhs_linklabel:"",lhs_duplicatemerge:1,rhs_sysdictionarydefinition_id:"",rhs_sysdictionaryitem_id:"",rhs_linkname:"",rhs_linklabel:"",rhs_duplicatemerge:0,rhs_relatename:"",rhs_relatelabel:"",relationship_type:"",deleted:0,status:"d"}}ngOnInit(){this.setDefaults()}get relatedIds(){return this.dictionarymanager.dictionarydefinitions.filter((e=>"module"==e.sysdictionary_type)).sort(((e,t)=>e.name.localeCompare(t.name)))}setDefaults(){this.relationship.relationship_type=this.type.name;let e=this.dictionarymanager.dictionarydefinitions.find((e=>e.id==this.dictionarymanager.currentDictionaryDefinition));this.relationship.lhs_sysdictionarydefinition_id=e.id,this.relationship.name="email_addresses",this.relationship.relationship_name=this.dictionarymanager.dictionarydefinitions.find((e=>e.id==this.relationship.lhs_sysdictionarydefinition_id)).tablename.toLowerCase()+"_email_addresses";let t=this.dictionarymanager.getDictionaryDefinitionItems(this.relationship.lhs_sysdictionarydefinition_id).find((e=>"id"==e.name));t&&(this.relationship.lhs_sysdictionaryitem_id=t.id)}close(){this.self.destroy()}add(){this.backend.postRequest(`dictionary/relationship/${this.relationship.id}`,{},{relationship:this.relationship}).subscribe({next:e=>{this.dictionarymanager.pushNewRelationshipToArray(this.relationship),this.close()}})}static#e=this.ɵfac=function(e){return new(e||DictionaryManagerRelationshipAddEmailAddress)(m.rXU(j),m.rXU(p.H),m.rXU(f.yu),m.rXU(b.B),m.rXU(R.y),m.rXU(m.zZn),m.rXU(y.g))};static#t=this.ɵcmp=m.VBU({type:DictionaryManagerRelationshipAddEmailAddress,selectors:[["dictionary-manager-relationship-add-emailaddress"]],decls:10,vars:1,consts:[[3,"close"],["label","LBL_EMAIL_ADDRESS"],[3,"relationship"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_ADD"]],template:function(e,t){1&e&&(m.j41(0,"system-modal")(1,"system-modal-header",0),m.bIt("close",(function(){return t.close()})),m.nrm(2,"system-label",1),m.k0s(),m.j41(3,"system-modal-content"),m.nrm(4,"dictionary-manager-relationship-container-emailaddress",2),m.k0s(),m.j41(5,"system-modal-footer")(6,"button",3),m.bIt("click",(function(){return t.close()})),m.nrm(7,"system-label",4),m.k0s(),m.j41(8,"button",5),m.bIt("click",(function(){return t.add()})),m.nrm(9,"system-label",6),m.k0s()()()),2&e&&(m.R7$(4),m.Y8G("relationship",t.relationship))},dependencies:[x.W,qe.D,Pe.I,Je.Q,We.C,is],encapsulation:2})}return DictionaryManagerRelationshipAddEmailAddress})();function _g(e,t){if(1&e&&(m.j41(0,"option",10),m.EFF(1),m.k0s()),2&e){const e=t.$implicit;m.Y8G("ngValue",e.id),m.R7$(),m.JRh(e.name)}}let kg=(()=>{class DictionaryManagerCloneDefinitionModal{constructor(e,t,s,i){this.dictionarymanager=e,this.backend=t,this.modal=s,this.modelutilities=i}get definitions(){return this.dictionarymanager.dictionarydefinitions.filter((e=>!!e.name&&e.id!=this.dictionarymanager.currentDictionaryDefinition)).sort(((e,t)=>e.name.localeCompare(t.name)))}save(){let e=[];for(let t of this.dictionarymanager.dictionaryitems.filter((e=>e.sysdictionarydefinition_id==this.definition))){let s=JSON.parse(JSON.stringify(t));s.id=this.modelutilities.generateGuid(),s.sysdictionarydefinition_id=this.dictionarymanager.currentDictionaryDefinition,s.status="d",e.push(s)}if(e.length>0){let t=this.modal.await("LBL_SAVING");this.backend.postRequest("dictionary/items",{},{items:e}).subscribe({next:()=>{this.dictionarymanager.dictionaryitems=this.dictionarymanager.dictionaryitems.concat(e),t.emit(!0),this.close()},error:e=>{t.emit(!0)}})}}close(){this.self.destroy()}static#e=this.ɵfac=function(e){return new(e||DictionaryManagerCloneDefinitionModal)(m.rXU(j),m.rXU(p.H),m.rXU(R.y),m.rXU(y.g))};static#t=this.ɵcmp=m.VBU({type:DictionaryManagerCloneDefinitionModal,selectors:[["dictionary-manager-clone-definition-modal"]],decls:14,vars:2,consts:[[3,"close"],[1,"slds-form-element__label"],["label","LBL_DEFINITION"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CLOSE"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_SAVE"],[3,"ngValue"]],template:function(e,t){1&e&&(m.j41(0,"system-modal")(1,"system-modal-header",0),m.bIt("close",(function(){return t.close()})),m.EFF(2,"Clone Dictionary Definition"),m.k0s(),m.j41(3,"system-modal-content")(4,"label",1),m.nrm(5,"system-label",2),m.k0s(),m.j41(6,"div",3)(7,"select",4),m.mxI("ngModelChange",(function(e){return m.DH7(t.definition,e)||(t.definition=e),e})),m.DNE(8,_g,2,2,"option",5),m.k0s()()(),m.j41(9,"system-modal-footer")(10,"button",6),m.bIt("click",(function(){return t.close()})),m.nrm(11,"system-label",7),m.k0s(),m.j41(12,"button",8),m.bIt("click",(function(){return t.save()})),m.nrm(13,"system-label",9),m.k0s()()()),2&e&&(m.R7$(7),m.R50("ngModel",t.definition),m.R7$(),m.Y8G("ngForOf",t.definitions))},dependencies:[i.Sq,n.xH,n.y7,n.wz,n.BC,n.vS,x.W,qe.D,Pe.I,Je.Q,We.C],encapsulation:2})}return DictionaryManagerCloneDefinitionModal})();function vg(e,t){if(1&e&&(m.j41(0,"option",15),m.EFF(1),m.k0s()),2&e){const e=t.$implicit;m.Y8G("value",e),m.R7$(),m.JRh(e)}}let Rg=(()=>{class HooksManager{constructor(e){this.metadata=e,this.activeTab="logic",this._module="*",this.hooksManager=[{label:"Logic Hooks",value:"logic"},{label:"Web Hooks",value:"web"}],this.modules=this.metadata.getModules(),this.modules.sort()}get module(){return this._module}set module(e){e!=this._module&&(this._module=e)}static#e=this.ɵfac=function(e){return new(e||HooksManager)(m.rXU(f.yu))};static#t=this.ɵcmp=m.VBU({type:HooksManager,selectors:[["hooks-manager"]],decls:18,vars:4,consts:[["titlelabel","LBL_HOOKS_MANAGER"],[1,"slds-form-element__control","slds-grid","slds-p-left--small"],[1,"slds-p-right--small"],[1,"slds-form-element","slds-grid","slds-grid--vertical-align-center","slds-size--4-of-4"],["for","moduleselect",1,"slds-form-element__label"],["label","LBL_MODULE"],[1,"slds-form-element__control"],[1,"slds-select_container"],["id","moduleselect",1,"slds-select",3,"ngModel","ngModelChange"],["value","*"],[3,"value",4,"ngFor","ngForOf"],[1,"slds-tabs_default",2,"background-color","transparent"],[1,"slds-grid",3,"ngClass"],[1,"slds-size--1-of-1"],[3,"ngClass"],[3,"value"]],template:function(e,t){1&e&&(m.j41(0,"workbench-header",0)(1,"workbench-header-controls")(2,"div",1)(3,"div",2)(4,"div",3)(5,"label",4),m.nrm(6,"system-label",5),m.k0s(),m.j41(7,"div",6)(8,"div",7)(9,"select",8),m.mxI("ngModelChange",(function(e){return m.DH7(t.module,e)||(t.module=e),e})),m.j41(10,"option",9),m.EFF(11,"*"),m.k0s(),m.DNE(12,vg,2,2,"option",10),m.k0s()()()()()()()(),m.j41(13,"div",11)(14,"div",12),m.nrm(15,"hooks-manager-hooks",13),m.k0s(),m.j41(16,"div",14),m.nrm(17,"web-hooks-manager",13),m.k0s()()),2&e&&(m.R7$(9),m.R50("ngModel",t.module),m.R7$(3),m.Y8G("ngForOf",t.modules),m.R7$(2),m.Y8G("ngClass","logic"==t.activeTab?"slds-show":"slds-hide"),m.R7$(2),m.Y8G("ngClass","web"==t.activeTab?"slds-show":"slds-hide"))},encapsulation:2})}return HooksManager})();function Mg(e,t){1&e&&(m.j41(0,"div",23),m.nrm(1,"system-spinner"),m.k0s())}function jg(e,t){if(1&e){const e=m.RV6();m.j41(0,"tr",24)(1,"td",6),m.nrm(2,"system-utility-icon",25),m.j41(3,"system-utility-icon",26),m.bIt("click",(function(t){const s=m.eBV(e).$implicit,i=m.XpG();return m.Njj(i.toggleValue(t,s))})),m.k0s()(),m.j41(4,"td",27)(5,"div",7),m.EFF(6),m.k0s()(),m.j41(7,"td",27)(8,"div",7),m.EFF(9),m.k0s()(),m.j41(10,"td",28)(11,"div",7),m.EFF(12),m.k0s()(),m.j41(13,"td",27)(14,"div",29),m.EFF(15),m.k0s()(),m.j41(16,"td",27)(17,"div",7),m.EFF(18),m.k0s()(),m.j41(19,"td",30)(20,"button",31),m.bIt("click",(function(){const t=m.eBV(e).$implicit,s=m.XpG();return m.Njj(s.editHook(t.id))})),m.nrm(21,"system-button-icon",32),m.k0s(),m.j41(22,"button",31),m.bIt("click",(function(){const t=m.eBV(e).$implicit,s=m.XpG();return m.Njj(s.deleteHook(t.id))})),m.nrm(23,"system-button-icon",33),m.k0s()()()}if(2&e){const e=t.$implicit,s=m.XpG();m.R7$(2),m.Y8G("icon","global"==e.type?"world":"people"),m.R7$(),m.Y8G("colorclass",s.getStatusColor(e)),m.R7$(3),m.JRh(e.module),m.R7$(3),m.JRh(e.event),m.R7$(3),m.JRh(e.hook_index),m.R7$(3),m.JRh(e.hook_class),m.R7$(3),m.JRh(e.hook_method)}}let Lg=(()=>{class HooksManagerHooks{constructor(e,t,s,i,n,l,o,a){this.backend=e,this.language=t,this.metadata=s,this.modelutilities=i,this.toast=n,this.modal=l,this.hooksManager=o,this.injector=a,this.loading=!1,this.hooks=[]}ngOnInit(){this.getLogicHooks()}getLogicHooks(){this.loading=!0,this.backend.getRequest("configuration/spiceui/core/module/hooks").subscribe((e=>{this.hooks=e,this.loading=!1}))}get allModuleHooks(){return"*"==this.hooksManager._module?this.hooks:this.hooks.filter((e=>e.module==this.hooksManager.module))}deleteHook(e){this.modal.confirm("MSG_DELETE_RECORD","MSG_DELETE_RECORD").subscribe({next:t=>{if(t){const t=this.hooks.find((t=>t.id==e)),s="global"==t.type?"syshooks":"syscustomhooks";this.backend.deleteRequest(`configuration/configurator/${s}/${t.id}`).subscribe((()=>{this.toast.sendToast("MSG_SUCCESSFULLY_DELETED","success")})),this.hooks=this.hooks.filter((e=>e.id!=t.id))}}})}editHook(e){const t=this.hooks.find((t=>t.id==e));this.openEditHookModal(t)}openEditHookModal(e){this.modal.openModal("HooksManagerHooksEditModal",!0,this.injector).subscribe((t=>{t.instance.newLogicHook.module=this.hooksManager.module;const s=this.hooks.indexOf(e);e&&(t.instance.newLogicHook={...e}),t.instance.save$.subscribe({next:t=>{e?this.hooks.splice(s,1,t):this.hooks.push(t)}})}))}addLogicHook(){this.openEditHookModal()}getStatusColor(e){return 1==e.hook_active?"slds-icon-text-success":0==e.hook_active?"slds-icon-text-light":void 0}toggleValue(e,t){e.stopPropagation();const s=1==t.hook_active?"MSG_DEACTIVATE":"MSG_ACTIVATE",i=1==t.hook_active?"LBL_DEACTIVATED":"LBL_ACTIVATED";this.modal.confirm(s,s).subscribe({next:e=>{if(e){t.hook_active=1==t.hook_active?0:1;const e="global"==t.type?"syshooks":"syscustomhooks",s={...t};delete s.type,this.backend.postRequest(`configuration/configurator/${e}/${t.id}`,null,{config:s}).subscribe({next:()=>{this.toast.sendToast(i,"success")}})}}})}static#e=this.ɵfac=function(e){return new(e||HooksManagerHooks)(m.rXU(p.H),m.rXU(b.B),m.rXU(f.yu),m.rXU(y.g),m.rXU(v.o),m.rXU(R.y),m.rXU(Rg),m.rXU(m.zZn))};static#t=this.ɵcmp=m.VBU({type:HooksManagerHooks,selectors:[["hooks-manager-hooks"]],decls:31,vars:2,consts:[["system-to-bottom-noscroll",""],["class","slds-align--absolute-center slds-height_full",4,"ngIf"],[1,"slds-tabs_default",2,"background-color","transparent"],["system-to-bottom","",1,"slds-size--4-of-4","slds-scrollable--y"],[1,"slds-table","slds-table--bordered","slds-table--cell-buffer","slds-table--fixed-layout","slds-text-align_center","slds-table--header-fixed"],[1,""],["scope","col",1,"slds-text-align_left",2,"width","5rem"],[1,"slds-truncate"],["scope","col",1,"slds-text-align_left"],[1,"slds-truncate","slds-m-left--x-small","slds-m-vertical--xx-small"],["label","LBL_MODULE"],[1,"slds-truncate","slds-m-left--x-small"],["label","LBL_EVENT"],["scope","col",1,"slds-text-align_center",2,"width","5rem"],["label","LBL_INDEX"],["scope","col",1,"slds-text-align_left",2,"width","40rem"],["label","LBL_CLASS"],["label","LBL_METHOD"],["scope","col",1,"slds-text-align_right"],["class","slds-hint-parent",4,"ngFor","ngForOf"],[1,"slds-p-around--x-small"],[1,"slds-align--absolute-center","slds-button","slds-button--icon",2,"border-radius","50%",3,"click"],["icon","add","size","medium"],[1,"slds-align--absolute-center","slds-height_full"],[1,"slds-hint-parent"],["size","x-small",1,"slds-p-right--small",3,"icon"],["size","xx-small","icon","light_bulb",1,"slds-p-right--xx-small","slds-button","slds-button--icon","slds-col_bump-left",3,"colorclass","click"],[1,"slds-text-align_left"],[1,"slds-text-align_center",2,"width","5rem"],[1,"slds-wrap"],[1,"slds-text-align_right"],[1,"slds-button","slds-button--icon","slds-col_bump-left","--slds-c-button-color-border",3,"click"],["icon","edit"],["icon","clear"]],template:function(e,t){1&e&&(m.j41(0,"div",0),m.DNE(1,Mg,2,0,"div",1),m.j41(2,"div",2)(3,"div",3)(4,"table",4)(5,"thead")(6,"tr",5)(7,"th",6),m.nrm(8,"div",7),m.k0s(),m.j41(9,"th",8)(10,"div",9),m.nrm(11,"system-label",10),m.k0s()(),m.j41(12,"th",8)(13,"div",11),m.nrm(14,"system-label",12),m.k0s()(),m.j41(15,"th",13)(16,"div",7),m.nrm(17,"system-label",14),m.k0s()(),m.j41(18,"th",15)(19,"div",11),m.nrm(20,"system-label",16),m.k0s()(),m.j41(21,"th",8)(22,"div",11),m.nrm(23,"system-label",17),m.k0s()(),m.j41(24,"th",18),m.nrm(25,"div",7),m.k0s()()(),m.j41(26,"tbody"),m.DNE(27,jg,24,7,"tr",19),m.k0s()(),m.j41(28,"div",20)(29,"button",21),m.bIt("click",(function(){return t.addLogicHook()})),m.nrm(30,"system-button-icon",22),m.k0s()()()()()),2&e&&(m.R7$(),m.Y8G("ngIf",t.loading),m.R7$(26),m.Y8G("ngForOf",t.allModuleHooks))},dependencies:[i.Sq,i.bT,L.t,x.W,Eo.P,u.B,F.b,T.p],encapsulation:2})}return HooksManagerHooks})();function xg(e,t){if(1&e&&(m.j41(0,"option",27),m.EFF(1),m.k0s()),2&e){const e=t.$implicit;m.Y8G("value",e),m.R7$(),m.JRh(e)}}let Ig=(()=>{class HooksManagerHooksEditModal{constructor(e,t,s,i,n,l){this.backend=e,this.language=t,this.metadata=s,this.modelutilities=i,this.toast=n,this.modal=l,this.hooks=[],this.events=["before_relationship_add","after_relationship_add","before_relationship_delete","after_relationship_delete","before_save","after_save","before_retrieve","after_retrieve","before_delete","after_delete","before_restore","after_restore","after_save_completed","before_logout"],this.classMethod="",this.newLogicHook={id:"",module:"",type:"custom",event:"before_relationship_add",hook_include:"",hook_index:0,hook_class:"",hook_method:"",hook_active:1,description:"",version:"",package:""},this.save$=new h.B,this.radioOptions=[{label:"custom",value:"custom"},{label:"global",value:"global"}]}ngOnInit(){this.newLogicHook.hook_class&&this.newLogicHook.hook_method&&(this.classMethod=`${this.newLogicHook.hook_class}->${this.newLogicHook.hook_method}`)}close(){this.self.destroy()}canSave(){return!!(this.newLogicHook.module&&this.newLogicHook.event&&this.newLogicHook.package&&this.newLogicHook.version&&this.classMethod)}saveHook(){this.newLogicHook.id||(this.newLogicHook.id=this.modelutilities.generateGuid()),this.newLogicHook.type||(this.newLogicHook.type="custom");const e="custom"==this.newLogicHook.type?"syscustomhooks":"syshooks";if([this.newLogicHook.hook_class,this.newLogicHook.hook_method]=this.classMethod.split("->"),this.newLogicHook.hook_method){const t={...this.newLogicHook};delete t.type;let s=this.modal.await("LBL_LOADING");this.backend.postRequest(`configuration/configurator/${e}/${this.newLogicHook.id}`,null,{config:t}).subscribe({next:()=>{this.save$.next(this.newLogicHook),this.save$.complete(),s.emit(!0),this.toast.sendToast("LBL_DATA_SAVED","success")}}),this.self.destroy()}else this.toast.sendToast("LBL_METHOD_EMPTY","warning")}static#e=this.ɵfac=function(e){return new(e||HooksManagerHooksEditModal)(m.rXU(p.H),m.rXU(b.B),m.rXU(f.yu),m.rXU(y.g),m.rXU(v.o),m.rXU(R.y))};static#t=this.ɵcmp=m.VBU({type:HooksManagerHooksEditModal,selectors:[["hooks-manager-hooks-edit-modal"]],decls:60,vars:12,consts:[[3,"close"],["label","LBL_LOGIC_HOOK"],[1,"slds-grid"],[1,"slds-form-element__control","slds-size--1-of-4","slds-p-right--xxx-small"],[1,"slds-form-element__label"],[1,"slds-required"],["label","LBL_SCOPE"],[1,"slds-form-element__control"],[3,"ngModel","inputOptions","disabled","ngModelChange"],["label","LBL_MODULE"],[3,"ngModel","ngModelChange"],["label","LBL_EVENT"],["id","eventselect",1,"slds-select",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["label","LBL_INDEX"],[1,"slds-form-element__control","slds-size--4-of-4"],["label","LBL_CLASS"],[1,"slds-form-element__control","slds-size--4-of-4","slds-p-right--xxx-small"],["label","LBL_DESCRIPTION"],[1,"slds-textarea","slds-scrollable--y","slds-m-vertical--xx-small","ng-untouched","ng-pristine","ng-valid",2,"min-height","80px","max-height","300px","height","80px",3,"ngModel","ngModelChange"],[1,"slds-form-element__control","slds-size--2-of-4","slds-p-right--xxx-small"],["label","LBL_VERSION"],["label","LBL_PACKAGE"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CLOSE"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_SAVE"],[3,"value"]],template:function(e,t){1&e&&(m.j41(0,"system-modal")(1,"system-modal-header",0),m.bIt("close",(function(){return t.close()})),m.nrm(2,"system-label",1),m.k0s(),m.j41(3,"system-modal-content")(4,"div",2)(5,"div",3)(6,"label",4)(7,"abbr",5),m.EFF(8,"* "),m.k0s(),m.nrm(9,"system-label",6),m.k0s(),m.j41(10,"div",7)(11,"system-input-radio-button-group",8),m.mxI("ngModelChange",(function(e){return m.DH7(t.newLogicHook.type,e)||(t.newLogicHook.type=e),e})),m.k0s()()(),m.j41(12,"div",3)(13,"label",4)(14,"abbr",5),m.EFF(15,"*"),m.k0s(),m.nrm(16,"system-label",9),m.k0s(),m.j41(17,"system-input-module",10),m.mxI("ngModelChange",(function(e){return m.DH7(t.newLogicHook.module,e)||(t.newLogicHook.module=e),e})),m.k0s()(),m.j41(18,"div",3)(19,"label",4)(20,"abbr",5),m.EFF(21,"* "),m.k0s(),m.nrm(22,"system-label",11),m.k0s(),m.j41(23,"select",12),m.mxI("ngModelChange",(function(e){return m.DH7(t.newLogicHook.event,e)||(t.newLogicHook.event=e),e})),m.DNE(24,xg,2,2,"option",13),m.k0s()(),m.j41(25,"div",3)(26,"label",4)(27,"abbr",5),m.EFF(28,"* "),m.k0s(),m.nrm(29,"system-label",14),m.k0s(),m.j41(30,"system-input-text",10),m.mxI("ngModelChange",(function(e){return m.DH7(t.newLogicHook.hook_index,e)||(t.newLogicHook.hook_index=e),e})),m.k0s()()(),m.j41(31,"div",2)(32,"div",15)(33,"label",4)(34,"abbr",5),m.EFF(35,"* "),m.k0s(),m.nrm(36,"system-label",16),m.k0s(),m.j41(37,"system-input-backend-method",10),m.mxI("ngModelChange",(function(e){return m.DH7(t.classMethod,e)||(t.classMethod=e),e})),m.k0s()()(),m.j41(38,"div",17)(39,"label",4),m.nrm(40,"system-label",18),m.k0s(),m.j41(41,"textarea",19),m.mxI("ngModelChange",(function(e){return m.DH7(t.newLogicHook.description,e)||(t.newLogicHook.description=e),e})),m.k0s()(),m.j41(42,"div",2)(43,"div",20)(44,"label",4)(45,"abbr",5),m.EFF(46,"* "),m.k0s(),m.nrm(47,"system-label",21),m.k0s(),m.j41(48,"system-input-text",10),m.mxI("ngModelChange",(function(e){return m.DH7(t.newLogicHook.version,e)||(t.newLogicHook.version=e),e})),m.k0s()(),m.j41(49,"div",20)(50,"label",4)(51,"abbr",5),m.EFF(52,"* "),m.k0s(),m.nrm(53,"system-label",22),m.k0s(),m.j41(54,"system-input-text",10),m.mxI("ngModelChange",(function(e){return m.DH7(t.newLogicHook.package,e)||(t.newLogicHook.package=e),e})),m.k0s()()()(),m.j41(55,"system-modal-footer")(56,"button",23),m.bIt("click",(function(){return t.close()})),m.nrm(57,"system-label",24),m.k0s(),m.j41(58,"button",25),m.bIt("click",(function(){return t.saveHook()})),m.nrm(59,"system-label",26),m.k0s()()()),2&e&&(m.R7$(11),m.R50("ngModel",t.newLogicHook.type),m.Y8G("inputOptions",t.radioOptions)("disabled",!!t.newLogicHook.id),m.R7$(6),m.R50("ngModel",t.newLogicHook.module),m.R7$(6),m.R50("ngModel",t.newLogicHook.event),m.R7$(),m.Y8G("ngForOf",t.events),m.R7$(6),m.R50("ngModel",t.newLogicHook.hook_index),m.R7$(7),m.R50("ngModel",t.classMethod),m.R7$(4),m.R50("ngModel",t.newLogicHook.description),m.R7$(7),m.R50("ngModel",t.newLogicHook.version),m.R7$(6),m.R50("ngModel",t.newLogicHook.package),m.R7$(4),m.Y8G("disabled",!t.canSave()))},dependencies:[i.Sq,n.xH,n.y7,n.me,n.wz,n.BC,n.vS,D.H,to.u,ju.s,ec.H,x.W,qe.D,Pe.I,Je.Q,We.C],encapsulation:2})}return HooksManagerHooksEditModal})();var Dg=s(18359);function Eg(e,t){1&e&&(m.j41(0,"div",21),m.nrm(1,"system-spinner"),m.k0s())}function Cg(e,t){if(1&e){const e=m.RV6();m.j41(0,"tr",22)(1,"td",23)(2,"system-utility-icon",24),m.bIt("click",(function(t){const s=m.eBV(e).$implicit,i=m.XpG();return m.Njj(i.toggleValue(t,s))})),m.k0s()(),m.j41(3,"td",25)(4,"div",7),m.EFF(5),m.k0s()(),m.j41(6,"td",25)(7,"div",7),m.EFF(8),m.k0s()(),m.j41(9,"td",25)(10,"div",7),m.EFF(11),m.k0s()(),m.j41(12,"td",26),m.nrm(13,"system-checkbox",27),m.k0s(),m.j41(14,"td",28)(15,"button",29),m.bIt("click",(function(){const t=m.eBV(e).$implicit,s=m.XpG();return m.Njj(s.searchWithModal(t))})),m.nrm(16,"system-button-icon",30),m.k0s(),m.j41(17,"button",29),m.bIt("click",(function(){const t=m.eBV(e).$implicit,s=m.XpG();return m.Njj(s.editWebHook(t.id))})),m.nrm(18,"system-button-icon",31),m.k0s(),m.j41(19,"button",29),m.bIt("click",(function(){const t=m.eBV(e).$implicit,s=m.XpG();return m.Njj(s.deleteWebHook(t.id))})),m.nrm(20,"system-button-icon",32),m.k0s()()()}if(2&e){const e=t.$implicit,s=m.XpG();m.R7$(2),m.Y8G("colorclass",s.getStatusColor(e)),m.R7$(3),m.JRh(e.module),m.R7$(3),m.JRh(e.event),m.R7$(3),m.JRh(e.url),m.R7$(2),m.Y8G("ngModel",e.send_data)("asinteger",!0)("disabled",!0)}}let Fg=(()=>{class WebHooksManager{constructor(e,t,s,i,n,l,o,a){this.backend=e,this.language=t,this.metadata=s,this.modelutilities=i,this.toast=n,this.modal=l,this.hooksManager=o,this.injector=a,this.loading=!1,this.webHooks=[],this.subscriptions=new Dg.yU}ngOnInit(){this.getWebHooks()}getWebHooks(){this.loading=!0,this.backend.getRequest("configuration/spiceui/core/module/syswebhooks").subscribe((e=>{this.webHooks=e,this.loading=!1}))}get allWebHooks(){return"*"==this.hooksManager._module?this.webHooks:this.webHooks.filter((e=>e.module==this.hooksManager._module))}deleteWebHook(e){this.modal.confirm("MSG_DELETE_RECORD","MSG_DELETE_RECORD").subscribe({next:t=>{if(t){const t=this.webHooks.find((t=>t.id==e));this.backend.deleteRequest(`configuration/configurator/syswebhooks/${t.id}`).subscribe((()=>{this.toast.sendToast("MSG_SUCCESSFULLY_DELETED","success")})),this.webHooks=this.webHooks.filter((e=>e.id!=t.id))}}})}editWebHook(e){const t=this.webHooks.find((t=>t.id==e));this.openEditWebHookModal(t)}openEditWebHookModal(e){this.modal.openModal("WebHooksManagerEditModal",!0,this.injector).subscribe((t=>{t.instance.newWebHook.module=this.hooksManager.module;const s=this.webHooks.indexOf(e);e&&(t.instance.newWebHook={...e}),t.instance.save$.subscribe({next:t=>{e?this.webHooks.splice(s,1,t):this.webHooks.push(t)}})}))}addWebHook(){this.openEditWebHookModal()}getStatusColor(e){return 1==e.active?"slds-icon-text-success":0==e.active?"slds-icon-text-light":void 0}toggleValue(e,t){e.stopPropagation();const s=1==t.active?"MSG_DEACTIVATE":"MSG_ACTIVATE",i=1==t.active?"LBL_DEACTIVATED":"LBL_ACTIVATED";this.modal.confirm(s,s).subscribe({next:e=>{if(e){t.active=1==t.active?0:1;const e="syswebhooks";this.backend.postRequest(`configuration/configurator/${e}/${t.id}`,null,{config:t}).subscribe({next:()=>{this.toast.sendToast(i,"success")}})}}})}callWebHooks(e){let t=this.modal.await("LBL_SENDING");this.backend.postRequest("system/webhook",null,e).subscribe((e=>{let s=1==e.result.success?"MSG_SUCCESSFULLY_EXECUTED":"LBL_ERROR",i="Status Code: "+e.result.output.toString();t.emit(!0),this.modal.info(i,s)}))}searchWithModal(e){this.modal.openModal("ObjectModalModuleLookup").subscribe((t=>{t.instance.module=e.module,t.instance.multiselect=!1,t.instance.selectedItems.subscribe((t=>{t.length&&(e={webHook:e,id:t[0].id},this.callWebHooks(e))}))}))}ngOnDestroy(){this.subscriptions.unsubscribe()}static#e=this.ɵfac=function(e){return new(e||WebHooksManager)(m.rXU(p.H),m.rXU(b.B),m.rXU(f.yu),m.rXU(y.g),m.rXU(v.o),m.rXU(R.y),m.rXU(Rg),m.rXU(m.zZn))};static#t=this.ɵcmp=m.VBU({type:WebHooksManager,selectors:[["web-hooks-manager"]],decls:28,vars:2,consts:[["system-to-bottom-noscroll",""],["class","slds-align--absolute-center slds-height_full",4,"ngIf"],[1,"slds-tabs_default",2,"background-color","transparent"],["system-to-bottom","",1,"slds-size--4-of-4","slds-scrollable--y"],[1,"slds-table","slds-table--bordered","slds-table--cell-buffer","slds-table--fixed-layout","slds-text-align_center","slds-table--header-fixed"],[1,"slds-line-height_reset"],["scope","col",1,"slds-text-align_left",2,"width","4.25rem"],[1,"slds-truncate"],["scope","col",1,"slds-text-align_left"],[1,"slds-truncate","slds-m-left--x-small","slds-m-vertical--xx-small"],["label","LBL_MODULE"],[1,"slds-truncate","slds-m-left--x-small"],["label","LBL_EVENT"],["label","LBL_URL"],["scope","col",1,"slds-text-align_center"],["label","LBL_SEND_DATA"],["scope","col",1,"slds-text-align_right"],["class","slds-hint-parent",4,"ngFor","ngForOf"],[1,"slds-p-around--x-small"],[1,"slds-align--absolute-center","slds-button","slds-button--icon",3,"click"],["icon","add","size","medium",2,"border-radius","50%"],[1,"slds-align--absolute-center","slds-height_full"],[1,"slds-hint-parent"],[1,"slds-text-align_left",2,"width","4.25rem"],["size","xx-small","icon","light_bulb",1,"slds-p-right--xx-small","slds-button","slds-button--icon","slds-col_bump-left",3,"colorclass","click"],[1,"slds-text-align_left"],[1,"slds-text-align_center"],[3,"ngModel","asinteger","disabled"],[1,"slds-text-align_right"],[1,"slds-button","slds-button--icon","slds-col_bump-left","--slds-c-button-color-border",3,"click"],["icon","broadcast"],["icon","edit"],["icon","clear"]],template:function(e,t){1&e&&(m.j41(0,"div",0),m.DNE(1,Eg,2,0,"div",1),m.j41(2,"div",2)(3,"div",3)(4,"table",4)(5,"thead")(6,"tr",5)(7,"th",6),m.nrm(8,"div",7),m.k0s(),m.j41(9,"th",8)(10,"div",9),m.nrm(11,"system-label",10),m.k0s()(),m.j41(12,"th",8)(13,"div",11),m.nrm(14,"system-label",12),m.k0s()(),m.j41(15,"th",8)(16,"div",11),m.nrm(17,"system-label",13),m.k0s()(),m.j41(18,"th",14)(19,"div",11),m.nrm(20,"system-label",15),m.k0s()(),m.j41(21,"th",16),m.nrm(22,"div",11),m.k0s()()(),m.j41(23,"tbody"),m.DNE(24,Cg,21,7,"tr",17),m.k0s()(),m.j41(25,"div",18)(26,"button",19),m.bIt("click",(function(){return t.addWebHook()})),m.nrm(27,"system-button-icon",20),m.k0s()()()()()),2&e&&(m.R7$(),m.Y8G("ngIf",t.loading),m.R7$(23),m.Y8G("ngForOf",t.allWebHooks))},dependencies:[i.Sq,i.bT,n.BC,n.vS,L.t,be.f,x.W,Eo.P,u.B,F.b,T.p],encapsulation:2})}return WebHooksManager})();function Gg(e,t){if(1&e&&(m.j41(0,"option",33),m.EFF(1),m.k0s()),2&e){const e=t.$implicit;m.Y8G("value",e),m.R7$(),m.JRh(e)}}let $g=(()=>{class WebHooksManagerEditModal{constructor(e,t,s,i,n,l,o){this.backend=e,this.language=t,this.metadata=s,this.modelutilities=i,this.toast=n,this.modal=l,this.WebHooksManager=o,this.hooks=[],this.events=["create","update","delete"],this.urlCondition=!0,this.urlRegexp=new RegExp("(https?:\\/\\/(www\\.)?[-a-zA-Z0-9@:%._\\+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b([-a-zA-Z0-9()@:%_\\+.~#?&//=]*))"),this.newWebHook={id:"",module:"",event:"create",url:"",active:1,send_data:!1,modulefilter_id:"",fieldset_id:"",ssl_verifypeer:!0,ssl_verifyhost:!0,custom_headers:""},this.save$=new h.B}close(){this.self.destroy()}canSave(){return this.urlCondition=this.newWebHook.url.length>0&&this.urlRegexp.test(this.newWebHook.url),!!(this.newWebHook.module&&this.newWebHook.event&&this.newWebHook.url&&this.urlCondition)}saveHook(){this.newWebHook.id||(this.newWebHook.id=this.modelutilities.generateGuid());let e=this.modal.await("LBL_LOADING");this.backend.postRequest(`configuration/configurator/syswebhooks/${this.newWebHook.id}`,null,{config:this.newWebHook}).subscribe({next:()=>{this.save$.next(this.newWebHook),this.save$.complete(),e.emit(!0),this.toast.sendToast("LBL_DATA_SAVED","success")}}),this.self.destroy()}static#e=this.ɵfac=function(e){return new(e||WebHooksManagerEditModal)(m.rXU(p.H),m.rXU(b.B),m.rXU(f.yu),m.rXU(y.g),m.rXU(v.o),m.rXU(R.y),m.rXU(Fg))};static#t=this.ɵcmp=m.VBU({type:WebHooksManagerEditModal,selectors:[["web-hooks-manager-edit-modal"]],features:[m.Jv_([Fg,Rg])],decls:56,vars:15,consts:[[3,"close"],["label","LBL_WEB_HOOK"],[1,"slds-grid"],[1,"slds-form-element__control","slds-size--1-of-4","slds-p-right--xxx-small"],[1,"slds-form-element__label"],[1,"slds-required"],["label","LBL_MODULE"],[3,"ngModel","ngModelChange"],["label","LBL_EVENT"],["id","eventselect",1,"slds-select",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"slds-form-element__control","slds-size--2-of-4","slds-p-right--xxx-small"],["label","LBL_URL"],[1,"slds-grid","slds-m-top--x-small","slds-p-around--small"],[1,"slds-form-element__control","slds-size--1-of-4"],[3,"ngModel","asinteger","ngModelChange"],["label","LBL_SEND_DATA"],["label","LBL_VERIFY_PEER"],["label","LBL_VERIFY_HOST"],["label","LBL_MODULE_FILTER"],[1,"slds-grow",3,"ngModel","ngModelChange"],[1,"slds-form-element__label","slds-p-bottom--xxx-small"],["label","LBL_FIELDSET"],[1,"slds-form-element__control","slds-size--4-of-4","slds-p-right--xxx-small"],["label","LBL_DATA"],["placeholder","username:password",1,"slds-textarea","slds-scrollable--y","slds-m-vertical--xx-small","ng-untouched","ng-pristine","ng-valid",2,"min-height","80px","max-height","300px","height","80px",3,"ngModel","ngModelChange"],[1,"slds-button","slds-button--neutral",3,"disabled","click"],["icon","broadcast",1,"slds-m-right--small"],["label","LBL_SEND"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CLOSE"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_SAVE"],[3,"value"]],template:function(e,t){1&e&&(m.j41(0,"system-modal")(1,"system-modal-header",0),m.bIt("close",(function(){return t.close()})),m.nrm(2,"system-label",1),m.k0s(),m.j41(3,"system-modal-content")(4,"div",2)(5,"div",3)(6,"label",4)(7,"abbr",5),m.EFF(8,"* "),m.k0s(),m.nrm(9,"system-label",6),m.k0s(),m.j41(10,"system-input-module",7),m.mxI("ngModelChange",(function(e){return m.DH7(t.newWebHook.module,e)||(t.newWebHook.module=e),e})),m.k0s()(),m.j41(11,"div",3)(12,"label",4)(13,"abbr",5),m.EFF(14,"* "),m.k0s(),m.nrm(15,"system-label",8),m.k0s(),m.j41(16,"select",9),m.mxI("ngModelChange",(function(e){return m.DH7(t.newWebHook.event,e)||(t.newWebHook.event=e),e})),m.DNE(17,Gg,2,2,"option",10),m.k0s()(),m.j41(18,"div",11)(19,"label",4)(20,"abbr",5),m.EFF(21,"* "),m.k0s(),m.nrm(22,"system-label",12),m.k0s(),m.j41(23,"system-input-text",7),m.mxI("ngModelChange",(function(e){return m.DH7(t.newWebHook.url,e)||(t.newWebHook.url=e),e})),m.k0s()()(),m.j41(24,"div",13)(25,"div",14)(26,"system-checkbox",15),m.mxI("ngModelChange",(function(e){return m.DH7(t.newWebHook.send_data,e)||(t.newWebHook.send_data=e),e})),m.nrm(27,"system-label",16),m.k0s()(),m.j41(28,"div",14)(29,"system-checkbox",15),m.mxI("ngModelChange",(function(e){return m.DH7(t.newWebHook.ssl_verifypeer,e)||(t.newWebHook.ssl_verifypeer=e),e})),m.nrm(30,"system-label",17),m.k0s()(),m.j41(31,"div",14)(32,"system-checkbox",15),m.mxI("ngModelChange",(function(e){return m.DH7(t.newWebHook.ssl_verifyhost,e)||(t.newWebHook.ssl_verifyhost=e),e})),m.nrm(33,"system-label",18),m.k0s()()(),m.j41(34,"div",2)(35,"div",11)(36,"label",4),m.nrm(37,"system-label",19),m.k0s(),m.j41(38,"system-input-module-filter",20),m.mxI("ngModelChange",(function(e){return m.DH7(t.newWebHook.modulefilter_id,e)||(t.newWebHook.modulefilter_id=e),e})),m.k0s()(),m.j41(39,"div",11)(40,"label",21),m.nrm(41,"system-label",22),m.k0s(),m.j41(42,"system-input-fieldset",20),m.mxI("ngModelChange",(function(e){return m.DH7(t.newWebHook.fieldset_id,e)||(t.newWebHook.fieldset_id=e),e})),m.k0s()()(),m.j41(43,"div",2)(44,"div",23)(45,"label",4),m.nrm(46,"system-label",24),m.k0s(),m.j41(47,"textarea",25),m.mxI("ngModelChange",(function(e){return m.DH7(t.newWebHook.custom_headers,e)||(t.newWebHook.custom_headers=e),e})),m.k0s()()()(),m.j41(48,"system-modal-footer")(49,"button",26),m.bIt("click",(function(){return t.WebHooksManager.searchWithModal(t.newWebHook)})),m.nrm(50,"system-button-icon",27)(51,"system-label",28),m.k0s(),m.j41(52,"button",29),m.bIt("click",(function(){return t.close()})),m.nrm(53,"system-label",30),m.k0s(),m.j41(54,"button",31),m.bIt("click",(function(){return t.saveHook()})),m.nrm(55,"system-label",32),m.k0s()()()),2&e&&(m.R7$(10),m.R50("ngModel",t.newWebHook.module),m.R7$(6),m.R50("ngModel",t.newWebHook.event),m.R7$(),m.Y8G("ngForOf",t.events),m.R7$(6),m.R50("ngModel",t.newWebHook.url),m.R7$(3),m.R50("ngModel",t.newWebHook.send_data),m.Y8G("asinteger",!0),m.R7$(3),m.R50("ngModel",t.newWebHook.ssl_verifypeer),m.Y8G("asinteger",!0),m.R7$(3),m.R50("ngModel",t.newWebHook.ssl_verifyhost),m.Y8G("asinteger",!0),m.R7$(6),m.R50("ngModel",t.newWebHook.modulefilter_id),m.R7$(4),m.R50("ngModel",t.newWebHook.fieldset_id),m.R7$(5),m.R50("ngModel",t.newWebHook.custom_headers),m.R7$(2),m.Y8G("disabled",!t.canSave()),m.R7$(5),m.Y8G("disabled",!t.canSave()))},dependencies:[i.Sq,n.xH,n.y7,n.me,n.wz,n.BC,n.vS,L.t,be.f,D.H,Xn.W,to.u,Ur.c,x.W,qe.D,Pe.I,Je.Q,We.C],encapsulation:2})}return WebHooksManagerEditModal})();function Bg(e,t){if(1&e&&(m.j41(0,"option",32),m.EFF(1),m.k0s()),2&e){const e=t.$implicit;m.Y8G("value",e.id),m.R7$(),m.JRh(e.name)}}let Ng=(()=>{class DictionaryManagerRelationshipAddUser{constructor(e,t){this.backend=e,this.dictionarymanager=t,this.rhsItems=[],this.relationship={id:this.dictionarymanager.modelutilities.generateGuid(),name:"",scope:"c",relationship_name:"",lhs_sysdictionarydefinition_id:"",lhs_sysdictionaryitem_id:"",lhs_linkname:"",lhs_linklabel:"",lhs_duplicatemerge:1,rhs_sysdictionarydefinition_id:"",rhs_sysdictionaryitem_id:"",rhs_linkname:"",rhs_linklabel:"",rhs_duplicatemerge:0,rhs_relatename:"",rhs_relatelabel:"",relationship_type:"",deleted:0,status:"d"},this.setDefaultFields()}set relationshipName(e){this.relationship.relationship_name=e,this.generateRelationshipFields(e)}get relationshipName(){return this.relationship.relationship_name}generateRelationshipFields(e){this.relationship.rhs_linkname=`${e}_user_link`,this.relationship.rhs_relatename=`${e}_user_name`,this.relationship.rhs_sysdictionaryitem_id=this.rhsItems.find((t=>t.name==e+"_user_id"))?.id}close(){this.self.destroy()}add(){this.relationship.relationship_name=`{tablename}_${this.relationship.relationship_name}_user`,this.backend.postRequest(`dictionary/relationship/${this.relationship.id}`,{},{relationship:this.relationship}).subscribe({next:e=>{this.dictionarymanager.pushNewRelationshipToArray(this.relationship),this.close()}})}setDefaultFields(){this.relationship.lhs_sysdictionarydefinition_id=this.dictionarymanager.dictionarydefinitions.find((e=>"User"==e.name)).id,this.relationship.lhs_sysdictionaryitem_id=this.dictionarymanager.getDictionaryDefinitionItems(this.relationship.lhs_sysdictionarydefinition_id).find((e=>"id"==e.name)).id,this.relationship.rhs_sysdictionarydefinition_id=this.dictionarymanager.currentDictionaryDefinition,this.rhsItems=this.dictionarymanager.getDictionaryDefinitionItems(this.relationship.rhs_sysdictionarydefinition_id),this.relationship.relationship_type="user"}static#e=this.ɵfac=function(e){return new(e||DictionaryManagerRelationshipAddUser)(m.rXU(p.H),m.rXU(j))};static#t=this.ɵcmp=m.VBU({type:DictionaryManagerRelationshipAddUser,selectors:[["dictionary-manager-relationship-add-user"]],decls:60,vars:9,consts:[["size","medium"],[3,"close"],["label","LBL_USER"],[1,"slds-p-around--xx-small"],[1,"slds-grid"],[1,"slds-size--1-of-2","slds-p-right--xx-small","slds-form-element"],[1,"slds-form-element__label"],["label","LBL_NAME"],[1,"slds-form-element__control"],[1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-size--1-of-2","slds-p-left--xx-small","slds-form-element"],["label","LBL_RELATIONSHIP_NAME"],[1,"slds-form-element__control","slds-input-has-fixed-addon"],[1,"slds-form-element__addon"],["label","LBL_RHS_DICTIONARYDEFINITION"],["disabled","",1,"slds-input",3,"ngModel"],["label","LBL_RHS_SYSDICTIONARYITEM"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["label","LBL_RHS_LINKNAME"],[1,"slds-input",3,"ngModel"],["label","LBL_RHS_LINKLABEL"],[3,"ngModel","ngModelChange"],[1,"slds-size--1-of-2"],["label","LBL_RHS_RELATENAME"],[1,"slds-p-left--xx-small","slds-size--1-of-2"],["label","LBL_RHS_RELATELABEL"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_ADD"],[3,"value"]],template:function(e,t){1&e&&(m.j41(0,"system-modal",0)(1,"system-modal-header",1),m.bIt("close",(function(){return t.close()})),m.nrm(2,"system-label",2),m.k0s(),m.j41(3,"system-modal-content")(4,"div")(5,"div",3)(6,"div",4)(7,"div",5)(8,"label",6),m.nrm(9,"system-label",7),m.k0s(),m.j41(10,"div",8)(11,"input",9),m.mxI("ngModelChange",(function(e){return m.DH7(t.relationship.name,e)||(t.relationship.name=e),e})),m.k0s()()(),m.j41(12,"div",10)(13,"label",6),m.nrm(14,"system-label",11),m.k0s(),m.j41(15,"div",12)(16,"span",13),m.EFF(17,"{tablename}_"),m.k0s(),m.j41(18,"input",9),m.mxI("ngModelChange",(function(e){return m.DH7(t.relationshipName,e)||(t.relationshipName=e),e})),m.k0s(),m.j41(19,"span",13),m.EFF(20,"_user"),m.k0s()()()(),m.j41(21,"div",4)(22,"div",10)(23,"label",6),m.nrm(24,"system-label",14),m.k0s(),m.j41(25,"div",8),m.nrm(26,"input",15),m.k0s()(),m.j41(27,"div",10)(28,"label",6),m.nrm(29,"system-label",16),m.k0s(),m.j41(30,"div",17)(31,"select",18),m.mxI("ngModelChange",(function(e){return m.DH7(t.relationship.rhs_sysdictionaryitem_id,e)||(t.relationship.rhs_sysdictionaryitem_id=e),e})),m.DNE(32,Bg,2,2,"option",19),m.k0s()()()(),m.j41(33,"div",4)(34,"div",10)(35,"label",6),m.nrm(36,"system-label",20),m.k0s(),m.j41(37,"div",8),m.nrm(38,"input",21),m.k0s()(),m.j41(39,"div",10)(40,"label",6),m.nrm(41,"system-label",22),m.k0s(),m.j41(42,"div",8)(43,"system-input-label",23),m.mxI("ngModelChange",(function(e){return m.DH7(t.relationship.rhs_linklabel,e)||(t.relationship.rhs_linklabel=e),e})),m.k0s()()()(),m.j41(44,"div",4)(45,"div",24)(46,"label",6),m.nrm(47,"system-label",25),m.k0s(),m.j41(48,"div",8)(49,"input",9),m.mxI("ngModelChange",(function(e){return m.DH7(t.relationship.rhs_relatename,e)||(t.relationship.rhs_relatename=e),e})),m.k0s()()(),m.j41(50,"div",26)(51,"label",6),m.nrm(52,"system-label",27),m.k0s(),m.j41(53,"div",8)(54,"system-input-label",23),m.mxI("ngModelChange",(function(e){return m.DH7(t.relationship.rhs_relatelabel,e)||(t.relationship.rhs_relatelabel=e),e})),m.k0s()()()()()()(),m.j41(55,"system-modal-footer")(56,"button",28),m.bIt("click",(function(){return t.close()})),m.nrm(57,"system-label",29),m.k0s(),m.j41(58,"button",30),m.bIt("click",(function(){return t.add()})),m.nrm(59,"system-label",31),m.k0s()()()),2&e&&(m.R7$(11),m.R50("ngModel",t.relationship.name),m.R7$(7),m.R50("ngModel",t.relationshipName),m.R7$(8),m.Y8G("ngModel",t.dictionarymanager.getDictionaryDefinitionName(t.relationship.rhs_sysdictionarydefinition_id)),m.R7$(5),m.R50("ngModel",t.relationship.rhs_sysdictionaryitem_id),m.R7$(),m.Y8G("ngForOf",t.rhsItems),m.R7$(6),m.Y8G("ngModel",t.relationship.rhs_linkname),m.R7$(5),m.R50("ngModel",t.relationship.rhs_linklabel),m.R7$(6),m.R50("ngModel",t.relationship.rhs_relatename),m.R7$(5),m.R50("ngModel",t.relationship.rhs_relatelabel))},dependencies:[i.Sq,n.xH,n.y7,n.me,n.wz,n.BC,n.vS,ze.w,x.W,qe.D,Pe.I,Je.Q,We.C],encapsulation:2})}return DictionaryManagerRelationshipAddUser})(),Sg=(()=>{class WorkbenchModule{static#e=this.ɵfac=function(e){return new(e||WorkbenchModule)};static#t=this.ɵmod=m.$C({type:WorkbenchModule});static#s=this.ɵinj=m.G2t({imports:[i.MD,n.YN,l.SystemComponents,o.h,a.ObjectFields,d.ObjectComponents,r.GlobalComponents,c.ad]})}return WorkbenchModule})();("undefined"==typeof ngJitMode||ngJitMode)&&m.Obh(Sg,{declarations:[El,Bl,Ru,Sl,Ni,Di,Bi,ln,Ti,Zi,an,cn,un,gn,hn,He,S,Be,W,et,g,ot,kg,Tt,uu,Pt,oe,Is,Cs,Ss,Us,Qt,Js,ts,Vs,yg,is,ps,Ws,ys,fe,oi,ai,yi,De,ki,vi,bg,On,vn,En,Pn,Wn,Xr,fl,il,_l,Wl,wl,Te,Ye,Ir.y,Qr,Vr,Hr,Wr,Kr,qr,Pr,Zr,tc,eo,no,Io,mo,po,Do,wo,Zo,na,ha,ua,ja,na,Ka,Ea,Ta,nd,td,Aa,Oa,Xa,Va,Ua,Ha,za,qa,Wa,Ja,dd,ea,pd,Dd,Ed,xr,Ar,jn,Ad,Od,zd,hc,gc,pc,xc,Rc,Jc,Pc,Zc,em,cu,dm,Cm,cu,Om,wm,Ym,Zm,Pm,Qm,fr,Vu,zu,Wu,Qu,Rg,Lg,Ig,Fg,$g,K,Q,Ng,ks,eg.p],imports:[i.MD,n.YN,l.SystemComponents,o.h,a.ObjectFields,d.ObjectComponents,r.GlobalComponents,c.ad],exports:[ea,Ir.y,He]}),m.wjB(mo,[i.Sq,n.xH,n.y7,n.me,n.wz,n.BC,n.vS,L.t,x.W],[Do]),m.wjB(po,[i.Sq,n.xH,n.y7,n.me,n.Q0,n.wz,n.BC,n.VZ,n.zX,n.vS,L.t,x.W],[Do]),m.wjB(Rg,[i.YU,i.Sq,n.xH,n.y7,n.wz,n.BC,n.vS,x.W,Te,Ye,Lg,Fg],[])}}]);