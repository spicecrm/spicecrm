/*!
 * 
 *                     aacService
 *
 *                     release: 2023.02.001
 *
 *                     date: 2023-08-14 15:59:23
 *
 *                     build: 2023.02.001.1692021563445
 *
 */
"use strict";(self.webpackChunkcore=self.webpackChunkcore||[]).push([["src_include_groupware_groupware_ts"],{2149:(e,t,s)=>{s.r(t),s.d(t,{ModuleGroupware:()=>st});var a=s(1180),i=s(6550),n=s(3144),o=s(5030),l=s(3735),r=s(6490),d=s(4357),c=s(3190),u=s(2294),m=s(2242),h=s(7579),p=s(4505),g=s(5710),f=s(3369);let v=(()=>{var e;class GroupwareService{constructor(e,t,s){(0,a.Z)(this,"backend",void 0),(0,a.Z)(this,"model",void 0),(0,a.Z)(this,"broadcast",void 0),(0,a.Z)(this,"emailId",""),(0,a.Z)(this,"_messageId",""),(0,a.Z)(this,"isArchiving",!1),(0,a.Z)(this,"archiveto",[]),(0,a.Z)(this,"archiveattachments",[]),(0,a.Z)(this,"relatedBeans",[]),(0,a.Z)(this,"attachments",{attachments:[]}),this.backend=e,this.model=t,this.broadcast=s}addBean(e){this.archiveto.push(e),this.broadcast.broadcastMessage("groupware.activeto",e)}removeBean(e){let t=this.archiveto.findIndex((t=>e.id==t.id));this.archiveto.splice(t,1),this.broadcast.broadcastMessage("groupware.activeto",void 0)}checkBeanArchive(e){return this.archiveto.findIndex((t=>e.id==t.id))>=0}addAttachment(e){this.archiveattachments.push(e)}removeAttachment(e){let t=this.archiveattachments.findIndex((t=>e.id==t.id));this.archiveattachments.splice(t,1)}checkAttachmentArchive(e){return this.archiveattachments.findIndex((t=>t&&e.id==t.id))>=0}getAttachment(e){return this.attachments.attachments.find((t=>e==t.id))}checkRelatedBeans(e){return this.relatedBeans.findIndex((t=>e.id==t.id))>=0}getEmailFromSpice(){let e=new h.x,t={messageId:this._messageId};return this.backend.getRequest("channels/groupware/email",t).subscribe((t=>{this.emailId=t.email_id;for(let e in t.linkedBeans)this.checkBeanArchive(t.linkedBeans[e])||this.addBean(t.linkedBeans[e]);for(let e of t.attachments){let t=this.getAttachment(e.external_id);t&&this.addAttachment(t)}e.next(!0),e.complete()}),(t=>{console.log(t),e.error(!1),e.complete()})),e.asObservable()}loadLinkedBeans(){let e=new h.x,t=this.getEmailAddressData();return this.relatedBeans=[],this.backend.postRequest("module/EmailAddress/searchbeans",{},t).subscribe((t=>{for(let e in t)this.checkRelatedBeans(t[e])||this.relatedBeans.push(t[e]);e.next(this.relatedBeans),e.complete()}),(t=>{e.error(t)})),e.asObservable()}get messageId(){return this._messageId}set messageId(e){this._messageId=e}}return e=GroupwareService,(0,a.Z)(GroupwareService,"ɵfac",(function(t){return new(t||e)(m.LFG(p.y),m.LFG(g.o),m.LFG(f.f))})),(0,a.Z)(GroupwareService,"ɵprov",m.Yz7({token:e,factory:e.ɵfac})),GroupwareService})();var b=s(5329),w=s(4154),Z=s(4755),x=s(4561),A=s(3333),y=s(3634);function G(e,t){if(1&e&&(m.TgZ(0,"span"),m._uU(1),m.qZA()),2&e){const e=m.oxw();m.xp6(1),m.Oqu(e.model.data.summary_text)}}function T(e,t){if(1&e&&(m.TgZ(0,"li",18),m._UZ(1,"field-container",19),m.qZA()),2&e){const e=m.oxw().$implicit;m.xp6(1),m.Q6J("field",e.field)("fieldconfig",e.fieldconfig)}}function k(e,t){if(1&e&&(m.ynx(0),m.YNc(1,T,2,2,"li",17),m.BQk()),2&e){const e=t.$implicit,s=m.oxw(2);m.xp6(1),m.Q6J("ngIf",s.model.getField(e.field))}}function J(e,t){if(1&e&&(m.TgZ(0,"ul",13),m.YNc(1,k,2,1,"ng-container",16),m.qZA()),2&e){const e=m.oxw();m.xp6(1),m.Q6J("ngForOf",e.mainfieldsetfields)}}function I(e,t){if(1&e&&(m.TgZ(0,"li",14),m._UZ(1,"field-container",19),m.qZA()),2&e){const e=m.oxw().$implicit;m.xp6(1),m.Q6J("field",e.field)("fieldconfig",e.fieldconfig)}}function Q(e,t){if(1&e&&(m.ynx(0),m.YNc(1,I,2,2,"li",20),m.BQk()),2&e){const e=t.$implicit,s=m.oxw();m.xp6(1),m.Q6J("ngIf",s.model.getField(e.field))}}let E=(()=>{var e;class GroupwarePaneBean{constructor(e,t,s,i,n){(0,a.Z)(this,"groupware",void 0),(0,a.Z)(this,"language",void 0),(0,a.Z)(this,"metadata",void 0),(0,a.Z)(this,"model",void 0),(0,a.Z)(this,"view",void 0),(0,a.Z)(this,"bean",void 0),(0,a.Z)(this,"mainfieldsetfields",void 0),(0,a.Z)(this,"subfieldsetfields",void 0),this.groupware=e,this.language=t,this.metadata=s,this.model=i,this.view=n,this.view.displayLabels=!1,this.view.displayLinks=!1}ngOnInit(){let e=this.metadata.getComponentConfig("GlobalHeaderSearchResultsItem",this.model.module);e&&e.mainfieldset&&(this.mainfieldsetfields=this.metadata.getFieldSetItems(e.mainfieldset)),e&&e.subfieldset&&(this.subfieldsetfields=this.metadata.getFieldSetItems(e.subfieldset))}onClick(e){e.target.checked?this.groupware.addBean(this.bean):this.groupware.removeBean(this.bean)}}return e=GroupwarePaneBean,(0,a.Z)(GroupwarePaneBean,"ɵfac",(function(t){return new(t||e)(m.Y36(v),m.Y36(b.d),m.Y36(w.Pu),m.Y36(g.o),m.Y36(u.e))})),(0,a.Z)(GroupwarePaneBean,"ɵcmp",m.Xpm({type:e,selectors:[["groupware-pane-bean"]],inputs:{bean:"bean"},features:[m._Bn([u.e])],decls:18,vars:10,consts:[[1,"slds-tile","slds-media","slds-p-vertical--xx-small"],[1,"slds-p-vertical--xx-small"],["size","small",3,"module"],[1,"slds-media__body"],[1,"slds-grid","slds-has-flexi-truncate"],[4,"ngIf"],["class","slds-list_horizontal slds-has-dividers_right slds-truncate",4,"ngIf"],[1,"slds-col--bump-left","slds-checkbox"],["type","checkbox","name","beans",3,"id","checked","click"],[1,"slds-checkbox__label"],[1,"slds-checkbox_faux"],[1,"slds-form-element__label","slds-assistive-text"],["title","Bean Module",1,"slds-truncate","slds-text-body_small"],[1,"slds-list_horizontal","slds-has-dividers_right","slds-truncate"],[1,"slds-item"],[3,"module","singular"],[4,"ngFor","ngForOf"],["class","slds-item slds-size--1-of-1",4,"ngIf"],[1,"slds-item","slds-size--1-of-1"],["fielddisplayclass","slds-truncate",3,"field","fieldconfig"],["class","slds-item",4,"ngIf"]],template:function(e,t){1&e&&(m.TgZ(0,"article",0)(1,"div",1),m._UZ(2,"system-icon",2),m.qZA(),m.TgZ(3,"div",3)(4,"div",4),m.YNc(5,G,2,1,"span",5),m.YNc(6,J,2,1,"ul",6),m.TgZ(7,"div",7)(8,"input",8),m.NdJ("click",(function(e){return t.onClick(e)})),m.qZA(),m.TgZ(9,"label",9),m._UZ(10,"span",10),m.TgZ(11,"span",11),m._uU(12),m.qZA()()()(),m.TgZ(13,"div",12)(14,"ul",13)(15,"li",14),m._UZ(16,"system-label-modulename",15),m.qZA(),m.YNc(17,Q,2,1,"ng-container",16),m.qZA()()()()),2&e&&(m.xp6(2),m.Q6J("module",t.model.module),m.xp6(3),m.Q6J("ngIf",!t.mainfieldsetfields),m.xp6(1),m.Q6J("ngIf",t.mainfieldsetfields),m.xp6(2),m.Q6J("id","bean-"+t.bean.id)("checked",t.groupware.checkBeanArchive(t.bean)),m.xp6(1),m.uIk("for","bean-"+t.bean.id),m.xp6(3),m.Oqu(t.bean.name),m.xp6(4),m.Q6J("module",t.model.module)("singular",!0),m.xp6(1),m.Q6J("ngForOf",t.subfieldsetfields))},dependencies:[Z.sg,Z.O5,x.f,A.M,y.j],encapsulation:2})),GroupwarePaneBean})();var P=s(4730),Y=s(3463),O=s(3194);let B=(()=>{var e;class GroupwarePaneNoBeansFound{}return e=GroupwarePaneNoBeansFound,(0,a.Z)(GroupwarePaneNoBeansFound,"ɵfac",(function(t){return new(t||e)})),(0,a.Z)(GroupwarePaneNoBeansFound,"ɵcmp",m.Xpm({type:e,selectors:[["groupware-pane-no-beans-found"]],decls:3,vars:0,consts:[["system-to-bottom-noscroll","",1,"slds-align--absolute-center","slds-grid--vertical"],[1,"slds-p-around--medium",2,"max-width","250px"],["label","MSG_NO_RECORDS_FOUND"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0)(1,"system-illustration-no-records",1),m._UZ(2,"system-label",2),m.qZA()())},dependencies:[P.C,Y._,O.t],encapsulation:2})),GroupwarePaneNoBeansFound})();var C=s(727),F=s(2032),q=s(7017),N=s(1058);const U=["header"],L=["main"];let M=(()=>{var e;class GroupwareDetailPaneView{constructor(e,t,s,i,n){(0,a.Z)(this,"navigation",void 0),(0,a.Z)(this,"navigationtab",void 0),(0,a.Z)(this,"broadcast",void 0),(0,a.Z)(this,"metadata",void 0),(0,a.Z)(this,"model",void 0),(0,a.Z)(this,"header",void 0),(0,a.Z)(this,"main",void 0),(0,a.Z)(this,"initialized",!1),(0,a.Z)(this,"componentRefs",[]),(0,a.Z)(this,"componentSubscriptions",new C.w0),this.navigation=e,this.navigationtab=t,this.broadcast=s,this.metadata=i,this.model=n,this.componentSubscriptions.add(this.navigationtab.activeRoute$.subscribe((e=>{this.setRouteData(e)}))),this.componentSubscriptions.add(this.broadcast.message$.subscribe((e=>{this.handleMessage(e)})))}setRouteData(e){e.params.module&&e.params.id&&(this.model.module!=e.params.module||this.model.id!=e.params.id)&&(this.model.module=e.params.module,this.model.id=e.params.id,this.model.getData(!0,"detailview",!0,!0).subscribe((e=>{this.navigationtab.setTabInfo({displayname:e.summary_text,displaymodule:this.model.module})})),this.initialized&&this.buildContainer())}handleMessage(e){if("applauncher.setrole"===e.messagetype)this.buildContainer()}ngAfterViewInit(){this.model.module&&this.model.id&&(this.initialized=!0,this.buildContainer())}ngOnDestroy(){this.componentSubscriptions.unsubscribe()}buildContainer(){for(let e of this.componentRefs)e.destroy();let e=this.metadata.getComponentConfig("GroupwareDetailPane",this.model.module);for(let t of this.metadata.getComponentSetObjects(e.header))this.metadata.addComponent(t.component,this.header).subscribe((e=>{e.instance.componentconfig=t.componentconfig,this.componentRefs.push(e)}));for(let t of this.metadata.getComponentSetObjects(e.main))this.metadata.addComponent(t.component,this.main).subscribe((e=>{e.instance.componentconfig=t.componentconfig,this.componentRefs.push(e)}))}}return e=GroupwareDetailPaneView,(0,a.Z)(GroupwareDetailPaneView,"ɵfac",(function(t){return new(t||e)(m.Y36(F.G),m.Y36(q.d),m.Y36(f.f),m.Y36(w.Pu),m.Y36(g.o))})),(0,a.Z)(GroupwareDetailPaneView,"ɵcmp",m.Xpm({type:e,selectors:[["groupware-detail-pane-view"]],viewQuery:function(e,t){if(1&e&&(m.Gf(U,7,m.s_b),m.Gf(L,7,m.s_b)),2&e){let e;m.iGM(e=m.CRH())&&(t.header=e.first),m.iGM(e=m.CRH())&&(t.main=e.first)}},features:[m._Bn([g.o])],decls:5,vars:0,consts:[["header",""],["system-to-bottom","",1,"slds-theme--default"],["main",""]],template:function(e,t){1&e&&(m._UZ(0,"div",null,0),m.TgZ(2,"div",1),m._UZ(3,"div",null,2),m.qZA())},dependencies:[N.H],encapsulation:2})),GroupwareDetailPaneView})(),S=(()=>{var e;class GroupwareEmailArchivePaneAttachment{constructor(e){(0,a.Z)(this,"groupware",void 0),(0,a.Z)(this,"attachment",void 0),this.groupware=e}onClick(e){e.target.checked?this.groupware.addAttachment(this.attachment):this.groupware.removeAttachment(this.attachment)}}return e=GroupwareEmailArchivePaneAttachment,(0,a.Z)(GroupwareEmailArchivePaneAttachment,"ɵfac",(function(t){return new(t||e)(m.Y36(v))})),(0,a.Z)(GroupwareEmailArchivePaneAttachment,"ɵcmp",m.Xpm({type:e,selectors:[["groupware-email-archive-pane-attachment"]],inputs:{attachment:"attachment"},decls:14,vars:7,consts:[[1,"slds-tile","slds-media","slds-p-vertical--xx-small"],[1,"slds-media__figure"],[1,"slds-checkbox"],["type","checkbox","name","attachments",3,"id","checked","click"],[1,"slds-checkbox__label"],[1,"slds-checkbox_faux"],[1,"slds-form-element__label","slds-assistive-text"],[1,"slds-media__body"],[1,"slds-tile__title","slds-truncate","slds-text-heading--label",3,"title"],[1,"slds-tile__detail"],["title","Attachment Type",1,"slds-truncate","slds-text-body_small"]],template:function(e,t){1&e&&(m.TgZ(0,"article",0)(1,"div",1)(2,"div",2)(3,"input",3),m.NdJ("click",(function(e){return t.onClick(e)})),m.qZA(),m.TgZ(4,"label",4),m._UZ(5,"span",5),m.TgZ(6,"span",6),m._uU(7),m.qZA()()()(),m.TgZ(8,"div",7)(9,"h3",8),m._uU(10),m.qZA(),m.TgZ(11,"div",9)(12,"p",10),m._uU(13),m.qZA()()()()),2&e&&(m.xp6(3),m.Q6J("id","attachment-"+t.attachment.id)("checked",t.groupware.checkAttachmentArchive(t.attachment)),m.xp6(1),m.uIk("for","attachment-"+t.attachment.id),m.xp6(3),m.Oqu(t.attachment.name),m.xp6(2),m.Q6J("title",t.attachment.name),m.xp6(1),m.hij(" ",t.attachment.name," "),m.xp6(3),m.hij(" ",t.attachment.contentType," "))},encapsulation:2})),GroupwareEmailArchivePaneAttachment})();var D=s(8859),R=s(4021);let H=(()=>{var e;class GroupwareEmailArchivePaneHeader{constructor(e,t,s){(0,a.Z)(this,"language",void 0),(0,a.Z)(this,"groupware",void 0),(0,a.Z)(this,"cdRef",void 0),this.language=e,this.groupware=t,this.cdRef=s}archive(){this.groupware.archiveEmail().subscribe((e=>{}),(e=>{}),(()=>{this.cdRef.detectChanges()}))}get canArchive(){return this.groupware.archiveto.length>0&&!this.groupware.isArchiving}get isArchived(){return 0!==this.groupware.emailId.length}}return e=GroupwareEmailArchivePaneHeader,(0,a.Z)(GroupwareEmailArchivePaneHeader,"ɵfac",(function(t){return new(t||e)(m.Y36(b.d),m.Y36(v),m.Y36(m.sBO))})),(0,a.Z)(GroupwareEmailArchivePaneHeader,"ɵcmp",m.Xpm({type:e,selectors:[["groupware-email-archive-pane-header"]],decls:20,vars:3,consts:[[1,"slds-page-header","slds-page-header_record-home"],[1,"slds-page-header__row"],[1,"slds-page-header__col-title"],[1,"slds-media"],["module","Emails"],[1,"slds-media__body"],[1,"slds-page-header__name"],[1,"slds-page-header__name-title"],[1,"slds-page-header__title","slds-truncate"],["module","Emails",3,"singular"],[1,"slds-page-header__name-meta"],[3,"label"],[1,"slds-page-header__col-actions"],[1,"slds-page-header__controls"],[1,"slds-page-header__control"],[1,"slds-button-group-list"],[1,"slds-button","slds-button_neutral",3,"disabled","click"],["label","LBL_ARCHIVE"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),m._UZ(4,"system-icon",4),m.TgZ(5,"div",5)(6,"div",6)(7,"div",7)(8,"h1")(9,"span",8),m._UZ(10,"system-label-modulename",9),m.qZA()()()(),m.TgZ(11,"p",10),m._UZ(12,"system-label",11),m.qZA()()()(),m.TgZ(13,"div",12)(14,"div",13)(15,"div",14)(16,"ul",15)(17,"li")(18,"button",16),m.NdJ("click",(function(){return t.archive()})),m._UZ(19,"system-label",17),m.qZA()()()()()()()()),2&e&&(m.xp6(10),m.Q6J("singular",!0),m.xp6(2),m.Q6J("label",t.isArchived?"LBL_ARCHIVED":"LBL_NOT_ARCHIVED"),m.xp6(6),m.Q6J("disabled",!t.canArchive))},dependencies:[x.f,Y._,A.M],encapsulation:2})),GroupwareEmailArchivePaneHeader})();var z=s(6951);let $=(()=>{var e;class GroupwareEmailArchivePaneItem{constructor(){(0,a.Z)(this,"componentconfig",[])}}return e=GroupwareEmailArchivePaneItem,(0,a.Z)(GroupwareEmailArchivePaneItem,"ɵfac",(function(t){return new(t||e)})),(0,a.Z)(GroupwareEmailArchivePaneItem,"ɵcmp",m.Xpm({type:e,selectors:[["groupware-email-archive-pane-item"]],inputs:{componentconfig:"componentconfig"},decls:1,vars:1,consts:[[3,"componentset"]],template:function(e,t){1&e&&m._UZ(0,"system-componentset",0),2&e&&m.Q6J("componentset",t.componentconfig.componentset)},dependencies:[z.E],encapsulation:2})),GroupwareEmailArchivePaneItem})();const j=function(e){return{"slds-is-active":e}};function X(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"li",4),m.NdJ("click",(function(){const t=m.CHM(e).index,s=m.oxw();return m.KtG(s.setActiveTabIndex(t))})),m.TgZ(1,"a",5),m._UZ(2,"system-utility-icon",6),m.qZA()()}if(2&e){const e=t.$implicit,s=t.index,a=m.oxw();m.Q6J("ngClass",m.VKq(2,j,s===a.activetab)),m.xp6(2),m.Q6J("icon",e.icon)}}function V(e,t){if(1&e&&m._UZ(0,"groupware-email-archive-pane-item",9),2&e){const e=m.oxw().$implicit;m.Q6J("componentconfig",e)}}const K=function(e){return{"slds-hide":e}};function W(e,t){if(1&e&&(m.TgZ(0,"div",7),m.YNc(1,V,1,1,"groupware-email-archive-pane-item",8),m.qZA()),2&e){const e=t.$implicit,s=t.index,a=m.oxw();m.Q6J("ngClass",m.VKq(2,K,a.activetab!=s)),m.xp6(1),m.Q6J("ngIf",e.componentset)}}let ee=(()=>{var e;class GroupwareEmailArchivePane{constructor(e,t,s){(0,a.Z)(this,"metadata",void 0),(0,a.Z)(this,"view",void 0),(0,a.Z)(this,"groupware",void 0),(0,a.Z)(this,"activetab",0),(0,a.Z)(this,"componentconfig",void 0),this.metadata=e,this.view=t,this.groupware=s,this.groupware.getEmailFromSpice()}get isLoading(){return this.groupware.isArchiving}ngOnInit(){if(this.componentconfig||(this.componentconfig=this.metadata.getComponentConfig("GroupwareEmailArchivePane")),this.componentconfig&&this.componentconfig.componentset){let e=this.metadata.getComponentSetObjects(this.componentconfig.componentset);this.componentconfig=[];for(let t of e)this.componentconfig.push(t.componentconfig)}this.view.isEditable=!0,this.view.setEditMode()}getTabs(){try{return this.componentconfig?this.componentconfig:[]}catch(e){return[]}}setActiveTabIndex(e){this.activetab=e}open(e){this.activetab=e}get isArchived(){return 0!==this.groupware.emailId.length}}return e=GroupwareEmailArchivePane,(0,a.Z)(GroupwareEmailArchivePane,"ɵfac",(function(t){return new(t||e)(m.Y36(w.Pu),m.Y36(u.e),m.Y36(v))})),(0,a.Z)(GroupwareEmailArchivePane,"ɵcmp",m.Xpm({type:e,selectors:[["groupware-email-archive-pane"]],features:[m._Bn([u.e])],decls:6,vars:3,consts:[[1,"slds-tabs_default",3,"system-overlay-loading-spinner"],["role","tablist",1,"slds-tabs_default__nav"],["class","slds-vertical-tabs__nav-item slds-text-title--caps","role","presentation",3,"ngClass","click",4,"ngFor","ngForOf"],["system-to-bottom-noscroll","","class","slds-vertical-tabs__content slds-scrollable--y slds-p-around--xx-small slds-show","role","tabpanel",3,"ngClass",4,"ngFor","ngForOf"],["role","presentation",1,"slds-vertical-tabs__nav-item","slds-text-title--caps",3,"ngClass","click"],["href","javascript:void(0)","role","tab","tabindex","-1","aria-selected","false",1,"slds-vertical-tabs__link"],["size","x-small",3,"icon"],["system-to-bottom-noscroll","","role","tabpanel",1,"slds-vertical-tabs__content","slds-scrollable--y","slds-p-around--xx-small","slds-show",3,"ngClass"],[3,"componentconfig",4,"ngIf"],[3,"componentconfig"]],template:function(e,t){1&e&&(m._UZ(0,"groupware-email-archive-pane-header"),m.TgZ(1,"div",0)(2,"ul",1),m.YNc(3,X,3,4,"li",2),m.qZA(),m.TgZ(4,"div"),m.YNc(5,W,2,4,"div",3),m.qZA()()),2&e&&(m.xp6(1),m.Q6J("system-overlay-loading-spinner",t.isLoading),m.xp6(2),m.Q6J("ngForOf",t.getTabs()),m.xp6(2),m.Q6J("ngForOf",t.getTabs()))},dependencies:[Z.mk,Z.sg,Z.O5,D.r,O.t,R._,H,$],encapsulation:2})),GroupwareEmailArchivePane})();var te=s(6625),se=s(7514);function ae(e,t){if(1&e&&m._UZ(0,"groupware-email-archive-pane-attachment",7),2&e){const e=t.$implicit;m.Q6J("attachment",e)}}function ie(e,t){if(1&e&&(m.TgZ(0,"div",5),m.YNc(1,ae,1,1,"groupware-email-archive-pane-attachment",6),m.qZA()),2&e){const e=m.oxw();m.xp6(1),m.Q6J("ngForOf",e.attachments)}}function ne(e,t){1&e&&(m.TgZ(0,"div",8),m._UZ(1,"system-label",9),m.qZA())}let oe=(()=>{var e;class GroupwareEmailArchivePaneAttachments{constructor(e,t,s){(0,a.Z)(this,"groupware",void 0),(0,a.Z)(this,"changeDetectorRef",void 0),(0,a.Z)(this,"configurationService",void 0),this.groupware=e,this.changeDetectorRef=t,this.configurationService=s,this.loadAttachments()}set selectAll(e){this.groupware.archiveattachments=e?this.attachments.slice():[]}get selectAll(){return this.groupware.archiveattachments.length>0&&this.groupware.archiveattachments.length==this.attachments.length}get attachments(){return this.groupware.attachments.attachments}loadAttachments(){this.groupware.getAttachments().subscribe((e=>{this.configurationService.getCapabilityConfig("emails").check_all_attachments_on_archive&&(this.groupware.archiveattachments=this.attachments.slice()),this.changeDetectorRef.detectChanges()}),(e=>{console.log(e)}))}}return e=GroupwareEmailArchivePaneAttachments,(0,a.Z)(GroupwareEmailArchivePaneAttachments,"ɵfac",(function(t){return new(t||e)(m.Y36(v),m.Y36(m.sBO),m.Y36(te.C))})),(0,a.Z)(GroupwareEmailArchivePaneAttachments,"ɵcmp",m.Xpm({type:e,selectors:[["groupware-email-archive-pane-attachments"]],decls:5,vars:4,consts:[[1,"slds-border--bottom","slds-p-horizontal--x-small","slds-p-top--xx-small"],[3,"ngModel","indeterminate","ngModelChange"],["label","LBL_SELECT_ALL"],["class","slds-p-around--x-small",4,"ngIf"],["class","slds-p-around--medium slds-align--absolute-center",4,"ngIf"],[1,"slds-p-around--x-small"],[3,"attachment",4,"ngFor","ngForOf"],[3,"attachment"],[1,"slds-p-around--medium","slds-align--absolute-center"],["label","MSG_NO_ATTACHMENTS_FOUND"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0)(1,"system-checkbox",1),m.NdJ("ngModelChange",(function(e){return t.selectAll=e})),m._UZ(2,"system-label",2),m.qZA()(),m.YNc(3,ie,2,1,"div",3),m.YNc(4,ne,2,0,"div",4)),2&e&&(m.xp6(1),m.Q6J("ngModel",t.selectAll)("indeterminate",(null==t.groupware.archiveattachments?null:t.groupware.archiveattachments.length)>0&&(null==t.attachments?null:t.attachments.length)!=(null==t.groupware.archiveattachments?null:t.groupware.archiveattachments.length)),m.xp6(2),m.Q6J("ngIf",t.attachments.length>0),m.xp6(1),m.Q6J("ngIf",0==t.attachments.length))},dependencies:[Z.sg,Z.O5,o.JJ,o.On,se.U,Y._,S],encapsulation:2})),GroupwareEmailArchivePaneAttachments})();var le=s(7763);const re=function(e,t,s){return{module:e,id:t,data:s}};function de(e,t){if(1&e&&m._UZ(0,"groupware-pane-bean",4),2&e){const e=t.$implicit;m.Q6J("bean",e)("system-model-provider",m.kEZ(2,re,e.module,e.id,e.data))}}function ce(e,t){if(1&e&&(m.TgZ(0,"div",2),m.YNc(1,de,1,6,"groupware-pane-bean",3),m.qZA()),2&e){const e=m.oxw();m.xp6(1),m.Q6J("ngForOf",e.beans)}}function ue(e,t){1&e&&m._UZ(0,"groupware-pane-no-beans-found")}let me=(()=>{var e;class GroupwareEmailArchivePaneBeans{constructor(e,t){(0,a.Z)(this,"groupware",void 0),(0,a.Z)(this,"language",void 0),this.groupware=e,this.language=t,this.groupware.loadLinkedBeans()}get beans(){return this.groupware.relatedBeans}}return e=GroupwareEmailArchivePaneBeans,(0,a.Z)(GroupwareEmailArchivePaneBeans,"ɵfac",(function(t){return new(t||e)(m.Y36(v),m.Y36(b.d))})),(0,a.Z)(GroupwareEmailArchivePaneBeans,"ɵcmp",m.Xpm({type:e,selectors:[["groupware-email-archive-pane-beans"]],decls:2,vars:2,consts:[["class","slds-p-around--x-small slds-p-right--large","system-to-bottom","",4,"ngIf"],[4,"ngIf"],["system-to-bottom","",1,"slds-p-around--x-small","slds-p-right--large"],[3,"bean","system-model-provider",4,"ngFor","ngForOf"],[3,"bean","system-model-provider"]],template:function(e,t){1&e&&(m.YNc(0,ce,2,1,"div",0),m.YNc(1,ue,1,0,"groupware-pane-no-beans-found",1)),2&e&&(m.Q6J("ngIf",t.beans.length>0),m.xp6(1),m.Q6J("ngIf",0==t.beans.length))},dependencies:[Z.sg,Z.O5,le.u,N.H,E,B],encapsulation:2})),GroupwareEmailArchivePaneBeans})();const he=function(e,t,s){return{module:e,id:t,data:s}};function pe(e,t){if(1&e&&m._UZ(0,"groupware-pane-bean",8),2&e){const e=t.$implicit;m.Q6J("bean",e)("system-model-provider",m.kEZ(2,he,e.module,e.id,e.data))}}function ge(e,t){if(1&e&&m._UZ(0,"groupware-email-archive-pane-attachment",11),2&e){const e=t.$implicit;m.Q6J("attachment",e)}}function fe(e,t){if(1&e&&(m.ynx(0),m.TgZ(1,"h2",3),m._UZ(2,"system-label",9),m.qZA(),m.TgZ(3,"div",5),m.YNc(4,ge,1,1,"groupware-email-archive-pane-attachment",10),m.qZA(),m.BQk()),2&e){const e=m.oxw(2);m.xp6(4),m.Q6J("ngForOf",e.attachments)}}function ve(e,t){if(1&e&&(m.TgZ(0,"div",2)(1,"h2",3),m._UZ(2,"system-label",4),m.qZA(),m.TgZ(3,"div",5),m.YNc(4,pe,1,6,"groupware-pane-bean",6),m.qZA(),m.YNc(5,fe,5,1,"ng-container",7),m.qZA()),2&e){const e=m.oxw();m.xp6(4),m.Q6J("ngForOf",e.beans),m.xp6(1),m.Q6J("ngIf",e.attachments.length>0)}}function be(e,t){1&e&&(m.TgZ(0,"div",12),m._UZ(1,"system-label",13),m.qZA())}let we=(()=>{var e;class GroupwareEmailArchivePaneLinked{constructor(e,t){(0,a.Z)(this,"groupware",void 0),(0,a.Z)(this,"language",void 0),this.groupware=e,this.language=t}get beans(){return this.groupware.archiveto}get attachments(){return this.groupware.archiveattachments}}return e=GroupwareEmailArchivePaneLinked,(0,a.Z)(GroupwareEmailArchivePaneLinked,"ɵfac",(function(t){return new(t||e)(m.Y36(v),m.Y36(b.d))})),(0,a.Z)(GroupwareEmailArchivePaneLinked,"ɵcmp",m.Xpm({type:e,selectors:[["groupware-email-archive-pane-linked"]],decls:2,vars:2,consts:[["system-to-bottom","",4,"ngIf"],["class","slds-p-around--medium slds-align--absolute-center","system-to-bottom-noscroll","",4,"ngIf"],["system-to-bottom",""],[1,"slds-p-vertical--xx-small","slds-p-around--x-small","slds-theme--shade"],["label","LBL_LINKED_TO_CRM"],[1,"slds-p-around--x-small"],[3,"bean","system-model-provider",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"bean","system-model-provider"],["label","LBL_ATTACHMENTS"],[3,"attachment",4,"ngFor","ngForOf"],[3,"attachment"],["system-to-bottom-noscroll","",1,"slds-p-around--medium","slds-align--absolute-center"],["label","MSG_NO_RECORDS_SELECTED"]],template:function(e,t){1&e&&(m.YNc(0,ve,6,2,"div",0),m.YNc(1,be,2,0,"div",1)),2&e&&(m.Q6J("ngIf",t.beans.length>0),m.xp6(1),m.Q6J("ngIf",0==t.beans.length))},dependencies:[Z.sg,Z.O5,Y._,le.u,N.H,O.t,E,S],encapsulation:2})),GroupwareEmailArchivePaneLinked})();var Ze=s(2487),_e=s(4361);function xe(e,t){if(1&e&&m._UZ(0,"system-icon",23),2&e){const e=m.oxw();m.Q6J("module",e._searchmodule)}}function Ae(e,t){1&e&&m._UZ(0,"system-utility-icon",24)}function ye(e,t){1&e&&m._UZ(0,"system-utility-icon",25)}function Ge(e,t){1&e&&m._UZ(0,"system-utility-icon",25)}function Te(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"li",8),m.NdJ("click",(function(){const t=m.CHM(e).$implicit,s=m.oxw();return m.KtG(s.searchmodule=t)})),m.TgZ(1,"div",9)(2,"div",10),m.YNc(3,Ge,1,0,"system-utility-icon",11),m.qZA(),m.TgZ(4,"div",12)(5,"div",13),m._UZ(6,"system-label-modulename",26),m.qZA()()()()}if(2&e){const e=t.$implicit,s=m.oxw();m.xp6(3),m.Q6J("ngIf",e==s._searchmodule),m.xp6(3),m.Q6J("module",e)}}const ke=function(e,t,s){return{module:e,id:t,data:s}};function Je(e,t){if(1&e&&m._UZ(0,"groupware-pane-bean",27),2&e){const e=t.$implicit;m.Q6J("bean",e)("system-model-provider",m.kEZ(2,ke,e.module,e.id,e.data))}}let Ie=(()=>{var e;class GroupwareEmailArchivePaneSearch{constructor(e,t,s,i,n){(0,a.Z)(this,"backend",void 0),(0,a.Z)(this,"language",void 0),(0,a.Z)(this,"metadata",void 0),(0,a.Z)(this,"groupware",void 0),(0,a.Z)(this,"fts",void 0),(0,a.Z)(this,"searchTerm",""),(0,a.Z)(this,"beans",[]),(0,a.Z)(this,"searching",!1),(0,a.Z)(this,"searchTimeOut",void 0),(0,a.Z)(this,"_searchmodule","all"),(0,a.Z)(this,"autocompleteid",_.uniqueId()),this.backend=e,this.language=t,this.metadata=s,this.groupware=i,this.fts=n}set selectAll(e){this.groupware.archiveto=e?this.beans.slice():[]}get selectAll(){return this.groupware.archiveto.length>0&&this.groupware.archiveto.length==this.beans.length}get searchmodule(){return this.language.getModuleName(this._searchmodule)}set searchmodule(e){this._searchmodule=e,this.searchTerm&&this.searchSpice()}get moduleTitle(){return"all"==this._searchmodule?this.language.getLabel("LBL_ALL"):this.searchmodule}get searchmodules(){let e=[],t=this.fts.searchModules;for(let s of t){let t=this.metadata.getModuleFields(s);for(let a in t)if("link"==t[a].type&&("emails"==a||"Emails"==t[a].module)){e.push(s);break}}return e.sort(((e,t)=>this.language.getModuleName(e)>this.language.getModuleName(t)?1:-1)),e}search(e){switch(e.key){case"ArrowDown":case"ArrowUp":break;case"Enter":this.searchTerm.length&&(this.searchTimeOut&&window.clearTimeout(this.searchTimeOut),this.searchSpice());break;default:this.searchTimeOut&&window.clearTimeout(this.searchTimeOut),this.searchTimeOut=window.setTimeout((()=>this.searchSpice()),1e3)}}searchSpice(){this.searching=!0,this.beans=[];let e=[];"all"!=this._searchmodule?e.push(this._searchmodule):e=this.searchmodules,this.fts.searchByModules({searchterm:this.searchTerm,modules:e,size:10}).subscribe((e=>{let t=[];for(let e of this.fts.moduleSearchresults)t=t.concat(e.data.hits);t.sort(((e,t)=>e._score>t._score?-1:1));for(let e of t)this.beans.push({id:e._id,module:e._source._module?e._source._module:e._type,data:e._source});this.searching=!1}))}}return e=GroupwareEmailArchivePaneSearch,(0,a.Z)(GroupwareEmailArchivePaneSearch,"ɵfac",(function(t){return new(t||e)(m.Y36(p.y),m.Y36(b.d),m.Y36(w.Pu),m.Y36(v),m.Y36(Ze.Q))})),(0,a.Z)(GroupwareEmailArchivePaneSearch,"ɵcmp",m.Xpm({type:e,selectors:[["groupware-email-archive-pane-search"]],decls:23,vars:11,consts:[[1,"slds-p-around--x-small","slds-height_full",3,"system-overlay-loading-spinner"],[1,"slds-form-element","slds-grid","slds-grid--vertical-align-center","slds-grid--align-spread"],["system-dropdown-trigger-simple","",1,"slds-dropdown-trigger","slds-dropdown-trigger_click"],[1,"slds-button","slds-button--icon-border","slds-m-right--xx-small",3,"title"],["size","small","divClass","",3,"module",4,"ngIf"],["size","x-small","icon","world",4,"ngIf"],[1,"slds-dropdown","slds-dropdown_left"],["role","group",1,"slds-listbox","slds-listbox_vertical"],["role","presentation",1,"slds-listbox__item",3,"click"],["role","option",1,"slds-media","slds-listbox__option","slds-listbox__option_plain","slds-media_small"],[1,"slds-media__figure","slds-listbox__option-icon"],["icon","check","size","x-small",4,"ngIf"],[1,"slds-media__body"],[1,"slds-truncate"],["label","LBL_ALL"],["role","presentation","class","slds-listbox__item",3,"click",4,"ngFor","ngForOf"],[1,"slds-grow","slds-form-element__control"],["type","text","id","search-term","autoComplete","off",1,"slds-input",3,"placeholder","ngModel","ngModelChange","keyup"],[1,"slds-border--bottom","slds-p-horizontal--x-small","slds-p-top--xx-small"],[3,"ngModel","indeterminate","ngModelChange"],["label","LBL_SELECT_ALL"],["system-to-bottom","",1,"slds-p-vertical--small"],[3,"bean","system-model-provider",4,"ngFor","ngForOf"],["size","small","divClass","",3,"module"],["size","x-small","icon","world"],["icon","check","size","x-small"],[3,"module"],[3,"bean","system-model-provider"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),m.YNc(4,xe,1,1,"system-icon",4),m.YNc(5,Ae,1,0,"system-utility-icon",5),m.qZA(),m.TgZ(6,"div",6)(7,"ul",7)(8,"li",8),m.NdJ("click",(function(){return t.searchmodule="all"})),m.TgZ(9,"div",9)(10,"div",10),m.YNc(11,ye,1,0,"system-utility-icon",11),m.qZA(),m.TgZ(12,"div",12)(13,"div",13),m._UZ(14,"system-label",14),m.qZA()()()(),m.YNc(15,Te,7,2,"li",15),m.qZA()()(),m.TgZ(16,"div",16)(17,"input",17),m.NdJ("ngModelChange",(function(e){return t.searchTerm=e}))("keyup",(function(e){return t.search(e)})),m.qZA()()(),m.TgZ(18,"div",18)(19,"system-checkbox",19),m.NdJ("ngModelChange",(function(e){return t.selectAll=e})),m._UZ(20,"system-label",20),m.qZA()(),m.TgZ(21,"div",21),m.YNc(22,Je,1,6,"groupware-pane-bean",22),m.qZA()()),2&e&&(m.Q6J("system-overlay-loading-spinner",t.searching),m.xp6(3),m.Q6J("title",t.moduleTitle),m.xp6(1),m.Q6J("ngIf","all"!=t._searchmodule),m.xp6(1),m.Q6J("ngIf","all"==t._searchmodule),m.xp6(6),m.Q6J("ngIf","all"==t._searchmodule),m.xp6(4),m.Q6J("ngForOf",t.searchmodules),m.xp6(2),m.Q6J("placeholder",t.language.getLabel("LBL_SEARCH_SPICE"))("ngModel",t.searchTerm),m.xp6(2),m.Q6J("ngModel",t.selectAll)("indeterminate",(null==t.groupware.archiveto?null:t.groupware.archiveto.length)>0&&(null==t.beans?null:t.beans.length)!=(null==t.groupware.archiveto?null:t.groupware.archiveto.length)),m.xp6(3),m.Q6J("ngForOf",t.beans))},dependencies:[Z.sg,Z.O5,o.Fj,o.JJ,o.On,se.U,x.f,Y._,A.M,D.r,le.u,_e.w,N.H,R._,E],encapsulation:2})),GroupwareEmailArchivePaneSearch})();var Qe=s(3348),Ee=s(3917),Pe=s(2656);const Ye=["footer"];function Oe(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"li",9),m.NdJ("click",(function(){const t=m.CHM(e).$implicit,s=m.oxw();return m.KtG(s.callAction(t))})),m.TgZ(1,"a",10)(2,"span",11),m._UZ(3,"system-label",12),m.qZA()()()}if(2&e){const e=t.$implicit,s=m.oxw();m.xp6(2),m.Q6J("title",s.language.getLabel(e.actionconfig.label)),m.xp6(1),m.Q6J("label",e.actionconfig.label)}}let Be=(()=>{var e;class GroupwareDetailPanefooter{constructor(e,t,s,i,n){(0,a.Z)(this,"router",void 0),(0,a.Z)(this,"metadata",void 0),(0,a.Z)(this,"language",void 0),(0,a.Z)(this,"footer",void 0),(0,a.Z)(this,"elementRef",void 0),(0,a.Z)(this,"footerElement",void 0),(0,a.Z)(this,"_currentroute","groupware/mailitem"),this.router=e,this.metadata=t,this.language=s,this.footer=i,this.elementRef=n}ngAfterViewInit(){this.setFooterHeight()}ngOnDestroy(){this.clearFooterHeight()}setFooterHeight(){let e=this.footerElement.nativeElement.getBoundingClientRect();this.footer.visibleFooterHeight=e.height}clearFooterHeight(){this.footer.visibleFooterHeight=0}callAction(e){this.router.navigate([e.actionconfig.route])}get currentroute(){return this._currentroute}set currentroute(e){e&&(this._currentroute=e,this.router.navigate([e]))}get actions(){let e=this.metadata.getComponentConfig("OutlookPane");return e.actionset?this.metadata.getActionSetItems(e.actionset):[]}}return e=GroupwareDetailPanefooter,(0,a.Z)(GroupwareDetailPanefooter,"ɵfac",(function(t){return new(t||e)(m.Y36(Qe.F0),m.Y36(w.Pu),m.Y36(b.d),m.Y36(Ee.M),m.Y36(m.SBq))})),(0,a.Z)(GroupwareDetailPanefooter,"ɵcmp",m.Xpm({type:e,selectors:[["groupware-detail-pane-footer"]],viewQuery:function(e,t){if(1&e&&m.Gf(Ye,5),2&e){let e;m.iGM(e=m.CRH())&&(t.footerElement=e.first)}},decls:9,vars:1,consts:[[1,"slds-docked-form-footer"],["footer",""],[1,"slds-size--1-of-1","slds-p-horizontal--xx-small","slds-grid","slds-grid--align-spread"],["system-dropdown-trigger-simple","",1,"slds-dropdown-trigger","slds-dropdown-trigger_click"],["aria-haspopup","true","title","Show More",1,"slds-button","slds-button_icon","slds-button_icon-border-filled"],["icon","rows"],[1,"slds-dropdown","slds-dropdown--bottom","slds-dropdown_left"],["role","menu","aria-label","Show More",1,"slds-dropdown__list"],["class","slds-dropdown__item","role","presentation",3,"click",4,"ngFor","ngForOf"],["role","presentation",1,"slds-dropdown__item",3,"click"],["href","javascript:void(0);","role","menuitem"],[1,"slds-truncate",3,"title"],[3,"label"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0,1)(2,"div",2)(3,"div",3)(4,"button",4),m._UZ(5,"system-button-icon",5),m.qZA(),m.TgZ(6,"div",6)(7,"ul",7),m.YNc(8,Oe,4,2,"li",8),m.qZA()()()()()),2&e&&(m.xp6(8),m.Q6J("ngForOf",t.actions))},dependencies:[Z.sg,Pe.J,Y._,_e.w],encapsulation:2})),GroupwareDetailPanefooter})();var Ce=s(2613),Fe=s(5931),qe=s(3814);function Ne(e,t){if(1&e&&(m.ynx(0),m._uU(1),m.BQk()),2&e){const e=m.oxw();m.xp6(1),m.Oqu(e.model.data.summary_text)}}const Ue=function(){return{displayLabels:!1}};function Le(e,t){if(1&e&&m._UZ(0,"object-record-fieldset-horizontal-list",11),2&e){const e=m.oxw();m.Q6J("fieldset",e.fieldset)("system-view-provider",m.DdM(2,Ue))}}let Me=(()=>{var e;class GroupwareDetailPaneHeader extends Ce.Y{ngOnInit(){super.ngOnInit();let e=this.componentconfig&&!_.isEmpty(this.componentconfig)?this.componentconfig:this.metadata.getComponentConfig("GroupwareDetailPaneHeader",this.model.module);e.fieldset&&(this.fieldset=e.fieldset)}}return e=GroupwareDetailPaneHeader,(0,a.Z)(GroupwareDetailPaneHeader,"ɵfac",function(){let t;return function(s){return(t||(t=m.n5z(e)))(s||e)}}()),(0,a.Z)(GroupwareDetailPaneHeader,"ɵcmp",m.Xpm({type:e,selectors:[["groupware-detail-pane-header"]],features:[m._Bn([u.e]),m.qOj],decls:12,vars:4,consts:[[1,"slds-page-header"],[1,"slds-grid"],[1,"slds-col","slds-has-flexi-truncate"],[1,"slds-media","slds-no-space","slds-grow"],[3,"module","click"],[1,"slds-media__body"],[1,"slds-text-title--caps","slds-line-height--reset"],[3,"module"],[1,"slds-page-header__title","slds-m-right--small","slds-align-middle","slds-truncate"],[4,"ngIf"],[3,"fieldset","system-view-provider",4,"ngIf"],[3,"fieldset","system-view-provider"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"system-icon",4),m.NdJ("click",(function(){return t.goToModule()})),m.qZA(),m.TgZ(5,"div",5)(6,"p",6),m._UZ(7,"system-label-modulename",7),m.qZA(),m.TgZ(8,"div")(9,"h1",8),m.YNc(10,Ne,2,1,"ng-container",9),m.YNc(11,Le,1,3,"object-record-fieldset-horizontal-list",10),m.qZA()()()()()()()),2&e&&(m.xp6(4),m.Q6J("module",t.moduleName),m.xp6(3),m.Q6J("module",t.moduleName),m.xp6(3),m.Q6J("ngIf",!t.fieldset),m.xp6(1),m.Q6J("ngIf",t.fieldset))},dependencies:[Z.O5,x.f,A.M,Fe.Z,qe.V],encapsulation:2})),GroupwareDetailPaneHeader})();function Se(e,t){if(1&e&&(m.TgZ(0,"span"),m._uU(1),m.qZA()),2&e){const e=m.oxw();m.xp6(1),m.Oqu(e.model.data.summary_text)}}function De(e,t){if(1&e&&(m.TgZ(0,"li",9),m._UZ(1,"field-container",13),m.qZA()),2&e){const e=m.oxw().$implicit;m.xp6(1),m.Q6J("field",e.field)("fieldconfig",e.fieldconfig)}}function Re(e,t){if(1&e&&(m.ynx(0),m.YNc(1,De,2,2,"li",12),m.BQk()),2&e){const e=t.$implicit,s=m.oxw(2);m.xp6(1),m.Q6J("ngIf",s.model.getField(e.field))}}function He(e,t){if(1&e&&(m.TgZ(0,"ul",8),m.YNc(1,Re,2,1,"ng-container",11),m.qZA()),2&e){const e=m.oxw();m.xp6(1),m.Q6J("ngForOf",e.mainfieldsetfields)}}function ze(e,t){if(1&e&&(m.TgZ(0,"li",9),m._UZ(1,"field-container",13),m.qZA()),2&e){const e=m.oxw().$implicit;m.xp6(1),m.Q6J("field",e.field)("fieldconfig",e.fieldconfig)}}function $e(e,t){if(1&e&&(m.ynx(0),m.YNc(1,ze,2,2,"li",12),m.BQk()),2&e){const e=t.$implicit,s=m.oxw();m.xp6(1),m.Q6J("ngIf",s.model.getField(e.field))}}let je=(()=>{var e;class GroupwareDetailPaneBean{constructor(e,t,s,i,n,o){(0,a.Z)(this,"groupware",void 0),(0,a.Z)(this,"language",void 0),(0,a.Z)(this,"metadata",void 0),(0,a.Z)(this,"model",void 0),(0,a.Z)(this,"router",void 0),(0,a.Z)(this,"view",void 0),(0,a.Z)(this,"bean",void 0),(0,a.Z)(this,"selected",new m.vpe),(0,a.Z)(this,"mainfieldsetfields",void 0),(0,a.Z)(this,"subfieldsetfields",void 0),this.groupware=e,this.language=t,this.metadata=s,this.model=i,this.router=n,this.view=o,this.view.displayLabels=!1}ngOnInit(){this.model.module=this.bean.module,this.model.id=this.bean.id,this.model.setData(this.bean.data);let e=this.metadata.getComponentConfig("GlobalHeaderSearchResultsItem",this.model.module);e&&e.mainfieldset&&(this.mainfieldsetfields=this.metadata.getFieldSetItems(e.mainfieldset)),e&&e.subfieldset&&(this.subfieldsetfields=this.metadata.getFieldSetItems(e.subfieldset))}onClick(e){this.selected.emit({module:this.bean.module,id:this.bean.id})}}return e=GroupwareDetailPaneBean,(0,a.Z)(GroupwareDetailPaneBean,"ɵfac",(function(t){return new(t||e)(m.Y36(v),m.Y36(b.d),m.Y36(w.Pu),m.Y36(g.o),m.Y36(Qe.F0),m.Y36(u.e))})),(0,a.Z)(GroupwareDetailPaneBean,"ɵcmp",m.Xpm({type:e,selectors:[["groupware-detail-pane-bean"]],inputs:{bean:"bean"},outputs:{selected:"selected"},features:[m._Bn([u.e,g.o])],decls:12,vars:6,consts:[[1,"slds-tile","slds-media","slds-p-vertical--xx-small","slds-has-divider--bottom",3,"click"],[1,"slds-p-vertical--xx-small"],["size","small",3,"module"],[1,"slds-media__body"],[1,"slds-grid","slds-has-flexi-truncate"],[4,"ngIf"],["class","slds-list_horizontal slds-has-dividers_right slds-truncate",4,"ngIf"],["title","Bean Module",1,"slds-truncate","slds-text-body_small"],[1,"slds-list_horizontal","slds-has-dividers_right","slds-truncate"],[1,"slds-item"],[3,"module","singular"],[4,"ngFor","ngForOf"],["class","slds-item",4,"ngIf"],["fielddisplayclass","slds-truncate",3,"field","fieldconfig"]],template:function(e,t){1&e&&(m.TgZ(0,"article",0),m.NdJ("click",(function(e){return t.onClick(e)})),m.TgZ(1,"div",1),m._UZ(2,"system-icon",2),m.qZA(),m.TgZ(3,"div",3)(4,"div",4),m.YNc(5,Se,2,1,"span",5),m.YNc(6,He,2,1,"ul",6),m.qZA(),m.TgZ(7,"div",7)(8,"ul",8)(9,"li",9),m._UZ(10,"system-label-modulename",10),m.qZA(),m.YNc(11,$e,2,1,"ng-container",11),m.qZA()()()()),2&e&&(m.xp6(2),m.Q6J("module",t.model.module),m.xp6(3),m.Q6J("ngIf",!t.mainfieldsetfields),m.xp6(1),m.Q6J("ngIf",t.mainfieldsetfields),m.xp6(4),m.Q6J("module",t.model.module)("singular",!0),m.xp6(1),m.Q6J("ngForOf",t.subfieldsetfields))},dependencies:[Z.sg,Z.O5,x.f,A.M,y.j],encapsulation:2})),GroupwareDetailPaneBean})();var Xe=s(4664);function Ve(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"groupware-detail-pane-bean",17),m.NdJ("selected",(function(t){m.CHM(e);const s=m.oxw(2);return m.KtG(s.selectBean(t))})),m.qZA()}if(2&e){const e=t.$implicit;m.Q6J("bean",e)}}function Ke(e,t){if(1&e&&(m.TgZ(0,"div",15),m.YNc(1,Ve,1,1,"groupware-detail-pane-bean",16),m.qZA()),2&e){const e=m.oxw();m.xp6(1),m.Q6J("ngForOf",e.groupware.relatedBeans)}}function We(e,t){1&e&&m._UZ(0,"groupware-pane-no-beans-found",18)}function et(e,t){1&e&&(m.TgZ(0,"div",19),m._UZ(1,"system-spinner"),m.qZA())}let tt=(()=>{var e;class GroupwareDetailPane{constructor(e,t,s,i){(0,a.Z)(this,"groupware",void 0),(0,a.Z)(this,"router",void 0),(0,a.Z)(this,"broadcast",void 0),(0,a.Z)(this,"cdref",void 0),(0,a.Z)(this,"loading",!1),(0,a.Z)(this,"subscriptions",new C.w0),this.groupware=e,this.router=t,this.broadcast=s,this.cdref=i}ngOnInit(){this.loadRecords(),this.subscriptions.add(this.broadcast.message$.subscribe((e=>{this.handleMessage(e)})))}ngOnDestroy(){this.subscriptions.unsubscribe()}handleMessage(e){if("groupware.itemchanged"===e.messagetype)this.loadRecords()}loadRecords(){this.loading=!0,this.groupware.loadLinkedBeans().subscribe((e=>{1==e.length&&this.router.navigate(["/groupware/details/"+e[0].module+"/"+e[0].id]),this.loading=!1,this.cdref.detectChanges()}),(e=>{this.loading=!1}))}selectBean(e){this.router.navigate(["/groupware/details/"+e.module+"/"+e.id])}}return e=GroupwareDetailPane,(0,a.Z)(GroupwareDetailPane,"ɵfac",(function(t){return new(t||e)(m.Y36(v),m.Y36(Qe.F0),m.Y36(f.f),m.Y36(m.sBO))})),(0,a.Z)(GroupwareDetailPane,"ɵcmp",m.Xpm({type:e,selectors:[["groupware-detail-pane"]],decls:16,vars:4,consts:[[1,"slds-page-header"],[1,"slds-page-header__row"],[1,"slds-page-header__col-title"],[1,"slds-media"],["icon","dynamic_record_choice"],[1,"slds-media__body"],[1,"slds-page-header__name"],[1,"slds-page-header__name-title"],[1,"slds-page-header__title","slds-truncate"],["label","LBL_RECORDS"],[1,"slds-page-header__name-meta"],[3,"label"],["class","slds-p-around--x-small",4,"ngIf"],["class","slds-align--absolute-center","system-to-bottom-noscroll","",4,"ngIf"],["class","slds-p-around--small slds-align--absolute-center",4,"ngIf"],[1,"slds-p-around--x-small"],[3,"bean","selected",4,"ngFor","ngForOf"],[3,"bean","selected"],["system-to-bottom-noscroll","",1,"slds-align--absolute-center"],[1,"slds-p-around--small","slds-align--absolute-center"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),m._UZ(4,"system-icon",4),m.TgZ(5,"div",5)(6,"div",6)(7,"div",7)(8,"h1")(9,"span",8),m._UZ(10,"system-label",9),m.qZA()()()(),m.TgZ(11,"p",10),m._UZ(12,"system-label",11),m.qZA()()()()()(),m.YNc(13,Ke,2,1,"div",12),m.YNc(14,We,1,0,"groupware-pane-no-beans-found",13),m.YNc(15,et,2,0,"div",14)),2&e&&(m.xp6(12),m.Q6J("label",t.loading?"LBL_SEARCHING":"LBL_SELECT"),m.xp6(1),m.Q6J("ngIf",!t.loading),m.xp6(1),m.Q6J("ngIf",0==t.groupware.relatedBeans.length&&!t.loading),m.xp6(1),m.Q6J("ngIf",t.loading))},dependencies:[Z.sg,Z.O5,x.f,Y._,Xe.W,O.t,B,je],encapsulation:2})),GroupwareDetailPane})(),st=(()=>{var e;class ModuleGroupware{}return e=ModuleGroupware,(0,a.Z)(ModuleGroupware,"ɵfac",(function(t){return new(t||e)})),(0,a.Z)(ModuleGroupware,"ɵmod",m.oAB({type:e})),(0,a.Z)(ModuleGroupware,"ɵinj",m.cJS({imports:[i.b2,n.JF,o.u5,l.SystemComponents,r.ObjectComponents,d.o,c.ObjectFields]})),ModuleGroupware})();("undefined"==typeof ngJitMode||ngJitMode)&&m.kYT(st,{declarations:[E,B,M,S,ee,H,oe,me,we,Ie,tt,$,Be,Me,je],imports:[i.b2,n.JF,o.u5,l.SystemComponents,r.ObjectComponents,d.o,c.ObjectFields],exports:[Me]})}}]);