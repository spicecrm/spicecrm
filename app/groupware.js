/*!
 * 
 *                     SpiceCRM
 *
 *                     release: 2024.01.001
 *
 *                     date: 2024-06-07 18:53:45
 *
 *                     build: 2024.01.001.1717779225604
 *
 */
"use strict";(self.webpackChunkcore=self.webpackChunkcore||[]).push([["src_include_groupware_groupware_ts"],{55714:(e,t,s)=>{s.r(t),s.d(t,{ModuleGroupware:()=>tt});var a=s(345),i=s(21626),n=s(84341),l=s(70569),r=s(37328),o=s(71341),c=s(7745),d=s(41731),m=s(54438),u=s(21413),h=s(49722),p=s(35911),g=s(40553);let f=(()=>{class GroupwareService{constructor(e,t,s){this.backend=e,this.model=t,this.broadcast=s,this.emailId="",this._messageId="",this.isArchiving=!1,this.archiveto=[],this.archiveattachments=[],this.relatedBeans=[],this.attachments={attachments:[]}}addBean(e){this.archiveto.push(e),this.broadcast.broadcastMessage("groupware.activeto",e)}removeBean(e){let t=this.archiveto.findIndex((t=>e.id==t.id));this.archiveto.splice(t,1),this.broadcast.broadcastMessage("groupware.activeto",void 0)}checkBeanArchive(e){return this.archiveto.findIndex((t=>e.id==t.id))>=0}addAttachment(e){this.archiveattachments.push(e)}removeAttachment(e){let t=this.archiveattachments.findIndex((t=>e.id==t.id));this.archiveattachments.splice(t,1)}checkAttachmentArchive(e){return this.archiveattachments.findIndex((t=>t&&e.id==t.id))>=0}getAttachment(e){return this.attachments.attachments.find((t=>e==t.id))}checkRelatedBeans(e){return this.relatedBeans.findIndex((t=>e.id==t.id))>=0}getEmailFromSpice(){let e=new u.B,t={messageId:this._messageId};return this.backend.getRequest("channels/groupware/email",t).subscribe((t=>{this.emailId=t.email_id;for(let e in t.linkedBeans)this.checkBeanArchive(t.linkedBeans[e])||this.addBean(t.linkedBeans[e]);for(let e of t.attachments){let t=this.getAttachment(e.external_id);t&&this.addAttachment(t)}e.next(!0),e.complete()}),(t=>{console.log(t),e.error(!1),e.complete()})),e.asObservable()}loadLinkedBeans(){let e=new u.B,t=this.getEmailAddressData();return this.relatedBeans=[],this.backend.postRequest("module/EmailAddress/searchbeans",{},t).subscribe((t=>{for(let e in t)this.checkRelatedBeans(t[e])||this.relatedBeans.push(t[e]);e.next(this.relatedBeans),e.complete()}),(t=>{e.error(t)})),e.asObservable()}get messageId(){return this._messageId}set messageId(e){this._messageId=e}static#e=this.ɵfac=function(e){return new(e||GroupwareService)(m.KVO(h.H),m.KVO(p.g),m.KVO(g.m))};static#t=this.ɵprov=m.jDH({token:GroupwareService,factory:GroupwareService.ɵfac})}return GroupwareService})();var b=s(69904),v=s(83935),w=s(60177),G=s(68823),y=s(44985),k=s(15091);function R(e,t){if(1&e&&(m.j41(0,"span"),m.EFF(1),m.k0s()),2&e){const e=m.XpG();m.R7$(),m.JRh(e.model.data.summary_text)}}function I(e,t){if(1&e&&(m.j41(0,"li",18),m.nrm(1,"field-container",19),m.k0s()),2&e){const e=m.XpG().$implicit;m.R7$(),m.Y8G("field",e.field)("fieldconfig",e.fieldconfig)}}function x(e,t){if(1&e&&(m.qex(0),m.DNE(1,I,2,2,"li",17),m.bVm()),2&e){const e=t.$implicit,s=m.XpG(2);m.R7$(),m.Y8G("ngIf",s.model.getField(e.field))}}function E(e,t){if(1&e&&(m.j41(0,"ul",13),m.DNE(1,x,2,1,"ng-container",16),m.k0s()),2&e){const e=m.XpG();m.R7$(),m.Y8G("ngForOf",e.mainfieldsetfields)}}function A(e,t){if(1&e&&(m.j41(0,"li",14),m.nrm(1,"field-container",19),m.k0s()),2&e){const e=m.XpG().$implicit;m.R7$(),m.Y8G("field",e.field)("fieldconfig",e.fieldconfig)}}function B(e,t){if(1&e&&(m.qex(0),m.DNE(1,A,2,2,"li",20),m.bVm()),2&e){const e=t.$implicit,s=m.XpG();m.R7$(),m.Y8G("ngIf",s.model.getField(e.field))}}let $=(()=>{class GroupwarePaneBean{constructor(e,t,s,a,i){this.groupware=e,this.language=t,this.metadata=s,this.model=a,this.view=i,this.view.displayLabels=!1,this.view.displayLinks=!1}ngOnInit(){let e=this.metadata.getComponentConfig("GlobalHeaderSearchResultsItem",this.model.module);e&&e.mainfieldset&&(this.mainfieldsetfields=this.metadata.getFieldSetItems(e.mainfieldset)),e&&e.subfieldset&&(this.subfieldsetfields=this.metadata.getFieldSetItems(e.subfieldset))}onClick(e){e.target.checked?this.groupware.addBean(this.bean):this.groupware.removeBean(this.bean)}static#e=this.ɵfac=function(e){return new(e||GroupwarePaneBean)(m.rXU(f),m.rXU(b.B),m.rXU(v.yu),m.rXU(p.g),m.rXU(d.U))};static#t=this.ɵcmp=m.VBU({type:GroupwarePaneBean,selectors:[["groupware-pane-bean"]],inputs:{bean:"bean"},features:[m.Jv_([d.U])],decls:18,vars:10,consts:[[1,"slds-tile","slds-media","slds-p-vertical--xx-small"],[1,"slds-p-vertical--xx-small"],["size","small",3,"module"],[1,"slds-media__body"],[1,"slds-grid","slds-has-flexi-truncate"],[4,"ngIf"],["class","slds-list_horizontal slds-has-dividers_right slds-truncate",4,"ngIf"],[1,"slds-col--bump-left","slds-checkbox"],["type","checkbox","name","beans",3,"id","checked","click"],[1,"slds-checkbox__label"],[1,"slds-checkbox_faux"],[1,"slds-form-element__label","slds-assistive-text"],["title","Bean Module",1,"slds-truncate","slds-text-body_small"],[1,"slds-list_horizontal","slds-has-dividers_right","slds-truncate"],[1,"slds-item"],[3,"module","singular"],[4,"ngFor","ngForOf"],["class","slds-item slds-size--1-of-1",4,"ngIf"],[1,"slds-item","slds-size--1-of-1"],["fielddisplayclass","slds-truncate",3,"field","fieldconfig"],["class","slds-item",4,"ngIf"]],template:function(e,t){1&e&&(m.j41(0,"article",0)(1,"div",1),m.nrm(2,"system-icon",2),m.k0s(),m.j41(3,"div",3)(4,"div",4),m.DNE(5,R,2,1,"span",5)(6,E,2,1,"ul",6),m.j41(7,"div",7)(8,"input",8),m.bIt("click",(function(e){return t.onClick(e)})),m.k0s(),m.j41(9,"label",9),m.nrm(10,"span",10),m.j41(11,"span",11),m.EFF(12),m.k0s()()()(),m.j41(13,"div",12)(14,"ul",13)(15,"li",14),m.nrm(16,"system-label-modulename",15),m.k0s(),m.DNE(17,B,2,1,"ng-container",16),m.k0s()()()()),2&e&&(m.R7$(2),m.Y8G("module",t.model.module),m.R7$(3),m.Y8G("ngIf",!t.mainfieldsetfields),m.R7$(),m.Y8G("ngIf",t.mainfieldsetfields),m.R7$(2),m.Y8G("id","bean-"+t.bean.id)("checked",t.groupware.checkBeanArchive(t.bean)),m.R7$(),m.BMQ("for","bean-"+t.bean.id),m.R7$(3),m.JRh(t.bean.name),m.R7$(4),m.Y8G("module",t.model.module)("singular",!0),m.R7$(),m.Y8G("ngForOf",t.subfieldsetfields))},dependencies:[w.Sq,w.bT,G.J,y.r,k.y],encapsulation:2})}return GroupwarePaneBean})();var j=s(58461),Y=s(32062),F=s(69139);let D=(()=>{class GroupwarePaneNoBeansFound{static#e=this.ɵfac=function(e){return new(e||GroupwarePaneNoBeansFound)};static#t=this.ɵcmp=m.VBU({type:GroupwarePaneNoBeansFound,selectors:[["groupware-pane-no-beans-found"]],decls:3,vars:0,consts:[["system-to-bottom-noscroll","",1,"slds-align--absolute-center","slds-grid--vertical"],[1,"slds-p-around--medium",2,"max-width","250px"],["label","MSG_NO_RECORDS_FOUND"]],template:function(e,t){1&e&&(m.j41(0,"div",0)(1,"system-illustration-no-records",1),m.nrm(2,"system-label",2),m.k0s()())},dependencies:[j.b,Y.W,F.p],encapsulation:2})}return GroupwarePaneNoBeansFound})();var C=s(18359),X=s(60968),U=s(66031),P=s(28933);const O=["header"],S=["main"];let L=(()=>{class GroupwareDetailPaneView{constructor(e,t,s,a,i){this.navigation=e,this.navigationtab=t,this.broadcast=s,this.metadata=a,this.model=i,this.initialized=!1,this.componentRefs=[],this.componentSubscriptions=new C.yU,this.componentSubscriptions.add(this.navigationtab.activeRoute$.subscribe((e=>{this.setRouteData(e)}))),this.componentSubscriptions.add(this.broadcast.message$.subscribe((e=>{this.handleMessage(e)})))}setRouteData(e){e.params.module&&e.params.id&&(this.model.module!=e.params.module||this.model.id!=e.params.id)&&(this.model.module=e.params.module,this.model.id=e.params.id,this.model.getData(!0,"detailview",!0,!0).subscribe((e=>{this.navigationtab.setTabInfo({displayname:e.summary_text,displaymodule:this.model.module})})),this.initialized&&this.buildContainer())}handleMessage(e){if("applauncher.setrole"===e.messagetype)this.buildContainer()}ngAfterViewInit(){this.model.module&&this.model.id&&(this.initialized=!0,this.buildContainer())}ngOnDestroy(){this.componentSubscriptions.unsubscribe()}buildContainer(){for(let e of this.componentRefs)e.destroy();let e=this.metadata.getComponentConfig("GroupwareDetailPane",this.model.module);for(let t of this.metadata.getComponentSetObjects(e.header))this.metadata.addComponent(t.component,this.header).subscribe((e=>{e.instance.componentconfig=t.componentconfig,this.componentRefs.push(e)}));for(let t of this.metadata.getComponentSetObjects(e.main))this.metadata.addComponent(t.component,this.main).subscribe((e=>{e.instance.componentconfig=t.componentconfig,this.componentRefs.push(e)}))}static#e=this.ɵfac=function(e){return new(e||GroupwareDetailPaneView)(m.rXU(X.L),m.rXU(U._),m.rXU(g.m),m.rXU(v.yu),m.rXU(p.g))};static#t=this.ɵcmp=m.VBU({type:GroupwareDetailPaneView,selectors:[["groupware-detail-pane-view"]],viewQuery:function(e,t){if(1&e&&(m.GBs(O,7,m.c1b),m.GBs(S,7,m.c1b)),2&e){let e;m.mGM(e=m.lsd())&&(t.header=e.first),m.mGM(e=m.lsd())&&(t.main=e.first)}},features:[m.Jv_([p.g])],decls:5,vars:0,consts:[["header",""],["system-to-bottom","",1,"slds-theme--default"],["main",""]],template:function(e,t){1&e&&(m.nrm(0,"div",null,0),m.j41(2,"div",1),m.nrm(3,"div",null,2),m.k0s())},dependencies:[P.b],encapsulation:2})}return GroupwareDetailPaneView})(),N=(()=>{class GroupwareEmailArchivePaneAttachment{constructor(e){this.groupware=e}onClick(e){e.target.checked?this.groupware.addAttachment(this.attachment):this.groupware.removeAttachment(this.attachment)}static#e=this.ɵfac=function(e){return new(e||GroupwareEmailArchivePaneAttachment)(m.rXU(f))};static#t=this.ɵcmp=m.VBU({type:GroupwareEmailArchivePaneAttachment,selectors:[["groupware-email-archive-pane-attachment"]],inputs:{attachment:"attachment"},decls:14,vars:7,consts:[[1,"slds-tile","slds-media","slds-p-vertical--xx-small"],[1,"slds-media__figure"],[1,"slds-checkbox"],["type","checkbox","name","attachments",3,"id","checked","click"],[1,"slds-checkbox__label"],[1,"slds-checkbox_faux"],[1,"slds-form-element__label","slds-assistive-text"],[1,"slds-media__body"],[1,"slds-tile__title","slds-truncate","slds-text-heading--label",3,"title"],[1,"slds-tile__detail"],["title","Attachment Type",1,"slds-truncate","slds-text-body_small"]],template:function(e,t){1&e&&(m.j41(0,"article",0)(1,"div",1)(2,"div",2)(3,"input",3),m.bIt("click",(function(e){return t.onClick(e)})),m.k0s(),m.j41(4,"label",4),m.nrm(5,"span",5),m.j41(6,"span",6),m.EFF(7),m.k0s()()()(),m.j41(8,"div",7)(9,"h3",8),m.EFF(10),m.k0s(),m.j41(11,"div",9)(12,"p",10),m.EFF(13),m.k0s()()()()),2&e&&(m.R7$(3),m.Y8G("id","attachment-"+t.attachment.id)("checked",t.groupware.checkAttachmentArchive(t.attachment)),m.R7$(),m.BMQ("for","attachment-"+t.attachment.id),m.R7$(3),m.JRh(t.attachment.name),m.R7$(2),m.Y8G("title",t.attachment.name),m.R7$(),m.SpI(" ",t.attachment.name," "),m.R7$(3),m.SpI(" ",t.attachment.contentType," "))},encapsulation:2})}return GroupwareEmailArchivePaneAttachment})();var M=s(18521),T=s(32130);let V=(()=>{class GroupwareEmailArchivePaneHeader{constructor(e,t,s){this.language=e,this.groupware=t,this.cdRef=s}archive(){this.groupware.archiveEmail().subscribe((e=>{}),(e=>{}),(()=>{this.cdRef.detectChanges()}))}get canArchive(){return this.groupware.archiveto.length>0&&!this.groupware.isArchiving}get isArchived(){return 0!==this.groupware.emailId.length}static#e=this.ɵfac=function(e){return new(e||GroupwareEmailArchivePaneHeader)(m.rXU(b.B),m.rXU(f),m.rXU(m.gRc))};static#t=this.ɵcmp=m.VBU({type:GroupwareEmailArchivePaneHeader,selectors:[["groupware-email-archive-pane-header"]],decls:20,vars:3,consts:[[1,"slds-page-header","slds-page-header_record-home"],[1,"slds-page-header__row"],[1,"slds-page-header__col-title"],[1,"slds-media"],["module","Emails"],[1,"slds-media__body"],[1,"slds-page-header__name"],[1,"slds-page-header__name-title"],[1,"slds-page-header__title","slds-truncate"],["module","Emails",3,"singular"],[1,"slds-page-header__name-meta"],[3,"label"],[1,"slds-page-header__col-actions"],[1,"slds-page-header__controls"],[1,"slds-page-header__control"],[1,"slds-button-group-list"],[1,"slds-button","slds-button_neutral",3,"disabled","click"],["label","LBL_ARCHIVE"]],template:function(e,t){1&e&&(m.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),m.nrm(4,"system-icon",4),m.j41(5,"div",5)(6,"div",6)(7,"div",7)(8,"h1")(9,"span",8),m.nrm(10,"system-label-modulename",9),m.k0s()()()(),m.j41(11,"p",10),m.nrm(12,"system-label",11),m.k0s()()()(),m.j41(13,"div",12)(14,"div",13)(15,"div",14)(16,"ul",15)(17,"li")(18,"button",16),m.bIt("click",(function(){return t.archive()})),m.nrm(19,"system-label",17),m.k0s()()()()()()()()),2&e&&(m.R7$(10),m.Y8G("singular",!0),m.R7$(2),m.Y8G("label",t.isArchived?"LBL_ARCHIVED":"LBL_NOT_ARCHIVED"),m.R7$(6),m.Y8G("disabled",!t.canArchive))},dependencies:[G.J,Y.W,y.r],encapsulation:2})}return GroupwareEmailArchivePaneHeader})();var H=s(60595);let z=(()=>{class GroupwareEmailArchivePaneItem{constructor(){this.componentconfig=[]}static#e=this.ɵfac=function(e){return new(e||GroupwareEmailArchivePaneItem)};static#t=this.ɵcmp=m.VBU({type:GroupwareEmailArchivePaneItem,selectors:[["groupware-email-archive-pane-item"]],inputs:{componentconfig:"componentconfig"},decls:1,vars:1,consts:[[3,"componentset"]],template:function(e,t){1&e&&m.nrm(0,"system-componentset",0),2&e&&m.Y8G("componentset",t.componentconfig.componentset)},dependencies:[H.F],encapsulation:2})}return GroupwareEmailArchivePaneItem})();const q=e=>({"slds-is-active":e});function J(e,t){if(1&e){const e=m.RV6();m.j41(0,"li",4),m.bIt("click",(function(){const t=m.eBV(e).index,s=m.XpG();return m.Njj(s.setActiveTabIndex(t))})),m.j41(1,"a",5),m.nrm(2,"system-utility-icon",6),m.k0s()()}if(2&e){const e=t.$implicit,s=t.index,a=m.XpG();m.Y8G("ngClass",m.eq3(2,q,s===a.activetab)),m.R7$(2),m.Y8G("icon",e.icon)}}function W(e,t){if(1&e&&m.nrm(0,"groupware-email-archive-pane-item",9),2&e){const e=m.XpG().$implicit;m.Y8G("componentconfig",e)}}const K=e=>({"slds-hide":e});function Q(e,t){if(1&e&&(m.j41(0,"div",7),m.DNE(1,W,1,1,"groupware-email-archive-pane-item",8),m.k0s()),2&e){const e=t.$implicit,s=t.index,a=m.XpG();m.Y8G("ngClass",m.eq3(2,K,a.activetab!=s)),m.R7$(),m.Y8G("ngIf",e.componentset)}}let Z=(()=>{class GroupwareEmailArchivePane{constructor(e,t,s){this.metadata=e,this.view=t,this.groupware=s,this.activetab=0,this.groupware.getEmailFromSpice()}get isLoading(){return this.groupware.isArchiving}ngOnInit(){if(this.componentconfig||(this.componentconfig=this.metadata.getComponentConfig("GroupwareEmailArchivePane")),this.componentconfig&&this.componentconfig.componentset){let e=this.metadata.getComponentSetObjects(this.componentconfig.componentset);this.componentconfig=[];for(let t of e)this.componentconfig.push(t.componentconfig)}this.view.isEditable=!0,this.view.setEditMode()}getTabs(){try{return this.componentconfig?this.componentconfig:[]}catch(e){return[]}}setActiveTabIndex(e){this.activetab=e}open(e){this.activetab=e}get isArchived(){return 0!==this.groupware.emailId.length}static#e=this.ɵfac=function(e){return new(e||GroupwareEmailArchivePane)(m.rXU(v.yu),m.rXU(d.U),m.rXU(f))};static#t=this.ɵcmp=m.VBU({type:GroupwareEmailArchivePane,selectors:[["groupware-email-archive-pane"]],features:[m.Jv_([d.U])],decls:6,vars:3,consts:[[1,"slds-tabs_default",3,"system-overlay-loading-spinner"],["role","tablist",1,"slds-tabs_default__nav"],["class","slds-vertical-tabs__nav-item slds-text-title--caps","role","presentation",3,"ngClass","click",4,"ngFor","ngForOf"],["system-to-bottom-noscroll","","class","slds-vertical-tabs__content slds-scrollable--y slds-p-around--xx-small slds-show","role","tabpanel",3,"ngClass",4,"ngFor","ngForOf"],["role","presentation",1,"slds-vertical-tabs__nav-item","slds-text-title--caps",3,"ngClass","click"],["href","javascript:void(0)","role","tab","tabindex","-1","aria-selected","false",1,"slds-vertical-tabs__link"],["size","x-small",3,"icon"],["system-to-bottom-noscroll","","role","tabpanel",1,"slds-vertical-tabs__content","slds-scrollable--y","slds-p-around--xx-small","slds-show",3,"ngClass"],[3,"componentconfig",4,"ngIf"],[3,"componentconfig"]],template:function(e,t){1&e&&(m.nrm(0,"groupware-email-archive-pane-header"),m.j41(1,"div",0)(2,"ul",1),m.DNE(3,J,3,4,"li",2),m.k0s(),m.j41(4,"div"),m.DNE(5,Q,2,4,"div",3),m.k0s()()),2&e&&(m.R7$(),m.Y8G("system-overlay-loading-spinner",t.isLoading),m.R7$(2),m.Y8G("ngForOf",t.getTabs()),m.R7$(2),m.Y8G("ngForOf",t.getTabs()))},dependencies:[w.YU,w.Sq,w.bT,M.B,F.p,T.M,V,z],encapsulation:2})}return GroupwareEmailArchivePane})();var ee=s(53584),te=s(84359);function se(e,t){if(1&e&&m.nrm(0,"groupware-email-archive-pane-attachment",7),2&e){const e=t.$implicit;m.Y8G("attachment",e)}}function ae(e,t){if(1&e&&(m.j41(0,"div",5),m.DNE(1,se,1,1,"groupware-email-archive-pane-attachment",6),m.k0s()),2&e){const e=m.XpG();m.R7$(),m.Y8G("ngForOf",e.attachments)}}function ie(e,t){1&e&&(m.j41(0,"div",8),m.nrm(1,"system-label",9),m.k0s())}let ne=(()=>{class GroupwareEmailArchivePaneAttachments{constructor(e,t,s){this.groupware=e,this.changeDetectorRef=t,this.configurationService=s,this.loadAttachments()}set selectAll(e){this.groupware.archiveattachments=e?this.attachments.slice():[]}get selectAll(){return this.groupware.archiveattachments.length>0&&this.groupware.archiveattachments.length==this.attachments.length}get attachments(){return this.groupware.attachments.attachments}loadAttachments(){this.groupware.getAttachments().subscribe((e=>{this.configurationService.getCapabilityConfig("emails").check_all_attachments_on_archive&&(this.groupware.archiveattachments=this.attachments.slice()),this.changeDetectorRef.detectChanges()}),(e=>{console.log(e)}))}static#e=this.ɵfac=function(e){return new(e||GroupwareEmailArchivePaneAttachments)(m.rXU(f),m.rXU(m.gRc),m.rXU(ee.i))};static#t=this.ɵcmp=m.VBU({type:GroupwareEmailArchivePaneAttachments,selectors:[["groupware-email-archive-pane-attachments"]],decls:5,vars:4,consts:[[1,"slds-border--bottom","slds-p-horizontal--x-small","slds-p-top--xx-small"],[3,"ngModel","indeterminate","ngModelChange"],["label","LBL_SELECT_ALL"],["class","slds-p-around--x-small",4,"ngIf"],["class","slds-p-around--medium slds-align--absolute-center",4,"ngIf"],[1,"slds-p-around--x-small"],[3,"attachment",4,"ngFor","ngForOf"],[3,"attachment"],[1,"slds-p-around--medium","slds-align--absolute-center"],["label","MSG_NO_ATTACHMENTS_FOUND"]],template:function(e,t){1&e&&(m.j41(0,"div",0)(1,"system-checkbox",1),m.mxI("ngModelChange",(function(e){return m.DH7(t.selectAll,e)||(t.selectAll=e),e})),m.nrm(2,"system-label",2),m.k0s()(),m.DNE(3,ae,2,1,"div",3)(4,ie,2,0,"div",4)),2&e&&(m.R7$(),m.R50("ngModel",t.selectAll),m.Y8G("indeterminate",(null==t.groupware.archiveattachments?null:t.groupware.archiveattachments.length)>0&&(null==t.attachments?null:t.attachments.length)!=(null==t.groupware.archiveattachments?null:t.groupware.archiveattachments.length)),m.R7$(2),m.Y8G("ngIf",t.attachments.length>0),m.R7$(),m.Y8G("ngIf",0==t.attachments.length))},dependencies:[w.Sq,w.bT,n.BC,n.vS,te.f,Y.W,N],encapsulation:2})}return GroupwareEmailArchivePaneAttachments})();var le=s(98427);const re=(e,t,s)=>({module:e,id:t,data:s});function oe(e,t){if(1&e&&m.nrm(0,"groupware-pane-bean",4),2&e){const e=t.$implicit;m.Y8G("bean",e)("system-model-provider",m.sMw(2,re,e.module,e.id,e.data))}}function ce(e,t){if(1&e&&(m.j41(0,"div",2),m.DNE(1,oe,1,6,"groupware-pane-bean",3),m.k0s()),2&e){const e=m.XpG();m.R7$(),m.Y8G("ngForOf",e.beans)}}function de(e,t){1&e&&m.nrm(0,"groupware-pane-no-beans-found")}let me=(()=>{class GroupwareEmailArchivePaneBeans{constructor(e,t){this.groupware=e,this.language=t,this.groupware.loadLinkedBeans()}get beans(){return this.groupware.relatedBeans}static#e=this.ɵfac=function(e){return new(e||GroupwareEmailArchivePaneBeans)(m.rXU(f),m.rXU(b.B))};static#t=this.ɵcmp=m.VBU({type:GroupwareEmailArchivePaneBeans,selectors:[["groupware-email-archive-pane-beans"]],decls:2,vars:2,consts:[["class","slds-p-around--x-small slds-p-right--large","system-to-bottom","",4,"ngIf"],[4,"ngIf"],["system-to-bottom","",1,"slds-p-around--x-small","slds-p-right--large"],[3,"bean","system-model-provider",4,"ngFor","ngForOf"],[3,"bean","system-model-provider"]],template:function(e,t){1&e&&m.DNE(0,ce,2,1,"div",0)(1,de,1,0,"groupware-pane-no-beans-found",1),2&e&&(m.Y8G("ngIf",t.beans.length>0),m.R7$(),m.Y8G("ngIf",0==t.beans.length))},dependencies:[w.Sq,w.bT,le.v,P.b,$,D],encapsulation:2})}return GroupwareEmailArchivePaneBeans})();const ue=(e,t,s)=>({module:e,id:t,data:s});function he(e,t){if(1&e&&m.nrm(0,"groupware-pane-bean",8),2&e){const e=t.$implicit;m.Y8G("bean",e)("system-model-provider",m.sMw(2,ue,e.module,e.id,e.data))}}function pe(e,t){if(1&e&&m.nrm(0,"groupware-email-archive-pane-attachment",11),2&e){const e=t.$implicit;m.Y8G("attachment",e)}}function ge(e,t){if(1&e&&(m.qex(0),m.j41(1,"h2",3),m.nrm(2,"system-label",9),m.k0s(),m.j41(3,"div",5),m.DNE(4,pe,1,1,"groupware-email-archive-pane-attachment",10),m.k0s(),m.bVm()),2&e){const e=m.XpG(2);m.R7$(4),m.Y8G("ngForOf",e.attachments)}}function fe(e,t){if(1&e&&(m.j41(0,"div",2)(1,"h2",3),m.nrm(2,"system-label",4),m.k0s(),m.j41(3,"div",5),m.DNE(4,he,1,6,"groupware-pane-bean",6),m.k0s(),m.DNE(5,ge,5,1,"ng-container",7),m.k0s()),2&e){const e=m.XpG();m.R7$(4),m.Y8G("ngForOf",e.beans),m.R7$(),m.Y8G("ngIf",e.attachments.length>0)}}function be(e,t){1&e&&(m.j41(0,"div",12),m.nrm(1,"system-label",13),m.k0s())}let ve=(()=>{class GroupwareEmailArchivePaneLinked{constructor(e,t){this.groupware=e,this.language=t}get beans(){return this.groupware.archiveto}get attachments(){return this.groupware.archiveattachments}static#e=this.ɵfac=function(e){return new(e||GroupwareEmailArchivePaneLinked)(m.rXU(f),m.rXU(b.B))};static#t=this.ɵcmp=m.VBU({type:GroupwareEmailArchivePaneLinked,selectors:[["groupware-email-archive-pane-linked"]],decls:2,vars:2,consts:[["system-to-bottom","",4,"ngIf"],["class","slds-p-around--medium slds-align--absolute-center","system-to-bottom-noscroll","",4,"ngIf"],["system-to-bottom",""],[1,"slds-p-vertical--xx-small","slds-p-around--x-small","slds-theme--shade"],["label","LBL_LINKED_TO_CRM"],[1,"slds-p-around--x-small"],[3,"bean","system-model-provider",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"bean","system-model-provider"],["label","LBL_ATTACHMENTS"],[3,"attachment",4,"ngFor","ngForOf"],[3,"attachment"],["system-to-bottom-noscroll","",1,"slds-p-around--medium","slds-align--absolute-center"],["label","MSG_NO_RECORDS_SELECTED"]],template:function(e,t){1&e&&m.DNE(0,fe,6,2,"div",0)(1,be,2,0,"div",1),2&e&&(m.Y8G("ngIf",t.beans.length>0),m.R7$(),m.Y8G("ngIf",0==t.beans.length))},dependencies:[w.Sq,w.bT,Y.W,le.v,P.b,F.p,$,N],encapsulation:2})}return GroupwareEmailArchivePaneLinked})();var we=s(65029),_e=s(54546);function Ge(e,t){if(1&e&&m.nrm(0,"system-icon",23),2&e){const e=m.XpG();m.Y8G("module",e._searchmodule)}}function ye(e,t){1&e&&m.nrm(0,"system-utility-icon",24)}function ke(e,t){1&e&&m.nrm(0,"system-utility-icon",25)}function Re(e,t){1&e&&m.nrm(0,"system-utility-icon",25)}function Ie(e,t){if(1&e){const e=m.RV6();m.j41(0,"li",8),m.bIt("click",(function(){const t=m.eBV(e).$implicit,s=m.XpG();return m.Njj(s.searchmodule=t)})),m.j41(1,"div",9)(2,"div",10),m.DNE(3,Re,1,0,"system-utility-icon",11),m.k0s(),m.j41(4,"div",12)(5,"div",13),m.nrm(6,"system-label-modulename",26),m.k0s()()()()}if(2&e){const e=t.$implicit,s=m.XpG();m.R7$(3),m.Y8G("ngIf",e==s._searchmodule),m.R7$(3),m.Y8G("module",e)}}const xe=(e,t,s)=>({module:e,id:t,data:s});function Ee(e,t){if(1&e&&m.nrm(0,"groupware-pane-bean",27),2&e){const e=t.$implicit;m.Y8G("bean",e)("system-model-provider",m.sMw(2,xe,e.module,e.id,e.data))}}let Ae=(()=>{class GroupwareEmailArchivePaneSearch{constructor(e,t,s,a,i){this.backend=e,this.language=t,this.metadata=s,this.groupware=a,this.fts=i,this.searchTerm="",this.beans=[],this.searching=!1,this.searchTimeOut=void 0,this._searchmodule="all",this.autocompleteid=_.uniqueId()}set selectAll(e){this.groupware.archiveto=e?this.beans.slice():[]}get selectAll(){return this.groupware.archiveto.length>0&&this.groupware.archiveto.length==this.beans.length}get searchmodule(){return this.language.getModuleName(this._searchmodule)}set searchmodule(e){this._searchmodule=e,this.searchTerm&&this.searchSpice()}get moduleTitle(){return"all"==this._searchmodule?this.language.getLabel("LBL_ALL"):this.searchmodule}get searchmodules(){let e=[],t=this.fts.searchModules;for(let s of t){let t=this.metadata.getModuleFields(s);for(let a in t)if("link"==t[a].type&&("emails"==a||"Emails"==t[a].module)){e.push(s);break}}return e.sort(((e,t)=>this.language.getModuleName(e)>this.language.getModuleName(t)?1:-1)),e}search(e){switch(e.key){case"ArrowDown":case"ArrowUp":break;case"Enter":this.searchTerm.length&&(this.searchTimeOut&&window.clearTimeout(this.searchTimeOut),this.searchSpice());break;default:this.searchTimeOut&&window.clearTimeout(this.searchTimeOut),this.searchTimeOut=window.setTimeout((()=>this.searchSpice()),1e3)}}searchSpice(){this.searching=!0,this.beans=[];let e=[];"all"!=this._searchmodule?e.push(this._searchmodule):e=this.searchmodules,this.fts.searchByModules({searchterm:this.searchTerm,modules:e,size:10}).subscribe((e=>{let t=[];for(let e of this.fts.moduleSearchresults)t=t.concat(e.data.hits);t.sort(((e,t)=>e._score>t._score?-1:1));for(let e of t)this.beans.push({id:e._id,module:e._source._module?e._source._module:e._type,data:e._source});this.searching=!1}))}static#e=this.ɵfac=function(e){return new(e||GroupwareEmailArchivePaneSearch)(m.rXU(h.H),m.rXU(b.B),m.rXU(v.yu),m.rXU(f),m.rXU(we.s))};static#t=this.ɵcmp=m.VBU({type:GroupwareEmailArchivePaneSearch,selectors:[["groupware-email-archive-pane-search"]],decls:23,vars:11,consts:[[1,"slds-p-around--x-small","slds-height_full",3,"system-overlay-loading-spinner"],[1,"slds-form-element","slds-grid","slds-grid--vertical-align-center","slds-grid--align-spread"],["system-dropdown-trigger-simple","",1,"slds-dropdown-trigger","slds-dropdown-trigger_click"],[1,"slds-button","slds-button--icon-border","slds-m-right--xx-small",3,"title"],["size","small","divClass","",3,"module",4,"ngIf"],["size","x-small","icon","world",4,"ngIf"],[1,"slds-dropdown","slds-dropdown_left"],["role","group",1,"slds-listbox","slds-listbox_vertical"],["role","presentation",1,"slds-listbox__item",3,"click"],["role","option",1,"slds-media","slds-listbox__option","slds-listbox__option_plain","slds-media_small"],[1,"slds-media__figure","slds-listbox__option-icon"],["icon","check","size","x-small",4,"ngIf"],[1,"slds-media__body"],[1,"slds-truncate"],["label","LBL_ALL"],["role","presentation","class","slds-listbox__item",3,"click",4,"ngFor","ngForOf"],[1,"slds-grow","slds-form-element__control"],["type","text","id","search-term","autoComplete","off",1,"slds-input",3,"placeholder","ngModel","ngModelChange","keyup"],[1,"slds-border--bottom","slds-p-horizontal--x-small","slds-p-top--xx-small"],[3,"ngModel","indeterminate","ngModelChange"],["label","LBL_SELECT_ALL"],["system-to-bottom","",1,"slds-p-vertical--small"],[3,"bean","system-model-provider",4,"ngFor","ngForOf"],["size","small","divClass","",3,"module"],["size","x-small","icon","world"],["icon","check","size","x-small"],[3,"module"],[3,"bean","system-model-provider"]],template:function(e,t){1&e&&(m.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),m.DNE(4,Ge,1,1,"system-icon",4)(5,ye,1,0,"system-utility-icon",5),m.k0s(),m.j41(6,"div",6)(7,"ul",7)(8,"li",8),m.bIt("click",(function(){return t.searchmodule="all"})),m.j41(9,"div",9)(10,"div",10),m.DNE(11,ke,1,0,"system-utility-icon",11),m.k0s(),m.j41(12,"div",12)(13,"div",13),m.nrm(14,"system-label",14),m.k0s()()()(),m.DNE(15,Ie,7,2,"li",15),m.k0s()()(),m.j41(16,"div",16)(17,"input",17),m.mxI("ngModelChange",(function(e){return m.DH7(t.searchTerm,e)||(t.searchTerm=e),e})),m.bIt("keyup",(function(e){return t.search(e)})),m.k0s()()(),m.j41(18,"div",18)(19,"system-checkbox",19),m.mxI("ngModelChange",(function(e){return m.DH7(t.selectAll,e)||(t.selectAll=e),e})),m.nrm(20,"system-label",20),m.k0s()(),m.j41(21,"div",21),m.DNE(22,Ee,1,6,"groupware-pane-bean",22),m.k0s()()),2&e&&(m.Y8G("system-overlay-loading-spinner",t.searching),m.R7$(3),m.Y8G("title",t.moduleTitle),m.R7$(),m.Y8G("ngIf","all"!=t._searchmodule),m.R7$(),m.Y8G("ngIf","all"==t._searchmodule),m.R7$(6),m.Y8G("ngIf","all"==t._searchmodule),m.R7$(4),m.Y8G("ngForOf",t.searchmodules),m.R7$(2),m.Y8G("placeholder",t.language.getLabel("LBL_SEARCH_SPICE")),m.R50("ngModel",t.searchTerm),m.R7$(2),m.R50("ngModel",t.selectAll),m.Y8G("indeterminate",(null==t.groupware.archiveto?null:t.groupware.archiveto.length)>0&&(null==t.beans?null:t.beans.length)!=(null==t.groupware.archiveto?null:t.groupware.archiveto.length)),m.R7$(3),m.Y8G("ngForOf",t.beans))},dependencies:[w.Sq,w.bT,n.me,n.BC,n.vS,te.f,G.J,Y.W,y.r,M.B,le.v,_e.C,P.b,T.M,$],encapsulation:2})}return GroupwareEmailArchivePaneSearch})();var Be=s(57363),$e=s(4921),je=s(25863);const Ye=["footer"];function Fe(e,t){if(1&e){const e=m.RV6();m.j41(0,"li",9),m.bIt("click",(function(){const t=m.eBV(e).$implicit,s=m.XpG();return m.Njj(s.callAction(t))})),m.j41(1,"a",10)(2,"span",11),m.nrm(3,"system-label",12),m.k0s()()()}if(2&e){const e=t.$implicit,s=m.XpG();m.R7$(2),m.Y8G("title",s.language.getLabel(e.actionconfig.label)),m.R7$(),m.Y8G("label",e.actionconfig.label)}}let De=(()=>{class GroupwareDetailPanefooter{constructor(e,t,s,a,i){this.router=e,this.metadata=t,this.language=s,this.footer=a,this.elementRef=i,this._currentroute="groupware/mailitem"}ngAfterViewInit(){this.setFooterHeight()}ngOnDestroy(){this.clearFooterHeight()}setFooterHeight(){let e=this.footerElement.nativeElement.getBoundingClientRect();this.footer.visibleFooterHeight=e.height}clearFooterHeight(){this.footer.visibleFooterHeight=0}callAction(e){this.router.navigate([e.actionconfig.route])}get currentroute(){return this._currentroute}set currentroute(e){e&&(this._currentroute=e,this.router.navigate([e]))}get actions(){let e=this.metadata.getComponentConfig("OutlookPane");return e.actionset?this.metadata.getActionSetItems(e.actionset):[]}static#e=this.ɵfac=function(e){return new(e||GroupwareDetailPanefooter)(m.rXU(Be.Ix),m.rXU(v.yu),m.rXU(b.B),m.rXU($e.q),m.rXU(m.aKT))};static#t=this.ɵcmp=m.VBU({type:GroupwareDetailPanefooter,selectors:[["groupware-detail-pane-footer"]],viewQuery:function(e,t){if(1&e&&m.GBs(Ye,5),2&e){let e;m.mGM(e=m.lsd())&&(t.footerElement=e.first)}},decls:9,vars:1,consts:[[1,"slds-docked-form-footer"],["footer",""],[1,"slds-size--1-of-1","slds-p-horizontal--xx-small","slds-grid","slds-grid--align-spread"],["system-dropdown-trigger-simple","",1,"slds-dropdown-trigger","slds-dropdown-trigger_click"],["aria-haspopup","true","title","Show More",1,"slds-button","slds-button_icon","slds-button_icon-border-filled"],["icon","rows"],[1,"slds-dropdown","slds-dropdown--bottom","slds-dropdown_left"],["role","menu","aria-label","Show More",1,"slds-dropdown__list"],["class","slds-dropdown__item","role","presentation",3,"click",4,"ngFor","ngForOf"],["role","presentation",1,"slds-dropdown__item",3,"click"],["href","javascript:void(0);","role","menuitem"],[1,"slds-truncate",3,"title"],[3,"label"]],template:function(e,t){1&e&&(m.j41(0,"div",0,1)(2,"div",2)(3,"div",3)(4,"button",4),m.nrm(5,"system-button-icon",5),m.k0s(),m.j41(6,"div",6)(7,"ul",7),m.DNE(8,Fe,4,2,"li",8),m.k0s()()()()()),2&e&&(m.R7$(8),m.Y8G("ngForOf",t.actions))},dependencies:[w.Sq,je.t,Y.W,_e.C],encapsulation:2})}return GroupwareDetailPanefooter})();var Ce=s(1876),Xe=s(29895),Ue=s(37263);function Pe(e,t){if(1&e&&(m.qex(0),m.EFF(1),m.bVm()),2&e){const e=m.XpG();m.R7$(),m.JRh(e.model.data.summary_text)}}const Oe=()=>({displayLabels:!1});function Se(e,t){if(1&e&&m.nrm(0,"object-record-fieldset-horizontal-list",11),2&e){const e=m.XpG();m.Y8G("fieldset",e.fieldset)("system-view-provider",m.lJ4(2,Oe))}}let Le=(()=>{class GroupwareDetailPaneHeader extends Ce.e{ngOnInit(){super.ngOnInit();let e=this.componentconfig&&!_.isEmpty(this.componentconfig)?this.componentconfig:this.metadata.getComponentConfig("GroupwareDetailPaneHeader",this.model.module);e.fieldset&&(this.fieldset=e.fieldset)}static#e=this.ɵfac=(()=>{let e;return function(t){return(e||(e=m.xGo(GroupwareDetailPaneHeader)))(t||GroupwareDetailPaneHeader)}})();static#t=this.ɵcmp=m.VBU({type:GroupwareDetailPaneHeader,selectors:[["groupware-detail-pane-header"]],features:[m.Jv_([d.U]),m.Vt3],decls:12,vars:4,consts:[[1,"slds-page-header"],[1,"slds-grid"],[1,"slds-col","slds-has-flexi-truncate"],[1,"slds-media","slds-no-space","slds-grow"],[3,"module","click"],[1,"slds-media__body"],[1,"slds-text-title--caps","slds-line-height--reset"],[3,"module"],[1,"slds-page-header__title","slds-m-right--small","slds-align-middle","slds-truncate"],[4,"ngIf"],[3,"fieldset","system-view-provider",4,"ngIf"],[3,"fieldset","system-view-provider"]],template:function(e,t){1&e&&(m.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"system-icon",4),m.bIt("click",(function(){return t.goToModule()})),m.k0s(),m.j41(5,"div",5)(6,"p",6),m.nrm(7,"system-label-modulename",7),m.k0s(),m.j41(8,"div")(9,"h1",8),m.DNE(10,Pe,2,1,"ng-container",9)(11,Se,1,3,"object-record-fieldset-horizontal-list",10),m.k0s()()()()()()()),2&e&&(m.R7$(4),m.Y8G("module",t.moduleName),m.R7$(3),m.Y8G("module",t.moduleName),m.R7$(3),m.Y8G("ngIf",!t.fieldset),m.R7$(),m.Y8G("ngIf",t.fieldset))},dependencies:[w.bT,G.J,y.r,Xe.b,Ue.x],encapsulation:2})}return GroupwareDetailPaneHeader})();function Ne(e,t){if(1&e&&(m.j41(0,"span"),m.EFF(1),m.k0s()),2&e){const e=m.XpG();m.R7$(),m.JRh(e.model.data.summary_text)}}function Me(e,t){if(1&e&&(m.j41(0,"li",9),m.nrm(1,"field-container",13),m.k0s()),2&e){const e=m.XpG().$implicit;m.R7$(),m.Y8G("field",e.field)("fieldconfig",e.fieldconfig)}}function Te(e,t){if(1&e&&(m.qex(0),m.DNE(1,Me,2,2,"li",12),m.bVm()),2&e){const e=t.$implicit,s=m.XpG(2);m.R7$(),m.Y8G("ngIf",s.model.getField(e.field))}}function Ve(e,t){if(1&e&&(m.j41(0,"ul",8),m.DNE(1,Te,2,1,"ng-container",11),m.k0s()),2&e){const e=m.XpG();m.R7$(),m.Y8G("ngForOf",e.mainfieldsetfields)}}function He(e,t){if(1&e&&(m.j41(0,"li",9),m.nrm(1,"field-container",13),m.k0s()),2&e){const e=m.XpG().$implicit;m.R7$(),m.Y8G("field",e.field)("fieldconfig",e.fieldconfig)}}function ze(e,t){if(1&e&&(m.qex(0),m.DNE(1,He,2,2,"li",12),m.bVm()),2&e){const e=t.$implicit,s=m.XpG();m.R7$(),m.Y8G("ngIf",s.model.getField(e.field))}}let qe=(()=>{class GroupwareDetailPaneBean{constructor(e,t,s,a,i,n){this.groupware=e,this.language=t,this.metadata=s,this.model=a,this.router=i,this.view=n,this.selected=new m.bkB,this.view.displayLabels=!1}ngOnInit(){this.model.module=this.bean.module,this.model.id=this.bean.id,this.model.setData(this.bean.data);let e=this.metadata.getComponentConfig("GlobalHeaderSearchResultsItem",this.model.module);e&&e.mainfieldset&&(this.mainfieldsetfields=this.metadata.getFieldSetItems(e.mainfieldset)),e&&e.subfieldset&&(this.subfieldsetfields=this.metadata.getFieldSetItems(e.subfieldset))}onClick(e){this.selected.emit({module:this.bean.module,id:this.bean.id})}static#e=this.ɵfac=function(e){return new(e||GroupwareDetailPaneBean)(m.rXU(f),m.rXU(b.B),m.rXU(v.yu),m.rXU(p.g),m.rXU(Be.Ix),m.rXU(d.U))};static#t=this.ɵcmp=m.VBU({type:GroupwareDetailPaneBean,selectors:[["groupware-detail-pane-bean"]],inputs:{bean:"bean"},outputs:{selected:"selected"},features:[m.Jv_([d.U,p.g])],decls:12,vars:6,consts:[[1,"slds-tile","slds-media","slds-p-vertical--xx-small","slds-has-divider--bottom",3,"click"],[1,"slds-p-vertical--xx-small"],["size","small",3,"module"],[1,"slds-media__body"],[1,"slds-grid","slds-has-flexi-truncate"],[4,"ngIf"],["class","slds-list_horizontal slds-has-dividers_right slds-truncate",4,"ngIf"],["title","Bean Module",1,"slds-truncate","slds-text-body_small"],[1,"slds-list_horizontal","slds-has-dividers_right","slds-truncate"],[1,"slds-item"],[3,"module","singular"],[4,"ngFor","ngForOf"],["class","slds-item",4,"ngIf"],["fielddisplayclass","slds-truncate",3,"field","fieldconfig"]],template:function(e,t){1&e&&(m.j41(0,"article",0),m.bIt("click",(function(e){return t.onClick(e)})),m.j41(1,"div",1),m.nrm(2,"system-icon",2),m.k0s(),m.j41(3,"div",3)(4,"div",4),m.DNE(5,Ne,2,1,"span",5)(6,Ve,2,1,"ul",6),m.k0s(),m.j41(7,"div",7)(8,"ul",8)(9,"li",9),m.nrm(10,"system-label-modulename",10),m.k0s(),m.DNE(11,ze,2,1,"ng-container",11),m.k0s()()()()),2&e&&(m.R7$(2),m.Y8G("module",t.model.module),m.R7$(3),m.Y8G("ngIf",!t.mainfieldsetfields),m.R7$(),m.Y8G("ngIf",t.mainfieldsetfields),m.R7$(4),m.Y8G("module",t.model.module)("singular",!0),m.R7$(),m.Y8G("ngForOf",t.subfieldsetfields))},dependencies:[w.Sq,w.bT,G.J,y.r,k.y],encapsulation:2})}return GroupwareDetailPaneBean})();var Je=s(48717);function We(e,t){if(1&e){const e=m.RV6();m.j41(0,"groupware-detail-pane-bean",17),m.bIt("selected",(function(t){m.eBV(e);const s=m.XpG(2);return m.Njj(s.selectBean(t))})),m.k0s()}if(2&e){const e=t.$implicit;m.Y8G("bean",e)}}function Ke(e,t){if(1&e&&(m.j41(0,"div",15),m.DNE(1,We,1,1,"groupware-detail-pane-bean",16),m.k0s()),2&e){const e=m.XpG();m.R7$(),m.Y8G("ngForOf",e.groupware.relatedBeans)}}function Qe(e,t){1&e&&m.nrm(0,"groupware-pane-no-beans-found",18)}function Ze(e,t){1&e&&(m.j41(0,"div",19),m.nrm(1,"system-spinner"),m.k0s())}let et=(()=>{class GroupwareDetailPane{constructor(e,t,s,a){this.groupware=e,this.router=t,this.broadcast=s,this.cdref=a,this.loading=!1,this.subscriptions=new C.yU}ngOnInit(){this.loadRecords(),this.subscriptions.add(this.broadcast.message$.subscribe((e=>{this.handleMessage(e)})))}ngOnDestroy(){this.subscriptions.unsubscribe()}handleMessage(e){if("groupware.itemchanged"===e.messagetype)this.loadRecords()}loadRecords(){this.loading=!0,this.groupware.loadLinkedBeans().subscribe((e=>{1==e.length&&this.router.navigate(["/groupware/details/"+e[0].module+"/"+e[0].id]),this.loading=!1,this.cdref.detectChanges()}),(e=>{this.loading=!1}))}selectBean(e){this.router.navigate(["/groupware/details/"+e.module+"/"+e.id])}static#e=this.ɵfac=function(e){return new(e||GroupwareDetailPane)(m.rXU(f),m.rXU(Be.Ix),m.rXU(g.m),m.rXU(m.gRc))};static#t=this.ɵcmp=m.VBU({type:GroupwareDetailPane,selectors:[["groupware-detail-pane"]],decls:16,vars:4,consts:[[1,"slds-page-header"],[1,"slds-page-header__row"],[1,"slds-page-header__col-title"],[1,"slds-media"],["icon","dynamic_record_choice"],[1,"slds-media__body"],[1,"slds-page-header__name"],[1,"slds-page-header__name-title"],[1,"slds-page-header__title","slds-truncate"],["label","LBL_RECORDS"],[1,"slds-page-header__name-meta"],[3,"label"],["class","slds-p-around--x-small",4,"ngIf"],["class","slds-align--absolute-center","system-to-bottom-noscroll","",4,"ngIf"],["class","slds-p-around--small slds-align--absolute-center",4,"ngIf"],[1,"slds-p-around--x-small"],[3,"bean","selected",4,"ngFor","ngForOf"],[3,"bean","selected"],["system-to-bottom-noscroll","",1,"slds-align--absolute-center"],[1,"slds-p-around--small","slds-align--absolute-center"]],template:function(e,t){1&e&&(m.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),m.nrm(4,"system-icon",4),m.j41(5,"div",5)(6,"div",6)(7,"div",7)(8,"h1")(9,"span",8),m.nrm(10,"system-label",9),m.k0s()()()(),m.j41(11,"p",10),m.nrm(12,"system-label",11),m.k0s()()()()()(),m.DNE(13,Ke,2,1,"div",12)(14,Qe,1,0,"groupware-pane-no-beans-found",13)(15,Ze,2,0,"div",14)),2&e&&(m.R7$(12),m.Y8G("label",t.loading?"LBL_SEARCHING":"LBL_SELECT"),m.R7$(),m.Y8G("ngIf",!t.loading),m.R7$(),m.Y8G("ngIf",0==t.groupware.relatedBeans.length&&!t.loading),m.R7$(),m.Y8G("ngIf",t.loading))},dependencies:[w.Sq,w.bT,G.J,Y.W,Je.P,F.p,D,qe],encapsulation:2})}return GroupwareDetailPane})(),tt=(()=>{class ModuleGroupware{static#e=this.ɵfac=function(e){return new(e||ModuleGroupware)};static#t=this.ɵmod=m.$C({type:ModuleGroupware});static#s=this.ɵinj=m.G2t({imports:[a.Bb,i.q1,n.YN,l.SystemComponents,r.ObjectComponents,o.h,c.ObjectFields]})}return ModuleGroupware})();("undefined"==typeof ngJitMode||ngJitMode)&&m.Obh(tt,{declarations:[$,D,L,N,Z,V,ne,me,ve,Ae,et,z,De,Le,qe],imports:[a.Bb,i.q1,n.YN,l.SystemComponents,r.ObjectComponents,o.h,c.ObjectFields],exports:[Le]})}}]);