/*!
 * 
 *                     aacService
 *
 *                     release: 2023.01.001
 *
 *                     date: 2023-04-20 15:21:12
 *
 *                     build: 2023.01.001.1681996872955
 *
 */
"use strict";(self.webpackChunkcore=self.webpackChunkcore||[]).push([["src_include_groupware_groupware_ts"],{2149:(e,t,s)=>{s.r(t),s.d(t,{ModuleGroupware:()=>tt});var a=s(1481),i=s(529),n=s(433),o=s(1652),l=s(8363),r=s(4357),c=s(5886),d=s(2294),u=s(1571),m=s(7579),h=s(4505),p=s(5710),g=s(3369);let f=(()=>{class GroupwareService{constructor(e,t,s){this.backend=e,this.model=t,this.broadcast=s,this.emailId="",this._messageId="",this.isArchiving=!1,this.archiveto=[],this.archiveattachments=[],this.relatedBeans=[],this.attachments={attachments:[]}}addBean(e){this.archiveto.push(e),this.broadcast.broadcastMessage("groupware.activeto",e)}removeBean(e){let t=this.archiveto.findIndex((t=>e.id==t.id));this.archiveto.splice(t,1),this.broadcast.broadcastMessage("groupware.activeto",void 0)}checkBeanArchive(e){return this.archiveto.findIndex((t=>e.id==t.id))>=0}addAttachment(e){this.archiveattachments.push(e)}removeAttachment(e){let t=this.archiveattachments.findIndex((t=>e.id==t.id));this.archiveattachments.splice(t,1)}checkAttachmentArchive(e){return this.archiveattachments.findIndex((t=>t&&e.id==t.id))>=0}getAttachment(e){return this.attachments.attachments.find((t=>e==t.id))}checkRelatedBeans(e){return this.relatedBeans.findIndex((t=>e.id==t.id))>=0}getEmailFromSpice(){let e=new m.x,t={messageId:this._messageId};return this.backend.getRequest("channels/groupware/email",t).subscribe((t=>{this.emailId=t.email_id;for(let e in t.linkedBeans)this.checkBeanArchive(t.linkedBeans[e])||this.addBean(t.linkedBeans[e]);for(let e of t.attachments){let t=this.getAttachment(e.external_id);t&&this.addAttachment(t)}e.next(!0),e.complete()}),(t=>{console.log(t),e.error(!1),e.complete()})),e.asObservable()}loadLinkedBeans(){let e=new m.x,t=this.getEmailAddressData();return this.relatedBeans=[],this.backend.postRequest("module/EmailAddress/searchbeans",{},t).subscribe((t=>{for(let e in t)this.checkRelatedBeans(t[e])||this.relatedBeans.push(t[e]);e.next(this.relatedBeans),e.complete()}),(t=>{e.error(t)})),e.asObservable()}get messageId(){return this._messageId}set messageId(e){this._messageId=e}}return GroupwareService.ɵfac=function(e){return new(e||GroupwareService)(u.LFG(h.y),u.LFG(p.o),u.LFG(g.f))},GroupwareService.ɵprov=u.Yz7({token:GroupwareService,factory:GroupwareService.ɵfac}),GroupwareService})();var v=s(5329),w=s(4154),b=s(6895),x=s(4561),A=s(3333),Z=s(3634);function y(e,t){if(1&e&&(u.TgZ(0,"span"),u._uU(1),u.qZA()),2&e){const e=u.oxw();u.xp6(1),u.Oqu(e.model.data.summary_text)}}function G(e,t){if(1&e&&(u.TgZ(0,"li",18),u._UZ(1,"field-container",19),u.qZA()),2&e){const e=u.oxw().$implicit;u.xp6(1),u.Q6J("field",e.field)("fieldconfig",e.fieldconfig)}}function T(e,t){if(1&e&&(u.ynx(0),u.YNc(1,G,2,2,"li",17),u.BQk()),2&e){const e=t.$implicit,s=u.oxw(2);u.xp6(1),u.Q6J("ngIf",s.model.getField(e.field))}}function P(e,t){if(1&e&&(u.TgZ(0,"ul",13),u.YNc(1,T,2,1,"ng-container",16),u.qZA()),2&e){const e=u.oxw();u.xp6(1),u.Q6J("ngForOf",e.mainfieldsetfields)}}function J(e,t){if(1&e&&(u.TgZ(0,"li",14),u._UZ(1,"field-container",19),u.qZA()),2&e){const e=u.oxw().$implicit;u.xp6(1),u.Q6J("field",e.field)("fieldconfig",e.fieldconfig)}}function k(e,t){if(1&e&&(u.ynx(0),u.YNc(1,J,2,2,"li",20),u.BQk()),2&e){const e=t.$implicit,s=u.oxw();u.xp6(1),u.Q6J("ngIf",s.model.getField(e.field))}}let I=(()=>{class GroupwarePaneBean{constructor(e,t,s,a,i){this.groupware=e,this.language=t,this.metadata=s,this.model=a,this.view=i,this.view.displayLabels=!1,this.view.displayLinks=!1}ngOnInit(){let e=this.metadata.getComponentConfig("GlobalHeaderSearchResultsItem",this.model.module);e&&e.mainfieldset&&(this.mainfieldsetfields=this.metadata.getFieldSetItems(e.mainfieldset)),e&&e.subfieldset&&(this.subfieldsetfields=this.metadata.getFieldSetItems(e.subfieldset))}onClick(e){e.target.checked?this.groupware.addBean(this.bean):this.groupware.removeBean(this.bean)}}return GroupwarePaneBean.ɵfac=function(e){return new(e||GroupwarePaneBean)(u.Y36(f),u.Y36(v.d),u.Y36(w.Pu),u.Y36(p.o),u.Y36(d.e))},GroupwarePaneBean.ɵcmp=u.Xpm({type:GroupwarePaneBean,selectors:[["groupware-pane-bean"]],inputs:{bean:"bean"},features:[u._Bn([d.e])],decls:18,vars:10,consts:[[1,"slds-tile","slds-media","slds-p-vertical--xx-small"],[1,"slds-p-vertical--xx-small"],["size","small",3,"module"],[1,"slds-media__body"],[1,"slds-grid","slds-has-flexi-truncate"],[4,"ngIf"],["class","slds-list_horizontal slds-has-dividers_right slds-truncate",4,"ngIf"],[1,"slds-col--bump-left","slds-checkbox"],["type","checkbox","name","beans",3,"id","checked","click"],[1,"slds-checkbox__label"],[1,"slds-checkbox_faux"],[1,"slds-form-element__label","slds-assistive-text"],["title","Bean Module",1,"slds-truncate","slds-text-body_small"],[1,"slds-list_horizontal","slds-has-dividers_right","slds-truncate"],[1,"slds-item"],[3,"module","singular"],[4,"ngFor","ngForOf"],["class","slds-item slds-size--1-of-1",4,"ngIf"],[1,"slds-item","slds-size--1-of-1"],["fielddisplayclass","slds-truncate",3,"field","fieldconfig"],["class","slds-item",4,"ngIf"]],template:function(e,t){1&e&&(u.TgZ(0,"article",0)(1,"div",1),u._UZ(2,"system-icon",2),u.qZA(),u.TgZ(3,"div",3)(4,"div",4),u.YNc(5,y,2,1,"span",5),u.YNc(6,P,2,1,"ul",6),u.TgZ(7,"div",7)(8,"input",8),u.NdJ("click",(function(e){return t.onClick(e)})),u.qZA(),u.TgZ(9,"label",9),u._UZ(10,"span",10),u.TgZ(11,"span",11),u._uU(12),u.qZA()()()(),u.TgZ(13,"div",12)(14,"ul",13)(15,"li",14),u._UZ(16,"system-label-modulename",15),u.qZA(),u.YNc(17,k,2,1,"ng-container",16),u.qZA()()()()),2&e&&(u.xp6(2),u.Q6J("module",t.model.module),u.xp6(3),u.Q6J("ngIf",!t.mainfieldsetfields),u.xp6(1),u.Q6J("ngIf",t.mainfieldsetfields),u.xp6(2),u.Q6J("id","bean-"+t.bean.id)("checked",t.groupware.checkBeanArchive(t.bean)),u.xp6(1),u.uIk("for","bean-"+t.bean.id),u.xp6(3),u.Oqu(t.bean.name),u.xp6(4),u.Q6J("module",t.model.module)("singular",!0),u.xp6(1),u.Q6J("ngForOf",t.subfieldsetfields))},dependencies:[b.sg,b.O5,x.f,A.M,Z.j],encapsulation:2}),GroupwarePaneBean})();var E=s(4730),Q=s(3463),Y=s(3194);let B=(()=>{class GroupwarePaneNoBeansFound{}return GroupwarePaneNoBeansFound.ɵfac=function(e){return new(e||GroupwarePaneNoBeansFound)},GroupwarePaneNoBeansFound.ɵcmp=u.Xpm({type:GroupwarePaneNoBeansFound,selectors:[["groupware-pane-no-beans-found"]],decls:3,vars:0,consts:[["system-to-bottom-noscroll","",1,"slds-align--absolute-center","slds-grid--vertical"],[1,"slds-p-around--medium",2,"max-width","250px"],["label","MSG_NO_RECORDS_FOUND"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0)(1,"system-illustration-no-records",1),u._UZ(2,"system-label",2),u.qZA()())},dependencies:[E.C,Q._,Y.t],encapsulation:2}),GroupwarePaneNoBeansFound})();var O=s(727),C=s(2032),F=s(7017),N=s(1058);const q=["header"],L=["main"];let M=(()=>{class GroupwareDetailPaneView{constructor(e,t,s,a,i){this.navigation=e,this.navigationtab=t,this.broadcast=s,this.metadata=a,this.model=i,this.initialized=!1,this.componentRefs=[],this.componentSubscriptions=new O.w0,this.componentSubscriptions.add(this.navigationtab.activeRoute$.subscribe((e=>{this.setRouteData(e)}))),this.componentSubscriptions.add(this.broadcast.message$.subscribe((e=>{this.handleMessage(e)})))}setRouteData(e){e.params.module&&e.params.id&&(this.model.module!=e.params.module||this.model.id!=e.params.id)&&(this.model.module=e.params.module,this.model.id=e.params.id,this.model.getData(!0,"detailview",!0,!0).subscribe((e=>{this.navigationtab.setTabInfo({displayname:e.summary_text,displaymodule:this.model.module})})),this.initialized&&this.buildContainer())}handleMessage(e){if("applauncher.setrole"===e.messagetype)this.buildContainer()}ngAfterViewInit(){this.model.module&&this.model.id&&(this.initialized=!0,this.buildContainer())}ngOnDestroy(){this.componentSubscriptions.unsubscribe()}buildContainer(){for(let e of this.componentRefs)e.destroy();let e=this.metadata.getComponentConfig("GroupwareDetailPane",this.model.module);for(let t of this.metadata.getComponentSetObjects(e.header))this.metadata.addComponent(t.component,this.header).subscribe((e=>{e.instance.componentconfig=t.componentconfig,this.componentRefs.push(e)}));for(let t of this.metadata.getComponentSetObjects(e.main))this.metadata.addComponent(t.component,this.main).subscribe((e=>{e.instance.componentconfig=t.componentconfig,this.componentRefs.push(e)}))}}return GroupwareDetailPaneView.ɵfac=function(e){return new(e||GroupwareDetailPaneView)(u.Y36(C.G),u.Y36(F.d),u.Y36(g.f),u.Y36(w.Pu),u.Y36(p.o))},GroupwareDetailPaneView.ɵcmp=u.Xpm({type:GroupwareDetailPaneView,selectors:[["groupware-detail-pane-view"]],viewQuery:function(e,t){if(1&e&&(u.Gf(q,7,u.s_b),u.Gf(L,7,u.s_b)),2&e){let e;u.iGM(e=u.CRH())&&(t.header=e.first),u.iGM(e=u.CRH())&&(t.main=e.first)}},features:[u._Bn([p.o])],decls:5,vars:0,consts:[["header",""],["system-to-bottom","",1,"slds-theme--default"],["main",""]],template:function(e,t){1&e&&(u._UZ(0,"div",null,0),u.TgZ(2,"div",1),u._UZ(3,"div",null,2),u.qZA())},dependencies:[N.H],encapsulation:2}),GroupwareDetailPaneView})(),U=(()=>{class GroupwareEmailArchivePaneAttachment{constructor(e){this.groupware=e}onClick(e){e.target.checked?this.groupware.addAttachment(this.attachment):this.groupware.removeAttachment(this.attachment)}}return GroupwareEmailArchivePaneAttachment.ɵfac=function(e){return new(e||GroupwareEmailArchivePaneAttachment)(u.Y36(f))},GroupwareEmailArchivePaneAttachment.ɵcmp=u.Xpm({type:GroupwareEmailArchivePaneAttachment,selectors:[["groupware-email-archive-pane-attachment"]],inputs:{attachment:"attachment"},decls:14,vars:7,consts:[[1,"slds-tile","slds-media","slds-p-vertical--xx-small"],[1,"slds-media__figure"],[1,"slds-checkbox"],["type","checkbox","name","attachments",3,"id","checked","click"],[1,"slds-checkbox__label"],[1,"slds-checkbox_faux"],[1,"slds-form-element__label","slds-assistive-text"],[1,"slds-media__body"],[1,"slds-tile__title","slds-truncate","slds-text-heading--label",3,"title"],[1,"slds-tile__detail"],["title","Attachment Type",1,"slds-truncate","slds-text-body_small"]],template:function(e,t){1&e&&(u.TgZ(0,"article",0)(1,"div",1)(2,"div",2)(3,"input",3),u.NdJ("click",(function(e){return t.onClick(e)})),u.qZA(),u.TgZ(4,"label",4),u._UZ(5,"span",5),u.TgZ(6,"span",6),u._uU(7),u.qZA()()()(),u.TgZ(8,"div",7)(9,"h3",8),u._uU(10),u.qZA(),u.TgZ(11,"div",9)(12,"p",10),u._uU(13),u.qZA()()()()),2&e&&(u.xp6(3),u.Q6J("id","attachment-"+t.attachment.id)("checked",t.groupware.checkAttachmentArchive(t.attachment)),u.xp6(1),u.uIk("for","attachment-"+t.attachment.id),u.xp6(3),u.Oqu(t.attachment.name),u.xp6(2),u.Q6J("title",t.attachment.name),u.xp6(1),u.hij(" ",t.attachment.name," "),u.xp6(3),u.hij(" ",t.attachment.contentType," "))},encapsulation:2}),GroupwareEmailArchivePaneAttachment})();var S=s(8859),D=s(4021);let H=(()=>{class GroupwareEmailArchivePaneHeader{constructor(e,t,s){this.language=e,this.groupware=t,this.cdRef=s}archive(){this.groupware.archiveEmail().subscribe((e=>{}),(e=>{}),(()=>{this.cdRef.detectChanges()}))}get canArchive(){return this.groupware.archiveto.length>0&&!this.groupware.isArchiving}get isArchived(){return 0!==this.groupware.emailId.length}}return GroupwareEmailArchivePaneHeader.ɵfac=function(e){return new(e||GroupwareEmailArchivePaneHeader)(u.Y36(v.d),u.Y36(f),u.Y36(u.sBO))},GroupwareEmailArchivePaneHeader.ɵcmp=u.Xpm({type:GroupwareEmailArchivePaneHeader,selectors:[["groupware-email-archive-pane-header"]],decls:20,vars:3,consts:[[1,"slds-page-header","slds-page-header_record-home"],[1,"slds-page-header__row"],[1,"slds-page-header__col-title"],[1,"slds-media"],["module","Emails"],[1,"slds-media__body"],[1,"slds-page-header__name"],[1,"slds-page-header__name-title"],[1,"slds-page-header__title","slds-truncate"],["module","Emails",3,"singular"],[1,"slds-page-header__name-meta"],[3,"label"],[1,"slds-page-header__col-actions"],[1,"slds-page-header__controls"],[1,"slds-page-header__control"],[1,"slds-button-group-list"],[1,"slds-button","slds-button_neutral",3,"disabled","click"],["label","LBL_ARCHIVE"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),u._UZ(4,"system-icon",4),u.TgZ(5,"div",5)(6,"div",6)(7,"div",7)(8,"h1")(9,"span",8),u._UZ(10,"system-label-modulename",9),u.qZA()()()(),u.TgZ(11,"p",10),u._UZ(12,"system-label",11),u.qZA()()()(),u.TgZ(13,"div",12)(14,"div",13)(15,"div",14)(16,"ul",15)(17,"li")(18,"button",16),u.NdJ("click",(function(){return t.archive()})),u._UZ(19,"system-label",17),u.qZA()()()()()()()()),2&e&&(u.xp6(10),u.Q6J("singular",!0),u.xp6(2),u.Q6J("label",t.isArchived?"LBL_ARCHIVED":"LBL_NOT_ARCHIVED"),u.xp6(6),u.Q6J("disabled",!t.canArchive))},dependencies:[x.f,Q._,A.M],encapsulation:2}),GroupwareEmailArchivePaneHeader})();var R=s(6951);let z=(()=>{class GroupwareEmailArchivePaneItem{constructor(){this.componentconfig=[]}}return GroupwareEmailArchivePaneItem.ɵfac=function(e){return new(e||GroupwareEmailArchivePaneItem)},GroupwareEmailArchivePaneItem.ɵcmp=u.Xpm({type:GroupwareEmailArchivePaneItem,selectors:[["groupware-email-archive-pane-item"]],inputs:{componentconfig:"componentconfig"},decls:1,vars:1,consts:[[3,"componentset"]],template:function(e,t){1&e&&u._UZ(0,"system-componentset",0),2&e&&u.Q6J("componentset",t.componentconfig.componentset)},dependencies:[R.E],encapsulation:2}),GroupwareEmailArchivePaneItem})();const $=function(e){return{"slds-is-active":e}};function j(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"li",4),u.NdJ("click",(function(){const t=u.CHM(e).index,s=u.oxw();return u.KtG(s.setActiveTabIndex(t))})),u.TgZ(1,"a",5),u._UZ(2,"system-utility-icon",6),u.qZA()()}if(2&e){const e=t.$implicit,s=t.index,a=u.oxw();u.Q6J("ngClass",u.VKq(2,$,s===a.activetab)),u.xp6(2),u.Q6J("icon",e.icon)}}function X(e,t){if(1&e&&u._UZ(0,"groupware-email-archive-pane-item",9),2&e){const e=u.oxw().$implicit;u.Q6J("componentconfig",e)}}const V=function(e){return{"slds-hide":e}};function K(e,t){if(1&e&&(u.TgZ(0,"div",7),u.YNc(1,X,1,1,"groupware-email-archive-pane-item",8),u.qZA()),2&e){const e=t.$implicit,s=t.index,a=u.oxw();u.Q6J("ngClass",u.VKq(2,V,a.activetab!=s)),u.xp6(1),u.Q6J("ngIf",e.componentset)}}let W=(()=>{class GroupwareEmailArchivePane{constructor(e,t,s){this.metadata=e,this.view=t,this.groupware=s,this.activetab=0,this.groupware.getEmailFromSpice()}get isLoading(){return this.groupware.isArchiving}ngOnInit(){if(this.componentconfig||(this.componentconfig=this.metadata.getComponentConfig("GroupwareEmailArchivePane")),this.componentconfig&&this.componentconfig.componentset){let e=this.metadata.getComponentSetObjects(this.componentconfig.componentset);this.componentconfig=[];for(let t of e)this.componentconfig.push(t.componentconfig)}this.view.isEditable=!0,this.view.setEditMode()}getTabs(){try{return this.componentconfig?this.componentconfig:[]}catch(e){return[]}}setActiveTabIndex(e){this.activetab=e}open(e){this.activetab=e}get isArchived(){return 0!==this.groupware.emailId.length}}return GroupwareEmailArchivePane.ɵfac=function(e){return new(e||GroupwareEmailArchivePane)(u.Y36(w.Pu),u.Y36(d.e),u.Y36(f))},GroupwareEmailArchivePane.ɵcmp=u.Xpm({type:GroupwareEmailArchivePane,selectors:[["groupware-email-archive-pane"]],features:[u._Bn([d.e])],decls:6,vars:3,consts:[[1,"slds-tabs_default",3,"system-overlay-loading-spinner"],["role","tablist",1,"slds-tabs_default__nav"],["class","slds-vertical-tabs__nav-item slds-text-title--caps","role","presentation",3,"ngClass","click",4,"ngFor","ngForOf"],["system-to-bottom-noscroll","","class","slds-vertical-tabs__content slds-scrollable--y slds-p-around--xx-small slds-show","role","tabpanel",3,"ngClass",4,"ngFor","ngForOf"],["role","presentation",1,"slds-vertical-tabs__nav-item","slds-text-title--caps",3,"ngClass","click"],["href","javascript:void(0)","role","tab","tabindex","-1","aria-selected","false",1,"slds-vertical-tabs__link"],["size","x-small",3,"icon"],["system-to-bottom-noscroll","","role","tabpanel",1,"slds-vertical-tabs__content","slds-scrollable--y","slds-p-around--xx-small","slds-show",3,"ngClass"],[3,"componentconfig",4,"ngIf"],[3,"componentconfig"]],template:function(e,t){1&e&&(u._UZ(0,"groupware-email-archive-pane-header"),u.TgZ(1,"div",0)(2,"ul",1),u.YNc(3,j,3,4,"li",2),u.qZA(),u.TgZ(4,"div"),u.YNc(5,K,2,4,"div",3),u.qZA()()),2&e&&(u.xp6(1),u.Q6J("system-overlay-loading-spinner",t.isLoading),u.xp6(2),u.Q6J("ngForOf",t.getTabs()),u.xp6(2),u.Q6J("ngForOf",t.getTabs()))},dependencies:[b.mk,b.sg,b.O5,S.r,Y.t,D._,H,z],encapsulation:2}),GroupwareEmailArchivePane})();var ee=s(6625),te=s(7514);function se(e,t){if(1&e&&u._UZ(0,"groupware-email-archive-pane-attachment",7),2&e){const e=t.$implicit;u.Q6J("attachment",e)}}function ae(e,t){if(1&e&&(u.TgZ(0,"div",5),u.YNc(1,se,1,1,"groupware-email-archive-pane-attachment",6),u.qZA()),2&e){const e=u.oxw();u.xp6(1),u.Q6J("ngForOf",e.attachments)}}function ie(e,t){1&e&&(u.TgZ(0,"div",8),u._UZ(1,"system-label",9),u.qZA())}let ne=(()=>{class GroupwareEmailArchivePaneAttachments{constructor(e,t,s){this.groupware=e,this.changeDetectorRef=t,this.configurationService=s,this.loadAttachments()}set selectAll(e){this.groupware.archiveattachments=e?this.attachments.slice():[]}get selectAll(){return this.groupware.archiveattachments.length>0&&this.groupware.archiveattachments.length==this.attachments.length}get attachments(){return this.groupware.attachments.attachments}loadAttachments(){this.groupware.getAttachments().subscribe((e=>{this.configurationService.getCapabilityConfig("emails").check_all_attachments_on_archive&&(this.groupware.archiveattachments=this.attachments.slice()),this.changeDetectorRef.detectChanges()}),(e=>{console.log(e)}))}}return GroupwareEmailArchivePaneAttachments.ɵfac=function(e){return new(e||GroupwareEmailArchivePaneAttachments)(u.Y36(f),u.Y36(u.sBO),u.Y36(ee.C))},GroupwareEmailArchivePaneAttachments.ɵcmp=u.Xpm({type:GroupwareEmailArchivePaneAttachments,selectors:[["groupware-email-archive-pane-attachments"]],decls:5,vars:4,consts:[[1,"slds-border--bottom","slds-p-horizontal--x-small","slds-p-top--xx-small"],[3,"ngModel","indeterminate","ngModelChange"],["label","LBL_SELECT_ALL"],["class","slds-p-around--x-small",4,"ngIf"],["class","slds-p-around--medium slds-align--absolute-center",4,"ngIf"],[1,"slds-p-around--x-small"],[3,"attachment",4,"ngFor","ngForOf"],[3,"attachment"],[1,"slds-p-around--medium","slds-align--absolute-center"],["label","MSG_NO_ATTACHMENTS_FOUND"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0)(1,"system-checkbox",1),u.NdJ("ngModelChange",(function(e){return t.selectAll=e})),u._UZ(2,"system-label",2),u.qZA()(),u.YNc(3,ae,2,1,"div",3),u.YNc(4,ie,2,0,"div",4)),2&e&&(u.xp6(1),u.Q6J("ngModel",t.selectAll)("indeterminate",(null==t.groupware.archiveattachments?null:t.groupware.archiveattachments.length)>0&&(null==t.attachments?null:t.attachments.length)!=(null==t.groupware.archiveattachments?null:t.groupware.archiveattachments.length)),u.xp6(2),u.Q6J("ngIf",t.attachments.length>0),u.xp6(1),u.Q6J("ngIf",0==t.attachments.length))},dependencies:[b.sg,b.O5,n.JJ,n.On,te.U,Q._,U],encapsulation:2}),GroupwareEmailArchivePaneAttachments})();var oe=s(7763);const le=function(e,t,s){return{module:e,id:t,data:s}};function re(e,t){if(1&e&&u._UZ(0,"groupware-pane-bean",4),2&e){const e=t.$implicit;u.Q6J("bean",e)("system-model-provider",u.kEZ(2,le,e.module,e.id,e.data))}}function ce(e,t){if(1&e&&(u.TgZ(0,"div",2),u.YNc(1,re,1,6,"groupware-pane-bean",3),u.qZA()),2&e){const e=u.oxw();u.xp6(1),u.Q6J("ngForOf",e.beans)}}function de(e,t){1&e&&u._UZ(0,"groupware-pane-no-beans-found")}let ue=(()=>{class GroupwareEmailArchivePaneBeans{constructor(e,t){this.groupware=e,this.language=t,this.groupware.loadLinkedBeans()}get beans(){return this.groupware.relatedBeans}}return GroupwareEmailArchivePaneBeans.ɵfac=function(e){return new(e||GroupwareEmailArchivePaneBeans)(u.Y36(f),u.Y36(v.d))},GroupwareEmailArchivePaneBeans.ɵcmp=u.Xpm({type:GroupwareEmailArchivePaneBeans,selectors:[["groupware-email-archive-pane-beans"]],decls:2,vars:2,consts:[["class","slds-p-around--x-small slds-p-right--large","system-to-bottom","",4,"ngIf"],[4,"ngIf"],["system-to-bottom","",1,"slds-p-around--x-small","slds-p-right--large"],[3,"bean","system-model-provider",4,"ngFor","ngForOf"],[3,"bean","system-model-provider"]],template:function(e,t){1&e&&(u.YNc(0,ce,2,1,"div",0),u.YNc(1,de,1,0,"groupware-pane-no-beans-found",1)),2&e&&(u.Q6J("ngIf",t.beans.length>0),u.xp6(1),u.Q6J("ngIf",0==t.beans.length))},dependencies:[b.sg,b.O5,oe.u,N.H,I,B],encapsulation:2}),GroupwareEmailArchivePaneBeans})();const me=function(e,t,s){return{module:e,id:t,data:s}};function he(e,t){if(1&e&&u._UZ(0,"groupware-pane-bean",8),2&e){const e=t.$implicit;u.Q6J("bean",e)("system-model-provider",u.kEZ(2,me,e.module,e.id,e.data))}}function pe(e,t){if(1&e&&u._UZ(0,"groupware-email-archive-pane-attachment",11),2&e){const e=t.$implicit;u.Q6J("attachment",e)}}function ge(e,t){if(1&e&&(u.ynx(0),u.TgZ(1,"h2",3),u._UZ(2,"system-label",9),u.qZA(),u.TgZ(3,"div",5),u.YNc(4,pe,1,1,"groupware-email-archive-pane-attachment",10),u.qZA(),u.BQk()),2&e){const e=u.oxw(2);u.xp6(4),u.Q6J("ngForOf",e.attachments)}}function fe(e,t){if(1&e&&(u.TgZ(0,"div",2)(1,"h2",3),u._UZ(2,"system-label",4),u.qZA(),u.TgZ(3,"div",5),u.YNc(4,he,1,6,"groupware-pane-bean",6),u.qZA(),u.YNc(5,ge,5,1,"ng-container",7),u.qZA()),2&e){const e=u.oxw();u.xp6(4),u.Q6J("ngForOf",e.beans),u.xp6(1),u.Q6J("ngIf",e.attachments.length>0)}}function ve(e,t){1&e&&(u.TgZ(0,"div",12),u._UZ(1,"system-label",13),u.qZA())}let we=(()=>{class GroupwareEmailArchivePaneLinked{constructor(e,t){this.groupware=e,this.language=t}get beans(){return this.groupware.archiveto}get attachments(){return this.groupware.archiveattachments}}return GroupwareEmailArchivePaneLinked.ɵfac=function(e){return new(e||GroupwareEmailArchivePaneLinked)(u.Y36(f),u.Y36(v.d))},GroupwareEmailArchivePaneLinked.ɵcmp=u.Xpm({type:GroupwareEmailArchivePaneLinked,selectors:[["groupware-email-archive-pane-linked"]],decls:2,vars:2,consts:[["system-to-bottom","",4,"ngIf"],["class","slds-p-around--medium slds-align--absolute-center","system-to-bottom-noscroll","",4,"ngIf"],["system-to-bottom",""],[1,"slds-p-vertical--xx-small","slds-p-around--x-small","slds-theme--shade"],["label","LBL_LINKED_TO_CRM"],[1,"slds-p-around--x-small"],[3,"bean","system-model-provider",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"bean","system-model-provider"],["label","LBL_ATTACHMENTS"],[3,"attachment",4,"ngFor","ngForOf"],[3,"attachment"],["system-to-bottom-noscroll","",1,"slds-p-around--medium","slds-align--absolute-center"],["label","MSG_NO_RECORDS_SELECTED"]],template:function(e,t){1&e&&(u.YNc(0,fe,6,2,"div",0),u.YNc(1,ve,2,0,"div",1)),2&e&&(u.Q6J("ngIf",t.beans.length>0),u.xp6(1),u.Q6J("ngIf",0==t.beans.length))},dependencies:[b.sg,b.O5,Q._,oe.u,N.H,Y.t,I,U],encapsulation:2}),GroupwareEmailArchivePaneLinked})();var be=s(2487),_e=s(4361);function xe(e,t){if(1&e&&u._UZ(0,"system-icon",23),2&e){const e=u.oxw();u.Q6J("module",e._searchmodule)}}function Ae(e,t){1&e&&u._UZ(0,"system-utility-icon",24)}function Ze(e,t){1&e&&u._UZ(0,"system-utility-icon",25)}function ye(e,t){1&e&&u._UZ(0,"system-utility-icon",25)}function Ge(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"li",8),u.NdJ("click",(function(){const t=u.CHM(e).$implicit,s=u.oxw();return u.KtG(s.searchmodule=t)})),u.TgZ(1,"div",9)(2,"div",10),u.YNc(3,ye,1,0,"system-utility-icon",11),u.qZA(),u.TgZ(4,"div",12)(5,"div",13),u._UZ(6,"system-label-modulename",26),u.qZA()()()()}if(2&e){const e=t.$implicit,s=u.oxw();u.xp6(3),u.Q6J("ngIf",e==s._searchmodule),u.xp6(3),u.Q6J("module",e)}}const Te=function(e,t,s){return{module:e,id:t,data:s}};function Pe(e,t){if(1&e&&u._UZ(0,"groupware-pane-bean",27),2&e){const e=t.$implicit;u.Q6J("bean",e)("system-model-provider",u.kEZ(2,Te,e.module,e.id,e.data))}}let Je=(()=>{class GroupwareEmailArchivePaneSearch{constructor(e,t,s,a,i){this.backend=e,this.language=t,this.metadata=s,this.groupware=a,this.fts=i,this.searchTerm="",this.beans=[],this.searching=!1,this.searchTimeOut=void 0,this._searchmodule="all",this.autocompleteid=_.uniqueId()}set selectAll(e){this.groupware.archiveto=e?this.beans.slice():[]}get selectAll(){return this.groupware.archiveto.length>0&&this.groupware.archiveto.length==this.beans.length}get searchmodule(){return this.language.getModuleName(this._searchmodule)}set searchmodule(e){this._searchmodule=e,this.searchTerm&&this.searchSpice()}get moduleTitle(){return"all"==this._searchmodule?this.language.getLabel("LBL_ALL"):this.searchmodule}get searchmodules(){let e=[],t=this.fts.searchModules;for(let s of t){let t=this.metadata.getModuleFields(s);for(let a in t)if("link"==t[a].type&&("emails"==a||"Emails"==t[a].module)){e.push(s);break}}return e.sort(((e,t)=>this.language.getModuleName(e)>this.language.getModuleName(t)?1:-1)),e}search(e){switch(e.key){case"ArrowDown":case"ArrowUp":break;case"Enter":this.searchTerm.length&&(this.searchTimeOut&&window.clearTimeout(this.searchTimeOut),this.searchSpice());break;default:this.searchTimeOut&&window.clearTimeout(this.searchTimeOut),this.searchTimeOut=window.setTimeout((()=>this.searchSpice()),1e3)}}searchSpice(){this.searching=!0,this.beans=[];let e=[];"all"!=this._searchmodule?e.push(this._searchmodule):e=this.searchmodules,this.fts.searchByModules({searchterm:this.searchTerm,modules:e,size:10}).subscribe((e=>{let t=[];for(let e of this.fts.moduleSearchresults)t=t.concat(e.data.hits);t.sort(((e,t)=>e._score>t._score?-1:1));for(let e of t)this.beans.push({id:e._id,module:e._source._module?e._source._module:e._type,data:e._source});this.searching=!1}))}}return GroupwareEmailArchivePaneSearch.ɵfac=function(e){return new(e||GroupwareEmailArchivePaneSearch)(u.Y36(h.y),u.Y36(v.d),u.Y36(w.Pu),u.Y36(f),u.Y36(be.Q))},GroupwareEmailArchivePaneSearch.ɵcmp=u.Xpm({type:GroupwareEmailArchivePaneSearch,selectors:[["groupware-email-archive-pane-search"]],decls:23,vars:11,consts:[[1,"slds-p-around--x-small","slds-height_full",3,"system-overlay-loading-spinner"],[1,"slds-form-element","slds-grid","slds-grid--vertical-align-center","slds-grid--align-spread"],["system-dropdown-trigger-simple","",1,"slds-dropdown-trigger","slds-dropdown-trigger_click"],[1,"slds-button","slds-button--icon-border","slds-m-right--xx-small",3,"title"],["size","small","divClass","",3,"module",4,"ngIf"],["size","x-small","icon","world",4,"ngIf"],[1,"slds-dropdown","slds-dropdown_left"],["role","group",1,"slds-listbox","slds-listbox_vertical"],["role","presentation",1,"slds-listbox__item",3,"click"],["role","option",1,"slds-media","slds-listbox__option","slds-listbox__option_plain","slds-media_small"],[1,"slds-media__figure","slds-listbox__option-icon"],["icon","check","size","x-small",4,"ngIf"],[1,"slds-media__body"],[1,"slds-truncate"],["label","LBL_ALL"],["role","presentation","class","slds-listbox__item",3,"click",4,"ngFor","ngForOf"],[1,"slds-grow","slds-form-element__control"],["type","text","id","search-term","autoComplete","off",1,"slds-input",3,"placeholder","ngModel","ngModelChange","keyup"],[1,"slds-border--bottom","slds-p-horizontal--x-small","slds-p-top--xx-small"],[3,"ngModel","indeterminate","ngModelChange"],["label","LBL_SELECT_ALL"],["system-to-bottom","",1,"slds-p-vertical--small"],[3,"bean","system-model-provider",4,"ngFor","ngForOf"],["size","small","divClass","",3,"module"],["size","x-small","icon","world"],["icon","check","size","x-small"],[3,"module"],[3,"bean","system-model-provider"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),u.YNc(4,xe,1,1,"system-icon",4),u.YNc(5,Ae,1,0,"system-utility-icon",5),u.qZA(),u.TgZ(6,"div",6)(7,"ul",7)(8,"li",8),u.NdJ("click",(function(){return t.searchmodule="all"})),u.TgZ(9,"div",9)(10,"div",10),u.YNc(11,Ze,1,0,"system-utility-icon",11),u.qZA(),u.TgZ(12,"div",12)(13,"div",13),u._UZ(14,"system-label",14),u.qZA()()()(),u.YNc(15,Ge,7,2,"li",15),u.qZA()()(),u.TgZ(16,"div",16)(17,"input",17),u.NdJ("ngModelChange",(function(e){return t.searchTerm=e}))("keyup",(function(e){return t.search(e)})),u.qZA()()(),u.TgZ(18,"div",18)(19,"system-checkbox",19),u.NdJ("ngModelChange",(function(e){return t.selectAll=e})),u._UZ(20,"system-label",20),u.qZA()(),u.TgZ(21,"div",21),u.YNc(22,Pe,1,6,"groupware-pane-bean",22),u.qZA()()),2&e&&(u.Q6J("system-overlay-loading-spinner",t.searching),u.xp6(3),u.Q6J("title",t.moduleTitle),u.xp6(1),u.Q6J("ngIf","all"!=t._searchmodule),u.xp6(1),u.Q6J("ngIf","all"==t._searchmodule),u.xp6(6),u.Q6J("ngIf","all"==t._searchmodule),u.xp6(4),u.Q6J("ngForOf",t.searchmodules),u.xp6(2),u.Q6J("placeholder",t.language.getLabel("LBL_SEARCH_SPICE"))("ngModel",t.searchTerm),u.xp6(2),u.Q6J("ngModel",t.selectAll)("indeterminate",(null==t.groupware.archiveto?null:t.groupware.archiveto.length)>0&&(null==t.beans?null:t.beans.length)!=(null==t.groupware.archiveto?null:t.groupware.archiveto.length)),u.xp6(3),u.Q6J("ngForOf",t.beans))},dependencies:[b.sg,b.O5,n.Fj,n.JJ,n.On,te.U,x.f,Q._,A.M,S.r,oe.u,_e.w,N.H,D._,I],encapsulation:2}),GroupwareEmailArchivePaneSearch})();var ke=s(1933),Ie=s(3917),Ee=s(2656);const Qe=["footer"];function Ye(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"li",9),u.NdJ("click",(function(){const t=u.CHM(e).$implicit,s=u.oxw();return u.KtG(s.callAction(t))})),u.TgZ(1,"a",10)(2,"span",11),u._UZ(3,"system-label",12),u.qZA()()()}if(2&e){const e=t.$implicit,s=u.oxw();u.xp6(2),u.Q6J("title",s.language.getLabel(e.actionconfig.label)),u.xp6(1),u.Q6J("label",e.actionconfig.label)}}let Be=(()=>{class GroupwareDetailPanefooter{constructor(e,t,s,a,i){this.router=e,this.metadata=t,this.language=s,this.footer=a,this.elementRef=i,this._currentroute="groupware/mailitem"}ngAfterViewInit(){this.setFooterHeight()}ngOnDestroy(){this.clearFooterHeight()}setFooterHeight(){let e=this.footerElement.nativeElement.getBoundingClientRect();this.footer.visibleFooterHeight=e.height}clearFooterHeight(){this.footer.visibleFooterHeight=0}callAction(e){this.router.navigate([e.actionconfig.route])}get currentroute(){return this._currentroute}set currentroute(e){e&&(this._currentroute=e,this.router.navigate([e]))}get actions(){let e=this.metadata.getComponentConfig("OutlookPane");return e.actionset?this.metadata.getActionSetItems(e.actionset):[]}}return GroupwareDetailPanefooter.ɵfac=function(e){return new(e||GroupwareDetailPanefooter)(u.Y36(ke.F0),u.Y36(w.Pu),u.Y36(v.d),u.Y36(Ie.M),u.Y36(u.SBq))},GroupwareDetailPanefooter.ɵcmp=u.Xpm({type:GroupwareDetailPanefooter,selectors:[["groupware-detail-pane-footer"]],viewQuery:function(e,t){if(1&e&&u.Gf(Qe,5),2&e){let e;u.iGM(e=u.CRH())&&(t.footerElement=e.first)}},decls:9,vars:1,consts:[[1,"slds-docked-form-footer"],["footer",""],[1,"slds-size--1-of-1","slds-p-horizontal--xx-small","slds-grid","slds-grid--align-spread"],["system-dropdown-trigger-simple","",1,"slds-dropdown-trigger","slds-dropdown-trigger_click"],["aria-haspopup","true","title","Show More",1,"slds-button","slds-button_icon","slds-button_icon-border-filled"],["icon","rows"],[1,"slds-dropdown","slds-dropdown--bottom","slds-dropdown_left"],["role","menu","aria-label","Show More",1,"slds-dropdown__list"],["class","slds-dropdown__item","role","presentation",3,"click",4,"ngFor","ngForOf"],["role","presentation",1,"slds-dropdown__item",3,"click"],["href","javascript:void(0);","role","menuitem"],[1,"slds-truncate",3,"title"],[3,"label"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0,1)(2,"div",2)(3,"div",3)(4,"button",4),u._UZ(5,"system-button-icon",5),u.qZA(),u.TgZ(6,"div",6)(7,"ul",7),u.YNc(8,Ye,4,2,"li",8),u.qZA()()()()()),2&e&&(u.xp6(8),u.Q6J("ngForOf",t.actions))},dependencies:[b.sg,Ee.J,Q._,_e.w],encapsulation:2}),GroupwareDetailPanefooter})();var Oe=s(2613),Ce=s(5931),Fe=s(3814);function Ne(e,t){if(1&e&&(u.ynx(0),u._uU(1),u.BQk()),2&e){const e=u.oxw();u.xp6(1),u.Oqu(e.model.data.summary_text)}}const qe=function(){return{displayLabels:!1}};function Le(e,t){if(1&e&&u._UZ(0,"object-record-fieldset-horizontal-list",11),2&e){const e=u.oxw();u.Q6J("fieldset",e.fieldset)("system-view-provider",u.DdM(2,qe))}}let Me=(()=>{class GroupwareDetailPaneHeader extends Oe.Y{ngOnInit(){super.ngOnInit();let e=this.componentconfig&&!_.isEmpty(this.componentconfig)?this.componentconfig:this.metadata.getComponentConfig("GroupwareDetailPaneHeader",this.model.module);e.fieldset&&(this.fieldset=e.fieldset)}}return GroupwareDetailPaneHeader.ɵfac=function(){let e;return function(t){return(e||(e=u.n5z(GroupwareDetailPaneHeader)))(t||GroupwareDetailPaneHeader)}}(),GroupwareDetailPaneHeader.ɵcmp=u.Xpm({type:GroupwareDetailPaneHeader,selectors:[["groupware-detail-pane-header"]],features:[u._Bn([d.e]),u.qOj],decls:12,vars:4,consts:[[1,"slds-page-header"],[1,"slds-grid"],[1,"slds-col","slds-has-flexi-truncate"],[1,"slds-media","slds-no-space","slds-grow"],[3,"module","click"],[1,"slds-media__body"],[1,"slds-text-title--caps","slds-line-height--reset"],[3,"module"],[1,"slds-page-header__title","slds-m-right--small","slds-align-middle","slds-truncate"],[4,"ngIf"],[3,"fieldset","system-view-provider",4,"ngIf"],[3,"fieldset","system-view-provider"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"system-icon",4),u.NdJ("click",(function(){return t.goToModule()})),u.qZA(),u.TgZ(5,"div",5)(6,"p",6),u._UZ(7,"system-label-modulename",7),u.qZA(),u.TgZ(8,"div")(9,"h1",8),u.YNc(10,Ne,2,1,"ng-container",9),u.YNc(11,Le,1,3,"object-record-fieldset-horizontal-list",10),u.qZA()()()()()()()),2&e&&(u.xp6(4),u.Q6J("module",t.moduleName),u.xp6(3),u.Q6J("module",t.moduleName),u.xp6(3),u.Q6J("ngIf",!t.fieldset),u.xp6(1),u.Q6J("ngIf",t.fieldset))},dependencies:[b.O5,x.f,A.M,Ce.Z,Fe.V],encapsulation:2}),GroupwareDetailPaneHeader})();function Ue(e,t){if(1&e&&(u.TgZ(0,"span"),u._uU(1),u.qZA()),2&e){const e=u.oxw();u.xp6(1),u.Oqu(e.model.data.summary_text)}}function Se(e,t){if(1&e&&(u.TgZ(0,"li",9),u._UZ(1,"field-container",13),u.qZA()),2&e){const e=u.oxw().$implicit;u.xp6(1),u.Q6J("field",e.field)("fieldconfig",e.fieldconfig)}}function De(e,t){if(1&e&&(u.ynx(0),u.YNc(1,Se,2,2,"li",12),u.BQk()),2&e){const e=t.$implicit,s=u.oxw(2);u.xp6(1),u.Q6J("ngIf",s.model.getField(e.field))}}function He(e,t){if(1&e&&(u.TgZ(0,"ul",8),u.YNc(1,De,2,1,"ng-container",11),u.qZA()),2&e){const e=u.oxw();u.xp6(1),u.Q6J("ngForOf",e.mainfieldsetfields)}}function Re(e,t){if(1&e&&(u.TgZ(0,"li",9),u._UZ(1,"field-container",13),u.qZA()),2&e){const e=u.oxw().$implicit;u.xp6(1),u.Q6J("field",e.field)("fieldconfig",e.fieldconfig)}}function ze(e,t){if(1&e&&(u.ynx(0),u.YNc(1,Re,2,2,"li",12),u.BQk()),2&e){const e=t.$implicit,s=u.oxw();u.xp6(1),u.Q6J("ngIf",s.model.getField(e.field))}}let $e=(()=>{class GroupwareDetailPaneBean{constructor(e,t,s,a,i,n){this.groupware=e,this.language=t,this.metadata=s,this.model=a,this.router=i,this.view=n,this.selected=new u.vpe,this.view.displayLabels=!1}ngOnInit(){this.model.module=this.bean.module,this.model.id=this.bean.id,this.model.setData(this.bean.data);let e=this.metadata.getComponentConfig("GlobalHeaderSearchResultsItem",this.model.module);e&&e.mainfieldset&&(this.mainfieldsetfields=this.metadata.getFieldSetItems(e.mainfieldset)),e&&e.subfieldset&&(this.subfieldsetfields=this.metadata.getFieldSetItems(e.subfieldset))}onClick(e){this.selected.emit({module:this.bean.module,id:this.bean.id})}}return GroupwareDetailPaneBean.ɵfac=function(e){return new(e||GroupwareDetailPaneBean)(u.Y36(f),u.Y36(v.d),u.Y36(w.Pu),u.Y36(p.o),u.Y36(ke.F0),u.Y36(d.e))},GroupwareDetailPaneBean.ɵcmp=u.Xpm({type:GroupwareDetailPaneBean,selectors:[["groupware-detail-pane-bean"]],inputs:{bean:"bean"},outputs:{selected:"selected"},features:[u._Bn([d.e,p.o])],decls:12,vars:6,consts:[[1,"slds-tile","slds-media","slds-p-vertical--xx-small","slds-has-divider--bottom",3,"click"],[1,"slds-p-vertical--xx-small"],["size","small",3,"module"],[1,"slds-media__body"],[1,"slds-grid","slds-has-flexi-truncate"],[4,"ngIf"],["class","slds-list_horizontal slds-has-dividers_right slds-truncate",4,"ngIf"],["title","Bean Module",1,"slds-truncate","slds-text-body_small"],[1,"slds-list_horizontal","slds-has-dividers_right","slds-truncate"],[1,"slds-item"],[3,"module","singular"],[4,"ngFor","ngForOf"],["class","slds-item",4,"ngIf"],["fielddisplayclass","slds-truncate",3,"field","fieldconfig"]],template:function(e,t){1&e&&(u.TgZ(0,"article",0),u.NdJ("click",(function(e){return t.onClick(e)})),u.TgZ(1,"div",1),u._UZ(2,"system-icon",2),u.qZA(),u.TgZ(3,"div",3)(4,"div",4),u.YNc(5,Ue,2,1,"span",5),u.YNc(6,He,2,1,"ul",6),u.qZA(),u.TgZ(7,"div",7)(8,"ul",8)(9,"li",9),u._UZ(10,"system-label-modulename",10),u.qZA(),u.YNc(11,ze,2,1,"ng-container",11),u.qZA()()()()),2&e&&(u.xp6(2),u.Q6J("module",t.model.module),u.xp6(3),u.Q6J("ngIf",!t.mainfieldsetfields),u.xp6(1),u.Q6J("ngIf",t.mainfieldsetfields),u.xp6(4),u.Q6J("module",t.model.module)("singular",!0),u.xp6(1),u.Q6J("ngForOf",t.subfieldsetfields))},dependencies:[b.sg,b.O5,x.f,A.M,Z.j],encapsulation:2}),GroupwareDetailPaneBean})();var je=s(4664);function Xe(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"groupware-detail-pane-bean",17),u.NdJ("selected",(function(t){u.CHM(e);const s=u.oxw(2);return u.KtG(s.selectBean(t))})),u.qZA()}if(2&e){const e=t.$implicit;u.Q6J("bean",e)}}function Ve(e,t){if(1&e&&(u.TgZ(0,"div",15),u.YNc(1,Xe,1,1,"groupware-detail-pane-bean",16),u.qZA()),2&e){const e=u.oxw();u.xp6(1),u.Q6J("ngForOf",e.groupware.relatedBeans)}}function Ke(e,t){1&e&&u._UZ(0,"groupware-pane-no-beans-found",18)}function We(e,t){1&e&&(u.TgZ(0,"div",19),u._UZ(1,"system-spinner"),u.qZA())}let et=(()=>{class GroupwareDetailPane{constructor(e,t,s,a){this.groupware=e,this.router=t,this.broadcast=s,this.cdref=a,this.loading=!1,this.subscriptions=new O.w0}ngOnInit(){this.loadRecords(),this.subscriptions.add(this.broadcast.message$.subscribe((e=>{this.handleMessage(e)})))}ngOnDestroy(){this.subscriptions.unsubscribe()}handleMessage(e){if("groupware.itemchanged"===e.messagetype)this.loadRecords()}loadRecords(){this.loading=!0,this.groupware.loadLinkedBeans().subscribe((e=>{1==e.length&&this.router.navigate(["/groupware/details/"+e[0].module+"/"+e[0].id]),this.loading=!1,this.cdref.detectChanges()}),(e=>{this.loading=!1}))}selectBean(e){this.router.navigate(["/groupware/details/"+e.module+"/"+e.id])}}return GroupwareDetailPane.ɵfac=function(e){return new(e||GroupwareDetailPane)(u.Y36(f),u.Y36(ke.F0),u.Y36(g.f),u.Y36(u.sBO))},GroupwareDetailPane.ɵcmp=u.Xpm({type:GroupwareDetailPane,selectors:[["groupware-detail-pane"]],decls:16,vars:4,consts:[[1,"slds-page-header"],[1,"slds-page-header__row"],[1,"slds-page-header__col-title"],[1,"slds-media"],["icon","dynamic_record_choice"],[1,"slds-media__body"],[1,"slds-page-header__name"],[1,"slds-page-header__name-title"],[1,"slds-page-header__title","slds-truncate"],["label","LBL_RECORDS"],[1,"slds-page-header__name-meta"],[3,"label"],["class","slds-p-around--x-small",4,"ngIf"],["class","slds-align--absolute-center","system-to-bottom-noscroll","",4,"ngIf"],["class","slds-p-around--small slds-align--absolute-center",4,"ngIf"],[1,"slds-p-around--x-small"],[3,"bean","selected",4,"ngFor","ngForOf"],[3,"bean","selected"],["system-to-bottom-noscroll","",1,"slds-align--absolute-center"],[1,"slds-p-around--small","slds-align--absolute-center"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),u._UZ(4,"system-icon",4),u.TgZ(5,"div",5)(6,"div",6)(7,"div",7)(8,"h1")(9,"span",8),u._UZ(10,"system-label",9),u.qZA()()()(),u.TgZ(11,"p",10),u._UZ(12,"system-label",11),u.qZA()()()()()(),u.YNc(13,Ve,2,1,"div",12),u.YNc(14,Ke,1,0,"groupware-pane-no-beans-found",13),u.YNc(15,We,2,0,"div",14)),2&e&&(u.xp6(12),u.Q6J("label",t.loading?"LBL_SEARCHING":"LBL_SELECT"),u.xp6(1),u.Q6J("ngIf",!t.loading),u.xp6(1),u.Q6J("ngIf",0==t.groupware.relatedBeans.length&&!t.loading),u.xp6(1),u.Q6J("ngIf",t.loading))},dependencies:[b.sg,b.O5,x.f,Q._,je.W,Y.t,B,$e],encapsulation:2}),GroupwareDetailPane})(),tt=(()=>{class ModuleGroupware{}return ModuleGroupware.ɵfac=function(e){return new(e||ModuleGroupware)},ModuleGroupware.ɵmod=u.oAB({type:ModuleGroupware}),ModuleGroupware.ɵinj=u.cJS({imports:[a.b2,i.JF,n.u5,o.SystemComponents,l.ObjectComponents,r.o,c.ObjectFields]}),ModuleGroupware})();("undefined"==typeof ngJitMode||ngJitMode)&&u.kYT(tt,{declarations:[I,B,M,U,W,H,ne,ue,we,Je,et,z,Be,Me,$e],imports:[a.b2,i.JF,n.u5,o.SystemComponents,l.ObjectComponents,r.o,c.ObjectFields],exports:[Me]})}}]);