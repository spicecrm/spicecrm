/*!
 * 
 *                     aacService
 *
 *                     release: 2023.02.001
 *
 *                     date: 2023-08-15 08:39:15
 *
 *                     build: 2023.02.001.1692081555935
 *
 */
"use strict";(self.webpackChunkcore=self.webpackChunkcore||[]).push([["src_modules_acl_moduleacl_ts"],{2116:(e,t,s)=>{s.r(t),s.d(t,{ModuleACL:()=>Wt});var i=s(1180),l=s(4755),o=s(5030),n=s(3190),d=s(4826),c=s(6490),a=s(4357),r=s(3735),u=s(2242),p=s(4505),g=s(6163),f=s(3194),h=s(5329),m=s(4561),b=s(3463),Z=s(3333);let y=(()=>{var e;class ACLManagerHeader{constructor(e){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"displaylabel",""),this.language=e}}return e=ACLManagerHeader,(0,i.Z)(ACLManagerHeader,"ɵfac",(function(t){return new(t||e)(u.Y36(h.d))})),(0,i.Z)(ACLManagerHeader,"ɵcmp",u.Xpm({type:e,selectors:[["acl-manager-header"]],inputs:{displaylabel:"displaylabel"},decls:12,vars:1,consts:[[1,"slds-p-around--medium","slds-theme--default","slds-border--bottom"],[1,"slds-grid"],[1,"slds-col","slds-has-flexi-truncate"],[1,"slds-media","slds-no-space","slds-grow"],[1,"slds-media__figure"],["module","SpiceACLObjects"],[1,"slds-media__body"],[1,"slds-text-title_caps","slds-line-height_reset"],[1,"slds-page-header__title","slds-p-right_x-small"],[1,"slds-truncate"],[3,"label"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),u._UZ(5,"system-icon",5),u.qZA(),u.TgZ(6,"div",6)(7,"p",7),u._UZ(8,"system-label-modulename",5),u.qZA(),u.TgZ(9,"h1",8)(10,"div",9),u._UZ(11,"system-label",10),u.qZA()()()()()()()),2&e&&(u.xp6(11),u.Q6J("label",t.displaylabel))},dependencies:[m.f,b._,Z.M],encapsulation:2})),ACLManagerHeader})();var A=s(4044),_=s(2145),v=s(4664),x=s(8859),T=s(1058),L=s(3398);function C(e,t){1&e&&(u.TgZ(0,"div",8),u._UZ(1,"system-spinner"),u.qZA())}function O(e,t){1&e&&u._UZ(0,"system-utility-icon",21)}function M(e,t){1&e&&u._UZ(0,"system-utility-icon",22)}const q=function(e){return{"slds-theme--shade":e}};function j(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"tr",16),u.NdJ("click",(function(){const t=u.CHM(e).$implicit,s=u.oxw(2);return u.KtG(s.selectType(t))})),u.TgZ(1,"td")(2,"div",17)(3,"system-link"),u._uU(4),u.qZA()()(),u.TgZ(5,"td",18),u.YNc(6,O,1,0,"system-utility-icon",19),u.YNc(7,M,1,0,"system-utility-icon",20),u.qZA()()}if(2&e){const e=t.$implicit,s=u.oxw(2);u.Q6J("ngClass",u.VKq(4,q,e.id==s.activeTypeId)),u.xp6(4),u.Oqu(e.module),u.xp6(2),u.Q6J("ngIf",e.usagecount>0),u.xp6(1),u.Q6J("ngIf",0==e.usagecount)}}function k(e,t){if(1&e&&(u.TgZ(0,"table",9)(1,"thead")(2,"tr",10)(3,"th",11)(4,"div",12),u._UZ(5,"system-label",13),u.qZA()(),u._UZ(6,"th",14),u.qZA()(),u.TgZ(7,"tbody"),u.YNc(8,j,8,6,"tr",15),u.qZA()()),2&e){const e=u.oxw();u.xp6(8),u.Q6J("ngForOf",e.acltypeslist)}}let J=(()=>{var e;class ACLTypesManagerTypes{constructor(e,t,s,l){(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"modelutilities",void 0),(0,i.Z)(this,"loading",!0),(0,i.Z)(this,"acltypes",[]),(0,i.Z)(this,"activeTypeId",""),(0,i.Z)(this,"filter",void 0),(0,i.Z)(this,"typeselected",new u.vpe),this.backend=e,this.modal=t,this.language=s,this.modelutilities=l,this.backend.getRequest("module/SpiceACLObjects/modules").subscribe((e=>{this.acltypes=e,this.acltypes.sort(((e,t)=>e.module>t.module?1:-1)),this.loading=!1}))}get acltypeslist(){return this.filter?this.acltypes.filter((e=>e.id==this.activeTypeId||e.module.toLowerCase().indexOf(this.filter.toLowerCase())>=0)):this.acltypes}selectType(e){this.activeTypeId=e.id,this.typeselected.emit(e)}}return e=ACLTypesManagerTypes,(0,i.Z)(ACLTypesManagerTypes,"ɵfac",(function(t){return new(t||e)(u.Y36(p.y),u.Y36(A.o),u.Y36(h.d),u.Y36(g.A))})),(0,i.Z)(ACLTypesManagerTypes,"ɵcmp",u.Xpm({type:e,selectors:[["acltypes-manager-types"]],outputs:{typeselected:"typeselected"},decls:9,vars:3,consts:[[2,"height","100%"],[1,"slds-grid","slds-grid--vertical-align-center","slds-p-around--x-small","slds-border--bottom"],[1,"slds-text-heading--small"],["label","LBL_MODULES"],["system-placeholder","LBL_FILTER",1,"slds-col--bump-left","slds-size--1-of-2","slds-input",3,"ngModel","ngModelChange"],["system-to-bottom","",1,"slds-scrollable"],["class","slds-p-around--medium slds-align--absolute-center",4,"ngIf","ngIfElse"],["typesdisplay",""],[1,"slds-p-around--medium","slds-align--absolute-center"],[1,"slds-table","slds-table--header-fixed","slds-table_bordered","slds-table_cell-buffer"],[1,"slds-text-title_caps"],["scope","col"],[1,"slds-truncate","slds-th__action"],["label","LBL_MODULE"],["scope","col",2,"width","3rem"],[3,"ngClass","click",4,"ngFor","ngForOf"],[3,"ngClass","click"],[1,"slds-truncate"],[2,"width","3rem"],["icon","lock","size","x-small","addclasses","slds-icon slds-icon-text-default",4,"ngIf"],["icon","unlock","size","x-small","addclasses","slds-icon slds-icon-text-light",4,"ngIf"],["icon","lock","size","x-small","addclasses","slds-icon slds-icon-text-default"],["icon","unlock","size","x-small","addclasses","slds-icon slds-icon-text-light"]],template:function(e,t){if(1&e&&(u.TgZ(0,"div",0)(1,"div",1)(2,"h2",2),u._UZ(3,"system-label",3),u.qZA(),u.TgZ(4,"input",4),u.NdJ("ngModelChange",(function(e){return t.filter=e})),u.qZA()(),u.TgZ(5,"div",5),u.YNc(6,C,2,0,"div",6),u.YNc(7,k,9,1,"ng-template",null,7,u.W1O),u.qZA()()),2&e){const e=u.MAs(8);u.xp6(4),u.Q6J("ngModel",t.filter),u.xp6(2),u.Q6J("ngIf",t.loading)("ngIfElse",e)}},dependencies:[l.mk,l.sg,l.O5,o.Fj,o.JJ,o.On,b._,_.A,v.W,x.r,T.H,L.A],encapsulation:2})),ACLTypesManagerTypes})();function U(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"tr")(1,"td")(2,"div",14),u._uU(3),u.qZA()(),u.TgZ(4,"td")(5,"div",14),u._uU(6),u.qZA()(),u.TgZ(7,"td",15)(8,"system-utility-icon",16),u.NdJ("click",(function(){const t=u.CHM(e).$implicit,s=u.oxw();return u.KtG(s.deleteAction(t.id))})),u.qZA()()()}if(2&e){const e=t.$implicit;u.xp6(3),u.Oqu(e.action),u.xp6(3),u.Oqu(e.description)}}let I=(()=>{var e;class ACLTypesManagerTypesActions{constructor(e,t,s,l){(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"modelutilities",void 0),(0,i.Z)(this,"authtypeactions",[]),(0,i.Z)(this,"addaction",new u.vpe),(0,i.Z)(this,"deleteaction",new u.vpe),this.backend=e,this.modal=t,this.language=s,this.modelutilities=l}addAction(){this.modal.openModal("ACLTypesManagerTypesAddAction",!0).subscribe((e=>{e.instance.currentactions=this.authtypeactions,e.instance.addaction.subscribe((e=>{this.addaction.emit(e)}))}))}deleteAction(e){this.modal.confirm("MSG_DELETE_ACL_ACTION","MSG_DELETE_ACL_ACTION").subscribe((t=>{t&&this.deleteaction.emit(e)}))}}return e=ACLTypesManagerTypesActions,(0,i.Z)(ACLTypesManagerTypesActions,"ɵfac",(function(t){return new(t||e)(u.Y36(p.y),u.Y36(A.o),u.Y36(h.d),u.Y36(g.A))})),(0,i.Z)(ACLTypesManagerTypesActions,"ɵcmp",u.Xpm({type:e,selectors:[["acltypes-manager-types-actions"]],inputs:{authtypeactions:"authtypeactions"},outputs:{addaction:"addaction",deleteaction:"deleteaction"},decls:18,vars:1,consts:[[1,"slds-grid","slds-grid--vertical-align-center","slds-p-around--x-small","slds-border--top","slds-border--bottom"],[1,"slds-text-heading--small"],["label","LBL_ACTIONS"],[1,"slds-col--bump-left","slds-button","slds-button--brand",3,"click"],["label","LBL_ADD"],["system-to-bottom",""],[1,"slds-table","slds-table--header-fixed","slds-table_bordered","slds-table_cell-buffer"],[1,"slds-text-title_caps"],["scope","col"],[1,"slds-truncate","slds-th__action"],["label","LBL_ACTION"],["label","DESCRIPTION"],["scope","col",2,"width","3rem"],[4,"ngFor","ngForOf"],[1,"slds-truncate"],[2,"width","3rem"],["icon","delete","size","x-small","addclasses","slds-icon slds-icon-text-default",3,"click"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0)(1,"h2",1),u._UZ(2,"system-label",2),u.qZA(),u.TgZ(3,"button",3),u.NdJ("click",(function(){return t.addAction()})),u._UZ(4,"system-label",4),u.qZA()(),u.TgZ(5,"div",5)(6,"table",6)(7,"thead")(8,"tr",7)(9,"th",8)(10,"div",9),u._UZ(11,"system-label",10),u.qZA()(),u.TgZ(12,"th",8)(13,"div",9),u._UZ(14,"system-label",11),u.qZA()(),u._UZ(15,"th",12),u.qZA()(),u.TgZ(16,"tbody"),u.YNc(17,U,9,2,"tr",13),u.qZA()()()),2&e&&(u.xp6(17),u.Q6J("ngForOf",t.authtypeactions))},dependencies:[l.sg,b._,x.r,T.H],encapsulation:2})),ACLTypesManagerTypesActions})();function F(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"tr")(1,"td")(2,"div",8),u._uU(3),u.qZA()(),u.TgZ(4,"td",12)(5,"system-utility-icon",13),u.NdJ("click",(function(){const t=u.CHM(e).$implicit,s=u.oxw();return u.KtG(s.deleteField(t.id))})),u.qZA()()()}if(2&e){const e=t.$implicit;u.xp6(3),u.Oqu(e.name)}}let w=(()=>{var e;class ACLTypesManagerTypesFields{constructor(e,t,s,l){(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"modelutilities",void 0),(0,i.Z)(this,"authtypefields",[]),(0,i.Z)(this,"authtypemodule",""),(0,i.Z)(this,"addfields",new u.vpe),(0,i.Z)(this,"deletefield",new u.vpe),this.backend=e,this.modal=t,this.language=s,this.modelutilities=l}addField(){for(let e of this.authtypefields)e.hide=!0;this.modal.openModal("ACLTypesManagerTypesAddFields").subscribe((e=>{e.instance.module=this.authtypemodule,e.instance.currentfields=this.authtypefields,e.instance.addfields.subscribe((e=>{if(e){let t=[];for(let s of e){let e=!1;for(let t in this.authtypefields)this.authtypefields[t].name==s&&(e=!0);e||t.push(s)}this.addfields.emit(t)}}))}))}deleteField(e){this.modal.confirm(this.language.getLabel("MSG_DELETE_ACL_FIELD","","long"),this.language.getLabel("MSG_DELETE_ACL_FIELD","","default")).subscribe((t=>{t&&this.deletefield.emit(e)}))}}return e=ACLTypesManagerTypesFields,(0,i.Z)(ACLTypesManagerTypesFields,"ɵfac",(function(t){return new(t||e)(u.Y36(p.y),u.Y36(A.o),u.Y36(h.d),u.Y36(g.A))})),(0,i.Z)(ACLTypesManagerTypesFields,"ɵcmp",u.Xpm({type:e,selectors:[["acltypes-manager-types-fields"]],inputs:{authtypefields:"authtypefields",authtypemodule:"authtypemodule"},outputs:{addfields:"addfields",deletefield:"deletefield"},decls:14,vars:1,consts:[[1,"slds-grid","slds-grid--vertical-align-center","slds-p-around--x-small"],[1,"slds-text-heading--small"],["label","LBL_FIELDS"],[1,"slds-col--bump-left","slds-button","slds-button--brand",3,"click"],["label","LBL_ADD"],[1,"slds-table","slds-table_bordered","slds-table_cell-buffer"],[1,"slds-text-title_caps"],["scope","col"],[1,"slds-truncate"],["label","LBL_FIELD"],["scope","col",2,"width","3rem"],[4,"ngFor","ngForOf"],[2,"width","3rem"],["icon","delete","size","x-small","addclasses","slds-icon slds-icon-text-default",3,"click"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0)(1,"h2",1),u._UZ(2,"system-label",2),u.qZA(),u.TgZ(3,"button",3),u.NdJ("click",(function(){return t.addField()})),u._UZ(4,"system-label",4),u.qZA()(),u.TgZ(5,"table",5)(6,"thead")(7,"tr",6)(8,"th",7)(9,"div",8),u._UZ(10,"system-label",9),u.qZA()(),u._UZ(11,"th",10),u.qZA()(),u.TgZ(12,"tbody"),u.YNc(13,F,6,1,"tr",11),u.qZA()()),2&e&&(u.xp6(13),u.Q6J("ngForOf",t.authtypefields))},dependencies:[l.sg,b._,x.r],encapsulation:2})),ACLTypesManagerTypesFields})();const N=["managercontent"];let E=(()=>{var e;class ACLTypesManager{constructor(e,t,s){(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"modelutilities",void 0),(0,i.Z)(this,"elementRef",void 0),(0,i.Z)(this,"elementmanagercontent",void 0),(0,i.Z)(this,"activeType",{authtypeid:"",authtypemodule:"",authtypefields:{},authtypeactions:[]}),(0,i.Z)(this,"activeModule",""),this.backend=e,this.modelutilities=t,this.elementRef=s}setType(e){this.activeType.authtypeid=e.id,this.activeType.authtypemodule=e.module,this.backend.getRequest("module/SpiceACLObjects/modules/"+e.id).subscribe((e=>{this.activeType.authtypefields=e.authtypefields?e.authtypefields:[],this.activeType.authtypeactions=e.authtypeactions,this.activeType.authtypeactions.sort(((e,t)=>e.action.localeCompare(t.action))),this.sortType()}))}addFields(e){for(let t of e)this.backend.postRequest("module/SpiceACLObjects/modules/"+this.activeType.authtypeid+"/fields/"+t).subscribe((e=>{this.activeType.authtypefields.push(e),this.sortType()}))}deleteField(e){this.backend.deleteRequest("module/SpiceACLObjects/modules/"+this.activeType.authtypeid+"/fields/"+e).subscribe((t=>{this.activeType.authtypefields.some(((t,s)=>{if(t.id==e)return this.activeType.authtypefields.splice(s,1),!0}))}))}addAction(e){this.backend.postRequest("module/SpiceACLObjects/modules/"+this.activeType.authtypeid+"/actions/"+e.action,{},{description:e.description}).subscribe((e=>{this.activeType.authtypeactions.push(e),this.sortType()}))}deleteAction(e){this.backend.deleteRequest("module/SpiceACLObjects/modules/"+this.activeType.authtypeid+"/actions/"+e).subscribe((t=>{this.activeType.authtypeactions.some(((t,s)=>{if(t.id==e)return this.activeType.authtypeactions.splice(s,1),!0}))}))}sortType(){this.activeType.authtypefields.sort(((e,t)=>e.name>t.name)),this.activeType.authtypeactions.sort(((e,t)=>e.action>t.action?1:-1))}}return e=ACLTypesManager,(0,i.Z)(ACLTypesManager,"ɵfac",(function(t){return new(t||e)(u.Y36(p.y),u.Y36(g.A),u.Y36(u.SBq))})),(0,i.Z)(ACLTypesManager,"ɵcmp",u.Xpm({type:e,selectors:[["acl-types-manager"]],viewQuery:function(e,t){if(1&e&&u.Gf(N,7,u.s_b),2&e){let e;u.iGM(e=u.CRH())&&(t.elementmanagercontent=e.first)}},decls:11,vars:3,consts:[[2,"height","100%"],["displaylabel","LBL_SPICEACLTYPES"],["system-to-bottom-noscroll","",1,"slds-grid"],["managercontent",""],[1,"slds-size--1-of-2","slds-border--right",3,"typeselected"],["system-to-bottom-noscroll","",1,"slds-size--1-of-2"],[1,"slds-scrollable--y",2,"height","50%"],[3,"authtypemodule","authtypefields","addfields","deletefield"],[2,"height","50%"],[3,"authtypeactions","addaction","deleteaction"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0)(1,"div"),u._UZ(2,"acl-manager-header",1),u.qZA(),u.TgZ(3,"div",2,3)(5,"acltypes-manager-types",4),u.NdJ("typeselected",(function(e){return t.setType(e)})),u.qZA(),u.TgZ(6,"div",5)(7,"div",6)(8,"acltypes-manager-types-fields",7),u.NdJ("addfields",(function(e){return t.addFields(e)}))("deletefield",(function(e){return t.deleteField(e)})),u.qZA()(),u.TgZ(9,"div",8)(10,"acltypes-manager-types-actions",9),u.NdJ("addaction",(function(e){return t.addAction(e)}))("deleteaction",(function(e){return t.deleteAction(e)})),u.qZA()()()()()),2&e&&(u.xp6(8),u.Q6J("authtypemodule",t.activeType.authtypemodule)("authtypefields",t.activeType.authtypefields),u.xp6(2),u.Q6J("authtypeactions",t.activeType.authtypeactions))},dependencies:[f.t,y,J,I,w],encapsulation:2})),ACLTypesManager})();var Y=s(4154),P=s(9621),Q=s(3499),S=s(5767),B=s(1916);function D(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div",4),u.NdJ("click",(function(t){u.CHM(e);const s=u.oxw().$implicit,i=u.oxw();return u.KtG(i.setFieldValue(s,t))})),u._UZ(1,"input",5),u.TgZ(2,"label",6),u._UZ(3,"span",7),u.TgZ(4,"span",8),u._uU(5),u.qZA()()()}if(2&e){const e=u.oxw().$implicit,t=u.oxw();u.xp6(1),u.Q6J("id","id"+e)("checked",t.getFieldValue(e)),u.xp6(1),u.uIk("for","id"+e),u.xp6(3),u.AsE("",t.getFieldDisplayName(e)," / ",e,"")}}function R(e,t){if(1&e&&(u.TgZ(0,"div",3),u.YNc(1,D,6,5,"div",15),u.qZA()),2&e){const e=t.$implicit,s=u.oxw();u.xp6(1),u.Q6J("ngIf",!s.getFieldDisplay(e))}}let V=(()=>{var e;class ACLTypesManagerTypesAddFields{constructor(e,t,s,l){(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"modelutilities",void 0),(0,i.Z)(this,"module",""),(0,i.Z)(this,"self",{}),(0,i.Z)(this,"currentfields",[]),(0,i.Z)(this,"selectedfields",[]),(0,i.Z)(this,"fields",[]),(0,i.Z)(this,"addfields",new u.vpe),(0,i.Z)(this,"showAll",!1),(0,i.Z)(this,"selectAllChecked",!1),this.backend=e,this.metadata=t,this.language=s,this.modelutilities=l}ngOnInit(){let e=this.metadata.getModuleFields(this.module);this.selectedfields=[];for(let t in e)(this.showAll||this.allowField(e[t]))&&this.fields.push(t);for(let e of this.currentfields)this.selectedfields.push(e.name);this.fields.sort()}allowField(e){return"non-db"!=e.source&&"link"!=e.type&&"relate"!=e.type}getFieldDisplayName(e){return this.language.getFieldDisplayName(this.module,e)}close(){this.self.destroy()}add(){this.addfields.emit(this.selectedfields),this.close()}getFieldDisplay(e){for(let t of this.currentfields)if(t.name==e&&t.hide)return!0;return!1}getFieldValue(e){for(let t of this.selectedfields)if(t==e)return!0;return!1}setFieldValue(e,t){t.preventDefault();let s=!1;for(let t in this.selectedfields)this.selectedfields[t]==e&&(this.selectedfields.splice(+t,1),s=!0);s||this.selectedfields.push(e)}toggleSelectAll(e){if(e.preventDefault(),this.selectAllChecked)this.selectAllChecked=!1,this.selectedfields=[];else{for(let e of this.fields)this.selectedfields.push(e);this.selectAllChecked=!0}}}return e=ACLTypesManagerTypesAddFields,(0,i.Z)(ACLTypesManagerTypesAddFields,"ɵfac",(function(t){return new(t||e)(u.Y36(p.y),u.Y36(Y.Pu),u.Y36(h.d),u.Y36(g.A))})),(0,i.Z)(ACLTypesManagerTypesAddFields,"ɵcmp",u.Xpm({type:e,selectors:[["acltypes-manager-types-add-fields"]],inputs:{module:"module"},decls:19,vars:5,consts:[[3,"close"],["label","LBL_ADD_FIELD"],[1,"slds-form-element"],[1,"slds-form-element__control"],[1,"slds-checkbox",3,"click"],["type","checkbox",3,"id","checked"],[1,"slds-checkbox__label"],[1,"slds-checkbox_faux"],[1,"slds-form-element__label"],["label","LBL_SELECT_ALL"],["class","slds-form-element__control",4,"ngFor","ngForOf"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_ADD"],["class","slds-checkbox",3,"click",4,"ngIf"]],template:function(e,t){1&e&&(u.TgZ(0,"system-modal")(1,"system-modal-header",0),u.NdJ("close",(function(){return t.close()})),u._UZ(2,"system-label",1),u.qZA(),u.TgZ(3,"system-modal-content")(4,"fieldset",2)(5,"div",3)(6,"div",4),u.NdJ("click",(function(e){return t.toggleSelectAll(e)})),u._UZ(7,"input",5),u.TgZ(8,"label",6),u._UZ(9,"span",7),u.TgZ(10,"span",8),u._UZ(11,"system-label",9),u.qZA()()()()(),u.TgZ(12,"fieldset",2),u.YNc(13,R,2,1,"div",10),u.qZA()(),u.TgZ(14,"system-modal-footer")(15,"button",11),u.NdJ("click",(function(){return t.close()})),u._UZ(16,"system-label",12),u.qZA(),u.TgZ(17,"button",13),u.NdJ("click",(function(){return t.add()})),u._UZ(18,"system-label",14),u.qZA()()()),2&e&&(u.xp6(7),u.Q6J("id","select_all")("checked",t.selectAllChecked),u.xp6(1),u.uIk("for","select_all"),u.xp6(5),u.Q6J("ngForOf",t.fields),u.xp6(4),u.Q6J("disabled",t.selectedfields.length<1))},dependencies:[l.sg,l.O5,b._,P.j,Q.x,S.p,B.y],encapsulation:2})),ACLTypesManagerTypesAddFields})(),G=(()=>{var e;class ACLTypesManagerTypesAddAction{constructor(e,t,s,l){(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"modelutilities",void 0),(0,i.Z)(this,"self",{}),(0,i.Z)(this,"currentactions",[]),(0,i.Z)(this,"_currentActions",[]),(0,i.Z)(this,"action",""),(0,i.Z)(this,"description",""),(0,i.Z)(this,"addaction",new u.vpe),this.backend=e,this.metadata=t,this.language=s,this.modelutilities=l}ngOnInit(){for(let e of this.currentactions)this._currentActions.push(e.action)}close(){this.self.destroy()}get adddisabled(){return""==this.action||this._currentActions.indexOf(this.action)>=0}add(){this.addaction.emit({action:this.action,description:this.description}),this.close()}}return e=ACLTypesManagerTypesAddAction,(0,i.Z)(ACLTypesManagerTypesAddAction,"ɵfac",(function(t){return new(t||e)(u.Y36(p.y),u.Y36(Y.Pu),u.Y36(h.d),u.Y36(g.A))})),(0,i.Z)(ACLTypesManagerTypesAddAction,"ɵcmp",u.Xpm({type:e,selectors:[["acltypes-manager-types-add-action"]],decls:19,vars:3,consts:[[3,"close"],["label","LBL_ADD_ACTION"],[1,"slds-form-element"],[1,"slds-form-element__label"],["label","LBL_ACTION"],[1,"slds-form-element__control"],["type","text","maxlength","50",1,"slds-input",3,"ngModel","ngModelChange"],["label","LBL_DESCRIPTION"],["type","text","maxlength","255",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_ADD"]],template:function(e,t){1&e&&(u.TgZ(0,"system-modal")(1,"system-modal-header",0),u.NdJ("close",(function(){return t.close()})),u._UZ(2,"system-label",1),u.qZA(),u.TgZ(3,"system-modal-content")(4,"div",2)(5,"label",3),u._UZ(6,"system-label",4),u.qZA(),u.TgZ(7,"div",5)(8,"input",6),u.NdJ("ngModelChange",(function(e){return t.action=e})),u.qZA()()(),u.TgZ(9,"div",2)(10,"label",3),u._UZ(11,"system-label",7),u.qZA(),u.TgZ(12,"div",5)(13,"input",8),u.NdJ("ngModelChange",(function(e){return t.description=e})),u.qZA()()()(),u.TgZ(14,"system-modal-footer")(15,"button",9),u.NdJ("click",(function(){return t.close()})),u._UZ(16,"system-label",10),u.qZA(),u.TgZ(17,"button",11),u.NdJ("click",(function(){return t.add()})),u._UZ(18,"system-label",12),u.qZA()()()),2&e&&(u.xp6(8),u.Q6J("ngModel",t.action),u.xp6(5),u.Q6J("ngModel",t.description),u.xp6(4),u.Q6J("disabled",t.adddisabled))},dependencies:[o.Fj,o.JJ,o.nD,o.On,b._,P.j,Q.x,S.p,B.y],encapsulation:2})),ACLTypesManagerTypesAddAction})();var K=s(2656);const H=["header"];function z(e,t){if(1&e&&(u.ynx(0),u.TgZ(1,"option",15),u._uU(2),u.qZA(),u.BQk()),2&e){const e=t.$implicit;u.xp6(1),u.Q6J("value",e.id),u.xp6(1),u.Oqu(e.module)}}function $(e,t){1&e&&(u.TgZ(0,"div",16),u._UZ(1,"system-spinner"),u.qZA())}function W(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"system-utility-icon",33),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw().$implicit,s=u.oxw(2);return u.KtG(s.deactivateObject(t.id))})),u.qZA()}}function X(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"system-utility-icon",34),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw().$implicit,s=u.oxw(2);return u.KtG(s.activateObject(t.id))})),u.qZA()}}function ee(e,t){1&e&&u._UZ(0,"system-utility-icon",35)}const te=function(e){return{"slds-theme--shade":e}},se=function(e){return{"slds-hidden":e}};function ie(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"tr",26),u.NdJ("click",(function(){const t=u.CHM(e).$implicit,s=u.oxw(2);return u.KtG(s.selectObject(t))})),u.TgZ(1,"td")(2,"div",20),u._uU(3),u.qZA()(),u.TgZ(4,"td")(5,"div",20),u._uU(6),u.qZA()(),u.TgZ(7,"td")(8,"div",20),u._uU(9),u.qZA()(),u.TgZ(10,"td",27)(11,"div",28),u.YNc(12,W,1,0,"system-utility-icon",29),u.YNc(13,X,1,0,"system-utility-icon",30),u._UZ(14,"system-utility-icon",31),u.YNc(15,ee,1,0,"system-utility-icon",32),u.qZA()()()}if(2&e){const e=t.$implicit,s=u.oxw(2);u.Q6J("ngClass",u.VKq(8,te,e.id==s.activeObjectId)),u.xp6(3),u.Oqu(e.name),u.xp6(3),u.Oqu(s.getType(e.spiceaclobjecttype)),u.xp6(3),u.Oqu(e.activity),u.xp6(3),u.Q6J("ngIf","r"==e.status),u.xp6(1),u.Q6J("ngIf","r"!=e.status),u.xp6(1),u.Q6J("ngClass",u.VKq(10,se,!e.description)),u.xp6(1),u.Q6J("ngIf",e.customSQL)}}function le(e,t){if(1&e&&(u.TgZ(0,"table",17)(1,"thead")(2,"tr",18)(3,"th",19)(4,"div",20),u._UZ(5,"system-label",21),u.qZA()(),u.TgZ(6,"th",19)(7,"div",20),u._UZ(8,"system-label",22),u.qZA()(),u.TgZ(9,"th",19)(10,"div",20),u._UZ(11,"system-label",23),u.qZA()(),u._UZ(12,"th",24),u.qZA()(),u.TgZ(13,"tbody"),u.YNc(14,ie,16,12,"tr",25),u.qZA()()),2&e){const e=u.oxw();u.xp6(14),u.Q6J("ngForOf",e.aclobjects)}}let oe=(()=>{var e;class ACLObjectsManagerObjects{constructor(e,t,s){(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"header",void 0),(0,i.Z)(this,"loading",!1),(0,i.Z)(this,"acltypes",[]),(0,i.Z)(this,"activeTypeId",""),(0,i.Z)(this,"aclobjects",[]),(0,i.Z)(this,"activeObjectId",""),(0,i.Z)(this,"searchterm",""),(0,i.Z)(this,"objectselected",new u.vpe),(0,i.Z)(this,"typeselected",new u.vpe),this.backend=e,this.modal=t,this.language=s,this.backend.getRequest("module/SpiceACLObjects/modules").subscribe((e=>{this.acltypes=e,this.acltypes.sort(((e,t)=>e.module>t.module?1:-1))}))}keyUp(e){if("Enter"===e.key)this.getObjects()}getObjects(){this.loading=!0,this.aclobjects=[];let e={moduleid:this.activeTypeId,searchterm:this.searchterm};this.backend.getRequest("module/SpiceACLObjects",e).subscribe((e=>{this.aclobjects=e,this.aclobjects.sort(((e,t)=>e.name.localeCompare(t.name))),this.loading=!1}))}get contentStyle(){return{height:"calc(100% - "+this.header.element.nativeElement.getBoundingClientRect().height+"px)"}}getType(e){return this.language.getFieldDisplayOptionValue("SpiceACLObjects","spiceaclobjecttype",e)}selectType(e){this.getObjects(),this.activeObjectId="",this.objectselected.emit(this.activeObjectId),this.typeselected.emit(this.activeTypeId)}addObject(){this.modal.openModal("ACLObjectsManagerAddObjectModal").subscribe((e=>{e.instance.sysmodule_id=this.activeTypeId,e.instance.newObjectData.subscribe((e=>{e&&(this.aclobjects.push(e),this.selectObject(e))}))}))}addDefaultObjects(){if(0==this.aclobjects.length&&this.activeTypeId){this.loading=!0;let e={moduleid:this.activeTypeId,modulename:this.acltypes.find((e=>e.id==this.activeTypeId)).module};this.backend.postRequest("module/SpiceACLObjects/defaultobjects",{},e).subscribe((e=>{this.getObjects(),this.loading=!1}))}}selectObject(e){this.activeObjectId=e.id,this.objectselected.emit(this.activeObjectId)}activateObject(e){this.modal.confirm("LBL_ACTIVATE_OBJECT","LBL_ACTIVATE_OBJECT").subscribe((t=>{t&&this.backend.postRequest("module/SpiceACLObjects/"+e+"/activation").subscribe((t=>{this.aclobjects.some((t=>{if(t.id==e)return t.status="r",!0}))}))}))}deactivateObject(e){this.modal.confirm("LBL_DEACTIVATE_OBJECT","LBL_DEACTIVATE_OBJECT").subscribe((t=>{t&&this.backend.deleteRequest("module/SpiceACLObjects/"+e+"/activation").subscribe((t=>{this.aclobjects.some((t=>{if(t.id==e)return t.status="d",!0}))}))}))}}return e=ACLObjectsManagerObjects,(0,i.Z)(ACLObjectsManagerObjects,"ɵfac",(function(t){return new(t||e)(u.Y36(p.y),u.Y36(A.o),u.Y36(h.d))})),(0,i.Z)(ACLObjectsManagerObjects,"ɵcmp",u.Xpm({type:e,selectors:[["aclobjects-manager-objects"]],viewQuery:function(e,t){if(1&e&&u.Gf(H,7,u.s_b),2&e){let e;u.iGM(e=u.CRH())&&(t.header=e.first)}},outputs:{objectselected:"objectselected",typeselected:"typeselected"},decls:18,vars:10,consts:[[2,"height","100%"],[1,"slds-grid","slds-grid--vertical-align-center","slds-p-around--x-small"],["header",""],[1,"slds-form-element__control","slds-size--1-of-3","slds-p-right--xx-small"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","disabled","ngModelChange","change"],[4,"ngFor","ngForOf"],["type","text",1,"slds-input",3,"disabled","ngModel","ngModelChange","keyup"],[1,"slds-p-left--xx-small"],[1,"slds-button","slds-button--icon-border",3,"disabled","click"],["icon","new"],["icon","insert_template"],[1,"slds-scrollable",3,"ngStyle"],["class","slds-p-around--medium slds-align--absolute-center",4,"ngIf","ngIfElse"],["typesdisplay",""],[3,"value"],[1,"slds-p-around--medium","slds-align--absolute-center"],[1,"slds-table","slds-table_bordered","slds-table_cell-buffer"],[1,"slds-text-title_caps"],["scope","col"],[1,"slds-truncate"],["label","LBL_NAME"],["label","LBL_TYPE"],["label","LBL_ACTIVITIES"],["scope","col",2,"width","3rem"],[3,"ngClass","click",4,"ngFor","ngForOf"],[3,"ngClass","click"],[2,"width","3rem"],[1,"slds-grid"],["icon","light_bulb","size","x-small","colorclass","slds-icon-text-success",3,"click",4,"ngIf"],["icon","light_bulb","size","x-small","colorclass","slds-icon-text-light",3,"click",4,"ngIf"],["icon","info_alt","size","x-small",3,"ngClass"],["icon","database","size","x-small",4,"ngIf"],["icon","light_bulb","size","x-small","colorclass","slds-icon-text-success",3,"click"],["icon","light_bulb","size","x-small","colorclass","slds-icon-text-light",3,"click"],["icon","database","size","x-small"]],template:function(e,t){if(1&e&&(u.TgZ(0,"div",0)(1,"div",1,2)(3,"div",3)(4,"div",4)(5,"select",5),u.NdJ("ngModelChange",(function(e){return t.activeTypeId=e}))("change",(function(e){return t.selectType(e)})),u.YNc(6,z,3,2,"ng-container",6),u.qZA()()(),u.TgZ(7,"input",7),u.NdJ("ngModelChange",(function(e){return t.searchterm=e}))("keyup",(function(e){return t.keyUp(e)})),u.qZA(),u.TgZ(8,"div",8)(9,"button",9),u.NdJ("click",(function(){return t.addObject()})),u._UZ(10,"system-button-icon",10),u.qZA()(),u.TgZ(11,"div",8)(12,"button",9),u.NdJ("click",(function(){return t.addDefaultObjects()})),u._UZ(13,"system-button-icon",11),u.qZA()()(),u.TgZ(14,"div",12),u.YNc(15,$,2,0,"div",13),u.YNc(16,le,15,1,"ng-template",null,14,u.W1O),u.qZA()()),2&e){const e=u.MAs(17);u.xp6(5),u.Q6J("ngModel",t.activeTypeId)("disabled",0==t.acltypes.length),u.xp6(1),u.Q6J("ngForOf",t.acltypes),u.xp6(1),u.Q6J("disabled",!t.activeTypeId)("ngModel",t.searchterm),u.xp6(2),u.Q6J("disabled",!t.activeTypeId),u.xp6(3),u.Q6J("disabled",!t.activeTypeId||t.aclobjects.length>0),u.xp6(2),u.Q6J("ngStyle",t.contentStyle),u.xp6(1),u.Q6J("ngIf",t.loading)("ngIfElse",e)}},dependencies:[l.mk,l.sg,l.O5,l.PC,o.YN,o.Kr,o.Fj,o.EJ,o.JJ,o.On,K.J,b._,v.W,x.r],encapsulation:2})),ACLObjectsManagerObjects})();var ne=s(5710),de=s(2995);const ce=["header"],ae=function(e){return{"slds-is-active":e}};function re(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"li",8),u.NdJ("click",(function(){const t=u.CHM(e).$implicit,s=u.oxw(2);return u.KtG(s.switchTab(t.tab))})),u.TgZ(1,"a",9),u._UZ(2,"system-label",10),u.qZA()()}if(2&e){const e=t.$implicit,s=u.oxw(2);u.Q6J("ngClass",u.VKq(2,ae,e.tab==s.activeTab)),u.xp6(2),u.Q6J("label",e.label)}}function ue(e,t){if(1&e&&u._UZ(0,"system-dynamic-component",13),2&e){const e=u.oxw().$implicit;u.Q6J("component",e.component)}}const pe=function(e,t){return{"slds-show":e,"slds-hide":t}};function ge(e,t){if(1&e&&(u.TgZ(0,"div",11),u.YNc(1,ue,1,1,"system-dynamic-component",12),u.qZA()),2&e){const e=t.$implicit,s=u.oxw(2);u.Q6J("ngClass",u.WLB(2,pe,e.tab==s.activeTab,e.tab!=s.activeTab)),u.xp6(1),u.Q6J("ngIf",e.component)}}function fe(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div",1)(1,"ul",2),u.YNc(2,re,3,4,"li",3),u.qZA(),u.YNc(3,ge,2,5,"div",4),u.TgZ(4,"div",5)(5,"button",6),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw();return u.KtG(t.save())})),u._UZ(6,"system-label",7),u.qZA()()()}if(2&e){const e=u.oxw();u.xp6(2),u.Q6J("ngForOf",e.tabs),u.xp6(1),u.Q6J("ngForOf",e.tabs)}}let he=(()=>{var e;class ACLObjectsManagerObject{constructor(e,t,s,l){(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"objectid",""),(0,i.Z)(this,"typeid",""),(0,i.Z)(this,"loaded",!1),(0,i.Z)(this,"tabs",[]),(0,i.Z)(this,"activeTab",""),(0,i.Z)(this,"header",void 0),this.metadata=e,this.backend=t,this.model=s,this.language=l,this.model.module="SpiceACLObjects";let o=this.metadata.getComponentConfig("ACLObjectsManagerObject",this.model.module);if(o.componentset){let e=this.metadata.getComponentSetObjects(o.componentset);for(let t of e)this.tabs.push({tab:t.id,label:t.componentconfig.name,component:t.component}),this.activeTab||(this.activeTab=t.id)}}switchTab(e){this.activeTab=e}ngOnChanges(){this.loaded=!1,this.objectid&&(this.model.id=this.objectid,this.model.getData(!0).subscribe((e=>{this.loaded=!0})))}save(){this.model.save(!0)}}return e=ACLObjectsManagerObject,(0,i.Z)(ACLObjectsManagerObject,"ɵfac",(function(t){return new(t||e)(u.Y36(Y.Pu),u.Y36(p.y),u.Y36(ne.o),u.Y36(h.d))})),(0,i.Z)(ACLObjectsManagerObject,"ɵcmp",u.Xpm({type:e,selectors:[["aclobjects-manager-object"]],viewQuery:function(e,t){if(1&e&&u.Gf(ce,7,u.s_b),2&e){let e;u.iGM(e=u.CRH())&&(t.header=e.first)}},inputs:{objectid:"objectid",typeid:"typeid"},features:[u._Bn([ne.o]),u.TTD],decls:1,vars:1,consts:[["class","slds-tabs_scoped","style","height: 100%;",4,"ngIf"],[1,"slds-tabs_scoped",2,"height","100%"],["role","tablist",1,"slds-tabs_scoped__nav"],["class","slds-tabs_scoped__item",3,"ngClass","click",4,"ngFor","ngForOf"],["class","slds-tabs_scoped__content","role","tabpanel",3,"ngClass",4,"ngFor","ngForOf"],[1,"slds-grid","slds-grid--align-center","slds-p-around--xx-small"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_SAVE"],[1,"slds-tabs_scoped__item",3,"ngClass","click"],["href","javascript:void(0);","role","tab",1,"slds-tabs_scoped__link"],[3,"label"],["role","tabpanel",1,"slds-tabs_scoped__content",3,"ngClass"],[3,"component",4,"ngIf"],[3,"component"]],template:function(e,t){1&e&&u.YNc(0,fe,7,2,"div",0),2&e&&u.Q6J("ngIf",t.loaded)},dependencies:[l.mk,l.sg,l.O5,de.T,b._],encapsulation:2})),ACLObjectsManagerObject})();const me=["managercontent"];let be=(()=>{var e;class ACLObjectsManager{constructor(e,t){(0,i.Z)(this,"modelutilities",void 0),(0,i.Z)(this,"elementRef",void 0),(0,i.Z)(this,"elementmanagercontent",void 0),(0,i.Z)(this,"activeobjectid",""),(0,i.Z)(this,"activetypeid",""),this.modelutilities=e,this.elementRef=t}get contentStyle(){return{height:"calc(100% - "+this.elementmanagercontent.element.nativeElement.getBoundingClientRect().top+"px"}}setObject(e){this.activeobjectid=e}setType(e){this.activetypeid=e}}return e=ACLObjectsManager,(0,i.Z)(ACLObjectsManager,"ɵfac",(function(t){return new(t||e)(u.Y36(g.A),u.Y36(u.SBq))})),(0,i.Z)(ACLObjectsManager,"ɵcmp",u.Xpm({type:e,selectors:[["ng-component"]],viewQuery:function(e,t){if(1&e&&u.Gf(me,7,u.s_b),2&e){let e;u.iGM(e=u.CRH())&&(t.elementmanagercontent=e.first)}},decls:7,vars:2,consts:[[2,"height","100%"],["displaylabel","LBL_SPICEACLOBJECTS"],[1,"slds-grid",3,"ngStyle"],["managercontent",""],[1,"slds-size--1-of-2","slds-border--right",3,"typeselected","objectselected"],[1,"slds-size--1-of-2",2,"height","100%",3,"objectid"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0)(1,"div"),u._UZ(2,"acl-manager-header",1),u.qZA(),u.TgZ(3,"div",2,3)(5,"aclobjects-manager-objects",4),u.NdJ("typeselected",(function(e){return t.setType(e)}))("objectselected",(function(e){return t.setObject(e)})),u.qZA(),u._UZ(6,"aclobjects-manager-object",5),u.qZA()()),2&e&&(u.xp6(3),u.Q6J("ngStyle",t.contentStyle),u.xp6(3),u.Q6J("objectid",t.activeobjectid))},dependencies:[l.PC,y,oe,he],encapsulation:2})),ACLObjectsManager})();var Ze=s(2294),ye=s(9062);let Ae=(()=>{var e;class ACLObjectsManagerAddObjectModal{constructor(e,t,s,l){(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"self",{}),(0,i.Z)(this,"fieldset",""),(0,i.Z)(this,"sysmodule_id",""),(0,i.Z)(this,"newObjectData",new u.vpe),this.metadata=e,this.model=t,this.view=s,this.language=l,this.model.module="SpiceACLObjects",this.model.initialize(),this.model.setField("status","d"),this.view.isEditable=!0,this.view.setEditMode();let o=this.metadata.getComponentConfig("ACLObjectsManagerAddObjectModal");this.fieldset=o.fieldset}ngOnInit(){this.model.setField("sysmodule_id",this.sysmodule_id)}close(){this.self.destroy()}save(){this.model.save().subscribe((e=>{this.newObjectData.emit(this.model.data),this.close()}))}}return e=ACLObjectsManagerAddObjectModal,(0,i.Z)(ACLObjectsManagerAddObjectModal,"ɵfac",(function(t){return new(t||e)(u.Y36(Y.Pu),u.Y36(ne.o),u.Y36(Ze.e),u.Y36(h.d))})),(0,i.Z)(ACLObjectsManagerAddObjectModal,"ɵcmp",u.Xpm({type:e,selectors:[["aclobjects-manager-add-object-modal"]],inputs:{sysmodule_id:"sysmodule_id"},outputs:{newObjectData:"newObjectData"},features:[u._Bn([ne.o,Ze.e])],decls:10,vars:1,consts:[[3,"close"],["label","LBL_ADD_OBJECT"],["margin","none"],["direction","vertical",3,"fieldset"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_SAVE"]],template:function(e,t){1&e&&(u.TgZ(0,"system-modal")(1,"system-modal-header",0),u.NdJ("close",(function(){return t.close()})),u._UZ(2,"system-label",1),u.qZA(),u.TgZ(3,"system-modal-content",2),u._UZ(4,"object-record-fieldset",3),u.qZA(),u.TgZ(5,"system-modal-footer")(6,"button",4),u.NdJ("click",(function(){return t.close()})),u._UZ(7,"system-label",5),u.qZA(),u.TgZ(8,"button",6),u.NdJ("click",(function(){return t.save()})),u._UZ(9,"system-label",7),u.qZA()()()),2&e&&(u.xp6(4),u.Q6J("fieldset",t.fieldset))},dependencies:[ye.d,b._,P.j,Q.x,S.p,B.y],encapsulation:2})),ACLObjectsManagerAddObjectModal})();var _e=s(7514);function ve(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"system-checkbox",11),u.NdJ("ngModelChange",(function(t){const s=u.CHM(e).$implicit,i=u.oxw(2);return u.KtG(i.setActionValue(s.id,t))})),u._UZ(1,"system-label",12),u.qZA()}if(2&e){const e=t.$implicit,s=u.oxw(2);u.Q6J("ngModel",s.getActionValue(e.id)),u.xp6(1),u.Q6J("label",e.action)}}function xe(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"system-checkbox",13),u.NdJ("ngModelChange",(function(t){const s=u.CHM(e).$implicit,i=u.oxw(2);return u.KtG(i.setActionValue(s.id,t))})),u._UZ(1,"system-label",12),u.qZA()}if(2&e){const e=t.$implicit,s=u.oxw(2);u.Q6J("title",e.description?e.description:e.action)("ngModel",s.getActionValue(e.id)),u.xp6(1),u.Q6J("label",e.action)}}function Te(e,t){if(1&e&&(u.TgZ(0,"div",5)(1,"h2",1),u._UZ(2,"system-label",6),u.qZA(),u.TgZ(3,"div",7)(4,"div",8),u.YNc(5,ve,2,2,"system-checkbox",9),u.qZA(),u.TgZ(6,"div",8),u.YNc(7,xe,2,3,"system-checkbox",10),u.qZA()()()),2&e){const e=u.oxw();u.xp6(5),u.Q6J("ngForOf",e.standardactions),u.xp6(2),u.Q6J("ngForOf",e.objectactions)}}let Le=(()=>{var e;class ACLObjectsManagerObjectDetails{constructor(e,t,s,l,o){(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"fieldset",""),(0,i.Z)(this,"standardactions",[{id:"list",action:"LBL_LIST"},{id:"listrelated",action:"LBL_LISTRELATED"},{id:"view",action:"LBL_VIEW"},{id:"editrelated",action:"LBL_EDITRELATION"},{id:"edit",action:"LBL_EDIT"},{id:"create",action:"LBL_CREATE"},{id:"deleterelated",action:"LBL_REMOVERELATION"},{id:"delete",action:"LBL_DELETE"},{id:"export",action:"LBL_EXPORT"},{id:"import",action:"LBL_IMPORT"},{id:"massupdate",action:"LBL_MASSUPDATE"},{id:"moduleadmin",action:"LBL_MODULEADMIN"}]),(0,i.Z)(this,"objectactions",[]),this.view=e,this.metadata=t,this.model=s,this.language=l,this.backend=o,this.view.isEditable=!0,this.view.setEditMode();let n=this.metadata.getComponentConfig("ACLObjectsManagerObjectDetails","SpiceACLObjects");this.fieldset=n.fieldset}ngOnInit(){this.backend.getRequest("module/SpiceACLObjects/modules/"+this.model.getFieldValue("sysmodule_id")+"/actions").subscribe((e=>{this.objectactions=e,this.objectactions.sort(((e,t)=>e.action.localeCompare(t.action)))}))}get showActions(){return"0"==this.model.getFieldValue("spiceaclobjecttype")||"3"==this.model.getFieldValue("spiceaclobjecttype")||"6"==this.model.getFieldValue("spiceaclobjecttype")}getActionValue(e){let t=this.model.getFieldValue("objectactions");for(let s of t)if(s.spiceaclaction_id==e)return!0;return!1}setActionValue(e,t){let s=this.model.getFieldValue("objectactions");if(t)s.push({spiceaclobject_id:this.model.id,spiceaclaction_id:e});else{let t=s.findIndex((t=>t.spiceaclaction_id==e));s.splice(t,1)}}}return e=ACLObjectsManagerObjectDetails,(0,i.Z)(ACLObjectsManagerObjectDetails,"ɵfac",(function(t){return new(t||e)(u.Y36(Ze.e),u.Y36(Y.Pu),u.Y36(ne.o),u.Y36(h.d),u.Y36(p.y))})),(0,i.Z)(ACLObjectsManagerObjectDetails,"ɵcmp",u.Xpm({type:e,selectors:[["aclobjects-manager-object-details"]],features:[u._Bn([Ze.e])],decls:5,vars:2,consts:[[1,"slds-box--border"],[1,"slds-text-heading--small","slds-p-around--x-small"],["label","LBL_DETAILS"],["direction","vertical",3,"fieldset"],["class","slds-box--border slds-m-vertical--x-small",4,"ngIf"],[1,"slds-box--border","slds-m-vertical--x-small"],["label","LBL_OBJECT_ACTIONS"],[1,"slds-grid","slds-p-horizontal--small","slds-p-bottom--x-small"],[1,"slds-size--1-of-2","slds-grid","slds-grid--vertical"],[3,"ngModel","ngModelChange",4,"ngFor","ngForOf"],[3,"title","ngModel","ngModelChange",4,"ngFor","ngForOf"],[3,"ngModel","ngModelChange"],[3,"label"],[3,"title","ngModel","ngModelChange"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0)(1,"h2",1),u._UZ(2,"system-label",2),u.qZA(),u._UZ(3,"object-record-fieldset",3),u.qZA(),u.YNc(4,Te,8,2,"div",4)),2&e&&(u.xp6(3),u.Q6J("fieldset",t.fieldset),u.xp6(1),u.Q6J("ngIf",t.showActions))},dependencies:[l.sg,l.O5,o.JJ,o.On,ye.d,_e.U,b._],encapsulation:2})),ACLObjectsManagerObjectDetails})();function Ce(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"tr")(1,"td")(2,"div",7),u._uU(3),u.qZA()(),u.TgZ(4,"td")(5,"div",13)(6,"div",14)(7,"select",15),u.NdJ("change",(function(t){const s=u.CHM(e).$implicit,i=u.oxw(2);return u.KtG(i.setFieldValue("operator",s.id,"change",t))})),u.TgZ(8,"option",16),u._uU(9,"ignore"),u.qZA(),u.TgZ(10,"option",17),u._uU(11,"="),u.qZA(),u.TgZ(12,"option",18),u._uU(13,"≠"),u.qZA(),u.TgZ(14,"option",19),u._uU(15,">"),u.qZA(),u.TgZ(16,"option",20),u._uU(17,"≥"),u.qZA(),u.TgZ(18,"option",21),u._uU(19,"<"),u.qZA(),u.TgZ(20,"option",22),u._uU(21,"≤"),u.qZA(),u.TgZ(22,"option",23),u._uU(23,"Like"),u.qZA(),u.TgZ(24,"option",24),u._uU(25,"in"),u.qZA(),u.TgZ(26,"option",25),u._uU(27,"not in"),u.qZA(),u.TgZ(28,"option",26),u._uU(29,"is emtpy"),u.qZA(),u.TgZ(30,"option",27),u._uU(31,"is not emtpy"),u.qZA(),u.TgZ(32,"option",28),u._uU(33,"starts with"),u.qZA(),u.TgZ(34,"option",29),u._uU(35,"does not start with"),u.qZA(),u.TgZ(36,"option",30),u._uU(37,"Current User Field"),u.qZA()()()()(),u.TgZ(38,"td")(39,"div",13)(40,"input",31),u.NdJ("blur",(function(t){const s=u.CHM(e).$implicit,i=u.oxw(2);return u.KtG(i.setFieldValue("value1",s.id,"blur",t))})),u.qZA()()(),u.TgZ(41,"td")(42,"div",13)(43,"input",32),u.NdJ("change",(function(t){const s=u.CHM(e).$implicit,i=u.oxw(2);return u.KtG(i.setFieldValue("value2",s.id,"change",t))})),u.qZA()()(),u.TgZ(44,"td")(45,"system-utility-icon",33),u.NdJ("click",(function(){const t=u.CHM(e).$implicit,s=u.oxw(2);return u.KtG(s.resetid(t.id))})),u.qZA()()()}if(2&e){const e=t.$implicit,s=u.oxw(2);u.xp6(3),u.Oqu(e.name),u.xp6(4),u.Q6J("value",s.getFieldValue("operator",e.id)),u.xp6(33),u.Q6J("value",s.getFieldValue("value1",e.id)),u.xp6(3),u.Q6J("value",s.getFieldValue("value2",e.id))}}function Oe(e,t){if(1&e&&(u.TgZ(0,"div",3)(1,"table",4)(2,"thead")(3,"tr",5)(4,"th",6)(5,"div",7),u._UZ(6,"system-label",8),u.qZA()(),u.TgZ(7,"th",6)(8,"div",7),u._UZ(9,"system-label",9),u.qZA()(),u.TgZ(10,"th",6)(11,"div",7),u._UZ(12,"system-label",10),u.qZA()(),u.TgZ(13,"th",6)(14,"div",7),u._UZ(15,"system-label",11),u.qZA()(),u._UZ(16,"th",6),u.qZA()(),u.TgZ(17,"tbody"),u.YNc(18,Ce,46,4,"tr",12),u.qZA()()()),2&e){const e=u.oxw();u.xp6(18),u.Q6J("ngForOf",e.fields)}}let Me=(()=>{var e;class ACLObjectsManagerObjectFieldvalues{constructor(e,t,s,l,o,n){(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"modelutilities",void 0),(0,i.Z)(this,"fields",[]),(0,i.Z)(this,"fieldset",""),(0,i.Z)(this,"loadedtype",""),this.backend=e,this.view=t,this.metadata=s,this.model=l,this.language=o,this.modelutilities=n,this.view.isEditable=!0,this.view.setEditMode(),this.handleType();let d=this.metadata.getComponentConfig("ACLObjectsManagerObjectFieldvalues","SpiceACLObjects");this.fieldset=d.fieldset}handleType(){let e=this.model.getFieldValue("sysmodule_id");e&&this.loadedtype!=e&&(this.loadedtype=e,this.backend.getRequest("module/SpiceACLObjects/modules/"+e).subscribe((e=>{this.fields=e.authtypefields})))}getFieldValue(e,t){let s=this.model.getFieldValue("fieldvalues");if(s&&s.length>0)for(let i of s)if(i.spiceaclmodulefield_id==t)return i[e];return""}setFieldValue(e,t,s,i){let l=this.model.getFieldValue("fieldvalues");if(l&&l.length>0)for(let s of l)if(s.spiceaclmodulefield_id==t)return void(s[e]=i.currentTarget.value);let o={spiceaclobject_id:this.model.id,spiceaclmodulefield_id:t,operator:"",value1:"",value2:""};o[e]=i.currentTarget.value,l.push(o)}resetid(e){let t=0,s=this.model.getFieldValue("fieldvalues");if(s&&s.length>0)for(let i of s){if(i.spiceaclmodulefield_id==e)return void s.splice(t,1);t++}}}return e=ACLObjectsManagerObjectFieldvalues,(0,i.Z)(ACLObjectsManagerObjectFieldvalues,"ɵfac",(function(t){return new(t||e)(u.Y36(p.y),u.Y36(Ze.e),u.Y36(Y.Pu),u.Y36(ne.o),u.Y36(h.d),u.Y36(g.A))})),(0,i.Z)(ACLObjectsManagerObjectFieldvalues,"ɵcmp",u.Xpm({type:e,selectors:[["aclobjects-manager-object-fieldvalues"]],features:[u._Bn([Ze.e])],decls:3,vars:2,consts:[["class","slds-box",4,"ngIf"],[1,"slds-p-top--small"],["direction","vertical",3,"fieldset"],[1,"slds-box"],[1,"slds-table","slds-table_bordered","slds-table_cell-buffer"],[1,"slds-text-title_caps"],["scope","col"],[1,"slds-truncate"],["label","LBL_NAME"],["label","LBL_OPERATOR"],["label","LBL_VALUE1"],["label","LBL_VALUE2"],[4,"ngFor","ngForOf"],[1,"slds-form-element__control"],[1,"slds-select_container"],[1,"slds-select",3,"value","change"],["value",""],["value","EQ"],["value","NE"],["value","GT"],["value","GTE"],["value","LT"],["value","LTE"],["value","LK"],["value","IN"],["value","NI"],["value","ISEMPTY"],["value","ISNEMPTY"],["value","SW"],["value","SN"],["value","CU"],["type","text",1,"slds-input",3,"value","blur"],["type","text",1,"slds-input",3,"value","change"],["icon","clear","size","x-small",3,"click"]],template:function(e,t){1&e&&(u.YNc(0,Oe,19,1,"div",0),u.TgZ(1,"div",1),u._UZ(2,"object-record-fieldset",2),u.qZA()),2&e&&(u.Q6J("ngIf",t.fields.length>0),u.xp6(2),u.Q6J("fieldset",t.fieldset))},dependencies:[l.sg,l.O5,o.YN,o.Kr,ye.d,b._,x.r],encapsulation:2})),ACLObjectsManagerObjectFieldvalues})();function qe(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"tr")(1,"td")(2,"div",6),u._uU(3),u.qZA()(),u.TgZ(4,"td")(5,"div",12)(6,"div",13)(7,"select",14),u.NdJ("change",(function(t){const s=u.CHM(e).$implicit,i=u.oxw(2);return u.KtG(i.setFieldControl(s.field,t))})),u.TgZ(8,"option",15),u._UZ(9,"system-label",16),u.qZA(),u.TgZ(10,"option",17),u._UZ(11,"system-label",18),u.qZA(),u.TgZ(12,"option",19),u._UZ(13,"system-label",20),u.qZA()()()()(),u.TgZ(14,"td")(15,"system-utility-icon",21),u.NdJ("click",(function(){const t=u.CHM(e).$implicit,s=u.oxw(2);return u.KtG(s.removeField(t.field))})),u.qZA()()()}if(2&e){const e=t.$implicit,s=u.oxw(2);u.xp6(3),u.Oqu(e.field),u.xp6(4),u.Q6J("value",s.getFieldControl(e.field))}}function je(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div",2)(1,"table",3)(2,"thead")(3,"tr",4)(4,"th",5)(5,"div",6),u._UZ(6,"system-label",7),u.qZA()(),u.TgZ(7,"th",5)(8,"div",6),u._UZ(9,"system-label",8),u.qZA()(),u._UZ(10,"th",5),u.qZA()(),u.TgZ(11,"tbody"),u.YNc(12,qe,16,2,"tr",9),u.qZA()(),u.TgZ(13,"div",10)(14,"system-utility-icon",11),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw();return u.KtG(t.addField())})),u.qZA()()()}if(2&e){const e=u.oxw();u.xp6(12),u.Q6J("ngForOf",e.fields)}}function ke(e,t){1&e&&(u.TgZ(0,"div",22),u._UZ(1,"system-label",23),u.qZA())}let Je=(()=>{var e;class ACLObjectsManagerObjectFields{constructor(e,t,s){(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"language",void 0),this.modal=e,this.model=t,this.language=s}get fields(){let e=[],t=this.model.getFieldValue("fieldcontrols");if(t)for(let s of t)e.push(s);return e}get showFieldControls(){return"0"==this.model.getFieldValue("spiceaclobjecttype")||"3"==this.model.getFieldValue("spiceaclobjecttype")}getFieldControl(e){let t=this.model.getFieldValue("fieldcontrols");for(let s of t)if(s.field==e)return s.control;return""}setFieldControl(e,t){let s=this.model.getFieldValue("fieldcontrols");for(let i of s)i.field==e&&(i.control=t.currentTarget.value)}removeField(e){let t=this.model.getFieldValue("fieldcontrols"),s=0;for(let i of t){if(i.field==e)return t.splice(s,1),void this.model.setField("fieldcontrols",t);s++}}addField(){let e=this.model.getFieldValue("spiceacltype_module"),t=[],s=this.model.getFieldValue("fieldcontrols");for(let e of s)t.push({name:e.field,id:e.id});this.modal.openModal("ACLTypesManagerTypesAddFields",!0).subscribe((s=>{s.instance.module=e,s.instance.currentfields=t,s.instance.showAll=!0,s.instance.addfields.subscribe((e=>{if(e){let t=this.model.getFieldValue("fieldcontrols"),s=[];for(let i of e){let e=!1;for(let l in t)t[l].field==i&&(e=!0,s.push(t[l]));e||s.push({spiceaclobject_id:this.model.id,field:i,control:1})}t=s,this.model.setField("fieldcontrols",t)}}))}))}}return e=ACLObjectsManagerObjectFields,(0,i.Z)(ACLObjectsManagerObjectFields,"ɵfac",(function(t){return new(t||e)(u.Y36(A.o),u.Y36(ne.o),u.Y36(h.d))})),(0,i.Z)(ACLObjectsManagerObjectFields,"ɵcmp",u.Xpm({type:e,selectors:[["aclobjects-manager-object-fields"]],decls:3,vars:2,consts:[["class","slds-box",4,"ngIf","ngIfElse"],["nofieldcontrols",""],[1,"slds-box"],[1,"slds-table","slds-table_bordered","slds-table_cell-buffer"],[1,"slds-text-title_caps"],["scope","col"],[1,"slds-truncate"],["label","LBL_NAME"],["label","LBL_CONTROL"],[4,"ngFor","ngForOf"],[1,"slds-align_absolute-center","slds-p-top--medium"],["icon","new","size","x-small",3,"click"],[1,"slds-form-element__control"],[1,"slds-select_container"],[1,"slds-select",3,"value","change"],["value","1"],["label","LBL_HIDE"],["value","2"],["label","LBL_DISPLAY"],["value","3"],["label","LBL_EDIT"],["icon","clear","size","x-small",1,"slds-float--right",3,"click"],[1,"slds-p-around--medium","slds-align_absolute-center"],["label","LBL_NOFIELDCONTROLSFORTHISTYPE"]],template:function(e,t){if(1&e&&(u.YNc(0,je,15,1,"div",0),u.YNc(1,ke,2,0,"ng-template",null,1,u.W1O)),2&e){const e=u.MAs(2);u.Q6J("ngIf",t.showFieldControls)("ngIfElse",e)}},dependencies:[l.sg,l.O5,o.YN,o.Kr,b._,x.r],encapsulation:2})),ACLObjectsManagerObjectFields})();function Ue(e,t){1&e&&(u.TgZ(0,"div",8),u._UZ(1,"system-spinner"),u.qZA())}function Ie(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"system-utility-icon",21),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw().$implicit,s=u.oxw(2);return u.KtG(s.deactivateProfile(t.id))})),u.qZA()}}function Fe(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"system-utility-icon",22),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw().$implicit,s=u.oxw(2);return u.KtG(s.activateProfile(t.id))})),u.qZA()}}const we=function(e){return{"slds-theme--shade":e}};function Ne(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"tr",16),u.NdJ("click",(function(){const t=u.CHM(e).$implicit,s=u.oxw(2);return u.KtG(s.selectProfile(t))})),u.TgZ(1,"td",12)(2,"div"),u._uU(3),u.qZA()(),u.TgZ(4,"td",17)(5,"div",18),u.YNc(6,Ie,1,0,"system-utility-icon",19),u.YNc(7,Fe,1,0,"system-utility-icon",20),u.qZA()()()}if(2&e){const e=t.$implicit,s=u.oxw(2);u.Q6J("ngClass",u.VKq(4,we,e.id==s.activeProfileId)),u.xp6(3),u.Oqu(e.name),u.xp6(3),u.Q6J("ngIf","r"==e.status),u.xp6(1),u.Q6J("ngIf","r"!=e.status)}}function Ee(e,t){if(1&e&&(u.TgZ(0,"table",9)(1,"thead")(2,"tr",10)(3,"th",11)(4,"div",12),u._UZ(5,"system-label",13),u.qZA()(),u._UZ(6,"th",14),u.qZA()(),u.TgZ(7,"tbody"),u.YNc(8,Ne,8,6,"tr",15),u.qZA()()),2&e){const e=u.oxw();u.xp6(8),u.Q6J("ngForOf",e.aclprofiles)}}let Ye=(()=>{var e;class ACLProfilesManagerProfiles{constructor(e,t,s,l){(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"modelutilities",void 0),(0,i.Z)(this,"loading",!1),(0,i.Z)(this,"aclprofiles",[]),(0,i.Z)(this,"activeProfile",{}),(0,i.Z)(this,"activeProfileId",""),(0,i.Z)(this,"searchterm",""),(0,i.Z)(this,"profileselected",new u.vpe),this.backend=e,this.modal=t,this.language=s,this.modelutilities=l,this.getProfiles()}keyUp(e){if("Enter"===e.key)this.getProfiles()}getProfiles(){this.loading=!0,this.aclprofiles=[],this.activeProfileId="",this.profileselected.emit(this.activeProfileId);let e={fields:["id","name","description","status","for_portal_users"],searchterm:this.searchterm,limit:"-99"};this.backend.getRequest("module/SpiceACLProfiles",e).subscribe((e=>{this.aclprofiles=e.list,this.aclprofiles.sort(((e,t)=>e.name>t.name?1:-1)),this.aclprofiles.forEach((e=>{e.hasOwnProperty("for_portal_users")&&(e.for_portal_users=this.modelutilities.backend2spice("SpiceACLProfiles","for_portal_users",e.for_portal_users))})),this.loading=!1}))}addProfile(){this.modal.openModal("ACLProfilesManagerAddProfileModal").subscribe((e=>{e.instance.newObjectData.subscribe((e=>{e&&(this.aclprofiles.push(e),this.selectProfile(e))}))}))}selectProfile(e){this.activeProfile=e,this.activeProfileId=e.id,this.profileselected.emit(this.activeProfile)}activateProfile(e){this.modal.confirm("LBL_ACTIVATE_PROFILE","LBL_ACTIVATE_PROFILE").subscribe((t=>{t&&this.backend.postRequest("module/SpiceACLProfiles/"+e+"/activation").subscribe((t=>{this.aclprofiles.some((t=>{if(t.id==e)return t.status="r",!0}))}))}))}deactivateProfile(e){this.modal.confirm("LBL_DEACTIVATE_PROFILE","LBL_DEACTIVATE_PROFILE").subscribe((t=>{t&&this.backend.deleteRequest("module/SpiceACLProfiles/"+e+"/activation").subscribe((t=>{this.aclprofiles.some((t=>{if(t.id==e)return t.status="d",!0}))}))}))}}return e=ACLProfilesManagerProfiles,(0,i.Z)(ACLProfilesManagerProfiles,"ɵfac",(function(t){return new(t||e)(u.Y36(p.y),u.Y36(A.o),u.Y36(h.d),u.Y36(g.A))})),(0,i.Z)(ACLProfilesManagerProfiles,"ɵcmp",u.Xpm({type:e,selectors:[["aclprofiles-manager-profiles"]],outputs:{profileselected:"profileselected"},decls:9,vars:3,consts:[[1,"slds-grid","slds-grid--vertical-align-center","slds-p-around--x-small"],["type","text",1,"slds-input",3,"ngModel","ngModelChange","keyup"],[1,"slds-p-left--xx-small"],[1,"slds-button","slds-button--icon-border",3,"click"],["icon","new"],["system-to-bottom",""],["class","slds-p-around--medium slds-align--absolute-center",4,"ngIf","ngIfElse"],["profilesdisplay",""],[1,"slds-p-around--medium","slds-align--absolute-center"],[1,"slds-table","slds-table_bordered","slds-table_cell-buffer"],[1,"slds-text-title_caps"],["scope","col",1,"slds-truncate"],[1,"slds-truncate"],["label","LBL_NAME"],["scope","col",2,"width","3rem"],[3,"ngClass","click",4,"ngFor","ngForOf"],[3,"ngClass","click"],[2,"width","3rem"],[1,"slds-grid"],["icon","light_bulb","colorclass","slds-icon-text-success","size","x-small","addclasses","slds-icon slds-icon-text-default",3,"click",4,"ngIf"],["icon","light_bulb","colorclass","slds-icon-text-light","size","x-small","addclasses","slds-icon slds-icon-text-light",3,"click",4,"ngIf"],["icon","light_bulb","colorclass","slds-icon-text-success","size","x-small","addclasses","slds-icon slds-icon-text-default",3,"click"],["icon","light_bulb","colorclass","slds-icon-text-light","size","x-small","addclasses","slds-icon slds-icon-text-light",3,"click"]],template:function(e,t){if(1&e&&(u.TgZ(0,"div",0)(1,"input",1),u.NdJ("ngModelChange",(function(e){return t.searchterm=e}))("keyup",(function(e){return t.keyUp(e)})),u.qZA(),u.TgZ(2,"div",2)(3,"button",3),u.NdJ("click",(function(){return t.addProfile()})),u._UZ(4,"system-button-icon",4),u.qZA()()(),u.TgZ(5,"div",5),u.YNc(6,Ue,2,0,"div",6),u.YNc(7,Ee,9,1,"ng-template",null,7,u.W1O),u.qZA()),2&e){const e=u.MAs(8);u.xp6(1),u.Q6J("ngModel",t.searchterm),u.xp6(5),u.Q6J("ngIf",t.loading)("ngIfElse",e)}},dependencies:[l.mk,l.sg,l.O5,o.Fj,o.JJ,o.On,K.J,b._,v.W,x.r,T.H],encapsulation:2})),ACLProfilesManagerProfiles})();var Pe=s(6010),Qe=s(34),Se=s(1790),Be=s(151);let De=(()=>{var e;class ACLUsersFilterPipe{transform(e,t){return e.filter((e=>!t||e.user_name.toLowerCase().includes(t.toLowerCase())))}}return e=ACLUsersFilterPipe,(0,i.Z)(ACLUsersFilterPipe,"ɵfac",(function(t){return new(t||e)})),(0,i.Z)(ACLUsersFilterPipe,"ɵpipe",u.Yjl({name:"filterACLUsers",type:e,pure:!1})),ACLUsersFilterPipe})();function Re(e,t){1&e&&(u.TgZ(0,"div",2)(1,"span",3),u._uU(2,"Please select a profile"),u.qZA()())}function Ve(e,t){1&e&&(u.TgZ(0,"div",20),u._UZ(1,"system-spinner"),u.qZA())}function Ge(e,t){1&e&&u._UZ(0,"system-custom-icon",37)}function Ke(e,t){1&e&&u._UZ(0,"system-custom-icon",38)}function He(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"tr")(1,"td")(2,"div",24),u._uU(3),u.qZA()(),u.TgZ(4,"td")(5,"div",24),u._uU(6),u.qZA()(),u.TgZ(7,"td",32)(8,"div",33),u.YNc(9,Ge,1,0,"system-custom-icon",34),u.YNc(10,Ke,1,0,"system-custom-icon",35),u.TgZ(11,"system-utility-icon",36),u.NdJ("click",(function(){const t=u.CHM(e).$implicit,s=u.oxw(4);return u.KtG(s.removeProfile(t.id))})),u.qZA()()()()}if(2&e){const e=t.$implicit;u.xp6(3),u.Oqu(e.module),u.xp6(3),u.Oqu(e.name),u.xp6(3),u.Q6J("ngIf","r"==e.status),u.xp6(1),u.Q6J("ngIf","r"!=e.status)}}function ze(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"table",21)(1,"thead")(2,"tr",22)(3,"th",23)(4,"div",24),u._UZ(5,"system-label",25),u.qZA()(),u.TgZ(6,"th",23)(7,"div",24),u._UZ(8,"system-label",26),u.qZA()(),u._UZ(9,"th",27),u.qZA()(),u.TgZ(10,"tbody"),u.YNc(11,He,12,4,"tr",28),u.qZA()(),u.TgZ(12,"div",29)(13,"button",30),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw(3);return u.KtG(t.selectProfile())})),u._UZ(14,"system-button-icon",31),u.qZA()()}if(2&e){const e=u.oxw(3);u.xp6(11),u.Q6J("ngForOf",e.aclobjects)}}function $e(e,t){if(1&e&&(u.TgZ(0,"div",17),u.YNc(1,Ve,2,0,"div",18),u.YNc(2,ze,15,1,"ng-template",null,19,u.W1O),u.qZA()),2&e){const e=u.MAs(3),t=u.oxw(2);u.xp6(1),u.Q6J("ngIf",t.loadingobjects)("ngIfElse",e)}}function We(e,t){1&e&&(u.TgZ(0,"div",20),u._UZ(1,"system-spinner",40),u.qZA())}function Xe(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div",33)(1,"system-utility-icon",36),u.NdJ("click",(function(t){u.CHM(e);const s=u.oxw().$implicit,i=u.oxw(5);return u.KtG(i.removeUser(s.id,t))})),u.qZA()()}}function et(e,t){if(1&e&&(u.TgZ(0,"tr")(1,"td")(2,"div",24)(3,"span",51),u._uU(4),u.qZA()()(),u.TgZ(5,"td",32),u.YNc(6,Xe,2,0,"div",52),u.qZA()()),2&e){const e=t.$implicit;u.xp6(3),u.Q6J("id",e.id),u.xp6(1),u.Oqu(e.user_name?e.user_name:e.id),u.xp6(2),u.Q6J("ngIf","*"!=e.id)}}const tt=function(e){return{page:e,limit:20}};function st(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div")(1,"table",21)(2,"thead")(3,"tr",22)(4,"th",23)(5,"div",24),u._UZ(6,"system-label",50),u.qZA()(),u._UZ(7,"th",27),u.qZA()(),u.TgZ(8,"tbody"),u.YNc(9,et,7,3,"tr",28),u.ALo(10,"paginate"),u.ALo(11,"filterACLUsers"),u.qZA()(),u.TgZ(12,"div",29)(13,"button",30),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw(4);return u.KtG(t.selectUser())})),u._UZ(14,"system-button-icon",31),u.qZA()()()}if(2&e){const e=u.oxw(4);u.xp6(9),u.Q6J("ngForOf",u.xi3(10,1,u.xi3(11,4,e.aclusers,e.userNameFilter),u.VKq(7,tt,e.page)))}}const it=function(e){return{"slds-hidden":e}};function lt(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div",41)(1,"div",42)(2,"system-checkbox",43),u.NdJ("ngModelChange",(function(t){u.CHM(e);const s=u.oxw(3);return u.KtG(s.aclallusers=t)})),u._uU(3,"all users"),u.qZA()(),u.TgZ(4,"div",44)(5,"div",45)(6,"input",46),u.NdJ("ngModelChange",(function(t){u.CHM(e);const s=u.oxw(3);return u.KtG(s.userNameFilter=t)})),u.qZA(),u.TgZ(7,"button",47),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw(3);return u.KtG(t.userNameFilter="")})),u._UZ(8,"system-button-icon",48),u.qZA()()(),u.TgZ(9,"pagination-controls",49),u.NdJ("pageChange",(function(t){u.CHM(e);const s=u.oxw(3);return u.KtG(s.page=t)})),u.qZA()(),u.YNc(10,st,15,9,"div",16)}if(2&e){const e=u.oxw(3);u.xp6(2),u.Q6J("ngModel",e.aclallusers),u.xp6(2),u.Q6J("ngClass",u.VKq(9,it,e.aclallusers)),u.xp6(2),u.Q6J("ngModel",e.userNameFilter),u.xp6(2),u.Q6J("icon","clear"),u.xp6(1),u.Q6J("ngClass",u.VKq(11,it,e.aclallusers))("page",e.page)("limit",20)("total_records",e.aclusers.length),u.xp6(1),u.Q6J("ngIf",!e.aclallusers)}}function ot(e,t){if(1&e&&(u.TgZ(0,"div",17),u.YNc(1,We,2,0,"div",18),u.YNc(2,lt,11,13,"ng-template",null,39,u.W1O),u.qZA()),2&e){const e=u.MAs(3),t=u.oxw(2);u.xp6(1),u.Q6J("ngIf",t.loadingusers)("ngIfElse",e)}}function nt(e,t){1&e&&(u.TgZ(0,"div",20),u._UZ(1,"system-spinner",40),u.qZA())}function dt(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"tr")(1,"td")(2,"div",24),u._uU(3),u.qZA()(),u.TgZ(4,"td",32)(5,"div",33)(6,"system-utility-icon",36),u.NdJ("click",(function(t){const s=u.CHM(e).$implicit,i=u.oxw(4);return u.KtG(i.removeOrgUnit(s.id,t))})),u.qZA()()()()}if(2&e){const e=t.$implicit;u.xp6(3),u.Oqu(e.name)}}function ct(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"table",21)(1,"thead")(2,"tr",22)(3,"th",23)(4,"div",24),u._UZ(5,"system-label",54),u.qZA()(),u._UZ(6,"th",27),u.qZA()(),u.TgZ(7,"tbody"),u.YNc(8,dt,7,1,"tr",28),u.qZA()(),u.TgZ(9,"div",29)(10,"button",30),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw(3);return u.KtG(t.selectOrgUnit())})),u._UZ(11,"system-button-icon",31),u.qZA()()}if(2&e){const e=u.oxw(3);u.xp6(8),u.Q6J("ngForOf",e.aclorgunits)}}function at(e,t){if(1&e&&(u.TgZ(0,"div",17),u.YNc(1,nt,2,0,"div",18),u.YNc(2,ct,12,1,"ng-template",null,53,u.W1O),u.qZA()),2&e){const e=u.MAs(3),t=u.oxw(2);u.xp6(1),u.Q6J("ngIf",t.loadingorgunits)("ngIfElse",e)}}function rt(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div")(1,"div",55)(2,"div",56)(3,"label",57),u._UZ(4,"system-label",26),u.qZA(),u.TgZ(5,"div",58)(6,"input",59),u.NdJ("ngModelChange",(function(t){u.CHM(e);const s=u.oxw(2);return u.KtG(s.profile.name=t)})),u.qZA()()(),u.TgZ(7,"div",56)(8,"label",57),u._UZ(9,"system-label",60),u.qZA(),u.TgZ(10,"div",58)(11,"textarea",61),u.NdJ("ngModelChange",(function(t){u.CHM(e);const s=u.oxw(2);return u.KtG(s.profile.description=t)})),u.qZA()()(),u.TgZ(12,"system-checkbox",43),u.NdJ("ngModelChange",(function(t){u.CHM(e);const s=u.oxw(2);return u.KtG(s.profile.for_portal_users=t)})),u._UZ(13,"system-label",62),u.qZA(),u.TgZ(14,"div",63)(15,"button",64),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw(2);return u.KtG(t.save())})),u._UZ(16,"system-label",65),u.qZA()()()()}if(2&e){const e=u.oxw(2);u.xp6(6),u.Q6J("ngModel",e.profile.name),u.xp6(5),u.Q6J("ngModel",e.profile.description),u.xp6(1),u.Q6J("ngModel",e.profile.for_portal_users)}}const ut=function(e){return{"slds-is-active":e}};function pt(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div",4)(1,"ul",5)(2,"li",6)(3,"a",7),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw();return u.KtG(t.activetab="profiles")})),u._UZ(4,"system-label",8),u.qZA()(),u.TgZ(5,"li",9)(6,"a",7),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw();return u.KtG(t.activetab="users")})),u._UZ(7,"system-label",10),u.qZA()(),u.TgZ(8,"li",11)(9,"a",7),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw();return u.KtG(t.activetab="orgunits")})),u._UZ(10,"system-label",12),u.qZA()(),u.TgZ(11,"li",13)(12,"a",7),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw();return u.KtG(t.activetab="details")})),u._UZ(13,"system-label",14),u.qZA()()(),u.YNc(14,$e,4,2,"div",15),u.YNc(15,ot,4,2,"div",15),u.YNc(16,at,4,2,"div",15),u.YNc(17,rt,17,3,"div",16),u.qZA()}if(2&e){const e=u.oxw();u.xp6(2),u.Q6J("ngClass",u.VKq(8,ut,"profiles"==e.activetab)),u.xp6(3),u.Q6J("ngClass",u.VKq(10,ut,"users"==e.activetab)),u.xp6(3),u.Q6J("ngClass",u.VKq(12,ut,"orgunits"==e.activetab)),u.xp6(3),u.Q6J("ngClass",u.VKq(14,ut,"details"==e.activetab)),u.xp6(3),u.Q6J("ngIf","profiles"==e.activetab),u.xp6(1),u.Q6J("ngIf","users"==e.activetab),u.xp6(1),u.Q6J("ngIf","orgunits"==e.activetab),u.xp6(1),u.Q6J("ngIf","details"==e.activetab)}}let gt=(()=>{var e;class ACLProfilesManagerProfile{constructor(e,t,s,l){(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"cdref",void 0),(0,i.Z)(this,"profile",void 0),(0,i.Z)(this,"profileid",""),(0,i.Z)(this,"loaded",!1),(0,i.Z)(this,"loadingobjects",!1),(0,i.Z)(this,"loadingusers",!1),(0,i.Z)(this,"loadingorgunits",!1),(0,i.Z)(this,"_activetab","profiles"),(0,i.Z)(this,"aclobjects",[]),(0,i.Z)(this,"aclusers",[]),(0,i.Z)(this,"aclorgunits",[]),(0,i.Z)(this,"page",1),(0,i.Z)(this,"userNameFilter",""),this.modal=e,this.language=t,this.backend=s,this.cdref=l}get activetab(){return this._activetab}set activetab(e){this._activetab=e,this.cdref.detectChanges()}get aclallusers(){return this.aclusers.filter((e=>"*"==e.id)).length>0}set aclallusers(e){e?this.backend.postRequest("module/SpiceACLProfiles/"+this.profileid+"/related/users",{},{userids:["*"]}).subscribe((e=>{this.aclusers.push({id:"*",user_name:""})})):this.backend.deleteRequest("module/SpiceACLProfiles/"+this.profileid+"/related/users/*").subscribe((e=>{let t=0;for(let e of this.aclusers)"*"==e.id&&this.aclusers.splice(t,1),t++}))}ngOnChanges(){this.loaded=!1,this.profileid&&(this.loadingobjects=!0,this.aclobjects=[],this.loadingusers=!0,this.loadingorgunits=!0,this.aclusers=[],this.backend.getRequest("module/SpiceACLProfiles/"+this.profileid+"/related/spiceaclobjects").subscribe((e=>{this.aclobjects=e,this.loadingobjects=!1,this.sortobjects()})),this.backend.getRequest("module/SpiceACLProfiles/"+this.profileid+"/related/users").subscribe((e=>{this.aclusers=e,this.loadingusers=!1,this.sortusers()})),this.backend.getRequest("module/SpiceACLProfiles/"+this.profileid+"/related/orgunits").subscribe((e=>{this.aclorgunits=e,this.loadingorgunits=!1,this.sortorgunits()})))}selectProfile(){this.modal.openModal("ACLProfilesManagerAddObjectModal").subscribe((e=>{e.instance.aclobject.subscribe((e=>{this.backend.postRequest("module/SpiceACLProfiles/"+this.profileid+"/related/spiceaclobjects/"+e.id).subscribe((t=>{this.aclobjects.push(e),this.sortobjects()}))}))}))}removeProfile(e){this.backend.deleteRequest("module/SpiceACLProfiles/"+this.profileid+"/related/spiceaclobjects/"+e).subscribe((t=>{let s=0;for(let t of this.aclobjects){if(t.id==e)return void this.aclobjects.splice(s,1);s++}}))}save(){this.backend.save("SpiceACLProfiles",this.profileid,{name:this.profile.name,description:this.profile.description,for_portal_users:this.profile.for_portal_users})}removeUser(e,t){t.stopPropagation(),t.preventDefault(),this.backend.deleteRequest("module/SpiceACLProfiles/"+this.profileid+"/related/users/"+e).subscribe((t=>{let s=this.aclusers.findIndex((t=>t.id==e));this.aclusers.splice(s,1)}))}removeOrgUnit(e,t){t.stopPropagation(),t.preventDefault(),this.backend.deleteRequest("module/SpiceACLProfiles/"+this.profileid+"/related/orgunit/"+e).subscribe((t=>{let s=this.aclorgunits.findIndex((t=>t.id==e));this.aclorgunits.splice(s,1)}))}selectUser(){this.modal.openModal("ObjectModalModuleLookup").subscribe((e=>{e.instance.module="Users",e.instance.multiselect=!0,e.instance.selectedItems.subscribe((e=>{if(e.length){let t=[];e.forEach((e=>{-1==this.aclusers.findIndex((t=>t.id==e.id))&&t.push(e.id)})),t.length>0&&this.backend.postRequest("module/SpiceACLProfiles/"+this.profileid+"/related/users",{},{userids:t}).subscribe((t=>{e.forEach((e=>{-1==this.aclusers.findIndex((t=>t.id==e.id))&&this.aclusers.push({id:e.id,user_name:e.user_name})})),this.sortusers()}))}}))}))}selectOrgUnit(){this.modal.openModal("ObjectModalModuleLookup").subscribe((e=>{e.instance.module="OrgUnits",e.instance.multiselect=!0,e.instance.selectedItems.subscribe((e=>{if(e.length){let t=[];e.forEach((e=>{this.aclorgunits.findIndex((t=>t.id==e.id))<0&&t.push(e.id)})),t.length>0&&this.backend.postRequest("module/SpiceACLProfiles/"+this.profileid+"/related/orgunits",{},{orgunitids:t}).subscribe((t=>{e.forEach((e=>{this.aclorgunits.findIndex((t=>t.id==e.id))<0&&this.aclorgunits.push({id:e.id,name:e.name})})),this.sortusers(),this.sortorgunits()}))}}))}))}sortobjects(){this.aclobjects.sort(((e,t)=>e.module==t.module?e.name.localeCompare(t.name):e.module.localeCompare(t.module)))}sortusers(){this.aclusers.sort(((e,t)=>"*"==e.id?-1:"*"==t.id?1:e.user_name.localeCompare(t.user_name)))}sortorgunits(){this.aclorgunits.sort(((e,t)=>e.name.localeCompare(t.name)))}}return e=ACLProfilesManagerProfile,(0,i.Z)(ACLProfilesManagerProfile,"ɵfac",(function(t){return new(t||e)(u.Y36(A.o),u.Y36(h.d),u.Y36(p.y),u.Y36(u.sBO))})),(0,i.Z)(ACLProfilesManagerProfile,"ɵcmp",u.Xpm({type:e,selectors:[["aclprofiles-manager-profile"]],inputs:{profile:"profile",profileid:"profileid"},features:[u.TTD],decls:3,vars:2,consts:[["style","height: 100%;","class","slds-align_absolute-center",4,"ngIf","ngIfElse"],["objectlist",""],[1,"slds-align_absolute-center",2,"height","100%"],[1,"slds-text-heading--small"],[1,"slds-tabs_scoped"],["role","tablist",1,"slds-tabs_scoped__nav"],["title","Profiles","role","presentation",1,"slds-tabs_scoped__item",3,"ngClass"],["href","javascript:void(0);","role","tab",1,"slds-tabs_scoped__link",3,"click"],["label","LBL_SPICEACLOBJECTS"],["system-title","LBL_USERS","role","presentation",1,"slds-tabs_scoped__item",3,"ngClass"],["label","LBL_USERS"],["system-title","LBL_ORGUNITS","role","presentation",1,"slds-tabs_scoped__item",3,"ngClass"],["label","LBL_ORGUNITS"],["system-title","LBL_DETAILS","role","presentation",1,"slds-tabs_scoped__item",3,"ngClass"],["label","LBL_DETAILS"],["system-to-bottom","",4,"ngIf"],[4,"ngIf"],["system-to-bottom",""],["class","slds-p-around--medium slds-align--absolute-center",4,"ngIf","ngIfElse"],["objectsdisplay",""],[1,"slds-p-around--medium","slds-align--absolute-center"],[1,"slds-table","slds-table_bordered","slds-table_cell-buffer"],[1,"slds-text-title_caps"],["scope","col"],[1,"slds-truncate"],["label","LBL_MODULE"],["label","LBL_NAME"],["scope","col",2,"width","3rem"],[4,"ngFor","ngForOf"],[1,"slds-p-around--medium","slds-align_absolute-center"],[1,"slds-button",3,"click"],["icon","new"],[2,"width","3rem"],[1,"slds-grid"],["icon","light-bulb-on","size","x-small","addclasses","slds-icon slds-icon-text-default",4,"ngIf"],["icon","light-bulb-off","size","x-small","addclasses","slds-icon slds-icon-text-light",4,"ngIf"],["icon","delete","size","x-small",3,"click"],["icon","light-bulb-on","size","x-small","addclasses","slds-icon slds-icon-text-default"],["icon","light-bulb-off","size","x-small","addclasses","slds-icon slds-icon-text-light"],["usersdisplay",""],["message","LBL_LOADING"],[1,"slds-grid","slds-grid--align-spread","slds-grid--vertical-align-center","slds-p-around--x-small"],[1,"slds-col--bump-right"],[3,"ngModel","ngModelChange"],[1,"slds-p-right--x-small","slds-size--1-of-4",3,"ngClass"],[1,"slds-form-element__control","slds-input-has-icon","slds-input-has-icon_right"],["type","text","system-placeholder","LBL_FILTER",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-input__icon","slds-input__icon_right","slds-button","slds-button_icon",3,"click"],[3,"icon"],["variation","short",3,"ngClass","page","limit","total_records","pageChange"],["label","LBL_USER_NAME"],["system-model-popover","","module","Users",3,"id"],["class","slds-grid",4,"ngIf"],["orgunitdisplay",""],["label","LBL_ORGUNIT"],[1,"slds-p-around--x-small"],[1,"slds-form-element"],[1,"slds-form-element__label"],[1,"slds-form-element__control"],["type","text",1,"slds-input",3,"ngModel","ngModelChange"],["label","LBL_DESCRIPTION"],[1,"slds-textarea",3,"ngModel","ngModelChange"],["label","LBL_FOR_PORTAL_USERS"],[1,"slds-p-vertical--x-small","slds-align--absolute-center"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_SAVE"]],template:function(e,t){if(1&e&&(u.YNc(0,Re,3,0,"div",0),u.YNc(1,pt,18,16,"ng-template",null,1,u.W1O)),2&e){const e=u.MAs(2);u.Q6J("ngIf",!t.profileid)("ngIfElse",e)}},dependencies:[l.mk,l.sg,l.O5,o.Fj,o.JJ,o.On,Pe.L,K.J,_e.U,Qe.$,b._,v.W,x.r,Se.g,T.H,L.A,Be.S,Pe.s,De],encapsulation:2})),ACLProfilesManagerProfile})(),ft=(()=>{var e;class ACLProfilesManager{constructor(e,t,s){(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"modelutilities",void 0),(0,i.Z)(this,"elementRef",void 0),(0,i.Z)(this,"activeprofileid",""),(0,i.Z)(this,"activeprofile",void 0),this.backend=e,this.modelutilities=t,this.elementRef=s}setProfile(e){this.activeprofile=e,this.activeprofileid=e.id}}return e=ACLProfilesManager,(0,i.Z)(ACLProfilesManager,"ɵfac",(function(t){return new(t||e)(u.Y36(p.y),u.Y36(g.A),u.Y36(u.SBq))})),(0,i.Z)(ACLProfilesManager,"ɵcmp",u.Xpm({type:e,selectors:[["acl-profiles-manager"]],decls:4,vars:2,consts:[["displaylabel","LBL_SPICEACLPROFILES"],[1,"slds-grid"],[1,"slds-size--1-of-2","slds-border--right",3,"profileselected"],[1,"slds-size--1-of-2",2,"height","100%",3,"profileid","profile"]],template:function(e,t){1&e&&(u._UZ(0,"acl-manager-header",0),u.TgZ(1,"div",1)(2,"aclprofiles-manager-profiles",2),u.NdJ("profileselected",(function(e){return t.setProfile(e)})),u.qZA(),u._UZ(3,"aclprofiles-manager-profile",3),u.qZA()),2&e&&(u.xp6(3),u.Q6J("profileid",t.activeprofileid)("profile",t.activeprofile))},dependencies:[y,Ye,gt],encapsulation:2})),ACLProfilesManager})();const ht=["header"];function mt(e,t){if(1&e&&(u.ynx(0),u.TgZ(1,"option",14),u._uU(2),u.qZA(),u.BQk()),2&e){const e=t.$implicit;u.xp6(1),u.Q6J("value",e.id),u.xp6(1),u.Oqu(e.module)}}function bt(e,t){1&e&&(u.TgZ(0,"div",15),u._UZ(1,"system-spinner"),u.qZA())}function Zt(e,t){1&e&&u._UZ(0,"system-custom-icon",28)}function yt(e,t){1&e&&u._UZ(0,"system-custom-icon",29)}const At=function(e){return{"slds-theme--shade":e}};function _t(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"tr",24),u.NdJ("click",(function(){const t=u.CHM(e).$implicit,s=u.oxw(2);return u.KtG(s.selectObject(t))})),u.TgZ(1,"td")(2,"div",19),u._uU(3),u.qZA()(),u.TgZ(4,"td")(5,"div",19),u._uU(6),u.qZA()(),u.TgZ(7,"td",25),u.YNc(8,Zt,1,0,"system-custom-icon",26),u.YNc(9,yt,1,0,"system-custom-icon",27),u.qZA()()}if(2&e){const e=t.$implicit,s=u.oxw(2);u.Q6J("ngClass",u.VKq(5,At,e.id==s.activeObjectId)),u.xp6(3),u.Oqu(e.name),u.xp6(3),u.Oqu(s.getType(e.spiceaclobjecttype)),u.xp6(2),u.Q6J("ngIf","r"==e.status),u.xp6(1),u.Q6J("ngIf","r"!=e.status)}}function vt(e,t){if(1&e&&(u.TgZ(0,"table",16)(1,"thead")(2,"tr",17)(3,"th",18)(4,"div",19),u._UZ(5,"system-label",20),u.qZA()(),u.TgZ(6,"th",18)(7,"div",19),u._UZ(8,"system-label",21),u.qZA()(),u._UZ(9,"th",22),u.qZA()(),u.TgZ(10,"tbody"),u.YNc(11,_t,10,7,"tr",23),u.qZA()()),2&e){const e=u.oxw();u.xp6(11),u.Q6J("ngForOf",e.aclobjects)}}let xt=(()=>{var e;class ACLProfilesManagerAddObjectModal{constructor(e,t){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"header",void 0),(0,i.Z)(this,"self",{}),(0,i.Z)(this,"acltypes",[]),(0,i.Z)(this,"aclobjects",[]),(0,i.Z)(this,"activeTypeId",""),(0,i.Z)(this,"activeObjectId",""),(0,i.Z)(this,"searchterm",""),(0,i.Z)(this,"loading",!1),(0,i.Z)(this,"aclobject",new u.vpe),this.language=e,this.backend=t,this.backend.getRequest("module/SpiceACLObjects/modules").subscribe((e=>{this.acltypes=e,this.acltypes.sort(((e,t)=>e.module>t.module?1:-1))}))}keyUp(e){if("Enter"===e.key)this.getObjects()}getObjects(){this.loading=!0,this.aclobjects=[];let e={moduleid:this.activeTypeId,searchterm:this.searchterm};this.backend.getRequest("module/SpiceACLObjects",e).subscribe((e=>{this.aclobjects=e,this.aclobjects.sort(((e,t)=>e.name>t.name?1:-1)),this.loading=!1}))}getType(e){return this.language.getFieldDisplayOptionValue("SpiceACLObjects","spiceaclobjecttype",e)}selectType(e){this.getObjects(),this.activeObjectId=""}get currentModule(){for(let e of this.acltypes)if(e.id==this.activeTypeId)return e.module;return""}selectObject(e){e.module=this.currentModule,this.aclobject.emit(e),this.close()}close(){this.self.destroy()}}return e=ACLProfilesManagerAddObjectModal,(0,i.Z)(ACLProfilesManagerAddObjectModal,"ɵfac",(function(t){return new(t||e)(u.Y36(h.d),u.Y36(p.y))})),(0,i.Z)(ACLProfilesManagerAddObjectModal,"ɵcmp",u.Xpm({type:e,selectors:[["ng-component"]],viewQuery:function(e,t){if(1&e&&u.Gf(ht,7,u.s_b),2&e){let e;u.iGM(e=u.CRH())&&(t.header=e.first)}},outputs:{aclobject:"aclobject"},features:[u._Bn([ne.o])],decls:17,vars:8,consts:[[3,"close"],["label","LBL_SELECT_SPICEACLOBJECT"],["margin","none",3,"grow"],[1,"slds-grid","slds-grid--vertical-align-center","slds-p-around--x-small"],["header",""],[1,"slds-form-element__control","slds-size--1-of-3","slds-p-right--xx-small"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","disabled","ngModelChange","change"],[4,"ngFor","ngForOf"],["type","text",1,"slds-input",3,"disabled","ngModel","ngModelChange","keyup"],["class","slds-p-around--medium slds-align--absolute-center",4,"ngIf","ngIfElse"],["typesdisplay",""],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[3,"value"],[1,"slds-p-around--medium","slds-align--absolute-center"],[1,"slds-table","slds-table_bordered","slds-table_cell-buffer"],[1,"slds-text-title_caps"],["scope","col"],[1,"slds-truncate"],["label","LBL_NAME"],["label","LBL_TYPE"],["scope","col",2,"width","3rem"],[3,"ngClass","click",4,"ngFor","ngForOf"],[3,"ngClass","click"],[2,"width","3rem"],["icon","light-bulb-on","size","x-small","addclasses","slds-icon slds-icon-text-default",4,"ngIf"],["icon","light-bulb-off","size","x-small","addclasses","slds-icon slds-icon-text-light",4,"ngIf"],["icon","light-bulb-on","size","x-small","addclasses","slds-icon slds-icon-text-default"],["icon","light-bulb-off","size","x-small","addclasses","slds-icon slds-icon-text-light"]],template:function(e,t){if(1&e&&(u.TgZ(0,"system-modal")(1,"system-modal-header",0),u.NdJ("close",(function(){return t.close()})),u._UZ(2,"system-label",1),u.qZA(),u.TgZ(3,"system-modal-content",2)(4,"div",3,4)(6,"div",5)(7,"div",6)(8,"select",7),u.NdJ("ngModelChange",(function(e){return t.activeTypeId=e}))("change",(function(e){return t.selectType(e)})),u.YNc(9,mt,3,2,"ng-container",8),u.qZA()()(),u.TgZ(10,"input",9),u.NdJ("ngModelChange",(function(e){return t.searchterm=e}))("keyup",(function(e){return t.keyUp(e)})),u.qZA()(),u.YNc(11,bt,2,0,"div",10),u.YNc(12,vt,12,1,"ng-template",null,11,u.W1O),u.qZA(),u.TgZ(14,"system-modal-footer")(15,"button",12),u.NdJ("click",(function(){return t.close()})),u._UZ(16,"system-label",13),u.qZA()()()),2&e){const e=u.MAs(13);u.xp6(3),u.Q6J("grow",!0),u.xp6(5),u.Q6J("ngModel",t.activeTypeId)("disabled",0==t.acltypes.length),u.xp6(1),u.Q6J("ngForOf",t.acltypes),u.xp6(1),u.Q6J("disabled",!t.activeTypeId)("ngModel",t.searchterm),u.xp6(1),u.Q6J("ngIf",t.loading)("ngIfElse",e)}},dependencies:[l.mk,l.sg,l.O5,o.YN,o.Kr,o.Fj,o.EJ,o.JJ,o.On,Qe.$,b._,P.j,Q.x,S.p,B.y,v.W],encapsulation:2})),ACLProfilesManagerAddObjectModal})(),Tt=(()=>{var e;class ACLProfilesManagerAddProfileModal{constructor(e,t,s,l){(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"self",{}),(0,i.Z)(this,"fieldset",""),(0,i.Z)(this,"sysmodule_id",""),(0,i.Z)(this,"newObjectData",new u.vpe),this.metadata=e,this.model=t,this.view=s,this.language=l,this.model.module="SpiceACLProfiles",this.model.initialize(),this.model.setField("status","d"),this.view.isEditable=!0,this.view.setEditMode();let o=this.metadata.getComponentConfig("ACLProfilesManagerAddProfileModal",this.model.module);this.fieldset=o.fieldset}ngOnInit(){this.model.setField("sysmodule_id",this.sysmodule_id)}close(){this.self.destroy()}save(){this.model.save().subscribe((e=>{this.newObjectData.emit(this.model.data),this.close()}))}}return e=ACLProfilesManagerAddProfileModal,(0,i.Z)(ACLProfilesManagerAddProfileModal,"ɵfac",(function(t){return new(t||e)(u.Y36(Y.Pu),u.Y36(ne.o),u.Y36(Ze.e),u.Y36(h.d))})),(0,i.Z)(ACLProfilesManagerAddProfileModal,"ɵcmp",u.Xpm({type:e,selectors:[["ng-component"]],inputs:{sysmodule_id:"sysmodule_id"},outputs:{newObjectData:"newObjectData"},features:[u._Bn([ne.o,Ze.e])],decls:10,vars:1,consts:[[3,"close"],["label","LBL_ADD_SPICEACLPROFILE"],["margin","none"],["direction","vertical",3,"fieldset"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_SAVE"]],template:function(e,t){1&e&&(u.TgZ(0,"system-modal")(1,"system-modal-header",0),u.NdJ("close",(function(){return t.close()})),u._UZ(2,"system-label",1),u.qZA(),u.TgZ(3,"system-modal-content",2),u._UZ(4,"object-record-fieldset",3),u.qZA(),u.TgZ(5,"system-modal-footer")(6,"button",4),u.NdJ("click",(function(){return t.close()})),u._UZ(7,"system-label",5),u.qZA(),u.TgZ(8,"button",6),u.NdJ("click",(function(){return t.save()})),u._UZ(9,"system-label",7),u.qZA()()()),2&e&&(u.xp6(4),u.Q6J("fieldset",t.fieldset))},dependencies:[ye.d,b._,P.j,Q.x,S.p,B.y],encapsulation:2})),ACLProfilesManagerAddProfileModal})();var Lt=s(3278),Ct=s(5920);function Ot(e,t){1&e&&u._UZ(0,"system-utility-icon",16)}function Mt(e,t){1&e&&u._UZ(0,"system-utility-icon",17)}function qt(e,t){1&e&&u._UZ(0,"system-utility-icon",18)}const jt=function(e){return{"slds-is-selected":e}};function kt(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"tr",9),u.ynx(1),u.TgZ(2,"td",10),u.NdJ("click",(function(){const t=u.CHM(e).$implicit,s=u.oxw();return u.KtG(s.selectProfile(t.id))})),u._uU(3),u.qZA(),u.TgZ(4,"td",11),u.YNc(5,Ot,1,0,"system-utility-icon",12),u.YNc(6,Mt,1,0,"system-utility-icon",13),u.YNc(7,qt,1,0,"system-utility-icon",14),u.qZA(),u.TgZ(8,"td",11),u._UZ(9,"system-utility-icon",15),u.qZA(),u.BQk(),u.qZA()}if(2&e){const e=t.$implicit,s=u.oxw();u.Q6J("ngClass",u.VKq(6,jt,e.id==s.selectedProfileId)),u.xp6(3),u.hij(" ",e.name," "),u.xp6(2),u.Q6J("ngIf","global"==e.profilesource),u.xp6(1),u.Q6J("ngIf","user"==e.profilesource),u.xp6(1),u.Q6J("ngIf","orgunit"==e.profilesource),u.xp6(2),u.Q6J("colorclass","r"==e.status?"slds-icon-text-success":"slds-icon-text-light")}}function Jt(e,t){if(1&e&&(u.TgZ(0,"tr",25),u.ynx(1),u.TgZ(2,"td"),u._uU(3),u.qZA(),u.TgZ(4,"td"),u._uU(5),u.qZA(),u.TgZ(6,"td",11),u._UZ(7,"system-utility-icon",26),u.qZA(),u.BQk(),u.qZA()),2&e){const e=t.$implicit;u.xp6(3),u.hij(" ",e.module," "),u.xp6(2),u.hij(" ",e.name," "),u.xp6(2),u.Q6J("colorclass","r"==e.status?"slds-icon-text-success":"slds-icon-text-light")}}function Ut(e,t){if(1&e&&(u.TgZ(0,"table",19)(1,"thead",1)(2,"tr",2)(3,"th",20),u._UZ(4,"system-label",21),u.qZA(),u.TgZ(5,"th",22),u._UZ(6,"system-label",23),u.qZA(),u.TgZ(7,"th",4),u._UZ(8,"system-label",6),u.qZA()()(),u.TgZ(9,"tbody"),u.YNc(10,Jt,8,3,"tr",24),u.qZA()()),2&e){const e=u.oxw();u.xp6(10),u.Q6J("ngForOf",e.profileObjects)}}let It=(()=>{var e;class ACLUserProfiles{constructor(e,t,s,l,o,n){(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"toast",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"session",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"userProfiles",[]),(0,i.Z)(this,"selectedProfileId",""),(0,i.Z)(this,"profileObjects",[]),this.backend=e,this.toast=t,this.modal=s,this.model=l,this.session=o,this.language=n,this.backend.getRequest("module/Users/"+this.model.id+"/related/spiceaclprofiles").subscribe((e=>{this.userProfiles=e}))}selectProfile(e){this.selectedProfileId!=e&&(this.selectedProfileId=e,this.profileObjects=[],this.backend.getRequest("module/SpiceACLProfiles/"+e+"/related/spiceaclobjects").subscribe((e=>{for(let t in e)this.profileObjects.push(e[t])})))}}return e=ACLUserProfiles,(0,i.Z)(ACLUserProfiles,"ɵfac",(function(t){return new(t||e)(u.Y36(p.y),u.Y36(Lt.A),u.Y36(A.o),u.Y36(ne.o),u.Y36(Ct.n),u.Y36(h.d))})),(0,i.Z)(ACLUserProfiles,"ɵcmp",u.Xpm({type:e,selectors:[["acl-user-profiles"]],decls:12,vars:2,consts:[[1,"slds-table","slds-table--fixed-layout","slds-table_bordered",2,"box-shadow","0px 2px 5px 0 rgba(0,0,0,.1)","border-radius",".15rem"],[1,"slds-table--bordered","slds-text-align_center"],[1,"slds-text-title--caps"],["label","LBL_SPICEACLPROFILE"],[1,"slds-text-align--center",2,"width","4rem"],["label","LBL_SCOPE"],["label","LBL_ACTIVE"],["class","slds-hint-parent",3,"ngClass",4,"ngFor","ngForOf"],["class","slds-table slds-table--fixed-layout slds-table_bordered slds-table_cell-buffer slds-m-top--medium","style","box-shadow:0px 2px 5px 0 rgba(0,0,0,.1); border-radius: .15rem",4,"ngIf"],[1,"slds-hint-parent",3,"ngClass"],[3,"click"],[1,"slds-text-align--center"],["icon","world","size","x-small",4,"ngIf"],["icon","user","size","x-small",4,"ngIf"],["icon","org_chart","size","x-small",4,"ngIf"],["icon","light_bulb","size","x-small",3,"colorclass"],["icon","world","size","x-small"],["icon","user","size","x-small"],["icon","org_chart","size","x-small"],[1,"slds-table","slds-table--fixed-layout","slds-table_bordered","slds-table_cell-buffer","slds-m-top--medium",2,"box-shadow","0px 2px 5px 0 rgba(0,0,0,.1)","border-radius",".15rem"],[2,"width","30%"],["label","LBL_MODULE"],[2,"width","70%"],["label","LBL_SPICEACLOBJECT"],["class","slds-hint-parent",4,"ngFor","ngForOf"],[1,"slds-hint-parent"],["icon","light_bulb","size","x-small","addclasses","slds-icon slds-icon-text-default",3,"colorclass"]],template:function(e,t){1&e&&(u.TgZ(0,"table",0)(1,"thead",1)(2,"tr",2)(3,"th"),u._UZ(4,"system-label",3),u.qZA(),u.TgZ(5,"th",4),u._UZ(6,"system-label",5),u.qZA(),u.TgZ(7,"th",4),u._UZ(8,"system-label",6),u.qZA()()(),u.TgZ(9,"tbody"),u.YNc(10,kt,10,8,"tr",7),u.qZA()(),u.YNc(11,Ut,11,1,"table",8)),2&e&&(u.xp6(10),u.Q6J("ngForOf",t.userProfiles),u.xp6(1),u.Q6J("ngIf",t.profileObjects.length>0))},dependencies:[l.mk,l.sg,l.O5,b._,x.r],encapsulation:2})),ACLUserProfiles})();var Ft=s(7040),wt=s(3348),Nt=s(6367),Et=s(3208),Yt=s(5638),Pt=s(4271),Qt=s(5957);function St(e,t){if(1&e&&u._UZ(0,"field-label",3),2&e){const e=u.oxw();u.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function Bt(e,t){if(1&e&&(u.TgZ(0,"li",7)(1,"a",8),u._uU(2),u.qZA()()),2&e){const e=t.$implicit;u.xp6(1),u.Q6J("id",e.id),u.xp6(1),u.Oqu(e.summary_text)}}function Dt(e,t){if(1&e&&(u.TgZ(0,"field-generic-display",4)(1,"ul",5),u.YNc(2,Bt,3,2,"li",6),u.qZA()()),2&e){const e=u.oxw();u.Q6J("fielddisplayclass",e.fielddisplayclass)("fieldconfig",e.fieldconfig)("editable",e.isEditable()),u.xp6(2),u.Q6J("ngForOf",e.users)}}function Rt(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"field-lookup-recent",22),u.NdJ("selectedObject",(function(t){u.CHM(e);const s=u.oxw(2);return u.KtG(s.addItem(t))})),u.qZA()}}function Vt(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"field-lookup-search",23),u.NdJ("selectedObject",(function(t){u.CHM(e);const s=u.oxw(2);return u.KtG(s.addItem(t))}))("searchWithModal",(function(){u.CHM(e);const t=u.oxw(2);return u.KtG(t.searchWithModal())})),u.qZA()}if(2&e){const e=u.oxw(2);u.Q6J("searchterm",e.lookupSearchTerm)("disableadd",!0)}}function Gt(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"li",26)(1,"div",27)(2,"span",28),u._UZ(3,"system-icon",29),u.qZA(),u.TgZ(4,"span",30),u._uU(5),u.qZA(),u.TgZ(6,"button",31),u.NdJ("click",(function(){const t=u.CHM(e).$implicit,s=u.oxw(3);return u.KtG(s.removeItem(t.id))})),u._UZ(7,"system-button-icon",16),u.qZA()()()}if(2&e){const e=t.$implicit;u.xp6(4),u.Q6J("id",e.id),u.xp6(1),u.Oqu(e.summary_text),u.xp6(2),u.Q6J("icon","close")}}function Kt(e,t){if(1&e&&(u.TgZ(0,"ul",24),u.YNc(1,Gt,8,3,"li",25),u.qZA()),2&e){const e=u.oxw(2);u.xp6(1),u.Q6J("ngForOf",e.users)}}const Ht=function(e){return{"slds-is-open":e}};function zt(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div",9)(1,"div",10)(2,"div",11)(3,"div",12)(4,"div",13)(5,"input",14),u.NdJ("focus",(function(){u.CHM(e);const t=u.oxw();return u.KtG(t.onFocus())}))("click",(function(){u.CHM(e);const t=u.oxw();return u.KtG(t.onFieldClick())}))("ngModelChange",(function(t){u.CHM(e);const s=u.oxw();return u.KtG(s.lookupSearchTerm=t)})),u.qZA(),u.TgZ(6,"button",15),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw();return u.KtG(t.searchWithModal())})),u._UZ(7,"system-button-icon",16),u.qZA()(),u.TgZ(8,"div",17),u.YNc(9,Rt,1,0,"field-lookup-recent",18),u.YNc(10,Vt,1,2,"field-lookup-search",19),u.qZA()()()(),u.YNc(11,Kt,2,1,"ul",20),u._UZ(12,"field-messages",21),u.qZA()}if(2&e){const e=u.oxw();u.Q6J("ngClass",e.getFieldClass()),u.xp6(3),u.Q6J("ngClass",u.VKq(9,Ht,e.lookupSearchOpen)),u.xp6(2),u.Q6J("ngModel",e.lookupSearchTerm)("placeholder",e.language.getModuleCombinedLabel("LBL_SEARCH","Users")),u.xp6(2),u.Q6J("icon","search"),u.xp6(2),u.Q6J("ngIf",e.lookupSearchOpen&&""===e.lookupSearchTerm),u.xp6(1),u.Q6J("ngIf",e.lookupSearchOpen&&""!==e.lookupSearchTerm),u.xp6(1),u.Q6J("ngIf",e.users.length>0),u.xp6(1),u.Q6J("fieldname",e.fieldname)}}let $t=(()=>{var e;class fieldACLAdditionalUsers extends Ft.O{constructor(e,t,s,l,o,n,d,c){super(e,t,s,l,o),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"elementRef",void 0),(0,i.Z)(this,"renderer",void 0),(0,i.Z)(this,"modal",void 0),(0,i.Z)(this,"clickListener",void 0),(0,i.Z)(this,"lookupSearchOpen",!1),(0,i.Z)(this,"lookupSearchTerm",""),this.model=e,this.view=t,this.language=s,this.metadata=l,this.router=o,this.elementRef=n,this.renderer=d,this.modal=c}get displayAssignedUser(){return this.fieldconfig.displayassigneduser}get users(){try{return JSON.parse(this.model.getField("spiceacl_additional_users"))}catch(e){return[]}}set users(e){this.model.setField("spiceacl_additional_users",JSON.stringify(e))}addItem(e){let t=this.users;-1==t.findIndex((t=>t.id==e.id))&&t.push({id:e.id,summary_text:e.text}),this.closePopups(),this.users=t}onClick(e){this.elementRef.nativeElement.contains(e.target)||this.closePopups()}closePopups(){this.lookupSearchOpen=!1,this.lookupSearchTerm="",this.clickListener()}removeItem(e){let t=this.users,s=t.findIndex((t=>t.id==e));s>=0&&t.splice(s,1),this.users=t}onFocus(){this.openSearchDropDown()}onFieldClick(){this.openSearchDropDown()}openSearchDropDown(){this.lookupSearchOpen=!0,this.clickListener=this.renderer.listen("document","click",(e=>this.onClick(e)))}parentSearchStyle(){if(this.lookupSearchOpen)return{display:"block"}}searchWithModal(){this.modal.openModal("ObjectModalModuleLookup").subscribe((e=>{e.instance.module="Users",e.instance.multiselect=!1,e.instance.selectedItems.subscribe((e=>{this.addItem({id:e[0].id,text:e[0].summary_text,data:e[0]})})),e.instance.usedSearchTerm.subscribe((e=>{this.lookupSearchTerm=e})),e.instance.searchTerm=this.lookupSearchTerm}))}}return e=fieldACLAdditionalUsers,(0,i.Z)(fieldACLAdditionalUsers,"ɵfac",(function(t){return new(t||e)(u.Y36(ne.o),u.Y36(Ze.e),u.Y36(h.d),u.Y36(Y.Pu),u.Y36(wt.F0),u.Y36(u.SBq),u.Y36(u.Qsj),u.Y36(A.o))})),(0,i.Z)(fieldACLAdditionalUsers,"ɵcmp",u.Xpm({type:e,selectors:[["ng-component"]],features:[u.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","fieldconfig","editable",4,"ngIf"],["class","slds-form-element__control",3,"ngClass",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","fieldconfig","editable"],[1,"slds-list_horizontal","slds-has-dividers_left"],["class","slds-item",4,"ngFor","ngForOf"],[1,"slds-item"],["href","javascript:void(0);","system-model-popover","","module","Users",1,"slds-text-link_reset",3,"id"],[1,"slds-form-element__control",3,"ngClass"],[1,"slds-form-element__control","slds-box--border"],[1,"slds-combobox_container"],["role","combobox",1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click",3,"ngClass"],["role","none",1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon_right"],["type","text","aria-autocomplete","list","autoComplete","off","role","textbox",1,"slds-input","slds-combobox__input",3,"ngModel","placeholder","focus","click","ngModelChange"],[1,"slds-button","slds-button_icon","slds-input__icon","slds-input__icon_right",3,"click"],[3,"icon"],["role","listbox",1,"slds-dropdown","slds-dropdown_length-with-icon-7","slds-dropdown_fluid"],["module","Users",3,"selectedObject",4,"ngIf"],["module","Users",3,"searchterm","disableadd","selectedObject","searchWithModal",4,"ngIf"],["class","slds-listbox slds-listbox_horizontal","role","group",4,"ngIf"],[3,"fieldname"],["module","Users",3,"selectedObject"],["module","Users",3,"searchterm","disableadd","selectedObject","searchWithModal"],["role","group",1,"slds-listbox","slds-listbox_horizontal"],["role","presentation","class","slds-listbox__item slds-p-top_xxx-small",4,"ngFor","ngForOf"],["role","presentation",1,"slds-listbox__item","slds-p-top_xxx-small"],[1,"slds-pill"],[1,"slds-icon_container","slds-icon-standard-account","slds-pill__icon_container"],["module","Users","size","small"],["system-model-popover","","module","Users",1,"slds-pill__label",3,"id"],[1,"slds-button","slds-button--icon","slds-pill__remove",3,"click"]],template:function(e,t){1&e&&(u.YNc(0,St,1,2,"field-label",0),u.YNc(1,Dt,3,4,"field-generic-display",1),u.YNc(2,zt,13,11,"div",2)),2&e&&(u.Q6J("ngIf",t.displayLabel),u.xp6(1),u.Q6J("ngIf",!t.isEditMode()),u.xp6(1),u.Q6J("ngIf",t.isEditable()&&t.isEditMode()))},dependencies:[l.mk,l.sg,l.O5,o.Fj,o.JJ,o.On,Nt.q,Et.D,Yt.a,Pt.P,Qt.$,K.J,m.f,Se.g],styles:["input[_ngcontent-%COMP%], input[_ngcontent-%COMP%]:focus{border:none;outline:none}"]})),fieldACLAdditionalUsers})(),Wt=(()=>{var e;class ModuleACL{}return e=ModuleACL,(0,i.Z)(ModuleACL,"ɵfac",(function(t){return new(t||e)})),(0,i.Z)(ModuleACL,"ɵmod",u.oAB({type:e})),(0,i.Z)(ModuleACL,"ɵinj",u.cJS({imports:[l.ez,o.u5,n.ObjectFields,d.GlobalComponents,c.ObjectComponents,r.SystemComponents,a.o]})),ModuleACL})();("undefined"==typeof ngJitMode||ngJitMode)&&u.kYT(Wt,{declarations:[E,y,J,I,G,w,V,be,oe,Ae,he,Le,Me,Je,ft,Ye,gt,Tt,xt,It,$t,De],imports:[l.ez,o.u5,n.ObjectFields,d.GlobalComponents,c.ObjectComponents,r.SystemComponents,a.o]})}}]);