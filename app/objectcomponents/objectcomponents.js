/*
SpiceUI 2018.10.001

Copyright (c) 2016-present, aac services.k.s - All rights reserved.
Redistribution and use in source and binary forms, without modification, are permitted provided that the following conditions are met:
- Redistributions of source code must retain this copyright and license notice, this list of conditions and the following disclaimer.
- Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.
- If used the SpiceCRM Logo needs to be displayed in the upper left corner of the screen in a minimum dimension of 31x31 pixels and be clearly visible, the icon needs to provide a link to http://www.spicecrm.io
THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.

*/

/** 
 * Â© 2015 - 2021 aac services k.s. All rights reserved.
 * release: 2021.02.001
 * date: 2021-06-24 11:36:53
 * build: 2021.02.001.1624527413323
 **/
"use strict";var __extends=this&&this.__extends||function(){var i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])})(e,t)};return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function s(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),__assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var t,s=1,i=arguments.length;s<i;s++)for(var o in t=arguments[s])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},__decorate=this&&this.__decorate||function(e,t,s,i){var o,l=arguments.length,a=l<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,s,i);else for(var n=e.length-1;0<=n;n--)(o=e[n])&&(a=(l<3?o(a):3<l?o(t,s,a):o(t,s))||a);return 3<l&&a&&Object.defineProperty(t,s,a),a},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__param=this&&this.__param||function(s,i){return function(e,t){i(e,t,s)}},__spreadArray=this&&this.__spreadArray||function(e,t){for(var s=0,i=t.length,o=e.length;s<i;s++,o++)e[o]=t[s];return e};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ObjectReminderButton=exports.ObjectActionNewCopyRuleBeanButton=exports.ObjectActionNewCopyRuleBeanButtonModelHelper=exports.ObjectActionNewrelatedButton=exports.ObjectActionSaveRelatedButton=exports.ObjectActionSaveButton=exports.ObjectActionDuplicateButton=exports.ObjectActionNewButton=exports.ObjectActionAuditlogModal=exports.ObjectActionRemoveButton=exports.ObjectActionModalSaveButton=exports.ObjectActionCancelButton=exports.ObjectActionOpenButton=exports.ObjectActionAuditlogButton=exports.ObjectActionDeleteButton=exports.ObjectActionEditRelatedButton=exports.ObjectActionEditButton=exports.ObjectListTypes=exports.ObjectActionsetMenuContainerDelete=exports.ObjectActionsetMenuContainerEdit=exports.ObjectActionsetMenuContainer=exports.ObjectActionsetMenu=exports.ObjectActionMenu=exports.ObjectListItemField=exports.ObjectListItem=exports.ObjectListHeaderActionsSelectRangeModal=exports.ObjectListHeaderActionsSelectRangeButton=exports.ObjectListHeaderActionsUnselectAllButton=exports.ObjectListHeaderActionsSelectAllButton=exports.ObjectListHeaderActionsExportTargetlistModal=exports.ObjectListHeaderActionsExportTargetlistButton=exports.ObjectListHeaderActionsExportCSVSelectFields=exports.ObjectListHeaderActionsExportCSVButton=exports.ObjectListHeaderActionsMergeButton=exports.ObjectListHeaderActionsDeleteButton=exports.ObjectListHeaderActionsAssignModal=exports.ObjectListHeaderActionsAssignButton=exports.ObjectListHeaderActionMenu=exports.ObjectListHeaderSort=exports.ObjectListHeader=exports.ObjectActionContainer=exports.ObjectActionContainerItem=exports.ObjectListView=exports.ObjectListViewContainer=exports.ObjectList=exports.ObjectListViewHeaderListSelector=exports.ObjectListViewHeaderDetails=exports.ObjectListViewHeader=exports.ObjectFieldFilterPipe=exports.ObjectKeyValuesPipe=void 0,exports.ObjectRelatedlistList=exports.ObjectRelatedList=exports.ObjectRelatedCard=exports.ObjectRelatedCardFooter=exports.ObjectRelatedCardHeader=exports.ObjectRelateContainer=exports.ObjectVerticalTabContainerItemHeader=exports.ObjectVerticalTabContainerItem=exports.ObjectVerticalTabContainer=exports.ObjectTabContainer=exports.ObjectTabContainerItem=exports.ObjectTabContainerItemHeader=exports.ObjectPageHeaderDetailRowField=exports.ObjectPageHeaderDetailRow=exports.ObjectPageHeaderDetails=exports.ObjectPageHeaderTagPicker=exports.ObjectPageHeaderTags=exports.ObjectPageHeader=exports.ObjectRecordViewDetailsplit=exports.ObjectRecordViewDetail2and1=exports.ObjectRecordViewDetail1=exports.ObjectRecordView=exports.ObjectRecordViewContainer=exports.ObjectListViewSettingsSetfieldsModal=exports.ObjectListViewSettingsAddlistModal=exports.ObjectListViewSettings=exports.ObjectListViewFilterPanelFilterItem=exports.ObjectListViewFilterPanelFilterGeo=exports.ObjectListViewFilterPanelFilterMyItems=exports.ObjectListViewFilterPanel=exports.ObjectListViewFilterButton=exports.ObjectListViewTagsAggregate=exports.ObjectListViewAggregateItemRange=exports.ObjectListViewAggregateItemTerm=exports.ObjectListViewAggregateItem=exports.ObjectListViewAggregate=exports.ObjectListViewAggregatesPanel=exports.ObjectListViewAggregatesButton=exports.ObjectOptimisticLockingModalChange=exports.ObjectOptimisticLockingModalDataField=exports.ObjectOptimisticLockingModal=exports.ObjectEditModalDialogDuplicatesPanel=exports.ObjectEditModalDialogDuplicates=exports.ObjectEditModalDialogContainer=exports.ObjectEditModalWReference=exports.ObjectEditModal=exports.ObjectActionMailModal=exports.ObjectActionBeanToMailButton=exports.ObjectActionSelectButton=exports.ObjectSubscriptionButton=void 0,exports.ObjectActionDeactivateBeansButton=exports.ObjectRecordMessagesBadge=exports.ObjectModelPopoverRelatedItem=exports.ObjectModelPopoverRelated=exports.ObjectModelPopoverField=exports.ObjectModelPopoverHeader=exports.ObjectModelPopover=exports.ObjectTable=exports.ObjectTableRow=exports.ObjectActionVCardButton=exports.ObjectRowItemComponent=exports.ObjectGDPRModal=exports.ObjectAddress=exports.ObjectAddresses=exports.ObjectAddressesPipe=exports.ObjectMergeButton=exports.ObjectSelectButton=exports.ObjectModalModuleLookup=exports.ObjectModalModuleLookupAggregates=exports.ObjectModalModuleLookupHeader=exports.ObjectRecordDetailsRelatedListTab=exports.ObjectRecordTabbedDetailsTab=exports.ObjectRecordTabbedDetails=exports.ObjectRecordDetailsTabRowField=exports.ObjectRecordDetailsTabRow=exports.ObjectRecordAdministrationTab=exports.ObjectRecordDetailsFooter=exports.ObjectRecordDetailsModelstateTab=exports.ObjectRecordDetailsTab=exports.ObjectRecordDetails=exports.ObjectRecordChecklistItem=exports.ObjectRecordChecklist=exports.ObjectRecordFieldsetContainer=exports.ObjectRecordFieldsetHorizontalList=exports.ObjectRecordFieldsetField=exports.ObjectRecordFieldset=exports.ObjectStatusNetworkButton=exports.ObjectStatusNetworkButtonItem=exports.ObjectFileActionMenu=exports.ObjectRelatedListSequencedItem=exports.ObjectRelatedlistSequenced=exports.ObjectRelatedlistTable=exports.ObjectRelatedlistAll=exports.ObjectRelatedDuplicateTile=exports.ObjectRelatedDuplicates=exports.ObjectRelatedCardFile=exports.ObjectRelatedlistFiles=exports.ObjectRelatedCardTile=exports.ObjectRelatedlistTiles=exports.ObjectRelatedListItem=void 0,exports.ObjectComponents=exports.ObjectChecklists=exports.ObjectActionDeactivateBeansModal=void 0;var common_1=require("@angular/common"),drag_drop_1=require("@angular/cdk/drag-drop"),core_1=require("@angular/core"),forms_1=require("@angular/forms"),router_1=require("@angular/router"),directives_1=require("../directives/directives"),objectfields_1=require("../objectfields/objectfields"),systemcomponents_1=require("../systemcomponents/systemcomponents"),services_1=require("../services/services"),animations_1=require("@angular/animations"),rxjs_1=require("rxjs"),operators_1=require("rxjs/operators"),ObjectKeyValuesPipe=function(){function e(){}return e.prototype.transform=function(e){var t=[];for(var s in e)t.push({key:s,value:e[s]});return t},e=__decorate([core_1.Pipe({name:"objectkeyvalues"})],e)}();exports.ObjectKeyValuesPipe=ObjectKeyValuesPipe;var ObjectFieldFilterPipe=function(){function e(e,t){this.languange=e,this.model=t}return e.prototype.transform=function(e,t){for(var s=[],i=0,o=e;i<o.length;i++){var l=o[i];(0<=l.toLowerCase().indexOf(t.toLowerCase())||0<this.languange.getFieldDisplayName(this.model.module,l).toLowerCase().indexOf(t.toLowerCase()))&&s.push(l)}return s},e=__decorate([core_1.Pipe({name:"objectfieldfilter",pure:!1}),__metadata("design:paramtypes",[services_1.language,services_1.model])],e)}();exports.ObjectFieldFilterPipe=ObjectFieldFilterPipe;var ObjectListViewHeader=function(){function ObjectListViewHeader(e,t,s,i,o){this.metadata=e,this.configuration=t,this.modellist=s,this.language=i,this.model=o,this.actionSet={},this.searchTermError=!1;var l=this.metadata.getComponentConfig("ObjectListViewHeader",this.model.module);this.actionSet=l.actionset}return Object.defineProperty(ObjectListViewHeader.prototype,"searchTerm",{get:function(){return this.modellist.searchTerm},set:function(e){e!=this.modellist.searchTerm&&(""==(this.modellist.searchTerm=e)||this.searchTermsValid(e)?(this.searchTermError=!1,this.reloadList()):(this.searchTimeOut&&window.clearTimeout(this.searchTimeOut),this.searchTermError=!0))},enumerable:!1,configurable:!0}),ObjectListViewHeader.prototype.searchTermsValid=function(e){var t=this.configuration.getCapabilityConfig("search"),s=t.min_ngram?parseInt(t.min_ngram,10):3,i=t.max_ngram?parseInt(t.max_ngram,10):20;return 0==e.split(" ").filter(function(e){return e.length<s||e.length>i}).length},ObjectListViewHeader.prototype.clearSearchTerm=function(){this.searchTerm=""},ObjectListViewHeader.prototype.reloadList=function(){var e=this;this.searchTimeOut&&window.clearTimeout(this.searchTimeOut),this.searchTimeOut=window.setTimeout(function(){return e.modellist.reLoadList()},1e3)},ObjectListViewHeader=__decorate([core_1.Component({selector:"object-listview-header",template:'<div class="slds-page-header slds-page-header--object-home" role="banner"><div class="slds-grid slds-p-bottom--xx-small"><div class="slds-grid slds-grid--vertical-align-center slds-no-space"><system-icon [module]="model.module"></system-icon><object-list-types></object-list-types></div><div class="slds-form-element slds-p-right--small" style="width: 400px" [ngClass]="{\'slds-has-error\': searchTermError}"><div class="slds-form-element__control slds-input-has-icon slds-input-has-icon--left-right"><system-utility-icon icon="search" size="x-small" addclasses="slds-icon slds-input__icon slds-input__icon_left"></system-utility-icon><input system-autofocus style="max-width: 400px;" class="slds-input slds-lookup__search-input" type="search" [placeholder]="language.getModuleCombinedLabel(\'LBL_SEARCH\', model.module)" [(ngModel)]="searchTerm" (keyup.enter)="reloadList()"> <button [disabled]="!searchTerm" (click)="clearSearchTerm()" class="slds-button slds-button_icon slds-input__icon slds-input__icon_right"><system-button-icon icon="clear"></system-button-icon></button></div></div><object-action-container class="slds-col--bump-left" [actionset]="actionSet"></object-action-container></div><div class="slds-grid slds-grid_vertical-align-center"><div class="slds-col slds-align-bottom"><object-listview-header-details></object-listview-header-details></div><div class="slds-col slds-no-flex slds-grid slds-align-bottom"><object-listview-settings class="slds-show--medium"></object-listview-settings><object-listview-header-list-selector></object-listview-header-list-selector><button class="slds-button slds-button--neutral slds-button--icon-border slds-m-horizontal--xxx-small" system-title="LBL_RELOAD" (click)="modellist.reLoadList()" [disabled]="modellist.isLoading"><system-button-icon [icon]="\'refresh\'"></system-button-icon></button><object-listview-aggregates-button class="slds-show--medium"></object-listview-aggregates-button><object-listview-filter-button class="slds-show--medium"></object-listview-filter-button></div></div></div><object-listview-filter-panel @animatepanel *ngIf="modellist.displayFilters"></object-listview-filter-panel><object-listview-aggregates-panel @animatepanel *ngIf="modellist.displayAggregates"></object-listview-aggregates-panel>',animations:[animations_1.trigger("animatepanel",[animations_1.transition(":enter",[animations_1.style({right:"-320px",overflow:"hidden"}),animations_1.animate(".5s",animations_1.style({right:"0px"})),animations_1.style({overflow:"unset"})]),animations_1.transition(":leave",[animations_1.style({overflow:"hidden"}),animations_1.animate(".5s",animations_1.style({right:"-320px"}))])])]}),__metadata("design:paramtypes",[services_1.metadata,services_1.configurationService,services_1.modellist,services_1.language,services_1.model])],ObjectListViewHeader)}();exports.ObjectListViewHeader=ObjectListViewHeader;var ObjectListViewHeaderDetails=function(){function e(e,t){this.modellist=e,this.language=t}return e=__decorate([core_1.Component({selector:"object-listview-header-details",template:'<ul class="slds-list_horizontal slds-has-dividers_left slds-has-block-links_space"><li class="slds-item"><span><system-display-number class="slds-p-right--xxx-small" [number]="modellist.listData.list.length" [noDigits]="true"></system-display-number><system-label label="LBL_OF"></system-label><system-display-number class="slds-p-horizontal--xxx-small" [number]="modellist.listData.totalcount" [noDigits]="true"></system-display-number><system-label label="LBL_ITEMS"></system-label></span></li><li *ngIf="modellist.getSelectedCount() > 0" class="slds-item slds-show--medium"><span>{{modellist.getSelectedCount()}} <system-label label="LBL_SELECTED"></system-label></span></li><li *ngIf="modellist.isSorted" class="slds-item"><span><system-label label="LBL_SORTEDBY"></system-label> {{modellist.getSortFields()}}</span></li><li class="slds-item slds-show--medium"><span><system-label label="LBL_LASTUPDATE"></system-label> {{modellist.getLastLoadTime()}}</span></li><li class="slds-item"><system-utility-icon [icon]="modellist.listData.source == \'db\' ? \'database\' : \'feed\'" [title]="modellist.listData.source == \'db\' ? \'Database\' : \'Search Engine\'" size="xx-small"></system-utility-icon></li></ul>'}),__metadata("design:paramtypes",[services_1.modellist,services_1.language])],e)}();exports.ObjectListViewHeaderDetails=ObjectListViewHeaderDetails;var ObjectListViewHeaderListSelector=function(){function e(e,t,s,i,o,l,a){this.metadata=e,this.userpreferences=t,this.modellist=s,this.language=i,this.model=o,this.elementRef=l,this.renderer=a}var t,s;return e.prototype.ngOnInit=function(){this.initialize()},e.prototype.initialize=function(){this.loadComponentConfig(),this.modellist.currentList&&-1!=["all","owner"].indexOf(this.modellist.currentList.id)&&this.modellist.updateStandardListsComponent(this.modellist.currentList.id,this.getDefaultComponent())},e.prototype.getDefaultComponent=function(){return this.userpreferences.getPreference("defaultlisttype",this.modellist.module)||this.componentconfig.lists[0].component},e.prototype.loadComponentConfig=function(){var e=this.metadata.getComponentConfig("ObjectListView",this.model.module),t=this.metadata.getComponentSetObjects(e.componentset);this.componentconfig={lists:t.map(function(e){return{component:e.component,icon:e.componentconfig.icon?e.componentconfig.icon:"list",label:e.componentconfig.name}})}},Object.defineProperty(e.prototype,"currentListIcon",{get:function(){var t=this,e="";if(this.componentconfig.lists){var s=this.componentconfig.lists.find(function(e){return e.component==t.modellist.currentList.listcomponent});e=null==s?void 0:s.icon}return e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"disabled",{get:function(){return!(1<this.componentconfig.lists.length)||this.modellist.isLoading},enumerable:!1,configurable:!0}),e.prototype.setListComponent=function(e){this.modellist.currentList&&(-1!=["all","owner"].indexOf(this.modellist.currentList.id)?this.modellist.updateStandardListsComponent(this.modellist.currentList.id,e):this.modellist.updateListTypeComponent(e))},e=__decorate([core_1.Component({selector:"object-listview-header-list-selector",template:'<div class="slds-dropdown-trigger slds-dropdown-trigger--click slds-m-horizontal--xxx-small" aria-expanded="false" system-dropdown-trigger-simple><button class="slds-button slds-button--icon slds-button--icon-border slds-button--neutral" aria-haspopup="true" system-title="LBL_CHANGE_VIEW" [disabled]="disabled"><system-button-icon [icon]="currentListIcon" size="small"></system-button-icon><system-button-icon class="slds-p-left--xxx-small" icon="down" size="x-small"></system-button-icon></button><div class="slds-dropdown slds-dropdown--right slds-dropdown--small"><ul class="slds-dropdown__list" role="menu"><li class="slds-dropdown__header" role="separator"><span class="slds-text-title--caps"><system-label label="LBL_DISPLAYAS"></system-label></span></li><li *ngFor="let list of componentconfig.lists" class="slds-dropdown__item slds-is-selected" role="presentation" (click)="setListComponent(list.component)"><a href="javascript:void(0);" role="menuitemcheckbox" aria-checked="true" tabindex="0"><span class="slds-truncate"><system-label [label]="list.label"></system-label></span><system-utility-icon [icon]="list.icon" size="x-small"></system-utility-icon></a></li></ul></div></div>'}),__metadata("design:paramtypes",[services_1.metadata,services_1.userpreferences,services_1.modellist,services_1.language,services_1.model,"function"==typeof(t=void 0!==core_1.ElementRef&&core_1.ElementRef)?t:Object,"function"==typeof(s=void 0!==core_1.Renderer2&&core_1.Renderer2)?s:Object])],e)}();exports.ObjectListViewHeaderListSelector=ObjectListViewHeaderListSelector;var ObjectList=function(){function ObjectList(e,t,s,i,o,l,a,n){this.router=e,this.cdRef=t,this.metadata=s,this.modellist=i,this.language=o,this.injector=l,this.modal=a,this.layout=n,this.subscriptions=new rxjs_1.Subscription,this.componentconfig={}}var e,t,s;return Object.defineProperty(ObjectList.prototype,"actionset",{get:function(){return this.componentconfig.actionset},enumerable:!1,configurable:!0}),Object.defineProperty(ObjectList.prototype,"isloading",{get:function(){return this.modellist.isLoading},enumerable:!1,configurable:!0}),ObjectList.prototype.ngOnInit=function(){this.initialize()},ObjectList.prototype.initialize=function(){var t=this;this.loadComponentConfig(),this.chooseFields(),this.modellist.loadlimit=50,this.modellist.loadFromSession()||this.getListData(),this.subscriptions.add(this.modellist.listType$.pipe(operators_1.skip(1)).subscribe(function(e){return t.handleListTypeChange(e)})),this.subscriptions.add(this.modellist.listDataChanged$.subscribe(function(){t.cdRef.detectChanges()}))},ObjectList.prototype.handleListTypeChange=function(e){this.cdRef.detectChanges(),"ObjectList"==e.listcomponent&&(this.chooseFields(),this.getListData())},ObjectList.prototype.loadComponentConfig=function(){this.componentconfig=this.metadata.getComponentConfig("ObjectList",this.modellist.module),"disableAutoloadListAll"in this.componentconfig||(this.componentconfig.disableAutoloadListAll=this.modellist.disableAutoloadListAll)},ObjectList.prototype.getListData=function(){var e,t=this;"all"==this.modellist.currentList.id&&(null===(e=this.componentconfig)||void 0===e?void 0:e.disableAutoloadListAll)?this.modellist.resetListData():this.modellist.getListData().subscribe(function(){return t.cdRef.detectChanges()})},Object.defineProperty(ObjectList.prototype,"inlineedit",{get:function(){return this.componentconfig.inlineedit},enumerable:!1,configurable:!0}),Object.defineProperty(ObjectList.prototype,"issmall",{get:function(){return"small"==this.layout.screenwidth},enumerable:!1,configurable:!0}),Object.defineProperty(ObjectList.prototype,"sortfield",{get:function(){return this.componentconfig.sortfield},enumerable:!1,configurable:!0}),Object.defineProperty(ObjectList.prototype,"sortdirection",{get:function(){return this.componentconfig.sortdirection?this.componentconfig.sortdirection:"ASC"},enumerable:!1,configurable:!0}),ObjectList.prototype.ngOnDestroy=function(){this.subscriptions.unsubscribe(),this.modellist.useCache=!1},Object.defineProperty(ObjectList.prototype,"rowNumbers",{get:function(){return!0===this.componentconfig.rownumbers},enumerable:!1,configurable:!0}),Object.defineProperty(ObjectList.prototype,"noAutoLoad",{get:function(){return!0===this.componentconfig.noautoload},enumerable:!1,configurable:!0}),Object.defineProperty(ObjectList.prototype,"canLoadMore",{get:function(){return this.modellist.canLoadMore()},enumerable:!1,configurable:!0}),ObjectList.prototype.loadMore=function(){this.modellist.loadMoreList()},ObjectList.prototype.onScroll=function(){this.noAutoLoad||this.modellist.loadMoreList()},ObjectList.prototype.trackbyfn=function(e,t){return t.id},ObjectList.prototype.chooseFields=function(){var e;this.modellist.isCustomList()&&0==this.modellist.listfields.length&&0==(null===(e=this.modellist.getFieldDefs())||void 0===e?void 0:e.length)&&this.modellist.checkAccess("edit")&&this.modal.openModal("ObjectListViewSettingsSetfieldsModal",!0,this.injector)},ObjectList=__decorate([core_1.Component({selector:"object-list",template:'<div class="slds-theme--default" (system-to-bottom)="onScroll()" style="min-height: 100px"><table class="slds-table slds-table--fixed-layout slds-max-medium-table--stacked-horizontal slds-table--header-fixed" [ngClass]="{\'slds-table--bordered\':!issmall}" role="grid"><thead><tr class="slds-text-title--caps" object-list-header [actionset]="actionset" [showRowNumber]="rowNumbers"></tr></thead><tbody><tr object-list-item *ngFor="let listItem of modellist.listData.list; let i = index" [rownumbers]="rowNumbers" [rowNumber]="i + 1" [listItem]="listItem" [inlineedit]="inlineedit" [rowselect]="true" class="slds-hint-parent"></tr></tbody><tbody system-table-stencils [columns]="modellist.listfields.length" [select]="true" [rownumbers]="rowNumbers" [tools]="true" [rows]="20" *ngIf="isloading"></tbody></table><div class="slds-size--1-of-1 slds-p-around--small slds-align--absolute-center" *ngIf="noAutoLoad && canLoadMore"><button class="slds-button slds-button--neutral" (click)="loadMore()"><system-button-icon class="slds-p-right--x-small" icon="skip_forward"></system-button-icon><system-label label="LBL_LOAD_MORE"></system-label></button></div><div *ngIf="!modellist.isLoading && modellist.listData.totalcount == 0" class="slds-align--absolute-center" style="height: calc(100% - 35px)"><system-illustration-no-records><system-label label="MSG_NO_RECORDS_FOUND"></system-label></system-illustration-no-records></div></div>',changeDetection:core_1.ChangeDetectionStrategy.OnPush}),__metadata("design:paramtypes",["function"==typeof(e=void 0!==router_1.Router&&router_1.Router)?e:Object,"function"==typeof(t=void 0!==core_1.ChangeDetectorRef&&core_1.ChangeDetectorRef)?t:Object,services_1.metadata,services_1.modellist,services_1.language,"function"==typeof(s=void 0!==core_1.Injector&&core_1.Injector)?s:Object,services_1.modal,services_1.layout])],ObjectList)}();exports.ObjectList=ObjectList;var ObjectListViewContainer=function(){function ObjectListViewContainer(e,t,s,i){var o=this;this.metadata=e,this.broadcast=t,this.navigation=s,this.navigationtab=i,this.moduleName="",this.initialized=!1,this.componentRefs=[],this.componentSubscriptions=[],this.navigationtab.activeRoute$.subscribe(function(e){o.moduleName=e.params.module,o.initialized&&o.buildContainer()}),this.componentSubscriptions.push(this.broadcast.message$.subscribe(function(e){o.handleMessage(e)}))}var e;return ObjectListViewContainer.prototype.ngAfterViewInit=function(){this.initialized=!0,this.buildContainer()},ObjectListViewContainer.prototype.ngOnDestroy=function(){for(var e=0,t=this.componentRefs;e<t.length;e++){t[e].destroy()}for(var s=0,i=this.componentSubscriptions;s<i.length;s++){i[s].unsubscribe()}},ObjectListViewContainer.prototype.buildContainer=function(){for(var s=this,e=0,t=this.componentRefs;e<t.length;e++){t[e].destroy()}this.componentRefs=[];for(var i=this.metadata.getComponentConfig("ObjectListViewContainer",this.moduleName),o=function(t){l.metadata.addComponent(t.component,l.container).subscribe(function(e){t.componentconfig&&0<Object.keys(t.componentconfig).length?e.instance.componentconfig=t.componentconfig:e.instance.componentconfig=s.metadata.getComponentConfig(t.component,s.moduleName),s.componentRefs.push(e)})},l=this,a=0,n=this.metadata.getComponentSetObjects(i.componentset);a<n.length;a++){o(n[a])}},ObjectListViewContainer.prototype.handleMessage=function(e){switch(e.messagetype){case"applauncher.setrole":this.buildContainer()}},__decorate([core_1.ViewChild("container",{read:core_1.ViewContainerRef,static:!0}),__metadata("design:type","function"==typeof(e=void 0!==core_1.ViewContainerRef&&core_1.ViewContainerRef)?e:Object)],ObjectListViewContainer.prototype,"container",void 0),ObjectListViewContainer=__decorate([core_1.Component({selector:"object-listview-container",template:"<div #container></div>"}),__metadata("design:paramtypes",[services_1.metadata,services_1.broadcast,services_1.navigation,services_1.navigationtab])],ObjectListViewContainer)}();exports.ObjectListViewContainer=ObjectListViewContainer;var ObjectListView=function(){function ObjectListView(e,t,s,i,o,l,a){this.navigation=e,this.navigationtab=t,this.activatedRoute=s,this.metadata=i,this.modellist=o,this.model=l,this.userpreferences=a,this.componentRefs=[],this.viewInitialized=!1,this.modellistSubscription=new rxjs_1.Subscription,this.initialize()}var e,t;return ObjectListView.prototype.initialize=function(){var e=this;this.model.module=this.navigationtab.activeRoute.params.module,this.modellist.initialize(this.model.module),this.modellistSubscription=this.modellist.listTypeComponent$.subscribe(function(){return e.handleListTypeChange()})},ObjectListView.prototype.handleListTypeChange=function(){this.viewInitialized&&this.buildContainer()},ObjectListView.prototype.ngAfterViewInit=function(){this.viewInitialized=!0,this.buildContainer()},ObjectListView.prototype.ngOnDestroy=function(){this.modellistSubscription.unsubscribe()},ObjectListView.prototype.buildContainer=function(){var e,t,s=this;if(null===(e=this.modellist.currentList)||void 0===e?void 0:e.listcomponent){for(var i=0,o=this.componentRefs;i<o.length;i++){o[i].destroy()}this.metadata.addComponent(null===(t=this.modellist.currentList)||void 0===t?void 0:t.listcomponent,this.container).subscribe(function(e){s.componentRefs.push(e)})}},__decorate([core_1.ViewChild("container",{read:core_1.ViewContainerRef,static:!0}),__metadata("design:type","function"==typeof(e=void 0!==core_1.ViewContainerRef&&core_1.ViewContainerRef)?e:Object)],ObjectListView.prototype,"container",void 0),ObjectListView=__decorate([core_1.Component({selector:"object-listview",template:"<object-listview-header></object-listview-header><div system-to-bottom-noscroll><div #container></div></div>",providers:[services_1.modellist,services_1.model]}),__metadata("design:paramtypes",[services_1.navigation,services_1.navigationtab,"function"==typeof(t=void 0!==router_1.ActivatedRoute&&router_1.ActivatedRoute)?t:Object,services_1.metadata,services_1.modellist,services_1.model,services_1.userpreferences])],ObjectListView)}();exports.ObjectListView=ObjectListView;var ObjectActionContainerItem=function(){function e(e,t,s,i,o,l){this.language=e,this.metadata=t,this.model=s,this.ngZone=i,this.injector=o,this.cdr=l,this.displayasicon=!1,this.actionemitter=new core_1.EventEmitter,this.subscriptions=new rxjs_1.Subscription,this.standardActions={NEW:"ObjectActionNewButton",DUPLICATE:"ObjectActionDuplicateButton",NEWRELATED:"ObjectActionNewrelatedButton",EDIT:"ObjectActionEditButton",DELETE:"ObjectActionDeleteButton",AUDIT:"ObjectActionAuditlogButton",IMPORT:"SpiceImporterImportButton",MAIL:"ObjectActionBeanToMailButton",PRINT:"ObjectActionOutputBeanButton",SELECT:"ObjectActionSelectButton",OPEN:"ObjectActionOpenButton",CANCEL:"ObjectActionCancelButton",SAVE:"ObjectActionSaveButton",SAVERELATED:"ObjectActionSaveRelatedButton"},this.stable=!1}var t,s,i,o,l;return Object.defineProperty(e.prototype,"id",{get:function(){return this.actionitem.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"disabled",{get:function(){return!this.stable||!this.componentref||!!this.componentref.instance.disabled},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hidden",{get:function(){return!this.stable||!this.componentref||!!this.componentref.instance.hidden},enumerable:!1,configurable:!0}),e.prototype.ngAfterViewInit=function(){var t=this;this.metadata.addComponent(this.actionitem.action?this.standardActions[this.actionitem.action]:this.actionitem.component,this.actioncontainer,this.injector).subscribe(function(e){e.instance.parent=t.model,e.instance.actionconfig=t.actionitem.actionconfig,e.instance.displayasicon=t.displayasicon,e.instance.actionemitter&&t.subscriptions.add(e.instance.actionemitter.subscribe(function(e){t.actionemitter.emit(e)})),t.componentref=e,t.cdr.detectChanges()}),this.stableSub=this.ngZone.onStable.subscribe(function(e){t.stable=!0,t.stableSub.unsubscribe()})},e.prototype.ngOnDestroy=function(){this.subscriptions.unsubscribe()},e.prototype.execute=function(){this.componentref&&this.componentref.instance.execute&&this.componentref.instance.execute()},__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"actionitem",void 0),__decorate([core_1.Input(),__metadata("design:type",Boolean)],e.prototype,"displayasicon",void 0),__decorate([core_1.Output(),__metadata("design:type","function"==typeof(t=void 0!==core_1.EventEmitter&&core_1.EventEmitter)?t:Object)],e.prototype,"actionemitter",void 0),__decorate([core_1.ViewChild("actioncontainer",{read:core_1.ViewContainerRef,static:!0}),__metadata("design:type","function"==typeof(s=void 0!==core_1.ViewContainerRef&&core_1.ViewContainerRef)?s:Object)],e.prototype,"actioncontainer",void 0),e=__decorate([core_1.Component({selector:"object-action-container-item",template:"<div #actioncontainer></div>"}),__metadata("design:paramtypes",[services_1.language,services_1.metadata,services_1.model,"function"==typeof(i=void 0!==core_1.NgZone&&core_1.NgZone)?i:Object,"function"==typeof(o=void 0!==core_1.Injector&&core_1.Injector)?o:Object,"function"==typeof(l=void 0!==core_1.ChangeDetectorRef&&core_1.ChangeDetectorRef)?l:Object])],e)}();exports.ObjectActionContainerItem=ObjectActionContainerItem;var ObjectActionContainer=function(){function e(e,t,s,i,o){this.language=e,this.metadata=t,this.model=s,this.ngZone=i,this.cdRef=o,this.containerclass="slds-button-group",this.displayasicon=!1,this.actionset="",this.mainactionitems=[],this.addactionitems=[],this.actionemitter=new core_1.EventEmitter,this.stable=!1}var t,s,i,o;return e.prototype.ngOnChanges=function(){var e=this.metadata.getActionSetItems(this.actionset);this.mainactionitems=[],this.addactionitems=[];for(var t=!0,s=0,i=e;s<i.length;s++){var o=i[s];t||"1"==o.singlebutton?(this.mainactionitems.push({disabled:!0,id:o.id,sequence:o.sequence,action:o.action,component:o.component,actionconfig:o.actionconfig}),t=!1):this.addactionitems.push({disabled:!0,id:o.id,sequence:o.sequence,action:o.action,component:o.component,actionconfig:o.actionconfig})}},e.prototype.ngAfterViewInit=function(){var t=this;this.stableSub=this.ngZone.onStable.subscribe(function(e){t.stable=!0,t.stableSub.unsubscribe(),t.cdRef.detectChanges()})},Object.defineProperty(e.prototype,"opendisabled",{get:function(){var t=this,s=!0;return this.addactionitems.some(function(e){if(!1===t.isDisabled(e.id))return!(s=!1)}),s},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasAddItems",{get:function(){return 0<this.addactionitems.length},enumerable:!1,configurable:!0}),e.prototype.disabledhandler=function(t,s){var e=this;setTimeout(function(){e.mainactionitems.some(function(e){if(e.id==t)return e.disabled=s,!0}),e.addactionitems.some(function(e){if(e.id==t)return e.disabled=s,!0})})},e.prototype.addclasses=function(e){var t=e.actionconfig.addclasses;return this.isHidden(e.id)&&(t+=" slds-hide"),t},e.prototype.isDisabled=function(t){var s=!0;return this.actionitemlist&&this.actionitemlist.some(function(e){if(e.id==t)return s=e.disabled,!0}),s},e.prototype.isHidden=function(t){if(!this.stable)return!1;var e=!1;if(this.actionitemlist){var s=this.actionitemlist.find(function(e){return e.id==t});s&&(e=s.hidden)}return e},e.prototype.propagateclick=function(t){this.actionitemlist.some(function(e){if(e.id==t)return e.disabled||e.execute(),!0})},e.prototype.emitaction=function(e){this.actionemitter.emit(e)},__decorate([core_1.ViewChildren(ObjectActionContainerItem),__metadata("design:type","function"==typeof(t=void 0!==core_1.QueryList&&core_1.QueryList)?t:Object)],e.prototype,"actionitemlist",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"containerclass",void 0),__decorate([core_1.Input(),__metadata("design:type",Boolean)],e.prototype,"displayasicon",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"actionset",void 0),__decorate([core_1.Output(),__metadata("design:type","function"==typeof(s=void 0!==core_1.EventEmitter&&core_1.EventEmitter)?s:Object)],e.prototype,"actionemitter",void 0),e=__decorate([core_1.Component({selector:"object-action-container",template:'<div [ngClass]="containerclass" role="group"><button class="slds-button slds-button_neutral" [ngClass]="addclasses(actionitem)" *ngFor="let actionitem of mainactionitems" [disabled]="isDisabled(actionitem.id)" (click)="propagateclick(actionitem.id)"><object-action-container-item [actionitem]="actionitem" [displayasicon]="displayasicon" (actionemitter)="emitaction($event)"></object-action-container-item></button><div *ngIf="hasAddItems" class="slds-dropdown-trigger slds-dropdown-trigger_click slds-button_last" system-dropdown-trigger><button class="slds-button slds-button_icon slds-button_icon-border-filled" aria-haspopup="true" [disabled]="opendisabled" [title]="language.getLabel(\'LBL_MORE\')"><system-button-icon icon="down"></system-button-icon><span class="slds-assistive-text"><system-label label="LBL_MORE"></system-label></span></button><div class="slds-dropdown slds-dropdown_right slds-dropdown_actions"><ul class="slds-dropdown__list" role="menu"><li class="slds-dropdown__item" role="presentation" *ngFor="let actionitem of addactionitems" [ngClass]="{\'slds-hide\': isHidden(actionitem.id)}" (click)="propagateclick(actionitem.id)"><a href="javascript:void(0);" role="menuitem" tabindex="0"><object-action-container-item class="slds-truncate" [ngClass]="{\'slds-disabled-text\': isDisabled(actionitem.id)}" [actionitem]="actionitem" (actionemitter)="emitaction($event)"></object-action-container-item></a></li></ul></div></div></div>'}),__metadata("design:paramtypes",[services_1.language,services_1.metadata,services_1.model,"function"==typeof(i=void 0!==core_1.NgZone&&core_1.NgZone)?i:Object,"function"==typeof(o=void 0!==core_1.ChangeDetectorRef&&core_1.ChangeDetectorRef)?o:Object])],e)}();exports.ObjectActionContainer=ObjectActionContainer;var ObjectListHeader=function(){function e(e,t,s,i,o,l){var a=this;this.modellist=e,this.language=t,this.view=s,this.elementRef=i,this.layout=o,this.cdref=l,this.actionset="",this.showSelectColumn=!0,this.showRowNumber=!1,this.showRowActionMenu=!0,this.subscriptions=new rxjs_1.Subscription,this.view.labels="short",this.subscriptions.add(this.modellist.listfield$.subscribe(function(e){return a.cdref.detectChanges()}))}var t,s,i;return e.prototype.ngOnDestroy=function(){this.subscriptions.unsubscribe()},Object.defineProperty(e.prototype,"isSmall",{get:function(){return"small"==this.layout.screenwidth},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"listfields",{get:function(){return this.modellist.listfields},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"module",{get:function(){return this.modellist.module},enumerable:!1,configurable:!0}),e.prototype.columnWidth=function(t){var e=this.listfields.find(function(e){return e.id==t});return e.width?e.width+"%":100/this.listfields.length+"%"},e.prototype.isSortable=function(e){return!0===e.fieldconfig.sortable},e.prototype.setSortField=function(e){var t=this;this.isSortable(e)&&(this.modellist.setSortField(e.field),this.reloadTimeOut&&window.clearTimeout(this.reloadTimeOut),this.reloadTimeOut=window.setTimeout(function(){return t.modellist.reLoadList()},500))},e.prototype.onresize=function(e){var s={},i=0;this.resizeElements.forEach(function(e){var t=e.getElementWidth();i+=t,s[e.resizeid]=e.getElementWidth()});for(var t=0,o=this.listfields;t<o.length;t++){var l=o[t];l.width=Math.round(s[l.id]/i*100)}},__decorate([core_1.ViewChildren(directives_1.SystemResizeDirective),__metadata("design:type","function"==typeof(t=void 0!==core_1.QueryList&&core_1.QueryList)?t:Object)],e.prototype,"resizeElements",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"actionset",void 0),__decorate([core_1.Input(),__metadata("design:type",Boolean)],e.prototype,"showSelectColumn",void 0),__decorate([core_1.Input(),__metadata("design:type",Boolean)],e.prototype,"showRowNumber",void 0),__decorate([core_1.Input(),__metadata("design:type",Boolean)],e.prototype,"showRowActionMenu",void 0),e=__decorate([core_1.Component({selector:"[object-list-header]",template:'<th *ngIf="showRowNumber" style="width:4rem" scope="col"><div class="slds-text-align--center slds-text-body--small slds-text-color--inverse-weak">#</div></th><th *ngIf="showSelectColumn" style="width:2rem" scope="col"><object-list-header-actionmenu class="slds-p-left--x-small" *ngIf="actionset" [actionset]="actionset" [displayasicon]="isSmall"></object-list-header-actionmenu></th><th *ngFor="let item of listfields" scope="col" class="slds-resizable" (system-resize)="onresize($event)" [resizeid]="item.id" [width]="columnWidth(item.id)"><ng-container *ngIf="isSortable(item); else nosort"><a href="javascript:void(0);" class="slds-th__action slds-text-link--reset" (click)="setSortField(item)"><field-label class="slds-truncate" addclasses="slds-truncate" [fieldname]="item.field" [fieldconfig]="item.fieldconfig"></field-label><object-list-header-sort [field]="item"></object-list-header-sort></a></ng-container><ng-template #nosort><field-label [fieldname]="item.field" [fieldconfig]="item.fieldconfig" addclasses="slds-truncate slds-p-vertical--xx-small slds-p-horizontal--x-small"></field-label></ng-template></th><th *ngIf="showRowActionMenu" class="slds-cell-shrink" scope="col"></th>',providers:[services_1.view]}),__metadata("design:paramtypes",[services_1.modellist,services_1.language,services_1.view,"function"==typeof(s=void 0!==core_1.ElementRef&&core_1.ElementRef)?s:Object,services_1.layout,"function"==typeof(i=void 0!==core_1.ChangeDetectorRef&&core_1.ChangeDetectorRef)?i:Object])],e)}();exports.ObjectListHeader=ObjectListHeader;var ObjectListHeaderSort=function(){function e(e){this.modellist=e}return Object.defineProperty(e.prototype,"module",{get:function(){return this.modellist.module},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isSortable",{get:function(){return!0===this.field.fieldconfig.sortable},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sortIcon",{get:function(){var e=this.modellist.getSortField(this.field.field);return e?"ASC"==e.sortdirection?"arrowdown":"arrowup":""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sortindex",{get:function(){var e=this.modellist.getSortField(this.field.field);return e&&1<e.sortitems?e.sortindex+1:""},enumerable:!1,configurable:!0}),__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"field",void 0),e=__decorate([core_1.Component({selector:"object-list-header-sort",template:'<div *ngIf="isSortable" class="slds-grid slds-grid--vertical-align-center slds-p-horizontal--xx-small"><system-utility-icon [icon]="sortIcon" size="xx-small"></system-utility-icon><div *ngIf="sortindex > 0" class="slds-align--absolute-center slds-theme--info" style="height: 18px; width: 18px; border-radius: 9px">{{sortindex}}</div></div>'}),__metadata("design:paramtypes",[services_1.modellist])],e)}();exports.ObjectListHeaderSort=ObjectListHeaderSort;var ObjectListHeaderActionMenu=function(r){function e(e,t,s,i,o,l,a,n){var d=r.call(this,t,s,i,o,l)||this;return d.modellist=e,d.language=t,d.metadata=s,d.model=i,d.ngZone=o,d.cdRef=l,d.modal=a,d.injector=n,d.actionitems=[],d}var t,s,i;return __extends(e,r),e.prototype.ngOnChanges=function(){var e=this.metadata.getActionSetItems(this.actionset);this.actionitems=[];for(var t=0,s=e;t<s.length;t++){var i=s[t];this.actionitems.push({disabled:!0,id:i.id,sequence:i.sequence,action:i.action,component:i.component,actionconfig:i.actionconfig})}},Object.defineProperty(e.prototype,"selectAll",{get:function(){return"all"===this.modellist.listSelected.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasSelection",{get:function(){return 0<this.modellist.getSelectedCount()},enumerable:!1,configurable:!0}),e.prototype.chooseFields=function(){if(!this.canChooseFields)return!1;this.modal.openModal("ObjectListViewSettingsSetfieldsModal",!0,this.injector)},Object.defineProperty(e.prototype,"canChooseFields",{get:function(){return"all"!=this.modellist.currentList.id&&"owner"!=this.modellist.currentList.id&&this.modellist.checkAccess("edit")},enumerable:!1,configurable:!0}),e=__decorate([core_1.Component({selector:"object-list-header-actionmenu",template:'<div system-dropdown-trigger-simple class="slds-dropdown-trigger slds-dropdown-trigger--click"><button class="slds-button slds-button--icon" system-title="LBL_SETTINGS"><system-button-icon [icon]="\'down\'"></system-button-icon></button><div class="slds-dropdown slds-dropdown--left slds-m-top--x-small"><ul class="slds-dropdown__list" role="menu"><ng-container *ngIf="actionitems.length > 0"><li *ngFor="let actionitem of actionitems" [ngClass]="{\'slds-hide\': isHidden(actionitem.id)}" class="slds-dropdown__item" role="presentation" (click)="propagateclick(actionitem.id)"><a href="javascript:void(0);" role="menuitem" tabindex="-1"><object-action-container-item class="slds-truncate" [displayasicon]="displayasicon" [ngClass]="{\'slds-disabled-text\': isDisabled(actionitem.id)}" [actionitem]="actionitem" (actionemitter)="emitaction($event)"></object-action-container-item></a></li><li class="slds-has-divider--bottom-space"></li></ng-container><li class="slds-dropdown__item" role="presentation" (click)="chooseFields()"><a href="javascript:void(0);" role="menuitem" tabindex="-1"><span [ngClass]="{\'slds-disabled-text\': !canChooseFields}"><system-label label="LBL_SETFIELDS"></system-label></span></a></li></ul></div></div>'}),__metadata("design:paramtypes",[services_1.modellist,services_1.language,services_1.metadata,services_1.model,"function"==typeof(t=void 0!==core_1.NgZone&&core_1.NgZone)?t:Object,"function"==typeof(s=void 0!==core_1.ChangeDetectorRef&&core_1.ChangeDetectorRef)?s:Object,services_1.modal,"function"==typeof(i=void 0!==core_1.Injector&&core_1.Injector)?i:Object])],e)}(ObjectActionContainer);exports.ObjectListHeaderActionMenu=ObjectListHeaderActionMenu;var ObjectListHeaderActionsAssignButton=function(){function ObjectListHeaderActionsAssignButton(e,t,s,i,o,l){this.language=e,this.metadata=t,this.model=s,this.modellist=i,this.modal=o,this.injector=l,this.actionconfig={},this.hidden=!1}var e;return Object.defineProperty(ObjectListHeaderActionsAssignButton.prototype,"disabled",{get:function(){return!this.metadata.checkModuleAcl(this.model.module,"edit")||this.modellist.getSelectedCount()<1||this.modellist.getSelectedCount()>this.maxAllowed},enumerable:!1,configurable:!0}),Object.defineProperty(ObjectListHeaderActionsAssignButton.prototype,"selectedCount",{get:function(){return this.modellist.getSelectedCount()},enumerable:!1,configurable:!0}),Object.defineProperty(ObjectListHeaderActionsAssignButton.prototype,"maxAllowed",{get:function(){return this.actionconfig.maxAllowed?parseInt(this.actionconfig.maxAllowed,10):50},enumerable:!1,configurable:!0}),ObjectListHeaderActionsAssignButton.prototype.execute=function(){this.disabled||(0<this.modellist.getSelectedItems().filter(function(e){var t;return!(null===(t=e.acl)||void 0===t?void 0:t.edit)}).length?this.modal.info(this.language.getLabel("MSG_NO_EDIT_RIGHTS",null,"long"),this.language.getLabel("MSG_NO_EDIT_RIGHTS")):this.modal.openModal("ObjectListHeaderActionsAssignModal",!0,this.injector))},ObjectListHeaderActionsAssignButton=__decorate([core_1.Component({selector:"object-list-header-actions-assign-button",template:'<span><system-label label="LBL_ASSIGN"></system-label> ({{selectedCount}})</span>'}),__metadata("design:paramtypes",[services_1.language,services_1.metadata,services_1.model,services_1.modellist,services_1.modal,"function"==typeof(e=void 0!==core_1.Injector&&core_1.Injector)?e:Object])],ObjectListHeaderActionsAssignButton)}();exports.ObjectListHeaderActionsAssignButton=ObjectListHeaderActionsAssignButton;var ObjectListHeaderActionsAssignModal=function(){function ObjectListHeaderActionsAssignModal(e,t,s,i,o,l,a){this.view=e,this.broadcast=t,this.backend=s,this.toast=i,this.modal=o,this.model=l,this.modellist=a,this.self={},this.submitting=!1}return ObjectListHeaderActionsAssignModal.prototype.ngOnInit=function(){this.model.module=this.modellist.module,this.model.initialize(),this.view.isEditable=!0,this.view.setEditMode()},ObjectListHeaderActionsAssignModal.prototype.close=function(){this.self.destroy()},Object.defineProperty(ObjectListHeaderActionsAssignModal.prototype,"canSubmit",{get:function(){return!this.submitting&&this.model.getField("assigned_user_id")},enumerable:!1,configurable:!0}),ObjectListHeaderActionsAssignModal.prototype.reassign=function(){var o=this;this.submitting=!0;var e=this.modellist.getSelectedIDs(),t={assigned_user_id:this.model.getField("assigned_user_id"),ids:e},l=this.modal.await("updating");this.backend.postRequest("module/"+this.model.module+"/massupdate/assign",{},t).subscribe(function(e){if(e.success){for(var t=0,s=e.data;t<s.length;t++){var i=s[t];o.broadcast.broadcastMessage("model.save",{id:i.id,module:o.model.module,data:i})}o.close()}else o.toast.sendToast("ERROR reassigning records","error"),o.submitting=!1;l.emit(!0)},function(e){o.toast.sendToast("ERROR reassigning records","error"),o.submitting=!1,l.emit(!0)})},ObjectListHeaderActionsAssignModal=__decorate([core_1.Component({selector:"object-list-header-actions-assign-modal",template:'<system-modal size="small"><system-modal-header (close)="close()"><system-label label="LBL_ASSIGN"></system-label></system-modal-header><system-modal-content style="overflow: visible"><field-container field="assigned_user_name"></field-container></system-modal-content><system-modal-footer><button class="slds-button slds-button--neutral" (click)="close()"><system-label label="LBL_CANCEL"></system-label></button> <button class="slds-button slds-button--brand" [disabled]="!canSubmit" (click)="reassign()"><system-label label="LBL_ASSIGN"></system-label></button></system-modal-footer></system-modal>',providers:[services_1.model,services_1.view]}),__metadata("design:paramtypes",[services_1.view,services_1.broadcast,services_1.backend,services_1.toast,services_1.modal,services_1.model,services_1.modellist])],ObjectListHeaderActionsAssignModal)}();exports.ObjectListHeaderActionsAssignModal=ObjectListHeaderActionsAssignModal;var ObjectListHeaderActionsDeleteButton=function(){function ObjectListHeaderActionsDeleteButton(e,t,s,i,o,l,a,n){this.language=e,this.metadata=t,this.model=s,this.modellist=i,this.modal=o,this.backend=l,this.broadcast=a,this.toast=n,this.actionconfig={},this.hidden=!0,this.metadata.checkModuleAcl(this.model.module,"delete")&&(this.hidden=!1)}return Object.defineProperty(ObjectListHeaderActionsDeleteButton.prototype,"disabled",{get:function(){return!this.metadata.checkModuleAcl(this.model.module,"delete")||this.modellist.getSelectedCount()<1||this.modellist.getSelectedCount()>this.maxAllowed},enumerable:!1,configurable:!0}),Object.defineProperty(ObjectListHeaderActionsDeleteButton.prototype,"selectedCount",{get:function(){return this.modellist.getSelectedCount()},enumerable:!1,configurable:!0}),Object.defineProperty(ObjectListHeaderActionsDeleteButton.prototype,"maxAllowed",{get:function(){return this.actionconfig.maxAllowed?parseInt(this.actionconfig.maxAllowed,10):100},enumerable:!1,configurable:!0}),ObjectListHeaderActionsDeleteButton.prototype.execute=function(){var l=this;this.disabled||(0<this.modellist.getSelectedItems().filter(function(e){var t;return!(null===(t=e.acl)||void 0===t?void 0:t.delete)}).length?this.modal.info(this.language.getLabel("MSG_NO_EDIT_RIGHTS",null,"long"),this.language.getLabel("MSG_NO_EDIT_RIGHTS")):this.modal.confirm(this.language.getLabelFormatted("MSG_DELETE_RECORDS",[this.modellist.getSelectedCount()],"long"),this.language.getLabel("MSG_DELETE_RECORDS")).subscribe(function(e){if(e){var o=l.modal.await("... processing ..."),t={ids:l.modellist.getSelectedIDs(),action:"DELETE"};l.backend.patchRequest("module/"+l.model.module,{},t).subscribe(function(e){for(var t=0,s=l.modellist.getSelectedIDs();t<s.length;t++){var i=s[t];l.broadcast.broadcastMessage("model.delete",{id:i,module:l.model.module})}o.emit(!0)},function(){l.toast.sendToast("ERROR deleting records","error"),o.emit(!0)})}}))},ObjectListHeaderActionsDeleteButton=__decorate([core_1.Component({selector:"object-list-header-actions-delete-button",template:'<span><system-label label="LBL_DELETE"></system-label> ({{selectedCount}})</span>'}),__metadata("design:paramtypes",[services_1.language,services_1.metadata,services_1.model,services_1.modellist,services_1.modal,services_1.backend,services_1.broadcast,services_1.toast])],ObjectListHeaderActionsDeleteButton)}();exports.ObjectListHeaderActionsDeleteButton=ObjectListHeaderActionsDeleteButton;var ObjectListHeaderActionsMergeButton=function(){function ObjectListHeaderActionsMergeButton(e,t,s,i,o,l){this.language=e,this.metadata=t,this.model=s,this.modellist=i,this.modal=o,this.injector=l,this.actionconfig={},this.hidden=!1}var e;return Object.defineProperty(ObjectListHeaderActionsMergeButton.prototype,"disabled",{get:function(){return!this.metadata.checkModuleAcl(this.model.module,"delete")||this.modellist.getSelectedCount()<1||this.modellist.getSelectedCount()>this.maxAllowed},enumerable:!1,configurable:!0}),Object.defineProperty(ObjectListHeaderActionsMergeButton.prototype,"maxAllowed",{get:function(){return this.actionconfig.maxAllowed?parseInt(this.actionconfig.maxAllowed,10):3},enumerable:!1,configurable:!0}),Object.defineProperty(ObjectListHeaderActionsMergeButton.prototype,"mergeCount",{get:function(){return this.modellist.getSelectedCount()},enumerable:!1,configurable:!0}),ObjectListHeaderActionsMergeButton.prototype.execute=function(){var t=this;this.disabled||(this.modellist.getSelectedItems().filter(function(e){var t;return null===(t=e.acl)||void 0===t?void 0:t.delete}).length<this.modellist.getSelectedCount()-1?this.modal.info(this.language.getLabel("MSG_NO_MERGE_DELETE",null,"long"),this.language.getLabel("MSG_NO_MERGE_DELETE")):this.modal.openModal("ObjectMergeModal",!0,this.injector).subscribe(function(e){e.instance.mergemodels=t.modellist.getSelectedItems()}))},ObjectListHeaderActionsMergeButton=__decorate([core_1.Component({selector:"object-list-header-actions-merge-button",template:'<span><system-label label="LBL_MERGE"></system-label> ({{mergeCount}})</span>'}),__metadata("design:paramtypes",[services_1.language,services_1.metadata,services_1.model,services_1.modellist,services_1.modal,"function"==typeof(e=void 0!==core_1.Injector&&core_1.Injector)?e:Object])],ObjectListHeaderActionsMergeButton)}();exports.ObjectListHeaderActionsMergeButton=ObjectListHeaderActionsMergeButton;var ObjectListHeaderActionsExportCSVButton=function(){function ObjectListHeaderActionsExportCSVButton(e,t,s,i,o,l){this.language=e,this.metadata=t,this.model=s,this.modellist=i,this.modal=o,this.injector=l,this.hidden=!1}var e;return Object.defineProperty(ObjectListHeaderActionsExportCSVButton.prototype,"disabled",{get:function(){return!this.metadata.checkModuleAcl(this.model.module,"export")||0==this.modellist.getSelectedCount()},enumerable:!1,configurable:!0}),Object.defineProperty(ObjectListHeaderActionsExportCSVButton.prototype,"exportcount",{get:function(){var e=this.modellist.getSelectedCount();return e||this.modellist.listData.totalcount},enumerable:!1,configurable:!0}),ObjectListHeaderActionsExportCSVButton.prototype.execute=function(){this.disabled||this.modal.openModal("ObjectListHeaderActionsExportCSVSelectFields",!0,this.injector)},ObjectListHeaderActionsExportCSVButton=__decorate([core_1.Component({selector:"object-list-header-actions-export-csv-button",template:'<span><system-label label="LBL_EXPORT"></system-label> ({{exportcount}})</span>'}),__metadata("design:paramtypes",[services_1.language,services_1.metadata,services_1.model,services_1.modellist,services_1.modal,"function"==typeof(e=void 0!==core_1.Injector&&core_1.Injector)?e:Object])],ObjectListHeaderActionsExportCSVButton)}();exports.ObjectListHeaderActionsExportCSVButton=ObjectListHeaderActionsExportCSVButton;var ObjectListHeaderActionsExportCSVSelectFields=function(){function ObjectListHeaderActionsExportCSVSelectFields(e,t,s,i,o){this.language=e,this.metadata=t,this.model=s,this.modellist=i,this.modal=o,this.multiselect=!0,this.selectedAvailableFields=[],this.selectedListFields=[],this.availableFields=[],this.exportFields=[],this.exportFields=[];for(var l=0,a=this.modellist.listfields;l<a.length;l++){var n=a[l];this.exportFields.push(n.field)}var d=this.metadata.getComponentConfig("ObjectListHeaderActionsExportCSVSelectFields",this.model.module);if(d.enableall){var r=this.metadata.getModuleFields(this.model.module);for(var n in r)this.isExportable(r[n])&&-1==this.exportFields.indexOf(n)&&this.availableFields.push(n)}else if(d.fieldset)for(var c=0,m=r=this.metadata.getFieldSetFields(d.fieldset);c<m.length;c++){n=m[c];this.isExportable(n)&&-1==this.exportFields.indexOf(n.field)&&this.availableFields.push(n.field)}else for(var p=this.metadata.getComponentConfig("ObjectList",this.modellist.module),u=0,h=r=this.metadata.getFieldSetFields(p.fieldset);u<h.length;u++){n=h[u];this.isExportable(n)&&-1==this.exportFields.indexOf(n.field)&&this.availableFields.push(n.field)}this.sortAvailableFields()}return ObjectListHeaderActionsExportCSVSelectFields.prototype.isExportable=function(e){return"link"!=e.type},ObjectListHeaderActionsExportCSVSelectFields.prototype.onFieldDrop=function(e){var t=e.previousContainer.data.splice(e.previousIndex,1);e.container.data.splice(e.currentIndex,0,t[0])},ObjectListHeaderActionsExportCSVSelectFields.prototype.selectField=function(e,t){switch(e){case"available":!1===this.multiselect?this.selectedAvailableFields=[t]:0<=this.selectedAvailableFields.indexOf(t)?this.selectedAvailableFields.splice(this.selectedAvailableFields.indexOf(t),1):this.selectedAvailableFields.push(t);break;case"list":!1===this.multiselect?this.selectedListFields=[t]:0<=this.selectedListFields.indexOf(t)?this.selectedListFields.splice(this.selectedListFields.indexOf(t),1):this.selectedListFields.push(t)}},ObjectListHeaderActionsExportCSVSelectFields.prototype.isSelected=function(e,t){switch(e){case"available":return 0<=this.selectedAvailableFields.indexOf(t);case"list":return 0<=this.selectedListFields.indexOf(t)}},ObjectListHeaderActionsExportCSVSelectFields.prototype.moveFields=function(e){var i=this;switch(e){case"available":this.selectedAvailableFields.forEach(function(s){i.availableFields.some(function(e,t){if(s==e)return i.exportFields.push(i.availableFields.splice(t,1)[0]),!0})}),this.selectedAvailableFields=[];break;case"list":this.selectedListFields.forEach(function(s){i.exportFields.some(function(e,t){if(s==e)return i.availableFields.push(i.exportFields.splice(t,1)[0]),!0})}),this.selectedListFields=[],this.sortAvailableFields()}},ObjectListHeaderActionsExportCSVSelectFields.prototype.sortAvailableFields=function(){var s=this;this.availableFields=this.availableFields.sort(function(e,t){return s.language.getFieldDisplayName(s.model.module,e).toLowerCase()>s.language.getFieldDisplayName(s.model.module,t).toLowerCase()?1:-1})},ObjectListHeaderActionsExportCSVSelectFields.prototype.cancel=function(){this.self.destroy()},ObjectListHeaderActionsExportCSVSelectFields.prototype.export=function(){var i=this;this.modal.openModal("SystemLoadingModal").subscribe(function(s){s.instance.messagelabel="LBL_EXPORTING",i.modellist.exportList(i.exportFields).subscribe(function(e){s.instance.self.destroy();var t=document.createElement("a");document.body.appendChild(t),t.href=e,t.download=i.model.module+"_"+(new moment).format("YYYY_MM_DD_HH_mm")+".csv",t.click(),t.remove(),i.self.destroy()})})},ObjectListHeaderActionsExportCSVSelectFields=__decorate([core_1.Component({template:'<system-modal><system-modal-header (close)="cancel()"><system-label label="LBL_EXPORT"></system-label></system-modal-header><system-modal-content><div class="slds-grid slds-p-horizontal--x-small"><div class="slds-form-element slds-m-horizontal--small slds-size--1-of-2"><span class="slds-form-element__label"><system-label label="LBL_AVAILABLE_FIELDS"></system-label></span><div class="slds-picklist slds-picklist__options slds-size--1-of-1" style="height: 50vh" cdkDropList #listOne="cdkDropList" [cdkDropListData]="availableFields" [cdkDropListConnectedTo]="[listTwo]" (cdkDropListDropped)="onFieldDrop($event)"><div *ngFor="let field of availableFields" cdkDrag [cdkDragData]="field" class="slds-drag--preview slds-picklist__item" [attr.aria-selected]="isSelected(\'available\', field)" role="option" (click)="selectField(\'available\', field)"><span class="slds-truncate"><system-label-fieldname [module]="model.module" [field]="field"></system-label-fieldname> ({{field}})</span></div></div></div><div class="slds-form-element slds-m-horizontal--small slds-size--1-of-2"><span class="slds-form-element__label"><system-label label="LBL_EXPORT_FIELDS"></system-label></span><div class="slds-picklist slds-picklist__options slds-size--1-of-1 cdk-drag" style="height: 50vh" cdkDropList #listTwo="cdkDropList" [cdkDropListData]="exportFields" [cdkDropListConnectedTo]="[listOne]" (cdkDropListDropped)="onFieldDrop($event)"><div *ngFor="let field of exportFields" cdkDrag [cdkDragData]="field" class="slds-drag--preview slds-picklist__item" [attr.aria-selected]="isSelected(\'list\', field)" role="option" (click)="selectField(\'list\', field)"><span class="slds-truncate"><system-label-fieldname [module]="model.module" [field]="field"></system-label-fieldname> ({{field}})</span></div></div></div></div></system-modal-content><system-modal-footer><button class="slds-button slds-button--neutral" (click)="cancel()"><system-label label="LBL_CANCEL"></system-label></button> <button class="slds-button slds-button--brand" (click)="export()"><system-label label="LBL_EXPORT"></system-label></button></system-modal-footer></system-modal>'}),__metadata("design:paramtypes",[services_1.language,services_1.metadata,services_1.model,services_1.modellist,services_1.modal])],ObjectListHeaderActionsExportCSVSelectFields)}();exports.ObjectListHeaderActionsExportCSVSelectFields=ObjectListHeaderActionsExportCSVSelectFields;var ObjectListHeaderActionsExportTargetlistButton=function(){function ObjectListHeaderActionsExportTargetlistButton(e,t,s,i,o,l){this.language=e,this.metadata=t,this.model=s,this.modellist=i,this.modal=o,this.injector=l}var e;return Object.defineProperty(ObjectListHeaderActionsExportTargetlistButton.prototype,"hidden",{get:function(){if(!this.metadata.checkModuleAcl("ProspectLists","create"))return!0;var e=!1,t=this.metadata.getModuleFields(this.modellist.module);for(var s in t){var i=t[s];if("link"==i.type&&"ProspectLists"==i.module){e=!0;break}}return!e||!this.metadata.checkModuleAcl(this.model.module,"export")},enumerable:!1,configurable:!0}),Object.defineProperty(ObjectListHeaderActionsExportTargetlistButton.prototype,"disabled",{get:function(){return 0==this.modellist.getSelectedCount()},enumerable:!1,configurable:!0}),Object.defineProperty(ObjectListHeaderActionsExportTargetlistButton.prototype,"exportcount",{get:function(){var e=this.modellist.getSelectedCount();return e||this.modellist.listData.totalcount},enumerable:!1,configurable:!0}),ObjectListHeaderActionsExportTargetlistButton.prototype.execute=function(){this.modal.openModal("ObjectListHeaderActionsExportTargetlistModal",!0,this.injector)},ObjectListHeaderActionsExportTargetlistButton=__decorate([core_1.Component({selector:"object-list-header-actions-export-targetlist-button",template:'<span><system-label label="LBL_EXPORT_PROSPECTLIST"></system-label> ({{exportcount}})</span>'}),__metadata("design:paramtypes",[services_1.language,services_1.metadata,services_1.model,services_1.modellist,services_1.modal,"function"==typeof(e=void 0!==core_1.Injector&&core_1.Injector)?e:Object])],ObjectListHeaderActionsExportTargetlistButton)}();exports.ObjectListHeaderActionsExportTargetlistButton=ObjectListHeaderActionsExportTargetlistButton;var ObjectListHeaderActionsExportTargetlistModal=function(){function ObjectListHeaderActionsExportTargetlistModal(e,t,s,i,o,l,a){this.language=e,this.router=t,this.metadata=s,this.backend=i,this.toast=o,this.modal=l,this.modellist=a,this.self={},this.targetlistname=""}var e;return ObjectListHeaderActionsExportTargetlistModal.prototype.close=function(){this.self.destroy()},Object.defineProperty(ObjectListHeaderActionsExportTargetlistModal.prototype,"itemcount",{get:function(){return this.modellist.listData.totalcount},enumerable:!1,configurable:!0}),ObjectListHeaderActionsExportTargetlistModal.prototype.export=function(){var i=this;this.modal.openModal("SystemLoadingModal").subscribe(function(t){t.instance.messagelabel="LBL_EXPORTING";var e=i.modellist.getSelectedIDs(),s={listtype:i.modellist.currentList.id,targetlistname:i.targetlistname,owner:"owner"==i.modellist.currentList.id,module:i.modellist.module,modulefilter:i.modellist.modulefilter,searchterm:i.modellist.searchTerm,aggregates:i.modellist.selectedAggregates,listid:i.modellist.currentList.id,ids:e};i.backend.postRequest("module/ProspectLists/exportfromlist",{},s).subscribe(function(e){t.instance.self.destroy(),"success"==e.status?(i.router.navigate(["/module/ProspectLists/"+e.id]),i.close()):i.toast.sendToast(e.msg,"error")})})},ObjectListHeaderActionsExportTargetlistModal=__decorate([core_1.Component({selector:"object-list-header-actions-export-targetlist-modal",template:'<system-modal><system-modal-header (close)="close()"><system-label label="LBL_EXPORT_PROSPECTLIST"></system-label> ({{itemcount}} <system-label label="LBL_RECORDS"></system-label>)</system-modal-header><system-modal-content><div class="slds-form-element"><label class="slds-form-element__label"><abbr class="slds-required" title="required">*</abbr> <system-label label="LBL_PROSPECTLIST"></system-label></label><div class="slds-form-element__control"><input type="text" class="slds-input" [(ngModel)]="targetlistname"></div></div></system-modal-content><system-modal-footer><button class="slds-button slds-button--neutral" (click)="close()"><system-label label="LBL_CANCEL"></system-label></button> <button class="slds-button slds-button--brand" [disabled]="!targetlistname" (click)="export()"><system-label label="LBL_EXPORT"></system-label></button></system-modal-footer></system-modal>',providers:[services_1.model]}),__metadata("design:paramtypes",[services_1.language,"function"==typeof(e=void 0!==router_1.Router&&router_1.Router)?e:Object,services_1.metadata,services_1.backend,services_1.toast,services_1.modal,services_1.modellist])],ObjectListHeaderActionsExportTargetlistModal)}();exports.ObjectListHeaderActionsExportTargetlistModal=ObjectListHeaderActionsExportTargetlistModal;var ObjectListHeaderActionsSelectAllButton=function(){function ObjectListHeaderActionsSelectAllButton(e,t,s,i,o){this.language=e,this.metadata=t,this.model=s,this.modellist=i,this.modal=o,this.hidden=!1}return Object.defineProperty(ObjectListHeaderActionsSelectAllButton.prototype,"disabled",{get:function(){return 0==this.modellist.listData.list.length},enumerable:!1,configurable:!0}),ObjectListHeaderActionsSelectAllButton.prototype.execute=function(){this.modellist.setAllSelected()},ObjectListHeaderActionsSelectAllButton=__decorate([core_1.Component({selector:"object-list-header-actions-select-all-button",template:'<span class="slds-truncate"><system-label label="LBL_SELECT_ALL"></system-label></span>'}),__metadata("design:paramtypes",[services_1.language,services_1.metadata,services_1.model,services_1.modellist,services_1.modal])],ObjectListHeaderActionsSelectAllButton)}();exports.ObjectListHeaderActionsSelectAllButton=ObjectListHeaderActionsSelectAllButton;var ObjectListHeaderActionsUnselectAllButton=function(){function ObjectListHeaderActionsUnselectAllButton(e,t,s,i,o){this.language=e,this.metadata=t,this.model=s,this.modellist=i,this.modal=o,this.disabled=!1}return Object.defineProperty(ObjectListHeaderActionsUnselectAllButton.prototype,"hasSelection",{get:function(){return 0<this.modellist.getSelectedCount()},enumerable:!1,configurable:!0}),Object.defineProperty(ObjectListHeaderActionsUnselectAllButton.prototype,"hidden",{get:function(){return!this.hasSelection},enumerable:!1,configurable:!0}),ObjectListHeaderActionsUnselectAllButton.prototype.execute=function(){this.modellist.setAllUnselected()},ObjectListHeaderActionsUnselectAllButton=__decorate([core_1.Component({selector:"object-list-header-actions-unselect-all-button",template:'<span class="slds-truncate"><system-label label="LBL_UNSELECT_ALL"></system-label></span>'}),__metadata("design:paramtypes",[services_1.language,services_1.metadata,services_1.model,services_1.modellist,services_1.modal])],ObjectListHeaderActionsUnselectAllButton)}();exports.ObjectListHeaderActionsUnselectAllButton=ObjectListHeaderActionsUnselectAllButton;var ObjectListHeaderActionsSelectRangeButton=function(){function ObjectListHeaderActionsSelectRangeButton(e,t,s,i){this.model=e,this.modellist=t,this.modal=s,this.injector=i,this.hidden=!1}var e;return Object.defineProperty(ObjectListHeaderActionsSelectRangeButton.prototype,"disabled",{get:function(){return 0==this.modellist.listData.list.length},enumerable:!1,configurable:!0}),ObjectListHeaderActionsSelectRangeButton.prototype.execute=function(){this.modal.openModal("ObjectListHeaderActionsSelectRangeModal",!0,this.injector)},ObjectListHeaderActionsSelectRangeButton=__decorate([core_1.Component({selector:"object-list-header-actions-select-range-button",template:'<span class="slds-truncate"><system-label label="LBL_SELECT_RANGE"></system-label></span>'}),__metadata("design:paramtypes",[services_1.model,services_1.modellist,services_1.modal,"function"==typeof(e=void 0!==core_1.Injector&&core_1.Injector)?e:Object])],ObjectListHeaderActionsSelectRangeButton)}();exports.ObjectListHeaderActionsSelectRangeButton=ObjectListHeaderActionsSelectRangeButton;var ObjectListHeaderActionsSelectRangeModal=function(){function ObjectListHeaderActionsSelectRangeModal(e,t){this.model=e,this.modellist=t,this.from=1}return ObjectListHeaderActionsSelectRangeModal.prototype.ngOnInit=function(){this.to=this.modellist.listData.list.length},ObjectListHeaderActionsSelectRangeModal.prototype.close=function(){this.self.destroy()},Object.defineProperty(ObjectListHeaderActionsSelectRangeModal.prototype,"canSelect",{get:function(){return!(!this.from||!this.to)&&(!(this.from<1||this.to<1)&&(!(this.to<=this.from)&&!(this.to>this.modellist.listData.list.length)))},enumerable:!1,configurable:!0}),ObjectListHeaderActionsSelectRangeModal.prototype.select=function(){this.canSelect&&(this.modellist.setRangeSelected(this.from,this.to),this.close())},ObjectListHeaderActionsSelectRangeModal=__decorate([core_1.Component({selector:"object-list-header-actions-select-range-modal",template:'<system-modal size="small"><system-modal-header (close)="close()"><system-label label="LBL_SELECT_RANGE"></system-label></system-modal-header><system-modal-content><div class="slds-grid slds-grid--vertical-align-center slds-gutters_direct-small"><div class="slds-col slds-size--1-of-2 slds-grid slds-grid--vertical-align-center"><div class="slds-size--1-of-3 slds-text-align--center"><system-label label="LBL_FROM"></system-label></div><input type="number" class="slds-input slds-size--2-of-3" [(ngModel)]="from"></div><div class="slds-col slds-size--1-of-2 slds-grid slds-grid--vertical-align-center"><div class="slds-size--1-of-3 slds-text-align--center"><system-label label="LBL_TO"></system-label></div><input type="number" class="slds-input slds-size--2-of-3" [(ngModel)]="to"></div></div></system-modal-content><system-modal-footer><button class="slds-button slds-button--neutral" (click)="close()"><system-label label="LBL_CLOSE"></system-label></button> <button class="slds-button slds-button--brand" [disabled]="!canSelect" (click)="select()"><system-label label="LBL_SELECT"></system-label></button></system-modal-footer></system-modal>'}),__metadata("design:paramtypes",[services_1.model,services_1.modellist])],ObjectListHeaderActionsSelectRangeModal)}();exports.ObjectListHeaderActionsSelectRangeModal=ObjectListHeaderActionsSelectRangeModal;var ObjectListItem=function(){function e(e,t,s,i,o,l,a){this.model=e,this.modelutilities=t,this.modellist=s,this.view=i,this.router=o,this.language=l,this.cdref=a,this.rowselect=!1,this.rownumbers=!1,this.rowselectdisabled=!1,this.listItem={},this.inlineedit=!1,this.displaylinks=!0,this.showActionMenu=!0,this.subscriptions=[],this.view.displayLabels=!1}var t,s;return Object.defineProperty(e.prototype,"listFields",{get:function(){return this.modellist.listfields},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){var t=this;this.model.module=this.modellist.module,this.model.id=this.listItem.id,this.model.data=this.modelutilities.backendModel2spice(this.modellist.module,this.listItem),this.model.initializeFieldsStati(),this.view.isEditable=this.inlineedit&&this.model.checkAccess("edit"),this.view.displayLinks=this.displaylinks,this.subscriptions.push(this.model.data$.subscribe(function(e){return t.cdref.detectChanges()})),this.subscriptions.push(this.modellist.listfield$.subscribe(function(e){return t.cdref.detectChanges()})),this.subscriptions.push(this.modellist.selectionChanged$.subscribe(function(e){return t.cdref.detectChanges()}))},e.prototype.ngOnDestroy=function(){for(var e=0,t=this.subscriptions;e<t.length;e++){t[e].unsubscribe()}},e.prototype.navigateDetail=function(){this.router.navigate(["/module/"+this.model.module+"/"+this.model.id])},__decorate([core_1.Input(),__metadata("design:type",Boolean)],e.prototype,"rowselect",void 0),__decorate([core_1.Input(),__metadata("design:type",Boolean)],e.prototype,"rownumbers",void 0),__decorate([core_1.Input(),__metadata("design:type",Boolean)],e.prototype,"rowselectdisabled",void 0),__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"listItem",void 0),__decorate([core_1.Input(),__metadata("design:type",Boolean)],e.prototype,"inlineedit",void 0),__decorate([core_1.Input(),__metadata("design:type",Boolean)],e.prototype,"displaylinks",void 0),__decorate([core_1.Input(),__metadata("design:type",Number)],e.prototype,"rowNumber",void 0),__decorate([core_1.Input(),__metadata("design:type",Boolean)],e.prototype,"showActionMenu",void 0),e=__decorate([core_1.Component({selector:"[object-list-item]",template:'<td *ngIf="rownumbers" role="gridcell" class="slds-show--medium" style="min-width: 3rem"><div class="slds-text-align--center slds-text-body--small slds-text-color--inverse-weak">{{rowNumber}}</div></td><td *ngIf="rowselect" role="gridcell" class="slds-show--medium"><system-checkbox [disabled]="rowselectdisabled" [(ngModel)]="listItem.selected"></system-checkbox></td><td style="min-width: 2rem" *ngFor="let item of listFields" scope="row" [attr.data-label]="language.getFieldDisplayName(model.module, item.field)"><field-container [field]="item.field" [fieldconfig]="item.fieldconfig" [fielddisplayclass]="\'slds-truncate slds-p-horizontal--x-small\'"></field-container></td><td *ngIf="showActionMenu" role="gridcell" class="slds-cell-shrink"><object-action-menu [buttonsize]="\'small\'"></object-action-menu></td>',providers:[services_1.model,services_1.view],styles:[":host /deep/ field-container global-button-icon {display:none;}",":host:hover /deep/ field-container global-button-icon {display:inline;}"],changeDetection:core_1.ChangeDetectionStrategy.OnPush}),__metadata("design:paramtypes",[services_1.model,services_1.modelutilities,services_1.modellist,services_1.view,"function"==typeof(t=void 0!==router_1.Router&&router_1.Router)?t:Object,services_1.language,"function"==typeof(s=void 0!==core_1.ChangeDetectorRef&&core_1.ChangeDetectorRef)?s:Object])],e)}();exports.ObjectListItem=ObjectListItem;var ObjectListItemField=function(){function e(e,t,s){this.model=e,this.language=t,this.metadata=s,this.field=""}var t;return e.prototype.ngAfterViewInit=function(){this.buildContainer()},e.prototype.buildContainer=function(){var t=this;this.metadata.addComponent("fieldGeneric",this.fieldcontainer).subscribe(function(e){e.instance.fieldname=t.field})},__decorate([core_1.ViewChild("fieldcontainer",{read:core_1.ViewContainerRef,static:!0}),__metadata("design:type","function"==typeof(t=void 0!==core_1.ViewContainerRef&&core_1.ViewContainerRef)?t:Object)],e.prototype,"fieldcontainer",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"field",void 0),e=__decorate([core_1.Component({selector:"object-list-item--field",template:'<div class="slds-truncate" title="{{field}}"><div #fieldcontainer></div></div>'}),__metadata("design:paramtypes",[services_1.model,services_1.language,services_1.metadata])],e)}();exports.ObjectListItemField=ObjectListItemField;var ObjectActionMenu=function(p){function ObjectActionMenu(e,t,s,i,o,l,a,n,d,r,c){var m=p.call(this,e,o,s,c,r)||this;return m.language=e,m.broadcast=t,m.model=s,m.view=i,m.metadata=o,m.elementRef=l,m.renderer=a,m.helper=n,m.layout=d,m.cdRef=r,m.ngZone=c,m.buttonsize="",m.actionset="",m.actionitems=[],m.componentconfig={},m}var e,t,s,i;return __extends(ObjectActionMenu,p),ObjectActionMenu.prototype.ngOnInit=function(){""==this.actionset&&(this.componentconfig=this.metadata.getComponentConfig("ObjectActionMenu",this.model.module),this.actionset=this.componentconfig.actionset_default,this.setActionsets())},ObjectActionMenu.prototype.ngOnChanges=function(){this.setActionsets()},ObjectActionMenu.prototype.setActionsets=function(){var e=this.metadata.getActionSetItems(this.actionset);this.actionitems=[];for(var t=0,s=e;t<s.length;t++){var i=s[t];this.actionitems.push({disabled:!0,id:i.id,sequence:i.sequence,action:i.action,component:i.component,actionconfig:i.actionconfig})}this.cdRef.detectChanges()},Object.defineProperty(ObjectActionMenu.prototype,"isSmall",{get:function(){return"small"==this.layout.screenwidth},enumerable:!1,configurable:!0}),Object.defineProperty(ObjectActionMenu.prototype,"hasNoActions",{get:function(){return!(0<this.actionitems.length)},enumerable:!1,configurable:!0}),ObjectActionMenu.prototype.getButtonSizeClass=function(){if(""!==this.buttonsize)return"slds-button--icon-"+this.buttonsize},__decorate([core_1.Input(),__metadata("design:type",String)],ObjectActionMenu.prototype,"buttonsize",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],ObjectActionMenu.prototype,"actionset",void 0),ObjectActionMenu=__decorate([core_1.Component({selector:"object-action-menu",template:'<div *ngIf="!isSmall; else smallformfactor" class="slds-dropdown-trigger slds-dropdown-trigger--click" system-dropdown-trigger><button class="slds-button slds-button--icon-border-filled" [ngClass]="getButtonSizeClass()" aria-haspopup="true" [disabled]="hasNoActions"><system-button-icon [icon]="\'down\'"></system-button-icon></button><div class="slds-dropdown"><ul class="slds-dropdown__list" role="menu"><ng-container *ngIf="actionitems.length > 0"><li *ngFor="let actionitem of actionitems" [ngClass]="{\'slds-hide\': isHidden(actionitem.id)}" class="slds-dropdown__item" role="presentation" (click)="propagateclick(actionitem.id)"><a href="javascript:void(0);" role="menuitem" tabindex="-1"><object-action-container-item class="slds-truncate" [ngClass]="{\'slds-disabled-text\': isDisabled(actionitem.id)}" [actionitem]="actionitem" (actionemitter)="emitaction($event)"></object-action-container-item></a></li></ng-container></ul></div></div><ng-template #smallformfactor><div class="slds-size--1-of-1 slds-text-align--right"><div class="slds-p-top--xx-small slds-p-horizontal--x-small slds-button-group" *ngIf="actionitems.length > 0"><button *ngFor="let actionitem of actionitems" class="slds-button slds-button_neutral" [ngClass]="{\'slds-hide\': isHidden(actionitem.id)}" (click)="propagateclick(actionitem.id)"><object-action-container-item [displayasicon]="true" class="slds-truncate" [ngClass]="{\'slds-disabled-text\': isDisabled(actionitem.id)}" [actionitem]="actionitem" (actionemitter)="emitaction($event)"></object-action-container-item></button></div></div></ng-template>',providers:[services_1.helper]}),__metadata("design:paramtypes",[services_1.language,services_1.broadcast,services_1.model,services_1.view,services_1.metadata,"function"==typeof(e=void 0!==core_1.ElementRef&&core_1.ElementRef)?e:Object,"function"==typeof(t=void 0!==core_1.Renderer2&&core_1.Renderer2)?t:Object,services_1.helper,services_1.layout,"function"==typeof(s=void 0!==core_1.ChangeDetectorRef&&core_1.ChangeDetectorRef)?s:Object,"function"==typeof(i=void 0!==core_1.NgZone&&core_1.NgZone)?i:Object])],ObjectActionMenu)}(ObjectActionContainer);exports.ObjectActionMenu=ObjectActionMenu;var ObjectActionsetMenu=function(){function e(e,t,s,i,o,l,a){var n=this;this.language=e,this.model=t,this.metadata=s,this.elementRef=i,this.renderer=o,this.popup=l,this.helper=a,this.actionset="",this.buttonsize="",this.action=new core_1.EventEmitter,this.isOpen=!1,this.popupSubscription=this.popup.closePopup$.subscribe(function(e){n.isOpen=!1})}var t,s,i,o;return e.prototype.ngOnDestroy=function(){this.popupSubscription.unsubscribe()},e.prototype.hasNoActions=function(){return!1},e.prototype.toggleOpen=function(){var t=this;this.isOpen=!this.isOpen,this.isOpen?this.clickListener=this.renderer.listen("document","click",function(e){return t.onClick(e)}):this.clickListener&&this.clickListener()},e.prototype.onClick=function(e){this.elementRef.nativeElement.contains(e.target)||(this.isOpen=!1)},e.prototype.getButtonSizeClass=function(){if(""!==this.buttonsize)return"slds-button--icon-"+this.buttonsize},e.prototype.getDropdownLocationClass=function(){var e=this.elementRef.nativeElement.getBoundingClientRect();if(window.innerHeight-e.bottom<100)return"slds-dropdown--bottom"},__decorate([core_1.ViewChild("acionsetcontainer",{read:core_1.ViewContainerRef,static:!0}),__metadata("design:type","function"==typeof(t=void 0!==core_1.ViewContainerRef&&core_1.ViewContainerRef)?t:Object)],e.prototype,"acionsetcontainer",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"actionset",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"buttonsize",void 0),__decorate([core_1.Output(),__metadata("design:type","function"==typeof(s=void 0!==core_1.EventEmitter&&core_1.EventEmitter)?s:Object)],e.prototype,"action",void 0),e=__decorate([core_1.Component({selector:"object-actionset-menu",template:'<div class="slds-dropdown-trigger slds-dropdown-trigger--click" [ngClass]="{\'slds-is-open\': isOpen}"><button class="slds-button slds-button--icon-border-filled" [ngClass]="getButtonSizeClass()" aria-haspopup="true" [disabled]="hasNoActions()" (click)="toggleOpen()"><system-button-icon [icon]="\'down\'"></system-button-icon></button><div *ngIf="isOpen" class="slds-dropdown slds-dropdown--right" [ngClass]="getDropdownLocationClass()"><object-actionset-menu-container [actionset]="actionset"></object-actionset-menu-container></div></div>',providers:[services_1.popup,services_1.helper]}),__metadata("design:paramtypes",[services_1.language,services_1.model,services_1.metadata,"function"==typeof(i=void 0!==core_1.ElementRef&&core_1.ElementRef)?i:Object,"function"==typeof(o=void 0!==core_1.Renderer2&&core_1.Renderer2)?o:Object,services_1.popup,services_1.helper])],e)}();exports.ObjectActionsetMenu=ObjectActionsetMenu;var ObjectActionsetMenuContainer=function(){function e(e,t,s,i,o,l){this.language=e,this.model=t,this.metadata=s,this.elementRef=i,this.popup=o,this.helper=l,this.actionset="",this.action=new core_1.EventEmitter}var t,s,i;return e.prototype.ngAfterViewInit=function(){if(""!=this.actionset)for(var e=0,t=this.metadata.getActionSetItems(this.actionset);e<t.length;e++){var s=t[e];if(s.component)this.metadata.addComponent(s.component,this.acionsetcontainer);else switch(s.action){case"EDIT":this.metadata.addComponent("ObjectActionsetMenuContainerEdit",this.acionsetcontainer);break;case"DELETE":this.metadata.addComponent("ObjectActionsetMenuContainerDelete",this.acionsetcontainer)}}},__decorate([core_1.ViewChild("acionsetcontainer",{read:core_1.ViewContainerRef,static:!0}),__metadata("design:type","function"==typeof(t=void 0!==core_1.ViewContainerRef&&core_1.ViewContainerRef)?t:Object)],e.prototype,"acionsetcontainer",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"actionset",void 0),__decorate([core_1.Output(),__metadata("design:type","function"==typeof(s=void 0!==core_1.EventEmitter&&core_1.EventEmitter)?s:Object)],e.prototype,"action",void 0),e=__decorate([core_1.Component({selector:"object-actionset-menu-container",template:'<ul class="slds-dropdown__list" role="menu"><div #acionsetcontainer></div></ul>',providers:[services_1.popup,services_1.helper]}),__metadata("design:paramtypes",[services_1.language,services_1.model,services_1.metadata,"function"==typeof(i=void 0!==core_1.ElementRef&&core_1.ElementRef)?i:Object,services_1.popup,services_1.helper])],e)}();exports.ObjectActionsetMenuContainer=ObjectActionsetMenuContainer;var ObjectActionsetMenuContainerEdit=function(){function ObjectActionsetMenuContainerEdit(e,t){this.language=e,this.model=t}return ObjectActionsetMenuContainerEdit.prototype.doAction=function(){this.model.checkAccess("edit")&&this.model.edit(!0)},ObjectActionsetMenuContainerEdit=__decorate([core_1.Component({selector:"object-actionset-menu-container-edit",template:'<li class="slds-dropdown__item" role="presentation" (click)="doAction()"><a href="javascript:void(0);" role="menuitem"><span class="slds-truncate"><system-label label="LBL_EDIT"></system-label></span></a></li>'}),__metadata("design:paramtypes",[services_1.language,services_1.model])],ObjectActionsetMenuContainerEdit)}();exports.ObjectActionsetMenuContainerEdit=ObjectActionsetMenuContainerEdit;var ObjectActionsetMenuContainerDelete=function(){function ObjectActionsetMenuContainerDelete(e,t,s){this.language=e,this.model=t,this.helper=s}return ObjectActionsetMenuContainerDelete.prototype.doAction=function(){var t=this;this.model.checkAccess("delete")&&this.helper.confirm(this.language.getLabel("LBL_DELETE_RECORD"),this.language.getLabel("MSG_DELETE_CONFIRM")).subscribe(function(e){e&&t.model.delete()})},ObjectActionsetMenuContainerDelete=__decorate([core_1.Component({template:'<li class="slds-dropdown__item" role="presentation" (click)="doAction()"><a href="javascript:void(0);" role="menuitem"><span class="slds-truncate"><system-label label="LBL_DELETE"></system-label></span></a></li>'}),__metadata("design:paramtypes",[services_1.language,services_1.model,services_1.helper])],ObjectActionsetMenuContainerDelete)}();exports.ObjectActionsetMenuContainerDelete=ObjectActionsetMenuContainerDelete;var ObjectListTypes=function(){function e(e,t,s,i){this.modellist=e,this.elementRef=t,this.renderer=s,this.language=i,this.listTypes=[],this.subscription=new rxjs_1.Subscription,this.showMenu=!1,this.initialize()}var t,s;return Object.defineProperty(e.prototype,"disabled",{get:function(){return this.modellist.isLoading||this.modellist.standardLists.length+this.listTypes.length<=1},enumerable:!1,configurable:!0}),e.prototype.initialize=function(){var e=this;this.setListTypes(),this.subscription=this.modellist.listType$.subscribe(function(){e.setListTypes()})},e.prototype.setListTypes=function(){this.listTypes=this.modellist.getListTypes(!1).map(function(e){return __assign(__assign({},e),{icon:e.global&&"0"!=e.global?"world":"user"})}).sort(function(e,t){return e.name.toLowerCase()>t.name.toLowerCase()?1:-1})},e.prototype.setListType=function(e){void 0===e&&(e="all"),this.modellist.setListType(e),this.showMenu=!1},e.prototype.onClick=function(e){e.target&&(this.elementRef.nativeElement.contains(e.target)||(this.showMenu=!1))},e.prototype.getListtypeIcon=function(e){return e.global&&"0"!=e.global?"world":"user"},e=__decorate([core_1.Component({selector:"object-list-types",template:'<div class="slds-media__body slds-dropdown-trigger slds-dropdown-trigger--click" [system-dropdown-trigger-simple]="!disabled"><div class="slds-grid slds-grid--vertical-align-center slds-truncate slds-p-right--small"><h1 class="slds-page-header__title slds-show--medium slds-p-right--xx-small">{{modellist.currentList.name}}</h1><button class="slds-button" [disabled]="disabled"><system-button-icon icon="down" size="small"></system-button-icon></button></div><div class="slds-dropdown slds-dropdown--left slds-dropdown--medium"><ul class="slds-dropdown__list" role="menu"><li class="slds-dropdown__header slds-has-divider--bottom" role="separator"><span class="slds-text-title--caps"><system-label label="LBL_LIST_TYPES"></system-label></span></li><li *ngFor="let standardList of modellist.standardLists" class="slds-dropdown__item" [ngClass]="{\'slds-is-selected\': modellist.currentList.id == standardList.id}" role="presentation" (click)="setListType(standardList.id)"><a href="javascript:void(0);" role="menuitemcheckbox"><span class="slds-truncate"><system-utility-icon size="x-small" icon="check" addclasses="slds-icon slds-icon_selected slds-icon_x-small slds-icon-text-default slds-m-right_x-small"></system-utility-icon>{{standardList.name}}</span></a></li><li *ngFor="let listType of listTypes" class="slds-dropdown__item" [ngClass]="{\'slds-is-selected\': listType.id == modellist.currentList.id}" role="presentation" (click)="setListType(listType.id)"><a href="javascript:void(0);" role="menuitemcheckbox"><span class="slds-truncate"><system-utility-icon size="x-small" icon="check" addclasses="slds-icon slds-icon_selected slds-icon_x-small slds-icon-text-default slds-m-right_x-small"></system-utility-icon>{{listType.name}}</span><system-utility-icon [icon]="listType.icon" size="x-small"></system-utility-icon></a></li></ul></div></div>'}),__metadata("design:paramtypes",[services_1.modellist,"function"==typeof(t=void 0!==core_1.ElementRef&&core_1.ElementRef)?t:Object,"function"==typeof(s=void 0!==core_1.Renderer2&&core_1.Renderer2)?s:Object,services_1.language])],e)}();exports.ObjectListTypes=ObjectListTypes;var ObjectActionEditButton=function(){function ObjectActionEditButton(e,t,s){this.language=e,this.metadata=t,this.model=s,this.displayasicon=!1}return Object.defineProperty(ObjectActionEditButton.prototype,"hidden",{get:function(){return this.model.isEditing},enumerable:!1,configurable:!0}),Object.defineProperty(ObjectActionEditButton.prototype,"disabled",{get:function(){return!(!this.model.data.acl||this.model.checkAccess("edit"))||(this.model.isEditing||this.model.isSaving)},enumerable:!1,configurable:!0}),ObjectActionEditButton.prototype.execute=function(){this.model.edit()},ObjectActionEditButton=__decorate([core_1.Component({selector:"object-action-edit-button",template:'<system-button-icon *ngIf="displayasicon" icon="edit"></system-button-icon><span *ngIf="!displayasicon"><system-label label="LBL_EDIT"></system-label></span>'}),__metadata("design:paramtypes",[services_1.language,services_1.metadata,services_1.model])],ObjectActionEditButton)}();exports.ObjectActionEditButton=ObjectActionEditButton;var ObjectActionEditRelatedButton=function(){function ObjectActionEditRelatedButton(e,t,s,i){this.language=e,this.metadata=t,this.parent=s,this.model=i,this.disabled=!0,this.actionconfig={},this.subscriptions=new rxjs_1.Subscription}return ObjectActionEditRelatedButton.prototype.ngOnInit=function(){var t=this;this.handleDisabled(this.parent.isEditing?"edit":"display"),this.subscriptions.add(this.parent.mode$.subscribe(function(e){t.handleDisabled(e)})),this.subscriptions.add(this.parent.data$.subscribe(function(e){t.model.module=t.actionconfig.module,t.model.id=t.parent.getFieldValue(t.actionconfig.parent_field),t.handleDisabled(t.parent.isEditing?"edit":"display")}))},Object.defineProperty(ObjectActionEditRelatedButton.prototype,"hidden",{get:function(){return!this.model.id},enumerable:!1,configurable:!0}),ObjectActionEditRelatedButton.prototype.execute=function(){this.model.edit(!0)},ObjectActionEditRelatedButton.prototype.ngOnDestroy=function(){this.subscriptions.unsubscribe()},ObjectActionEditRelatedButton.prototype.handleDisabled=function(e){!this.parent.data.acl||this.parent.checkAccess("edit")?this.disabled="edit"==e:this.disabled=!0},ObjectActionEditRelatedButton=__decorate([core_1.Component({selector:"object-action-edit-related-button",template:'<span><system-label label="LBL_EDIT_RELATED"></system-label></span>',providers:[services_1.model]}),__param(2,core_1.SkipSelf()),__metadata("design:paramtypes",[services_1.language,services_1.metadata,services_1.model,services_1.model])],ObjectActionEditRelatedButton)}();exports.ObjectActionEditRelatedButton=ObjectActionEditRelatedButton;var ObjectActionDeleteButton=function(){function ObjectActionDeleteButton(e,t,s,i,o,l,a){var n=this;this.language=e,this.metadata=t,this.model=s,this.navigationtab=i,this.router=o,this.helper=l,this.injector=a,this.disabled=!0,this.displayasicon=!1,this.subscriptions=new rxjs_1.Subscription,this.actionconfig={},this.subscriptions.add(this.model.mode$.subscribe(function(e){n.handleDisabled(e)})),this.subscriptions.add(this.model.data$.subscribe(function(e){n.handleDisabled(n.model.isEditing?"edit":"display")}))}var e,t;return Object.defineProperty(ObjectActionDeleteButton.prototype,"canDelete",{get:function(){try{return this.model.checkAccess("delete")}catch(e){return!1}},enumerable:!1,configurable:!0}),ObjectActionDeleteButton.prototype.ngAfterViewInit=function(){this.handleDisabled(this.model.isEditing?"edit":"display")},ObjectActionDeleteButton.prototype.ngOnDestroy=function(){this.subscriptions.unsubscribe()},ObjectActionDeleteButton.prototype.execute=function(){var t=this;this.helper.confirm(this.language.getLabel("MSG_DELETE_RECORD"),this.language.getLabel("MSG_DELETE_RECORD","long")).subscribe(function(e){e&&t.delete()})},ObjectActionDeleteButton.prototype.delete=function(){var t=this;this.model.delete().subscribe(function(e){t.completeAction()})},ObjectActionDeleteButton.prototype.completeAction=function(){1!=this.actionconfig.noredirectoncomplete&&(this.navigationtab&&"main"!=this.navigationtab.tabid?this.navigationtab.closeTab():this.router.navigate(["/module/"+this.model.module]))},ObjectActionDeleteButton.prototype.handleDisabled=function(e){this.canDelete?this.disabled="edit"==e:this.disabled=!0},ObjectActionDeleteButton=__decorate([core_1.Component({selector:"object-action-delete-button",template:'<system-button-icon *ngIf="displayasicon" icon="delete"></system-button-icon><span *ngIf="!displayasicon"><system-label label="LBL_DELETE"></system-label></span>',providers:[services_1.helper]}),__param(3,core_1.Optional()),__metadata("design:paramtypes",[services_1.language,services_1.metadata,services_1.model,services_1.navigationtab,"function"==typeof(e=void 0!==router_1.Router&&router_1.Router)?e:Object,services_1.helper,"function"==typeof(t=void 0!==core_1.Injector&&core_1.Injector)?t:Object])],ObjectActionDeleteButton)}();exports.ObjectActionDeleteButton=ObjectActionDeleteButton;var ObjectActionAuditlogButton=function(){function ObjectActionAuditlogButton(e,t,s,i,o){this.language=e,this.metadata=t,this.model=s,this.modal=i,this.ViewContainerRef=o,this.disabled=!0,this.hidden=!0}var e;return ObjectActionAuditlogButton.prototype.ngOnInit=function(){this.metadata.getModuleDefs(this.model.module).audited&&(this.disabled=!1,this.hidden=!1)},ObjectActionAuditlogButton.prototype.execute=function(){this.modal.openModal("ObjectActionAuditlogModal",!0,this.ViewContainerRef.injector)},ObjectActionAuditlogButton=__decorate([core_1.Component({selector:"object-action-auditlog-button",template:'<span><system-label label="LBL_AUDITLOG"></system-label></span>'}),__metadata("design:paramtypes",[services_1.language,services_1.metadata,services_1.model,services_1.modal,"function"==typeof(e=void 0!==core_1.ViewContainerRef&&core_1.ViewContainerRef)?e:Object])],ObjectActionAuditlogButton)}();exports.ObjectActionAuditlogButton=ObjectActionAuditlogButton;var ObjectActionOpenButton=function(){function ObjectActionOpenButton(e,t,s,i,o,l){this.language=e,this.metadata=t,this.model=s,this.router=i,this.helper=o,this.view=l,this.displayasicon=!1}var e;return Object.defineProperty(ObjectActionOpenButton.prototype,"disabled",{get:function(){return!this.model.checkAccess("detail")||this.view.isEditMode()},enumerable:!1,configurable:!0}),ObjectActionOpenButton.prototype.execute=function(){this.model.goDetail()},ObjectActionOpenButton=__decorate([core_1.Component({selector:"object-action-open-button",template:'<system-button-icon *ngIf="displayasicon" icon="open"></system-button-icon><span *ngIf="!displayasicon"><system-label label="LBL_OPEN"></system-label></span>',providers:[services_1.helper]}),__metadata("design:paramtypes",[services_1.language,services_1.metadata,services_1.model,"function"==typeof(e=void 0!==router_1.Router&&router_1.Router)?e:Object,services_1.helper,services_1.view])],ObjectActionOpenButton)}();exports.ObjectActionOpenButton=ObjectActionOpenButton;var ObjectActionCancelButton=function(){function ObjectActionCancelButton(e,t,s,i,o,l,a){this.language=e,this.metadata=t,this.model=s,this.router=i,this.helper=o,this.view=l,this.modalwindow=a,this.actionemitter=new core_1.EventEmitter,this.displayasicon=!1}var e,t;return Object.defineProperty(ObjectActionCancelButton.prototype,"disabled",{get:function(){return this.model.isSaving},enumerable:!1,configurable:!0}),Object.defineProperty(ObjectActionCancelButton.prototype,"hidden",{get:function(){return!this.model.isEditing},enumerable:!1,configurable:!0}),ObjectActionCancelButton.prototype.execute=function(){this.model.cancelEdit(),this.view.setViewMode(),this.actionemitter.emit("cancel"),this.modalwindow&&this.modalwindow.self.destroy()},__decorate([core_1.Output(),__metadata("design:type","function"==typeof(e=void 0!==core_1.EventEmitter&&core_1.EventEmitter)?e:Object)],ObjectActionCancelButton.prototype,"actionemitter",void 0),ObjectActionCancelButton=__decorate([core_1.Component({selector:"object-action-cancel-button",template:'<system-button-icon *ngIf="displayasicon" [title]="language.getLabel(\'LBL_CANCEL\')" icon="close"></system-button-icon><span *ngIf="!displayasicon"><system-label label="LBL_CANCEL"></system-label></span>',providers:[services_1.helper]}),__param(6,core_1.Optional()),__metadata("design:paramtypes",[services_1.language,services_1.metadata,services_1.model,"function"==typeof(t=void 0!==router_1.Router&&router_1.Router)?t:Object,services_1.helper,services_1.view,services_1.modalwindow])],ObjectActionCancelButton)}();exports.ObjectActionCancelButton=ObjectActionCancelButton;var ObjectActionModalSaveButton=function(){function ObjectActionModalSaveButton(e,t,s,i,o){this.language=e,this.metadata=t,this.model=s,this.modal=i,this.modalwindow=o,this.actionemitter=new core_1.EventEmitter,this.actionconfig={}}var e;return Object.defineProperty(ObjectActionModalSaveButton.prototype,"displayLabel",{get:function(){return this.actionconfig.label?this.actionconfig.label:this.actionconfig.gorelated?"LBL_SAVE_AND_GO_TO_RECORD":"LBL_SAVE"},enumerable:!1,configurable:!0}),ObjectActionModalSaveButton.prototype.execute=function(){var s=this;this.model.validate()&&(this.model.isNew&&this.metadata.getModuleDuplicatecheck(this.model.module)?this.modal.openModal("SystemLoadingModal").subscribe(function(t){t.instance.messagelabel="LBL_CHECKING_DUPLICATES",s.model.duplicateCheck(!0).subscribe(function(e){t.instance.self.destroy(),0<e.length?(s.model.duplicates=e,s.modal.confirm(s.language.getLabel("MSG_DUPLICATES_FOUND",null,"long"),s.language.getLabel("MSG_DUPLICATES_FOUND")).subscribe(function(e){e&&s.saveModel()})):s.saveModel()})}):this.saveModel())},ObjectActionModalSaveButton.prototype.saveModel=function(){var s=this;this.modal.openModal("SystemLoadingModal").subscribe(function(t){t.instance.messagelabel="LBL_SAVING_DATA",s.model.save(!0).subscribe(function(e){s.model.endEdit(),e&&s.actionconfig.gorelated&&s.actionemitter.emit("savegodetail"),t.instance.self.destroy(),s.actionemitter.emit("save")},function(e){t.instance.self.destroy()})})},__decorate([core_1.Output(),__metadata("design:type","function"==typeof(e=void 0!==core_1.EventEmitter&&core_1.EventEmitter)?e:Object)],ObjectActionModalSaveButton.prototype,"actionemitter",void 0),ObjectActionModalSaveButton=__decorate([core_1.Component({selector:"object-action-modal-save-button",template:'<span><system-label [label]="displayLabel"></system-label></span>',providers:[services_1.helper]}),__param(4,core_1.Optional()),__metadata("design:paramtypes",[services_1.language,services_1.metadata,services_1.model,services_1.modal,services_1.modalwindow])],ObjectActionModalSaveButton)}();exports.ObjectActionModalSaveButton=ObjectActionModalSaveButton;var ObjectActionRemoveButton=function(){function ObjectActionRemoveButton(e,t,s,i,o,l){var a=this;this.language=e,this.metadata=t,this.model=s,this.view=i,this.relatedmodels=o,this.modalservice=l,this.actionemitter=new core_1.EventEmitter,this.disabled=!0,this.displayasicon=!1,this.subscriptions=new rxjs_1.Subscription,this.subscriptions.add(this.model.mode$.subscribe(function(e){a.handleDisabled(e)})),this.subscriptions.add(this.model.data$.subscribe(function(e){a.handleDisabled(a.model.isEditing?"edit":"display")}))}var e;return Object.defineProperty(ObjectActionRemoveButton.prototype,"canDelete",{get:function(){try{var e=this.model.checkAccess("deleterelated");return e=e||this.model.checkAccess("delete")}catch(e){return!1}},enumerable:!1,configurable:!0}),ObjectActionRemoveButton.prototype.ngAfterViewInit=function(){this.handleDisabled(this.model.isEditing?"edit":"display")},ObjectActionRemoveButton.prototype.execute=function(){var t=this;this.modalservice.confirm(this.language.getLabel("QST_REMOVE_ENTRY"),this.language.getLabel("QST_REMOVE_ENTRY",null,"short")).subscribe(function(e){e&&t.relatedmodels.deleteItem(t.model.id)})},ObjectActionRemoveButton.prototype.handleDisabled=function(e){this.canDelete?this.disabled="edit"==e:this.disabled=!0},ObjectActionRemoveButton.prototype.ngOnDestroy=function(){this.subscriptions.unsubscribe()},__decorate([core_1.Output(),__metadata("design:type","function"==typeof(e=void 0!==core_1.EventEmitter&&core_1.EventEmitter)?e:Object)],ObjectActionRemoveButton.prototype,"actionemitter",void 0),ObjectActionRemoveButton=__decorate([core_1.Component({selector:"object-action-remove-button",template:'<system-button-icon *ngIf="displayasicon" icon="remove_link"></system-button-icon><span *ngIf="!displayasicon"><system-label label="LBL_REMOVE"></system-label></span>'}),__metadata("design:paramtypes",[services_1.language,services_1.metadata,services_1.model,services_1.view,services_1.relatedmodels,services_1.modal])],ObjectActionRemoveButton)}();exports.ObjectActionRemoveButton=ObjectActionRemoveButton;var ObjectActionAuditlogModal=function(){function ObjectActionAuditlogModal(e,t,s){this.language=e,this.metadata=t,this.model=s,this.self=null,this.auditLog=[],this.auditTransactions=[],this.loading=!0,this.moduleFields=[],this._userfilter="",this._fieldfilter=""}return Object.defineProperty(ObjectActionAuditlogModal.prototype,"userfilter",{get:function(){return this._userfilter},set:function(e){this._userfilter=e,this.loadAuditLog()},enumerable:!1,configurable:!0}),Object.defineProperty(ObjectActionAuditlogModal.prototype,"fieldfilter",{get:function(){return this._fieldfilter},set:function(e){this._fieldfilter=e,this.loadAuditLog()},enumerable:!1,configurable:!0}),ObjectActionAuditlogModal.prototype.ngOnInit=function(){for(var e in this.loadAuditLog(),this.metadata.getModuleFields(this.model.module))this.moduleFields.push({name:e,display:this.language.getFieldDisplayName(this.model.module,e)});this.moduleFields.sort(function(e,t){return e.display.toLowerCase()>t.display.toLowerCase()?1:-1})},ObjectActionAuditlogModal.prototype.hideAuditLog=function(){this.self.destroy()},ObjectActionAuditlogModal.prototype.loadAuditLog=function(){var o=this;this.model&&(this.auditLog=[],this.auditTransactions=[],this.loading=!0,this.model.getAuditLog({user:this._userfilter,field:this._fieldfilter,grouped:!0}).subscribe(function(e){o.auditLog=e;for(var t=0,s=o.auditLog;t<s.length;t++){var i=s[t];-1==o.auditTransactions.indexOf(i.transaction_id)&&o.auditTransactions.push({transaction_id:i.transaction_id,created_by:i.created_by,user_name:i.user_name,date_created:i.date_created})}o.loading=!1},function(e){o.loading=!1}))},ObjectActionAuditlogModal=__decorate([core_1.Component({selector:"object-action-auditlog-modal",template:'<system-modal size="large"><system-modal-header (close)="hideAuditLog()"><system-label label="LBL_LOGGED_CHANGES"></system-label></system-modal-header><system-modal-content margin="none"><system-spinner *ngIf="loading" class="slds-p-around--medium"></system-spinner><table *ngIf="!loading" class="slds-table slds-table--bordered slds-table--cell-buffer"><thead><tr class="slds-text-title--caps"><th scope="col"><div class="slds-truncate"><system-label label="LBL_FIELD"></system-label></div></th><th scope="col"><div class="slds-truncate"><system-label label="LBL_BEFOREVALUE"></system-label></div></th><th scope="col"><div class="slds-truncate"><system-label label="LBL_AFTERVALUE"></system-label></div></th></tr></thead><tbody><ng-container *ngFor="let auditTransaction of auditLog"><tr><td class="slds-theme--shade" colspan="3"><div class="slds-text-heading--label">{{auditTransaction.user_name}} / {{auditTransaction.date_created}}</div></td></tr><tr *ngFor="let auditEntry of auditTransaction.audit_log"><td scope="row"><div class="slds-truncate">{{language.getFieldDisplayName(model.module, auditEntry.field_name)}}</div></td><td scope="row"><div class="slds-truncate">{{auditEntry.before_value_string}}</div></td><td scope="row"><div class="slds-truncate">{{auditEntry.after_value_string}}</div></td></tr></ng-container></tbody></table><div *ngIf="!loading && auditLog.length === 0" class="slds-text-heading--small slds-p-around--medium"><system-label label="MSG_NOAUDITRECORDS_FOUND"></system-label>.</div></system-modal-content><system-modal-footer><button class="slds-button slds-button--brand" (click)="hideAuditLog()"><system-label label="LBL_CLOSE"></system-label></button></system-modal-footer></system-modal>'}),__param(2,core_1.Optional()),__metadata("design:paramtypes",[services_1.language,services_1.metadata,services_1.model])],ObjectActionAuditlogModal)}();exports.ObjectActionAuditlogModal=ObjectActionAuditlogModal;var ObjectActionNewButton=function(){function ObjectActionNewButton(e,t,s,i){this.language=e,this.metadata=t,this.model=s,this.parentmodel=i,this.disabled=!0,this.displayasicon=!1}return ObjectActionNewButton.prototype.execute=function(){this.model.module=this.parentmodel.module,this.model.id=void 0,this.model.initialize(),this.model.addModel("",this.parentmodel)},ObjectActionNewButton.prototype.ngOnInit=function(){this.parentmodel.module&&this.metadata.checkModuleAcl(this.parentmodel.module,"create")&&(this.disabled=!1)},ObjectActionNewButton=__decorate([core_1.Component({selector:"object-action-new-button",template:'<system-button-icon *ngIf="displayasicon" icon="add"></system-button-icon><span *ngIf="!displayasicon"><system-label label="LBL_NEW"></system-label></span>',providers:[services_1.model]}),__param(3,core_1.SkipSelf()),__metadata("design:paramtypes",[services_1.language,services_1.metadata,services_1.model,services_1.model])],ObjectActionNewButton)}();exports.ObjectActionNewButton=ObjectActionNewButton;var ObjectActionDuplicateButton=function(){function ObjectActionDuplicateButton(e,t,s,i,o){this.parent=e,this.language=t,this.metadata=s,this.model=i,this.session=o}return Object.defineProperty(ObjectActionDuplicateButton.prototype,"hidden",{get:function(){return this.model.isEditing},enumerable:!1,configurable:!0}),Object.defineProperty(ObjectActionDuplicateButton.prototype,"disabled",{get:function(){return!this.metadata.checkModuleAcl(this.parent.module,"create")||(this.parent.isEditing||this.parent.isSaving)},enumerable:!1,configurable:!0}),ObjectActionDuplicateButton.prototype.execute=function(){var e=this.model.utils.generateGuid();for(var t in this.model.module=this.parent.module,this.model.id=e,this.model.isNew=!0,this.model.data=JSON.parse(JSON.stringify(this.parent.data)),this.model.data.id=e,this.model.data.assigned_user_id=this.session.authData.userId,this.model.data.assigned_user_name=this.session.authData.userName,this.model.data.modified_by_id=this.session.authData.userId,this.model.data.modified_by_name=this.session.authData.userName,this.model.data.date_entered=new Date,this.model.data.date_modified=new Date,this.parent.fields)if("link"==this.parent.fields[t].type&&this.model.data[t]&&this.model.data[t].beans)for(var s in this.model.data[t].beans){for(var i in this.model.data[t].beans[s])this.model.data[t].beans[s][i]==this.parent.id&&(this.model.data[t].beans[s][i]=e,this.model.data[t].beans[s].id=this.model.utils.generateGuid()),this.model.data[t].beans[s][i].beans&&(this.model.data[t].beans[s][i].beans={});this.model.data[t].beans[s].id!=s&&(this.model.data[t].beans[this.model.data[t].beans[s].id]=this.model.data[t].beans[s],delete this.model.data[t].beans[s])}this.model.duplicate=!0,this.model.templateId=this.parent.id,this.model.edit()},ObjectActionDuplicateButton=__decorate([core_1.Component({selector:"object-action-duplicate-button",template:'<span><system-label label="LBL_DUPLICATE"></system-label></span>',providers:[services_1.model]}),__param(0,core_1.SkipSelf()),__metadata("design:paramtypes",[services_1.model,services_1.language,services_1.metadata,services_1.model,services_1.session])],ObjectActionDuplicateButton)}();exports.ObjectActionDuplicateButton=ObjectActionDuplicateButton;var ObjectActionSaveButton=function(){function ObjectActionSaveButton(e,t,s,i){this.language=e,this.metadata=t,this.model=s,this.view=i,this.actionemitter=new core_1.EventEmitter,this.displayasicon=!1}var e;return Object.defineProperty(ObjectActionSaveButton.prototype,"disabled",{get:function(){return this.model.isSaving},enumerable:!1,configurable:!0}),Object.defineProperty(ObjectActionSaveButton.prototype,"hidden",{get:function(){return!this.model.isEditing},enumerable:!1,configurable:!0}),ObjectActionSaveButton.prototype.execute=function(){var t=this;this.model.isSaving||this.model.validate()&&this.model.save(!0).subscribe(function(e){t.model.endEdit(),t.view.setViewMode(),t.actionemitter.emit("save")})},__decorate([core_1.Output(),__metadata("design:type","function"==typeof(e=void 0!==core_1.EventEmitter&&core_1.EventEmitter)?e:Object)],ObjectActionSaveButton.prototype,"actionemitter",void 0),ObjectActionSaveButton=__decorate([core_1.Component({selector:"object-action-save-button",template:'<system-button-icon *ngIf="displayasicon" [title]="language.getLabel(\'LBL_SAVE\')" icon="save"></system-button-icon><span *ngIf="!displayasicon"><system-label label="LBL_SAVE"></system-label></span>'}),__metadata("design:paramtypes",[services_1.language,services_1.metadata,services_1.model,services_1.view])],ObjectActionSaveButton)}();exports.ObjectActionSaveButton=ObjectActionSaveButton;var ObjectActionSaveRelatedButton=function(){function ObjectActionSaveRelatedButton(e,t,s,i,o){this.language=e,this.metadata=t,this.model=s,this.view=i,this.relatedmodels=o,this.actionemitter=new core_1.EventEmitter,this.module="",this.saving=!1}var e;return Object.defineProperty(ObjectActionSaveRelatedButton.prototype,"hidden",{get:function(){return!this.view.isEditMode()},enumerable:!1,configurable:!0}),ObjectActionSaveRelatedButton.prototype.execute=function(){var t=this;if(!this.saving)if(this.model.validate()){this.saving=!0;var e=this.model.getDirtyFields();e.date_modified=this.model.getField("date_modified"),e.id=this.model.id,this.actionemitter.emit(!0),this.view.setViewMode(),this.relatedmodels.setItem(e).subscribe(function(e){t.model.endEdit(),t.saving=!1},function(e){t.view.setEditMode(),t.saving=!1})}else this.saving=!1,this.model.edit().subscribe(function(e){e?t.execute():(t.model.cancelEdit(),t.view.setViewMode())})},__decorate([core_1.Output(),__metadata("design:type","function"==typeof(e=void 0!==core_1.EventEmitter&&core_1.EventEmitter)?e:Object)],ObjectActionSaveRelatedButton.prototype,"actionemitter",void 0),ObjectActionSaveRelatedButton=__decorate([core_1.Component({selector:"object-action-save-related-button",template:'<span><system-label label="LBL_SAVE"></system-label></span>'}),__metadata("design:paramtypes",[services_1.language,services_1.metadata,services_1.model,services_1.view,services_1.relatedmodels])],ObjectActionSaveRelatedButton)}();exports.ObjectActionSaveRelatedButton=ObjectActionSaveRelatedButton;var ObjectActionNewrelatedButton=function(){function ObjectActionNewrelatedButton(e,t,s,i,o){this.parent=e,this.language=t,this.metadata=s,this.model=i,this.relatedmodels=o,this.disabled=!0,this.displayasicon=!1}return ObjectActionNewrelatedButton.prototype.ngOnInit=function(){this.model.module=this.relatedmodels.relatedModule,this.model.module&&this.metadata.checkModuleAcl(this.model.module,"create")&&(this.disabled=!1)},ObjectActionNewrelatedButton.prototype.execute=function(){var t=this;this.parent.data.id||(this.parent.data.id=this.parent.id),this.model.id="",this.model.addModel("",this.parent).subscribe(function(e){0!=e&&t.relatedmodels.addItems([e])})},ObjectActionNewrelatedButton=__decorate([core_1.Component({selector:"object-action-newrelated-button",template:'<system-button-icon *ngIf="displayasicon" icon="add"></system-button-icon><span *ngIf="!displayasicon"><system-label label="LBL_NEW"></system-label></span>',providers:[services_1.model]}),__param(0,core_1.SkipSelf()),__metadata("design:paramtypes",[services_1.model,services_1.language,services_1.metadata,services_1.model,services_1.relatedmodels])],ObjectActionNewrelatedButton)}();exports.ObjectActionNewrelatedButton=ObjectActionNewrelatedButton;var ObjectActionNewCopyRuleBeanButtonModelHelper=function(){function e(e){this.model=e}return e=__decorate([core_1.Directive({selector:"object-action-new-copy-rule-bean-button-model-helper",providers:[services_1.model]}),__metadata("design:paramtypes",[services_1.model])],e)}();exports.ObjectActionNewCopyRuleBeanButtonModelHelper=ObjectActionNewCopyRuleBeanButtonModelHelper;var ObjectActionNewCopyRuleBeanButton=function(){function ObjectActionNewCopyRuleBeanButton(e,t,s,i){this.language=e,this.metadata=t,this.model=s,this.relatedmodels=i,this.parent={},this.disabled=!0,this.actionconfig={}}return ObjectActionNewCopyRuleBeanButton.prototype.ngOnInit=function(){this.actionconfig.module&&this.metadata.checkModuleAcl(this.actionconfig.module,"create")&&(this.disabled=!1)},ObjectActionNewCopyRuleBeanButton.prototype.execute=function(){this.child.model.module=this.actionconfig.module;var e=[this.parent];this.relatedmodels&&this.relatedmodels.model&&e.push(this.relatedmodels.model),this.child.model.addModel("",e)},__decorate([core_1.ViewChild(ObjectActionNewCopyRuleBeanButtonModelHelper,{static:!0}),__metadata("design:type",Object)],ObjectActionNewCopyRuleBeanButton.prototype,"child",void 0),ObjectActionNewCopyRuleBeanButton=__decorate([core_1.Component({selector:"object-action-new-copy-rule-bean-button",template:'<span><system-label [label]="this.actionconfig.label"></system-label></span><object-action-new-copy-rule-bean-button-model-helper></object-action-new-copy-rule-bean-button-model-helper>'}),__param(3,core_1.Optional()),__metadata("design:paramtypes",[services_1.language,services_1.metadata,services_1.model,services_1.relatedmodels])],ObjectActionNewCopyRuleBeanButton)}();exports.ObjectActionNewCopyRuleBeanButton=ObjectActionNewCopyRuleBeanButton;var ObjectReminderButton=function(){function e(e,t,s,i,o,l,a){var n=this;this.language=e,this.metadata=t,this.model=s,this.renderer=i,this.elementRef=o,this.reminder=l,this.userpreferences=a,this.showDialog=!1,this.reminderDate=new moment,this.hasReminder=!1,this.reminder.loaded?this.loadReminder():this.reminder.loaded$.subscribe(function(e){n.loadReminder()})}var t,s;return e.prototype.loadReminder=function(){var e=this.reminder.getReminder(this.model.module,this.model.id);!1!==e&&(this.hasReminder=!0,this.reminderDate=new moment(e))},e.prototype.toggleDatePicker=function(){var t=this;this.showDialog=!this.showDialog,this.showDialog?this.clickListener=this.renderer.listen("document","click",function(e){return t.onClick(e)}):this.clickListener&&this.clickListener()},e.prototype.onClick=function(e){this.elementRef.nativeElement.contains(e.target)||(this.showDialog=!1)},Object.defineProperty(e.prototype,"isEditing",{get:function(){return this.model.isEditing},enumerable:!1,configurable:!0}),e.prototype.clearReminder=function(){this.reminder.deleteReminder(this.model.module,this.model.id),this.hasReminder=!1},e.prototype.setReminder=function(e){this.showDialog=!1,this.hasReminder=!0,this.reminderDate=new moment(e),this.reminder.setReminder(this.model,this.reminderDate)},e.prototype.getReminderDate=function(){return this.reminderDate.format(this.userpreferences.getDateFormat())},e=__decorate([core_1.Component({selector:"object-reminder-button",template:'<div class="slds-form-element slds-dropdown-trigger slds-dropdown-trigger_click" [ngClass]="{\'slds-is-open\': showDialog}"><a class="slds-button slds-button_stateful slds-button--neutral slds-m-horizontal--xxx-small" [ngClass]="{\'slds-not-selected\': !hasReminder, \'slds-is-selected\': hasReminder }"><span class="slds-text-not-selected" (click)="toggleDatePicker()"><system-button-icon class="slds-p-right--xx-small" icon="add"></system-button-icon><system-label label="LBL_REMINDER"></system-label></span> <span class="slds-text-selected"><system-button-icon class="slds-p-right--xx-small" icon="check"></system-button-icon>{{getReminderDate()}}</span> <span class="slds-text-selected-focus"><system-button-icon class="slds-p-right--xx-small" icon="close" (click)="clearReminder()"></system-button-icon><span (click)="toggleDatePicker()">{{getReminderDate()}}</span></span></a><div class="slds-datepicker slds-dropdown slds-dropdown_right" role="dialog"><system-input-date-picker *ngIf="showDialog" [setDate]="reminderDate" (datePicked)="setReminder($event)"></system-input-date-picker></div></div>'}),__metadata("design:paramtypes",[services_1.language,services_1.metadata,services_1.model,"function"==typeof(t=void 0!==core_1.Renderer2&&core_1.Renderer2)?t:Object,"function"==typeof(s=void 0!==core_1.ElementRef&&core_1.ElementRef)?s:Object,services_1.reminder,services_1.userpreferences])],e)}();exports.ObjectReminderButton=ObjectReminderButton;var ObjectSubscriptionButton=function(){function ObjectSubscriptionButton(e,t,s){this.subscriptionService=e,this.metadata=t,this.model=s,this.inProcess=!1}return ObjectSubscriptionButton.prototype.toggleSubscribe=function(){var t=this;this.inProcess=!0,this.subscriptionService.hasSubscription(this.model.id)?this.subscriptionService.unsubscribeBean(this.model.id,this.model.module).subscribe(function(e){return t.inProcess=!1},function(e){return t.inProcess=!1}):this.subscriptionService.subscribeBean(this.model.id,this.model.module).subscribe(function(e){return t.inProcess=!1},function(e){return t.inProcess=!1})},ObjectSubscriptionButton=__decorate([core_1.Component({selector:"object-subscription-button",template:'<button style="text-transform:capitalize" [disabled]="inProcess" class="slds-button slds-button_neutral slds-button_stateful" [ngClass]="{\'slds-is-selected\': subscriptionService.subscriptions[model.id], \'slds-not-selected\': !subscriptionService.subscriptions[model.id]}" (click)="toggleSubscribe()"><span class="slds-text-not-selected"><system-button-icon class="slds-p-right--xx-small" icon="add"></system-button-icon><system-label label="LBL_FOLLOW"></system-label></span> <span class="slds-text-selected"><system-button-icon class="slds-p-right--xx-small" icon="check"></system-button-icon><system-label label="LBL_FOLLOWING"></system-label></span> <span class="slds-text-selected-focus"><system-button-icon class="slds-p-right--xx-small" icon="close"></system-button-icon><system-label label="LBL_UNFOLLOW"></system-label></span></button>'}),__metadata("design:paramtypes",[services_1.subscription,services_1.metadata,services_1.model])],ObjectSubscriptionButton)}();exports.ObjectSubscriptionButton=ObjectSubscriptionButton;var ObjectActionSelectButton=function(){function ObjectActionSelectButton(e,t,s,i,o,l){this.metadata=e,this.language=t,this.modal=s,this.model=i,this.parent=o,this.relatedmodels=l,this.actionconfig={},this.disabled=!0,this.subscriptions=new rxjs_1.Subscription}return ObjectActionSelectButton.prototype.ngOnInit=function(){this.model.module=this.relatedmodels.relatedModule,this.model.module&&this.metadata.checkModuleAcl(this.model.module,"list")&&(this.disabled=!1)},ObjectActionSelectButton.prototype.execute=function(){var s=this;this.modal.openModal("ObjectModalModuleLookup").subscribe(function(e){if(e.instance.module=s.model.module,e.instance.multiselect=!0,e.instance.modulefilter=s.actionconfig.modulefilter,s.actionconfig.relatefilterfield){var t=s.metadata.getFieldDefs(s.model.module,s.actionconfig.relatefilterfield);t&&(e.instance.relatefilter={module:t.module,relationship:s.actionconfig.relatefilterrelationship,id:s.parent.getField(t.id_name),display:s.parent.getField(s.actionconfig.relatefilterfield),active:!!s.parent.getField(t.id_name),required:s.actionconfig.relatedfilterrequired})}e.instance.selectedItems.subscribe(function(e){s.addSelectedItems(e)})})},ObjectActionSelectButton.prototype.ngOnDestroy=function(){this.subscriptions.unsubscribe()},ObjectActionSelectButton.prototype.addSelectedItems=function(e){this.relatedmodels.addItems(e)},ObjectActionSelectButton=__decorate([core_1.Component({selector:"object-action-select-button",template:'<span><system-label label="LBL_SELECT"></system-label></span>',providers:[services_1.model]}),__param(4,core_1.SkipSelf()),__metadata("design:paramtypes",[services_1.metadata,services_1.language,services_1.modal,services_1.model,services_1.model,services_1.relatedmodels])],ObjectActionSelectButton)}();exports.ObjectActionSelectButton=ObjectActionSelectButton;var ObjectActionBeanToMailButton=function(){function ObjectActionBeanToMailButton(e,t,s,i){this.language=e,this.modal=t,this.model=s,this.viewContainerRef=i}var e;return ObjectActionBeanToMailButton.prototype.execute=function(){var t=this;this.modal.openModal("ObjectActionMailModal",!0,this.viewContainerRef.injector).subscribe(function(e){return e.instance.parent=t.model})},ObjectActionBeanToMailButton=__decorate([core_1.Component({selector:"object-action-beantomail-button",template:'<span><system-label label="LBL_EMAIL"></system-label></span>'}),__metadata("design:paramtypes",[services_1.language,services_1.modal,services_1.model,"function"==typeof(e=void 0!==core_1.ViewContainerRef&&core_1.ViewContainerRef)?e:Object])],ObjectActionBeanToMailButton)}();exports.ObjectActionBeanToMailButton=ObjectActionBeanToMailButton;var ObjectActionMailModal=function(){function ObjectActionMailModal(e,t,s,i,o,l,a){this.language=e,this.metadata=t,this.model=s,this.view=i,this.backend=o,this.prefs=l,this.modal=a,this.parent=null,this.self=null,this.sending=!1,this.titlelabel="LBL_BEANTOMAIL",this.mailsent=new core_1.EventEmitter,this.model.module="Emails",this.view.isEditable=!0,this.view.setEditMode();var n=this.metadata.getComponentConfig("ObjectActionMailModal");this.fieldset=n.fieldset}var e;return ObjectActionMailModal.prototype.ngOnInit=function(){this.model.initializeModel(this.parent),this.setParentData()},Object.defineProperty(ObjectActionMailModal.prototype,"isDisabled",{get:function(){var e=this.model.getFieldValue("recipient_addresses"),t=this.model.getFieldValue("mailbox_id"),s=this.model.getFieldValue("name"),i=this.model.getFieldValue("body"),o=e?e.find(function(e){return"to"==e.address_type}):void 0;return!(s&&i&&t&&e&&o)||this.sending},enumerable:!1,configurable:!0}),ObjectActionMailModal.prototype.setParentData=function(){this.model.setField("parent_type",this.parent.module),this.model.setField("parent_id",this.parent.id),this.model.setField("parent_name",this.parent.data.summary_text)},ObjectActionMailModal.prototype.close=function(){this.self.destroy()},ObjectActionMailModal.prototype.sendEmail=function(){var s=this;this.modal.openModal("SystemLoadingModal",!1).subscribe(function(t){t.instance.messagelabel="LBL_SENDING",s.sending=!0,s.model.setField("type","out"),s.model.setField("to_be_sent","1"),s.model.setField("from_addr",s.model.data.from_addr_name),s.model.setField("to_addrs",s.model.data.to_addrs_names),s.model.save().subscribe(function(e){t.instance.self.destroy(),s.mailsent.emit(!0),s.close()},function(e){t.instance.self.destroy(),s.sending=!1})})},__decorate([core_1.Input(),__metadata("design:type",Object)],ObjectActionMailModal.prototype,"parent",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],ObjectActionMailModal.prototype,"titlelabel",void 0),__decorate([core_1.Output(),__metadata("design:type","function"==typeof(e=void 0!==core_1.EventEmitter&&core_1.EventEmitter)?e:Object)],ObjectActionMailModal.prototype,"mailsent",void 0),ObjectActionMailModal=__decorate([core_1.Component({selector:"object-action-mail-modal",template:'<system-modal size="large"><system-modal-header (close)="close()"><system-label [label]="titlelabel"></system-label></system-modal-header><system-modal-content><object-record-fieldset [fieldset]="fieldset" direction="vertical"></object-record-fieldset><object-relatedlist-files class="slds-p-around_xx-small"></object-relatedlist-files></system-modal-content><system-modal-footer><button class="slds-button slds-button--neutral" (click)="close()"><system-label label="LBL_CANCEL"></system-label></button> <button [disabled]="isDisabled" class="slds-button slds-button--brand" (click)="sendEmail()"><system-label label="LBL_SEND"></system-label></button></system-modal-footer></system-modal>',providers:[services_1.view,services_1.model]}),__metadata("design:paramtypes",[services_1.language,services_1.metadata,services_1.model,services_1.view,services_1.backend,services_1.userpreferences,services_1.modal])],ObjectActionMailModal)}();exports.ObjectActionMailModal=ObjectActionMailModal;var ObjectEditModal=function(){function ObjectEditModal(e,t,s,i,o,l,a,n){this.router=e,this.language=t,this.model=s,this.view=i,this.metadata=o,this.modal=l,this.modalwindow=a,this.navigationtab=n,this.componentconfig={},this.actionSetItems=[],this.actionSubject=new rxjs_1.Subject,this.action$=new rxjs_1.Observable,this.doDuplicateCheck=!0,this.duplicates=[],this.showDuplicates=!1,this.showDuplicatesTable=!1,this.preventGoingToRecord=!1,this.self={},this.view.isEditable=!0,this.view.displayLinks=!1,this.view.setEditMode(),this.model.startEdit(),this.action$=this.actionSubject.asObservable()}var e,t;return ObjectEditModal.prototype.ngOnInit=function(){this.componentconfig=this.metadata.getComponentConfig(this.constructor.name,this.model.module),this.actionSetItems=this.metadata.getActionSetItems(this.componentconfig.actionset),this.modalwindow.self=this.self},Object.defineProperty(ObjectEditModal.prototype,"actionset",{get:function(){return this.componentconfig.actionset},enumerable:!1,configurable:!0}),ObjectEditModal.prototype.closeModal=function(){this.model.cancelEdit(),this.actionSubject.next(!1),this.actionSubject.complete(),this.self.destroy()},Object.defineProperty(ObjectEditModal.prototype,"modalHeader",{get:function(){return""!=this.model.module?this.language.getModuleName(this.model.module,!0):""},enumerable:!1,configurable:!0}),Object.defineProperty(ObjectEditModal.prototype,"grow",{get:function(){return this.componentconfig.grow},enumerable:!1,configurable:!0}),ObjectEditModal.prototype.handleAction=function(e){var t;switch(e){case"savegodetail":this.actionSubject.next(e),this.model.goDetail(null===(t=this.navigationtab)||void 0===t?void 0:t.tabid);break;case"save":this.actionSubject.next(e);break;default:this.actionSubject.next(!1)}this.actionSubject.complete(),this.self.destroy()},Object.defineProperty(ObjectEditModal.prototype,"duplicateCheckEnabled",{get:function(){return this.metadata.getModuleDuplicatecheck(this.model.module)},enumerable:!1,configurable:!0}),__decorate([core_1.ViewChild("modalContent",{read:core_1.ViewContainerRef,static:!0}),__metadata("design:type","function"==typeof(e=void 0!==core_1.ViewContainerRef&&core_1.ViewContainerRef)?e:Object)],ObjectEditModal.prototype,"modalContent",void 0),__decorate([core_1.Input(),__metadata("design:type",Object)],ObjectEditModal.prototype,"preventGoingToRecord",void 0),ObjectEditModal=__decorate([core_1.Component({template:'<system-modal size="large"><system-modal-header (close)="closeModal()">{{modalHeader}}<system-modal-header-right><button *ngIf="duplicateCheckEnabled" class="slds-button slds-button--brand" [disabled]="model.duplicates.length == 0" (click)="showDuplicates = !showDuplicates" [ngClass]="{\'slds-hidden\': showDuplicatesTable}"><span class="slds-p-right--xx-small">{{model.duplicateChecking ? \'\' : model.duplicatecount}}</span><system-label label="LBL_DUPLICATES"></system-label></button></system-modal-header-right></system-modal-header><system-modal-content [grow]="grow" margin="none" #modalContent><div *ngIf="!showDuplicatesTable" class="slds-grid"><div class="slds-grid--vertical slds-grow"><object-edit-modal-dialog-container [module]="model.module"></object-edit-modal-dialog-container></div><div *ngIf="showDuplicates" class="slds-size--1-of-3 slds-border--left"><object-edit-modal-dialog-duplicates-panel (close)="showDuplicates = false"></object-edit-modal-dialog-duplicates-panel></div></div></system-modal-content><system-modal-footer><div class="slds-grid slds-grid--vertical-align-center slds-grid--align-spread"><div class="slds-col"><object-record-messages-badge></object-record-messages-badge></div><div class="slds-col"><object-action-container containerclass="slds-button-group-row" [actionset]="componentconfig.actionset" (actionemitter)="handleAction($event)"></object-action-container></div></div></system-modal-footer></system-modal>',providers:[services_1.view,services_1.modalwindow]}),__param(7,core_1.Optional()),__metadata("design:paramtypes",["function"==typeof(t=void 0!==router_1.Router&&router_1.Router)?t:Object,services_1.language,services_1.model,services_1.view,services_1.metadata,services_1.modal,services_1.modalwindow,services_1.navigationtab])],ObjectEditModal)}();exports.ObjectEditModal=ObjectEditModal;var ObjectEditModalWReference=function(){function ObjectEditModalWReference(e,t,s,i,o,l){this.router=e,this.language=t,this.model=s,this.view=i,this.metadata=o,this.elementref=l,this.componentRefs=[],this.componentSet="",this.module="",this.reference="",this.showDuplicates=!1,this.doDuplicateCheck=!0,this.duplicates=[],this.modalAction$=new core_1.EventEmitter,this.self={},this.view.isEditable=!0,this.view.setEditMode()}var e,t,s;return ObjectEditModalWReference.prototype.closeModal=function(){this.modalAction$.emit(!1)},Object.defineProperty(ObjectEditModalWReference.prototype,"modalHeader",{get:function(){return""!=this.model.module?this.language.getModuleName(this.model.module,!0):""},enumerable:!1,configurable:!0}),ObjectEditModalWReference.prototype.save=function(e){void 0===e&&(e=!1),this.model.validate()?this.modalAction$.emit(this.model.data):console.log(this.model.messages)},Object.defineProperty(ObjectEditModalWReference.prototype,"contentStyle",{get:function(){if(this.showDuplicates)return{"overflow-y":"hidden"}},enumerable:!1,configurable:!0}),__decorate([core_1.ViewChild("modalContent",{read:core_1.ViewContainerRef,static:!0}),__metadata("design:type","function"==typeof(e=void 0!==core_1.ViewContainerRef&&core_1.ViewContainerRef)?e:Object)],ObjectEditModalWReference.prototype,"modalContent",void 0),ObjectEditModalWReference=__decorate([core_1.Component({template:'<div role="dialog" class="slds-modal slds-fade-in-open slds-modal--large"><div class="slds-modal__container"><div class="slds-modal__header"><button class="slds-button slds-modal__close slds-button--icon-inverse" (click)="closeModal()"><system-button-icon [icon]="\'close\'" [size]="\'large\'"></system-button-icon></button><h2 class="slds-text-heading--medium">{{modalHeader}}</h2></div><div class="slds-modal__content slds-is-relative" #modalContent [ngStyle]="contentStyle"><object-edit-modal-dialog-container [module]="model.module" [componentSet]="componentSet"></object-edit-modal-dialog-container><object-edit-modal-dialog-duplicates class="slds-is-absolute slds-theme--shade" *ngIf="showDuplicates" [ngStyle]="duplicateStyle" [duplicates]="duplicates"></object-edit-modal-dialog-duplicates></div><div class="slds-modal__footer"><button class="slds-button slds-button--neutral" (click)="closeModal()"><system-label label="LBL_CANCEL"></system-label></button> <button class="slds-button slds-button--brand" (click)="save()"><system-label label="LBL_SAVE"></system-label></button></div></div></div><div class="slds-backdrop slds-backdrop--open"></div>',providers:[services_1.model,services_1.view]}),__metadata("design:paramtypes",["function"==typeof(t=void 0!==router_1.Router&&router_1.Router)?t:Object,services_1.language,services_1.model,services_1.view,services_1.metadata,"function"==typeof(s=void 0!==core_1.ElementRef&&core_1.ElementRef)?s:Object])],ObjectEditModalWReference)}();exports.ObjectEditModalWReference=ObjectEditModalWReference;var ObjectEditModalDialogContainer=function(){function e(e,t){this.model=e,this.metadata=t,this.componentRefs=[],this.componentSet="",this.module=""}var t;return e.prototype.ngAfterViewInit=function(){this.renderComponentSet()},e.prototype.renderComponentSet=function(){for(var s=this,e=0,t=this.componentRefs;e<t.length;e++){t[e].destroy()}if(!this.componentSet||""==this.componentSet){var i=this.metadata.getComponentConfig("ObjectRecordDetails",this.model.module);this.componentSet=i.componentset}for(var o=function(t){l.metadata.addComponent(t.component,l.container).subscribe(function(e){e.instance.componentconfig=t.componentconfig,s.componentRefs.push(e)})},l=this,a=0,n=this.metadata.getComponentSetObjects(this.componentSet);a<n.length;a++){o(n[a])}},__decorate([core_1.ViewChild("container",{read:core_1.ViewContainerRef,static:!0}),__metadata("design:type","function"==typeof(t=void 0!==core_1.ViewContainerRef&&core_1.ViewContainerRef)?t:Object)],e.prototype,"container",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"componentSet",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"module",void 0),e=__decorate([core_1.Component({selector:"object-edit-modal-dialog-container",template:"<div #container></div>"}),__metadata("design:paramtypes",[services_1.model,services_1.metadata])],e)}();exports.ObjectEditModalDialogContainer=ObjectEditModalDialogContainer;var ObjectEditModalDialogDuplicates=function(){function e(e,t,s){this.model=e,this.metadata=t,this.language=s,this.module="",this.duplicates=[],this.fieldset=""}return e.prototype.ngOnInit=function(){var e=this.metadata.getComponentConfig("GlobalModalDialogDuplicates",this.model.module);this.fieldset=e.fieldset},__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"module",void 0),__decorate([core_1.Input(),__metadata("design:type",Array)],e.prototype,"duplicates",void 0),e=__decorate([core_1.Component({selector:"object-edit-modal-dialog-duplicates",template:'<object-table [module]="model.module" [fieldset_id]="fieldset" [objects]="duplicates"></object-table>'}),__metadata("design:paramtypes",[services_1.model,services_1.metadata,services_1.language])],e)}();exports.ObjectEditModalDialogDuplicates=ObjectEditModalDialogDuplicates;var ObjectEditModalDialogDuplicatesPanel=function(){function e(e,t,s,i){this.model=e,this.metadata=t,this.language=s,this.view=i,this.close=new core_1.EventEmitter,this.fieldset="",this.view.isEditable=!1}var t;return e.prototype.ngOnInit=function(){var e=this.metadata.getComponentConfig("GlobalModalDialogDuplicates",this.model.module);this.fieldset=e.fieldset},e.prototype.hidePanel=function(){this.close.emit(!0)},__decorate([core_1.Output(),__metadata("design:type","function"==typeof(t=void 0!==core_1.EventEmitter&&core_1.EventEmitter)?t:Object)],e.prototype,"close",void 0),e=__decorate([core_1.Component({selector:"object-edit-modal-dialog-duplicates-panel",template:'<div class="slds-card"><div class="slds-card__header slds-p-around--small slds-theme--info slds-grid slds-grid_vertical-align-center slds-grid--align-spread"><h2 class="slds-text-heading--small"><system-label label="LBL_DUPLICATES"></system-label> ({{model.duplicates.length}} <system-label label="LBL_OF"></system-label> {{model.duplicatecount}})</h2><button class="slds-button slds-button--icon slds-button--icon-border-filled" (click)="hidePanel()"><system-button-icon icon="close"></system-button-icon></button></div><div class="slds-card__body slds-card__body_inner"><ul class="slds-grid slds-wrap slds-grid_pull-padded"><object-related-duplicate-tile class="slds-size--1-of-1" *ngFor="let duplicate of model.duplicates" [system-model-provider]="{module:model.module, data:duplicate}" [enableLink]="false" [enableButtonLink]="true"></object-related-duplicate-tile></ul></div></div>',providers:[services_1.view]}),__metadata("design:paramtypes",[services_1.model,services_1.metadata,services_1.language,services_1.view])],e)}();exports.ObjectEditModalDialogDuplicatesPanel=ObjectEditModalDialogDuplicatesPanel;var ObjectOptimisticLockingModal=function(){function ObjectOptimisticLockingModal(e,t,s,i,o){this.language=e,this.model=t,this.view=s,this.metadata=i,this.modal=o,this.self={},this.conflicts={},this._conflicts=[],this.originaldata={},this.fieldsToCopy={},this.view.displayLabels=!1}return ObjectOptimisticLockingModal.prototype.ngOnInit=function(){for(var e in this.conflicts)this._conflicts.push({field:e,value:this.conflicts[e].value,changes:this.conflicts[e].changes}),this.originaldata[e]=this.conflicts[e].value},ObjectOptimisticLockingModal.prototype.cancel=function(){this.responseSubject.error(!0),this.responseSubject.complete(),this.self.destroy()},ObjectOptimisticLockingModal.prototype.edit=function(){this.model.edit(),this.self.destroy()},ObjectOptimisticLockingModal.prototype.save=function(s){var i=this;void 0===s&&(s=!1),this.copyFields(),this.modal.openModal("SystemLoadingModal").subscribe(function(t){t.instance.messagelabel="LBL_SAVING_DATA",i.model.setField("date_modified",new moment),i.model.save().subscribe(function(e){e&&(s&&i.model.goDetail(),i.self.destroy()),t.instance.self.destroy()}),i.responseSubject.next(!0),i.responseSubject.complete()})},ObjectOptimisticLockingModal.prototype.copyFields=function(){for(var e in this.conflicts)this.fieldsToCopy[e]||this.model.setField(e,this.conflicts[e].value)},ObjectOptimisticLockingModal.prototype.toggleChangeDetails=function(e){this.conflicts[e].open=!this.conflicts[e].open},ObjectOptimisticLockingModal.prototype.select=function(e){this.fieldsToCopy[e]=!0},ObjectOptimisticLockingModal.prototype.unselect=function(e){delete this.fieldsToCopy[e]},ObjectOptimisticLockingModal.prototype.changeDetailsIcon=function(e){return this.conflicts[e].open?"chevronup":"chevrondown"},ObjectOptimisticLockingModal.prototype.channgeOpen=function(e){return!!this.conflicts[e].open},ObjectOptimisticLockingModal=__decorate([core_1.Component({template:'<system-modal size="large"><system-modal-header [hiddenCloseButton]="true"><system-label label="LBL_OPTIMISTICLOCKING_CONFLICT"></system-label></system-modal-header><system-modal-content margin="none"><div class="slds-p-around--small"><div class="slds-text-heading--label"><system-label label="MSG_OPTIMISTIC_LOCKING"></system-label></div><div class="slds-p-vertical--xx-small"><system-label label="MSG_OPTIMISTIC_LOCKING" length="long"></system-label></div></div><table class="slds-table slds-table_cell-buffer slds-table_bordered slds-no-row-hover"><thead><tr class="slds-line-height_reset"><th class="slds-text-title_caps" scope="col"><div class="slds-truncate"><system-label label="LBL_FIELD"></system-label></div></th><th class="slds-text-title_caps" style="width:33%" scope="col"><div class="slds-truncate"><system-label label="LBL_CURRENT_VALUE"></system-label></div></th><th class="slds-text-title_caps" scope="col" style="width: 3.25rem;"></th><th class="slds-text-title_caps" style="width:33%" scope="col"><div class="slds-truncate"><system-label label="LBL_NEW_VALUE"></system-label></div></th></tr></thead><tbody><ng-container *ngFor="let _conflict of _conflicts; let i=index"><tr class="slds-hint-parent"><td><div class="slds-grid slds-grid--align-spread slds-grid--vertical-align-center"><field-label [fieldname]="_conflict.field" style="margin-right: 0"></field-label><div (click)="toggleChangeDetails(_conflict.field)"><system-utility-icon icon="clock" size="x-small"></system-utility-icon></div></div></td><td><div class="slds-grid slds-grid--vertical-align-center"><div class="slds-radio slds-p-right--x-small"><input type="radio" id="radio{{i}}1" name="{{i}}" checked (click)="unselect(_conflict.field)"> <label class="slds-radio__label" for="radio{{i}}1"><span class="slds-radio_faux"></span></label></div><div class="slds-box slds-box--xx-small slds-p-vertical--x-small" style="width:100%"><object-optimisitclocking-modal-data-field [fieldmodule]="model.module" [fieldname]="_conflict.field" [fieldvalue]="_conflict.value"></object-optimisitclocking-modal-data-field></div></div></td><td class="slds-text-align--center"><system-utility-icon icon="forward" size="x-small"></system-utility-icon></td><td><div class="slds-grid slds-grid--vertical-align-center"><div class="slds-radio slds-p-right--x-small"><input type="radio" id="radio{{i}}2" name="{{i}}" (click)="select(_conflict.field)"> <label class="slds-radio__label" for="radio{{i}}2"><span class="slds-radio_faux"></span></label></div><div class="slds-box slds-box--xx-small slds-p-vertical--x-small" style="width:100%"><field-container [fieldname]="_conflict.field" [fielddisplayclass]="\'slds-truncate\'"></field-container></div></div></td></tr><tr *ngIf="channgeOpen(_conflict.field)"><td style="border-top:none" colspan="4"><object-optimisitclocking-modal-change *ngFor="let change of _conflict.changes" [change]="change"></object-optimisitclocking-modal-change></td></tr></ng-container></tbody></table></system-modal-content><system-modal-footer><button class="slds-button slds-button--neutral" (click)="cancel()"><system-label label="LBL_CANCEL"></system-label></button><button class="slds-button slds-button--brand" (click)="save()"><system-label label="LBL_SAVE"></system-label></button></system-modal-footer></system-modal>',providers:[services_1.view],styles:["table { border-bottom: none; }","table tr:last-child td { border-bottom: none; }"]}),__metadata("design:paramtypes",[services_1.language,services_1.model,services_1.view,services_1.metadata,services_1.modal])],ObjectOptimisticLockingModal)}();exports.ObjectOptimisticLockingModal=ObjectOptimisticLockingModal;var ObjectOptimisticLockingModalDataField=function(){function e(e){this.model=e,this.fieldname="",this.fieldmodule=""}return e.prototype.ngOnInit=function(){this.model.module=this.fieldmodule,this.model.setField(this.fieldname,this.fieldvalue)},__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"fieldname",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"fieldmodule",void 0),__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"fieldvalue",void 0),e=__decorate([core_1.Component({selector:"object-optimisitclocking-modal-data-field",template:'<field-container [field]="fieldname" [fielddisplayclass]="\'slds-truncate\'"></field-container>',providers:[services_1.model]}),__metadata("design:paramtypes",[services_1.model])],e)}();exports.ObjectOptimisticLockingModalDataField=ObjectOptimisticLockingModalDataField;var ObjectOptimisticLockingModalChange=function(){function e(e,t,s){this.model=e,this.language=t,this.userpreferences=s,this.change={}}return Object.defineProperty(e.prototype,"changeDate",{get:function(){var e=moment(this.change.date_created).tz(this.userpreferences.toUse.timezone);return e.add(e.utcOffset(),"m"),e.format(this.userpreferences.getDateFormat()+" "+this.userpreferences.getTimeFormat())},enumerable:!1,configurable:!0}),__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"change",void 0),e=__decorate([core_1.Component({selector:"object-optimisitclocking-modal-change",template:'<div class="slds-p-vertical--xx-small"><div class="slds-box--border"><div class="slds-p-around--x-small"><div class="slds-grid"><div class="slds-m-top--xx-small"><system-custom-icon icon="history" size="x-small"></system-custom-icon></div><div class="slds-col_bump-right slds-m-left--xx-small"><div>{{changeDate}}, <system-label label="LBL_BY"></system-label> {{change.user_name}}</div><div>{{change.before_value_string}} &nbsp;<system-utility-icon icon="forward" size="xx-small"></system-utility-icon>&nbsp; {{change.after_value_string}}</div></div></div></div></div></div>',providers:[services_1.view]}),__metadata("design:paramtypes",[services_1.model,services_1.language,services_1.userpreferences])],e)}();exports.ObjectOptimisticLockingModalChange=ObjectOptimisticLockingModalChange;var ObjectListViewAggregatesButton=function(){function e(e){this.modellist=e}return e.prototype.toggleaggregates=function(){this.modellist.displayFilters=!1,this.modellist.displayAggregates=!this.modellist.displayAggregates},Object.defineProperty(e.prototype,"enabled",{get:function(){return this.modellist.aggregatesEnabled()&&!this.modellist.isLoading},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"buttonclasses",{get:function(){return this.modellist.displayAggregates?"slds-is-selected":""},enumerable:!1,configurable:!0}),e=__decorate([core_1.Component({selector:"object-listview-aggregates-button",template:'<button class="slds-button slds-button--neutral slds-button--icon-border slds-m-horizontal--xxx-small" system-title="LBL_AGGREGATES" [disabled]="!enabled" [ngClass]="buttonclasses" (click)="toggleaggregates()"><system-button-icon icon="bucket"></system-button-icon></button>'}),__metadata("design:paramtypes",[services_1.modellist])],e)}();exports.ObjectListViewAggregatesButton=ObjectListViewAggregatesButton;var ObjectListViewAggregatesPanel=function(){function e(e,t,s,i){this.elementRef=e,this.language=t,this.metadata=s,this.modellist=i}var t;return Object.defineProperty(e.prototype,"aggregates",{get:function(){return this.modellist.moduleAggregates},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasTags",{get:function(){return this.metadata.checkTagging(this.modellist.module)},enumerable:!1,configurable:!0}),e.prototype.clearAggregates=function(){this.modellist.removeAllAggregates(),this.modellist.reLoadList()},e=__decorate([core_1.Component({selector:"object-listview-aggregates-panel",template:'<div class="slds-panel slds-size--medium slds-grid slds-grid--vertical slds-nowrap slds-panel--filters"><div class="slds-form--stacked slds-grow slds-scrollable--y slds-grid slds-grid--vertical"><div class="slds-filters"><div class="slds-filters__header slds-grid slds-grid--align-spread slds-has-divider--bottom"><h4 class="slds-align-middle slds-text-heading--small"><system-label label="LBL_AGGREGATES"></system-label></h4><button [disabled]="!modellist.hasAggregates" class="slds-button slds-button--brand" (click)="clearAggregates()"><system-label label="LBL_CLEARALL"></system-label></button></div><div class="slds-filters__body" system-to-bottom><div class="slds-grid_vertical"><object-listview-tags-aggregate *ngIf="hasTags"></object-listview-tags-aggregate><div class="slds-m-vertical--xx-small" *ngFor="let aggregate of aggregates"><object-listview-aggregate [aggregate]="aggregate"></object-listview-aggregate></div></div></div></div></div></div>',host:{class:"slds-is-fixed"}}),__metadata("design:paramtypes",["function"==typeof(t=void 0!==core_1.ElementRef&&core_1.ElementRef)?t:Object,services_1.language,services_1.metadata,services_1.modellist])],e)}();exports.ObjectListViewAggregatesPanel=ObjectListViewAggregatesPanel;var ObjectListViewAggregate=function(){function e(e,t,s){this.language=e,this.modellist=t,this.model=s,this.aggregate={}}return Object.defineProperty(e.prototype,"aggregateNameItems",{get:function(){var e=[];return this.aggregate.fielddetails&&(this.model.module!=this.aggregate.fielddetails.module&&e.push(this.language.getModuleName(this.aggregate.fielddetails.module,!0)),e.push(this.language.getFieldDisplayName(this.aggregate.fielddetails.module,this.aggregate.fielddetails.field))),e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"aggregatename",{get:function(){var e;return null===(e=this.aggregate.indexfieldname)||void 0===e?void 0:e.replace(/>/g,"")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"aggregateBuckets",{get:function(){var e,t;return this.aggregatename&&(null===(e=this.modellist.searchAggregates)||void 0===e?void 0:e[this.aggregatename])?null===(t=this.modellist.searchAggregates)||void 0===t?void 0:t[this.aggregatename].buckets:[]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"otherDocCount",{get:function(){var e,t;return this.aggregatename&&(null===(e=this.modellist.searchAggregates)||void 0===e?void 0:e[this.aggregatename])?null===(t=this.modellist.searchAggregates)||void 0===t?void 0:t[this.aggregatename].sum_other_doc_count:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"checkdCount",{get:function(){return this.modellist.getCheckedAggregateCount(this.aggregatename)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"collapsed",{get:function(){return!!this.aggregate.collapsed},enumerable:!1,configurable:!0}),e.prototype.toggleCollapsed=function(){this.aggregate.collapsed=!this.aggregate.collapsed},__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"aggregate",void 0),e=__decorate([core_1.Component({selector:"object-listview-aggregate",template:'<div class="slds-filters__item slds-p-horizontal--small slds-p-vertical--xx-small"><div class="slds-p-vertical--xx-small slds-grid slds-grid--vertical-align-center slds-grid--align-spread" (click)="toggleCollapsed()"><div class="slds-grid"><ul class="slds-list_horizontal slds-has-dividers_right"><li class="slds-item" *ngFor="let aggregateNameItem of aggregateNameItems">{{aggregateNameItem}}</li></ul><div class="slds-p-left--xx-small" *ngIf="collapsed && checkdCount>0">({{checkdCount}} <system-label label="LBL_SELECTED"></system-label>)</div></div><system-utility-icon [icon]="collapsed? \'down\' : \'up\'" size="x-small"></system-utility-icon></div><ng-container *ngIf="!collapsed"><div class="slds-form-element" *ngFor="let bucketItem of aggregateBuckets"><object-listview-aggregate-item [bucketitem]="bucketItem" [aggregate]="aggregate" class="slds-form-element__control"></object-listview-aggregate-item></div><div *ngIf="otherDocCount > 0"><p class="slds-text-body--small slds-text-color--weak">{{otherDocCount}} <system-label label="LBL_ARE_NOT_INCLUDED"></system-label>...</p></div></ng-container></div>'}),__metadata("design:paramtypes",[services_1.language,services_1.modellist,services_1.model])],e)}();exports.ObjectListViewAggregate=ObjectListViewAggregate;var ObjectListViewAggregateItem=function(){function e(e,t,s,i){this.elementRef=e,this.language=t,this.metadata=s,this.modellist=i,this.bucketitem={},this.aggregate={},this.isChecked=!1}var t;return Object.defineProperty(e.prototype,"aggregatename",{get:function(){var e;return null===(e=this.aggregate.indexfieldname)||void 0===e?void 0:e.replace(/>/g,"")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"loading",{get:function(){return this.modellist.isLoading},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"checked",{get:function(){return this.modellist.checkAggregate(this.aggregatename,this.bucketitem.aggdata)},set:function(e){(this.isChecked=e)?(this.modellist.setAggregate(this.aggregatename,this.bucketitem.aggdata),this.modellist.reLoadList()):this.modellist.removeAggregate(this.aggregatename,this.bucketitem.aggdata)&&this.modellist.reLoadList()},enumerable:!1,configurable:!0}),__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"bucketitem",void 0),__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"aggregate",void 0),e=__decorate([core_1.Component({selector:"object-listview-aggregate-item",template:'<div class="slds-grid slds-grid--vertical-align-center"><system-checkbox [disabled]="loading" [(ngModel)]="checked"></system-checkbox><ng-container [ngSwitch]="aggregate.type"><object-listview-aggregate-item-range *ngSwitchCase="\'range\'" [aggregate]="aggregate" [item]="bucketitem"></object-listview-aggregate-item-range><object-listview-aggregate-item-term *ngSwitchCase="\'term\'" [aggregate]="aggregate" [item]="bucketitem"></object-listview-aggregate-item-term><div *ngSwitchDefault>{{bucketitem.displayName}}</div></ng-container><div class="slds-p-left--xx-small">(<system-display-number [number]="bucketitem.doc_count" [noDigits]="true"></system-display-number>)</div></div>'}),__metadata("design:paramtypes",["function"==typeof(t=void 0!==core_1.ElementRef&&core_1.ElementRef)?t:Object,services_1.language,services_1.metadata,services_1.modellist])],e)}();exports.ObjectListViewAggregateItem=ObjectListViewAggregateItem;var ObjectListViewAggregateItemTerm=function(){function e(e,t){this.model=e,this.view=t,this.item={},this.aggregate={},this.view.displayLabels=!1}return e.prototype.ngOnInit=function(){this.model.module=this.aggregate.fielddetails.module,this.model.setField(this.aggregate.fielddetails.field,this.model.utils.backend2spice(this.model.module,this.aggregate.fielddetails.field,this.item.key))},__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"item",void 0),__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"aggregate",void 0),e=__decorate([core_1.Component({selector:"object-listview-aggregate-item-term",template:'<span style="font-style: italic;"><system-label *ngIf="item.key == \'#not#set#\'" label="LBL_NOT_SET"></system-label></span><field-container *ngIf="item.key != \'#not#set#\'" [fieldname]="aggregate.fielddetails.field" fielddisplayclass="slds-truncate"></field-container>',providers:[services_1.view,services_1.model]}),__metadata("design:paramtypes",[services_1.model,services_1.view])],e)}();exports.ObjectListViewAggregateItemTerm=ObjectListViewAggregateItemTerm;var ObjectListViewAggregateItemRange=function(){function e(e){this.model=e,this.item={},this.aggregate={}}return __decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"item",void 0),__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"aggregate",void 0),e=__decorate([core_1.Component({selector:"object-listview-aggregate-item-range",template:'<div class="slds-grid slds-grid--vertical-align-center"><div><object-listview-aggregate-item-term *ngIf="item.from" [aggregate]="aggregate" [item]="{key: item.from}"></object-listview-aggregate-item-term><span *ngIf="!item.from">*</span></div><div class="slds-p-horizontal--xx-small">-</div><div><object-listview-aggregate-item-term *ngIf="item.to" [aggregate]="aggregate" [item]="{key: item.to}"></object-listview-aggregate-item-term><span *ngIf="!item.to">*</span></div></div>'}),__metadata("design:paramtypes",[services_1.model])],e)}();exports.ObjectListViewAggregateItemRange=ObjectListViewAggregateItemRange;var ObjectListViewTagsAggregate=function(o){function e(e,t,s){var i=o.call(this,e,t,s)||this;return i.language=e,i.modellist=t,i.model=s,i.aggregate={indexfieldname:"tags"},i}return __extends(e,o),Object.defineProperty(e.prototype,"hasItems",{get:function(){try{return 0<this.aggregateBuckets.length}catch(e){return!1}},enumerable:!1,configurable:!0}),e.prototype.isactive=function(e){return this.modellist.checkAggregate("tags",e.aggdata)},e.prototype.toggle=function(e){this.isactive(e)?this.modellist.removeAggregate("tags",e.aggdata)&&this.modellist.reLoadList():(this.modellist.setAggregate("tags",e.aggdata),this.modellist.reLoadList())},e=__decorate([core_1.Component({selector:"object-listview-tags-aggregate",template:'<div class="slds-filters__item slds-grid slds-wrap slds-grid--align-cente"><ng-container *ngIf="hasItems"><div *ngFor="let bucketItem of aggregateBuckets" class="slds-p-around--xxx-small slds-truncate" style="max-width: 50%;"><div class="slds-badge slds-truncate" [title]="bucketItem.displayName" [ngClass]="{\'slds-badge_inverse\': isactive(bucketItem)}" (click)="toggle(bucketItem)"><div class="slds-grid"><div class="slds-truncate slds-text-link_reset">{{bucketItem.displayName}}</div><div class="slds-p-left--xxx-small">({{bucketItem.doc_count}})</div></div></div></div></ng-container><div *ngIf="!hasItems" class="slds-align--absolute-center"><system-label label="MSG_NO_RECORDS_TAGGED"></system-label></div></div>'}),__metadata("design:paramtypes",[services_1.language,services_1.modellist,services_1.model])],e)}(ObjectListViewAggregate);exports.ObjectListViewTagsAggregate=ObjectListViewTagsAggregate;var ObjectListViewFilterButton=function(){function e(e){this.modellist=e}return e.prototype.togglefilters=function(){this.modellist.displayAggregates=!1,this.modellist.displayFilters=!this.modellist.displayFilters},Object.defineProperty(e.prototype,"enabled",{get:function(){return this.modellist.filterEnabled()&&!this.modellist.isLoading},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"buttonclasses",{get:function(){return this.modellist.displayFilters?"slds-is-selected":""},enumerable:!1,configurable:!0}),e=__decorate([core_1.Component({selector:"object-listview-filter-button",template:'<button class="slds-button slds-button--neutral slds-button--icon-border slds-m-horizontal--xxx-small" system-title="LBL_FILTER" [disabled]="!enabled" [ngClass]="buttonclasses" (click)="togglefilters()"><system-button-icon icon="filterList"></system-button-icon></button>'}),__metadata("design:paramtypes",[services_1.modellist])],e)}();exports.ObjectListViewFilterButton=ObjectListViewFilterButton;var ObjectListViewFilterPanel=function(){function e(e,t,s,i,o,l){var a=this;this.elementRef=e,this.language=t,this.metadata=s,this.modellist=i,this.model=o,this.renderer=l,this.filter={logicaloperator:"and",groupscope:"all",geography:{},conditions:[]},this.subcriptions=new rxjs_1.Subscription,this.subcriptions.add(this.modellist.listType$.subscribe(function(e){a.setFilter()}))}var t,s;return e.prototype.ngOnDestroy=function(){this.subcriptions.unsubscribe()},e.prototype.setFilter=function(){this.filter=__assign({},this.modellist.getFilterDefs()),this.filter&&!_.isEmpty(this.filter)||(this.filter={logicaloperator:"and",groupscope:"all",geography:{},conditions:[]})},Object.defineProperty(e.prototype,"geography",{get:function(){return this.filter.geography?this.filter.geography:{}},set:function(e){this.filter.geography=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isChanged",{get:function(){return!_.isEqual(this.filter,this.modellist.getFilterDefs())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"canEdit",{get:function(){return this.modellist.checkAccess("edit")},enumerable:!1,configurable:!0}),e.prototype.save=function(){var e=this;this.isChanged&&(this.modellist.updateListType({filterdefs:JSON.stringify(this.filter)}).subscribe(function(){e.modellist.reLoadList()}),this.modellist.displayFilters=!1)},e.prototype.cancel=function(){this.filter=__assign({},this.modellist.getFilterDefs()),this.modellist.displayFilters=!1},e.prototype.removeAllFilters=function(){this.filter.conditions=[]},e.prototype.addExpression=function(e){e.preventDefault(),e.stopPropagation();this.filter.conditions.push({field:"",operator:"",filtervalue:""})},e.prototype.deleteItem=function(e){this.filter.conditions.splice(e,1)},e=__decorate([core_1.Component({selector:"object-listview-filter-panel",template:'<div class="slds-panel slds-size--medium slds-grid slds-grid--vertical slds-nowrap slds-panel--filters slds-size_medium" system-to-bottom><div class="slds-form--stacked slds-grow slds-scrollable--y slds-grid slds-grid--vertical"><div class="slds-filters"><div class="slds-filters__header slds-grid slds-grid--align-spread slds-has-divider--bottom-space"><h4 class="slds-align-middle slds-text-heading--small"><system-label label="LBL_FILTER"></system-label></h4><div class="slds-button-group" [ngClass]="{\'slds-hidden\': !isChanged}"><button class="slds-button slds-button--icon slds-button_icon-border-filled" (click)="cancel()"><system-button-icon icon="close"></system-button-icon></button> <button class="slds-button slds-button--icon slds-button_icon-border-filled slds-is-selected" (click)="save()"><system-button-icon icon="check"></system-button-icon></button></div></div><div class="slds-p-around--xx-small"><object-listview-filter-panel-filter-myitems [(ngModel)]="filter.groupscope"></object-listview-filter-panel-filter-myitems><object-listview-filter-panel-filter-geo [(geography)]="geography"></object-listview-filter-panel-filter-geo><div class="slds-grid slds-p-around--xx-small"><label class="slds-form-element__label"><system-label label="LBL_MATCHING"></system-label></label><system-input-radio name="operator" value="and" [disabled]="!canEdit" [(ngModel)]="filter.logicaloperator"><system-label label="LBL_ALL"></system-label></system-input-radio><system-input-radio name="operator" value="or" [disabled]="!canEdit" [(ngModel)]="filter.logicaloperator"><system-label label="LBL_ANY"></system-label></system-input-radio></div><ng-container *ngIf="filter.conditions.length > 0; else nofilter"><div class="slds-grid_vertical"><object-listview-filter-panel-filter-item *ngFor="let condition of filter.conditions; let i = index" [filterexpression]="condition" (deleteItem)="deleteItem(i)"></object-listview-filter-panel-filter-item></div><div *ngIf="canEdit" class="slds-filters__footer slds-grid slds-shrink-none"><a href="javascript:void(0);" (click)="addExpression($event)"><system-label label="LBL_ADDFILTER"></system-label></a> <a href="javascript:void(0);" class="slds-col--bump-left" (click)="removeAllFilters()"><system-label label="LBL_REMOVEALL"></system-label></a></div></ng-container><ng-template #nofilter><div *ngIf="canEdit" class="slds-p-around--small slds-align--absolute-center"><a href="javascript:void(0);" (click)="addExpression($event)"><system-label label="LBL_ADDFILTER"></system-label></a></div></ng-template></div></div></div></div>',host:{class:"slds-is-fixed"}}),__metadata("design:paramtypes",["function"==typeof(t=void 0!==core_1.ElementRef&&core_1.ElementRef)?t:Object,services_1.language,services_1.metadata,services_1.modellist,services_1.model,"function"==typeof(s=void 0!==core_1.Renderer2&&core_1.Renderer2)?s:Object])],e)}();exports.ObjectListViewFilterPanel=ObjectListViewFilterPanel;var ObjectListViewFilterPanelFilterMyItems=function(){function e(e,t,s,i){this.renderer=e,this.elementRef=t,this.language=s,this.modellist=i,this.showPopover=!1,this._filterValue="all",this.clickListener=null}var t,s,i,o;return(t=e).prototype.onClick=function(){var t=this;if(!this.showPopover)return this.showPopover=!0,void(this.clickListener=this.renderer.listen("document","click",function(e){return t.onDocumentClick(e)}))},Object.defineProperty(e.prototype,"filterValue",{get:function(){return this._filterValue},set:function(e){this._filterValue=e,this.onChange(e)},enumerable:!1,configurable:!0}),e.prototype.closePopover=function(){this.showPopover=!1,this.clickListener&&this.clickListener()},e.prototype.onDocumentClick=function(e){this.showPopover&&(this.elementRef.nativeElement.contains(e.target)||this.closePopover())},e.prototype.getPopoverStyle=function(){var e=this.elementRef.nativeElement.getBoundingClientRect(),t=this.popover.element.nativeElement.getBoundingClientRect();return{position:"fixed",top:e.top+(e.height-t.height)/2+"px",left:e.left-t.width-15+"px"}},e.prototype.registerOnChange=function(e){this.onChange=e},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.writeValue=function(e){this._filterValue=e||""},__decorate([core_1.ViewChild("popover",{read:core_1.ViewContainerRef,static:!0}),__metadata("design:type","function"==typeof(s=void 0!==core_1.ViewContainerRef&&core_1.ViewContainerRef)?s:Object)],e.prototype,"popover",void 0),e=t=__decorate([core_1.Component({selector:"object-listview-filter-panel-filter-myitems",template:'<ol class="slds-list--vertical slds-list--vertical-space"><li class="slds-item slds-hint-parent" (click)="onClick()"><div class="slds-filters__item slds-grid slds-grid--vertical-align-center"><a href="javascript:void(0);" class="slds-grow slds-has-blur-focus"><p class="slds-text-body--small"><system-label label="LBL_DISPLAY"></system-label>: {{language.getLabel(\'LBL_\' + filterValue.toUpperCase())}}</p></a></div></li><div #popover [ngStyle]="getPopoverStyle()"><div *ngIf="showPopover" @animatepopover class="slds-popover slds-nubbin--right" role="dialog"><div class="slds-popover__body"><fieldset class="slds-form-element"><legend class="slds-form-element__legend slds-form-element__label"><system-label label="LBL_DISPLAY"></system-label></legend><div class="slds-form-element__control"><span class="slds-radio"><input type="radio" id="radioall" name="scope" value="all" [(ngModel)]="filterValue"> <label class="slds-radio__label" for="radioall"><span class="slds-radio--faux"></span> <span class="slds-form-element__label"><system-label label="LBL_ALL"></system-label></span></label></span> <span class="slds-radio"><input type="radio" id="radioown" name="scope" value="own" [(ngModel)]="filterValue"> <label class="slds-radio__label" for="radioown"><span class="slds-radio--faux"></span> <span class="slds-form-element__label"><system-label label="LBL_OWN"></system-label></span></label></span> <span class="slds-radio"><input type="radio" id="radiocre" name="scope" value="creator" [(ngModel)]="filterValue"> <label class="slds-radio__label" for="radiocre"><span class="slds-radio--faux"></span> <span class="slds-form-element__label"><system-label label="LBL_CREATOR"></system-label></span></label></span></div></fieldset><div class="slds-text-align--right slds-p-top--x-small"><button type="button" class="slds-button slds-button--brand slds-button-space-left" (click)="closePopover()"><system-label label="LBL_OK"></system-label></button></div></div></div></div></ol>',animations:[animations_1.trigger("animatepopover",[animations_1.transition(":enter",[animations_1.style({opacity:0}),animations_1.animate(".25s",animations_1.style({opacity:1}))]),animations_1.transition(":leave",[animations_1.style({opacity:"1"}),animations_1.animate(".25s",animations_1.style({opacity:0}))])])],providers:[{provide:forms_1.NG_VALUE_ACCESSOR,useExisting:core_1.forwardRef(function(){return t}),multi:!0}]}),__metadata("design:paramtypes",["function"==typeof(i=void 0!==core_1.Renderer2&&core_1.Renderer2)?i:Object,"function"==typeof(o=void 0!==core_1.ElementRef&&core_1.ElementRef)?o:Object,services_1.language,services_1.modellist])],e)}();exports.ObjectListViewFilterPanelFilterMyItems=ObjectListViewFilterPanelFilterMyItems;var ObjectListViewFilterPanelFilterGeo=function(){function e(e,t,s,i){this.model=e,this.modal=t,this.language=s,this.metadata=i,this.geography={},this.geographyChange=new core_1.EventEmitter}var t;return Object.defineProperty(e.prototype,"geoEnabled",{get:function(){return!(!this.model||!this.model.module)&&this.metadata.getModuleDefs(this.model.module).ftsgeo},enumerable:!1,configurable:!0}),e.prototype.onClick=function(){var t=this;this.modal.openModal("SpiceMapSelector").subscribe(function(e){t.hasGeogrpahy&&(e.instance.lat=t.geography.lat,e.instance.lng=t.geography.lng,e.instance._radius=t.geography.radius,e.instance.address=t.geography.address),e.instance.geoSearchemitter.subscribe(function(e){e?(t.geography.radius=e.radius,t.geography.lat=e.lat,t.geography.lng=e.lng,t.geography.address=e.address):t.geography={},t.geographyChange.emit(t.geography)})})},Object.defineProperty(e.prototype,"hasGeogrpahy",{get:function(){return!_.isEmpty(this.geography)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"geodata",{get:function(){return this.hasGeogrpahy?this.geography.radius+"km around "+this.geography.address:"no geodata set"},enumerable:!1,configurable:!0}),__decorate([core_1.Input("geography"),__metadata("design:type",Object)],e.prototype,"geography",void 0),__decorate([core_1.Output("geographyChange"),__metadata("design:type","function"==typeof(t=void 0!==core_1.EventEmitter&&core_1.EventEmitter)?t:Object)],e.prototype,"geographyChange",void 0),e=__decorate([core_1.Component({selector:"object-listview-filter-panel-filter-geo",template:'<ol *ngIf="geoEnabled" class="slds-list--vertical slds-list--vertical-space slds-p-vertical--x-small"><li class="slds-item slds-hint-parent slds-text-link--reset" (click)="onClick()"><div class="slds-filters__item slds-grid"><system-button-icon class="slds-p-right--x-small" icon="world"></system-button-icon><p class="slds-text-body--small slds-p-vertical--xxx-small">{{this.geodata}}</p></div></li></ol>'}),__metadata("design:paramtypes",[services_1.model,services_1.modal,services_1.language,services_1.metadata])],e)}();exports.ObjectListViewFilterPanelFilterGeo=ObjectListViewFilterPanelFilterGeo;var ObjectListViewFilterPanelFilterItem=function(d){function e(e,t,s,i,o,l,a){var n=d.call(this,e,t,s)||this;return n.backend=e,n.language=t,n.metadata=s,n.elementRef=i,n.modellist=o,n.renderer=l,n.userpreferences=a,n.showPopover=!1,n.clickListener=null,n.excludedFieldtypes=["link","relate","email"],n.deleteItem=new core_1.EventEmitter,n.module=n.modellist.module,n}var t,s,i,o;return __extends(e,d),Object.defineProperty(e.prototype,"operatorLabel",{get:function(){var t=this;return this.operator?this.operators[this.operatortype].find(function(e){return e.operator==t.operator}).name:""},enumerable:!1,configurable:!0}),e.prototype.ngAfterViewInit=function(){this.field&&""!=this.field||this.openPopover()},e.prototype.ngOnDestroy=function(){this.clickListener&&this.clickListener()},e.prototype.onClick=function(){this.openPopover()},e.prototype.openPopover=function(){this.showPopover||(this.showPopover=!0)},e.prototype.onFocus=function(e){window.setTimeout(function(){e.target.blur()},250)},e.prototype.closePopover=function(){this.showPopover=!1},e.prototype.onDocumentClick=function(e){this.showPopover&&(this.elementRef.nativeElement.contains(e.target)||(this.showPopover=!1,this.clickListener()))},e.prototype.getPopoverStyle=function(){var e=this.elementRef.nativeElement.getBoundingClientRect(),t=this.popover.element.nativeElement.getBoundingClientRect();return{position:"fixed",top:e.top+(e.height-t.height)/2+"px",left:e.left-t.width-15+"px"}},e.prototype.getDisplayName=function(){return this.field?this.language.getFieldDisplayName(this.modellist.module,this.field):this.language.getLabel("LBL_NEW_FILTER")},e.prototype.deleteFilter=function(){this.deleteItem.emit(!0)},e.prototype.interpretvalue=function(t){var s=this;try{switch(this.operators[this.operatortype].find(function(e){return e.operator==s.operator}).value1){case"date":return this.userpreferences.formatDate(t);case"integer":return this.userpreferences.formatMoney(parseInt(t,10));case"enum":return this.language.getFieldDisplayOptionValue(this.module,this.field,t);case"relate":if(!t)return"";var e=t.split("::");return e.length<2?t:e[1];case"multienum":for(var i=[],o=_.isArray(t)?t:t.split(","),l=0,a=o;l<a.length;l++){var n=a[l];i.push(this.language.getFieldDisplayOptionValue(this.module,this.field,n))}return i.join(", ");default:return t}}catch(e){return t}},__decorate([core_1.ViewChild("popover",{read:core_1.ViewContainerRef,static:!0}),__metadata("design:type","function"==typeof(t=void 0!==core_1.ViewContainerRef&&core_1.ViewContainerRef)?t:Object)],e.prototype,"popover",void 0),__decorate([core_1.Output(),__metadata("design:type","function"==typeof(s=void 0!==core_1.EventEmitter&&core_1.EventEmitter)?s:Object)],e.prototype,"deleteItem",void 0),e=__decorate([core_1.Component({selector:"object-listview-filter-panel-filter-item",template:'<div class="slds-filters__item slds-m-vertical--xx-small slds-grid slds-grid--vertical-align-center"><a href="javascript:void(0);" class="slds-grow slds-has-blur-focus" (click)="onClick()" (focus)="onFocus($event)"><p class="slds-text-body--small">{{getDisplayName()}} <system-label [label]="operatorLabel"></system-label> {{interpretvalue(filterexpression.filtervalue)}} <span *ngIf="filterexpression.filtervalueto"><system-label label="LBL_AND"></system-label> {{interpretvalue(filterexpression.filtervalueto)}}</span></p></a><div class="slds-form-element"><div class="slds-form-element__control"><span class="slds-checkbox"><input type="checkbox" name="options" checked></span></div></div><button class="slds-button slds-button--icon slds-button--icon-small" (click)="deleteFilter()"><system-button-icon [icon]="\'close\'"></system-button-icon><span class="slds-assistive-text"><system-label label="LBL_REMOVE"></system-label></span></button></div><div #popover [ngStyle]="getPopoverStyle()"><div *ngIf="showPopover" @animatepopover class="slds-popover slds-nubbin--right" role="dialog"><div class="slds-popover__body"><fieldset class="slds-form--stacked"><system-filter-builder-expression-fields [module]="module" [(ngModel)]="field"></system-filter-builder-expression-fields><div class="slds-form-element"><label class="slds-form-element__label"><system-label label="LBL_OPERATOR"></system-label></label><div class="slds-form-element__control"><div class="slds-select_container"><select [disabled]="!filterexpression.field" class="slds-select" [(ngModel)]="operator"><option *ngFor="let operator of operators[operatortype]" [value]="operator.operator"><system-label [label]="operator.name"></system-label></option></select></div></div></div><system-filter-builder-expression-values [operators]="operators[operatortype]" [operator]="filterexpression.operator" [filterexpression]="filterexpression" [module]="module" [field]="field"></system-filter-builder-expression-values></fieldset><div class="slds-text-align--right slds-p-top--x-small slds-has-divider--top"><button type="button" class="slds-button slds-button--brand slds-button-space-left" (click)="closePopover()"><system-label label="LBL_OK"></system-label></button></div></div></div></div>',animations:[animations_1.trigger("animatepopover",[animations_1.transition(":enter",[animations_1.style({opacity:0}),animations_1.animate(".25s",animations_1.style({opacity:1}))]),animations_1.transition(":leave",[animations_1.style({opacity:"1"}),animations_1.animate(".25s",animations_1.style({opacity:0}))])])]}),__metadata("design:paramtypes",[services_1.backend,services_1.language,services_1.metadata,"function"==typeof(i=void 0!==core_1.ElementRef&&core_1.ElementRef)?i:Object,services_1.modellist,"function"==typeof(o=void 0!==core_1.Renderer2&&core_1.Renderer2)?o:Object,services_1.userpreferences])],e)}(systemcomponents_1.SystemFilterBuilderFilterExpression);exports.ObjectListViewFilterPanelFilterItem=ObjectListViewFilterPanelFilterItem;var ObjectListViewSettings=function(){function e(e,t,s,i,o,l,a){this.language=e,this.elementRef=t,this.modal=s,this.modellist=i,this.renderer=o,this.injector=l,this.toast=a}var t,s,i;return e.prototype.add=function(){this.modal.openModal("ObjectListViewSettingsAddlistModal",!0,this.injector).subscribe(function(e){e.instance.modalmode="add"})},e.prototype.edit=function(){if(!this.modellist.checkAccess("edit"))return!1;this.modal.openModal("ObjectListViewSettingsAddlistModal",!0,this.injector).subscribe(function(e){e.instance.modalmode="edit"})},e.prototype.save=function(){var t=this;this.modellist.updateListType().subscribe(function(e){t.toast.sendToast("List Saved")})},e.prototype.setfields=function(){if(!this.modellist.checkAccess("edit"))return!1;this.modal.openModal("ObjectListViewSettingsSetfieldsModal",!0,this.injector)},e.prototype.delete=function(){var t=this;if(!this.modellist.checkAccess("delete"))return!1;this.modal.prompt("confirm",this.language.getLabel("MSG_DELETE_RECORD",void 0,"long"),this.language.getLabel("MSG_DELETE_RECORD")).subscribe(function(e){e&&t.modellist.deleteListType()})},e=__decorate([core_1.Component({selector:"object-listview-settings",template:'<div class="slds-dropdown-trigger slds-dropdown-trigger--click slds-m-horizontal--xxx-small" [system-dropdown-trigger-simple]="modellist.isLoading"><button class="slds-button slds-button--icon slds-button--icon-border slds-button--neutral" system-title="LBL_SETTING" [disabled]="modellist.isLoading"><system-button-icon icon="settings"></system-button-icon><system-button-icon icon="down" size="x-small"></system-button-icon></button><div class="slds-dropdown slds-dropdown--right"><ul class="slds-dropdown__list" role="menu"><li class="slds-dropdown__header" role="separator"><span class="slds-text-title--caps"><system-label label="LBL_SETTINGS"></system-label></span></li><li class="slds-dropdown__item" role="presentation"><a role="menuitem" (click)="add()"><span class="slds-truncate"><system-utility-icon class="slds-p-right--xx-small" icon="add" size="x-small"></system-utility-icon><system-label label="LBL_NEW"></system-label></span></a></li><li class="slds-dropdown__item" role="presentation"><a role="menuitem" [attr.aria-disabled]="!modellist.checkAccess(\'edit\')" (click)="edit()"><span class="slds-truncate"><system-utility-icon class="slds-p-right--xx-small" icon="edit" size="x-small"></system-utility-icon><system-label label="LBL_EDIT"></system-label></span></a></li><li class="slds-dropdown__item" role="presentation"><a role="menuitem" [attr.aria-disabled]="!modellist.checkAccess(\'edit\')" (click)="save()"><span class="slds-truncate"><system-utility-icon class="slds-p-right--xx-small" icon="save" size="x-small"></system-utility-icon><system-label label="LBL_SAVE"></system-label></span></a></li><li class="slds-dropdown__item" role="presentation"><a role="menuitem" [attr.aria-disabled]="!modellist.checkAccess(\'delete\')" (click)="delete()"><span class="slds-truncate"><system-utility-icon class="slds-p-right--xx-small" icon="delete" size="x-small"></system-utility-icon><system-label label="LBL_DELETE"></system-label></span></a></li></ul></div></div>'}),__metadata("design:paramtypes",[services_1.language,"function"==typeof(t=void 0!==core_1.ElementRef&&core_1.ElementRef)?t:Object,services_1.modal,services_1.modellist,"function"==typeof(s=void 0!==core_1.Renderer2&&core_1.Renderer2)?s:Object,"function"==typeof(i=void 0!==core_1.Injector&&core_1.Injector)?i:Object,services_1.toast])],e)}();exports.ObjectListViewSettings=ObjectListViewSettings;var ObjectListViewSettingsAddlistModal=function(){function ObjectListViewSettingsAddlistModal(e,t,s){this.language=e,this.session=t,this.modellist=s,this.modalmode="add",this.listname="",this.globallist=!1,this.self={},this.componentListOptions=[]}return ObjectListViewSettingsAddlistModal.prototype.ngOnInit=function(){this.loadComponentListOptions(),"edit"===this.modalmode&&(this.listname=this.modellist.currentList.name,this.globallist=this.modellist.getGlobal(),this.listcomponent=this.modellist.currentList.listcomponent)},ObjectListViewSettingsAddlistModal.prototype.loadComponentListOptions=function(){var e=this.modellist.metadata.getComponentConfig("ObjectListView",this.modellist.module),t=this.modellist.metadata.getComponentSetObjects(e.componentset);this.componentListOptions=t.map(function(e){return{component:e.component,label:e.componentconfig.name}}),this.listcomponent=this.componentListOptions[0].component},ObjectListViewSettingsAddlistModal.prototype.close=function(){this.self.destroy()},ObjectListViewSettingsAddlistModal.prototype.canSave=function(){return!(0<this.listname.length)},Object.defineProperty(ObjectListViewSettingsAddlistModal.prototype,"isadmin",{get:function(){return this.session.isAdmin},enumerable:!1,configurable:!0}),ObjectListViewSettingsAddlistModal.prototype.save=function(){var t=this;if(0<this.listname.length){var e={name:this.listname,listcomponent:this.listcomponent,global:this.globallist?"1":"0"};switch(this.modalmode){case"add":this.modellist.addListType(e).subscribe(function(e){t.close()});break;case"edit":this.modellist.updateListType(e).subscribe(function(e){t.close()})}}},__decorate([core_1.Input(),__metadata("design:type",String)],ObjectListViewSettingsAddlistModal.prototype,"modalmode",void 0),ObjectListViewSettingsAddlistModal=__decorate([core_1.Component({template:'<system-modal><system-modal-header (close)="close()"><system-label [label]="\'LBL_\'+modalmode.toUpperCase()+\'LIST\'"></system-label></system-modal-header><system-modal-content><div class="slds-form--stacked"><div class="slds-form-element"><label class="slds-form-element__label"><abbr class="slds-required">*</abbr><system-label label="LBL_NEWLISTNAME"></system-label></label><div class="slds-form-element__control"><input class="slds-input" type="text" [(ngModel)]="listname" autofocus></div></div><div class="slds-form-element slds-p-vertical--small"><label class="slds-form-element__label"><system-label label="LBL_TYPE"></system-label></label><div class="slds-form-element__control"><div class="slds-select_container"><select class="slds-select" [(ngModel)]="listcomponent"><option *ngFor="let componentListOption of componentListOptions" [value]="componentListOption.component"><system-label [label]="componentListOption.label"></system-label></option></select></div></div></div><div *ngIf="isadmin" class="slds-form-element slds-m-vertical--x-small"><div class="slds-form-element__control"><system-checkbox [(ngModel)]="globallist"><system-label label="LBL_GLOBALVISIBLE"></system-label></system-checkbox></div></div></div></system-modal-content><system-modal-footer><button class="slds-button slds-button--neutral" (click)="close()"><system-label label="LBL_CANCEL"></system-label></button> <button class="slds-button slds-button--brand" [disabled]="canSave()" (click)="save()"><system-label label="LBL_SAVE"></system-label></button></system-modal-footer></system-modal>'}),__metadata("design:paramtypes",[services_1.language,services_1.session,services_1.modellist])],ObjectListViewSettingsAddlistModal)}();exports.ObjectListViewSettingsAddlistModal=ObjectListViewSettingsAddlistModal;var ObjectListViewSettingsSetfieldsModal=function(){function ObjectListViewSettingsSetfieldsModal(e,t,s){this.metadata=e,this.language=t,this.modellist=s,this.self={},this.listFields=[],this.availableFields=[],this.selectedAvailableFields=[],this.selectedListFields=[],this.listFields=_.clone(this.modellist.listfields);for(var i=this.metadata.getComponentConfig("ObjectList",this.modellist.module),o=this.metadata.getFieldSetFields(i.fieldset),l=function(t){a.listFields.find(function(e){return e.id==t.id})||a.availableFields.push({id:t.id,field:t.field,fieldconfig:t.fieldconfig})},a=this,n=0,d=o;n<d.length;n++){l(d[n])}0<this.availableFields.length&&this.sortAvailableFields()}return ObjectListViewSettingsSetfieldsModal.prototype.sortAvailableFields=function(){var s=this;this.availableFields=this.availableFields.sort(function(e,t){return s.language.getFieldDisplayName(s.modellist.module,e.field,e.fieldconfig).toLowerCase()>s.language.getFieldDisplayName(s.modellist.module,t.field,t.fieldconfig).toLowerCase()?1:-1})},ObjectListViewSettingsSetfieldsModal.prototype.close=function(){this.self.destroy()},ObjectListViewSettingsSetfieldsModal.prototype.canSet=function(){return 0<this.listFields.length},ObjectListViewSettingsSetfieldsModal.prototype.set=function(){this.canSet()&&(this.modellist.listfields=this.listFields,this.close())},ObjectListViewSettingsSetfieldsModal.prototype.saveAndSet=function(){var e=this;this.canSet()&&(this.modellist.listfields=this.listFields,this.modellist.updateListType().subscribe(function(){return e.close()}))},ObjectListViewSettingsSetfieldsModal.prototype.onFieldDrop=function(e){var t=e.previousContainer.data.splice(e.previousIndex,1);e.container.data.splice(e.currentIndex,0,t[0])},ObjectListViewSettingsSetfieldsModal.prototype.selectField=function(e,t){switch(e){case"available":this.selectedAvailableFields=[t];break;case"list":this.selectedListFields=[t]}},ObjectListViewSettingsSetfieldsModal.prototype.isSelected=function(e,t){switch(e){case"available":return 0<=this.selectedAvailableFields.indexOf(t);case"list":return 0<=this.selectedListFields.indexOf(t)}},ObjectListViewSettingsSetfieldsModal.prototype.moveFields=function(e){var i=this;switch(e){case"available":this.selectedAvailableFields.forEach(function(s){i.availableFields.some(function(e,t){if(s==e.field)return i.listFields.push(i.availableFields.splice(t,1)[0]),!0})}),this.selectedAvailableFields=[];break;case"list":this.selectedListFields.forEach(function(s){i.listFields.some(function(e,t){if(s==e.field)return i.availableFields.push(i.listFields.splice(t,1)[0]),!0})}),this.selectedListFields=[],this.sortAvailableFields()}},ObjectListViewSettingsSetfieldsModal=__decorate([core_1.Component({selector:"object-listview-settings-setfields-modal",template:'<system-modal><system-modal-header (close)="close()"><system-label label="LBL_SETFIELDS"></system-label></system-modal-header><system-modal-content><div class="slds-grid"><div class="slds-form-element slds-p-horizontal--small slds-size--1-of-2"><span class="slds-form-element__label"><system-label label="LBL_AVAILABLE_FIELDS"></system-label></span><div class="slds-picklist slds-picklist__options slds-size--1-of-1" style="height: 50vh" cdkDropList #listOne="cdkDropList" [cdkDropListData]="availableFields" [cdkDropListConnectedTo]="[listTwo]" (cdkDropListDropped)="onFieldDrop($event)"><div *ngFor="let field of availableFields" cdkDrag [cdkDragData]="field" class="slds-drag--preview slds-picklist__item" [attr.aria-selected]="isSelected(\'available\', field.id)" role="option" (click)="selectField(\'available\', field.id)"><span class="slds-truncate"><system-label-fieldname [module]="modellist.module" [field]="field.field" [fieldconfig]="field.fieldconfig"></system-label-fieldname> <span class="slds-text-color--inverse-weak">({{field.field}})</span></span></div></div></div><div class="slds-form-element slds-p-horizontal--small slds-size--1-of-2"><span class="slds-form-element__label"><system-label label="LBL_SELECTED_FIELDS"></system-label></span><div class="slds-picklist slds-picklist__options slds-size--1-of-1 cdk-drag" style="height: 50vh" cdkDropList #listTwo="cdkDropList" [cdkDropListData]="listFields" [cdkDropListConnectedTo]="[listOne]" (cdkDropListDropped)="onFieldDrop($event)"><div *ngFor="let field of listFields" cdkDrag [cdkDragData]="field" class="slds-drag--preview slds-picklist__item" [attr.aria-selected]="isSelected(\'list\', field.id)" role="option" (click)="selectField(\'list\', field.id)"><span class="slds-truncate"><system-label-fieldname [module]="modellist.module" [field]="field.field" [fieldconfig]="field.fieldconfig"></system-label-fieldname> <span class="slds-text-color--inverse-weak">({{field.field}})</span></span></div></div></div></div></system-modal-content><system-modal-footer><button class="slds-button slds-button--neutral" (click)="close()"><system-label label="LBL_CANCEL"></system-label></button> <button class="slds-button slds-button--neutral" [disabled]="!canSet()" (click)="saveAndSet()"><system-label label="LBL_SAVE_AND_SET"></system-label></button> <button class="slds-button slds-button--brand" [disabled]="!canSet()" (click)="set()"><system-label label="LBL_SET"></system-label></button></system-modal-footer></system-modal>'}),__metadata("design:paramtypes",[services_1.metadata,services_1.language,services_1.modellist])],ObjectListViewSettingsSetfieldsModal)}();exports.ObjectListViewSettingsSetfieldsModal=ObjectListViewSettingsSetfieldsModal;var ObjectRecordViewContainer=function(){function ObjectRecordViewContainer(e,t,s,i,o,l,a){var n=this;this.navigation=e,this.navigationtab=t,this.activatedRoute=s,this.metadata=i,this.model=o,this.broadcast=l,this.elementref=a,this.module="",this.id="",this.initialized=!1,this.componentset="",this.componentRefs=[],this.componentSubscriptions=new rxjs_1.Subscription,this.componentSubscriptions.add(this.navigationtab.activeRoute$.subscribe(function(e){n.module==e.params.module&&n.id==e.params.id||(n.module=e.params.module,n.id=e.params.id,n.initialized&&n.buildContainer())})),this.componentSubscriptions.add(this.broadcast.message$.subscribe(function(e){n.handleMessage(e)}))}var e,t,s;return ObjectRecordViewContainer.prototype.handleMessage=function(e){switch(e.messagetype){case"applauncher.setrole":this.buildContainer()}},ObjectRecordViewContainer.prototype.ngAfterViewInit=function(){this.initialized=!0,this.buildContainer()},ObjectRecordViewContainer.prototype.ngOnDestroy=function(){this.componentSubscriptions.unsubscribe()},ObjectRecordViewContainer.prototype.buildContainer=function(){for(var s=this,e=0,t=this.componentRefs;e<t.length;e++){t[e].destroy()}var i=this.metadata.getComponentConfig("ObjectRecordViewContainer",this.module);this.componentset=i.componentset;for(var o=function(t){l.metadata.addComponent(t.component,l.container).subscribe(function(e){e.instance.componentconfig=t.componentconfig,s.componentRefs.push(e)})},l=this,a=0,n=this.metadata.getComponentSetObjects(this.componentset);a<n.length;a++){o(n[a])}},__decorate([core_1.ViewChild("container",{read:core_1.ViewContainerRef,static:!0}),__metadata("design:type","function"==typeof(e=void 0!==core_1.ViewContainerRef&&core_1.ViewContainerRef)?e:Object)],ObjectRecordViewContainer.prototype,"container",void 0),ObjectRecordViewContainer=__decorate([core_1.Component({selector:"object-recordview-container",template:"<div #container></div>",providers:[services_1.model]}),__metadata("design:paramtypes",[services_1.navigation,services_1.navigationtab,"function"==typeof(t=void 0!==router_1.ActivatedRoute&&router_1.ActivatedRoute)?t:Object,services_1.metadata,services_1.model,services_1.broadcast,"function"==typeof(s=void 0!==core_1.ElementRef&&core_1.ElementRef)?s:Object])],ObjectRecordViewContainer)}();exports.ObjectRecordViewContainer=ObjectRecordViewContainer;var ObjectRecordView=function(){function ObjectRecordView(e,t,s,i,o,l,a){this.broadcast=e,this.navigation=t,this.navigationtab=s,this.activatedRoute=i,this.metadata=o,this.model=l,this.favorite=a,this.moduleName="",this.componentconfig={},this.componentSubscriptions=new rxjs_1.Subscription,this.modelloaded=!1}var e;return ObjectRecordView.prototype.ngOnInit=function(){var t=this;this.moduleName=this.navigationtab.activeRoute.params.module,this.model.module=this.moduleName,this.model.id=this.navigationtab.activeRoute.params.id,this.model.getData(!0,"detailview",!0,!0).subscribe(function(e){t.modelloaded=!0}),this.componentconfig=this.metadata.getComponentConfig("ObjectRecordView",this.moduleName),this.componentSubscriptions.add(this.broadcast.message$.subscribe(function(e){t.handleMessage(e)})),this.componentSubscriptions.add(this.model.data$.subscribe(function(){return t.setTabTitle()}))},ObjectRecordView.prototype.ngOnDestroy=function(){this.componentSubscriptions.unsubscribe()},ObjectRecordView.prototype.handleMessage=function(e){switch(e.messagetype){case"model.save":this.model.module===e.messagedata.module&&this.model.id===e.messagedata.id&&(this.model.data=e.messagedata.data,this.navigationtab.setTabInfo({displayname:e.messagedata.data.summary_text,displaymodule:this.model.module}))}},ObjectRecordView.prototype.setTabTitle=function(){this.navigationtab.setTabInfo({displayname:this.model.getField("summary_text"),displaymodule:this.model.module})},ObjectRecordView=__decorate([core_1.Component({selector:"object-recordview",template:'<system-componentset [componentset]="componentconfig.header"></system-componentset><div class="slds-theme--default" system-to-bottom><system-componentset [componentset]="componentconfig.main"></system-componentset></div>',providers:[services_1.model]}),__metadata("design:paramtypes",[services_1.broadcast,services_1.navigation,services_1.navigationtab,"function"==typeof(e=void 0!==router_1.ActivatedRoute&&router_1.ActivatedRoute)?e:Object,services_1.metadata,services_1.model,services_1.favorite])],ObjectRecordView)}();exports.ObjectRecordView=ObjectRecordView;var ObjectRecordViewDetail1=function(){function ObjectRecordViewDetail1(e,t,s){this.metadata=e,this.model=t,this.elementRef=s,this.initialized=!1,this.componentconfig={}}var e,t;return ObjectRecordViewDetail1.prototype.ngOnInit=function(){this.getComponentconfig()},ObjectRecordViewDetail1.prototype.getComponentconfig=function(){_.isEmpty(this.componentconfig)&&(this.componentconfig=this.metadata.getComponentConfig("ObjectRecordViewDetail1",this.model.module))},__decorate([core_1.ViewChild("contentcontainer",{read:core_1.ViewContainerRef,static:!0}),__metadata("design:type","function"==typeof(e=void 0!==core_1.ViewContainerRef&&core_1.ViewContainerRef)?e:Object)],ObjectRecordViewDetail1.prototype,"contentcontainer",void 0),ObjectRecordViewDetail1=__decorate([core_1.Component({selector:"object-recordview-detail-1",template:'<div class="slds-p-horizontal--small"><system-componentset [componentset]="componentconfig.main"></system-componentset></div>'}),__metadata("design:paramtypes",[services_1.metadata,services_1.model,"function"==typeof(t=void 0!==core_1.ElementRef&&core_1.ElementRef)?t:Object])],ObjectRecordViewDetail1)}();exports.ObjectRecordViewDetail1=ObjectRecordViewDetail1;var ObjectRecordViewDetail2and1=function(){function ObjectRecordViewDetail2and1(e,t){this.metadata=e,this.model=t,this.initialized=!1,this.componentconfig={}}return ObjectRecordViewDetail2and1.prototype.ngOnInit=function(){this.getComponentconfig()},ObjectRecordViewDetail2and1.prototype.getComponentconfig=function(){_.isEmpty(this.componentconfig)&&(this.componentconfig=this.metadata.getComponentConfig("ObjectRecordViewDetail2and1",this.model.module))},ObjectRecordViewDetail2and1=__decorate([core_1.Component({selector:"object-recordview-detail-2and1",template:'<div class="slds-grid slds-wrap slds-p-top--small"><div class="slds-col slds-p-horizontal--small slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--2-of-3"><system-componentset [componentset]="componentconfig.main"></system-componentset></div><div class="slds-col slds-p-horizontal--small slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3"><system-componentset [componentset]="componentconfig.sidebar"></system-componentset></div></div>'}),__metadata("design:paramtypes",[services_1.metadata,services_1.model])],ObjectRecordViewDetail2and1)}();exports.ObjectRecordViewDetail2and1=ObjectRecordViewDetail2and1;var ObjectRecordViewDetailsplit=function(){function ObjectRecordViewDetailsplit(e,t){this.metadata=e,this.model=t,this.componentconfig={}}return ObjectRecordViewDetailsplit.prototype.ngOnInit=function(){this.getComponentconfig()},ObjectRecordViewDetailsplit.prototype.getComponentconfig=function(){!_.isEmpty(this.componentconfig)&&(this.componentconfig.left||this.componentconfig.right)||(this.componentconfig=this.metadata.getComponentConfig("ObjectRecordViewDetailsplit",this.model.module))},ObjectRecordViewDetailsplit=__decorate([core_1.Component({selector:"object-recordview-detail-split",template:'<div class="slds-grid slds-wrap slds-p-top--small"><div class="slds-col slds-p-horizontal--small slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-2"><system-componentset [componentset]="componentconfig.left"></system-componentset></div><div class="slds-col slds-p-horizontal--small slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-2"><system-componentset [componentset]="componentconfig.right"></system-componentset></div></div>'}),__metadata("design:paramtypes",[services_1.metadata,services_1.model])],ObjectRecordViewDetailsplit)}();exports.ObjectRecordViewDetailsplit=ObjectRecordViewDetailsplit;var ObjectPageHeader=function(){function ObjectPageHeader(e,t,s,i){this.language=e,this.router=t,this.model=s,this.metadata=i,this.componentconfig={},this.actionSet="",this.fieldset=""}var e;return Object.defineProperty(ObjectPageHeader.prototype,"moduleName",{get:function(){return this.model.module},enumerable:!1,configurable:!0}),ObjectPageHeader.prototype.ngOnInit=function(){var e=this.componentconfig&&!_.isEmpty(this.componentconfig)?this.componentconfig:this.metadata.getComponentConfig("ObjectPageHeader",this.model.module);this.actionSet=e.actionset,this.fieldset=e.fieldset},ObjectPageHeader.prototype.goToModule=function(){this.router.navigate(["/module/"+this.moduleName])},ObjectPageHeader=__decorate([core_1.Component({selector:"object-page-header",template:'<div class="slds-page-header"><div class="slds-grid"><div class="slds-col slds-has-flexi-truncate"><div class="slds-media slds-no-space slds-grow"><system-icon [module]="moduleName" (click)="goToModule()"></system-icon><div class="slds-media__body"><p class="slds-text-title--caps slds-line-height--reset"><a routerLink="/module/{{moduleName}}"><system-label-modulename [module]="moduleName"></system-label-modulename></a></p><div><h1 class="slds-page-header__title slds-m-right--small slds-align-middle slds-truncate"><ng-container *ngIf="!fieldset">{{model.data.summary_text}}</ng-container><object-record-fieldset-horizontal-list *ngIf="fieldset" [fieldset]="fieldset" [system-view-provider]="{displayLabels: false}"></object-record-fieldset-horizontal-list></h1></div></div></div></div><div class="slds-m-horizontal--x-small slds-show--medium"><object-subscription-button></object-subscription-button><object-reminder-button></object-reminder-button><object-status-network-button></object-status-network-button></div><object-action-container [actionset]="actionSet"></object-action-container></div><object-page-header-tags></object-page-header-tags></div>',providers:[services_1.view]}),__metadata("design:paramtypes",[services_1.language,"function"==typeof(e=void 0!==router_1.Router&&router_1.Router)?e:Object,services_1.model,services_1.metadata])],ObjectPageHeader)}();exports.ObjectPageHeader=ObjectPageHeader;var ObjectPageHeaderTags=function(){function e(e,t,s){this.model=e,this.metadata=t,this.language=s,this.isEditing=!1}return Object.defineProperty(e.prototype,"objecttags",{get:function(){var e=this.model.getField("tags");if(!e||""===e)return[];try{return JSON.parse(e)}catch(e){return[]}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"taggingEnabled",{get:function(){return this.metadata.checkTagging(this.model.module)},enumerable:!1,configurable:!0}),e.prototype.editTags=function(){this.isEditing=!0,this.model.startEdit()},e.prototype.cancelEdit=function(){this.isEditing=!1,this.model.cancelEdit()},e.prototype.saveTags=function(){this.model.save(),this.isEditing=!1},e.prototype.removeByIndex=function(e){var t=this.objecttags;t.splice(e,1),this.model.setField("tags",JSON.stringify(t))},e.prototype.addTag=function(e){var t=this.objecttags;t.push(e),this.model.setField("tags",JSON.stringify(t))},e=__decorate([core_1.Component({selector:"object-page-header-tags",template:'<div *ngIf="taggingEnabled" class="slds-show--medium slds-p-top--xxx-small"><system-stencil *ngIf="model.isLoading; else displayContent"></system-stencil><ng-template #displayContent><div class="slds-grid slds-grid--vertical-align-center"><div class="slds-p-vertical--x-small"><div class="slds-p-right--xx-small slds-grid slds-gutters_direct-xxx-small" *ngIf="objecttags.length"><div *ngFor="let tag of objecttags;let i=index" class="slds-col"><span class="slds-badge">{{tag}} <span *ngIf="isEditing" class="slds-badge__icon slds-badge__icon_right" style="margin-bottom: 2px;" (click)="removeByIndex(i)"><system-utility-icon icon="close" size="xx-small"></system-utility-icon></span></span></div></div><div *ngIf="objecttags.length == 0 && !isEditing" class="slds-p-right--xx-small"><div style="font-style:italic"><system-label label="LBL_NO_TAGS_ASSIGNED"></system-label></div></div></div><div *ngIf="!isEditing"><button class="slds-button slds-button_icon" (click)="editTags()"><system-button-icon [icon]="\'edit\'"></system-button-icon></button></div><div *ngIf="isEditing" class="slds-grid slds-grow"><div class="slds-form-element slds-grow"><system-input-tags (tagemitter)="addTag($event)"></system-input-tags></div><button class="slds-p-left--xx-small slds-button slds-button_icon" (click)="cancelEdit()"><system-button-icon [icon]="\'close\'"></system-button-icon></button> <button class="slds-button slds-button_icon" (click)="saveTags()"><system-button-icon [icon]="\'check\'"></system-button-icon></button></div></div></ng-template></div>'}),__metadata("design:paramtypes",[services_1.model,services_1.metadata,services_1.language])],e)}();exports.ObjectPageHeaderTags=ObjectPageHeaderTags;var ObjectPageHeaderTagPicker=function(){function ObjectPageHeaderTagPicker(e,t,s){this.language=e,this.backend=t,this.toast=s,this.model={},this.self={},this.tags=[],this.allTags=[],this.offeredTags=[],this.offeredTagsMaxLength=20,this.filter="",this.tagsAreParsed=!1,this.allTagsAreLoaded=!1}return ObjectPageHeaderTagPicker.prototype.ngOnInit=function(){var t=this;this.backend.getRequest("systags").subscribe(function(e){e.systags&&(t.allTags=e.systags),t.allTagsAreLoaded=!0,t.doFilter()},function(e){t.toast.sendToast("Error loading list of available tags.","error",null),t.closeModal()}),this.model.isLoading?this.model.data$.subscribe(function(){window.setTimeout(function(){t.parseTags()},5e3)}):this.parseTags()},ObjectPageHeaderTagPicker.prototype.parseTags=function(){try{this.tags=JSON.parse(this.model.data.tags)}catch(e){this.tags=[]}this.tagsAreParsed=!0,this.doFilter()},ObjectPageHeaderTagPicker.prototype.changeFilter=function(){this.doFilter()},ObjectPageHeaderTagPicker.prototype.clearFilter=function(){this.filter="",this.doFilter()},ObjectPageHeaderTagPicker.prototype.doFilter=function(){if(this.tagsAreParsed&&this.allTagsAreLoaded){this.offeredTags.length=0;for(var e=this.numberFilteredTags=0,t=this.allTags;e<t.length;e++){var s=t[e];(0===this.filter.length||0<=s.toLowerCase().indexOf(this.filter.toLowerCase()))&&-1===this.tags.indexOf(s)&&this.numberFilteredTags++<this.offeredTagsMaxLength&&this.offeredTags.push(s)}}},ObjectPageHeaderTagPicker.prototype.addTag=function(e){-1===this.tags.indexOf(this.offeredTags[e])&&(this.tags.push(this.offeredTags[e]),this.tags.sort(),this.offeredTags.splice(e,1))},ObjectPageHeaderTagPicker.prototype.removeTag=function(e){this.tags.splice(e,1),this.doFilter()},ObjectPageHeaderTagPicker.prototype.saveAndClose=function(){this.model.setField("tags",JSON.stringify(this.tags)),this.model.save(),this.closeModal()},ObjectPageHeaderTagPicker.prototype.closeModal=function(){this.self.destroy()},ObjectPageHeaderTagPicker.prototype.onModalEscX=function(){this.closeModal()},ObjectPageHeaderTagPicker=__decorate([core_1.Component({selector:"object-page-header-tag-picker",template:'<system-modal><system-modal-header (close)="closeModal()"><system-label label="LBL_ASSIGN_TAGS"></system-label></system-modal-header><system-modal-content><ng-container *ngIf="allTagsAreLoaded && tagsAreParsed; else notReady"><div class="slds-m-bottom--medium"><ng-container *ngIf="tags.length; else noAssignedTags"><ul class="selectedTags slds-listbox slds-listbox_horizontal" role="presentation" style="line-height:1.7rem"><li *ngFor="let tag of tags; let i=index"><span class="slds-badge" (click)="removeTag(i)">{{tag}}</span></li></ul></ng-container><ng-template #noAssignedTags><div style="font-style:italic"><system-label label="LBL_NO_TAGS_ASSIGNED"></system-label></div></ng-template></div><div class="slds-form-element"><div class="slds-form-element__control slds-input-has-icon slds-input-has-icon_right"><system-utility-icon [icon]="\'clear\'" [size]="\'x-small\'" [addclasses]="\'slds-input__icon slds-input__icon_right slds-icon-text-default\'" (click)="clearFilter()"></system-utility-icon><input type="text" class="slds-input" placeholder="{{ language.getLabel(\'LBL_ENTER_TAGS_FOR_TAGS\') }}" [(ngModel)]="filter" (keyup)="changeFilter()" #fieldFilter></div></div><div class="slds-m-top--small"><ng-container *ngIf="offeredTags.length; else noOfferedTags"><ul class="slds-listbox slds-listbox_horizontal offeredTags" role="listbox" style="line-height:1.5rem"><li *ngFor="let tag of offeredTags; let i=index" role="presentation" (click)="addTag(i)" style="margin-top:0.2rem"><span class="slds-badge slds-badge_inverse">{{tag}}</span></li></ul><div class="slds-m-top--xx-small" *ngIf="numberFilteredTags-offeredTagsMaxLength>0" style="font-style:italic;text-align:right">{{ language.getLabelFormatted(\'LBL_NUMBER_OF_SHOWN_TAGS\', [ offeredTags.length, numberFilteredTags ] ) }}</div></ng-container><ng-template #noOfferedTags><div class="slds-m-top--xx-small" style="font-style:italic"><system-label label="LBL_NO_TAGS_FOUND"></system-label></div></ng-template></div></ng-container><ng-template #notReady><system-spinner></system-spinner></ng-template></system-modal-content><system-modal-footer><button class="slds-button slds-button--neutral" (click)="closeModal()"><system-label label="LBL_CANCEL"></system-label></button> <button class="slds-button slds-button--brand" (click)="saveAndClose()"><system-label label="LBL_SAVE"></system-label></button></system-modal-footer></system-modal>',styles:[".offeredTags span { cursor: pointer; }",".selectedTags li { margin-bottom: 0.125rem; }",".selectedTags { margin-bottom: -0.125rem; }","::placeholder { font-style: italic; }",".slds-badge { text-transform: none; font-size: 0.75rem; padding-top: 0.1875rem; line-height: 2; }",".slds-badge:hover { cursor: pointer; filter: brightness(90%); }",".slds-badge.slds-badge_inverse:hover { filter: brightness(133%); }"]}),__metadata("design:paramtypes",[services_1.language,services_1.backend,services_1.toast])],ObjectPageHeaderTagPicker)}();exports.ObjectPageHeaderTagPicker=ObjectPageHeaderTagPicker;var ObjectPageHeaderDetails=function(){function ObjectPageHeaderDetails(e,t,s,i,o){this.elementref=e,this.activatedRoute=t,this.router=s,this.model=i,this.metadata=o,this.componentconfig={}}var e,t,s;return ObjectPageHeaderDetails.prototype.ngOnInit=function(){"{}"==JSON.stringify(this.componentconfig)&&(this.componentconfig=this.metadata.getComponentConfig("ObjectPageHeaderDetails",this.model.module))},Object.defineProperty(ObjectPageHeaderDetails.prototype,"fieldSets",{get:function(){return this.componentconfig&&this.componentconfig.fieldset?[this.componentconfig.fieldset]:[]},enumerable:!1,configurable:!0}),Object.defineProperty(ObjectPageHeaderDetails.prototype,"collapsed",{get:function(){return!!this.componentconfig.collapsed&&this.componentconfig.collapsed},enumerable:!1,configurable:!0}),ObjectPageHeaderDetails=__decorate([core_1.Component({selector:"object-page-header-details",template:'<div class="slds-p-horizontal--medium slds-p-vertical--xx-small slds-border--bottom slds-scrollable--x"><object-page-header-detail-row *ngFor="let thisFieldSet of fieldSets" [fieldSet]="thisFieldSet" [collapsed]="collapsed"></object-page-header-detail-row></div>'}),__metadata("design:paramtypes",["function"==typeof(e=void 0!==core_1.ElementRef&&core_1.ElementRef)?e:Object,"function"==typeof(t=void 0!==router_1.ActivatedRoute&&router_1.ActivatedRoute)?t:Object,"function"==typeof(s=void 0!==router_1.Router&&router_1.Router)?s:Object,services_1.model,services_1.metadata])],ObjectPageHeaderDetails)}();exports.ObjectPageHeaderDetails=ObjectPageHeaderDetails;var ObjectPageHeaderDetailRow=function(){function e(e,t,s){this.metadata=e,this.model=t,this.view=s,this.fieldSet="",this.opacity=1,this.collapsed=!0}return e.prototype.ngOnInit=function(){this.setLabelLength()},e.prototype.getFields=function(){var s=this,i=this.metadata.getFieldSetFields(this.fieldSet);if(this.model.data&&this.model.data.acl_fieldcontrol){var e=[];for(var t in i)this.metadata.hasField(this.model.module,i[t].field)&&(this.model.data.acl_fieldcontrol[i[t].field]&&"1"===this.model.data.acl_fieldcontrol[i[t].field]||e.push(i[t]));return e}return i.forEach(function(e,t){s.metadata.hasField(s.model.module,e.field)||i.splice(t,1)}),i},e.prototype.toggleCollapsed=function(){this.collapsed=!this.collapsed,this.setLabelLength()},Object.defineProperty(e.prototype,"toggleIcon",{get:function(){return this.collapsed?"chevrondown":"chevronup"},enumerable:!1,configurable:!0}),e.prototype.setLabelLength=function(){this.collapsed?(this.view.displayLabels=!1,this.view.labels="short"):(this.view.displayLabels=!0,this.view.labels="default")},e.prototype.showLabel=function(e){return!0!==e.hidelabel},__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"fieldSet",void 0),__decorate([core_1.Input(),__metadata("design:type",Number)],e.prototype,"opacity",void 0),__decorate([core_1.Input(),__metadata("design:type",Boolean)],e.prototype,"collapsed",void 0),e=__decorate([core_1.Component({selector:"object-page-header-detail-row",template:'<div class="slds-grid slds-grid--vertical-align-start"><div><ul *ngIf="!collapsed" class="slds-grid" [ngStyle]="{opacity: opacity}"><li object-page-header-detail-row-field class="slds-m-right--medium" *ngFor="let field of getFields()" [field]="field"></li></ul><ul *ngIf="collapsed" class="slds-list--horizontal slds-has-dividers--left"><ng-container *ngFor="let field of getFields()"><li *ngIf="model.data[field.field]" class="slds-item slds-grid slds-grid--vertical-align-center"><field-label *ngIf="showLabel(field.fieldconfig)" [fieldname]="field.field" [fieldconfig]="field.fieldconfig" [addclasses]="\'slds-truncate\'"></field-label><span *ngIf="!field.fieldconfig.hidelabel" class="slds-p-right--xx-small">:</span><field-container [field]="field.field" [fieldconfig]="field.fieldconfig" [fielddisplayclass]="\'slds-truncate\'"></field-container></li></ng-container></ul></div><div class="slds-col--bump-left"><button class="slds-button slds-button--icon" (click)="toggleCollapsed()"><system-button-icon [icon]="toggleIcon"></system-button-icon></button></div></div>',providers:[services_1.view]}),__metadata("design:paramtypes",[services_1.metadata,services_1.model,services_1.view])],e)}();exports.ObjectPageHeaderDetailRow=ObjectPageHeaderDetailRow;var ObjectPageHeaderDetailRowField=function(){function e(){this.moduleName="",this.field={}}return __decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"moduleName",void 0),__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"field",void 0),e=__decorate([core_1.Component({selector:"[object-page-header-detail-row-field]",template:'<div><field-container [field]="field.field" [fieldconfig]="field.fieldconfig" [fielddisplayclass]="\'slds-text-body--regular slds-truncate slds-m-vertical--xx-small\'"></field-container></div>'})],e)}();exports.ObjectPageHeaderDetailRowField=ObjectPageHeaderDetailRowField;var ObjectTabContainerItemHeader=function(){function e(e,t){this.metadata=e,this.language=t,this.tab=[]}var t;return Object.defineProperty(e.prototype,"displayName",{get:function(){return!this.tab.headercomponent&&this.tab.name&&""!=this.tab.name},enumerable:!1,configurable:!0}),e.prototype.ngAfterViewInit=function(){this.tab.headercomponent&&this.metadata.addComponent(this.tab.headercomponent,this.headercontainer)},e.prototype.getTabLabel=function(e){if(0<e.indexOf(":")){var t=e.split(":");return this.language.getLabel(t[0],t[1])}return this.language.getLabel(e)},__decorate([core_1.ViewChild("headercontainer",{read:core_1.ViewContainerRef,static:!0}),__metadata("design:type","function"==typeof(t=void 0!==core_1.ViewContainerRef&&core_1.ViewContainerRef)?t:Object)],e.prototype,"headercontainer",void 0),__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"tab",void 0),e=__decorate([core_1.Component({selector:"object-tab-container-item-header",template:'<ng-container *ngIf="displayName"><system-label [label]="tab.name"></system-label></ng-container><ng-container #headercontainer></ng-container>'}),__metadata("design:paramtypes",[services_1.metadata,services_1.language])],e)}();exports.ObjectTabContainerItemHeader=ObjectTabContainerItemHeader;var ObjectTabContainerItem=function(){function ObjectTabContainerItem(e,t,s){this.metadata=e,this.fielderrorgroup=t,this.model=s,this.componentRefs=[],this.initialized=!1,this.componentset=[],this.taberrors=new core_1.EventEmitter}var e;return ObjectTabContainerItem.prototype.ngOnInit=function(){var t=this;this.fielderrorgroup.change$.subscribe(function(e){t.taberrors.emit(e)})},ObjectTabContainerItem.prototype.ngAfterViewInit=function(){this.initialized=!0,this.buildContainer()},ObjectTabContainerItem.prototype.ngOnDestroy=function(){for(var e=0,t=this.componentRefs;e<t.length;e++){t[e].destroy()}},ObjectTabContainerItem.prototype.buildContainer=function(){for(var s=this,e=function(t){i.metadata.addComponent(t.component,i.container).subscribe(function(e){s.componentRefs.push(e),e.instance.componentconfig=t.componentconfig})},i=this,t=0,o=this.metadata.getComponentSetObjects(this.componentset);t<o.length;t++){e(o[t])}},__decorate([core_1.ViewChild("container",{read:core_1.ViewContainerRef,static:!0}),__metadata("design:type","function"==typeof(e=void 0!==core_1.ViewContainerRef&&core_1.ViewContainerRef)?e:Object)],ObjectTabContainerItem.prototype,"container",void 0),__decorate([core_1.Input(),__metadata("design:type",Object)],ObjectTabContainerItem.prototype,"componentset",void 0),__decorate([core_1.Output(),__metadata("design:type",Object)],ObjectTabContainerItem.prototype,"taberrors",void 0),ObjectTabContainerItem=__decorate([core_1.Component({selector:"object-tab-container-item",template:"<div #container></div>",providers:[services_1.fielderrorgrouping]}),__metadata("design:paramtypes",[services_1.metadata,services_1.fielderrorgrouping,services_1.model])],ObjectTabContainerItem)}();exports.ObjectTabContainerItem=ObjectTabContainerItem;var ObjectTabContainer=function(){function ObjectTabContainer(e,t,s){this.language=e,this.metadata=t,this.model=s,this.activeTab=0,this.activatedTabs=[0],this.tabs=[]}return ObjectTabContainer.prototype.ngOnInit=function(){if(0==this.getTabs().length)if(this.componentconfig&&this.componentconfig.componentset){var e=this.metadata.getComponentSetObjects(this.componentconfig.componentset);this.tabs=[];for(var t=0,s=e;t<s.length;t++){var i=s[t];this.tabs.push(i.componentconfig)}}else{var o=this.metadata.getComponentConfig("ObjectTabContainer",this.model.module);e=this.metadata.getComponentSetObjects(o.componentset);this.tabs=[];for(var l=0,a=e;l<a.length;l++){i=a[l];this.tabs.push(i.componentconfig)}}else this.tabs=this.getTabs()},ObjectTabContainer.prototype.getTabs=function(){try{return this.componentconfig.tabs?this.componentconfig.tabs:[]}catch(e){return[]}},ObjectTabContainer.prototype.setActiveTab=function(e){this.activatedTabs.push(e),this.activeTab=e},ObjectTabContainer.prototype.checkRenderTab=function(e){return e==this.activeTab||-1<this.activatedTabs.indexOf(e)||this.tabs&&this.tabs[e].forcerender},ObjectTabContainer=__decorate([core_1.Component({selector:"object-tab-container",template:'<div class="slds-tabs--default"><ul class="slds-tabs--default__nav" role="tablist"><li *ngFor="let tab of tabs; let tabindex = index" class="slds-tabs--default__item slds-text-title--caps" [ngClass]="{\'slds-active\': tabindex === activeTab}" role="presentation" (click)="setActiveTab(tabindex)"><a class="slds-tabs--default__link" href="javascript:void(0);" role="tab" aria-selected="false"><object-tab-container-item-header [tab]="tab"></object-tab-container-item-header></a></li></ul><ng-container *ngFor="let tab of tabs; let tabindex = index"><div *ngIf="checkRenderTab(tabindex)" class="slds-tabs--default__content" role="tabpanel" [ngClass]="{\'slds-show\': tabindex == activeTab, \'slds-hide\': tabindex != activeTab, \'slds-p-bottom--none\': componentconfig.noBottomPadding }"><object-tab-container-item *ngIf="tab.componentset" [componentset]="tab.componentset"></object-tab-container-item></div></ng-container></div>'}),__metadata("design:paramtypes",[services_1.language,services_1.metadata,services_1.model])],ObjectTabContainer)}();exports.ObjectTabContainer=ObjectTabContainer;var ObjectVerticalTabContainer=function(){function ObjectVerticalTabContainer(e,t,s){this.language=e,this.metadata=t,this.session=s,this.activeTab=0,this.activatedTabs=[0],this.componentconfig=[]}var e;return ObjectVerticalTabContainer.prototype.ngOnInit=function(){if(this.componentconfig&&this.componentconfig.componentset){var e=this.metadata.getComponentSetObjects(this.componentconfig.componentset);this.componentconfig=[];for(var t=0,s=e;t<s.length;t++){var i=s[t];i.componentconfig.adminonly&&!this.session.isAdmin||this.componentconfig.push(i.componentconfig)}}},ObjectVerticalTabContainer.prototype.getTabs=function(){try{return this.componentconfig?this.componentconfig:[]}catch(e){return[]}},ObjectVerticalTabContainer.prototype.setActiveTab=function(e){this.activatedTabs.push(e),this.activeTab=e},ObjectVerticalTabContainer.prototype.checkRenderTab=function(e){return e==this.activeTab||-1<this.activatedTabs.indexOf(e)||this.componentconfig&&this.componentconfig[e].forcerender},ObjectVerticalTabContainer.prototype.getDisplay=function(e){var t=this.tabscontainer.element.nativeElement.getBoundingClientRect();return e!==this.activeTab?{display:"none"}:{height:"calc(99.9vh - "+t.top+"px)"}},ObjectVerticalTabContainer.prototype.getTabsStyle=function(){return{height:"calc(99.9vh - "+this.tabscontainer.element.nativeElement.getBoundingClientRect().top+"px)",overflow:"auto","overflow-x":"hidden"}},ObjectVerticalTabContainer.prototype.showErrorsOnTab=function(e,t){this.componentconfig[e].hasErrors=t},__decorate([core_1.ViewChild("tabscontainer",{read:core_1.ViewContainerRef,static:!0}),__metadata("design:type","function"==typeof(e=void 0!==core_1.ViewContainerRef&&core_1.ViewContainerRef)?e:Object)],ObjectVerticalTabContainer.prototype,"tabscontainer",void 0),ObjectVerticalTabContainer=__decorate([core_1.Component({selector:"object-vertical-tab-container",template:'<div class="slds-vertical-tabs" style="border: none;"><ul #tabscontainer class="slds-vertical-tabs__nav slds-scrollable--y" [ngStyle]="getTabsStyle()" role="tablist" aria-orientation="vertical"><li *ngFor="let tab of getTabs(); let tabindex = index" (click)="setActiveTab(tabindex)" [ngClass]="{\'slds-is-active\': tabindex === activeTab}" class="slds-vertical-tabs__nav-item slds-text-title--caps" role="presentation"><a class="slds-vertical-tabs__link" href="javascript:void(0)" role="tab" tabindex="-1" aria-selected="false"><span class="slds-badge" *ngIf="tab.hasErrors" title="Invalid fields!">{{tab.hasErrors}}</span><object-vertical-tab-container-item-header [tab]="tab"></object-vertical-tab-container-item-header></a></li></ul><ng-container *ngFor="let tab of getTabs(); let tabindex = index"><div *ngIf="checkRenderTab(tabindex)" [ngStyle]="getDisplay(tabindex)" class="slds-vertical-tabs__content slds-scrollable--y slds-p-around--xx-small slds-show" role="tabpanel"><object-vertical-tab-container-item *ngIf="tab.componentset" [componentset]="tab.componentset" (taberrors)="showErrorsOnTab(tabindex,$event)"></object-vertical-tab-container-item></div></ng-container></div>',styles:[".slds-is-active {\n            font-weight: 600;\n            color: #3e3e3c;\n            border-right: 1px solid #dddbda;\n            border-left: 6px solid #CA1B21;\n        }\n        .slds-is-active a {\n            text-decoration: none !important\n        }",".slds-badge { font-weight: bold; background-color: #c00; color: #fff; padding: .125rem .4rem; }"]}),__metadata("design:paramtypes",[services_1.language,services_1.metadata,services_1.session])],ObjectVerticalTabContainer)}();exports.ObjectVerticalTabContainer=ObjectVerticalTabContainer;var ObjectVerticalTabContainerItem=function(){function ObjectVerticalTabContainerItem(e,t){this.metadata=e,this.fielderrorgroup=t,this.taberrors=new core_1.EventEmitter}var e;return ObjectVerticalTabContainerItem.prototype.ngOnInit=function(){var t=this;this.fielderrorgroup.change$.subscribe(function(e){t.taberrors.emit(e)})},ObjectVerticalTabContainerItem.prototype.ngAfterViewInit=function(){for(var e=function(t){s.metadata.addComponent(t.component,s.container).subscribe(function(e){e.instance.componentconfig=t.componentconfig})},s=this,t=0,i=this.metadata.getComponentSetObjects(this.componentset);t<i.length;t++){e(i[t])}},__decorate([core_1.ViewChild("container",{read:core_1.ViewContainerRef,static:!0}),__metadata("design:type","function"==typeof(e=void 0!==core_1.ViewContainerRef&&core_1.ViewContainerRef)?e:Object)],ObjectVerticalTabContainerItem.prototype,"container",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],ObjectVerticalTabContainerItem.prototype,"componentset",void 0),__decorate([core_1.Output(),__metadata("design:type",Object)],ObjectVerticalTabContainerItem.prototype,"taberrors",void 0),ObjectVerticalTabContainerItem=__decorate([core_1.Component({selector:"object-vertical-tab-container-item",template:"<div #container></div>",providers:[services_1.fielderrorgrouping]}),__metadata("design:paramtypes",[services_1.metadata,services_1.fielderrorgrouping])],ObjectVerticalTabContainerItem)}();exports.ObjectVerticalTabContainerItem=ObjectVerticalTabContainerItem;var ObjectVerticalTabContainerItemHeader=function(){function e(e){this.language=e,this.tab=[]}return Object.defineProperty(e.prototype,"displayName",{get:function(){return this.tab.name&&""!=this.tab.name},enumerable:!1,configurable:!0}),__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"tab",void 0),e=__decorate([core_1.Component({selector:"object-vertical-tab-container-item-header",template:'<ng-container *ngIf="displayName"><system-label [label]="tab.name"></system-label></ng-container>'}),__metadata("design:paramtypes",[services_1.language])],e)}();exports.ObjectVerticalTabContainerItemHeader=ObjectVerticalTabContainerItemHeader;var ObjectRelateContainer=function(){function ObjectRelateContainer(e,t){this.model=e,this.metadata=t,this.componentconfig={}}return ObjectRelateContainer.prototype.ngOnInit=function(){var e=this.metadata.getComponentConfig("ObjectRelateContainer",this.model.module);this.componentset=e.componentset},ObjectRelateContainer=__decorate([core_1.Component({template:'<system-componentset [componentset]="componentset"></system-componentset>'}),__metadata("design:paramtypes",[services_1.model,services_1.metadata])],ObjectRelateContainer)}();exports.ObjectRelateContainer=ObjectRelateContainer;var ObjectRelatedCardHeader=function(){function e(e,t,s,i){this.language=e,this.relatedmodels=t,this.model=s,this.metadata=i,this.componentconfig={},this.isopen=!0}return e.prototype.ngOnInit=function(){var e=this;this.componentconfig.collapsed&&setTimeout(function(){return e.isopen=!e.componentconfig.collapsed})},Object.defineProperty(e.prototype,"panelTitle",{get:function(){return this.componentconfig.title?this.language.getLabel(this.componentconfig.title):this.relatedmodels._linkName&&this.metadata.fieldDefs[this.relatedmodels.module][this.relatedmodels._linkName]&&this.metadata.fieldDefs[this.relatedmodels.module][this.relatedmodels._linkName].vname?this.language.getLabel(this.metadata.fieldDefs[this.relatedmodels.module][this.relatedmodels._linkName].vname):this.language.getModuleName(this.module)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"actionset",{get:function(){return this.componentconfig.actionset},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"module",{get:function(){return this.componentconfig.object},enumerable:!1,configurable:!0}),e.prototype.toggleOpen=function(e){e.stopPropagation(),this.isopen=!this.isopen},e.prototype.reload=function(){this.relatedmodels.getData()},__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"componentconfig",void 0),e=__decorate([core_1.Component({selector:"object-related-card-header",template:'<div class="slds-card__header slds-grid slds-grid--vertical-align-center"><header class="slds-media slds-media--center slds-has-flexi-truncate"><system-icon [module]="module" [size]="\'small\'"></system-icon><div class="slds-media__body slds-truncate slds-grid slds-grid--vertical-align-center"><h2><a href="javascript:void(0);" class="slds-text-link--reset"><span class="slds-text-heading--small">{{panelTitle}}<ng-container *ngIf="!relatedmodels.isloading">&nbsp;({{relatedmodels.count}})</ng-container></span></a></h2><system-utility-icon class="slds-m-horizontal--xx-small" *ngIf="relatedmodels.count > 0" icon="up" size="x-small" (click)="toggleOpen($event)" [@animateicon]="isopen? \'open\' : \'closed\'"></system-utility-icon></div></header><div #ngContent class="slds-m-left--x-small"><ng-content></ng-content></div><object-action-container *ngIf="actionset" [actionset]="actionset" class="slds-m-left--x-small"></object-action-container><div *ngIf="!relatedmodels.isloading && relatedmodels.count === 0" class="slds-m-left--x-small"><button class="slds-button slds-button_icon x-slds-m-right--medium" (click)="reload()"><system-button-icon icon="refresh"></system-button-icon></button></div></div>',animations:[animations_1.trigger("animateicon",[animations_1.state("open",animations_1.style({transform:"scale(1, 1)"})),animations_1.state("closed",animations_1.style({transform:"scale(1, -1)"})),animations_1.transition("open => closed",[animations_1.animate(".5s")]),animations_1.transition("closed => open",[animations_1.animate(".5s")])])]}),__metadata("design:paramtypes",[services_1.language,services_1.relatedmodels,services_1.model,services_1.metadata])],e)}();exports.ObjectRelatedCardHeader=ObjectRelatedCardHeader;var ObjectRelatedCardFooter=function(){function e(e,t,s,i,o){this.language=e,this.relatedmodels=t,this.model=s,this.router=i,this.navigationtab=o,this.module="",this.fieldset=void 0,this._displayitems=5,this.paginating=!1,this.componentid=this.model.utils.generateGuid()}var t;return e.prototype.ngOnInit=function(){this.fieldset=this.componentconfig.fieldset,this.module=this.componentconfig.object},Object.defineProperty(e.prototype,"displayitems",{get:function(){return this._displayitems},set:function(e){e!==this.displayitems&&(this.displayitems=e,this.relatedmodels.loaditems=e,this.relatedmodels.getData())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"canViewAll",{get:function(){return 0<this.relatedmodels.count&&this.relatedmodels.count>this.relatedmodels.items.length},enumerable:!1,configurable:!0}),e.prototype.canSetCount=function(){return this.relatedmodels.count>this.relatedmodels.items.length},e.prototype.showAll=function(){var e,t="";(null===(e=this.navigationtab)||void 0===e?void 0:e.tabid)&&(t="/tab/"+this.navigationtab.tabid),this.fieldset&&""!=this.fieldset?this.router.navigate([t+"/module/"+this.model.module+"/"+this.model.id+"/"+this.relatedmodels.relatedModule+"/"+this.relatedmodels._linkName+"/"+this.fieldset]):this.router.navigate([t+"/module/"+this.model.module+"/"+this.model.id+"/"+this.relatedmodels.relatedModule+"/"+this.relatedmodels._linkName])},e.prototype.reload=function(){var e=this;this.relatedmodels.offset=0,this.paginating=!0,this.relatedmodels.getData().subscribe(function(){return e.paginating=!1})},Object.defineProperty(e.prototype,"nextDisabled",{get:function(){return this.relatedmodels.offset+this.relatedmodels.loaditems>=this.relatedmodels.count},enumerable:!1,configurable:!0}),e.prototype.nextPage=function(){var e=this;this.nextDisabled||(this.relatedmodels.offset=this.relatedmodels.offset+this.relatedmodels.loaditems,this.paginating=!0,this.relatedmodels.getData(!0).subscribe(function(){return e.paginating=!1}))},e.prototype.lastPage=function(){var e=this;if(!this.nextDisabled){var t=Math.floor(this.relatedmodels.count/this.relatedmodels.loaditems)*this.relatedmodels.loaditems;this.relatedmodels.offset=t,this.paginating=!0,this.relatedmodels.getData(!0).subscribe(function(){return e.paginating=!1})}},Object.defineProperty(e.prototype,"previousDisabled",{get:function(){return 0==this.relatedmodels.offset},enumerable:!1,configurable:!0}),e.prototype.previousPage=function(){var e=this;this.previousDisabled||(this.relatedmodels.offset=this.relatedmodels.offset-this.relatedmodels.loaditems,this.relatedmodels.offset<0&&(this.relatedmodels.offset=0),this.paginating=!0,this.relatedmodels.getData(!0).subscribe(function(){return e.paginating=!1}))},e.prototype.firstPage=function(){var e=this;this.previousDisabled||(this.relatedmodels.offset=0,this.paginating=!0,this.relatedmodels.getData(!0).subscribe(function(){return e.paginating=!1}))},Object.defineProperty(e.prototype,"page",{get:function(){return this.relatedmodels.offset/this.relatedmodels.loaditems+1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pages",{get:function(){return Math.floor(this.relatedmodels.count/this.relatedmodels.loaditems)+1},enumerable:!1,configurable:!0}),__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"componentconfig",void 0),e=__decorate([core_1.Component({selector:"object-related-card-footer",template:'<footer class="slds-card__footer"><div class="slds-grid slds-grid_vertical-align-center"><div class="slds-size--1-of-3 slds-text-align--left"><div *ngIf="relatedmodels.count > relatedmodels.loaditems && canViewAll" class="slds-grid slds-grid--vertical-align-center"><button [disabled]="previousDisabled || paginating" class="slds-button slds-button_icon" (click)="firstPage()"><system-button-icon icon="jump_to_left"></system-button-icon></button> <button [disabled]="previousDisabled || paginating" class="slds-button slds-button_icon" (click)="previousPage()"><system-button-icon icon="chevronleft"></system-button-icon></button><div class="slds-p-horizontal--xx-small slds-grid slds-grid--vertical-align-center slds-gutters_direct-xxx-small"><system-label class="slds-col" label="LBL_PAGE"></system-label><div class="slds-col">{{page}}</div><system-label class="slds-col" label="LBL_OF"></system-label><div class="slds-col">{{pages}}</div></div><button [disabled]="nextDisabled || paginating" class="slds-button slds-button_icon" (click)="nextPage()"><system-button-icon icon="chevronright"></system-button-icon></button> <button [disabled]="nextDisabled || paginating" class="slds-button slds-button_icon" (click)="lastPage()"><system-button-icon icon="jump_to_right"></system-button-icon></button></div></div><div class="slds-size--1-of-3 slds-text-align_center"><a *ngIf="canViewAll" href="javascript:void(0);" (click)="showAll()"><system-label label="LBL_VIEWALL"></system-label></a></div><div class="slds-size--1-of-3 slds-text-align--right"><button [disabled]="paginating" class="slds-button slds-button_icon" (click)="reload()"><system-button-icon icon="refresh"></system-button-icon></button></div></div></footer>'}),__metadata("design:paramtypes",[services_1.language,services_1.relatedmodels,services_1.model,"function"==typeof(t=void 0!==router_1.Router&&router_1.Router)?t:Object,services_1.navigationtab])],e)}();exports.ObjectRelatedCardFooter=ObjectRelatedCardFooter;var ObjectRelatedCard=function(){function e(e,t,s,i){this.language=e,this.metadata=t,this.relatedmodels=s,this.model=i}return Object.defineProperty(e.prototype,"module",{get:function(){return this.componentconfig.object},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hidden",{get:function(){return!this.checkModelState()||!this.aclAccess()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isloading",{get:function(){return this.relatedmodels.isloading},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isopen",{get:function(){return!(this.cardheader&&!this.cardheader.isopen)&&(0<this.relatedmodels.count||this.isloading)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"paginating",{get:function(){return!(this.relatedmodels.isloading||!this.cardfooter||!this.cardfooter.paginating)},enumerable:!1,configurable:!0}),e.prototype.checkModelState=function(){return!(this.componentconfig.requiredmodelstate&&!this.model.checkModelState(this.componentconfig.requiredmodelstate))},e.prototype.aclAccess=function(){if(this.module){var e=""!=this.relatedmodels.linkName?this.relatedmodels.linkName:this.relatedmodels.relatedModule.toLowerCase();return(this.metadata.checkModuleAcl(this.module,"list")||this.metadata.checkModuleAcl(this.module,"listrelated"))&&this.model.checkFieldAccess(e)}return!1},__decorate([core_1.ViewChild(ObjectRelatedCardHeader,{static:!1}),__metadata("design:type",ObjectRelatedCardHeader)],e.prototype,"cardheader",void 0),__decorate([core_1.ViewChild(ObjectRelatedCardFooter,{static:!1}),__metadata("design:type",ObjectRelatedCardFooter)],e.prototype,"cardfooter",void 0),__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"componentconfig",void 0),e=__decorate([core_1.Component({selector:"object-related-card",template:'<div *ngIf="!hidden" class="slds-card slds-card_boundary slds-m-bottom--medium"><object-related-card-header [componentconfig]="componentconfig"></object-related-card-header><div @displaycard *ngIf="isopen"><div class="slds-card__body slds-size--1-of-1" [system-overlay-loading-spinner]="paginating"><ng-content></ng-content></div><object-related-card-footer [componentconfig]="componentconfig"></object-related-card-footer></div></div>',animations:[animations_1.trigger("displaycard",[animations_1.transition(":enter",[animations_1.style({opacity:0,height:"0px",overflow:"hidden"}),animations_1.animate(".5s",animations_1.style({height:"*",opacity:1})),animations_1.style({overflow:"unset"})]),animations_1.transition(":leave",[animations_1.style({overflow:"hidden"}),animations_1.animate(".5s",animations_1.style({height:"0px",opacity:0}))])])]}),__metadata("design:paramtypes",[services_1.language,services_1.metadata,services_1.relatedmodels,services_1.model])],e)}();exports.ObjectRelatedCard=ObjectRelatedCard;var ObjectRelatedList=function(){function ObjectRelatedList(e,t,s,i,o){this.language=e,this.metadata=t,this.relatedmodels=s,this.model=i,this.cdref=o,this.componentconfig={},this.listfields=[],this.editcomponentset="",this.hideactions=!1,this.loadsubscription=new rxjs_1.Subscription,this.loaded=!1}var e;return Object.defineProperty(ObjectRelatedList.prototype,"aclAccess",{get:function(){var e=""!=this.relatedmodels.linkName?this.relatedmodels.linkName:this.relatedmodels.relatedModule.toLowerCase();return(this.metadata.checkModuleAcl(this.relatedmodels.relatedModule,"listrelated")||this.metadata.checkModuleAcl(this.relatedmodels.relatedModule,"list"))&&this.model.checkFieldAccess(e)},enumerable:!1,configurable:!0}),ObjectRelatedList.prototype.ngOnInit=function(){var t=this;this.loadConfig(),this.initializeRelatedModelService(),this.loadsubscription=this.model.data$.subscribe(function(e){t.loadRelated()})},ObjectRelatedList.prototype.loadConfig=function(){var e=this.componentconfig.fieldset;this.listfields=this.metadata.getFieldSetFields(e),this.componentconfig.editcomponentset&&(this.editcomponentset=this.componentconfig.editcomponentset),this.hideactions=!!this.componentconfig.hideactions},ObjectRelatedList.prototype.initializeRelatedModelService=function(){this.relatedmodels.module=this.model.module,this.relatedmodels.id=this.model.id,this.relatedmodels.model=this.model,this.relatedmodels.relatedModule=this.componentconfig.object,this.componentconfig.linkEndPoint?this.relatedmodels.linkEndPoint=this.componentconfig.linkEndPoint:this.componentconfig.link&&(this.relatedmodels.linkName=this.componentconfig.link),this.componentconfig.sequencefield?this.relatedmodels.sequencefield=this.componentconfig.sequencefield:this.relatedmodels._linkName&&this.model.fields[this.relatedmodels._linkName]&&this.model.fields[this.relatedmodels._linkName].sequence_field&&(this.relatedmodels.sequencefield=this.model.fields[this.relatedmodels._linkName].sequence_field),this.componentconfig.sortfield&&(this.relatedmodels.sort.sortfield=this.componentconfig.sortfield,this.relatedmodels.sort.sortdirection=this.componentconfig.sortdirection?this.componentconfig.sortdirection:"ASC"),this.componentconfig.items&&(this.relatedmodels.loaditems=this.componentconfig.items),this.componentconfig.modulefilter&&(this.relatedmodels.modulefilter=this.componentconfig.modulefilter)},ObjectRelatedList.prototype.checkModelState=function(){return!(this.componentconfig.requiredmodelstate&&(_.isEmpty(this.model.data)||!this.model.checkModelState(this.componentconfig.requiredmodelstate)))},ObjectRelatedList.prototype.loadRelated=function(){this.loaded||!this.aclAccess||this.componentconfig.requiredmodelstate&&!this.checkModelState()||(this.loaded=!0,this.loadsubscription.unsubscribe(),this.relatedmodels.getData())},Object.defineProperty(ObjectRelatedList.prototype,"editable",{get:function(){try{return this.componentconfig.editable&&this.model.checkAccess("edit")}catch(e){return!1}},enumerable:!1,configurable:!0}),ObjectRelatedList.prototype.addSelectedItems=function(e){this.relatedmodels.addItems(e)},Object.defineProperty(ObjectRelatedList.prototype,"listitemactionset",{get:function(){return this.componentconfig&&this.componentconfig.listitemactionset?this.componentconfig.listitemactionset:""},enumerable:!1,configurable:!0}),__decorate([core_1.Input(),__metadata("design:type",Object)],ObjectRelatedList.prototype,"componentconfig",void 0),ObjectRelatedList=__decorate([core_1.Component({selector:"object-related-list",template:'<div *ngIf="aclAccess; else noaccess" class="slds-scrollable"><object-relatedlist-table [listfields]="listfields" [editable]="editable" [editcomponentset]="editcomponentset" [hideActions]="hideactions"></object-relatedlist-table></div><ng-template #noaccess><system-illustration-no-access></system-illustration-no-access></ng-template>',providers:[services_1.relatedmodels]}),__metadata("design:paramtypes",[services_1.language,services_1.metadata,services_1.relatedmodels,services_1.model,"function"==typeof(e=void 0!==core_1.ChangeDetectorRef&&core_1.ChangeDetectorRef)?e:Object])],ObjectRelatedList)}(),ObjectRelatedlistList=function(e){function ObjectRelatedlistList(){return null!==e&&e.apply(this,arguments)||this}return __extends(ObjectRelatedlistList,e),Object.defineProperty(ObjectRelatedlistList.prototype,"panelTitle",{get:function(){return this.componentconfig.title?this.language.getLabel(this.componentconfig.title):this.relatedmodels._linkName&&this.metadata.fieldDefs[this.relatedmodels.module][this.relatedmodels._linkName]&&this.metadata.fieldDefs[this.relatedmodels.module][this.relatedmodels._linkName].vname?this.language.getLabel(this.metadata.fieldDefs[this.relatedmodels.module][this.relatedmodels._linkName].vname):this.language.getModuleName(this.relatedmodels.module)},enumerable:!1,configurable:!0}),ObjectRelatedlistList=__decorate([core_1.Component({selector:"object-relatedlist-list",template:'<object-related-card [componentconfig]="componentconfig"><ng-container *ngIf="aclAccess; else noaccess"><div class="slds-border--top"><object-relatedlist-table [listfields]="listfields" [editable]="editable" [editcomponentset]="editcomponentset" [sequencefield]="componentconfig.sequencefield" [listitemactionset]="listitemactionset"></object-relatedlist-table></div></ng-container><ng-template #noaccess><system-illustration-no-access></system-illustration-no-access></ng-template></object-related-card>',providers:[services_1.relatedmodels]})],ObjectRelatedlistList)}(exports.ObjectRelatedList=ObjectRelatedList);exports.ObjectRelatedlistList=ObjectRelatedlistList;var ObjectRelatedListItem=function(){function ObjectRelatedListItem(e,t,s,i,o,l,a,n,d){this.metadata=e,this.footer=t,this.model=s,this.relatedmodels=i,this.view=o,this.router=l,this.language=a,this.layout=n,this.modalservice=d,this.listfields=[],this.listitem={},this.module="",this.editable=!1,this.editcomponentset="",this.hideActions=!1,this.customEditActions=[],this.customActions=[],this.expanded=!1,this.componentconfig={}}var e;return ObjectRelatedListItem.prototype.ngOnInit=function(){this.view.displayLabels=!1,this.view.isEditable=this.editable,this.model.module=this.module,this.model.id=this.listitem.id,this.model.data=this.model.utils.backendModel2spice(this.module,this.listitem),this.componentconfig=this.metadata.getComponentConfig("ObjectRelatedListItem",this.model.module)},Object.defineProperty(ObjectRelatedListItem.prototype,"actionset",{get:function(){return this.listitemactionset?this.listitemactionset:this.componentconfig.actionset},enumerable:!1,configurable:!0}),ObjectRelatedListItem.prototype.navigateDetail=function(){this.router.navigate(["/module/"+this.model.module+"/"+this.model.id])},ObjectRelatedListItem.prototype.handleAction=function(e){var s=this;switch(e){case"canceledit":this.model.cancelEdit(),this.view.setViewMode();break;case"edit":this.metadata.addComponentDirect("ObjectEditModalWReference",this.footer.footercontainer).subscribe(function(t){t.instance.model.module=s.module,t.instance.model.id=s.model.id,t.instance.model.data=s.model.data,s.editcomponentset&&""!=s.editcomponentset&&(t.instance.componentSet=s.editcomponentset),s.model.startEdit(),t.instance.modalAction$.subscribe(function(e){!1===e?(t.destroy(),s.model.cancelEdit()):(s.relatedmodels.setItem(s.model.data),s.model.endEdit(),t.destroy())})});break;case"remove":this.modalservice.confirm(this.language.getLabel("QST_REMOVE_ENTRY"),this.language.getLabel("QST_REMOVE_ENTRY",null,"short")).subscribe(function(e){e&&s.relatedmodels.deleteItem(s.model.id)});break;case"saverelated":if(this.model.validate()){var t=this.model.getDirtyFields();t.date_modified=this.model.getField("date_modified"),t.id=this.model.id,this.relatedmodels.setItem(t),this.model.endEdit(),this.view.setViewMode()}}},ObjectRelatedListItem.prototype.toggleexpanded=function(e){e.stopPropagation(),this.expanded=!this.expanded},Object.defineProperty(ObjectRelatedListItem.prototype,"isexpanded",{get:function(){return"small"!=this.layout.screenwidth||this.expanded},enumerable:!1,configurable:!0}),Object.defineProperty(ObjectRelatedListItem.prototype,"expandicon",{get:function(){return this.expanded?"chevronup":"chevrondown"},enumerable:!1,configurable:!0}),__decorate([core_1.Input(),__metadata("design:type",Array)],ObjectRelatedListItem.prototype,"listfields",void 0),__decorate([core_1.Input(),__metadata("design:type",Object)],ObjectRelatedListItem.prototype,"listitem",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],ObjectRelatedListItem.prototype,"module",void 0),__decorate([core_1.Input(),__metadata("design:type",Boolean)],ObjectRelatedListItem.prototype,"editable",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],ObjectRelatedListItem.prototype,"editcomponentset",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],ObjectRelatedListItem.prototype,"listitemactionset",void 0),__decorate([core_1.Input(),__metadata("design:type",Boolean)],ObjectRelatedListItem.prototype,"hideActions",void 0),ObjectRelatedListItem=__decorate([core_1.Component({selector:"[object-related-list-item]",template:'<td class="slds-hide--medium"><div class="slds-grid slds-grid--vertical-align-center slds-p-around--xx-small"><div class="slds-text-align--left slds-truncate slds-grow" (click)="navigateDetail()">{{model.data.summary_text}}</div><system-utility-icon [icon]="expandicon" size="xx-small" (click)="toggleexpanded($event)"></system-utility-icon></div></td><ng-container *ngIf="isexpanded"><td *ngFor="let item of listfields" scope="row" [attr.data-label]="language.getFieldDisplayName(model.module, item.field)"><field-container [field]="item.field" [fieldconfig]="item.fieldconfig" [fielddisplayclass]="\'slds-truncate\'"></field-container></td><td *ngIf="!hideActions" role="gridcell" class="slds-cell-shrink"><object-action-menu [buttonsize]="\'x-small\'" [actionset]="actionset"></object-action-menu></td></ng-container>',providers:[services_1.model,services_1.view]}),__metadata("design:paramtypes",[services_1.metadata,services_1.footer,services_1.model,services_1.relatedmodels,services_1.view,"function"==typeof(e=void 0!==router_1.Router&&router_1.Router)?e:Object,services_1.language,services_1.layout,services_1.modal])],ObjectRelatedListItem)}();exports.ObjectRelatedListItem=ObjectRelatedListItem;var ObjectRelatedlistTiles=function(n){function ObjectRelatedlistTiles(e,t,s,i,o,l){var a=n.call(this,e,t,s,i,o)||this;return a.language=e,a.metadata=t,a.relatedmodels=s,a.model=i,a.cdref=o,a.el=l,a}var e,t,s;return __extends(ObjectRelatedlistTiles,n),Object.defineProperty(ObjectRelatedlistTiles.prototype,"getTileWidthClass",{get:function(){var e,t;return(null===(e=this.mainContainer)||void 0===e?void 0:e.element.nativeElement.clientWidth)<=550?"slds-size--1-of-1":(null===(t=this.mainContainer)||void 0===t?void 0:t.element.nativeElement.clientWidth)<=730?"slds-size--1-of-2":"slds-size--1-of-3"},enumerable:!1,configurable:!0}),__decorate([core_1.ViewChild("mainContainer",{read:core_1.ViewContainerRef,static:!0}),__metadata("design:type","function"==typeof(e=void 0!==core_1.ViewContainerRef&&core_1.ViewContainerRef)?e:Object)],ObjectRelatedlistTiles.prototype,"mainContainer",void 0),ObjectRelatedlistTiles=__decorate([core_1.Component({selector:"object-relatedlist-tiles",template:'<object-related-card [componentconfig]="componentconfig"><div #mainContainer class="slds-card__body--inner slds-grid slds-wrap slds-grid--pull-padded"><ng-container *ngIf="aclAccess; else noaccess"><div *ngFor="let relateditem of relatedmodels.items" [ngClass]="getTileWidthClass" class="slds-p-around--xx-small"><div class="slds-box slds-box--x-small slds-media slds-card__tile" object-related-card-tile [fieldset]="componentconfig.fieldset" [data]="relateditem"></div></div></ng-container></div><ng-template #noaccess><system-illustration-no-access></system-illustration-no-access></ng-template></object-related-card>',providers:[services_1.relatedmodels]}),__metadata("design:paramtypes",[services_1.language,services_1.metadata,services_1.relatedmodels,services_1.model,"function"==typeof(t=void 0!==core_1.ChangeDetectorRef&&core_1.ChangeDetectorRef)?t:Object,"function"==typeof(s=void 0!==core_1.ElementRef&&core_1.ElementRef)?s:Object])],ObjectRelatedlistTiles)}(ObjectRelatedList);exports.ObjectRelatedlistTiles=ObjectRelatedlistTiles;var ObjectRelatedCardTile=function(){function ObjectRelatedCardTile(e,t,s,i,o,l){this.model=e,this.relatedmodels=t,this.view=s,this.language=i,this.metadata=o,this.router=l,this.data={},this.fieldset="",this.fields=[],this.view.displayLabels=!1}var e;return ObjectRelatedCardTile.prototype.ngOnInit=function(){this.initalizeModel(),this.loadConfig()},ObjectRelatedCardTile.prototype.initalizeModel=function(){this.model.module=this.relatedmodels.relatedModule,this.model.id=this.data.id,this.model.data=this.data},ObjectRelatedCardTile.prototype.loadConfig=function(){var e=this.metadata.getComponentConfig("ObjectRelatedCardTile",this.model.module);this.actionset=e.actionset,this.fields=this.metadata.getFieldSetFields(this.fieldset)},__decorate([core_1.Input(),__metadata("design:type",Object)],ObjectRelatedCardTile.prototype,"data",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],ObjectRelatedCardTile.prototype,"fieldset",void 0),ObjectRelatedCardTile=__decorate([core_1.Component({selector:"[object-related-card-tile]",template:'<system-icon [module]="model.module" [size]="\'small\'"></system-icon><div class="slds-media__body"><div class="slds-grid slds-grid--align-spread slds-has-flexi-truncate"><h3 class="slds-truncate slds-text-heading--small slds-p-top--xxx-small slds-m-bottom--small" system-model-popover>{{data.summary_text}}</h3><div class="slds-shrink-none slds-show--medium"><object-action-menu [buttonsize]="\'x-small\'" [actionset]="actionset"></object-action-menu></div></div><div class="slds-tile__detail slds-text-body--small"><dl class="slds-dl--horizontal"><ng-container *ngFor="let field of fields"><dt class="slds-dl--horizontal__label slds-truncate"><system-label-fieldname [module]="model.module" [field]="field.field"></system-label-fieldname></dt><dd class="slds-dl--horizontal__detail slds-tile__meta"><field-container [field]="field.field" [fieldconfig]="field.fieldconfig" [fielddisplayclass]="\'slds-truncate\'"></field-container></dd></ng-container></dl></div><object-action-menu class="slds-hide--medium" [buttonsize]="\'x-small\'" [actionset]="actionset"></object-action-menu></div>',providers:[services_1.model,services_1.view]}),__metadata("design:paramtypes",[services_1.model,services_1.relatedmodels,services_1.view,services_1.language,services_1.metadata,"function"==typeof(e=void 0!==router_1.Router&&router_1.Router)?e:Object])],ObjectRelatedCardTile)}();exports.ObjectRelatedCardTile=ObjectRelatedCardTile;var ObjectRelatedlistFiles=function(){function ObjectRelatedlistFiles(e,t,s,i,o,l,a,n,d,r,c){this.modelattachments=e,this.language=t,this.model=s,this.renderer=i,this.toast=o,this.footer=l,this.metadata=a,this.backend=n,this.broadcast=d,this.configurationService=r,this.modalservice=c,this.files=[],this.filteredFiles=[],this.componentconfig={},this.isopen=!0,this.selectedCategoryId="",this.filterTerm="",this.categories=[],this.subscriptions=new rxjs_1.Subscription}var e,t;return ObjectRelatedlistFiles.prototype.ngAfterViewInit=function(){var t=this;this.setModelData(),setTimeout(function(){return t.loadFiles()},10),this.subscriptions.add(this.broadcast.message$.subscribe(function(e){return t.handleMessage(e)}))},ObjectRelatedlistFiles.prototype.loadCategories=function(){var t=this;if(this.configurationService.getData("spiceattachments_categories"))return this.categories=this.configurationService.getData("spiceattachments_categories");this.backend.getRequest("common/spiceattachments/categories/"+this.model.module).subscribe(function(e){e&&Array.isArray(e)&&(t.categories=e,t.configurationService.setData("spiceattachments_categories",e))})},ObjectRelatedlistFiles.prototype.handleMessage=function(e){"model.merge"==e.messagetype&&e.messagedata.module==this.model.module&&e.messagedata.id==this.model.id&&this.loadFiles()},ObjectRelatedlistFiles.prototype.loadFiles=function(){var t=this;0<this.files.length&&this.doupload(this.files),this.modelattachments.getAttachments().subscribe(function(e){t.filteredFiles=e,t.loadCategories()})},ObjectRelatedlistFiles.prototype.setModelData=function(){this.modelattachments.module=this.model.module,this.modelattachments.id=this.model.id},ObjectRelatedlistFiles.prototype.toggleOpen=function(e){e.stopPropagation(),this.isopen=!this.isopen},ObjectRelatedlistFiles.prototype.preventdefault=function(e){(1<=e.dataTransfer.items.length&&this.hasOneItemsFile(e.dataTransfer.items)||0<e.dataTransfer.files.length)&&(e.preventDefault(),e.stopPropagation(),e.dataTransfer.dropEffect="copy")},ObjectRelatedlistFiles.prototype.hasOneItemsFile=function(e){for(var t=0,s=e;t<s.length;t++){if("file"==s[t].kind)return!0}return!1},ObjectRelatedlistFiles.prototype.onDrop=function(e){this.preventdefault(e);var t=e.dataTransfer.files;t&&1<=t.length&&this.doupload(t)},ObjectRelatedlistFiles.prototype.fileDrop=function(e){e&&1<=e.length&&this.doupload(e)},ObjectRelatedlistFiles.prototype.selectFile=function(){var e=new MouseEvent("click",{bubbles:!0});this.fileupload.element.nativeElement.dispatchEvent(e)},ObjectRelatedlistFiles.prototype.uploadFile=function(){var e=this.fileupload.element.nativeElement.files;this.doupload(e)},ObjectRelatedlistFiles.prototype.doupload=function(e){this.modelattachments.uploadAttachmentsBase64(e)},ObjectRelatedlistFiles.prototype.setFilteredFiles=function(e,t){var s=this;switch(e){case"category":this.selectedCategoryId=t,this.filteredFiles="*"==t?this.modelattachments.files:this.modelattachments.files.filter(function(e){return!!e.category_ids&&e.category_ids.includes(t)});break;case"input":var i=t.toLowerCase();this.filterTerm=t,window.clearTimeout(this.filterTimeout),this.filterTimeout=window.setTimeout(function(){s.filteredFiles=0==t.length?s.modelattachments.files:s.modelattachments.files.filter(function(e){return e.filename.toLowerCase().includes(i)||!!e.display_name&&e.display_name.toLowerCase().includes(i)||!!e.text&&e.text.toLowerCase().includes(i)})},600)}},ObjectRelatedlistFiles.prototype.toggleBigThumbnail=function(){this.componentconfig||(this.componentconfig={}),this.componentconfig.bigThumbnail=!this.componentconfig.bigThumbnail},__decorate([core_1.Input(),__metadata("design:type",Array)],ObjectRelatedlistFiles.prototype,"files",void 0),__decorate([core_1.ViewChild("fileupload",{read:core_1.ViewContainerRef,static:!0}),__metadata("design:type","function"==typeof(e=void 0!==core_1.ViewContainerRef&&core_1.ViewContainerRef)?e:Object)],ObjectRelatedlistFiles.prototype,"fileupload",void 0),ObjectRelatedlistFiles=__decorate([core_1.Component({selector:"object-relatedlist-files",template:'<div class="slds-card slds-card_boundary slds-m-bottom--medium" (system-drop-file)="fileDrop($event)"><div class="slds-card__header slds-grid"><header class="slds-media slds-media--center slds-has-flexi-truncate"><system-icon [icon]="\'file\'" [size]="\'small\'"></system-icon><div class="slds-media__body slds-truncate slds-grid slds-grid--vertical-align-center"><h2><a href="javascript:void(0);" class="slds-text-link--reset"><span class="slds-text-heading--small"><system-label label="LBL_FILES"></system-label> ({{modelattachments.files.length}})</span></a></h2><system-utility-icon *ngIf="modelattachments.files.length > 0" class="slds-m-horizontal--xx-small" icon="up" size="x-small" (click)="toggleOpen($event)" [@animateicon]="isopen? \'open\' : \'closed\'"></system-utility-icon></div><button class="slds-button slds-button--icon-border slds-m-right--xx-small" (click)="toggleBigThumbnail()" system-title="LBL_TOGGLE_BIG_THUMBNAIL"><system-utility-icon size="x-small" [icon]="componentconfig?.bigThumbnail ? \'file\' : \'ad_set\'"></system-utility-icon></button><div class="slds-form-element slds-grid slds-grid--vertical-align-center"><div class="slds-form-element__control slds-input-has-icon slds-input-has-icon_left-right"><system-utility-icon icon="search" addclasses="slds-input__icon slds-input__icon--left"></system-utility-icon><input type="text" class="slds-input" [ngModel]="filterTerm" (ngModelChange)="setFilteredFiles(\'input\', $event)"></div></div><div class="slds-form-element slds-p-horizontal--x-small slds-grid slds-grid--vertical-align-center"><div system-title="LBL_CATEGORIES" class="slds-m-horizontal--xx-small"><system-utility-icon icon="tile_card_list" size="x-small"></system-utility-icon></div><div class="slds-select_container slds-m-vertical--xx-small"><select class="slds-select" [ngModel]="selectedCategoryId" (ngModelChange)="setFilteredFiles(\'category\', $event)" style="min-width: 70px;"><option value="*"><system-label label="LBL_ALL"></system-label></option><option *ngFor="let category of categories" [value]="category.id"><system-label [label]="category.label"></system-label></option></select></div></div></header><div class="slds-no-flex slds-button-group" role="group"><button *ngIf="!componentconfig.disableupload" class="slds-button slds-button--icon-border slds-m-vertical--xx-small" (click)="selectFile()" system-title="LBL_UPLOAD"><system-utility-icon size="x-small" icon="upload"></system-utility-icon></button></div><input #fileupload style="display:none" type="file" multiple (click)="fileupload.value = null" (change)="uploadFile()"></div><div class="slds-card__body" @displaycard *ngIf="isopen"><div class="slds-card__body--inner slds-grid slds-wrap slds-grid--pull-padded"><div object-related-card-file *ngFor="let file of filteredFiles" [file]="file" [bigThumbnail]="componentconfig?.bigThumbnail" class="slds-tile slds-card__tile slds-p-horizontal--small slds-hint-parent"></div></div><div *ngIf="modelattachments.loading" class="slds-p-around--large slds-align--absolute-center"><system-spinner></system-spinner></div></div></div>',providers:[services_1.modelattachments],animations:[animations_1.trigger("animateicon",[animations_1.state("open",animations_1.style({transform:"scale(1, 1)"})),animations_1.state("closed",animations_1.style({transform:"scale(1, -1)"})),animations_1.transition("open => closed",[animations_1.animate(".5s")]),animations_1.transition("closed => open",[animations_1.animate(".5s")])]),animations_1.trigger("displaycard",[animations_1.transition(":enter",[animations_1.style({opacity:0,height:"0px",overflow:"hidden"}),animations_1.animate(".5s",animations_1.style({height:"*",opacity:1})),animations_1.style({overflow:"unset"})]),animations_1.transition(":leave",[animations_1.style({overflow:"hidden"}),animations_1.animate(".5s",animations_1.style({height:"0px",opacity:0}))])])]}),__metadata("design:paramtypes",[services_1.modelattachments,services_1.language,services_1.model,"function"==typeof(t=void 0!==core_1.Renderer2&&core_1.Renderer2)?t:Object,services_1.toast,services_1.footer,services_1.metadata,services_1.backend,services_1.broadcast,services_1.configurationService,services_1.modal])],ObjectRelatedlistFiles)}();exports.ObjectRelatedlistFiles=ObjectRelatedlistFiles;var ObjectRelatedCardFile=function(){function e(e,t,s,i,o,l){this.modelattachments=e,this.userpreferences=t,this.modal=s,this.toast=i,this.helper=o,this.injector=l,this.file={},this.bigThumbnail=!1}var t;return Object.defineProperty(e.prototype,"humanFileSize",{get:function(){return this.modelattachments.humanFileSize(this.file.filesize)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"filedate",{get:function(){return this.file.date?this.file.date.format(this.userpreferences.getDateFormat()):""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uploading",{get:function(){return this.file.hasOwnProperty("uploadprogress")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"progressbarstyle",{get:function(){return{width:this.file.uploadprogress+"%"}},enumerable:!1,configurable:!0}),e.prototype.downloadFile=function(){this.uploading||this.modelattachments.downloadAttachment(this.file.id,this.file.filename)},e.prototype.previewFile=function(){var s=this;if(this.uploading)this.toast.sendToast("upload still in progress","info");else if(this.file.file_mime_type){var e=this.file.file_mime_type.toLowerCase().split("/");switch(e[0].trim()){case"image":this.modal.openModal("SystemImagePreviewModal").subscribe(function(t){t.instance.imgname=s.file.filename,t.instance.imgtype=s.file.file_mime_type.toLowerCase(),s.modelattachments.getAttachment(s.file.id).subscribe(function(e){t.instance.imgsrc="data:"+s.file.file_mime_type.toLowerCase()+";base64,"+e},function(e){t.instance.loadingerror=!0})});break;case"text":case"audio":case"video":this.modal.openModal("SystemObjectPreviewModal").subscribe(function(t){t.instance.name=s.file.filename,t.instance.type=s.file.file_mime_type.toLowerCase(),s.modelattachments.getAttachment(s.file.id).subscribe(function(e){t.instance.data=atob(e)},function(e){t.instance.loadingerror=!0})});break;case"application":switch(e[1]){case"pdf":this.modal.openModal("SystemObjectPreviewModal").subscribe(function(t){t.instance.name=s.file.filename,t.instance.type=s.file.file_mime_type.toLowerCase(),s.modelattachments.getAttachment(s.file.id).subscribe(function(e){t.instance.data=atob(e)},function(e){t.instance.loadingerror=!0})});break;default:switch(this.file.filename.split(".").splice(-1,1)[0].toLowerCase()){case"msg":this.modal.openModal("EmailPreviewModal",!0,this.injector).subscribe(function(e){e.instance.name=s.file.filename,e.instance.type=s.file.file_mime_type.toLowerCase(),e.instance.file=s.file});break;default:this.downloadFile()}}break;default:this.downloadFile()}}},__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"file",void 0),__decorate([core_1.Input(),__metadata("design:type",Boolean)],e.prototype,"bigThumbnail",void 0),e=__decorate([core_1.Component({selector:"[object-related-card-file]",template:'<div *ngIf="bigThumbnail; else smallThumbnailContainer" class="slds-file slds-file_card slds-has-title" style="width: 300px"><figure style="height: 300px"><a (click)="previewFile()" href="javascript:void(0)" class="slds-file__crop" style="padding-top: 245px"><img *ngIf="file.thumbnail" [src]="\'data:image/jpg;base64,\' + file.thumbnail"></a><figcaption class="slds-file__title slds-file__title_card slds-file-has-actions" style="height: 55px"><div class="slds-media slds-media_small slds-media_center slds-size--1-of-1"><div class="slds-media__figure slds-line-height_reset"><system-file-icon [filename]="file.filename" divClass [filemimetype]="file.file_mime_type" size="\'small\'"></system-file-icon></div><div class="slds-media__body"><div *ngIf="!!file.display_name" (click)="previewFile()" class="slds-file__text slds-truncate" [system-title]="file.display_name">{{file.display_name}}</div><div *ngIf="!file.display_name" (click)="previewFile()" class="slds-file__text slds-truncate" [system-title]="file.filename">{{file.filename}}</div><div *ngIf="!uploading" class="slds-tile__detail slds-text-body--small"><ul class="slds-list--horizontal slds-has-dividers--left"><li [system-title]="filedate" class="slds-item">{{filedate}}</li><li [system-title]="humanFileSize" class="slds-item">{{humanFileSize}}</li></ul><div *ngIf="!!file.display_name" [system-title]="file.filename" class="slds-text-color--inverse-weak slds-truncate">{{file.filename}}</div></div><div *ngIf="uploading" class="slds-grid slds-grid_vertical-align-center slds-grid--align-spread slds-has-flexi-truncate"><div class="slds-progress-bar"><span class="slds-progress-bar__value" [ngStyle]="progressbarstyle"><span class="slds-assistive-text">Progress: 25%</span></span></div><div class="slds-text-align--right" style="width: 50px;">{{file.uploadprogress}} %</div></div></div></div></figcaption></figure><div *ngIf="!uploading" class="slds-file__actions-menu"><object-file-action-menu [file]="file"></object-file-action-menu></div></div><ng-template #smallThumbnailContainer><div class="slds-media" style="width: 300px"><div style="width: 30px; height: 30px;" class="slds-m-right--x-small slds-align--absolute-center"><system-file-icon *ngIf="!file.thumbnail" [filename]="file.filename" divClass [filemimetype]="file.file_mime_type" size="\'small\'"></system-file-icon><div *ngIf="file.thumbnail"><img [src]="\'data:image/jpg;base64,\' + file.thumbnail"></div></div><div class="slds-media__body"><div class="slds-grid slds-grid_vertical-align-center slds-grid--align-spread slds-has-flexi-truncate"><h3 class="slds-truncate slds-text-heading--x-small slds-p-right--xxx-small" [system-title]="file.text" (click)="previewFile()"><a *ngIf="!!file.display_name; else fileNameContainer" href="javascript:void(0);">{{file.display_name}}</a><ng-template #fileNameContainer><a href="javascript:void(0);">{{file.filename}}</a></ng-template></h3><div *ngIf="!uploading" class="slds-shrink-none"><object-file-action-menu [file]="file"></object-file-action-menu></div></div><div *ngIf="!uploading" class="slds-tile__detail slds-text-body--small"><ul class="slds-list--horizontal slds-has-dividers--left"><li [system-title]="filedate" class="slds-item">{{filedate}}</li><li [system-title]="humanFileSize" class="slds-item">{{humanFileSize}}</li></ul><div *ngIf="!!file.display_name" [system-title]="file.filename" class="slds-text-color--inverse-weak slds-truncate">{{file.filename}}</div></div><div *ngIf="uploading" class="slds-grid slds-grid_vertical-align-center slds-grid--align-spread slds-has-flexi-truncate"><div class="slds-progress-bar"><span class="slds-progress-bar__value" [ngStyle]="progressbarstyle"><span class="slds-assistive-text">Progress: 25%</span></span></div><div class="slds-text-align--right" style="width: 50px;">{{file.uploadprogress}} %</div></div></div></div></ng-template>'}),__metadata("design:paramtypes",[services_1.modelattachments,services_1.userpreferences,services_1.modal,services_1.toast,services_1.helper,"function"==typeof(t=void 0!==core_1.Injector&&core_1.Injector)?t:Object])],e)}();exports.ObjectRelatedCardFile=ObjectRelatedCardFile;var ObjectRelatedDuplicates=function(){function ObjectRelatedDuplicates(e,t){this.model=e,this.broadcast=t,this.componentconfig={},this.duplicates=[],this.duplicatecount=0,this.hideDuplicates=!0,this.isLoading=!1,this.subscriptions=new rxjs_1.Subscription}return ObjectRelatedDuplicates.prototype.ngOnInit=function(){var t=this;this.checkDuplicates(),this.subscriptions.add(this.broadcast.message$.subscribe(function(e){return t.handleMessage(e)}))},ObjectRelatedDuplicates.prototype.ngOnDestroy=function(){this.subscriptions.unsubscribe()},ObjectRelatedDuplicates.prototype.handleMessage=function(t){switch(t.messagetype){case"model.delete":if(t.messagedata.module==this.model.module){var e=this.duplicates.findIndex(function(e){return e.id==t.messagedata.id});0<=e&&(this.duplicates.splice(e,1),this.duplicatecount--)}}},ObjectRelatedDuplicates.prototype.toggleDuplicates=function(e){e.stopPropagation(),this.hideDuplicates=!this.hideDuplicates},ObjectRelatedDuplicates.prototype.checkDuplicates=function(){var t=this;this.isLoading=!0,this.model.duplicateCheck().subscribe(function(e){t.duplicates=e.records,t.duplicatecount=e.count,t.isLoading=!1},function(e){t.isLoading=!1})},Object.defineProperty(ObjectRelatedDuplicates.prototype,"iconStyle",{get:function(){return this.hideDuplicates?{transform:"scale(1, -1)"}:{}},enumerable:!1,configurable:!0}),ObjectRelatedDuplicates=__decorate([core_1.Component({selector:"object-relatedlist-duplicates",template:'<article class="slds-card slds-card_boundary slds-m-bottom--medium"><div class="slds-card__header slds-grid slds-grid--vertical-align-center"><header class="slds-media slds-media--center slds-has-flexi-truncate"><system-icon [icon]="\'merge\'" [size]="\'small\'" [sprite]="\'standard\'"></system-icon><div class="slds-grid slds-grid--vertical-align-center slds-media__body slds-truncate"><h2><a href="javascript:void(0);" class="slds-text-link--reset"><span class="slds-text-heading--small"><system-label label="LBL_DUPLICATES"></system-label> ({{duplicatecount}})</span></a></h2><system-utility-icon class="slds-m-horizontal--xx-small" *ngIf="duplicatecount > 0" icon="up" [ngStyle]="iconStyle" style="transition: .5s;" size="x-small" (click)="toggleDuplicates($event)"></system-utility-icon></div></header><object-merge-button [mergemodels]="duplicates"></object-merge-button><div class="slds-m-left--x-small"><button class="slds-button slds-button_icon x-slds-m-right--medium" [disabled]="isLoading" (click)="checkDuplicates()"><system-button-icon icon="refresh"></system-button-icon></button></div></div><div class="slds-card__body" [hidden]="hideDuplicates"><div class="slds-card__body--inner slds-grid slds-wrap slds-gutters_direct-xx-small"><object-related-duplicate-tile class="slds-size--1-of-1 slds-large-size--1-of-3 slds-col" *ngFor="let duplicate of duplicates" [system-model-provider]="{module:model.module, data:duplicate}"></object-related-duplicate-tile></div></div></article>'}),__metadata("design:paramtypes",[services_1.model,services_1.broadcast])],ObjectRelatedDuplicates)}();exports.ObjectRelatedDuplicates=ObjectRelatedDuplicates;var ObjectRelatedDuplicateTile=function(){function ObjectRelatedDuplicateTile(e,t,s,i,o){this.model=e,this.modal=t,this.view=s,this.language=i,this.metadata=o,this.enableLink=!0,this.enableButtonLink=!1,this.fieldset="",this.view.displayLabels=!1}return ObjectRelatedDuplicateTile.prototype.ngOnInit=function(){var e=this.metadata.getComponentConfig("ObjectRelatedDuplicateTile",this.model.module);this.fieldset=e.fieldset},ObjectRelatedDuplicateTile.prototype.getFields=function(){return this.metadata.getFieldSetFields(this.fieldset)},ObjectRelatedDuplicateTile.prototype.navigateDetails=function(){this.modal.closeAllModals(),this.model.goDetail()},__decorate([core_1.Input(),__metadata("design:type",Boolean)],ObjectRelatedDuplicateTile.prototype,"enableLink",void 0),__decorate([core_1.Input(),__metadata("design:type",Boolean)],ObjectRelatedDuplicateTile.prototype,"enableButtonLink",void 0),ObjectRelatedDuplicateTile=__decorate([core_1.Component({selector:"object-related-duplicate-tile",template:'<div class="slds-tile slds-box slds-media slds-card__tile slds-p-vertical--small slds-p-horizontal--small slds-hint-parent"><system-icon [module]="model.module" [size]="\'small\'"></system-icon><div class="slds-media__body"><div class="slds-grid slds-grid--align-spread slds-has-flexi-truncate"><h3 [system-model-popover]="enableLink" class="slds-truncate slds-text-heading--small slds-m-bottom--small"><span>{{model.data.summary_text}}</span></h3><button *ngIf="enableButtonLink" (click)="navigateDetails()" class="slds-button slds-button--icon-border"><system-button-icon icon="open"></system-button-icon></button></div><div class="slds-tile__detail slds-text-body--small"><dl class="slds-dl--horizontal"><ng-container *ngFor="let field of getFields()"><dt class="slds-dl--horizontal__label slds-truncate"><span class="slds-truncate"><system-label-fieldname [module]="model.module" [field]="field.field"></system-label-fieldname></span></dt><dd class="slds-dl--horizontal__detail slds-tile__meta"><field-container [field]="field.field" [fieldconfig]="field.fieldconfig" [fielddisplayclass]="\'slds-truncate\'"></field-container></dd></ng-container></dl></div></div></div>',providers:[services_1.view]}),__metadata("design:paramtypes",[services_1.model,services_1.modal,services_1.view,services_1.language,services_1.metadata])],ObjectRelatedDuplicateTile)}();exports.ObjectRelatedDuplicateTile=ObjectRelatedDuplicateTile;var ObjectRelatedlistAll=function(){function ObjectRelatedlistAll(e,t,s,i,o){this.navigationtab=e,this.language=t,this.metadata=s,this.model=i,this.relatedmodels=o,this.module="",this.id="",this.link="",this.related="",this.fieldset=void 0,this.componentconfig={},this.listfields=[]}var e;return ObjectRelatedlistAll.prototype.ngOnInit=function(){var t=this;this.module=this.navigationtab.activeRoute.params.module,this.link=this.navigationtab.activeRoute.params.link,this.related=this.navigationtab.activeRoute.params.related,this.fieldset=this.navigationtab.activeRoute.params.fieldset,this.model.module=this.module,this.model.id=this.navigationtab.activeRoute.params.id,this.model.getData(!0,"detailview").subscribe(function(e){t.navigationtab.setTabInfo({displaymodule:t.module,displayname:e.summary_text+" â¢ "+t.language.getModuleName(t.related)})}),this.componentconfig=this.metadata.getComponentConfig("ObjectRelatedlistAll",this.related),this.componentconfig.fieldset||(this.componentconfig=this.metadata.getModuleDefaultComponentConfigByUsage(this.related,"list")),_.isEmpty(this.componentconfig)&&console.warn("no componentconfig found for ObjectRelatedlistAll nor ObjectList with module "+this.related),this.listfields=this.metadata.getFieldSetFields(this.fieldset?this.fieldset:this.componentconfig.fieldset),_.isEmpty(this.listfields)&&console.warn("no fieldset to use!"),this.relatedmodels.module=this.model.module,this.relatedmodels.id=this.model.id,this.relatedmodels.relatedModule=this.related,this.relatedmodels.linkName=this.link,this.relatedmodels.loaditems=50,this.componentconfig.sequencefield?this.relatedmodels.sequencefield=this.componentconfig.sequencefield:this.model.fields[this.relatedmodels._linkName].sequence_field&&(this.relatedmodels.sequencefield=this.model.fields[this.relatedmodels._linkName].sequence_field),this.relatedmodels.getData()},ObjectRelatedlistAll.prototype.goModule=function(){this.model.goModule()},ObjectRelatedlistAll.prototype.goModel=function(){this.model.goDetail()},Object.defineProperty(ObjectRelatedlistAll.prototype,"listingTitle",{get:function(){return this.metadata.fieldDefs[this.model.module][this.link].vname?this.language.getLabel(this.metadata.fieldDefs[this.model.module][this.link].vname):this.language.getModuleName(this.related)},enumerable:!1,configurable:!0}),ObjectRelatedlistAll.prototype.onScroll=function(e){if(this.relatedmodels.canloadmore){var t=this.tablecontent.element.nativeElement;t.scrollTop+t.clientHeight+50>t.scrollHeight&&this.relatedmodels.getMoreData(25)}},__decorate([core_1.ViewChild("tablecontent",{read:core_1.ViewContainerRef,static:!0}),__metadata("design:type","function"==typeof(e=void 0!==core_1.ViewContainerRef&&core_1.ViewContainerRef)?e:Object)],ObjectRelatedlistAll.prototype,"tablecontent",void 0),ObjectRelatedlistAll=__decorate([core_1.Component({selector:"object-relatedlist-all",template:'<div class="slds-page-header"><nav role="navigation" aria-label="Breadcrumbs"><ol class="slds-breadcrumb slds-list_horizontal slds-wrap"><li class="slds-breadcrumb__item slds-text-title_caps"><a href="javascript:void(0);" (click)="goModule()"><system-label-modulename [module]="module"></system-label-modulename></a></li><li class="slds-breadcrumb__item slds-text-title_caps"><a href="javascript:void(0);" (click)="goModel()">{{model.data.summary_text}}</a></li></ol></nav><div class="slds-media"><div class="slds-media__body"><h1 class="slds-page-header__title slds-truncate slds-align-middle slds-p-vertical--xx-small">{{listingTitle}}</h1></div></div><div class="slds-col slds-align-bottom"><p class="slds-text-body--small">{{relatedmodels.items.length}} <system-label label="LBL_OF"></system-label> {{relatedmodels.count}} <system-label label="LBL_ITEMS"></system-label> â¢ <system-label label="LBL_SORTEDBY"></system-label> <system-label-fieldname [module]="related" [field]="relatedmodels.sortfield"></system-label-fieldname> â¢ <system-label label="LBL_LASTUPDATE"></system-label> {{relatedmodels.getLastLoadTime()}}</p></div></div><div system-to-bottom #tablecontent (scroll)="onScroll($event)"><object-relatedlist-table [listfields]="listfields"></object-relatedlist-table></div>',providers:[services_1.model,services_1.relatedmodels]}),__metadata("design:paramtypes",[services_1.navigationtab,services_1.language,services_1.metadata,services_1.model,services_1.relatedmodels])],ObjectRelatedlistAll)}();exports.ObjectRelatedlistAll=ObjectRelatedlistAll;var ObjectRelatedlistTable=function(){function e(e,t,s,i,o,l,a){this.language=e,this.metadata=t,this.relatedmodels=s,this.model=i,this.layout=o,this.backend=l,this.logger=a,this.listfields=[],this.editable=!1,this.editcomponentset=!1,this.sequencefield=null,this.hideActions=!1,this.noAccess=!1,this.nowDragging=!1,this.isSequenced=!1}return e.prototype.ngOnInit=function(){this.metadata.checkModuleAcl(this.relatedmodels.relatedModule,"listrelated")||this.metadata.checkModuleAcl(this.relatedmodels.relatedModule,"list")?(this.metadata.fieldDefs[this.model.module][this.relatedmodels._linkName]||this.relatedmodels.linkEndPoint?!this.sequencefield&&this.metadata.fieldDefs[this.model.module][this.relatedmodels._linkName].sequence_field&&(this.sequencefield=this.metadata.fieldDefs[this.model.module][this.relatedmodels._linkName].sequence_field):this.logger.error('Missing link or wrong link name ("'+this.relatedmodels._linkName+'")!'),this.sequencefield&&(this.isSequenced=!0)):this.noAccess=!0},Object.defineProperty(e.prototype,"isloading",{get:function(){return this.relatedmodels.isloading},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isSmall",{get:function(){return"small"===this.layout.screenwidth},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"module",{get:function(){return this.relatedmodels.relatedModule},enumerable:!1,configurable:!0}),e.prototype.isSortable=function(e){return!this.relatedmodels.sortBySequencefield&&!0===e.fieldconfig.sortable},e.prototype.setSortField=function(e){this.relatedmodels.sortBySequencefield||this.isSortable(e)&&(this.relatedmodels.sortfield=e.fieldconfig&&e.fieldconfig.sortfield?e.fieldconfig.sortfield:e.field)},e.prototype.getSortIcon=function(e){return this.relatedmodels.sortfield==(e.fieldconfig&&e.fieldconfig.sortfield?e.fieldconfig.sortfield:e.field)?"ASC"===this.relatedmodels.sort.sortdirection?"arrowdown":"arrowup":""},e.prototype.getIdOfRow=function(e,t){return t.id},e.prototype.drop=function(e){var t=this.relatedmodels.items.splice(e.previousIndex,1);this.relatedmodels.items.splice(e.currentIndex,0,t[0]);for(var s=[],i=0,o=0,l=this.relatedmodels.items;o<l.length;o++){var a=l[o];a[this.sequencefield]=i,s.push({id:a.id,sequence_number:i}),i++}this.backend.postRequest("module/"+this.relatedmodels.relatedModule,{},s)},e.prototype.dragStarted=function(e){this.nowDragging=!0,e.source.element.nativeElement.classList.add("slds-is-selected")},e.prototype.dragEnded=function(e){this.nowDragging=!1,e.source.element.nativeElement.classList.remove("slds-is-selected")},__decorate([core_1.Input(),__metadata("design:type",Array)],e.prototype,"listfields",void 0),__decorate([core_1.Input(),__metadata("design:type",Boolean)],e.prototype,"editable",void 0),__decorate([core_1.Input(),__metadata("design:type",Boolean)],e.prototype,"editcomponentset",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"sequencefield",void 0),__decorate([core_1.Input(),__metadata("design:type",Boolean)],e.prototype,"hideActions",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"listitemactionset",void 0),e=__decorate([core_1.Component({selector:"object-relatedlist-table",template:'<table *ngIf="!noAccess;else noaccess" class="slds-table slds-table--fixed-layout slds-table--header-fixed slds-max-medium-table_stacked-horizontal" [ngClass]="{\'slds-table--bordered\':!isSmall, \'slds-no-row-hover\':nowDragging}"><thead><tr class="slds-text-title--caps"><th *ngIf="isSequenced" class="slds-cell-shrink" scope="col"></th><ng-container *ngIf="isSequenced"><th *ngFor="let item of listfields" class="slds-resizable" scope="col"><span class="slds-th__action slds-truncate"><system-label-fieldname [module]="module" [field]="item.field" [fieldconfig]="item.fieldconfig" length="short"></system-label-fieldname></span></th></ng-container><ng-container *ngIf="!isSequenced"><th *ngFor="let item of listfields" class="slds-is-sortable slds-resizable" scope="col"><a href="javascript:void(0);" class="slds-th__action slds-text-link--reset" (click)="setSortField(item)"><span class="slds-truncate"><system-label-fieldname [module]="module" [field]="item.field" [fieldconfig]="item.fieldconfig" length="short"></system-label-fieldname></span><system-utility-icon *ngIf="isSortable(item)" [icon]="getSortIcon(item)" [size]="\'xx-small\'"></system-utility-icon></a></th></ng-container><th *ngIf="!hideActions" class="slds-cell-shrink" scope="col"></th></tr></thead><ng-container *ngIf="!isSequenced"><tbody><tr object-related-list-item *ngFor="let relateditem of relatedmodels.items" [module]="module" [editable]="editable" [editcomponentset]="editcomponentset" [listfields]="listfields" [listitem]="relateditem" [hideActions]="hideActions" [listitemactionset]="listitemactionset" class="slds-hint-parent"></tr></tbody></ng-container><ng-container *ngIf="isSequenced"><tbody class="dragboundary" cdkDropList (cdkDropListDropped)="drop($event)"><tr object-related-list-sequenced-item *ngFor="let relateditem of relatedmodels.items; let i=index; trackBy:getIdOfRow" cdkDrag cdkDragBoundary=".dragboundary" (cdkDragStarted)="dragStarted($event)" (cdkDragEnded)="dragEnded($event)" [module]="module" [listfields]="listfields" [listitem]="relateditem" class="slds-hint-parent"></tr></tbody></ng-container><tbody system-table-stencils *ngIf="isloading" [columns]="listfields.length" [select]="isSequenced" [tools]="!hideActions"></tbody></table><ng-template #noaccess><system-illustration-no-access></system-illustration-no-access></ng-template>'}),__metadata("design:paramtypes",[services_1.language,services_1.metadata,services_1.relatedmodels,services_1.model,services_1.layout,services_1.backend,services_1.loggerService])],e)}();exports.ObjectRelatedlistTable=ObjectRelatedlistTable;var ObjectRelatedlistSequenced=function(){function ObjectRelatedlistSequenced(){this.componentconfig={}}return __decorate([core_1.Input(),__metadata("design:type",Object)],ObjectRelatedlistSequenced.prototype,"componentconfig",void 0),ObjectRelatedlistSequenced=__decorate([core_1.Component({selector:"object-relatedlist-sequenced",template:'<object-relatedlist-list [componentconfig]="componentconfig"></object-relatedlist-list>'})],ObjectRelatedlistSequenced)}();exports.ObjectRelatedlistSequenced=ObjectRelatedlistSequenced;var ObjectRelatedListSequencedItem=function(){function e(e,t,s,i){this.model=e,this.view=t,this.router=s,this.language=i,this.listfields=[],this.listitem={},this.module="",this.view.isEditable=!1}var t;return e.prototype.ngOnInit=function(){this.view.displayLabels=!1,this.model.module=this.module,this.model.id=this.listitem.id,this.model.data=this.listitem},e.prototype.navigateDetail=function(){this.router.navigate(["/module/"+this.model.module+"/"+this.model.id])},__decorate([core_1.Input(),__metadata("design:type",Array)],e.prototype,"listfields",void 0),__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"listitem",void 0),__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"module",void 0),e=__decorate([core_1.Component({selector:"[object-related-list-sequenced-item]",template:'<td scope="row"><system-utility-icon cdkDragHandle [icon]="\'rows\'" [size]="\'x-small\'" style="cursor:move"></system-utility-icon></td><td *ngFor="let item of listfields" scope="row"><field-container [field]="item.field" [fieldconfig]="item.fieldconfig" [fielddisplayclass]="\'slds-truncate\'"></field-container></td><td role="gridcell" class="slds-cell-shrink" data-label="Actions"><object-action-menu [buttonsize]="\'x-small\'"></object-action-menu></td>',providers:[services_1.model,services_1.view]}),__metadata("design:paramtypes",[services_1.model,services_1.view,"function"==typeof(t=void 0!==router_1.Router&&router_1.Router)?t:Object,services_1.language])],e)}();exports.ObjectRelatedListSequencedItem=ObjectRelatedListSequencedItem;var ObjectFileActionMenu=function(){function e(e,t,s,i,o,l){this.broadcast=e,this.modelattachments=t,this.language=s,this.elementRef=i,this.modalservice=o,this.injector=l}var t,s;return e.prototype.getDropdownLocationClass=function(){var e=this.elementRef.nativeElement.getBoundingClientRect();if(window.innerHeight-e.bottom<100)return"slds-dropdown--bottom"},e.prototype.deleteFile=function(){var t=this;this.modalservice.confirm(this.language.getLabel("QST_DELETE_FILE"),this.language.getLabel("QST_DELETE_FILE",null,"short")).subscribe(function(e){e&&t.modelattachments.deleteAttachment(t.file.id)})},e.prototype.downloadFile=function(){this.modelattachments.downloadAttachment(this.file.id,this.file.name)},e.prototype.edit=function(){var t=this;this.modalservice.openModal("SpiceAttachmentsEditModal",!0,this.injector).subscribe(function(e){e.instance.attachment=t.file,e.instance.inputData={text:t.file.text,display_name:t.file.display_name,category_ids:t.file.category_ids?t.file.category_ids.split(","):[]}})},__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"file",void 0),e=__decorate([core_1.Component({selector:"object-file-action-menu",template:'<div class="slds-dropdown-trigger slds-dropdown-trigger--click" system-dropdown-trigger><button class="slds-button slds-button--icon-border-filled slds-button--icon-x-small" aria-haspopup="true"><system-button-icon [icon]="\'down\'"></system-button-icon></button><div class="slds-dropdown slds-dropdown--right" [ngClass]="getDropdownLocationClass()"><ul class="slds-dropdown__list" role="menu"><li class="slds-dropdown__item" role="presentation" (click)="edit()"><a href="javascript:void(0);" role="menuitem" tabindex="0"><span class="slds-truncate"><system-label label="LBL_EDIT"></system-label></span></a></li><li class="slds-dropdown__item" role="presentation" (click)="downloadFile()"><a href="javascript:void(0);" role="menuitem" tabindex="0"><span class="slds-truncate"><system-label label="LBL_DOWNLOAD"></system-label></span></a></li><li class="slds-dropdown__item" role="presentation" (click)="deleteFile()"><a href="javascript:void(0);" role="menuitem" tabindex="-1"><span class="slds-truncate"><system-label label="LBL_DELETE"></system-label></span></a></li></ul></div></div>'}),__metadata("design:paramtypes",[services_1.broadcast,services_1.modelattachments,services_1.language,"function"==typeof(t=void 0!==core_1.ElementRef&&core_1.ElementRef)?t:Object,services_1.modal,"function"==typeof(s=void 0!==core_1.Injector&&core_1.Injector)?s:Object])],e)}();exports.ObjectFileActionMenu=ObjectFileActionMenu;var ObjectStatusNetworkButtonItem=function(){function ObjectStatusNetworkButtonItem(e,t,s,i,o){this.language=e,this.metadata=t,this.modal=s,this.model=i,this.injector=o,this.item={},this.initialized=!1}var e,t;return Object.defineProperty(ObjectStatusNetworkButtonItem.prototype,"id",{get:function(){return this.item.id},enumerable:!1,configurable:!0}),Object.defineProperty(ObjectStatusNetworkButtonItem.prototype,"hasComponent",{get:function(){return this.item.status_component&&""!=this.item.status_component},enumerable:!1,configurable:!0}),ObjectStatusNetworkButtonItem.prototype.ngAfterViewInit=function(){var t=this;this.hasComponent&&this.metadata.addComponent(this.item.status_component,this.componentcontainer,this.injector).subscribe(function(e){t.actioncomponent=e.instance,e.instance.item=t.item}),this.initialized=!0},ObjectStatusNetworkButtonItem.prototype.ngOnChanges=function(){var t=this;this.actioncomponent&&(this.actioncomponent.self.destroy(),this.actioncomponent=null),this.initialized&&this.hasComponent&&this.metadata.addComponent(this.item.status_component,this.componentcontainer,this.injector).subscribe(function(e){t.actioncomponent=e.instance,e.instance.item=t.item})},ObjectStatusNetworkButtonItem.prototype.setStatus=function(t){var s=this;this.item.prompt_label?this.modal.confirm(this.language.getLabel(this.item.prompt_label,"","long"),this.language.getLabel(this.item.prompt_label,"")).subscribe(function(e){e&&s.executeChange(t)}):this.executeChange(t)},ObjectStatusNetworkButtonItem.prototype.executeChange=function(e){this.actioncomponent&&this.actioncomponent.execute?this.actioncomponent.execute():(this.model.startEdit(!0,!0),this.model.setField(e,this.item.status_to),this.model.validate()?this.model.save():this.model.edit())},__decorate([core_1.ViewChild("componentcontainer",{read:core_1.ViewContainerRef,static:!0}),__metadata("design:type","function"==typeof(e=void 0!==core_1.ViewContainerRef&&core_1.ViewContainerRef)?e:Object)],ObjectStatusNetworkButtonItem.prototype,"componentcontainer",void 0),__decorate([core_1.Input(),__metadata("design:type",Object)],ObjectStatusNetworkButtonItem.prototype,"item",void 0),ObjectStatusNetworkButtonItem=__decorate([core_1.Component({selector:"object-status-network-button-item",template:'<span *ngIf="!hasComponent" class="slds-text-color_default">{{language.getLabel(item.action_label)}}</span><div #componentcontainer></div>'}),__metadata("design:paramtypes",[services_1.language,services_1.metadata,services_1.modal,services_1.model,"function"==typeof(t=void 0!==core_1.Injector&&core_1.Injector)?t:Object])],ObjectStatusNetworkButtonItem)}();exports.ObjectStatusNetworkButtonItem=ObjectStatusNetworkButtonItem;var ObjectStatusNetworkButton=function(){function ObjectStatusNetworkButton(e,t,s,i,o,l,a){this.language=e,this.metadata=t,this.model=s,this.modal=i,this.router=o,this.renderer=l,this.elementRef=a,this.statusField="",this.statusNetwork=[]}var e,t,s,i;return Object.defineProperty(ObjectStatusNetworkButton.prototype,"isDisabled",{get:function(){return this.model.isEditing||!this.model.checkAccess("edit")},enumerable:!1,configurable:!0}),Object.defineProperty(ObjectStatusNetworkButton.prototype,"isManaged",{get:function(){return""!=this.statusField&&!1!==this.primaryItem&&!this.isDisabled},enumerable:!1,configurable:!0}),Object.defineProperty(ObjectStatusNetworkButton.prototype,"primaryItem",{get:function(){for(var e=0,t=this.statusNetwork;e<t.length;e++){var s=t[e];if(s.status_from==this.model.getField(this.statusField))return s}return!1},enumerable:!1,configurable:!0}),Object.defineProperty(ObjectStatusNetworkButton.prototype,"secondaryItems",{get:function(){for(var e=[],t=!1,s=0,i=this.statusNetwork;s<i.length;s++){var o=i[s];o.status_from==this.model.getField(this.statusField)&&(t&&e.push(o),t=t||!0)}return e},enumerable:!1,configurable:!0}),ObjectStatusNetworkButton.prototype.ngOnInit=function(){var e=this.metadata.checkStatusManaged(this.model.module);0!=e&&(this.statusField=e.statusField,this.statusNetwork=e.statusNetwork)},ObjectStatusNetworkButton.prototype.propagateclick=function(t){var s=this;this.buttonitemlist.some(function(e){if(e.id==t)return e.setStatus(s.statusField),!0})},__decorate([core_1.ViewChildren(ObjectStatusNetworkButtonItem),__metadata("design:type","function"==typeof(e=void 0!==core_1.QueryList&&core_1.QueryList)?e:Object)],ObjectStatusNetworkButton.prototype,"buttonitemlist",void 0),ObjectStatusNetworkButton=__decorate([core_1.Component({selector:"object-status-network-button",template:'<div *ngIf="isManaged" class="slds-button-group slds-m-horizontal--xxx-small"><button class="slds-button slds-button_neutral" [disabled]="isDisabled" (click)="propagateclick(primaryItem.id)"><object-status-network-button-item [item]="primaryItem"></object-status-network-button-item></button><div class="slds-dropdown-trigger slds-dropdown-trigger_click slds-button_last" system-dropdown-trigger><button class="slds-button slds-button_icon slds-button_icon-border-filled" [disabled]="isDisabled || secondaryItems.length == 0"><system-button-icon icon="down"></system-button-icon></button><div class="slds-dropdown slds-dropdown_right slds-dropdown_actions"><ul class="slds-dropdown__list" role="menu"><li class="slds-dropdown__item" *ngFor="let secondaryItem of secondaryItems" role="presentation" (click)="propagateclick(secondaryItem.id)"><a class="slds-truncate" href="javascript:void(0);" role="menuitem"><object-status-network-button-item [item]="secondaryItem"></object-status-network-button-item></a></li></ul></div></div></div>'}),__metadata("design:paramtypes",[services_1.language,services_1.metadata,services_1.model,services_1.modal,"function"==typeof(t=void 0!==router_1.Router&&router_1.Router)?t:Object,"function"==typeof(s=void 0!==core_1.Renderer2&&core_1.Renderer2)?s:Object,"function"==typeof(i=void 0!==core_1.ElementRef&&core_1.ElementRef)?i:Object])],ObjectStatusNetworkButton)}();exports.ObjectStatusNetworkButton=ObjectStatusNetworkButton;var ObjectRecordFieldset=function(){function ObjectRecordFieldset(e,t,s){this.metadata=e,this.model=t,this.view=s,this.fieldset="",this.direction="horizontal",this.fieldpadding="xx-small",this.fielddisplayclass="slds-has-divider--bottom slds-p-vertical--x-small spice-fieldminheight",this.fieldsetitems=[],this.numberOfColumns=0}return ObjectRecordFieldset.prototype.ngOnInit=function(){this.fieldsetitems=this.metadata.getFieldSetItems(this.fieldset);for(var e=0,t=this.fieldsetitems;e<t.length;e++){var s=t[e];this.numberOfColumns=this.numberOfColumns+(s.fieldconfig.width?1*s.fieldconfig.width:s.fieldconfig.width=1)}!this.renderVertical&&8<this.numberOfColumns&&console.warn("wrong fieldset grid ("+this.fieldset+")")},Object.defineProperty(ObjectRecordFieldset.prototype,"renderVertical",{get:function(){return"vertical"==this.direction},enumerable:!1,configurable:!0}),ObjectRecordFieldset.prototype.isField=function(e){return!!e.field},ObjectRecordFieldset.prototype.sizeClass=function(e){return this.renderVertical?"":"small"==this.view.size?"slds-size--1-of-1":"slds-size--"+this.fieldsetitems[e].fieldconfig.width+"-of-"+this.numberOfColumns},__decorate([core_1.Input(),__metadata("design:type",String)],ObjectRecordFieldset.prototype,"fieldset",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],ObjectRecordFieldset.prototype,"direction",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],ObjectRecordFieldset.prototype,"fieldpadding",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],ObjectRecordFieldset.prototype,"fielddisplayclass",void 0),ObjectRecordFieldset=__decorate([core_1.Component({selector:"object-record-fieldset",template:'<div *ngIf="renderVertical"><div *ngFor="let fieldsetitem of fieldsetitems"><object-record-fieldset-field *ngIf="isField(fieldsetitem)" [fieldsetitem]="fieldsetitem" [fielddisplayclass]="fielddisplayclass" [fieldpadding]="fieldpadding"></object-record-fieldset-field><object-record-fieldset *ngIf="!isField(fieldsetitem)" [fieldset]="fieldsetitem.fieldset" [fielddisplayclass]="fielddisplayclass" [fieldpadding]="fieldpadding" [direction]="fieldsetitem.fieldconfig.direction"></object-record-fieldset></div></div><div *ngIf="!renderVertical" class="slds-grid slds-wrap"><div *ngFor="let fieldsetitem of fieldsetitems; let i=index" [ngClass]="sizeClass(i)"><object-record-fieldset-field *ngIf="isField(fieldsetitem)" [fieldsetitem]="fieldsetitem" [fielddisplayclass]="fielddisplayclass" [fieldpadding]="fieldpadding"></object-record-fieldset-field><object-record-fieldset *ngIf="!isField(fieldsetitem)" [fieldset]="fieldsetitem.fieldset" [fielddisplayclass]="fielddisplayclass" [fieldpadding]="fieldpadding" [direction]="fieldsetitem.fieldconfig.direction"></object-record-fieldset></div></div>'}),__metadata("design:paramtypes",[services_1.metadata,services_1.model,services_1.view])],ObjectRecordFieldset)}();exports.ObjectRecordFieldset=ObjectRecordFieldset;var ObjectRecordFieldsetField=function(){function e(){this.fieldpadding="x-small",this.fielddisplayclass="slds-has-divider--bottom slds-p-vertical--x-small spice-fieldminheight"}return e.prototype.showLabel=function(e){return!0!==e.hidelabel},Object.defineProperty(e.prototype,"padding",{get:function(){return this.fieldpadding?"slds-p-around--"+this.fieldpadding:""},enumerable:!1,configurable:!0}),__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"fieldsetitem",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"fieldpadding",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"fielddisplayclass",void 0),e=__decorate([core_1.Component({selector:"object-record-fieldset-field",template:'<div [ngClass]="padding"><field-container [field]="fieldsetitem.field" [fieldconfig]="fieldsetitem.fieldconfig" [fielddisplayclass]="fielddisplayclass"></field-container></div>'})],e)}();exports.ObjectRecordFieldsetField=ObjectRecordFieldsetField;var ObjectRecordFieldsetHorizontalList=function(){function e(e,t){this.metadata=e,this.model=t,this.fieldset="",this.fieldsetitems=[]}return e.prototype.ngOnInit=function(){this.fieldsetitems=this.metadata.getFieldSetItems(this.fieldset)},__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"fieldset",void 0),e=__decorate([core_1.Component({selector:"object-record-fieldset-horizontal-list",template:'<ul class="slds-list_horizontal slds-has-dividers_left"><ng-container *ngFor="let fieldsetitem of fieldsetitems"><li *ngIf="model.getField(fieldsetitem.field)" class="slds-item"><field-container [field]="fieldsetitem.field" [fieldconfig]="fieldsetitem.fieldconfig" fielddisplayclass="slds-align_absolute-center"></field-container></li></ng-container></ul>'}),__metadata("design:paramtypes",[services_1.metadata,services_1.model])],e)}();exports.ObjectRecordFieldsetHorizontalList=ObjectRecordFieldsetHorizontalList;var ObjectRecordFieldsetContainer=function(){function ObjectRecordFieldsetContainer(e,t,s){this.metadata=e,this.model=t,this.view=s,this.componentconfig={}}return Object.defineProperty(ObjectRecordFieldsetContainer.prototype,"fieldset",{get:function(){return this.componentconfig.fieldset},enumerable:!1,configurable:!0}),Object.defineProperty(ObjectRecordFieldsetContainer.prototype,"direction",{get:function(){return this.componentconfig.direction},enumerable:!1,configurable:!0}),Object.defineProperty(ObjectRecordFieldsetContainer.prototype,"hidden",{get:function(){return this.componentconfig.requiredmodelstate&&!this.model.checkModelState(this.componentconfig.requiredmodelstate)},enumerable:!1,configurable:!0}),__decorate([core_1.Input(),__metadata("design:type",Object)],ObjectRecordFieldsetContainer.prototype,"componentconfig",void 0),ObjectRecordFieldsetContainer=__decorate([core_1.Component({selector:"object-record-fieldset-container",template:'<div [ngClass]="{\'slds-theme--shade slds-p-around--small\' : this.componentconfig.embedded}"><fieldset *ngIf="!hidden" class="slds-form-element slds-form-element_compound"><legend *ngIf="componentconfig.name" class="slds-form-element__legend slds-form-element__label slds-p-horizontal--xx-small"><system-label [label]="componentconfig.name"></system-label></legend><div class="slds-form-element__control"><object-record-fieldset [fieldset]="fieldset" [direction]="direction"></object-record-fieldset></div></fieldset></div>'}),__metadata("design:paramtypes",[services_1.metadata,services_1.model,services_1.view])],ObjectRecordFieldsetContainer)}();exports.ObjectRecordFieldsetContainer=ObjectRecordFieldsetContainer;var ObjectRecordChecklist=function(){function ObjectRecordChecklist(e){this.language=e,this.componentconfig={}}return Object.defineProperty(ObjectRecordChecklist.prototype,"checkitems",{get:function(){return this.componentconfig.checkitems?this.componentconfig.checkitems:[]},enumerable:!1,configurable:!0}),Object.defineProperty(ObjectRecordChecklist.prototype,"modelfield",{get:function(){return this.componentconfig.field},enumerable:!1,configurable:!0}),ObjectRecordChecklist=__decorate([core_1.Component({selector:"object-record-checklist",template:'<div class="slds-box slds-m-bottom--small"><h3 class="slds-text-heading_small slds-p-vertical--xx-small"><system-label label="LBL_CHECKLIST"></system-label></h3><object-record-checklist-item *ngFor="let checkitem of checkitems" [checkfield]="modelfield" [checkitem]="checkitem"></object-record-checklist-item></div>',providers:[services_1.view]}),__metadata("design:paramtypes",[services_1.language])],ObjectRecordChecklist)}();exports.ObjectRecordChecklist=ObjectRecordChecklist;var ObjectRecordChecklistItem=function(){function e(e,t,s,i,o){this.view=e,this.model=t,this.modelutilities=s,this.language=i,this.backend=o,this.checkitem={},this.checkfield="",this.checkid="",this.checkid=this.modelutilities.generateGuid()}return Object.defineProperty(e.prototype,"checked",{get:function(){try{return JSON.parse(this.model.data[this.checkfield])[this.checkitem.item]}catch(e){return!1}},enumerable:!1,configurable:!0}),e.prototype.checkItem=function(e){var t={};try{t=JSON.parse(this.model.data[this.checkfield])}catch(e){}t[this.checkitem.item]=e.target.checked,this.model.data[this.checkfield]=JSON.stringify(t),e.target.checked?this.backend.postRequest("module/"+this.model.module+"/"+this.model.id+"/checklist/"+this.checkfield+"/"+this.checkitem.item):this.backend.deleteRequest("module/"+this.model.module+"/"+this.model.id+"/checklist/"+this.checkfield+"/"+this.checkitem.item)},Object.defineProperty(e.prototype,"disabled",{get:function(){return!this.model.checkAccess("edit")||this.model.isEditing||this.model.isLoading},enumerable:!1,configurable:!0}),__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"checkitem",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"checkfield",void 0),e=__decorate([core_1.Component({selector:"object-record-checklist-item",template:'<div class="slds-form-element slds-p-vertical--xx-small"><div class="slds-form-element__control"><span class="slds-checkbox"><input type="checkbox" name="options" [id]="checkid" [ngModel]="checked" (change)="checkItem($event)" [disabled]="disabled"> <label class="slds-checkbox__label" [attr.for]="checkid"><span class="slds-checkbox_faux"></span> <span class="slds-form-element__label"><system-label [label]="checkitem.name"></system-label></span></label></span></div></div>',providers:[services_1.view]}),__metadata("design:paramtypes",[services_1.view,services_1.model,services_1.modelutilities,services_1.language,services_1.backend])],e)}();exports.ObjectRecordChecklistItem=ObjectRecordChecklistItem;var ObjectRecordDetails=function(){function ObjectRecordDetails(e,t,s,i,o,l){this.view=e,this.metadata=t,this.componentFactoryResolver=s,this.model=i,this.language=o,this.renderer=l,this.componentconfig={},this.subscriptions=new rxjs_1.Subscription}var e,t;return ObjectRecordDetails.prototype.ngOnInit=function(){var t=this;!0===this.readonly||this.componentconfig.readonly?this.view.isEditable:(this.view.isEditable=!0,this.view.linkedToModel=!0,this.subscriptions.add(this.view.mode$.subscribe(function(e){"edit"!=e||t.model.isEditing||t.model.startEdit()}))),this.buildContainer()},ObjectRecordDetails.prototype.ngOnDestroy=function(){this.subscriptions.unsubscribe()},ObjectRecordDetails.prototype.buildContainer=function(){if(!this.componentSet)if(this.componentconfig.componentset)this.componentSet=this.componentconfig.componentset;else{var e=this.metadata.getComponentConfig("ObjectRecordDetails",this.model.module);this.componentSet=e.componentset}},ObjectRecordDetails.prototype.getBoxStyle=function(){return this.view.isEditMode()?{"box-shadow":"0 2px 4px 4px rgba(0,0,0,.16)"}:{}},Object.defineProperty(ObjectRecordDetails.prototype,"showHeader",{get:function(){return!!this.componentconfig.header},enumerable:!1,configurable:!0}),Object.defineProperty(ObjectRecordDetails.prototype,"header",{get:function(){return this.language.getLabel(this.componentconfig.header,this.model.module)},enumerable:!1,configurable:!0}),__decorate([core_1.Input(),__metadata("design:type",String)],ObjectRecordDetails.prototype,"componentSet",void 0),__decorate([core_1.Input(),__metadata("design:type",Boolean)],ObjectRecordDetails.prototype,"readonly",void 0),ObjectRecordDetails=__decorate([core_1.Component({selector:"object-record-details",template:'<h3 *ngIf="showHeader" class="slds-text-heading_small slds-theme_shade slds-p-around--x-small">{{header}}</h3><div class="slds-is-relative" [ngStyle]="getBoxStyle()" [system-overlay-loading-spinner]="model.isSaving"><system-componentset [componentset]="componentSet"></system-componentset><object-record-details-footer></object-record-details-footer></div>',providers:[services_1.view]}),__metadata("design:paramtypes",[services_1.view,services_1.metadata,"function"==typeof(e=void 0!==core_1.ComponentFactoryResolver&&core_1.ComponentFactoryResolver)?e:Object,services_1.model,services_1.language,"function"==typeof(t=void 0!==core_1.Renderer2&&core_1.Renderer2)?t:Object])],ObjectRecordDetails)}();exports.ObjectRecordDetails=ObjectRecordDetails;var ObjectRecordDetailsTab=function(){function ObjectRecordDetailsTab(e,t,s){this.metadata=e,this.model=t,this.language=s,this.componentconfig={},this.expanded=!0}return ObjectRecordDetailsTab.prototype.ngOnInit=function(){this.componentconfig.collapsed&&(this.expanded=!1)},Object.defineProperty(ObjectRecordDetailsTab.prototype,"fieldSet",{get:function(){try{return this.componentconfig.fieldset}catch(e){return""}},enumerable:!1,configurable:!0}),Object.defineProperty(ObjectRecordDetailsTab.prototype,"showTitle",{get:function(){try{return!this.componentconfig.hidelabel}catch(e){return!1}},enumerable:!1,configurable:!0}),Object.defineProperty(ObjectRecordDetailsTab.prototype,"hidden",{get:function(){return this.componentconfig.requiredmodelstate&&!this.model.checkModelState(this.componentconfig.requiredmodelstate)},enumerable:!1,configurable:!0}),ObjectRecordDetailsTab=__decorate([core_1.Component({selector:"object-record-details-tab",template:'<div *ngIf="!hidden"><system-collapsable-tab *ngIf="showTitle" [title]="componentconfig.name" [expanded]="expanded"><div class="slds-p-horizontal--xx-small"><object-record-fieldset [fieldset]="fieldSet" [direction]="\'vertical\'"></object-record-fieldset></div></system-collapsable-tab><div *ngIf="!showTitle" class="slds-section"><div class="slds-p-horizontal--xx-small"><object-record-fieldset [fieldset]="fieldSet" [direction]="\'vertical\'"></object-record-fieldset></div></div></div>'}),__metadata("design:paramtypes",[services_1.metadata,services_1.model,services_1.language])],ObjectRecordDetailsTab)}(),ObjectRecordDetailsModelstateTab=function(e){function ObjectRecordDetailsModelstateTab(){return null!==e&&e.apply(this,arguments)||this}return __extends(ObjectRecordDetailsModelstateTab,e),ObjectRecordDetailsModelstateTab=__decorate([core_1.Component({selector:"object-record-details-modelstate-tab",template:'<div @displayanimation *ngIf="!hidden"><system-collapsable-tab *ngIf="showTitle" [title]="componentconfig.name" [expanded]="expanded"><div class="slds-p-horizontal--xx-small"><object-record-fieldset [fieldset]="fieldSet" [direction]="\'vertical\'"></object-record-fieldset></div></system-collapsable-tab><div *ngIf="!showTitle" class="slds-section"><div class="slds-p-horizontal--xx-small"><object-record-fieldset [fieldset]="fieldSet" [direction]="\'vertical\'"></object-record-fieldset></div></div></div>',animations:[animations_1.trigger("displayanimation",[animations_1.transition(":enter",[animations_1.style({opacity:0,height:"0px",overflow:"hidden"}),animations_1.animate(".5s",animations_1.style({height:"*",opacity:1})),animations_1.style({overflow:"unset"})]),animations_1.transition(":leave",[animations_1.style({overflow:"hidden"}),animations_1.animate(".5s",animations_1.style({height:"0px",opacity:0}))])])]})],ObjectRecordDetailsModelstateTab)}(exports.ObjectRecordDetailsTab=ObjectRecordDetailsTab);exports.ObjectRecordDetailsModelstateTab=ObjectRecordDetailsModelstateTab;var ObjectRecordDetailsFooter=function(){function ObjectRecordDetailsFooter(e,t,s,i){this.view=e,this.model=t,this.language=s,this.metadata=i}return ObjectRecordDetailsFooter.prototype.ngOnInit=function(){var e=this.metadata.getComponentConfig("ObjectRecordDetailsFooter",this.model.module);this.actionset=e.actionset},ObjectRecordDetailsFooter.prototype.cancel=function(){this.model.cancelEdit(),this.view.setViewMode()},ObjectRecordDetailsFooter.prototype.save=function(){this.model.validate()&&(this.model.save(!0),this.view.setViewMode())},ObjectRecordDetailsFooter=__decorate([core_1.Component({selector:"object-record-details-footer",template:'<div class="slds-text-align--center slds-p-bottom--small slds-grid slds-grid--align-center slds-grid--vertical-align-center" *ngIf="view.isEditMode()"><object-action-container [actionset]="actionset"></object-action-container><object-record-messages-badge></object-record-messages-badge></div>'}),__metadata("design:paramtypes",[services_1.view,services_1.model,services_1.language,services_1.metadata])],ObjectRecordDetailsFooter)}();exports.ObjectRecordDetailsFooter=ObjectRecordDetailsFooter;var ObjectRecordAdministrationTab=function(){function ObjectRecordAdministrationTab(e,t,s,i,o){this.activatedRoute=e,this.metadata=t,this.model=s,this.language=i,this.territories=o,this.componentconfig={},this.expanded=!0,this.hasFieldAssignedUser=!1,this.fields={spiceacl_primary_territory:{field:"spiceacl_primary_territory",fieldconfig:{}},spiceacl_territories_hash:{field:"spiceacl_territories_hash",fieldconfig:{}},spiceacl_users_hash:{field:"spiceacl_users_hash",fieldconfig:{}},assigned_user_name:{field:"assigned_user_name",fieldconfig:{}},created_by_name:{field:"created_by_name",fieldconfig:{fieldtype:"modifiedby",field_date:"date_entered"}},modified_by_name:{field:"modified_by_name",fieldconfig:{fieldtype:"modifiedby",field_date:"date_modified"}}}}var e;return ObjectRecordAdministrationTab.prototype.ngOnInit=function(){this.componentconfig.collapsed&&(this.expanded=!1),this.hasFieldAssignedUser=this.metadata.hasField(this.model.module,"assigned_user_name")},ObjectRecordAdministrationTab.prototype.getTypeParameters=function(){return this.territories.getModuleParamaters(this.model.module)},Object.defineProperty(ObjectRecordAdministrationTab.prototype,"territorymanaged",{get:function(){return this.territories.checkModuleManaged(this.model.module)},enumerable:!1,configurable:!0}),Object.defineProperty(ObjectRecordAdministrationTab.prototype,"multipleterritories",{get:function(){return 1==this.getTypeParameters().multipleobjects},enumerable:!1,configurable:!0}),Object.defineProperty(ObjectRecordAdministrationTab.prototype,"multipleusers",{get:function(){return 1==this.metadata.getModuleDefs(this.model.module).acl_multipleusers},enumerable:!1,configurable:!0}),Object.defineProperty(ObjectRecordAdministrationTab.prototype,"hidden",{get:function(){return this.componentconfig.requiredmodelstate&&!this.model.checkModelState(this.componentconfig.requiredmodelstate)},enumerable:!1,configurable:!0}),ObjectRecordAdministrationTab=__decorate([core_1.Component({selector:"object-record-details-tab",template:'<system-collapsable-tab [title]="componentconfig.name" [expanded]="expanded"><div *ngIf="territorymanaged" class="slds-grid slds-wrap"><div class="slds-size--1-of-1 slds-medium-size--1-of-2"><object-record-fieldset-field [fieldsetitem]="fields.spiceacl_primary_territory"></object-record-fieldset-field></div><div *ngIf="multipleterritories" class="slds-size--1-of-1 slds-medium-size--1-of-2"><object-record-fieldset-field [fieldsetitem]="fields.spiceacl_territories_hash"></object-record-fieldset-field></div></div><div *ngIf="multipleusers"><object-record-fieldset-field [fieldsetitem]="fields.spiceacl_users_hash"></object-record-fieldset-field></div><div class="slds-grid slds-wrap"><div *ngIf="hasFieldAssignedUser" class="slds-size--1-of-1 slds-medium-size--1-of-3"><object-record-fieldset-field [fieldsetitem]="fields.assigned_user_name"></object-record-fieldset-field></div><div class="slds-size--1-of-1 slds-small-size--1-of-2" [ngClass]="{\'slds-medium-size--1-of-3\':hasFieldAssignedUser,\'slds-medium-size--1-of-2\':!hasFieldAssignedUser}"><object-record-fieldset-field [fieldsetitem]="fields.created_by_name"></object-record-fieldset-field></div><div class="slds-size--1-of-1 slds-small-size--1-of-2" [ngClass]="{\'slds-medium-size--1-of-3\':hasFieldAssignedUser,\'slds-medium-size--1-of-2\':!hasFieldAssignedUser}"><object-record-fieldset-field [fieldsetitem]="fields.modified_by_name"></object-record-fieldset-field></div></div></system-collapsable-tab>'}),__metadata("design:paramtypes",["function"==typeof(e=void 0!==router_1.ActivatedRoute&&router_1.ActivatedRoute)?e:Object,services_1.metadata,services_1.model,services_1.language,services_1.territories])],ObjectRecordAdministrationTab)}();exports.ObjectRecordAdministrationTab=ObjectRecordAdministrationTab;var ObjectRecordDetailsTabRow=function(){function e(e,t,s,i){this.activatedRoute=e,this.metadata=t,this.componentFactoryResolver=s,this.model=i,this.initialized=!1,this.componentconfig={},this.componentRefs=[],this.rowFields=[],this.fieldset=""}var t,s;return e.prototype.ngOnInit=function(){this.rowFields=this.metadata.getFieldSetFields(this.fieldset.fieldset)},e.prototype.getFieldSizeClass=function(){return"slds-size--1-of-"+this.rowFields.length},e.prototype.getFieldWidth=function(){return{width:Math.round(1/this.rowFields.length*100)+"%"}},e.prototype.showLabel=function(e){return!0!==e.hidelabel},__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"fieldset",void 0),e=__decorate([core_1.Component({selector:"object-record-details-tab-row",template:'<div class="slds-p-around--x-small" *ngFor="let field of rowFields" [ngClass]="getFieldSizeClass()"><field-label *ngIf="showLabel(field.fieldconfig) && field.field !== \'blank\'" [fieldname]="field.field" [fieldconfig]="field.fieldconfig"></field-label><field-container [field]="field.field" [fieldconfig]="field.fieldconfig" [fielddisplayclass]="\'slds-has-divider--bottom slds-p-vertical--x-small spice-fieldminheight\'"></field-container></div>'}),__metadata("design:paramtypes",["function"==typeof(t=void 0!==router_1.ActivatedRoute&&router_1.ActivatedRoute)?t:Object,services_1.metadata,"function"==typeof(s=void 0!==core_1.ComponentFactoryResolver&&core_1.ComponentFactoryResolver)?s:Object,services_1.model])],e)}();exports.ObjectRecordDetailsTabRow=ObjectRecordDetailsTabRow;var ObjectRecordDetailsTabRowField=function(){function e(){this.field={}}return __decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"field",void 0),e=__decorate([core_1.Component({selector:"object-record-details-tab-row-field",template:'<field-label [fieldname]="field.field" [fieldconfig]="field.fieldconfig"></field-label><field-container [field]="field.field" [fieldconfig]="field.fieldconfig" [fielddisplayclass]="\'slds-text-body--regular slds-truncate slds-m-vertical--x-small\'"></field-container>'}),__metadata("design:paramtypes",[])],e)}();exports.ObjectRecordDetailsTabRowField=ObjectRecordDetailsTabRowField;var ObjectRecordTabbedDetails=function(){function ObjectRecordTabbedDetails(e,t,s,i,o){this.view=e,this.metadata=t,this.componentFactoryResolver=s,this.model=i,this.language=o,this.componentconfig={},this.activeTab=0,this.activatedTabs=[0],this.componentTabs=[],this.view.isEditable=!0}var e;return Object.defineProperty(ObjectRecordTabbedDetails.prototype,"tabs",{get:function(){return this.componentTabs?this.componentTabs:[]},enumerable:!1,configurable:!0}),ObjectRecordTabbedDetails.prototype.ngOnInit=function(){if(0==this.getTabs().length)if(this.componentconfig&&this.componentconfig.componentset){var e=this.metadata.getComponentSetObjects(this.componentconfig.componentset);this.componentTabs=[];for(var t=0,s=e;t<s.length;t++){var i=s[t];this.componentTabs.push(i.componentconfig)}}else if(this.componentconfig.tabs)this.componentTabs=this.componentconfig.tabs;else{var o=this.metadata.getComponentConfig("ObjectRecordTabbedDetails",this.model.module);this.componentTabs=o.tabs}else this.componentTabs=this.getTabs()},ObjectRecordTabbedDetails.prototype.getTabs=function(){try{return this.componentconfig.tabs?this.componentconfig.tabs:[]}catch(e){return[]}},ObjectRecordTabbedDetails.prototype.setActiveTab=function(e){this.activatedTabs.push(e),this.activeTab=e},ObjectRecordTabbedDetails.prototype.checkRenderTab=function(e){return e==this.activeTab||-1<this.activatedTabs.indexOf(e)},ObjectRecordTabbedDetails.prototype.showTab=function(e){return e===this.activeTab},ObjectRecordTabbedDetails.prototype.getDisplay=function(e){if(e!==this.activeTab)return{display:"none"}},ObjectRecordTabbedDetails.prototype.cancel=function(){this.model.cancelEdit(),this.view.setViewMode()},ObjectRecordTabbedDetails.prototype.save=function(){this.model.validate()&&(this.model.save(!0),this.view.setViewMode())},ObjectRecordTabbedDetails.prototype.showErrorsOnTab=function(e,t){this.componentTabs[e].hasErrors=t},ObjectRecordTabbedDetails=__decorate([core_1.Component({selector:"object-record-tabbed-details",template:'<div class="slds-tabs--scoped slds-p-bottom--small slds-p-around--xx-small" [ngClass]="{\'slds-p-around--small\' : componentconfig.inModal}"><ul class="slds-tabs--scoped__nav" role="tablist"><li *ngFor="let tab of tabs; let tabindex = index" class="slds-tabs--scoped__item slds-text-title--caps slds-active" [ngClass]="{\'slds-active\': tabindex === activeTab}" role="presentation" (click)="setActiveTab(tabindex)"><a class="slds-tabs--scoped__link" href="javascript:void(0);" role="tab" aria-selected="false"><span class="slds-badge" *ngIf="tab.hasErrors" title="Invalid fields!">{{tab.hasErrors}}</span> {{language.getLabel(tab.name, model.module)}}</a></li></ul><ng-container *ngFor="let tab of tabs; let tabindex = index"><div *ngIf="checkRenderTab(tabindex)" class="slds-tabs--scoped__content slds-p-vertical--xxx-small slds-p-horizontal--none" [ngClass]="{\'slds-active\': showTab(tabindex)}" role="tabpanel" [hidden]="!showTab(tabindex)"><object-tab-container-item *ngIf="tab.componentset" (taberrors)="showErrorsOnTab(tabindex,$event)" [componentset]="tab.componentset"></object-tab-container-item></div></ng-container></div>',styles:[".slds-badge { font-weight: bold; background-color: #c00; color: #fff; padding: .125rem .4rem; }"]}),__metadata("design:paramtypes",[services_1.view,services_1.metadata,"function"==typeof(e=void 0!==core_1.ComponentFactoryResolver&&core_1.ComponentFactoryResolver)?e:Object,services_1.model,services_1.language])],ObjectRecordTabbedDetails)}();exports.ObjectRecordTabbedDetails=ObjectRecordTabbedDetails;var ObjectRecordTabbedDetailsTab=function(){function e(e,t,s,i,o){this.view=e,this.metadata=t,this.componentFactoryResolver=s,this.model=i,this.language=o,this.componentset="",this.componentRefs=[]}var t,s;return e.prototype.ngAfterViewInit=function(){this.buildContainer()},e.prototype.buildContainer=function(){for(var s=this,e=0,t=this.componentRefs;e<t.length;e++){t[e].destroy()}for(var i=function(t){o.metadata.addComponent(t.component,o.panelcontainer).subscribe(function(e){e.instance.componentconfig=t.componentconfig,s.componentRefs.push(e)})},o=this,l=0,a=this.metadata.getComponentSetObjects(this.componentset);l<a.length;l++){i(a[l])}},__decorate([core_1.ViewChild("panelcontainer",{read:core_1.ViewContainerRef,static:!0}),__metadata("design:type","function"==typeof(t=void 0!==core_1.ViewContainerRef&&core_1.ViewContainerRef)?t:Object)],e.prototype,"panelcontainer",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"componentset",void 0),e=__decorate([core_1.Component({selector:"object-record-tabbed-details-tab",template:"<div #panelcontainer></div>"}),__metadata("design:paramtypes",[services_1.view,services_1.metadata,"function"==typeof(s=void 0!==core_1.ComponentFactoryResolver&&core_1.ComponentFactoryResolver)?s:Object,services_1.model,services_1.language])],e)}();exports.ObjectRecordTabbedDetailsTab=ObjectRecordTabbedDetailsTab;var ObjectRecordDetailsRelatedListTab=function(){function ObjectRecordDetailsRelatedListTab(e){this.language=e,this.componentconfig={}}return ObjectRecordDetailsRelatedListTab=__decorate([core_1.Component({selector:"object-record-details-related-list-tab",template:'<system-collapsable-tab [title]="componentconfig.name"><div class="slds-p-horizontal--xx-small"><object-related-list [componentconfig]="componentconfig"></object-related-list></div></system-collapsable-tab>'}),__metadata("design:paramtypes",[services_1.language])],ObjectRecordDetailsRelatedListTab)}();exports.ObjectRecordDetailsRelatedListTab=ObjectRecordDetailsRelatedListTab;var ObjectModalModuleLookupHeader=function(){function e(e,t,s,i,o){this.language=e,this.modellist=t,this.modelutilities=s,this.metadata=i,this.element=o,this.searchTerm="",this.searchTermOld="",this.searchTimeOut=void 0,this.subscriptions=new rxjs_1.Subscription,this.usedSearchTerm=new core_1.EventEmitter,this.autoCompleteKiller=this.modelutilities.generateGuid()}var t,s;return Object.defineProperty(e.prototype,"relatefilter",{get:function(){return this.modellist.relatefilter},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"relatefilterActive",{get:function(){var e;return null===(e=this.relatefilter)||void 0===e?void 0:e.active},set:function(e){this.relatefilter.active=e,this.modellist.relatefilter.active=e,this.modellist.reLoadList()},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){this.searchTerm=this.modellist.searchTerm,this.searchTermOld=this.modellist.searchTerm},e.prototype.ngOnDestroy=function(){this.subscriptions.unsubscribe()},e.prototype.doSearch=function(){this.searchTermOld=this.searchTerm,this.modellist.searchTerm=this.searchTerm,this.modellist.getListData()},e.prototype.triggerSearch=function(e){var t=this;if(this.searchTerm!==this.searchTermOld)switch(e.key){case"Enter":0<this.searchTerm.length&&(this.searchTimeOut&&window.clearTimeout(this.searchTimeOut),this.doSearch());break;default:this.searchTimeOut&&window.clearTimeout(this.searchTimeOut),this.searchTimeOut=window.setTimeout(function(){return t.doSearch()},1e3)}},__decorate([core_1.Output(),__metadata("design:type","function"==typeof(t=void 0!==core_1.EventEmitter&&core_1.EventEmitter)?t:Object)],e.prototype,"usedSearchTerm",void 0),e=__decorate([core_1.Component({selector:"object-modal-module-lookup-header",template:'<div class="slds-form-element slds-p-top--medium slds-p-horizontal--medium slds-m-bottom--small slds-grid slds-grid--vertical-align-center"><object-list-types></object-list-types><div class="slds-form-element__control slds-input-has-icon slds-input-has-icon--right slds-grow"><system-utility-icon icon="search" size="x-small" addclasses="slds-input__icon"></system-utility-icon><input type="text" id="lookup" class="slds-input" [(ngModel)]="searchTerm" [autocomplete]="autoCompleteKiller" (keyup)="triggerSearch($event)" [placeholder]="language.getModuleName(modellist.module)"></div><button class="slds-button slds-button--neutral slds-button--icon-border slds-m-horizontal--xxx-small" (click)="modellist.reLoadList()"><system-button-icon [icon]="\'refresh\'"></system-button-icon></button><object-listview-aggregates-button></object-listview-aggregates-button></div><div class="slds-theme--shade slds-p-around--x-small slds-border--top slds-grid slds-grid--vertical-align-center slds slds-grid--align-spread"><object-listview-header-details></object-listview-header-details><system-checkbox *ngIf="relatefilter && relatefilter.id" [disabled]="relatefilter.required" [(ngModel)]="relatefilterActive"><system-label label="LBL_RELATED_TO"></system-label> <system-label-modulename [module]="relatefilter.module" [singular]="true"></system-label-modulename> {{relatefilter.display}}</system-checkbox></div>'}),__metadata("design:paramtypes",[services_1.language,services_1.modellist,services_1.modelutilities,services_1.metadata,"function"==typeof(s=void 0!==core_1.ElementRef&&core_1.ElementRef)?s:Object])],e)}();exports.ObjectModalModuleLookupHeader=ObjectModalModuleLookupHeader;var ObjectModalModuleLookupAggregates=function(){function e(e,t){this.modellist=e,this.metadata=t}return Object.defineProperty(e.prototype,"hasTags",{get:function(){return this.metadata.checkTagging(this.modellist.module)},enumerable:!1,configurable:!0}),e.prototype.getAggregates=function(){return this.modellist.moduleAggregates},e=__decorate([core_1.Component({selector:"object-modal-module-lookup-aggregates",template:'<div @animatepanel *ngIf="this.modellist.displayAggregates" class="slds-is-absolute slds-panel slds-panel--filters slds-filters__body slds-nowrap slds-scrollable--y" style="width: 320px; height: 100%; top:0px; right: 0px;z-index: 99;" [system-model-provider]="{module: modellist.module}"><div class="slds-filters__body slds-grid_vertical"><object-listview-tags-aggregate *ngIf="hasTags"></object-listview-tags-aggregate><div class="slds-m-vertical--xx-small" *ngFor="let aggregate of getAggregates()"><object-listview-aggregate [aggregate]="aggregate"></object-listview-aggregate></div></div></div>',animations:[animations_1.trigger("animatepanel",[animations_1.transition(":enter",[animations_1.style({right:"-320px",overflow:"hidden"}),animations_1.animate(".5s",animations_1.style({right:"0px"})),animations_1.style({overflow:"unset"})]),animations_1.transition(":leave",[animations_1.style({overflow:"hidden"}),animations_1.animate(".5s",animations_1.style({right:"-320px"}))])])]}),__metadata("design:paramtypes",[services_1.modellist,services_1.metadata])],e)}();exports.ObjectModalModuleLookupAggregates=ObjectModalModuleLookupAggregates;var ObjectModalModuleLookup=function(){function ObjectModalModuleLookup(e,t,s,i,o,l){var a=this;this.language=e,this.modellist=t,this.metadata=s,this.modelutilities=i,this.model=o,this.layout=l,this.searchTerm="",this.self={},this.multiselect=!1,this.module="",this.modulefilter="",this.subscriptions=new rxjs_1.Subscription,this.selectedItems=new core_1.EventEmitter,this.usedSearchTerm=new core_1.EventEmitter,this.subscriptions.add(this.modellist.listType$.subscribe(function(e){return a.switchListtype()}))}var e,t,s;return ObjectModalModuleLookup.prototype.contentStyle=function(){return this.headercontent?{height:"calc(100% - "+this.headercontent.element.nativeElement.getBoundingClientRect().height+"px)"}:{height:"100%"}},Object.defineProperty(ObjectModalModuleLookup.prototype,"smallView",{get:function(){return"small"==this.layout.screenwidth},enumerable:!1,configurable:!0}),ObjectModalModuleLookup.prototype.ngOnInit=function(){this.modellist.modulefilter=this.modulefilter,this.modellist.relatefilter=this.relatefilter,this.modellist.useCache=!1,this.modellist.initialize(this.module),this.modellist.getListData(),this.model.module=this.module,""!=this.searchTerm&&this.doSearch()},ObjectModalModuleLookup.prototype.ngOnDestroy=function(){this.subscriptions.unsubscribe()},ObjectModalModuleLookup.prototype.switchListtype=function(){},ObjectModalModuleLookup.prototype.doSearch=function(){this.modellist.searchTerm=this.searchTerm,this.modellist.getListData()},ObjectModalModuleLookup.prototype.onScroll=function(e){var t=this.tablecontent.element.nativeElement;t.scrollTop+t.clientHeight+50>t.scrollHeight&&this.modellist.loadMoreList()},ObjectModalModuleLookup.prototype.closePopup=function(){this.usedSearchTerm.emit(this.modellist.searchTerm),this.self.destroy()},Object.defineProperty(ObjectModalModuleLookup.prototype,"selectedCount",{get:function(){return this.modellist.getSelectedCount()},enumerable:!1,configurable:!0}),ObjectModalModuleLookup.prototype.selectItems=function(){this.selectedItems.emit(this.modellist.getSelectedItems()),this.usedSearchTerm.emit(this.searchTerm),this.self.destroy()},ObjectModalModuleLookup.prototype.clickRow=function(e,t){this.multiselect||(this.selectedItems.emit([t]),this.usedSearchTerm.emit(this.searchTerm),this.self.destroy())},__decorate([core_1.ViewChild("tablecontent",{read:core_1.ViewContainerRef,static:!0}),__metadata("design:type","function"==typeof(e=void 0!==core_1.ViewContainerRef&&core_1.ViewContainerRef)?e:Object)],ObjectModalModuleLookup.prototype,"tablecontent",void 0),__decorate([core_1.ViewChild(ObjectModalModuleLookupHeader),__metadata("design:type",ObjectModalModuleLookupHeader)],ObjectModalModuleLookup.prototype,"headercontent",void 0),__decorate([core_1.Input(),__metadata("design:type",Object)],ObjectModalModuleLookup.prototype,"relatefilter",void 0),__decorate([core_1.Output(),__metadata("design:type","function"==typeof(t=void 0!==core_1.EventEmitter&&core_1.EventEmitter)?t:Object)],ObjectModalModuleLookup.prototype,"selectedItems",void 0),__decorate([core_1.Output(),__metadata("design:type","function"==typeof(s=void 0!==core_1.EventEmitter&&core_1.EventEmitter)?s:Object)],ObjectModalModuleLookup.prototype,"usedSearchTerm",void 0),ObjectModalModuleLookup=__decorate([core_1.Component({selector:"object-modal-module-lookup",template:'<system-modal size="large"><system-modal-header (close)="closePopup()">{{language.getModuleCombinedLabel(\'LBL_SEARCH\', modellist.module)}}</system-modal-header><system-modal-content margin="none" [grow]="true"><div class="slds-height_full"><object-modal-module-lookup-header></object-modal-module-lookup-header><div class="slds-is-relative" [ngStyle]="contentStyle()"><div class="slds-scrollable--y slds-height_full" #tablecontent (scroll)="onScroll($event)"><table class="slds-table slds-table--fixed-layout slds-table--bordered slds-max-medium-table--stacked-horizontal" [ngClass]="{\'slds-no-row-hover\':multiselect,\'singleselect\':!multiselect, \'slds-table--header-fixed\': !smallView}" role="listbox"><thead *ngIf="!smallView"><tr object-list-header [showSelectColumn]="multiselect" [showRowActionMenu]="false"></tr></thead><tbody><tr object-list-item *ngFor="let listItem of modellist.listData.list" [listItem]="listItem" [showActionMenu]="false" [rowselect]="multiselect" [displaylinks]="false" class="slds-hint-parent slds-p-horizontal--x-small" (click)="clickRow($event, listItem)"></tr></tbody><tbody system-table-stencils [columns]="modellist.listfields?.length" [select]="multiselect" [tools]="false" [rows]="10" *ngIf="modellist.isLoading"></tbody></table></div><object-modal-module-lookup-aggregates></object-modal-module-lookup-aggregates></div></div></system-modal-content><system-modal-footer><button class="slds-button slds-button--neutral" (click)="closePopup()"><system-label label="LBL_CANCEL"></system-label></button> <button *ngIf="multiselect" class="slds-button slds-button--brand" [disabled]="selectedCount == 0" (click)="selectItems()"><system-label label="LBL_SELECT"></system-label></button></system-modal-footer></system-modal>',providers:[services_1.view,services_1.modellist,services_1.model],styles:["::ng-deep table.singleselect tr:hover td { cursor: pointer; }"]}),__metadata("design:paramtypes",[services_1.language,services_1.modellist,services_1.metadata,services_1.modelutilities,services_1.model,services_1.layout])],ObjectModalModuleLookup)}();exports.ObjectModalModuleLookup=ObjectModalModuleLookup;var ObjectSelectButton=function(){function e(e,t,s){this.metadata=e,this.popup=t,this.model=s,this.module="",this.displaymodulename=!0,this.selectedItems=new core_1.EventEmitter,this.displayModal=!1,this.popupSubscribe=void 0}var t;return e.prototype.ngOnInit=function(){this.model.module=this.module},e.prototype.getModuleSingular=function(){return this.displaymodulename?this.metadata.getModuleSingular(this.module):""},e.prototype.openModal=function(){var e=this;this.displayModal=!0,this.popupSubscribe=this.popup.closePopup$.subscribe(function(){e.displayModal=!1,e.popupSubscribe.unsubscribe()})},e.prototype.emitSelectedItems=function(e){this.selectedItems.emit(e)},__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"module",void 0),__decorate([core_1.Input(),__metadata("design:type",Boolean)],e.prototype,"displaymodulename",void 0),__decorate([core_1.Output(),__metadata("design:type","function"==typeof(t=void 0!==core_1.EventEmitter&&core_1.EventEmitter)?t:Object)],e.prototype,"selectedItems",void 0),e=__decorate([core_1.Component({selector:"object-select-button",template:'<button class="slds-button slds-button--neutral" (click)="openModal()">Select</button><object-modal-module-lookup *ngIf="displayModal" (selectedItems)="emitSelectedItems($event)"></object-modal-module-lookup>',providers:[services_1.model,services_1.popup]}),__metadata("design:paramtypes",[services_1.metadata,services_1.popup,services_1.model])],e)}();exports.ObjectSelectButton=ObjectSelectButton;var ObjectMergeButton=function(){function e(e,t,s,i,o){this.language=e,this.metadata=t,this.model=s,this.modal=i,this.injector=o,this.merged=new core_1.EventEmitter}var t,s;return Object.defineProperty(e.prototype,"enabled",{get:function(){var e;return 0<(null===(e=this.mergemodels)||void 0===e?void 0:e.length)&&this.model.checkAccess("edit")&&0<this.mergemodels.filter(function(e){var t;return 1==(null===(t=e.acl)||void 0===t?void 0:t.delete)}).length},enumerable:!1,configurable:!0}),e.prototype.doMerge=function(){var t=this;this.modal.openModal("ObjectMergeModal",!0,this.injector).subscribe(function(e){e.instance.mergemodels=t.mergemodels})},__decorate([core_1.Input(),__metadata("design:type",Array)],e.prototype,"mergemodels",void 0),__decorate([core_1.Output(),__metadata("design:type","function"==typeof(t=void 0!==core_1.EventEmitter&&core_1.EventEmitter)?t:Object)],e.prototype,"merged",void 0),e=__decorate([core_1.Component({selector:"object-merge-button",template:'<button [disabled]="!enabled" class="slds-button slds-button--neutral slds-show--large" (click)="doMerge()"><span><system-label label="LBL_MERGE"></system-label></span></button>'}),__metadata("design:paramtypes",[services_1.language,services_1.metadata,services_1.model,services_1.modal,"function"==typeof(s=void 0!==core_1.Injector&&core_1.Injector)?s:Object])],e)}();exports.ObjectMergeButton=ObjectMergeButton;var ObjectAddressesPipe=function(){function e(){}return e.prototype.transform=function(e){var t=[];for(var s in e)t.push(e[s]);return t},e=__decorate([core_1.Pipe({name:"objectaddressespipe",pure:!1})],e)}();exports.ObjectAddressesPipe=ObjectAddressesPipe;var ObjectAddresses=function(){function ObjectAddresses(e,t,s,i,o){this.language=e,this.metadata=t,this.model=s,this.view=i,this.modelutilities=o,this.componentconfig={},this.expanded=!0}return Object.defineProperty(ObjectAddresses.prototype,"hasAddresses",{get:function(){try{return null!=this.model.data.addresses.beans}catch(e){return!1}},enumerable:!1,configurable:!0}),ObjectAddresses.prototype.ngOnInit=function(){this.componentconfig.collapsed&&(this.expanded=!1)},Object.defineProperty(ObjectAddresses.prototype,"hidden",{get:function(){return this.componentconfig.requiredmodelstate&&!this.model.checkModelState(this.componentconfig.requiredmodelstate)},enumerable:!1,configurable:!0}),ObjectAddresses.prototype.getDisplay=function(){return 0<this.addresses.length||this.view.isEditMode()?"inherit":"none"},Object.defineProperty(ObjectAddresses.prototype,"addresses",{get:function(){var e=[];try{for(var t in this.model.data.addresses.beans)0==this.model.data.addresses.beans[t].deleted&&e.push(this.model.data.addresses.beans[t])}catch(e){}return e},enumerable:!1,configurable:!0}),ObjectAddresses.prototype.togglePanel=function(){this.expanded=!this.expanded},ObjectAddresses.prototype.getChevronStyle=function(){if(!this.expanded)return{transform:"rotate(45deg)","margin-top":"4px"}},ObjectAddresses.prototype.getTabStyle=function(){if(!this.expanded)return{height:"0px",transform:"rotateX(90deg)"}},ObjectAddresses.prototype.addAddress=function(){var e=this.modelutilities.generateGuid();null==this.model.data.addresses&&(this.model.data.addresses={beans:[]}),this.model.data.addresses.beans[e]={id:e,deleted:!1}},ObjectAddresses=__decorate([core_1.Component({selector:"object-addresses",template:'<div class="slds-section" [ngClass]="{\'slds-is-open\': expanded, \'slds-hide\': hidden}"><h3 class="slds-section__title"><button aria-controls="expando-unique-id" aria-expanded="true" class="slds-button slds-section__title-action" (click)="togglePanel()"><system-utility-icon [icon]="\'switch\'" [size]="\'x-small\'" [addclasses]="\'slds-section__title-action-icon slds-button__icon slds-button__icon_left\'"></system-utility-icon><span class="slds-truncate"><system-label label="LBL_ADDRESSES"></system-label></span></button></h3><div><div [ngStyle]="getTabStyle()"><ng-container *ngIf="hasAddresses"><object-address *ngFor="let address of addresses" [address]="address" [parent]="model" [fieldset]="componentconfig.fieldset"></object-address></ng-container><div *ngIf="view.isEditMode()" class="slds-box slds-m-around--x-small slds-align--absolute-center" style="padding:0.5rem;"><a href="javascript:void(0);" class="slds-text-link_reset" (click)="addAddress()"><system-label label="LBL_ADD_ADDRESS"></system-label></a></div></div></div></div>',host:{"[style.display]":"getDisplay()"}}),__metadata("design:paramtypes",[services_1.language,services_1.metadata,services_1.model,services_1.view,services_1.modelutilities])],ObjectAddresses)}();exports.ObjectAddresses=ObjectAddresses;var ObjectAddress=function(){function e(e,t,s,i,o,l){this.language=e,this.metadata=t,this.model=s,this.view=i,this.modelutilities=o,this.footer=l,this.componentconfig={},this.address={},this.parent={},this.fieldset="",this.model.module="Addresses"}return e.prototype.ngOnInit=function(){if(this.model.id=this.address.id,this.model.data=this.modelutilities.backendModel2spice("Addresses",this.address),null==this.fieldset||""==this.fieldset){var e=this.metadata.getComponentConfig("ObjectAddress",this.parent.module);null==e.fieldset&&""==e.fieldset||(this.fieldset=e.fieldset)}},e.prototype.deleteAddress=function(){var t=this;this.metadata.addComponent("SystemConfirmDialog",this.footer.footercontainer).subscribe(function(e){e.instance.title=t.language.getLabel("LBL_DELETE_ADDRESS_TITLE","Addresses"),e.instance.message=t.language.getLabel("LBL_DELETE_ADDRESS_TEXT","Addresses"),e.instance.answer.subscribe(function(e){e&&(t.model.data.deleted=!0)})})},__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"address",void 0),__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"parent",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"fieldset",void 0),e=__decorate([core_1.Component({selector:"object-address",template:'<div class="slds-box slds-m-around--x-small" style="padding: 0px"><object-record-fieldset [fieldset]="fieldset" [direction]="\'vertical\'"></object-record-fieldset><div *ngIf="view.isEditMode()" class="slds-text-align_right slds-m-around--x-small"><a href="javascript:void(0);" class="slds-text-link_reset" (click)="deleteAddress()"><system-label label="LBL_DELETE"></system-label></a></div></div>',providers:[services_1.model]}),__metadata("design:paramtypes",[services_1.language,services_1.metadata,services_1.model,services_1.view,services_1.modelutilities,services_1.footer])],e)}();exports.ObjectAddress=ObjectAddress;var ObjectGDPRModal=function(){function ObjectGDPRModal(e,t,s,i){this.language=e,this.metadata=t,this.model=s,this.view=i,this.componentconfig={},this.self={},this.gdprRelatedLog=[],this.gdprAuditLog=[],this.view.isEditable=!1}return ObjectGDPRModal.prototype.ngOnInit=function(){this.componentconfig=this.metadata.getComponentConfig("ObjectGDPRModal",this.model.module)},Object.defineProperty(ObjectGDPRModal.prototype,"fieldset",{get:function(){return this.componentconfig.fieldset},enumerable:!1,configurable:!0}),ObjectGDPRModal.prototype.hideGDPRLog=function(){this.self.destroy()},ObjectGDPRModal.prototype.getModelData=function(e){var t={module:this.model.module,id:this.model.id};return t[e.field_name]=this.model.utils.backend2spice(this.model.module,e.field_name,e.value),t},ObjectGDPRModal=__decorate([core_1.Component({template:'<system-modal size="large"><system-modal-header (close)="hideGDPRLog()"><system-label label="LBL_GDPR"></system-label></system-modal-header><system-modal-content margin="none" [grow]="true"><system-collapsable-tab *ngIf="fieldset" [title]="language.getLabel(\'LBL_DETAILS\')"><object-record-fieldset [fieldset]="fieldset" direction="vertical"></object-record-fieldset></system-collapsable-tab><system-collapsable-tab [title]="language.getLabel(\'LBL_GDPR_RECORDS\')"><table class="slds-table slds-table--bordered slds-table--cell-buffer"><thead><tr class="slds-text-title--caps"><th scope="col"><div class="slds-truncate"><system-label label="LBL_DATE_ENTERED"></system-label></div></th><th scope="col"><div class="slds-truncate"><system-label label="LBL_CREATED_BY"></system-label></div></th><th scope="col"><div class="slds-truncate"><system-label label="LBL_MODULE"></system-label></div></th><th scope="col"><div class="slds-truncate"><system-label label="LBL_NAME"></system-label></div></th><th scope="col"><div class="slds-truncate"><system-label label="LBL_DATA"></system-label></div></th><th scope="col"><div class="slds-truncate"><system-label label="LBL_MARKETING"></system-label></div></th></tr></thead><tbody><tr *ngFor="let gdprEntry of gdprRelatedLog"><td scope="row"><div class="slds-truncate">{{gdprEntry.date_entered}}</div></td><td scope="row"><div class="slds-truncate">{{gdprEntry.created_by_name}}</div></td><td scope="row"><div class="slds-grid slds-grid--vertical-align-center"><system-icon [module]="gdprEntry.module" size="xx-small"></system-icon><div class="slds-truncate">{{gdprEntry.module}}</div></div></td><td scope="row"><div class="slds-truncate">{{gdprEntry.summary_text}}</div></td><td scope="row"><span class="slds-checkbox"><input type="checkbox" disabled [id]="\'data\'+gdprEntry.id" [checked]="gdprEntry.gdpr_data_agreement == 1"> <label class="slds-checkbox__label" [attr.for]="\'data\'+gdprEntry.id"><span class="slds-checkbox_faux"></span></label></span></td><td scope="row"><span class="slds-checkbox"><input type="checkbox" disabled [id]="\'marketing\'+gdprEntry.id" [checked]="gdprEntry.gdpr_marketing_agreement == 1"> <label class="slds-checkbox__label" [attr.for]="\'marketing\'+gdprEntry.id"><span class="slds-checkbox_faux"></span></label></span></td></tr></tbody></table><div *ngIf="gdprRelatedLog.length === 0" class="slds-text-heading--small slds-p-around--medium slds-align--absolute-center"><system-label label="MSG_NO_GDPRRECORDS_FOUND"></system-label></div></system-collapsable-tab><system-collapsable-tab [title]="language.getLabel(\'LBL_AUDITLOG\')"><table class="slds-table slds-table--bordered slds-table--cell-buffer"><thead><tr class="slds-text-title--caps"><th scope="col"><div class="slds-truncate"><system-label label="LBL_DATE_MODIFIED"></system-label></div></th><th scope="col"><div class="slds-truncate"><system-label label="LBL_MODIFIED_BY"></system-label></div></th><th scope="col"><div class="slds-truncate"><system-label label="LBL_FIELD"></system-label></div></th><th scope="col"><div class="slds-truncate"><system-label label="LBL_VALUE"></system-label></div></th></tr></thead><tbody [system-view-provider]="{displayLabels: false}"><tr *ngFor="let gdprAuditEntry of gdprAuditLog" [system-model-provider]="{module: model.module, data:getModelData(gdprAuditEntry)}"><td scope="row"><div class="slds-truncate">{{gdprAuditEntry.date_created}}</div></td><td scope="row"><div class="slds-truncate">{{gdprAuditEntry.created_by_name}}</div></td><td scope="row"><div class="slds-truncate"><field-label [fieldname]="gdprAuditEntry.field_name"></field-label></div></td><td scope="row"><div class="slds-truncate"><field-container fielddisplayclass="slds-truncate" [field]="gdprAuditEntry.field_name"></field-container></div></td></tr></tbody></table><div *ngIf="gdprAuditLog.length === 0" class="slds-text-heading--small slds-p-around--medium slds-align--absolute-center"><system-label label="MSG_NOAUDITRECORDS_FOUND"></system-label></div></system-collapsable-tab></system-modal-content><system-modal-footer><button class="slds-button slds-button--neutral" (click)="hideGDPRLog()"><system-label label="LBL_CLOSE"></system-label></button></system-modal-footer></system-modal>',providers:[services_1.view]}),__metadata("design:paramtypes",[services_1.language,services_1.metadata,services_1.model,services_1.view])],ObjectGDPRModal)}();exports.ObjectGDPRModal=ObjectGDPRModal;var ObjectRowItemComponent=function(){function e(e,t,s,i){this.model=e,this.view=t,this.router=s,this.language=i,this.rowselect=!1,this.listFields=[],this.listItem={},this.inlineedit=!1,this.showActionMenu=!0,this._selected=!1,this.select=new core_1.EventEmitter}var t;return e.prototype.ngOnInit=function(){this.model.module=this.module,this.model.id=this.listItem.id,this.model.data=this.listItem,this.view.isEditable=this.inlineedit&&this.model.data.acl.edit},Object.defineProperty(e.prototype,"selected",{get:function(){return this._selected},set:function(e){this._selected=e,this.select.emit(e)},enumerable:!1,configurable:!0}),e.prototype.navigateDetail=function(){this.router.navigate(["/module/"+this.model.module+"/"+this.model.id])},__decorate([core_1.Input("rowselection"),__metadata("design:type",Boolean)],e.prototype,"rowselect",void 0),__decorate([core_1.Input("fields"),__metadata("design:type",Array)],e.prototype,"listFields",void 0),__decorate([core_1.Input("itemdata"),__metadata("design:type",Object)],e.prototype,"listItem",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"module",void 0),__decorate([core_1.Input(),__metadata("design:type",Boolean)],e.prototype,"inlineedit",void 0),__decorate([core_1.Input(),__metadata("design:type",Boolean)],e.prototype,"showActionMenu",void 0),__decorate([core_1.Input("selected"),core_1.HostBinding("class.slds-is-active"),core_1.HostBinding("class.slds-is-selected"),__metadata("design:type",Boolean)],e.prototype,"_selected",void 0),__decorate([core_1.Output(),__metadata("design:type",Object)],e.prototype,"select",void 0),e=__decorate([core_1.Component({selector:"[object-row-item]",template:'<td *ngIf="rowselect" role="gridcell" class="slds-cell-shrink"><label class="slds-checkbox"><input type="checkbox" [(ngModel)]="selected"> <span class="slds-checkbox--faux"></span></label></td><td *ngFor="let item of listFields" scope="row"><field-container [field]="item.field" [fieldconfig]="item.fieldconfig" [fielddisplayclass]="\'slds-truncate slds-p-horizontal--x-small\'"></field-container></td><td *ngIf="showActionMenu" role="gridcell" class="slds-cell-shrink"><object-action-menu [buttonsize]="\'small\'"></object-action-menu></td>',providers:[services_1.model,services_1.view]}),__metadata("design:paramtypes",[services_1.model,services_1.view,"function"==typeof(t=void 0!==router_1.Router&&router_1.Router)?t:Object,services_1.language])],e)}();exports.ObjectRowItemComponent=ObjectRowItemComponent;var ObjectActionVCardButton=function(){function ObjectActionVCardButton(e,t,s,i){this.language=e,this.model=t,this.modal=s,this.backend=i}return ObjectActionVCardButton.prototype.execute=function(){var e=this,s=this.model.module+"_"+this.model.getField("summary_text")+".vcf";this.modal.openModal("SystemLoadingModal").subscribe(function(t){t.instance.messagelabel="MSG_GENERATING_VCARD",e.backend.downloadFile({route:"/module/"+e.model.module+"/"+e.model.id+"/vcard"},s,"text/bin").subscribe(function(e){t.instance.self.destroy()},function(e){t.instance.self.destroy()})})},ObjectActionVCardButton=__decorate([core_1.Component({selector:"object-action-output-bean-button",template:"<span>VCARD</span>"}),__metadata("design:paramtypes",[services_1.language,services_1.model,services_1.modal,services_1.backend])],ObjectActionVCardButton)}();exports.ObjectActionVCardButton=ObjectActionVCardButton;var ObjectTableRow=function(){function e(e,t,s){this.language=e,this.model=t,this.view=s,this.fields=[],this.selected=!1,this.select$=new core_1.EventEmitter,this.unselect$=new core_1.EventEmitter,this.selectable=!1,this.view.isEditable=!1,this.view.displayLabels=!1}return e.prototype.ngOnInit=function(){this.selectable=null!==this.attr_selectable},e.prototype.toggleSelection=function(){if(!this.selectable)return!1;this.selected=!this.selected,this.selected?this.select$.emit(this.model.data):this.unselect$.emit(this.model.data)},__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"fields",void 0),__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"selected",void 0),__decorate([core_1.Output("select"),__metadata("design:type",Object)],e.prototype,"select$",void 0),__decorate([core_1.Output("unselect"),__metadata("design:type",Object)],e.prototype,"unselect$",void 0),__decorate([core_1.Input("selectable"),__metadata("design:type",String)],e.prototype,"attr_selectable",void 0),e=__decorate([core_1.Component({selector:"[object-table-row]",template:'<td *ngIf="selectable" class="slds-cell-shrink" system-title="LBL_SELECT_ROW"><system-checkbox (ngModelChange)="toggleSelection()" [ngModel]="selected"></system-checkbox></td><td *ngFor="let field of fields" [attr.data-label]="language.getFieldDisplayName(model.module, field.field, field.fieldconfig)"><div class="slds-truncate"><field-container [fieldname]="field.field" [fieldconfig]="field.fieldconfig" [fielddisplayclass]="\'slds-truncate\'"></field-container></div></td>',providers:[services_1.view],host:{class:"slds-hint-parent"}}),__metadata("design:paramtypes",[services_1.language,services_1.model,services_1.view])],e)}();exports.ObjectTableRow=ObjectTableRow;var ObjectTable=function(){function e(e,t,s,i){this.language=e,this.metadata=t,this.fields=[],this.objects=[],this.selected_objects=[],this.selected_objects$=new core_1.EventEmitter,this.max_selections=0,this.select$=new core_1.EventEmitter,this.selectable=!1,this.multiselect=!1,this.selectable=null!==s,this.multiselect=null!==i}return e.prototype.ngOnInit=function(){if(!this.fields||0==this.fields.length)if(this.fieldset_id)this.fields=this.metadata.getFieldSetFields(this.fieldset_id);else{var e=this.metadata.getComponentConfig("ObjectList",this.module);this.fields=this.metadata.getFieldSetFields(e.fieldset)}if(!this.fields||0==this.fields.length)throw new Error("No fields given, nor found for module "+this.module);this.selectable&&this.max_selections<1&&(this.max_selections=1),this.multiselect&&this.max_selections<2&&(this.max_selections=99)},e.prototype.toggleAll=function(){this.selected_objects.length<this.objects.length?this.selected_objects=__spreadArray([],this.objects):this.selected_objects=[],this.selected_objects$.emit(this.selected_objects),this.select$.emit(this.selected_objects)},e.prototype.select=function(e){!this.findSelectedObject(e)&&this.selected_objects.length<this.max_selections&&(this.selected_objects.push(e),this.selected_objects$.emit(this.selected_objects),this.select$.emit(this.selected_objects))},e.prototype.unselect=function(t){var e=this.selected_objects.findIndex(function(e){return e.id==t.id});-1<e&&(this.selected_objects.splice(e,1),this.selected_objects$.emit(this.selected_objects),this.select$.emit(this.selected_objects))},e.prototype.isObjectSelected=function(e){return!!this.findSelectedObject(e)},e.prototype.areAllObjectsSelected=function(){return this.selected_objects.length==this.objects.length},e.prototype.findSelectedObject=function(t){return this.selected_objects.find(function(e){return e.id==t.id})},__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"fields",void 0),__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"objects",void 0),__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"selected_objects",void 0),__decorate([core_1.Input("fieldset_id"),__metadata("design:type",String)],e.prototype,"fieldset_id",void 0),__decorate([core_1.Input("module"),__metadata("design:type",String)],e.prototype,"module",void 0),__decorate([core_1.Output("selected_objectsChange"),__metadata("design:type",Object)],e.prototype,"selected_objects$",void 0),__decorate([core_1.Input("max-selections"),__metadata("design:type",Object)],e.prototype,"max_selections",void 0),__decorate([core_1.Output("select"),__metadata("design:type",Object)],e.prototype,"select$",void 0),e=__decorate([core_1.Component({selector:"object-table",template:'<table class="slds-table slds-table_bordered slds-max-medium-table_stacked-horizontal slds-table_fixed-layout"><thead><tr class="slds-text-title--caps"><th *ngIf="selectable" class="slds-cell-shrink" scope="col"><span class="slds-assistive-text" id="check-group-header"><system-label label="LBL_CHOOSE_ROWS_TO_SELECT"></system-label></span><system-checkbox [ngModel]="areAllObjectsSelected()" (ngModelChange)="toggleAll()" [disabled]="objects.length > max_selections"></system-checkbox></th><th *ngFor="let field of fields" scope="col"><div *ngIf="!field.fieldconfig || !field.fieldconfig.hidelabel" class="slds-truncate"><system-label-fieldname [module]="module" [field]="field.field" [fieldconfig]="field.fieldconfig"></system-label-fieldname></div></th></tr></thead><tbody><tr object-table-row *ngFor="let object of objects" [fields]="fields" [system-model-provider]="{module:module, data:object}" [selectable]="selectable ? true : null" (select)="select($event)" (unselect)="unselect($event)" [selected]="isObjectSelected(object)"></tr></tbody></table>'}),__param(2,core_1.Attribute("selectable")),__param(3,core_1.Attribute("multiselect")),__metadata("design:paramtypes",[services_1.language,services_1.metadata,String,String])],e)}();exports.ObjectTable=ObjectTable;var ObjectModelPopover=function(){function ObjectModelPopover(e,t,s){this.model=e,this.view=t,this.metadata=s,this.popoverside="right",this.popoverpos="top",this.styles=null,this.hidePopoverTimeout={},this.parentElementRef=null,this.self=null,this.fields=[],this.fieldset="",this.componentset="",this.headercomponentset="",this.heightcorrection=30,this.widthcorrection=30,this.view.displayLinks=!1}var e,t;return Object.defineProperty(ObjectModelPopover.prototype,"relatedStyle",{get:function(){return{"max-height":"calc(100vh - "+(this.relatedContainer.element.nativeElement.getBoundingClientRect().top+5)+"px)"}},enumerable:!1,configurable:!0}),ObjectModelPopover.prototype.onMouseOver=function(){this.hidePopoverTimeout&&window.clearTimeout(this.hidePopoverTimeout)},ObjectModelPopover.prototype.onMouseOut=function(){this.closePopover()},Object.defineProperty(ObjectModelPopover.prototype,"popoverStyle",{get:function(){var e=this.parentElementRef.nativeElement.getBoundingClientRect(),t=this.popover.element.nativeElement.getBoundingClientRect();return e.left<t.width?this.popoverside="right":this.popoverside="left",e.top-30+t.height>window.innerHeight&&0<e.top-t.height+this.heightcorrection?(this.popoverpos="bottom",{top:e.top-t.height+this.heightcorrection+"px",left:e.left<t.width?e.left+100+"px":e.left-t.width-this.widthcorrection+"px"}):(this.popoverpos="top",{top:e.top-this.heightcorrection+"px",left:e.left<t.width?e.left+100+"px":e.left-t.width-this.widthcorrection+"px"})},enumerable:!1,configurable:!0}),ObjectModelPopover.prototype.ngOnInit=function(){var e=this.metadata.getComponentConfig("ObjectModelPopover",this.model.module);e.fieldset||e.componentset?(this.fields=this.metadata.getFieldSetFields(e.fieldset),this.fieldset=e.fieldset,this.componentset=e.componentset,this.headercomponentset=e.headercomponentset):(e=this.metadata.getComponentConfig("ObjectPageHeaderDetails",this.model.module)).fieldset&&(this.fields=this.metadata.getFieldSetFields(e.fieldset),this.fieldset=e.fieldset),this.styles=this.popoverStyle},ObjectModelPopover.prototype.getNubbinClass=function(){return("left"==this.popoverside?"slds-nubbin--right-":"slds-nubbin--left-")+this.popoverpos},ObjectModelPopover.prototype.closePopover=function(e){var t=this;void 0===e&&(e=!1),e?this.self.destroy():this.hidePopoverTimeout=window.setTimeout(function(){return t.self.destroy()},500)},__decorate([core_1.ViewChild("popover",{read:core_1.ViewContainerRef,static:!0}),__metadata("design:type","function"==typeof(e=void 0!==core_1.ViewContainerRef&&core_1.ViewContainerRef)?e:Object)],ObjectModelPopover.prototype,"popover",void 0),__decorate([core_1.ViewChild("relatedcontainer",{read:core_1.ViewContainerRef,static:!0}),__metadata("design:type","function"==typeof(t=void 0!==core_1.ViewContainerRef&&core_1.ViewContainerRef)?t:Object)],ObjectModelPopover.prototype,"relatedContainer",void 0),ObjectModelPopover=__decorate([core_1.Component({selector:"object-model-popover",template:'<div class="slds-popover slds-popover_large slds-popover--panel slds-is-fixed" style="transition: .5s; z-index: 11000;" [ngStyle]="popoverStyle" [ngClass]="getNubbinClass()" role="dialog" (mouseenter)="onMouseOver()" (mouseleave)="onMouseOut()"><button class="slds-button slds-button_icon slds-button_icon slds-button_icon-small slds-float_right slds-popover__close" (click)="closePopover(true)"><system-button-icon icon="close"></system-button-icon></button><div #popover><div class="slds-popover__header"><system-componentset *ngIf="headercomponentset" [componentset]="headercomponentset"></system-componentset><object-model-popover-header *ngIf="!headercomponentset"></object-model-popover-header><footer class="slds-grid slds-wrap slds-p-right--large"><div class="slds-p-horizontal--small slds-size--1-of-2 slds-p-bottom--x-small" [ngClass]="{\'slds-size--1-of-2\': fields.length > 1, \'slds-size--1-of-1\': fields.length == 1}" *ngFor="let field of fields"><dl><dd><field-container [field]="field.field" [fieldconfig]="field.fieldconfig" [fielddisplayclass]="\'slds-truncate\'"></field-container></dd></dl></div></footer></div><div #relatedcontainer class="slds-popover__body slds-scrollable--y spice-scrollbar" [ngStyle]="relatedStyle"><system-componentset [componentset]="componentset"></system-componentset></div></div></div>',providers:[services_1.view]}),__metadata("design:paramtypes",[services_1.model,services_1.view,services_1.metadata])],ObjectModelPopover)}();exports.ObjectModelPopover=ObjectModelPopover;var ObjectModelPopoverHeader=function(){function ObjectModelPopoverHeader(e){this.model=e}return ObjectModelPopoverHeader=__decorate([core_1.Component({selector:"object-model-popover-header",template:'<header class="slds-media slds-media_center slds-m-bottom_small slds-p-right--large"><system-icon [module]="model.module" size="small"></system-icon><div class="slds-media__body"><system-stencil *ngIf="model.isLoading"></system-stencil><h2 class="slds-text-heading_small slds-hyphenate"><a href="javascript:void(0);" (click)="model.goDetail()">{{model.data.summary_text}}</a></h2></div></header>'}),__metadata("design:paramtypes",[services_1.model])],ObjectModelPopoverHeader)}();exports.ObjectModelPopoverHeader=ObjectModelPopoverHeader;var ObjectModelPopoverField=function(){function ObjectModelPopoverField(e,t){this.model=e,this.view=t,this.componentconfig={}}return Object.defineProperty(ObjectModelPopoverField.prototype,"hidden",{get:function(){return this.componentconfig.hideempty&&!this.model.getFieldValue(this.componentconfig.field)},enumerable:!1,configurable:!0}),Object.defineProperty(ObjectModelPopoverField.prototype,"fieldname",{get:function(){return this.componentconfig.field?this.componentconfig.field:""},enumerable:!1,configurable:!0}),ObjectModelPopoverField=__decorate([core_1.Component({template:'<div *ngIf="fieldname" class="slds-p-vertical--xx-small slds-p-horizontal--large" [ngClass]="{\'slds-hide\' : hidden}"><field-label [fieldname]="fieldname"></field-label><field-container [fieldname]="fieldname"></field-container></div>',providers:[services_1.view]}),__metadata("design:paramtypes",[services_1.model,services_1.view])],ObjectModelPopoverField)}();exports.ObjectModelPopoverField=ObjectModelPopoverField;var ObjectModelPopoverRelated=function(n){function ObjectModelPopoverRelated(e,t,s,i,o,l){var a=n.call(this,e,t,s,i,o)||this;return a.language=e,a.metadata=t,a.relatedmodels=s,a.model=i,a.cdref=o,a.router=l,a}var e,t;return __extends(ObjectModelPopoverRelated,n),Object.defineProperty(ObjectModelPopoverRelated.prototype,"canViewAll",{get:function(){return 0<this.relatedmodels.count&&this.relatedmodels.count>this.relatedmodels.loaditems},enumerable:!1,configurable:!0}),ObjectModelPopoverRelated.prototype.showAll=function(){this.router.navigate(["/module/"+this.model.module+"/"+this.model.id+"/"+this.relatedmodels.relatedModule+"/"+this.relatedmodels._linkName])},ObjectModelPopoverRelated=__decorate([core_1.Component({selector:"object-model-popover-related",template:'<dl *ngIf="this.aclAccess" class="slds-popover__body-list"><dt class="slds-m-bottom_small"><div class="slds-media slds-media_center"><div class="slds-media__figure"><system-icon [module]="relatedmodels.relatedModule" size="small"></system-icon></div><div class="slds-media__body"><p class="slds-text-heading_small slds-hyphenate"><system-label [label]="panelTitle"></system-label><ng-container *ngIf="!relatedmodels.isloading">&nbsp;({{relatedmodels.count}})</ng-container></p></div></div></dt><div *ngIf="relatedmodels.isloading" class="slds-align_absolute-center"><system-spinner size="12"></system-spinner></div><object-model-popover-related-item *ngFor="let relateditem of relatedmodels.items" [module]="relatedmodels.relatedModule" [item]="relateditem" [fields]="listfields"></object-model-popover-related-item><dd *ngIf="canViewAll" class="slds-m-top_x-small slds-text-align_right"><a href="javascript:void(0);" (click)="showAll()"><system-label label="LBL_VIEWALL"></system-label></a></dd></dl>',providers:[services_1.relatedmodels]}),__metadata("design:paramtypes",[services_1.language,services_1.metadata,services_1.relatedmodels,services_1.model,"function"==typeof(e=void 0!==core_1.ChangeDetectorRef&&core_1.ChangeDetectorRef)?e:Object,"function"==typeof(t=void 0!==router_1.Router&&router_1.Router)?t:Object])],ObjectModelPopoverRelated)}(ObjectRelatedlistList);exports.ObjectModelPopoverRelated=ObjectModelPopoverRelated;var ObjectModelPopoverRelatedItem=function(){function e(e,t,s,i){this.language=e,this.metadata=t,this.model=s,this.view=i,this.module="",this.item={},this.fields=[],this.view.displayLabels=!1}return e.prototype.ngOnInit=function(){this.model.module=this.module,this.model.id=this.item.id,this.model.data=this.item},e.prototype.goDetail=function(){this.model.goDetail()},__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"module",void 0),__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"item",void 0),__decorate([core_1.Input(),__metadata("design:type",Array)],e.prototype,"fields",void 0),e=__decorate([core_1.Component({selector:"object-model-popover-related-item",template:'<dd class="slds-m-top_x-small"><p class="slds-truncate" [title]="model.displayname"><a href="javascript:void(0);" (click)="goDetail()">{{model.displayname}}</a></p><dl class="slds-list_horizontal slds-wrap slds-text-body_small"><ng-container *ngFor="let field of fields"><dt class="slds-item_label slds-text-color_weak slds-truncate"><field-label [fieldname]="field.field" [fieldconfig]="field.fieldconfig"></field-label></dt><dd class="slds-item_detail slds-text-color_weak slds-truncate" title="$500,000"><field-container [field]="field.field" [fieldconfig]="field.fieldconfig" [fielddisplayclass]="\'slds-truncate\'"></field-container></dd></ng-container></dl></dd>',providers:[services_1.model,services_1.view]}),__metadata("design:paramtypes",[services_1.language,services_1.metadata,services_1.model,services_1.view])],e)}();exports.ObjectModelPopoverRelatedItem=ObjectModelPopoverRelatedItem;var ObjectRecordMessagesBadge=function(){function e(e,t){this.model=e,this.language=t,this.side="left",this.showpopover=!1}return Object.defineProperty(e.prototype,"messagecount",{get:function(){return this.model.getMessages().length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"messages",{get:function(){return this.model.getMessages()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nubbinClass",{get:function(){return"right"==this.side?"slds-nubbin_bottom-right":"slds-nubbin_bottom-left"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"popoverStyle",{get:function(){return"right"==this.side?{bottom:"37px",right:"-10px"}:{bottom:"37px",left:"-10px"}},enumerable:!1,configurable:!0}),__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"side",void 0),e=__decorate([core_1.Component({selector:"object-record-messages-badge",template:'<div class="slds-is-relative" *ngIf="messagecount"><span class="slds-badge slds-theme--error slds-m-horizontal--xx-small" (click)="showpopover = !showpopover">{{messagecount}} <system-label label="LBL_ERRORS"></system-label></span><section *ngIf="showpopover" aria-label="Model Errors" class="slds-popover slds-popover_error slds-nubbin_bottom-left slds-is-absolute" [ngClass]="nubbinClass" [ngStyle]="popoverStyle" role="dialog"><button class="slds-button slds-button_icon slds-button_icon-small slds-float_right slds-popover__close" title="Close dialog" (click)="showpopover = false;"><system-button-icon icon="close" [inverse]="true"></system-button-icon></button><header class="slds-popover__header"><div class="slds-media slds-media_center slds-has-flexi-truncate"><system-utility-icon icon="error" size="x-small" colorclass="slds-icon-utility-error"></system-utility-icon><div class="slds-media__body slds-text-align--left slds-p-left--x-small"><h2 class="slds-truncate slds-text-heading_small" title="Resolve error"><system-label label="LBL_VALIDATION_ERRORS"></system-label></h2></div></div></header><div class="slds-popover__body slds-p-horizontal--none"><table class="slds-table slds-table_cell-buffer slds-table_bordered"><tbody><tr class="slds-hint-parent" *ngFor="let message of messages"><td data-label="type"><div class="slds-truncate"><system-utility-icon [icon]="message.type" size="x-small"></system-utility-icon></div></td><td data-label="Field"><div class="slds-truncate"><system-label-fieldname [module]="model.module" [field]="message.reference"></system-label-fieldname></div></td><td data-label="Message"><div class="slds-truncate">{{message.message}}</div></td></tr></tbody></table></div></section></div>'}),__metadata("design:paramtypes",[services_1.model,services_1.language])],e)}();exports.ObjectRecordMessagesBadge=ObjectRecordMessagesBadge;var ObjectActionDeactivateBeansButton=function(){function e(e,t,s,i,o,l){this.language=e,this.metadata=t,this.modal=s,this.injector=i,this.modellist=o,this.modalwindow=l,this.saving=!1,this.selectedItems=[]}var t;return Object.defineProperty(e.prototype,"disabled",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasSelection",{get:function(){return 1<this.modellist.getSelectedCount()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hidden",{get:function(){return!this.hasSelection},enumerable:!1,configurable:!0}),e.prototype.execute=function(){var t=this;this.saving||(this.selectedItems=this.modellist.getSelectedItems(),this.modal.openModal("ObjectActionDeactivateBeansModal",!0,this.injector).subscribe(function(e){e&&(e.instance.selectedItems=t.selectedItems,e.instance.module=t.modellist.module)}))},e=__decorate([core_1.Component({selector:"object-action-deactivate-beans-button",template:'<span><system-label label="LBL_DEACTIVATE_BEANS"></system-label></span>'}),__param(5,core_1.Optional()),__metadata("design:paramtypes",[services_1.language,services_1.metadata,services_1.modal,"function"==typeof(t=void 0!==core_1.Injector&&core_1.Injector)?t:Object,services_1.modellist,services_1.modalwindow])],e)}();exports.ObjectActionDeactivateBeansButton=ObjectActionDeactivateBeansButton;var ObjectActionDeactivateBeansModal=function(){function e(e,t,s){this.language=e,this.model=t,this.metadata=s,this.componentconfig={},this.selectedItems=[],this.module=[],this.showfinish=!1,this.self={},this.value=""}return e.prototype.ngOnInit=function(){this.componentconfig=this.metadata.getComponentConfig("ObjectActionDeactivateBeansModal",this.model.module),this.value=this.selectedItems[0].id},e.prototype.fieldname=function(e){return e[this.componentconfig.fieldname]},e.prototype.closeModal=function(){this.self.destroy()},e.prototype.select=function(){for(var s=this,i=0,e=function(t){t.id!=o.value?(t.successor_id=o.value,t.is_inactive=1,o.model.reset(),o.model.id=t.id,o.model.initialize(),o.model.module=o.module,o.model.data=t,o.model.validate()?o.model.save().subscribe(function(e){i++,t.itemsaved="deactivated",i==s.selectedItems.length-1&&(s.showfinish=!0)},function(e){i++,t.itemsaved="error",i==s.selectedItems.length-1&&(s.showfinish=!0)}):i++):i++},o=this,t=0,l=this.selectedItems;t<l.length;t++){e(l[t])}},__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"selectedItems",void 0),__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"module",void 0),e=__decorate([core_1.Component({template:'<system-modal size="x-small"><system-modal-header (close)="closeModal()"><system-label label="LBL_SELECT_ACTIVE"></system-label></system-modal-header><system-modal-content margin="none"><div class="slds-m-left_x-small slds-m-vertical_large"><div class="slds-form-element"><div class="slds-form-element__control"><system-input-radio *ngFor="let item of selectedItems" name="module" [value]="item.id" [(ngModel)]="value">{{fieldname(item)}}<div class="slds-float--right slds-m-right_small" *ngIf="item.itemsaved == \'deactivated\'"><system-label label="LBL_DEACTIVATED"></system-label><system-button-icon class="slds-m-left_small" [icon]="\'check\'"></system-button-icon></div><div class="slds-float--right slds-m-right_small" *ngIf="item.itemsaved == \'error\'"><system-label label="LBL_ERROR"></system-label><system-button-icon class="slds-m-left_small" [icon]="\'close\'"></system-button-icon></div></system-input-radio></div></div></div></system-modal-content><system-modal-footer><button *ngIf="!showfinish" class="slds-button slds-button--neutral" (click)="closeModal()"><system-label label="LBL_CANCEL"></system-label></button> <button *ngIf="!showfinish" class="slds-button slds-button--brand" (click)="select()"><system-label label="LBL_EXECUTE"></system-label></button> <button *ngIf="showfinish" class="slds-button slds-button--brand" (click)="closeModal()"><system-label label="LBL_FINISH"></system-label></button></system-modal-footer></system-modal>',providers:[services_1.model]}),__metadata("design:paramtypes",[services_1.language,services_1.model,services_1.metadata])],e)}();exports.ObjectActionDeactivateBeansModal=ObjectActionDeactivateBeansModal;var ObjectChecklists=function(){function ObjectChecklists(e,t,s){this.model=e,this.language=t,this.metadata=s,this.isAddingChecklist=!1,this.isSaving=!1,this.checklists=[],this.subscriptions=new rxjs_1.Subscription,this.fieldName="checklists",this.panelExpanded=!1}return ObjectChecklists.prototype.ngOnInit=function(){this.setFieldName(),this.loadData()},ObjectChecklists.prototype.ngOnDestroy=function(){this.subscriptions.unsubscribe()},ObjectChecklists.prototype.addChecklist=function(e){if(this.checklists||(this.checklists=[]),e){var t={id:this.model.generateGuid(),name:e,showCompleted:!0,items:[]};this.checklists=__spreadArray([t],this.checklists),this.isAddingChecklist=!1,this.setActiveChecklist(t),this.save(t)}},ObjectChecklists.prototype.addChecklistItem=function(e,t){if(t.value){var s={id:this.model.generateGuid(),isCompleted:!1,text:t.value,isChanged:!0};e.items.push(s),t.value="",this.save(s)}},ObjectChecklists.prototype.deleteChecklist=function(t){this.checklists=this.checklists.filter(function(e){return e!=t}),this.save(t)},ObjectChecklists.prototype.deleteChecklistItem=function(t,e){e.items=e.items.filter(function(e){return e!=t}),t.isChanged=!0,this.save(t)},ObjectChecklists.prototype.setCurrentEditingItem=function(e){e.isChanged||(e.textBackup=e.text),this.currentEditingItem=e},ObjectChecklists.prototype.onItemBlur=function(e,t){t.contains(e.relatedTarget)||(this.currentEditingItem=void 0)},ObjectChecklists.prototype.onChecklistBlur=function(e,t,s,i){s.contains(t.relatedTarget)||!s.contains(t.relatedTarget)&&i.value||(e.showAddButton=!0)},ObjectChecklists.prototype.setShowAddChecklist=function(e){this.isAddingChecklist=e},ObjectChecklists.prototype.setCurrentEditingChecklist=function(e){this.currentEditingChecklist=e},ObjectChecklists.prototype.save=function(s){var e,t=this;if(!("isChanged"in s&&!1===(null==s?void 0:s.isChanged)||"items"in s&&!s.name)){this.isSaving=!0,"items"in s&&this.setCurrentEditingChecklist(void 0);var i=this.checklists.map(function(e){var t=__assign({},e);return t.items=t.items.map(function(e){var t=__assign({},e);return s!=e&&t.isChanged&&(t.text=e.textBackup),delete t.isChanged,delete t.textBackup,t}),t});"isChanged"in s&&delete s.isChanged,"textBackup"in s&&delete s.textBackup,this.model.backend.save(this.model.module,this.model.id,((e={})[this.fieldName]=i,e)).subscribe(function(){return t.isSaving=!1}),this.currentEditingItem=void 0}},ObjectChecklists.prototype.cancelItemChanges=function(e,t){t.stopPropagation(),e.text=e.textBackup,e.isChanged=!1,this.currentEditingItem=void 0},ObjectChecklists.prototype.setActiveChecklist=function(e){e!=this.activeChecklist&&(this.activeChecklist&&(this.activeChecklist.showAddButton=!0),e&&this.setShowAddButton(e,!1),this.activeChecklist=e)},ObjectChecklists.prototype.setShowAddButton=function(e,t){e.showAddButton=t},ObjectChecklists.prototype.setItemTextValue=function(e,t){t.isChanged=e!=t.text,t.text=e},ObjectChecklists.prototype.setChecklistName=function(e,t){t.name=e},ObjectChecklists.prototype.toggleShowCompleted=function(e){e.showCompleted=!e.showCompleted,this.currentEditingItem=void 0,this.save(e)},ObjectChecklists.prototype.setFieldName=function(){var e,t=null===(e=this.metadata.getComponentConfig("ObjectChecklists",this.model.module))||void 0===e?void 0:e.fieldName;t&&(this.fieldName=t)},ObjectChecklists.prototype.loadData=function(){var t=this;this.model.backend.get(this.model.module,this.model.id).subscribe(function(e){(null==e?void 0:e[t.fieldName])&&(t.checklists=e[t.fieldName])})},ObjectChecklists.prototype.onDrop=function(e){e.previousContainer===e.container?drag_drop_1.moveItemInArray(e.container.data,e.container.data.indexOf(e.item.data),e.currentIndex):drag_drop_1.transferArrayItem(e.previousContainer.data,e.container.data,e.previousContainer.data.indexOf(e.item.data),e.currentIndex),e.item.data.isChanged=!0,this.save(e.item.data)},ObjectChecklists.prototype.toggleExpansion=function(){this.panelExpanded=!this.panelExpanded},ObjectChecklists=__decorate([core_1.Component({selector:"object-checklists",template:'<div class="slds-section" [class.slds-is-open]="panelExpanded"><div class="slds-section__title slds-m-bottom--small"><div aria-expanded="true" class="slds-section__title-action slds-grid" (click)="toggleExpansion()"><system-utility-icon icon="switch" size="x-small" addclasses="slds-section__title-action-icon slds-button__icon slds-button__icon_left"></system-utility-icon><div class="slds-grid slds-grid--vertical-align-center slds-grow"><span class="slds-truncate"><system-label label="LBL_CHECKLISTS"></system-label></span></div><div (click)="$event.stopPropagation()" class="slds-grid slds-grid--align-end"><button (click)="setShowAddChecklist(true)" [class.slds-hide]="isAddingChecklist" system-title="LBL_ADD_CHECKLIST" class="slds-button slds-button--icon slds-button--icon-border slds-button slds-align--absolute-center" style="height: 1.4rem; width: 1.6rem;"><system-button-icon icon="add" size="medium"></system-button-icon></button><div *ngIf="isAddingChecklist" class="slds-grid slds-grid--vertical-align-center"><input #addChecklistInput system-autofocus (keyup.enter)="addChecklist(addChecklistInput.value)" type="text" class="slds-input slds-grow slds-truncate slds-m-right--xx-small" style="min-height: 0;height: 1.6rem;"> <button (click)="addChecklist(addChecklistInput.value)" [disabled]="!addChecklistInput.value" system-title="LBL_CHECK" class="slds-button slds-button--icon slds-button--icon-border-filled" style="height: 1.4rem; width: 1.6rem;"><system-button-icon icon="check"></system-button-icon></button> <button (click)="setShowAddChecklist(false)" system-title="LBL_CANCEL" class="slds-button slds-button--icon slds-button--icon-border-filled" style="height: 1.4rem; width: 1.6rem;"><system-button-icon icon="close" size="medium"></system-button-icon></button></div></div></div></div><div [@tabAnimation]="panelExpanded" [style.display]="!panelExpanded ? \'none\': \'block\'"><div [system-overlay-loading-spinner]="model.isLoading || isSaving" class="slds-form-element__control objectchecklistdragboundary"><div cdkDropList [cdkDropListData]="checklists" (cdkDropListDropped)="onDrop($event)" cdkDropListLockAxis="y" cdkDropListGroup><div *ngFor="let checklist of checklists" (click)="setActiveChecklist(checklist)" cdkDrag [cdkDragData]="checklist" cdkDragBoundary=".objectchecklistdragboundary" class="slds-box slds-p-around--none slds-m-bottom--small slds-drag--preview"><div class="slds-grid slds-grid--vertical-align-center slds-m-bottom--large slds-border--bottom slds-p-around--small slds-theme--shade spice-hover-display-children" style="min-height: 58px"><div style="min-width: 32px;"><system-utility-icon [class.spice-hover-child]="checklist != activeChecklist" class="slds-p-horizontal--x-small" cdkDragHandle style="cursor: move" icon="drag_and_drop" size="x-small"></system-utility-icon></div><div *ngIf="currentEditingChecklist != checklist" class="slds-grow slds-truncate"><span (click)="setCurrentEditingChecklist(checklist); $event.stopPropagation()" [system-title]="checklist.name" style="min-width: 20px">{{checklist.name}}</span></div><input system-autofocus (click)="$event.stopPropagation()" *ngIf="currentEditingChecklist == checklist" type="text" [ngModel]="checklist.name" (ngModelChange)="setChecklistName($event, checklist)" (keyup.enter)="save(checklist)" (blur)="save(checklist)" class="slds-input slds-m-right--xx-small"> <button *ngIf="checklist.showAddButton" (click)="setShowAddButton(checklist, false)" [class.spice-hover-child]="checklist != activeChecklist" system-title="LBL_ADD_ITEM" class="slds-button slds-button--icon slds-button--icon-border-filled slds-button slds-align--absolute-center"><system-button-icon icon="add" size="medium"></system-button-icon></button> <button (click)="deleteChecklist(checklist)" [class.spice-hover-child]="checklist != activeChecklist" system-title="LBL_DELETE" class="slds-button slds-button--icon slds-button--icon-border-filled"><system-button-icon icon="delete" size="medium"></system-button-icon></button> <button (click)="toggleShowCompleted(checklist)" [system-title]="checklist.showCompleted ? \'LBL_HIDE_COMPLETED\' : \'LBL_SHOW_COMPLETED\'" [class.spice-hover-child]="checklist != activeChecklist" class="slds-button slds-button--neutral"><system-button-icon icon="toggle" size="medium" addclasses="slds-button__icon_left"></system-button-icon><system-label [label]="checklist.showCompleted ? \'LBL_HIDE_COMPLETED\' : \'LBL_SHOW_COMPLETED\'" class="slds-truncate"></system-label></button></div><div cdkDropList [cdkDropListData]="checklist.items" (cdkDropListDropped)="onDrop($event)" cdkDropListLockAxis="y" style="min-height: 20px;"><div #itemContainer *ngFor="let item of checklist.items" [class.slds-hide]="!checklist.showCompleted && item.isCompleted" [class.slds-theme--warning]="currentEditingItem != item && item.isChanged" class="slds-p-vertical--xx-small spice-hover-display-children"><div cdkDrag [cdkDragData]="item" (click)="setCurrentEditingItem(item); $event.stopPropagation()" cdkDragBoundary=".objectchecklistdragboundary" class="slds-grid slds-grid--vertical-align-center slds-drag--preview slds-p-right--x-small"><div style="min-width: 32px;"><system-utility-icon [class.spice-hover-child]="item != currentEditingItem" class="slds-p-horizontal--x-small" cdkDragHandle style="cursor: move" icon="drag_and_drop" size="x-small"></system-utility-icon></div><system-checkbox [(ngModel)]="item.isCompleted" (ngModelChange)="save(item)"></system-checkbox><div *ngIf="item == currentEditingItem; else itemTextContainer" class="slds-grid slds-grow slds-p-right--xx-small"><input type="text" [ngModel]="item.text" system-autofocus (ngModelChange)="setItemTextValue($event, item)" (keyup.enter)="save(item)" class="slds-input slds-m-right--xx-small" (blur)="onItemBlur($event, itemContainer)"> <button (click)="save(item); $event.stopPropagation()" [disabled]="!item.isChanged" system-title="LBL_CHECK" class="slds-button slds-button--icon slds-button--icon-border-filled"><system-button-icon icon="check"></system-button-icon></button> <button (click)="cancelItemChanges(item, $event)" system-title="LBL_CANCEL" class="slds-button slds-button--icon slds-button--icon-border-filled"><system-button-icon icon="close" size="medium"></system-button-icon></button></div><ng-template #itemTextContainer><div [system-title]="item.text" [style.text-decoration]="item.isCompleted ? \'line-through\' : \'initial\'" class="slds-grow slds-p-right--xx-small slds-truncate">{{item.text}}</div></ng-template><div style="width: 32px; height: 32px"><button (click)="deleteChecklistItem(item, checklist)" [class.spice-hover-child]="item != currentEditingItem" class="slds-button slds-button--icon slds-button--icon-border-filled"><system-button-icon icon="delete" size="medium"></system-button-icon></button></div></div><div *ngIf="currentEditingItem != item && item.isChanged" (click)="setCurrentEditingItem(item)" class="slds-p-horizontal--small slds-p-bottom--xx-small"><system-label label="MSG_HAS_UNSAVED"></system-label></div></div></div><div *ngIf="!checklist.showAddButton" class="slds-box slds-m-top--large slds-m-around--small"><div #addItemContainer class="slds-grid"><input #addItemInput system-autofocus (keyup.enter)="addChecklistItem(checklist, addItemInput)" (blur)="onChecklistBlur(checklist, $event, addItemContainer, addItemInput)" type="text" class="slds-input slds-m-right--x-small"> <button (click)="addChecklistItem(checklist, addItemInput)" [disabled]="!addItemInput.value" system-title="LBL_SAVE" class="slds-button slds-button--icon slds-button--icon-border-filled slds-button slds-align--absolute-center"><system-button-icon icon="check" size="medium"></system-button-icon></button> <button (click)="setShowAddButton(checklist, true)" system-title="LBL_CANCEL" class="slds-button slds-button--icon slds-button--icon-border-filled slds-button slds-align--absolute-center"><system-button-icon icon="clear" size="medium"></system-button-icon></button></div></div></div></div></div></div></div>',animations:[animations_1.trigger("tabAnimation",[animations_1.state("true",animations_1.style({height:"*",opacity:1})),animations_1.state("false",animations_1.style({height:"0px",opacity:0})),animations_1.transition("true => false",[animations_1.style({overflow:"hidden"}),animations_1.animate(".5s")]),animations_1.transition("false => true",[animations_1.animate(".5s"),animations_1.style({overflow:"inherit"})])])]}),__metadata("design:paramtypes",[services_1.model,services_1.language,services_1.metadata])],ObjectChecklists)}();exports.ObjectChecklists=ObjectChecklists;var ObjectComponents=function(){function ObjectComponents(){}return ObjectComponents=__decorate([core_1.NgModule({imports:[common_1.CommonModule,drag_drop_1.DragDropModule,forms_1.FormsModule,objectfields_1.ObjectFields,systemcomponents_1.SystemComponents,directives_1.DirectivesModule,router_1.RouterModule],declarations:[ObjectListViewContainer,ObjectListView,ObjectListTypes,ObjectListViewHeader,ObjectListViewHeaderDetails,ObjectListViewHeaderListSelector,ObjectList,ObjectListHeader,ObjectListHeaderSort,ObjectActionContainer,ObjectActionContainerItem,ObjectListHeaderActionMenu,ObjectListHeaderActionsAssignButton,ObjectListHeaderActionsAssignModal,ObjectListHeaderActionsDeleteButton,ObjectListHeaderActionsMergeButton,ObjectListHeaderActionsExportCSVButton,ObjectFieldFilterPipe,ObjectListHeaderActionsExportCSVSelectFields,ObjectListHeaderActionsExportTargetlistButton,ObjectListHeaderActionsExportTargetlistModal,ObjectListHeaderActionsSelectAllButton,ObjectListHeaderActionsUnselectAllButton,ObjectListHeaderActionsSelectRangeButton,ObjectListHeaderActionsSelectRangeModal,ObjectListItem,ObjectListItemField,ObjectActionMenu,ObjectActionsetMenu,ObjectActionsetMenuContainer,ObjectActionsetMenuContainerEdit,ObjectActionsetMenuContainerDelete,ObjectListViewAggregatesButton,ObjectListViewAggregatesPanel,ObjectListViewAggregate,ObjectListViewAggregateItem,ObjectListViewAggregateItemTerm,ObjectListViewAggregateItemRange,ObjectListViewTagsAggregate,ObjectListViewFilterButton,ObjectListViewFilterPanel,ObjectListViewFilterPanelFilterMyItems,ObjectListViewFilterPanelFilterGeo,ObjectListViewFilterPanelFilterItem,ObjectListViewSettings,ObjectListViewSettingsAddlistModal,ObjectListViewSettingsSetfieldsModal,ObjectActionEditButton,ObjectActionEditRelatedButton,ObjectActionSaveButton,ObjectActionSaveRelatedButton,ObjectActionDeleteButton,ObjectActionAuditlogButton,ObjectActionOpenButton,ObjectActionCancelButton,ObjectActionModalSaveButton,ObjectActionRemoveButton,ObjectActionAuditlogModal,ObjectGDPRModal,ObjectActionNewButton,ObjectActionDuplicateButton,ObjectActionNewrelatedButton,ObjectActionNewCopyRuleBeanButton,ObjectActionNewCopyRuleBeanButtonModelHelper,ObjectActionSelectButton,ObjectEditModal,ObjectEditModalWReference,ObjectEditModalDialogContainer,ObjectEditModalDialogDuplicates,ObjectEditModalDialogDuplicatesPanel,ObjectOptimisticLockingModal,ObjectOptimisticLockingModalDataField,ObjectOptimisticLockingModalChange,ObjectRecordViewContainer,ObjectRecordView,ObjectRecordViewDetail1,ObjectRecordViewDetail2and1,ObjectRecordViewDetailsplit,ObjectPageHeader,ObjectPageHeaderTags,ObjectPageHeaderTagPicker,ObjectPageHeaderDetails,ObjectPageHeaderDetailRow,ObjectPageHeaderDetailRowField,ObjectTabContainer,ObjectTabContainerItem,ObjectTabContainerItemHeader,ObjectVerticalTabContainer,ObjectVerticalTabContainerItem,ObjectVerticalTabContainerItemHeader,ObjectRelateContainer,ObjectRelatedCard,ObjectRelatedCardHeader,ObjectRelatedCardFooter,ObjectRelatedList,ObjectRelatedlistList,ObjectRelatedListItem,ObjectRelatedlistTiles,ObjectRelatedCardTile,ObjectRelatedlistFiles,ObjectRelatedCardFile,ObjectRelatedDuplicates,ObjectRelatedDuplicateTile,ObjectRelatedlistAll,ObjectRelatedlistTable,ObjectRelatedlistSequenced,ObjectRelatedListSequencedItem,ObjectFileActionMenu,ObjectRecordDetails,ObjectRecordDetailsTab,ObjectRecordDetailsModelstateTab,ObjectRecordDetailsFooter,ObjectRecordAdministrationTab,ObjectRecordDetailsTabRow,ObjectRecordDetailsTabRowField,ObjectRecordChecklist,ObjectRecordChecklistItem,ObjectRecordTabbedDetails,ObjectRecordTabbedDetailsTab,ObjectRecordDetailsRelatedListTab,ObjectModalModuleLookup,ObjectModalModuleLookupHeader,ObjectModalModuleLookupAggregates,ObjectSelectButton,ObjectReminderButton,ObjectSubscriptionButton,ObjectActionBeanToMailButton,ObjectActionMailModal,ObjectMergeButton,ObjectAddresses,ObjectAddressesPipe,ObjectAddress,ObjectRecordFieldset,ObjectRecordFieldsetField,ObjectRecordFieldsetHorizontalList,ObjectRecordFieldsetContainer,ObjectRowItemComponent,ObjectActionVCardButton,ObjectStatusNetworkButton,ObjectStatusNetworkButtonItem,ObjectKeyValuesPipe,ObjectTableRow,ObjectTable,ObjectModelPopover,ObjectModelPopoverHeader,ObjectModelPopoverField,ObjectModelPopoverRelated,ObjectModelPopoverRelatedItem,ObjectRecordMessagesBadge,ObjectActionDeactivateBeansButton,ObjectActionDeactivateBeansModal,ObjectChecklists],exports:[ObjectListViewHeader,ObjectList,ObjectListItem,ObjectPageHeader,ObjectPageHeaderDetails,ObjectPageHeaderDetailRow,ObjectActionContainer,ObjectActionMenu,ObjectActionsetMenu,ObjectSelectButton,ObjectRelatedList,ObjectRelatedlistTable,ObjectRelatedListItem,ObjectRecordFieldset,ObjectRecordFieldsetField,ObjectRecordFieldsetHorizontalList,ObjectRowItemComponent,ObjectTabContainerItemHeader,ObjectTableRow,ObjectTable,ObjectRelatedCard,ObjectRelatedCardHeader,ObjectRelatedCardFooter,ObjectRelatedCardTile,ObjectRecordDetails,ObjectRecordDetailsFooter,ObjectEditModalDialogContainer,ObjectListHeader,ObjectListHeaderActionMenu,ObjectRecordMessagesBadge,ObjectRelatedlistFiles,ObjectListTypes,ObjectListViewAggregate,ObjectListViewAggregatesButton,ObjectListViewHeaderDetails,ObjectListHeaderSort,ObjectRelatedlistFiles,ObjectKeyValuesPipe,ObjectPageHeaderTags,ObjectModalModuleLookup,ObjectModalModuleLookupHeader,ObjectModalModuleLookupAggregates,ObjectModelPopoverHeader,ObjectChecklists]})],ObjectComponents)}();exports.ObjectComponents=ObjectComponents;