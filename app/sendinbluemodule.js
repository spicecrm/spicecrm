/*!
 * 
 *                     aacService
 *
 *                     release: 2023.02.001
 *
 *                     date: 2023-08-15 08:39:15
 *
 *                     build: 2023.02.001.1692081555935
 *
 */
"use strict";(self.webpackChunkcore=self.webpackChunkcore||[]).push([["src_include_sendinblue_sendinbluemodule_ts"],{1887:(e,t,s)=>{s.r(t),s.d(t,{SendinBlueModule:()=>N});var n=s(1180),l=s(4755),o=s(5030),i=s(4357),a=s(3190),d=s(4826),u=s(6490),c=s(3735),r=s(2242),h=s(5329),m=s(4154),b=s(5710),g=s(4044),Z=s(4505),p=s(3278),S=s(3463);let B=(()=>{var e;class SendinBlueButton{constructor(e,t,s,l,o,i,a){(0,n.Z)(this,"language",void 0),(0,n.Z)(this,"metadata",void 0),(0,n.Z)(this,"model",void 0),(0,n.Z)(this,"modal",void 0),(0,n.Z)(this,"injector",void 0),(0,n.Z)(this,"backend",void 0),(0,n.Z)(this,"toast",void 0),this.language=e,this.metadata=t,this.model=s,this.modal=l,this.injector=o,this.backend=i,this.toast=a}get disabled(){return"0"==this.model.getFieldValue("entry_count")}execute(){let e=this.modal.await(this.language.getLabel("LBL_LOADING"));this.backend.getRequest(`channels/emarketing/sendinblue/${this.model.module}/${this.model.id}`).subscribe((t=>{e.emit(!0),t?this.modal.openModal("SendinBlueModal",!0,this.injector).subscribe((e=>{e.instance.contacts=t.synced})):this.toast.sendToast(this.language.getLabel("ERR_FAILED_TO_EXECUTE"),"error")}))}}return e=SendinBlueButton,(0,n.Z)(SendinBlueButton,"ɵfac",(function(t){return new(t||e)(r.Y36(h.d),r.Y36(m.Pu),r.Y36(b.o),r.Y36(g.o),r.Y36(r.zs3),r.Y36(Z.y),r.Y36(p.A))})),(0,n.Z)(SendinBlueButton,"ɵcmp",r.Xpm({type:e,selectors:[["sendinblue-button"]],decls:2,vars:2,consts:[["label","LBL_SENDINBLUE"]],template:function(e,t){1&e&&(r.TgZ(0,"span"),r._UZ(1,"system-label",0),r.qZA()),2&e&&r.ekj("disabled",t.disabled)},dependencies:[S._],encapsulation:2})),SendinBlueButton})();var L=s(3348),E=s(9621),y=s(3499),f=s(5767),v=s(1916);function T(e,t){if(1&e&&(r.TgZ(0,"div"),r._uU(1),r._UZ(2,"system-label",1)(3,"system-label",1),r.qZA()),2&e){const e=r.oxw();r.xp6(1),r.hij(" ",e.contacts.length," "),r.xp6(1),r.Q6J("label","MSG_SENDINBLUE_FOUND"),r.xp6(1),r.Q6J("label","MSG_SENDINBLUE_UPDATE_LIST")}}function U(e,t){1&e&&(r.TgZ(0,"div"),r._UZ(1,"system-label",1),r.qZA()),2&e&&(r.xp6(1),r.Q6J("label","MSG_SENDINBLUE_UPDATE_LIST"))}let M=(()=>{var e;class SendinBlueModal{constructor(e,t,s,l,o,i,a){(0,n.Z)(this,"language",void 0),(0,n.Z)(this,"router",void 0),(0,n.Z)(this,"metadata",void 0),(0,n.Z)(this,"backend",void 0),(0,n.Z)(this,"model",void 0),(0,n.Z)(this,"modal",void 0),(0,n.Z)(this,"toast",void 0),(0,n.Z)(this,"contacts",[]),(0,n.Z)(this,"self",{}),this.language=e,this.router=t,this.metadata=s,this.backend=l,this.model=o,this.modal=i,this.toast=a}updateSendInBlueList(){const e=this.model.getFieldValue("ext_id");_.isEmpty(e)?(this.toast.sendToast(this.language.getLabel("MSG_NO_EXT_ID"),"error"),this.close()):this.modal.openModal("SystemLoadingModal").subscribe((t=>{t.instance.messagelabel="LBL_UPDATING",this.backend.postRequest(`channels/emarketing/sendinblue/${this.model.module}/${this.model.id}/${e}`,{}).subscribe((e=>{e?(t.instance.self.destroy(),this.close(),this.toast.sendToast(this.language.getLabel("MSG_SUCCESSFULLY_EXECUTED"),"success")):this.toast.sendToast(this.language.getLabel("ERR_FAILED_TO_EXECUTE"),"error")}))}))}close(){this.self.destroy()}}return e=SendinBlueModal,(0,n.Z)(SendinBlueModal,"ɵfac",(function(t){return new(t||e)(r.Y36(h.d),r.Y36(L.F0),r.Y36(m.Pu),r.Y36(Z.y),r.Y36(b.o),r.Y36(g.o),r.Y36(p.A))})),(0,n.Z)(SendinBlueModal,"ɵcmp",r.Xpm({type:e,selectors:[["sendinblue-modal"]],decls:11,vars:5,consts:[[3,"close"],[3,"label"],[4,"ngIf"],[1,"slds-button","slds-button--brand",3,"click"]],template:function(e,t){1&e&&(r.TgZ(0,"system-modal")(1,"system-modal-header",0),r.NdJ("close",(function(){return t.close()})),r._UZ(2,"system-label",1),r.qZA(),r.TgZ(3,"system-modal-content"),r.YNc(4,T,4,3,"div",2),r.YNc(5,U,2,1,"div",2),r.qZA(),r.TgZ(6,"system-modal-footer")(7,"button",3),r.NdJ("click",(function(){return t.close()})),r._UZ(8,"system-label",1),r.qZA(),r.TgZ(9,"button",3),r.NdJ("click",(function(){return t.updateSendInBlueList()})),r._UZ(10,"system-label",1),r.qZA()()()),2&e&&(r.xp6(2),r.Q6J("label","LBL_SENDINBLUE"),r.xp6(2),r.Q6J("ngIf",t.contacts.length>0),r.xp6(1),r.Q6J("ngIf",0==t.contacts.length),r.xp6(3),r.Q6J("label","LBL_CANCEL"),r.xp6(2),r.Q6J("label","LBL_UPDATE"))},dependencies:[l.O5,S._,E.j,y.x,f.p,v.y],encapsulation:2})),SendinBlueModal})(),N=(()=>{var e;class SendinBlueModule{}return e=SendinBlueModule,(0,n.Z)(SendinBlueModule,"ɵfac",(function(t){return new(t||e)})),(0,n.Z)(SendinBlueModule,"ɵmod",r.oAB({type:e})),(0,n.Z)(SendinBlueModule,"ɵinj",r.cJS({imports:[l.ez,o.u5,a.ObjectFields,d.GlobalComponents,u.ObjectComponents,c.SystemComponents,i.o,o.UX]})),SendinBlueModule})();("undefined"==typeof ngJitMode||ngJitMode)&&r.kYT(N,{declarations:[B,M],imports:[l.ez,o.u5,a.ObjectFields,d.GlobalComponents,u.ObjectComponents,c.SystemComponents,i.o,o.UX]})}}]);