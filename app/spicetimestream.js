/*!
 * 
 *                     aacService
 *
 *                     release: 2023.02.001
 *
 *                     date: 2023-08-15 08:39:15
 *
 *                     build: 2023.02.001.1692081555935
 *
 */
"use strict";(self.webpackChunkcore=self.webpackChunkcore||[]).push([["src_include_spicetimestream_spicetimestream_ts"],{7846:(e,t,s)=>{s.r(t),s.d(t,{ModuleSpiceTimeStream:()=>X});var i=s(1180),m=s(4755),a=s(5030),r=s(4357),d=s(3190),n=s(4826),o=s(6490),l=s(3735),c=s(2242),h=s(4154),p=s(2422);const u=["spice-timestream-item",""];function g(e,t){if(1&e&&c._UZ(0,"div",2),2&e){const e=c.oxw();c.Q6J("ngStyle",e.getElementStyle())}}let f=(()=>{var e;class SpiceTimestreamItem{constructor(e,t){(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"userpreferences",void 0),(0,i.Z)(this,"timestream",{}),(0,i.Z)(this,"element",{}),(0,i.Z)(this,"module",void 0),(0,i.Z)(this,"componentconfig",{}),this.metadata=e,this.userpreferences=t}ngOnInit(){this.componentconfig=this.metadata.getComponentConfig(this.constructor.name,this.module)}get startFieldName(){return this.componentconfig.start?this.componentconfig.start:"date_start"}get endFieldName(){return this.componentconfig.end?this.componentconfig.end:"date_end"}get elementstart(){return this.element[this.startFieldName]}get elementend(){return this.element[this.endFieldName]}get displayItem(){return!!(this.elementstart&&this.elementend&&this.elementstart.isBefore(this.elementend)&&this.elementstart.isBefore(this.timestream.dateEnd)&&this.elementend.isAfter(this.timestream.dateStart))||(!(!this.elementstart||this.elementend||!this.elementstart.isBefore(this.timestream.dateEnd)||!this.elementstart.isAfter(this.timestream.dateStart))||!(this.elementstart||!this.elementend||!this.elementend.isBefore(this.timestream.dateEnd)||!this.elementend.isAfter(this.timestream.dateStart)))}get startdate(){return this.elementstart.isBefore(this.timestream.dateStart)?this.timestream.dateStart:this.elementstart}get enddate(){return this.elementend.isAfter(this.timestream.dateEnd)?this.timestream.dateEnd:this.elementend}getStart(){let e=this.timestream.dateEnd.diff(this.timestream.dateStart,"days");return this.startdate.diff(this.timestream.dateStart,"days")/e*100}getStartFromEnd(){let e=this.timestream.dateEnd.diff(this.timestream.dateStart,"days");return this.enddate.diff(this.timestream.dateStart,"days")/e*100}getWidth(){let e=this.timestream.dateEnd.diff(this.timestream.dateStart,"days");return this.enddate.diff(this.startdate,"days")/e*100}getElementStyle(){return this.elementstart&&this.elementend?this.timestream.dateEnd.diff(this.timestream.dateStart,"days")>0?{left:this.getStart()+"%",width:this.getWidth()+"%"}:{left:this.getStart()+"%",width:"10px",transform:"rotate(45deg)"}:this.elementstart&&this.elementstart.isAfter(this.timestream.dateStart)&&this.elementstart.isBefore(this.timestream.dateEnd)?{left:this.getStart()+"%",width:"10px",transform:"rotate(45deg)"}:this.elementend&&this.elementend.isAfter(this.timestream.dateStart)&&this.elementend.isBefore(this.timestream.dateEnd)?{left:this.getStartFromEnd()+"%",width:"10px",transform:"rotate(45deg)"}:void 0}}return e=SpiceTimestreamItem,(0,i.Z)(SpiceTimestreamItem,"ɵfac",(function(t){return new(t||e)(c.Y36(h.Pu),c.Y36(p.z))})),(0,i.Z)(SpiceTimestreamItem,"ɵcmp",c.Xpm({type:e,selectors:[["","spice-timestream-item",""]],inputs:{timestream:"timestream",element:"element",module:"module"},attrs:u,decls:2,vars:1,consts:[[1,"slds-grid","slds-border--bottom","slds-is-relative",2,"height","100%"],["class","slds-is-absolute slds-theme--shade","style","height:10px; top: 11px; border-radius: 2px; background-color: #CA1B1F;",3,"ngStyle",4,"ngIf"],[1,"slds-is-absolute","slds-theme--shade",2,"height","10px","top","11px","border-radius","2px","background-color","#CA1B1F",3,"ngStyle"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.YNc(1,g,1,1,"div",1),c.qZA()),2&e&&(c.xp6(1),c.Q6J("ngIf",t.displayItem))},dependencies:[m.O5,m.PC],encapsulation:2})),SpiceTimestreamItem})();const S=["spice-timestream-header",""];function Z(e,t){if(1&e&&(c.TgZ(0,"div",2)(1,"div",3),c._uU(2),c.qZA()()),2&e){const e=t.$implicit,s=c.oxw();c.Q6J("ngStyle",s.getPeriodStyle())("ngClass",e.displayclass),c.xp6(2),c.hij(" ",e.name," ")}}let v=(()=>{var e;class SpiceTimestreamHeader{constructor(e,t){(0,i.Z)(this,"elementRef",void 0),(0,i.Z)(this,"userpreferences",void 0),(0,i.Z)(this,"timestream",{}),(0,i.Z)(this,"dateElements",[]),this.elementRef=e,this.userpreferences=t}get startDate(){return this.timestream.datestart.format(this.userpreferences.getDateFormat())}get endDate(){return this.timestream.dateend.format(this.userpreferences.getDateFormat())}get width(){return this.elementRef.nativeElement.parentElement.getBoundingClientRect().width}get periods(){let e=[],t=0;switch(this.timestream.period){case"M":let s=moment(this.timestream.dateStart);for(;s.isSameOrBefore(this.timestream.dateEnd);)e.push({name:s.format("DD"),displayclass:0==s.day()||6==s.day()?"slds-theme_shade":""}),s.add(1,"d");break;case"Q":for(;t<3;){let s=(new moment).month(this.timestream.dateStart.month()+t);e.push({name:s.format("MMM")}),t++}break;case"y":for(;t<12;){let s=(new moment).month(t);e.push({name:s.format("MMM")}),t++}}return e}getPeriodStyle(){return{width:100/this.periods.length+"%"}}}return e=SpiceTimestreamHeader,(0,i.Z)(SpiceTimestreamHeader,"ɵfac",(function(t){return new(t||e)(c.Y36(c.SBq),c.Y36(p.z))})),(0,i.Z)(SpiceTimestreamHeader,"ɵcmp",c.Xpm({type:e,selectors:[["","spice-timestream-header",""]],inputs:{timestream:"timestream"},attrs:S,decls:2,vars:1,consts:[[1,"slds-grid","slds-border--bottom",2,"height","100%"],["class","slds-border--right",3,"ngStyle","ngClass",4,"ngFor","ngForOf"],[1,"slds-border--right",3,"ngStyle","ngClass"],[1,"slds-align--absolute-center","slds-truncate",2,"height","100%"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.YNc(1,Z,3,3,"div",1),c.qZA()),2&e&&(c.xp6(1),c.Q6J("ngForOf",t.periods))},dependencies:[m.mk,m.sg,m.PC],encapsulation:2})),SpiceTimestreamHeader})();var b=s(5710),T=s(2294),x=s(3917),y=s(586),w=s(1790);const E=["spice-timestream-label",""];let _=(()=>{var e;class SpiceTimestreamLabel{constructor(e,t,s,m){(0,i.Z)(this,"elementRef",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"footer",void 0),(0,i.Z)(this,"item",{}),(0,i.Z)(this,"module",{}),this.elementRef=e,this.metadata=t,this.model=s,this.footer=m}ngOnInit(){this.model.module=this.module,this.model.id=this.item.id,this.model.setData(this.item)}}return e=SpiceTimestreamLabel,(0,i.Z)(SpiceTimestreamLabel,"ɵfac",(function(t){return new(t||e)(c.Y36(c.SBq),c.Y36(h.Pu),c.Y36(b.o),c.Y36(x.M))})),(0,i.Z)(SpiceTimestreamLabel,"ɵcmp",c.Xpm({type:e,selectors:[["","spice-timestream-label",""]],inputs:{item:"item",module:"module"},features:[c._Bn([b.o,T.e])],attrs:E,decls:4,vars:4,consts:[[1,"slds-grid","slds-grid--align-spread","slds-grid_vertical-align-center"],["system-model-popover","",1,"slds-text-link_reset",3,"module","id"],[3,"buttonsize"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0)(1,"div",1),c._uU(2),c.qZA(),c._UZ(3,"object-action-menu",2),c.qZA()),2&e&&(c.xp6(1),c.Q6J("module",t.model.module)("id",t.model.id),c.xp6(1),c.Oqu(t.item.name),c.xp6(1),c.Q6J("buttonsize","small"))},dependencies:[y.g,w.g],encapsulation:2})),SpiceTimestreamLabel})();var Y=s(2656),A=s(3463);let J=(()=>{var e;class SpiceTimestreamSelector{constructor(e){(0,i.Z)(this,"userpreferences",void 0),(0,i.Z)(this,"focusDate",new moment),(0,i.Z)(this,"timestream",void 0),(0,i.Z)(this,"weekStartDay",0),this.userpreferences=e;let t=this.userpreferences.toUse;this.weekStartDay="Monday"==t.week_day_start?1:0}ngOnInit(){this.period="y"}get period(){return this.timestream.period}set period(e){switch(e){case"M":let e=moment(this.focusDate).month();this.timestream.dateStart=new moment(this.focusDate),this.timestream.dateStart.month(e),this.timestream.dateStart.date(1),this.timestream.dateStart.day(this.weekStartDay),this.timestream.dateStart.hour(0),this.timestream.dateStart.minute(0),this.timestream.dateEnd=new moment(this.focusDate),this.timestream.dateEnd.month(e),this.timestream.dateEnd.date(31),this.timestream.dateEnd.day(6),this.timestream.dateEnd.hour(23),this.timestream.dateEnd.minute(59),1==this.weekStartDay&&this.timestream.dateEnd.add(1,"days");break;case"Q":let t=moment(this.focusDate).month()+1;this.timestream.dateStart=new moment(this.focusDate),this.timestream.dateStart.month(3*Math.floor(t/3)),this.timestream.dateStart.date(1),this.timestream.dateStart.hour(0),this.timestream.dateStart.minute(0),this.timestream.dateEnd=new moment(this.focusDate),this.timestream.dateEnd.month(3*Math.floor(t/3)+3),this.timestream.dateEnd.date(31),this.timestream.dateEnd.hour(23),this.timestream.dateEnd.minute(59);break;case"y":this.timestream.dateStart=new moment(this.focusDate),this.timestream.dateStart.month(0),this.timestream.dateStart.date(1),this.timestream.dateStart.hour(0),this.timestream.dateStart.minute(0),this.timestream.dateEnd=new moment(this.focusDate),this.timestream.dateEnd.month(11),this.timestream.dateEnd.date(31),this.timestream.dateEnd.hour(23),this.timestream.dateEnd.minute(59)}this.timestream.period=e}get periodText(){switch(this.timestream.period){case"M":return moment(this.timestream.dateStart).day(6).format("MMM/Y");case"Q":return this.timestream.dateStart.format("Q/Y");case"y":return this.timestream.dateStart.format("Y")}}prev(){this.focusDate.subtract(1,this.timestream.period),this.period=this.timestream.period}next(){this.focusDate.add(1,this.timestream.period),this.period=this.timestream.period}}return e=SpiceTimestreamSelector,(0,i.Z)(SpiceTimestreamSelector,"ɵfac",(function(t){return new(t||e)(c.Y36(p.z))})),(0,i.Z)(SpiceTimestreamSelector,"ɵcmp",c.Xpm({type:e,selectors:[["spice-timestream-selector"]],inputs:{timestream:"timestream"},decls:19,vars:4,consts:[[1,"slds-border--bottom","slds-p-vertical--xx-small","slds-p-horizontal--x-small",2,"height","40px"],[1,"slds-grid","slds-grid--align-spread","slds-grid_vertical-align-center"],[1,"slds-form-element","slds-size--1-of-2"],[1,"slds-form-element__control"],[1,"slds-select_container"],[1,"slds-select",3,"ngModel","ngModelChange"],["value","y"],["label","LBL_YEAR"],["value","Q"],["label","LBL_QUARTER"],["value","M"],["label","LBL_MONTH"],[1,"slds-grid"],[1,"slds-button","slds-button_icon",3,"click"],[3,"icon"],[1,"slds-p-horizontal--small"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"select",5),c.NdJ("ngModelChange",(function(e){return t.period=e})),c.TgZ(6,"option",6),c._UZ(7,"system-label",7),c.qZA(),c.TgZ(8,"option",8),c._UZ(9,"system-label",9),c.qZA(),c.TgZ(10,"option",10),c._UZ(11,"system-label",11),c.qZA()()()()(),c.TgZ(12,"div",12)(13,"button",13),c.NdJ("click",(function(){return t.prev()})),c._UZ(14,"system-button-icon",14),c.qZA(),c.TgZ(15,"div",15),c._uU(16),c.qZA(),c.TgZ(17,"button",13),c.NdJ("click",(function(){return t.next()})),c._UZ(18,"system-button-icon",14),c.qZA()()()()),2&e&&(c.xp6(5),c.Q6J("ngModel",t.period),c.xp6(9),c.Q6J("icon","left"),c.xp6(2),c.hij(" ",t.periodText," "),c.xp6(2),c.Q6J("icon","right"))},dependencies:[a.YN,a.Kr,a.EJ,a.JJ,a.On,Y.J,A._],encapsulation:2})),SpiceTimestreamSelector})();var M=s(727),D=s(5329),Q=s(2644),O=s(1058);function F(e,t){if(1&e&&c._UZ(0,"div",9),2&e){const e=t.$implicit,s=c.oxw();c.Q6J("item",e)("module",s.modellist.module)}}function C(e,t){if(1&e&&c._UZ(0,"div",10),2&e){const e=t.$implicit,s=c.oxw();c.Q6J("timestream",s.timestream)("module",s.modellist.module)("element",e)}}let q=(()=>{var e;class SpiceTimestream{constructor(e,t,s,m){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"userpreferences",void 0),(0,i.Z)(this,"modellist",void 0),(0,i.Z)(this,"cdRef",void 0),(0,i.Z)(this,"subscriptions",new M.w0),(0,i.Z)(this,"timestream",{period:"y",dateStart:null,dateEnd:null}),this.language=e,this.userpreferences=t,this.modellist=s,this.cdRef=m,this.subscriptions.add(this.modellist.listType$.subscribe((e=>this.handleListTypeChange(e)))),this.subscriptions.add(this.modellist.listDataChanged$.subscribe((()=>{this.cdRef.detectChanges()})))}ngOnInit(){this.modellist.buckets={},this.modellist.loadFromSession()||this.getListData()}ngOnDestroy(){this.subscriptions.unsubscribe()}getListData(){"all"!=this.modellist.currentList.id?this.modellist.getListData().subscribe((()=>this.cdRef.detectChanges())):this.modellist.resetListData()}handleListTypeChange(e){this.cdRef.detectChanges(),"SpiceTimestream"==e.listcomponent&&this.getListData()}}return e=SpiceTimestream,(0,i.Z)(SpiceTimestream,"ɵfac",(function(t){return new(t||e)(c.Y36(D.d),c.Y36(p.z),c.Y36(Q.t),c.Y36(c.sBO))})),(0,i.Z)(SpiceTimestream,"ɵcmp",c.Xpm({type:e,selectors:[["spice-timestream"]],decls:10,vars:4,consts:[[1,"slds-grid"],[1,"slds-border--right",2,"width","250px"],[3,"timestream"],[1,"slds-grow"],["spice-timestream-header","",2,"height","40px",3,"timestream"],[1,"slds-grid",3,"system-to-bottom"],["class","slds-border--bottom slds-p-vertical--xx-small slds-p-horizontal--x-small","style","height: 34px;","spice-timestream-label","",3,"item","module",4,"ngFor","ngForOf"],[1,"slds-grow","slds-theme--default"],["spice-timestream-item","","style","height: 34px;",3,"timestream","module","element",4,"ngFor","ngForOf"],["spice-timestream-label","",1,"slds-border--bottom","slds-p-vertical--xx-small","slds-p-horizontal--x-small",2,"height","34px",3,"item","module"],["spice-timestream-item","",2,"height","34px",3,"timestream","module","element"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0)(1,"div",1),c._UZ(2,"spice-timestream-selector",2),c.qZA(),c.TgZ(3,"div",3),c._UZ(4,"div",4),c.qZA()(),c.TgZ(5,"div",5),c.NdJ("system-to-bottom",(function(){return t.modellist.loadMoreList()})),c.TgZ(6,"div",1),c.YNc(7,F,1,2,"div",6),c.qZA(),c.TgZ(8,"div",7),c.YNc(9,C,1,3,"div",8),c.qZA()()),2&e&&(c.xp6(2),c.Q6J("timestream",t.timestream),c.xp6(2),c.Q6J("timestream",t.timestream),c.xp6(3),c.Q6J("ngForOf",t.modellist.listData.list),c.xp6(2),c.Q6J("ngForOf",t.modellist.listData.list))},dependencies:[m.sg,O.H,J,f,v,_],encapsulation:2,changeDetection:0})),SpiceTimestream})();var k=s(6163);function B(e,t){if(1&e&&c._UZ(0,"div",7),2&e){const e=t.$implicit,s=c.oxw();c.Q6J("item",e)("module",s.module)}}function U(e,t){if(1&e&&c._UZ(0,"div",8),2&e){const e=t.$implicit,s=c.oxw();c.Q6J("timestream",s.timestream)("module",s.module)("element",e)}}let L=(()=>{var e;class SpiceTimestreamEmbedded{constructor(e,t,s,m){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"userpreferences",void 0),(0,i.Z)(this,"modelutilities",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"module",""),(0,i.Z)(this,"items",{}),(0,i.Z)(this,"timestream",{period:"y",dateStart:null,dateEnd:null}),(0,i.Z)(this,"subscriptions",new M.w0),this.language=e,this.userpreferences=t,this.modelutilities=s,this.metadata=m}ngOnDestroy(){this.subscriptions.unsubscribe()}}return e=SpiceTimestreamEmbedded,(0,i.Z)(SpiceTimestreamEmbedded,"ɵfac",(function(t){return new(t||e)(c.Y36(D.d),c.Y36(p.z),c.Y36(k.A),c.Y36(h.Pu))})),(0,i.Z)(SpiceTimestreamEmbedded,"ɵcmp",c.Xpm({type:e,selectors:[["spice-timestream-embedded"]],inputs:{module:"module",items:"items"},decls:10,vars:4,consts:[[1,"slds-grid"],[1,"slds-border--right",2,"width","250px"],[3,"timestream"],[1,"slds-grow"],["spice-timestream-header","",2,"height","40px",3,"timestream"],["class","slds-border--bottom slds-p-vertical--xx-small slds-p-horizontal--x-small","style","height: 34px;","spice-timestream-label","",3,"item","module",4,"ngFor","ngForOf"],["spice-timestream-item","","style","height: 34px;",3,"timestream","module","element",4,"ngFor","ngForOf"],["spice-timestream-label","",1,"slds-border--bottom","slds-p-vertical--xx-small","slds-p-horizontal--x-small",2,"height","34px",3,"item","module"],["spice-timestream-item","",2,"height","34px",3,"timestream","module","element"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0)(1,"div",1),c._UZ(2,"spice-timestream-selector",2),c.qZA(),c.TgZ(3,"div",3),c._UZ(4,"div",4),c.qZA()(),c.TgZ(5,"div",0)(6,"div",1),c.YNc(7,B,1,2,"div",5),c.qZA(),c.TgZ(8,"div",3),c.YNc(9,U,1,3,"div",6),c.qZA()()),2&e&&(c.xp6(2),c.Q6J("timestream",t.timestream),c.xp6(2),c.Q6J("timestream",t.timestream),c.xp6(3),c.Q6J("ngForOf",t.items),c.xp6(2),c.Q6J("ngForOf",t.items))},dependencies:[m.sg,J,f,v,_],encapsulation:2})),SpiceTimestreamEmbedded})();var R=s(6040),N=s(3249),I=s(8652),z=s(4567);function j(e,t){if(1&e&&(c.ynx(0),c.TgZ(1,"div",3),c._UZ(2,"spice-timestream-embedded",4),c.qZA(),c.BQk()),2&e){const e=c.oxw();c.xp6(2),c.Q6J("items",e.relatedmodels.items)("module",e.relatedmodels.relatedModule)}}function P(e,t){1&e&&c._UZ(0,"system-illustration-no-access")}let H=(()=>{var e;class SpiceTimestreamRelated extends N.s{constructor(e,t,s,m,a){super(e,t,s,m,a),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"relatedmodels",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"cdref",void 0),this.language=e,this.metadata=t,this.relatedmodels=s,this.model=m,this.cdref=a}}return e=SpiceTimestreamRelated,(0,i.Z)(SpiceTimestreamRelated,"ɵfac",(function(t){return new(t||e)(c.Y36(D.d),c.Y36(h.Pu),c.Y36(R.j),c.Y36(b.o),c.Y36(c.sBO))})),(0,i.Z)(SpiceTimestreamRelated,"ɵcmp",c.Xpm({type:e,selectors:[["spice-timestream"]],features:[c._Bn([R.j]),c.qOj],decls:4,vars:3,consts:[[3,"componentconfig"],[4,"ngIf","ngIfElse"],["noaccess",""],[1,"slds-border--top"],[3,"items","module"]],template:function(e,t){if(1&e&&(c.TgZ(0,"object-related-card",0),c.YNc(1,j,3,2,"ng-container",1),c.YNc(2,P,1,0,"ng-template",null,2,c.W1O),c.qZA()),2&e){const e=c.MAs(3);c.Q6J("componentconfig",t.componentconfig),c.xp6(1),c.Q6J("ngIf",t.aclAccess)("ngIfElse",e)}},dependencies:[m.O5,I.E,z.s,L],encapsulation:2})),SpiceTimestreamRelated})(),X=(()=>{var e;class ModuleSpiceTimeStream{}return e=ModuleSpiceTimeStream,(0,i.Z)(ModuleSpiceTimeStream,"ɵfac",(function(t){return new(t||e)})),(0,i.Z)(ModuleSpiceTimeStream,"ɵmod",c.oAB({type:e})),(0,i.Z)(ModuleSpiceTimeStream,"ɵinj",c.cJS({imports:[m.ez,a.u5,d.ObjectFields,n.GlobalComponents,o.ObjectComponents,l.SystemComponents,r.o]})),ModuleSpiceTimeStream})();("undefined"==typeof ngJitMode||ngJitMode)&&c.kYT(X,{declarations:[q,L,J,f,v,_,H],imports:[m.ez,a.u5,d.ObjectFields,n.GlobalComponents,o.ObjectComponents,l.SystemComponents,r.o]})}}]);