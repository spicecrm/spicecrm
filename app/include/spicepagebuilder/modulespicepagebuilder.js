/*
SpiceUI 2018.10.001

Copyright (c) 2016-present, aac services.k.s - All rights reserved.
Redistribution and use in source and binary forms, without modification, are permitted provided that the following conditions are met:
- Redistributions of source code must retain this copyright and license notice, this list of conditions and the following disclaimer.
- Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.
- If used the SpiceCRM Logo needs to be displayed in the upper left corner of the screen in a minimum dimension of 31x31 pixels and be clearly visible, the icon needs to provide a link to http://www.spicecrm.io
THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.

*/

/** 
 * Â© 2015 - 2021 aac services k.s. All rights reserved.
 * release: 2021.02.001
 * date: 2021-06-24 11:36:53
 * build: 2021.02.001.1624527413323
 **/
"use strict";var __extends=this&&this.__extends||function(){var i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])})(e,t)};return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function s(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),__decorate=this&&this.__decorate||function(e,t,s,i){var l,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,s,i);else for(var a=e.length-1;0<=a;a--)(l=e[a])&&(o=(n<3?l(o):3<n?l(t,s,o):l(t,s))||o);return 3<n&&o&&Object.defineProperty(t,s,o),o},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ModuleSpicePageBuilder=exports.fieldPageBuilder=exports.SpicePageBuilder=exports.SpicePageBuilderEditor=exports.SpicePageBuilderPanel=exports.SpicePageBuilderRenderer=exports.SpicePageBuilderElementBody=exports.SpicePageBuilderElementSection=exports.SpicePageBuilderElementColumn=exports.SpicePageBuilderElementCode=exports.SpicePageBuilderElementButton=exports.SpicePageBuilderElementSpacer=exports.SpicePageBuilderElementDivider=exports.SpicePageBuilderElementText=exports.SpicePageBuilderElementImage=exports.SpicePageBuilderElement=exports.SpicePageBuilderInputColor=exports.SpicePageBuilderInputSides=exports.SpicePageBuilderInputText=exports.SpicePageBuilderService=void 0;var common_1=require("@angular/common"),core_1=require("@angular/core"),objectfields_1=require("../../objectfields/objectfields"),systemcomponents_1=require("../../systemcomponents/systemcomponents"),drag_drop_1=require("@angular/cdk/drag-drop"),rxjs_1=require("rxjs"),services_1=require("../../services/services"),forms_1=require("@angular/forms"),platform_browser_1=require("@angular/platform-browser"),router_1=require("@angular/router"),directives_1=require("../../directives/directives"),SpicePageBuilderService=function(){function e(e){this.modal=e,this.response=new rxjs_1.BehaviorSubject(null),this.defaultPlaceholderHeight=200,this.page={tagName:"mjml",attributes:{},children:[{tagName:"body",attributes:{"background-color":"#ffffff",width:"550px"},children:[]}]},this.panelElements=[{tagName:"text",label:"LBL_TEXT",content:"Write text here...",icon:"text",attributes:{"font-size":"13px","line-height":"14px",padding:"4px","container-background-color":"#ffffff"}},{tagName:"image",label:"LBL_IMAGE",icon:"image",attributes:{align:"center",padding:"4px",target:"_blank"}},{tagName:"divider",label:"LBL_DIVIDER",icon:"dash",attributes:{padding:"8px","border-width":"2px",width:"100%","border-color":"#a2a2a2"}},{tagName:"spacer",label:"LBL_SPACER",icon:"steps",attributes:{height:"50px","vertical-align":"middle"}},{tagName:"button",label:"LBL_BUTTON",content:"New Button",icon:"link",attributes:{"border-radius":"4px","background-color":"#ca1b21",color:"#ffffff",padding:"4px","inner-padding":"4px",width:"150px",align:"center","font-size":"13px","text-align":"center","line-height":"14px",target:"_blank","vertical-align":"middle",href:"#"}},{tagName:"raw",label:"LBL_HTML_CODE",content:"Write code here...",icon:"insert_tag_field",attributes:{}}],this.panelDefaultSection={tagName:"section",children:[],attributes:{}},this.panelDefaultColumn={tagName:"column",children:[],attributes:{}},this.alignOptions=[{title:"LBL_LEFT_ALIGN",icon:"left_align_text",value:"left"},{title:"LBL_CENTER_ALIGN",icon:"center_align_text",value:"center"},{title:"LBL_RIGHT_ALIGN",icon:"right_align_text",value:"right"}],this.defaultSuffix="px",this.contentListId=_.uniqueId("panel-drop-list-")}return e.prototype.addDropListToGroup=function(e){var t=this;this.dropListGroup&&!this.dropListGroup._items.has(e)&&(this.dropListGroup._items.add(e),this.dropListGroup._items.forEach(function(e){return e._group=t.dropListGroup}))},e.prototype.openMediaFilePicker=function(){var t=this,s=new rxjs_1.Subject;return this.modal.openModal("MediaFilePicker").subscribe(function(e){e.instance.answer.subscribe(function(e){e||(s.next(void 0),s.complete()),e.upload?t.modal.openModal("MediaFileUploader").subscribe(function(e){e.instance.answer.subscribe(function(e){s.next(e?"https://cdn.spicecrm.io/"+e:void 0),s.complete()})}):(s.next(e.id?"https://cdn.spicecrm.io/"+e.id:void 0),s.complete())})}),s.asObservable()},e.prototype.emitData=function(e){this.response.next(e?null:this.page),this.response.complete()},e=__decorate([core_1.Injectable(),__metadata("design:paramtypes",[services_1.modal])],e)}();exports.SpicePageBuilderService=SpicePageBuilderService;var SpicePageBuilderInputText=function(){function e(e){this.cdRef=e,this.label="",this.value=""}var t,s;return(t=e).prototype.registerOnChange=function(t){this.onChange=function(e){t(e)}},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.writeValue=function(e){e&&(this.value=this.suffix?parseFloat(e):e,this.cdRef.detectChanges())},e.prototype.emitJoinedValue=function(){this.onChange(this.suffix?this.value+this.suffix:this.value)},__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"suffix",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"label",void 0),e=t=__decorate([core_1.Component({selector:"spice-page-builder-input-text",template:'<div class="slds-form-element"><label class="slds-form-element__label"><system-label [label]="label"></system-label></label><div class="slds-form-element__control" [class.slds-input-has-fixed-addon]="!!suffix"><input *ngIf="!suffix; else inputNumberContainer" type="text" [(ngModel)]="value" (ngModelChange)="emitJoinedValue()" class="slds-input"><ng-template #inputNumberContainer><input type="number" [(ngModel)]="value" (ngModelChange)="emitJoinedValue()" class="slds-input"> <span class="slds-form-element__addon">{{suffix}}</span></ng-template></div></div>',changeDetection:core_1.ChangeDetectionStrategy.OnPush,providers:[{multi:!0,provide:forms_1.NG_VALUE_ACCESSOR,useExisting:core_1.forwardRef(function(){return t})}]}),__metadata("design:paramtypes",["function"==typeof(s=void 0!==core_1.ChangeDetectorRef&&core_1.ChangeDetectorRef)?s:Object])],e)}();exports.SpicePageBuilderInputText=SpicePageBuilderInputText;var SpicePageBuilderInputSides=function(){function e(e,t){this.cdRef=e,this.spicePageBuilderService=t,this.label="",this.value={top:0,right:0,bottom:0,left:0}}var t,s;return(t=e).prototype.registerOnChange=function(t){this.onChange=function(e){t(e)}},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.writeValue=function(e){if(e){var t=e.split(" ");this.value={top:parseFloat(t[0]),right:parseFloat(1==t.length?e:t[1]),bottom:parseFloat(1==t.length?e:t[2]),left:parseFloat(1==t.length?e:t[3])},this.cdRef.detectChanges()}},e.prototype.emitJoinedValue=function(){var e=this.spicePageBuilderService.defaultSuffix;this.onChange(this.value.top+e+" "+(this.value.right+e)+" "+(this.value.bottom+e)+" "+(this.value.left+e))},__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"label",void 0),e=t=__decorate([core_1.Component({selector:"spice-page-builder-input-sides",template:'<fieldset class="slds-form-element slds-form-element_compound"><legend class="slds-form-element__legend slds-form-element__label">{{label}}</legend><div class="slds-form-element__control"><div class="slds-form-element__row"><div class="slds-size_1-of-4"><div class="slds-form-element"><label class="slds-form-element__label">Top</label><div class="slds-form-element__control slds-input-has-fixed-addon"><input type="number" [(ngModel)]="value.top" (ngModelChange)="emitJoinedValue()" maxlength="4" size="4" class="slds-input"> <span class="slds-form-element__addon">{{spicePageBuilderService.defaultSuffix}}</span></div></div></div><div class="slds-size_1-of-4"><div class="slds-form-element"><label class="slds-form-element__label">Right</label><div class="slds-form-element__control slds-input-has-fixed-addon"><input type="number" [(ngModel)]="value.right" (ngModelChange)="emitJoinedValue()" maxlength="4" size="4" class="slds-input"> <span class="slds-form-element__addon">{{spicePageBuilderService.defaultSuffix}}</span></div></div></div><div class="slds-size_1-of-4"><div class="slds-form-element"><label class="slds-form-element__label">Bottom</label><div class="slds-form-element__control slds-input-has-fixed-addon"><input type="number" [(ngModel)]="value.bottom" (ngModelChange)="emitJoinedValue()" maxlength="4" size="4" class="slds-input"> <span class="slds-form-element__addon">{{spicePageBuilderService.defaultSuffix}}</span></div></div></div><div class="slds-size_1-of-4"><div class="slds-form-element"><label class="slds-form-element__label">Left</label><div class="slds-form-element__control slds-input-has-fixed-addon"><input type="number" [(ngModel)]="value.left" (ngModelChange)="emitJoinedValue()" maxlength="4" size="4" class="slds-input"> <span class="slds-form-element__addon">{{spicePageBuilderService.defaultSuffix}}</span></div></div></div></div></div></fieldset>',changeDetection:core_1.ChangeDetectionStrategy.OnPush,providers:[{multi:!0,provide:forms_1.NG_VALUE_ACCESSOR,useExisting:core_1.forwardRef(function(){return t})}]}),__metadata("design:paramtypes",["function"==typeof(s=void 0!==core_1.ChangeDetectorRef&&core_1.ChangeDetectorRef)?s:Object,SpicePageBuilderService])],e)}();exports.SpicePageBuilderInputSides=SpicePageBuilderInputSides;var SpicePageBuilderInputColor=function(){function e(e){this.cdRef=e,this.label="",this.value=""}var t,s;return(t=e).prototype.registerOnChange=function(t){this.onChange=function(e){t(e)}},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.writeValue=function(e){e&&(this.value=e,this.cdRef.detectChanges())},e.prototype.emitValue=function(){this.onChange(this.value)},__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"label",void 0),e=t=__decorate([core_1.Component({selector:"spice-page-builder-input-color",template:'<div class="slds-form-element"><label class="slds-form-element__label">{{label}}</label><div class="slds-form-element__control slds-input-has-fixed-addon"><input type="color" [(ngModel)]="value" (ngModelChange)="emitValue()" class="slds-input"> <input type="text" [(ngModel)]="value" (ngModelChange)="emitValue()" maxlength="8" size="8" class="slds-input slds-m-left--x-small"></div></div>',changeDetection:core_1.ChangeDetectionStrategy.OnPush,providers:[{multi:!0,provide:forms_1.NG_VALUE_ACCESSOR,useExisting:core_1.forwardRef(function(){return t})}]}),__metadata("design:paramtypes",["function"==typeof(s=void 0!==core_1.ChangeDetectorRef&&core_1.ChangeDetectorRef)?s:Object])],e)}();exports.SpicePageBuilderInputColor=SpicePageBuilderInputColor;var SpicePageBuilderElement=function(){function e(e,t,s,i,l){this.domSanitizer=e,this.modal=t,this.injector=s,this.cdRef=i,this.spicePageBuilderService=l,this.delete$=new core_1.EventEmitter,this.isEditMode=!1,this.attributesList=[{name:"width",type:"text"},{name:"background-color",type:"color"}],this.style={}}var t,s,i,l;return e.prototype.ngOnInit=function(){this.generateStyle()},e.prototype.handleEditResponse=function(e){this.element.attributes=e.attributes,this.generateStyle(),this.cdRef.detectChanges()},e.prototype.generateStyle=function(e){this.style=JSON.parse(JSON.stringify(e?_.pick(this.element.attributes,e):this.element.attributes))},e.prototype.setIsMouseIn=function(e){this.spicePageBuilderService.isMouseIn=e?"content":"section"},e.prototype.edit=function(){var t=this;this.modal.openModal("SpicePageBuilderEditor",!0,this.injector).subscribe(function(e){e.instance.element=JSON.parse(JSON.stringify(t.element)),e.instance.response.subscribe(function(e){e&&t.handleEditResponse(e)})})},__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"element",void 0),__decorate([core_1.Output(),__metadata("design:type","function"==typeof(t=void 0!==core_1.EventEmitter&&core_1.EventEmitter)?t:Object)],e.prototype,"delete$",void 0),__decorate([core_1.Input(),__metadata("design:type",Boolean)],e.prototype,"isEditMode",void 0),e=__decorate([core_1.Component({selector:"spice-page-builder-element",template:'<div class="spice-drop-zone" [class.slds-is-hovered]="spicePageBuilderService.isMouseIn == \'content\'" (mouseenter)="setIsMouseIn(true)" (mouseleave)="setIsMouseIn(false)" tabindex="-1"><div class="spice-drop-zone-label"><div class="slds-media slds-media_center"><div class="slds-media__figure"><system-icon icon="text" sprite="utility" size="x-small" divClass="slds-current-color"></system-icon></div><div class="slds-media__body"><h2 class="slds-truncate"><system-label label="LBL_ELEMENT"></system-label></h2></div></div></div><article (dblclick)="edit()" class="spice-drop-zone-content"><div [ngStyle]="style"></div></article><div class="spice-drop-zone-actions"><div class="slds-button-group" role="group"><button cdkDragHandle class="slds-button slds-button_icon slds-button_icon-brand slds-button_icon-x-small" system-title="LBL_MOVE"><system-button-icon icon="move" addclasses="slds-icon"></system-button-icon></button> <button (click)="edit()" class="slds-button slds-button_icon slds-button_icon-brand slds-button_icon-x-small" system-title="LBL_CLOSE"><system-button-icon icon="edit" addclasses="slds-icon"></system-button-icon></button> <button (click)="delete$.emit()" class="slds-button slds-button_icon slds-button_icon-brand slds-button_icon-x-small" system-title="LBL_CLOSE"><system-button-icon icon="close" addclasses="slds-icon"></system-button-icon></button></div></div></div>',changeDetection:core_1.ChangeDetectionStrategy.OnPush}),__metadata("design:paramtypes",["function"==typeof(s=void 0!==platform_browser_1.DomSanitizer&&platform_browser_1.DomSanitizer)?s:Object,services_1.modal,"function"==typeof(i=void 0!==core_1.Injector&&core_1.Injector)?i:Object,"function"==typeof(l=void 0!==core_1.ChangeDetectorRef&&core_1.ChangeDetectorRef)?l:Object,SpicePageBuilderService])],e)}(),SpicePageBuilderElementImage=function(o){function e(e,t,s,i,l){var n=o.call(this,e,t,s,i,l)||this;return n.domSanitizer=e,n.modal=t,n.injector=s,n.cdRef=i,n.spicePageBuilderService=l,n.attributesList=[{name:"title",type:"text"},{name:"href",type:"text"},{name:"alt",type:"text"},{name:"fluid-on-mobile",type:"text"},{name:"rel",type:"text"},{name:"srcset",type:"text"},{name:"target",type:"text"},{name:"usemap",type:"text"},{name:"border",type:"text"},{name:"border-radius",type:"textSuffix"},{name:"align",type:"text"},{name:"height",type:"textSuffix"},{name:"padding",type:"sides"},{name:"width",type:"textSuffix"},{name:"container-background-color",type:"color"},{name:"css-class",type:"text"}],n}var t,s,i;return __extends(e,o),e.prototype.openMediaFilePicker=function(){var t=this;this.spicePageBuilderService.openMediaFilePicker().subscribe(function(e){e&&(t.element.attributes.src=e)})},e.prototype.generateStyle=function(){o.prototype.generateStyle.call(this,["border","border-radius","align","height","padding","width"])},__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"element",void 0),e=__decorate([core_1.Component({selector:"spice-page-builder-element-image",template:'<div *ngIf="!isEditMode; else editContainer" class="spice-drop-zone" [class.slds-is-hovered]="spicePageBuilderService.isMouseIn == \'content\'" (mouseenter)="setIsMouseIn(true)" (mouseleave)="setIsMouseIn(false)" tabindex="-1"><div class="spice-drop-zone-label"><div class="slds-media slds-media_center"><div class="slds-media__figure"><system-icon icon="image" sprite="utility" size="x-small" divClass="slds-current-color"></system-icon></div><div class="slds-media__body"><h2 class="slds-truncate"><system-label label="LBL_IMAGE"></system-label></h2></div></div></div><article (dblclick)="edit()" [ngStyle]="style" class="spice-drop-zone-content"><div [style.background-color]="element.attributes[\'container-background-color\']"><img [src]="element.attributes.src" [ngStyle]="style" alt="SpiceCRM image" style="max-height: 100%"></div></article><div class="spice-drop-zone-actions"><div class="slds-button-group" role="group"><button cdkDragHandle class="slds-button slds-button_icon slds-button_icon-brand slds-button_icon-x-small" system-title="LBL_MOVE"><system-button-icon icon="move" addclasses="slds-icon"></system-button-icon></button> <button (click)="edit()" class="slds-button slds-button_icon slds-button_icon-brand slds-button_icon-x-small" system-title="LBL_CLOSE"><system-button-icon icon="edit" addclasses="slds-icon"></system-button-icon></button> <button (click)="delete$.emit()" class="slds-button slds-button_icon slds-button_icon-brand slds-button_icon-x-small" system-title="LBL_CLOSE"><system-button-icon icon="close" addclasses="slds-icon"></system-button-icon></button></div></div></div><ng-template #editContainer><div style="height: 50%"><system-section titlelabel="LBL_ELEMENT_CONTENT" [alwaysExpanded]="true" class="spice-collapsible-tab-grow"><div class="slds-grid slds-size--1-of-1 slds-height_full slds-p-around--xx-small"><div class="slds-grid slds-height_full slds-size--1-of-1"><div class="slds-form-element slds-grid slds-grid--vertical slds-size--1-of-2 slds-p-right--xx-small"><span class="slds-form-element__label"><system-label label="LBL_IMAGE_FILE"></system-label></span><div class="slds-form-element__control slds-grow"><div class="slds-file-selector slds-file-selector_images slds-height_full"><div class="slds-file-selector__dropzone slds-height_full"><label class="slds-file-selector__body"><span (click)="openMediaFilePicker()" class="slds-file-selector__button slds-button slds-button_neutral" style="cursor: pointer"><system-button-icon icon="upload"></system-button-icon><span><system-label label="LBL_UPLOAD_IMAGE"></system-label></span></span> <span class="slds-file-selector__text slds-medium-show"><system-label label="LBL_OR_DROP_IMAGE"></system-label></span></label></div></div></div></div><div *ngIf="!!element.attributes.src" class="slds-height_full slds-size--1-of-2 slds-grid slds-grid--vertical slds-p-left--xx-small"><span class="slds-form-element__label"><system-label label="LBL_PREVIEW"></system-label></span><div class="slds-grow slds-p-around--x-small slds-text-align--center" style="min-height: 0; border: 1px solid #ddd; border-radius: 4px;"><img [src]="element.attributes.src" alt="Spice Image" style="max-height: 100%"></div></div></div></div></system-section></div><div style="height: 50%"><system-section titlelabel="LBL_STYLING" [alwaysExpanded]="true" class="spice-collapsible-tab-grow"><div class="slds-size--1-of-1 slds-height_full slds-p-horizontal--xx-small slds-p-vertical--x-small slds-scrollable--y"><div class="slds-size--1-of-1 slds-grid slds-wrap"><ng-container *ngFor="let styleAttribute of attributesList" [ngSwitch]="styleAttribute.type"><spice-page-builder-input-text *ngSwitchCase="\'text\'" [(ngModel)]="element.attributes[styleAttribute.name]" [label]="styleAttribute.name" class="slds-p-horizontal--xxx-small slds-size--1-of-2"></spice-page-builder-input-text><spice-page-builder-input-text *ngSwitchCase="\'textSuffix\'" [(ngModel)]="element.attributes[styleAttribute.name]" [label]="styleAttribute.name" [suffix]="spicePageBuilderService.defaultSuffix" class="slds-p-horizontal--xxx-small slds-size--1-of-2"></spice-page-builder-input-text><spice-page-builder-input-sides *ngSwitchCase="\'sides\'" [(ngModel)]="element.attributes[styleAttribute.name]" [label]="styleAttribute.name" class="slds-p-horizontal--xxx-small slds-size--1-of-2"></spice-page-builder-input-sides><spice-page-builder-input-color *ngSwitchCase="\'color\'" [(ngModel)]="element.attributes[styleAttribute.name]" [label]="styleAttribute.name" class="slds-p-horizontal--xxx-small slds-size--1-of-2"></spice-page-builder-input-color></ng-container></div></div></system-section></div></ng-template>',changeDetection:core_1.ChangeDetectionStrategy.OnPush}),__metadata("design:paramtypes",["function"==typeof(t=void 0!==platform_browser_1.DomSanitizer&&platform_browser_1.DomSanitizer)?t:Object,services_1.modal,"function"==typeof(s=void 0!==core_1.Injector&&core_1.Injector)?s:Object,"function"==typeof(i=void 0!==core_1.ChangeDetectorRef&&core_1.ChangeDetectorRef)?i:Object,SpicePageBuilderService])],e)}(exports.SpicePageBuilderElement=SpicePageBuilderElement);exports.SpicePageBuilderElementImage=SpicePageBuilderElementImage;var SpicePageBuilderElementText=function(o){function e(e,t,s,i,l){var n=o.call(this,e,t,s,i,l)||this;return n.domSanitizer=e,n.modal=t,n.injector=s,n.cdRef=i,n.spicePageBuilderService=l,n.attributesList=[{name:"color",type:"color"},{name:"container-background-color",type:"color"},{name:"font-size",type:"textSuffix"},{name:"font-style",type:"text"},{name:"font-weight",type:"text"},{name:"line-height",type:"textSuffix"},{name:"letter-spacing",type:"textSuffix"},{name:"height",type:"textSuffix"},{name:"text-decoration",type:"text"},{name:"text-transform",type:"text"},{name:"align",type:"text"},{name:"padding",type:"sides"},{name:"css-class",type:"text"}],n.sanitizedContent="",n}var t,s,i;return __extends(e,o),e.prototype.ngOnInit=function(){o.prototype.ngOnInit.call(this),this.sanitizeContent()},e.prototype.handleEditResponse=function(e){this.element.content=e.content,this.sanitizeContent(),o.prototype.handleEditResponse.call(this,e)},e.prototype.sanitizeContent=function(){this.sanitizedContent=this.domSanitizer.bypassSecurityTrustHtml(this.element.content)},e.prototype.generateStyle=function(){o.prototype.generateStyle.call(this,["color","font-size","font-style","font-weight","line-height","letter-spacing","text-decoration","text-transform","align","padding","height"])},__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"element",void 0),e=__decorate([core_1.Component({selector:"spice-page-builder-element-text",template:'<div *ngIf="!isEditMode; else editContainer" class="spice-drop-zone" [class.slds-is-hovered]="spicePageBuilderService.isMouseIn == \'content\'" (mouseenter)="setIsMouseIn(true)" (mouseleave)="setIsMouseIn(false)" tabindex="-1"><div class="spice-drop-zone-label"><div class="slds-media slds-media_center"><div class="slds-media__figure"><system-icon icon="text" sprite="utility" size="x-small" divClass="slds-current-color"></system-icon></div><div class="slds-media__body"><h2 class="slds-truncate"><system-label label="LBL_TEXT"></system-label></h2></div></div></div><article (dblclick)="edit()" class="spice-drop-zone-content"><div [style.background-color]="element.attributes[\'container-background-color\']"><div [innerHTML]="sanitizedContent" [ngStyle]="style"></div></div></article><div class="spice-drop-zone-actions"><div class="slds-button-group" role="group"><button cdkDragHandle class="slds-button slds-button_icon slds-button_icon-brand slds-button_icon-x-small" system-title="LBL_MOVE"><system-button-icon icon="move" addclasses="slds-icon"></system-button-icon></button> <button (click)="edit()" class="slds-button slds-button_icon slds-button_icon-brand slds-button_icon-x-small" system-title="LBL_CLOSE"><system-button-icon icon="edit" addclasses="slds-icon"></system-button-icon></button> <button (click)="delete$.emit()" class="slds-button slds-button_icon slds-button_icon-brand slds-button_icon-x-small" system-title="LBL_CLOSE"><system-button-icon icon="close" addclasses="slds-icon"></system-button-icon></button></div></div></div><ng-template #editContainer><div style="height: 50%"><system-section titlelabel="LBL_ELEMENT_CONTENT" [alwaysExpanded]="true" class="spice-collapsible-tab-grow"><div class="slds-grid slds-size--1-of-1 slds-height_full slds-p-around--xx-small"><system-richtext-editor [(ngModel)]="element.content" class="slds-size--1-of-1 spice-page-builder-text-editor"></system-richtext-editor></div></system-section></div><div style="height: 50%"><system-section titlelabel="LBL_STYLING" [alwaysExpanded]="true" class="spice-collapsible-tab-grow"><div class="slds-size--1-of-1 slds-height_full slds-p-horizontal--xx-small slds-p-vertical--x-small slds-scrollable--y"><div class="slds-size--1-of-1 slds-grid slds-wrap"><ng-container *ngFor="let styleAttribute of attributesList" [ngSwitch]="styleAttribute.type"><spice-page-builder-input-text *ngSwitchCase="\'text\'" [(ngModel)]="element.attributes[styleAttribute.name]" [label]="styleAttribute.name" class="slds-p-horizontal--xxx-small slds-size--1-of-2"></spice-page-builder-input-text><spice-page-builder-input-text *ngSwitchCase="\'textSuffix\'" [(ngModel)]="element.attributes[styleAttribute.name]" [label]="styleAttribute.name" [suffix]="spicePageBuilderService.defaultSuffix" class="slds-p-horizontal--xxx-small slds-size--1-of-2"></spice-page-builder-input-text><spice-page-builder-input-sides *ngSwitchCase="\'sides\'" [(ngModel)]="element.attributes[styleAttribute.name]" [label]="styleAttribute.name" class="slds-p-horizontal--xxx-small slds-size--1-of-2"></spice-page-builder-input-sides><spice-page-builder-input-color *ngSwitchCase="\'color\'" [(ngModel)]="element.attributes[styleAttribute.name]" [label]="styleAttribute.name" class="slds-p-horizontal--xxx-small slds-size--1-of-2"></spice-page-builder-input-color></ng-container></div></div></system-section></div></ng-template>',changeDetection:core_1.ChangeDetectionStrategy.OnPush}),__metadata("design:paramtypes",["function"==typeof(t=void 0!==platform_browser_1.DomSanitizer&&platform_browser_1.DomSanitizer)?t:Object,services_1.modal,"function"==typeof(s=void 0!==core_1.Injector&&core_1.Injector)?s:Object,"function"==typeof(i=void 0!==core_1.ChangeDetectorRef&&core_1.ChangeDetectorRef)?i:Object,SpicePageBuilderService])],e)}(SpicePageBuilderElement);exports.SpicePageBuilderElementText=SpicePageBuilderElementText;var SpicePageBuilderElementDivider=function(o){function e(e,t,s,i,l){var n=o.call(this,e,t,s,i,l)||this;return n.domSanitizer=e,n.modal=t,n.injector=s,n.cdRef=i,n.spicePageBuilderService=l,n.attributesList=[{name:"container-background-color",type:"color"},{name:"border-style",type:"text"},{name:"padding",type:"sides"},{name:"width",type:"textSuffix"},{name:"css-class",type:"text"}],n}var t,s,i;return __extends(e,o),e.prototype.generateStyle=function(){o.prototype.generateStyle.call(this,["border-color","border-style","border-width"])},__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"element",void 0),e=__decorate([core_1.Component({selector:"spice-page-builder-element-divider",template:'<div *ngIf="!isEditMode; else editContainer" class="spice-drop-zone" [class.slds-is-hovered]="spicePageBuilderService.isMouseIn == \'content\'" (mouseenter)="setIsMouseIn(true)" (mouseleave)="setIsMouseIn(false)" tabindex="-1"><div class="spice-drop-zone-label"><div class="slds-media slds-media_center"><div class="slds-media__figure"><system-icon icon="text" sprite="utility" size="x-small" divClass="slds-current-color"></system-icon></div><div class="slds-media__body"><h2 class="slds-truncate"><system-label label="LBL_DIVIDER"></system-label></h2></div></div></div><article (dblclick)="edit()" class="spice-drop-zone-content"><div [ngStyle]="{\'padding\': element.attributes[\'padding\'], \'background-color\': element.attributes[\'container-background-color\'], \'width\': element.attributes[\'width\']}"><hr [ngStyle]="{\'border-width\': style[\'border-width\'], \'border-style\': style[\'border-style\'], \'border-color\': style[\'border-color\']}" style="margin: 0"></div></article><div class="spice-drop-zone-actions"><div class="slds-button-group" role="group"><button cdkDragHandle class="slds-button slds-button_icon slds-button_icon-brand slds-button_icon-x-small" system-title="LBL_MOVE"><system-button-icon icon="move" addclasses="slds-icon"></system-button-icon></button> <button (click)="edit()" class="slds-button slds-button_icon slds-button_icon-brand slds-button_icon-x-small" system-title="LBL_CLOSE"><system-button-icon icon="edit" addclasses="slds-icon"></system-button-icon></button> <button (click)="delete$.emit()" class="slds-button slds-button_icon slds-button_icon-brand slds-button_icon-x-small" system-title="LBL_CLOSE"><system-button-icon icon="close" addclasses="slds-icon"></system-button-icon></button></div></div></div><ng-template #editContainer><div style="height: 50%"><system-section titlelabel="LBL_ELEMENT_CONTENT" [alwaysExpanded]="true" class="spice-collapsible-tab-grow"><div class="slds-grid slds-size--1-of-1 slds-height_full slds-p-around--xx-small"><div class="slds-size--1-of-1"><div class="slds-grid"><spice-page-builder-input-color [(ngModel)]="element.attributes[\'border-color\']" label="LBL_COLOR" class="slds-p-horizontal--xxx-small slds-size--1-of-2"></spice-page-builder-input-color></div><div class="slds-grid"><spice-page-builder-input-text [(ngModel)]="element.attributes[\'border-width\']" label="LBL_THICKNESS" [suffix]="spicePageBuilderService.defaultSuffix" class="slds-p-horizontal--xxx-small slds-size--1-of-2"></spice-page-builder-input-text></div></div></div></system-section></div><div style="height: 50%"><system-section titlelabel="LBL_STYLING" [alwaysExpanded]="true" class="spice-collapsible-tab-grow"><div class="slds-size--1-of-1 slds-height_full slds-p-horizontal--xx-small slds-p-vertical--x-small slds-scrollable--y"><div class="slds-size--1-of-1 slds-grid slds-wrap"><ng-container *ngFor="let styleAttribute of attributesList" [ngSwitch]="styleAttribute.type"><spice-page-builder-input-text *ngSwitchCase="\'text\'" [(ngModel)]="element.attributes[styleAttribute.name]" [label]="styleAttribute.name" class="slds-p-horizontal--xxx-small slds-size--1-of-2"></spice-page-builder-input-text><spice-page-builder-input-text *ngSwitchCase="\'textSuffix\'" [(ngModel)]="element.attributes[styleAttribute.name]" [label]="styleAttribute.name" [suffix]="spicePageBuilderService.defaultSuffix" class="slds-p-horizontal--xxx-small slds-size--1-of-2"></spice-page-builder-input-text><spice-page-builder-input-sides *ngSwitchCase="\'sides\'" [(ngModel)]="element.attributes[styleAttribute.name]" [label]="styleAttribute.name" class="slds-p-horizontal--xxx-small slds-size--1-of-2"></spice-page-builder-input-sides><spice-page-builder-input-color *ngSwitchCase="\'color\'" [(ngModel)]="element.attributes[styleAttribute.name]" [label]="styleAttribute.name" class="slds-p-horizontal--xxx-small slds-size--1-of-2"></spice-page-builder-input-color></ng-container></div></div></system-section></div></ng-template>',changeDetection:core_1.ChangeDetectionStrategy.OnPush}),__metadata("design:paramtypes",["function"==typeof(t=void 0!==platform_browser_1.DomSanitizer&&platform_browser_1.DomSanitizer)?t:Object,services_1.modal,"function"==typeof(s=void 0!==core_1.Injector&&core_1.Injector)?s:Object,"function"==typeof(i=void 0!==core_1.ChangeDetectorRef&&core_1.ChangeDetectorRef)?i:Object,SpicePageBuilderService])],e)}(SpicePageBuilderElement);exports.SpicePageBuilderElementDivider=SpicePageBuilderElementDivider;var SpicePageBuilderElementSpacer=function(o){function e(e,t,s,i,l){var n=o.call(this,e,t,s,i,l)||this;return n.domSanitizer=e,n.modal=t,n.injector=s,n.cdRef=i,n.spicePageBuilderService=l,n.attributesList=[{name:"width",type:"textSuffix"},{name:"padding",type:"sides"},{name:"container-background-color",type:"color"},{name:"vertical-align",type:"text"},{name:"css-class",type:"text"}],n}var t,s,i;return __extends(e,o),e.prototype.generateStyle=function(){o.prototype.generateStyle.call(this,["width","padding","vertical-align","height"])},__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"element",void 0),e=__decorate([core_1.Component({selector:"spice-page-builder-element-spacer",template:'<div *ngIf="!isEditMode; else editContainer" class="spice-drop-zone" [class.slds-is-hovered]="spicePageBuilderService.isMouseIn == \'content\'" (mouseenter)="setIsMouseIn(true)" (mouseleave)="setIsMouseIn(false)" tabindex="-1"><div class="spice-drop-zone-label"><div class="slds-media slds-media_center"><div class="slds-media__figure"><system-icon icon="text" sprite="utility" size="x-small" divClass="slds-current-color"></system-icon></div><div class="slds-media__body"><h2 class="slds-truncate"><system-label label="LBL_SPACER"></system-label></h2></div></div></div><article (dblclick)="edit()" class="spice-drop-zone-content"><div [ngStyle]="style" [style.background-color]="element.attributes[\'container-background-color\']"></div></article><div class="spice-drop-zone-actions"><div class="slds-button-group" role="group"><button cdkDragHandle class="slds-button slds-button_icon slds-button_icon-brand slds-button_icon-x-small" system-title="LBL_MOVE"><system-button-icon icon="move" addclasses="slds-icon"></system-button-icon></button> <button (click)="edit()" class="slds-button slds-button_icon slds-button_icon-brand slds-button_icon-x-small" system-title="LBL_CLOSE"><system-button-icon icon="edit" addclasses="slds-icon"></system-button-icon></button> <button (click)="delete$.emit()" class="slds-button slds-button_icon slds-button_icon-brand slds-button_icon-x-small" system-title="LBL_CLOSE"><system-button-icon icon="close" addclasses="slds-icon"></system-button-icon></button></div></div></div><ng-template #editContainer><div style="height: 50%"><system-section titlelabel="LBL_ELEMENT_CONTENT" [alwaysExpanded]="true" class="spice-collapsible-tab-grow"><div class="slds-grid slds-size--1-of-1 slds-height_full slds-p-around--xx-small"><div class="slds-size--1-of-1"><div class="slds-grid"><spice-page-builder-input-text [(ngModel)]="element.attributes.height" label="LBL_SPACING" class="slds-p-horizontal--xxx-small slds-size--1-of-2"></spice-page-builder-input-text></div></div></div></system-section></div><div style="height: 50%"><system-section titlelabel="LBL_STYLING" [alwaysExpanded]="true" class="spice-collapsible-tab-grow"><div class="slds-size--1-of-1 slds-height_full slds-p-horizontal--xx-small slds-p-vertical--x-small slds-scrollable--y"><div class="slds-size--1-of-1 slds-grid slds-wrap"><ng-container *ngFor="let styleAttribute of attributesList" [ngSwitch]="styleAttribute.type"><spice-page-builder-input-text *ngSwitchCase="\'text\'" [(ngModel)]="element.attributes[styleAttribute.name]" [label]="styleAttribute.name" class="slds-p-horizontal--xxx-small slds-size--1-of-2"></spice-page-builder-input-text><spice-page-builder-input-text *ngSwitchCase="\'textSuffix\'" [(ngModel)]="element.attributes[styleAttribute.name]" [label]="styleAttribute.name" [suffix]="spicePageBuilderService.defaultSuffix" class="slds-p-horizontal--xxx-small slds-size--1-of-2"></spice-page-builder-input-text><spice-page-builder-input-sides *ngSwitchCase="\'sides\'" [(ngModel)]="element.attributes[styleAttribute.name]" [label]="styleAttribute.name" class="slds-p-horizontal--xxx-small slds-size--1-of-2"></spice-page-builder-input-sides><spice-page-builder-input-color *ngSwitchCase="\'color\'" [(ngModel)]="element.attributes[styleAttribute.name]" [label]="styleAttribute.name" class="slds-p-horizontal--xxx-small slds-size--1-of-2"></spice-page-builder-input-color></ng-container></div></div></system-section></div></ng-template>',changeDetection:core_1.ChangeDetectionStrategy.OnPush}),__metadata("design:paramtypes",["function"==typeof(t=void 0!==platform_browser_1.DomSanitizer&&platform_browser_1.DomSanitizer)?t:Object,services_1.modal,"function"==typeof(s=void 0!==core_1.Injector&&core_1.Injector)?s:Object,"function"==typeof(i=void 0!==core_1.ChangeDetectorRef&&core_1.ChangeDetectorRef)?i:Object,SpicePageBuilderService])],e)}(SpicePageBuilderElement);exports.SpicePageBuilderElementSpacer=SpicePageBuilderElementSpacer;var SpicePageBuilderElementButton=function(o){function e(e,t,s,i,l){var n=o.call(this,e,t,s,i,l)||this;return n.domSanitizer=e,n.modal=t,n.injector=s,n.cdRef=i,n.spicePageBuilderService=l,n.attributesList=[{name:"href",type:"text"},{name:"rel",type:"text"},{name:"target",type:"text"},{name:"align",type:"text"},{name:"width",type:"textSuffix"},{name:"container-background-color",type:"color"},{name:"border",type:"text"},{name:"border-top",type:"text"},{name:"border-right",type:"text"},{name:"border-bottom",type:"text"},{name:"border-left",type:"text"},{name:"height",type:"textSuffix"},{name:"padding",type:"sides"},{name:"inner-padding",type:"sides"},{name:"line-height",type:"textSuffix"},{name:"vertical-align",type:"text"},{name:"font-size",type:"textSuffix"},{name:"font-style",type:"text"},{name:"font-weight",type:"text"},{name:"letter-spacing",type:"textSuffix"},{name:"text-decoration",type:"text"},{name:"text-transform",type:"text"},{name:"css-class",type:"text"}],n}var t,s,i;return __extends(e,o),e.prototype.handleEditResponse=function(e){this.element.content=e.content,o.prototype.handleEditResponse.call(this,e)},e.prototype.generateStyle=function(){o.prototype.generateStyle.call(this,["width","border","border-top","border-right","border-bottom","border-left","border-radius","height","line-height","vertical-align","font-size","font-style","font-weight","text-align","letter-spacing","text-decoration","text-transform","background-color","align","color"])},__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"element",void 0),e=__decorate([core_1.Component({selector:"spice-page-builder-element-button",template:'<div *ngIf="!isEditMode; else editContainer" class="spice-drop-zone" [class.slds-is-hovered]="spicePageBuilderService.isMouseIn == \'content\'" (mouseenter)="setIsMouseIn(true)" (mouseleave)="setIsMouseIn(false)" tabindex="-1"><div class="spice-drop-zone-label"><div class="slds-media slds-media_center"><div class="slds-media__figure"><system-icon icon="text" sprite="utility" size="x-small" divClass="slds-current-color"></system-icon></div><div class="slds-media__body"><h2 class="slds-truncate"><system-label label="LBL_BUTTON"></system-label></h2></div></div></div><article (dblclick)="edit()" class="spice-drop-zone-content"><div [ngStyle]="{\'background-color\': element.attributes[\'container-background-color\'], \'padding\': element.attributes[\'padding\']}"><div [ngStyle]="style" [style.padding]="element.attributes[\'inner-padding\']">{{element.content}}</div></div></article><div class="spice-drop-zone-actions"><div class="slds-button-group" role="group"><button cdkDragHandle class="slds-button slds-button_icon slds-button_icon-brand slds-button_icon-x-small" system-title="LBL_MOVE"><system-button-icon icon="move" addclasses="slds-icon"></system-button-icon></button> <button (click)="edit()" class="slds-button slds-button_icon slds-button_icon-brand slds-button_icon-x-small" system-title="LBL_CLOSE"><system-button-icon icon="edit" addclasses="slds-icon"></system-button-icon></button> <button (click)="delete$.emit()" class="slds-button slds-button_icon slds-button_icon-brand slds-button_icon-x-small" system-title="LBL_CLOSE"><system-button-icon icon="close" addclasses="slds-icon"></system-button-icon></button></div></div></div><ng-template #editContainer><div style="height: 50%"><system-section titlelabel="LBL_ELEMENT_CONTENT" [alwaysExpanded]="true" class="spice-collapsible-tab-grow"><div class="slds-grid slds-size--1-of-1 slds-height_full slds-p-around--xx-small"><div class="slds-size--1-of-1"><div class="slds-grid"><div class="slds-form-element slds-size--1-of-2 slds-p-horizontal--xxx-small"><label class="slds-form-element__label"><system-label label="LBL_TEXT"></system-label></label><div class="slds-form-element__control"><input type="text" [(ngModel)]="element.content" class="slds-input"></div></div><div class="slds-form-element slds-size--1-of-2 slds-p-horizontal--xxx-small"><label class="slds-form-element__label"><system-label label="LBL_URL"></system-label></label><div class="slds-form-element__control"><input type="text" [(ngModel)]="element.attributes.href" class="slds-input"></div></div></div><div class="slds-grid"><spice-page-builder-input-color [(ngModel)]="element.attributes[\'background-color\']" label="LBL_BACKGROUND_COLOR" class="slds-p-horizontal--xxx-small slds-size--1-of-2"></spice-page-builder-input-color><spice-page-builder-input-color [(ngModel)]="element.attributes[\'color\']" label="LBL_COLOR" class="slds-p-horizontal--xxx-small slds-size--1-of-2"></spice-page-builder-input-color></div><div class="slds-grid"><spice-page-builder-input-text [(ngModel)]="element.attributes[\'border-radius\']" label="LBL_RADIUS" [suffix]="spicePageBuilderService.defaultSuffix" class="slds-p-horizontal--xxx-small slds-size--1-of-2"></spice-page-builder-input-text><div class="slds-form-element slds-size--1-of-2 slds-p-horizontal--xxx-small"><label class="slds-form-element__label"><system-label label="LBL_TEXT_ALIGN"></system-label></label><div class="slds-form-element__control"><system-input-radio-button-group [(ngModel)]="element.attributes[\'text-align\']" [inputOptions]="spicePageBuilderService.alignOptions"></system-input-radio-button-group></div></div></div></div></div></system-section></div><div style="height: 50%"><system-section titlelabel="LBL_STYLING" [alwaysExpanded]="true" class="spice-collapsible-tab-grow"><div class="slds-size--1-of-1 slds-height_full slds-p-horizontal--xx-small slds-p-vertical--x-small slds-scrollable--y"><div class="slds-size--1-of-1 slds-grid slds-wrap"><ng-container *ngFor="let styleAttribute of attributesList" [ngSwitch]="styleAttribute.type"><spice-page-builder-input-text *ngSwitchCase="\'text\'" [(ngModel)]="element.attributes[styleAttribute.name]" [label]="styleAttribute.name" class="slds-p-horizontal--xxx-small slds-size--1-of-2"></spice-page-builder-input-text><spice-page-builder-input-text *ngSwitchCase="\'textSuffix\'" [(ngModel)]="element.attributes[styleAttribute.name]" [label]="styleAttribute.name" [suffix]="spicePageBuilderService.defaultSuffix" class="slds-p-horizontal--xxx-small slds-size--1-of-2"></spice-page-builder-input-text><spice-page-builder-input-sides *ngSwitchCase="\'sides\'" [(ngModel)]="element.attributes[styleAttribute.name]" [label]="styleAttribute.name" class="slds-p-horizontal--xxx-small slds-size--1-of-2"></spice-page-builder-input-sides><spice-page-builder-input-color *ngSwitchCase="\'color\'" [(ngModel)]="element.attributes[styleAttribute.name]" [label]="styleAttribute.name" class="slds-p-horizontal--xxx-small slds-size--1-of-2"></spice-page-builder-input-color></ng-container></div></div></system-section></div></ng-template>',changeDetection:core_1.ChangeDetectionStrategy.OnPush}),__metadata("design:paramtypes",["function"==typeof(t=void 0!==platform_browser_1.DomSanitizer&&platform_browser_1.DomSanitizer)?t:Object,services_1.modal,"function"==typeof(s=void 0!==core_1.Injector&&core_1.Injector)?s:Object,"function"==typeof(i=void 0!==core_1.ChangeDetectorRef&&core_1.ChangeDetectorRef)?i:Object,SpicePageBuilderService])],e)}(SpicePageBuilderElement);exports.SpicePageBuilderElementButton=SpicePageBuilderElementButton;var SpicePageBuilderElementCode=function(a){function e(e,t,s,i,l,n){var o=a.call(this,e,t,s,i,n)||this;return o.domSanitizer=e,o.modal=t,o.injector=s,o.cdRef=i,o.libloader=l,o.spicePageBuilderService=n,o.attributesList=[],o.beautifyLoaded=!1,o.sanitizedContent="",o}var t,s,i;return __extends(e,a),e.prototype.ngOnInit=function(){a.prototype.ngOnInit.call(this),this.sanitizeContent(),this.isEditMode&&this.loadBeatifyLibrary()},e.prototype.handleEditResponse=function(e){this.element.content=e.content,this.sanitizeContent(),a.prototype.handleEditResponse.call(this,e)},e.prototype.loadBeatifyLibrary=function(){var t=this;this.libloader.loadLib("jsbeautify").subscribe(function(e){t.beautifyLoaded=!0,t.cdRef.detectChanges()})},e.prototype.sanitizeContent=function(){this.sanitizedContent=this.domSanitizer.bypassSecurityTrustHtml(this.element.content)},e.prototype.beautify=function(){this.element.content=html_beautify(this.element.content,{indent_size:4,indent_char:" ",indent_with_tabs:!1,end_with_newline:!1,indent_level:0,preserve_newlines:!0,max_preserve_newlines:10,space_in_paren:!1,space_in_empty_paren:!1,unindent_chained_methods:!1,break_chained_methods:!1,keep_array_indentation:!1,unescape_strings:!1,wrap_line_length:100,e4x:!1,comma_first:!1,operator_position:"before-newline",indent_empty_lines:!1,templating:["auto"]}),this.cdRef.detectChanges()},__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"element",void 0),e=__decorate([core_1.Component({selector:"spice-page-builder-element-code",template:'<div *ngIf="!isEditMode; else editContainer" class="spice-drop-zone" [class.slds-is-hovered]="spicePageBuilderService.isMouseIn == \'content\'" (mouseenter)="setIsMouseIn(true)" (mouseleave)="setIsMouseIn(false)" tabindex="-1"><div class="spice-drop-zone-label"><div class="slds-media slds-media_center"><div class="slds-media__figure"><system-icon icon="text" sprite="utility" size="x-small" divClass="slds-current-color"></system-icon></div><div class="slds-media__body"><h2 class="slds-truncate"><system-label label="LBL_HTML_CODE"></system-label></h2></div></div></div><article (dblclick)="edit()" class="spice-drop-zone-content"><div [innerHTML]="sanitizedContent" [ngStyle]="style"></div></article><div class="spice-drop-zone-actions"><div class="slds-button-group" role="group"><button cdkDragHandle class="slds-button slds-button_icon slds-button_icon-brand slds-button_icon-x-small" system-title="LBL_MOVE"><system-button-icon icon="move" addclasses="slds-icon"></system-button-icon></button> <button (click)="edit()" class="slds-button slds-button_icon slds-button_icon-brand slds-button_icon-x-small" system-title="LBL_CLOSE"><system-button-icon icon="edit" addclasses="slds-icon"></system-button-icon></button> <button (click)="delete$.emit()" class="slds-button slds-button_icon slds-button_icon-brand slds-button_icon-x-small" system-title="LBL_CLOSE"><system-button-icon icon="close" addclasses="slds-icon"></system-button-icon></button></div></div></div><ng-template #editContainer><div class="slds-height_full"><system-section titlelabel="LBL_ELEMENT_CONTENT" [alwaysExpanded]="true" class="spice-collapsible-tab-grow"><div class="slds-grid slds-size--1-of-1 slds-height_full slds-p-around--xx-small"><div class="slds-form-element slds-grid slds-grid--vertical slds-size--1-of-1"><div class="slds-grid slds-grid--align-spread slds-m-bottom--xx-small"><span class="slds-form-element__label"><system-label label="LBL_HTML"></system-label></span> <button [disabled]="!beautifyLoaded" class="slds-button slds-button--icon-border slds-button--neutral" (click)="beautify()" system-title="LBL_BEAUTIFY"><system-button-icon icon="right_align_text"></system-button-icon></button></div><div class="slds-form-element__control slds-grid slds-grow"><textarea class="slds-textarea" [(ngModel)]="element.content" style="resize: none;"></textarea></div></div></div></system-section></div></ng-template>',changeDetection:core_1.ChangeDetectionStrategy.OnPush}),__metadata("design:paramtypes",["function"==typeof(t=void 0!==platform_browser_1.DomSanitizer&&platform_browser_1.DomSanitizer)?t:Object,services_1.modal,"function"==typeof(s=void 0!==core_1.Injector&&core_1.Injector)?s:Object,"function"==typeof(i=void 0!==core_1.ChangeDetectorRef&&core_1.ChangeDetectorRef)?i:Object,services_1.libloader,SpicePageBuilderService])],e)}(SpicePageBuilderElement);exports.SpicePageBuilderElementCode=SpicePageBuilderElementCode;var SpicePageBuilderElementColumn=function(){function e(e,t,s){this.spicePageBuilderService=e,this.modal=t,this.cdRef=s,this.dragEntered=!1,this.style={}}var t,s;return e.prototype.ngOnInit=function(){this.generateStyle()},e.prototype.ngAfterViewInit=function(){this.spicePageBuilderService.addDropListToGroup(this.dropList)},e.prototype.trackByFn=function(e,t){return e},e.prototype.contentPredicate=function(e){return"section"!=e.data.tagName},e.prototype.generateStyle=function(){this.style={"background-color":this.column.attributes["background-color"],border:this.column.attributes.border,"border-top":this.column.attributes["border-top"],"border-right":this.column.attributes["border-right"],"border-bottom":this.column.attributes["border-bottom"],"border-left":this.column.attributes["border-left"],"border-radius":this.column.attributes["border-radius"],width:this.column.attributes.width,"vertical-align":this.column.attributes["vertical-align"],padding:this.column.attributes.padding}},e.prototype.onDrop=function(s){var i=this;if(s.previousContainer!=s.container)switch(this.spicePageBuilderService.dragPlaceholderNode&&s.previousContainer.element.nativeElement.contains(this.spicePageBuilderService.dragPlaceholderNode)&&(s.previousContainer.element.nativeElement.removeChild(this.spicePageBuilderService.dragPlaceholderNode),this.spicePageBuilderService.dragPlaceholderNode=void 0),-1==s.previousContainer.id.indexOf("panel-drop-list")&&(s.previousContainer.data.children=s.previousContainer.data.children.filter(function(e){return e!=s.item.data})),s.item.data.tagName){case"image":this.spicePageBuilderService.openMediaFilePicker().subscribe(function(e){if(e){var t=JSON.parse(JSON.stringify(s.item.data));t.attributes.src=e,delete t.icon,i.column.children.splice(s.currentIndex,0,t),i.cdRef.detectChanges()}});break;default:var e=JSON.parse(JSON.stringify(s.item.data));delete e.icon,this.column.children.splice(s.currentIndex,0,e)}else drag_drop_1.moveItemInArray(this.column.children,s.previousIndex,s.currentIndex);this.dragEntered=!1},e.prototype.onDragExit=function(e){this.dragEntered=!1},e.prototype.onDragEnter=function(e){this.dragEntered=!0},e.prototype.onContentDelete=function(t){this.column.children=this.column.children.filter(function(e){return e!=t})},__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"column",void 0),__decorate([core_1.ViewChild("dropList",{read:drag_drop_1.CdkDropList,static:!1}),__metadata("design:type","function"==typeof(t=void 0!==drag_drop_1.CdkDropList&&drag_drop_1.CdkDropList)?t:Object)],e.prototype,"dropList",void 0),e=__decorate([core_1.Component({selector:"spice-page-builder-element-column",template:'<div [ngStyle]="style" cdkDropList #dropList="cdkDropList" [cdkDropListEnterPredicate]="contentPredicate" [cdkDropListData]="column" (cdkDropListEntered)="onDragEnter($event)" (cdkDropListExited)="onDragExit($event)" (cdkDropListDropped)="onDrop($event)" class="slds-grid slds-grid--vertical spice-page-builder-renderer-drop-list"><ng-container *ngFor="let element of column.children; trackBy: trackByFn" [ngSwitch]="element.tagName"><spice-page-builder-element-text *ngSwitchCase="\'text\'" [element]="element" (delete$)="onContentDelete(element)" cdkDrag [cdkDragData]="element" class="slds-grid slds-grow slds-drag--preview" style="width: 100%"></spice-page-builder-element-text><spice-page-builder-element-image *ngSwitchCase="\'image\'" [element]="element" (delete$)="onContentDelete(element)" cdkDrag [cdkDragData]="element" class="slds-grid slds-grow slds-drag--preview" style="width: 100%"></spice-page-builder-element-image><spice-page-builder-element-button *ngSwitchCase="\'button\'" [element]="element" (delete$)="onContentDelete(element)" cdkDrag [cdkDragData]="element" class="slds-grid slds-grow slds-drag--preview" style="width: 100%"></spice-page-builder-element-button><spice-page-builder-element-divider *ngSwitchCase="\'divider\'" [element]="element" (delete$)="onContentDelete(element)" cdkDrag [cdkDragData]="element" class="slds-grid slds-grow slds-drag--preview" style="width: 100%"></spice-page-builder-element-divider><spice-page-builder-element-spacer *ngSwitchCase="\'spacer\'" [element]="element" (delete$)="onContentDelete(element)" cdkDrag [cdkDragData]="element" class="slds-grid slds-grow slds-drag--preview" style="width: 100%"></spice-page-builder-element-spacer><spice-page-builder-element-code *ngSwitchCase="\'raw\'" [element]="element" (delete$)="onContentDelete(element)" cdkDrag [cdkDragData]="element" class="slds-grid slds-grow slds-drag--preview" style="width: 100%"></spice-page-builder-element-code></ng-container><div *ngIf="!dragEntered && column.children?.length == 0" class="slds-align--absolute-center slds-size--1-of-1" [style.height.px]="spicePageBuilderService.defaultPlaceholderHeight"><div class="slds-align--absolute-center slds-height_full slds-size--1-of-1 slds-theme--shade slds-text-title--caps slds-truncate"><system-label label="MSG_DROP_CONTENT_HERE"></system-label></div></div></div>',changeDetection:core_1.ChangeDetectionStrategy.OnPush}),__metadata("design:paramtypes",[SpicePageBuilderService,services_1.modal,"function"==typeof(s=void 0!==core_1.ChangeDetectorRef&&core_1.ChangeDetectorRef)?s:Object])],e)}();exports.SpicePageBuilderElementColumn=SpicePageBuilderElementColumn;var SpicePageBuilderElementSection=function(){function e(e){this.spicePageBuilderService=e,this.delete$=new core_1.EventEmitter,this.style={}}var t;return e.prototype.ngOnInit=function(){this.generateStyle()},e.prototype.trackByFn=function(e,t){return e},e.prototype.generateStyle=function(){this.style={"background-color":this.section.attributes["background-color"],border:this.section.attributes.border,"border-top":this.section.attributes["border-top"],"border-right":this.section.attributes["border-right"],"border-bottom":this.section.attributes["border-bottom"],"border-left":this.section.attributes["border-left"],"border-radius":this.section.attributes["border-radius"],padding:this.section.attributes.padding,"text-align":this.section.attributes["text-align"]}},e.prototype.setIsMouseIn=function(e){this.spicePageBuilderService.isMouseIn=e?"section":void 0},__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"section",void 0),__decorate([core_1.Output(),__metadata("design:type","function"==typeof(t=void 0!==core_1.EventEmitter&&core_1.EventEmitter)?t:Object)],e.prototype,"delete$",void 0),e=__decorate([core_1.Component({selector:"spice-page-builder-element-section",template:'<div [class.slds-is-hovered]="spicePageBuilderService.isMouseIn == \'section\'" (mouseenter)="setIsMouseIn(true)" (mouseleave)="setIsMouseIn(false)" tabindex="-1" class="spice-drop-zone"><div class="spice-drop-zone-label"><div class="slds-media slds-media_center"><div class="slds-media__figure"><system-icon icon="full_width_view" sprite="utility" size="x-small" divClass="slds-current-color"></system-icon></div><div class="slds-media__body"><h2 class="slds-truncate"><system-label label="LBL_SECTION"></system-label></h2></div></div></div><article class="spice-drop-zone-content slds-grid"><spice-page-builder-element-column *ngFor="let column of section.children; trackBy: trackByFn" [column]="column" [style.width.%]="100 / section.children.length" class="spice-display-block slds-grow slds-height_full"></spice-page-builder-element-column></article><div class="spice-drop-zone-actions"><div class="slds-button-group" role="group"><button cdkDragHandle class="slds-button slds-button_icon slds-button_icon-brand slds-button_icon-x-small" system-title="LBL_MOVE"><system-button-icon icon="move" addclasses="slds-icon"></system-button-icon></button> <button (click)="delete$.emit()" class="slds-button slds-button_icon slds-button_icon-brand slds-button_icon-x-small" system-title="LBL_CLOSE"><system-button-icon icon="close" addclasses="slds-icon"></system-button-icon></button></div></div></div>',changeDetection:core_1.ChangeDetectionStrategy.OnPush}),__metadata("design:paramtypes",[SpicePageBuilderService])],e)}();exports.SpicePageBuilderElementSection=SpicePageBuilderElementSection;var SpicePageBuilderElementBody=function(){function e(e){this.spicePageBuilderService=e,this.dragEntered=!1,this.style={}}var t;return e.prototype.ngOnInit=function(){this.generateStyle()},e.prototype.ngAfterViewInit=function(){this.spicePageBuilderService.addDropListToGroup(this.dropList)},e.prototype.trackByFn=function(e,t){return e},e.prototype.sectionPredicate=function(e){return"section"==e.data.tagName},e.prototype.generateStyle=function(){this.style={"background-color":this.body.attributes["background-color"],width:this.body.attributes.width}},e.prototype.onSectionDelete=function(t){this.body.children=this.body.children.filter(function(e){return e!=t})},e.prototype.onDrop=function(e){if(e.previousContainer!=e.container){this.spicePageBuilderService.dragPlaceholderNode&&e.previousContainer.element.nativeElement.contains(this.spicePageBuilderService.dragPlaceholderNode)&&(e.previousContainer.element.nativeElement.removeChild(this.spicePageBuilderService.dragPlaceholderNode),this.spicePageBuilderService.dragPlaceholderNode=void 0);var t=JSON.parse(JSON.stringify(e.item.data));this.body.children.splice(e.currentIndex,0,t),this.dragEntered=!1}else drag_drop_1.moveItemInArray(this.body.children,e.previousIndex,e.currentIndex)},__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"body",void 0),__decorate([core_1.ViewChild("dropList",{read:drag_drop_1.CdkDropList,static:!1}),__metadata("design:type","function"==typeof(t=void 0!==drag_drop_1.CdkDropList&&drag_drop_1.CdkDropList)?t:Object)],e.prototype,"dropList",void 0),e=__decorate([core_1.Component({selector:"spice-page-builder-element-body",template:'<div [ngStyle]="style" cdkDropList #dropList="cdkDropList" (cdkDropListEntered)="dragEntered = true" (cdkDropListExited)="dragEntered = false" (cdkDropListDropped)="onDrop($event)" [cdkDropListEnterPredicate]="sectionPredicate" [cdkDropListData]="body" style="height: 100%; width: 100%" class="spice-page-builder-renderer-drop-list"><spice-page-builder-element-section *ngFor="let section of body.children; trackBy: trackByFn" [ngStyle]="section.style" [cdkDragData]="section" (delete$)="onSectionDelete(section)" [section]="section" cdkDrag class="spice-display-block slds-drag--preview"></spice-page-builder-element-section><div *ngIf="!dragEntered && body.children?.length == 0" class="slds-align--absolute-center slds-height_full slds-size--1-of-1 slds-text-title--caps slds-truncate"><system-label label="LBL_DROP_SECTION_HERE"></system-label></div></div>',changeDetection:core_1.ChangeDetectionStrategy.OnPush}),__metadata("design:paramtypes",[SpicePageBuilderService])],e)}();exports.SpicePageBuilderElementBody=SpicePageBuilderElementBody;var SpicePageBuilderRenderer=function(){function e(e){this.spicePageBuilderService=e}return e.prototype.ngOnInit=function(){this.setBodyElement()},e.prototype.trackByFn=function(e,t){return e},e.prototype.setBodyElement=function(){this.spicePageBuilderService.page&&this.spicePageBuilderService.page.children&&(this.body=this.spicePageBuilderService.page.children[0])},e=__decorate([core_1.Component({selector:"spice-page-builder-renderer",template:'<div class="slds-grid slds-grid--align-center slds-scrollable--y slds-height_full slds-p-around--large" style="background-color: #ca1b21ea"><spice-page-builder-element-body [body]="body" style="box-shadow: 0 0 8px #666;"></spice-page-builder-element-body></div>',changeDetection:core_1.ChangeDetectionStrategy.OnPush}),__metadata("design:paramtypes",[SpicePageBuilderService])],e)}();exports.SpicePageBuilderRenderer=SpicePageBuilderRenderer;var SpicePageBuilderPanel=function(){function e(e){this.spicePageBuilderService=e,this.sections=[]}return e.prototype.ngOnInit=function(){this.generateSections()},e.prototype.generateSections=function(){for(var e=1;e<=4;){for(var t=1,s=[];t<=e;)s.push(JSON.parse(JSON.stringify(this.spicePageBuilderService.panelDefaultColumn))),t++;var i=JSON.parse(JSON.stringify(this.spicePageBuilderService.panelDefaultSection));i.children=s,this.sections.push(i),e++}},e.prototype.trackByFn=function(e,t){return e},e.prototype.noReturnPredicate=function(){return!1},e.prototype.onDragExit=function(e){var t=e.item.getPlaceholderElement().cloneNode(!0);this.spicePageBuilderService.dragPlaceholderNode=t,e.container.element.nativeElement.insertBefore(t,e.item.getPlaceholderElement())},e.prototype.onDragEnter=function(e){this.spicePageBuilderService.dragPlaceholderNode&&e.container.element.nativeElement.contains(this.spicePageBuilderService.dragPlaceholderNode)&&(e.container.element.nativeElement.removeChild(this.spicePageBuilderService.dragPlaceholderNode),this.spicePageBuilderService.dragPlaceholderNode=void 0)},e.prototype.save=function(){this.spicePageBuilderService.emitData()},e.prototype.cancel=function(){this.spicePageBuilderService.emitData(!0),this.self.destroy()},__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"self",void 0),e=__decorate([core_1.Component({selector:"spice-page-builder-panel",template:'<div class="slds-grid slds-grid--vertical slds-height_full slds-p-around--x-small slds-scrollable--y"><div style="height: 50%"><system-section titlelabel="LBL_SECTIONS" [alwaysExpanded]="true" class="spice-collapsible-tab-grow"><div cdkDropList (cdkDropListEntered)="onDragEnter($event)" (cdkDropListExited)="onDragExit($event)" cdkDropListSortingDisabled [cdkDropListEnterPredicate]="noReturnPredicate" [cdkDropListData]="sections" class="slds-grid slds-size--1-of-1 slds-grid--vertical slds-height_full slds-p-bottom--small spice-page-builder-panel-drop-list"><div *ngFor="let section of sections; trackBy: trackByFn" cdkDrag [cdkDragData]="section" class="slds-grow slds-p-around--xx-small slds-grid slds-grid--vertical slds-drag--preview spice-drag-placeholder-visible"><div>{{section.children?.length}} <system-label label="LBL_COLUMNS"></system-label></div><div class="slds-grid slds-grow slds-theme--default" style="border: 2px solid #ca1b21; cursor: move"><div *ngFor="let item of section.children; trackBy: trackByFn; let last = last" [style.border-right]="!last ? \'2px solid #ca1b21\' : 0" class="slds-grow"></div></div></div></div></system-section></div><div style="height: 50%"><system-section titlelabel="LBL_CONTENT_ELEMENTS" [alwaysExpanded]="true" class="spice-collapsible-tab-grow"><div cdkDropList (cdkDropListEntered)="onDragEnter($event)" (cdkDropListExited)="onDragExit($event)" [id]="spicePageBuilderService.contentListId" cdkDropListSortingDisabled [cdkDropListEnterPredicate]="noReturnPredicate" [cdkDropListData]="spicePageBuilderService.panelElements" class="slds-grid slds-size--1-of-1 slds-p-around--xx-small slds-wrap spice-page-builder-panel-drop-list" style="height: fit-content"><div *ngFor="let contentElement of spicePageBuilderService.panelElements; trackBy: trackByFn" cdkDrag [cdkDragData]="contentElement" [title]="contentElement.tagName" class="slds-p-around--xxx-small slds-drag--preview" style="cursor: move"><div class="slds-p-around--x-small slds-card slds-height_full slds-align--absolute-center slds-grid slds-grid--vertical"><system-utility-icon [icon]="contentElement.icon" size="large"></system-utility-icon><div><system-label [label]="contentElement.label"></system-label></div></div></div></div></system-section></div><div class="slds-grid slds-grid--align-end slds-has-divider--top-space"><button class="slds-button slds-button--neutral slds-m-left--xx-small spice-hover-button" (click)="cancel()"><system-label label="LBL_CANCEL"></system-label></button> <button class="slds-button slds-button--brand slds-m-left--xx-small spice-hover-button" (click)="save()"><system-label label="LBL_SAVE"></system-label></button></div></div>',changeDetection:core_1.ChangeDetectionStrategy.OnPush}),__metadata("design:paramtypes",[SpicePageBuilderService])],e)}();exports.SpicePageBuilderPanel=SpicePageBuilderPanel;var SpicePageBuilderEditor=function(){function SpicePageBuilderEditor(){this.response=new rxjs_1.BehaviorSubject(!1),this.self={}}var e;return SpicePageBuilderEditor.prototype.trackByFn=function(e,t){return e},SpicePageBuilderEditor.prototype.cancel=function(){this.response.next(!1),this.response.complete(),this.self.destroy()},SpicePageBuilderEditor.prototype.confirm=function(){this.response.next(JSON.parse(JSON.stringify(this.element))),this.response.complete(),this.self.destroy()},__decorate([core_1.ViewChild("codeContainer",{read:core_1.ViewContainerRef,static:!1}),__metadata("design:type","function"==typeof(e=void 0!==core_1.ViewContainerRef&&core_1.ViewContainerRef)?e:Object)],SpicePageBuilderEditor.prototype,"codeContainer",void 0),SpicePageBuilderEditor=__decorate([core_1.Component({selector:"spice-page-builder-editor",template:'<system-modal><system-modal-header (close)="cancel()"><system-label label="LBL_EDIT"></system-label> <system-label [label]="element.label"></system-label></system-modal-header><system-modal-content [grow]="true"><div class="slds-height_full slds-size--1-of-1" [ngSwitch]="element.tagName"><spice-page-builder-element-text *ngSwitchCase="\'text\'" [element]="element" [isEditMode]="true"></spice-page-builder-element-text><spice-page-builder-element-image *ngSwitchCase="\'image\'" [element]="element" [isEditMode]="true"></spice-page-builder-element-image><spice-page-builder-element-button *ngSwitchCase="\'button\'" [element]="element" [isEditMode]="true"></spice-page-builder-element-button><spice-page-builder-element-divider *ngSwitchCase="\'divider\'" [element]="element" [isEditMode]="true"></spice-page-builder-element-divider><spice-page-builder-element-spacer *ngSwitchCase="\'spacer\'" [element]="element" [isEditMode]="true"></spice-page-builder-element-spacer><spice-page-builder-element-code *ngSwitchCase="\'raw\'" [element]="element" [isEditMode]="true"></spice-page-builder-element-code></div></system-modal-content><system-modal-footer><button class="slds-button slds-button--neutral" (click)="cancel()"><system-label label="LBL_CANCEL"></system-label></button> <button class="slds-button slds-button--brand" (click)="confirm()"><system-label label="LBL_SAVE"></system-label></button></system-modal-footer></system-modal>',changeDetection:core_1.ChangeDetectionStrategy.OnPush})],SpicePageBuilderEditor)}();exports.SpicePageBuilderEditor=SpicePageBuilderEditor;var SpicePageBuilder=function(){function SpicePageBuilder(e,t){this.spicePageBuilderService=e,this.cdRef=t,this.dropListGroupDefined=!1}var e;return SpicePageBuilder.prototype.ngAfterViewInit=function(){this.setDropListReference()},SpicePageBuilder.prototype.setDropListReference=function(){this.spicePageBuilderService.dropListGroup=this.dropListGroup,this.dropListGroupDefined=!0,this.cdRef.detectChanges()},__decorate([core_1.ViewChild(drag_drop_1.CdkDropListGroup,{read:drag_drop_1.CdkDropListGroup,static:!1}),__metadata("design:type",Object)],SpicePageBuilder.prototype,"dropListGroup",void 0),SpicePageBuilder=__decorate([core_1.Component({selector:"spice-page-builder",template:'<div class="slds-grid spice-page-builder-main-container" system-to-bottom-noscroll cdkDropListGroup><ng-container *ngIf="dropListGroupDefined"><spice-page-builder-panel [self]="self" class="slds-size--1-of-4 spice-display-block slds-height_full slds-border--right" style="box-shadow: 10px 0 20px 0 #1b1b1b;"></spice-page-builder-panel><spice-page-builder-renderer class="slds-size--3-of-4 spice-display-block slds-height_full"></spice-page-builder-renderer></ng-container></div>',providers:[SpicePageBuilderService],changeDetection:core_1.ChangeDetectionStrategy.OnPush}),__metadata("design:paramtypes",[SpicePageBuilderService,"function"==typeof(e=void 0!==core_1.ChangeDetectorRef&&core_1.ChangeDetectorRef)?e:Object])],SpicePageBuilder)}();exports.SpicePageBuilder=SpicePageBuilder;var fieldPageBuilder=function(u){function fieldPageBuilder(e,t,s,i,l,n,o,a,r,d,c){var p=u.call(this,e,t,s,i,o)||this;return p.model=e,p.view=t,p.language=s,p.metadata=i,p.backend=l,p.toast=n,p.router=o,p.injector=a,p.modal=r,p.cdRef=d,p.sanitizer=c,p.iframeHeight=250,p}var e,t,s,i;return __extends(fieldPageBuilder,u),fieldPageBuilder.prototype.ngOnInit=function(){u.prototype.ngOnInit.call(this),this.setIframeHeight()},fieldPageBuilder.prototype.ngAfterViewInit=function(){u.prototype.ngAfterViewInit.call(this),this.setHtmlValue(),this.modelChangesSubscriber()},fieldPageBuilder.prototype.setEditMode=function(){this.model.startEdit(),this.view.setEditMode(),this.cdRef.detectChanges()},fieldPageBuilder.prototype.modelChangesSubscriber=function(){var e=this;this.subscriptions.add(this.model.data$.subscribe(function(){return e.setHtmlValue()})),this.subscriptions.add(this.view.mode$.subscribe(function(){return e.cdRef.detectChanges()}))},fieldPageBuilder.prototype.setHtmlValue=function(){this.value&&(this.parsedHtml=this.sanitizer.bypassSecurityTrustResourceUrl("data:text/html;charset=UTF-8,"+encodeURIComponent(this.value)),this.cdRef.detectChanges())},fieldPageBuilder.prototype.openPageBuilder=function(){var i=this,l=this.fieldconfig.bodySPBField||"body_spb";this.modal.openModal("SpicePageBuilder",!0,this.injector).subscribe(function(s){i.value&&(s.instance.spicePageBuilderService.page=JSON.parse(JSON.stringify(i.model.data[l]))),s.instance.spicePageBuilderService.response.subscribe(function(e){if(e){i.model.setField(l,e);var t=i.modal.await("LBL_PARSING_HTML");i.backend.postRequest("common/mjml/json2html",{},{json:i.model.data[l]}).subscribe(function(e){if(!e||!e.html)return i.toast.sendToast(i.language.getLabel("ERR_FAILED_TO_EXECUTE"),"error"),t.emit(!0),t.complete();i.parsedHtml=i.sanitizer.bypassSecurityTrustResourceUrl("data:text/html;charset=UTF-8,"+encodeURIComponent(e.html)),i.value=e.html,t.emit(!0),t.complete()}),s.instance.self.destroy()}})})},fieldPageBuilder.prototype.setIframeHeight=function(){var e=parseInt(this.fieldconfig.initialHeight,10);e&&!isNaN(e)&&(this.iframeHeight=e)},fieldPageBuilder=__decorate([core_1.Component({selector:"field-page-builder",template:'<div class="slds-grid slds-grid--vertical-align-center slds-grid--align-spread"><div><field-label *ngIf="displayLabel" [fieldname]="fieldname" [fieldconfig]="fieldconfig"></field-label></div><button *ngIf="!isEditMode() && isEditable()" class="slds-button slds-button--icon slds-m-left--xx-small spice-hover-button" (click)="setEditMode()"><system-button-icon [icon]="\'edit\'"></system-button-icon></button></div><field-generic-display *ngIf="!isEditMode()" [fielddisplayclass]="fielddisplayclass" [editable]="false" [fieldconfig]="fieldconfig"><div (dblclick)="setEditMode()" class="slds-size--1-of-1" [style.min-height.px]="iframeHeight"><iframe *ngIf="parsedHtml" [src]="parsedHtml" [style.height.px]="iframeHeight" style="border: 0; resize: vertical" class="slds-size--1-of-1"></iframe></div></field-generic-display><div *ngIf="isEditable() && isEditMode()" class="slds-form-element__control" [ngClass]="getFieldClass()"><div class="slds-size--1-of-1 spice-hover-display-children"><div class="slds-size--1-of-1" [style.min-height.px]="iframeHeight"><iframe *ngIf="parsedHtml" [src]="parsedHtml" [style.height.px]="iframeHeight" style="border: 0; resize: vertical" class="slds-size--1-of-1"></iframe></div><div class="spice-hover-child slds-grid" style="position: absolute; top:0;right:0;bottom:0;left:0; background: #656565; opacity: .8; border-radius: 5px;"><div class="slds-align--absolute-center slds-p-around--x-small" style="border: 1px solid #ddd; border-radius: 5px;"><button class="slds-button slds-button--icon-border-filled spice-hover-button" (click)="openPageBuilder()"><system-button-icon [icon]="\'edit\'"></system-button-icon></button></div></div></div><field-messages [fieldname]="fieldname"></field-messages></div>',changeDetection:core_1.ChangeDetectionStrategy.OnPush}),__metadata("design:paramtypes",[services_1.model,services_1.view,services_1.language,services_1.metadata,services_1.backend,services_1.toast,"function"==typeof(e=void 0!==router_1.Router&&router_1.Router)?e:Object,"function"==typeof(t=void 0!==core_1.Injector&&core_1.Injector)?t:Object,services_1.modal,"function"==typeof(s=void 0!==core_1.ChangeDetectorRef&&core_1.ChangeDetectorRef)?s:Object,"function"==typeof(i=void 0!==platform_browser_1.DomSanitizer&&platform_browser_1.DomSanitizer)?i:Object])],fieldPageBuilder)}(objectfields_1.fieldGeneric);exports.fieldPageBuilder=fieldPageBuilder;var ModuleSpicePageBuilder=function(){function ModuleSpicePageBuilder(){}return ModuleSpicePageBuilder=__decorate([core_1.NgModule({declarations:[SpicePageBuilder,SpicePageBuilderPanel,SpicePageBuilderRenderer,SpicePageBuilderElement,SpicePageBuilderInputText,SpicePageBuilderInputSides,SpicePageBuilderInputColor,SpicePageBuilderEditor,SpicePageBuilderElement,SpicePageBuilderElementBody,SpicePageBuilderElementSection,SpicePageBuilderElementColumn,SpicePageBuilderElementImage,SpicePageBuilderElementText,SpicePageBuilderElementDivider,SpicePageBuilderElementSpacer,SpicePageBuilderElementButton,SpicePageBuilderElementCode,fieldPageBuilder],exports:[SpicePageBuilder],imports:[common_1.CommonModule,objectfields_1.ObjectFields,systemcomponents_1.SystemComponents,forms_1.FormsModule,directives_1.DirectivesModule,drag_drop_1.DragDropModule]})],ModuleSpicePageBuilder)}();exports.ModuleSpicePageBuilder=ModuleSpicePageBuilder;