/*
SpiceUI 2018.10.001

Copyright (c) 2016-present, aac services.k.s - All rights reserved.
Redistribution and use in source and binary forms, without modification, are permitted provided that the following conditions are met:
- Redistributions of source code must retain this copyright and license notice, this list of conditions and the following disclaimer.
- Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.
- If used the SpiceCRM Logo needs to be displayed in the upper left corner of the screen in a minimum dimension of 31x31 pixels and be clearly visible, the icon needs to provide a link to http://www.spicecrm.io
THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.

*/

/** 
 * Â© 2015 - 2021 aac services k.s. All rights reserved.
 * release: 2021.02.001
 * date: 2021-07-15 09:34:54
 * build: 2021.02.001.1626334494999
 **/
"use strict";var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var t,s=1,i=arguments.length;s<i;s++)for(var a in t=arguments[s])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},__decorate=this&&this.__decorate||function(e,t,s,i){var a,l=arguments.length,o=l<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,s,i);else for(var n=e.length-1;0<=n;n--)(a=e[n])&&(o=(l<3?a(o):3<l?a(t,s,o):a(t,s))||o);return 3<l&&o&&Object.defineProperty(t,s,o),o},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__spreadArray=this&&this.__spreadArray||function(e,t){for(var s=0,i=t.length,a=e.length;s<i;s++,a++)e[a]=t[s];return e};Object.defineProperty(exports,"__esModule",{value:!0}),exports.AdministrationDictionaryManager=exports.AdministrationDictionaryManagerItemField=exports.AdministrationSchedulerScheduleButton=exports.AdministrationSchedulerRunButton=exports.AdministrationSchedulerJobLog=exports.AdministrationSchedulerJobsEnum=exports.AdministrationConfigEditor=exports.AdministrationDictRepairDbColumnsModal=exports.AdministrationDictRepairDbColumns=exports.AdministrationDictRepairCache=exports.AdministrationDictRepairACLRoles=exports.AdministrationDictRepairLanguage=exports.AdministrationDictRepairModal=exports.AdministrationDictRepairItem=exports.AdministrationDictRepair=exports.AdministrationSysTrashcanRecover=exports.AdministrationSysTrashcanManager=exports.AdministrationApiInspectorMethodTest=exports.AdministrationapiinspectorMethodResponses=exports.AdministrationApiInspectorMethods=exports.AdministrationApiInspectorMethodParameters=exports.AdministrationAPIInspectorDetails=exports.AdministrationAPIInspector=exports.AdministrationSystemVersions=exports.AdministrationSystemStats=exports.AdministrationHomeScreenCardItem=exports.AdministrationHomeScreenCard=exports.AdministrationHomeScreen=exports.AdministrationFtsManagerIndexModal=exports.AdministrationFTSStats=exports.AdministrationFTSManagerFieldsAdd=exports.AdministrationFTSManagerModuleAdd=exports.AdministrationFTSManagerDetails=exports.AdministrationFTSManagerFieldsList=exports.AdministrationFTSManagerFields=exports.AdministrationFTSManager=exports.AdministrationFTSStatus=exports.AdministrationQuotaManagerField=exports.AdministrationQuotaManager=exports.AdministrationConfiguratorItemRole=exports.AdministrationConfiguratorItem=exports.AdministrationConfigurator=exports.AdministrationMenuRouteItem=exports.AdministrationMenu=exports.AdministrationMain=exports.administrationapiinspectorService=exports.administration=exports.dictionary=exports.ftsconfiguration=exports.administrationconfigurator=void 0,exports.AdminComponentsModule=exports.UserAccessLogViewer=exports.AdministrationDefaultPreferences=exports.AdministrationLanguages=exports.AdministrationGeneralSettings=exports.AdministrationDictionaryManagerItem=void 0;var common_1=require("@angular/common"),forms_1=require("@angular/forms"),core_1=require("@angular/core"),drag_drop_1=require("@angular/cdk/drag-drop"),router_1=require("@angular/router"),directives_1=require("../directives/directives"),systemcomponents_1=require("../systemcomponents/systemcomponents"),rxjs_1=require("rxjs"),services_1=require("../services/services"),http_1=require("@angular/common/http"),administrationconfigurator=function(){function e(e,t){this.backend=e,this.modelutilities=t,this.dictionary="",this.entries=[],this.sorting={field:"",direction:""},this.fielddefobj={}}return e.prototype.loadEntries=function(n){var d=this;void 0===n&&(n=[]),this.backend.getRequest("configuration/configurator/entries/"+this.dictionary).subscribe(function(e){d.fielddefobj={};for(var t=0,s=n;t<s.length;t++){var i=s[t];d.fielddefobj[i.name]=i.type?i.type:""}for(var a=0,l=e;a<l.length;a++){var o=l[a];d.entries.push({id:o.id,mode:"",data:d.mapData(o)})}})},e.prototype.mapData=function(e){for(var t in this.fielddefobj)switch(this.fielddefobj[t]){case"bool":case"boolean":e[t]="1"==e[t]}return e},e.prototype.remapData=function(e){var t={};for(var s in this.fielddefobj)switch(this.fielddefobj[s]){case"bool":case"boolean":t[s]=1==e[s]?"1":"0";break;default:t[s]=e[s]}return t},e.prototype.addEntry=function(){var e=this.modelutilities.generateGuid();this.entries.unshift({id:e,mode:"new",data:{id:e}})},e.prototype.saveEntry=function(e){var s=this;this.entries.some(function(t){if(t.id===e)return delete t.backup,s.backend.postRequest("configuration/configurator/"+s.dictionary+"/"+e,{},{config:s.remapData(t.data)}).subscribe(function(e){t.mode=""}),!0})},e.prototype.deleteEntry=function(s){var i=this;this.entries.some(function(e,t){if(e.id===s)return delete e.backup,i.backend.deleteRequest("configuration/configurator/"+i.dictionary+"/"+s).subscribe(function(e){i.entries.splice(t,1)}),!0})},e.prototype.setEditMode=function(t){this.entries.some(function(e){if(e.id===t)return e.mode="edit",e.backup=JSON.parse(JSON.stringify(e.data)),!0})},e.prototype.cancelEditMode=function(s){var i=this;this.entries.some(function(e,t){if(e.id===s)return"new"===e.mode?i.entries.splice(t,1):(e.data=JSON.parse(JSON.stringify(e.backup)),delete e.backup,e.mode=""),!0})},e.prototype.isEditMode=function(t){var s=!1;return this.entries.some(function(e){if(e.id===t)return s="edit"===e.mode||"new"===e.mode,!0}),s},e.prototype.copy=function(s){var i=this;this.entries.some(function(e){if(e.id===s){var t={};return t.data=JSON.parse(JSON.stringify(e.data)),t.mode="new",t.id=i.modelutilities.generateGuid(),t.data.id=t.id,i.entries.unshift(t),!0}})},e.prototype.sort=function(e){var s=this;this.sorting.field===e?this.sorting.direction="asc"==this.sorting.direction?"dsc":"asc":(this.sorting.field=e,this.sorting.direction="asc"),this.entries.sort(function(e,t){return e.data[s.sorting.field]==t.data[s.sorting.field]?0:"asc"==s.sorting.direction?e.data[s.sorting.field]<t.data[s.sorting.field]?-1:1:e.data[s.sorting.field]<t.data[s.sorting.field]?1:-1})},e=__decorate([core_1.Injectable(),__metadata("design:paramtypes",[services_1.backend,services_1.modelutilities])],e)}();exports.administrationconfigurator=administrationconfigurator;var ftsconfiguration=function(){function e(e,t,s,i,a){var l=this;this.backend=e,this.metadata=t,this.language=s,this.modal=i,this.toast=a,this.module="",this.module$=new core_1.EventEmitter,this.moduleFtsFields=[],this.moduleFtsSettings={},this.indexing=!1,this.modules=[],this.analyzers=[],this.backend.getRequest("configuration/elastic/core/modules").subscribe(function(e){return l.modules=e}),this.backend.getRequest("configuration/elastic/core/analyzers").subscribe(function(e){return l.analyzers=e.sort(function(e,t){return e.value>t.value?1:-1})})}return e.prototype.setModule=function(e){this.module=e,0<=this.modules.indexOf(e)?(this.getModuleFtsFields(),this.getModuleSettings()):(this.module&&this.modules.push(e),this.moduleFtsFields=[],this.moduleFtsSettings=[]),this.module$.emit(e)},e.prototype.getModuleFtsFields=function(){var t=this;this.moduleFtsFields=[],this.backend.getRequest("configuration/elastic/"+this.module+"/fields").subscribe(function(e){t.moduleFtsFields=e})},e.prototype.getModuleSettings=function(){var t=this;this.moduleFtsSettings=[],this.backend.getRequest("configuration/elastic/"+this.module+"/settings").subscribe(function(e){t.moduleFtsSettings=e})},e.prototype.getFieldDetails=function(t){var s={};return this.moduleFtsFields.some(function(e){if(e.id===t)return s=e,!0}),s},e.prototype.deleteModule=function(t){var s=this;this.backend.deleteRequest("configuration/elastic/"+this.module).subscribe(function(e){s.modules.splice(s.modules.indexOf(t),1),s.module=""})},e.prototype.save=function(t){var s=this;void 0===t&&(t=!0);var i=new rxjs_1.Subject,e={fields:this.moduleFtsFields,settings:this.moduleFtsSettings};return this.backend.postRequest("configuration/elastic/"+this.module,{},e).subscribe(function(e){i.next(e),t&&(e?s.toast.sendToast(s.language.getLabel("LBL_DATA_SAVED"),"success"):s.toast.sendToast(s.language.getLabel("ERR_NETWORK"),"error"))},function(e){return i.error(e)}),i},e.prototype.searchPath=function(t){var s=!1;return this.moduleFtsFields.some(function(e){if(e.path===t)return s=!0}),s},e.prototype.executeAction=function(e,t){var i=this,a="",l="";switch(e){case"bulk":a="configuration/elastic/"+this.module+"/index",l="LBL_INDEX";break;case"init":a="configuration/elastic/core/initialize",l="LBL_INITIALIZE";break;case"reset":a="configuration/elastic/"+this.module+"/index/reset",l="LBL_RESET"}this.modal.openModal("SystemLoadingModal").subscribe(function(s){s.instance.messagelabel=i.language.getLabel("LBL_EXECUTING")+": "+i.language.getLabel(l),"reset"==e?i.save(!1).subscribe(function(e){i.backend.postRequest(a,t).subscribe(function(e){if(e&&e.message&&"string"==typeof e.message&&0<e.message.length){var t=e.type&&0<e.type.length?e.type:i.language.getLabel("LBL_INFO");i.modal.info(e.message,t,e.status)}else"error"!=e.status&&i.toast.sendToast(i.language.getLabel("MSG_SUCCESSFULLY_EXECUTED"),"success");s.instance.self.destroy()},function(e){return s.instance.self.destroy()})},function(e){return s.instance.self.destroy()}):i.backend.postRequest(a,t).subscribe(function(e){if(e&&e.message&&"string"==typeof e.message&&0<e.message.length){var t=e.type&&0<e.type.length?e.type:i.language.getLabel("LBL_INFO");i.modal.info(e.message,t,e.status)}else"error"!=e.status&&i.toast.sendToast(i.language.getLabel("MSG_SUCCESSFULLY_EXECUTED"),"success");s.instance.self.destroy()},function(e){return s.instance.self.destroy()})})},e=__decorate([core_1.Injectable(),__metadata("design:paramtypes",[services_1.backend,services_1.metadata,services_1.language,services_1.modal,services_1.toast])],e)}();exports.ftsconfiguration=ftsconfiguration;var dictionary=function(){function e(e,t,s,i){this.http=e,this.configurationService=t,this.session=s,this.metadata=i,this.data=[],this.dictionaryitem="",this.dictionaryfields=[]}var t;return e.prototype.load=function(e){var t=this,s=new rxjs_1.Subject;return this.dictionaryitem=e,this.http.get(this.configurationService.getBackendUrl()+"/dictionary/list/"+e+"?sessionid="+this.session.authData.sessionId).subscribe(function(e){t.data=e.items,t.dictionaryfields=e.fields,s.next(e),s.complete()}),s.asObservable()},e.prototype.getFields=function(){for(var e=[],t=0,s=this.dictionaryfields;t<s.length;t++){var i=s[t];"id"!==i&&e.push(i)}return e},e=__decorate([core_1.Injectable(),__metadata("design:paramtypes",["function"==typeof(t=void 0!==http_1.HttpClient&&http_1.HttpClient)?t:Object,services_1.configurationService,services_1.session,services_1.metadata])],e)}();exports.dictionary=dictionary;var administration=function(){function e(e,t,s){var i=this;this.backend=e,this.broadcast=t,this.language=s,this.loading=!1,this.adminNavigation=[],this.opened_itemid={},this.admincomponent={component:"AdministrationHomeScreen",componentconfig:{}},this.itemfilter="",this.admincomponent$=new rxjs_1.BehaviorSubject(this.admincomponent),this.loadNavigation(),this.broadcastsubscription=this.broadcast.message$.subscribe(function(e){i.handleMessage(e)})}return e.prototype.ngOnDestroy=function(){this.broadcastsubscription.unsubscribe()},e.prototype.handleMessage=function(e){switch(e.messagetype){case"loader.reloaded":this.loadNavigation()}},e.prototype.loadNavigation=function(){var t=this;this.loading=!0,this.backend.getRequest("system/spiceui/admin/navigation").subscribe(function(e){t.adminNavigation=e,t.loading=!1})},e.prototype.navigateHome=function(){this.opened_itemid=null,this.admincomponent={component:"AdministrationHomeScreen",componentconfig:{}},this.admincomponent$.next(this.admincomponent)},e.prototype.getItemLabel=function(t){var s;return this.adminNavigation.some(function(e){if(s=e.groupcomponents.find(function(e){return e.id==t}))return!0}),s.admin_label},e.prototype.navigateto=function(t){var s;this.adminNavigation.some(function(e){if(s=e.groupcomponents.find(function(e){return e.id==t}))return!0}),s.component&&(this.admincomponent=s,this.admincomponent$.next(this.admincomponent),this.opened_itemid=t)},Object.defineProperty(e.prototype,"navigationGroups",{get:function(){if(""==this.itemfilter)return this.adminNavigation;for(var e=[],t=0,s=this.adminNavigation;t<s.length;t++){var i=s[t];if(i.label&&0<=this.language.getLabel(i.label).toLowerCase().indexOf(this.itemfilter.toLowerCase())||i.label&&0<=this.language.getLabel(i.label,"","long").toLowerCase().indexOf(this.itemfilter.toLowerCase()))e.push(i);else{for(var a=[],l=0,o=i.groupcomponents;l<o.length;l++){var n=o[l];(0<=n.adminaction.toLowerCase().indexOf(this.itemfilter.toLowerCase())||n.admin_label&&0<=this.language.getLabel(n.admin_label).toLowerCase().indexOf(this.itemfilter.toLowerCase())||n.admin_label&&0<=this.language.getLabel(n.admin_label,"","long").toLowerCase().indexOf(this.itemfilter.toLowerCase()))&&a.push(n)}0<a.length&&e.push({id:i.id,name:i.name,label:i.label,groupcomponents:a})}}return e},enumerable:!1,configurable:!0}),e=__decorate([core_1.Injectable(),__metadata("design:paramtypes",[services_1.backend,services_1.broadcast,services_1.language])],e)}();exports.administration=administration;var administrationapiinspectorService=function(){function e(e,t,s,i){this.backend=e,this.toast=t,this.injector=s,this.modelutilities=i,this.loading=!1,this.apiEndpoints=[],this.finalArray={},this.flattendArray=[],this.apiTree=[],this.apiMethods=[],this._apiSubMethods=!0,this._apiFilterUnauthorized=!1,this._apiFilterAdminOnly=!1,this._apiFilterValidatedOnly=!1,this.loadEndpoints()}var t;return Object.defineProperty(e.prototype,"apiFilter",{get:function(){return this._apiFilter},set:function(e){this._apiFilter=e,this.buildTree()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"apiFilterUnauthorized",{get:function(){return this._apiFilterUnauthorized},set:function(e){this._apiFilterUnauthorized=e,this._apiFilterUnauthorized&&(this._apiFilterAdminOnly=!1),this.buildTree()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"apiFilterAdminOnly",{get:function(){return this._apiFilterAdminOnly},set:function(e){this._apiFilterAdminOnly=e,this._apiFilterAdminOnly&&(this._apiFilterUnauthorized=!1),this.buildTree()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"apiFilterValidatedOnly",{get:function(){return this._apiFilterValidatedOnly},set:function(e){this._apiFilterValidatedOnly=e,this.buildTree()},enumerable:!1,configurable:!0}),e.prototype.loadEndpoints=function(){var t=this;this.loading=!0,this.backend.getRequest("admin/routes").subscribe(function(e){t.apiEndpoints=e,t.apiEndpoints.sort(function(e,t){return e.route.replace("{","").localeCompare(t.route.replace("{",""))}),t.buildTree(),t.loading=!1},function(e){t.toast.sendToast("Error Loading Routes","error"),t.loading=!1})},e.prototype.buildTree=function(){var t=this;this.apiMethods=[],this.apiTree=[],this.loading=!0;for(var e=function(t){if(!t.route)return"continue";s.apiTree.find(function(e){return e.route==t.route})||s.addRouteToTree(t.route)},s=this,i=0,a=this.apiEndpoints.filter(function(e){return(!t._apiFilterUnauthorized||!0===e.options.noAuth)&&((!t._apiFilterAdminOnly||!0===e.options.adminOnly)&&((!t._apiFilterValidatedOnly||!0!==e.options.validate)&&(!t._apiFilter||0<=e.route.toLowerCase().indexOf(t._apiFilter.toLowerCase()))))});i<a.length;i++){e(a[i])}this.loading=!1},e.prototype.addRouteToTree=function(e){var t=this.getPartentId(e),s=this.getRouteId(e);return this.apiTree.push({id:s,name:"/"!=e?e.split("/").pop():e,route:e,parent_id:t,parent_sequence:this.apiTree.filter(function(e){return e.parent_id==t}).length,clickable:!0}),s},e.prototype.getPartentId=function(e){var t=e.substring(1).split("/");if(t.pop(),0!=t.length){var s="/"+t.join("/"),i=this.apiTree.find(function(e){return e.route==s});return i?i.id:this.addRouteToTree(s)}},e.prototype.getRouteId=function(t){return this.apiTree.find(function(e){return e.route==t})?this.apiTree.find(function(e){return e.route==t}).id:this.modelutilities.generateGuid()},e.prototype.selectAPI=function(t){this.selectedAPI=this.apiTree.find(function(e){return e.id==t}),this.filterMethods()},Object.defineProperty(e.prototype,"apiSubMethods",{get:function(){return this._apiSubMethods},set:function(e){this._apiSubMethods=e,this.filterMethods()},enumerable:!1,configurable:!0}),e.prototype.filterMethods=function(){var t=this;this.apiMethods=this.apiEndpoints.filter(function(e){return t._apiSubMethods?0==e.route.indexOf(t.selectedAPI.route):e.route==t.selectedAPI.route})},e.prototype.getMethodParameters=function(t,s,e){var i=[],a=this.apiEndpoints.find(function(e){return e.route==t&&e.method==s});if(!a.parameters)return[];for(var l in a.parameters){var o=__assign({},a.parameters[l]);o.in==e&&(o.name=l,i.push(o))}return i.sort(function(e,t){return e.name.localeCompare(t.name)})},e.prototype.getMethodResponses=function(t,s){var e=[],i=this.apiEndpoints.find(function(e){return e.route==t&&e.method==s});if(!i.responses)return[];for(var a in i.responses){var l=__assign({},i.responses[a]);l.name=a,e.push(l)}return e.sort(function(e,t){return e.name.localeCompare(t.name)})},e.prototype.getMethodRequests=function(t,s,e){var i=this.apiEndpoints.find(function(e){return e.route==t&&e.method==s});if(!i.requestBody)return[];for(var a in i.requestBody)__assign({},i.requestBody[a]);return[].sort(function(e,t){return e.name.localeCompare(t.name)})},e.prototype.getMethodStyle=function(e){var t="inherit";switch(e){case"get":t="#05628a";break;case"post":t="#f38303";break;case"put":t="#41b658";break;case"delete":t="#d83a00"}return{width:"100px",color:"#ffffff",background:t}},e=__decorate([core_1.Injectable(),__metadata("design:paramtypes",[services_1.backend,services_1.toast,"function"==typeof(t=void 0!==core_1.Injector&&core_1.Injector)?t:Object,services_1.modelutilities])],e)}();exports.administrationapiinspectorService=administrationapiinspectorService;var AdministrationMain=function(){function AdministrationMain(e,t,s,i,a){this.administration=e,this.metadata=t,this.language=s,this.navigation=i,this.navigationtab=a,this.admincontentObject=null,this.navigationtab.setTabInfo({displayname:this.language.getLabel("LBL_ADMINISTRATION"),displayicon:"settings"})}var e;return AdministrationMain.prototype.ngAfterViewInit=function(){var t=this;this.administration.admincomponent$.subscribe(function(e){t.openContent(e)})},AdministrationMain.prototype.openContent=function(t){var s=this;this.admincontentObject&&this.admincontentObject.destroy(),this.metadata.addComponent(t.component,this.admincontentcontainer).subscribe(function(e){e.instance.componentconfig=t.componentconfig,s.admincontentObject=e})},__decorate([core_1.ViewChild("admincontentcontainer",{read:core_1.ViewContainerRef,static:!0}),__metadata("design:type","function"==typeof(e=void 0!==core_1.ViewContainerRef&&core_1.ViewContainerRef)?e:Object)],AdministrationMain.prototype,"admincontentcontainer",void 0),AdministrationMain=__decorate([core_1.Component({template:'<div system-to-bottom-noscroll class="slds-grid" [system-overlay-loading-spinner]="administration.loading"><div class="slds-large-size--1-of-8 slds-medium-size--1-of-6" style="min-width: 220px;"><administration-menu></administration-menu></div><div class="slds-grow" system-to-bottom><div #admincontentcontainer></div></div></div>',providers:[administration]}),__metadata("design:paramtypes",[administration,services_1.metadata,services_1.language,services_1.navigation,services_1.navigationtab])],AdministrationMain)}();exports.AdministrationMain=AdministrationMain;var AdministrationMenu=function(){function e(e,t,s){this.language=e,this.navigationtab=t,this.administration=s}return e.prototype.trackbyfn=function(e,t){return t.id},e.prototype.openContent=function(e){if(this.administration.opened_itemid==e)return!0;var t=this.administration.getItemLabel(e);this.navigationtab.setTabInfo({displayname:this.language.getLabel(t||"LBL_ADMINISTRATION"),displayicon:"settings"}),this.administration.navigateto(e)},e=__decorate([core_1.Component({selector:"administration-menu",template:'<div class="slds-grid slds-grid--vertical slds-navigation-list--vertical slds-navigation-list--vertical-inverse slds-border--right"><div class="slds-p-horizontal--xx-small slds-p-vertical--small slds-border--bottom slds-grid slds-grid--vertical-align-center"><div class="slds-p-horizontal--x-small"><button class="slds-button slds-button_icon" (click)="administration.navigateHome()" tabindex="-1"><system-button-icon icon="home"></system-button-icon></button></div><div class="slds-grow slds-form-element__control slds-input-has-icon slds-input-has-icon_right slds-input-has-icon_group-right slds-m-vertical--xx-small"><input type="text" class="slds-input" [placeholder]="language.getLabel(\'LBL_SEARCH\')" [(ngModel)]="administration.itemfilter"><system-utility-icon *ngIf="administration.itemfilter == \'\'" [icon]="\'search\'" [addclasses]="\'slds-input__icon slds-input__icon--left\'"></system-utility-icon><div *ngIf="administration.itemfilter != \'\'" class="slds-input__icon-group slds-input__icon-group_right" style="margin-top: initial;"><button class="slds-input__icon slds-input__icon_right slds-button slds-button_icon" (click)="administration.itemfilter = \'\'" tabindex="-1"><system-button-icon [icon]="\'clear\'"></system-button-icon></button></div></div></div><div system-to-bottom><div class="slds-p-bottom--medium"><ng-container *ngFor="let adminNavigationBlock of administration.navigationGroups; trackBy: trackbyfn"><h2 class="slds-text-title--caps slds-p-around--medium"><system-label [label]="adminNavigationBlock.label"></system-label></h2><ul><li *ngFor="let item of adminNavigationBlock.groupcomponents; trackBy: trackbyfn" [title]="language.getLabel(item.admin_label, \'\', \'long\')"><a href="javascript:void(0);" class="slds-navigation-list--vertical__action slds-p-vertical--xxx-small slds-text-link--reset" (click)="openContent(item.id)" [ngClass]="{\'slds-theme_inverse\': item.id == administration.opened_itemid}"><div class="slds-grid slds-grid--vertical-align-center slds-truncate"><system-icon [icon]="item.icon?item.icon:\'empty\'" size="x-small"></system-icon><system-label [label]="item.admin_label"></system-label></div></a></li></ul></ng-container></div></div></div>'}),__metadata("design:paramtypes",[services_1.language,services_1.navigationtab,administration])],e)}();exports.AdministrationMenu=AdministrationMenu;var AdministrationMenuRouteItem=function(){function AdministrationMenuRouteItem(e){this.router=e,this.componentconfig={},this.self={}}var e;return AdministrationMenuRouteItem.prototype.ngOnInit=function(){this.componentconfig.route&&this.router.navigate([this.componentconfig.route])},AdministrationMenuRouteItem=__decorate([core_1.Component({template:""}),__metadata("design:paramtypes",["function"==typeof(e=void 0!==router_1.Router&&router_1.Router)?e:Object])],AdministrationMenuRouteItem)}();exports.AdministrationMenuRouteItem=AdministrationMenuRouteItem;var AdministrationConfigurator=function(){function AdministrationConfigurator(e,t,s){this.metadata=e,this.administrationconfigurator=t,this.language=s,this.componentconfig={},this.displayFilters=!1,this.filters={}}return AdministrationConfigurator.prototype.ngOnInit=function(){this.administrationconfigurator.dictionary=this.componentconfig.dictionary,this.administrationconfigurator.loadEntries(this.componentconfig.fields)},Object.defineProperty(AdministrationConfigurator.prototype,"count",{get:function(){return this.administrationconfigurator.entries.length},enumerable:!1,configurable:!0}),AdministrationConfigurator.prototype.trackByFn=function(e,t){return t.id},AdministrationConfigurator.prototype.getEntries=function(){for(var e=[],t=0,s=this.administrationconfigurator.entries;t<s.length;t++){var i=s[t],a=!1;if(this.displayFilters)for(var l in this.filters)!this.administrationconfigurator.isEditMode(i.id)&&this.filters[l]&&i.data[l]&&-1==i.data[l].toUpperCase().indexOf(this.filters[l].toUpperCase())&&(a=!0);a||e.push(i)}return e},AdministrationConfigurator.prototype.getFields=function(){for(var e=[],t=0,s=this.componentconfig.fields;t<s.length;t++){var i=s[t];!0!==i.hidden&&e.push(i)}return e},AdministrationConfigurator.prototype.addEntry=function(){this.administrationconfigurator.addEntry()},AdministrationConfigurator.prototype.sort=function(e){this.administrationconfigurator.sort(e)},AdministrationConfigurator.prototype.toggleFilter=function(){this.displayFilters=!this.displayFilters},AdministrationConfigurator.prototype.clearFilter=function(){this.filters={}},AdministrationConfigurator=__decorate([core_1.Component({selector:"administration-configurator",template:'<div class="slds-grid slds-grid--align-spread slds-p-around--medium"><h2 class="slds-text-heading--medium"><system-label label="LBL_DICTIONARY_ITEM"></system-label>: {{componentconfig.dictionary}} ({{count}} <system-label label="LBL_RECORDS"></system-label>)</h2><button class="slds-button slds-button--neutral" (click)="addEntry()"><system-label label="LBL_ADD"></system-label></button></div><table class="slds-table slds-table--bordered slds-table--cell-buffer"><thead><tr class="slds-text-title--caps"><th *ngFor="let field of getFields()" scope="col" (click)="sort(field.name)"><div class="slds-truncate slds-p-horizontal--small">{{field.name}}<ng-container *ngIf="administrationconfigurator.sorting.field == field.name"><system-utility-icon *ngIf="administrationconfigurator.sorting.direction == \'asc\'" [icon]="\'arrowup\'" [size]="\'x-small\'"></system-utility-icon><system-utility-icon *ngIf="administrationconfigurator.sorting.direction == \'dsc\'" [icon]="\'arrowdown\'" [size]="\'x-small\'"></system-utility-icon></ng-container></div></th><th scope="col" style="width:2rem;"><div class="slds-button-group slds-float--right" role="group"><button class="slds-button slds-button--icon-border" (click)="toggleFilter()"><system-button-icon [icon]="\'filterList\'" [size]="\'small\'"></system-button-icon></button></div></th></tr><tr *ngIf="displayFilters" class="slds-theme--shade"><td *ngFor="let field of getFields()"><div class="slds-form-element"><div class="slds-form-element__control"><input type="text" class="slds-input" [(ngModel)]="filters[field.name]"></div></div></td><td><div class="slds-button-group slds-float--right" role="group"><button class="slds-button slds-button--icon-border" (click)="clearFilter()"><system-button-icon [icon]="\'clear\'" [size]="\'small\'"></system-button-icon></button> <button class="slds-button slds-button--icon-border" (click)="toggleFilter()"><system-button-icon [icon]="\'chevronup\'" [size]="\'small\'"></system-button-icon></button></div></td></tr></thead><tbody><tr style="vertical-align: middle" class="slds-align-top" administration-configurator-item *ngFor="let entry of getEntries(); trackBy: trackByFn" [entry]="entry" [fields]="getFields()"></tr></tbody></table>',providers:[administrationconfigurator]}),__metadata("design:paramtypes",[services_1.metadata,administrationconfigurator,services_1.language])],AdministrationConfigurator)}();exports.AdministrationConfigurator=AdministrationConfigurator;var AdministrationConfiguratorItem=function(){function e(e){this.administrationconfigurator=e,this.fields=[],this.entry={}}return e.prototype.ngOnInit=function(){},e.prototype.setEditMode=function(){this.administrationconfigurator.setEditMode(this.entry.id)},e.prototype.isEditMode=function(e){return void 0===e&&(e=null),e?!e.readonly&&this.administrationconfigurator.isEditMode(this.entry.id):this.administrationconfigurator.isEditMode(this.entry.id)},e.prototype.setViewMode=function(){this.administrationconfigurator.cancelEditMode(this.entry.id)},e.prototype.save=function(){this.administrationconfigurator.saveEntry(this.entry.id)},e.prototype.delete=function(){this.administrationconfigurator.deleteEntry(this.entry.id)},e.prototype.copy=function(e){this.administrationconfigurator.copy(e)},e.prototype.getJSON=function(t){try{var e=JSON.parse(t);return JSON.stringify(e,null,2)}catch(e){return t}},__decorate([core_1.Input(),__metadata("design:type",Array)],e.prototype,"fields",void 0),__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"entry",void 0),e=__decorate([core_1.Component({selector:"[administration-configurator-item]",template:'<td *ngFor="let field of fields"><div *ngIf="!isEditMode(field);else editfield" class="slds-truncate slds-p-horizontal--small" style="max-width: 200px;" [ngSwitch]="field.type"><span *ngSwitchCase="\'json\'"><pre class="slds-m-vertical--none">{{getJSON(entry.data[field.name])}}</pre></span> <span *ngSwitchCase="\'text\'" class="slds-truncate_container_25" style="max-width: 200px;">{{entry.data[field.name]}}</span><system-checkbox *ngSwitchCase="\'bool\'" [disabled]="true" [(ngModel)]="entry.data[field.name]"></system-checkbox><system-checkbox *ngSwitchCase="\'boolean\'" [disabled]="true" [(ngModel)]="entry.data[field.name]"></system-checkbox><administration-configurator-item-role *ngSwitchCase="\'role\'" [editmode]="false" [fieldvalue]="entry.data[field.name]"></administration-configurator-item-role><span *ngSwitchDefault>{{entry.data[field.name]}}</span></div><ng-template #editfield><div class="slds-form-element"><div class="slds-form-element__control" [ngSwitch]="field.type"><textarea *ngSwitchCase="\'json\'" class="slds-textarea slds-scrollable--y slds-m-vertical--xx-small" [(ngModel)]="entry.data[field.name]"></textarea> <textarea *ngSwitchCase="\'text\'" class="slds-textarea slds-scrollable--y slds-m-vertical--xx-small" [(ngModel)]="entry.data[field.name]"></textarea><system-input-label *ngSwitchCase="\'label\'" [(ngModel)]="entry.data[field.name]"></system-input-label><system-checkbox *ngSwitchCase="\'bool\'" class="slds-m-horizontal--small" style="display: block" [(ngModel)]="entry.data[field.name]"></system-checkbox><system-checkbox *ngSwitchCase="\'boolean\'" class="slds-m-horizontal--small" style="display: block" [(ngModel)]="entry.data[field.name]"></system-checkbox><administration-configurator-item-role *ngSwitchCase="\'role\'" [editmode]="true" [(fieldvalue)]="entry.data[field.name]"></administration-configurator-item-role><input *ngSwitchDefault type="text" class="slds-input" [(ngModel)]="entry.data[field.name]"></div></div></ng-template></td><td><div *ngIf="!isEditMode()" class="slds-button-group slds-float--right" role="group"><button class="slds-button slds-button--icon-border" (click)="setEditMode()"><system-button-icon [icon]="\'edit\'" [size]="\'small\'"></system-button-icon></button> <button class="slds-button slds-button--icon-border" (click)="copy(entry.id)"><system-button-icon [icon]="\'copy\'" [size]="\'small\'"></system-button-icon></button> <button class="slds-button slds-button--icon-border" (click)="delete()"><system-button-icon [icon]="\'delete\'" [size]="\'small\'"></system-button-icon></button></div><div *ngIf="isEditMode()" class="slds-button-group slds-float--right" role="group"><button class="slds-button slds-button--icon-border" (click)="setViewMode()"><system-button-icon [icon]="\'close\'" [size]="\'small\'"></system-button-icon></button> <button class="slds-button slds-button--icon-border" (click)="save()"><system-button-icon [icon]="\'check\'" [size]="\'small\'"></system-button-icon></button></div></td>'}),__metadata("design:paramtypes",[administrationconfigurator])],e)}();exports.AdministrationConfiguratorItem=AdministrationConfiguratorItem;var AdministrationConfiguratorItemRole=function(){function e(e){this.metadata=e,this.editmode=!1,this.fieldvalue={},this.fieldvalueChange=new core_1.EventEmitter,this.roles=[]}var t;return e.prototype.loadRoles=function(){var e=this.metadata.getRoles();e.sort(function(e,t){return e.name>t.name?1:-1});for(var t=0,s=e;t<s.length;t++){var i=s[t];this.roles.push(i)}},e.prototype.ngOnInit=function(){!this.editmode&&"*"==this.fieldvalue||this.loadRoles()},Object.defineProperty(e.prototype,"roleValue",{get:function(){return this.fieldvalue},set:function(e){this.fieldvalue=e,this.fieldvalueChange.emit(e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rolename",{get:function(){for(var e=0,t=this.roles;e<t.length;e++){var s=t[e];if(s.id==this.fieldvalue)return s.name}return this.fieldvalue},enumerable:!1,configurable:!0}),__decorate([core_1.Input(),__metadata("design:type",Boolean)],e.prototype,"editmode",void 0),__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"fieldvalue",void 0),__decorate([core_1.Output(),__metadata("design:type","function"==typeof(t=void 0!==core_1.EventEmitter&&core_1.EventEmitter)?t:Object)],e.prototype,"fieldvalueChange",void 0),e=__decorate([core_1.Component({selector:"administration-configurator-item-role",template:'<div *ngIf="!editmode"><div class="slds-truncate">{{rolename}}</div></div><div *ngIf="editmode" class="slds-form-element"><div class="slds-form-element__control"><div class="slds-select_container slds-m-vertical--xx-small"><select class="slds-select" [(ngModel)]="roleValue"><option value="*">*</option><option *ngFor="let role of roles" [value]="role.id">{{role.name}}</option></select></div></div></div>'}),__metadata("design:paramtypes",[services_1.metadata])],e)}();exports.AdministrationConfiguratorItemRole=AdministrationConfiguratorItemRole;var AdministrationQuotaManager=function(){function AdministrationQuotaManager(e){this.backend=e,this.users=[],this.monthlyQuotas={},this.quotas=[],this.yearlyQuotas={},this.year=(new Date).getFullYear(),this.monthNamesList=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],this.yearsList=[]}return AdministrationQuotaManager.prototype.ngOnInit=function(){this.getYears(),this.getQuotaUsers()},AdministrationQuotaManager.prototype.getYears=function(){for(var e=(new Date).getFullYear(),t=e-2;t<e+7;t++)this.yearsList.push(t)},AdministrationQuotaManager.prototype.getQuotaUsers=function(){var a=this;this.backend.getRequest("module/QuotaManager/users").subscribe(function(e){for(var t=0,s=e;t<s.length;t++){var i=s[t];a.users.push({id:i.id,mode:"",data:i}),0}a.getQuotas().subscribe()})},AdministrationQuotaManager.prototype.getQuotas=function(){var r=this,c=new rxjs_1.Subject;return this.backend.getRequest("module/QuotaManager/quotas/"+this.year).subscribe(function(e){r.quotas=e,r.monthlyQuotas={},r.yearlyQuotas={};for(var t=0,s=e;t<s.length;t++){var i=s[t],a=i.assigned_user_id,l=Math.round(i.sales_quota),o=i.period-1;r.monthlyQuotas[a]||(r.monthlyQuotas[a]=new Array(12)),r.monthlyQuotas[a][o]=l,r.yearlyQuotas[a]||(r.yearlyQuotas[a]=0),r.yearlyQuotas[a]+=l}c.next(r.users),c.complete();for(var n=0,d=r.users;n<d.length;n++){a=d[n].data.id;r.monthlyQuotas[a]||(r.monthlyQuotas[a]=new Array(12)),r.yearlyQuotas[a]||(r.yearlyQuotas[a]=0)}}),c.asObservable()},AdministrationQuotaManager.prototype.updateQuota=function(e,t,s){var i=e.target.value?+e.target.value:0,a=this.monthlyQuotas[t][s];a=a||0,this.yearlyQuotas[t]-=a-i,0<i?(this.monthlyQuotas[t][s]=i,this.backend.postRequest("module/QuotaManager/quota/"+t+"/"+this.year+"/"+(s+1)+"/"+i)):(delete this.monthlyQuotas[t][s],this.backend.deleteRequest("module/QuotaManager/quota/"+t+"/"+this.year+"/"+(s+1)))},AdministrationQuotaManager=__decorate([core_1.Component({selector:"administration-quotamanager",template:'<div class="slds-page-header"><div class="slds-grid slds-grid_vertical-align-center slds-grid--align-spread"><div class="slds-media"><div class="slds-media__body"><h1 class="slds-page-header__title slds-truncate slds-align-middle">Quota Manager</h1></div></div><div class="slds-p-top--small"><label for="year-select">Year</label><select id="year-select" [(ngModel)]="year" (change)="getQuotas()"><option *ngFor="let aYear of yearsList">{{aYear}}</option></select></div></div></div><div class="slds-scrollable--x"><table class="slds-table slds-table_bordered slds-table_cell-buffer"><thead><tr class="slds-text-title_caps"><th scope="col">Name</th><th scope="col">Total</th><th scope="col" *ngFor="let monthName of monthNamesList">{{monthName}}</th></tr></thead><tbody><tr *ngFor="let quotaUser of users" class="slds-text-title_caps"><td>{{quotaUser.data.last_name}} {{quotaUser.data.first_name}} ({{quotaUser.data.user_name}})</td><td>{{yearlyQuotas[quotaUser.data.id]}}</td><td *ngFor="let quota of monthlyQuotas[quotaUser.data.id]; let monthIndex = index"><administration-quotamanager-field [userid]="quotaUser.data.id" [data]="quotas" [monthindex]="monthIndex" [year]="year"></administration-quotamanager-field></td></tr></tbody></table></div>'}),__metadata("design:paramtypes",[services_1.backend])],AdministrationQuotaManager)}();exports.AdministrationQuotaManager=AdministrationQuotaManager;var AdministrationQuotaManagerField=function(){function e(e){this.backend=e,this.userid="",this.monthindex=0,this.year=0,this.data=[]}return Object.defineProperty(e.prototype,"value",{get:function(){for(var e=0,t=this.data;e<t.length;e++){var s=t[e];if(s&&s.assigned_user_id===this.userid&&s.period===""+(this.monthindex+1))return""+Math.round(s.sales_quota)}return""},set:function(e){for(var t=0,s=+e,i=0,a=this.data;i<a.length;i++){var l=a[i];l&&l.assigned_user_id===this.userid&&l.period===""+(this.monthindex+1)&&(0<s?this.data[t].sales_quota=e:delete this.data[t]),t++}0<s?this.backend.postRequest("module/QuotaManager/quota/"+this.userid+"/"+this.year+"/"+(this.monthindex+1)+"/"+e).subscribe(function(e){}):this.backend.deleteRequest("module/QuotaManager/quota/"+this.userid+"/"+this.year+"/"+(this.monthindex+1))},enumerable:!1,configurable:!0}),e.prototype.changeValue=function(e){},__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"userid",void 0),__decorate([core_1.Input(),__metadata("design:type",Number)],e.prototype,"monthindex",void 0),__decorate([core_1.Input(),__metadata("design:type",Number)],e.prototype,"year",void 0),__decorate([core_1.Input(),__metadata("design:type",Array)],e.prototype,"data",void 0),e=__decorate([core_1.Component({selector:"administration-quotamanager-field",template:'<input style="width:80px;" [(ngModel)]="value" (ngModelChange)="changeValue($event)">'}),__metadata("design:paramtypes",[services_1.backend])],e)}();exports.AdministrationQuotaManagerField=AdministrationQuotaManagerField;var AdministrationFTSStatus=function(){function AdministrationFTSStatus(e,t,s,i,a,l,o){this.metadata=e,this.language=t,this.modal=s,this.backend=i,this.helper=a,this.toast=l,this.injector=o,this.version={},this.stats={docs:0,size:0},this.loading=!1,this.indices=[],this.loadstatus()}var e;return AdministrationFTSStatus.prototype.loadstatus=function(){var i=this;this.loading=!0,this.indices=[],this.backend.getRequest("admin/elastic/status").subscribe(function(e){var t;for(var s in i.version=e.version,i.stats.docs=0,e.stats._all.total.docs&&e.stats._all.total.docs.count&&(i.stats.docs=e.stats._all.total.docs.count),i.stats.size=0,e.stats._all.total.store&&e.stats._all.total.store.size_in_bytes&&(i.stats.size=i.helper.humanFileSize(e.stats._all.total.store.size_in_bytes)),e.stats.indices)i.indices.push({name:s,docs:e.stats.indices[s].total.docs.count,size:i.helper.humanFileSize(e.stats.indices[s].total.store.size_in_bytes),blocked:!!(e.settings&&e.settings[s]&&(null===(t=e.settings[s].settings.index.blocks)||void 0===t?void 0:t.read_only_allow_delete))});i.indices.sort(function(e,t){return e.name>t.name?1:-1}),i.loading=!1},function(e){i.loading=!1,i.toast.sendToast("Error loading Status","error")})},AdministrationFTSStatus.prototype.unlock=function(){var t=this;this.backend.putRequest("admin/elastic/unblock").subscribe(function(e){console.log(e),t.loadstatus()})},Object.defineProperty(AdministrationFTSStatus.prototype,"hasLocks",{get:function(){return!!this.indices.find(function(e){return e.blocked})},enumerable:!1,configurable:!0}),AdministrationFTSStatus=__decorate([core_1.Component({selector:"[administration-ftsstatus]",template:'<div class="slds-grid slds-grid_vertical-align-center slds-grid--align-spread slds-p-around--small"><h2 class="slds-text-heading_medium"><system-label label="LBL_FTS_STATUS"></system-label></h2><button class="slds-button slds-col--bump-left slds-button_icon slds-button_icon-border-filled" [disabled]="loading || ! hasLocks" (click)="unlock()"><system-button-icon icon="unlock"></system-button-icon></button> <button class="slds-button slds-button_icon slds-button_icon-border-filled" [disabled]="loading" (click)="loadstatus()"><system-button-icon icon="refresh"></system-button-icon></button></div><div [system-overlay-loading-spinner]="loading" system-to-bottom-noscroll><div *ngIf="!loading"><table class="slds-table slds-table_bordered slds-table_cell-buffer slds-m-bottom--medium"><thead><tr class="slds-text-title_caps"><th scope="col"><system-label label="LBL_ATTRIBUTE"></system-label></th><th scope="col"><system-label label="LBL_VALUE"></system-label></th></tr></thead><tbody><tr><td><system-label label="LBL_VERSION"></system-label></td><td><div class="slds-truncate">{{version.version.number}}</div></td></tr><tr><td><system-label label="LBL_DOCS"></system-label></td><td><div class="slds-truncate">{{stats.docs}}</div></td></tr><tr><td><system-label label="LBL_SIZE"></system-label></td><td><div class="slds-truncate">{{stats.size}}</div></td></tr></tbody></table><h2 class="slds-p-around--small">Index Details</h2><div class="slds-border--top" system-to-bottom><table class="slds-table slds-table_bordered slds-table_cell-buffer slds-table--header-fixed"><thead><tr class="slds-text-title_caps"><th scope="col"><div class="slds-truncate"><system-label label="LBL_INDEX"></system-label></div></th><th scope="col"><div class="slds-truncate"><system-label label="LBL_DOCS"></system-label></div></th><th scope="col"><div class="slds-truncate"><system-label label="LBL_SIZE"></system-label></div></th><th scope="col"><div class="slds-truncate"><system-label label="LBL_BLOCKED"></system-label></div></th></tr></thead><tbody><tr *ngFor="let index of indices"><td><div class="slds-truncate">{{index.name}}</div></td><td><div class="slds-truncate">{{index.docs}}</div></td><td><div class="slds-truncate">{{index.size}}</div></td><td><system-utility-icon *ngIf="index.blocked" icon="lock" size="x-small" colorclass="slds-icon-text-error"></system-utility-icon><system-utility-icon *ngIf="!index.blocked" icon="unlock" size="x-small" colorclass="slds-icon-text-success"></system-utility-icon></td></tr></tbody></table></div></div></div>'}),__metadata("design:paramtypes",[services_1.metadata,services_1.language,services_1.modal,services_1.backend,services_1.helper,services_1.toast,"function"==typeof(e=void 0!==core_1.Injector&&core_1.Injector)?e:Object])],AdministrationFTSStatus)}();exports.AdministrationFTSStatus=AdministrationFTSStatus;var AdministrationFTSManager=function(){function AdministrationFTSManager(e,t,s,i,a){this.metadata=e,this.language=t,this.modal=s,this.ftsconfiguration=i,this.injector=a,this.activeTab="fields"}var e;return Object.defineProperty(AdministrationFTSManager.prototype,"modules",{get:function(){return this.ftsconfiguration.modules.sort()},enumerable:!1,configurable:!0}),Object.defineProperty(AdministrationFTSManager.prototype,"module",{get:function(){return this.ftsconfiguration.module},set:function(e){this.ftsconfiguration.setModule(e)},enumerable:!1,configurable:!0}),AdministrationFTSManager.prototype.add=function(){var t=this;this.modal.openModal("AdministrationFTSManagerModuleAdd",!0,this.injector).subscribe(function(e){e.instance.module$.subscribe(function(e){e&&(t.module=e)})})},AdministrationFTSManager.prototype.delete=function(){var t=this;this.modal.confirmDeleteRecord().subscribe(function(e){e&&(t.ftsconfiguration.deleteModule(t.module),t.module="")})},AdministrationFTSManager.prototype.setActiveTab=function(e){this.activeTab=e},AdministrationFTSManager.prototype.save=function(){this.ftsconfiguration.save()},AdministrationFTSManager.prototype.indexModule=function(){var t=this;this.modal.openModal("AdministrationFtsManagerIndexModal").subscribe(function(e){e.instance.response.subscribe(function(e){e&&t.ftsconfiguration.executeAction("bulk",e)})})},AdministrationFTSManager.prototype.resetModule=function(){this.ftsconfiguration.executeAction("reset")},AdministrationFTSManager.prototype.initialize=function(){var t=this;this.modal.confirm("Are you sure you want to initialize your FTS? It recreates new indices, so indexed data will be lost and have to be rebuild!","Initialize").subscribe(function(e){e&&t.ftsconfiguration.executeAction("init")})},AdministrationFTSManager=__decorate([core_1.Component({selector:"[administration-ftsmanager]",template:'<div class="slds-grid slds-form--inline slds-p-around--small slds-border--bottom"><div class="slds-form-element"><label class="slds-form-element__label"><system-label label="LBL_MODULE"></system-label></label><div class="slds-form-element__control"><div class="slds-select_container"><select class="slds-select" [(ngModel)]="module" [disabled]="modules.length == 0"><option></option><option *ngFor="let module of modules" [value]="module">{{module}}</option></select></div></div></div><div class="slds-button-group" role="group"><button type="button" class="slds-button slds-button--neutral" (click)="add()"><system-label label="LBL_ADD"></system-label></button> <button type="button" [disabled]="!module" class="slds-button slds-button--neutral" (click)="delete()"><system-label label="LBL_DELETE"></system-label></button></div><div class="slds-form-element slds-col--bump-left"><button type="button" class="slds-button slds-button--neutral" (click)="initialize()"><system-label label="LBL_INITIALIZE"></system-label></button><div class="slds-button-group" role="group" *ngIf="!ftsconfiguration.indexing"><button type="button" class="slds-button slds-button--neutral" [disabled]="!module" (click)="save()"><system-label label="LBL_SAVE"></system-label></button> <button type="button" class="slds-button slds-button--neutral" [disabled]="!module" (click)="resetModule()"><system-label label="LBL_RESET"></system-label></button> <button type="button" class="slds-button slds-button--neutral" [disabled]="!module" (click)="indexModule()"><system-label label="LBL_INDEX"></system-label></button></div></div></div><div class="slds-tabs--default slds-p-top--xx-small"><div *ngIf="module; else selectmodule"><ul class="slds-tabs--default__nav" role="tablist"><li class="slds-tabs--default__item slds-text-title--caps" [ngClass]="{\'slds-active\': activeTab === \'fields\'}" role="presentation" (click)="setActiveTab(\'fields\')"><a class="slds-tabs--default__link" href="javascript:void(0);" role="tab" aria-selected="false"><system-label label="LBL_FIELDS"></system-label></a></li><li class="slds-tabs--default__item slds-text-title--caps" [ngClass]="{\'slds-active\': activeTab === \'details\'}" role="presentation" (click)="setActiveTab(\'details\')"><a class="slds-tabs--default__link" href="javascript:void(0);" role="tab" aria-selected="false"><system-label label="LBL_INDEX_PARAMETERS"></system-label></a></li></ul><administration-ftsmanager-fields *ngIf="activeTab===\'fields\'"></administration-ftsmanager-fields><administration-ftsmanager-details *ngIf="activeTab===\'details\'"></administration-ftsmanager-details></div><ng-template #selectmodule><div class="slds-p-around--small slds-align--absolute-center" system-to-bottom><system-label label="LBL_SELECT_A_MODULE"></system-label></div></ng-template></div>',providers:[ftsconfiguration]}),__metadata("design:paramtypes",[services_1.metadata,services_1.language,services_1.modal,ftsconfiguration,"function"==typeof(e=void 0!==core_1.Injector&&core_1.Injector)?e:Object])],AdministrationFTSManager)}();exports.AdministrationFTSManager=AdministrationFTSManager;var AdministrationFTSManagerFields=function(){function e(e,t,s,i,a){var l=this;this.metadata=e,this.language=t,this.modal=s,this.injector=i,this.ftsconfiguration=a,this.currentfield="",this.fieldDetails={},this.displayAddFieldModal=!1,this.ftsconfiguration.module$.subscribe(function(e){l.currentfield=""})}var t;return Object.defineProperty(e.prototype,"moduleFtsFields",{get:function(){return this.ftsconfiguration.moduleFtsFields},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"aggregateaddparams",{get:function(){return this.fieldDetails.aggregateaddparams?atob(this.fieldDetails.aggregateaddparams):""},set:function(e){this.fieldDetails.aggregateaddparams=e?btoa(e):""},enumerable:!1,configurable:!0}),e.prototype.selectField=function(e){this.currentfield=e,this.fieldDetails=this.ftsconfiguration.getFieldDetails(e)},e.prototype.showAddFields=function(){this.modal.openModal("AdministrationFTSManagerFieldsAdd",!0,this.injector)},e.prototype.closeAddFields=function(e){this.displayAddFieldModal=!1},e=__decorate([core_1.Component({selector:"administration-ftsmanager-fields",template:'<div class="slds-grid"><div class="slds-size--1-of-2 slds-grid slds-grid--vertical" system-to-bottom><div class="slds-grow slds-scrollable--y" style="height: 100%"><administration-ftsmanager-fields-list style="display: block; height: 100%" (selectListField)="selectField($event)" [selectedField]="currentfield"></administration-ftsmanager-fields-list></div><div class="slds-p-around--small slds-text-align--center"><button class="slds-button slds-button--neutral" (click)="showAddFields()"><system-label label="LBL_ADD_FIELD"></system-label></button></div></div><div class="slds-size--1-of-2 slds-border--left slds-p-left--x-small" system-to-bottom><div *ngIf="currentfield; else selectfield"><h2 class="slds-text-heading--small slds-p-vertical--x-small"><system-label label="LBL_FIELD_DETAILS"></system-label>: {{fieldDetails.displaypath}}->{{fieldDetails.fieldname}}</h2><fieldset class="slds-form-element slds-form-element_compound slds-p-vertical--x-small"><legend class="slds-form-element__legend slds-form-element__label"><system-label label="LBL_INDEX_PARAMETERS"></system-label></legend><div class="slds-form-element__control"><div class="slds-form-element"><label class="slds-form-element__label"><system-label label="LBL_INDEX_FIELD_NAME"></system-label></label><div class="slds-form-element__control"><input type="text" class="slds-input" [(ngModel)]="fieldDetails.indexfieldname"></div></div><div class="slds-form-element"><label class="slds-form-element__label"><system-label label="LBL_NAME"></system-label></label><system-input-label [(ngModel)]="fieldDetails.name"></system-input-label></div><div class="slds-form-element"><label class="slds-form-element__label"><system-label label="LBL_TYPE"></system-label></label><system-icon-help-text [helpText]="language.getLabel(\'HLP_FTS_DATATYPE\')"></system-icon-help-text><div class="slds-form-element__control"><div class="slds-select_container"><select class="slds-select" [(ngModel)]="fieldDetails.indextype"><option [ngValue]="null"></option><option value="text">text</option><option value="keyword">keyword</option><option value="date">date</option><option value="double">double</option></select></div></div></div></div><div class="slds-grid slds-grid_vertical-align-center slds-m-top--x-small"><div class="slds-form-element slds-size--1-of-2"><label class="slds-form-element__label"><system-label label="LBL_BOOST"></system-label></label><system-icon-help-text [helpText]="language.getLabel(\'HLP_FTS_BOOST\')"></system-icon-help-text><div class="slds-form-element__control"><input type="text" class="slds-input" [(ngModel)]="fieldDetails.boost"></div></div><div class="slds-form-element"><div class="slds-form-element__control"><system-checkbox [(ngModel)]="fieldDetails.enablesort"><system-label label="LBL_SORTABLE"></system-label><system-icon-help-text [helpText]="language.getLabel(\'HLP_FTS_ENABLE_SORT\')"></system-icon-help-text></system-checkbox></div></div><div class="slds-form-element"><div class="slds-form-element__control"><system-checkbox [(ngModel)]="fieldDetails.search"><system-label label="LBL_SEARCH"></system-label><system-icon-help-text [helpText]="language.getLabel(\'HLP_FTS_ENABLE_SEARCH\')"></system-icon-help-text></system-checkbox></div></div></div><div class="slds-grid slds-grid_vertical-align-center slds-m-top--x-small"><div class="slds-form-element slds-size--1-of-1"><label class="slds-form-element__label"><system-label label="LBL_FUNCTION"></system-label></label><system-icon-help-text [helpText]="language.getLabel(\'HLP_FTS_FIELD_FUNCTION\')"></system-icon-help-text><div class="slds-form-element__control"><system-input-backend-method [(ngModel)]="fieldDetails.function"></system-input-backend-method></div></div></div></fieldset><fieldset class="slds-form-element slds-form-element_compound slds-p-vertical--x-small slds-p-right--x-small"><legend class="slds-form-element__legend slds-form-element__label"><system-label label="LBL_AGGREGATE"></system-label></legend><div class="slds-form-element__control"><div class="slds-form-element"><label class="slds-form-element__label"><system-label label="LBL_AGGREGATE"></system-label></label><system-icon-help-text [helpText]="language.getLabel(\'HLP_FTS_AGGREGATE\')"></system-icon-help-text><div class="slds-form-element__control"><div class="slds-select_container"><select class="slds-select" [(ngModel)]="fieldDetails.aggregate"><option [ngValue]="null"></option><option value="term">Term</option><option value="range">Range</option><option value="datew">Date Week</option><option value="datem">Date Month</option><option value="dateq">Date Quarter</option><option value="datey">Date Year</option></select></div></div></div><div class="slds-form-element slds-p-vertical--x-small slds-grid"><div class="slds-form-element__control slds-size--1-of-2"><system-checkbox [disabled]="!fieldDetails.aggregate" [(ngModel)]="fieldDetails.aggregatecollapsed"><system-label label="LBL_COLLAPSED"></system-label></system-checkbox></div><div class="slds-form-element__control slds-size--1-of-2"><system-checkbox [disabled]="fieldDetails.aggregate != \'term\'" [(ngModel)]="fieldDetails.aggregateempty"><system-label label="LBL_AGGREGATEEMPTYVALUES"></system-label></system-checkbox></div></div><div class="slds-form-element" *ngIf="fieldDetails.aggregate"><label class="slds-form-element__label"><system-label label="LBL_PARAMETERS"></system-label></label><system-icon-help-text [helpText]="language.getLabel(\'HLP_FTS_AGGREGATE_PARAMS\')"></system-icon-help-text><div class="slds-form-element__control"><textarea class="slds-textarea" [(ngModel)]="aggregateaddparams"></textarea></div></div><div class="slds-grid"><div class="slds-form-element slds-size--1-of-2"><label class="slds-form-element__label"><system-label label="LBL_AGGREGATE_SIZE"></system-label></label><system-icon-help-text [helpText]="language.getLabel(\'HLP_FTS_AGGREGATE_SIZE\')"></system-icon-help-text><div class="slds-form-element__control"><input type="text" class="slds-input" [(ngModel)]="fieldDetails.aggregatesize"></div></div><div class="slds-form-element slds-size--1-of-2"><label class="slds-form-element__label"><system-label label="LBL_AGGREGATE_PRIORITY"></system-label></label><div class="slds-form-element__control"><input type="text" class="slds-input" [(ngModel)]="fieldDetails.aggregatepriority"></div></div></div><div class="slds-grid"><div class="slds-form-element slds-size--1-of-2"><label class="slds-form-element__label"><system-label label="LBL_AGGREGATE_SORTBY"></system-label></label><system-icon-help-text [helpText]="language.getLabel(\'HLP_FTS_AGGREGATE_SORTBY\')"></system-icon-help-text><div class="slds-form-element__control"><div class="slds-select_container"><select class="slds-select" [(ngModel)]="fieldDetails.aggregatesortby"><option [ngValue]="null"></option><option value="_count">Count (default)</option><option value="_key">Key</option></select></div></div></div><div class="slds-form-element slds-size--1-of-2"><label class="slds-form-element__label"><system-label label="LBL_AGGREGATE_SORT"></system-label></label><system-icon-help-text [helpText]="language.getLabel(\'HLP_FTS_AGGREGATE_SORT\')"></system-icon-help-text><div class="slds-form-element__control"><select class="slds-select" [(ngModel)]="fieldDetails.aggregatesort"><option [ngValue]="null"></option><option value="asc">asc</option><option value="desc">desc (default)</option></select></div></div></div></div></fieldset><fieldset class="slds-form-element slds-form-element_compound slds-p-vertical--x-small"><legend class="slds-form-element__legend slds-form-element__label"><system-label label="LBL_ANALYZER"></system-label></legend><div class="slds-form-element__control"><div class="slds-grid"><div class="slds-form-element slds-size--1-of-2"><label class="slds-form-element__label"><system-label label="LBL_ANALYZER"></system-label></label><system-icon-help-text [helpText]="language.getLabel(\'HLP_FTS_ANALYZER\') + \'\\n\' + language.getLabel(\'HLP_FTS_ANALYZER_STANDARD\') + \'\\n\' + language.getLabel(\'HLP_FTS_ANALYZER_NGRAM\') + \'\\n\' + language.getLabel(\'HLP_FTS_ANALYZER_HTML\') + \'\\n\' + language.getLabel(\'HLP_FTS_ANALYZER_EDGENGRAM\') + \'\\n\' + language.getLabel(\'HLP_FTS_ANALYZER_EMAIL\')"></system-icon-help-text><div class="slds-form-element__control"><div class="slds-select_container"><select class="slds-select" [(ngModel)]="fieldDetails.analyzer"><option>standard</option><option *ngFor="let analyzer of ftsconfiguration.analyzers" [value]="analyzer.value">{{analyzer.text}}</option></select></div></div></div><div class="slds-form-element slds-size--1-of-2"><label class="slds-form-element__label"><system-label label="LBL_SEARCH_ANALYZER"></system-label></label><system-icon-help-text [helpText]="language.getLabel(\'HLP_FTS_SEARCHANALYZER\') + \'\\n\' + language.getLabel(\'HLP_FTS_ANALYZER_STANDARD\') + \'\\n\' + language.getLabel(\'HLP_FTS_ANALYZER_NGRAM\') + \'\\n\' + language.getLabel(\'HLP_FTS_ANALYZER_HTML\') + \'\\n\' + language.getLabel(\'HLP_FTS_ANALYZER_EDGENGRAM\') + \'\\n\' + language.getLabel(\'HLP_FTS_ANALYZER_EMAIL\')"></system-icon-help-text><div class="slds-form-element__control"><div class="slds-select_container"><select class="slds-select" [(ngModel)]="fieldDetails.search_analyzer"><option>standard</option><option *ngFor="let analyzer of ftsconfiguration.analyzers" [value]="analyzer.value">{{analyzer.text}}</option></select></div></div></div></div></div></fieldset><fieldset class="slds-form-element slds-form-element_compound slds-p-vertical--x-small"><legend class="slds-form-element__legend slds-form-element__label"><system-label label="LBL_DUPLICATECHECK_SETTINGS"></system-label></legend><div class="slds-form-element__control"><div class="slds-form-element"><div class="slds-form-element__control"><system-checkbox [(ngModel)]="fieldDetails.duplicatecheck"><system-label label="LBL_DUPLICATE_CHECK"></system-label><system-icon-help-text [helpText]="language.getLabel(\'HLP_FTS_DUPLICATE_CHECK\')"></system-icon-help-text></system-checkbox></div></div><div class="slds-grid slds-grid_vertical-align-center"><div class="slds-col slds-size--1-of-2 slds-form-element"><label class="slds-form-element__label"><system-label label="LBL_QUERY"></system-label></label><system-icon-help-text [helpText]="language.getLabel(\'HLP_FTS_DUPLICATE_QUERY\')"></system-icon-help-text><div class="slds-form-element__control"><div class="slds-select_container"><select [disabled]="!fieldDetails.duplicatecheck" class="slds-select" [(ngModel)]="fieldDetails.duplicatequery"><option>match (or)</option><option value="match_and">match (and)</option><option value="term">term</option></select></div></div></div><div class="slds-col slds-size--1-of-2 slds-form-element"><label class="slds-form-element__label"><system-label label="LBL_FUZZINESS"></system-label></label><system-icon-help-text [helpText]="language.getLabel(\'HLP_FTS_DUPLICATE_FUZZINESS\')"></system-icon-help-text><div class="slds-form-element__control"><input type="text" [disabled]="!fieldDetails.duplicatecheck" class="slds-input" [(ngModel)]="fieldDetails.duplicatefuzz"></div></div></div></div></fieldset><fieldset class="slds-form-element slds-form-element_compound slds-p-vertical--x-small"><legend class="slds-form-element__legend slds-form-element__label"><system-label label="LBL_EMAIL_PHONE_SETTINGS"></system-label></legend><div class="slds-form-element__control slds-size--1-of-2"><system-checkbox [(ngModel)]="fieldDetails.email"><system-label label="LBL_EMAIL_SEARCH"></system-label><system-icon-help-text [helpText]="language.getLabel(\'HLP_FTS_ENABLE_EMAIL\')"></system-icon-help-text></system-checkbox></div><div class="slds-form-element__control slds-size--1-of-2"><system-checkbox [(ngModel)]="fieldDetails.phonesearch"><system-label label="LBL_PHONE_SEARCH"></system-label><system-icon-help-text [helpText]="language.getLabel(\'HLP_FTS_ENABLE_PHONE\')"></system-icon-help-text></system-checkbox></div></fieldset><fieldset class="slds-form-element slds-form-element_compound slds-p-vertical--x-small"><legend class="slds-form-element__legend slds-form-element__label"><system-label label="LBL_FTS_ACTIVITY_PARAMS"></system-label></legend><div class="slds-form-element__control"><div class="slds-form-element"><label class="slds-form-element__label"><system-label label="LBL_TYPE"></system-label></label><div class="slds-form-element__control"><div class="slds-select_container"><select class="slds-select" [(ngModel)]="fieldDetails.activitytype"><option>---</option><option value="activityparentid">activityparentid</option><option value="activitydate">activitydate</option><option value="activityenddate">activityenddate</option><option value="activityparticipant">activityparticipant</option><option value="activitystatus">activitystatus</option></select></div></div></div></div></fieldset></div><ng-template #selectfield><div class="slds-p-around--small slds-align--absolute-center slds-height_full">select a field</div></ng-template></div></div>'}),__metadata("design:paramtypes",[services_1.metadata,services_1.language,services_1.modal,"function"==typeof(t=void 0!==core_1.Injector&&core_1.Injector)?t:Object,ftsconfiguration])],e)}();exports.AdministrationFTSManagerFields=AdministrationFTSManagerFields;var AdministrationFTSManagerFieldsList=function(){function e(e,t,s,i,a,l){this.metadata=e,this.language=t,this.ftsconfiguration=s,this.backend=i,this.modal=a,this.modelutilities=l,this.links=[],this.self={},this.fields=[],this.nodePath="",this.selectedField="",this.selectListField=new core_1.EventEmitter}var t,s;return e.prototype.ngAfterViewInit=function(){var e=this;window.setTimeout(function(){return e.ftsconfiguration.fieldsDropList=e.dropList},100)},e.prototype.rightDrop=function(e){if(this.removePlaceHolderElement(e.previousContainer.element.nativeElement),e.previousContainer===e.container)drag_drop_1.moveItemInArray(e.container.data,e.previousIndex,e.currentIndex);else{var t=e.item.data,s=this.modelutilities.generateGuid(),i={id:s,fieldid:s,fieldname:t.name,indexfieldname:t.name,name:t.label,path:this.nodePath+"::"+t.id};this.ftsconfiguration.moduleFtsFields.splice(e.currentIndex,0,i)}},e.prototype.removePlaceHolderElement=function(e){this.dragPlaceHolderNode&&(e.removeChild(this.dragPlaceHolderNode),this.dragPlaceHolderNode=void 0)},e.prototype.trackByFn=function(e,t){return t.id},e.prototype.deleteField=function(t){var s=this;this.modal.confirmDeleteRecord().subscribe(function(e){e&&s.ftsconfiguration.moduleFtsFields.splice(t,1)})},e.prototype.handleSelection=function(e){this.selectListField.emit(e)},e.prototype.isSelected=function(e){return this.selectedField==e},__decorate([core_1.Input(),__metadata("design:type","function"==typeof(t=void 0!==drag_drop_1.CdkDropList&&drag_drop_1.CdkDropList)?t:Object)],e.prototype,"dragList",void 0),__decorate([core_1.Input(),__metadata("design:type",Node)],e.prototype,"dragPlaceHolderNode",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"nodePath",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"selectedField",void 0),__decorate([core_1.Output(),__metadata("design:type","function"==typeof(s=void 0!==core_1.EventEmitter&&core_1.EventEmitter)?s:Object)],e.prototype,"selectListField",void 0),__decorate([core_1.ViewChild("dropList",{static:!1}),__metadata("design:type",Object)],e.prototype,"dropList",void 0),e=__decorate([core_1.Component({selector:"administration-ftsmanager-fields-list",template:'<div cdkDropList #dropList="cdkDropList" [cdkDropListData]="ftsconfiguration.moduleFtsFields" [cdkDropListConnectedTo]="[dragList]" (cdkDropListDropped)="rightDrop($event)" class="slds-size--1-of-1 slds-border--left" style="height: 100%"><table class="slds-table slds-table--cell-buffer spice-table_header-fixed slds-table--fixed-layout"><thead><tr class="slds-text-title--caps slds-theme--shade"><th class="slds-cell-shrink"></th><th><div class="slds-truncate"><system-label label="LBL_PATH"></system-label></div></th><th scope="col"><div class="slds-truncate"><system-label label="LBL_FIELD"></system-label></div></th><th scope="col"><div class="slds-truncate"><system-label label="LBL_NAME"></system-label></div></th><th class="slds-cell-shrink"></th></tr></thead><tbody><tr cdkDrag [cdkDragData]="field" *ngFor="let field of ftsconfiguration.moduleFtsFields; let i = index; trackBy: trackByFn" (click)="handleSelection(field.id)" [class.slds-theme--shade]="isSelected(field.id)" cdkDragBoundary="#administration-fts-manager-field-add-drop-table" class="slds-border--bottom slds-drag--preview"><td class="slds-p-around--none"><system-utility-icon class="slds-p-horizontal--x-small" cdkDragHandle style="cursor: move" icon="drag_and_drop" size="x-small"></system-utility-icon></td><td><div class="slds-truncate">{{field.path}}</div></td><td data-label="Account Name"><div class="slds-truncate">{{field.fieldname}}</div></td><td data-label="Account Name"><div class="slds-truncate"><system-label [label]="field.name"></system-label></div></td><td class="slds-cell-shrink"><button class="slds-button slds-button--icon" (click)="deleteField(i)"><system-button-icon icon="close"></system-button-icon></button></td></tr></tbody></table></div>'}),__metadata("design:paramtypes",[services_1.metadata,services_1.language,ftsconfiguration,services_1.backend,services_1.modal,services_1.modelutilities])],e)}();exports.AdministrationFTSManagerFieldsList=AdministrationFTSManagerFieldsList;var AdministrationFTSManagerDetails=function(){function e(e,t,s){this.metadata=e,this.language=t,this.ftsconfiguration=s}return e=__decorate([core_1.Component({selector:"administration-ftsmanager-details",template:'<div class="slds-p-top--x-small slds-p-horizontal--x-small" system-to-bottom><fieldset class="slds-form-element slds-form-element_compound slds-p-vertical--x-small"><legend class="slds-form-element__legend slds-form-element__label"><system-label label="LBL_INDEX_PARAMETERS"></system-label></legend><div class="slds-form-element__control"><div class="slds-form-element"><label class="slds-form-element__label"><system-label label="LBL_INDEX_PRIORITY"></system-label></label><div class="slds-form-element__control"><input type="text" class="slds-input" [(ngModel)]="ftsconfiguration.moduleFtsSettings.index_priority"></div></div><div class="slds-form-element"><label class="slds-form-element__label"><system-label label="LBL_FTS_MULTIMATCH_TYPE"></system-label></label><div class="slds-form-element__control"><div class="slds-select_container"><select class="slds-select" [(ngModel)]="ftsconfiguration.moduleFtsSettings.multimatch_type"><option>default</option><option value="best_fields">Best Fields</option><option value="most_fields">Most Fields</option><option value="phrase">Phrase</option><option value="phrase_prefix">Phrase Prefix</option><option value="cross_fields">Cross Fields</option></select></div></div></div><div class="slds-form-element slds-p-vertical--x-small"><system-checkbox [(ngModel)]="ftsconfiguration.moduleFtsSettings.waitfor"><system-label label="LBL_SYNCRONOUS"></system-label></system-checkbox></div></div></fieldset><fieldset class="slds-form-element slds-form-element_compound slds-p-vertical--x-small"><legend class="slds-form-element__legend slds-form-element__label"><system-label label="LBL_SEARCH_PARAMETERS"></system-label></legend><div class="slds-form-element__control"><div class="slds-grid"><div class="slds-form-element slds-size--1-of-2"><label class="slds-form-element__label"><system-label label="LBL_OPERATOR"></system-label></label><div class="slds-form-element__control"><div class="slds-select_container"><select class="slds-select" [(ngModel)]="ftsconfiguration.moduleFtsSettings.operator"><option value="and"><system-label label="LBL_AND"></system-label></option><option value="or"><system-label label="LBL_OR"></system-label></option></select></div></div></div><div class="slds-form-element slds-size--1-of-2"><label class="slds-form-element__label"><system-label label="LBL_SEARCH_ANALYZER"></system-label></label><system-icon-help-text [helpText]="language.getLabel(\'HLP_FTS_SEARCHANALYZER\') + \'\\n\' + language.getLabel(\'HLP_FTS_ANALYZER_STANDARD\') + \'\\n\' + language.getLabel(\'HLP_FTS_ANALYZER_NGRAM\') + \'\\n\' + language.getLabel(\'HLP_FTS_ANALYZER_HTML\') + \'\\n\' + language.getLabel(\'HLP_FTS_ANALYZER_EDGENGRAM\') + \'\\n\' + language.getLabel(\'HLP_FTS_ANALYZER_EMAIL\')"></system-icon-help-text><div class="slds-form-element__control"><div class="slds-select_container"><select class="slds-select" [(ngModel)]="ftsconfiguration.moduleFtsSettings.search_analyzer"><option>standard</option><option *ngFor="let analyzer of ftsconfiguration.analyzers" [value]="analyzer.value">{{analyzer.text}}</option></select></div></div></div></div><div class="slds-grid slds-p-vertical--x-small"><system-checkbox [(ngModel)]="ftsconfiguration.moduleFtsSettings.globalsearch"><system-label label="LBL_GLOBAL_SEARCH"></system-label></system-checkbox><system-checkbox [(ngModel)]="ftsconfiguration.moduleFtsSettings.emailsearch"><system-label label="LBL_EMAIL_SEARCH"></system-label></system-checkbox><system-checkbox [(ngModel)]="ftsconfiguration.moduleFtsSettings.phonesearch"><system-label label="LBL_PHONE_SEARCH"></system-label></system-checkbox></div></div></fieldset><fieldset class="slds-form-element slds-form-element_compound slds-p-vertical--x-small"><legend class="slds-form-element__legend slds-form-element__label"><system-label label="LBL_GEO_SEARCH_PARAMETERS"></system-label></legend><div class="slds-form-element__control"><system-checkbox [(ngModel)]="ftsconfiguration.moduleFtsSettings.geosearch"><system-label label="LBL_GEO_SEARCH"></system-label></system-checkbox></div><div class="slds-form-element__control slds-grid"><div class="slds-form-element slds-size--1-of-2"><label class="slds-form-element__label"><system-label label="LBL_LATITUDE"></system-label></label><system-input-module-field [disabled]="!ftsconfiguration.moduleFtsSettings.geosearch" [(ngModel)]="ftsconfiguration.moduleFtsSettings.geolat" [module]="ftsconfiguration.module"></system-input-module-field></div><div class="slds-form-element slds-size--1-of-2"><label class="slds-form-element__label"><system-label label="LBL_LONGITUDE"></system-label></label><system-input-module-field [disabled]="!ftsconfiguration.moduleFtsSettings.geosearch" [(ngModel)]="ftsconfiguration.moduleFtsSettings.geolng" [module]="ftsconfiguration.module"></system-input-module-field></div></div></fieldset><fieldset class="slds-form-element slds-form-element_compound slds-p-vertical--x-small"><legend class="slds-form-element__legend slds-form-element__label"><system-label label="LBL_FTS_ACTIVITY_PARAMS"></system-label></legend><div class="slds-form-element__control"><div class="slds-form-element slds-grid slds-grid--vertical-align-center slds-gutters_direct-small"><div class="slds-form-element__control slds-col slds-size--1-of-3"><system-checkbox [(ngModel)]="ftsconfiguration.moduleFtsSettings.activitiessearch"><system-label label="LBL_FTS_IN_ACTIVITIES"></system-label></system-checkbox></div><div class="slds-col slds-size--2-of-3 slds-grid slds-grid--vertical-align-center"><label class="slds-form-element__label"><system-label label="LBL_FILTER"></system-label></label><system-input-module-filter class="slds-grow" [(ngModel)]="ftsconfiguration.moduleFtsSettings.activitiesfilter"></system-input-module-filter></div></div><div class="slds-form-element slds-grid slds-grid--vertical-align-center slds-gutters_direct-small"><div class="slds-form-element__control slds-col slds-size--1-of-3"><system-checkbox [(ngModel)]="ftsconfiguration.moduleFtsSettings.historysearch"><system-label label="LBL_FTS_IN_HISTORY"></system-label></system-checkbox></div><div class="slds-col slds-size--2-of-3 slds-grid slds-grid--vertical-align-center"><label class="slds-form-element__label"><system-label label="LBL_FILTER"></system-label></label><system-input-module-filter class="slds-grow" [(ngModel)]="ftsconfiguration.moduleFtsSettings.historyfilter"></system-input-module-filter></div></div><div class="slds-form-element slds-grid slds-grid--vertical-align-center slds-gutters_direct-small"><div class="slds-form-element__control slds-col slds-size--1-of-3"><system-checkbox [(ngModel)]="ftsconfiguration.moduleFtsSettings.assistantsearch"><system-label label="LBL_FTS_IN_ASSISTANT"></system-label></system-checkbox></div><div class="slds-col slds-size--2-of-3 slds-grid slds-grid--vertical-align-center"><label class="slds-form-element__label"><system-label label="LBL_FILTER"></system-label></label><system-input-module-filter class="slds-grow" [(ngModel)]="ftsconfiguration.moduleFtsSettings.assistantfilter"></system-input-module-filter></div></div><div class="slds-form-element slds-grid slds-grid--vertical-align-center slds-gutters_direct-small"><div class="slds-form-element__control slds-col slds-size--1-of-3"><system-checkbox [(ngModel)]="ftsconfiguration.moduleFtsSettings.calendarsearch"><system-label label="LBL_FTS_IN_CALENDAR"></system-label></system-checkbox></div><div class="slds-col slds-size--2-of-3 slds-grid slds-grid--vertical-align-center"><label class="slds-form-element__label"><system-label label="LBL_FILTER"></system-label></label><system-input-module-filter class="slds-grow" [(ngModel)]="ftsconfiguration.moduleFtsSettings.calendarfilter"></system-input-module-filter></div></div></div></fieldset></div>'}),__metadata("design:paramtypes",[services_1.metadata,services_1.language,ftsconfiguration])],e)}();exports.AdministrationFTSManagerDetails=AdministrationFTSManagerDetails;var AdministrationFTSManagerModuleAdd=function(){function AdministrationFTSManagerModuleAdd(e,t,s){this.metadata=e,this.language=t,this.ftsconfiguration=s,this.modules=[],this.module="",this.module$=new core_1.EventEmitter}return AdministrationFTSManagerModuleAdd.prototype.ngOnInit=function(){for(var e=this.ftsconfiguration.modules,t=0,s=this.metadata.getModules();t<s.length;t++){var i=s[t];-1==e.indexOf(i)&&this.modules.push(i)}this.modules.sort()},AdministrationFTSManagerModuleAdd.prototype.add=function(){this.module$.emit(this.module),this.self.destroy()},AdministrationFTSManagerModuleAdd.prototype.close=function(){this.module$.emit(!1),this.self.destroy()},AdministrationFTSManagerModuleAdd=__decorate([core_1.Component({template:'<system-modal><system-modal-header (close)="close()"><system-label label="LBL_ADD_MODULE"></system-label></system-modal-header><system-modal-content><div class="slds-form-element"><label class="slds-form-element__label"><system-label label="LBL_MODULE"></system-label></label><div class="slds-form-element__control"><div class="slds-select_container"><select class="slds-select" [(ngModel)]="module"><option *ngFor="let newmodule of modules" [value]="newmodule">{{newmodule}} ({{language.getModuleName(newmodule)}})</option></select></div></div></div></system-modal-content><system-modal-footer><button class="slds-button slds-button--neutral" (click)="close()"><system-label label="LBL_CANCEL"></system-label></button> <button class="slds-button slds-button--brand" (click)="add()"><system-label label="LBL_ADD"></system-label></button></system-modal-footer></system-modal>'}),__metadata("design:paramtypes",[services_1.metadata,services_1.language,ftsconfiguration])],AdministrationFTSManagerModuleAdd)}();exports.AdministrationFTSManagerModuleAdd=AdministrationFTSManagerModuleAdd;var AdministrationFTSManagerFieldsAdd=function(){function AdministrationFTSManagerFieldsAdd(e,t,s,i){this.metadata=e,this.language=t,this.ftsconfiguration=s,this.backend=i,this.links=[],this.self={},this.fields=[],this.nodefields=[],this.path=[],this.nodePath=""}return Object.defineProperty(AdministrationFTSManagerFieldsAdd.prototype,"filteredNodeFields",{get:function(){var t=this;return this.filterKey?this.nodefields.filter(function(e){return e.name.toLowerCase().includes(t.filterKey.toLowerCase())||e.label&&e.label.toLowerCase().includes(t.filterKey.toLowerCase())}):this.nodefields},enumerable:!1,configurable:!0}),Object.defineProperty(AdministrationFTSManagerFieldsAdd.prototype,"fieldsDropList",{get:function(){return this.ftsconfiguration.fieldsDropList||""},enumerable:!1,configurable:!0}),AdministrationFTSManagerFieldsAdd.prototype.close=function(){this.self.destroy()},AdministrationFTSManagerFieldsAdd.prototype.itemSelected=function(e){var t=this;window.setTimeout(function(){return t.nodePath=e.path}),this.getModuleFields(e.module)},AdministrationFTSManagerFieldsAdd.prototype.getModuleFields=function(e){var t=this;this.nodefields=[],this.backend.getRequest("dictionary/browser/"+e+"/fields").subscribe(function(e){t.nodefields=e})},AdministrationFTSManagerFieldsAdd.prototype.dropExited=function(t){var e=document.createElement("tr"),s=document.createElement("td");s.colSpan=10,s.innerHTML="&nbsp;",s.style.background="#fff",e.appendChild(s),this.dragPlaceHolderNode=e;var i=t.container.data.findIndex(function(e){return e.id==t.item.data.id});-1<i&&t.container.element.nativeElement.insertBefore(e,t.container.element.nativeElement.children[i])},AdministrationFTSManagerFieldsAdd.prototype.dropEntered=function(e){this.removePlaceHolderElement(e.container.element.nativeElement)},AdministrationFTSManagerFieldsAdd.prototype.removePlaceHolderElement=function(e){this.dragPlaceHolderNode&&(e.removeChild(this.dragPlaceHolderNode),this.dragPlaceHolderNode=void 0)},AdministrationFTSManagerFieldsAdd.prototype.trackByFn=function(e,t){return t.id},AdministrationFTSManagerFieldsAdd=__decorate([core_1.Component({selector:"administration-ftsmanager-fields-add",template:'<system-modal size="large"><system-modal-header (close)="close()">Add Field</system-modal-header><system-modal-content margin="none" [grow]="true"><div class="slds-grid administration-fts-manager-field-add-modal" style="height: 100%"><div class="slds-size--1-of-3 slds-grid--vertical" style="height: 100%;"><div class="slds-scrollable--y slds-border--bottom" style="height: 50%;"><system-module-tree [module]="ftsconfiguration.module" (itemSelected)="itemSelected($event)"></system-module-tree></div><div class="slds-scrollable" style="height: 50%;"><div class="slds-combobox__form-element slds-input-has-icon slds-input-has-icon_left" role="none"><system-utility-icon icon="search" addclasses="slds-input__icon slds-input__icon--left"></system-utility-icon><input class="slds-input slds-combobox__input" type="search" [placeholder]="language.getLabel(\'LBL_SEARCH\')" [(ngModel)]="filterKey"></div><table class="slds-table slds-table_cell-buffer slds-table_bordered"><thead><tr class="slds-line-height_reset"><th class="slds-cell-shrink"></th><th scope="col"><div class="slds-truncate"><system-label label="LBL_FIELD"></system-label></div></th><th scope="col"><div class="slds-truncate"><system-label label="LBL_NAME"></system-label></div></th></tr></thead><tbody cdkDropList #dragList="cdkDropList" (cdkDropListExited)="dropExited($event)" (cdkDropListEntered)="dropEntered($event)" cdkDropListSortingDisabled [cdkDropListData]="nodefields" [cdkDropListConnectedTo]="[fieldsDropList]"><tr cdkDrag [cdkDragData]="nodefield" *ngFor="let nodefield of filteredNodeFields; trackBy: trackByFn" cdkDragBoundary=".administration-fts-manager-field-add-modal" class="slds-hint-parent slds-drag--preview"><td class="slds-p-around--none slds-cell-shrink"><system-utility-icon class="slds-p-horizontal--x-small" cdkDragHandle style="cursor: move" icon="drag_and_drop" size="x-small"></system-utility-icon></td><td data-label="Account Name"><div class="slds-truncate">{{nodefield.name}}</div></td><td><div class="slds-truncate"><system-label [label]="nodefield.label"></system-label></div></td></tr></tbody></table></div></div><div class="slds-size--2-of-3" style="height: 100%"><administration-ftsmanager-fields-list style="display: block; height: 100%" class="slds-scrollable--y" [dragPlaceHolderNode]="dragPlaceHolderNode" [nodePath]="nodePath" [dragList]="dragList"></administration-ftsmanager-fields-list></div></div></system-modal-content><system-modal-footer><button class="slds-button slds-button--brand" (click)="close()"><system-label label="LBL_OK"></system-label></button></system-modal-footer></system-modal>'}),__metadata("design:paramtypes",[services_1.metadata,services_1.language,ftsconfiguration,services_1.backend])],AdministrationFTSManagerFieldsAdd)}();exports.AdministrationFTSManagerFieldsAdd=AdministrationFTSManagerFieldsAdd;var AdministrationFTSStats=function(){function AdministrationFTSStats(e,t,s){var i=this;this.metadata=e,this.language=t,this.backend=s,this.stats={},this.indices=[],this.backend.getRequest("admin/elastic/stats").subscribe(function(e){for(var t in(i.stats=e).indices)i.indices.push({name:t,size:e.indices[t].total.store.size_in_bytes,documents:e.indices[t].total.docs.count});i.indices.sort(function(e,t){return e.name>t.name?1:-1})})}return AdministrationFTSStats=__decorate([core_1.Component({template:'<h2 class="slds-text-heading_medium slds-p-around--small">FTS Stats</h2><table class="slds-table slds-table_bordered slds-table_cell-buffer"><thead><tr class="slds-text-title_caps"><th scope="col"><div class="slds-truncate">Name</div></th><th scope="col"><div class="slds-truncate">Size</div></th><th scope="col"><div class="slds-truncate">Documents</div></th></tr></thead><tbody><tr *ngFor="let index of indices"><td><div class="slds-truncate">{{index.name}}</div></td><td><div class="slds-truncate">{{index.size}}</div></td><td><div class="slds-truncate">{{index.documents}}</div></td></tr></tbody></table>'}),__metadata("design:paramtypes",[services_1.metadata,services_1.language,services_1.backend])],AdministrationFTSStats)}();exports.AdministrationFTSStats=AdministrationFTSStats;var AdministrationFtsManagerIndexModal=function(){function AdministrationFtsManagerIndexModal(e){this.language=e,this.settings={},this.self={},this.responseSubject=new rxjs_1.Subject,this.response=this.responseSubject.asObservable(),this.settings.bulkAmount=-1}return AdministrationFtsManagerIndexModal.prototype.cancel=function(){this.responseSubject.next(!1),this.responseSubject.complete(),this.self.destroy()},AdministrationFtsManagerIndexModal.prototype.start=function(){this.responseSubject.next(this.settings),this.responseSubject.complete(),this.self.destroy()},AdministrationFtsManagerIndexModal=__decorate([core_1.Component({template:'<system-modal><system-modal-header (close)="cancel()"><system-label label="LBL_INDEX"></system-label></system-modal-header><system-modal-content><div class="slds-p-bottom--xx-small"><system-label label="LBL_RESET_INDEX_DATE" length="long"></system-label></div><div class="slds-m-bottom--medium"><system-checkbox [(ngModel)]="settings.resetIndexDates"><system-label label="LBL_RESET_INDEX_DATE"></system-label></system-checkbox></div><div class="slds-p-bottom--xx-small"><system-label label="LBL_BULK_INDEX"></system-label></div><div><system-input-radio style="display: block" name="ftsmanagerbulk" value="0" [ngModel]="settings.bulkAmount" (ngModelChange)="settings.bulkAmount = 0"><system-label label="LBL_NONE"></system-label></system-input-radio><system-input-radio style="display: block" name="ftsmanagerbulk" value="100" [ngModel]="settings.bulkAmount" (ngModelChange)="settings.bulkAmount = 100">100 <system-label label="LBL_RECORDS"></system-label></system-input-radio><system-input-radio style="display: block" name="ftsmanagerbulk" value="1000" [ngModel]="settings.bulkAmount" (ngModelChange)="settings.bulkAmount = 1000">1000 <system-label label="LBL_RECORDS"></system-label></system-input-radio><system-input-radio style="display: block" name="ftsmanagerbulk" value="-1" [ngModel]="settings.bulkAmount" (ngModelChange)="settings.bulkAmount = -1"><system-label label="LBL_SYSTEM_DEFAULT"></system-label></system-input-radio></div></system-modal-content><system-modal-footer><button type="button" class="slds-button slds-button--neutral" (click)="cancel()"><system-label label="LBL_CANCEL"></system-label></button> <button type="button" class="slds-button slds-button--brand" (click)="start()"><system-label label="LBL_START"></system-label></button></system-modal-footer></system-modal>'}),__metadata("design:paramtypes",[services_1.language])],AdministrationFtsManagerIndexModal)}();exports.AdministrationFtsManagerIndexModal=AdministrationFtsManagerIndexModal;var AdministrationHomeScreen=function(){function AdministrationHomeScreen(e,t,s,i){this.router=e,this.metadata=t,this.language=s,this.administration=i}var e;return AdministrationHomeScreen.prototype.trackbyfn=function(e,t){return t.id},AdministrationHomeScreen=__decorate([core_1.Component({template:'<administration-card *ngFor="let adminNavigationBlock of administration.navigationGroups; trackBy: trackbyfn" [adminNavigationBlock]="adminNavigationBlock"></administration-card>'}),__metadata("design:paramtypes",["function"==typeof(e=void 0!==router_1.Router&&router_1.Router)?e:Object,services_1.metadata,services_1.language,administration])],AdministrationHomeScreen)}();exports.AdministrationHomeScreen=AdministrationHomeScreen;var AdministrationHomeScreenCard=function(){function e(e,t,s,i){this.router=e,this.metadata=t,this.language=s,this.administration=i}var t;return e.prototype.trackbyfn=function(e,t){return t.id},__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"adminNavigationBlock",void 0),e=__decorate([core_1.Component({selector:"administration-card",template:'<div class="slds-p-around--medium"><article class="slds-card slds-p-around--small"><div class="slds-card__header slds-grid"><header class="slds-media slds-media_center slds-has-flexi-truncate"><div class="slds-media__body"><h2 class="slds-card__header-title slds-text-heading_medium slds-grid--vertical"><p class="slds-card__header-link slds-truncate"><system-label [label]="adminNavigationBlock.label"></system-label></p><p class="slds-text-body_small slds-p-top_small"><system-label [label]="adminNavigationBlock.label" length="long"></system-label></p></h2></div></header></div><div class="slds-card__body slds-card__body_inner"><ul class="slds-grid slds-wrap slds-grid_pull-padded"><li class="slds-p-horizontal_small slds-size_1-of-1 slds-medium-size_1-of-3" administration-card-item *ngFor="let item of adminNavigationBlock.groupcomponents; trackBy: trackbyfn" [adminNavigationItem]="item"></li></ul></div></article></div>'}),__metadata("design:paramtypes",["function"==typeof(t=void 0!==router_1.Router&&router_1.Router)?t:Object,services_1.metadata,services_1.language,administration])],e)}();exports.AdministrationHomeScreenCard=AdministrationHomeScreenCard;var AdministrationHomeScreenCardItem=function(){function e(e,t,s,i,a){this.router=e,this.metadata=t,this.language=s,this.administration=i,this.navigationtab=a,this.adminNavigationItem={},this.adminNavigationBlock=""}var t;return e.prototype.openContent=function(){var e=this.administration.getItemLabel(this.adminNavigationItem.id);this.navigationtab.setTabInfo({displayname:this.language.getLabel(e||"LBL_ADMINISTRATION"),displayicon:"settings"}),this.administration.navigateto(this.adminNavigationItem.id)},Object.defineProperty(e.prototype,"icon",{get:function(){return this.adminNavigationItem.icon?this.adminNavigationItem.icon:"empty"},enumerable:!1,configurable:!0}),__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"adminNavigationItem",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"adminNavigationBlock",void 0),e=__decorate([core_1.Component({selector:"[administration-card-item]",template:'<a class="slds-text-link_reset" href="javascript:void(0);" (click)="openContent()"><article class="slds-tile slds-media slds-card__tile slds-hint-parent"><div class="slds-media__figure"><system-icon [icon]="icon" size="large"></system-icon></div><div class="slds-media__body"><div class="slds-grid slds-grid_align-spread"><h3 class="slds-tile__title slds-text-heading_small"><p><system-label [label]="adminNavigationItem.admin_label"></system-label></p><p class="slds-text-body_small"><system-label [label]="adminNavigationItem.admin_label" length="long"></system-label></p></h3></div></div></article></a>'}),__metadata("design:paramtypes",["function"==typeof(t=void 0!==router_1.Router&&router_1.Router)?t:Object,services_1.metadata,services_1.language,administration,services_1.navigationtab])],e)}();exports.AdministrationHomeScreenCardItem=AdministrationHomeScreenCardItem;var AdministrationSystemStats=function(){function AdministrationSystemStats(e,t,s,i){this.metadata=e,this.language=t,this.backend=s,this.helper=i,this.loaded=!1,this.stats={},this.totaldbrecords=0,this.totaldbsize=0,this.loadStats()}return AdministrationSystemStats.prototype.loadStats=function(){var t=this;this.loaded=!1,this.backend.getRequest("configuration/systemstats").subscribe(function(e){t.stats=e,t.calculateTotalsDB(),t.loaded=!0})},AdministrationSystemStats.prototype.refresh=function(){this.loadStats()},Object.defineProperty(AdministrationSystemStats.prototype,"totalelasticrecords",{get:function(){try{return this.stats.elastic._all.total.docs.count}catch(e){return 0}},enumerable:!1,configurable:!0}),Object.defineProperty(AdministrationSystemStats.prototype,"totalelasticsize",{get:function(){try{return this.stats.elastic._all.total.store.size_in_bytes}catch(e){return 0}},enumerable:!1,configurable:!0}),Object.defineProperty(AdministrationSystemStats.prototype,"uploadcount",{get:function(){try{return this.stats.uploadfiles.count}catch(e){return 0}},enumerable:!1,configurable:!0}),Object.defineProperty(AdministrationSystemStats.prototype,"uploadsize",{get:function(){try{return this.stats.uploadfiles.size}catch(e){return 0}},enumerable:!1,configurable:!0}),Object.defineProperty(AdministrationSystemStats.prototype,"totalsize",{get:function(){return this.totaldbsize+this.totalelasticsize+this.uploadsize},enumerable:!1,configurable:!0}),AdministrationSystemStats.prototype.sortby=function(s,i){void 0===i&&(i=!0),this.stats.database.sort(function(e,t){return e[s]>t[s]?i?-1:1:i?1:-1})},AdministrationSystemStats.prototype.calculateTotalsDB=function(){this.totaldbrecords=0;for(var e=this.totaldbsize=0,t=this.stats.database;e<t.length;e++){var s=t[e];this.totaldbrecords+=parseInt(s.records,10),this.totaldbsize+=parseInt(s.size,10)}},AdministrationSystemStats.prototype.humanReadableSize=function(e){return this.helper.humanFileSize(e)},AdministrationSystemStats.prototype.ftsDocumentCount=function(e){try{return this.stats.elastic.indices[this.stats.elastic._prefix+e].total.docs.count}catch(e){return""}},AdministrationSystemStats.prototype.ftsIndexSize=function(e){try{return this.humanReadableSize(this.stats.elastic.indices[this.stats.elastic._prefix+e].total.store.size_in_bytes)}catch(e){return""}},AdministrationSystemStats=__decorate([core_1.Component({template:'<ng-container *ngIf="loaded; else loading"><div class="slds-grid slds-grid_vertical-align-center slds-grid--align-spread slds-p-around--small"><h2 class="slds-text-heading_medium">System and Storage Statistics Summary</h2><button class="slds-button slds-button_icon slds-button_icon-border-filled" (click)="refresh()"><system-button-icon icon="refresh"></system-button-icon></button></div><table class="slds-table slds-table_bordered slds-table_cell-buffer slds-m-bottom--medium"><thead><tr class="slds-text-title_caps"><th scope="col">Object</th><th scope="col">Records</th><th scope="col">Size</th></tr></thead><tbody><tr><td><div class="slds-truncate">Database</div></td><td><div class="slds-truncate">{{totaldbrecords}}</div></td><td><div class="slds-truncate">{{humanReadableSize(totaldbsize)}}</div></td></tr><tr><td><div class="slds-truncate">Elasticsearch</div></td><td><div class="slds-truncate">{{totalelasticrecords}}</div></td><td><div class="slds-truncate">{{humanReadableSize(totalelasticsize)}}</div></td></tr><tr><td><div class="slds-truncate">Uploadfiles</div></td><td><div class="slds-truncate">{{uploadcount}}</div></td><td><div class="slds-truncate">{{humanReadableSize(uploadsize)}}</div></td></tr></tbody><tfoot><tr class="slds-theme--shade slds-text-title_caps"><th><div class="slds-truncate">total</div></th><th><div class="slds-truncate"></div></th><th><div class="slds-truncate">{{humanReadableSize(totalsize)}}</div></th></tr></tfoot></table><h2 class="slds-p-around--small">System and Storage Statistics Details</h2><div class="slds-border--top" system-to-bottom><table class="slds-table slds-table_bordered slds-table_cell-buffer slds-table--header-fixed"><thead><tr class="slds-text-title_caps"><th scope="col"><div class="slds-truncate" (click)="sortby(\'name\', false)">Table</div></th><th scope="col"><div class="slds-truncate" (click)="sortby(\'records\')">Records</div></th><th scope="col"><div class="slds-truncate" (click)="sortby(\'size\')">Size</div></th><th scope="col"><div class="slds-truncate">indexed Records</div></th><th scope="col"><div class="slds-truncate">Index Size</div></th></tr></thead><tbody><tr *ngFor="let table of stats.database"><td><div class="slds-truncate">{{table.name}}</div></td><td><div class="slds-truncate">{{table.records}}</div></td><td><div class="slds-truncate">{{humanReadableSize(table.size)}}</div></td><td><div class="slds-truncate">{{ftsDocumentCount(table.name)}}</div></td><td><div class="slds-truncate">{{ftsIndexSize(table.name)}}</div></td></tr></tbody></table></div></ng-container><ng-template #loading><div class="slds-align--absolute-center slds-height_full slds-size--1-of-1"><system-spinner></system-spinner></div></ng-template>'}),__metadata("design:paramtypes",[services_1.metadata,services_1.language,services_1.backend,services_1.helper])],AdministrationSystemStats)}();exports.AdministrationSystemStats=AdministrationSystemStats;var AdministrationSystemVersions=function(){function AdministrationSystemVersions(e,t,s){this.http=e,this.language=t,this.backend=s,this.loaded=!1,this.versions={},this.vendorpackages=[],this.loadVersions()}var e;return AdministrationSystemVersions.prototype.loadVersions=function(){var s=this;this.loaded=!1,this.http.get("config/systemdetails/").subscribe(function(e){for(var t in s.versions=e,s.vendorpackages=[],s.versions.vendor)s.vendorpackages.push({vendorpackage:t,files:s.versions.vendor[t]});s.loaded=!0})},AdministrationSystemVersions=__decorate([core_1.Component({template:'<ng-container *ngIf="loaded; else loading"><div class="slds-grid slds-grid_vertical-align-center slds-grid--align-spread slds-p-around--small"><h2 class="slds-text-heading_medium">Libraries Versions</h2></div><div class="slds-border--top" system-to-bottom><div class="slds-p-around--small slds-text-heading_small"><h3><system-label label="LBL_MODULES"></system-label></h3></div><table class="slds-table slds-table_bordered slds-table_cell-buffer"><thead><tr class="slds-text-title_caps"><th scope="col" width="45%"><div class="slds-truncate"><system-label label="LBL_NAME"></system-label></div></th><th scope="col" width="20%"><div class="slds-truncate"><system-label label="LBL_DATE"></system-label></div></th><th scope="col" width="20%"><div class="slds-truncate"><system-label label="LBL_BUILD"></system-label></div></th><th scope="col" width="15%"><div class="slds-truncate"><system-label label="LBL_RELEASE"></system-label></div></th></tr></thead><tbody><tr *ngFor="let component of versions.app"><td><div class="slds-truncate">{{component.name}}</div></td><td><div class="slds-truncate">{{component.date}}</div></td><td><div class="slds-truncate">{{component.build}}</div></td><td><div class="slds-truncate">{{component.release}}</div></td></tr></tbody></table><div *ngFor="let vendorpackage of vendorpackages"><div class="slds-p-around--small slds-text-heading_small"><h3>{{vendorpackage.vendorpackage}}</h3></div><table class="slds-table slds-table_bordered slds-table_cell-buffer"><thead><tr class="slds-text-title_caps"><th scope="col" width="85%"><div class="slds-truncate"><system-label label="LBL_NAME"></system-label></div></th><th scope="col" width="15%"><div class="slds-truncate"><system-label label="LBL_VERSION"></system-label></div></th></tr></thead><tbody><tr *ngFor="let packagefile of vendorpackage.files"><td><div class="slds-truncate">{{packagefile.name}}</div></td><td><div class="slds-truncate">{{packagefile.version}}</div></td></tr></tbody></table></div></div></ng-container><ng-template #loading><div class="slds-align--absolute-center slds-height_full slds-size--1-of-1"><system-spinner></system-spinner></div></ng-template>'}),__metadata("design:paramtypes",["function"==typeof(e=void 0!==http_1.HttpClient&&http_1.HttpClient)?e:Object,services_1.language,services_1.backend])],AdministrationSystemVersions)}();exports.AdministrationSystemVersions=AdministrationSystemVersions;var AdministrationAPIInspector=function(){function AdministrationAPIInspector(e,t,s,i){this.toast=e,this.modal=t,this.injector=s,this.apiinspector=i,this.toggleClassSub=[]}var e;return AdministrationAPIInspector.prototype.toggleUnauthorized=function(e){e.preventDefault(),e.stopPropagation(),this.apiinspector.apiFilterUnauthorized=!this.apiinspector.apiFilterUnauthorized},AdministrationAPIInspector.prototype.toggleAdminOnly=function(e){e.preventDefault(),e.stopPropagation(),this.apiinspector.apiFilterAdminOnly=!this.apiinspector.apiFilterAdminOnly},AdministrationAPIInspector.prototype.toggleValidatedOnly=function(e){e.preventDefault(),e.stopPropagation(),this.apiinspector.apiFilterValidatedOnly=!this.apiinspector.apiFilterValidatedOnly},AdministrationAPIInspector.prototype.selectNode=function(e){this.apiinspector.selectAPI(e)},AdministrationAPIInspector=__decorate([core_1.Component({selector:"[administration-api-inspector]",template:'<div class="slds-grid slds-grid_vertical-align-center slds-p-around--small slds-border--bottom"><system-icon icon="apex_plugin"></system-icon><h2 class="slds-text-heading_medium"><system-label label="LBL_API_INSPECTOR"></system-label> ({{apiinspector.apiEndpoints.length}})</h2></div><div class="slds-theme--default slds-grid" [system-overlay-loading-spinner]="apiinspector.loading"><div class="slds-size--1-of-3 slds-border--right"><div class="slds-p-around--x-small slds-border--bottom"><div class="slds-grid slds-grid--vertical-align-center"><input class="slds-input" system-placeholder="LBL_FILTER" [(ngModel)]="apiinspector.apiFilter"><system-utility-icon class="slds-p-left--xx-small" (click)="toggleUnauthorized($event)" icon="unlock" size="x-small" [colorclass]="apiinspector.apiFilterUnauthorized ? \'slds-icon-text-warning\' : \'slds-icon-text-light\'"></system-utility-icon><system-utility-icon class="slds-p-left--xx-small" (click)="toggleAdminOnly($event)" icon="user_role" size="x-small" [colorclass]="apiinspector.apiFilterAdminOnly ? \'slds-icon-text-warning\' : \'slds-icon-text-light\'"></system-utility-icon><system-utility-icon class="slds-p-left--xx-small" (click)="toggleValidatedOnly($event)" icon="ribbon" size="x-small" [colorclass]="apiinspector.apiFilterValidatedOnly ? \'slds-icon-text-warning\' : \'slds-icon-text-light\'"></system-utility-icon></div></div><div system-to-bottom><system-tree *ngIf="!apiinspector.loading; else treeLoadingSpinner" [sourceList]="apiinspector.apiTree" (selectedItemChange)="selectNode($event)"></system-tree><ng-template #treeLoadingSpinner><div class="slds-height_full slds-align--absolute-center"><div class="slds-grid slds-grid--vertical"><system-spinner></system-spinner><system-label class="slds-p-vertical--small" label="LBL_LOADING_ENDPOINTS"></system-label></div></div></ng-template></div></div><div class="slds-size--2-of-3"><div style="min-height: 49px;" class="slds-p-around--x-small slds-border--bottom slds-grid slds-grid--align-spread slds-grid--vertical-align-center"><span class="slds-text-heading--medium">{{apiinspector.selectedAPI?.route}} ({{apiinspector.apiMethods.length}})</span><system-checkbox [(ngModel)]="apiinspector.apiSubMethods"><system-label label="LBL_INCLUDE_SUBROUTES"></system-label></system-checkbox></div><div system-to-bottom><administration-api-inspector-methods *ngIf="apiinspector.apiMethods.length > 0; else noMethodsAvailable"></administration-api-inspector-methods><ng-template #noMethodsAvailable><div class="slds-height_full slds-align--absolute-center"><system-illustration-no-data><system-label label="LBL_NO_METHODS_FOR_ENDPOINT"></system-label></system-illustration-no-data></div></ng-template></div></div></div>',providers:[administrationapiinspectorService]}),__metadata("design:paramtypes",[services_1.toast,services_1.modal,"function"==typeof(e=void 0!==core_1.Injector&&core_1.Injector)?e:Object,administrationapiinspectorService])],AdministrationAPIInspector)}();exports.AdministrationAPIInspector=AdministrationAPIInspector;var AdministrationAPIInspectorDetails=function(){function e(){this.endpoint={}}return e.prototype.close=function(){this.self.destroy()},e=__decorate([core_1.Component({selector:"administration-api-inspector-details",template:'<system-modal><system-modal-header (close)="close()"><system-label label="LBL_API_ENDPOINT"></system-label></system-modal-header><system-modal-content [grow]="true">{{endpoint.method}}</system-modal-content><system-modal-footer><button class="slds-button slds-button--neutral" (click)="close()"><system-label label="LBL_CLOSE"></system-label></button></system-modal-footer></system-modal>',providers:[administrationapiinspectorService]})],e)}();exports.AdministrationAPIInspectorDetails=AdministrationAPIInspectorDetails;var AdministrationApiInspectorMethodParameters=function(){function e(e){this.apiinspector=e}return e.prototype.ngOnChanges=function(){this.parameters=this.apiinspector.getMethodParameters(this.apimethod.route,this.apimethod.method,this.in)},__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"apimethod",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"in",void 0),__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"parameterCollector",void 0),e=__decorate([core_1.Component({selector:"administration-api-inspector-method-parameters",template:'<ng-container *ngIf="this.parameters.length > 0"><div class="slds-p-around--small slds-text-heading--label"><system-label [label]="\'LBL_\'+in.toUpperCase()+\'_PARAMETERS\'"></system-label></div><table class="slds-table slds-table--fixed-layout slds-table_cell-buffer slds-table_bordered"><thead><tr class="slds-line-height_reset"><th style="width: 120px" scope="col"><div class="slds-truncate"><system-label label="LBL_NAME"></system-label></div></th><th scope="col"><div class="slds-truncate"><system-label label="LBL_DESCRIPTION"></system-label></div></th><th style="width: 100px" scope="col"><div class="slds-truncate"><system-label label="LBL_TYPE"></system-label></div></th><th *ngIf="parameterCollector" scope="col"><div class="slds-truncate"><system-label label="LBL_TYPE"></system-label></div></th></tr></thead><tbody><tr *ngFor="let parameter of parameters" class="slds-hint-parent"><td><div class="slds-truncate">{{parameter.name}}<abbr *ngIf="parameter.required" class="slds-required">*</abbr></div></td><td><div class="slds-truncate">{{parameter.description}}</div></td><td><div class="slds-truncate">{{parameter.type}}</div></td><td *ngIf="parameterCollector"><input class="slds-input" [(ngModel)]="parameterCollector[parameter.name]"></td></tr></tbody></table></ng-container>'}),__metadata("design:paramtypes",[administrationapiinspectorService])],e)}();exports.AdministrationApiInspectorMethodParameters=AdministrationApiInspectorMethodParameters;var AdministrationApiInspectorMethods=function(){function e(e,t,s){this.modal=e,this.injector=t,this.apiinspector=s}var t;return e.prototype.test=function(t,e){e.preventDefault(),e.stopPropagation(),this.modal.openModal("AdministrationApiInspectorMethodTest",!0,this.injector).subscribe(function(e){e.instance.apiMethod=t})},e=__decorate([core_1.Component({selector:"administration-api-inspector-methods",template:'<div *ngFor="let apimethod of apiinspector.apiMethods" class="slds-m-around--x-small slds-p-around--none slds-box"><div class="slds-p-around--small slds-grid slds-grid--vertical-align-center slds-p-bottom--small slds-border--bottom"><div class="slds-badge slds-m-right--x-small" [ngStyle]="apiinspector.getMethodStyle(apimethod.method)"><div class="slds-size--1-of-1 slds-text-align--center">{{apimethod.method}}</div></div><div class="slds-truncate slds-text-heading--small slds-grow">{{apimethod.route}}</div><system-utility-icon class="slds-p-left--xx-small" icon="ribbon" size="x-small" [colorclass]="apimethod.options.validate ? \'slds-icon-text-success\' : \'slds-icon-text-light\'"></system-utility-icon><system-utility-icon class="slds-p-left--xx-small" icon="unlock" size="x-small" [colorclass]="apimethod.options.noAuth ? \'slds-icon-text-error\' : \'slds-icon-text-light\'"></system-utility-icon><system-utility-icon class="slds-p-left--xx-small" icon="user_role" size="x-small" [colorclass]="apimethod.options.adminOnly ? \'slds-icon-text-error\' : \'slds-icon-text-light\'"></system-utility-icon><system-utility-icon class="slds-p-left--xx-small slds-text-link--reset" (click)="test(apimethod, $event)" icon="play" size="x-small"></system-utility-icon></div><div class="slds-p-around--small"><div class="slds-p-bottom--small slds-text-heading--small"><system-label label="LBL_SUMMARY"></system-label></div><div>{{apimethod.description}}</div></div><administration-api-inspector-method-parameters [apimethod]="apimethod" in="path"></administration-api-inspector-method-parameters><administration-api-inspector-method-parameters [apimethod]="apimethod" in="query"></administration-api-inspector-method-parameters><administration-api-inspector-method-parameters [apimethod]="apimethod" in="body"></administration-api-inspector-method-parameters><administration-api-inspector-method-responses [apimethod]="apimethod"></administration-api-inspector-method-responses></div>'}),__metadata("design:paramtypes",[services_1.modal,"function"==typeof(t=void 0!==core_1.Injector&&core_1.Injector)?t:Object,administrationapiinspectorService])],e)}();exports.AdministrationApiInspectorMethods=AdministrationApiInspectorMethods;var AdministrationapiinspectorMethodResponses=function(){function e(e){this.apiinspector=e}return e.prototype.ngOnChanges=function(){this.response=this.apiinspector.getMethodResponses(this.apimethod.route,this.apimethod.method)},__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"apimethod",void 0),e=__decorate([core_1.Component({selector:"administration-api-inspector-method-responses",template:'<ng-container *ngIf="this.response.length > 0"><div class="slds-p-around--small slds-text-heading--label"><system-label label="LBL_API_RESPONSES"></system-label></div><table class="slds-table slds-table--fixed-layout slds-table_cell-buffer slds-table_bordered"><thead><tr class="slds-line-height_reset"><th style="width: 100px;" scope="col"><div class="slds-truncate"><system-label label="LBL_NAME"></system-label></div></th><th scope="col"><div class="slds-truncate"><system-label label="LBL_DESCRIPTION"></system-label></div></th></tr></thead><tbody><tr *ngFor="let response of response" class="slds-hint-parent"><td><div class="slds-truncate">{{response.name}}</div></td><td><div class="slds-truncate">{{response.description}}</div></td></tr></tbody></table></ng-container>'}),__metadata("design:paramtypes",[administrationapiinspectorService])],e)}();exports.AdministrationapiinspectorMethodResponses=AdministrationapiinspectorMethodResponses;var AdministrationApiInspectorMethodTest=function(){function AdministrationApiInspectorMethodTest(e,t,s){this.backend=e,this.libloader=t,this.apiInspector=s,this.activetab="parameters",this.executing=!1,this.parameterCollector={},this.libloader.loadLib("jsonbeautify")}var e,t;return AdministrationApiInspectorMethodTest.prototype.ngAfterViewInit=function(){var e=this.modalcontent.element.nativeElement.getBoundingClientRect(),t=this.tabcontent.element.nativeElement.getBoundingClientRect();this.tabHeigth=e.height-t.top+e.top},Object.defineProperty(AdministrationApiInspectorMethodTest.prototype,"tabStyle",{get:function(){return{height:this.tabHeigth+"px"}},enumerable:!1,configurable:!0}),AdministrationApiInspectorMethodTest.prototype.test=function(){var t=this;switch(this.executing=!0,this.response=void 0,this.activetab="response",this.apiMethod.method){case"get":this.backend.getRequest(this.buildRoute(),this.buildParams()).subscribe(function(e){t.response=js_beautify(JSON.stringify(e)),t.executing=!1},function(e){t.response=js_beautify(JSON.stringify(e))});break;case"post":this.backend.postRequest(this.buildRoute(),this.buildParams(),this.buildBody()).subscribe(function(e){t.response=js_beautify(JSON.stringify(e)),t.executing=!1},function(e){t.response=js_beautify(JSON.stringify(e))})}},AdministrationApiInspectorMethodTest.prototype.checkParameters=function(){return!0},AdministrationApiInspectorMethodTest.prototype.buildRoute=function(){for(var e=this.apiMethod.route.substring(1),t=0,s=this.apiInspector.getMethodParameters(this.apiMethod.route,this.apiMethod.method,"path");t<s.length;t++){var i=s[t];e=e.replace("{"+i.name+"}",this.parameterCollector[i.name])}return e},AdministrationApiInspectorMethodTest.prototype.buildParams=function(){for(var e={},t=0,s=this.apiInspector.getMethodParameters(this.apiMethod.route,this.apiMethod.method,"query");t<s.length;t++){var i=s[t];e[i.name]=this.parameterCollector[i.name]}return e},AdministrationApiInspectorMethodTest.prototype.buildBody=function(){for(var e={},t=0,s=this.apiInspector.getMethodParameters(this.apiMethod.route,this.apiMethod.method,"body");t<s.length;t++){var i=s[t];e[i.name]=this.parameterCollector[i.name]}return e},AdministrationApiInspectorMethodTest.prototype.close=function(){this.self.destroy()},__decorate([core_1.ViewChild("modalcontent",{read:core_1.ViewContainerRef,static:!0}),__metadata("design:type","function"==typeof(e=void 0!==core_1.ViewContainerRef&&core_1.ViewContainerRef)?e:Object)],AdministrationApiInspectorMethodTest.prototype,"modalcontent",void 0),__decorate([core_1.ViewChild("tabcontent",{read:core_1.ViewContainerRef,static:!0}),__metadata("design:type","function"==typeof(t=void 0!==core_1.ViewContainerRef&&core_1.ViewContainerRef)?t:Object)],AdministrationApiInspectorMethodTest.prototype,"tabcontent",void 0),AdministrationApiInspectorMethodTest=__decorate([core_1.Component({selector:"administration-api-inspector-method-test",template:'<system-modal><system-modal-header (close)="close()">{{apiMethod.route}}<system-modal-header-right><div class="slds-badge" [ngStyle]="apiInspector.getMethodStyle(apiMethod.method)"><div class="slds-size--1-of-1 slds-text-align--center">{{apiMethod.method}}</div></div></system-modal-header-right></system-modal-header><system-modal-content [grow]="true" #modalcontent margin="none"><div class="slds-tabs_default"><ul class="slds-tabs_default__nav" role="tablist"><li class="slds-tabs_default__item" [ngClass]="{\'slds-is-active\': activetab == \'parameters\'}" role="presentation"><a class="slds-tabs_default__link" role="tab" (click)="activetab = \'parameters\'"><system-label label="LBL_PARAMETERS"></system-label></a></li><li class="slds-tabs_default__item" title="Item Three" [ngClass]="{\'slds-is-active\': activetab == \'response\'}" role="presentation"><a class="slds-tabs_default__link" role="tab" (click)="activetab = \'response\'"><system-label label="LBL_RESPONSE"></system-label></a></li></ul><div #tabcontent [ngStyle]="tabStyle" class="slds-scrollable"><div class="slds-tabs_default__content" [ngClass]="{\'slds-hide\': activetab != \'parameters\'}" role="tabpanel"><administration-api-inspector-method-parameters [apimethod]="apiMethod" [parameterCollector]="parameterCollector" in="path"></administration-api-inspector-method-parameters><administration-api-inspector-method-parameters [apimethod]="apiMethod" [parameterCollector]="parameterCollector" in="query"></administration-api-inspector-method-parameters><administration-api-inspector-method-parameters [apimethod]="apiMethod" [parameterCollector]="parameterCollector" in="body"></administration-api-inspector-method-parameters></div><div class="slds-tabs_default__content" [ngClass]="{\'slds-hide\': activetab != \'response\'}" role="tabpanel"><pre class="slds-p-horizontal--x-small" style="white-space: pre-wrap">{{this.response}}</pre></div></div></div></system-modal-content><system-modal-footer><button class="slds-button slds-button--neutral" (click)="close()"><system-label label="LBL_CLOSE"></system-label></button> <button class="slds-button slds-button--brand" (click)="test()"><system-label label="LBL_TEST"></system-label></button></system-modal-footer></system-modal>'}),__metadata("design:paramtypes",[services_1.backend,services_1.libloader,administrationapiinspectorService])],AdministrationApiInspectorMethodTest)}();exports.AdministrationApiInspectorMethodTest=AdministrationApiInspectorMethodTest;var AdministrationSysTrashcanManager=function(){function AdministrationSysTrashcanManager(e,t,s,i,a,l){this.metadata=e,this.modal=t,this.backend=s,this.language=i,this.userpreferences=a,this.footer=l,this.records=[],this.loaddate={},this.loading=!0}return AdministrationSysTrashcanManager.prototype.ngOnInit=function(){this.getEntries()},AdministrationSysTrashcanManager.prototype.getEntries=function(){var t=this;this.backend.getRequest("admin/systrashcan").subscribe(function(e){t.records=e,t.loaddate=new moment,t.loading=!1})},AdministrationSysTrashcanManager.prototype.reload=function(){this.loading=!0,this.records=[],this.getEntries()},AdministrationSysTrashcanManager.prototype.getUserDate=function(e){return this.userpreferences.formatDateTime(e)},AdministrationSysTrashcanManager.prototype.recoverRecord=function(s){var i=this;this.modal.openModal("AdministrationSysTrashcanRecover").subscribe(function(e){e.instance.record=s,e.instance.recovered.subscribe(function(e){e&&i.records.some(function(e,t){if(e.id==s.id)return i.records.splice(t,1),!0})})})},AdministrationSysTrashcanManager.prototype.getModule=function(e){return this.metadata.getModuleFromSingular(e)},Object.defineProperty(AdministrationSysTrashcanManager.prototype,"loadDate",{get:function(){return this.loaddate?this.getUserDate(this.loaddate):"---"},enumerable:!1,configurable:!0}),AdministrationSysTrashcanManager=__decorate([core_1.Component({selector:"administration-systrashcan-manager",template:'<div class="slds-page-header"><div class="slds-media"><div class="slds-p-horizontal--x-small"><system-action-icon icon="recall"></system-action-icon></div><div class="slds-media__body"><h1 class="slds-page-header__title slds-truncate slds-align-middle">Record Recovery</h1><div class="slds-text-body_small slds-line-height_reset slds-p-vertical--xx-small" (click)="reload()">{{loadDate}}</div></div></div></div><div system-to-bottom><table class="slds-table slds-table_bordered slds-table--header-fixed slds-table_cell-buffer"><thead><tr class="slds-text-title_caps"><th scope="col" colspan="2"><div class="slds-truncate"><system-label label="LBL_OBJECT"></system-label></div></th><th scope="col"><div class="slds-truncate"><system-label label="LBL_NAME"></system-label></div></th><th scope="col"><div class="slds-truncate"><system-label label="LBL_DATE_DELETED"></system-label></div></th><th scope="col"><div class="slds-truncate"><system-label label="LBL_DELETED_BY"></system-label></div></th><th scope="col" class="slds-cell-shrink"></th></tr></thead><tbody><tr *ngFor="let record of records"><td role="gridcell" class="slds-cell-shrink"><system-icon [module]="getModule(record.recordmodule)" size="small"></system-icon></td><td scope="row"><div class="slds-truncate">{{record.recordmodule}}</div></td><td><div class="slds-truncate">{{record.recordname}}</div></td><td><div class="slds-truncate">{{getUserDate(record.date_deleted)}}</div></td><td><div class="slds-truncate">{{record.user_name}}</div></td><td role="gridcell"><button class="slds-button slds-button_icon slds-button_icon-border-filled slds-button_icon-x-small" (click)="recoverRecord(record)"><system-button-icon [icon]="\'undelete\'"></system-button-icon></button></td></tr></tbody><tbody system-table-stencils [columns]="5" [select]="false" [tools]="true" [rows]="5" *ngIf="loading"></tbody></table><div *ngIf="!loading && records.length == 0" class="slds-p-around--medium slds-align--absolute-center"><h2 class="slds-text-heading--small"><system-label label="LBL_NO_RECORDS_FOUND"></system-label></h2></div></div>'}),__metadata("design:paramtypes",[services_1.metadata,services_1.modal,services_1.backend,services_1.language,services_1.userpreferences,services_1.footer])],AdministrationSysTrashcanManager)}();exports.AdministrationSysTrashcanManager=AdministrationSysTrashcanManager;var AdministrationSysTrashcanRecover=function(){function AdministrationSysTrashcanRecover(e,t,s,i){this.metadata=e,this.backend=t,this.language=s,this.toast=i,this.record={},this.self={},this.relatedRecords=[],this.loading=!0,this.recoverrelated=!1,this.recovering=!1,this.recovered=new core_1.EventEmitter}return AdministrationSysTrashcanRecover.prototype.ngOnInit=function(){var t=this;this.backend.getRequest("admin/systrashcan/related/"+this.record.transactionid+"/"+this.record.recordid).subscribe(function(e){t.relatedRecords=e,0<t.relatedRecords.length&&(t.recoverrelated=!0),t.loading=!1},function(e){t.loading=!1})},AdministrationSysTrashcanRecover.prototype.close=function(){this.recovered.emit(!1),this.self.destroy()},AdministrationSysTrashcanRecover.prototype.getModule=function(e){return this.metadata.getModuleFromSingular(e)},Object.defineProperty(AdministrationSysTrashcanRecover.prototype,"recorverDisabled",{get:function(){return 0==this.relatedRecords.length},enumerable:!1,configurable:!0}),AdministrationSysTrashcanRecover.prototype.doRecover=function(){var t=this;this.recovering=!0,this.backend.postRequest("admin/systrashcan/recover/"+this.record.id,{recoverrelated:this.recoverrelated}).subscribe(function(e){t.toast.sendToast("record "+t.record.recordname+" recovered"),t.recovered.emit(!0),t.self.destroy()})},__decorate([core_1.Input(),__metadata("design:type",Object)],AdministrationSysTrashcanRecover.prototype,"record",void 0),AdministrationSysTrashcanRecover=__decorate([core_1.Component({template:'<system-modal><system-modal-header (close)="close()">Recover {{record.recordmodule}} {{record.recordname}}</system-modal-header><system-modal-content margin="none"><table *ngIf="relatedRecords.length > 0; else norelatedrecords" class="slds-table slds-table_bordered slds-table_cell-buffer"><thead><tr class="slds-text-title_caps"><th scope="col" colspan="2"><div class="slds-truncate">Object</div></th><th scope="col"><div class="slds-truncate">Name</div></th><th scope="col"><div class="slds-truncate">link</div></th></tr></thead><tbody><tr *ngFor="let relatedRecord of relatedRecords"><td role="gridcell" class="slds-cell-shrink"><system-icon [module]="getModule(relatedRecord.linkmodule)" size="small"></system-icon></td><td scope="row"><div class="slds-truncate">{{relatedRecord.linkmodule}}</div></td><td><div class="slds-truncate">{{relatedRecord.recordname}}</div></td><td><div class="slds-truncate">{{relatedRecord.linkname}}</div></td></tr></tbody></table><ng-template #norelatedrecords><div style="height: 100%;" class="slds-p-around--medium slds-align--absolute-center"><h2 class="slds-text-heading--small">no related records found</h2></div></ng-template></system-modal-content><system-modal-footer><div class="slds-grid slds-grid--vertical-align-center slds-grid--align-spread"><div><div [ngClass]="{\'slds-hide\': recorverDisabled}" class="slds-form-element__control"><span class="slds-checkbox"><input type="checkbox" [(ngModel)]="recoverrelated" id="recoverrelated"> <label class="slds-checkbox__label" for="recoverrelated"><span class="slds-checkbox_faux"></span> <span class="slds-form-element__label">recover Related</span></label></span></div></div><div><button class="slds-button slds-button--neutral" (click)="close()">Cancel</button> <button class="slds-button slds-button--brand" [disabled]="loading" (click)="doRecover()">Recover</button></div></div></system-modal-footer></system-modal>'}),__metadata("design:paramtypes",[services_1.metadata,services_1.backend,services_1.language,services_1.toast])],AdministrationSysTrashcanRecover)}();exports.AdministrationSysTrashcanRecover=AdministrationSysTrashcanRecover;var AdministrationDictRepair=function(){function AdministrationDictRepair(e,t,s){this.backend=e,this.toast=t,this.language=s}return AdministrationDictRepair=__decorate([core_1.Component({selector:"administration-dict-repair",template:'<div class="slds-grid slds-grid--align-spread slds-p-around--medium"><h2 class="slds-text-heading--medium"><system-label label="LBL_REPAIR_DICTIONARY"></system-label></h2></div><div class="slds-p-around--small slds-theme--default" system-to-bottom><administration-dict-repair-item></administration-dict-repair-item><administration-dict-repair-language></administration-dict-repair-language><administration-dict-repair-acl-roles></administration-dict-repair-acl-roles><administration-dict-repair-cache></administration-dict-repair-cache><administration-dict-repair-db-columns></administration-dict-repair-db-columns></div>'}),__metadata("design:paramtypes",[services_1.backend,services_1.toast,services_1.language])],AdministrationDictRepair)}();exports.AdministrationDictRepair=AdministrationDictRepair;var AdministrationDictRepairItem=function(){function AdministrationDictRepairItem(e,t,s,i,a){this.backend=e,this.toast=t,this.language=s,this.modal=i,this.injector=a,this.sql=[]}var e;return AdministrationDictRepairItem.prototype.executeDB=function(){var t=this,s=this.modal.await(this.language.getLabel("LBL_LOADING"));this.backend.getRequest("admin/repair/sql").subscribe(function(e){s.emit(!0),t.sql=e.sql,t.wholeSQL=e.wholeSQL,e&&t.modal.openModal("AdministrationDictRepairModal",!0,t.injector).subscribe(function(e){e.instance.sql=t.sql,e.instance.wholeSQL=t.wholeSQL})})},AdministrationDictRepairItem=__decorate([core_1.Component({selector:"administration-dict-repair-item",template:'<div class="slds-grid slds-grid--vertical-align-center slds-grid--align-spread slds-p-vertical--xx-small slds-border--bottom"><system-utility-icon icon="custom_apps" size="x-small"></system-utility-icon><system-label class="slds-p-horizontal--x-small" label="LBL_REPAIR_DATABASE"></system-label> <system-label class="slds-grow" label="LBL_REPAIR_DATABASE" length="long"></system-label> <button class="slds-button slds-button--neutral slds-button--small" (click)="executeDB()"><system-label label="LBL_EXECUTE"></system-label></button></div>'}),__metadata("design:paramtypes",[services_1.backend,services_1.toast,services_1.language,services_1.modal,"function"==typeof(e=void 0!==core_1.Injector&&core_1.Injector)?e:Object])],AdministrationDictRepairItem)}();exports.AdministrationDictRepairItem=AdministrationDictRepairItem;var AdministrationDictRepairModal=function(){function AdministrationDictRepairModal(e,t,s,i){this.backend=e,this.toast=t,this.language=s,this.modal=i,this.synced=!1,this.sql=[],this.dbErrors=[],this.self={}}return AdministrationDictRepairModal.prototype.close=function(){this.self.destroy()},Object.defineProperty(AdministrationDictRepairModal.prototype,"hidden",{get:function(){return null==typeof navigator.clipboard},enumerable:!1,configurable:!0}),AdministrationDictRepairModal.prototype.doRepair=function(){var s=this;this.modal.openModal("SystemLoadingModal").subscribe(function(t){var e=s.sql.filter(function(e){return e.selected});s.backend.postRequest("admin/repair/database",{},{selectedqueries:e}).subscribe(function(e){e.response?(e.synced?s.toast.sendToast(s.language.getLabel("LBL_REPAIR_DATABASE_ALREADY_SYNCED"),"success"):s.toast.sendToast(s.language.getLabel("LBL_REPAIR_DATABASE_SYNCED"),"success"),s.close()):s.dbErrors=e.errors,t.instance.self.destroy()},function(e){switch(e.status){case 500:s.toast.sendAlert(e.message,"error"),s.close(),t.instance.self.destroy()}})})},AdministrationDictRepairModal.prototype.copy2clipboard=function(){var t=this,e=this.sql.filter(function(e){return e.selected}).map(function(e){return e.statement}).toString().replace(/;,/g,";\n");navigator.clipboard.writeText(e).then(function(e){t.toast.sendToast(t.language.getLabel("LBL_COPIED_TO_CLIPBOARD"),"info")})},AdministrationDictRepairModal.prototype.selectAll=function(){this.sql.forEach(function(e){e.selected=!0})},AdministrationDictRepairModal=__decorate([core_1.Component({selector:"administration-dict-repair-modal",template:'<system-modal><system-modal-header (close)="close()"><system-label label="LBL_REPAIR_DICTIONARY"></system-label></system-modal-header><system-modal-content [margin]="\'none\'"><table class="slds-table slds-table_bordered slds-table_cell-buffer" system-multi-select-checkboxes><tbody><tr *ngFor="let query of sql"><td style="white-space: normal"><div class="slds-grid slds-grid--vertical-align-center slds-p-around--xx-small"><system-checkbox [(ngModel)]="query.selected"></system-checkbox><div><p>{{query.comment}}</p><p>{{query.statement}}</p></div></div></td></tr></tbody></table><div *ngIf="dbErrors.length > 0" class="slds-form-element"><system-label label="LBL_LAST_DB_ERROR"></system-label><div class="slds-form-element__control"><textarea *ngFor="let error of dbErrors" disabled class="slds-textarea" style="min-height: 400px;" [value]="error"></textarea></div></div><div *ngIf="sql == \'\'" class="slds-form-element__control"><system-label label="LBL_REPAIR_DATABASE_ALREADY_SYNCED"></system-label></div></system-modal-content><system-modal-footer><button class="slds-button slds-button--neutral" [disabled]="sql.length <= 0" (click)="selectAll()"><system-label label="LBL_SELECT_ALL"></system-label></button> <button *ngIf="!hidden" class="slds-button slds-button--neutral" [disabled]="wholeSQL.length <= 0" (click)="copy2clipboard()"><system-label label="LBL_COPY_TO_CLIPBOARD"></system-label></button> <button class="slds-button slds-button--brand" [disabled]="sql.length <= 0" (click)="doRepair()"><system-label label="LBL_EXECUTE"></system-label></button></system-modal-footer></system-modal>'}),__metadata("design:paramtypes",[services_1.backend,services_1.toast,services_1.language,services_1.modal])],AdministrationDictRepairModal)}();exports.AdministrationDictRepairModal=AdministrationDictRepairModal;var AdministrationDictRepairLanguage=function(){function AdministrationDictRepairLanguage(e,t,s,i){this.backend=e,this.toast=t,this.language=s,this.modal=i,this.loaderHandler=new rxjs_1.Subject}return AdministrationDictRepairLanguage.prototype.executeLG=function(){var t=this,s=this.modal.await(this.language.getLabel("LBL_LOADING"));this.backend.getRequest("admin/repair/language").subscribe(function(e){s.emit(!0),e.response?(t.language.getLanguage(t.loaderHandler),t.toast.sendToast(t.language.getLabel("LBL_LANGUAGES_REPAIRED"),"success")):t.toast.sendToast(t.language.getLabel("LBL_ERROR"),"error")})},AdministrationDictRepairLanguage=__decorate([core_1.Component({selector:"administration-dict-repair-language",template:'<div class="slds-grid slds-grid--vertical-align-center slds-grid--align-spread slds-p-vertical--xx-small slds-border--bottom"><system-utility-icon icon="custom_apps" size="x-small"></system-utility-icon><system-label class="slds-p-horizontal--x-small" label="LBL_REPAIR_LANGUAGE"></system-label> <system-label class="slds-grow" label="LBL_REPAIR_LANGUAGE" length="long"></system-label> <button class="slds-button slds-button--neutral slds-button--small" (click)="executeLG()"><system-label label="LBL_EXECUTE"></system-label></button></div>'}),__metadata("design:paramtypes",[services_1.backend,services_1.toast,services_1.language,services_1.modal])],AdministrationDictRepairLanguage)}();exports.AdministrationDictRepairLanguage=AdministrationDictRepairLanguage;var AdministrationDictRepairACLRoles=function(){function e(e,t,s,i){this.backend=e,this.toast=t,this.language=s,this.modal=i}return e.prototype.executeRepairRoles=function(){var t=this,s=this.modal.await(this.language.getLabel("LBL_LOADING"));this.backend.getRequest("admin/repair/aclroles").subscribe(function(e){s.emit(!0),e?t.toast.sendToast(t.language.getLabel("LBL_ROLES_REPAIRED"),"success"):t.toast.sendToast(t.language.getLabel("LBL_ERROR"),"error")})},e=__decorate([core_1.Component({selector:"administration-dict-repair-acl-roles",template:'<div class="slds-grid slds-grid--vertical-align-center slds-grid--align-spread slds-p-vertical--xx-small slds-border--bottom"><system-utility-icon icon="custom_apps" size="x-small"></system-utility-icon><system-label class="slds-p-horizontal--x-small" label="LBL_REPAIR_ACL_ROLES"></system-label> <system-label class="slds-grow" label="LBL_REPAIR_ACL_ROLES" length="long"></system-label> <button class="slds-button slds-button--neutral slds-button--small" (click)="executeRepairRoles()"><system-label label="LBL_EXECUTE"></system-label></button></div>'}),__metadata("design:paramtypes",[services_1.backend,services_1.toast,services_1.language,services_1.modal])],e)}();exports.AdministrationDictRepairACLRoles=AdministrationDictRepairACLRoles;var AdministrationDictRepairCache=function(){function AdministrationDictRepairCache(e,t,s,i){this.backend=e,this.toast=t,this.language=s,this.modal=i}return AdministrationDictRepairCache.prototype.executeRepairCache=function(){var t=this,s=this.modal.await(this.language.getLabel("LBL_LOADING"));this.backend.getRequest("admin/repair/cache").subscribe(function(e){s.emit(!0),e?t.toast.sendToast(t.language.getLabel("LBL_CACHE_REPAIRED"),"success"):t.toast.sendToast(t.language.getLabel("LBL_ERROR"),"error")})},AdministrationDictRepairCache=__decorate([core_1.Component({selector:"administration-dict-repair-cache",template:'<div class="slds-grid slds-grid--vertical-align-center slds-grid--align-spread slds-p-vertical--xx-small slds-border--bottom"><system-utility-icon icon="custom_apps" size="x-small"></system-utility-icon><system-label class="slds-p-horizontal--x-small" label="LBL_REPAIR_CACHE"></system-label> <system-label class="slds-grow" label="LBL_REPAIR_CACHE" length="long"></system-label> <button class="slds-button slds-button--neutral slds-button--small" (click)="executeRepairCache()"><system-label label="LBL_EXECUTE"></system-label></button></div>'}),__metadata("design:paramtypes",[services_1.backend,services_1.toast,services_1.language,services_1.modal])],AdministrationDictRepairCache)}();exports.AdministrationDictRepairCache=AdministrationDictRepairCache;var AdministrationDictRepairDbColumns=function(){function e(e,t,s,i,a){this.backend=e,this.toast=t,this.language=s,this.modal=i,this.injector=a}var t;return e.prototype.executeRepairDbColumns=function(){this.modal.openModal("AdministrationDictRepairDbColumnsModal",!0,this.injector)},e=__decorate([core_1.Component({selector:"administration-dict-repair-db-columns",template:'<div class="slds-grid slds-grid--vertical-align-center slds-grid--align-spread slds-p-vertical--xx-small slds-border--bottom"><system-utility-icon icon="custom_apps" size="x-small"></system-utility-icon><system-label class="slds-p-horizontal--x-small" label="LBL_REPAIR_DBCOLUMNS"></system-label> <system-label class="slds-grow" label="LBL_REPAIR_DBCOLUMNS_DESC" length="long"></system-label> <button class="slds-button slds-button--neutral slds-button--small" (click)="executeRepairDbColumns()"><system-label label="LBL_EXECUTE"></system-label></button></div>'}),__metadata("design:paramtypes",[services_1.backend,services_1.toast,services_1.language,services_1.modal,"function"==typeof(t=void 0!==core_1.Injector&&core_1.Injector)?t:Object])],e)}();exports.AdministrationDictRepairDbColumns=AdministrationDictRepairDbColumns;var AdministrationDictRepairDbColumnsModal=function(){function AdministrationDictRepairDbColumnsModal(e,t,s,i,a,l){this.backend=e,this.toast=t,this.language=s,this.modal=i,this.metadata=a,this.helper=l,this.self={},this._module="",this.allFields=[],this.modules=this.metadata.getModules(),this.modules.sort()}return Object.defineProperty(AdministrationDictRepairDbColumnsModal.prototype,"module",{get:function(){return this._module},set:function(e){e!=this._module&&(this._module=e,this.mergeColumns())},enumerable:!1,configurable:!0}),AdministrationDictRepairDbColumnsModal.prototype.mergeColumns=function(){var n=this;this.allFields=[],this.backend.getRequest("dictionary/browser/"+this.module+"/dbcolumns").subscribe(function(e){var t=n.metadata.getModuleFields(n.module);for(var s in t)"non-db"!=t[s].source&&n.allFields.unshift({name:t[s].name,vardef_available:!0});for(var i in e){var a=e[i].name,l=!1;for(var o in n.allFields)n.allFields[o].name==a&&(n.allFields[o].db_available=!0,n.allFields.push(n.allFields[o]),n.allFields.splice(o,1),l=!0);l||n.allFields.unshift({name:a,db_available:!0})}})},AdministrationDictRepairDbColumnsModal.prototype.selectAll=function(){for(var e=0,t=this.allFields.filter(function(e){return e.db_available&&!e.vardef_available});e<t.length;e++){t[e].todelete=!0}},Object.defineProperty(AdministrationDictRepairDbColumnsModal.prototype,"canSelectAll",{get:function(){return this.allFields&&0<this.allFields.filter(function(e){return e.db_available&&!e.vardef_available&&!e.todelete}).length},enumerable:!1,configurable:!0}),Object.defineProperty(AdministrationDictRepairDbColumnsModal.prototype,"canDelete",{get:function(){return this.allFields&&0<this.allFields.filter(function(e){return e.todelete}).length},enumerable:!1,configurable:!0}),AdministrationDictRepairDbColumnsModal.prototype.close=function(){this.self.destroy()},AdministrationDictRepairDbColumnsModal.prototype.doRepair=function(){for(var t=this,e="",s=0,i=this.allFields.filter(function(e){return e.todelete});s<i.length;s++){e+="- "+i[s].name+"\r\n"}this.helper.confirm(this.language.getLabel("LBL_CLEAN_DB_COLUMNS"),this.language.getLabel("MSG_DELETE_COLUMNS","long")+"\r\n\r\n"+e).subscribe(function(e){e&&t.delete()})},AdministrationDictRepairDbColumnsModal.prototype.delete=function(){var s=this;this.modal.openModal("SystemLoadingModal").subscribe(function(t){var e={dbcolumns:s.allFields.filter(function(e){return e.todelete}),module:s.module};s.backend.postRequest("admin/repair/dbcolumns",{},e).subscribe(function(e){e?s.toast.sendToast(s.language.getLabel("MSG_SUCCESSFULLY_EXECUTED"),"success"):s.toast.sendToast(s.language.getLabel("LBL_ERROR"),"error"),s.mergeColumns(),t.instance.self.destroy()})})},AdministrationDictRepairDbColumnsModal=__decorate([core_1.Component({selector:"administration-dict-repair-db-columns-modal",template:'<system-modal><system-modal-header (close)="close()"><system-label label="LBL_CLEAN_DB_COLUMNS"></system-label></system-modal-header><system-modal-content margin="none" [grow]="true"><div class="slds-p-around--x-small slds-border--bottom"><div class="slds-form-element slds-grid slds-grid--vertical-align-center"><label for="moduleselect" class="slds-form-element__label"><system-label label="LBL_MODULE"></system-label></label><div class="slds-form-element__control slds-col"><div class="slds-select_container"><select id="moduleselect" class="slds-select" [(ngModel)]="module"><option><system-label label="LBL_SELECT"></system-label></option><option *ngFor="let thismodule of modules" [value]="thismodule">{{thismodule}}</option></select></div></div></div></div><div *ngIf="module"><table class="slds-table slds-table--bordered slds-table--cell-buffer"><thead><tr class="slds-text-title--caps"><th scope="col">Vardef</th><th scope="col">Database column</th><th scope="col"></th></tr></thead><tbody><tr *ngFor="let field of allFields | keyvalue" [ngStyle]="field.value.vardef_available && field.value.db_available?{\'background-color\':\'#C7D6A9\'} : {\'background-color\': \'#EDD0AB\'}"><td><div *ngIf="field.value.vardef_available">{{field.value.name}}</div><div *ngIf="!field.value.vardef_available"><system-icon icon="first_non_empty" size="x-small"></system-icon></div></td><td class="slds-truncate"><div *ngIf="field.value.db_available">{{field.value.name}}</div><div *ngIf="!field.value.db_available"><system-icon icon="first_non_empty" size="x-small"></system-icon></div></td><td><div *ngIf="field.value.db_available && !field.value.vardef_available"><system-checkbox [(ngModel)]="field.value.todelete" [disabled]="!field.value.db_available"></system-checkbox></div></td></tr></tbody></table></div></system-modal-content><system-modal-footer><button class="slds-button slds-button--neutral" [disabled]="!canSelectAll" (click)="selectAll()"><system-label label="LBL_SELECT_ALL"></system-label></button> <button class="slds-button slds-button--brand" [disabled]="!canDelete" (click)="doRepair()"><system-label label="LBL_DELETE_IRREVOCABLY"></system-label></button></system-modal-footer></system-modal>'}),__metadata("design:paramtypes",[services_1.backend,services_1.toast,services_1.language,services_1.modal,services_1.metadata,services_1.helper])],AdministrationDictRepairDbColumnsModal)}();exports.AdministrationDictRepairDbColumnsModal=AdministrationDictRepairDbColumnsModal;var AdministrationConfigEditor=function(){function AdministrationConfigEditor(e,t,s,i){this.metadata=e,this.language=t,this.backend=s,this.modal=i,this.componentconfig={},this.configvalues={},this.loading=!0}return AdministrationConfigEditor.prototype.ngOnInit=function(){var s=this;this.modal.openModal("SystemLoadingModal").subscribe(function(t){s.backend.getRequest("configuration/configurator/editor/"+s.componentconfig.category).subscribe(function(e){s.configvalues=e,s.loading=!1,t.instance.self.destroy()})})},Object.defineProperty(AdministrationConfigEditor.prototype,"items",{get:function(){for(var e=[],t=0,s=this.componentconfig.items;t<s.length;t++){var i=s[t];!0!==i.hidden&&e.push(i)}return e},enumerable:!1,configurable:!0}),AdministrationConfigEditor.prototype.save=function(){var s=this;this.loading=!0,this.modal.openModal("SystemLoadingModal").subscribe(function(t){t.instance.messagelabel="LBL_SAVING_DATA",s.backend.postRequest("configuration/configurator/editor/"+s.componentconfig.category,[],{config:s.configvalues}).subscribe(function(e){s.loading=!1,t.instance.self.destroy()})})},AdministrationConfigEditor=__decorate([core_1.Component({selector:"administration-configeditor",template:'<div class="slds-grid slds-grid--align-spread slds-p-around--medium"><h2 class="slds-text-heading--medium">editor</h2><button class="slds-button slds-button--neutral" (click)="save()"><system-label label="LBL_SAVE"></system-label></button></div><table class="slds-table slds-table--bordered slds-table--cell-buffer"><thead><tr class="slds-text-title--caps"><th scope="col"><system-label label="LBL_NAME"></system-label></th><th scope="col"><system-label label="LBL_VALUE"></system-label></th></tr></thead><tbody><tr style="vertical-align: middle" class="slds-align-top" *ngFor="let item of items"><td>{{item.name}}</td><td><ng-container [ngSwitch]="item.type"><system-checkbox *ngSwitchCase="\'bool\'" [(ngModel)]="configvalues[item.name]"></system-checkbox><div *ngSwitchDefault class="slds-form-element__control"><input type="text" class="slds-input" [disabled]="loading" [(ngModel)]="configvalues[item.name]"></div></ng-container></td></tr></tbody></table>'}),__metadata("design:paramtypes",[services_1.metadata,services_1.language,services_1.backend,services_1.modal])],AdministrationConfigEditor)}();exports.AdministrationConfigEditor=AdministrationConfigEditor;var AdministrationSchedulerJobsEnum=function(){function AdministrationSchedulerJobsEnum(e,t,s,i,a,l){var o=this;this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=a,this.backend=l,this.jobsList=[],this.backend.getRequest("module/Schedulers/jobslist").subscribe(function(e){for(var t in e)o.jobsList.push({key:t,name:e[t]});o.language.sortObjects(o.jobsList,"name")})}var e;return AdministrationSchedulerJobsEnum.prototype.ngOnInit=function(){var t=this;this.model.data$.subscribe(function(e){return t.splitJob()}),this.model.isLoading||this.splitJob()},AdministrationSchedulerJobsEnum.prototype.splitJob=function(){var e=this.model.getField("job");e&&0===e.indexOf("url::",0)?(this._job="url::",this._url=e.slice(5)):(this._job=e,this._url="")},AdministrationSchedulerJobsEnum.prototype.trackByFn=function(e,t){return e},Object.defineProperty(AdministrationSchedulerJobsEnum.prototype,"job",{get:function(){return this._job},set:function(e){this.model.setField("job",e+("url::"===e?this._url:""))},enumerable:!1,configurable:!0}),Object.defineProperty(AdministrationSchedulerJobsEnum.prototype,"url",{get:function(){return this._url},set:function(e){"url::"===this._job&&this.model.setField("job","url::"+e)},enumerable:!1,configurable:!0}),AdministrationSchedulerJobsEnum=__decorate([core_1.Component({selector:"administration-scheduler-jobs-enum",template:'<system-section [titlelabel]="language.getLabel(\'LBL_JOB_TASK\')"><div *ngIf="!view.isEditMode()" class="slds-p-around--xx-small"><system-stencil *ngIf="model.isLoading"></system-stencil><div *ngIf="!model.isLoading" class="slds-has-divider--bottom slds-p-vertical--x-small spice-fieldminheight"><div class="slds-grid slds-grid--vertical-align-center slds-grid--align-spread" style="min-height:19px;"><div class="slds-truncate" style="width:100%">{{job}}<ng-container *ngIf="job===\'url::\'">{{url}}</ng-container></div><button style="float: right" class="slds-button slds-button--icon slds-m-left--xx-small" (click)="view.setEditMode()"><system-button-icon [icon]="\'edit\'"></system-button-icon></button></div></div></div><div *ngIf="view.isEditMode()"><div class="slds-grid slds-grid--align-spread slds-p-around--xx-small"><div class="slds-form-element slds-p-horizontal--xx-small slds-size--1-of-2"><label class="slds-form-element__label"><abbr class="slds-required ng-star-inserted">*</abbr> <system-label label="LBL_JOB_TASK"></system-label></label><div class="slds-form-element__control slds-m-vertical--xx-small"><div class="slds-select_container"><select id="moduleselect1" class="slds-select" [(ngModel)]="job"><option *ngIf="!job"><system-label label="LBL_SELECT"></system-label> &hellip;</option><option *ngFor="let job of jobsList; trackBy: trackByFn" [value]="job.key">{{job.name}}</option></select></div></div></div><div class="slds-form-element slds-p-horizontal--xx-small slds-size--1-of-2"><label class="slds-form-element__label" for="text-input-id-1"><abbr *ngIf="job===\'url::\'" class="slds-required ng-star-inserted">*</abbr> <system-label label="LBL_URL"></system-label></label><div class="slds-form-element__control slds-m-vertical--xx-small"><input type="text" id="text-input-id-1" class="slds-input" [(ngModel)]="url" [disabled]="job!==\'url::\'"></div></div></div></div></system-section>'}),__metadata("design:paramtypes",[services_1.model,services_1.view,services_1.language,services_1.metadata,"function"==typeof(e=void 0!==router_1.Router&&router_1.Router)?e:Object,services_1.backend])],AdministrationSchedulerJobsEnum)}();exports.AdministrationSchedulerJobsEnum=AdministrationSchedulerJobsEnum;var AdministrationSchedulerJobLog=function(){function AdministrationSchedulerJobLog(e,t,s,i,a,l,o){var n=this;this.model=e,this.language=t,this.metadata=s,this.broadcast=i,this.elementRef=a,this.userpreferences=l,this.backend=o,this.schedulerLogs=[],this.isLoading=!1,this.isReLoading=!1,this.subscription=new rxjs_1.Subscription,this.subscription=this.broadcast.message$.subscribe(function(e){"scheduler.run"==e.messagetype&&n.reloadData()})}var e;return AdministrationSchedulerJobLog.prototype.ngOnInit=function(){this.getData()},AdministrationSchedulerJobLog.prototype.getData=function(){var t=this;this.totalLimit=10,this.isLoading=!0,this.backend.getRequest("module/Schedulers/"+this.model.id+"/related/schedulers_times",{sort:{sortfield:"execute_time",sortdirection:"DESC"},offset:0,limit:10,getcount:!0}).subscribe(function(e){t.schedulerLogs=_.values(e.list),t.sortList(),t.totalLines=e.count,t.isLoading=!1},function(e){return t.isLoading=!1})},AdministrationSchedulerJobLog.prototype.getMoreData=function(){var t=this,e={sort:{sortfield:"execute_time",sortdirection:"DESC"},offset:this.schedulerLogs.length,limit:10,getcount:!0};this.totalLimit+=10,this.isLoading=!0,this.backend.getRequest("module/Schedulers/"+this.model.id+"/related/schedulers_times",e).subscribe(function(e){t.schedulerLogs=__spreadArray(__spreadArray([],t.schedulerLogs),_.values(e.list)),t.sortList(),t.totalLines=e.count,t.isLoading=!1},function(e){return t.isLoading=!1})},AdministrationSchedulerJobLog.prototype.reloadData=function(){var t=this,e={sort:{sortfield:"execute_time",sortdirection:"DESC"},offset:0,limit:this.totalLimit,getcount:!0};this.isLoading=this.isReLoading=!0,this.backend.getRequest("module/Schedulers/"+this.model.id+"/related/schedulers_times",e).subscribe(function(e){t.schedulerLogs=_.values(e.list),t.sortList(),t.totalLines=e.count,t.isLoading=t.isReLoading=!1},function(e){return t.isLoading=t.isReLoading=!1})},AdministrationSchedulerJobLog.prototype.ngOnDestroy=function(){this.subscription.unsubscribe()},AdministrationSchedulerJobLog.prototype.getResolutionClass=function(e){switch(e){case"failure":return"slds-text-color_error";case"success":return"slds-text-color_success";default:return"slds-text-color--default"}},AdministrationSchedulerJobLog.prototype.displayDateValue=function(e){return e?((e=moment(e).tz(this.userpreferences.toUse.timezone)).add(e.utcOffset(),"m"),e.format(this.userpreferences.getDateFormat()+" "+this.userpreferences.getTimeFormat())):""},AdministrationSchedulerJobLog.prototype.trackByFn=function(e,t){return t.id},AdministrationSchedulerJobLog.prototype.sortList=function(){this.schedulerLogs.sort(function(e,t){return e.execute_time<t.execute_time?1:e.execute_time>t.execute_time?-1:0})},AdministrationSchedulerJobLog=__decorate([core_1.Component({selector:"administration-scheduler-jobs-enum",template:'<div *ngIf="schedulerLogs.length" class="slds-grid slds-grid_align-spread slds-m-bottom--medium"><div>{{language.ucFirst(language.getLabel(\'LBL_RECENT_ENTRIES\'))}} ({{schedulerLogs.length}} <system-label label="LBL_FROM"></system-label> {{totalLines}} <system-label label="LBL_TOTAL"></system-label>):</div><system-button-icon class="slds-p-horizontal--xxx-small" [icon]="\'refresh\'" (click)="!isLoading && reloadData()"></system-button-icon></div><table class="slds-table slds-table--bordered slds-table--cell-buffer slds-table--fixed-layout" role="grid"><thead><tr class="slds-line-height_reset"><th scope="col"><div class="slds-truncate"><system-label label="LBL_EXECUTE_TIME"></system-label></div></th><th scope="col"><div class="slds-truncate"><system-label label="LBL_STATUS"></system-label></div></th><th scope="col"><div class="slds-truncate"><system-label label="LBL_RESOLUTION"></system-label></div></th><th scope="col"><div class="slds-truncate"><system-label label="LBL_MESSAGE"></system-label></div></th></tr></thead><tbody><tr *ngFor="let scheduler of schedulerLogs; trackBy: trackByFn" class="slds-hint-parent" [ngStyle]="{\'opacity\':isReLoading?0.33:1}"><td scope="row"><div class="slds-truncate">{{displayDateValue(scheduler.execute_time)}}</div></td><td scope="row"><div class="slds-truncate">{{scheduler.status}}</div></td><td scope="row"><div class="slds-truncate" [ngClass]="getResolutionClass(scheduler.resolution)">{{scheduler.resolution}}</div></td><td scope="row" class="slds-grid"><div class="slds-truncate" aria-describedby="more" [title]="scheduler.message">{{scheduler.message}}&nbsp;</div></td></tr><tr *ngIf="schedulerLogs.length == 0"><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr></tbody></table><div class="slds-grid slds-grid--align-spread slds-grid--vertical-align-center slds-m-top--medium"><div class="slds-text-align--center" style="width:100%"><system-spinner *ngIf="isLoading"></system-spinner></div><button class="slds-button slds-button_neutral" [disabled]="isLoading" (click)="getMoreData()"><system-label label="LBL_MORE"></system-label></button></div>',providers:[services_1.relatedmodels]}),__metadata("design:paramtypes",[services_1.model,services_1.language,services_1.metadata,services_1.broadcast,"function"==typeof(e=void 0!==core_1.ElementRef&&core_1.ElementRef)?e:Object,services_1.userpreferences,services_1.backend])],AdministrationSchedulerJobLog)}();exports.AdministrationSchedulerJobLog=AdministrationSchedulerJobLog;var AdministrationSchedulerRunButton=function(){function AdministrationSchedulerRunButton(e,t,s,i,a,l,o){this.model=e,this.language=t,this.metadata=s,this.broadcast=i,this.toast=a,this.modal=l,this.backend=o}return AdministrationSchedulerRunButton.prototype.execute=function(){var s=this;this.modal.openModal("SystemLoadingModal",!1).subscribe(function(t){s.backend.postRequest("module/Schedulers/"+s.model.id+"/runjob").subscribe(function(e){t.instance.self.destroy(),e?s.toast.sendToast(s.language.getLabel("MSG_SUCCESSFULLY_EXECUTED"),"success"):s.toast.sendToast(s.language.getLabel("ERR_FAILED_TO_EXECUTE"),"error"),s.broadcast.broadcastMessage("scheduler.run")},function(e){t.instance.self.destroy(),s.toast.sendToast(s.language.getLabel("ERR_FAILED_TO_EXECUTE"),"error"),s.broadcast.broadcastMessage("scheduler.run")})})},AdministrationSchedulerRunButton=__decorate([core_1.Component({selector:"administration-scheduler-run-button",template:'<span><system-label label="LBL_RUN_NOW"></system-label></span>'}),__metadata("design:paramtypes",[services_1.model,services_1.language,services_1.metadata,services_1.broadcast,services_1.toast,services_1.modal,services_1.backend])],AdministrationSchedulerRunButton)}();exports.AdministrationSchedulerRunButton=AdministrationSchedulerRunButton;var AdministrationSchedulerScheduleButton=function(){function AdministrationSchedulerScheduleButton(e,t,s,i,a,l,o){this.model=e,this.language=t,this.metadata=s,this.broadcast=i,this.toast=a,this.modal=l,this.backend=o}return AdministrationSchedulerScheduleButton.prototype.execute=function(){var s=this;this.modal.openModal("SystemLoadingModal",!1).subscribe(function(t){s.backend.postRequest("module/Schedulers/"+s.model.id+"/schedulejob").subscribe(function(e){t.instance.self.destroy(),e?s.toast.sendToast(s.language.getLabel("MSG_SUCCESSFULLY_EXECUTED"),"success"):s.toast.sendToast(s.language.getLabel("ERR_FAILED_TO_EXECUTE"),"error"),s.broadcast.broadcastMessage("scheduler.run")},function(e){t.instance.self.destroy(),s.toast.sendToast(s.language.getLabel("ERR_FAILED_TO_EXECUTE"),"error"),s.broadcast.broadcastMessage("scheduler.run")})})},AdministrationSchedulerScheduleButton=__decorate([core_1.Component({selector:"administration-scheduler-schedule-button",template:'<span><system-label label="LBL_SCHEDULE_NOW"></system-label></span>'}),__metadata("design:paramtypes",[services_1.model,services_1.language,services_1.metadata,services_1.broadcast,services_1.toast,services_1.modal,services_1.backend])],AdministrationSchedulerScheduleButton)}();exports.AdministrationSchedulerScheduleButton=AdministrationSchedulerScheduleButton;var AdministrationDictionaryManagerItemField=function(){function e(e){this.dictionary=e,this.field="",this.id="",this.inputvalue="",this.editMode=!1}return Object.defineProperty(e.prototype,"fieldvalue",{get:function(){return this.inputvalue},set:function(e){},enumerable:!1,configurable:!0}),e.prototype.isEditMode=function(){return this.editMode},e.prototype.setEditMode=function(){this.editMode=!0},e.prototype.closeEdit=function(){this.editMode=!1},e.prototype.ngAfterViewInit=function(){},e.prototype.ngOnInit=function(){},__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"field",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"id",void 0),__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"inputvalue",void 0),e=__decorate([core_1.Component({selector:"[administration-dictionarymanager-item-field]",template:'<p *ngIf="!isEditMode()" class="slds-text-body--regular slds-truncate spice-fieldbody"><span>{{fieldvalue}}</span> <button style="float: right" class="slds-button slds-button--icon" (click)="setEditMode()"><svg aria-hidden="true" class="slds-button__icon"><use xlink:href="./vendor/sldassets/icons/utility-sprite/svg/symbols.svg#edit"></use></svg></button></p><div *ngIf="isEditMode()" class="slds-form-element__control"><input class="slds-input" type="text" [(ngModel)]="fieldvalue"></div>'}),__metadata("design:paramtypes",[dictionary])],e)}();exports.AdministrationDictionaryManagerItemField=AdministrationDictionaryManagerItemField;var AdministrationDictionaryManager=function(){function e(e){this.dictionary=e,this.dictionaryitem=""}return e.prototype.ngAfterViewInit=function(){this.dictionary.load(this.dictionaryitem).subscribe(function(e){})},e.prototype.isEditMode=function(){},e.prototype.closeEditMode=function(){},__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"dictionaryitem",void 0),e=__decorate([core_1.Component({selector:"administration-dictionarymanager",template:'<div class="slds-page-header" role="banner"><div class="slds-grid"><div class="slds-col slds-has-flexi-truncate"><div class="slds-media slds-no-space slds-grow"><div class="slds-media__body"><h1 class="slds-page-header__title slds-m-right--small slds-align-middle slds-truncate">Dictionary {{dictionaryitem}}</h1><p class="slds-text-title--caps slds-line-height--reset">{{dictionary.data.length}} Items</p></div></div></div></div></div><table class="slds-table slds-table--bordered slds-table--fixed-layout" role="grid"><thead><tr class="slds-text-title--caps"><th *ngFor="let field of dictionary.getFields()" class="slds-is-sortable slds-is-resizable" scope="col"><a href="javascript:void(0);" class="slds-th__action slds-text-link--reset"><span class="slds-truncate">{{field}}</span></a></th></tr></thead><tbody><tr administration-dictionarymanager-item class="slds-hint-parent" *ngFor="let item of dictionary.data" [item]="item"></tr></tbody></table><footer class="slds-utility-bar_container" role="footer" *ngIf="isEditMode()"><ul class="slds-utility-bar"><li class="slds-utility-bar__item"><button class="slds-button slds-utility-bar__action slds-button--brand">Save</button></li><li class="slds-utility-bar__item"><button class="slds-button slds-utility-bar__action slds-button--brand" (click)="closeEditMode()">Cancel</button></li></ul></footer>',providers:[dictionary]}),__metadata("design:paramtypes",[dictionary])],e)}();exports.AdministrationDictionaryManager=AdministrationDictionaryManager;var AdministrationDictionaryManagerItem=function(){function e(e){this.dictionary=e,this.item={},this.editMode=!1}return e.prototype.isEditMode=function(){return this.editMode},e.prototype.setEditMode=function(){this.editMode=!0},e.prototype.closeEdit=function(){this.editMode=!1},e.prototype.ngAfterViewInit=function(){},e.prototype.ngOnInit=function(){},__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"item",void 0),e=__decorate([core_1.Component({selector:"[administration-dictionarymanager-item]",template:'<td scope="row" *ngFor="let field of dictionary.getFields()"><div administration-dictionarymanager-item-field [field]="field" [id]="item.id" [inputvalue]="item[field]" class="slds-truncate"></div></td>'}),__metadata("design:paramtypes",[dictionary])],e)}();exports.AdministrationDictionaryManagerItem=AdministrationDictionaryManagerItem;var AdministrationGeneralSettings=function(){function AdministrationGeneralSettings(e,t,s,i,a,l){this.metadata=e,this.language=t,this.backend=s,this.modal=i,this.toast=a,this.currency=l,this.settings={system:{name:"",site_url:"",unique_key:""},advanced:{developerMode:!1,stack_trace_errors:!1,dump_slow_queries:!1,slow_query_time_msec:0,upload_maxsize:0},logger:{level:"",file:{name:"spicecrm",ext:"",maxLogs:10,maxSize:10,suffix:""}}},this.options=[],this.currencies=[],this.loading=!0,this._loglevels=[]}return AdministrationGeneralSettings.prototype.ngOnInit=function(){var s=this;this.modal.openModal("SystemLoadingModal").subscribe(function(t){s.backend.getRequest("configuration/settings").subscribe(function(e){s.settings=e,s._loglevels=s.settings.logger.level.split(","),s.loading=!1,t.instance.self.destroy()})})},AdministrationGeneralSettings.prototype.save=function(){var t=this;this.modal.openModal("SystemLoadingModal").subscribe(function(e){t.backend.postRequest("configuration/settings",{},t.settings).subscribe(function(e){e.status?t.toast.sendToast(t.language.getLabel("LBL_SUCCESS"),"success"):t.toast.sendToast(t.language.getLabel("LBL_ERROR"),"error")}),e.instance.self.destroy()})},Object.defineProperty(AdministrationGeneralSettings.prototype,"loglevels",{get:function(){return this._loglevels},set:function(e){this._loglevels=e,this.settings.logger.level=e.join(",")},enumerable:!1,configurable:!0}),Object.defineProperty(AdministrationGeneralSettings.prototype,"maxSize",{get:function(){var e;return null===(e=this.settings.logger.file.maxSize)||void 0===e?void 0:e.replace("MB","")},set:function(e){this.settings.logger.file.maxSize=e+"MB"},enumerable:!1,configurable:!0}),AdministrationGeneralSettings=__decorate([core_1.Component({selector:"administration-general-setting",template:'<div class="slds-p-around--medium slds-theme--shade"><div class="slds-page-header__row"><div class="slds-page-header__col-title"><div class="slds-media"><system-icon icon="settings"></system-icon><div class="slds-media__body"><div class="slds-page-header__name"><div class="slds-page-header__name-title"><h1><span class="slds-page-header__title slds-truncate"><system-label label="LBL_GENERAL_SETTINGS"></system-label></span></h1></div></div><p class="slds-page-header__name-meta"><ng-content></ng-content></p></div></div></div><button class="slds-button slds-button--neutral" (click)="save()"><system-label label="LBL_SAVE"></system-label></button></div></div><div class="slds-theme--default slds-p-around--xx-small"><div class="slds-section slds-is-open"><h3 class="slds-section__title"><button aria-expanded="true" class="slds-button slds-section__title-action"><span class="slds-truncate"><system-label label="LBL_GENERAL_SETTINGS"></system-label></span></button></h3><div class="slds-section__content"><div class="slds-grid slds-m-vertical--xx-small slds-grid--align-spread"><div class="slds-form-element__control slds-size--1-of-1 slds-p-around--x-small"><system-label label="LBL_NAME"></system-label><system-input-text autocomplete="off" [(ngModel)]="settings.system.name"></system-input-text></div></div><div class="slds-grid slds-m-vertical--xx-small slds-grid--align-spread"><div class="slds-form-element__control slds-size--1-of-1 slds-p-around--x-small"><system-label label="LBL_SITE_URL"></system-label><system-input-text autocomplete="off" [(ngModel)]="settings.system.site_url"></system-input-text></div></div><div class="slds-grid slds-m-vertical--xx-small slds-grid--align-spread"><div class="slds-form-element__control slds-size--1-of-1 slds-p-around--x-small"><system-label label="LBL_UNIQUE_KEY"></system-label><system-input-text [disabled]="true" autocomplete="off" [(ngModel)]="settings.system.unique_key"></system-input-text></div></div></div></div><div class="slds-section slds-is-open"><h3 class="slds-section__title"><button aria-expanded="true" class="slds-button slds-section__title-action"><span class="slds-truncate"><system-label label="LBL_ADVANCED_SETTINGS"></system-label></span></button></h3><div class="slds-section__content"><div class="slds-grid slds-m-vertical--xx-small slds-grid--align-spread"><div class="slds-form-element__control slds-size--1-of-6 slds-truncate slds-p-around--x-small"><system-label label="LBL_DEVELOPER_MODE"></system-label><div class="slds-p-vertical--xx-small"><system-checkbox [(ngModel)]="settings.advanced.developerMode"></system-checkbox></div></div><div class="slds-form-element__control slds-size--1-of-6 slds-truncate slds-p-around--x-small"><system-label label="LBL_STACKTRACE"></system-label><div class="slds-p-vertical--xx-small"><system-checkbox [(ngModel)]="settings.advanced.stack_trace_errors"></system-checkbox></div></div><div class="slds-form-element__control slds-size--1-of-6 slds-truncate slds-p-around--x-small"><system-label label="LBL_LOG_SLOW_QUERIES"></system-label><div class="slds-p-vertical--xx-small"><system-checkbox [(ngModel)]="settings.advanced.dump_slow_queries"></system-checkbox></div></div><div class="slds-form-element__control slds-size--1-of-2 slds-p-around--x-small"><system-label label="LBL_SLOW_QUERYTIME_TRESHHOLD"></system-label><system-input-integer [(ngModel)]="settings.advanced.slow_query_time_msec"></system-input-integer></div></div><div class="slds-grid slds-m-vertical--xx-small slds-grid--align-spread"><div class="slds-form-element__control slds-size--1-of-2 slds-p-around--x-small"><system-label label="LBL_MAXIMUM_UPLOAD_SIZE"></system-label><system-input-integer [(ngModel)]="settings.advanced.upload_maxsize"></system-input-integer></div><div class="slds-form-element__control slds-size--1-of-2 slds-p-around--x-small"><system-label label="LBL_EXPORT_LINES"></system-label><system-input-integer [disabled]="true" [(ngModel)]="settings.advanced.maximum_export_lines"></system-input-integer></div></div></div></div><div class="slds-section slds-is-open"><h3 class="slds-section__title"><button aria-expanded="true" class="slds-button slds-section__title-action"><span class="slds-truncate"><system-label label="LBL_LOGGER_SETTINGS"></system-label></span></button></h3><div class="slds-section__content"><div class="slds-grid slds-m-vertical--xx-small"><div class="slds-size--1-of-2"><div><system-label label="LBL_LOGFILE_NAME"></system-label><div class="slds-grid slds-p-around--x-small"><div class="slds-form-element__control slds-size--5-of-6 slds-p-right--x-small"><system-input-text autocomplete="off" [(ngModel)]="settings.logger.file.name"></system-input-text></div><div class="slds-form-element__control slds-size--1-of-6 slds-p-left--x-small"><system-input-text autocomplete="off" [(ngModel)]="settings.logger.file.ext"></system-input-text></div></div></div><div class="slds-grid"><div class="slds-form-element__control slds-size--1-of-2 slds-p-around--x-small"><system-label label="LBL_LOGFILE_MAX_SIZE"></system-label><div class="slds-grid slds-grid--vertical-align-center"><system-input-integer class="slds-grow" autocomplete="off" [(ngModel)]="maxSize"></system-input-integer><div class="slds-p-left--x-small">MB</div></div></div><div class="slds-form-element__control slds-size--1-of-2 slds-p-around--x-small"><system-label label="LBL_LOGFILE_MAX_NUMBER"></system-label><system-input-integer autocomplete="off" [(ngModel)]="settings.logger.file.maxLogs"></system-input-integer></div></div></div><div class="slds-size--1-of-2 slds-grid slds-grid--vertical"><div class="slds-form-element__control slds-size--1-of-1 slds-p-around--x-small"><system-label label="LBL_LOGFILE_LEVEL"></system-label><system-checkbox-group [(ngModel)]="loglevels" class="slds-grid slds-wrap"><system-checkbox-group-checkbox value="debug" class="slds-size--1-of-2 slds-p-vertical--xxx-small"><system-label label="LBL_LOGLEVEL_DEBUG"></system-label></system-checkbox-group-checkbox><system-checkbox-group-checkbox value="info" class="slds-size--1-of-2 slds-p-vertical--xxx-small"><system-label label="LBL_LOGLEVEL_INFO"></system-label></system-checkbox-group-checkbox><system-checkbox-group-checkbox value="error" class="slds-size--1-of-2 slds-p-vertical--xxx-small"><system-label label="LBL_LOGLEVEL_ERROR"></system-label></system-checkbox-group-checkbox><system-checkbox-group-checkbox value="warn" class="slds-size--1-of-2 slds-p-vertical--xxx-small"><system-label label="LBL_LOGLEVEL_WARN"></system-label></system-checkbox-group-checkbox><system-checkbox-group-checkbox value="security" class="slds-size--1-of-2 slds-p-vertical--xxx-small"><system-label label="LBL_LOGLEVEL_SECURITY"></system-label></system-checkbox-group-checkbox><system-checkbox-group-checkbox value="fatal" class="slds-size--1-of-2 slds-p-vertical--xxx-small"><system-label label="LBL_LOGLEVEL_FATAL"></system-label></system-checkbox-group-checkbox></system-checkbox-group></div></div></div></div></div></div>'}),__metadata("design:paramtypes",[services_1.metadata,services_1.language,services_1.backend,services_1.modal,services_1.toast,services_1.currency])],AdministrationGeneralSettings)}();exports.AdministrationGeneralSettings=AdministrationGeneralSettings;var AdministrationLanguages=function(){function e(e,t,s,i,a){this.metadata=e,this.language=t,this.backend=s,this.modal=i,this.toast=a,this.languages=[],this.loading=!0}return e.prototype.ngOnInit=function(){var s=this;this.modal.openModal("SystemLoadingModal").subscribe(function(t){s.backend.getRequest("packages").subscribe(function(e){e.versions?s.languages=e.languages:s.toast.sendToast(s.language.getLabel("LBL_ERROR"),"error"),s.loading=!1,t.instance.self.destroy()})})},e=__decorate([core_1.Component({selector:"administration-languages",template:'<div class="slds-grid slds-grid--align-spread slds-p-around--medium"><h2 class="slds-text-heading--medium">Languages</h2></div><div class="slds-grid slds-wrap"><div *ngFor="let language of languages" class="slds-size--1-of-2 slds-p-around--xx-small"><div class="slds-card"><div class="slds-card__header slds-grid"><header class="slds-media slds-media_center slds-has-flexi-truncate"><system-icon size="small" icon="custom68" sprite="custom" class="slds-p-right--xx-small"></system-icon><div class="slds-media__body"><h2 class="slds-card__header-title"><div class="slds-card__header-link slds-truncate" [title]="language.language_name">{{language.language_name}}</div></h2></div><div class="slds-no-flex"><system-spinner size="12" *ngIf="loading"></system-spinner><div *ngIf="!loading" class="slds-grid slds-grid_vertical-align-center"></div></div></header></div></div></div></div>'}),__metadata("design:paramtypes",[services_1.metadata,services_1.language,services_1.backend,services_1.modal,services_1.toast])],e)}();exports.AdministrationLanguages=AdministrationLanguages;var AdministrationDefaultPreferences=function(){function AdministrationDefaultPreferences(e,t,s,i,a,l){this.backend=e,this.toast=t,this.language=s,this.configuration=i,this.view=a,this.modal=l,this.preferences={}}return AdministrationDefaultPreferences.prototype.ngOnInit=function(){this.loadPreferences()},AdministrationDefaultPreferences.prototype.loadPreferences=function(){var t=this,s=this.modal.await("LBL_LOADING");this.backend.getRequest("configuration/configurator/editor/default_preferences").subscribe(function(e){t.preferences=e,s.emit(),s.complete()})},AdministrationDefaultPreferences.prototype.save=function(){var t=this,s=this.modal.await("LBL_SAVING_DATA");this.backend.postRequest("configuration/configurator/editor/default_preferences",[],{config:this.preferences}).subscribe(function(e){t.configuration.setData("defaultuserpreferences",t.preferences),t.toast.sendToast(t.language.getLabel("LBL_DATA_SAVED"),"success"),t.view.setViewMode(),s.emit(),s.complete()})},AdministrationDefaultPreferences=__decorate([core_1.Component({selector:"administration-default-preferences",template:'<div class="slds-page-header"><div class="slds-page-header__row"><div class="slds-page-header__col-title"><div class="slds-grid slds-grid--vertical-align-center"><div><system-icon icon="custom67" sprite="custom" addclasses="slds-page-header__icon"></system-icon></div><div class="slds-media__body"><div class="slds-page-header__name"><div class="slds-page-header__name-title"><h1><span class="slds-page-header__title slds-truncate" system-title="LBL_DEFAULT_PREFERENCES"><system-label label="LBL_DEFAULT_PREFERENCES"></system-label></span></h1></div></div></div></div></div><div class="slds-grid"><ng-container *ngIf="view.isEditMode(); else editButtonContainer"><button class="slds-button slds-button--neutral slds-m-horizontal--xx-small" (click)="view.setViewMode()"><system-label label="LBL_CANCEL"></system-label></button> <button class="slds-button slds-button--brand" (click)="save()"><system-label label="LBL_SAVE"></system-label></button></ng-container><ng-template #editButtonContainer><button class="slds-button slds-button--neutral" (click)="view.setEditMode()"><system-label label="LBL_EDIT"></system-label></button></ng-template></div></div></div><system-preferences-panel [preferences]="preferences" class="spice-display-block slds-p-around--xx-small"></system-preferences-panel><system-collapsable-tab [collapsible]="false" tabtitle="LBL_HOME_PREFERENCES"><div class="slds-grid"><system-preferences-panel-item class="slds-size--1-of-3" itemlabel="LBL_HOME_ASSISTANT"><system-preferences-panel-item-display>{{preferences.home_assistant}}</system-preferences-panel-item-display><system-preferences-panel-item-edit><div class="slds-select_container"><select class="slds-select" [(ngModel)]="preferences.home_assistant"><option></option><option value="visible"><system-label label="LBL_VISIBLE"></system-label></option><option value="hidden"><system-label label="LBL_HIDDEN"></system-label></option></select></div></system-preferences-panel-item-edit></system-preferences-panel-item></div></system-collapsable-tab>',providers:[services_1.view]}),__metadata("design:paramtypes",[services_1.backend,services_1.toast,services_1.language,services_1.configurationService,services_1.view,services_1.modal])],AdministrationDefaultPreferences)}();exports.AdministrationDefaultPreferences=AdministrationDefaultPreferences;var UserAccessLogViewer=function(){function UserAccessLogViewer(e,t,s){this.backend=e,this.modal=t,this.toast=s,this.limit="250",this.filter="",this.isLoading=!1,this.failedOnly=!1,this.entries=[]}return UserAccessLogViewer.prototype.setNow=function(){this.dateEnd=new moment},UserAccessLogViewer.prototype.loadData=function(){var t=this;if(!this.isLoading){this.isLoading=!0;var e={limit:this.limit};this.filter&&(e.filter=this.filter),this.failedOnly&&(e.failedonly=this.failedOnly),this.dateEnd&&(e.date_end=this.dateEnd.format("YYYY-MM-DD HH:mm:ss")),this.backend.getRequest("admin/useraccesslog",e).subscribe(function(e){t.entries=e,t.isLoading=!1},function(e){t.toast.sendToast("Error loading log data!","error"),t.isLoading=!1})}},UserAccessLogViewer.prototype.loadMore=function(){var t=this;if(!this.isLoading){this.isLoading=!0;var e={limit:this.limit,date_end:this.entries[this.entries.length-1].date_entered};this.filter&&(e.filter=this.filter),this.failedOnly&&(e.failedonly=this.failedOnly),this.backend.getRequest("admin/useraccesslog",e).subscribe(function(e){t.entries=t.entries.concat(e),t.isLoading=!1},function(e){t.toast.sendToast("Error loading log data!","error"),t.isLoading=!1})}},UserAccessLogViewer.prototype.buttonLoad=function(){this.loadData()},UserAccessLogViewer=__decorate([core_1.Component({template:'<div class="slds-p-around--medium slds-theme--shade"><div class="slds-page-header__row"><div class="slds-page-header__col-title"><div class="slds-media"><system-icon icon="lightning_usage"></system-icon><div class="slds-media__body"><div class="slds-page-header__name"><div class="slds-page-header__name-title"><h1><span class="slds-page-header__title slds-truncate"><system-label label="LBL_USERACCESSLOG"></system-label></span></h1></div></div><p class="slds-page-header__name-meta">{{entries.length}} <system-label label="LBL_RECORDS"></system-label></p></div></div></div><button class="slds-button slds-button--neutral" (click)="loadData()"><system-label label="LBL_LOAD"></system-label></button></div></div><div class="slds-section slds-is-open slds-p-around--xx-small"><div class="slds-grid slds-grid--vertical-align-end slds-gutters_direct-xxx-small"><div class="slds-col slds-size--1-of-2"><label class="slds-form-element__label"><system-label label="LBL_FILTER"></system-label></label><div class="slds-grid slds-grid--vertical-align-center"><div class="slds-grow slds-form-element__control slds-input-has-icon slds-input-has-icon_right"><input class="slds-input" type="text" system-trim-input [(ngModel)]="filter"> <button class="slds-button slds-button_icon slds-input__icon slds-input__icon_right" (click)="filter=\'\'"><system-button-icon icon="clear" addclasses="slds-icon-text-light"></system-button-icon></button></div><system-checkbox [(ngModel)]="failedOnly"><system-label label="LBL_FAILEDONLY"></system-label></system-checkbox></div></div><div class="slds-col slds-size--1-of-4"><label class="slds-form-element__label"><system-label label="LBL_END"></system-label></label><div class="slds-grid slds-grid--vertical-align-center"><system-input-date [(ngModel)]="dateEnd" class="slds-grow"></system-input-date><system-input-time [(ngModel)]="dateEnd" class="slds-grow slds-p-horizontal--xx-small"></system-input-time><system-utility-icon system-title="LBL_NOW" icon="clock" size="x-small" (click)="setNow()"></system-utility-icon></div></div><div class="slds-col slds-size--1-of-4"><label class="slds-form-element__label"><system-label label="LBL_ROWS"></system-label></label><div class="slds-select_container"><select class="slds-select" [(ngModel)]="limit"><option>250</option><option>500</option><option>1000</option></select></div></div></div></div><div system-to-bottom class="slds-border--top"><table class="slds-table slds-table--bordered slds-table--fixed-layout slds-table--col-bordered slds-no-row-hover slds-table_header-fixed"><thead><tr><th style="width: 8rem;"><system-label class="slds-th__action" label="LBL_DATE"></system-label></th><th class="slds-resizable"><system-label class="slds-th__action" label="LBL_USER"></system-label></th><th style="width: 8rem"><system-label class="slds-th__action" label="LBL_IP_ADDRESS"></system-label></th><th style="width: 8rem;"><system-label class="slds-th__action" label="LBL_ACTION"></system-label></th></tr></thead><tbody #tbody><tr *ngFor="let entry of entries" [ngClass]="{\'slds-theme--error\' :entry.action==\'loginfail\'}"><td><system-display-datetime [date]="entry.date_entered"></system-display-datetime></td><td><div class="slds-truncate">{{entry.login_name}}</div></td><td><div class="slds-truncate">{{entry.ipaddress}}</div></td><td class="slds-text-align--center">{{entry.action}}</td></tr></tbody></table><div *ngIf="entries.length == 0" class="slds-height_full slds-align--absolute-center"><system-illustration-no-records><system-label label="LBL_NO_RECORDS_FOUND"></system-label></system-illustration-no-records></div><div *ngIf="entries.length > 0" class="slds-p-around--small slds-align--absolute-center"><button class="slds-button slds-button--neutral" (click)="loadMore()"><system-label label="LBL_LOAD_MORE"></system-label></button></div></div>'}),__metadata("design:paramtypes",[services_1.backend,services_1.modal,services_1.toast])],UserAccessLogViewer)}();exports.UserAccessLogViewer=UserAccessLogViewer;var AdminComponentsModule=function(){function AdminComponentsModule(){}return AdminComponentsModule=__decorate([core_1.NgModule({imports:[common_1.CommonModule,forms_1.FormsModule,systemcomponents_1.SystemComponents,directives_1.DirectivesModule,drag_drop_1.DragDropModule],declarations:[AdministrationAPIInspector,AdministrationApiInspectorMethods,AdministrationApiInspectorMethodParameters,AdministrationAPIInspectorDetails,AdministrationapiinspectorMethodResponses,AdministrationApiInspectorMethodTest,AdministrationMain,AdministrationMenu,AdministrationMenuRouteItem,AdministrationConfigurator,AdministrationConfiguratorItem,AdministrationConfiguratorItemRole,AdministrationQuotaManager,AdministrationQuotaManagerField,AdministrationFTSStatus,AdministrationFTSManager,AdministrationFTSManagerModuleAdd,AdministrationFTSManagerFields,AdministrationFTSManagerFieldsList,AdministrationFTSManagerDetails,AdministrationFTSManagerFieldsAdd,AdministrationFTSStats,AdministrationDictionaryManager,AdministrationDictionaryManagerItem,AdministrationDictionaryManagerItemField,AdministrationSysTrashcanManager,AdministrationSysTrashcanRecover,AdministrationDictRepair,AdministrationDictRepairItem,AdministrationDictRepairLanguage,AdministrationDictRepairModal,AdministrationDictRepairACLRoles,AdministrationDictRepairCache,AdministrationDictRepairDbColumns,AdministrationDictRepairDbColumnsModal,AdministrationConfigEditor,AdministrationSchedulerJobsEnum,AdministrationSchedulerJobLog,AdministrationSchedulerRunButton,AdministrationSchedulerScheduleButton,AdministrationSystemStats,AdministrationSystemVersions,AdministrationFtsManagerIndexModal,AdministrationHomeScreen,AdministrationHomeScreenCard,AdministrationHomeScreenCardItem,AdministrationGeneralSettings,AdministrationLanguages,AdministrationDefaultPreferences,UserAccessLogViewer],entryComponents:[AdministrationMain,AdministrationMenu,AdministrationConfigurator,AdministrationQuotaManager,AdministrationQuotaManagerField,AdministrationFTSManager,AdministrationDictionaryManager,AdministrationDictionaryManagerItem,AdministrationDictionaryManagerItemField,AdministrationDefaultPreferences],exports:[]})],AdminComponentsModule)}();exports.AdminComponentsModule=AdminComponentsModule;