/*!
 * 
 *                     aacService
 *
 *                     release: 2023.02.001
 *
 *                     date: 2023-08-15 08:39:15
 *
 *                     build: 2023.02.001.1692081555935
 *
 */
"use strict";(self.webpackChunkcore=self.webpackChunkcore||[]).push([["src_include_spiceimporter_spiceimporter_ts"],{4877:(e,t,s)=>{s.r(t),s.d(t,{SpiceImporterModule:()=>Pe});var i=s(1180),l=s(6550),o=s(5030),r=s(3735),d=s(4826),n=s(6490),p=s(3190),c=s(4357),a=s(2242),m=s(5329),u=s(5710),g=s(4505);let h=(()=>{var e;class SpiceImporterService{constructor(e,t,s){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"fileMapping",{}),(0,i.Z)(this,"fileId",""),(0,i.Z)(this,"fileName",""),(0,i.Z)(this,"fileHeader",[]),(0,i.Z)(this,"checkFields",[]),(0,i.Z)(this,"fixedFields",[]),(0,i.Z)(this,"idfield",""),(0,i.Z)(this,"templateName",void 0),(0,i.Z)(this,"importDuplicateAction","ignore"),(0,i.Z)(this,"importAction","new"),(0,i.Z)(this,"importTemplateAction","none"),(0,i.Z)(this,"idFieldAction","auto"),(0,i.Z)(this,"enclosure","none"),(0,i.Z)(this,"separator","semicolon"),(0,i.Z)(this,"fileTooBig",!1),(0,i.Z)(this,"rejectExistingKey",""),(0,i.Z)(this,"savedImports",[]),(0,i.Z)(this,"fileRows",""),(0,i.Z)(this,"fileData",void 0),(0,i.Z)(this,"currentImportStep",0),(0,i.Z)(this,"result",{}),(0,i.Z)(this,"importStepsText",["LBL_SELECT_UPLOAD_FILE","LBL_MAP_FIELDS","LBL_ADD_FIXED_FIELDS","LBL_DUPLICATE_CHECK","LBL_RESULTS"]),(0,i.Z)(this,"processByMethod",!1),(0,i.Z)(this,"availableClasses",[]),(0,i.Z)(this,"_selectedMethod",void 0),this.language=e,this.model=t,this.backend=s}set selectedMethod(e){this._selectedMethod=e,this.processByMethod=!!e}get selectedMethod(){return this._selectedMethod}get stepLongText(){return this.language.getLabel(this.importStepsText[this.currentImportStep],"","long")}get idField(){return this.idfield}set idField(e){this.fileMapping[e],this.idfield=e}resetSettings(){this.fileMapping={},this.fixedFields=[],this.checkFields=[],this.idField="",this.result={}}addFixed(){this.fixedFields.push({field:void 0})}getFixed(e){let t=this.fixedFields.indexOf(e);return t>-1?this.fixedFields[t].field:""}setFixedField(e,t){this.fixedFields[e].field=t}removeFixed(e){this.fixedFields.splice(e,1)}addCheck(){this.checkFields.push({field:void 0})}getCheckField(e){return this.checkFields[e]&&this.checkFields[e].field?this.checkFields[e].field:""}setCheckField(e,t){this.checkFields[e].field=t}removeCheck(e){this.checkFields.splice(e,1)}getMapping(e){return this.fileMapping&&this.fileMapping[e]?this.fileMapping[e]:""}setMapping(e,t){""!=t?this.fileMapping[e]=t:delete this.fileMapping[e]}setSavedImport(e){this.resetSettings(),this.savedImports.some((t=>{if(t.id===e){for(let e in t.mappings)t.mappings.hasOwnProperty(e)&&-1!=this.fileHeader.indexOf(e)&&(this.fileMapping[e]=t.mappings[e]);return this.fixedFields=t.fixed,this.checkFields=t.checks,!0}}))}loadModuleAvailableMethods(){this.backend.getRequest(`SpiceImports/${this.model.module}/methods`).subscribe((e=>{this.availableClasses=e.map((e=>({id:e,name:e})))}))}}return e=SpiceImporterService,(0,i.Z)(SpiceImporterService,"ɵfac",(function(t){return new(t||e)(a.LFG(m.d),a.LFG(u.o),a.LFG(g.y))})),(0,i.Z)(SpiceImporterService,"ɵprov",a.Yz7({token:e,factory:e.ɵfac})),SpiceImporterService})();var f=s(4154),Z=s(3348),I=s(6559),b=s(3463);let v=(()=>{var e;class SpiceImporterImportButton{constructor(e,t,s,l,o){(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"layout",void 0),this.language=e,this.metadata=t,this.model=s,this.router=l,this.layout=o}execute(){this.router.navigate(["/import/"+this.model.module])}get disabled(){return!this.metadata.checkModuleAcl(this.model.module,"import")||"small"==this.layout.screenwidth}}return e=SpiceImporterImportButton,(0,i.Z)(SpiceImporterImportButton,"ɵfac",(function(t){return new(t||e)(a.Y36(m.d),a.Y36(f.Pu),a.Y36(u.o),a.Y36(Z.F0),a.Y36(I.b))})),(0,i.Z)(SpiceImporterImportButton,"ɵcmp",a.Xpm({type:e,selectors:[["spice-importer-import-button"]],decls:2,vars:0,consts:[["label","LBL_IMPORT"]],template:function(e,t){1&e&&(a.TgZ(0,"span"),a._UZ(1,"system-label",0),a.qZA())},dependencies:[b._],encapsulation:2})),SpiceImporterImportButton})();var x=s(3278),F=s(4755),A=s(6271),M=s(3543),T=s(6041),S=s(4021);const L=function(){return{label:";",value:"semicolon"}},y=function(){return{label:",",value:"comma"}},q=function(e,t){return[e,t]};function C(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"div",40)(1,"fieldset",41)(2,"div",11)(3,"system-input-radio-button-group",42),a.NdJ("ngModelChange",(function(t){a.CHM(e);const s=a.oxw();return a.KtG(s.spiceImport.separator=t)})),a.qZA()(),a.TgZ(4,"legend",9),a._UZ(5,"system-label",43),a.qZA()(),a.TgZ(6,"fieldset",41)(7,"div",11)(8,"system-input-radio-button-group",42),a.NdJ("ngModelChange",(function(t){a.CHM(e);const s=a.oxw();return a.KtG(s.spiceImport.enclosure=t)})),a.qZA()(),a.TgZ(9,"legend",9),a._UZ(10,"system-label",44),a.qZA()()()}if(2&e){const e=a.oxw();a.xp6(3),a.Q6J("ngModel",e.spiceImport.separator)("inputOptions",a.WLB(6,q,a.DdM(4,L),a.DdM(5,y))),a.xp6(5),a.Q6J("ngModel",e.spiceImport.enclosure)("inputOptions",e.enclosureOptions)}}function E(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"span",12)(1,"input",45),a.NdJ("ngModelChange",(function(t){a.CHM(e);const s=a.oxw();return a.KtG(s.importTemplateAction=t)})),a.qZA(),a.TgZ(2,"label",46),a._UZ(3,"span",15),a.TgZ(4,"span",16),a._UZ(5,"system-label",47),a.qZA()()()}if(2&e){const e=a.oxw();a.xp6(1),a.Q6J("ngModel",e.importTemplateAction)}}function k(e,t){if(1&e&&(a.TgZ(0,"option",51),a._uU(1),a.qZA()),2&e){const e=t.$implicit;a.Q6J("value",e.id),a.xp6(1),a.hij(" ",e.name," ")}}function w(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"div",4)(1,"label",16),a._uU(2),a.qZA(),a.TgZ(3,"div",11)(4,"div",48)(5,"select",49),a.NdJ("change",(function(t){a.CHM(e);const s=a.oxw();return a.KtG(s.setSavedImport(t))})),a._UZ(6,"option",50),a.YNc(7,k,2,2,"option",37),a.qZA()()()()}if(2&e){const e=a.oxw();a.xp6(2),a.Oqu(e.language.getLabel("LBL_SELECT_TEMPLATE","","short")),a.xp6(5),a.Q6J("ngForOf",e.spiceImport.savedImports)}}function J(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"div",4)(1,"div",41)(2,"label",16),a._UZ(3,"system-label",52),a.qZA(),a.TgZ(4,"div",11)(5,"input",53),a.NdJ("ngModelChange",(function(t){a.CHM(e);const s=a.oxw();return a.KtG(s.templateName=t)})),a.qZA()()()()}if(2&e){const e=a.oxw();a.xp6(5),a.Q6J("ngModel",e.templateName)}}function U(e,t){if(1&e&&(a.TgZ(0,"option",51),a._uU(1),a.qZA()),2&e){const e=t.$implicit,s=a.oxw();a.Q6J("value",s.selectedClass.name+"->"+e),a.xp6(1),a.Oqu(e)}}function N(e,t){if(1&e&&(a.TgZ(0,"td")(1,"div",63),a._uU(2),a.qZA()()),2&e){const e=t.$implicit,s=a.oxw().index;a.xp6(2),a.Oqu(e[s])}}function O(e,t){if(1&e&&(a.TgZ(0,"tr")(1,"td",62)(2,"div",63),a._uU(3),a.qZA()(),a.YNc(4,N,3,1,"td",61),a.qZA()),2&e){const e=t.$implicit,s=a.oxw(2);a.xp6(3),a.Oqu(e),a.xp6(1),a.Q6J("ngForOf",s.spiceImport.fileData)}}function Q(e,t){if(1&e&&(a.TgZ(0,"table",54)(1,"thead")(2,"tr",55)(3,"th",56)(4,"div",57),a._UZ(5,"system-label",58),a.qZA()(),a.TgZ(6,"th",59)(7,"div",57),a._UZ(8,"system-label",60),a._uU(9),a.qZA()()()(),a.TgZ(10,"tbody"),a.YNc(11,O,5,2,"tr",61),a.qZA()()),2&e){const e=a.oxw();a.xp6(9),a.hij(" (",e.spiceImport.fileRows,") "),a.xp6(2),a.Q6J("ngForOf",e.spiceImport.fileHeader)}}let B=(()=>{var e;class SpiceImporterSelect{constructor(e,t,s,l){(0,i.Z)(this,"spiceImport",void 0),(0,i.Z)(this,"toast",void 0),(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"templateNameSet",new a.vpe),(0,i.Z)(this,"importActionSet",new a.vpe),(0,i.Z)(this,"isLoading",!1),(0,i.Z)(this,"file",null),(0,i.Z)(this,"selectedClassMethods",[]),(0,i.Z)(this,"selectedClass",void 0),(0,i.Z)(this,"enclosureOptions",[{label:"'",value:"single"},{label:" ",value:"none"},{label:'"',value:"double"}]),this.spiceImport=e,this.toast=t,this.backend=s,this.language=l}get templateName(){return this.spiceImport.templateName}set templateName(e){this.spiceImport.templateName=e,this.templateNameSet.emit(e)}get importAction(){return this.spiceImport.importAction}set importAction(e){this.spiceImport.importAction=e,this.importActionSet.emit(e),this.spiceImport.idField="",this.templateName=void 0,this.resetOptions(),this.spiceImport.resetSettings()}get importTemplateAction(){return this.spiceImport.importTemplateAction}set importTemplateAction(e){this.spiceImport.importTemplateAction=e,"choose"!=e&&this.spiceImport.resetSettings()}resetOptions(){this.spiceImport.importDuplicateAction="ignore",this.spiceImport.importTemplateAction="none",this.spiceImport.idFieldAction="auto"}setSavedImport(e){this.spiceImport.setSavedImport(e.target.value)}clearFile(){this.spiceImport.fileName="",this.spiceImport.fileId="",this.spiceImport.fileHeader=[],this.spiceImport.fileData=void 0,this.spiceImport.fileRows="",this.spiceImport.fileTooBig=!1,this.spiceImport.resetSettings()}loadFilePreview(e){let t=e.file_name.toLowerCase();if(this.file=e,!t.endsWith(".csv"))return this.toast.sendToast(this.language.getLabel("MSG_ONLY_CSV_ALLOWED"),"error"),e.remove();this.isLoading=!0,this.spiceImport.fileName=e.file_name,this.spiceImport.fileId=e.file_md5;const s={file_md5:e.file_md5,enclosure:this.spiceImport.enclosure,separator:this.spiceImport.separator};this.backend.getRequest("module/SpiceImports/filepreview",s).subscribe((e=>{this.isLoading=!1,this.spiceImport.fileHeader=e.fileHeader,this.spiceImport.fileData=e.fileData,this.spiceImport.fileRows=e.fileRows,this.spiceImport.fileTooBig=e.fileTooBig,e.fileTooBig&&this.toast.sendToast(this.language.getLabel("MSG_FILE_ROWS_TOO_LARGE"),"warning","",!1)}),(()=>{this.isLoading=!1,this.toast.sendToast(this.language.getLabel("ERR_CANT_READ_FILE_DATA"),"error","",!1),e.remove()}))}getClassMethods(e){this.backend.getRequest("system/checkclass/"+btoa(e)).subscribe((e=>{this.selectedClassMethods=e.methods}))}}return e=SpiceImporterSelect,(0,i.Z)(SpiceImporterSelect,"ɵfac",(function(t){return new(t||e)(a.Y36(h),a.Y36(x.A),a.Y36(g.y),a.Y36(m.d))})),(0,i.Z)(SpiceImporterSelect,"ɵcmp",a.Xpm({type:e,selectors:[["spice-importer-select"]],outputs:{templateNameSet:"templateNameSet",importActionSet:"importActionSet"},decls:56,vars:20,consts:[[1,"slds-grid","slds-wrap","slds-height_full"],[1,"slds-p-horizontal--small","slds-size--1-of-4","slds-border--right","slds-height_full"],[1,"slds-text-body--regular","slds-box","slds-m-top--small","slds-text-color--weak",2,"padding",".25rem"],[1,"slds-form","slds-size--1-of-1"],[1,"slds-form-element","slds-m-vertical--medium"],[1,"slds-form-element__control","slds-grid"],[1,"slds-grow",2,"min-width","0"],["accept",".csv",1,"slds-size--1-of-1",3,"ngModel","ngModelChange","onRemove"],["class","slds-grid slds-m-around--x-small",4,"ngIf"],[1,"slds-form-element__legend","slds-form-element__label"],["label","LBL_IMPORT_ACTION"],[1,"slds-form-element__control"],[1,"slds-radio"],["type","radio","id","importactionnew","name","options","value","new",3,"ngModel","ngModelChange"],["for","importactionnew",1,"slds-radio__label"],[1,"slds-radio--faux"],[1,"slds-form-element__label"],["label","LBL_LOAD_NEW_RECORDS"],["type","radio","id","importactionupdate","name","options","value","update",3,"ngModel","ngModelChange"],["for","importactionupdate",1,"slds-radio__label"],["label","LBL_UPDATE_EXISTING_RECORDS"],[1,"slds-form-element","slds-m-vertical--medium",3,"hidden"],["label","LBL_IMPORT_TEMPLATE"],["type","radio","id","importtemplatenone","value","none","name","template",3,"ngModel","ngModelChange"],["for","importtemplatenone",1,"slds-radio__label"],["class","slds-radio",4,"ngIf"],["type","radio","id","importtemplatesave","value","new","name","template",3,"ngModel","ngModelChange"],["for","importtemplatesave",1,"slds-radio__label"],["label","LBL_SAVE_AS"],["class","slds-form-element slds-m-vertical--medium",4,"ngIf"],[1,"slds-grid","slds-p-around--xx-small"],[1,"slds-form-element","slds-p-horizontal--xx-small","slds-size--1-of-1"],["label","LBL_METHOD"],[1,"slds-grid","slds-grid--vertical-align-center","slds-gutters_direct-xx-small"],[1,"slds-grow",3,"selectList","ngModel","ngModelChange"],[1,"slds-col","slds-size--1-of-3","slds-select_container"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"slds-size--3-of-4","slds-height_full",3,"system-overlay-loading-spinner"],["class","slds-table slds-table--bordered slds-table--cell-buffer",4,"ngIf"],[1,"slds-grid","slds-m-around--x-small"],[1,"slds-form-element"],[3,"ngModel","inputOptions","ngModelChange"],["label","LBL_SEPARATOR"],["label","LBL_ENCLOSURE"],["type","radio","id","importtemplatechoose","value","choose","name","template",3,"ngModel","ngModelChange"],["for","importtemplatechoose",1,"slds-radio__label"],["label","LBL_SELECT"],[1,"slds-select_container"],[1,"slds-select",3,"change"],["value",""],[3,"value"],["label","LBL_TEMPLATE_NAME"],["type","text",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-table","slds-table--bordered","slds-table--cell-buffer"],[1,"slds-text-title--caps","slds-p-vertical--small"],["scope","col"],[1,"slds-truncate","slds-p-vertical--xx-small",2,"font-weight","600"],["label","LBL_HEADER"],["colspan","2","scope","col"],["label","LBL_RECORDS"],[4,"ngFor","ngForOf"],["scope","row"],[1,"slds-truncate"]],template:function(e,t){1&e&&(a.TgZ(0,"div",0)(1,"div",1)(2,"div",2),a._uU(3),a.qZA(),a.TgZ(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"system-input-file",7),a.NdJ("ngModelChange",(function(e){return t.loadFilePreview(e)}))("onRemove",(function(){return t.clearFile()})),a.qZA()(),a.YNc(9,C,11,9,"div",8),a.qZA()(),a.TgZ(10,"div",4)(11,"legend",9),a._UZ(12,"system-label",10),a.qZA(),a.TgZ(13,"div",11)(14,"span",12)(15,"input",13),a.NdJ("ngModelChange",(function(e){return t.importAction=e})),a.qZA(),a.TgZ(16,"label",14),a._UZ(17,"span",15),a.TgZ(18,"span",16),a._UZ(19,"system-label",17),a.qZA()()(),a.TgZ(20,"span",12)(21,"input",18),a.NdJ("ngModelChange",(function(e){return t.importAction=e})),a.qZA(),a.TgZ(22,"label",19),a._UZ(23,"span",15),a.TgZ(24,"span",16),a._UZ(25,"system-label",20),a.qZA()()()()(),a.TgZ(26,"div",21)(27,"legend",9),a._UZ(28,"system-label",22),a.qZA(),a.TgZ(29,"div",11)(30,"span",12)(31,"input",23),a.NdJ("ngModelChange",(function(e){return t.importTemplateAction=e})),a.qZA(),a.TgZ(32,"label",24),a._UZ(33,"span",15),a.TgZ(34,"span",16),a._uU(35,"none"),a.qZA()()(),a.YNc(36,E,6,1,"span",25),a.TgZ(37,"span",12)(38,"input",26),a.NdJ("ngModelChange",(function(e){return t.importTemplateAction=e})),a.qZA(),a.TgZ(39,"label",27),a._UZ(40,"span",15),a.TgZ(41,"span",16),a._UZ(42,"system-label",28),a.qZA()()()()(),a.YNc(43,w,8,2,"div",29),a.YNc(44,J,6,1,"div",29),a.qZA(),a.TgZ(45,"div",30)(46,"div",31)(47,"label",16),a._UZ(48,"system-label",32),a.qZA(),a.TgZ(49,"div",33)(50,"system-select",34),a.NdJ("ngModelChange",(function(e){return t.selectedClass=e}))("ngModelChange",(function(e){return t.getClassMethods(e.name)})),a.qZA(),a.TgZ(51,"div",35)(52,"select",36),a.NdJ("ngModelChange",(function(e){return t.spiceImport.selectedMethod=e})),a.YNc(53,U,2,2,"option",37),a.qZA()()()()()(),a.TgZ(54,"div",38),a.YNc(55,Q,12,2,"table",39),a.qZA()()),2&e&&(a.xp6(3),a.hij(" ",t.spiceImport.stepLongText," "),a.xp6(5),a.Q6J("ngModel",t.file),a.xp6(1),a.Q6J("ngIf",!t.spiceImport.fileData),a.xp6(6),a.Q6J("ngModel",t.importAction),a.xp6(6),a.Q6J("ngModel",t.importAction),a.xp6(5),a.Q6J("hidden",!t.spiceImport.fileId),a.xp6(5),a.Q6J("ngModel",t.importTemplateAction),a.xp6(5),a.Q6J("ngIf",(null==t.spiceImport.savedImports?null:t.spiceImport.savedImports.length)>0),a.xp6(2),a.Q6J("ngModel",t.importTemplateAction),a.xp6(5),a.Q6J("ngIf","choose"==t.importTemplateAction&&t.spiceImport.fileId),a.xp6(1),a.Q6J("ngIf","new"==t.importTemplateAction),a.xp6(1),a.ekj("slds-hide",!t.spiceImport.fileId),a.xp6(5),a.Q6J("selectList",t.spiceImport.availableClasses)("ngModel",t.selectedClass),a.xp6(2),a.Q6J("disabled",0==t.spiceImport.availableClasses.length)("ngModel",t.spiceImport.selectedMethod),a.xp6(1),a.Q6J("ngForOf",t.selectedClassMethods),a.xp6(1),a.Q6J("system-overlay-loading-spinner",t.isLoading),a.xp6(1),a.Q6J("ngIf",t.spiceImport.fileHeader.length>0))},dependencies:[F.sg,F.O5,o.YN,o.Kr,o.Fj,o.EJ,o._,o.JJ,o.On,A.p,b._,M.R,T.K,S._],encapsulation:2})),SpiceImporterSelect})();var D=s(2656);const R=function(e,t){return{"slds-text-color_success":e,"slds-text-color--error":t}};function Y(e,t){if(1&e&&(a.TgZ(0,"div",24)(1,"span",25),a._uU(2),a.qZA(),a.TgZ(3,"span",26),a._UZ(4,"system-button-icon",27),a.qZA()()),2&e){const e=t.$implicit,s=a.oxw(2);a.xp6(2),a.hij(" ",e.displayname," "),a.xp6(2),a.Q6J("ngClass",a.WLB(3,R,s.checkRequired(e.name),!s.checkRequired(e.name)))("icon",s.checkRequired(e.name)?"success":"record")}}function j(e,t){if(1&e&&(a.TgZ(0,"div")(1,"legend",6),a._UZ(2,"system-label",21),a.qZA(),a.TgZ(3,"div",22),a.YNc(4,Y,5,6,"div",23),a.qZA()()),2&e){const e=a.oxw();a.xp6(4),a.Q6J("ngForOf",e.requiredModelFields)("ngForTrackBy",e.trackByFn)}}function P(e,t){if(1&e&&(a.TgZ(0,"option",35),a._uU(1),a.qZA()),2&e){const e=t.$implicit;a.Q6J("value",e),a.xp6(1),a.Oqu(e)}}function K(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"div",28)(1,"label",29),a._UZ(2,"system-label",30),a.qZA(),a.TgZ(3,"div",8)(4,"div",31)(5,"select",32),a.NdJ("ngModelChange",(function(t){a.CHM(e);const s=a.oxw();return a.KtG(s.spiceImport.idField=t)})),a._UZ(6,"option",33),a.YNc(7,P,2,2,"option",34),a.qZA()()()()}if(2&e){const e=a.oxw();a.xp6(5),a.Q6J("ngModel",e.spiceImport.idField),a.xp6(2),a.Q6J("ngForOf",e.spiceImport.fileHeader)("ngForTrackBy",e.trackByFn)}}function G(e,t){1&e&&a._UZ(0,"system-button-icon",51),2&e&&a.Q6J("icon","lock")}function H(e,t){if(1&e&&(a.ynx(0),a.TgZ(1,"option",52),a._uU(2),a.qZA(),a.BQk()),2&e){const e=t.$implicit,s=a.oxw(3);a.xp6(1),a.Q6J("disabled",s.isChosen(e.name))("value",e.name),a.xp6(1),a.hij(" ",e.displayname," ")}}function z(e,t){if(1&e&&(a.TgZ(0,"td")(1,"div",25),a._uU(2),a.qZA()()),2&e){const e=t.$implicit,s=a.oxw().index;a.xp6(2),a.Oqu(e[s])}}function $(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"tr")(1,"td",46)(2,"div",47),a.YNc(3,G,1,1,"system-button-icon",48),a.qZA()(),a.TgZ(4,"td",49)(5,"div",25),a._uU(6),a.qZA()(),a.TgZ(7,"td")(8,"div",25)(9,"div",8)(10,"div",31)(11,"select",50),a.NdJ("change",(function(t){const s=a.CHM(e).$implicit,i=a.oxw(2);return a.KtG(i.setMapping(s,t))})),a._UZ(12,"option",33),a.YNc(13,H,3,3,"ng-container",45),a.qZA()()()()(),a.YNc(14,z,3,1,"td",45),a.qZA()}if(2&e){const e=t.$implicit,s=a.oxw(2);a.xp6(3),a.Q6J("ngIf",s.spiceImport.idField==e),a.xp6(3),a.Oqu(e),a.xp6(5),a.Q6J("disabled",s.spiceImport.idField==e)("value",s.spiceImport.idField==e?e:s.getMapping(e)),a.xp6(2),a.Q6J("ngForOf",s.modelFields)("ngForTrackBy",s.trackByFn),a.xp6(1),a.Q6J("ngForOf",s.spiceImport.fileData)("ngForTrackBy",s.trackByFn)}}function X(e,t){if(1&e&&(a.TgZ(0,"table",36)(1,"thead")(2,"tr",37)(3,"th",38)(4,"div",39),a._UZ(5,"system-label",40),a.qZA()(),a.TgZ(6,"th",41)(7,"div",39),a._uU(8),a._UZ(9,"system-label",42),a.qZA()(),a.TgZ(10,"th",43)(11,"div",39),a._UZ(12,"system-label",44),a._uU(13),a.qZA()()()(),a.TgZ(14,"tbody"),a.YNc(15,$,15,8,"tr",45),a.qZA()()),2&e){const e=a.oxw();a.xp6(8),a.hij("",e.model.module," "),a.xp6(5),a.hij(" (",e.spiceImport.fileRows,") "),a.xp6(2),a.Q6J("ngForOf",e.spiceImport.fileHeader)("ngForTrackBy",e.trackByFn)}}let V=(()=>{var e;class SpiceImporterMap{constructor(e,t){(0,i.Z)(this,"spiceImport",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"modelFields",void 0),(0,i.Z)(this,"requiredModelFields",void 0),this.spiceImport=e,this.model=t}get idFieldAction(){return this.spiceImport.idFieldAction}set idFieldAction(e){this.spiceImport.idFieldAction=e,"auto"==e&&(this.spiceImport.idField="")}get description(){return this.spiceImport.stepLongText}getMapping(e){return this.spiceImport.getMapping(e)}setMapping(e,t){this.spiceImport.setMapping(e,t.target.value)}checkRequired(e){let t=_.invert(this.spiceImport.fileMapping).hasOwnProperty(e),s=this.spiceImport.fixedFields.some((t=>t.field==e));return t||s}isChosen(e){return!!_.invert(this.spiceImport.fileMapping)[e]}trackByFn(e,t){return e}}return e=SpiceImporterMap,(0,i.Z)(SpiceImporterMap,"ɵfac",(function(t){return new(t||e)(a.Y36(h),a.Y36(u.o))})),(0,i.Z)(SpiceImporterMap,"ɵcmp",a.Xpm({type:e,selectors:[["spice-importer-map"]],inputs:{modelFields:["modelfields","modelFields"],requiredModelFields:["requiredmodelfields","requiredModelFields"]},decls:25,vars:6,consts:[[1,"slds-grid","slds-wrap","slds-height_full"],[1,"slds-p-horizontal--small","slds-size--1-of-4","slds-border--right","slds-height_full"],[1,"slds-text-body--regular","slds-box","slds-m-vertical--small","slds-text-color--weak",2,"padding",".25rem"],[4,"ngIf"],[1,"slds-m-vertical--x-small"],[1,"slds-form-element","slds-m-top--small"],[1,"slds-form-element__legend","slds-form-element__label"],["label","LBL_UNIQUE_FIELD"],[1,"slds-form-element__control"],[1,"slds-radio"],["type","radio","id","idFieldAuto","name","idFieldOptions","value","auto",3,"ngModel","ngModelChange"],["for","idFieldAuto",1,"slds-radio__label"],[1,"slds-radio_faux"],[1,"slds-form-element__label"],["label","LBL_HAVE_NO_ID"],["type","radio","id","idFieldHave","name","idFieldOptions","value","have",3,"ngModel","ngModelChange"],["for","idFieldHave",1,"slds-radio__label"],["label","LBL_ALREAD_HAVE_ID"],["class","slds-form-element  slds-m-vertical--small",4,"ngIf"],[1,"slds-size--3-of-4","slds-height_full"],["class","slds-table slds-table--bordered slds-table--cell-buffer",4,"ngIf"],["label","MSG_REQUIRED_MAPPED_FIXED"],[1,"slds-tile__detail","slds-text-body--small","slds-p-horizontal--small"],["class","slds-grid",4,"ngFor","ngForOf","ngForTrackBy"],[1,"slds-grid"],[1,"slds-truncate"],[1,"slds-col--bump-left","slds-truncate"],[3,"ngClass","icon"],[1,"slds-form-element","slds-m-vertical--small"],["for","idFieldSelect",1,"slds-form-element__label"],["label","LBL_SELECT_ID_FIELD"],[1,"slds-select_container"],["id","idFieldSelect",1,"slds-select",3,"ngModel","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf","ngForTrackBy"],[3,"value"],[1,"slds-table","slds-table--bordered","slds-table--cell-buffer"],[1,"slds-text-title--caps"],["scope","col","colspan","2"],[1,"slds-truncate","slds-p-vertical--xx-small",2,"font-weight","600"],["label","LBL_HEADER"],["scope","col"],["label","LBL_FIELDS"],["colspan","2","scope","col"],["label","LBL_RECORDS"],[4,"ngFor","ngForOf","ngForTrackBy"],["scope","row","width","22px",1,"slds-p-right--none","slds-p-left--none","slds-text-align_center"],[1,"slds-text-align_center","slds-p-around--xx-small"],["size","small",3,"icon",4,"ngIf"],["scope","row"],[1,"slds-select",3,"disabled","value","change"],["size","small",3,"icon"],[3,"disabled","value"]],template:function(e,t){1&e&&(a.TgZ(0,"div",0)(1,"div",1)(2,"div",2),a._uU(3),a.qZA(),a.YNc(4,j,5,2,"div",3),a.TgZ(5,"div",4)(6,"fieldset",5)(7,"legend",6),a._UZ(8,"system-label",7),a.qZA(),a.TgZ(9,"div",8)(10,"span",9)(11,"input",10),a.NdJ("ngModelChange",(function(e){return t.idFieldAction=e})),a.qZA(),a.TgZ(12,"label",11),a._UZ(13,"span",12),a.TgZ(14,"span",13),a._UZ(15,"system-label",14),a.qZA()()(),a.TgZ(16,"span",9)(17,"input",15),a.NdJ("ngModelChange",(function(e){return t.idFieldAction=e})),a.qZA(),a.TgZ(18,"label",16),a._UZ(19,"span",12),a.TgZ(20,"span",13),a._UZ(21,"system-label",17),a.qZA()()()()(),a.YNc(22,K,8,3,"div",18),a.qZA()(),a.TgZ(23,"div",19),a.YNc(24,X,16,4,"table",20),a.qZA()()),2&e&&(a.xp6(3),a.hij(" ",t.spiceImport.stepLongText," "),a.xp6(1),a.Q6J("ngIf",t.modelFields&&"new"==t.spiceImport.importAction),a.xp6(7),a.Q6J("ngModel",t.idFieldAction),a.xp6(6),a.Q6J("ngModel",t.idFieldAction),a.xp6(5),a.Q6J("ngIf","have"==t.idFieldAction),a.xp6(2),a.Q6J("ngIf",t.spiceImport.fileHeader.length>0))},dependencies:[F.mk,F.sg,F.O5,o.YN,o.Kr,o.Fj,o.EJ,o._,o.JJ,o.On,D.J,b._],encapsulation:2})),SpiceImporterMap})();var W=s(2294),ee=s(3634);const te=function(e,t){return{"slds-text-color_success":e,"slds-text-color--error":t}};function se(e,t){if(1&e&&(a.TgZ(0,"div",13)(1,"span",14),a._uU(2),a.qZA(),a.TgZ(3,"span",15),a._UZ(4,"system-button-icon",16),a.qZA()()),2&e){const e=t.$implicit,s=a.oxw(2);a.xp6(2),a.hij(" ",e.displayname," "),a.xp6(2),a.Q6J("ngClass",a.WLB(3,te,s.checkRequired(e.name),!s.checkRequired(e.name)))("icon",s.checkRequired(e.name)?"success":"record")}}function ie(e,t){if(1&e&&(a.TgZ(0,"div")(1,"legend",9),a._UZ(2,"system-label",10),a.qZA(),a.TgZ(3,"div",11),a.YNc(4,se,5,6,"div",12),a.qZA()()),2&e){const e=a.oxw();a.xp6(4),a.Q6J("ngForOf",e.requiredModelFields)}}function le(e,t){if(1&e&&(a.TgZ(0,"option",32),a._uU(1),a.qZA()),2&e){const e=t.$implicit,s=a.oxw(3);a.Q6J("disabled",s.isChosen(e.name))("value",e.name),a.xp6(1),a.hij("",e.displayname," ")}}function oe(e,t){if(1&e&&(a.TgZ(0,"div",25),a._UZ(1,"field-container",33),a.qZA()),2&e){const e=a.oxw().$implicit;a.xp6(1),a.Q6J("field",e.field)}}function re(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"tr")(1,"td")(2,"div",14)(3,"div",25)(4,"div")(5,"select",26),a.NdJ("change",(function(t){const s=a.CHM(e).index,i=a.oxw(2);return a.KtG(i.setFixedField(s,t.srcElement.value))})),a._UZ(6,"option",27),a.YNc(7,le,2,3,"option",28),a.qZA()()()()(),a.TgZ(8,"td")(9,"div",14),a.YNc(10,oe,2,1,"div",29),a.qZA()(),a.TgZ(11,"td")(12,"button",30),a.NdJ("click",(function(){const t=a.CHM(e).index,s=a.oxw(2);return a.KtG(s.removeFixed(t))})),a._UZ(13,"system-button-icon",31),a.qZA()()()}if(2&e){const e=t.$implicit,s=a.oxw(2);a.xp6(5),a.Q6J("disabled",s.getFixed(e))("value",s.getFixed(e)),a.xp6(2),a.Q6J("ngForOf",s.filteredModuleFileds),a.xp6(3),a.Q6J("ngIf",e.field),a.xp6(3),a.Q6J("icon","clear")("size","large")}}function de(e,t){if(1&e&&(a.TgZ(0,"table",17)(1,"thead")(2,"tr",18)(3,"th",19)(4,"div",20),a._UZ(5,"system-label",21),a.qZA()(),a.TgZ(6,"th",19)(7,"div",20),a._UZ(8,"system-label",22),a.qZA()(),a._UZ(9,"th",23),a.qZA()(),a.TgZ(10,"tbody"),a.YNc(11,re,14,6,"tr",24),a.qZA()()),2&e){const e=a.oxw();a.xp6(11),a.Q6J("ngForOf",e.spiceImport.fixedFields)}}let ne=(()=>{var e;class SpiceImporterFixed{constructor(e,t,s){(0,i.Z)(this,"spiceImport",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"view",void 0),(0,i.Z)(this,"requiredModelFields",void 0),(0,i.Z)(this,"filteredModuleFileds",void 0),(0,i.Z)(this,"modelfields",void 0),this.spiceImport=e,this.model=t,this.view=s,this.view.isEditable=!0,this.view.setEditMode(),this.view.displayLabels=!1}set currentImportStep(e){2==e&&this.getFilteredModuleFields()}get modelFields(){return this.modelfields}set modelFields(e){this.modelfields=e,this.filteredModuleFileds=e}getFilteredModuleFields(){let e=_.invert(this.spiceImport.fileMapping);this.filteredModuleFileds=this.modelFields.filter((t=>!e.hasOwnProperty(t.name)))}setFixedField(e,t){this.spiceImport.setFixedField(e,t)}getFixed(e){return this.spiceImport.getFixed(e)}removeFixed(e){this.model.setData(_.omit(this.model.data,this.spiceImport.fixedFields[e].field)),this.spiceImport.removeFixed(e)}checkRequired(e){let t=_.invert(this.spiceImport.fileMapping).hasOwnProperty(e),s=this.spiceImport.fixedFields.some((t=>t.field==e));return t||s}isChosen(e){return!!_.invert(this.spiceImport.fileMapping)[e]}}return e=SpiceImporterFixed,(0,i.Z)(SpiceImporterFixed,"ɵfac",(function(t){return new(t||e)(a.Y36(h),a.Y36(u.o),a.Y36(W.e))})),(0,i.Z)(SpiceImporterFixed,"ɵcmp",a.Xpm({type:e,selectors:[["spice-importer-fixed"]],inputs:{requiredModelFields:["requiredmodelfields","requiredModelFields"],currentImportStep:["currentimportstep","currentImportStep"],modelFields:["modelfields","modelFields"]},features:[a._Bn([W.e])],decls:10,vars:3,consts:[[1,"slds-grid","slds-wrap","slds-height_full"],[1,"slds-p-horizontal--small","slds-size--1-of-4","slds-border--right","slds-height_full"],[1,"slds-text-body--regular","slds-box","slds-m-vertical--small","slds-text-color--weak",2,"padding",".25rem"],[4,"ngIf"],[1,"slds-size--3-of-4","slds-height_full"],["class","slds-table slds-table--bordered slds-table--cell-buffer",4,"ngIf"],[1,"slds-grid","slds-grid--align-center","slds-p-vertical--xx-small"],["type","button",1,"slds-button","slds-button--brand",3,"click"],["label","LBL_ADD_FIXED_FIELDS","length","short"],[1,"slds-form-element__legend","slds-form-element__label"],["label","MSG_REQUIRED_MAPPED_FIXED"],[1,"slds-tile__detail","slds-text-body--small","slds-p-horizontal--small"],["class","slds-grid",4,"ngFor","ngForOf"],[1,"slds-grid"],[1,"slds-truncate"],[1,"slds-col--bump-left","slds-truncate"],[3,"ngClass","icon"],[1,"slds-table","slds-table--bordered","slds-table--cell-buffer"],[1,"slds-text-title--caps"],["scope","col","width","50%"],[1,"slds-truncate","slds-p-vertical--xx-small",2,"font-weight","600"],["label","LBL_FIELD"],["label","LBL_VALUE"],["scope","col"],[4,"ngFor","ngForOf"],[1,"slds-form-element__control"],[1,"slds-select",3,"disabled","value","change"],["value",""],[3,"disabled","value",4,"ngFor","ngForOf"],["class","slds-form-element__control",4,"ngIf"],[1,"slds-button","slds-button--icon",3,"click"],[3,"icon","size"],[3,"disabled","value"],[3,"field"]],template:function(e,t){1&e&&(a.TgZ(0,"div",0)(1,"div",1)(2,"div",2),a._uU(3),a.qZA(),a.YNc(4,ie,5,1,"div",3),a.qZA(),a.TgZ(5,"div",4),a.YNc(6,de,12,1,"table",5),a.TgZ(7,"div",6)(8,"button",7),a.NdJ("click",(function(){return t.spiceImport.addFixed()})),a._UZ(9,"system-label",8),a.qZA()()()()),2&e&&(a.xp6(3),a.hij(" ",t.spiceImport.stepLongText," "),a.xp6(1),a.Q6J("ngIf",t.modelFields&&"new"==t.spiceImport.importAction),a.xp6(2),a.Q6J("ngIf",t.spiceImport.fileHeader.length>0))},dependencies:[F.mk,F.sg,F.O5,o.YN,o.Kr,D.J,b._,ee.j],encapsulation:2})),SpiceImporterFixed})();var pe=s(7674);function ce(e,t){if(1&e&&(a.TgZ(0,"option",31),a._uU(1),a.qZA()),2&e){const e=t.$implicit;a.Q6J("value",e),a.xp6(1),a.Oqu(e)}}function ae(e,t){if(1&e&&(a.TgZ(0,"option",31),a._UZ(1,"system-label-fieldname",35),a.qZA()),2&e){const e=t.$implicit;a.s9C("value",e.value.name),a.xp6(1),a.Q6J("field",e.value.name)}}function me(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"div",32)(1,"label",24),a._UZ(2,"system-label",33),a.qZA(),a.TgZ(3,"div",7)(4,"div",26)(5,"select",34),a.NdJ("ngModelChange",(function(t){a.CHM(e);const s=a.oxw(2);return a.KtG(s.moduleRejectExistingKey=t)}))("ngModelChange",(function(t){a.CHM(e);const s=a.oxw(2);return a.KtG(s.setModuleRejectExistingKey(t))})),a._UZ(6,"option",28),a.YNc(7,ae,2,2,"option",29),a.ALo(8,"keyvalue"),a.qZA()()()()}if(2&e){const e=a.oxw(2);a.xp6(5),a.Q6J("ngModel",e.moduleRejectExistingKey),a.xp6(2),a.Q6J("ngForOf",a.lcZ(8,2,e.modelfields))}}function ue(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"div",22)(1,"div",23)(2,"label",24),a._UZ(3,"system-label",25),a.qZA(),a.TgZ(4,"div",7)(5,"div",26)(6,"select",27),a.NdJ("ngModelChange",(function(t){a.CHM(e);const s=a.oxw();return a.KtG(s.csvRejectExistingKey=t)}))("ngModelChange",(function(t){a.CHM(e);const s=a.oxw();return a.KtG(s.setCSVRejectExistingKey(t))})),a._UZ(7,"option",28),a.YNc(8,ce,2,2,"option",29),a.qZA()()()(),a.YNc(9,me,9,4,"div",30),a.qZA()}if(2&e){const e=a.oxw();a.xp6(6),a.Q6J("ngModel",e.csvRejectExistingKey),a.xp6(2),a.Q6J("ngForOf",e.spiceImporter.fileHeader),a.xp6(1),a.Q6J("ngIf",e.showModuleFieldDropdown)}}let ge=(()=>{var e;class SpiceImporterCheck{constructor(e,t,s){(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"spiceImporter",void 0),(0,i.Z)(this,"currentImportStep",void 0),(0,i.Z)(this,"showModuleFieldDropdown",!1),(0,i.Z)(this,"modelfields",[]),(0,i.Z)(this,"csvRejectExistingKey",void 0),(0,i.Z)(this,"moduleRejectExistingKey",void 0),this.metadata=e,this.model=t,this.spiceImporter=s;const l=this.metadata.getModuleFields(this.model._module);for(let e in l)"non-db"==l[e].source&&"name"!=l[e].type&&"vchar"!=l[e].type&&"char"!=l[e].type&&"id"!=l[e].type||this.modelfields.push({name:l[e].name,vname:l[e].vname})}get fileMapping(){return this.spiceImporter.fileMapping}get importDuplicateAction(){return this.spiceImporter.importDuplicateAction}set importDuplicateAction(e){this.spiceImporter.importDuplicateAction=e,this.setCheckFields(e)}setCSVRejectExistingKey(e){this.spiceImporter.rejectExistingKey=e+"::",this.spiceImporter.fileMapping[e]?this.spiceImporter.rejectExistingKey+=this.spiceImporter.fileMapping[e]:this.showModuleFieldDropdown=!0}setModuleRejectExistingKey(e){const t=this.spiceImporter.rejectExistingKey.split("::");t[1]=e,this.spiceImporter.rejectExistingKey=t.join("::")}setCheckFields(e){if("log"==e){this.spiceImporter.checkFields=[];for(let e in this.fileMapping)this.fileMapping.hasOwnProperty(e)&&this.spiceImporter.checkFields.push({mappedField:e,moduleField:this.fileMapping[e]})}else this.spiceImporter.checkFields=[]}trackByFn(e,t){return e}}return e=SpiceImporterCheck,(0,i.Z)(SpiceImporterCheck,"ɵfac",(function(t){return new(t||e)(a.Y36(f.Pu),a.Y36(u.o),a.Y36(h))})),(0,i.Z)(SpiceImporterCheck,"ɵcmp",a.Xpm({type:e,selectors:[["spice-importer-check"]],inputs:{currentImportStep:"currentImportStep"},decls:29,vars:5,consts:[[1,"slds-grid","slds-wrap","slds-height_full"],[1,"slds-p-horizontal--small","slds-size--1-of-4","slds-border--right","slds-height_full"],[1,"slds-text-body--regular","slds-box","slds-m-top--small","slds-text-color--weak",2,"padding",".25rem"],[1,"slds-form","slds-m-around--medium"],[1,"slds-form-element","slds-m-vertical--medium"],[1,"slds-form-element__legend","slds-form-element__label"],["label","LBL_DUPLICATE_ACTION"],[1,"slds-form-element__control"],[1,"slds-radio"],["type","radio","id","importduplicateactionignore","name","duplicateoptions","value","ignore",3,"ngModel","ngModelChange"],["for","importduplicateactionignore",1,"slds-radio__label"],[1,"slds-radio--faux"],[1,"slds-form-element__label"],["label","LBL_IGNORE_DUPLICATE"],["type","radio","id","importduplicateactionlog","name","duplicateoptions","value","log",3,"ngModel","ngModelChange"],["for","importduplicateactionlog",1,"slds-radio__label"],["label","LBL_LOG_DUPLICATES"],["type","radio","id","importduplicateactionreject","name","duplicateoptions","value","reject_existing",3,"ngModel","ngModelChange"],["for","importduplicateactionreject",1,"slds-radio__label"],["label","LBL_REJECT_EXISTING"],["class","slds-grid",4,"ngIf"],[1,"slds-p-horizontal--small","slds-size--3-of-4","slds-height_full"],[1,"slds-grid"],[1,"slds-form-element","slds-m-vertical--small"],["for","idFieldSelectId",1,"slds-form-element__label"],["label","LBL_SELECT_CSV_ID_FIELD"],[1,"slds-select_container"],["id","idFieldSelectId",1,"slds-select",3,"ngModel","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],["class","slds-form-element  slds-m-vertical--small slds-m-left--x-small",4,"ngIf"],[3,"value"],[1,"slds-form-element","slds-m-vertical--small","slds-m-left--x-small"],["label","LBL_SELECT_KEY"],[1,"slds-select",3,"ngModel","ngModelChange"],[3,"field"]],template:function(e,t){1&e&&(a.TgZ(0,"div",0)(1,"div",1)(2,"div",2),a._uU(3),a.qZA(),a.TgZ(4,"div",3)(5,"div",4)(6,"legend",5),a._UZ(7,"system-label",6),a.qZA(),a.TgZ(8,"div",7)(9,"span",8)(10,"input",9),a.NdJ("ngModelChange",(function(e){return t.importDuplicateAction=e})),a.qZA(),a.TgZ(11,"label",10),a._UZ(12,"span",11),a.TgZ(13,"span",12),a._UZ(14,"system-label",13),a.qZA()()(),a.TgZ(15,"span",8)(16,"input",14),a.NdJ("ngModelChange",(function(e){return t.importDuplicateAction=e})),a.qZA(),a.TgZ(17,"label",15),a._UZ(18,"span",11),a.TgZ(19,"span",12),a._UZ(20,"system-label",16),a.qZA()()(),a.TgZ(21,"span",8)(22,"input",17),a.NdJ("ngModelChange",(function(e){return t.importDuplicateAction=e})),a.qZA(),a.TgZ(23,"label",18),a._UZ(24,"span",11),a.TgZ(25,"span",12),a._UZ(26,"system-label",19),a.qZA()()(),a.YNc(27,ue,10,3,"div",20),a.qZA()()()(),a._UZ(28,"div",21),a.qZA()),2&e&&(a.xp6(3),a.hij(" ",t.spiceImporter.stepLongText," "),a.xp6(7),a.Q6J("ngModel",t.importDuplicateAction),a.xp6(6),a.Q6J("ngModel",t.importDuplicateAction),a.xp6(6),a.Q6J("ngModel",t.importDuplicateAction),a.xp6(5),a.Q6J("ngIf","reject_existing"==t.spiceImporter.importDuplicateAction))},dependencies:[F.sg,F.O5,o.YN,o.Kr,o.Fj,o.EJ,o._,o.JJ,o.On,b._,pe.h,F.Nd],encapsulation:2})),SpiceImporterCheck})();var he=s(7443);function fe(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"tr")(1,"td",8)(2,"span",16)(3,"input",22),a.NdJ("change",(function(t){const s=a.CHM(e).$implicit,i=a.oxw(2);return a.KtG(i.setCheckedField(s.key,s.value,t))})),a.qZA(),a.TgZ(4,"label",23),a._UZ(5,"span",19),a.qZA()()(),a.TgZ(6,"td",8)(7,"div",20),a._uU(8),a.qZA()(),a.TgZ(9,"td",8)(10,"div",20),a._uU(11),a.qZA()()()}if(2&e){const e=t.$implicit,s=a.oxw(2);a.xp6(3),a.s9C("id",e.key),a.Q6J("checked",s.getCheckedField(e.key)),a.xp6(1),a.s9C("for",e.key),a.xp6(4),a.hij(" ",e.key," "),a.xp6(3),a.hij(" ",e.value," ")}}function Ze(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"div",5)(1,"table",6)(2,"thead")(3,"tr",7)(4,"th",8),a._UZ(5,"system-button-icon",9),a.qZA(),a.TgZ(6,"th",10)(7,"div",11)(8,"div",12),a._UZ(9,"system-label",13),a.qZA()()(),a.TgZ(10,"th",10)(11,"div",14),a._uU(12),a._UZ(13,"system-label",15),a.qZA()()()(),a.TgZ(14,"tbody")(15,"tr")(16,"td",8)(17,"span",16)(18,"input",17),a.NdJ("change",(function(t){a.CHM(e);const s=a.oxw();return a.KtG(s.setCheckedField(s.spiceImport.idField,"id",t))})),a.qZA(),a.TgZ(19,"label",18),a._UZ(20,"span",19),a.qZA()()(),a.TgZ(21,"td",8)(22,"div",20),a._uU(23),a.qZA()(),a.TgZ(24,"td",8)(25,"div",20),a._uU(26," id "),a.qZA()()(),a.YNc(27,fe,12,5,"tr",21),a.ALo(28,"objectkeyvalues"),a.qZA()()()}if(2&e){const e=a.oxw();a.xp6(5),a.Q6J("icon","lock"),a.xp6(7),a.hij(" ",e.model.module," "),a.xp6(6),a.Q6J("checked",e.getCheckedField(e.spiceImport.idField)),a.xp6(5),a.hij(" ",e.spiceImport.idField," "),a.xp6(4),a.Q6J("ngForOf",a.lcZ(28,5,e.fileMapping))}}let Ie=(()=>{var e;class SpiceImporterUpdate{constructor(e,t){(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"spiceImport",void 0),(0,i.Z)(this,"currentImportStep",void 0),(0,i.Z)(this,"checkFields",[]),this.model=e,this.spiceImport=t}get fileMapping(){return this.spiceImport.fileMapping}setCheckedField(e,t,s){s.target.checked?(this.spiceImport.checkFields=this.spiceImport.checkFields.filter((t=>t.mappedField!==e)),this.spiceImport.checkFields.push({mappedField:e,moduleField:t})):this.spiceImport.checkFields=this.spiceImport.checkFields.filter((t=>t.mappedField!==e))}getCheckedField(e){return this.spiceImport.checkFields.some((t=>t.mappedField==e))}}return e=SpiceImporterUpdate,(0,i.Z)(SpiceImporterUpdate,"ɵfac",(function(t){return new(t||e)(a.Y36(u.o),a.Y36(h))})),(0,i.Z)(SpiceImporterUpdate,"ɵcmp",a.Xpm({type:e,selectors:[["spice-importer-update"]],inputs:{currentImportStep:"currentImportStep"},decls:6,vars:3,consts:[[1,"slds-grid","slds-wrap","slds-height_full"],[1,"slds-p-horizontal--small","slds-size--1-of-4","slds-border--right","slds-height_full"],[1,"slds-text-body--regular","slds-box","slds-m-top--small","slds-text-color--weak",2,"padding",".25rem"],["size","small",1,"slds-m-right--xx-small",3,"icon"],["class","slds-size--3-of-4 slds-height_full",4,"ngIf"],[1,"slds-size--3-of-4","slds-height_full"],[1,"slds-table","slds-table--bordered","slds-table--cell-buffer",2,"border-top","none"],[1,"slds-text-title--caps"],["scope","row"],["size","small",3,"icon"],["scope","col"],[1,"slds-truncate","slds-p-vertical--x-small"],[1,"slds-form-element__control",2,"font-weight","600"],["label","LBL_MAPPED_FIELDS"],[1,"slds-truncate","slds-p-vertical--x-small",2,"font-weight","600"],["label","LBL_FIELDS"],[1,"slds-checkbox"],["type","checkbox","id","idField",3,"checked","change"],["for","idField",1,"slds-checkbox__label"],[1,"slds-checkbox_faux"],[1,"slds-truncate"],[4,"ngFor","ngForOf"],["type","checkbox",3,"id","checked","change"],[1,"slds-checkbox__label",3,"for"]],template:function(e,t){1&e&&(a.TgZ(0,"div",0)(1,"div",1)(2,"div",2),a._UZ(3,"system-button-icon",3),a._uU(4),a.qZA()(),a.YNc(5,Ze,29,7,"div",4),a.qZA()),2&e&&(a.xp6(3),a.Q6J("icon","lock"),a.xp6(1),a.hij(" ",t.spiceImport.stepLongText," "),a.xp6(1),a.Q6J("ngIf",(null==t.spiceImport.fileHeader?null:t.spiceImport.fileHeader.length)>0))},dependencies:[F.sg,F.O5,D.J,b._,he.E],encapsulation:2})),SpiceImporterUpdate})();const _e=["fileupload"];function be(e,t){if(1&e&&(a.TgZ(0,"td")(1,"div",13),a._uU(2),a.qZA()()),2&e){const e=t.$implicit;a.xp6(2),a.Oqu(e)}}const ve=function(e){return{cursor:e}};function xe(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"tr",11),a.NdJ("click",(function(){const t=a.CHM(e).$implicit,s=a.oxw(2);return a.KtG(!!t.recordId&&s.goToRecord(t.recordId))})),a.TgZ(1,"td",12)(2,"div",13),a._uU(3),a.qZA()(),a.YNc(4,be,3,1,"td",14),a.qZA()}if(2&e){const e=t.$implicit;a.Q6J("ngStyle",a.VKq(3,ve,e.recordId?"pointer":"initial")),a.xp6(3),a.Oqu(e.status),a.xp6(1),a.Q6J("ngForOf",e.data)}}function Fe(e,t){if(1&e&&(a.TgZ(0,"table",3)(1,"thead")(2,"tr",4)(3,"th",5)(4,"div",6),a._UZ(5,"system-label",7),a.qZA()(),a.TgZ(6,"th",8)(7,"div",6),a._UZ(8,"system-label",9),a.qZA()()()(),a.TgZ(9,"tbody"),a.YNc(10,xe,5,5,"tr",10),a.qZA()()),2&e){const e=a.oxw();a.xp6(10),a.Q6J("ngForOf",e.spiceImport.result.list)}}let Ae=(()=>{var e;class SpiceImporterResult{constructor(e,t,s){(0,i.Z)(this,"spiceImport",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"fileupload",void 0),this.spiceImport=e,this.model=t,this.router=s}goToRecord(e){this.router.navigate([`/module/${this.model.module}/${e}`])}}return e=SpiceImporterResult,(0,i.Z)(SpiceImporterResult,"ɵfac",(function(t){return new(t||e)(a.Y36(h),a.Y36(u.o),a.Y36(Z.F0))})),(0,i.Z)(SpiceImporterResult,"ɵcmp",a.Xpm({type:e,selectors:[["spice-importer-result"]],viewQuery:function(e,t){if(1&e&&a.Gf(_e,7,a.s_b),2&e){let e;a.iGM(e=a.CRH())&&(t.fileupload=e.first)}},decls:3,vars:1,consts:[[1,"slds-wrap","slds-height_full"],[1,"slds-height_full"],["class","slds-table slds-table--bordered slds-table--cell-buffer",4,"ngIf"],[1,"slds-table","slds-table--bordered","slds-table--cell-buffer"],[1,"slds-text-title--caps"],["scope","col"],[1,"slds-truncate",2,"font-weight","600"],["label","LBL_STATUS"],["colspan","4","scope","col"],["label","LBL_DATA"],[3,"ngStyle","click",4,"ngFor","ngForOf"],[3,"ngStyle","click"],["scope","row"],[1,"slds-truncate"],[4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(a.TgZ(0,"div",0)(1,"div",1),a.YNc(2,Fe,11,1,"table",2),a.qZA()()),2&e&&(a.xp6(2),a.Q6J("ngIf",t.spiceImport.result&&t.spiceImport.result.list&&t.spiceImport.result.list.length>0))},dependencies:[F.sg,F.O5,F.PC,b._],styles:["[_nghost-%COMP%]{height:100%}"]})),SpiceImporterResult})();var Me=s(7017),Te=s(528),Se=s(4561),Le=s(3333),ye=s(4664);const qe=["contentcontainer"];function Ce(e,t){if(1&e&&(a.TgZ(0,"li",35),a._uU(1),a.qZA()),2&e){const e=a.oxw();a.xp6(1),a.hij(" ","new"==e.spiceImporter.importAction?e.language.getLabel("LBL_LOAD_NEW_RECORDS"):e.language.getLabel("LBL_UPDATE_EXISTING_RECORDS")," ")}}function Ee(e,t){1&e&&a._UZ(0,"system-button-icon",40),2&e&&a.Q6J("icon","success")}const ke=function(e){return{"slds-button--icon slds-progress__marker--icon":e}};function we(e,t){if(1&e&&(a.TgZ(0,"li",36)(1,"button",37)(2,"span",38),a._uU(3),a.qZA(),a.YNc(4,Ee,1,1,"system-button-icon",39),a.qZA()()),2&e){const e=t.$implicit,s=a.oxw();a.Q6J("ngClass",s.getStepClass(e)),a.xp6(1),a.Q6J("ngClass",a.VKq(4,ke,s.getStepComplete(e))),a.xp6(2),a.Oqu(e),a.xp6(1),a.Q6J("ngIf",s.getStepComplete(e))}}function Je(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"button",41),a.NdJ("click",(function(){a.CHM(e);const t=a.oxw();return a.KtG(t.nextStep())})),a._UZ(1,"system-label",42),a.qZA()}}function Ue(e,t){if(1&e&&(a.TgZ(0,"span",46),a._uU(1),a.qZA()),2&e){const e=a.oxw(2);a.xp6(1),a.hij(" ","new"==e.spiceImporter.importAction?e.language.getLabel("LBL_IMPORT"):e.language.getLabel("LBL_UPDATE")," ")}}function Ne(e,t){if(1&e&&(a.TgZ(0,"span",46),a._uU(1),a.qZA()),2&e){const e=a.oxw(2);a.xp6(1),a.hij(" ","new"==e.spiceImporter.importAction?e.language.getLabel("LBL_IMPORTING"):e.language.getLabel("LBL_UPDATING")," ")}}function Oe(e,t){1&e&&a._UZ(0,"system-spinner",47),2&e&&a.Q6J("size",16)}function Qe(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"button",43),a.NdJ("click",(function(){a.CHM(e);const t=a.oxw();return a.KtG(t.import())})),a.YNc(1,Ue,2,1,"span",44),a.YNc(2,Ne,2,1,"span",44),a.YNc(3,Oe,1,1,"system-spinner",45),a.qZA()}if(2&e){const e=a.oxw();a.Q6J("disabled",e.processing),a.xp6(1),a.Q6J("ngIf",!e.processing),a.xp6(1),a.Q6J("ngIf",e.processing),a.xp6(1),a.Q6J("ngIf",e.processing)}}function Be(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"button",48),a.NdJ("click",(function(){a.CHM(e);const t=a.oxw();return a.KtG(t.nextStep())})),a._UZ(1,"system-label",49),a.qZA()}}function De(e,t){1&e&&a._UZ(0,"spice-importer-check")}function Re(e,t){1&e&&a._UZ(0,"spice-importer-update")}const Ye=function(e){return{"slds-hide":e}};let je=(()=>{var e;class SpiceImporter{constructor(e,t,s,l,o,r,d,n){(0,i.Z)(this,"spiceImporter",void 0),(0,i.Z)(this,"language",void 0),(0,i.Z)(this,"metadata",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"navigationtab",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"backend",void 0),(0,i.Z)(this,"toast",void 0),(0,i.Z)(this,"contentcontainer",void 0),(0,i.Z)(this,"importSteps",["select","map","fixed","check","result"]),(0,i.Z)(this,"templatename",void 0),(0,i.Z)(this,"importAction","new"),(0,i.Z)(this,"processing",!1),(0,i.Z)(this,"modelFields",void 0),(0,i.Z)(this,"requiredModelFields",void 0),(0,i.Z)(this,"showNonDbFields",!1),(0,i.Z)(this,"self",{}),this.spiceImporter=e,this.language=t,this.metadata=s,this.model=l,this.navigationtab=o,this.router=r,this.backend=d,this.toast=n,this.model.module=this.navigationtab.activeRoute.params.module,this.model.initialize(),this.metadata.checkModuleAcl(this.model.module,"import")||(this.toast.sendToast(this.language.getLabel("MSG_NOT_AUTHORIZED_TO_IMPORT")+" "+this.language.getModuleName(this.model.module),"error"),this.router.navigate(["/module/"+this.model.module])),this.getModuleFields()}get templateName(){return this.templatename}set templateName(e){this.templatename=e}get currentImportStep(){return this.spiceImporter.currentImportStep}ngOnInit(){this.navigationtab.setTabInfo({displayname:this.language.getLabel("LBL_IMPORT"),displaymodule:this.model.module}),this.spiceImporter.loadModuleAvailableMethods(),this.backend.getRequest("module/SpiceImports/savedimports/"+this.model.module).subscribe((e=>{this.spiceImporter.savedImports=e}))}getModuleFields(){if(""!==this.model.module){this.modelFields=[];let e=this.metadata.getModuleFields(this.model.module);for(let t in e)if(e.hasOwnProperty(t)){let s=e[t];"link"===s.type||"relate"===s.type||"non-db"==s.source&&!this.showNonDbFields||"id"==s.name||(s.displayname=s.name,this.modelFields.push(s))}}this.requiredModelFields=this.modelFields.filter((e=>"id"!=e.name&&e.required))}setImportAction(e){let t;switch(this.importAction=e,e){case"new":t=this.importSteps.indexOf("update"),this.importSteps[t]="check",this.spiceImporter.importStepsText[t]="LBL_DUPLICATE_CHECK";break;case"update":t=this.importSteps.indexOf("check"),this.importSteps[t]="update",this.spiceImporter.importStepsText[t]="LBL_UPDATE_EXISTING_RECORDS"}}getCurrentStep(){return this.language.getLabel(this.spiceImporter.importStepsText[this.spiceImporter.currentImportStep])}gotoModule(){this.self.destroy(),this.navigationtab.closeTab(),this.router.navigate(["/module/"+this.model.module])}getContainerStyle(){return{height:"calc(100vh - "+this.contentcontainer.element.nativeElement.getBoundingClientRect().top+"px)","overflow-y":"auto"}}getStepClass(e){let t=this.importSteps.indexOf(e);return t==this.spiceImporter.currentImportStep?"slds-is-active":t<this.spiceImporter.currentImportStep?"slds-is-completed":void 0}getStepComplete(e){return this.importSteps.indexOf(e)<this.spiceImporter.currentImportStep}getProgressBarWidth(){return{width:this.spiceImporter.currentImportStep/(this.importSteps.length-1)*100+"%"}}nextStep(){switch(this.spiceImporter.currentImportStep){case 0:if(""===this.spiceImporter.fileName)return this.toast.sendToast(this.language.getLabel("MSG_SELECT_VALID_FILE"),"error");if("choose"==this.spiceImporter.importTemplateAction&&Object.keys(this.spiceImporter.fileMapping).length<=0&&0==this.spiceImporter.checkFields.length&&0==this.spiceImporter.fixedFields.length)return this.toast.sendToast(this.language.getLabel("LBL_MAKE_SELECTION"),"error");if("new"==this.spiceImporter.importTemplateAction&&!this.templateName)return this.toast.sendToast(this.language.getLabel("MSG_INPUT_REQUIRED"),"error");this.spiceImporter.currentImportStep++;break;case 1:if(Object.keys(this.spiceImporter.fileMapping).length<=0)return this.toast.sendToast(this.language.getLabel("MSG_MAP_FIELDS"),"error");if("have"==this.spiceImporter.idFieldAction&&""==this.spiceImporter.idField)return this.toast.sendToast(this.language.getLabel("LBL_MAKE_SELECTION"),"error");this.spiceImporter.currentImportStep++;break;case 2:for(let e of this.spiceImporter.fixedFields){if(!this.model.data.hasOwnProperty(e.field))return this.toast.sendToast(this.language.getLabel("MSG_INPUT_REQUIRED"),"error");if(this.model.data[e.field].length<1)return this.toast.sendToast(this.language.getLabel("MSG_INPUT_REQUIRED"),"error")}if(!this.checkRequiredMapped()&&"new"==this.spiceImporter.importAction)return this.toast.sendToast(this.language.getLabel("MSG_MAP_FIELDS"),"error");this.spiceImporter.currentImportStep++;break;case 3:if("update"==this.importAction&&this.spiceImporter.checkFields.length<1)return this.toast.sendToast(this.language.getLabel("LBL_MAKE_SELECTION"),"error");this.import();break;case 4:this.gotoModule(),this.spiceImporter.currentImportStep=0;break;default:this.spiceImporter.currentImportStep++}}checkRequiredMapped(){let e=_.invert(this.spiceImporter.fileMapping),t=0,s={};for(let e of this.spiceImporter.fixedFields)s[e.field]=e.field;for(let i of this.requiredModelFields)"id"!=i.name&&(e[i.name]&&t++,s[i.name]&&t++);return this.requiredModelFields.length==t}prevStep(){this.spiceImporter.currentImportStep>0&&this.spiceImporter.currentImportStep--}showNext(){return this.spiceImporter.currentImportStep<this.importSteps.length-2}showImport(){return this.spiceImporter.currentImportStep==this.importSteps.length-2}showExit(){return this.spiceImporter.currentImportStep==this.importSteps.length-1}import(){if(!this.spiceImporter.processByMethod&&"update"==this.importAction&&this.spiceImporter.checkFields.length<1)return this.toast.sendToast(this.language.getLabel("LBL_MAKE_SELECTION"),"error");let e=this.prepareObjectImport();this.spiceImporter.result={},this.processing=!0,this.backend.postRequest("module/SpiceImports/import",null,{objectimport:e}).subscribe((e=>{switch(e.status){case"imported":this.spiceImporter.result=e,this.toast.sendToast(this.language.getLabel("LBL_SUCCESS"),"success");break;case"scheduled":this.gotoModule(),this.toast.sendToast(e.msg,"success");break;case"error":this.toast.sendToast(e.msg,"error","",!1)}this.processing=!1,this.spiceImporter.currentImportStep=4}))}prepareObjectImport(){let e=_.pick(this.spiceImporter,"fileName","fileId","fileHeader","fileMapping","templateName","fileTooBig","enclosure","separator","checkFields","importAction","idFieldAction","idField","fixedFields","importDuplicateAction","selectedMethod","rejectExistingKey");return e.fixedFieldsValues=this.model.data,e.module=this.model.module,""!=this.spiceImporter.idField&&(e.fileMapping[this.spiceImporter.idField]="id"),"have"==e.idFieldAction&&(e.checkFields=[{mappedField:this.spiceImporter.idField,moduleField:"id"}]),e}}return e=SpiceImporter,(0,i.Z)(SpiceImporter,"ɵfac",(function(t){return new(t||e)(a.Y36(h),a.Y36(m.d),a.Y36(f.Pu),a.Y36(u.o),a.Y36(Me.d),a.Y36(Z.F0),a.Y36(g.y),a.Y36(x.A))})),(0,i.Z)(SpiceImporter,"ɵcmp",a.Xpm({type:e,selectors:[["spice-importer"]],viewQuery:function(e,t){if(1&e&&a.Gf(qe,7,a.s_b),2&e){let e;a.iGM(e=a.CRH())&&(t.contentcontainer=e.first)}},features:[a._Bn([u.o,h])],decls:40,vars:26,consts:[[1,"slds-page-header"],[1,"slds-grid"],[1,"slds-col","slds-has-flexi-truncate","slds-grid"],[1,"slds-media","slds-no-space","slds-grow"],[3,"module"],[1,"slds-media__body"],["role","navigation","aria-label","Breadcrumbs"],[1,"slds-breadcrumb","slds-list--horizontal"],[1,"slds-breadcrumb__item","slds-text-title--caps"],["href","javascript:void(0);",3,"click"],["href","javascript:void(0);"],["label","LBL_IMPORT"],["class","slds-breadcrumb__item slds-text-title--caps slds-p-left--x-small",4,"ngIf"],[1,"slds-page-header__title","slds-m-right--small","slds-align-middle","slds-truncate"],[1,"slds-grid","slds-grid--vertical-align-center"],["label","LBL_SHOW_NON_DB_FIELDS"],[3,"ngModel","ngModelChange"],[1,"slds-grid","slds-grid--align-spread","slds-p-around--small","slds-theme--shade","slds-border--bottom"],[1,"slds-button","slds-button--neutral",3,"disabled","ngClass","click"],["label","LBL_PREVIOUS"],[1,"slds-progress","slds-progress--shade"],[1,"slds-progress__list"],["class","slds-progress__item",3,"ngClass",4,"ngFor","ngForOf"],[1,"slds-progress-bar","slds-progress-bar_x-small"],[1,"slds-progress-bar__value",3,"ngStyle"],["class","slds-button slds-button--neutral",3,"click",4,"ngIf"],["class","slds-button slds-button--brand slds-grid slds-grid_vertical-align-center",3,"disabled","click",4,"ngIf"],["class","slds-button slds-button--brand",3,"click",4,"ngIf"],[1,"slds-scrollable--y",3,"ngStyle"],["contentcontainer",""],[3,"hidden","templateNameSet","importActionSet"],[3,"modelfields","requiredmodelfields","hidden"],[3,"modelfields","requiredmodelfields","hidden","currentimportstep"],[4,"ngIf"],[3,"hidden"],[1,"slds-breadcrumb__item","slds-text-title--caps","slds-p-left--x-small"],[1,"slds-progress__item",3,"ngClass"],[1,"slds-button","slds-progress__marker",3,"ngClass"],[1,"slds-assistive-text"],[3,"icon",4,"ngIf"],[3,"icon"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_NEXT"],[1,"slds-button","slds-button--brand","slds-grid","slds-grid_vertical-align-center",3,"disabled","click"],["class","slds-p-right--xx-small",4,"ngIf"],["inverse","true",3,"size",4,"ngIf"],[1,"slds-p-right--xx-small"],["inverse","true",3,"size"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_CLOSE"]],template:function(e,t){1&e&&(a.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),a._UZ(4,"system-icon",4),a.TgZ(5,"div",5)(6,"nav",6)(7,"ol",7)(8,"li",8)(9,"a",9),a.NdJ("click",(function(){return t.gotoModule()})),a._UZ(10,"system-label-modulename",4),a.qZA()(),a.TgZ(11,"li",8)(12,"a",10),a._UZ(13,"system-label",11),a.qZA()(),a.YNc(14,Ce,2,1,"li",12),a.qZA()(),a.TgZ(15,"div")(16,"h1",13),a._uU(17),a.qZA()()()(),a.TgZ(18,"div",14),a._UZ(19,"system-label",15),a.TgZ(20,"system-checkbox-toggle",16),a.NdJ("ngModelChange",(function(e){return t.showNonDbFields=e}))("ngModelChange",(function(){return t.getModuleFields()})),a.qZA()()()()(),a.TgZ(21,"div",17)(22,"button",18),a.NdJ("click",(function(){return t.prevStep()})),a._UZ(23,"system-label",19),a.qZA(),a.TgZ(24,"div",20)(25,"ol",21),a.YNc(26,we,5,6,"li",22),a.qZA(),a.TgZ(27,"div",23),a._UZ(28,"span",24),a.qZA()(),a.YNc(29,Je,2,0,"button",25),a.YNc(30,Qe,4,4,"button",26),a.YNc(31,Be,2,0,"button",27),a.qZA(),a.TgZ(32,"div",28,29)(34,"spice-importer-select",30),a.NdJ("templateNameSet",(function(e){return t.templateName=e}))("importActionSet",(function(e){return t.setImportAction(e)})),a.qZA(),a._UZ(35,"spice-importer-map",31)(36,"spice-importer-fixed",32),a.YNc(37,De,1,0,"spice-importer-check",33),a.YNc(38,Re,1,0,"spice-importer-update",33),a._UZ(39,"spice-importer-result",34),a.qZA()),2&e&&(a.xp6(4),a.Q6J("module",t.model.module),a.xp6(6),a.Q6J("module",t.model.module),a.xp6(4),a.Q6J("ngIf",t.currentImportStep>=1),a.xp6(3),a.hij(" ",t.getCurrentStep(),""),a.xp6(3),a.Q6J("ngModel",t.showNonDbFields),a.xp6(2),a.Q6J("disabled",t.showExit())("ngClass",a.VKq(24,Ye,!t.currentImportStep)),a.xp6(4),a.Q6J("ngForOf",t.importSteps),a.xp6(2),a.Q6J("ngStyle",t.getProgressBarWidth()),a.xp6(1),a.Q6J("ngIf",t.spiceImporter.currentImportStep<3&&!t.spiceImporter.processByMethod),a.xp6(1),a.Q6J("ngIf",3==t.spiceImporter.currentImportStep||t.spiceImporter.processByMethod),a.xp6(1),a.Q6J("ngIf",t.showExit()),a.xp6(1),a.Q6J("ngStyle",t.getContainerStyle()),a.xp6(2),a.Q6J("hidden",0!==t.currentImportStep),a.xp6(1),a.Q6J("modelfields",t.modelFields)("requiredmodelfields",t.requiredModelFields)("hidden",1!==t.currentImportStep),a.xp6(1),a.Q6J("modelfields",t.modelFields)("requiredmodelfields",t.requiredModelFields)("hidden",2!==t.currentImportStep)("currentimportstep",t.currentImportStep),a.xp6(1),a.Q6J("ngIf",3===t.currentImportStep&&"new"==t.spiceImporter.importAction),a.xp6(1),a.Q6J("ngIf",3===t.currentImportStep&&"update"==t.spiceImporter.importAction),a.xp6(1),a.Q6J("hidden",4!==t.currentImportStep))},dependencies:[F.mk,F.sg,F.O5,F.PC,o.JJ,o.On,D.J,Te.v,Se.f,b._,Le.M,ye.W,B,V,ne,ge,Ie,Ae],encapsulation:2})),SpiceImporter})(),Pe=(()=>{var e;class SpiceImporterModule{}return e=SpiceImporterModule,(0,i.Z)(SpiceImporterModule,"ɵfac",(function(t){return new(t||e)})),(0,i.Z)(SpiceImporterModule,"ɵmod",a.oAB({type:e})),(0,i.Z)(SpiceImporterModule,"ɵinj",a.cJS({providers:[h],imports:[l.b2,o.u5,r.SystemComponents,d.GlobalComponents,n.ObjectComponents,p.ObjectFields,c.o]})),SpiceImporterModule})();("undefined"==typeof ngJitMode||ngJitMode)&&a.kYT(Pe,{declarations:[je,B,V,ne,ge,Ie,Ae,v],imports:[l.b2,o.u5,r.SystemComponents,d.GlobalComponents,n.ObjectComponents,p.ObjectFields,c.o],exports:[je,v]})}}]);