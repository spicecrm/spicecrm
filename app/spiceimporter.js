/*!
 * 
 *                     SpiceCRM
 *
 *                     release: 2024.01.001
 *
 *                     date: 2024-06-07 18:47:00
 *
 *                     build: 2024.01.001.1717778820753
 *
 */
"use strict";(self.webpackChunkcore=self.webpackChunkcore||[]).push([["src_include_spiceimporter_spiceimporter_ts"],{45038:(e,t,s)=>{s.r(t),s.d(t,{SpiceImporterModule:()=>Ue});var i=s(345),l=s(84341),o=s(70569),r=s(12948),n=s(37328),d=s(7745),p=s(71341),a=s(54438),c=s(69904),m=s(35911),u=s(49722);let h=(()=>{class SpiceImporterService{constructor(e,t,s){this.language=e,this.model=t,this.backend=s,this.fileMapping={},this.fileId="",this.fileName="",this.fileHeader=[],this.checkFields=[],this.fixedFields=[],this.idfield="",this.importDuplicateAction="ignore",this.importAction="new",this.importTemplateAction="none",this.idFieldAction="auto",this.enclosure="none",this.separator="semicolon",this.fileTooBig=!1,this.rejectExistingKey="",this.savedImports=[],this.fileRows="",this.currentImportStep=0,this.result={},this.importStepsText=["LBL_SELECT_UPLOAD_FILE","LBL_MAP_FIELDS","LBL_ADD_FIXED_FIELDS","LBL_DUPLICATE_CHECK","LBL_RESULTS"],this.processByMethod=!1,this.availableClasses=[],this.nonDBFields=void 0}set selectedMethod(e){this._selectedMethod=e,this.processByMethod=!!e}get selectedMethod(){return this._selectedMethod}get stepLongText(){return this.language.getLabel(this.importStepsText[this.currentImportStep],"","long")}get idField(){return this.idfield}set idField(e){this.fileMapping[e],this.idfield=e}resetSettings(){this.fileMapping={},this.fixedFields=[],this.checkFields=[],this.idField="",this.result={}}addFixed(){this.fixedFields.push({field:void 0})}getFixed(e){let t=this.fixedFields.indexOf(e);return t>-1?this.fixedFields[t].field:""}setFixedField(e,t){this.fixedFields[e].field=t}removeFixed(e){this.fixedFields.splice(e,1)}addCheck(){this.checkFields.push({field:void 0})}getCheckField(e){return this.checkFields[e]&&this.checkFields[e].field?this.checkFields[e].field:""}setCheckField(e,t){this.checkFields[e].field=t}removeCheck(e){this.checkFields.splice(e,1)}getMapping(e){return this.fileMapping&&this.fileMapping[e]?this.fileMapping[e]:""}setMapping(e,t){""!=t?this.fileMapping[e]=t:delete this.fileMapping[e]}setSavedImport(e){this.resetSettings(),this.savedImports.some((t=>{if(t.id===e){for(let e in t.mappings)t.mappings.hasOwnProperty(e)&&-1!=this.fileHeader.indexOf(e)&&(this.fileMapping[e]=t.mappings[e]);return this.fixedFields=t.fixed,this.checkFields=t.checks,!0}}))}loadModuleAvailableMethods(){this.backend.getRequest(`SpiceImports/${this.model.module}/methods`).subscribe((e=>{this.availableClasses=e.map((e=>({id:e,name:e})))}))}static#e=this.ɵfac=function(e){return new(e||SpiceImporterService)(a.KVO(c.B),a.KVO(m.g),a.KVO(u.H))};static#t=this.ɵprov=a.jDH({token:SpiceImporterService,factory:SpiceImporterService.ɵfac})}return SpiceImporterService})();var g=s(83935),f=s(57363),I=s(71692),b=s(32062);let F=(()=>{class SpiceImporterImportButton{constructor(e,t,s,i,l){this.language=e,this.metadata=t,this.model=s,this.router=i,this.layout=l}execute(){this.router.navigate(["/import/"+this.model.module])}get disabled(){return!this.metadata.checkModuleAcl(this.model.module,"import")||"small"==this.layout.screenwidth}static#e=this.ɵfac=function(e){return new(e||SpiceImporterImportButton)(a.rXU(c.B),a.rXU(g.yu),a.rXU(m.g),a.rXU(f.Ix),a.rXU(I.Z))};static#t=this.ɵcmp=a.VBU({type:SpiceImporterImportButton,selectors:[["spice-importer-import-button"]],decls:2,vars:0,consts:[["label","LBL_IMPORT"]],template:function(e,t){1&e&&(a.j41(0,"span"),a.nrm(1,"system-label",0),a.k0s())},dependencies:[b.W],encapsulation:2})}return SpiceImporterImportButton})();var v=s(41081),k=s(60177),R=s(39554),S=s(86262),M=s(58082),E=s(41587),j=s(32130);function L(e,t){if(1&e){const e=a.RV6();a.j41(0,"div",41)(1,"fieldset",42)(2,"div",11)(3,"system-input-radio-button-group",43),a.mxI("ngModelChange",(function(t){a.eBV(e);const s=a.XpG();return a.DH7(s.spiceImport.separator,t)||(s.spiceImport.separator=t),a.Njj(t)})),a.k0s()(),a.j41(4,"legend",9),a.nrm(5,"system-label",44),a.k0s()(),a.j41(6,"fieldset",42)(7,"div",11)(8,"system-input-radio-button-group",43),a.mxI("ngModelChange",(function(t){a.eBV(e);const s=a.XpG();return a.DH7(s.spiceImport.enclosure,t)||(s.spiceImport.enclosure=t),a.Njj(t)})),a.k0s()(),a.j41(9,"legend",9),a.nrm(10,"system-label",45),a.k0s()()()}if(2&e){const e=a.XpG();a.R7$(3),a.R50("ngModel",e.spiceImport.separator),a.Y8G("inputOptions",e.delimiterOptions),a.R7$(5),a.R50("ngModel",e.spiceImport.enclosure),a.Y8G("inputOptions",e.enclosureOptions)}}function y(e,t){if(1&e){const e=a.RV6();a.j41(0,"span",12)(1,"input",46),a.mxI("ngModelChange",(function(t){a.eBV(e);const s=a.XpG();return a.DH7(s.importTemplateAction,t)||(s.importTemplateAction=t),a.Njj(t)})),a.k0s(),a.j41(2,"label",47),a.nrm(3,"span",15),a.j41(4,"span",16),a.nrm(5,"system-label",48),a.k0s()()()}if(2&e){const e=a.XpG();a.R7$(),a.R50("ngModel",e.importTemplateAction)}}function x(e,t){if(1&e&&(a.j41(0,"option",52),a.EFF(1),a.k0s()),2&e){const e=t.$implicit;a.Y8G("value",e.id),a.R7$(),a.SpI(" ",e.name," ")}}function G(e,t){if(1&e){const e=a.RV6();a.j41(0,"div",4)(1,"label",16),a.EFF(2),a.k0s(),a.j41(3,"div",11)(4,"div",49)(5,"select",50),a.bIt("change",(function(t){a.eBV(e);const s=a.XpG();return a.Njj(s.setSavedImport(t))})),a.nrm(6,"option",51),a.DNE(7,x,2,2,"option",38),a.k0s()()()()}if(2&e){const e=a.XpG();a.R7$(2),a.JRh(e.language.getLabel("LBL_SELECT_TEMPLATE","","short")),a.R7$(5),a.Y8G("ngForOf",e.spiceImport.savedImports)}}function D(e,t){if(1&e){const e=a.RV6();a.j41(0,"div",4)(1,"div",42)(2,"label",16),a.nrm(3,"system-label",53),a.k0s(),a.j41(4,"div",11)(5,"input",54),a.mxI("ngModelChange",(function(t){a.eBV(e);const s=a.XpG();return a.DH7(s.templateName,t)||(s.templateName=t),a.Njj(t)})),a.k0s()()()()}if(2&e){const e=a.XpG();a.R7$(5),a.R50("ngModel",e.templateName)}}function C(e,t){if(1&e&&a.nrm(0,"system-select-option",55),2&e){const e=t.$implicit;a.Y8G("value",e.id)("display",e.name)}}function $(e,t){if(1&e&&(a.j41(0,"option",52),a.EFF(1),a.k0s()),2&e){const e=t.$implicit,s=a.XpG();a.Y8G("value",s.selectedClass.name+"->"+e),a.R7$(),a.JRh(e)}}function A(e,t){if(1&e&&(a.j41(0,"td")(1,"div",65),a.EFF(2),a.k0s()()),2&e){const e=t.$implicit,s=a.XpG().index;a.R7$(2),a.JRh(e[s])}}function B(e,t){if(1&e&&(a.j41(0,"tr")(1,"td",64)(2,"div",65),a.EFF(3),a.k0s()(),a.DNE(4,A,3,1,"td",63),a.k0s()),2&e){const e=t.$implicit,s=a.XpG(2);a.R7$(3),a.JRh(e),a.R7$(),a.Y8G("ngForOf",s.spiceImport.fileData)}}function T(e,t){if(1&e&&(a.j41(0,"table",56)(1,"thead")(2,"tr",57)(3,"th",58)(4,"div",59),a.nrm(5,"system-label",60),a.k0s()(),a.j41(6,"th",61)(7,"div",59),a.nrm(8,"system-label",62),a.EFF(9),a.k0s()()()(),a.j41(10,"tbody"),a.DNE(11,B,5,2,"tr",63),a.k0s()()),2&e){const e=a.XpG();a.R7$(9),a.SpI(" (",e.spiceImport.fileRows,") "),a.R7$(2),a.Y8G("ngForOf",e.spiceImport.fileHeader)}}let N=(()=>{class SpiceImporterSelect{constructor(e,t,s,i){this.spiceImport=e,this.toast=t,this.backend=s,this.language=i,this.templateNameSet=new a.bkB,this.importActionSet=new a.bkB,this.isLoading=!1,this.file=null,this.selectedClassMethods=[],this.enclosureOptions=[{label:"'",value:"single"},{label:" ",value:"none"},{label:'"',value:"double"}],this.delimiterOptions=[{label:";",value:"semicolon"},{label:",",value:"comma"},{label:"nl",value:"endofline"}]}get templateName(){return this.spiceImport.templateName}set templateName(e){this.spiceImport.templateName=e,this.templateNameSet.emit(e)}get importAction(){return this.spiceImport.importAction}set importAction(e){this.spiceImport.importAction=e,this.importActionSet.emit(e),this.spiceImport.idField="",this.templateName=void 0,this.resetOptions(),this.spiceImport.resetSettings()}get importTemplateAction(){return this.spiceImport.importTemplateAction}set importTemplateAction(e){this.spiceImport.importTemplateAction=e,"choose"!=e&&this.spiceImport.resetSettings()}resetOptions(){this.spiceImport.importDuplicateAction="ignore",this.spiceImport.importTemplateAction="none",this.spiceImport.idFieldAction="auto"}setSavedImport(e){this.spiceImport.setSavedImport(e.target.value)}clearFile(){this.spiceImport.fileName="",this.spiceImport.fileId="",this.spiceImport.fileHeader=[],this.spiceImport.fileData=void 0,this.spiceImport.fileRows="",this.spiceImport.fileTooBig=!1,this.spiceImport.resetSettings()}loadFilePreview(e){let t=e.file_name.toLowerCase();if(this.file=e,!t.endsWith(".csv"))return this.toast.sendToast(this.language.getLabel("MSG_ONLY_CSV_ALLOWED"),"error"),e.remove();this.isLoading=!0,this.spiceImport.fileName=e.file_name,this.spiceImport.fileId=e.file_md5;const s={file_md5:e.file_md5,enclosure:this.spiceImport.enclosure,separator:this.spiceImport.separator};this.backend.getRequest("module/SpiceImports/filepreview",s).subscribe((e=>{this.isLoading=!1,this.spiceImport.fileHeader=e.fileHeader,this.spiceImport.fileData=e.fileData,this.spiceImport.fileRows=e.fileRows,this.spiceImport.fileTooBig=e.fileTooBig,e.fileTooBig&&this.toast.sendToast(this.language.getLabel("MSG_FILE_ROWS_TOO_LARGE"),"warning","",!1)}),(()=>{this.isLoading=!1,this.toast.sendToast(this.language.getLabel("ERR_CANT_READ_FILE_DATA"),"error","",!1),e.remove()}))}getClassMethods(e){this.backend.getRequest("system/checkclass/"+btoa(e)).subscribe((e=>{this.selectedClassMethods=e.methods}))}static#e=this.ɵfac=function(e){return new(e||SpiceImporterSelect)(a.rXU(h),a.rXU(v.o),a.rXU(u.H),a.rXU(c.B))};static#t=this.ɵcmp=a.VBU({type:SpiceImporterSelect,selectors:[["spice-importer-select"]],outputs:{templateNameSet:"templateNameSet",importActionSet:"importActionSet"},decls:57,vars:20,consts:[[1,"slds-grid","slds-wrap","slds-height_full"],[1,"slds-p-horizontal--small","slds-size--1-of-4","slds-border--right","slds-height_full"],[1,"slds-text-body--regular","slds-box","slds-m-top--small","slds-text-color--weak",2,"padding",".25rem"],[1,"slds-form","slds-size--1-of-1"],[1,"slds-form-element","slds-m-vertical--medium"],[1,"slds-form-element__control","slds-grid"],[1,"slds-grow",2,"min-width","0"],["accept",".csv",1,"slds-size--1-of-1",3,"ngModel","ngModelChange","onRemove"],["class","slds-grid slds-m-around--x-small",4,"ngIf"],[1,"slds-form-element__legend","slds-form-element__label"],["label","LBL_IMPORT_ACTION"],[1,"slds-form-element__control"],[1,"slds-radio"],["type","radio","id","importactionnew","name","options","value","new",3,"ngModel","ngModelChange"],["for","importactionnew",1,"slds-radio__label"],[1,"slds-radio--faux"],[1,"slds-form-element__label"],["label","LBL_LOAD_NEW_RECORDS"],["type","radio","id","importactionupdate","name","options","value","update",3,"ngModel","ngModelChange"],["for","importactionupdate",1,"slds-radio__label"],["label","LBL_UPDATE_EXISTING_RECORDS"],[1,"slds-form-element","slds-m-vertical--medium",3,"hidden"],["label","LBL_IMPORT_TEMPLATE"],["type","radio","id","importtemplatenone","value","none","name","template",3,"ngModel","ngModelChange"],["for","importtemplatenone",1,"slds-radio__label"],["class","slds-radio",4,"ngIf"],["type","radio","id","importtemplatesave","value","new","name","template",3,"ngModel","ngModelChange"],["for","importtemplatesave",1,"slds-radio__label"],["label","LBL_SAVE_AS"],["class","slds-form-element slds-m-vertical--medium",4,"ngIf"],[1,"slds-grid","slds-p-around--xx-small"],[1,"slds-form-element","slds-p-horizontal--xx-small","slds-size--1-of-1"],["label","LBL_METHOD"],[1,"slds-grid","slds-grid--vertical-align-center","slds-gutters_direct-xx-small"],[1,"slds-grow","slds-truncate",3,"ngModel","ngModelChange"],[3,"value","display",4,"ngFor","ngForOf"],[1,"slds-col","slds-size--1-of-3","slds-select_container"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"slds-size--3-of-4","slds-height_full",3,"system-overlay-loading-spinner"],["class","slds-table slds-table--bordered slds-table--cell-buffer",4,"ngIf"],[1,"slds-grid","slds-m-around--x-small"],[1,"slds-form-element"],[3,"ngModel","inputOptions","ngModelChange"],["label","LBL_SEPARATOR"],["label","LBL_ENCLOSURE"],["type","radio","id","importtemplatechoose","value","choose","name","template",3,"ngModel","ngModelChange"],["for","importtemplatechoose",1,"slds-radio__label"],["label","LBL_SELECT"],[1,"slds-select_container"],[1,"slds-select",3,"change"],["value",""],[3,"value"],["label","LBL_TEMPLATE_NAME"],["type","text",1,"slds-input",3,"ngModel","ngModelChange"],[3,"value","display"],[1,"slds-table","slds-table--bordered","slds-table--cell-buffer"],[1,"slds-text-title--caps","slds-p-vertical--small"],["scope","col"],[1,"slds-truncate","slds-p-vertical--xx-small",2,"font-weight","600"],["label","LBL_HEADER"],["colspan","2","scope","col"],["label","LBL_RECORDS"],[4,"ngFor","ngForOf"],["scope","row"],[1,"slds-truncate"]],template:function(e,t){1&e&&(a.j41(0,"div",0)(1,"div",1)(2,"div",2),a.EFF(3),a.k0s(),a.j41(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"system-input-file",7),a.bIt("ngModelChange",(function(e){return t.loadFilePreview(e)}))("onRemove",(function(){return t.clearFile()})),a.k0s()(),a.DNE(9,L,11,4,"div",8),a.k0s()(),a.j41(10,"div",4)(11,"legend",9),a.nrm(12,"system-label",10),a.k0s(),a.j41(13,"div",11)(14,"span",12)(15,"input",13),a.mxI("ngModelChange",(function(e){return a.DH7(t.importAction,e)||(t.importAction=e),e})),a.k0s(),a.j41(16,"label",14),a.nrm(17,"span",15),a.j41(18,"span",16),a.nrm(19,"system-label",17),a.k0s()()(),a.j41(20,"span",12)(21,"input",18),a.mxI("ngModelChange",(function(e){return a.DH7(t.importAction,e)||(t.importAction=e),e})),a.k0s(),a.j41(22,"label",19),a.nrm(23,"span",15),a.j41(24,"span",16),a.nrm(25,"system-label",20),a.k0s()()()()(),a.j41(26,"div",21)(27,"legend",9),a.nrm(28,"system-label",22),a.k0s(),a.j41(29,"div",11)(30,"span",12)(31,"input",23),a.mxI("ngModelChange",(function(e){return a.DH7(t.importTemplateAction,e)||(t.importTemplateAction=e),e})),a.k0s(),a.j41(32,"label",24),a.nrm(33,"span",15),a.j41(34,"span",16),a.EFF(35,"none"),a.k0s()()(),a.DNE(36,y,6,1,"span",25),a.j41(37,"span",12)(38,"input",26),a.mxI("ngModelChange",(function(e){return a.DH7(t.importTemplateAction,e)||(t.importTemplateAction=e),e})),a.k0s(),a.j41(39,"label",27),a.nrm(40,"span",15),a.j41(41,"span",16),a.nrm(42,"system-label",28),a.k0s()()()()(),a.DNE(43,G,8,2,"div",29)(44,D,6,1,"div",29),a.k0s(),a.j41(45,"div",30)(46,"div",31)(47,"label",16),a.nrm(48,"system-label",32),a.k0s(),a.j41(49,"div",33)(50,"system-select",34),a.mxI("ngModelChange",(function(e){return a.DH7(t.selectedClass,e)||(t.selectedClass=e),e})),a.bIt("ngModelChange",(function(e){return t.getClassMethods(e.name)})),a.DNE(51,C,1,2,"system-select-option",35),a.k0s(),a.j41(52,"div",36)(53,"select",37),a.mxI("ngModelChange",(function(e){return a.DH7(t.spiceImport.selectedMethod,e)||(t.spiceImport.selectedMethod=e),e})),a.DNE(54,$,2,2,"option",38),a.k0s()()()()()(),a.j41(55,"div",39),a.DNE(56,T,12,2,"table",40),a.k0s()()),2&e&&(a.R7$(3),a.SpI(" ",t.spiceImport.stepLongText," "),a.R7$(5),a.Y8G("ngModel",t.file),a.R7$(),a.Y8G("ngIf",!t.spiceImport.fileData),a.R7$(6),a.R50("ngModel",t.importAction),a.R7$(6),a.R50("ngModel",t.importAction),a.R7$(5),a.Y8G("hidden",!t.spiceImport.fileId),a.R7$(5),a.R50("ngModel",t.importTemplateAction),a.R7$(5),a.Y8G("ngIf",(null==t.spiceImport.savedImports?null:t.spiceImport.savedImports.length)>0),a.R7$(2),a.R50("ngModel",t.importTemplateAction),a.R7$(5),a.Y8G("ngIf","choose"==t.importTemplateAction&&t.spiceImport.fileId),a.R7$(),a.Y8G("ngIf","new"==t.importTemplateAction),a.R7$(),a.AVh("slds-hide",!t.spiceImport.fileId),a.R7$(5),a.R50("ngModel",t.selectedClass),a.R7$(),a.Y8G("ngForOf",t.spiceImport.availableClasses),a.R7$(2),a.Y8G("disabled",0==t.spiceImport.availableClasses.length),a.R50("ngModel",t.spiceImport.selectedMethod),a.R7$(),a.Y8G("ngForOf",t.selectedClassMethods),a.R7$(),a.Y8G("system-overlay-loading-spinner",t.isLoading),a.R7$(),a.Y8G("ngIf",t.spiceImport.fileHeader.length>0))},dependencies:[k.Sq,k.bT,l.xH,l.y7,l.me,l.wz,l.Fm,l.BC,l.vS,R.s,b.W,S.i,M.s,E.t,j.M],encapsulation:2})}return SpiceImporterSelect})();var O=s(25863);const w=(e,t)=>({"slds-text-color_success":e,"slds-text-color--error":t});function Y(e,t){if(1&e&&(a.j41(0,"div",24)(1,"span",25),a.EFF(2),a.k0s(),a.j41(3,"span",26),a.nrm(4,"system-button-icon",27),a.k0s()()),2&e){const e=t.$implicit,s=a.XpG(2);a.R7$(2),a.SpI(" ",e.displayname," "),a.R7$(2),a.Y8G("ngClass",a.l_i(3,w,s.checkRequired(e.name),!s.checkRequired(e.name)))("icon",s.checkRequired(e.name)?"success":"record")}}function X(e,t){if(1&e&&(a.j41(0,"div")(1,"legend",6),a.nrm(2,"system-label",21),a.k0s(),a.j41(3,"div",22),a.DNE(4,Y,5,6,"div",23),a.k0s()()),2&e){const e=a.XpG();a.R7$(4),a.Y8G("ngForOf",e.requiredModelFields)("ngForTrackBy",e.trackByFn)}}function U(e,t){if(1&e&&(a.j41(0,"option",35),a.EFF(1),a.k0s()),2&e){const e=t.$implicit;a.Y8G("value",e),a.R7$(),a.JRh(e)}}function V(e,t){if(1&e){const e=a.RV6();a.j41(0,"div",28)(1,"label",29),a.nrm(2,"system-label",30),a.k0s(),a.j41(3,"div",8)(4,"div",31)(5,"select",32),a.mxI("ngModelChange",(function(t){a.eBV(e);const s=a.XpG();return a.DH7(s.spiceImport.idField,t)||(s.spiceImport.idField=t),a.Njj(t)})),a.nrm(6,"option",33),a.DNE(7,U,2,2,"option",34),a.k0s()()()()}if(2&e){const e=a.XpG();a.R7$(5),a.R50("ngModel",e.spiceImport.idField),a.R7$(2),a.Y8G("ngForOf",e.spiceImport.fileHeader)("ngForTrackBy",e.trackByFn)}}function H(e,t){1&e&&a.nrm(0,"system-button-icon",51),2&e&&a.Y8G("icon","lock")}function P(e,t){if(1&e&&(a.qex(0),a.j41(1,"option",52),a.EFF(2),a.k0s(),a.bVm()),2&e){const e=t.$implicit,s=a.XpG(3);a.R7$(),a.Y8G("disabled",s.isChosen(e.name))("value",e.name),a.R7$(),a.SpI(" ",e.displayname," ")}}function q(e,t){if(1&e&&(a.j41(0,"td")(1,"div",25),a.EFF(2),a.k0s()()),2&e){const e=t.$implicit,s=a.XpG().index;a.R7$(2),a.JRh(e[s])}}function z(e,t){if(1&e){const e=a.RV6();a.j41(0,"tr")(1,"td",46)(2,"div",47),a.DNE(3,H,1,1,"system-button-icon",48),a.k0s()(),a.j41(4,"td",49)(5,"div",25),a.EFF(6),a.k0s()(),a.j41(7,"td")(8,"div",25)(9,"div",8)(10,"div",31)(11,"select",50),a.bIt("change",(function(t){const s=a.eBV(e).$implicit,i=a.XpG(2);return a.Njj(i.setMapping(s,t))})),a.nrm(12,"option",33),a.DNE(13,P,3,3,"ng-container",45),a.k0s()()()()(),a.DNE(14,q,3,1,"td",45),a.k0s()}if(2&e){const e=t.$implicit,s=a.XpG(2);a.R7$(3),a.Y8G("ngIf",s.spiceImport.idField==e),a.R7$(3),a.JRh(e),a.R7$(5),a.Y8G("disabled",s.spiceImport.idField==e)("value",s.spiceImport.idField==e?e:s.getMapping(e)),a.R7$(2),a.Y8G("ngForOf",s.modelFields)("ngForTrackBy",s.trackByFn),a.R7$(),a.Y8G("ngForOf",s.spiceImport.fileData)("ngForTrackBy",s.trackByFn)}}function K(e,t){if(1&e&&(a.j41(0,"table",36)(1,"thead")(2,"tr",37)(3,"th",38)(4,"div",39),a.nrm(5,"system-label",40),a.k0s()(),a.j41(6,"th",41)(7,"div",39),a.EFF(8),a.nrm(9,"system-label",42),a.k0s()(),a.j41(10,"th",43)(11,"div",39),a.nrm(12,"system-label",44),a.EFF(13),a.k0s()()()(),a.j41(14,"tbody"),a.DNE(15,z,15,8,"tr",45),a.k0s()()),2&e){const e=a.XpG();a.R7$(8),a.SpI("",e.model.module," "),a.R7$(5),a.SpI(" (",e.spiceImport.fileRows,") "),a.R7$(2),a.Y8G("ngForOf",e.spiceImport.fileHeader)("ngForTrackBy",e.trackByFn)}}let J=(()=>{class SpiceImporterMap{constructor(e,t){this.spiceImport=e,this.model=t,this.modelFields=void 0,this.requiredModelFields=void 0}get idFieldAction(){return this.spiceImport.idFieldAction}set idFieldAction(e){this.spiceImport.idFieldAction=e,"auto"==e&&(this.spiceImport.idField="")}get description(){return this.spiceImport.stepLongText}getMapping(e){return this.spiceImport.getMapping(e)}setMapping(e,t){this.spiceImport.setMapping(e,t.target.value)}checkRequired(e){let t=_.invert(this.spiceImport.fileMapping).hasOwnProperty(e),s=this.spiceImport.fixedFields.some((t=>t.field==e));return t||s}isChosen(e){return!!_.invert(this.spiceImport.fileMapping)[e]}trackByFn(e,t){return e}static#e=this.ɵfac=function(e){return new(e||SpiceImporterMap)(a.rXU(h),a.rXU(m.g))};static#t=this.ɵcmp=a.VBU({type:SpiceImporterMap,selectors:[["spice-importer-map"]],inputs:{modelFields:[a.Mj6.None,"modelfields","modelFields"],requiredModelFields:[a.Mj6.None,"requiredmodelfields","requiredModelFields"]},decls:25,vars:6,consts:[[1,"slds-grid","slds-wrap","slds-height_full"],[1,"slds-p-horizontal--small","slds-size--1-of-4","slds-border--right","slds-height_full"],[1,"slds-text-body--regular","slds-box","slds-m-vertical--small","slds-text-color--weak",2,"padding",".25rem"],[4,"ngIf"],[1,"slds-m-vertical--x-small"],[1,"slds-form-element","slds-m-top--small"],[1,"slds-form-element__legend","slds-form-element__label"],["label","LBL_UNIQUE_FIELD"],[1,"slds-form-element__control"],[1,"slds-radio"],["type","radio","id","idFieldAuto","name","idFieldOptions","value","auto",3,"ngModel","ngModelChange"],["for","idFieldAuto",1,"slds-radio__label"],[1,"slds-radio_faux"],[1,"slds-form-element__label"],["label","LBL_HAVE_NO_ID"],["type","radio","id","idFieldHave","name","idFieldOptions","value","have",3,"ngModel","ngModelChange"],["for","idFieldHave",1,"slds-radio__label"],["label","LBL_ALREAD_HAVE_ID"],["class","slds-form-element  slds-m-vertical--small",4,"ngIf"],[1,"slds-size--3-of-4","slds-height_full"],["class","slds-table slds-table--bordered slds-table--cell-buffer",4,"ngIf"],["label","MSG_REQUIRED_MAPPED_FIXED"],[1,"slds-tile__detail","slds-text-body--small","slds-p-horizontal--small"],["class","slds-grid",4,"ngFor","ngForOf","ngForTrackBy"],[1,"slds-grid"],[1,"slds-truncate"],[1,"slds-col--bump-left","slds-truncate"],[3,"ngClass","icon"],[1,"slds-form-element","slds-m-vertical--small"],["for","idFieldSelect",1,"slds-form-element__label"],["label","LBL_SELECT_ID_FIELD"],[1,"slds-select_container"],["id","idFieldSelect",1,"slds-select",3,"ngModel","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf","ngForTrackBy"],[3,"value"],[1,"slds-table","slds-table--bordered","slds-table--cell-buffer"],[1,"slds-text-title--caps"],["scope","col","colspan","2"],[1,"slds-truncate","slds-p-vertical--xx-small",2,"font-weight","600"],["label","LBL_HEADER"],["scope","col"],["label","LBL_FIELDS"],["colspan","2","scope","col"],["label","LBL_RECORDS"],[4,"ngFor","ngForOf","ngForTrackBy"],["scope","row","width","22px",1,"slds-p-right--none","slds-p-left--none","slds-text-align_center"],[1,"slds-text-align_center","slds-p-around--xx-small"],["size","small",3,"icon",4,"ngIf"],["scope","row"],[1,"slds-select",3,"disabled","value","change"],["size","small",3,"icon"],[3,"disabled","value"]],template:function(e,t){1&e&&(a.j41(0,"div",0)(1,"div",1)(2,"div",2),a.EFF(3),a.k0s(),a.DNE(4,X,5,2,"div",3),a.j41(5,"div",4)(6,"fieldset",5)(7,"legend",6),a.nrm(8,"system-label",7),a.k0s(),a.j41(9,"div",8)(10,"span",9)(11,"input",10),a.mxI("ngModelChange",(function(e){return a.DH7(t.idFieldAction,e)||(t.idFieldAction=e),e})),a.k0s(),a.j41(12,"label",11),a.nrm(13,"span",12),a.j41(14,"span",13),a.nrm(15,"system-label",14),a.k0s()()(),a.j41(16,"span",9)(17,"input",15),a.mxI("ngModelChange",(function(e){return a.DH7(t.idFieldAction,e)||(t.idFieldAction=e),e})),a.k0s(),a.j41(18,"label",16),a.nrm(19,"span",12),a.j41(20,"span",13),a.nrm(21,"system-label",17),a.k0s()()()()(),a.DNE(22,V,8,3,"div",18),a.k0s()(),a.j41(23,"div",19),a.DNE(24,K,16,4,"table",20),a.k0s()()),2&e&&(a.R7$(3),a.SpI(" ",t.spiceImport.stepLongText," "),a.R7$(),a.Y8G("ngIf",t.modelFields&&"new"==t.spiceImport.importAction),a.R7$(7),a.R50("ngModel",t.idFieldAction),a.R7$(6),a.R50("ngModel",t.idFieldAction),a.R7$(5),a.Y8G("ngIf","have"==t.idFieldAction),a.R7$(2),a.Y8G("ngIf",t.spiceImport.fileHeader.length>0))},dependencies:[k.YU,k.Sq,k.bT,l.xH,l.y7,l.me,l.wz,l.Fm,l.BC,l.vS,O.t,b.W],encapsulation:2})}return SpiceImporterMap})();var W=s(41731),Q=s(15091);const Z=(e,t)=>({"slds-text-color_success":e,"slds-text-color--error":t});function ee(e,t){if(1&e&&(a.j41(0,"div",13)(1,"span",14),a.EFF(2),a.k0s(),a.j41(3,"span",15),a.nrm(4,"system-button-icon",16),a.k0s()()),2&e){const e=t.$implicit,s=a.XpG(2);a.R7$(2),a.SpI(" ",e.displayname," "),a.R7$(2),a.Y8G("ngClass",a.l_i(3,Z,s.checkRequired(e.name),!s.checkRequired(e.name)))("icon",s.checkRequired(e.name)?"success":"record")}}function te(e,t){if(1&e&&(a.j41(0,"div")(1,"legend",9),a.nrm(2,"system-label",10),a.k0s(),a.j41(3,"div",11),a.DNE(4,ee,5,6,"div",12),a.k0s()()),2&e){const e=a.XpG();a.R7$(4),a.Y8G("ngForOf",e.requiredModelFields)}}function se(e,t){if(1&e&&(a.j41(0,"option",32),a.EFF(1),a.k0s()),2&e){const e=t.$implicit,s=a.XpG(3);a.Y8G("disabled",s.isChosen(e.name))("value",e.name),a.R7$(),a.SpI("",e.displayname," ")}}function ie(e,t){if(1&e&&(a.j41(0,"div",25),a.nrm(1,"field-container",33),a.k0s()),2&e){const e=a.XpG().$implicit;a.R7$(),a.Y8G("field",e.field)}}function le(e,t){if(1&e){const e=a.RV6();a.j41(0,"tr")(1,"td")(2,"div",14)(3,"div",25)(4,"div")(5,"select",26),a.bIt("change",(function(t){const s=a.eBV(e).index,i=a.XpG(2);return a.Njj(i.setFixedField(s,t.srcElement.value))})),a.nrm(6,"option",27),a.DNE(7,se,2,3,"option",28),a.k0s()()()()(),a.j41(8,"td")(9,"div",14),a.DNE(10,ie,2,1,"div",29),a.k0s()(),a.j41(11,"td")(12,"button",30),a.bIt("click",(function(){const t=a.eBV(e).index,s=a.XpG(2);return a.Njj(s.removeFixed(t))})),a.nrm(13,"system-button-icon",31),a.k0s()()()}if(2&e){const e=t.$implicit,s=a.XpG(2);a.R7$(5),a.Y8G("disabled",s.getFixed(e))("value",s.getFixed(e)),a.R7$(2),a.Y8G("ngForOf",s.filteredModuleFileds),a.R7$(3),a.Y8G("ngIf",e.field),a.R7$(3),a.Y8G("icon","clear")("size","large")}}function oe(e,t){if(1&e&&(a.j41(0,"table",17)(1,"thead")(2,"tr",18)(3,"th",19)(4,"div",20),a.nrm(5,"system-label",21),a.k0s()(),a.j41(6,"th",19)(7,"div",20),a.nrm(8,"system-label",22),a.k0s()(),a.nrm(9,"th",23),a.k0s()(),a.j41(10,"tbody"),a.DNE(11,le,14,6,"tr",24),a.k0s()()),2&e){const e=a.XpG();a.R7$(11),a.Y8G("ngForOf",e.spiceImport.fixedFields)}}let re=(()=>{class SpiceImporterFixed{constructor(e,t,s){this.spiceImport=e,this.model=t,this.view=s,this.view.isEditable=!0,this.view.setEditMode(),this.view.displayLabels=!1}set currentImportStep(e){2==e&&this.getFilteredModuleFields()}get modelFields(){return this.modelfields}set modelFields(e){this.modelfields=e,this.filteredModuleFileds=e}getFilteredModuleFields(){let e=_.invert(this.spiceImport.fileMapping);this.filteredModuleFileds=this.modelFields.filter((t=>!e.hasOwnProperty(t.name)))}setFixedField(e,t){this.spiceImport.setFixedField(e,t)}getFixed(e){return this.spiceImport.getFixed(e)}removeFixed(e){this.model.setData(_.omit(this.model.data,this.spiceImport.fixedFields[e].field)),this.spiceImport.removeFixed(e)}checkRequired(e){let t=_.invert(this.spiceImport.fileMapping).hasOwnProperty(e),s=this.spiceImport.fixedFields.some((t=>t.field==e));return t||s}isChosen(e){return!!_.invert(this.spiceImport.fileMapping)[e]}static#e=this.ɵfac=function(e){return new(e||SpiceImporterFixed)(a.rXU(h),a.rXU(m.g),a.rXU(W.U))};static#t=this.ɵcmp=a.VBU({type:SpiceImporterFixed,selectors:[["spice-importer-fixed"]],inputs:{requiredModelFields:[a.Mj6.None,"requiredmodelfields","requiredModelFields"],currentImportStep:[a.Mj6.None,"currentimportstep","currentImportStep"],modelFields:[a.Mj6.None,"modelfields","modelFields"]},features:[a.Jv_([W.U])],decls:10,vars:3,consts:[[1,"slds-grid","slds-wrap","slds-height_full"],[1,"slds-p-horizontal--small","slds-size--1-of-4","slds-border--right","slds-height_full"],[1,"slds-text-body--regular","slds-box","slds-m-vertical--small","slds-text-color--weak",2,"padding",".25rem"],[4,"ngIf"],[1,"slds-size--3-of-4","slds-height_full"],["class","slds-table slds-table--bordered slds-table--cell-buffer",4,"ngIf"],[1,"slds-grid","slds-grid--align-center","slds-p-vertical--xx-small"],["type","button",1,"slds-button","slds-button--brand",3,"click"],["label","LBL_ADD_FIXED_FIELDS","length","short"],[1,"slds-form-element__legend","slds-form-element__label"],["label","MSG_REQUIRED_MAPPED_FIXED"],[1,"slds-tile__detail","slds-text-body--small","slds-p-horizontal--small"],["class","slds-grid",4,"ngFor","ngForOf"],[1,"slds-grid"],[1,"slds-truncate"],[1,"slds-col--bump-left","slds-truncate"],[3,"ngClass","icon"],[1,"slds-table","slds-table--bordered","slds-table--cell-buffer"],[1,"slds-text-title--caps"],["scope","col","width","50%"],[1,"slds-truncate","slds-p-vertical--xx-small",2,"font-weight","600"],["label","LBL_FIELD"],["label","LBL_VALUE"],["scope","col"],[4,"ngFor","ngForOf"],[1,"slds-form-element__control"],[1,"slds-select",3,"disabled","value","change"],["value",""],[3,"disabled","value",4,"ngFor","ngForOf"],["class","slds-form-element__control",4,"ngIf"],[1,"slds-button","slds-button--icon",3,"click"],[3,"icon","size"],[3,"disabled","value"],[3,"field"]],template:function(e,t){1&e&&(a.j41(0,"div",0)(1,"div",1)(2,"div",2),a.EFF(3),a.k0s(),a.DNE(4,te,5,1,"div",3),a.k0s(),a.j41(5,"div",4),a.DNE(6,oe,12,1,"table",5),a.j41(7,"div",6)(8,"button",7),a.bIt("click",(function(){return t.spiceImport.addFixed()})),a.nrm(9,"system-label",8),a.k0s()()()()),2&e&&(a.R7$(3),a.SpI(" ",t.spiceImport.stepLongText," "),a.R7$(),a.Y8G("ngIf",t.modelFields&&"new"==t.spiceImport.importAction),a.R7$(2),a.Y8G("ngIf",t.spiceImport.fileHeader.length>0))},dependencies:[k.YU,k.Sq,k.bT,l.xH,l.y7,O.t,b.W,Q.y],encapsulation:2})}return SpiceImporterFixed})();var ne=s(45915);function de(e,t){if(1&e&&(a.j41(0,"option",31),a.EFF(1),a.k0s()),2&e){const e=t.$implicit;a.Y8G("value",e),a.R7$(),a.JRh(e)}}function pe(e,t){if(1&e&&(a.j41(0,"option",31),a.nrm(1,"system-label-fieldname",35),a.k0s()),2&e){const e=t.$implicit;a.FS9("value",e.value.name),a.R7$(),a.Y8G("field",e.value.name)}}function ae(e,t){if(1&e){const e=a.RV6();a.j41(0,"div",32)(1,"label",24),a.nrm(2,"system-label",33),a.k0s(),a.j41(3,"div",7)(4,"div",26)(5,"select",34),a.mxI("ngModelChange",(function(t){a.eBV(e);const s=a.XpG(2);return a.DH7(s.moduleRejectExistingKey,t)||(s.moduleRejectExistingKey=t),a.Njj(t)})),a.bIt("ngModelChange",(function(t){a.eBV(e);const s=a.XpG(2);return a.Njj(s.setModuleRejectExistingKey(t))})),a.nrm(6,"option",28),a.DNE(7,pe,2,2,"option",29),a.nI1(8,"keyvalue"),a.k0s()()()()}if(2&e){const e=a.XpG(2);a.R7$(5),a.R50("ngModel",e.moduleRejectExistingKey),a.R7$(2),a.Y8G("ngForOf",a.bMT(8,2,e.modelfields))}}function ce(e,t){if(1&e){const e=a.RV6();a.j41(0,"div",22)(1,"div",23)(2,"label",24),a.nrm(3,"system-label",25),a.k0s(),a.j41(4,"div",7)(5,"div",26)(6,"select",27),a.mxI("ngModelChange",(function(t){a.eBV(e);const s=a.XpG();return a.DH7(s.csvRejectExistingKey,t)||(s.csvRejectExistingKey=t),a.Njj(t)})),a.bIt("ngModelChange",(function(t){a.eBV(e);const s=a.XpG();return a.Njj(s.setCSVRejectExistingKey(t))})),a.nrm(7,"option",28),a.DNE(8,de,2,2,"option",29),a.k0s()()()(),a.DNE(9,ae,9,4,"div",30),a.k0s()}if(2&e){const e=a.XpG();a.R7$(6),a.R50("ngModel",e.csvRejectExistingKey),a.R7$(2),a.Y8G("ngForOf",e.spiceImporter.fileHeader),a.R7$(),a.Y8G("ngIf",e.showModuleFieldDropdown)}}let me=(()=>{class SpiceImporterCheck{constructor(e,t,s){this.metadata=e,this.model=t,this.spiceImporter=s,this.showModuleFieldDropdown=!1,this.modelfields=[];const i=this.metadata.getModuleFields(this.model._module);for(let e in i)"non-db"==i[e].source&&"name"!=i[e].type&&"vchar"!=i[e].type&&"char"!=i[e].type&&"id"!=i[e].type||this.modelfields.push({name:i[e].name,vname:i[e].vname})}get fileMapping(){return this.spiceImporter.fileMapping}get importDuplicateAction(){return this.spiceImporter.importDuplicateAction}set importDuplicateAction(e){this.spiceImporter.importDuplicateAction=e,this.setCheckFields(e)}setCSVRejectExistingKey(e){this.spiceImporter.rejectExistingKey=e+"::",this.spiceImporter.fileMapping[e]?this.spiceImporter.rejectExistingKey+=this.spiceImporter.fileMapping[e]:this.showModuleFieldDropdown=!0}setModuleRejectExistingKey(e){const t=this.spiceImporter.rejectExistingKey.split("::");t[1]=e,this.spiceImporter.rejectExistingKey=t.join("::")}setCheckFields(e){if("log"==e){this.spiceImporter.checkFields=[];for(let e in this.fileMapping)this.fileMapping.hasOwnProperty(e)&&this.spiceImporter.checkFields.push({mappedField:e,moduleField:this.fileMapping[e]})}else this.spiceImporter.checkFields=[]}trackByFn(e,t){return e}static#e=this.ɵfac=function(e){return new(e||SpiceImporterCheck)(a.rXU(g.yu),a.rXU(m.g),a.rXU(h))};static#t=this.ɵcmp=a.VBU({type:SpiceImporterCheck,selectors:[["spice-importer-check"]],inputs:{currentImportStep:"currentImportStep"},decls:29,vars:5,consts:[[1,"slds-grid","slds-wrap","slds-height_full"],[1,"slds-p-horizontal--small","slds-size--1-of-4","slds-border--right","slds-height_full"],[1,"slds-text-body--regular","slds-box","slds-m-top--small","slds-text-color--weak",2,"padding",".25rem"],[1,"slds-form","slds-m-around--medium"],[1,"slds-form-element","slds-m-vertical--medium"],[1,"slds-form-element__legend","slds-form-element__label"],["label","LBL_DUPLICATE_ACTION"],[1,"slds-form-element__control"],[1,"slds-radio"],["type","radio","id","importduplicateactionignore","name","duplicateoptions","value","ignore",3,"ngModel","ngModelChange"],["for","importduplicateactionignore",1,"slds-radio__label"],[1,"slds-radio--faux"],[1,"slds-form-element__label"],["label","LBL_IGNORE_DUPLICATE"],["type","radio","id","importduplicateactionlog","name","duplicateoptions","value","log",3,"ngModel","ngModelChange"],["for","importduplicateactionlog",1,"slds-radio__label"],["label","LBL_LOG_DUPLICATES"],["type","radio","id","importduplicateactionreject","name","duplicateoptions","value","reject_existing",3,"ngModel","ngModelChange"],["for","importduplicateactionreject",1,"slds-radio__label"],["label","LBL_REJECT_EXISTING"],["class","slds-grid",4,"ngIf"],[1,"slds-p-horizontal--small","slds-size--3-of-4","slds-height_full"],[1,"slds-grid"],[1,"slds-form-element","slds-m-vertical--small"],["for","idFieldSelectId",1,"slds-form-element__label"],["label","LBL_SELECT_CSV_ID_FIELD"],[1,"slds-select_container"],["id","idFieldSelectId",1,"slds-select",3,"ngModel","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],["class","slds-form-element  slds-m-vertical--small slds-m-left--x-small",4,"ngIf"],[3,"value"],[1,"slds-form-element","slds-m-vertical--small","slds-m-left--x-small"],["label","LBL_SELECT_KEY"],[1,"slds-select",3,"ngModel","ngModelChange"],[3,"field"]],template:function(e,t){1&e&&(a.j41(0,"div",0)(1,"div",1)(2,"div",2),a.EFF(3),a.k0s(),a.j41(4,"div",3)(5,"div",4)(6,"legend",5),a.nrm(7,"system-label",6),a.k0s(),a.j41(8,"div",7)(9,"span",8)(10,"input",9),a.mxI("ngModelChange",(function(e){return a.DH7(t.importDuplicateAction,e)||(t.importDuplicateAction=e),e})),a.k0s(),a.j41(11,"label",10),a.nrm(12,"span",11),a.j41(13,"span",12),a.nrm(14,"system-label",13),a.k0s()()(),a.j41(15,"span",8)(16,"input",14),a.mxI("ngModelChange",(function(e){return a.DH7(t.importDuplicateAction,e)||(t.importDuplicateAction=e),e})),a.k0s(),a.j41(17,"label",15),a.nrm(18,"span",11),a.j41(19,"span",12),a.nrm(20,"system-label",16),a.k0s()()(),a.j41(21,"span",8)(22,"input",17),a.mxI("ngModelChange",(function(e){return a.DH7(t.importDuplicateAction,e)||(t.importDuplicateAction=e),e})),a.k0s(),a.j41(23,"label",18),a.nrm(24,"span",11),a.j41(25,"span",12),a.nrm(26,"system-label",19),a.k0s()()(),a.DNE(27,ce,10,3,"div",20),a.k0s()()()(),a.nrm(28,"div",21),a.k0s()),2&e&&(a.R7$(3),a.SpI(" ",t.spiceImporter.stepLongText," "),a.R7$(7),a.R50("ngModel",t.importDuplicateAction),a.R7$(6),a.R50("ngModel",t.importDuplicateAction),a.R7$(6),a.R50("ngModel",t.importDuplicateAction),a.R7$(5),a.Y8G("ngIf","reject_existing"==t.spiceImporter.importDuplicateAction))},dependencies:[k.Sq,k.bT,l.xH,l.y7,l.me,l.wz,l.Fm,l.BC,l.vS,b.W,ne.P,k.lG],encapsulation:2})}return SpiceImporterCheck})();var ue=s(97021);function he(e,t){if(1&e){const e=a.RV6();a.j41(0,"tr")(1,"td",8)(2,"span",16)(3,"input",22),a.bIt("change",(function(t){const s=a.eBV(e).$implicit,i=a.XpG(2);return a.Njj(i.setCheckedField(s.key,s.value,t))})),a.k0s(),a.j41(4,"label",23),a.nrm(5,"span",19),a.k0s()()(),a.j41(6,"td",8)(7,"div",20),a.EFF(8),a.k0s()(),a.j41(9,"td",8)(10,"div",20),a.EFF(11),a.k0s()()()}if(2&e){const e=t.$implicit,s=a.XpG(2);a.R7$(3),a.FS9("id",e.key),a.Y8G("disabled",s.disableCheckbox(e.value))("checked",s.getCheckedField(e.key)),a.R7$(),a.FS9("for",e.key),a.R7$(4),a.SpI(" ",e.key," "),a.R7$(3),a.SpI(" ",e.value," ")}}function ge(e,t){if(1&e){const e=a.RV6();a.j41(0,"div",5)(1,"table",6)(2,"thead")(3,"tr",7)(4,"th",8),a.nrm(5,"system-button-icon",9),a.k0s(),a.j41(6,"th",10)(7,"div",11)(8,"div",12),a.nrm(9,"system-label",13),a.k0s()()(),a.j41(10,"th",10)(11,"div",14),a.EFF(12),a.nrm(13,"system-label",15),a.k0s()()()(),a.j41(14,"tbody")(15,"tr")(16,"td",8)(17,"span",16)(18,"input",17),a.bIt("change",(function(t){a.eBV(e);const s=a.XpG();return a.Njj(s.setCheckedField(s.spiceImport.idField,"id",t))})),a.k0s(),a.j41(19,"label",18),a.nrm(20,"span",19),a.k0s()()(),a.j41(21,"td",8)(22,"div",20),a.EFF(23),a.k0s()(),a.j41(24,"td",8)(25,"div",20),a.EFF(26," id "),a.k0s()()(),a.DNE(27,he,12,6,"tr",21),a.nI1(28,"objectkeyvalues"),a.k0s()()()}if(2&e){const e=a.XpG();a.R7$(5),a.Y8G("icon","lock"),a.R7$(7),a.SpI(" ",e.model.module," "),a.R7$(6),a.Y8G("checked",e.getCheckedField(e.spiceImport.idField)),a.R7$(5),a.SpI(" ",e.spiceImport.idField," "),a.R7$(4),a.Y8G("ngForOf",a.bMT(28,5,e.fileMapping))}}let fe=(()=>{class SpiceImporterUpdate{constructor(e,t){this.model=e,this.spiceImport=t,this.checkFields=[]}get fileMapping(){return this.spiceImport.fileMapping}disableCheckbox(e){return this.spiceImport.nonDBFields.some((t=>t.name==e))}setCheckedField(e,t,s){s.target.checked?(this.spiceImport.checkFields=this.spiceImport.checkFields.filter((t=>t.mappedField!==e)),this.spiceImport.checkFields.push({mappedField:e,moduleField:t})):this.spiceImport.checkFields=this.spiceImport.checkFields.filter((t=>t.mappedField!==e))}getCheckedField(e){return this.spiceImport.checkFields.some((t=>t.mappedField==e))}static#e=this.ɵfac=function(e){return new(e||SpiceImporterUpdate)(a.rXU(m.g),a.rXU(h))};static#t=this.ɵcmp=a.VBU({type:SpiceImporterUpdate,selectors:[["spice-importer-update"]],inputs:{currentImportStep:"currentImportStep"},decls:6,vars:3,consts:[[1,"slds-grid","slds-wrap","slds-height_full"],[1,"slds-p-horizontal--small","slds-size--1-of-4","slds-border--right","slds-height_full"],[1,"slds-text-body--regular","slds-box","slds-m-top--small","slds-text-color--weak",2,"padding",".25rem"],["size","small",1,"slds-m-right--xx-small",3,"icon"],["class","slds-size--3-of-4 slds-height_full",4,"ngIf"],[1,"slds-size--3-of-4","slds-height_full"],[1,"slds-table","slds-table--bordered","slds-table--cell-buffer",2,"border-top","none"],[1,"slds-text-title--caps"],["scope","row"],["size","small",3,"icon"],["scope","col"],[1,"slds-truncate","slds-p-vertical--x-small"],[1,"slds-form-element__control",2,"font-weight","600"],["label","LBL_MAPPED_FIELDS"],[1,"slds-truncate","slds-p-vertical--x-small",2,"font-weight","600"],["label","LBL_FIELDS"],[1,"slds-checkbox"],["type","checkbox","id","idField",3,"checked","change"],["for","idField",1,"slds-checkbox__label"],[1,"slds-checkbox_faux"],[1,"slds-truncate"],[4,"ngFor","ngForOf"],["type","checkbox",3,"disabled","id","checked","change"],[1,"slds-checkbox__label",3,"for"]],template:function(e,t){1&e&&(a.j41(0,"div",0)(1,"div",1)(2,"div",2),a.nrm(3,"system-button-icon",3),a.EFF(4),a.k0s()(),a.DNE(5,ge,29,7,"div",4),a.k0s()),2&e&&(a.R7$(3),a.Y8G("icon","lock"),a.R7$(),a.SpI(" ",t.spiceImport.stepLongText," "),a.R7$(),a.Y8G("ngIf",(null==t.spiceImport.fileHeader?null:t.spiceImport.fileHeader.length)>0))},dependencies:[k.Sq,k.bT,O.t,b.W,ue.x],encapsulation:2})}return SpiceImporterUpdate})();const Ie=["fileupload"];function be(e,t){if(1&e&&(a.j41(0,"td")(1,"div",13),a.EFF(2),a.k0s()()),2&e){const e=t.$implicit;a.R7$(2),a.JRh(e)}}const Fe=e=>({cursor:e});function ve(e,t){if(1&e){const e=a.RV6();a.j41(0,"tr",11),a.bIt("click",(function(){const t=a.eBV(e).$implicit,s=a.XpG(2);return a.Njj(!!t.recordId&&s.goToRecord(t.recordId))})),a.j41(1,"td",12)(2,"div",13),a.EFF(3),a.k0s()(),a.DNE(4,be,3,1,"td",14),a.k0s()}if(2&e){const e=t.$implicit;a.Y8G("ngStyle",a.eq3(3,Fe,e.recordId?"pointer":"initial")),a.R7$(3),a.JRh(e.status),a.R7$(),a.Y8G("ngForOf",e.data)}}function _e(e,t){if(1&e&&(a.j41(0,"table",3)(1,"thead")(2,"tr",4)(3,"th",5)(4,"div",6),a.nrm(5,"system-label",7),a.k0s()(),a.j41(6,"th",8)(7,"div",6),a.nrm(8,"system-label",9),a.k0s()()()(),a.j41(9,"tbody"),a.DNE(10,ve,5,5,"tr",10),a.k0s()()),2&e){const e=a.XpG();a.R7$(10),a.Y8G("ngForOf",e.spiceImport.result.list)}}let ke=(()=>{class SpiceImporterResult{constructor(e,t,s){this.spiceImport=e,this.model=t,this.router=s}goToRecord(e){this.router.navigate([`/module/${this.model.module}/${e}`])}static#e=this.ɵfac=function(e){return new(e||SpiceImporterResult)(a.rXU(h),a.rXU(m.g),a.rXU(f.Ix))};static#t=this.ɵcmp=a.VBU({type:SpiceImporterResult,selectors:[["spice-importer-result"]],viewQuery:function(e,t){if(1&e&&a.GBs(Ie,7,a.c1b),2&e){let e;a.mGM(e=a.lsd())&&(t.fileupload=e.first)}},decls:3,vars:1,consts:[[1,"slds-wrap","slds-height_full"],[1,"slds-height_full"],["class","slds-table slds-table--bordered slds-table--cell-buffer",4,"ngIf"],[1,"slds-table","slds-table--bordered","slds-table--cell-buffer"],[1,"slds-text-title--caps"],["scope","col"],[1,"slds-truncate",2,"font-weight","600"],["label","LBL_STATUS"],["colspan","4","scope","col"],["label","LBL_DATA"],[3,"ngStyle","click",4,"ngFor","ngForOf"],[3,"ngStyle","click"],["scope","row"],[1,"slds-truncate"],[4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(a.j41(0,"div",0)(1,"div",1),a.DNE(2,_e,11,1,"table",2),a.k0s()()),2&e&&(a.R7$(2),a.Y8G("ngIf",t.spiceImport.result&&t.spiceImport.result.list&&t.spiceImport.result.list.length>0))},dependencies:[k.Sq,k.bT,k.B3,b.W],styles:["\n\n\n\n\n\n\n\n\n\n\n[_nghost-%COMP%]{height:100%}"]})}return SpiceImporterResult})();var Re=s(66031),Se=s(70335),Me=s(68823),Ee=s(44985),je=s(48717);const Le=["contentcontainer"];function ye(e,t){if(1&e&&(a.j41(0,"li",35),a.EFF(1),a.k0s()),2&e){const e=a.XpG();a.R7$(),a.SpI(" ","new"==e.spiceImporter.importAction?e.language.getLabel("LBL_LOAD_NEW_RECORDS"):e.language.getLabel("LBL_UPDATE_EXISTING_RECORDS")," ")}}function xe(e,t){1&e&&a.nrm(0,"system-button-icon",40),2&e&&a.Y8G("icon","success")}const Ge=e=>({"slds-button--icon slds-progress__marker--icon":e});function De(e,t){if(1&e&&(a.j41(0,"li",36)(1,"button",37)(2,"span",38),a.EFF(3),a.k0s(),a.DNE(4,xe,1,1,"system-button-icon",39),a.k0s()()),2&e){const e=t.$implicit,s=a.XpG();a.Y8G("ngClass",s.getStepClass(e)),a.R7$(),a.Y8G("ngClass",a.eq3(4,Ge,s.getStepComplete(e))),a.R7$(2),a.JRh(e),a.R7$(),a.Y8G("ngIf",s.getStepComplete(e))}}function Ce(e,t){if(1&e){const e=a.RV6();a.j41(0,"button",41),a.bIt("click",(function(){a.eBV(e);const t=a.XpG();return a.Njj(t.nextStep())})),a.nrm(1,"system-label",42),a.k0s()}}function $e(e,t){if(1&e&&(a.j41(0,"span",46),a.EFF(1),a.k0s()),2&e){const e=a.XpG(2);a.R7$(),a.SpI(" ","new"==e.spiceImporter.importAction?e.language.getLabel("LBL_IMPORT"):e.language.getLabel("LBL_UPDATE")," ")}}function Ae(e,t){if(1&e&&(a.j41(0,"span",46),a.EFF(1),a.k0s()),2&e){const e=a.XpG(2);a.R7$(),a.SpI(" ","new"==e.spiceImporter.importAction?e.language.getLabel("LBL_IMPORTING"):e.language.getLabel("LBL_UPDATING")," ")}}function Be(e,t){1&e&&a.nrm(0,"system-spinner",47),2&e&&a.Y8G("size",16)}function Te(e,t){if(1&e){const e=a.RV6();a.j41(0,"button",43),a.bIt("click",(function(){a.eBV(e);const t=a.XpG();return a.Njj(t.import())})),a.DNE(1,$e,2,1,"span",44)(2,Ae,2,1,"span",44)(3,Be,1,1,"system-spinner",45),a.k0s()}if(2&e){const e=a.XpG();a.Y8G("disabled",e.processing),a.R7$(),a.Y8G("ngIf",!e.processing),a.R7$(),a.Y8G("ngIf",e.processing),a.R7$(),a.Y8G("ngIf",e.processing)}}function Ne(e,t){if(1&e){const e=a.RV6();a.j41(0,"button",48),a.bIt("click",(function(){a.eBV(e);const t=a.XpG();return a.Njj(t.nextStep())})),a.nrm(1,"system-label",49),a.k0s()}}function Oe(e,t){1&e&&a.nrm(0,"spice-importer-check")}function we(e,t){1&e&&a.nrm(0,"spice-importer-update")}const Ye=e=>({"slds-hide":e});let Xe=(()=>{class SpiceImporter{constructor(e,t,s,i,l,o,r,n){this.spiceImporter=e,this.language=t,this.metadata=s,this.model=i,this.navigationtab=l,this.router=o,this.backend=r,this.toast=n,this.importSteps=["select","map","fixed","check","result"],this.importAction="new",this.processing=!1,this.modelFields=void 0,this.requiredModelFields=void 0,this.showNonDbFields=!1,this.self={},this.model.module=this.navigationtab.activeRoute.params.module,this.model.initialize(),this.metadata.checkModuleAcl(this.model.module,"import")||(this.toast.sendToast(this.language.getLabel("MSG_NOT_AUTHORIZED_TO_IMPORT")+" "+this.language.getModuleName(this.model.module),"error"),this.router.navigate(["/module/"+this.model.module])),this.getModuleFields()}get templateName(){return this.templatename}set templateName(e){this.templatename=e}get currentImportStep(){return this.spiceImporter.currentImportStep}ngOnInit(){this.navigationtab.setTabInfo({displayname:this.language.getLabel("LBL_IMPORT"),displaymodule:this.model.module}),this.spiceImporter.loadModuleAvailableMethods(),this.backend.getRequest("module/SpiceImports/savedimports/"+this.model.module).subscribe((e=>{this.spiceImporter.savedImports=e}))}getModuleFields(){if(""!==this.model.module){this.modelFields=[],this.spiceImporter.nonDBFields=[];let e=this.metadata.getModuleFields(this.model.module);for(let t in e)if(e.hasOwnProperty(t)){let s=e[t];"link"===s.type||"relate"===s.type||"non-db"==s.source&&!this.showNonDbFields||"id"==s.name||(s.displayname=s.name,this.modelFields.push(s)),"non-db"!=s.source&&"link"!=s.type&&"relate"!=s.type||this.spiceImporter.nonDBFields.push(s)}}this.requiredModelFields=this.modelFields.filter((e=>"id"!=e.name&&e.required))}setImportAction(e){let t;switch(this.importAction=e,e){case"new":t=this.importSteps.indexOf("update"),this.importSteps[t]="check",this.spiceImporter.importStepsText[t]="LBL_DUPLICATE_CHECK";break;case"update":t=this.importSteps.indexOf("check"),this.importSteps[t]="update",this.spiceImporter.importStepsText[t]="LBL_UPDATE_EXISTING_RECORDS"}}getCurrentStep(){return this.language.getLabel(this.spiceImporter.importStepsText[this.spiceImporter.currentImportStep])}gotoModule(){this.self.destroy(),this.navigationtab.closeTab(),this.router.navigate(["/module/"+this.model.module])}getContainerStyle(){return{height:"calc(100vh - "+this.contentcontainer.element.nativeElement.getBoundingClientRect().top+"px)","overflow-y":"auto"}}getStepClass(e){let t=this.importSteps.indexOf(e);return t==this.spiceImporter.currentImportStep?"slds-is-active":t<this.spiceImporter.currentImportStep?"slds-is-completed":void 0}getStepComplete(e){return this.importSteps.indexOf(e)<this.spiceImporter.currentImportStep}getProgressBarWidth(){return{width:this.spiceImporter.currentImportStep/(this.importSteps.length-1)*100+"%"}}nextStep(){switch(this.spiceImporter.currentImportStep){case 0:if(""===this.spiceImporter.fileName)return this.toast.sendToast(this.language.getLabel("MSG_SELECT_VALID_FILE"),"error");if("choose"==this.spiceImporter.importTemplateAction&&Object.keys(this.spiceImporter.fileMapping).length<=0&&0==this.spiceImporter.checkFields.length&&0==this.spiceImporter.fixedFields.length)return this.toast.sendToast(this.language.getLabel("LBL_MAKE_SELECTION"),"error");if("new"==this.spiceImporter.importTemplateAction&&!this.templateName)return this.toast.sendToast(this.language.getLabel("MSG_INPUT_REQUIRED"),"error");this.spiceImporter.currentImportStep++;break;case 1:if(Object.keys(this.spiceImporter.fileMapping).length<=0)return this.toast.sendToast(this.language.getLabel("MSG_MAP_FIELDS"),"error");if("have"==this.spiceImporter.idFieldAction&&""==this.spiceImporter.idField)return this.toast.sendToast(this.language.getLabel("LBL_MAKE_SELECTION"),"error");this.spiceImporter.currentImportStep++;break;case 2:for(let e of this.spiceImporter.fixedFields){if(!this.model.data.hasOwnProperty(e.field))return this.toast.sendToast(this.language.getLabel("MSG_INPUT_REQUIRED"),"error");if(this.model.data[e.field].length<1)return this.toast.sendToast(this.language.getLabel("MSG_INPUT_REQUIRED"),"error")}if(!this.checkRequiredMapped()&&"new"==this.spiceImporter.importAction)return this.toast.sendToast(this.language.getLabel("MSG_MAP_FIELDS"),"error");this.spiceImporter.currentImportStep++;break;case 3:if("update"==this.importAction&&this.spiceImporter.checkFields.length<1)return this.toast.sendToast(this.language.getLabel("LBL_MAKE_SELECTION"),"error");this.import();break;case 4:this.gotoModule(),this.spiceImporter.currentImportStep=0;break;default:this.spiceImporter.currentImportStep++}}checkRequiredMapped(){let e=_.invert(this.spiceImporter.fileMapping),t=0,s={};for(let e of this.spiceImporter.fixedFields)s[e.field]=e.field;for(let i of this.requiredModelFields)"id"!=i.name&&(e[i.name]&&t++,s[i.name]&&t++);return this.requiredModelFields.length==t}prevStep(){this.spiceImporter.currentImportStep>0&&this.spiceImporter.currentImportStep--}showNext(){return this.spiceImporter.currentImportStep<this.importSteps.length-2}showImport(){return this.spiceImporter.currentImportStep==this.importSteps.length-2}showExit(){return this.spiceImporter.currentImportStep==this.importSteps.length-1}import(){if(!this.spiceImporter.processByMethod&&"update"==this.importAction&&this.spiceImporter.checkFields.length<1)return this.toast.sendToast(this.language.getLabel("LBL_MAKE_SELECTION"),"error");let e=this.prepareObjectImport();this.spiceImporter.result={},this.processing=!0,this.backend.postRequest("module/SpiceImports/import",null,{objectimport:e}).subscribe((e=>{switch(e.status){case"imported":this.spiceImporter.result=e,this.toast.sendToast(this.language.getLabel("LBL_SUCCESS"),"success");break;case"scheduled":this.gotoModule(),this.toast.sendToast(e.msg,"success");break;case"error":this.toast.sendToast(e.msg,"error","",!1)}this.processing=!1,this.spiceImporter.currentImportStep=4}))}prepareObjectImport(){let e=_.pick(this.spiceImporter,"fileName","fileId","fileHeader","fileMapping","templateName","fileTooBig","enclosure","separator","checkFields","importAction","idFieldAction","idField","fixedFields","importDuplicateAction","selectedMethod","rejectExistingKey");return e.fixedFieldsValues=this.model.data,e.module=this.model.module,""!=this.spiceImporter.idField&&(e.fileMapping[this.spiceImporter.idField]="id"),"have"==e.idFieldAction&&(e.checkFields=[{mappedField:this.spiceImporter.idField,moduleField:"id"}]),e}static#e=this.ɵfac=function(e){return new(e||SpiceImporter)(a.rXU(h),a.rXU(c.B),a.rXU(g.yu),a.rXU(m.g),a.rXU(Re._),a.rXU(f.Ix),a.rXU(u.H),a.rXU(v.o))};static#t=this.ɵcmp=a.VBU({type:SpiceImporter,selectors:[["spice-importer"]],viewQuery:function(e,t){if(1&e&&a.GBs(Le,7,a.c1b),2&e){let e;a.mGM(e=a.lsd())&&(t.contentcontainer=e.first)}},features:[a.Jv_([m.g,h])],decls:40,vars:26,consts:[[1,"slds-page-header"],[1,"slds-grid"],[1,"slds-col","slds-has-flexi-truncate","slds-grid"],[1,"slds-media","slds-no-space","slds-grow"],[3,"module"],[1,"slds-media__body"],["role","navigation","aria-label","Breadcrumbs"],[1,"slds-breadcrumb","slds-list--horizontal"],[1,"slds-breadcrumb__item","slds-text-title--caps"],["href","javascript:void(0);",3,"click"],["href","javascript:void(0);"],["label","LBL_IMPORT"],["class","slds-breadcrumb__item slds-text-title--caps slds-p-left--x-small",4,"ngIf"],[1,"slds-page-header__title","slds-m-right--small","slds-align-middle","slds-truncate"],[1,"slds-grid","slds-grid--vertical-align-center"],["label","LBL_SHOW_NON_DB_FIELDS"],[3,"ngModel","ngModelChange"],[1,"slds-grid","slds-grid--align-spread","slds-p-around--small","slds-theme--shade","slds-border--bottom"],[1,"slds-button","slds-button--neutral",3,"disabled","ngClass","click"],["label","LBL_PREVIOUS"],[1,"slds-progress","slds-progress--shade"],[1,"slds-progress__list"],["class","slds-progress__item",3,"ngClass",4,"ngFor","ngForOf"],[1,"slds-progress-bar","slds-progress-bar_x-small"],[1,"slds-progress-bar__value",3,"ngStyle"],["class","slds-button slds-button--neutral",3,"click",4,"ngIf"],["class","slds-button slds-button--brand slds-grid slds-grid_vertical-align-center",3,"disabled","click",4,"ngIf"],["class","slds-button slds-button--brand",3,"click",4,"ngIf"],[1,"slds-scrollable--y",3,"ngStyle"],["contentcontainer",""],[3,"hidden","templateNameSet","importActionSet"],[3,"modelfields","requiredmodelfields","hidden"],[3,"modelfields","requiredmodelfields","hidden","currentimportstep"],[4,"ngIf"],[3,"hidden"],[1,"slds-breadcrumb__item","slds-text-title--caps","slds-p-left--x-small"],[1,"slds-progress__item",3,"ngClass"],[1,"slds-button","slds-progress__marker",3,"ngClass"],[1,"slds-assistive-text"],[3,"icon",4,"ngIf"],[3,"icon"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_NEXT"],[1,"slds-button","slds-button--brand","slds-grid","slds-grid_vertical-align-center",3,"disabled","click"],["class","slds-p-right--xx-small",4,"ngIf"],["inverse","true",3,"size",4,"ngIf"],[1,"slds-p-right--xx-small"],["inverse","true",3,"size"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_CLOSE"]],template:function(e,t){1&e&&(a.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),a.nrm(4,"system-icon",4),a.j41(5,"div",5)(6,"nav",6)(7,"ol",7)(8,"li",8)(9,"a",9),a.bIt("click",(function(){return t.gotoModule()})),a.nrm(10,"system-label-modulename",4),a.k0s()(),a.j41(11,"li",8)(12,"a",10),a.nrm(13,"system-label",11),a.k0s()(),a.DNE(14,ye,2,1,"li",12),a.k0s()(),a.j41(15,"div")(16,"h1",13),a.EFF(17),a.k0s()()()(),a.j41(18,"div",14),a.nrm(19,"system-label",15),a.j41(20,"system-checkbox-toggle",16),a.mxI("ngModelChange",(function(e){return a.DH7(t.showNonDbFields,e)||(t.showNonDbFields=e),e})),a.bIt("ngModelChange",(function(){return t.getModuleFields()})),a.k0s()()()()(),a.j41(21,"div",17)(22,"button",18),a.bIt("click",(function(){return t.prevStep()})),a.nrm(23,"system-label",19),a.k0s(),a.j41(24,"div",20)(25,"ol",21),a.DNE(26,De,5,6,"li",22),a.k0s(),a.j41(27,"div",23),a.nrm(28,"span",24),a.k0s()(),a.DNE(29,Ce,2,0,"button",25)(30,Te,4,4,"button",26)(31,Ne,2,0,"button",27),a.k0s(),a.j41(32,"div",28,29)(34,"spice-importer-select",30),a.bIt("templateNameSet",(function(e){return t.templateName=e}))("importActionSet",(function(e){return t.setImportAction(e)})),a.k0s(),a.nrm(35,"spice-importer-map",31)(36,"spice-importer-fixed",32),a.DNE(37,Oe,1,0,"spice-importer-check",33)(38,we,1,0,"spice-importer-update",33),a.nrm(39,"spice-importer-result",34),a.k0s()),2&e&&(a.R7$(4),a.Y8G("module",t.model.module),a.R7$(6),a.Y8G("module",t.model.module),a.R7$(4),a.Y8G("ngIf",t.currentImportStep>=1),a.R7$(3),a.SpI(" ",t.getCurrentStep(),""),a.R7$(3),a.R50("ngModel",t.showNonDbFields),a.R7$(2),a.Y8G("disabled",t.showExit())("ngClass",a.eq3(24,Ye,!t.currentImportStep)),a.R7$(4),a.Y8G("ngForOf",t.importSteps),a.R7$(2),a.Y8G("ngStyle",t.getProgressBarWidth()),a.R7$(),a.Y8G("ngIf",t.spiceImporter.currentImportStep<3&&!t.spiceImporter.processByMethod),a.R7$(),a.Y8G("ngIf",3==t.spiceImporter.currentImportStep||t.spiceImporter.processByMethod),a.R7$(),a.Y8G("ngIf",t.showExit()),a.R7$(),a.Y8G("ngStyle",t.getContainerStyle()),a.R7$(2),a.Y8G("hidden",0!==t.currentImportStep),a.R7$(),a.Y8G("modelfields",t.modelFields)("requiredmodelfields",t.requiredModelFields)("hidden",1!==t.currentImportStep),a.R7$(),a.Y8G("modelfields",t.modelFields)("requiredmodelfields",t.requiredModelFields)("hidden",2!==t.currentImportStep)("currentimportstep",t.currentImportStep),a.R7$(),a.Y8G("ngIf",3===t.currentImportStep&&"new"==t.spiceImporter.importAction),a.R7$(),a.Y8G("ngIf",3===t.currentImportStep&&"update"==t.spiceImporter.importAction),a.R7$(),a.Y8G("hidden",4!==t.currentImportStep))},dependencies:[k.YU,k.Sq,k.bT,k.B3,l.BC,l.vS,O.t,Se.x,Me.J,b.W,Ee.r,je.P,N,J,re,me,fe,ke],encapsulation:2})}return SpiceImporter})(),Ue=(()=>{class SpiceImporterModule{static#e=this.ɵfac=function(e){return new(e||SpiceImporterModule)};static#t=this.ɵmod=a.$C({type:SpiceImporterModule});static#s=this.ɵinj=a.G2t({providers:[h],imports:[i.Bb,l.YN,o.SystemComponents,r.GlobalComponents,n.ObjectComponents,d.ObjectFields,p.h]})}return SpiceImporterModule})();("undefined"==typeof ngJitMode||ngJitMode)&&a.Obh(Ue,{declarations:[Xe,N,J,re,me,fe,ke,F],imports:[i.Bb,l.YN,o.SystemComponents,r.GlobalComponents,n.ObjectComponents,d.ObjectFields,p.h],exports:[Xe,F]})}}]);