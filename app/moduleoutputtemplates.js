/*!
 * 
 *                     aacService
 *
 *                     release: 2023.02.001
 *
 *                     date: 2023-08-14 15:59:23
 *
 *                     build: 2023.02.001.1692021563445
 *
 */
"use strict";(self.webpackChunkcore=self.webpackChunkcore||[]).push([["src_modules_outputtemplates_moduleoutputtemplates_ts"],{9769:(e,t,s)=>{s.r(t),s.d(t,{ModuleOutputTemplates:()=>Ue});var l=s(1180),i=s(4755),o=s(5030),n=s(4357),d=s(3190),a=s(4826),c=s(6490),u=s(3735),r=s(2242),p=s(5329),m=s(4154),g=s(5710),h=s(9062),f=s(1553),b=s(3463),_=s(727),Z=s(4505),v=s(4044),T=s(6550),x=s(3278),y=s(2656),O=s(4561),M=s(4664);function F(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",3)(1,"div",23)(2,"span",24)(3,"span",25),r._UZ(4,"system-icon",26),r.qZA(),r.TgZ(5,"span",27),r._uU(6),r.qZA(),r.TgZ(7,"button",28),r.NdJ("click",(function(){r.CHM(e);const t=r.oxw();return r.KtG(t.clearField())})),r._UZ(8,"system-button-icon",29),r.qZA()()()()}if(2&e){const e=r.oxw();r.xp6(4),r.Q6J("module",e.module)("size","small"),r.xp6(2),r.Oqu(e.selectedItem.summary_text),r.xp6(2),r.Q6J("icon","close")}}function L(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",30)(1,"input",31),r.NdJ("focus",(function(){r.CHM(e);const t=r.oxw();return r.KtG(t.searchWithModal())})),r.qZA(),r.TgZ(2,"button",32),r.NdJ("click",(function(){r.CHM(e);const t=r.oxw();return r.KtG(t.searchWithModal())})),r._UZ(3,"system-button-icon",29),r.qZA()()}if(2&e){const e=r.oxw();r.xp6(1),r.Q6J("placeholder",e.placeholder),r.xp6(2),r.Q6J("icon","search")}}function w(e,t){if(1&e&&r._UZ(0,"iframe",33),2&e){const e=r.oxw();r.Q6J("srcdoc",e.sanitizedTemplated,r.oJD)}}function A(e,t){if(1&e&&r._UZ(0,"object",34),2&e){const e=r.oxw();r.Q6J("data",e.blobUrl,r.uOi)}}function J(e,t){1&e&&(r.TgZ(0,"div",35),r._UZ(1,"system-spinner"),r.qZA())}function C(e,t){1&e&&(r.TgZ(0,"div",35),r._UZ(1,"system-label",36),r.qZA())}let N=(()=>{var e;class OutputTemplatesPreview{constructor(e,t,s,i,o,n,d,a){(0,l.Z)(this,"language",void 0),(0,l.Z)(this,"backend",void 0),(0,l.Z)(this,"metadata",void 0),(0,l.Z)(this,"model",void 0),(0,l.Z)(this,"modal",void 0),(0,l.Z)(this,"sanitizer",void 0),(0,l.Z)(this,"cdRef",void 0),(0,l.Z)(this,"toast",void 0),(0,l.Z)(this,"_outputformat","pdf"),(0,l.Z)(this,"loading_output",!1),(0,l.Z)(this,"subscriptions",new _.w0),(0,l.Z)(this,"selectedItem",void 0),(0,l.Z)(this,"compiled_selected_template",""),(0,l.Z)(this,"blobUrl",void 0),this.language=e,this.backend=t,this.metadata=s,this.model=i,this.modal=o,this.sanitizer=n,this.cdRef=d,this.toast=a,this.model.data$.subscribe((e=>{this.checkModelChanges()}))}ngOnDestroy(){this.subscriptions.unsubscribe()}get sanitizedTemplated(){return this.sanitizer.bypassSecurityTrustHtml(this.compiled_selected_template)}get outputformat(){return this._outputformat}set outputformat(e){this._outputformat=e,this.rendertemplate()}checkModelChanges(){this.selectedItem&&this.selectedItem.module!=this.module&&this.clearField()}get module(){return this.model.getField("module_name")}get placeholder(){return this.module?this.language.getModuleCombinedLabel("LBL_SEARCH",this.module):this.language.getLabel("LBL_SEARCH")}searchWithModal(){this.modal.openModal("ObjectModalModuleLookup").subscribe((e=>{e.instance.module=this.module,e.instance.multiselect=!1,this.subscriptions.add(e.instance.selectedItems.subscribe((e=>{e.length&&(this.selectedItem={id:e[0].id,summary_text:e[0].summary_text,module:this.module,data:e[0]},this.blobUrl=null,this.compiled_selected_template=null,this.rendertemplate())})))}))}clearField(){this.selectedItem=void 0,this.blobUrl=null,this.compiled_selected_template=null,this.cdRef.detectChanges()}rendertemplate(){this.loading_output=!0,this.blobUrl=null,this.compiled_selected_template=null,this.cdRef.detectChanges();let e={language:this.model.getField("language"),parentype:this.module,parentid:this.selectedItem.id,body:this.model.getField("body"),header:this.model.getField("header"),footer:this.model.getField("footer"),stylesheet_id:this.model.getField("stylesheet_id"),page_orientation:this.model.getField("page_orientation"),page_size:this.model.getField("page_size"),margin_left:this.model.getField("margin_left"),margin_top:this.model.getField("margin_top"),margin_right:this.model.getField("margin_right"),margin_bottom:this.model.getField("margin_bottom"),id:this.model.id};switch(this.outputformat){case"pdf":this.backend.postRequest("module/OutputTemplates/previewpdf",{},e).subscribe((e=>{let t=this.datatoBlob(atob(e.content),"application/pdf");this.blobUrl=this.sanitizer.bypassSecurityTrustResourceUrl(URL.createObjectURL(t)),this.loading_output=!1,this.cdRef.detectChanges()}),(e=>{this.toast.sendToast(this.language.getLabel("ERR_PROCESSING_OUTPUT_TEMPLATE"),"error",e.error.error.message),this.loading_output=!1,this.cdRef.detectChanges()}));break;case"html":this.backend.postRequest("module/OutputTemplates/previewhtml",{},e).subscribe((e=>{this.compiled_selected_template=e.content,this.loading_output=!1,this.cdRef.detectChanges()}),(e=>{this.toast.sendToast(this.language.getLabel("ERR_PROCESSING_OUTPUT_TEMPLATE"),"error",e.error.error.message),this.loading_output=!1,this.cdRef.detectChanges()}))}}datatoBlob(e,t="",s=512){let l=[];for(let t=0;t<e.length;t+=s){let i=e.slice(t,t+s),o=new Array(i.length);for(let e=0;e<i.length;e++)o[e]=i.charCodeAt(e);let n=new Uint8Array(o);l.push(n)}return new Blob(l,{type:t})}}return e=OutputTemplatesPreview,(0,l.Z)(OutputTemplatesPreview,"ɵfac",(function(t){return new(t||e)(r.Y36(p.d),r.Y36(Z.y),r.Y36(m.Pu),r.Y36(g.o),r.Y36(v.o),r.Y36(T.H7),r.Y36(r.sBO),r.Y36(x.A))})),(0,l.Z)(OutputTemplatesPreview,"ɵcmp",r.Xpm({type:e,selectors:[["output-templates-preview"]],decls:28,vars:9,consts:[[1,"slds-grid","slds-grid--vertical-align-end","slds-gutters_direct-xx-small"],[1,"slds-col","slds-grow","slds-form-element"],[1,"slds-form-element__label"],[1,"slds-form-element__control"],[1,"slds-combobox_container"],["aria-expanded","false","aria-haspopup","listbox","role","combobox",1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click"],[1,"slds-form-element__control","slds-box--border"],["class","slds-form-element__control",4,"ngIf"],["class","slds-combobox__form-element slds-input-has-icon slds-input-has-icon_right",4,"ngIf"],[1,"slds-col","slds-form-element","slds-size--1-of-4"],[1,"slds-form-element__labe"],["label","LBL_DISPLAY"],[1,"slds-form-element__control","slds-p-top--xx-small"],[1,"slds-select_container"],[1,"slds-col","slds-select",3,"disabled","ngModel","ngModelChange"],["value","html"],["value","pdf"],[1,"slds-button","slds-button--icon","slds-button--icon-border",3,"disabled","click"],["icon","refresh"],[1,"slds-m-top--small","slds-border--top","slds-border--right","slds-border--left","slds-border--bottom",2,"height","calc(100vh - 300px)"],["frameBorder","0","style","width: 100%;height: 100%;",3,"srcdoc",4,"ngIf"],["type","application/pdf","width","100%","height","100%",3,"data",4,"ngIf"],["class","slds-align--absolute-center","style","height: 100%;",4,"ngIf"],[1,"slds-pill_container"],[1,"slds-pill","slds-size--1-of-1"],[1,"slds-icon_container","slds-icon-standard-account","slds-pill__icon_container"],[3,"module","size"],[1,"slds-pill__label"],[1,"slds-button","slds-button--icon","slds-pill__remove",3,"click"],[3,"icon"],[1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon_right"],["type","text","autocomplete","none","role","combobox",1,"slds-input","slds-combobox__input",3,"placeholder","focus"],[1,"slds-button","slds-button_icon","slds-input__icon","slds-input__icon_right",3,"click"],["frameBorder","0",2,"width","100%","height","100%",3,"srcdoc"],["type","application/pdf","width","100%","height","100%",3,"data"],[1,"slds-align--absolute-center",2,"height","100%"],["label","MSG_NO_RECORD_SELECTED"]],template:function(e,t){1&e&&(r.TgZ(0,"div",0)(1,"div",1)(2,"label",2),r._uU(3,"Bean"),r.qZA(),r.TgZ(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6),r.YNc(8,F,9,4,"div",7),r.YNc(9,L,4,2,"div",8),r.qZA()()()()(),r.TgZ(10,"div",9)(11,"label",10),r._UZ(12,"system-label",11),r.qZA(),r.TgZ(13,"div",12)(14,"div",13)(15,"select",14),r.NdJ("ngModelChange",(function(e){return t.outputformat=e})),r.TgZ(16,"option",15),r._uU(17,"HTML"),r.qZA(),r.TgZ(18,"option",16),r._uU(19,"PDF"),r.qZA()()()()(),r.TgZ(20,"div")(21,"button",17),r.NdJ("click",(function(){return t.rendertemplate()})),r._UZ(22,"system-button-icon",18),r.qZA()()(),r.TgZ(23,"div",19),r.YNc(24,w,1,1,"iframe",20),r.YNc(25,A,1,1,"object",21),r.YNc(26,J,2,0,"div",22),r.YNc(27,C,2,0,"div",22),r.qZA()),2&e&&(r.xp6(8),r.Q6J("ngIf",t.selectedItem),r.xp6(1),r.Q6J("ngIf",!t.selectedItem),r.xp6(6),r.Q6J("disabled",!t.selectedItem)("ngModel",t.outputformat),r.xp6(6),r.Q6J("disabled",!t.selectedItem||t.loading_output),r.xp6(3),r.Q6J("ngIf","html"===t.outputformat&&!t.loading_output&&t.compiled_selected_template),r.xp6(1),r.Q6J("ngIf","pdf"===t.outputformat&&!t.loading_output&&t.blobUrl),r.xp6(1),r.Q6J("ngIf",t.loading_output),r.xp6(1),r.Q6J("ngIf",!t.selectedItem&&!t.loading_output))},dependencies:[i.O5,o.YN,o.Kr,o.EJ,o.JJ,o.On,y.J,O.f,b._,M.W],encapsulation:2,changeDetection:0})),OutputTemplatesPreview})();const q=function(e){return{"slds-is-active":e}},k=function(e,t){return{"slds-show":e,"slds-hide":t}};let B=(()=>{var e;class OutputTemplatesEditor{constructor(e,t,s){(0,l.Z)(this,"language",void 0),(0,l.Z)(this,"metadata",void 0),(0,l.Z)(this,"model",void 0),(0,l.Z)(this,"selectedTab","body"),(0,l.Z)(this,"componentconfig",{}),this.language=e,this.metadata=t,this.model=s}get bodyfieldset(){return this.componentconfig.body}get headerfieldset(){return this.componentconfig.header}get footerfieldset(){return this.componentconfig.footer}}return e=OutputTemplatesEditor,(0,l.Z)(OutputTemplatesEditor,"ɵfac",(function(t){return new(t||e)(r.Y36(p.d),r.Y36(m.Pu),r.Y36(g.o))})),(0,l.Z)(OutputTemplatesEditor,"ɵcmp",r.Xpm({type:e,selectors:[["ng-component"]],decls:23,vars:35,consts:[["tabtitle","LBL_CONTENT"],[1,"slds-tabs_scoped","slds-p-around--x-small"],["role","tablist",1,"slds-tabs_scoped__nav"],["role","presentation",1,"slds-tabs_scoped__item",3,"ngClass","title","click"],["href","javascript:void(0);","role","tab",1,"slds-tabs_scoped__link"],["label","LBL_CONTENT"],["label","LBL_HEADER"],["label","LBL_FOOTER"],["label","LBL_PREVIEW"],["role","tabpanel",1,"slds-tabs_scoped__content",3,"ngClass"],["direction","vertical",3,"fieldset"]],template:function(e,t){1&e&&(r.TgZ(0,"system-collapsable-tab",0)(1,"div",1)(2,"ul",2)(3,"li",3),r.NdJ("click",(function(){return t.selectedTab="body"})),r.TgZ(4,"a",4),r._UZ(5,"system-label",5),r.qZA()(),r.TgZ(6,"li",3),r.NdJ("click",(function(){return t.selectedTab="header"})),r.TgZ(7,"a",4),r._UZ(8,"system-label",6),r.qZA()(),r.TgZ(9,"li",3),r.NdJ("click",(function(){return t.selectedTab="footer"})),r.TgZ(10,"a",4),r._UZ(11,"system-label",7),r.qZA()(),r.TgZ(12,"li",3),r.NdJ("click",(function(){return t.selectedTab="preview"})),r.TgZ(13,"a",4),r._UZ(14,"system-label",8),r.qZA()()(),r.TgZ(15,"div",9),r._UZ(16,"object-record-fieldset",10),r.qZA(),r.TgZ(17,"div",9),r._UZ(18,"object-record-fieldset",10),r.qZA(),r.TgZ(19,"div",9),r._UZ(20,"object-record-fieldset",10),r.qZA(),r.TgZ(21,"div",9),r._UZ(22,"output-templates-preview"),r.qZA()()()),2&e&&(r.xp6(3),r.Q6J("ngClass",r.VKq(15,q,"body"==t.selectedTab))("title",t.language.getLabel("LBL_CONTENT")),r.xp6(3),r.Q6J("ngClass",r.VKq(17,q,"header"==t.selectedTab))("title",t.language.getLabel("LBL_HEADER")),r.xp6(3),r.Q6J("ngClass",r.VKq(19,q,"footer"==t.selectedTab))("title",t.language.getLabel("LBL_FOOTER")),r.xp6(3),r.Q6J("ngClass",r.VKq(21,q,"preview"==t.selectedTab))("title",t.language.getLabel("LBL_PREVIEW")),r.xp6(3),r.Q6J("ngClass",r.WLB(23,k,"body"==t.selectedTab,"body"!=t.selectedTab)),r.xp6(1),r.Q6J("fieldset",t.bodyfieldset),r.xp6(1),r.Q6J("ngClass",r.WLB(26,k,"header"==t.selectedTab,"header"!=t.selectedTab)),r.xp6(1),r.Q6J("fieldset",t.headerfieldset),r.xp6(1),r.Q6J("ngClass",r.WLB(29,k,"footer"==t.selectedTab,"footer"!=t.selectedTab)),r.xp6(1),r.Q6J("fieldset",t.footerfieldset),r.xp6(1),r.Q6J("ngClass",r.WLB(32,k,"preview"==t.selectedTab,"preview"!=t.selectedTab)))},dependencies:[i.mk,h.d,f.z,b._,N],encapsulation:2})),OutputTemplatesEditor})();function U(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",2)(1,"div",8)(2,"span",9)(3,"span",10),r._UZ(4,"system-icon",11),r.qZA(),r.TgZ(5,"span",12),r._uU(6),r.qZA(),r.TgZ(7,"button",13),r.NdJ("click",(function(){r.CHM(e);const t=r.oxw();return r.KtG(t.clearField())})),r._UZ(8,"system-button-icon",14),r.qZA()()()()}if(2&e){const e=r.oxw();r.xp6(4),r.Q6J("module",e.module)("size","small"),r.xp6(2),r.Oqu(e.selectedItem.summary_text),r.xp6(2),r.Q6J("icon","close")}}function Q(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",15)(1,"input",16),r.NdJ("focus",(function(){r.CHM(e);const t=r.oxw();return r.KtG(t.searchWithModal())})),r.qZA(),r.TgZ(2,"button",17),r.NdJ("click",(function(){r.CHM(e);const t=r.oxw();return r.KtG(t.searchWithModal())})),r._UZ(3,"system-button-icon",14),r.qZA()()}if(2&e){const e=r.oxw();r.xp6(1),r.Q6J("disabled",e.module)("placeholder",e.placeholder),r.xp6(2),r.Q6J("icon","search")}}let R=(()=>{var e;class OutputTemplatesPreviewSelector{constructor(e,t,s,i){(0,l.Z)(this,"language",void 0),(0,l.Z)(this,"metadata",void 0),(0,l.Z)(this,"model",void 0),(0,l.Z)(this,"modal",void 0),(0,l.Z)(this,"subscriptions",new _.w0),(0,l.Z)(this,"selectedItem",void 0),this.language=e,this.metadata=t,this.model=s,this.modal=i}ngOnDestroy(){this.subscriptions.unsubscribe()}get module(){return this.model.getField("module_name")}get placeholder(){return this.language.getModuleCombinedLabel("LBL_SEARCH",this.module)}searchWithModal(){this.modal.openModal("ObjectModalModuleLookup").subscribe((e=>{e.instance.module=this.module,e.instance.multiselect=!1,this.subscriptions.add(e.instance.selectedItems.subscribe((e=>{e.length&&(this.selectedItem=e[0])})))}))}clearField(){this.selectedItem=void 0}}return e=OutputTemplatesPreviewSelector,(0,l.Z)(OutputTemplatesPreviewSelector,"ɵfac",(function(t){return new(t||e)(r.Y36(p.d),r.Y36(m.Pu),r.Y36(g.o),r.Y36(v.o))})),(0,l.Z)(OutputTemplatesPreviewSelector,"ɵcmp",r.Xpm({type:e,selectors:[["output-templates-preview-selector"]],decls:9,vars:2,consts:[[1,"slds-form-element"],[1,"slds-form-element__label"],[1,"slds-form-element__control"],[1,"slds-combobox_container"],["aria-expanded","false","aria-haspopup","listbox","role","combobox",1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click"],[1,"slds-form-element__control","slds-box--border"],["class","slds-form-element__control",4,"ngIf"],["class","slds-input-has-icon slds-input-has-icon--right slds-grow",4,"ngIf"],[1,"slds-pill_container"],[1,"slds-pill","slds-size--1-of-1"],[1,"slds-icon_container","slds-icon-standard-account","slds-pill__icon_container"],[3,"module","size"],[1,"slds-pill__label"],[1,"slds-button","slds-button--icon","slds-pill__remove",3,"click"],[3,"icon"],[1,"slds-input-has-icon","slds-input-has-icon--right","slds-grow"],["type","text","role","combobox",1,"slds-lookup__search-input","slds-input--bare",3,"disabled","placeholder","focus"],[1,"slds-button","slds-button_icon","slds-input__icon","slds-input__icon_right",3,"click"]],template:function(e,t){1&e&&(r.TgZ(0,"div",0)(1,"label",1),r._uU(2,"Bean"),r.qZA(),r.TgZ(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5),r.YNc(7,U,9,4,"div",6),r.YNc(8,Q,4,3,"div",7),r.qZA()()()()()),2&e&&(r.xp6(7),r.Q6J("ngIf",t.selectedItem),r.xp6(1),r.Q6J("ngIf",!t.selectedItem))},dependencies:[i.O5,y.J,O.f],encapsulation:2})),OutputTemplatesPreviewSelector})();var E=s(6625);let I=(()=>{var e;class ObjectActionOutputBeanButton{constructor(e,t,s,i,o,n){(0,l.Z)(this,"language",void 0),(0,l.Z)(this,"model",void 0),(0,l.Z)(this,"modal",void 0),(0,l.Z)(this,"backend",void 0),(0,l.Z)(this,"configuration",void 0),(0,l.Z)(this,"viewContainerRef",void 0),(0,l.Z)(this,"templates",[]),(0,l.Z)(this,"forcedFormat",void 0),(0,l.Z)(this,"modalTitle",void 0),(0,l.Z)(this,"noDownload",void 0),(0,l.Z)(this,"handBack",void 0),(0,l.Z)(this,"buttonText",void 0),(0,l.Z)(this,"actionconfig",void 0),this.language=e,this.model=t,this.modal=s,this.backend=i,this.configuration=o,this.viewContainerRef=n}execute(){let e=this.configuration.getData("OutputTemplates");e&&e[this.model.module]?(this.templates=e[this.model.module],this.openOutput()):(e={},this.modal.openModal("SystemLoadingModal",!1).subscribe((e=>{e.instance.messagelabel="Loading Templates",this.backend.getRequest("module/OutputTemplates/formodule/"+this.model.module,{}).subscribe((t=>{e.instance.self.destroy(),this.configuration.setData("OutputTemplates",t),this.templates=t,this.openOutput()}),(t=>{e.instance.self.destroy()}))})))}openOutput(){this.templates.length>0?(this.templates.sort(((e,t)=>e.name>t.name?1:-1)),this.modal.openModal("ObjectActionOutputBeanModal",!0,this.viewContainerRef.injector).subscribe((e=>{e.instance.templates=this.templates,e.instance.modalTitle=this.modalTitle,e.instance.noDownload=this.noDownload,e.instance.handBack=this.handBack,e.instance.customActionsetId=this.actionconfig.modal_actionset,e.instance.buttonText=this.buttonText}))):this.modal.info("No Templates Found","there are no Output templates defined for the Module")}}return e=ObjectActionOutputBeanButton,(0,l.Z)(ObjectActionOutputBeanButton,"ɵfac",(function(t){return new(t||e)(r.Y36(p.d),r.Y36(g.o),r.Y36(v.o),r.Y36(Z.y),r.Y36(E.C),r.Y36(r.s_b))})),(0,l.Z)(ObjectActionOutputBeanButton,"ɵcmp",r.Xpm({type:e,selectors:[["object-action-output-bean-button"]],decls:2,vars:0,consts:[["label","LBL_PDF"]],template:function(e,t){1&e&&(r.TgZ(0,"span"),r._UZ(1,"system-label",0),r.qZA())},dependencies:[b._],encapsulation:2})),ObjectActionOutputBeanButton})(),Y=(()=>{var e;class ObjectActionLiveCompileBeanButton extends I{constructor(...e){super(...e),(0,l.Z)(this,"actionemitter",new r.vpe)}openOutput(){this.templates.length>0?(this.templates.sort(((e,t)=>e.name>t.name?1:-1)),this.modal.openModal("ObjectActionOutputBeanModal",!0,this.viewContainerRef.injector).subscribe((e=>{e.instance.templates=this.templates,e.instance.modalTitle=this.modalTitle,e.instance.noDownload=this.noDownload,e.instance.handBack=this.handBack,e.instance.liveCompile=!0,e.instance.forcedFormat="pdf",e.instance.customActionsetId=this.actionconfig.modal_actionset,e.instance.buttonText=this.buttonText,e.instance.outputModalService.modalResponse$.subscribe((e=>{"marksent"==e&&this.actionemitter.emit(e)}))}))):this.modal.info("No Templates Found","there are no Output templates defined for the Module")}}return e=ObjectActionLiveCompileBeanButton,(0,l.Z)(ObjectActionLiveCompileBeanButton,"ɵfac",function(){let t;return function(s){return(t||(t=r.n5z(e)))(s||e)}}()),(0,l.Z)(ObjectActionLiveCompileBeanButton,"ɵcmp",r.Xpm({type:e,selectors:[["object-action-live-compile-bean-button"]],outputs:{actionemitter:"actionemitter"},features:[r.qOj],decls:2,vars:0,consts:[["label","LBL_PDF"]],template:function(e,t){1&e&&(r.TgZ(0,"span"),r._UZ(1,"system-label",0),r.qZA())},dependencies:[b._],encapsulation:2})),ObjectActionLiveCompileBeanButton})();var S=s(2198),j=s(2486),P=s(7040),H=s(2294),D=s(3348),z=s(6367),V=s(3208),$=s(5638);function K(e,t){if(1&e&&r._UZ(0,"field-label",3),2&e){const e=r.oxw();r.Q6J("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function W(e,t){if(1&e&&(r.ynx(0),r._uU(1),r.BQk()),2&e){const e=r.oxw(2);r.xp6(1),r.AsE("",null==e.selected_item?null:e.selected_item.name," (",null==e.selected_item?null:e.selected_item.language,")")}}function G(e,t){if(1&e&&(r.TgZ(0,"field-generic-display",4),r.YNc(1,W,2,2,"ng-container",5),r.qZA()),2&e){const e=r.oxw();r.Q6J("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig),r.xp6(1),r.Q6J("ngIf",e.value)}}function X(e,t){if(1&e&&(r.TgZ(0,"option",12),r._uU(1),r.qZA()),2&e){const e=t.$implicit;r.Q6J("ngValue",e.id),r.xp6(1),r.AsE("",e.name," (",e.language,")")}}function ee(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",6)(1,"div",7)(2,"div",8)(3,"select",9),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw();return r.KtG(s.value=t)})),r.YNc(4,X,2,3,"option",10),r.qZA()(),r._UZ(5,"field-messages",11),r.qZA()()}if(2&e){const e=r.oxw();r.xp6(1),r.Q6J("ngClass",e.getFieldClass()),r.xp6(2),r.Q6J("disabled",e.isDisabled)("ngModel",e.value),r.xp6(1),r.Q6J("ngForOf",e.items),r.xp6(1),r.Q6J("fieldname",e.fieldname)}}let te=(()=>{var e;class fieldOutputTemplates extends P.O{constructor(e,t,s,i,o,n,d){super(e,t,s,i,o),(0,l.Z)(this,"model",void 0),(0,l.Z)(this,"view",void 0),(0,l.Z)(this,"language",void 0),(0,l.Z)(this,"metadata",void 0),(0,l.Z)(this,"router",void 0),(0,l.Z)(this,"backend",void 0),(0,l.Z)(this,"configuration",void 0),(0,l.Z)(this,"isLoaded",!1),(0,l.Z)(this,"items",[]),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=o,this.backend=n,this.configuration=d}get isDisabled(){return!this.isLoaded||!this.items}get selected_item(){return this.items.find((e=>e.id==this.value))}ngOnInit(){let e=this.configuration.getData("OutputTemplates");e&&e[this.model.module]?(this.items=e[this.model.module],this.isLoaded=!0):this.backend.getRequest("module/OutputTemplates/formodule/"+this.model.module,{}).subscribe((e=>{this.configuration.setData("OutputTemplates",e),this.items=e,this.isLoaded=!0}))}}return e=fieldOutputTemplates,(0,l.Z)(fieldOutputTemplates,"ɵfac",(function(t){return new(t||e)(r.Y36(g.o),r.Y36(H.e),r.Y36(p.d),r.Y36(m.Pu),r.Y36(D.F0),r.Y36(Z.y),r.Y36(E.C))})),(0,l.Z)(fieldOutputTemplates,"ɵcmp",r.Xpm({type:e,selectors:[["field-output-templates"]],features:[r.qOj],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig",4,"ngIf"],["class","slds-form-element",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig"],[4,"ngIf"],[1,"slds-form-element"],[1,"slds-form-element__control",3,"ngClass"],[1,"slds-select_container","slds-m-vertical--xx-small"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"fieldname"],[3,"ngValue"]],template:function(e,t){1&e&&(r.YNc(0,K,1,2,"field-label",0),r.YNc(1,G,2,4,"field-generic-display",1),r.YNc(2,ee,6,5,"div",2)),2&e&&(r.Q6J("ngIf",t.displayLabel),r.xp6(1),r.Q6J("ngIf",!t.isEditMode()),r.xp6(1),r.Q6J("ngIf",t.isEditMode()))},dependencies:[i.mk,i.sg,i.O5,o.YN,o.Kr,o.EJ,o.JJ,o.On,z.q,V.D,$.a],encapsulation:2})),fieldOutputTemplates})();var se=s(5698),le=s(9621),ie=s(3499),oe=s(5767),ne=s(1916),de=s(2161),ae=s(494),ce=s(8859),ue=s(4947);function re(e,t){if(1&e&&(r.TgZ(0,"option",18),r._uU(1),r.qZA()),2&e){const e=r.oxw().$implicit;r.Q6J("value",e.templateObjectName),r.xp6(1),r.Oqu(e.displayName)}}function pe(e,t){if(1&e&&(r.ynx(0),r.YNc(1,re,2,2,"option",62),r.BQk()),2&e){const e=t.$implicit;r.xp6(1),r.Q6J("ngIf","current_user"!==e.templateObjectName&&"template"!==e.templateObjectName)}}function me(e,t){1&e&&(r.TgZ(0,"option",63),r._uU(1," "),r.qZA())}function ge(e,t){1&e&&(r.ynx(0),r.TgZ(1,"option",63),r._uU(2," "),r.qZA(),r.TgZ(3,"option",64),r._UZ(4,"system-label",65),r.qZA(),r.BQk()),2&e&&(r.xp6(3),r.Q6J("value","template"))}function he(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",68)(1,"system-module-tree",69),r.NdJ("itemSelected",(function(t){const s=r.CHM(e).$implicit,l=r.oxw(2);return r.KtG(l.treeItemSelected(t,s.name))})),r.qZA()()}if(2&e){const e=t.$implicit,s=r.oxw(2);r.ekj("slds-hide",s.activeModule!=e.templateObjectName),r.xp6(1),r.Q6J("module",e.name)}}function fe(e,t){if(1&e&&(r.TgZ(0,"div",66),r.YNc(1,he,2,3,"div",67),r.qZA()),2&e){const e=r.oxw();r.xp6(1),r.Q6J("ngForOf",e.offeredModules)("ngForTrackBy",e.trackByFn)}}function be(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"tr")(1,"td")(2,"div",30)(3,"a",70),r.NdJ("click",(function(){const t=r.CHM(e).$implicit,s=r.oxw(2);return r.KtG(s.fieldSelected(t.name))})),r._uU(4),r.qZA()()(),r.TgZ(5,"td")(6,"div",30),r._UZ(7,"system-label",71),r.qZA()()()}if(2&e){const e=t.$implicit;r.xp6(4),r.Oqu(e.name),r.xp6(3),r.Q6J("label",e.label)}}function _e(e,t){if(1&e&&(r.TgZ(0,"tbody"),r.YNc(1,be,8,2,"tr",16),r.qZA()),2&e){const e=t.$implicit,s=r.oxw();r.ekj("slds-hide",s.isLoadingModuleFields||s.activeModule!=e.templateObjectName),r.xp6(1),r.Q6J("ngForOf",s.getFilteredFields(s.moduleFields[e.name]))("ngForTrackBy",s.trackByFn)}}function Ze(e,t){1&e&&r._UZ(0,"tbody",72),2&e&&r.Q6J("columns",2)("rows",5)}function ve(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"tr")(1,"td")(2,"div",30)(3,"a",70),r.NdJ("click",(function(){const t=r.CHM(e).$implicit,s=r.oxw();return r.KtG(s.functionSelected(t))})),r._uU(4),r.qZA()()()()}if(2&e){const e=t.$implicit;r.xp6(4),r.Oqu(e.name)}}function Te(e,t){1&e&&(r.TgZ(0,"abbr",83),r._uU(1,"* "),r.qZA())}function xe(e,t){if(1&e&&r._UZ(0,"system-tooltip",84),2&e){const e=r.oxw().$implicit;r.Q6J("tooltiptext",e.help)}}function ye(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"input",85),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw().$implicit;return r.KtG(s.value=t)})),r.qZA()}if(2&e){const e=r.oxw().$implicit;r.Q6J("ngModel",e.value)}}function Oe(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"input",88),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw(2).$implicit;return r.KtG(s.value=t)})),r.qZA()}if(2&e){const e=r.oxw(2).$implicit;r.Q6J("ngModel",e.value)}}function Me(e,t){if(1&e&&(r.TgZ(0,"option",18),r._uU(1),r.qZA()),2&e){const e=t.$implicit;r.Q6J("value",e.key),r.xp6(1),r.Oqu(e.value)}}function Fe(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"select",89),r.NdJ("ngModelChange",(function(t){r.CHM(e);const s=r.oxw(2).$implicit;return r.KtG(s.value=t)})),r.TgZ(1,"option",90),r._uU(2,"Select…"),r.qZA(),r.YNc(3,Me,2,2,"option",91),r.ALo(4,"keyvalue"),r.qZA()}if(2&e){const e=r.oxw(2).$implicit;r.Q6J("ngModel",e.value),r.xp6(3),r.Q6J("ngForOf",r.lcZ(4,2,e.options))}}function Le(e,t){if(1&e&&(r.ynx(0),r.YNc(1,Oe,1,1,"input",86),r.YNc(2,Fe,5,4,"select",87),r.BQk()),2&e){const e=r.oxw().$implicit;r.xp6(1),r.Q6J("ngIf",!e.options),r.xp6(1),r.Q6J("ngIf",e.options)}}function we(e,t){if(1&e&&(r.TgZ(0,"span",92),r._uU(1),r.qZA()),2&e){const e=r.oxw().$implicit;r.xp6(1),r.Oqu(e.unit)}}const Ae=function(e){return{"slds-p-left--x-small":e}},Je=function(e){return{"slds-input-has-fixed-addon":e}};function Ce(e,t){if(1&e&&(r.ynx(0),r.TgZ(1,"div",74)(2,"label",75),r.YNc(3,Te,2,0,"abbr",76),r._UZ(4,"system-label",71),r.YNc(5,xe,1,1,"system-tooltip",77),r.qZA(),r.TgZ(6,"div",78),r.ynx(7,79),r.YNc(8,ye,1,1,"input",80),r.YNc(9,Le,3,2,"ng-container",81),r.YNc(10,we,2,1,"span",82),r.BQk(),r.qZA()(),r.BQk()),2&e){const e=t.$implicit,s=t.first;r.xp6(1),r.Q6J("ngClass",r.VKq(8,Ae,!s)),r.xp6(2),r.Q6J("ngIf",e.required),r.xp6(1),r.Q6J("label",e.label),r.xp6(1),r.Q6J("ngIf",e.help),r.xp6(1),r.Q6J("ngClass",r.VKq(10,Je,!!e.unit)),r.xp6(1),r.Q6J("ngSwitch",e.type),r.xp6(1),r.Q6J("ngSwitchCase","color"),r.xp6(2),r.Q6J("ngIf",e.unit)}}function Ne(e,t){if(1&e&&(r.TgZ(0,"div",73),r.YNc(1,Ce,11,12,"ng-container",48),r.qZA()),2&e){const e=r.oxw();r.xp6(1),r.Q6J("ngForOf",e.actualFunctionParams)}}let qe=(()=>{var e;class OutputTemplatesVariableHelper{constructor(e,t,s,i,o){(0,l.Z)(this,"language",void 0),(0,l.Z)(this,"metadata",void 0),(0,l.Z)(this,"backend",void 0),(0,l.Z)(this,"cdr",void 0),(0,l.Z)(this,"model",void 0),(0,l.Z)(this,"self",void 0),(0,l.Z)(this,"response",new r.vpe),(0,l.Z)(this,"templateModel",void 0),(0,l.Z)(this,"offeredModules",[]),(0,l.Z)(this,"activeModule",void 0),(0,l.Z)(this,"moduleFields",[]),(0,l.Z)(this,"allFunctions",void 0),(0,l.Z)(this,"offeredFunctions",void 0),(0,l.Z)(this,"fieldFilter",""),(0,l.Z)(this,"isLoadingModuleFields",!1),(0,l.Z)(this,"isLoadingFunctions",!1),(0,l.Z)(this,"modulePathFromTree",""),(0,l.Z)(this,"functionResult",""),(0,l.Z)(this,"fieldResult",""),(0,l.Z)(this,"functionHistory",[]),(0,l.Z)(this,"hasTemplate",!1),(0,l.Z)(this,"actualFunctionParams",[]),this.language=e,this.metadata=t,this.backend=s,this.cdr=i,this.model=o}ngOnInit(){if(this.offeredModules=[{name:"Users",templateObjectName:"current_user",displayName:this.language.getLabel("LBL_CURRENT_USER")}],"CampaignTasks"===this.model?.module){let e={};if(this.metadata.fieldDefs.ProspectLists){let t=this.metadata.fieldDefs.ProspectLists;Object.keys(t).forEach((s=>{if("link"===t[s].type){let l=(t[s].module?t[s].module:t[s].name).toLowerCase();for(let t in this.metadata.fieldDefs)t.toLowerCase()==l&&!0==!e[t]&&(this.offeredModules.push({name:t,templateObjectName:"bean."+t,displayName:this.language.getLabel(this.metadata.getModuleDefs(t).module_label)}),e[t]=!0)}}))}}"LandingPages"!==this.model?.module&&"OutputTemplates"!==this.model?.module&&"EmailTemplates"!==this.model?.module||(this.hasTemplate=!0,this.templateModel=this.model,this.offeredModules.push({name:this.templateModel.module,templateObjectName:"template",displayName:this.language.getLabel("LBL_TEMPLATE")}),this.templateModel.getFieldValue("module_name")&&this.offeredModules.push({name:this.templateModel.getFieldValue("module_name"),templateObjectName:"bean."+this.templateModel.getFieldValue("module_name"),displayName:this.language.getModuleName(this.templateModel.getFieldValue("module_name"),!0)}),this.templateModel.getFieldValue("for_bean")&&this.offeredModules.push({name:this.templateModel.getFieldValue("for_bean"),templateObjectName:"bean."+this.templateModel.getFieldValue("for_bean"),displayName:this.language.getModuleName(this.templateModel.getFieldValue("for_bean"),!0)})),this.language.sortObjects(this.offeredModules,"displayName"),this.loadFunctions()}loadFunctions(){this.isLoadingFunctions=!0,this.backend.getRequest("module/OutputTemplates/templateFunctions").pipe((0,se.q)(1)).subscribe((e=>{this.allFunctions=e,this.language.sortObjects(this.allFunctions.pipe,"name"),this.language.sortObjects(this.allFunctions.noPipe,"name"),this.isLoadingFunctions=!1,this.buildOfferedFunctions()}))}buildOfferedFunctions(){this.fieldResult||this.functionResult?this.offeredFunctions=this.allFunctions.pipe:this.offeredFunctions=this.allFunctions.noPipe}close(){this.self.destroy()}cancel(){this.close()}onModalEscX(){this.cancel()}submit(){let e;this.fieldResult||this.functionResultWithParams||(e=""),!this.fieldResult&&this.functionResultWithParams?e="func."+this.functionResultWithParams:(e=this.fieldResult,this.functionResultWithParams&&(e+="|"+this.functionResultWithParams)),this.response.emit(e),this.close()}getModuleFields(e,t){this.moduleFields[t]=[],this.isLoadingModuleFields=!0,this.cdr.detectChanges(),this.backend.getRequest("dictionary/browser/"+e+"/fields").pipe((0,se.q)(1)).subscribe((e=>{this.moduleFields[t]=e.filter((e=>"relate"!=e.type&&"non-db"!=e.source)),this.isLoadingModuleFields=!1}))}getFilteredFields(e){return this.fieldFilter?e.filter((e=>e.name.toLowerCase().includes(this.fieldFilter.toLowerCase())||e.label&&this.language.getLabel(e.label).toLowerCase().includes(this.fieldFilter.toLowerCase()))):e}trackByFn(e,t){return e}setActiveModuleTab(e){this.activeModule=e}treeItemSelected(e,t){this.modulePathFromTree=e.path,this.getModuleFields(e.module,t)}functionUndo(){if(this.functionHistory.length){let e=this.functionHistory.pop();this.functionResult=e.result,this.actualFunctionParams=e.params,this.buildOfferedFunctions()}}isTypeString(e){switch(e){case"string":case"color":return!0}return!1}get functionResultWithParams(){let e=this.functionResult;return this.actualFunctionParams.forEach((t=>{e+=":","color"===t.type&&"#000000"===t.value||void 0===t.value||""===t.value||(e+=this.isTypeString(t.type)?"'"+t.value+"'":t.value)})),e=e.replace(/:+$/g,""),e}functionSelected(e){this.functionHistory.push({result:this.functionResult,params:this.actualFunctionParams}),this.functionResult=this.functionResultWithParams,this.functionResult&&(this.functionResult+="|"),this.functionResult+=e.name,this.actualFunctionParams=e.paramConfigs?JSON.parse(JSON.stringify(e.paramConfigs)):[],this.buildOfferedFunctions()}fieldSelected(e){let t=this.modulePathFromTree.split(/::/),s=[];for(let e=1;e<t.length;e++)s.push(t[e].split(":").pop());let l=s.join(".");if(l&&(l+="."),-1!==this.activeModule.indexOf("bean.",0))this.fieldResult="bean."+l+e;else switch(this.activeModule){case"current_user":this.fieldResult="current_user."+l+e;break;case"template":this.fieldResult="template."+l+e}this.buildOfferedFunctions()}clearFieldResult(){this.fieldResult="",this.buildOfferedFunctions()}}return e=OutputTemplatesVariableHelper,(0,l.Z)(OutputTemplatesVariableHelper,"ɵfac",(function(t){return new(t||e)(r.Y36(p.d),r.Y36(m.Pu),r.Y36(Z.y),r.Y36(r.sBO),r.Y36(g.o,8))})),(0,l.Z)(OutputTemplatesVariableHelper,"ɵcmp",r.Xpm({type:e,selectors:[["ng-component"]],outputs:{response:"response"},decls:79,vars:19,consts:[["size","large"],[3,"close"],["label","LBL_TEMPLATE_VARIABLE_HELPER"],["margin","none","system-modal-content-grow",""],[1,"slds-grid","slds-grid--vertical",2,"height","100%"],[1,"slds-grid","slds-grow",2,"height","0"],[1,"slds-size--3-of-5","slds-border--right","slds-grid","slds-grid--vertical",2,"height","100%"],[1,"slds-grid","slds-grid--vertical","slds-grow",2,"height","0"],[1,"slds-border--bottom","slds-grid","slds-grid--vertical",2,"height","50%"],[1,"slds-form-element","slds-m-around--small",2,"margin-top","0"],[1,"slds-form-element__label"],[1,"slds-form-element__control"],[1,"slds-select_container"],["id","templateVarHelperSource",1,"slds-select",3,"ngModel","ngModelChange"],["hidden","","selected",""],["label","LBL_SELECT"],[4,"ngFor","ngForOf","ngForTrackBy"],["style","font-size:1px;background-color:#ccc","disabled","",4,"ngIf"],[3,"value"],["label","LBL_CURRENT_USER"],[4,"ngIf"],[1,"slds-grid","slds-grid--vertical","slds-grow",2,"x-height","100"],["class","slds-grow","style","height:0",4,"ngIf"],[1,"slds-grid","slds-grid--vertical",2,"height","50%"],["role","none",1,"slds-input-has-icon","slds-input-has-icon_left","slds-m-around--x-small"],["icon","search","addclasses","slds-input__icon slds-input__icon--left"],["type","search",1,"slds-input",3,"placeholder","ngModel","ngModelChange"],[1,"slds-grow","slds-scrollable--y","slds-m-bottom--x-small"],[1,"slds-table","slds-table_cell-buffer","slds-table_bordered","slds-table--header-fixed",2,"border-top","none"],["scope","col",2,"min-width","20rem"],[1,"slds-truncate"],["label","LBL_FIELD"],["scope","col",1,"slds-p-horizontal--x-small",2,"width","100%"],[1,"slds-truncate","slds-p-left--x-small"],["label","LBL_NAME"],[3,"slds-hide",4,"ngFor","ngForOf","ngForTrackBy"],["system-table-stencils","",3,"columns","rows",4,"ngIf"],[1,"slds-p-horizontal--medium","slds-p-bottom--medium","slds-p-top--xx-small","slds-border--top","slds-grid","slds-grid--vertical-align-end"],[1,"slds-form-element","slds-col--bump-right","slds-grow","slds-m-right--small"],["type","text","disabled","",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-button","slds-button--icon","slds-button_icon-border",3,"disabled","click"],["icon","clear","size","medium"],[1,"slds-assistive-text"],["label","LBL_UNDO"],[1,"slds-size--2-of-5","slds-grid","slds-grid--vertical","slds-p-top--x-small",2,"height","100%"],[1,"slds-line-height_reset"],["scope","col"],["label","LBL_APPLICABLE_FUNCTIONS"],[4,"ngFor","ngForOf"],[1,"slds-border--top","slds-grid","slds-grid--vertical-align-end","slds-p-horizontal--medium","slds-p-bottom--medium","slds-p-top--xx-small"],[1,"slds-grow","slds-p-right--small"],["class","slds-grid slds-p-top--xx-small",4,"ngIf"],[1,"slds-form-element"],["label","LBL_FUNCTION"],["label","LBL_FUNCTION_CHAIN"],[1,"slds-form-element__control","slds-grow"],["type","text","disabled","",1,"slds-input",3,"ngModel"],["icon","undo",3,"size"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_OK"],[3,"value",4,"ngIf"],["disabled","",2,"font-size","1px","background-color","#ccc"],[2,"border-top","1px solid #333333",3,"value"],["label","LBL_TEMPLATE"],[1,"slds-grow",2,"height","0"],["class","slds-scrollable--y","style","height: 100%",3,"slds-hide",4,"ngFor","ngForOf","ngForTrackBy"],[1,"slds-scrollable--y",2,"height","100%"],[3,"module","itemSelected"],["href","javascript:void(0)",3,"click"],[3,"label"],["system-table-stencils","",3,"columns","rows"],[1,"slds-grid","slds-p-top--xx-small"],[1,"slds-form-element","slds-grow",3,"ngClass"],[1,"slds-form-element__label","slds-grid","slds-grid--vertical-align-center"],["class","slds-required","title","required",4,"ngIf"],["class","slds-m-left--x-small",3,"tooltiptext",4,"ngIf"],[1,"slds-form-element__control","slds-grow",3,"ngClass"],[3,"ngSwitch"],["type","color","class","slds-input","style","width:3.5rem;padding-left:2px;padding-right:2px",3,"ngModel","ngModelChange",4,"ngSwitchCase"],[4,"ngSwitchDefault"],["class","slds-form-element__addon",4,"ngIf"],["title","required",1,"slds-required"],[1,"slds-m-left--x-small",3,"tooltiptext"],["type","color",1,"slds-input",2,"width","3.5rem","padding-left","2px","padding-right","2px",3,"ngModel","ngModelChange"],["type","text","class","slds-input",3,"ngModel","ngModelChange",4,"ngIf"],["class","slds-select",3,"ngModel","ngModelChange",4,"ngIf"],["type","text",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-select",3,"ngModel","ngModelChange"],["selected","","value",""],[3,"value",4,"ngFor","ngForOf"],[1,"slds-form-element__addon"]],template:function(e,t){1&e&&(r.TgZ(0,"system-modal",0)(1,"system-modal-header",1),r.NdJ("close",(function(){return t.cancel()})),r._UZ(2,"system-label",2),r.qZA(),r.TgZ(3,"system-modal-content",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"div",9)(10,"label",10),r._uU(11,"Variable Source"),r.qZA(),r.TgZ(12,"div",11)(13,"div",12)(14,"select",13),r.NdJ("ngModelChange",(function(e){return t.activeModule=e})),r.TgZ(15,"option",14),r._UZ(16,"system-label",15),r.qZA(),r.YNc(17,pe,2,1,"ng-container",16),r.YNc(18,me,2,0,"option",17),r.TgZ(19,"option",18),r._UZ(20,"system-label",19),r.qZA(),r.YNc(21,ge,5,1,"ng-container",20),r.qZA()()()(),r.TgZ(22,"div",21),r.YNc(23,fe,2,2,"div",22),r.qZA()(),r.TgZ(24,"div",23)(25,"div",24),r._UZ(26,"system-utility-icon",25),r.TgZ(27,"input",26),r.NdJ("ngModelChange",(function(e){return t.fieldFilter=e})),r.qZA()(),r.TgZ(28,"div",27)(29,"table",28)(30,"thead")(31,"tr")(32,"th",29)(33,"div",30),r._UZ(34,"system-label",31),r.qZA()(),r.TgZ(35,"th",32)(36,"div",33),r._UZ(37,"system-label",34),r.qZA()()()(),r.YNc(38,_e,2,4,"tbody",35),r.YNc(39,Ze,1,2,"tbody",36),r.qZA()()()(),r.TgZ(40,"div",37)(41,"div",38)(42,"label",10),r._UZ(43,"system-label",31),r.qZA(),r.TgZ(44,"div",11)(45,"input",39),r.NdJ("ngModelChange",(function(e){return t.fieldResult=e})),r.qZA()()(),r.TgZ(46,"button",40),r.NdJ("click",(function(){return t.clearFieldResult()})),r._UZ(47,"system-button-icon",41),r.TgZ(48,"span",42),r._UZ(49,"system-label",43),r.qZA()()()(),r.TgZ(50,"div",44)(51,"div",27)(52,"table",28)(53,"thead")(54,"tr",45)(55,"th",46)(56,"div",30),r._UZ(57,"system-label",47),r.qZA()()()(),r.TgZ(58,"tbody"),r.YNc(59,ve,5,1,"tr",48),r.qZA()()(),r.TgZ(60,"div",49)(61,"div",50),r.YNc(62,Ne,2,1,"div",51),r.TgZ(63,"div",52)(64,"label",10),r._UZ(65,"system-label",53),r._uU(66," / "),r._UZ(67,"system-label",54),r.qZA(),r.TgZ(68,"div",55),r._UZ(69,"input",56),r.qZA()()(),r.TgZ(70,"button",40),r.NdJ("click",(function(){return t.functionUndo()})),r._UZ(71,"system-button-icon",57),r.TgZ(72,"span",42),r._UZ(73,"system-label",43),r.qZA()()()()()()(),r.TgZ(74,"system-modal-footer")(75,"button",58),r.NdJ("click",(function(){return t.cancel()})),r._UZ(76,"system-label",59),r.qZA(),r.TgZ(77,"button",60),r.NdJ("click",(function(){return t.submit()})),r._UZ(78,"system-label",61),r.qZA()()()),2&e&&(r.xp6(14),r.Q6J("ngModel",t.activeModule),r.xp6(3),r.Q6J("ngForOf",t.offeredModules)("ngForTrackBy",t.trackByFn),r.xp6(1),r.Q6J("ngIf",t.offeredModules.length),r.xp6(1),r.Q6J("value","current_user"),r.xp6(2),r.Q6J("ngIf",t.hasTemplate),r.xp6(2),r.Q6J("ngIf",!!t.activeModule),r.xp6(4),r.Q6J("placeholder",t.language.getLabel("LBL_SEARCH"))("ngModel",t.fieldFilter),r.xp6(11),r.Q6J("ngForOf",t.offeredModules)("ngForTrackBy",t.trackByFn),r.xp6(1),r.Q6J("ngIf",t.isLoadingModuleFields),r.xp6(6),r.Q6J("ngModel",t.fieldResult),r.xp6(1),r.Q6J("disabled",!t.fieldResult.length),r.xp6(13),r.Q6J("ngForOf",t.offeredFunctions),r.xp6(3),r.Q6J("ngIf",t.actualFunctionParams.length),r.xp6(7),r.Q6J("ngModel",t.functionResultWithParams),r.xp6(1),r.Q6J("disabled",!t.functionHistory.length),r.xp6(1),r.Q6J("size","xx-small"))},dependencies:[i.mk,i.sg,i.O5,i.RF,i.n9,i.ED,o.YN,o.Kr,o.Fj,o.EJ,o.JJ,o.On,y.J,b._,le.j,ie.x,oe.p,ne.y,de.x,ae.S,ce.r,ue.w,i.Nd],encapsulation:2})),OutputTemplatesVariableHelper})();var ke=s(3507);let Be=(()=>{var e;class ObjectActionMarkSentBeanButton extends I{constructor(e,t,s,i,o,n,d,a){super(e,t,s,i,o,a),(0,l.Z)(this,"language",void 0),(0,l.Z)(this,"model",void 0),(0,l.Z)(this,"modal",void 0),(0,l.Z)(this,"backend",void 0),(0,l.Z)(this,"configuration",void 0),(0,l.Z)(this,"toast",void 0),(0,l.Z)(this,"outputModalService",void 0),(0,l.Z)(this,"viewContainerRef",void 0),(0,l.Z)(this,"actionemitter",new r.vpe),this.language=e,this.model=t,this.modal=s,this.backend=i,this.configuration=o,this.toast=n,this.outputModalService=d,this.viewContainerRef=a}execute(){if(!this.outputModalService.selectedTemplate)return;const e=this.outputModalService.selectedTemplate.id;let t=this.model.utils.spiceModel2backend("Letters",this.model.data);this.backend.postRequest(`module/Letters/${this.model.id}/marksent/${e}`,null,t).subscribe((e=>{this.actionemitter.emit({close:!0,name:"marksent"}),e?.success?(this.toast.sendToast(this.language.getLabel("LETTER_MARKED_AS_SENT"),"success"),this.model.setField("letter_status","sent")):this.toast.sendToast(this.language.getLabel("ERR_FAILED_TO_EXECUTE"),"error")}))}}return e=ObjectActionMarkSentBeanButton,(0,l.Z)(ObjectActionMarkSentBeanButton,"ɵfac",(function(t){return new(t||e)(r.Y36(p.d),r.Y36(g.o),r.Y36(v.o),r.Y36(Z.y),r.Y36(E.C),r.Y36(x.A),r.Y36(ke.w),r.Y36(r.s_b))})),(0,l.Z)(ObjectActionMarkSentBeanButton,"ɵcmp",r.Xpm({type:e,selectors:[["object-action-mark-sent-bean-button"]],outputs:{actionemitter:"actionemitter"},features:[r.qOj],decls:2,vars:0,consts:[["label","LBL_MARK_SENT"]],template:function(e,t){1&e&&(r.TgZ(0,"span"),r._UZ(1,"system-label",0),r.qZA())},dependencies:[b._],encapsulation:2})),ObjectActionMarkSentBeanButton})(),Ue=(()=>{var e;class ModuleOutputTemplates{}return e=ModuleOutputTemplates,(0,l.Z)(ModuleOutputTemplates,"ɵfac",(function(t){return new(t||e)})),(0,l.Z)(ModuleOutputTemplates,"ɵmod",r.oAB({type:e})),(0,l.Z)(ModuleOutputTemplates,"ɵinj",r.cJS({imports:[i.ez,o.u5,d.ObjectFields,a.GlobalComponents,c.ObjectComponents,u.SystemComponents,n.o]})),ModuleOutputTemplates})();("undefined"==typeof ngJitMode||ngJitMode)&&r.kYT(Ue,{declarations:[B,N,R,I,S.N,j.s,te,qe,Y,Be],imports:[i.ez,o.u5,d.ObjectFields,a.GlobalComponents,c.ObjectComponents,u.SystemComponents,n.o],exports:[S.N]})}}]);