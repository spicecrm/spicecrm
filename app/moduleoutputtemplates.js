/*!
 * 
 *                     SpiceCRM
 *
 *                     release: 2024.01.001
 *
 *                     date: 2024-05-28 17:40:40
 *
 *                     build: 2024.01.001.1716910840504
 *
 */
"use strict";(self.webpackChunkcore=self.webpackChunkcore||[]).push([["src_modules_outputtemplates_moduleoutputtemplates_ts"],{85759:(e,t,s)=>{s.r(t),s.d(t,{ModuleOutputTemplates:()=>bt});var i=s(60177),l=s(84341),n=s(71341),o=s(7745),a=s(12948),d=s(37328),r=s(70569),c=s(54438),u=s(69904),m=s(83935),p=s(35911),h=s(3719),f=s(2187),b=s(32062),g=s(18359),_=s(49722),R=s(50531),v=s(345),y=s(41081),F=s(25863),k=s(68823),j=s(48717);function L(e,t){if(1&e){const e=c.RV6();c.j41(0,"div",3)(1,"div",23)(2,"span",24)(3,"span",25),c.nrm(4,"system-icon",26),c.k0s(),c.j41(5,"span",27),c.EFF(6),c.k0s(),c.j41(7,"button",28),c.bIt("click",(function(){c.eBV(e);const t=c.XpG();return c.Njj(t.clearField())})),c.nrm(8,"system-button-icon",29),c.k0s()()()()}if(2&e){const e=c.XpG();c.R7$(4),c.Y8G("module",e.module)("size","small"),c.R7$(2),c.JRh(e.selectedItem.summary_text),c.R7$(2),c.Y8G("icon","close")}}function O(e,t){if(1&e){const e=c.RV6();c.j41(0,"div",30)(1,"input",31),c.bIt("focus",(function(){c.eBV(e);const t=c.XpG();return c.Njj(t.searchWithModal())})),c.k0s(),c.j41(2,"button",32),c.bIt("click",(function(){c.eBV(e);const t=c.XpG();return c.Njj(t.searchWithModal())})),c.nrm(3,"system-button-icon",29),c.k0s()()}if(2&e){const e=c.XpG();c.R7$(),c.Y8G("placeholder",e.placeholder),c.R7$(2),c.Y8G("icon","search")}}function T(e,t){if(1&e&&c.nrm(0,"iframe",33),2&e){const e=c.XpG();c.Y8G("srcdoc",e.sanitizedTemplated,c.npT)}}function E(e,t){if(1&e&&c.nrm(0,"object",34),2&e){const e=c.XpG();c.Y8G("data",e.blobUrl,c.f$h)}}function G(e,t){1&e&&(c.j41(0,"div",35),c.nrm(1,"system-spinner"),c.k0s())}function w(e,t){1&e&&(c.j41(0,"div",35),c.nrm(1,"system-label",36),c.k0s())}let I=(()=>{class OutputTemplatesPreview{constructor(e,t,s,i,l,n,o,a){this.language=e,this.backend=t,this.metadata=s,this.model=i,this.modal=l,this.sanitizer=n,this.cdRef=o,this.toast=a,this._outputformat="pdf",this.loading_output=!1,this.subscriptions=new g.yU,this.compiled_selected_template="",this.model.data$.subscribe((e=>{this.checkModelChanges()}))}ngOnDestroy(){this.subscriptions.unsubscribe()}get sanitizedTemplated(){return this.sanitizer.bypassSecurityTrustHtml(this.compiled_selected_template)}get outputformat(){return this._outputformat}set outputformat(e){this._outputformat=e,this.rendertemplate()}checkModelChanges(){this.selectedItem&&this.selectedItem.module!=this.module&&this.clearField()}get module(){return this.model.getField("module_name")}get placeholder(){return this.module?this.language.getModuleCombinedLabel("LBL_SEARCH",this.module):this.language.getLabel("LBL_SEARCH")}searchWithModal(){this.modal.openModal("ObjectModalModuleLookup").subscribe((e=>{e.instance.module=this.module,e.instance.multiselect=!1,this.subscriptions.add(e.instance.selectedItems.subscribe((e=>{e.length&&(this.selectedItem={id:e[0].id,summary_text:e[0].summary_text,module:this.module,data:e[0]},this.blobUrl=null,this.compiled_selected_template=null,this.rendertemplate())})))}))}clearField(){this.selectedItem=void 0,this.blobUrl=null,this.compiled_selected_template=null,this.cdRef.detectChanges()}rendertemplate(){this.loading_output=!0,this.blobUrl=null,this.compiled_selected_template=null,this.cdRef.detectChanges();let e={language:this.model.getField("language"),parentype:this.module,parentid:this.selectedItem.id,body:this.model.getField("body"),header:this.model.getField("header"),footer:this.model.getField("footer"),stylesheet_id:this.model.getField("stylesheet_id"),page_orientation:this.model.getField("page_orientation"),page_size:this.model.getField("page_size"),margin_left:this.model.getField("margin_left"),margin_top:this.model.getField("margin_top"),margin_right:this.model.getField("margin_right"),margin_bottom:this.model.getField("margin_bottom"),id:this.model.id};switch(this.outputformat){case"pdf":this.backend.postRequest("module/OutputTemplates/previewpdf",{},e).subscribe((e=>{let t=this.datatoBlob(atob(e.content),"application/pdf");this.blobUrl=this.sanitizer.bypassSecurityTrustResourceUrl(URL.createObjectURL(t)),this.loading_output=!1,this.cdRef.detectChanges()}),(e=>{this.toast.sendToast(this.language.getLabel("ERR_PROCESSING_OUTPUT_TEMPLATE"),"error",e.error.error.message),this.loading_output=!1,this.cdRef.detectChanges()}));break;case"html":this.backend.postRequest("module/OutputTemplates/previewhtml",{},e).subscribe((e=>{this.compiled_selected_template=e.content,this.loading_output=!1,this.cdRef.detectChanges()}),(e=>{this.toast.sendToast(this.language.getLabel("ERR_PROCESSING_OUTPUT_TEMPLATE"),"error",e.error.error.message),this.loading_output=!1,this.cdRef.detectChanges()}))}}datatoBlob(e,t="",s=512){let i=[];for(let t=0;t<e.length;t+=s){let l=e.slice(t,t+s),n=new Array(l.length);for(let e=0;e<l.length;e++)n[e]=l.charCodeAt(e);let o=new Uint8Array(n);i.push(o)}return new Blob(i,{type:t})}static#e=this.ɵfac=function(e){return new(e||OutputTemplatesPreview)(c.rXU(u.B),c.rXU(_.H),c.rXU(m.yu),c.rXU(p.g),c.rXU(R.y),c.rXU(v.up),c.rXU(c.gRc),c.rXU(y.o))};static#t=this.ɵcmp=c.VBU({type:OutputTemplatesPreview,selectors:[["output-templates-preview"]],decls:28,vars:9,consts:[[1,"slds-grid","slds-grid--vertical-align-end","slds-gutters_direct-xx-small"],[1,"slds-col","slds-grow","slds-form-element"],[1,"slds-form-element__label"],[1,"slds-form-element__control"],[1,"slds-combobox_container"],["aria-expanded","false","aria-haspopup","listbox","role","combobox",1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click"],[1,"slds-form-element__control","slds-box--border"],["class","slds-form-element__control",4,"ngIf"],["class","slds-combobox__form-element slds-input-has-icon slds-input-has-icon_right",4,"ngIf"],[1,"slds-col","slds-form-element","slds-size--1-of-4"],[1,"slds-form-element__labe"],["label","LBL_DISPLAY"],[1,"slds-form-element__control","slds-p-top--xx-small"],[1,"slds-select_container"],[1,"slds-col","slds-select",3,"disabled","ngModel","ngModelChange"],["value","html"],["value","pdf"],[1,"slds-button","slds-button--icon","slds-button--icon-border",3,"disabled","click"],["icon","refresh"],[1,"slds-m-top--small","slds-border--top","slds-border--right","slds-border--left","slds-border--bottom",2,"height","calc(100vh - 300px)"],["frameBorder","0","style","width: 100%;height: 100%;",3,"srcdoc",4,"ngIf"],["type","application/pdf","width","100%","height","100%",3,"data",4,"ngIf"],["class","slds-align--absolute-center","style","height: 100%;",4,"ngIf"],[1,"slds-pill_container"],[1,"slds-pill","slds-size--1-of-1"],[1,"slds-icon_container","slds-icon-standard-account","slds-pill__icon_container"],[3,"module","size"],[1,"slds-pill__label"],[1,"slds-button","slds-button--icon","slds-pill__remove",3,"click"],[3,"icon"],[1,"slds-combobox__form-element","slds-input-has-icon","slds-input-has-icon_right"],["type","text","autocomplete","none","role","combobox",1,"slds-input","slds-combobox__input",3,"placeholder","focus"],[1,"slds-button","slds-button_icon","slds-input__icon","slds-input__icon_right",3,"click"],["frameBorder","0",2,"width","100%","height","100%",3,"srcdoc"],["type","application/pdf","width","100%","height","100%",3,"data"],[1,"slds-align--absolute-center",2,"height","100%"],["label","MSG_NO_RECORD_SELECTED"]],template:function(e,t){1&e&&(c.j41(0,"div",0)(1,"div",1)(2,"label",2),c.EFF(3,"Bean"),c.k0s(),c.j41(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6),c.DNE(8,L,9,4,"div",7)(9,O,4,2,"div",8),c.k0s()()()()(),c.j41(10,"div",9)(11,"label",10),c.nrm(12,"system-label",11),c.k0s(),c.j41(13,"div",12)(14,"div",13)(15,"select",14),c.mxI("ngModelChange",(function(e){return c.DH7(t.outputformat,e)||(t.outputformat=e),e})),c.j41(16,"option",15),c.EFF(17,"HTML"),c.k0s(),c.j41(18,"option",16),c.EFF(19,"PDF"),c.k0s()()()()(),c.j41(20,"div")(21,"button",17),c.bIt("click",(function(){return t.rendertemplate()})),c.nrm(22,"system-button-icon",18),c.k0s()()(),c.j41(23,"div",19),c.DNE(24,T,1,1,"iframe",20)(25,E,1,1,"object",21)(26,G,2,0,"div",22)(27,w,2,0,"div",22),c.k0s()),2&e&&(c.R7$(8),c.Y8G("ngIf",t.selectedItem),c.R7$(),c.Y8G("ngIf",!t.selectedItem),c.R7$(6),c.Y8G("disabled",!t.selectedItem),c.R50("ngModel",t.outputformat),c.R7$(6),c.Y8G("disabled",!t.selectedItem||t.loading_output),c.R7$(3),c.Y8G("ngIf","html"===t.outputformat&&!t.loading_output&&t.compiled_selected_template),c.R7$(),c.Y8G("ngIf","pdf"===t.outputformat&&!t.loading_output&&t.blobUrl),c.R7$(),c.Y8G("ngIf",t.loading_output),c.R7$(),c.Y8G("ngIf",!t.selectedItem&&!t.loading_output))},dependencies:[i.bT,l.xH,l.y7,l.wz,l.BC,l.vS,F.t,k.J,b.W,j.P],encapsulation:2,changeDetection:0})}return OutputTemplatesPreview})();const B=e=>({"slds-is-active":e}),M=(e,t)=>({"slds-show":e,"slds-hide":t});let $=(()=>{class OutputTemplatesEditor{constructor(e,t,s){this.language=e,this.metadata=t,this.model=s,this.selectedTab="body",this.componentconfig={}}get bodyfieldset(){return this.componentconfig.body}get headerfieldset(){return this.componentconfig.header}get footerfieldset(){return this.componentconfig.footer}static#e=this.ɵfac=function(e){return new(e||OutputTemplatesEditor)(c.rXU(u.B),c.rXU(m.yu),c.rXU(p.g))};static#t=this.ɵcmp=c.VBU({type:OutputTemplatesEditor,selectors:[["ng-component"]],decls:23,vars:35,consts:[["tabtitle","LBL_CONTENT"],[1,"slds-tabs_scoped","slds-p-around--x-small"],["role","tablist",1,"slds-tabs_scoped__nav"],["role","presentation",1,"slds-tabs_scoped__item",3,"ngClass","title","click"],["href","javascript:void(0);","role","tab",1,"slds-tabs_scoped__link"],["label","LBL_CONTENT"],["label","LBL_HEADER"],["label","LBL_FOOTER"],["label","LBL_PREVIEW"],["role","tabpanel",1,"slds-tabs_scoped__content",3,"ngClass"],["direction","vertical",3,"fieldset"]],template:function(e,t){1&e&&(c.j41(0,"system-collapsable-tab",0)(1,"div",1)(2,"ul",2)(3,"li",3),c.bIt("click",(function(){return t.selectedTab="body"})),c.j41(4,"a",4),c.nrm(5,"system-label",5),c.k0s()(),c.j41(6,"li",3),c.bIt("click",(function(){return t.selectedTab="header"})),c.j41(7,"a",4),c.nrm(8,"system-label",6),c.k0s()(),c.j41(9,"li",3),c.bIt("click",(function(){return t.selectedTab="footer"})),c.j41(10,"a",4),c.nrm(11,"system-label",7),c.k0s()(),c.j41(12,"li",3),c.bIt("click",(function(){return t.selectedTab="preview"})),c.j41(13,"a",4),c.nrm(14,"system-label",8),c.k0s()()(),c.j41(15,"div",9),c.nrm(16,"object-record-fieldset",10),c.k0s(),c.j41(17,"div",9),c.nrm(18,"object-record-fieldset",10),c.k0s(),c.j41(19,"div",9),c.nrm(20,"object-record-fieldset",10),c.k0s(),c.j41(21,"div",9),c.nrm(22,"output-templates-preview"),c.k0s()()()),2&e&&(c.R7$(3),c.Y8G("ngClass",c.eq3(15,B,"body"==t.selectedTab))("title",t.language.getLabel("LBL_CONTENT")),c.R7$(3),c.Y8G("ngClass",c.eq3(17,B,"header"==t.selectedTab))("title",t.language.getLabel("LBL_HEADER")),c.R7$(3),c.Y8G("ngClass",c.eq3(19,B,"footer"==t.selectedTab))("title",t.language.getLabel("LBL_FOOTER")),c.R7$(3),c.Y8G("ngClass",c.eq3(21,B,"preview"==t.selectedTab))("title",t.language.getLabel("LBL_PREVIEW")),c.R7$(3),c.Y8G("ngClass",c.l_i(23,M,"body"==t.selectedTab,"body"!=t.selectedTab)),c.R7$(),c.Y8G("fieldset",t.bodyfieldset),c.R7$(),c.Y8G("ngClass",c.l_i(26,M,"header"==t.selectedTab,"header"!=t.selectedTab)),c.R7$(),c.Y8G("fieldset",t.headerfieldset),c.R7$(),c.Y8G("ngClass",c.l_i(29,M,"footer"==t.selectedTab,"footer"!=t.selectedTab)),c.R7$(),c.Y8G("fieldset",t.footerfieldset),c.R7$(),c.Y8G("ngClass",c.l_i(32,M,"preview"==t.selectedTab,"preview"!=t.selectedTab)))},dependencies:[i.YU,h.D,f.p,b.W,I],encapsulation:2})}return OutputTemplatesEditor})();function C(e,t){if(1&e){const e=c.RV6();c.j41(0,"div",2)(1,"div",8)(2,"span",9)(3,"span",10),c.nrm(4,"system-icon",11),c.k0s(),c.j41(5,"span",12),c.EFF(6),c.k0s(),c.j41(7,"button",13),c.bIt("click",(function(){c.eBV(e);const t=c.XpG();return c.Njj(t.clearField())})),c.nrm(8,"system-button-icon",14),c.k0s()()()()}if(2&e){const e=c.XpG();c.R7$(4),c.Y8G("module",e.module)("size","small"),c.R7$(2),c.JRh(e.selectedItem.summary_text),c.R7$(2),c.Y8G("icon","close")}}function x(e,t){if(1&e){const e=c.RV6();c.j41(0,"div",15)(1,"input",16),c.bIt("focus",(function(){c.eBV(e);const t=c.XpG();return c.Njj(t.searchWithModal())})),c.k0s(),c.j41(2,"button",17),c.bIt("click",(function(){c.eBV(e);const t=c.XpG();return c.Njj(t.searchWithModal())})),c.nrm(3,"system-button-icon",14),c.k0s()()}if(2&e){const e=c.XpG();c.R7$(),c.Y8G("disabled",e.module)("placeholder",e.placeholder),c.R7$(2),c.Y8G("icon","search")}}let N=(()=>{class OutputTemplatesPreviewSelector{constructor(e,t,s,i){this.language=e,this.metadata=t,this.model=s,this.modal=i,this.subscriptions=new g.yU}ngOnDestroy(){this.subscriptions.unsubscribe()}get module(){return this.model.getField("module_name")}get placeholder(){return this.language.getModuleCombinedLabel("LBL_SEARCH",this.module)}searchWithModal(){this.modal.openModal("ObjectModalModuleLookup").subscribe((e=>{e.instance.module=this.module,e.instance.multiselect=!1,this.subscriptions.add(e.instance.selectedItems.subscribe((e=>{e.length&&(this.selectedItem=e[0])})))}))}clearField(){this.selectedItem=void 0}static#e=this.ɵfac=function(e){return new(e||OutputTemplatesPreviewSelector)(c.rXU(u.B),c.rXU(m.yu),c.rXU(p.g),c.rXU(R.y))};static#t=this.ɵcmp=c.VBU({type:OutputTemplatesPreviewSelector,selectors:[["output-templates-preview-selector"]],decls:9,vars:2,consts:[[1,"slds-form-element"],[1,"slds-form-element__label"],[1,"slds-form-element__control"],[1,"slds-combobox_container"],["aria-expanded","false","aria-haspopup","listbox","role","combobox",1,"slds-combobox","slds-dropdown-trigger","slds-dropdown-trigger_click"],[1,"slds-form-element__control","slds-box--border"],["class","slds-form-element__control",4,"ngIf"],["class","slds-input-has-icon slds-input-has-icon--right slds-grow",4,"ngIf"],[1,"slds-pill_container"],[1,"slds-pill","slds-size--1-of-1"],[1,"slds-icon_container","slds-icon-standard-account","slds-pill__icon_container"],[3,"module","size"],[1,"slds-pill__label"],[1,"slds-button","slds-button--icon","slds-pill__remove",3,"click"],[3,"icon"],[1,"slds-input-has-icon","slds-input-has-icon--right","slds-grow"],["type","text","role","combobox",1,"slds-lookup__search-input","slds-input--bare",3,"disabled","placeholder","focus"],[1,"slds-button","slds-button_icon","slds-input__icon","slds-input__icon_right",3,"click"]],template:function(e,t){1&e&&(c.j41(0,"div",0)(1,"label",1),c.EFF(2,"Bean"),c.k0s(),c.j41(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5),c.DNE(7,C,9,4,"div",6)(8,x,4,3,"div",7),c.k0s()()()()()),2&e&&(c.R7$(7),c.Y8G("ngIf",t.selectedItem),c.R7$(),c.Y8G("ngIf",!t.selectedItem))},dependencies:[i.bT,F.t,k.J],encapsulation:2})}return OutputTemplatesPreviewSelector})();var Y=s(53584);let X=(()=>{class ObjectActionOutputBeanButton{constructor(e,t,s,i,l,n){this.language=e,this.model=t,this.modal=s,this.backend=i,this.configuration=l,this.viewContainerRef=n,this.templates=[]}execute(){let e=this.configuration.getData("OutputTemplates");e&&e[this.model.module]?(this.templates=e[this.model.module],this.openOutput()):(e={},this.modal.openModal("SystemLoadingModal",!1).subscribe((e=>{e.instance.messagelabel="Loading Templates",this.backend.getRequest("module/OutputTemplates/formodule/"+this.model.module,{}).subscribe((t=>{e.instance.self.destroy(),this.configuration.setData("OutputTemplates",t),this.templates=t,this.openOutput()}),(t=>{e.instance.self.destroy()}))})))}openOutput(){this.templates.length>0?(this.templates.sort(((e,t)=>e.name>t.name?1:-1)),this.modal.openModal("ObjectActionOutputBeanModal",!0,this.viewContainerRef.injector).subscribe((e=>{e.instance.templates=this.templates,e.instance.modalTitle=this.modalTitle,e.instance.noDownload=this.noDownload,e.instance.handBack=this.handBack,e.instance.customActionsetId=this.actionconfig.modal_actionset,e.instance.buttonText=this.buttonText}))):this.modal.info("No Templates Found","there are no Output templates defined for the Module")}static#e=this.ɵfac=function(e){return new(e||ObjectActionOutputBeanButton)(c.rXU(u.B),c.rXU(p.g),c.rXU(R.y),c.rXU(_.H),c.rXU(Y.i),c.rXU(c.c1b))};static#t=this.ɵcmp=c.VBU({type:ObjectActionOutputBeanButton,selectors:[["object-action-output-bean-button"]],decls:2,vars:0,consts:[["label","LBL_PDF"]],template:function(e,t){1&e&&(c.j41(0,"span"),c.nrm(1,"system-label",0),c.k0s())},dependencies:[b.W],encapsulation:2})}return ObjectActionOutputBeanButton})(),D=(()=>{class ObjectActionLiveCompileBeanButton extends X{constructor(){super(...arguments),this.actionemitter=new c.bkB}openOutput(){this.templates.length>0?(this.templates.sort(((e,t)=>e.name>t.name?1:-1)),this.modal.openModal("ObjectActionOutputBeanModal",!0,this.viewContainerRef.injector).subscribe((e=>{e.instance.templates=this.templates,e.instance.modalTitle=this.modalTitle,e.instance.noDownload=this.noDownload,e.instance.handBack=this.handBack,e.instance.liveCompile=!0,e.instance.forcedFormat="pdf",e.instance.customActionsetId=this.actionconfig.modal_actionset,e.instance.buttonText=this.buttonText,e.instance.outputModalService.modalResponse$.subscribe((e=>{"marksent"==e&&this.actionemitter.emit(e)}))}))):this.modal.info("No Templates Found","there are no Output templates defined for the Module")}static#e=this.ɵfac=(()=>{let e;return function(t){return(e||(e=c.xGo(ObjectActionLiveCompileBeanButton)))(t||ObjectActionLiveCompileBeanButton)}})();static#t=this.ɵcmp=c.VBU({type:ObjectActionLiveCompileBeanButton,selectors:[["object-action-live-compile-bean-button"]],outputs:{actionemitter:"actionemitter"},features:[c.Vt3],decls:2,vars:0,consts:[["label","LBL_PDF"]],template:function(e,t){1&e&&(c.j41(0,"span"),c.nrm(1,"system-label",0),c.k0s())},dependencies:[b.W],encapsulation:2})}return ObjectActionLiveCompileBeanButton})();var U=s(64714),V=s(28679),S=s(13921),P=s(41731),A=s(57363),H=s(766),q=s(66935),z=s(89166);function W(e,t){if(1&e&&c.nrm(0,"field-label",3),2&e){const e=c.XpG();c.Y8G("fieldname",e.fieldname)("fieldconfig",e.fieldconfig)}}function J(e,t){if(1&e&&(c.qex(0),c.EFF(1),c.bVm()),2&e){const e=c.XpG(2);c.R7$(),c.Lme("",null==e.selected_item?null:e.selected_item.name," (",null==e.selected_item?null:e.selected_item.language,")")}}function K(e,t){if(1&e&&(c.j41(0,"field-generic-display",4),c.DNE(1,J,2,2,"ng-container",5),c.k0s()),2&e){const e=c.XpG();c.Y8G("fielddisplayclass",e.fielddisplayclass)("editable",e.isEditable())("fieldconfig",e.fieldconfig),c.R7$(),c.Y8G("ngIf",e.value)}}function Q(e,t){if(1&e&&(c.j41(0,"option",12),c.EFF(1),c.k0s()),2&e){const e=t.$implicit;c.Y8G("ngValue",e.id),c.R7$(),c.Lme("",e.name," (",e.language,")")}}function Z(e,t){if(1&e){const e=c.RV6();c.j41(0,"div",6)(1,"div",7)(2,"div",8)(3,"select",9),c.mxI("ngModelChange",(function(t){c.eBV(e);const s=c.XpG();return c.DH7(s.value,t)||(s.value=t),c.Njj(t)})),c.DNE(4,Q,2,3,"option",10),c.k0s()(),c.nrm(5,"field-messages",11),c.k0s()()}if(2&e){const e=c.XpG();c.R7$(),c.Y8G("ngClass",e.getFieldClass()),c.R7$(2),c.Y8G("disabled",e.isDisabled),c.R50("ngModel",e.value),c.R7$(),c.Y8G("ngForOf",e.items),c.R7$(),c.Y8G("fieldname",e.fieldname)}}let ee=(()=>{class fieldOutputTemplates extends S.s{constructor(e,t,s,i,l,n,o){super(e,t,s,i,l),this.model=e,this.view=t,this.language=s,this.metadata=i,this.router=l,this.backend=n,this.configuration=o,this.isLoaded=!1,this.items=[]}get isDisabled(){return!this.isLoaded||!this.items}get selected_item(){return this.items.find((e=>e.id==this.value))}ngOnInit(){let e=this.configuration.getData("OutputTemplates");e&&e[this.model.module]?(this.items=e[this.model.module],this.isLoaded=!0):this.backend.getRequest("module/OutputTemplates/formodule/"+this.model.module,{}).subscribe((e=>{this.configuration.setData("OutputTemplates",e),this.items=e,this.isLoaded=!0}))}static#e=this.ɵfac=function(e){return new(e||fieldOutputTemplates)(c.rXU(p.g),c.rXU(P.U),c.rXU(u.B),c.rXU(m.yu),c.rXU(A.Ix),c.rXU(_.H),c.rXU(Y.i))};static#t=this.ɵcmp=c.VBU({type:fieldOutputTemplates,selectors:[["field-output-templates"]],features:[c.Vt3],decls:3,vars:3,consts:[[3,"fieldname","fieldconfig",4,"ngIf"],[3,"fielddisplayclass","editable","fieldconfig",4,"ngIf"],["class","slds-form-element",4,"ngIf"],[3,"fieldname","fieldconfig"],[3,"fielddisplayclass","editable","fieldconfig"],[4,"ngIf"],[1,"slds-form-element"],[1,"slds-form-element__control",3,"ngClass"],[1,"slds-select_container","slds-m-vertical--xx-small"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"fieldname"],[3,"ngValue"]],template:function(e,t){1&e&&c.DNE(0,W,1,2,"field-label",0)(1,K,2,4,"field-generic-display",1)(2,Z,6,5,"div",2),2&e&&(c.Y8G("ngIf",t.displayLabel),c.R7$(),c.Y8G("ngIf",!t.isEditMode()),c.R7$(),c.Y8G("ngIf",t.isEditMode()))},dependencies:[i.YU,i.Sq,i.bT,l.xH,l.y7,l.wz,l.BC,l.vS,H.b,q.K,z.A],encapsulation:2})}return fieldOutputTemplates})();var te=s(96697),se=s(58461),ie=s(40713),le=s(25028),ne=s(88418),oe=s(83524),ae=s(42205),de=s(39207),re=s(18521),ce=s(43262);function ue(e,t){if(1&e&&(c.j41(0,"option",53),c.EFF(1),c.k0s()),2&e){const e=c.XpG().$implicit;c.Y8G("value",e.templateObjectName),c.R7$(),c.JRh(e.displayName)}}function me(e,t){if(1&e&&(c.qex(0),c.DNE(1,ue,2,2,"option",52),c.bVm()),2&e){const e=t.$implicit;c.R7$(),c.Y8G("ngIf","current_user"!==e.templateObjectName&&"template"!==e.templateObjectName)}}function pe(e,t){1&e&&c.nrm(0,"hr")}function he(e,t){1&e&&(c.qex(0),c.nrm(1,"hr"),c.j41(2,"option",54),c.nrm(3,"system-label",55),c.k0s(),c.bVm())}function fe(e,t){if(1&e){const e=c.RV6();c.j41(0,"div",59)(1,"system-module-tree",60),c.bIt("itemSelected",(function(t){const s=c.eBV(e).$implicit,i=c.XpG(2);return c.Njj(i.treeItemSelected(t,s.name))})),c.k0s()()}if(2&e){const e=t.$implicit,s=c.XpG(2);c.AVh("slds-hide",s.source!=e.templateObjectName),c.R7$(),c.Y8G("module",e.name)}}function be(e,t){if(1&e&&(c.j41(0,"div",56)(1,"div",57),c.DNE(2,fe,2,3,"div",58),c.k0s()()),2&e){const e=c.XpG();c.R7$(2),c.Y8G("ngForOf",e.offeredModules)("ngForTrackBy",e.trackByFn)}}function ge(e,t){if(1&e){const e=c.RV6();c.j41(0,"tr")(1,"td")(2,"div",32)(3,"a",73),c.bIt("click",(function(){const t=c.eBV(e).$implicit,s=c.XpG(4);return c.Njj(s.fieldSelected(t.name))})),c.EFF(4),c.k0s()()(),c.j41(5,"td")(6,"div",32),c.nrm(7,"system-label",74),c.k0s()()()}if(2&e){const e=t.$implicit;c.R7$(4),c.JRh(e.name),c.R7$(3),c.Y8G("label",e.label)}}function _e(e,t){if(1&e&&(c.j41(0,"tbody"),c.DNE(1,ge,8,2,"tr",16),c.k0s()),2&e){const e=t.$implicit,s=c.XpG(3);c.AVh("slds-hide",s.isLoadingModuleFields||s.source!=e.templateObjectName),c.R7$(),c.Y8G("ngForOf",s.getFilteredFields(s.moduleFields[e.name]))("ngForTrackBy",s.trackByFn)}}function Re(e,t){1&e&&c.nrm(0,"tbody",75),2&e&&c.Y8G("columns",2)("rows",5)}function ve(e,t){if(1&e&&(c.j41(0,"table",29)(1,"thead")(2,"tr")(3,"th",66)(4,"div",32),c.nrm(5,"system-label",67),c.k0s()(),c.j41(6,"th",68)(7,"div",69),c.nrm(8,"system-label",70),c.k0s()()()(),c.DNE(9,_e,2,4,"tbody",71)(10,Re,1,2,"tbody",72),c.k0s()),2&e){const e=c.XpG(2);c.R7$(9),c.Y8G("ngForOf",e.offeredModules)("ngForTrackBy",e.trackByFn),c.R7$(),c.Y8G("ngIf",e.isLoadingModuleFields)}}function ye(e,t){if(1&e){const e=c.RV6();c.j41(0,"tr")(1,"td")(2,"div",32)(3,"a",78),c.bIt("click",(function(){const t=c.eBV(e).$implicit,s=c.XpG(3);return c.Njj(s.labelSelected(t.key))})),c.EFF(4),c.k0s()()(),c.j41(5,"td")(6,"span",32),c.EFF(7),c.k0s()()()}if(2&e){const e=t.$implicit;c.R7$(4),c.JRh(e.key),c.R7$(3),c.JRh(e.value)}}function Fe(e,t){if(1&e&&(c.j41(0,"tr")(1,"td",79)(2,"system-illustration-no-records"),c.nrm(3,"system-label",74),c.k0s()()()),2&e){const e=c.XpG(3);c.R7$(3),c.Y8G("label",e.fieldFilter?"LBL_NO_RECORDS_FOUND":"LBL_ENTER_SEARCHTERM")}}const ke=e=>({"slds-no-row-hover":e}),je=e=>({"border-bottom-width":e});function Le(e,t){if(1&e&&(c.j41(0,"table",76)(1,"thead")(2,"tr")(3,"th",66)(4,"div",32),c.nrm(5,"system-label",21),c.k0s()(),c.j41(6,"th",68)(7,"div",69),c.nrm(8,"system-label",77),c.k0s()()()(),c.j41(9,"tbody"),c.Z7z(10,ye,8,2,"tr",null,c.fX1,!1,Fe,4,1,"tr"),c.k0s()()),2&e){const e=c.XpG(2);c.Y8G("ngClass",c.eq3(3,ke,!e.filteredLabels.length))("ngStyle",c.eq3(5,je,e.filteredLabels.length?"1px":0)),c.R7$(10),c.Dyx(e.filteredLabels)}}const Oe=e=>({height:e});function Te(e,t){if(1&e){const e=c.RV6();c.j41(0,"div",61)(1,"div",62),c.nrm(2,"system-utility-icon",63),c.j41(3,"input",64),c.mxI("ngModelChange",(function(t){c.eBV(e);const s=c.XpG();return c.DH7(s.fieldFilter,t)||(s.fieldFilter=t),c.Njj(t)})),c.bIt("ngModelChange",(function(){c.eBV(e);const t=c.XpG();return c.Njj(t.searchInput())})),c.k0s()(),c.j41(4,"div",28),c.DNE(5,ve,11,3,"table",65)(6,Le,13,7),c.k0s()()}if(2&e){const e=c.XpG();c.Y8G("ngStyle",c.eq3(4,Oe,"label"===e.sourceType?"auto":"50%")),c.R7$(3),c.Y8G("placeholder",e.language.getLabel("LBL_SEARCH")),c.R50("ngModel",e.fieldFilter),c.R7$(2),c.vxM(5,"label"!==e.sourceType?5:6)}}function Ee(e,t){if(1&e){const e=c.RV6();c.j41(0,"div",80)(1,"div",81)(2,"label",39),c.nrm(3,"system-label",82),c.k0s(),c.j41(4,"div",11)(5,"input",83),c.mxI("ngModelChange",(function(t){c.eBV(e);const s=c.XpG();return c.DH7(s.fieldResult,t)||(s.fieldResult=t),c.Njj(t)})),c.k0s()()(),c.j41(6,"button",44),c.bIt("click",(function(){c.eBV(e);const t=c.XpG();return c.Njj(t.clearFieldResult())})),c.nrm(7,"system-button-icon",84),c.j41(8,"span",46),c.nrm(9,"system-label",47),c.k0s()()()}if(2&e){const e=c.XpG();c.R7$(5),c.R50("ngModel",e.fieldResult),c.R7$(),c.Y8G("disabled",!e.fieldResult.length)}}function Ge(e,t){if(1&e){const e=c.RV6();c.j41(0,"tr")(1,"td")(2,"div",32)(3,"a",73),c.bIt("click",(function(){const t=c.eBV(e).$implicit,s=c.XpG();return c.Njj(s.functionSelected(t))})),c.EFF(4),c.k0s()()()()}if(2&e){const e=t.$implicit;c.R7$(4),c.JRh(e.name)}}function we(e,t){1&e&&(c.j41(0,"abbr",96),c.EFF(1,"* "),c.k0s())}function Ie(e,t){if(1&e&&c.nrm(0,"system-tooltip",97),2&e){const e=c.XpG().$implicit;c.Y8G("tooltiptext",e.help)}}function Be(e,t){if(1&e){const e=c.RV6();c.j41(0,"input",98),c.mxI("ngModelChange",(function(t){c.eBV(e);const s=c.XpG().$implicit;return c.DH7(s.value,t)||(s.value=t),c.Njj(t)})),c.k0s()}if(2&e){const e=c.XpG().$implicit;c.R50("ngModel",e.value)}}function Me(e,t){if(1&e){const e=c.RV6();c.j41(0,"input",101),c.mxI("ngModelChange",(function(t){c.eBV(e);const s=c.XpG(2).$implicit;return c.DH7(s.value,t)||(s.value=t),c.Njj(t)})),c.k0s()}if(2&e){const e=c.XpG(2).$implicit;c.R50("ngModel",e.value)}}function $e(e,t){if(1&e&&(c.j41(0,"option",105),c.EFF(1),c.k0s()),2&e){const e=t.$implicit;c.Y8G("value",e.key),c.R7$(),c.JRh(e.value)}}function Ce(e,t){if(1&e){const e=c.RV6();c.j41(0,"select",102),c.mxI("ngModelChange",(function(t){c.eBV(e);const s=c.XpG(2).$implicit;return c.DH7(s.value,t)||(s.value=t),c.Njj(t)})),c.j41(1,"option",103),c.EFF(2,"Select…"),c.k0s(),c.DNE(3,$e,2,2,"option",104),c.nI1(4,"keyvalue"),c.k0s()}if(2&e){const e=c.XpG(2).$implicit;c.R50("ngModel",e.value),c.R7$(3),c.Y8G("ngForOf",c.bMT(4,2,e.options))}}function xe(e,t){if(1&e&&(c.qex(0),c.DNE(1,Me,1,1,"input",99)(2,Ce,5,4,"select",100),c.bVm()),2&e){const e=c.XpG().$implicit;c.R7$(),c.Y8G("ngIf",!e.options),c.R7$(),c.Y8G("ngIf",e.options)}}function Ne(e,t){if(1&e&&(c.j41(0,"span",106),c.EFF(1),c.k0s()),2&e){const e=c.XpG().$implicit;c.R7$(),c.JRh(e.unit)}}function Ye(e,t){1&e&&(c.j41(0,"div",107),c.nrm(1,"system-label",74),c.EFF(2,"!"),c.k0s()),2&e&&(c.R7$(),c.Y8G("label","MSG_INPUT_REQUIRED"))}const Xe=e=>({"slds-p-left--x-small":e}),De=e=>({"slds-input-has-fixed-addon":e});function Ue(e,t){if(1&e&&(c.qex(0),c.j41(1,"div",86)(2,"label",87),c.DNE(3,we,2,0,"abbr",88),c.nrm(4,"system-label",74),c.DNE(5,Ie,1,1,"system-tooltip",89),c.k0s(),c.j41(6,"div",90),c.qex(7,91),c.DNE(8,Be,1,1,"input",92)(9,xe,3,2,"ng-container",93)(10,Ne,2,1,"span",94),c.bVm(),c.k0s(),c.DNE(11,Ye,3,1,"div",95),c.k0s(),c.bVm()),2&e){const e=t.$implicit,s=t.first,i=c.XpG(2);c.R7$(),c.Y8G("ngClass",c.eq3(9,Xe,!s)),c.R7$(2),c.Y8G("ngIf",e.required),c.R7$(),c.Y8G("label",e.label),c.R7$(),c.Y8G("ngIf",e.help),c.R7$(),c.Y8G("ngClass",c.eq3(11,De,!!e.unit)),c.R7$(),c.Y8G("ngSwitch",e.type),c.R7$(),c.Y8G("ngSwitchCase","color"),c.R7$(2),c.Y8G("ngIf",e.unit),c.R7$(),c.Y8G("ngIf",i.showFuncParamsError&&!i.funcParamValid(e))}}function Ve(e,t){if(1&e&&(c.j41(0,"div",85),c.DNE(1,Ue,12,13,"ng-container",34),c.k0s()),2&e){const e=c.XpG();c.R7$(),c.Y8G("ngForOf",e.actualFuncParams)}}const Se=e=>({"font-style":e});let Pe=(()=>{class OutputTemplatesVariableHelper{constructor(e,t,s,i,l){this.language=e,this.metadata=t,this.backend=s,this.cdr=i,this.model=l,this.response=new c.bkB,this.offeredModules=[],this.source="",this.sourceType="",this.moduleFields=[],this.fieldFilter="",this.lastFieldFilter="",this.isLoadingModuleFields=!1,this.isLoadingFunctions=!1,this.modulePathFromTree="",this.functionResult="",this.fieldResult="",this.functionHistory=[],this.hasTemplate=!1,this.actualFuncParams=[],this.allLabels=[],this.filteredLabels=[],this.showFuncParamsError=!1}ngOnInit(){if(this.offeredModules=[{name:"Users",templateObjectName:"current_user",displayName:this.language.getLabel("LBL_CURRENT_USER")}],"CampaignTasks"===this.model?.module){let e={};if(this.metadata.fieldDefs.ProspectLists){let t=this.metadata.fieldDefs.ProspectLists;Object.keys(t).forEach((s=>{if("link"===t[s].type){let i=(t[s].module?t[s].module:t[s].name).toLowerCase();for(let t in this.metadata.fieldDefs)t.toLowerCase()==i&&!0==!e[t]&&(this.offeredModules.push({name:t,templateObjectName:"bean."+t,displayName:this.language.getLabel(this.metadata.getModuleDefs(t).module_label)}),e[t]=!0)}}))}}else this.hasTemplate=!0,this.templateModel=this.model,this.offeredModules.push({name:this.templateModel.module,templateObjectName:"template",displayName:this.language.getLabel("LBL_TEMPLATE")}),this.templateModel.getFieldValue("module_name")&&this.offeredModules.push({name:this.templateModel.getFieldValue("module_name"),templateObjectName:"bean."+this.templateModel.getFieldValue("module_name"),displayName:this.language.getModuleName(this.templateModel.getFieldValue("module_name"),!0)}),this.templateModel.getFieldValue("for_bean")&&this.offeredModules.push({name:this.templateModel.getFieldValue("for_bean"),templateObjectName:"bean."+this.templateModel.getFieldValue("for_bean"),displayName:this.language.getModuleName(this.templateModel.getFieldValue("for_bean"),!0)});this.language.sortObjects(this.offeredModules,"displayName"),this.loadFunctions(),this.getAllLabels()}getAllLabels(){Object.keys(this.language.languagedata.applang).forEach((e=>{this.allLabels.push({key:e,value:this.language.languagedata.applang[e].default})})),this.language.sortObjects(this.allLabels,"key")}loadFunctions(){this.isLoadingFunctions=!0,this.backend.getRequest("module/OutputTemplates/templateFunctions").pipe((0,te.s)(1)).subscribe((e=>{this.allFunctions=e,this.language.sortObjects(this.allFunctions.pipe,"name"),this.language.sortObjects(this.allFunctions.noPipe,"name"),this.isLoadingFunctions=!1,this.buildOfferedFunctions()}))}buildOfferedFunctions(){"function"===this.source?this.functionResult?this.offeredFunctions=this.allFunctions.pipe:this.offeredFunctions=this.allFunctions.noPipe:this.source?this.offeredFunctions=this.allFunctions.pipe:this.offeredFunctions=[]}close(){this.self.destroy()}cancel(){this.close()}onModalEscX(){this.cancel()}submit(){if(!this.actualFuncParamsValid())return void(this.showFuncParamsError=!0);let e;this.fieldResult||this.functionResultWithParams||(e=""),!this.fieldResult&&this.functionResultWithParams?e="func."+this.functionResultWithParams:(e=this.fieldResult,this.functionResultWithParams&&(e+="|"+this.functionResultWithParams)),this.response.emit(e),this.close()}getModuleFields(e,t){this.moduleFields[t]=[],this.isLoadingModuleFields=!0,this.cdr.detectChanges(),this.backend.getRequest("dictionary/browser/"+e+"/fields").pipe((0,te.s)(1)).subscribe((e=>{this.moduleFields[t]=e.filter((e=>"relate"!=e.type&&"non-db"!=e.source)),this.isLoadingModuleFields=!1}))}getFilteredFields(e){return this.fieldFilter?e.filter((e=>e.name.toLowerCase().includes(this.fieldFilter.toLowerCase())||e.label&&this.language.getLabel(e.label).toLowerCase().includes(this.fieldFilter.toLowerCase()))):e}trackByFn(e,t){return e}setActiveModuleTab(e){this.source=e}treeItemSelected(e,t){this.modulePathFromTree=e.path,this.getModuleFields(e.module,t)}functionUndo(){if(this.functionHistory.length){let e=this.functionHistory.pop();this.functionResult=e.result,this.actualFuncParams=e.params,this.buildOfferedFunctions()}}isTypeString(e){switch(e){case"string":case"color":return!0}return!1}get functionResultWithParams(){let e=this.functionResult;return this.actualFuncParams.forEach((t=>{e+=":","color"===t.type&&"#000000"===t.value||void 0===t.value||""===t.value||(e+=this.isTypeString(t.type)?"'"+t.value+"'":t.value)})),e=e.replace(/:+$/g,""),e}functionSelected(e){this.actualFuncParamsValid()?(this.showFuncParamsError=!1,this.functionHistory.push({result:this.functionResult,params:this.actualFuncParams}),this.functionResult=this.functionResultWithParams,this.functionResult&&(this.functionResult+="|"),this.functionResult+=e.name,this.actualFuncParams=e.paramConfigs?JSON.parse(JSON.stringify(e.paramConfigs)):[],this.buildOfferedFunctions()):this.showFuncParamsError=!0}fieldSelected(e){let t=this.modulePathFromTree.split(/::/),s=[];for(let e=1;e<t.length;e++)s.push(t[e].split(":").pop());let i=s.join(".");if(i&&(i+="."),-1!==this.source.indexOf("bean.",0))this.fieldResult="bean."+i+e;else switch(this.source){case"current_user":this.fieldResult="current_user."+i+e;break;case"template":this.fieldResult="template."+i+e}this.buildOfferedFunctions()}labelSelected(e){this.fieldResult="label."+e,this.buildOfferedFunctions()}sourceSelected(){switch(this.source){case"function":this.sourceType="function",this.resetFunctionResult();break;case"label":"function"===this.sourceType&&this.resetFunctionResult(),this.sourceType="label";break;default:"function"===this.sourceType&&this.resetFunctionResult(),this.sourceType="bean"}this.buildOfferedFunctions()}resetFunctionResult(){this.fieldResult="",this.functionResult="",this.functionHistory=[],this.actualFuncParams=[]}clearFieldResult(){this.fieldResult="",this.buildOfferedFunctions()}searchInput(){"label"===this.source&&(this.searchTimeOut&&window.clearTimeout(this.searchTimeOut),this.searchTimeOut=window.setTimeout((()=>this.filterLabels()),1e3))}filterLabels(){this.fieldFilter.trim()!==this.lastFieldFilter&&(this.lastFieldFilter=this.fieldFilter,this.filteredLabels=this.allLabels.filter((e=>this.fieldFilter&&(e.value.toLowerCase().includes(this.fieldFilter.toLowerCase())||e.key.toLowerCase().includes(this.fieldFilter.toLowerCase())))))}canSubmit(){return(this.actualFuncParamsValid()||!this.showFuncParamsError)&&this.sourceType&&("function"===this.sourceType&&!!this.functionResult||("bean"===this.sourceType||"label"===this.sourceType)&&!!this.fieldResult)}actualFuncParamsValid(){return!this.actualFuncParams||!this.actualFuncParams.some((e=>!this.funcParamValid(e)))}funcParamValid(e){return!e.required||!!e.value}static#e=this.ɵfac=function(e){return new(e||OutputTemplatesVariableHelper)(c.rXU(u.B),c.rXU(m.yu),c.rXU(_.H),c.rXU(c.gRc),c.rXU(p.g,8))};static#t=this.ɵcmp=c.VBU({type:OutputTemplatesVariableHelper,selectors:[["ng-component"]],outputs:{response:"response"},decls:61,vars:20,consts:[["size","large"],[3,"close"],["label","LBL_TEMPLATE_VARIABLE_HELPER"],["margin","none","system-modal-content-grow",""],[1,"slds-grid","slds-grid--vertical",2,"height","100%"],[1,"slds-grid","slds-grow",2,"height","0"],[1,"slds-size--3-of-5","slds-border--right","slds-grid","slds-grid--vertical",2,"height","100%"],[1,"slds-grid","slds-grid--vertical","slds-grow",2,"height","0"],[1,"slds-border--bottom","slds-grid","slds-grid--vertical",3,"ngStyle"],[1,"slds-form-element","slds-m-around--small",2,"margin-top","0"],["for","templateVarHelperSource",1,"slds-form-element__label"],[1,"slds-form-element__control"],[1,"slds-select_container"],["id","templateVarHelperSource",1,"slds-select",3,"ngModel","ngStyle","ngModelChange"],["disabled","","hidden","","selected","","value",""],["label","LBL_SELECT"],[4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],["value","current_user",2,"font-style","normal"],["label","LBL_CURRENT_USER"],["value","label",2,"font-style","normal"],["label","LBL_LABEL"],["value","function",2,"font-style","normal"],["label","LBL_STANDALONE_FUNCTION"],["class","slds-grid slds-grid--vertical slds-grow",4,"ngIf"],["class","slds-grid slds-grid--vertical","style","overflow:hidden",3,"ngStyle"],["class","slds-p-horizontal--medium slds-p-bottom--medium slds-p-top--xx-small slds-border--top slds-grid slds-grid--vertical-align-end"],[1,"slds-size--2-of-5","slds-grid","slds-grid--vertical","slds-p-top--x-small",2,"height","100%"],[1,"slds-grow","slds-scrollable--y","slds-m-bottom--x-small"],[1,"slds-table","slds-table_cell-buffer","slds-table_bordered","slds-table--header-fixed",2,"border-top","none"],[1,"slds-line-height_reset"],["scope","col"],[1,"slds-truncate"],["label","LBL_APPLICABLE_FUNCTIONS"],[4,"ngFor","ngForOf"],[1,"slds-border--top","slds-grid","slds-grid--vertical-align-end","slds-p-horizontal--medium","slds-p-bottom--medium","slds-p-top--xx-small"],[1,"slds-grow","slds-p-right--small"],["class","slds-grid slds-p-top--xx-small",4,"ngIf"],[1,"slds-form-element"],[1,"slds-form-element__label"],["label","LBL_FUNCTION"],["label","LBL_FUNCTION_CHAIN"],[1,"slds-form-element__control","slds-grow"],["type","text","disabled","",1,"slds-input",3,"ngModel"],[1,"slds-button","slds-button--icon","slds-button_icon-border",3,"disabled","click"],["icon","undo",3,"size"],[1,"slds-assistive-text"],["label","LBL_UNDO"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"disabled","click"],["label","LBL_OK"],["style","font-style:normal",3,"value",4,"ngIf"],[2,"font-style","normal",3,"value"],["value","template",2,"font-style","normal"],["label","LBL_TEMPLATE"],[1,"slds-grid","slds-grid--vertical","slds-grow"],[1,"slds-grow",2,"height","0"],["class","slds-scrollable--y","style","height: 100%",3,"slds-hide",4,"ngFor","ngForOf","ngForTrackBy"],[1,"slds-scrollable--y",2,"height","100%"],[3,"module","itemSelected"],[1,"slds-grid","slds-grid--vertical",2,"overflow","hidden",3,"ngStyle"],["role","none",1,"slds-input-has-icon","slds-input-has-icon_left","slds-m-vertical--x-small","slds-m-horizontal--small"],["icon","search","addclasses","slds-input__icon slds-input__icon--left"],["type","search",1,"slds-input",3,"placeholder","ngModel","ngModelChange"],["class","slds-table slds-table_cell-buffer slds-table_bordered slds-table--header-fixed","style","border-top:none"],["scope","col",2,"min-width","7rem"],["label","LBL_FIELD"],["scope","col",1,"slds-p-horizontal--x-small",2,"width","100%"],[1,"slds-truncate","slds-p-left--x-small"],["label","LBL_NAME"],[3,"slds-hide",4,"ngFor","ngForOf","ngForTrackBy"],["system-table-stencils","",3,"columns","rows",4,"ngIf"],["href","javascript:void(0)",3,"click"],[3,"label"],["system-table-stencils","",3,"columns","rows"],[1,"slds-table","slds-table_cell-buffer","slds-table_bordered","slds-table--header-fixed",2,"border-top","none",3,"ngClass","ngStyle"],["label","LBL_TRANSLATION"],["href","javascript:void(0)",1,"slds-truncate","slds-text-font_monospace",3,"click"],["colspan","2",1,"x-slds-p-top--medium",2,"padding-top","1rem"],[1,"slds-p-horizontal--medium","slds-p-bottom--medium","slds-p-top--xx-small","slds-border--top","slds-grid","slds-grid--vertical-align-end"],[1,"slds-form-element","slds-col--bump-right","slds-grow","slds-m-right--small"],["label","LBL_VARIABLE"],["type","text","disabled","",1,"slds-input",3,"ngModel","ngModelChange"],["icon","clear","size","medium"],[1,"slds-grid","slds-p-top--xx-small"],[1,"slds-form-element","slds-grow",3,"ngClass"],[1,"slds-form-element__label","slds-grid","slds-grid--vertical-align-center"],["class","slds-required","title","required",4,"ngIf"],["class","slds-m-left--x-small",3,"tooltiptext",4,"ngIf"],[1,"slds-form-element__control","slds-grow",3,"ngClass"],[3,"ngSwitch"],["type","color","class","slds-input","style","width:3.5rem;padding-left:2px;padding-right:2px",3,"ngModel","ngModelChange",4,"ngSwitchCase"],[4,"ngSwitchDefault"],["class","slds-form-element__addon",4,"ngIf"],["class","slds-form-element__help slds-text-color_error",4,"ngIf"],["title","required",1,"slds-required"],[1,"slds-m-left--x-small",3,"tooltiptext"],["type","color",1,"slds-input",2,"width","3.5rem","padding-left","2px","padding-right","2px",3,"ngModel","ngModelChange"],["type","text","class","slds-input",3,"ngModel","ngModelChange",4,"ngIf"],["class","slds-select",3,"ngModel","ngModelChange",4,"ngIf"],["type","text",1,"slds-input",3,"ngModel","ngModelChange"],[1,"slds-select",3,"ngModel","ngModelChange"],["selected","","value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"slds-form-element__addon"],[1,"slds-form-element__help","slds-text-color_error"]],template:function(e,t){1&e&&(c.j41(0,"system-modal",0)(1,"system-modal-header",1),c.bIt("close",(function(){return t.cancel()})),c.nrm(2,"system-label",2),c.k0s(),c.j41(3,"system-modal-content",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"div",9)(10,"label",10),c.EFF(11,"Variable Source"),c.k0s(),c.j41(12,"div",11)(13,"div",12)(14,"select",13),c.mxI("ngModelChange",(function(e){return c.DH7(t.source,e)||(t.source=e),e})),c.bIt("ngModelChange",(function(){return t.sourceSelected()})),c.j41(15,"option",14),c.nrm(16,"system-label",15),c.EFF(17," …"),c.k0s(),c.DNE(18,me,2,1,"ng-container",16)(19,pe,1,0,"hr",17),c.j41(20,"option",18),c.nrm(21,"system-label",19),c.k0s(),c.DNE(22,he,4,0,"ng-container",17),c.nrm(23,"hr"),c.j41(24,"option",20),c.nrm(25,"system-label",21),c.k0s(),c.nrm(26,"hr"),c.j41(27,"option",22),c.nrm(28,"system-label",23),c.k0s()()()()(),c.DNE(29,be,3,2,"div",24),c.k0s(),c.DNE(30,Te,7,6,"div",25),c.k0s(),c.DNE(31,Ee,10,2,"div",26),c.k0s(),c.j41(32,"div",27)(33,"div",28)(34,"table",29)(35,"thead")(36,"tr",30)(37,"th",31)(38,"div",32),c.nrm(39,"system-label",33),c.k0s()()()(),c.j41(40,"tbody"),c.DNE(41,Ge,5,1,"tr",34),c.k0s()()(),c.j41(42,"div",35)(43,"div",36),c.DNE(44,Ve,2,1,"div",37),c.j41(45,"div",38)(46,"label",39),c.nrm(47,"system-label",40),c.EFF(48," / "),c.nrm(49,"system-label",41),c.k0s(),c.j41(50,"div",42),c.nrm(51,"input",43),c.k0s()()(),c.j41(52,"button",44),c.bIt("click",(function(){return t.functionUndo()})),c.nrm(53,"system-button-icon",45),c.j41(54,"span",46),c.nrm(55,"system-label",47),c.k0s()()()()()()(),c.j41(56,"system-modal-footer")(57,"button",48),c.bIt("click",(function(){return t.cancel()})),c.nrm(58,"system-label",49),c.k0s(),c.j41(59,"button",50),c.bIt("click",(function(){return t.submit()})),c.nrm(60,"system-label",51),c.k0s()()()),2&e&&(c.R7$(8),c.Y8G("ngStyle",c.eq3(16,Oe,"bean"===t.sourceType?"50%":"auto")),c.R7$(6),c.R50("ngModel",t.source),c.Y8G("ngStyle",c.eq3(18,Se,t.source?"normal":"italic")),c.R7$(4),c.Y8G("ngForOf",t.offeredModules)("ngForTrackBy",t.trackByFn),c.R7$(),c.Y8G("ngIf",t.offeredModules.length),c.R7$(3),c.Y8G("ngIf",t.hasTemplate),c.R7$(7),c.Y8G("ngIf",!!t.sourceType&&"label"!==t.sourceType),c.R7$(),c.vxM(30,t.sourceType&&"function"!==t.sourceType?30:-1),c.R7$(),c.vxM(31,t.sourceType&&"function"!==t.sourceType?31:-1),c.R7$(10),c.Y8G("ngForOf",t.offeredFunctions),c.R7$(3),c.Y8G("ngIf",t.actualFuncParams.length),c.R7$(7),c.Y8G("ngModel",t.functionResultWithParams),c.R7$(),c.Y8G("disabled",!t.functionHistory.length),c.R7$(),c.Y8G("size","xx-small"),c.R7$(6),c.Y8G("disabled",!t.canSubmit()))},dependencies:[i.YU,i.Sq,i.bT,i.B3,i.ux,i.e1,i.fG,l.xH,l.y7,l.me,l.wz,l.BC,l.vS,F.t,se.b,b.W,ie.D,le.I,ne.Q,oe.C,ae.t,de.F,re.B,ce.I,i.lG],encapsulation:2})}return OutputTemplatesVariableHelper})();var Ae=s(27863);let He=(()=>{class ObjectActionMarkSentBeanButton extends X{constructor(e,t,s,i,l,n,o,a){super(e,t,s,i,l,a),this.language=e,this.model=t,this.modal=s,this.backend=i,this.configuration=l,this.toast=n,this.outputModalService=o,this.viewContainerRef=a,this.actionemitter=new c.bkB}execute(){if(!this.outputModalService.selectedTemplate)return;const e=this.outputModalService.selectedTemplate.id;let t=this.model.utils.spiceModel2backend("Letters",this.model.data);this.backend.postRequest(`module/Letters/${this.model.id}/marksent/${e}`,null,t).subscribe((e=>{this.actionemitter.emit({close:!0,name:"marksent"}),e?.success?(this.toast.sendToast(this.language.getLabel("LETTER_MARKED_AS_SENT"),"success"),this.model.setField("letter_status","sent")):this.toast.sendToast(this.language.getLabel("ERR_FAILED_TO_EXECUTE"),"error")}))}static#e=this.ɵfac=function(e){return new(e||ObjectActionMarkSentBeanButton)(c.rXU(u.B),c.rXU(p.g),c.rXU(R.y),c.rXU(_.H),c.rXU(Y.i),c.rXU(y.o),c.rXU(Ae.c),c.rXU(c.c1b))};static#t=this.ɵcmp=c.VBU({type:ObjectActionMarkSentBeanButton,selectors:[["object-action-mark-sent-bean-button"]],outputs:{actionemitter:"actionemitter"},features:[c.Vt3],decls:2,vars:0,consts:[["label","LBL_MARK_SENT"]],template:function(e,t){1&e&&(c.j41(0,"span"),c.nrm(1,"system-label",0),c.k0s())},dependencies:[b.W],encapsulation:2})}return ObjectActionMarkSentBeanButton})();var qe=s(49969),ze=s(21413),We=s(13562),Je=s(29994),Ke=s(10650);const Qe=e=>({uploadfiles:e,uploadfilesExist:!1,forceModalPreview:!0});let Ze=(()=>{class OutputRevisionsPDFTabContainerEmail{constructor(e,t,s,i,l,n,o,a,d,r){this.parent=e,this.model=t,this.view=s,this.backend=i,this.helper=l,this.modal=n,this.toast=o,this.language=a,this.metadata=d,this.session=r,this.fieldset=null,this.filelist={},this.email_sent=new c.bkB,this.sending=!1;let u=this.metadata.getComponentConfig("ObjectActionOutputBeanModal");this.fieldset=u.fieldset_email}ngOnInit(){this.setModelData(),this.setViewData()}setModelData(){this.model.module="Emails",this.model.initialize(this.parent);let e={};e.parent_type=this.parent.module,e.parent_id=this.parent.data.id,e.parent_name=this.parent.data.name,e.isNew=!0,e.assigned_user_id=this.session.authData.userId,e.assigned_user_name=this.session.authData.userName,e.modified_by_id=this.session.authData.userId,e.modified_by_name=this.session.authData.userName,e.date_entered=new Date,e.date_modified=new Date,this.model.setFields(e),this.model.startEdit()}setViewData(){this.view.setEditMode(),this.view.isEditable=!0}get isDirty(){return this.model.isDirty()}get disabled(){let e=this.model.getFieldValue("recipient_addresses"),t=this.model.getFieldValue("mailbox_id"),s=this.model.getFieldValue("name"),i=e?e.find((e=>"to"==e.address_type)):void 0;return!(s&&t&&e&&i)||this.sending}sendEmail(){let e=new ze.B;return this.modal.openModal("SystemLoadingModal",!1).subscribe((t=>{t.instance.messagelabel="LBL_SENDING",this.sending=!0,this.model.setFields({type:"out",to_be_sent:"1",from_addr:this.model.getField("from_addr_name"),to_addrs:this.model.getField("to_addrs_names")}),this.model.save().subscribe({next:s=>{t.instance.self.destroy(),e.next(!0)},error:()=>{t.instance.self.destroy(),this.sending=!1,e.error("Error sending email")}})})),e.asObservable()}static#e=this.ɵfac=function(e){return new(e||OutputRevisionsPDFTabContainerEmail)(c.rXU(p.g,4),c.rXU(p.g),c.rXU(P.U),c.rXU(_.H),c.rXU(We.d),c.rXU(R.y),c.rXU(y.o),c.rXU(u.B),c.rXU(m.yu),c.rXU(Je.d))};static#t=this.ɵcmp=c.VBU({type:OutputRevisionsPDFTabContainerEmail,selectors:[["outputrevisions-pdf-tab-container-email"]],inputs:{filelist:"filelist",attachmentContent:"attachmentContent"},outputs:{email_sent:"email_sent"},features:[c.Jv_([P.U,p.g])],decls:2,vars:4,consts:[["direction","vertical",3,"fieldset"],["component","SpiceAttachmentsPanel",3,"componentattributes","componentref"]],template:function(e,t){1&e&&(c.nrm(0,"object-record-fieldset",0),c.j41(1,"system-dynamic-component",1),c.bIt("componentref",(function(e){return t.attachmentsPanelRef=e})),c.k0s()),2&e&&(c.Y8G("fieldset",t.fieldset),c.R7$(),c.Y8G("componentattributes",c.eq3(2,Qe,t.filelist)))},dependencies:[h.D,Ke.s],encapsulation:2})}return OutputRevisionsPDFTabContainerEmail})();function et(e,t){if(1&e&&(c.j41(0,"option",20),c.nrm(1,"system-display-datetime",21),c.EFF(2),c.k0s()),2&e){const e=t.$implicit;c.Y8G("ngValue",e.id),c.R7$(),c.Y8G("date",e.date_entered),c.R7$(),c.SpI(" (",e.created_by,")")}}function tt(e,t){if(1&e){const e=c.RV6();c.j41(0,"button",8),c.bIt("click",(function(){c.eBV(e);const t=c.XpG();return c.Njj(t.printCurrent())})),c.nrm(1,"system-button-icon",22),c.k0s()}if(2&e){const e=c.XpG();c.Y8G("disabled",!e.outputRevision||e.loading)}}function st(e,t){if(1&e){const e=c.RV6();c.j41(0,"button",8),c.bIt("click",(function(){c.eBV(e);const t=c.XpG();return c.Njj(t.downloadOutput())})),c.nrm(1,"system-button-icon",23),c.k0s()}if(2&e){const e=c.XpG();c.Y8G("disabled",!e.outputRevision||e.loading)}}function it(e,t){if(1&e){const e=c.RV6();c.j41(0,"button",8),c.bIt("click",(function(){c.eBV(e);const t=c.XpG();return c.Njj(t.showEmail=!0)})),c.nrm(1,"system-button-icon",24),c.k0s()}if(2&e){const e=c.XpG();c.Y8G("disabled",!e.outputRevision||e.loading)}}function lt(e,t){if(1&e){const e=c.RV6();c.j41(0,"button",25),c.bIt("click",(function(){c.eBV(e);const t=c.XpG();return c.Njj(t.cancelSend())})),c.nrm(1,"system-button-icon",26),c.k0s()}}function nt(e,t){if(1&e){const e=c.RV6();c.j41(0,"button",8),c.bIt("click",(function(){c.eBV(e);const t=c.XpG();return c.Njj(t.sendEmail())})),c.nrm(1,"system-button-icon",27),c.k0s()}if(2&e){const e=c.XpG();c.Y8G("disabled",!e.canSend)}}function ot(e,t){if(1&e&&c.nrm(0,"system-object-preview",28),2&e){const e=c.XpG();c.Y8G("data",e.blobFile)}}function at(e,t){1&e&&(c.j41(0,"div",29)(1,"system-illustration-no-data"),c.nrm(2,"system-label",30),c.k0s()())}function dt(e,t){if(1&e&&c.nrm(0,"outputrevisions-pdf-tab-container-email",31),2&e){const e=c.XpG();c.Y8G("filelist",e.filelist)}}let rt=(()=>{class OutputRevisionsPDFTabContainer{constructor(e,t,s,i,l,n){this.model=e,this.backend=t,this.helper=s,this.modal=i,this.toast=l,this.language=n,this.file={},this.blobFile="",this.loading=!1,this.outputRevision="",this.outputRevisions=[],this.subscriptions=new g.yU,this.showEmail=!1}ngOnInit(){this.getOutputs(),this.subscriptions.add(this.model.saved$.subscribe({next:()=>{this.getOutputs()}}))}ngOnDestroy(){this.subscriptions.unsubscribe()}loadOutput(){this.loading=!0,this.backend.getRequest(`common/spiceattachments/module/OutputRevisions/${this.outputRevision}/byfield/file`).subscribe({next:e=>{this.file=e,this.blobFile=atob(this.file.file),this.loading=!1},error:e=>{this.loading=!1}})}get outputDescription(){return this.outputRevision?this.outputRevisions.find((e=>e.id==this.outputRevision)).description:""}getOutputs(e=!1){this.loading=!0,this.backend.getRequest(`module/${this.model.module}/${this.model.id}/related/outputrevisions?offset=0&limit=99`).subscribe({next:t=>{this.loading=!1,this.outputRevisions=[];for(let e in t)if(t.hasOwnProperty(e)){let s=this.model.utils.backendModel2spice("OutputRevisions",t[e]);this.outputRevisions.push({id:s.id,date_entered:s.date_entered,created_by:s.created_by_user.user_name,description:s.description})}this.outputRevisions.sort(((e,t)=>e.date_entered.isBefore(t.date_entered)?1:-1)),this.outputRevisions.length>0&&(e||!this.outputRevision)&&(this.outputRevision=this.outputRevisions[0].id,this.loadOutput())},error:e=>{this.loading=!1}})}downloadOutput(){if(this.file.file){let e=this.helper.b64toBlob(this.file.file,"application/pdf"),t=URL.createObjectURL(e),s=document.createElement("a");document.body.appendChild(s),s.href=t,s.download=this.file.filename,s.type="application/pdf",s.click(),s.remove()}}createNewOutput(){let e=this.modal.await("LBL_LOADING_TEMPLATES");this.backend.getRequest(`module/OutputTemplates/formodule/${this.model.module}/${this.model.id}`).subscribe({next:t=>{if(e.emit(!0),t.length>0)if(t.length>1){let e=t.find((e=>1==e.default));this.modal.prompt("input",null,"LBL_SELECT_TEMPLATE","shade",e?e.id:null,t.map((e=>({value:e.id,display:e.name}))),"radio").subscribe({next:e=>{e&&this.generateOutput(e)}})}else this.generateOutput(t[0].id)},error:t=>{e.emit(!0),this.toast.sendToast("LBL_NO_TEMPLATE_FOUND","warning")}})}generateOutput(e){let t=this.modal.await("LBL_GENERATING");this.backend.getRequest(`module/OutputRevisions/${this.model.module}/${this.model.id}/output/${e}/preview`).subscribe({next:s=>{t.emit(!0),this.modal.openModal("OutputRevisionsPDFTabContainerPreview").subscribe({next:t=>{t.instance.data=atob(s.file),t.instance.name=s.filename,t.instance.type=s.file_mime_type,t.instance.save$.subscribe({next:t=>{t&&(this.outputRevisions.length>0?this.modal.prompt("input_text","MSG_CREATE_NEW_OUTPUT","MSG_CREATE_NEW_OUTPUT").subscribe({next:t=>{this.postOutput(e,t)}}):this.postOutput(e))}})}})},error:()=>{t.emit(!0)}})}postOutput(e,t=void 0){this.loading=!0,this.backend.postRequest(`module/OutputRevisions/${this.model.module}/${this.model.id}/output/${e}`,{},{description:t}).subscribe({next:e=>{this.loading=!1,this.getOutputs(!0)},error:()=>{this.loading=!1}})}printCurrent(){let e=this.modal.await("LBL_PRINTING");this.backend.putRequest(`module/OutputRevisions/${this.outputRevision}/print`).subscribe({next:t=>{e.emit(!0),t.printed?this.toast.sendToast("LBL_PRINTED","success"):this.toast.sendToast("LBL_PRINT_ERROR","error")},error:t=>{e.emit(!0),this.toast.sendToast("LBL_PRINT_ERROR","error",t.error.error)}})}get filelist(){return[{size:this.file.filesize,name:this.file.filename,type:this.file.file_mime_type,filecontent:this.file.file}]}get canSend(){return this.emailContainer&&!this.emailContainer.disabled}cancelSend(){this.emailContainer&&!this.emailContainer.isDirty?this.modal.prompt("confirm","MSG_CANCEL_SEND_EMAIL","MSG_CANCEL_SEND_EMAIL").subscribe({next:e=>{e&&(this.showEmail=!1)}}):this.showEmail=!1}sendEmail(){this.emailContainer.sendEmail().subscribe({next:()=>{this.showEmail=!1}})}static#e=this.ɵfac=function(e){return new(e||OutputRevisionsPDFTabContainer)(c.rXU(p.g),c.rXU(_.H),c.rXU(We.d),c.rXU(R.y),c.rXU(y.o),c.rXU(u.B))};static#t=this.ɵcmp=c.VBU({type:OutputRevisionsPDFTabContainer,selectors:[["outputrevisions-pdf-tab-container"]],viewQuery:function(e,t){if(1&e&&c.GBs(Ze,5),2&e){let e;c.mGM(e=c.lsd())&&(t.emailContainer=e.first)}},decls:24,vars:17,consts:[[1,"slds-size--1-of-1","slds-height_full"],[1,"slds-grid","slds-p-bottom--xx-small"],[1,"slds-form-element","slds-grid","slds-grid_vertical-align-center","slds-col--bump-right"],[1,"slds-form-element__control"],[1,"slds-select_container",2,"min-width","200px"],[1,"slds-select",3,"disabled","ngModel","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"slds-m-horizontal--xx-small",3,"helpText"],[1,"slds-button","slds-button--icon","slds-button--icon-border",3,"disabled","click"],["icon","sync"],["icon","new"],["class","slds-button slds-button--icon slds-button--icon-border",3,"disabled","click",4,"ngIf"],["class","slds-button slds-button--icon slds-button--icon-border",3,"click",4,"ngIf"],[1,"slds-grid",2,"height","calc(100% - 36px)","overflow","hidden",3,"system-overlay-loading-spinner"],[1,"slds-height_full"],["objectContainerHeight","100%","type","application/pdf",3,"data",4,"ngIf"],["class","slds-box--border slds-height_full slds-size--1-of-1 slds-align--absolute-center",4,"ngIf"],[1,"slds-height_full","slds-p-left--xx-small","slds-scrollable--y"],[1,"slds-box--border","slds-height_full"],[3,"filelist",4,"ngIf"],[3,"ngValue"],[3,"date"],["icon","print"],["icon","download"],["icon","email"],[1,"slds-button","slds-button--icon","slds-button--icon-border",3,"click"],["icon","close"],["icon","send"],["objectContainerHeight","100%","type","application/pdf",3,"data"],[1,"slds-box--border","slds-height_full","slds-size--1-of-1","slds-align--absolute-center"],["label","LBL_NO_FILE"],[3,"filelist"]],template:function(e,t){1&e&&(c.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"select",5),c.mxI("ngModelChange",(function(e){return c.DH7(t.outputRevision,e)||(t.outputRevision=e),e})),c.bIt("ngModelChange",(function(){return t.loadOutput()})),c.DNE(6,et,3,3,"option",6),c.k0s()()(),c.nrm(7,"system-icon-help-text",7),c.j41(8,"button",8),c.bIt("click",(function(){return t.getOutputs()})),c.nrm(9,"system-button-icon",9),c.k0s(),c.j41(10,"button",8),c.bIt("click",(function(){return t.createNewOutput()})),c.nrm(11,"system-button-icon",10),c.k0s()(),c.DNE(12,tt,2,1,"button",11)(13,st,2,1,"button",11)(14,it,2,1,"button",11)(15,lt,2,0,"button",12)(16,nt,2,1,"button",11),c.k0s(),c.j41(17,"div",13)(18,"div",14),c.DNE(19,ot,1,1,"system-object-preview",15)(20,at,3,0,"div",16),c.k0s(),c.j41(21,"div",17)(22,"div",18),c.DNE(23,dt,1,1,"outputrevisions-pdf-tab-container-email",19),c.k0s()()()()),2&e&&(c.R7$(5),c.Y8G("disabled",t.outputRevisions.length<2||t.loading||t.showEmail),c.R50("ngModel",t.outputRevision),c.R7$(),c.Y8G("ngForOf",t.outputRevisions),c.R7$(),c.Y8G("helpText",t.outputDescription),c.R7$(),c.Y8G("disabled",t.loading||t.showEmail),c.R7$(2),c.Y8G("disabled",t.loading||t.showEmail),c.R7$(2),c.Y8G("ngIf",!t.showEmail),c.R7$(),c.Y8G("ngIf",!t.showEmail),c.R7$(),c.Y8G("ngIf",!t.showEmail),c.R7$(),c.Y8G("ngIf",t.showEmail),c.R7$(),c.Y8G("ngIf",t.showEmail),c.R7$(),c.Y8G("system-overlay-loading-spinner",t.loading),c.R7$(),c.Y8G("@slideInOut",t.showEmail?"open":"closed"),c.R7$(),c.Y8G("ngIf",t.blobFile),c.R7$(),c.Y8G("ngIf",!t.blobFile&&!t.loading),c.R7$(),c.Y8G("@slideInOut2",t.showEmail?"open":"closed"),c.R7$(2),c.Y8G("ngIf",t.showEmail))},encapsulation:2,data:{animation:[(0,qe.hZ)("slideInOut",[(0,qe.wk)("open",(0,qe.iF)({width:"50%"})),(0,qe.wk)("closed",(0,qe.iF)({width:"100%"})),(0,qe.kY)("open <=> closed",[(0,qe.i0)("200ms")])]),(0,qe.hZ)("slideInOut2",[(0,qe.wk)("open",(0,qe.iF)({width:"50%"})),(0,qe.wk)("closed",(0,qe.iF)({width:"0%"})),(0,qe.kY)("open <=> closed",[(0,qe.i0)("200ms")])])]}})}return OutputRevisionsPDFTabContainer})();var ct=s(98217);let ut=(()=>{class OutputRevisionsPDFTabContainerPreview{constructor(){this.self={},this.type="",this.name="",this.loadingerror=!1,this.save$=new c.bkB}closeModal(e=!1){this.save$.emit(e),this.self.destroy()}static#e=this.ɵfac=function(e){return new(e||OutputRevisionsPDFTabContainerPreview)};static#t=this.ɵcmp=c.VBU({type:OutputRevisionsPDFTabContainerPreview,selectors:[["outputrevisions-pdf-tab-container-preview"]],inputs:{type:"type",name:"name",loadingerror:"loadingerror",data:"data"},outputs:{save$:"save$"},decls:10,vars:3,consts:[["size","large"],[3,"close"],["margin","none"],[3,"data","type"],[1,"slds-button","slds-button--neutral",3,"click"],["label","LBL_CANCEL"],[1,"slds-button","slds-button--brand",3,"click"],["label","LBL_SAVE"]],template:function(e,t){1&e&&(c.j41(0,"system-modal",0)(1,"system-modal-header",1),c.bIt("close",(function(){return t.closeModal()})),c.EFF(2),c.k0s(),c.j41(3,"system-modal-content",2),c.nrm(4,"system-object-preview",3),c.k0s(),c.j41(5,"system-modal-footer")(6,"button",4),c.bIt("click",(function(){return t.closeModal()})),c.nrm(7,"system-label",5),c.k0s(),c.j41(8,"button",6),c.bIt("click",(function(){return t.closeModal(!0)})),c.nrm(9,"system-label",7),c.k0s()()()),2&e&&(c.R7$(2),c.JRh(t.name),c.R7$(2),c.Y8G("data",t.data)("type",t.type))},dependencies:[b.W,ie.D,le.I,ne.Q,oe.C,ct.$],encapsulation:2})}return OutputRevisionsPDFTabContainerPreview})();var mt=s(16435),pt=s(70923),ht=s(59851),ft=s(32130);let bt=(()=>{class ModuleOutputTemplates{static#e=this.ɵfac=function(e){return new(e||ModuleOutputTemplates)};static#t=this.ɵmod=c.$C({type:ModuleOutputTemplates});static#s=this.ɵinj=c.G2t({imports:[i.MD,l.YN,o.ObjectFields,a.GlobalComponents,d.ObjectComponents,r.SystemComponents,n.h]})}return ModuleOutputTemplates})();("undefined"==typeof ngJitMode||ngJitMode)&&c.Obh(bt,{declarations:[$,I,N,X,U.z,V.y,ee,Pe,D,He,rt,Ze,ut],imports:[i.MD,l.YN,o.ObjectFields,a.GlobalComponents,d.ObjectComponents,r.SystemComponents,n.h],exports:[U.z]}),c.wjB(rt,[i.Sq,i.bT,l.xH,l.y7,l.wz,l.BC,l.vS,F.t,mt.f,pt.L,b.W,ht.N,ct.$,ft.M,Ze],[])}}]);